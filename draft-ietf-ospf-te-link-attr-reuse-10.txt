



LSR Working Group                                         P. Psenak, Ed.
Internet-Draft                                               L. Ginsberg
Intended status: Standards Track                           Cisco Systems
Expires: May 2, 2020                                       W. Henderickx
                                                                   Nokia
                                                             J. Tantsura
                                                                  Apstra
                                                                J. Drake
                                                        Juniper Networks
                                                        October 30, 2019


             OSPF Link Traffic Engineering Attribute Reuse
               draft-ietf-ospf-te-link-attr-reuse-10.txt

Abstract

   Various link attributes have been defined in OSPF in the context of
   the MPLS Traffic Engineering (TE) and GMPLS.  Since the original
   RSVP-TE use case was defined, additional applications (e.g., SRTE,
   LFA) have been defined which also make use of the link attribute
   advertisements.  This document defines how to distribute link
   attributes in OSPFv2 and OSPFv3 for applications other than MPLS TE
   or GMPLS.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on May 2, 2020.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.





Psenak, et al.             Expires May 2, 2020                  [Page 1]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements notation . . . . . . . . . . . . . . . . . .   3
   2.  Advertisement of Link Attributes  . . . . . . . . . . . . . .   3
     2.1.  OSPFv2 Extended Link Opaque LSA and OSPFv3 E-Router-LSA .   3
   3.  Advertisement of Application Specific Values  . . . . . . . .   4
   4.  Reused TE link attributes . . . . . . . . . . . . . . . . . .   7
     4.1.  Shared Risk Link Group (SRLG) . . . . . . . . . . . . . .   7
     4.2.  Extended Metrics  . . . . . . . . . . . . . . . . . . . .   8
     4.3.  Administrative Group  . . . . . . . . . . . . . . . . . .   9
     4.4.  TE Metric . . . . . . . . . . . . . . . . . . . . . . . .   9
   5.  Maximum Link Bandwidth  . . . . . . . . . . . . . . . . . . .   9
   6.  Local Interface IPv6 Address Sub-TLV  . . . . . . . . . . . .  10
   7.  Remote Interface IPv6 Address Sub-TLV . . . . . . . . . . . .  10
   8.  Deployment Considerations . . . . . . . . . . . . . . . . . .  10
     8.1.  Use of TE LSA Advertisements  . . . . . . . . . . . . . .  10
     8.2.  Use of Zero Length Application Identifier Bit Masks . . .  11
   9.  Attribute Advertisements and Enablement . . . . . . . . . . .  11
   10. Backward Compatibility  . . . . . . . . . . . . . . . . . . .  12
   11. Security Considerations . . . . . . . . . . . . . . . . . . .  13
   12. IANA Considerations . . . . . . . . . . . . . . . . . . . . .  13
     12.1.  OSPFv2 . . . . . . . . . . . . . . . . . . . . . . . . .  13
     12.2.  OSPFv3 . . . . . . . . . . . . . . . . . . . . . . . . .  14
   13. Contributors  . . . . . . . . . . . . . . . . . . . . . . . .  15
   14. Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .  15
   15. References  . . . . . . . . . . . . . . . . . . . . . . . . .  15
     15.1.  Normative References . . . . . . . . . . . . . . . . . .  15
     15.2.  Informative References . . . . . . . . . . . . . . . . .  16
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  18

1.  Introduction

   Various link attributes have been defined in OSPFv2 [RFC2328] and
   OSPFv3 [RFC5340] in the context of the MPLS TE and GMPLS.  All these
   attributes are distributed by OSPFv2 as sub-TLVs of the Link-TLV
   advertised in the OSPFv2 TE Opaque LSA [RFC3630].  In OSPFv3, they




Psenak, et al.             Expires May 2, 2020                  [Page 2]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


   are distributed as sub-TLVs of the Link-TLV advertised in the OSPFv3
   Intra-Area-TE-LSA as defined in [RFC5329].

   Many of these link attributes are useful outside of traditional MPLS
   Traffic Engineering or GMPLS.  This brings its own set of problems,
   in particular how to distribute these link attributes in OSPFv2 and
   OSPFv3 when MPLS TE and GMPLS are not deployed or are deployed in
   parallel with other applications that use these link attributes.

   [RFC7855] discusses use cases/requirements for Segment Routing (SR).
   Included among these use cases is Segment Routing Traffic Engineering
   (SRTE).  If both RSVP-TE and SRTE are deployed in a network, link
   attribute advertisements can be used by one or both of these
   applications.  As there is no requirement for the link attributes
   advertised on a given link used by SRTE to be identical to the link
   attributes advertised on that same link used by RSVP-TE, there is a
   clear requirement to indicate independently which link attribute
   advertisements are to be used by each application.

   As the number of applications which may wish to utilize link
   attributes may grow in the future, an additional requirement is that
   the extensions defined allow the association of additional
   applications to link attributes without altering the format of the
   advertisements or introducing new backwards compatibility issues.

   Finally, there may still be many cases where a single attribute value
   can be shared among multiple applications, so the solution should
   minimize advertising duplicate link/attribute when possible.

1.1.  Requirements notation

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

2.  Advertisement of Link Attributes

   This section outlines the solution for advertising link attributes
   originally defined for MPLS TE or GMPLS when they are used for other
   applications.

2.1.  OSPFv2 Extended Link Opaque LSA and OSPFv3 E-Router-LSA

   Extended Link Opaque LSAs as defined in [RFC7684] for OSPFv2 and
   Extended Router-LSAs [RFC8362] for OSPFv3 are used to advertise link
   attributes that are used by applications other then MPLS TE or GMPLS.
   These LSAs were defined as a generic containers for distribution of




Psenak, et al.             Expires May 2, 2020                  [Page 3]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


   the extended link attributes.  There are several advantages in using
   them:

   1.  Advertisement of the link attributes does not make the link part
       of the TE topology.  It avoids any conflicts and is fully
       compatible with [RFC3630] and [RFC5329].

   2.  The OSPFv2 TE Opaque LSA and OSPFv3 Intra-Area-TE-LSA remains
       truly opaque to OSPFv2 and OSPFv3 as originally defined in
       [RFC3630] and [RFC5329] respectively.  Their contents are not
       inspected by OSPF, that acts as a pure transport.

   3.  There is clear distinction between link attributes used by TE and
       link attributes used by other OSPFv2 or OSPFv3 applications.

   4.  All link attributes that are used by other applications are
       advertised in a single LSA, the Extended Link Opaque LSA in
       OSPFv2 or the OSPFv3 E-Router-LSA [RFC8362] in OSPFv3.

   The disadvantage of this approach is that in rare cases, the same
   link attribute is advertised in both the TE Opaque and Extended Link
   Attribute LSAs in OSPFv2 or the Intra-Area-TE-LSA and E-Router-LSA in
   OSPFv3.  Additionally, there will be additional standardization
   effort.  However, this could also be viewed as an advantage as the
   non-TE use cases for the TE link attributes are documented and
   validated by the LSR working group.

   Extended Link Opaque LSA [RFC7684] and E-Router-LSA [RFC8362] are
   used to advertise any link attributes used for non-TE applications in
   OSPFv2 or OSPFv3 respectively, including those that have been
   originally defined for TE applications.

   TE link attributes used for RSVP-TE/GMPLS continue to use OSPFv2 TE
   Opaque LSA [RFC3630] and OSPFv3 Intra-Area-TE-LSA [RFC5329].

   The format of the link attribute TLVs that have been defined for TE
   applications will be kept unchanged even when they are used for non-
   TE applications.  Unique code points will be allocated for these TE
   link attribute TLVs from the OSPFv2 Extended Link TLV Sub-TLV
   Registry [RFC7684] and from the OSPFv3 Extended LSA Sub-TLV Registry
   [RFC8362].  For each reused TLV, the code point will be defined in an
   IETF document along with the expected use-case(s).

3.  Advertisement of Application Specific Values

   To allow advertisement of the application specific values of the link
   attribute, a new Application Specific Link Attributes (ASLA) sub-TLV




Psenak, et al.             Expires May 2, 2020                  [Page 4]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


   is defined.  The ASLA sub-TLV is a sub-TLV of the OSPFv2 Extended
   Link TLV [RFC7471] and OSPFv3 Router-Link TLV [RFC8362].

   The ASLA sub-TLV is an optional sub-TLV and can appear multiple times
   in the OSPFv2 Extended Link TLV and OSPFv3 Router-Link TLV.  It has
   the following format:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              Type             |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  SABM Length  |  UDABM Length |            Reserved           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Standard Application Identifier Bit-Mask             |
   +-                                                             -+
   |                            ...                                |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           User Defined Application Identifier Bit-Mask        |
   +-                                                             -+
   |                            ...                                |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Link Attribute sub-sub-TLVs              |
   +-                                                             -+
   |                            ...                                |

   where:

      Type: 10 (OSPFv2), 11 (OSPFv3)

      Length: variable

      SABM Length: Standard Application Identifier Bit-Mask Length.  It
      MUST be a multiple of 4 bytes.  If the Standard Application Bit-
      Mask is not present, the Standard Application Bit-Mask Length MUST
      be set to 0.

      UDABM Length: User Defined Application Identifier Bit-Mask Length.
      It MUST be a multiple of 4 bytes.  If the User Defined Application
      Bit-Mask is not present, the User Defined Application Bit-Mask
      Length MUST be set to 0.

      Standard Application Identifier Bit-Mask: Optional set of bits,
      where each bit represents a single standard application.  Bits are
      defined in [I-D.ietf-isis-te-app], which also request a new IANA
      "Link Attribute Applications" registry under "Interior Gateway
      Protocol (IGP) Parameters" for them.  The bits are repeated here
      for informational purpose:



Psenak, et al.             Expires May 2, 2020                  [Page 5]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


         Bit-0 (R-bit): RSVP TE

         Bit-1 (S-bit): Segment Routing TE

         Bit-2 (F-bit): Loop Free Alternate (LFA).  Includes all LFA
         types

      User Defined Application Identifier Bit-Mask: Optional set of
      bits, where each bit represents a single user defined application.

   Standard Application Identifier Bits are defined/sent starting with
   Bit 0.  Additional bit definitions that are defined in the future
   SHOULD be assigned in ascending bit order so as to minimize the
   number of octets that will need to be transmitted.

   User Defined Application Identifier Bits have no relationship to
   Standard Application bits and are NOT managed by IANA or any other
   standards body.  It is recommended that bits are used starting with
   Bit 0 so as to minimize the number of octets required to advertise
   all of them.

   Undefined bits in both Bit-Masks MUST be transmitted as 0 and MUST be
   ignored on receipt.  Bits that are NOT transmitted MUST be treated as
   if they are set to 0 on receipt.

   If the link attribute advertisement is limited to be used by a
   specific set of applications, corresponding Bit-Masks MUST be present
   and application specific bit(s) MUST be set for all applications that
   use the link attributes advertised in the ASLA sub-TLV.

   Application Bit-Masks apply to all link attributes that support
   application specific values and are advertised in the ASLA sub-TLV.

   The advantage of not making the Application Bit-Masks part of the
   attribute advertisement itself is that we can keep the format of the
   link attributes that have been defined previously and reuse the same
   format when advertising them in the ASLA sub-TLV.

   When neither the Standard Application Bits nor the User Defined
   Application bits are set (i.e., both SABM Length and UDABM Length are
   0) in the ASLA sub-TLV, then the link attributes included in it MUST
   be considered as being applicable to all applications.

   If, however, another advertisement of the same link attribute
   includes any Application Bit-Mask in the ASLA sub-TLV, applications
   that are listed in the Application Bit-Masks of such ASLA sub-TLV
   SHOULD use the attribute advertisement which has the application
   specific bit set in the Application Bit-Masks.



Psenak, et al.             Expires May 2, 2020                  [Page 6]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


   If the same application is listed in the Application Bit-Masks of
   more then one ASLA sub-TLV, the application SHOULD use the first
   advertisement and ignore any subsequent advertisements of the same
   attribute.  This situation SHOULD be logged as an error.

   This document defines the initial set of link attributes that MUST
   use ASLA sub-TLV if advertised in the OSPFv2 Extended Link TLV or in
   the OSPFv3 Router-Link TLV.  If the ASLA sub-TLV includes any link
   attribute(s) NOT listed below, they MUST be ignored.  Documents which
   define new link attributes MUST state whether the new attributes
   support application specific values and as such MUST be advertised in
   an ASLA sub-TLV.  The link attributes that MUST be advertised in ASLA
   sub-TLVs are:

      - Shared Risk Link Group

      - Unidirectional Link Delay

      - Min/Max Unidirectional Link Delay

      - Unidirectional Delay Variation

      - Unidirectional Link Loss

      - Unidirectional Residual Bandwidth

      - Unidirectional Available Bandwidth

      - Unidirectional Utilized Bandwidth

      - Administrative Group

      - Extended Administrative Group

      - TE Metric

4.  Reused TE link attributes

   This section defines the use case and code points from the OSPFv2
   Extended Link TLV Sub-TLV Registry and OSPFv3 Extended LSA Sub-TLV
   Registry for some of the link attributes that have been originally
   defined for TE or GMPLS.

4.1.  Shared Risk Link Group (SRLG)

   The SRLG of a link can be used in OSPF calculated IPFRR [RFC5714] to
   compute a backup path that does not share any SRLG group with the
   protected link.



Psenak, et al.             Expires May 2, 2020                  [Page 7]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


   To advertise the SRLG of the link in the OSPFv2 Extended Link TLV,
   the same format for the sub-TLV defined in section 1.3 of [RFC4203]
   is used and TLV type 11 is used.  Similarly, for OSPFv3 to advertise
   the SRLG in the OSPFv3 Router-Link TLV, TLV type 12 is used.

4.2.  Extended Metrics

   [RFC3630] defines several link bandwidth types.  [RFC7471] defines
   extended link metrics that are based on link bandwidth, delay and
   loss characteristics.  All these can be used to compute primary and
   backup paths within an OSPF area to satisfy requirements for
   bandwidth, delay (nominal or worst case) or loss.

   To advertise extended link metrics in the OSPFv2 Extended Link TLV,
   the same format for the sub-TLVs defined in [RFC7471] is used with
   the following TLV types:

      12 - Unidirectional Link Delay

      13 - Min/Max Unidirectional Link Delay

      14 - Unidirectional Delay Variation

      15 - Unidirectional Link Loss

      16 - Unidirectional Residual Bandwidth

      17 - Unidirectional Available Bandwidth

      18 - Unidirectional Utilized Bandwidth

   To advertise extended link metrics in the OSPFv3 Extended LSA Router-
   Link TLV, the same format for the sub-TLVs defined in [RFC7471] is
   used with the following TLV types:

      13 - Unidirectional Link Delay

      14 - Min/Max Unidirectional Link Delay

      15 - Unidirectional Delay Variation

      16 - Unidirectional Link Loss

      17 - Unidirectional Residual Bandwidth

      18 - Unidirectional Available Bandwidth

      19 - Unidirectional Utilized Bandwidth



Psenak, et al.             Expires May 2, 2020                  [Page 8]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


4.3.  Administrative Group

   [RFC3630] and [RFC7308] define the Administrative Group and Extended
   Administrative Group sub-TLVs respectively.

   To advertise the Administrative Group and Extended Administrative
   Group in the OSPFv2 Extended Link TLV, the same format for the sub-
   TLVs defined in [RFC3630] and [RFC7308] is used with the following
   TLV types:

      19 - Administrative Group

      20 - Extended Administrative Group

   To advertise Administrative Group and Extended Administrative Group
   in the OSPFv3 Router-Link TLV, the same format for the sub-TLVs
   defined in [RFC3630] and [RFC7308] is used with the following TLV
   types:

      20 - Administrative Group

      21 - Extended Administrative Group

4.4.  TE Metric

   [RFC3630] defines TE Metric.

   To advertise the TE Metric in the OSPFv2 Extended Link TLV, the same
   format for the sub-TLV defined in section 2.5.5 of [RFC3630] is used
   and TLV type 22 is used.  Similarly, for OSPFv3 to advertise the TE
   Metric in the OSPFv3 Router-Link TLV, TLV type 22 is used.

5.  Maximum Link Bandwidth

   Maximum link bandwidth is an application independent attribute of the
   link that is defined in [RFC3630].  Because it is an application
   independent attribute, it MUST NOT be advertised in ASLA sub-TLV.
   Instead, it MAY be advertised as a sub-TLV of the Extended Link
   Opaque LSA Extended Link TLV in OSPFv2 [RFC7684] or sub-TLV of OSPFv3
   E-Router-LSA Router-Link TLV in OSPFv3 [RFC8362].

   To advertise the Maximum link bandwidth in the OSPFv2 Extended Link
   TLV, the same format for sub-TLV defined in [RFC3630] is used with
   TLV type 23.

   To advertise the Maximum link bandwidth in the OSPFv3 Router-Link
   TLV, the same format for sub-TLV defined in [RFC3630] is used with
   TLV type 23.



Psenak, et al.             Expires May 2, 2020                  [Page 9]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


6.  Local Interface IPv6 Address Sub-TLV

   The Local Interface IPv6 Address Sub-TLV is an application
   independent attribute of the link that is defined in [RFC5329].
   Because it is an application independent attribute, it MUST NOT be
   advertised in the ASLA sub-TLV.  Instead, it MAY be advertised as a
   sub-TLV of the OSPFv3 E-Router-LSA Router-Link TLV [RFC8362].

   To advertise the Local Interface IPv6 Address Sub-TLV in the OSPFv3
   Router-Link TLV, the same format for sub-TLV defined in [RFC5329] is
   used with TLV type 24.

7.  Remote Interface IPv6 Address Sub-TLV

   The Remote Interface IPv6 Address Sub-TLV is an application
   independent attribute of the link that is defined in [RFC5329].
   Because it is an application independent attribute, it MUST NOT be
   advertised in the ASLA sub-TLV.  Instead, it MAY be advertised as a
   sub-TLV of the OSPFv3 E-Router-LSA Router-Link TLV [RFC8362].

   To advertise the Remote Interface IPv6 Address Sub-TLV in the OSPFv3
   Router-Link TLV, the same format for sub-TLV defined in [RFC5329] is
   used with TLV type 25.

8.  Deployment Considerations

8.1.  Use of TE LSA Advertisements

   Bit Identifers for Standard Applications are defined in Section 3.
   All of the identifiers defined in this document are associated with
   applications which were already deployed in some networks prior to
   the writing of this document.  Therefore, such applications have been
   deployed using the TE LSA advertisements.  The Standard Applications
   defined in this document MAY continue to use TE LSA advertisements
   for a given link so long as at least one of the following conditions
   is true:

      The application is RSVP-TE

      The application is SRTE or LFA and RSVP-TE is not deployed
      anywhere in the network

      The application is SRTE or LFA, RSVP-TE is deployed in the
      network, and both the set of links on which SRTE and/or LFA
      advertisements are required and the attribute values used by SRTE
      and/or LFA on all such links is fully congruent with the links and
      attribute values used by RSVP-TE




Psenak, et al.             Expires May 2, 2020                 [Page 10]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


   Under the conditions defined above, implementations which support the
   extensions defined in this document have the choice of using TE LSA
   advertisements or application specific advertisements in support of
   SRTE and/or LFA.  This will require implementations to provide
   controls specifying which type of advertisements are to be sent/
   processed on receive for these applications.  Further discussion of
   the associated issues can be found in Section 10.

   New applications which future documents define to make use of the
   advertisements defined in this document MUST NOT make use of TE LSA
   advertisements.

8.2.  Use of Zero Length Application Identifier Bit Masks

   If link attributes are advertised associated with zero length
   Application Identifier Bit-Masks for both standard applications and
   user defined applications, then that set of link attributes MAY be
   used by any application.  If support for a new application is
   introduced on any node in a network in the presence of such
   advertisements, these advertisements MAY be used by the new
   application.  If this is not what is intended, then existing
   advertisements MUST be readvertised with an explicit set of
   applications specified before a new application is introduced.

9.  Attribute Advertisements and Enablement

   This document defines extensions to support the advertisement of
   application specific link attributes.

   Whether the presence of link attribute advertisements for a given
   application indicates that the application is enabled on that link
   depends upon the application.  Similarly, whether the absence of link
   attribute advertisements indicates that the application is not
   enabled depends upon the application.

   In the case of RSVP-TE, the advertisement of application specific
   link attributes implies that RSVP is enabled on that link.  The
   absence of RSVP-TE application specific link attributes in
   combination with the absence of legacy advertisements implies that
   RSVP is NOT enabled on that link.

   In the case of SRTE, advertisement of application specific link
   attributes does NOT indicate enablement of SRTE.  The advertisements
   are only used to support constraints which may be applied when
   specifying an explicit path.  SRTE is implicitly enabled on all links
   which are part of the Segment Routing enabled topology independent of
   the existence of link attribute advertisements.




Psenak, et al.             Expires May 2, 2020                 [Page 11]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


   In the case of LFA, advertisement of application specific link
   attributes does NOT indicate enablement of LFA on that link.
   Enablement is controlled by local configuration.

   If, in the future, additional standard applications are defined to
   use this mechanism, the specification defining this use MUST define
   the relationship between application specific link attribute
   advertisements and enablement for that application.

   This document allows the advertisement of application specific link
   attributes with no application identifiers i.e., both the Standard
   Application Identifier Bit-Mask and the User Defined Application Bit
   Mask are not present (See Section 3).  This supports the use of the
   link attribute by any application.  In the presence of an application
   where the advertisement of link attribute advertisements is used to
   infer the enablement of an application on that link (e.g., RSVP-TE),
   the absence of the Application Identifier leaves ambiguous whether
   that application is enabled on such a link.  This needs to be
   considered when making use of the "any application" encoding.

10.  Backward Compatibility

   Link attributes may be concurrently advertised in both the TE Opaque
   LSA and the Extended Link Opaque LSA in OSPFv2 and the OSPFv3 Intra-
   Area-TE-LSA and OSPFv3 Extended LSA Router-Link TLV in OSPFv3.

   In fact, there is at least one OSPF implementation that utilizes the
   link attributes advertised in TE Opaque LSAs [RFC3630] for Non-RSVP
   TE applications.  For example, this implementation of LFA and remote
   LFA utilizes links attributes such as Shared Risk Link Groups (SRLG)
   [RFC4203] and Admin Group [[RFC3630] advertised in TE Opaque LSAs.
   These applications are described in [RFC5286], [RFC7490], [RFC7916]
   and [RFC8102].

   When an OSPF routing domain includes routers using link attributes
   from the OSPFv2 TE Opaque LSAs or the OSPFv3 Intra-Area-TE-LSA for
   Non-RSVP TE applications defined in this document (i.e.  SRTE and
   LFA), OSPF routers in that domain SHOULD continue to advertise such
   OSPFv2 TE Opaque LSAs or the OSPFv3 Intra-Area-TE-LSA.  In such a
   deployment, the advertised attributes SHOULD be the same and Non-
   RSVP application access to link attributes is a matter of local
   policy.

   When advertising link-attributes for any new applications other then
   RSVP-TE, SRTE or LFA, OSPF routers MUST NOT use TE Opaque LSA or
   OSPFv3 Intra-Area-TE-LSA.  Instead, advertisement in the OSPFv2
   Extended Link Attributes LSAs or OSPFv3 E-Router-LSA MUST be used.




Psenak, et al.             Expires May 2, 2020                 [Page 12]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


   It is RECOMMENDED to advertise link-attributes for RSVP-TE in the
   existing TE LSAs.

11.  Security Considerations

   Existing security extensions as described in [RFC2328], [RFC5340] and
   [RFC8362] apply to extensions defined in this document.  While OSPF
   is under a single administrative domain, there can be deployments
   where potential attackers have access to one or more networks in the
   OSPF routing domain.  In these deployments, stronger authentication
   mechanisms such as those specified in [RFC5709], [RFC7474], [RFC4552]
   or [RFC7166] SHOULD be used.

   Implementations MUST assure that malformed TLV and Sub-TLV defined in
   this document are detected and do not provide a vulnerability for
   attackers to crash the OSPF router or routing process.  Reception of
   a malformed TLV or Sub-TLV SHOULD be counted and/or logged for
   further analysis.  Logging of malformed TLVs and Sub-TLVs SHOULD be
   rate-limited to prevent a Denial of Service (DoS) attack (distributed
   or otherwise) from overloading the OSPF control plane.

12.  IANA Considerations

12.1.  OSPFv2

   OSPFv2 Extended Link TLV Sub-TLVs registry [RFC7684] defines sub-TLVs
   at any level of nesting for OSPFv2 Extended Link TLVs.  This
   specification updates OSPFv2 Extended Link TLV sub-TLVs registry with
   the following TLV types:

      10 - Application Specific Link Attributes

      11 - Shared Risk Link Group

      12 - Unidirectional Link Delay

      13 - Min/Max Unidirectional Link Delay

      14 - Unidirectional Delay Variation

      15 - Unidirectional Link Loss

      16 - Unidirectional Residual Bandwidth

      17 - Unidirectional Available Bandwidth

      18 - Unidirectional Utilized Bandwidth




Psenak, et al.             Expires May 2, 2020                 [Page 13]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


      19 - Administrative Group

      20 - Extended Administrative Group

      22 - TE Metric

      23 - Maximum Link Bandwidth

12.2.  OSPFv3

   OSPFv3 Extended LSA Sub-TLV Registry [RFC8362] defines sub-TLVs at
   any level of nesting for OSPFv3 Extended LSAs.  This specification
   updates OSPFv3 Extended LSA Sub-TLV Registry with the following TLV
   types:

      11 - Application Specific Link Attributes

      12 - Shared Risk Link Group

      13 - Unidirectional Link Delay

      14 - Min/Max Unidirectional Link Delay

      15 - Unidirectional Delay Variation

      16 - Unidirectional Link Loss

      16 - Unidirectional Residual Bandwidth

      18 - Unidirectional Available Bandwidth

      19 - Unidirectional Utilized Bandwidth

      20 - Administrative Group

      21 - Extended Administrative Group

      22 - TE Metric

      23 - Maximum Link Bandwidth

      24 - Local Interface IPv6 Address Sub-TLV

      25 - Remote Interface IPv6 Address Sub-TLV







Psenak, et al.             Expires May 2, 2020                 [Page 14]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


13.  Contributors

   The following people contributed to the content of this document and
   should be considered as co-authors:



      Acee Lindem
      Cisco Systems
      301 Midenhall Way
      Cary, NC 27513
      USA

      Email: acee@cisco.com

      Ketan Talaulikar
      Cisco Systems, Inc.
      India

      Email: ketant@cisco.com

      Hannes Gredler
      RtBrick Inc.
      Austria

      Email: hannes@rtbrick.com


14.  Acknowledgments

   Thanks to Chris Bowers for his review and comments.

15.  References

15.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC3630]  Katz, D., Kompella, K., and D. Yeung, "Traffic Engineering
              (TE) Extensions to OSPF Version 2", RFC 3630,
              DOI 10.17487/RFC3630, September 2003,
              <https://www.rfc-editor.org/info/rfc3630>.






Psenak, et al.             Expires May 2, 2020                 [Page 15]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


   [RFC5329]  Ishiguro, K., Manral, V., Davey, A., and A. Lindem, Ed.,
              "Traffic Engineering Extensions to OSPF Version 3",
              RFC 5329, DOI 10.17487/RFC5329, September 2008,
              <https://www.rfc-editor.org/info/rfc5329>.

   [RFC5340]  Coltun, R., Ferguson, D., Moy, J., and A. Lindem, "OSPF
              for IPv6", RFC 5340, DOI 10.17487/RFC5340, July 2008,
              <https://www.rfc-editor.org/info/rfc5340>.

   [RFC7308]  Osborne, E., "Extended Administrative Groups in MPLS
              Traffic Engineering (MPLS-TE)", RFC 7308,
              DOI 10.17487/RFC7308, July 2014,
              <https://www.rfc-editor.org/info/rfc7308>.

   [RFC7684]  Psenak, P., Gredler, H., Shakir, R., Henderickx, W.,
              Tantsura, J., and A. Lindem, "OSPFv2 Prefix/Link Attribute
              Advertisement", RFC 7684, DOI 10.17487/RFC7684, November
              2015, <https://www.rfc-editor.org/info/rfc7684>.

   [RFC8362]  Lindem, A., Roy, A., Goethals, D., Reddy Vallem, V., and
              F. Baker, "OSPFv3 Link State Advertisement (LSA)
              Extensibility", RFC 8362, DOI 10.17487/RFC8362, April
              2018, <https://www.rfc-editor.org/info/rfc8362>.

15.2.  Informative References

   [I-D.ietf-isis-te-app]
              Ginsberg, L., Psenak, P., Previdi, S., Henderickx, W., and
              J. Drake, "IS-IS TE Attributes per application", draft-
              ietf-isis-te-app-08 (work in progress), October 2019.

   [RFC2328]  Moy, J., "OSPF Version 2", STD 54, RFC 2328,
              DOI 10.17487/RFC2328, April 1998,
              <https://www.rfc-editor.org/info/rfc2328>.

   [RFC4203]  Kompella, K., Ed. and Y. Rekhter, Ed., "OSPF Extensions in
              Support of Generalized Multi-Protocol Label Switching
              (GMPLS)", RFC 4203, DOI 10.17487/RFC4203, October 2005,
              <https://www.rfc-editor.org/info/rfc4203>.

   [RFC4552]  Gupta, M. and N. Melam, "Authentication/Confidentiality
              for OSPFv3", RFC 4552, DOI 10.17487/RFC4552, June 2006,
              <https://www.rfc-editor.org/info/rfc4552>.

   [RFC5286]  Atlas, A., Ed. and A. Zinin, Ed., "Basic Specification for
              IP Fast Reroute: Loop-Free Alternates", RFC 5286,
              DOI 10.17487/RFC5286, September 2008,
              <https://www.rfc-editor.org/info/rfc5286>.



Psenak, et al.             Expires May 2, 2020                 [Page 16]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


   [RFC5709]  Bhatia, M., Manral, V., Fanto, M., White, R., Barnes, M.,
              Li, T., and R. Atkinson, "OSPFv2 HMAC-SHA Cryptographic
              Authentication", RFC 5709, DOI 10.17487/RFC5709, October
              2009, <https://www.rfc-editor.org/info/rfc5709>.

   [RFC5714]  Shand, M. and S. Bryant, "IP Fast Reroute Framework",
              RFC 5714, DOI 10.17487/RFC5714, January 2010,
              <https://www.rfc-editor.org/info/rfc5714>.

   [RFC7166]  Bhatia, M., Manral, V., and A. Lindem, "Supporting
              Authentication Trailer for OSPFv3", RFC 7166,
              DOI 10.17487/RFC7166, March 2014,
              <https://www.rfc-editor.org/info/rfc7166>.

   [RFC7471]  Giacalone, S., Ward, D., Drake, J., Atlas, A., and S.
              Previdi, "OSPF Traffic Engineering (TE) Metric
              Extensions", RFC 7471, DOI 10.17487/RFC7471, March 2015,
              <https://www.rfc-editor.org/info/rfc7471>.

   [RFC7474]  Bhatia, M., Hartman, S., Zhang, D., and A. Lindem, Ed.,
              "Security Extension for OSPFv2 When Using Manual Key
              Management", RFC 7474, DOI 10.17487/RFC7474, April 2015,
              <https://www.rfc-editor.org/info/rfc7474>.

   [RFC7490]  Bryant, S., Filsfils, C., Previdi, S., Shand, M., and N.
              So, "Remote Loop-Free Alternate (LFA) Fast Reroute (FRR)",
              RFC 7490, DOI 10.17487/RFC7490, April 2015,
              <https://www.rfc-editor.org/info/rfc7490>.

   [RFC7855]  Previdi, S., Ed., Filsfils, C., Ed., Decraene, B.,
              Litkowski, S., Horneffer, M., and R. Shakir, "Source
              Packet Routing in Networking (SPRING) Problem Statement
              and Requirements", RFC 7855, DOI 10.17487/RFC7855, May
              2016, <https://www.rfc-editor.org/info/rfc7855>.

   [RFC7916]  Litkowski, S., Ed., Decraene, B., Filsfils, C., Raza, K.,
              Horneffer, M., and P. Sarkar, "Operational Management of
              Loop-Free Alternates", RFC 7916, DOI 10.17487/RFC7916,
              July 2016, <https://www.rfc-editor.org/info/rfc7916>.

   [RFC8102]  Sarkar, P., Ed., Hegde, S., Bowers, C., Gredler, H., and
              S. Litkowski, "Remote-LFA Node Protection and
              Manageability", RFC 8102, DOI 10.17487/RFC8102, March
              2017, <https://www.rfc-editor.org/info/rfc8102>.







Psenak, et al.             Expires May 2, 2020                 [Page 17]

Internet-Draft        OSPF Link TE Attributes Reuse         October 2019


Authors' Addresses

   Peter Psenak (editor)
   Cisco Systems
   Eurovea Centre, Central 3
   Pribinova Street 10
   Bratislava  81109
   Slovakia

   Email: ppsenak@cisco.com


   Les Ginsberg
   Cisco Systems
   821 Alder Drive
   MILPITAS, CA  95035
   USA

   Email: ginsberg@cisco.com


   Wim Henderickx
   Nokia
   Copernicuslaan 50
   Antwerp, 2018  94089
   Belgium

   Email: wim.henderickx@nokia.com


   Jeff Tantsura
   Apstra
   US

   Email: jefftant.ietf@gmail.com


   John Drake
   Juniper Networks
   1194 N. Mathilda Ave
   Sunnyvale, California  94089
   USA

   Email: jdrake@juniper.net







Psenak, et al.             Expires May 2, 2020                 [Page 18]
