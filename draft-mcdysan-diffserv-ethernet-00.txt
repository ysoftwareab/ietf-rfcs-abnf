
                                                                        
   Internet Draft                                            D. McDysan 
   Document: draft-mcdysan-diffserv-ethernet-                    L. Yao 
   00.txt                                                      WorldCom 
   Expires: January 2002                                      July 2001 
 
 
           Differentiated Services Over 802.3 Networks Framework   
 
 
Status of this Memo 
 
   This document is an Internet-Draft and is in full conformance 
   with all provisions of Section 10 of RFC2026. 
    
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that      
   other groups may also distribute working documents as Internet-
   Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six 
   months and may be updated, replaced, or obsoleted by other documents 
   at any time.  It is inappropriate to use Internet-Drafts as 
   reference material or to cite them other than as "work in progress." 
    
   The list of current Internet-Drafts can be accessed at 
        http://www.ietf.org/ietf/1id-abstracts.txt 
   The list of Internet-Draft Shadow Directories can be accessed at 
        http://www.ietf.org/shadow.html. 
 
 
Conventions used in this document 
    
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in 
   this document are to be interpreted as described in RFC-2119 [1]. 
    
 
Abstract 
    
   This document describes the deliver of IETF Differentiated Services 
   over MANs or WANs built from interconnected IEEE 802.3 MAC Bridges 
   (switches).  It describes the overlay model which uses Ethernet over 
   MPLS to provide Diffserv support, and the mapping model which maps 
   Diffserv PHBs to Ethernet user priorities and uses the inherent 
   capabilities of relevant IEEE 802 technologies and, in particular, 
   [802.1D-1998] queuing features and [802.1Q-1998] VLAN tags, to 
   support Diffserv.  
 
    
1. Introduction 
    
   Gigabit Ethernet (GbE) and 10 Gigabit Ethernet (10 GbE) are emerging 
   as important technologies for access to IP in the metropolitan and 
     
McDysan                  Expires January 2002                 [Page 1]

Internet Draft  draft-mcdysan-diffserv-ethernet-00.txt       July 2001 
                                    
    
   wide area networking arenas. As shown in Figure 1, metropolitan area 
   networks (MANs) supporting Internet connectivity will use 802.3 
   Ethernet technology to backhaul traffic from customer sites to 
   service providers' edge routers. 
    
    +-----+      +----------+                    +----------+ 
    | CE1 |------|          |                    |          | 
    +-----+      |          +--------------------+          | 
                 |   ESA    |                    |          | 
    +-----+      |          |    +----------+    |    PE    | 
    | CE2 |------+          +----+          |    |          | 
    +-----+      |          |    |          +----+          | 
                 +----------+    |    ESB   |    |          | 
                +-----+          |          |    |          | 
                | CE3 |----------+          |    +----------+ 
                +-----+          |          | 
                                 +----------+    
                CE - Customer Edge Router 
                ES - Ethernet Switch 
                PE - Provider Edge Router 
    
        Figure 1. Backhual Customer Traffic Using 802.3 Network   
    
   This document describes the two models to support Diffserv over 
   802.3 Ethernet networks: the overlay model and the mapping model. 
   Currently, little work is occurring in the IETF to support these 
   models. This draft proposes that one or more IETF working groups add 
   this to their charters. 
    
    
2. Support Diffserv over 802.3 Networks  
    
   To efficiently support Diffserv, 802.3 switches could have multiple 
   queues and class-based scheduling mechanism on Ethernet interfaces. 
   Traffic conditioning components, such as classifier, marker, policer 
   and shaper, are also needed at the edge of 802.3 Ethernet networks 
   to enforce access SLAs.   
    
2.1 The Overlay Model 
    
   This model assumes the support of Ethernet over an MPLS network. 
   802.3 frames are encapsulated into MPLS shim headers. Either E-LSP 
   or L-LSP as defined in [MPLS-DIFFSERV] can be used to support 
   Diffserv.  
    
   When E-LSP is used, ingress 802.3 switches may mark each packet's 
   EXP-bit based on the mapping between DSCP and EXP-bit, the input 
   interface, or the input VLAN. 802.3 switches inside the MPLS network 
   classify each packet solely based on its EXP-bit. One or multiple 
   traffic classes denoted by different EXP-bit values are mapped into 
   an output queue. The classified packets are en-queued accordingly. 
   At ingress 802.3 switches, packets may be policed based on the pairs 
     
McDysan                  Expires January 2002                 [Page 2]

Internet Draft  draft-mcdysan-diffserv-ethernet-00.txt       July 2001 
                                    
    
   of LSP/EXP. At egress 802.3 switches, packets may also be shaped 
   based on the pairs of LSP/EXP before transmission to edge routers. 
    
   When L-LSP is used, ingress 802.3 switches may determine the 
   attached label for each packet based on the mapping between the 
   pairs of destination/DSCP and labels, the input interface, or the 
   input VLAN. 802.3 switches inside the MPLS network classify each 
   packet according to its label value. A traffic class may be denoted 
   by one or multiple label values. One or multiple traffic classes are 
   mapped into an output queue. The classified packets are en-queued 
   accordingly. Packets may also be policed and/or shaped based on LSPs 
   at ingress and/or egress 802.3 switches, respectively.   
 
    
2.2 The Mapping Model 
  
   This model utilizes the native Ethernet QoS as defined in [802.1D-
   1998]. It requires that 802.3 switches map frames with different 
   802.1D user priorities into separate queues. There are a couple of 
   reasons to use VLAN technology [802.1Q-1998] together with 802.1D 
   user priority: 
   - To allow IEEE 802.1D user priority information to be added to 
   frames carried on IEEE 802.3 Ethernet MAC.  
   - To allow frames of different customers to be classified and 
   processed separately by using different VLAN tags. 
    
   The user priority field in VLAN tag [8] is three bits in length and 
   is therefore capable of representing eight priority levels, 0 
   through 7. Using the user priority field in the VLAN tag header, a 
   single VLAN can support up to 8 classes of traffic. Ideally, 
   separate queue for each pair of VLAN/user priority is desired to 
   provide the finest granularity for buffer management. 
    
   At customer edge routers, packets are classified according to their 
   DSCP values. The customer edge routers then set the user priority 
   fields in VLAN tags of the IEEE 802.3 frames carrying the packets 
   according to the mapping between Diffserv PHBs and user priorities. 
   For example, a possible mapping between Diffserv PHBs and Ethernet 
   user priorities is given below: 
        Diffserv           Ethernet       Ethernet       
          PHB           User Priority   Traffic Class 
        EF [RFC2598]      5 or 6          Voice or Video 
        AFx [RFC2597]       4             Controlled Load 
        CS                  7             Network Control 
        Default             0             Best Effort 
         
   When transmitted between switches within the 802.3 Ethernet access 
   network, IEEE 802.3 frames are classified and en-queued based on the 
   pairs of VLAN/user priority. IEEE 802.3 frames may also be policed 
   and/or shaped based on the pairs of VLAN/user priority at ingress 
   and/or egress 802.3 switches, respectively. 
    
     
McDysan                  Expires January 2002                 [Page 3]

Internet Draft  draft-mcdysan-diffserv-ethernet-00.txt       July 2001 
                                    
    
3. Security Considerations 
 
   The use of Diffserv in 802.3 Ethernet networks leaves the 
   possibility open for denial of service or theft of service attacks. 
   However, this document introduces no new security issues on top of 
   those discussed in the [DIFFSERV-ARCH].  
    
    
4. References 
    
   [802.1D-1998] ôInformation technology-Telecommunications and 
   information exchange between systems-local and metropolitan area 
   networks-common specifications-Part 3: Media Access Control (MAC) 
   Bridgesö, ISO/IEC 15802-3:1998, ANSI/IEEE 802.1D, 1998 
     
   [802.1Q-1998] ôIEEE Standards for Local and Metropolitan Area 
   Networks: Virtual Bridged Local Area Networksö, IEEE 802.1Q, 
   December 1998 
 
   [DIFFSERV-ARCH] S. Blake, D. Black, M. Carlson, E. Davies, Z. Wang, 
   and W. Weiss, "An Architecture for Differentiated 
   Services", RFC 2475, December 1998 
 
   [RFC2597] J. Heinanen, F. Baker, W. Weiss, and J. Wroclawski, 
   ôAssured Forwarding PHB Group ö, RFC 2597, June 1999 
    
   [RFC2598] V. Jacobson, K. Nichols, and K. Poduri, ôAn Expedited 
   Forwarding PHB ö, RFC 2598, June 1999 
    
   [MPLS-DIFFSERV] F. Faucheur, and L. Wu, et al.," MPLS Support of 
   Differentiated Services ", draft-ietf-mpls-diff-ext-09.txt, work in 
   progress   
    
    
Author's Addresses 
    
   David E. McDysan 
   WorldCom 
   22001 Loudoun County Parkway             
   Ashburn, VA 
   Email:  dave.mcdysan@wcom.com 
    
   Lei Yao 
   WorldCom 
   22001 Loudoun County Parkway 
   Ashburn, VA 20147 
   Email: lei.yao@wcom.com 
 
    
    
    
    
 
     
McDysan                  Expires January 2002                 [Page 4]

