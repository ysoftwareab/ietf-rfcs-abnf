<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Inter Stateful Path Computation Element (PCE) Communication Procedures.</title>
<meta content="Stephane Litkowski" name="author">
<meta content="Siva Sivabalan" name="author">
<meta content="Cheng Li" name="author">
<meta content="Haomian Zheng" name="author">
<meta content="
       The Path Computation Element Communication Protocol (PCEP) provides
   mechanisms for Path Computation Elements (PCEs) to perform path
   computation in response to a Path Computation Client (PCC) request.
    The Stateful PCE extensions allow stateful control of Multi-Protocol
   Label Switching (MPLS) Traffic Engineering (TE) Label Switched Paths (LSPs) using PCEP. 
       A Path Computation Client (PCC) can synchronize an LSP state information to a Stateful Path Computation Element (PCE). A PCC can have multiple PCEP sessions towards multiple PCEs.
    There are some use cases, where an inter-PCE stateful communication can bring additional resiliency in the design, for instance when some PCC-PCE session fails. 
       
       
    This document describes the procedures to allow a stateful communication between PCEs for various use-cases and also the procedures to prevent computations loops.  
       
    " name="description">
<meta content="xml2rfc 3.10.0" name="generator">
<meta content="draft-ietf-pce-state-sync-01" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.10.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 58.2.0
    six 1.16.0
-->
<link href="/tmp/draft-ietf-pce-state-sync-01-2fd72f3s.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">state-sync</td>
<td class="right">October 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Litkowski, et al.</td>
<td class="center">Expires 23 April 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">PCE Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-pce-state-sync-00</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-10-20" class="published">20 October 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-04-23">23 April 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">S. Litkowski</div>
<div class="org">Cisco</div>
</div>
<div class="author">
      <div class="author-name">S. Sivabalan</div>
<div class="org">Ciena Corporation</div>
</div>
<div class="author">
      <div class="author-name">C. Li</div>
<div class="org">Huawei Technologies</div>
</div>
<div class="author">
      <div class="author-name">H. Zheng</div>
<div class="org">Huawei Technologies</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Inter Stateful Path Computation Element (PCE) Communication Procedures.</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">The Path Computation Element Communication Protocol (PCEP) provides
   mechanisms for Path Computation Elements (PCEs) to perform path
   computation in response to a Path Computation Client (PCC) request.
    The Stateful PCE extensions allow stateful control of Multi-Protocol
   Label Switching (MPLS) Traffic Engineering (TE) Label Switched Paths (LSPs) using PCEP.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">A Path Computation Client (PCC) can synchronize an LSP state information to a Stateful Path Computation Element (PCE). A PCC can have multiple PCEP sessions towards multiple PCEs.
    There are some use cases, where an inter-PCE stateful communication can bring additional resiliency in the design, for instance when some PCC-PCE session fails.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
<p id="section-abstract-3">
    This document describes the procedures to allow a stateful communication between PCEs for various use-cases and also the procedures to prevent computations loops.<a href="#section-abstract-3" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 23 April 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction-and-problem-st" class="xref">Introduction and Problem Statement</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-requirements-language" class="xref">Requirements Language</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-reporting-lsp-changes" class="xref">Reporting LSP Changes</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1" class="keepWithNext"><a href="#section-1.3" class="xref">1.3</a>.  <a href="#name-split-brain" class="xref">Split-Brain</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.4">
                <p id="section-toc.1-1.1.2.4.1"><a href="#section-1.4" class="xref">1.4</a>.  <a href="#name-applicability-to-h-pce" class="xref">Applicability to H-PCE</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-proposed-solution" class="xref">Proposed solution</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-state-sync-session" class="xref">State-sync session</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-primary-secondary-relations" class="xref">Primary/Secondary relationship between PCE</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-procedures-and-protocol-ext" class="xref">Procedures and Protocol Extensions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-opening-a-state-sync-sessio" class="xref">Opening a state-sync session</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1.2.1">
                    <p id="section-toc.1-1.3.2.1.2.1.1"><a href="#section-3.1.1" class="xref">3.1.1</a>.  <a href="#name-capability-advertisement" class="xref">Capability Advertisement</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-state-synchronization" class="xref">State synchronization</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-incremental-updates-and-rep" class="xref">Incremental updates and report forwarding rules</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="xref">3.4</a>.  <a href="#name-maintaining-lsp-states-from" class="xref">Maintaining LSP states from different sources</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="xref">3.5</a>.  <a href="#name-computation-priority-betwee" class="xref">Computation priority between PCEs and sub-delegation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.6">
                <p id="section-toc.1-1.3.2.6.1"><a href="#section-3.6" class="xref">3.6</a>.  <a href="#name-passive-stateful-procedures" class="xref">Passive stateful procedures</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.7">
                <p id="section-toc.1-1.3.2.7.1"><a href="#section-3.7" class="xref">3.7</a>.  <a href="#name-pce-initiation-procedures" class="xref">PCE initiation procedures</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-examples" class="xref">Examples</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-example-1" class="xref">Example 1</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-example-2" class="xref">Example 2</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-example-3" class="xref">Example 3</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-using-primary-secondary-com" class="xref">Using Primary/Secondary Computation and State-sync Sessions to increase Scaling</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-pcep-path-vector-tlv" class="xref">PCEP-PATH-VECTOR TLV</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-acknowledgements" class="xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-pcep-error-object" class="xref">PCEP-Error Object</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-pcep-tlv-type-indicators" class="xref">PCEP TLV Type Indicators</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="xref">9.3</a>.  <a href="#name-stateful-pce-capability-tlv" class="xref">STATEFUL-PCE-CAPABILITY TLV</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="xref">Appendix A</a>.  <a href="#name-contributors" class="xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-B" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="intro">
<section id="section-1">
      <h2 id="name-introduction-and-problem-st">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction-and-problem-st" class="section-name selfRef">Introduction and Problem Statement</a>
      </h2>
<p id="section-1-1">The Path Computation Element communication Protocol (PCEP) <span>[<a href="#RFC5440" class="xref">RFC5440</a>]</span>
   provides mechanisms for Path Computation Elements (PCEs) to perform
   path computations in response to Path Computation Clients' (PCCs)
   requests.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">A stateful PCE <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span> is capable of considering, for the purposes of path
   computation, not only the network state in terms of links and nodes
   (referred to as the Traffic Engineering Database or TED) but also the
   status of active services (previously computed paths, and currently
   reserved resources, stored in the Label Switched Paths Database
   (LSP-DB).<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3"><span>[<a href="#RFC8051" class="xref">RFC8051</a>]</span> describes general considerations for a stateful PCE
   deployment and examines its applicability and benefits, as well as
   its challenges and limitations through a number of use cases.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">A PCC can synchronize an LSP state information to a Stateful PCE. The stateful PCE extension allows a redundancy scenario where a PCC can have redundant PCEP sessions towards multiple PCEs. In such a case, a PCC gives control of a LSP to only a single PCE, and only one PCE is responsible for path computation for this delegated LSP.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">
    There are some use cases, where an inter-PCE stateful communication can bring additional resiliency in the design, for instance when some PCC-PCE session fails. The inter-PCE stateful communication may also provide a faster update of the LSP states when such an event occurs.
    Finally, when, in a redundant PCE scenario, there is a need to compute a set of paths that are part of a group (so there is a dependency between the paths), there may be some cases where the computation of all paths in the group is not handled by the same PCE: this situation is called a split-brain. This split-brain scenario may lead to computation loops between PCEs or suboptimal path computation.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">
    This document describes the procedures to allow a stateful communication between PCEs for various use-cases and also the procedures to prevent computations loops.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">Further, the examples in this section are for illustrative purpose to showcase the need for inter-PCE stateful PCEP sessions.<a href="#section-1-7" class="pilcrow">¶</a></p>
<div id="Language">
<section id="section-1.1">
        <h3 id="name-requirements-language">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when, they appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="lsp-changes">
<section id="section-1.2">
        <h3 id="name-reporting-lsp-changes">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-reporting-lsp-changes" class="section-name selfRef">Reporting LSP Changes</a>
        </h3>
<p id="section-1.2-1">When using a stateful PCE (<span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span>), a PCC can synchronize an LSP state information to the stateful PCE.
        If the PCC grants the control of the LSP to the PCE (called delegation <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span>), the PCE can update the LSP parameters at any time.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<p id="section-1.2-2">In a multi PCE deployment (redundancy, loadbalancing...), with the current specification defined in <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span>, when a PCE makes an update, it is the PCC that is in charge of reporting the LSP status to all PCEs with LSP parameter change which brings additional hops and delays in notifying the overall network of the LSP parameter change.<a href="#section-1.2-2" class="pilcrow">¶</a></p>
<p id="section-1.2-3">This delay may affect the reaction time of the other PCEs if they need to take action after being notified of the LSP parameter change.<a href="#section-1.2-3" class="pilcrow">¶</a></p>
<p id="section-1.2-4">Apart from the synchronization from the PCC, it is also useful if there is a synchronization mechanism between the stateful PCEs.  As stateful PCE make changes to its delegated LSPs, these
   changes (pending LSPs and the sticky resources <span>[<a href="#RFC7399" class="xref">RFC7399</a>]</span>) can be synchronized immediately to the other PCEs.<a href="#section-1.2-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-1.2-5">
<pre>

          +----------+
          |   PCC1   |  LSP1
          +----------+
             /    \
            /      \
   +---------+    +---------+
   |  PCE1   |    |  PCE2   |
   +---------+    +---------+
           \       /
            \     /
          +----------+
          |   PCC2   |  LSP2
          +----------+
</pre><a href="#section-1.2-5" class="pilcrow">¶</a>
</div>
<p id="section-1.2-6">
        In the figure above, we consider a load-balanced PCE architecture, so PCE1 is responsible to compute paths for PCC1 and PCE2 is responsible to compute paths for PCC2.
        When PCE1 triggers an LSP update for LSP1, it sends a PCUpd message to PCC1 containing the new parameters for LSP1. PCC1 will take the parameters into account and will send a PCRpt message to PCE1 and PCE2 reflecting the changes.
        PCE2 will so be notified of the change only after receiving the PCRpt message from PCC1.<a href="#section-1.2-6" class="pilcrow">¶</a></p>
<p id="section-1.2-7">
        Let's consider that the LSP1 parameters changed in such a way that LSP1 will take over resources from LSP2 with a higher priority. After receiving the report from PCC1, PCE2 will therefore try to find a new path for LSP2. If we consider that there is a round trip delay of about 150 milliseconds (ms) between the PCEs and PCC1 and a round trip delay of 10 ms between the two PCEs if will take more than 150 ms for PCE2 to be notified of the change.<a href="#section-1.2-7" class="pilcrow">¶</a></p>
<p id="section-1.2-8">Adding a PCEP session between PCE1 and PCE2 may allow to reduce the synchronization time, so PCE2 can react more quickly by taking the pending LSPs and attached resources into account during path computation and re-optimization.<a href="#section-1.2-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="split-brain">
<section id="section-1.3">
        <h3 id="name-split-brain">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-split-brain" class="section-name selfRef">Split-Brain</a>
        </h3>
<p id="section-1.3-1">
    
    In a resiliency case, a PCC has redundant PCEP sessions towards multiple PCEs. In such a case, a PCC gives control on an LSP to a single PCE only, and only this PCE is responsible for the path computation for the delegated LSP: the PCC achieves this by setting the D flag only towards the active PCE <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span> selected for delegation.
    The election of the active PCE to delegate an LSP is controlled by each PCC. The PCC usually elects the active PCE by a local configured policy (by setting a priority). Upon PCEP session failure, or active PCE failure, PCC may decide to elect a new active PCE by sending new PCRpt message with D flag set to this new active PCE.
    When the failed PCE or PCEP session comes back online, it will be up to the implementation to do preemption. Doing preemption may lead to some  disruption on the existing path if path results from both PCEs are not exactly the same.
    By considering a network with multiple PCCs and implementing multiple stateful PCEs for redundancy purpose, there is no guarantee that at any time all the PCCs delegate their LSPs to the same PCE.<a href="#section-1.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-1.3-2">
<pre>

          +----------+
          |   PCC1   |  LSP1
          +----------+
             /    \
            /      \
   +---------+    +---------+
   |  PCE1   |    |  PCE2   |
   +---------+    +---------+
           \       /
   *fail*   \     /
          +----------+
          |   PCC2   |  LSP2
          +----------+
</pre><a href="#section-1.3-2" class="pilcrow">¶</a>
</div>
<p id="section-1.3-3">
    In the example above, we consider that by configuration, both PCCs will firstly delegate their LSPs to PCE1.
    So, PCE1 is responsible for computing a path for both LSP1 and LSP2.
    If the PCEP session between PCC2 and PCE1 fails, PCC2 will delegate LSP2 to PCE2. So PCE1 becomes responsible only for LSP1 path computation while PCE2 is responsible for the path computation of LSP2.
    When the PCC2-PCE1 session is back online, PCC2 will keep using PCE2 as active PCE (consider no preemption in this example).
    So the result is a permanent situation where each PCE is responsible for a subset of path computation.<a href="#section-1.3-3" class="pilcrow">¶</a></p>
<p id="section-1.3-4">This situation is called a split-brain scenario, as there are multiple computation brains running at the same time while a central computation unit was required in some deployments/use cases.<a href="#section-1.3-4" class="pilcrow">¶</a></p>
<p id="section-1.3-5">
    Further, there are use cases where a particular LSP path computation is linked to another LSP path computation: the most common use case is path disjointness (see <span>[<a href="#RFC8800" class="xref">RFC8800</a>]</span>). The set of LSPs that are dependent to each other may start from a different head-end.<a href="#section-1.3-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-1.3-6">
<pre>
      _________________________________________
     /                                         \
    /        +------+            +------+       \
   |         | PCE1 |            | PCE2 |        |
   |         +------+            +------+        |
   |                                             |
   | +------+                          +------+  |
   | | PCC1 | ----------------------&gt;  | PCC2 |  |
   | +------+                          +------+  |
   |                                             |
   |                                             |
   | +------+                          +------+  |
   | | PCC3 | ----------------------&gt;  | PCC4 |  |
   | +------+                          +------+  |
   |                                             |
    \                                           /
     \_________________________________________/


      _________________________________________
     /                                         \
    /        +------+            +------+       \
   |         | PCE1 |            | PCE2 |        |
   |         +------+            +------+        |
   |                                             |
   | +------+           10             +------+  |
   | | PCC1 | ----- R1 ---- R2 ------- | PCC2 |  |
   | +------+       |        |         +------+  |
   |                |        |                   |
   |                |        |                   |
   | +------+       |        |         +------+  |
   | | PCC3 | ----- R3 ---- R4 ------- | PCC4 |  |
   | +------+                          +------+  |
   |                                             |
    \                                           /
     \_________________________________________/


</pre><a href="#section-1.3-6" class="pilcrow">¶</a>
</div>
<p id="section-1.3-7">
    In the figure above, the requirement is to create two link-disjoint LSPs: PCC1-&gt;PCC2 and PCC3-&gt;PCC4. In the topology, all links cost metric is set to 1 except for the link 'R1-R2' which has a metric of 10.
    The PCEs are responsible for the path computation and PCE1 is the active primary PCE for all PCCs in the nominal case.<a href="#section-1.3-7" class="pilcrow">¶</a></p>
<p id="section-1.3-8">Scenario 1:<a href="#section-1.3-8" class="pilcrow">¶</a></p>
<p id="section-1.3-9">
    In the normal case (PCE1 as active primary PCE), consider that PCC1-&gt;PCC2 LSP is configured first with the link disjointness constraint, PCE1 sends a PCUpd message to PCC1 with the ERO: R1-&gt;R3-&gt;R4-&gt;R2-&gt;PCC2 (shortest path).
    PCC1 signals and installs the path. When PCC3-&gt;PCC4 is configured, the PCEs already knows the path of PCC1-&gt;PCC2 and can compute a link-disjoint path: the solution requires to move PCC1-&gt;PCC2 onto a new path to let room for the new LSP.
    PCE1 sends a PCUpd message to PCC1 with the new ERO: R1-&gt;R2-&gt;PCC2 and a PCUpd to PCC3 with the following ERO: R3-&gt;R4-&gt;PCC4.
    In the normal case, there is no issue for PCE1 to compute a link-disjoint path.<a href="#section-1.3-9" class="pilcrow">¶</a></p>
<p id="section-1.3-10">Scenario 2:<a href="#section-1.3-10" class="pilcrow">¶</a></p>
<p id="section-1.3-11">
    Consider that PCC1 lost its PCEP session with PCE1 (all other PCEP sessions are UP). PCC1 delegates its LSP to PCE2.<a href="#section-1.3-11" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-1.3-12">
<pre>

          +----------+
          |   PCC1   |  LSP: PCC1-&gt;PCC2
          +----------+
                  \
                   \ D=1
   +---------+    +---------+
   |  PCE1   |    |  PCE2   |
   +---------+    +---------+
       D=1 \       / D=0
            \     /
          +----------+
          |   PCC3   |  LSP: PCC3-&gt;PCC4
          +----------+
</pre><a href="#section-1.3-12" class="pilcrow">¶</a>
</div>
<p id="section-1.3-13">
    Consider that the PCC1-&gt;PCC2 LSP is configured first with the link disjointness constraint, PCE2 (which is the new active primary PCE for PCC1) sends a PCUpd message to PCC1 with the ERO: R1-&gt;R3-&gt;R4-&gt;R2-&gt;PCC2 (shortest path).
    When PCC3-&gt;PCC4 is configured, PCE1 is not aware of LSPs from PCC1 any more, so it cannot compute a disjoint path for PCC3-&gt;PCC4 and will send a PCUpd message to PCC3 with the shortest path ERO: R3-&gt;R4-&gt;PCC4.
    When PCC3-&gt;PCC4 LSP will be reported to PCE2 by PCC3, PCE2 will ensure disjointness computation and will correctly move PCC1-&gt;PCC2 (as it owns delegation for this LSP) on the following path: R1-&gt;R2-&gt;PCC2.
    With this sequence of event and these PCEP sessions, disjointness is ensured.<a href="#section-1.3-13" class="pilcrow">¶</a></p>
<p id="section-1.3-14">Scenario 3:<a href="#section-1.3-14" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-1.3-15">
<pre>

          +----------+
          |   PCC1   |  LSP: PCC1-&gt;PCC2
          +----------+
            /     \
       D=1 /       \ D=0
   +---------+    +---------+
   |  PCE1   |    |  PCE2   |
   +---------+    +---------+
                   / D=1
                  /
          +----------+
          |   PCC3   |  LSP: PCC3-&gt;PCC4
          +----------+
</pre><a href="#section-1.3-15" class="pilcrow">¶</a>
</div>
<p id="section-1.3-16">
    Consider the above PCEP sessions and the PCC1-&gt;PCC2 LSP is configured first with the link disjointness constraint, PCE1 computes the shortest path as it is the only LSP in the disjoint association group that it is aware of: R1-&gt;R3-&gt;R4-&gt;R2-&gt;PCC2 (shortest path).
    When PCC3-&gt;PCC4 is configured, PCE2 must compute a disjoint path for this LSP. The only solution found is to move PCC1-&gt;PCC2 LSP on another path, but PCE2 cannot do it as it does not have delegation for this LSP.
    In this set-up, PCEs are not able to find a disjoint path.<a href="#section-1.3-16" class="pilcrow">¶</a></p>
<p id="section-1.3-17">Scenario 4:<a href="#section-1.3-17" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-1.3-18">
<pre>

          +----------+
          |   PCC1   |  LSP: PCC1-&gt;PCC2
          +----------+
            /     \
       D=1 /       \ D=0
   +---------+    +---------+
   |  PCE1   |    |  PCE2   |
   +---------+    +---------+
        D=0 \      / D=1
             \    /
          +----------+
          |   PCC3   |  LSP: PCC3-&gt;PCC4
          +----------+
</pre><a href="#section-1.3-18" class="pilcrow">¶</a>
</div>
<p id="section-1.3-19">
    Consider the above PCEP sessions and that PCEs are configured to fall-back to the shortest path if disjointness cannot be found as described in <span>[<a href="#RFC8800" class="xref">RFC8800</a>]</span>.
    The PCC1-&gt;PCC2 LSP is configured first, PCE1 computes the shortest path as it is the only LSP in the disjoint association group that it is aware of: R1-&gt;R3-&gt;R4-&gt;R2-&gt;PCC2 (shortest path).
    When PCC3-&gt;PCC4 is configured, PCE2 must compute a disjoint path for this LSP. The only solution found is to move PCC1-&gt;PCC2 LSP on another path, but PCE2 cannot do it as it does not have delegation for this LSP.
    PCE2 then provides the shortest path for PCC3-&gt;PCC4: R3-&gt;R4-&gt;PCC4. When PCC3 receives the ERO, it reports it back to both PCEs.
    When PCE1 becomes aware of the PCC3-&gt;PCC4 path, it recomputes the constrained shortest path first (CSPF) algorithm and provides a new path for PCC1-&gt;PCC2: R1-&gt;R2-&gt;PCC2. The new path is reported back to all PCEs by PCC1.
    PCE2 recomputes also CSPF to take into account the new reported path. The new computation does not lead to any path update.<a href="#section-1.3-19" class="pilcrow">¶</a></p>
<p id="section-1.3-20">Scenario 5:<a href="#section-1.3-20" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-1.3-21">
<pre>
      _____________________________________
     /                                     \
    /        +------+        +------+       \
   |         | PCE1 |        | PCE2 |        |
   |         +------+        +------+        |
   |                                         |
   | +------+         100          +------+  |
   | |      | -------------------- |      |  |
   | | PCC1 | ----- R1 ----------- | PCC2 |  |
   | +------+       |              +------+  |
   |    |           |                  |     |
   |  6 |           | 2                | 2   |
   |    |           |                  |     |
   | +------+       |              +------+  |
   | | PCC3 | ----- R3 ----------- | PCC4 |  |
   | +------+               10     +------+  |
   |                                         |
    \                                       /
     \_____________________________________/


</pre><a href="#section-1.3-21" class="pilcrow">¶</a>
</div>
<p id="section-1.3-22">Now, consider a new network topology with the same PCEP sessions as the previous example.
    Suppose that both LSPs are configured almost at the same time.
    PCE1 will compute a path for PCC1-&gt;PCC2 while PCE2 will compute a path for PCC3-&gt;PCC4. As each PCE  is not aware of the path of the second LSP in the association group (not reported yet), each PCE is computing the shortest path for the LSP.
    PCE1 computes ERO: R1-&gt;PCC2 for PCC1-&gt;PCC2 and PCE2 computes ERO: R3-&gt;R1-&gt;PCC2-&gt;PCC4 for PCC3-&gt;PCC4.
    When these shortest paths will be reported to each PCE. Each PCE will recompute disjointness.
    PCE1 will provide a new path for PCC1-&gt;PCC2 with ERO: PCC1-&gt;PCC2. PCE2 will provide also a new path for PCC3-&gt;PCC4 with ERO: R3-&gt;PCC4. When those new paths will be reported to both PCEs, this will trigger CSPF again.
    PCE1 will provide a new more optimal path for PCC1-&gt;PCC2 with ERO: R1-&gt;PCC2 and PCE2 will also provide a more optimal path for PCC3-&gt;PCC4 with ERO: R3-&gt;R1-&gt;PCC2-&gt;PCC4. 
    So we come back to the initial state. When those paths will be reported to both PCEs, this will trigger CSPF again. An infinite loop of CSPF computation is then happening with a permanent flap of paths because of the split-brain situation.<a href="#section-1.3-22" class="pilcrow">¶</a></p>
<p id="section-1.3-23">
    This permanent computation loop comes from the inconsistency between the state of the LSPs as seen by each PCE due to the split-brain: each PCE is trying to modify at the same time its delegated path based on the last received path information which de facto invalidates this received path information.<a href="#section-1.3-23" class="pilcrow">¶</a></p>
<p id="section-1.3-24">Scenario 6: multi-domain<a href="#section-1.3-24" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-1.3-25">
<pre>
         Domain/Area 1        Domain/Area 2
      ________________      ________________
     /                \    /                \
    /        +------+ |   |  +------+        \
   |         | PCE1 | |   |  | PCE3 |        |
   |         +------+ |   |  +------+        |
   |                  |   |                  |
   |         +------+ |   |  +------+        |
   |         | PCE2 | |   |  | PCE4 |        |
   |         +------+ |   |  +------+        |
   |                  |   |                  |
   | +------+         |   |        +------+  |
   | | PCC1 |         |   |        | PCC2 |  |
   | +------+         |   |        +------+  |
   |                  |   |                  |
   |                  |   |                  |
   | +------+         |   |        +------+  |
   | | PCC3 |         |   |        | PCC4 |  |
   | +------+         |   |        +------+  |
    \                 |   |                  |
     \_______________/     \________________/


</pre><a href="#section-1.3-25" class="pilcrow">¶</a>
</div>
<p id="section-1.3-26">In the example above, suppose that the disjoint LSPs from PCC1 to PCC2 and from PCC4 to PCC3 are created. All the PCEs have the knowledge of both domain topologies (e.g. using BGP-LS <span>[<a href="#RFC7752" class="xref">RFC7752</a>]</span>). For operation/management reasons, each domain uses its own group of redundant PCEs.
    PCE1/PCE2 in domain 1 have PCEP sessions with PCC1 and PCC3 while PCE3/PCE4 in domain 2 have PCEP sessions with PCC2 and PCC4. As PCE1/2 does not know about LSPs from PCC2/4 and PCE3/4 do not know about LSPs from PCC1/3, there is no possibility to compute the disjointness constraint.
    This scenario can also be seen as a split-brain scenario. This multi-domain architecture (with multiple groups of PCEs) can also be used in a single domain, where an operator wants to limit the failure domain by creating multiple groups of PCEs maintaining a subset of PCCs.
    As for the multi-domain example, there will be no possibility to compute the disjoint path starting from head-ends managed by different PCE groups.<a href="#section-1.3-26" class="pilcrow">¶</a></p>
<p id="section-1.3-27">
    In this document, we propose a solution that addresses the possibility to compute LSP association based constraints (like disjointness) in split-brain scenarios while preventing computation loops.<a href="#section-1.3-27" class="pilcrow">¶</a></p>
</section>
</div>
<div id="H-PCE">
<section id="section-1.4">
        <h3 id="name-applicability-to-h-pce">
<a href="#section-1.4" class="section-number selfRef">1.4. </a><a href="#name-applicability-to-h-pce" class="section-name selfRef">Applicability to H-PCE</a>
        </h3>
<p id="section-1.4-1"><span>[<a href="#RFC8751" class="xref">RFC8751</a>]</span> describes general considerations and use cases for the deployment of Stateful PCE(s) using the Hierarchical PCE <span>[<a href="#RFC6805" class="xref">RFC6805</a>]</span> architecture. 
        In this architecture, there is a clear need to communicate between a child stateful PCE and a parent stateful PCE. 
        The procedures and extensions as described in <a href="#procedures" class="xref">Section 3</a> are equally applicable to the H-PCE scenario.<a href="#section-1.4-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="solution">
<section id="section-2">
      <h2 id="name-proposed-solution">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-proposed-solution" class="section-name selfRef">Proposed solution</a>
      </h2>
<p id="section-2-1">
    Our solution is based on :<a href="#section-2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.1">The creation of the inter-PCE stateful PCEP session with specific procedures.<a href="#section-2-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.2">A Primary/Secondary relationship between PCEs.<a href="#section-2-2.2" class="pilcrow">¶</a>
</li>
      </ul>
<div id="state-sync-session">
<section id="section-2.1">
        <h3 id="name-state-sync-session">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-state-sync-session" class="section-name selfRef">State-sync session</a>
        </h3>
<p id="section-2.1-1">This document proposes to set-up a PCEP session between the stateful PCEs.
        Creating such a session is already authorized by multiple scenarios like the one described in <span>[<a href="#RFC4655" class="xref">RFC4655</a>]</span> (multiple PCEs that are handling part of the path computation) and <span>[<a href="#RFC6805" class="xref">RFC6805</a>]</span> (hierarchical PCE) but was only focused on the stateless PCEP sessions.
        As stateful PCE brings additional features (LSP state synchronization, path update, delegation, ...), thus some new behaviors need to be defined.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">This inter-PCE PCEP session will allow the exchange of LSP states between PCEs that would help some scenarios where PCEP sessions are lost between PCC and PCE. This inter-PCE PCEP session is henceforth called a state-sync session.<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.1-3">For example, in the scenario below, there is no possibility to compute disjointness as there is no PCE that is aware of both LSPs.<a href="#section-2.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1-4">
<pre>

          +----------+
          |   PCC1   |  LSP: PCC1-&gt;PCC2
          +----------+
            /
       D=1 /
   +---------+       +---------+
   |  PCE1   |       |  PCE2   |
   +---------+       +---------+
                     / D=1
                    /
          +----------+
          |   PCC3   |  LSP: PCC3-&gt;PCC4
          +----------+
</pre><a href="#section-2.1-4" class="pilcrow">¶</a>
</div>
<p id="section-2.1-5">If we add a state-sync session, PCE1 will be able to do state synchronization via PCRpt messages for its LSP to PCE2 and PCE2 will do the same. All the PCEs will be aware of all LSPs even if a PCC-&gt;PCE session is down. PCEs will then be able to compute disjoint paths.<a href="#section-2.1-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1-6">
<pre>

          +----------+
          |   PCC1   |  LSP : PCC1-&gt;PCC2
          +----------+
            /
       D=1 /
   +---------+ PCEP  +---------+
   |  PCE1   | ----- |  PCE2   |
   +---------+       +---------+
                     / D=1
                    /
          +----------+
          |   PCC3   |  LSP : PCC3-&gt;PCC4
          +----------+
</pre><a href="#section-2.1-6" class="pilcrow">¶</a>
</div>
<p id="section-2.1-7">The procedures associated with this state-sync session are defined in <a href="#procedures" class="xref">Section 3</a>.<a href="#section-2.1-7" class="pilcrow">¶</a></p>
<p id="section-2.1-8">
        By just adding this state-sync session, it does not ensure that a path with LSP association based constraints can always be computed and does not prevent the computation loop, but it increases resiliency and ensures that PCEs will have the state information for all LSPs.
        Also, this session will allow for a PCE to update the other PCEs providing a faster synchronization mechanism than relying on PCCs only.<a href="#section-2.1-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="masterslave">
<section id="section-2.2">
        <h3 id="name-primary-secondary-relations">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-primary-secondary-relations" class="section-name selfRef">Primary/Secondary relationship between PCE</a>
        </h3>
<p id="section-2.2-1">
        As seen in <a href="#intro" class="xref">Section 1</a>, performing a path computation in a split-brain scenario (multiple PCEs responsible for computation) may provide a non-optimal LSP placement, no path, or computation loops.
        To provide the best efficiency, an LSP association constraint-based computation requires that a single PCE performs the path computation for all LSPs in the association group.
        Note that, it could be all LSPs belonging to a particular association group, or  all LSPs from a particular PCC, or all LSPs in the network that need to be delegated to a single PCE based on the deployment scenarios.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">
        This document proposes to add a priority mechanism between PCEs to elect a single computing PCE. Using this priority mechanism, PCEs can agree on the PCE that will be responsible for the computation for a particular association group, or set of LSPs.
        The priority could be set per association, per PCC, or for all LSPs. How this priority is set or advertised is out of the scope of this document. The rest of the text considers the association group as an example.<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<p id="section-2.2-3">When a single PCE is performing the computation for a particular association group, no computation loop can happen and an optimal placement will be provided. The other PCEs will only act as state collectors and forwarders.<a href="#section-2.2-3" class="pilcrow">¶</a></p>
<p id="section-2.2-4">In the scenario described in <a href="#state-sync-session" class="xref">Section 2.1</a>, PCE1 and PCE2 will decide that PCE1 will be responsible for the path computation of both LSPs.
        If we first configure PCC1-&gt;PCC2, PCE1 computes the shortest path at it is the only LSP in the disjoint-group that it is aware of: R1-&gt;R3-&gt;R4-&gt;R2-&gt;PCC2 (shortest path).
    When PCC3-&gt;PCC4 is configured, PCE2 will not perform computation even if it has delegation but forwards the delegation via PCRpt message to PCE1 through the state-sync session. PCE1 will then perform disjointness computation and will move PCC1-&gt;PCC2 onto R1-&gt;R2-&gt;PCC2 and provides an ERO to PCE2 for PCC3-&gt;PCC4: R3-&gt;R4-&gt;PCC4. The PCE2 will further update the PCC3 with the new path.<a href="#section-2.2-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="procedures">
<section id="section-3">
      <h2 id="name-procedures-and-protocol-ext">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-procedures-and-protocol-ext" class="section-name selfRef">Procedures and Protocol Extensions</a>
      </h2>
<div id="open">
<section id="section-3.1">
        <h3 id="name-opening-a-state-sync-sessio">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-opening-a-state-sync-sessio" class="section-name selfRef">Opening a state-sync session</a>
        </h3>
<div id="capability">
<section id="section-3.1.1">
          <h4 id="name-capability-advertisement">
<a href="#section-3.1.1" class="section-number selfRef">3.1.1. </a><a href="#name-capability-advertisement" class="section-name selfRef">Capability Advertisement</a>
          </h4>
<p id="section-3.1.1-1">
            A PCE indicates its support of state-sync procedures during the PCEP Initialization phase <span>[<a href="#RFC5440" class="xref">RFC5440</a>]</span>. The OPEN object in the Open message MUST contains the "Stateful PCE Capability" TLV defined in <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span>.
            A new P (INTER-PCE-CAPABILITY) flag is introduced to indicate the support of state-sync.<a href="#section-3.1.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1.1-2">This document adds a new bit in the Flags field with :<a href="#section-3.1.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1.1-3.1">P (INTER-PCE-CAPABILITY - 1 bit - TBD4): If set to 1 by a PCEP Speaker, the PCEP speaker indicates that the session MUST follow the state-sync procedures as described in this document.
            The P bit MUST be set by both speakers: if a PCEP Speaker receives a STATEFUL-PCE-CAPABILITY TLV with P=0 while it advertised P=1 or if both set P flag to 0, the session SHOULD be set-up but the state-sync procedures MUST NOT be applied on this session.<a href="#section-3.1.1-3.1" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-3.1.1-4">The U flag <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span> MUST be set when sending the STATEFUL-PCE-CAPABILITY TLV with the P flag set. In case the U flag is not set along with the P flag, the state sync capability is not enabled and it is considered as if the P flag is not set.
            The S flag MAY be set if optimized synchronization is required as per <span>[<a href="#RFC8232" class="xref">RFC8232</a>]</span>.<a href="#section-3.1.1-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sync">
<section id="section-3.2">
        <h3 id="name-state-synchronization">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-state-synchronization" class="section-name selfRef">State synchronization</a>
        </h3>
<p id="section-3.2-1">
        When the state sync capability has been negotiated between stateful PCEs, each PCEP speaker will behave as a PCE and as a PCC at the same time regarding the state synchronization as defined in <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span>.
        This means that each PCEP Speaker:<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-2.1">MUST send a PCRpt message towards its neighbor with S flag set for each LSP in its LSP database learned from a PCC. (PCC role)<a href="#section-3.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-2.2">MUST send the End Of Synchronization Marker towards its neighbor when all LSPs have been reported. (PCC role)<a href="#section-3.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-2.3">MUST wait for the LSP synchronization from its neighbor to end (receiving an End Of Synchronization Marker). (PCE role)<a href="#section-3.2-2.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-3.2-3">
        The process of synchronization runs in parallel on each PCE (with no defined order).<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">
        The optimized state synchronization procedures MAY be used, as defined in <span>[<a href="#RFC8232" class="xref">RFC8232</a>]</span>.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<p id="section-3.2-5">
        When a PCEP Speaker sends a PCRpt on a state-sync session, it MUST add the SPEAKER-IDENTITY-TLV (defined in <span>[<a href="#RFC8232" class="xref">RFC8232</a>]</span>) in the LSP Object, the value used will refer to the 'owner' PCC  of the LSP. If a PCEP Speaker receives a PCRpt on a state-sync session without this TLV, it MUST discard the PCRpt message and
        it MUST reply with a PCErr message using error-type=6 (Mandatory Object missing) and error-value=TBD1 (SPEAKER-IDENTITY-TLV missing).<a href="#section-3.2-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="updates">
<section id="section-3.3">
        <h3 id="name-incremental-updates-and-rep">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-incremental-updates-and-rep" class="section-name selfRef">Incremental updates and report forwarding rules</a>
        </h3>
<p id="section-3.3-1">During the life of an LSP, its state may change (path, constraints, operational state...) and a PCC will advertise a new PCRpt to the PCE for each such change.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">When propagating LSP state changes from a PCE to other PCEs, it is mandatory to ensure that a PCE always uses the freshest state coming from the PCC.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<p id="section-3.3-3">When a PCE receives a new PCRpt from a PCC with the LSP-DB-VERSION, the PCE MUST forward the PCRpt to all its state-sync sessions and MUST add the appropriate SPEAKER-IDENTITY-TLV in the PCRpt. In addition, it MUST add a new ORIGINAL-LSP-DB-VERSION TLV (described below). The ORIGINAL-LSP-DB-VERSION contains the LSP-DB-VERSION coming from the PCC.<a href="#section-3.3-3" class="pilcrow">¶</a></p>
<p id="section-3.3-4">When a PCE receives a new PCRpt from a PCC without the LSP-DB-VERSION, it SHOULD NOT forward the PCRpt on any state-sync sessions and log such an event on the first occurrence.<a href="#section-3.3-4" class="pilcrow">¶</a></p>
<p id="section-3.3-5">When a PCE receives a new PCRpt from a PCC with the R flag (Remove) set and an LSP-DB-VERSION TLV, the PCE MUST forward the PCRpt to all its state-sync sessions keeping the R flag set (Remove) and MUST add the appropriate SPEAKER-IDENTITY-TLV and ORIGINAL-LSP-DB-VERSION TLV in the PCRpt message.<a href="#section-3.3-5" class="pilcrow">¶</a></p>
<p id="section-3.3-6">When a PCE receives a PCRpt from a state-sync session, it MUST NOT forward the PCRpt to other state-sync sessions. This helps to prevent message loops between PCEs. As a consequence, a full mesh of PCEP sessions between PCEs are REQUIRED.<a href="#section-3.3-6" class="pilcrow">¶</a></p>
<p id="section-3.3-7">When a PCRpt is forwarded, all the original objects and values are kept. As an example, the PLSP-ID used in the forwarded PCRpt will be the same as the original one used by the PCC. Thus an implementation supporting 
        this document MUST consider SPEAKER-IDENTITY-TLV and PLSP-ID together to uniquely identify an LSP on the state-sync session.<a href="#section-3.3-7" class="pilcrow">¶</a></p>
<p id="section-3.3-8">
        The ORIGINAL-LSP-DB-VERSION TLV is encoded as follows and MUST always contain the LSP-DB-VERSION received from the owner PCC of the LSP:<a href="#section-3.3-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.3-9">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Type=TBD2           |            Length=8           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 LSP State DB Version Number                   |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-3.3-9" class="pilcrow">¶</a>
</div>
<p id="section-3.3-10">
        Using the ORIGINAL-LSP-DB-VERSION TLV allows a PCE to keep using optimized synchronization (<span>[<a href="#RFC8232" class="xref">RFC8232</a>]</span>) with another PCE. In such a case, the PCE will send a PCRpt to another PCE with both ORIGINAL-LSP-DB-VERSION TLV and LSP-DB-VERSION TLV. The ORIGINAL-LSP-DB-VERSION TLV will contain the version number as allocated by the PCC while the LSP-DB-VERSION will contain the version number allocated by the local PCE.<a href="#section-3.3-10" class="pilcrow">¶</a></p>
</section>
</div>
<div id="maintenance">
<section id="section-3.4">
        <h3 id="name-maintaining-lsp-states-from">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-maintaining-lsp-states-from" class="section-name selfRef">Maintaining LSP states from different sources</a>
        </h3>
<p id="section-3.4-1">
        When a PCE receives a PCRpt on a state-sync session, it stores the LSP information into the original PCC address context (as the LSP belongs to the PCC). A PCE SHOULD maintain a single state for a particular LSP and SHOULD maintain the list of sources it learned a particular state from.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4-2">A PCEP speaker may receive state information for a particular LSP from different sources: the PCC that owns the LSP (through a regular PCEP session) and some PCEs (through PCEP state-sync sessions).
        A PCEP speaker MUST always keep the freshest state in its LSP database, overriding the previously received information.<a href="#section-3.4-2" class="pilcrow">¶</a></p>
<p id="section-3.4-3">
        A PCE, receiving a PCRpt from a PCC, updates the state of the LSP in its LSP-DB with the newly received information. 
        When receiving a PCRpt from another PCE, a PCE SHOULD update the LSP state only if the ORIGINAL-LSP-DB-VERSION present in the PCRpt is greater than the current ORIGINAL-LSP-DB-VERSION of the stored LSP state.
        This ensures that a PCE never tries to update its stored LSP state with an old information.
        Each time a PCE updates an LSP state in its LSP-DB, it SHOULD reset the source list associated with the LSP state and SHOULD add the source speaker address in the source list.
        When a PCE receives a PCRpt which has an ORIGINAL-LSP-DB-VERSION (if coming from a PCE) or an LSP-DB-VERSION (if coming from the PCC) equals to the current ORIGINAL-LSP-DB-VERSION of the stored LSP state, it SHOULD add the source speaker address in the source list.<a href="#section-3.4-3" class="pilcrow">¶</a></p>
<p id="section-3.4-4">When a PCE receives a PCRpt requesting an LSP deletion from a particular source, it SHOULD remove this particular source from the list of sources associated with this LSP.<a href="#section-3.4-4" class="pilcrow">¶</a></p>
<p id="section-3.4-5">When the list of sources becomes empty for a particular LSP, the LSP state MUST be removed. This means that all the sources must send a PCRpt with R=1 for an LSP to make the PCE remove the LSP state.<a href="#section-3.4-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="priority">
<section id="section-3.5">
        <h3 id="name-computation-priority-betwee">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-computation-priority-betwee" class="section-name selfRef">Computation priority between PCEs and sub-delegation</a>
        </h3>
<p id="section-3.5-1">A computation priority is necessary to ensure that a single PCE will perform the computation for all the LSPs in an association group: this will allow for a more optimized LSP placement and will prevent computation loops.<a href="#section-3.5-1" class="pilcrow">¶</a></p>
<p id="section-3.5-2">All PCEs in the network that are handling LSPs in a common LSP association group SHOULD be aware of each other including the computation priority of each PCE. Note that there is no need for PCC to be aware of this.
        The computation priority is a number and the PCE having the highest priority SHOULD be responsible for the computation. If several PCEs have the same priority value, their IP address SHOULD be used as a tie-breaker to provide a rank: the highest IP address has more priority.
        How PCEs are aware of the priority of each other is out of the scope of this document, but as example learning priorities could be done through PCE discovery or local configuration.<a href="#section-3.5-2" class="pilcrow">¶</a></p>
<p id="section-3.5-3">The definition of the priority could be global so the highest priority PCE will handle all path computations or more granular, so a PCE may have the highest priority for only a subset of LSPs or association-groups.<a href="#section-3.5-3" class="pilcrow">¶</a></p>
<p id="section-3.5-4">A PCEP Speaker receiving a PCRpt from a PCC with the D flag set that does not have the highest computation priority, SHOULD forward the PCRpt on all state-sync sessions (as per <a href="#updates" class="xref">Section 3.3</a>) and SHOULD set D flag on the state-sync session towards the highest priority PCE, D flag will be unset to all other state-sync sessions.
        This behavior is similar to the delegation behavior handled at the PCC side and is called a sub-delegation (the PCE sub-delegates the control of the LSP to another PCE). When a PCEP Speaker sub-delegates an LSP to another PCE, it loose control of the LSP and cannot update it anymore by its own decision.
        When a PCE receives a PCRpt with D flag set on a state-sync session, as a regular PCE, it is granted control over the LSP.<a href="#section-3.5-4" class="pilcrow">¶</a></p>
<p id="section-3.5-5">If the highest priority PCE is failing or if the state-sync session between the local PCE and the highest priority PCE failed, the local PCE MAY decide to delegate the LSP to the next highest priority PCE or to take back control of the LSP. It is a local policy decision.<a href="#section-3.5-5" class="pilcrow">¶</a></p>
<p id="section-3.5-6">When a PCE has the delegation for an LSP and needs to update this LSP, it MUST send a PCUpd message to all state-sync sessions and to the PCC session on which it received the delegation. The D-Flag would be unset in the PCUpd for state-sync sessions whereas the D-Flag would be set for the PCC.
        In the case of sub-delegation, the computing PCE will send the PCUpd only to all state-sync sessions (as it has no direct delegation from a PCC). The D-Flag would be set for the state-sync session to the PCE that sub-delegated this LSP and the D-Flag would be unset for other state-sync sessions.<a href="#section-3.5-6" class="pilcrow">¶</a></p>
<p id="section-3.5-7">     
        The PCUpd sent over a state-sync session MUST contain the SPEAKER-IDENTITY-TLV in the LSP Object (the value used must identify the target PCC).
        The PLSP-ID used is the original PLSP-ID generated by the PCC and learned from the forwarded PCRpt.
        If a PCE receives a PCUpd on a state-sync session without the SPEAKER-IDENTITY-TLV, it MUST discard the PCUpd and MUST reply with a PCErr message using error-type=6 (Mandatory Object missing) and error-value=TBD1 (SPEAKER-IDENTITY-TLV missing).<a href="#section-3.5-7" class="pilcrow">¶</a></p>
<p id="section-3.5-8">When a PCE receives a valid PCUpd on a state-sync session, it SHOULD forward the PCUpd to the appropriate PCC (identified based on the SPEAKER-IDENTITY-TLV value) that delegated the LSP originally and SHOULD remove the SPEAKER-IDENTITY-TLV from the LSP Object.
        The acknowledgment of the PCUpd is done through a cascaded mechanism, and the PCC is the only responsible for triggering the acknowledgment: 
        when the PCC receives the PCUpd from the local PCE, it acknowledges it with a PCRpt as per <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span>. 
        When receiving the new PCRpt from the PCC, the local PCE uses the defined forwarding rules on the state-sync session so the acknowledgment is relayed to the computing PCE.<a href="#section-3.5-8" class="pilcrow">¶</a></p>
<p id="section-3.5-9">A PCE SHOULD NOT compute a path using an association-group constraint if it has delegation for only a subset of LSPs in the group. In this case, an implementation MAY use a local policy on PCE to decide if PCE does not compute path at all for this set of LSP or if it can compute a path by relaxing the association-group constraint.<a href="#section-3.5-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="passive">
<section id="section-3.6">
        <h3 id="name-passive-stateful-procedures">
<a href="#section-3.6" class="section-number selfRef">3.6. </a><a href="#name-passive-stateful-procedures" class="section-name selfRef">Passive stateful procedures</a>
        </h3>
<p id="section-3.6-1">
        In the passive stateful PCE architecture, the PCC is responsible for triggering a path computation request using a PCReq message to its PCE.
        Similarly to PCRpt Message, which remains unchanged for passive mode, if a PCE receives a PCReq for an LSP and if this PCE finds that it does not have the highest computation priority of this LSP, or groups..., it MUST forward the PCReq message to the highest priority PCE over the state-sync session.  
        When the highest priority PCE receives the PCReq, it computes the path and generates a PCRep message towards the PCE that made the request. This PCE will then forward the PCRep to the requesting PCC. 
        The handling of LSP object and the SPEAKER-IDENTITY-TLV in PCReq and PCRep is similar to PCRpt/PCUpd messages.<a href="#section-3.6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="init">
<section id="section-3.7">
        <h3 id="name-pce-initiation-procedures">
<a href="#section-3.7" class="section-number selfRef">3.7. </a><a href="#name-pce-initiation-procedures" class="section-name selfRef">PCE initiation procedures</a>
        </h3>
<p id="section-3.7-1">
        It is possible that a PCE does not have a PCEP session with the headend to initiate a LSP as per <span>[<a href="#RFC8281" class="xref">RFC8281</a>]</span>. A PCE could send the PCInitiate message on the state-sync sessions to other PCE to request it to create a PCE-Initiated LSP on its behalf. If the PCE is able to initiate the LSP it would report it on the state-sync session via PCRpt message. If the PCE does not have a session to the headend, it MUST send a PCErr message
   with Error-type=24 (PCE instantiation error) and Error-value=TBD5 (No PCEP session with the headend). PCE could try to initiate via another state-sync PCE if available.<a href="#section-3.7-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="examples">
<section id="section-4">
      <h2 id="name-examples">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
      </h2>
<p id="section-4-1">The examples in this section are for illustrative purpose to show how the behavior of the state sync inter-PCE sessions.<a href="#section-4-1" class="pilcrow">¶</a></p>
<div id="example1">
<section id="section-4.1">
        <h3 id="name-example-1">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-example-1" class="section-name selfRef">Example 1</a>
        </h3>
<div class="alignLeft art-text artwork" id="section-4.1-1">
<pre>
      _________________________________________
     /                                         \
    /        +------+            +------+       \
   |         | PCE1 |            | PCE2 |        |
   |         +------+            +------+        |
   |                                             |
   | +------+           10             +------+  |
   | | PCC1 | ----- R1 ---- R2 ------- | PCC2 |  |
   | +------+       |        |         +------+  |
   |                |        |                   |
   |                |        |                   |
   | +------+       |        |         +------+  |
   | | PCC3 | ----- R3 ---- R4 ------- | PCC4 |  |
   | +------+                          +------+  |
   |                                             |
    \                                           /
     \_________________________________________/


          +----------+
          |   PCC1   |  LSP : PCC1-&gt;PCC2
          +----------+
            /
       D=1 /
   +---------+    +---------+
   |  PCE1   |----|  PCE2   |
   +---------+    +---------+
                   / D=1
                  /
          +----------+
          |   PCC3   |  LSP : PCC3-&gt;PCC4
          +----------+

PCE1 computation priority 100
PCE2 computation priority 200
</pre><a href="#section-4.1-1" class="pilcrow">¶</a>
</div>
<p id="section-4.1-2">Consider the PCEP sessions as shown above, where computation priority is global for all the LSPs and link disjoint between LSPs PCC1-&gt;PCC2 and PCC3-&gt;PCC4 is required.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1-3">Consider the PCC1-&gt;PCC2 is configured first and PCC1 delegates the LSP to PCE1, but as PCE1 does not have the highest computation priority, it sub-delegates the LSP to PCE2 by sending a PCRpt with D=1 and including the SPEAKER-IDENTITY-TLV over the state-sync session.
    PCE2 receives the PCRpt and as it has delegation for this LSP, it computes the shortest path: R1-&gt;R3-&gt;R4-&gt;R2-&gt;PCC2. It then sends a PCUpd to PCE1 (including the SPEAKER-IDENTITY-TLV) with the computed ERO. PCE1 forwards the PCUpd to PCC1 (removing the SPEAKER-IDENTITY-TLV).
    PCC1 acknowledges the PCUpd by a PCRpt to PCE1. PCE1 forwards the PCRpt to PCE2.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1-4">When PCC3-&gt;PCC4 is configured, PCC3 delegates the LSP to PCE2, PCE2 can compute a disjoint path as it has knowledge of both LSPs and has delegation also for both. The only solution found is to move PCC1-&gt;PCC2 LSP on another path, PCE2 can move PCC1-&gt;PCC2 as it has sub-delegation for it.
    It creates a new PCUpd with a new ERO: R1-&gt;R2-PCC2 towards PCE1 which forwards to PCC1. PCE2 sends a PCUpd to PCC3 with the path: R3-&gt;R4-&gt;PCC4.<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<p id="section-4.1-5">
    In this set-up, PCEs are able to find a disjoint path while without state-sync and computation priority they could not.<a href="#section-4.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="example2">
<section id="section-4.2">
        <h3 id="name-example-2">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-example-2" class="section-name selfRef">Example 2</a>
        </h3>
<div class="alignLeft art-text artwork" id="section-4.2-1">
<pre>
      _____________________________________
     /                                     \
    /        +------+        +------+       \
   |         | PCE1 |        | PCE2 |        |
   |         +------+        +------+        |
   |                                         |
   | +------+         100          +------+  |
   | |      | -------------------- |      |  |
   | | PCC1 | ----- R1 ----------- | PCC2 |  |
   | +------+       |              +------+  |
   |    |           |                  |     |
   |  6 |           | 2                | 2   |
   |    |           |                  |     |
   | +------+       |              +------+  |
   | | PCC3 | ----- R3 ----------- | PCC4 |  |
   | +------+               10     +------+  |
   |                                         |
    \                                       /
     \_____________________________________/


          +----------+
          |   PCC1   |  LSP : PCC1-&gt;PCC2
          +----------+
            /     \
       D=1 /       \ D=0
   +---------+    +---------+
   |  PCE1   |----|  PCE2   |
   +---------+    +---------+
        D=0 \      / D=1
             \    /
          +----------+
          |   PCC3   |  LSP : PCC3-&gt;PCC4
          +----------+

PCE1 computation priority 200
PCE2 computation priority 100
</pre><a href="#section-4.2-1" class="pilcrow">¶</a>
</div>
<p id="section-4.2-2">
    In this example, suppose both LSPs are configured almost at the same time.
    PCE1 sub-delegates PCC1-&gt;PCC2 to PCE2 while PCE2 keeps delegation for PCC3-&gt;PCC4, PCE2 computes a path for PCC1-&gt;PCC2 and PCC3-&gt;PCC4 and can achieve disjointness computation easily. 
    No computation loop happens in this case.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="example3">
<section id="section-4.3">
        <h3 id="name-example-3">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-example-3" class="section-name selfRef">Example 3</a>
        </h3>
<div class="alignLeft art-text artwork" id="section-4.3-1">
<pre>
      _________________________________________
     /                                         \
    /        +------+            +------+       \
   |         | PCE1 |            | PCE2 |        |
   |         +------+            +------+        |
   |                                             |
   | +------+           10             +------+  |
   | | PCC1 | ----- R1 ---- R2 ------- | PCC2 |  |
   | +------+       |        |         +------+  |
   |                |        |                   |
   |                |        |                   |
   | +------+       |        |         +------+  |
   | | PCC3 | ----- R3 ---- R4 ------- | PCC4 |  |
   | +------+                          +------+  |
   |                                             |
    \                                           /
     \_________________________________________/


          +----------+
          |   PCC1   |  LSP : PCC1-&gt;PCC2
          +----------+
            /
       D=1 /
   +---------+    +---------+    +---------+
   |  PCE1   |----|  PCE2   |----|  PCE3   |
   +---------+    +---------+    +---------+
                   / D=1
                  /
          +----------+
          |   PCC3   |  LSP : PCC3-&gt;PCC4
          +----------+

PCE1 computation priority 100
PCE2 computation priority 200
PCE3 computation priority 300
</pre><a href="#section-4.3-1" class="pilcrow">¶</a>
</div>
<p id="section-4.3-2">With the PCEP sessions as shown above, consider the need to have link disjoint LSPs PCC1-&gt;PCC2 and PCC3-&gt;PCC4.<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.3-3">Suppose PCC1-&gt;PCC2 is configured first, PCC1 delegates the LSP to PCE1, but as PCE1 does not have the highest computation priority, it will sub-delegate the LSP to PCE2 (as it not aware of PCE3 and has no way to reach it).
    PCE2 cannot compute a path for PCC1-&gt;PCC2 as it does not have the highest priority and is not allowed to sub-delegate the LSP again towards PCE3 as per <a href="#procedures" class="xref">Section 3</a>.<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<p id="section-4.3-4">When PCC3-&gt;PCC4 is configured, PCC3 delegates the LSP to PCE2 that performs sub-delegation to PCE3. As PCE3 will have knowledge of only one LSP in the group, it cannot compute disjointness and can decide to fall-back to a less constrained computation
    to provide a path for PCC3-&gt;PCC4. In this case, it will send a PCUpd to PCE2 that will be forwarded to PCC3.<a href="#section-4.3-4" class="pilcrow">¶</a></p>
<p id="section-4.3-5">Disjointness cannot be achieved in this scenario because of lack of state-sync session between PCE1 and PCE3, but no computation loop happens. Thus it is advised for all PCEs that support state-sync to have a full mesh sessions between each other.<a href="#section-4.3-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="scaling">
<section id="section-5">
      <h2 id="name-using-primary-secondary-com">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-using-primary-secondary-com" class="section-name selfRef">Using Primary/Secondary Computation and State-sync Sessions to increase Scaling</a>
      </h2>
<p id="section-5-1">
    The Primary/Secondary computation and state-sync sessions architecture can be used to increase the scaling of the PCE architecture.
    If the number of PCCs is really high, it may be too resource consuming for a single PCE to maintain all the PCEP sessions while at the same time performing all path computations.
    Using primary/secondary computation and state-sync sessions may allow to create groups of PCEs that manage a subset of the PCCs and perform some or no path computations.
    Decoupling PCEP session maintenance and computation will allow increasing scaling of the PCE architecture.<a href="#section-5-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5-2">
<pre>

            +----------+
            |  PCC500  |
          +----------+-+
          |   PCC1   |
          +----------+
            /     \
           /       \
   +---------+   +---------+
   |  PCE1   |---|  PCE2   |
   +---------+   +---------+
        |    \  /    |
        |     \/     |
        |     /\     |
        |    /  \    |
   +---------+   +---------+
   |  PCE3   |---|  PCE4   |
   +---------+   +---------+
           \       /
            \     /
          +----------+
          |  PCC501  |
          +----------+-+
            |  PCC1000 |
            +----------+

</pre><a href="#section-5-2" class="pilcrow">¶</a>
</div>
<p id="section-5-3">
    In the figure above, two groups of PCEs are created: PCE1/2 maintain PCEP sessions with PCC1 up to PCC500, while PCE3/4 maintain PCEP sessions with PCC501 up to PCC1000.
    A granular primary/secondary policy is set-up as follows to load-share computation between PCEs:<a href="#section-5-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-4.1">PCE1 has priority 200 for association ID 1 up to 300, association source 0.0.0.0. All other PCEs have a decreasing priority for those associations.<a href="#section-5-4.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-5-4.2">PCE3 has priority 200 for association ID 301 up to 500, association source 0.0.0.0. All other PCEs have a decreasing priority for those associations.<a href="#section-5-4.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-5-5">
    If some PCCs delegate LSPs with association ID 1 up to 300 and association source 0.0.0.0, the receiving PCE (if not PCE1) will sub-delegate the LSPs to PCE1. 
    PCE1 becomes responsible for the computation of these LSP associations while PCE3 is responsible for the computation of another set of associations.<a href="#section-5-5" class="pilcrow">¶</a></p>
<p id="section-5-6">The procedures described in this document could help greatly in load-sharing between a group of stateful PCEs.<a href="#section-5-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="loop-avoidance">
<section id="section-6">
      <h2 id="name-pcep-path-vector-tlv">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-pcep-path-vector-tlv" class="section-name selfRef">PCEP-PATH-VECTOR TLV</a>
      </h2>
<p id="section-6-1">
    This document allows PCEP messages to be propagated among PCEP speaker. It may be useful to track information about the propagation of the messages.
    One of the use cases is a message loop detection mechanism, but other use cases like hop by hop information recording may also be implemented.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">
    This document introduces the PCEP-PATH-VECTOR TLV (type TBD3) with the following format:<a href="#section-6-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-3">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               Type=TBD3       |            Length             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              PCEP-SPEAKER-INFORMATION#1                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              ...                                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              ...                                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              PCEP-SPEAKER-INFORMATION#n                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-6-3" class="pilcrow">¶</a>
</div>
<p id="section-6-4">The TLV format and padding rules are as per <span>[<a href="#RFC5440" class="xref">RFC5440</a>]</span>.<a href="#section-6-4" class="pilcrow">¶</a></p>
<p id="section-6-5">
    The PCEP-SPEAKER-INFORMATION field has the following format:<a href="#section-6-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-6">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Length                    |      ID Length                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
//              Speaker Entity identity (variable)             //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
//              SubTLVs (optional)                             //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-6-6" class="pilcrow">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-6-7.1">Length: defines the total length of the PCEP-SPEAKER-INFORMATION field.<a href="#section-6-7.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-6-7.2">ID Length: defines the length of the Speaker identity actual field (non-padded).<a href="#section-6-7.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-6-7.3">Speaker Entity identity: same possible values as the SPEAKER-IDENTIFIER-TLV. Padded with trailing zeros to a 4-byte boundary.<a href="#section-6-7.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-6-7.4">The PCEP-SPEAKER-INFORMATION may also carry some optional subTLVs so each PCEP speaker can add local information that could be recorded. This document does not define any sub-TLV.<a href="#section-6-7.4" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-6-8">The PCEP-PATH-VECTOR TLV MAY be carried in the LSP Object. Its usage is purely optional.<a href="#section-6-8" class="pilcrow">¶</a></p>
<p id="section-6-9">
    The list of speakers within the PCEP-PATH-VECTOR TLV MUST be ordered. When sending a PCEP message (PCRpt, PCUpd, or PCInitiate), a PCEP Speaker MAY add the PCEP-PATH-VECTOR TLV with a PCEP-SPEAKER-INFORMATION containing its own information.
    If the PCEP message sent is the result of a previously received PCEP message, and if the PCEP-PATH-VECTOR TLV was already present in the initial message, the PCEP speaker MAY append a new PCEP-SPEAKER-INFORMATION containing its own information.<a href="#section-6-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Security">
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">
  The security considerations described in <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span> and <span>[<a href="#RFC5440" class="xref">RFC5440</a>]</span>
   apply to the extensions described in this document as well.
   Additional considerations related to state synchronization and sub-delegation between stateful PCEs are
   introduced, as it could be spoofed and could be used as an
   attack vector.  An attacker could attempt to create too much 
   state in an attempt to load the PCEP peer.  The PCEP peer
   responds with a PCErr message as described in <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span>.  An
   attacker could impact LSP operations by creating bogus state.
   Further, state synchronization between stateful PCEs could provide an adversary with the
   opportunity to eavesdrop on the network.  Thus,
   securing the PCEP session using Transport Layer Security (TLS)
   <span>[<a href="#RFC8253" class="xref">RFC8253</a>]</span>, as per the recommendations and best current practices in
   <span>[<a href="#RFC7525" class="xref">RFC7525</a>]</span>, is RECOMMENDED.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Acknowledgements">
<section id="section-8">
      <h2 id="name-acknowledgements">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-8-1">
    Thanks to <span>[<a href="#I-D.knodel-terminology" class="xref">I-D.knodel-terminology</a>]</span> urging for better use of terms.<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="IANA">
<section id="section-9">
      <h2 id="name-iana-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-9-1">
    This document requests IANA actions to allocate code points for the protocol elements defined in this document.<a href="#section-9-1" class="pilcrow">¶</a></p>
<div id="IANA-error">
<section id="section-9.1">
        <h3 id="name-pcep-error-object">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-pcep-error-object" class="section-name selfRef">PCEP-Error Object</a>
        </h3>
<p id="section-9.1-1">IANA is requested to allocate a new Error Value for the Error Type 9.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<table class="left" id="table-1">
          <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
            <tr>
              <th class="text-center" rowspan="1" colspan="1">Error-Type</th>
              <th class="text-left" rowspan="1" colspan="1">Meaning</th>
              <th class="text-left" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-center" rowspan="1" colspan="1">6</td>
              <td class="text-left" rowspan="1" colspan="1">Mandatory Object Missing</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span>[<a href="#RFC5440" class="xref">RFC5440</a>]</span>
</td>
            </tr>
            <tr>
              <td class="text-center" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">Error-value=TBD1: SPEAKER-IDENTITY-TLV missing</td>
              <td class="text-left" rowspan="1" colspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-center" rowspan="1" colspan="1">24</td>
              <td class="text-left" rowspan="1" colspan="1">LSP instantiation error</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span>[<a href="#RFC8281" class="xref">RFC8281</a>]</span>
</td>
            </tr>
            <tr>
              <td class="text-center" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">Error-value=TBD5: No PCEP session with the headend</td>
              <td class="text-left" rowspan="1" colspan="1">This document</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="IANA-TLV">
<section id="section-9.2">
        <h3 id="name-pcep-tlv-type-indicators">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-pcep-tlv-type-indicators" class="section-name selfRef">PCEP TLV Type Indicators</a>
        </h3>
<p id="section-9.2-1">IANA is requested to allocate new TLV Type Indicator values within
            the "PCEP TLV Type Indicators" sub-registry of the PCEP Numbers
            registry, as follows:<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<table class="left" id="table-2">
          <caption><a href="#table-2" class="selfRef">Table 2</a></caption>
<thead>
            <tr>
              <th class="text-center" rowspan="1" colspan="1">Value</th>
              <th class="text-center" rowspan="1" colspan="1">Meaning</th>
              <th class="text-center" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-center" rowspan="1" colspan="1">TBD2</td>
              <td class="text-center" rowspan="1" colspan="1">ORIGINAL-LSP-DB-VERSION TLV</td>
              <td class="text-center" rowspan="1" colspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-center" rowspan="1" colspan="1">TBD3</td>
              <td class="text-center" rowspan="1" colspan="1">PCEP-PATH-VECTOR TLV</td>
              <td class="text-center" rowspan="1" colspan="1">This document</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="IANA-cap">
<section id="section-9.3">
        <h3 id="name-stateful-pce-capability-tlv">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-stateful-pce-capability-tlv" class="section-name selfRef">STATEFUL-PCE-CAPABILITY TLV</a>
        </h3>
<p id="section-9.3-1">IANA is requested to allocate a new bit value in the STATEFUL-PCE-CAPABILITY TLV Flag Field sub-registry.<a href="#section-9.3-1" class="pilcrow">¶</a></p>
<table class="left" id="table-3">
          <caption><a href="#table-3" class="selfRef">Table 3</a></caption>
<thead>
            <tr>
              <th class="text-center" rowspan="1" colspan="1">Bit</th>
              <th class="text-center" rowspan="1" colspan="1">Description</th>
              <th class="text-center" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-center" rowspan="1" colspan="1">TBD4</td>
              <td class="text-center" rowspan="1" colspan="1">INTER-PCE-CAPABILITY</td>
              <td class="text-center" rowspan="1" colspan="1">This document</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
</section>
</div>
<section id="section-10">
      <h2 id="name-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-10.1">
        <h3 id="name-normative-references">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5440">[RFC5440]</dt>
        <dd>
<span class="refAuthor">Vasseur, JP., Ed.</span> and <span class="refAuthor">JL. Le Roux, Ed.</span>, <span class="refTitle">"Path Computation Element (PCE) Communication Protocol (PCEP)"</span>, <span class="seriesInfo">RFC 5440</span>, <span class="seriesInfo">DOI 10.17487/RFC5440</span>, <time datetime="2009-03" class="refDate">March 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5440">https://www.rfc-editor.org/info/rfc5440</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8231">[RFC8231]</dt>
        <dd>
<span class="refAuthor">Crabbe, E.</span>, <span class="refAuthor">Minei, I.</span>, <span class="refAuthor">Medved, J.</span>, and <span class="refAuthor">R. Varga</span>, <span class="refTitle">"Path Computation Element Communication Protocol (PCEP) Extensions for Stateful PCE"</span>, <span class="seriesInfo">RFC 8231</span>, <span class="seriesInfo">DOI 10.17487/RFC8231</span>, <time datetime="2017-09" class="refDate">September 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8231">https://www.rfc-editor.org/info/rfc8231</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8232">[RFC8232]</dt>
        <dd>
<span class="refAuthor">Crabbe, E.</span>, <span class="refAuthor">Minei, I.</span>, <span class="refAuthor">Medved, J.</span>, <span class="refAuthor">Varga, R.</span>, <span class="refAuthor">Zhang, X.</span>, and <span class="refAuthor">D. Dhody</span>, <span class="refTitle">"Optimizations of Label Switched Path State Synchronization Procedures for a Stateful PCE"</span>, <span class="seriesInfo">RFC 8232</span>, <span class="seriesInfo">DOI 10.17487/RFC8232</span>, <time datetime="2017-09" class="refDate">September 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8232">https://www.rfc-editor.org/info/rfc8232</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8253">[RFC8253]</dt>
      <dd>
<span class="refAuthor">Lopez, D.</span>, <span class="refAuthor">Gonzalez de Dios, O.</span>, <span class="refAuthor">Wu, Q.</span>, and <span class="refAuthor">D. Dhody</span>, <span class="refTitle">"PCEPS: Usage of TLS to Provide a Secure Transport for the Path Computation Element Communication Protocol (PCEP)"</span>, <span class="seriesInfo">RFC 8253</span>, <span class="seriesInfo">DOI 10.17487/RFC8253</span>, <time datetime="2017-10" class="refDate">October 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8253">https://www.rfc-editor.org/info/rfc8253</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-10.2">
        <h3 id="name-informative-references">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.knodel-terminology">[I-D.knodel-terminology]</dt>
        <dd>
<span class="refAuthor">Knodel, M.</span> and <span class="refAuthor">N. T. Oever</span>, <span class="refTitle">"Terminology, Power, and Exclusionary Language in Internet-Drafts and RFCs"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-knodel-terminology-06</span>, <time datetime="2021-08-23" class="refDate">23 August 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-knodel-terminology-06">https://datatracker.ietf.org/doc/html/draft-knodel-terminology-06</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4655">[RFC4655]</dt>
        <dd>
<span class="refAuthor">Farrel, A.</span>, <span class="refAuthor">Vasseur, J.-P.</span>, and <span class="refAuthor">J. Ash</span>, <span class="refTitle">"A Path Computation Element (PCE)-Based Architecture"</span>, <span class="seriesInfo">RFC 4655</span>, <span class="seriesInfo">DOI 10.17487/RFC4655</span>, <time datetime="2006-08" class="refDate">August 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4655">https://www.rfc-editor.org/info/rfc4655</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6805">[RFC6805]</dt>
        <dd>
<span class="refAuthor">King, D., Ed.</span> and <span class="refAuthor">A. Farrel, Ed.</span>, <span class="refTitle">"The Application of the Path Computation Element Architecture to the Determination of a Sequence of Domains in MPLS and GMPLS"</span>, <span class="seriesInfo">RFC 6805</span>, <span class="seriesInfo">DOI 10.17487/RFC6805</span>, <time datetime="2012-11" class="refDate">November 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6805">https://www.rfc-editor.org/info/rfc6805</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7399">[RFC7399]</dt>
        <dd>
<span class="refAuthor">Farrel, A.</span> and <span class="refAuthor">D. King</span>, <span class="refTitle">"Unanswered Questions in the Path Computation Element Architecture"</span>, <span class="seriesInfo">RFC 7399</span>, <span class="seriesInfo">DOI 10.17487/RFC7399</span>, <time datetime="2014-10" class="refDate">October 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7399">https://www.rfc-editor.org/info/rfc7399</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7525">[RFC7525]</dt>
        <dd>
<span class="refAuthor">Sheffer, Y.</span>, <span class="refAuthor">Holz, R.</span>, and <span class="refAuthor">P. Saint-Andre</span>, <span class="refTitle">"Recommendations for Secure Use of Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS)"</span>, <span class="seriesInfo">BCP 195</span>, <span class="seriesInfo">RFC 7525</span>, <span class="seriesInfo">DOI 10.17487/RFC7525</span>, <time datetime="2015-05" class="refDate">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7525">https://www.rfc-editor.org/info/rfc7525</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7752">[RFC7752]</dt>
        <dd>
<span class="refAuthor">Gredler, H., Ed.</span>, <span class="refAuthor">Medved, J.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Farrel, A.</span>, and <span class="refAuthor">S. Ray</span>, <span class="refTitle">"North-Bound Distribution of Link-State and Traffic Engineering (TE) Information Using BGP"</span>, <span class="seriesInfo">RFC 7752</span>, <span class="seriesInfo">DOI 10.17487/RFC7752</span>, <time datetime="2016-03" class="refDate">March 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7752">https://www.rfc-editor.org/info/rfc7752</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8051">[RFC8051]</dt>
        <dd>
<span class="refAuthor">Zhang, X., Ed.</span> and <span class="refAuthor">I. Minei, Ed.</span>, <span class="refTitle">"Applicability of a Stateful Path Computation Element (PCE)"</span>, <span class="seriesInfo">RFC 8051</span>, <span class="seriesInfo">DOI 10.17487/RFC8051</span>, <time datetime="2017-01" class="refDate">January 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8051">https://www.rfc-editor.org/info/rfc8051</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8281">[RFC8281]</dt>
        <dd>
<span class="refAuthor">Crabbe, E.</span>, <span class="refAuthor">Minei, I.</span>, <span class="refAuthor">Sivabalan, S.</span>, and <span class="refAuthor">R. Varga</span>, <span class="refTitle">"Path Computation Element Communication Protocol (PCEP) Extensions for PCE-Initiated LSP Setup in a Stateful PCE Model"</span>, <span class="seriesInfo">RFC 8281</span>, <span class="seriesInfo">DOI 10.17487/RFC8281</span>, <time datetime="2017-12" class="refDate">December 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8281">https://www.rfc-editor.org/info/rfc8281</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8751">[RFC8751]</dt>
        <dd>
<span class="refAuthor">Dhody, D.</span>, <span class="refAuthor">Lee, Y.</span>, <span class="refAuthor">Ceccarelli, D.</span>, <span class="refAuthor">Shin, J.</span>, and <span class="refAuthor">D. King</span>, <span class="refTitle">"Hierarchical Stateful Path Computation Element (PCE)"</span>, <span class="seriesInfo">RFC 8751</span>, <span class="seriesInfo">DOI 10.17487/RFC8751</span>, <time datetime="2020-03" class="refDate">March 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8751">https://www.rfc-editor.org/info/rfc8751</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8800">[RFC8800]</dt>
      <dd>
<span class="refAuthor">Litkowski, S.</span>, <span class="refAuthor">Sivabalan, S.</span>, <span class="refAuthor">Barth, C.</span>, and <span class="refAuthor">M. Negi</span>, <span class="refTitle">"Path Computation Element Communication Protocol (PCEP) Extension for Label Switched Path (LSP) Diversity Constraint Signaling"</span>, <span class="seriesInfo">RFC 8800</span>, <span class="seriesInfo">DOI 10.17487/RFC8800</span>, <time datetime="2020-07" class="refDate">July 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8800">https://www.rfc-editor.org/info/rfc8800</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<section id="appendix-A">
      <h2 id="name-contributors">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<div class="alignLeft art-text artwork" id="appendix-A-1">
<pre>
Dhruv Dhody
Huawei Technologies
Divyashree Techno Park, Whitefield
Bangalore, Karnataka  560066
India

Email: dhruv.ietf@gmail.com
</pre><a href="#appendix-A-1" class="pilcrow">¶</a>
</div>
</section>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Stephane Litkowski</span></div>
<div dir="auto" class="left"><span class="org">Cisco</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:slitkows.ietf@gmail.com" class="email">slitkows.ietf@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Siva Sivabalan</span></div>
<div dir="auto" class="left"><span class="org">Ciena Corporation</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:msiva282@gmail.com" class="email">msiva282@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Cheng Li</span></div>
<div dir="auto" class="left"><span class="org">Huawei Technologies</span></div>
<div dir="auto" class="left"><span class="street-address">Huawei Campus, No. 156 Beiqing Rd.</span></div>
<div dir="auto" class="left"><span class="locality">Beijing</span></div>
<div dir="auto" class="left"><span class="postal-code">100095</span></div>
<div dir="auto" class="left"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:c.l@huawei.com" class="email">c.l@huawei.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Haomian Zheng</span></div>
<div dir="auto" class="left"><span class="org">Huawei Technologies</span></div>
<div dir="auto" class="left"><span class="street-address">H1, Huawei Xiliu Beipo Village, Songshan Lake</span></div>
<div dir="auto" class="left"><span class="locality">Dongguan</span></div>
<div dir="auto" class="left">
<span class="region">Guangdong</span>, <span class="postal-code">523808</span>
</div>
<div dir="auto" class="left"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:zhenghaomian@huawei.com" class="email">zhenghaomian@huawei.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
