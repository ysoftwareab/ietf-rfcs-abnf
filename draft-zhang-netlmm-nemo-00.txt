





     NETLMM Working Group                                        Zhi-wei Yan 
     Internet Draft                                            Hong-ke Zhang  
     Expires: January 2009                                     Hua-Chun Zhou 
                                                              Jian-Feng Guan  
                                                               Si-Dong Zhang 
                                                 Beijing Jiaotong University 
                                                               July 29, 2009 
                                         
                                           
                     Consideration of Network Mobility in PMIPv6  
                           draft-zhang-netlmm-nemo-00.txt 


     Status of this Memo 

	 This Internet-Draft is submitted to IETF in full conformance with the
	 provisions of BCP 78 and BCP 79.

	 Internet-Drafts are working documents of the Internet Engineering
   	 Task Force (IETF), its areas, and its working groups.  Note that
   	 other groups may also distribute working documents as Internet-
	 Drafts.

        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time.  It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."

        The list of current Internet-Drafts can be accessed at
        http://www.ietf.org/1id-abstracts.html

        The list of Internet-Draft Shadow Directories can be accessed at
        http://www.ietf.org/shadow.html

        This Internet-Draft will expire on January,2010. 
    
     Copyright Notice

   	Copyright (c) 2009 IETF Trust and the persons identified as the
	document authors.  All rights reserved.

   	This document is subject to BCP 78 and the IETF Trust's Legal
	Provisions Relating to IETF Documents in effect on the date of
	publication of this document (http://trustee.ietf.org/license-info).
	Please review these documents carefully, as they describe your rights
	and restrictions with respect to this document.

     Abstract 

        The NetLMM WG is specifying Proxy Mobile IPv6 (PMIPv6) for network-
        based localized mobility management (NetLMM), taking basic support 
        for registration, de-registration and handover of signal Mobile Node 
        (MN) into account in the RFC 5213 [1]. When a whole network moves 
        into the PMIPv6 domain through the Mobile Router (MR), the scheme 
        should be considered to provide and maintain the connectivity for the 
        Mobile Network Node (MNN) in the mobile network (NEMO). This document 
        discusses the deployment consideration of NEMO support in PMIPv6 
        network and proposes the possible solution accordingly. 

      
      
      
     Zhang et al.           Expires January 1, 2010                 [Page 1] 
      
     Internet-Draft     Consideration of NEMO in PMIPv6            July 2009 
      

     Conventions used in this document 

        The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
        document are to be interpreted as described in [1]. 

     Table of Contents 

         
        1. Introduction...................................................1 
        2. Problem statement of NEMO in PMIPv6 network....................2 
        3. Possible solution for the NEMO in PMIPv6 network...............2 
        4. Possible solution for the nested NEMO in PMIPv6 network........3 
        5. Requirements of the newly defined messages.....................4 
        6. Security Considerations........................................4 
        7. References.....................................................4 
        Authors' Addresses................................................5 
       
         
      1. Introduction 

        As the extension of basic MIPv6 specification [2], NEMO [3] was 
        proposed to support the network mobility in MIPv6 network. The 
        protocol procedure of MIPv6-NEMO is compatible with basic MIPv6 
        protocol and the prefix of network is maintained by HA to support the 
        redirection of packets to and from the mobile network. However, the 
        mobility of MIPv6-NEMO is managed by the MR as the MN does in basic 
        MIPv6.  

        Be different with MIPv6, the PMIPv6 was proposed to support the 
        network-based mobility supporting. The entities in the PMIPv6 have 
        the responsibility to track the MN, update the location of MN and 
        redirect the packets to and from MN. However, the basic PMIPv6 
        protocol only consider the mobility management for the signal MN, the 
        mobility supporting for a whole network is not considered. 

        This document discusses the deployment consideration of NEMO in 
        PMIPv6 network noted as PMIPv6-NEMO. As a default router of the whole 
        mobile network, a PMIPv6-MR should not only send and receive the 
        packets for MNN, but also manage the mobility of MNN. 

         



      
      
     Zhang et al.            Expires January 1, 2010                [Page 2] 
         
     Internet-Draft     Consideration of NEMO in PMIPv6            July 2009 
      

      2. Problem statement of NEMO in PMIPv6 network 

        At least there are two problems should be considered when deploying 
        NEMO in PMIPv6 network. The first one is the mobility management of 
        the whole network. The second one is the nested NEMO supporting 
        consideration.  

        For the first problem, the binding process and packets interception 
        scheme of basic PMIPv6 must be extended to manage the MR and its 
        related Mobile Network Prefix (MNP). The Local Mobility Anchor (LMA) 
        must not only intercept and redirect the packets for MR, but also 
        intercept and redirect the packets for the nodes belonging to the MNP.  

        For the second problem, we should consider who manages the mobility 
        of NEMO. When the mobility of NEMO is managed by MR itself, it 
        follows the procedure in RFC 3963 and the advantages of network-based 
        manner disappear. When the mobility of NEMO is managed by network, 
        the MR should not involve in the mobility management process. Then 
        the mobility of nested MRs should also be managed by network and not 
        the MRs themself. 

      3. Possible solution for the NEMO in PMIPv6 network 

        In PMIPv6, the MN-HNP is a prefix assigned to the link between the 
        mobile node and the Mobile Access Gateway (MAG). More than one prefix 
        can be assigned to the link between the mobile node and the mobile 
        access gateway, in which case, all of the assigned prefixes are 
        managed as a set associated with a mobility session. The mobile node 
        configures its interface with one or more addresses from its home 
        network prefix(es). After the first binding process between MAG and 
        LMA, the address of MN remains when MN roams in the same PMIPv6 
        domain. The address of currently attached MAG is the Proxy Care-of 
        Address (Proxy-CoA) of MN. The mapping information of MN' prefix and 
        Proxy-CoA is maintained and updated by LMA. 

        When the NEMO is deployed, the binding process must be extended. The 
        indication information of MR' access should be carried in the PBU 
        and PBA messages. Besides, the following information must be 
        maintained by LMA in the binding cache entries. 

        o  R flag indicating whether or not this Binding Cache entry is 
        created for a mobile router or a signal node. This flag is set to 
        value 1 for Binding Cache entries for MRs and is set to value 0 for 
        the signal nodes. 

        o  A list of IPv6 mobile network prefixes in the mobile network. The 
        mobile network prefix(es) may have been statically configured in the 
      
      
     Zhang et al.            Expires January 1, 2010                [Page 3] 
         
     Internet-Draft     Consideration of NEMO in PMIPv6            July 2009 
      

        mobile router's policy profile, or, they may have been dynamically 
        allocated by the LMA. Each one of these prefix entries will also 
        include the corresponding prefix length. 

      4. Possible solution for the nested NEMO in PMIPv6 network 

        The Router Advertisement message must be sent out by the MR in the 
        point-to-point manner as the MAG does. When another MR2 or MN 
        attaches to the MR1 whose connection has been established, the 
        attachment should be discovered by MR1 through the Link layer 
        information. But the MR1 should not involve in the mobility 
        management process as MAG does. 

        In the process of PMIPv6, the MAG who discovers the attachment of MN 
        will authenticate the MN and require its related information, such as 
        the MN' identifier and its LMA address. Then the MAG initiates the 
        binding process to establish a tunnel with the LMA for the MN. In the 
        PMIPv6-NEMO, the authentication and binding process should be 
        triggered by the attached MR and executed by the MAG attached by root 
        MR. The process is illustrated in figure 1. 

                         +------+     +-----+      +-----+      +-----+        
                         |  MR2 |     | MR1 |      | MAG |      | LMA |        
                         +------+     +-----+      +-----+      +-----+        
                           |-- Attach ->|           |             |                
                           |--RtSol---->|           |             |                
                           |            |----PAQ--->|             |                
                           |            |           |------PBU--->|                
                           |            |           |    Accept PBU 
                           |            | (Allocate MR-HNP(s), Setup BCE and Tunnel)                   
                           |            |           |             |                
                           |            |           |<-----PBA----|                
                           |            |<----PAP---|             |                
                           |<----RA-----|           |             |                
                           |-----data-->|           |             |                
                           |            |----data-->|             |                
                           |            |           |====data====>|                
                           |            |           |<====data====|                
                           |            |<----data--|             |                
                           |<-----data--|           |             |                
                           |            |           |             |                
                         Figure 1: Solution for nested NEMO 

        There are two newly defined signaling messages: PAQ is the Proxy 
        Authentication Request message sent by the attached MR to the upper 
      
      
     Zhang et al.            Expires January 1, 2010                [Page 4] 
         
     Internet-Draft     Consideration of NEMO in PMIPv6            July 2009 
      

        layer MR or the MAG, PAP is the Proxy Authentication Reply message 
        which is the response message of PAQ.  

        When the MR1 attaches to the MAG, a tunnel is established for MR1 
        between MAG and LMA. When another MR2 attaches to MR1, the MR1 sends 
        out the PAQ message to MAG and the MAC address of MR2 is carried in 
        PAQ. Then the MAG authenticates the MR2 and sends out the PBU message 
        to the LMA of MR2 as illustrated in section 3. When the LMA receives 
        the PBU message, it establishes a tunnel with MAG and sends back the 
        PBA message. After this process, the tunnel is established for MR2 
        and the MAG sends a PAP message to MR1 which is the response message 
        to PAQ. When the PAP message arrives at MR1, the proper policy is 
        established and the following packets to and from MR2 can be 
        redirected by MR1. 

      5. Requirements of the newly defined messages 

        In the newly defined PAQ and PAP messages, some necessary information 
        must be carried. In the PAQ message, only the MAC address of MNN 
        should be carried. While in the PAP message, the following 
        information should be carried, 

        o  R flag indicating whether or not this authentication is executed 
        for a mobile router or a signal node. This flag is set to value 1 for 
        for MRs and is set to value 0 for the signal nodes. 

        o  A list of IPv6 Home Network Prefixes(HNP). The home network 
        prefix(es) may have been statically configured for the mobile router, 
        or, they may have been dynamically allocated by the local mobility 
        anchor. Each one of these prefix entries will also include the 
        corresponding prefix length. 

      6. Security Considerations 

        The HNP of the nested MR may be different with the prefix the 
        attached MR broadcasts. So the attached MR must check whether the 
        packets belong to the MNN in its mobile network. 

        To eliminate the threats on the interface between the mobile access 
        gateway and the MR, this specification requires an established trust 
        between the mobile access gateway and the MR node and to authenticate 
        and authorize the MR before it is allowed to access the network.  

      7. References 

        [1]   Gundavelli, et al., "Proxy Mobile Ipv6", RFC5213, August 2008.  

      
      
     Zhang et al.            Expires January 1, 2010                [Page 5] 
         
     Internet-Draft     Consideration of NEMO in PMIPv6            July 2009 
      

        [2]   David B. Johnson, Charles E. Perkins and Jari Arkko. "Mobility 
              Support in IPv6", RFC 3775, June 2004. 

        [3]   Vijay Devarapalli, Ryuji Wakikawa, Alexandru Petrescu, and 
              Pascal Thubert. "NEMO Basic Support Protocol", RFC 3963, 
              January 2005. 

     Author's Addresses 

        Zhi-Wei Yan , Hong-Ke Zhang,Hua-Chun Zhou, Jian-Feng Guan, Si-Dong 
        Zhang  
        NGI Research Center 
        Beijing Jiaotong University of China 
            
        Phone: +861051685677 
        Email:06120232@bjtu.edu.cn 
              hkzhang@bjtu.edu.cn  
              hchzhou@bjtu.edu.cn 
              guanjian8632@163.com 
              sdzhang@center.njtu.edu.cn 
      
