<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>A Verification Proceedure for Configuration Management
                                      within NETCONF</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="A Verification Proceedure for Configuration Management
                                      within NETCONF">
<meta name="keywords" content="configuration management, verification, manets, dtns">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Internet Engineering Task Force</td><td class="header">R. Cole</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">U.S. Army CERDEC</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">D. Romascanu</td></tr>
<tr><td class="header">Expires: January 6, 2011</td><td class="header">Avaya</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">A. Bierman</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">InterWorking Labs</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">July 5, 2010</td></tr>
</table></td></tr></table>
<h1><br />A Verification Proceedure for Configuration Management
                                      within NETCONF<br />draft-cole-netconf-verify-00</h1>

<h3>Abstract</h3>

<p>This document extends the capabilities of the NETCONF configuration
         management protocol in order to standardize mechanisms to
         perform sets of active tests (i.e., verification)
         against servers' running configuration
         over a period of time to afford the client and
         server a more robust and resilient configuration management
         capability.  This is of value to commercial enterprise and public
         networks as well as  wireless emergency and military networks.  We
         propose an initial new NETCONF capability, i.e., verify. The verify
         capability is defined in the context of the verify.yang module listed in
         the appendix of this document.  Associated with the verify operation
         are various test.yang modules to be defined elsewhere.  However, this
         document defines a set of interoperability requirements on the development
         of the test.yang modules in order to be controlled through the verify
         capability.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on January 6, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Benefits of This Work<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Requirements Language<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">1.3.</a>&nbsp;
Outline<br />
<a href="#anchor5">2.</a>&nbsp;
Definitions<br />
<a href="#anchor6">3.</a>&nbsp;
The Verify Capability<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.1.</a>&nbsp;
Verify Capability<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.1.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.1.2.</a>&nbsp;
Dependencies<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.1.3.</a>&nbsp;
Capability Identifier<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.1.4.</a>&nbsp;
New Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">3.1.4.1.</a>&nbsp;
&lt;verify&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.1.4.2.</a>&nbsp;
&lt;cancel-verify&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">3.1.4.3.</a>&nbsp;
&lt;complete-verify&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">3.1.4.4.</a>&nbsp;
&lt;verifyStatus&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">3.1.4.5.</a>&nbsp;
&lt;verifyComplete&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">3.1.5.</a>&nbsp;
Modifications to Existing Operations<br />
<a href="#anchor18">4.</a>&nbsp;
NETCONF Verify Framework<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">4.1.</a>&nbsp;
Test Modules<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">4.2.</a>&nbsp;
Use Cases<br />
<a href="#Acknowledgements">5.</a>&nbsp;
Acknowledgements<br />
<a href="#IANA">6.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">7.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#appendixA">Appendix&nbsp;A.</a>&nbsp;
verify.yang Module<br />
<a href="#appendixB">Appendix&nbsp;B.</a>&nbsp;
Example ping.yang Module<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>This document identifies enhancements to NETCONF
         capabilities to achieve a more robust model of 
         configuration management for future IETF systems.  
         Most network management systems which are required to provide a highly robust
         network service rely upon some form of 
         out-of-band access for configuration management.
         This provides an alternative management entry into devices in the event that
         in-band access is unavailable due to, e.g.,  mis-configuration.
         However, not all network deployments can afford the luxury of alternative networks
         for management access to all networking devices, nor should this be necessary.
         Examples include Mobile Ad-Hoc Wireless Networks (MANETs) and other forms of
         Disruption Tolerant Networks (DTNs).
         All managed networks, as well, would benefit from 
         a more robust and extensive configuration
         management capability from the IETF, e.g., to provide equivalent network 
         reliability at reduced infrastructure costs.  
         To accomplish this, the NETCONF protocol <a class='info' href='#RFC4741'>RFC 4741<span> (</span><span class='info'>Enns, R., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a> [RFC4741]
         requires extension of
         capabilities to define and manage active tests
         and assess success, i.e., Verification, (from both the
         client and the servers)
         involving server-side running configuration.
         This document defines the verify capability within NETCONF.
</p>
<p>As an example, we
         envision a NETCONF client-server interaction model
         shown in the below figure.  Here, the client issues
         a &lt;commit&gt; with the confirming option.
         As part of testing prior to issuing the confirming
         &lt;commit&gt; the client wishes to execute a set
         of verification tests from the server.  It issues
         the new &lt;verify&gt; operation to manage this
         aspect of verification testing.
         The client passes a reference to the server indicating
         instances of specific pre-configured tests that define the
         verification test suite.  The server executes these
         as part of the NETCONF &lt;verify&gt; testing process.  
         Simultaneously,
         the client may also run a set of tests to gain confidence in the
         proposed configuration changes to the server.  Once the server
         completes its test execution, it indicates success through
         notification messages.  Once the client is comfortable
         with its own tests and those of the server, it
         issues the confirming &lt;commit&gt; to the server
         which forces the server to commit to the proposed
         configuration change.
</p><br /><hr class="insert" />
<a name="interaction_model_1"></a>

<p style='text-align: center'>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  +------+                              +------+
  |Client|                              |Server|
  +------+                              +------+

         +------------------------------&gt;
          Sets up &lt;candidate&gt; config

         +------------------------------&gt;
          Sets up test control

---      +------------------------------&gt;
 |        Sends &lt;commit&gt;
(set             - timeout
 timeout)        - confirm option
 |
 |
 |       +------------------------------&gt;
 |        Sends &lt;verify&gt;
 |               - timeout
 |               - test-template:instanceIDs
 |
(running                                  (running
 client-side                               server-side tests)
 tests)                                   +--------+
 |                                                 |
 |                                                 |
 |                                        &lt;--------+
 |                                        (server-side tests
 |                                         complete)
 |        &lt;-----------------------------+
 |                 &lt;verifyComplete = ok&gt; notification
 |
 |
 |        +-----------------------------&gt;
 |         Sends &lt;commit&gt;
 |
 |
---

</pre></div>
<p style='text-align: center'>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>This, and other Use Cases, are discussed further in the
         'Framework' section below.
</p>
<p>NETCONF defines the term 'validation' as the
          set of checks performed on proposed configuration code up to the
          point that the server
          places it into its running-configuration.
</p>
<p>We use the term 'verification' as the act of performing active 
          tests against configuration code in the running-configuration on the
          server.  (Note: strictly, verification probably should
          also cover the act of loading new configuration into the
          &lt;running&gt; configuration as this may fail, e.g.,
          due to undocumented configuration constraints.  However, here we
          focus on aspects of running active tests to measure
          network behavior as a form of verification testing.)  
          Verification tests can be executed from either the NETCONF
          client or the NETCONF server, or from a NETCONF server(a) against
          running configuration code on a NETCONF server(b), or all combinations.
</p>
<p>We define the new :verify capability as a set of stand-alone operations,
         notifications, and requirements on the definition of test modules for the
         purpose of managing verification testing on remote
         servers through standardized mechanisms.  This allows for extensible
         verification testing of configuration across the base of
         IETF compliant devices.  This leads to more resilient configuration
         management for operators manging multi-vendor networks of devices.
         This will promote future integrated network management capabilities
         as opposed to device management capabilities.
</p>
<p>A more detailed presentation of the
         operation of the proposed :verify capability
         is given in the below figure.  
         Here the client issues the
         &lt;verify&gt; operation indicating the timeout
         period, the set of tests which comprise the
         overall verification test suite, and the
         nature of the reporting from the server
         using the associated notification
         messages.  The 'verifyStatus=true' indicates
         that the server should send intermediate
         status reports following completion of
         each test set in the suite.  At the completion
         of the entire verification test suite, the server sends
         the final &lt;verifyComplete&gt; notification
         to the client.
</p>
<p>The &lt;verifyStatus&gt; and &lt;verifyComplete&gt; notifications
         carry indications of test success or failure
         based upon pre-configured thresholds and
         metrics defined within the test module(s)
         resident on the server.  Further, the 
         &lt;verify&gt; operation carries test instance
         identifiers and switches for various types
         of reporting, i.e., summary or extended.
         In total, these place requirements on the
         definition of interoperable test modules
         to be developed in support of the :verify
         capability.  We give an example of a 
         ping.test module in Appendix B.
         Our intent is to define (in other associated documents)
         a set of connectivity, protocol and transaction
         test modules to fill out the utility of this verify
         capability.
</p><br /><hr class="insert" />
<a name="interaction_model_2"></a>

<p style='text-align: center'>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  +------+                              +------+
  |Client|                              |Server|
  +------+                              +------+

         +------------------------------&gt;
          Sends &lt;verify&gt;
                 - timeout
                 - test-template:instanceID=1,
                   test-template:instanceID=263,
                   test-template:instanceID=51
                 - verifyStatus=true
                 - extendedResults=false
---
 |                                        +-------+
 |                                                | tests 1
(set                                              |
 timeout)                                 &lt;-------+
 |        &lt;-----------------------------+
 |                 &lt;verifyStatus = ok&gt; notification
 |
 |                                        +-------+
 |                                                | tests 263
 |                                                |
 |                                        &lt;-------+
 |        &lt;-----------------------------+
 |                 &lt;verifyStatus = ok&gt; notification
 |
 |                                        +-------+
 |                                                | tests 51
 |                                                |
 |                                        &lt;-------+
 |        &lt;-----------------------------+
 |                 &lt;verifyStatus = ok&gt; notification
 |        &lt;-----------------------------+
 |               &lt;verifyComplete = ok&gt; notification
 |
 |
 |
---

</pre></div>
<p style='text-align: center'>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Benefits of This Work</h3>

<p>Our objective is to further develop a robust and resilient network
           configuration capability, building upon the improvements afforded
           by the NETCONF protocol and it's associated modeling language,
           <a class='info' href='#YANG'>YANG<span> (</span><span class='info'>Bjorklund, M., &ldquo;YANG - A data modeling language for NETCONF,&rdquo; June&nbsp;2010.</span><span>)</span></a> [YANG].
</p>
<p>The envisioned benefits of a standardized set of mechanisms and capabilities for
           verification testing include:
</p>
<p></p>
<ul class="text">
<li>Minimize faulty configuration and network disconnects,
</li>
<li>Provide for uniform methods for control, execution and
               reporting of verification testing in multi-vendor networks,
</li>
<li>Improve automation of extensive verification testing,
</li>
<li>Provide opportunity for device modelers to associate/recommend
               tests tied to specific configuration items, and
</li>
<li>Improve efficiency of coordinated network upgrades.
</li>
</ul>

<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in 
        <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Outline</h3>

<p>In the remainder of this document we next give a 
          set of definitions to be adhered
          to for the remainder of this discussion.
          We then provide a new :verify capability which achieves
          initial aspects of the Robust-NETCONF capabilities.
          We then examine in the Framework section the
          relationship of the :verify mechanisms, their
          relationship to test modules and definitions of
          metrics and success criteria.  The 'Framework' section
          also covers use cases of the :verify capability.
          Then 'Acknowledgments' and 'IANA Considerations' are
          presented.  A section on 'Security Considerations' is provided
          concluding the main body of the document.
</p>
<p>Various appendices are provided to compliment the text of the main
         body.  Prominent appendices are 'Appendix A: verify.yang' which
         presents the yang module for the :verify capability and
         'Appendix B: ping.yang' which presents a simple example test module
         which complies with the requirements of the :verify capability.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Definitions</h3>

<p>In this section we provide definitions strictly adhered to throughout
         this document.
</p>
<p>The NETCONF specification maintains the following terms:
</p>
<p></p>
<ul class="text">
<li>NETCONF Client (or client) - this is the management application
            responsible for the configuration management of network devices.
</li>
<li>NETCONF Server (or server) - this is the device being 
            managed in the network.
</li>
</ul>

<p>We maintain the following distinction between 
         Validation checks and Verification tests:
</p>
<p></p>
<ul class="text">
<li>Validation checks - checking non-running
            configuration code against a set of
            rules, constraints or other requirements.  
            This addresses the total set of checks
            performed prior to the Server placing the code into its
            running-configuration.
</li>
<li>Verification tests - measuring behavior of running configuration code
            against a set of expectations or success criteria.  This may be
            performed through active testing or passivie observation
            and comparison of 
            results against expectations.
</li>
<li>Active measurements perform Verification while rule-based
            checks perform Validation.
</li>
</ul>

<p>We maintain the following definitions in the
         descriptions of the :verify capability:
</p>
<p></p>
<ul class="text">
<li>Verification test (or test set) - a set of identical measurements identified
            through a single instance identifier and defined in a test
            module which is pre-configured on the server.
</li>
<li>Verification test suite - the total set of verification tests identified
            by a set of instance identifiers passed to the server as
            parameters in the same &lt;verify&gt; message.
</li>
</ul>

<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
The Verify Capability</h3>

<p>In this section we describe a protocol development which we refer to as the
         :verify capability.
         The Yang module for this procedure, i.e., verify.yang, is
         listed in Appendix A below.
         An example test module, which complies with the requirements for test modules
         as spelled out in this document, is the ping.yang module in Appendix B below.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Verify Capability</h3>

<p>
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.1"></a><h3>3.1.1.&nbsp;
Overview</h3>

<p>The :verify capability provides a set of standard tools allowing the
                 client to direct verifications tests from remote servers and to
                 collect and uniformly interpret verification test reports related to the success or failure
                 of the tests.
</p>
<p>Note: this capability has several prerequisites, including support for
                 &lt;candidate&gt; configuration and notifications.
</p>
<p>Additionally, there will be secondary modules for 
                 definition of specific verification tests.
                 We present our example in terms of a ping.yang module
                 in Appendix B below. Other test modules will be developed in other
                 documents.
</p>
<p>So, a typical client/server interaction
                 would hold:
</p>
<p></p>
<ol class="text">
<li>Client sets up the &lt;candidate&gt; configuration on all relevant agents.
</li>
<li>Client sets up all the relevant test control configuration
                    needed for the verification tests on all relevant agents.
</li>
<li>Client sends &lt;verify&gt; to all agents
                    with parameters (timeout:seconds,
                    test-template:instance-identifier,verifyStatus:true,
                    extendedStatus:false), i.e.,

                    <br /><hr class="insert" />
<a name="example1"></a>

<p style='text-align: center'>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rpc xmlns="netconf-base" message-id="101"&gt;
  &lt;verify xmlns="verify-module"&gt;
     &lt;timeout&gt;3600&lt;/timeout&gt;
     &lt;test-template xmlns:as="ping-module"&gt;
        /at:ping/at:pingEntry[at:pingControlIndex=21]
        /at:ping/at:pingEntry[at:pingControlIndex=42]
        /at:ping/at:pingEntry[at:pingControlIndex=48]
     &lt;/test-template&gt;
     &lt;verifyStatus&gt;true&lt;/verifyStatus&gt;
     &lt;extendedStatus&gt;false&lt;/extendedStatus&gt;
  &lt;/verify&gt;
&lt;/rpc&gt;
</pre></div>
<p style='text-align: center'>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</li>
<li>Server returns &lt;ok/&gt;.
</li>
<li>The Server runs the tests with the
                    specified (e.g., pingControlEntry) configuration subtree.
</li>
<li>For each completed test set, the server sends a report in a
                    &lt;verifyStatus&gt; notification.
</li>
<li>At the completion of the entire verification test suite,
                    the server sends a summary report in a
                    &lt;verifyComplete&gt; notification message.
</li>
</ol>

<p>The client can adjust the nature of the reporting through the
                  'verifyStatus' and the 'extendedResults' parameters of the
                  &ly;verify&gt; operation.  The former determines whether or not
                  &lt;verifyStatus&gt; notifications are sent from the server
                  following the completion of each test set.  The later determines
                  whether or not the &lt;verifyStatus&gt; notifications carry
                  raw test data (as defined within the test modules).
</p>
<p>Further, the client can decide to immediately cancel all
                  ongoing verification testing by issuing the
                  &lt;cancel-verify&gt; operation.  Or the client can decide
                  to cut short the testing by issuing the &lt;complete-verify&gt;
                  operation which instructs the server to complete only the in-progress
                  test set and follow up with &lt;verifyStatus&gt; notification for that
                  completed test set if the client had required this notification message and
                  to wrap up the verification process by sending the
                  &lt;verifyComplete&gt; notification.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.2"></a><h3>3.1.2.&nbsp;
Dependencies</h3>

<p>The :verify capability requires the existence of test modules resident
                 on servers which comply with the following requirements:
</p>
<p></p>
<ul class="text">
<li>Must contain a 'list' keyed by a controlIndex which defines a
                    verification test set.
</li>
<li>The 'list' must define an unequivocal means to determine the
                    Boolean result (success or failure) of the specific verification test set.  This
                    information is passed in the &lt;verifyStatus&gt; notification.
</li>
<li>The 'list' must define a 'leaf-list' of raw results which may be
                    passed to the client through the &lt;verifyStatus&gt;
                    notification.
</li>
</ul>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.3"></a><h3>3.1.3.&nbsp;
Capability Identifier</h3>

<p>The :verify capability is identified by the following capability
                 string:
</p>
<p>urn:ietf:params:netconf:capability:verify:1.0
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.4"></a><h3>3.1.4.&nbsp;
New Operations</h3>

<p>
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.4.1"></a><h3>3.1.4.1.&nbsp;
&lt;verify&gt;</h3>

<p>The &lt;verify&gt; operation starts the verification tests on the server.
                    The &lt;verify&gt; operation has four parameters:
</p>
<p></p>
<ul class="text">
<li>timeout - the timeout period associated with the verification
                          test suite.  If the timeout expires, the server should
                          complete the in-progress test, send the &lt;verifyStatus&gt;
                          notification for the test if the 'verifyStatus' parameter is
                          set to 'true' and send the &lt;verifyComplete&gt;
                          notification.
</li>
<li>test-template - this 'leaf-list' parameter uniquely identifies
                          the verification test set to be performed by the server.
                          Each verification test is identified by an 'instance-identifier'
                          indexing a test definition on a test module resident on the
                          server.  Multiple test sets comprise a test suite.
</li>
<li>verifyStatus - this parameter is a switch which defaults
                          to 'false' indicating no &lt;verifyStatus&gt; notifications
                          are to be sent from the server to the client.  When set
                          to 'true' the server should send a &lt;verifyStatus&gt;
                          notification following the completion of each verification
                          test.
</li>
<li>extendedResults - this parameter is a switch which
                          defaults to 'false' indicating no 'anyxml extendedResults'
                          are to be sent in the &lt;verifyStatus&gt; notification.
                          This parameter can only be set to 'true' if the 'verifyStatus'
                          parameter is also set to 'true'.  This indicates that the
                          &lt;verifyStatus&gt; notifications should include the
                          raw measurement results carried in the 'anyxml extendResults'.
</li>
</ul>

<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.4.2"></a><h3>3.1.4.2.&nbsp;
&lt;cancel-verify&gt;</h3>

<p>The &lt;cancel-verify&gt; operation immediately cancels a verify
                    test suite in progress on the server.  The server terminates
                    in-progress tests immediately and is not required to send any
                    followup notification messages carrying test results.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.4.3"></a><h3>3.1.4.3.&nbsp;
&lt;complete-verify&gt;</h3>

<p>The &lt;complete-verify&gt; operation tells the server to complete
                    the in-progress verification test and to send any required followup
                    notifications carrying test results for the current test set and for the test suite.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.4.4"></a><h3>3.1.4.4.&nbsp;
&lt;verifyStatus&gt;</h3>

<p>The &lt;verifyStatus&gt; notification carries the results
                    for each verification test set comprising the entire verification test suite.
                    This notification may also carry raw extended results.  This
                    notification is optional and is requested explicitly by the
                    client sending the 'verifyStatus=true' parameter in the
                    &lt;verify&gt; operation.
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.4.5"></a><h3>3.1.4.5.&nbsp;
&lt;verifyComplete&gt;</h3>

<p>The &lt;verifyComplete&gt; notification is mandatory (unless canceled
                    by the &lt;cancel-verify&gt; operation) and carries a summary
                    result covering the entire verification test suite.
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.5"></a><h3>3.1.5.&nbsp;
Modifications to Existing Operations</h3>

<p>None.
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
NETCONF Verify Framework</h3>

<p>Note: should rewrite this section to discuss the relationship between
          :verify capability and supporting test.yang modules.
          Also discuss the way metrics and thresholds are defined in order
          to assess test 'pass/failure' decisions.  This section should also contain
          a presentation of the use cases for the :verify capability.
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Test Modules</h3>

<p>NOTE: Need to include a discussion of the test modules,
             their necessary requirements
             for interoperability and thoughts on the 
             definition of metrics and thresholds.
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Use Cases</h3>

<p>NOTE: Need to include a discussion of the use cases for the &lt;verify&gt;
             operation.
</p>
<p>These include:
</p>
<p></p>
<ul class="text">
<li>Used within a &lt;commit&gt; operation with the 'confirmed'
                parameter.
</li>
<li>Used to verify the configuration of server(a) following the re-configuration
                of server(b).
</li>
<li>Used to verify the &lt;running&gt; configuration prior to copying it
                into the &lt;startup&gt; configuration.
</li>
</ul>

<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Acknowledgements</h3>

<p>The authors wish to thank the many useful suggestions by and discussions with Martin
         Bjorklund on this capability proposal.
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>This memo includes no request to IANA.
</p>
<p>All drafts are required to have an IANA considerations section (see
      <a class='info' href='#I-D.narten-iana-considerations-rfc2434bis'>the update of
      RFC 2434<span> (</span><span class='info'>Narten, T. and H. Alvestrand, &ldquo;Guidelines for Writing an IANA Considerations Section in RFCs,&rdquo; March&nbsp;2008.</span><span>)</span></a> [I&#8209;D.narten&#8209;iana&#8209;considerations&#8209;rfc2434bis] for a guide). If the draft does not require IANA to do
      anything, the section contains an explicit statement that this is the
      case (as above). If there are no requirements for IANA, the section will
      be removed during conversion into an RFC by the RFC Editor.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>This section presents the required security considerations for all
         IETF protocols and capabilities.
         This section was developed following guidelines within
         <a class='info' href='#RFC3552'>RFC 3552<span> (</span><span class='info'>Rescorla, E. and B. Korver, &ldquo;Guidelines for Writing RFC Text on Security Considerations,&rdquo; July&nbsp;2003.</span><span>)</span></a> [RFC3552].
</p>
<p>This section addresses the security concerns and objectives for the
         :verify capability within NETCONF.
         (NOTE: This section is currently TBD.)
</p>
<p>Security issues related to the :verify capability should
         address issues specific to the proposed NETCONF operations.
         They should also address security issues associated with the development
         of associated test modules for the purpose of running
         verification tests.
         Here is an initial list of potential considerations:
</p>
<p></p>
<ul class="text">
<li>Verification requires server-side tests that
             require that packets to be injected
             into the network for the purpose of measuring some performance
             characteristics.  As such, associated test modules will contain sensitive
             network and application data; e.g., user IDs and passwords.  
             Further, if security is compromised, this capability could provide a source
             for denial-of-service, and potential other, attacks.
</li>
<li>The configuration of verification tests may require passing
             sensitive network information.  For this reason, this
             configuration information should be encrypted prior to
             transport over the network.
</li>
<li>Some test attributes configure username and password information for some
             application-level protocols as indicated above.  Access to these
             attributes may provide unauthorized use of resources.
</li>
<li>Some test attributes configure the size and rate of traffic flows for the
             purpose of performance measurements.  Access to these attributes may
             exacerbate the use of this capability in denial-of-service attacks.
             It is recommended that test modules define a maximum packet rate on the 
             device and to indicate this rate. Other objects that control
             aspects of the test packets related to packet size and rate are
             will exist in test modules and bounds on these should be set.
</li>
<li>Test module objects will exist which set
             the source and destination addresses on the
             packet headers.  The server should not
             allow the setting of source addresses on the test packets other than
             those that are administratively configured onto the server.
</li>
</ul>

<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4741">[RFC4741]</a></td>
<td class="author-text">Enns, R., &ldquo;<a href="http://tools.ietf.org/html/rfc4741">NETCONF Configuration Protocol</a>,&rdquo; RFC&nbsp;4741, December&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4741.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.narten-iana-considerations-rfc2434bis">[I-D.narten-iana-considerations-rfc2434bis]</a></td>
<td class="author-text">Narten, T. and H. Alvestrand, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-narten-iana-considerations-rfc2434bis-09.txt">Guidelines for Writing an IANA Considerations Section in RFCs</a>,&rdquo; draft-narten-iana-considerations-rfc2434bis-09 (work in progress), March&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-narten-iana-considerations-rfc2434bis-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3552">[RFC3552]</a></td>
<td class="author-text">Rescorla, E. and B. Korver, &ldquo;<a href="http://tools.ietf.org/html/rfc3552">Guidelines for Writing RFC Text on Security Considerations</a>,&rdquo; BCP&nbsp;72, RFC&nbsp;3552, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3552.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="YANG">[YANG]</a></td>
<td class="author-text">Bjorklund, M., &ldquo;YANG - A data modeling language for NETCONF,&rdquo; June&nbsp;2010.</td></tr>
</table>

<a name="appendixA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
verify.yang Module</h3>

<p>In this appendix we list the verify.yang model for use in conjunction
         with the robust-netconf capabilities.
</p>
<p>Note: this capability has several prerequisites, including support for
         notifications and recommended support for the confirmed-commit:
         capability.
</p><br /><hr class="insert" />
<a name="verify"></a>

<p style='text-align: center'>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
=========Contents of "verify.yang"==================

module verify {

      namespace
        "file:///draft-cole-netconf-verify-00.txt";

      prefix "ver";

      organization  "IETF";

      contact "[add contact info here].";

      description
        "NETCONF verify procedure.";

      revision 2010-01-21 {
          description  "Initial version.";
      }

      rpc verify {
          description
            "The verify procedure is started by
             invoking this operation.

               * A verify proceedure is comprised of
                 multiple verification test sets, each
                 indicated by an instance-identifier
                 within the 'test-template leaf-list'
                 of the &lt;verify&gt; operation.  Multiple
                 test sets comprise a test suite.

               * the agent will cancel the verify
                 procedure if the &lt;cancel-verify&gt;
                 operation is invoked.

               * the agent will complete the current
                 verification test set and generate the
                 &lt;verifyStatus&gt; and &lt;verifyComplete&gt;
                 notifications if the &lt;cancel-verify&gt;
                 operation is invoked.

               * the agent will start, monitor, and report
                 the verification test(s) during the time
                 interval after this operation, and before
                 the 'timeout' interval has expired.

               * the agent will generate the &lt;verifyStatus&gt;
                 notification for each verification test set specified
                 in the 'test-template leaf-list', indicating the
                 result of each verification test set.

               * the agent will generate the &lt;verifyComplete&gt;
                 notification at the completion of the entire
                 test suite, indicating the
                 final verify procedure status.

               * the definition of this capability places requirements
                 on the development of test.yang modules to provide
                 the following set of features:
                     - test sets identified by 'instanceId's,
                     - test suites identified by the collection of
                       instanceIds,
                     - test suites unambiguously identify:
                       metric and target, Boolean
                       (pass/fail) threshold, (optional) raw data
                       capability.
                 These requirements are defined in section 3.1.2.

               * &lt;verifyStatus&gt; is sent follow each verification test
                 and indicates pass/fail status of test based upon
                 (metric, target, threshold) triplet.  It may also
                 carry raw data values from the 'rawResults' node
                 carried within the &lt;verifyStatus&gt;'s
                 'anyxml extendedStatus'.
            ";

          input {
              leaf timeout {
                  description
                    "The time interval the agent has to perform
                     the verify operation.  If not complete at
                     timeout, then server must issue &lt;verifyStatus&gt;
                     indicating partial test results and that
                     verification tests are being terminated.";
                  type uint32;
                  units seconds;
                  default 600;
              }

              leaf-list test-template {
                  description
                    "Identifies a verification test control entry
                     or entries for the agent to use for the
                     verification procedure.

                     The verification test control entry must conform
                     to the requirements specified in section 3.1.2,
                     and the agent must be capable of starting,
                     monitoring, and reporting the results of
                     the verification test, as required.

                     The agent will also generate the
                     &lt;verifyStatus&gt; notification,
                     as specified for each verification test st
                     control entry indicated by this parameter.";
                  ordered-by user;
                  type instance-identifier;
                  min-elements 1;
              }

              leaf verifyStatus {
                  description
                    "A switch indicating the use of the
                     &lt;verifyStatus notification.  If 'false'
                     the client does not want to receive
                     the &lt;verifyStatus&gt; notification
                     associated with each verification test set
                     in the verification test suite.  Instead,
                     it only wants to receive the final
                     &lt;verifyComplete&gt; notification which
                     contains a summarized pass/fail result
                     for the verification test suite.

                     If 'true', then the client is requesting
                     that the server generates &lt;verifyStatus&gt;
                     notifications for each verification test set
                     in the verification test suite.";
                  type boolean;
                  default false;
              }

              leaf extendedResults {
                  description
                    "A switch indicating that the client is
                     requesting raw test results through
                     the 'anyxml extendedResults'.  This
                     defaults to 'false'.

                     This can only be set to 'true' if the
                     proceeding 'verifyStatus' leaf is set
                     to 'true'.  Else, the server should
                     generate an error response to this
                     request.";
                  type boolean;
                  default false;
              }

          }
      }



      rpc cancel-verify {
          description
            "Cancel a verify procedure already in progress.

             If no verify procedure is currently in
             progress, then an 'operation-failed' error is
             generated, and the value 'no-verify'
             is used for the error-app-tag field.

             If the verify procedure in progress
             cannot be canceled for any reason, then an
             'operation-failed' error is returned, and
             the value 'cancel-failed' is used in the
             error-app-tag field.

             If any verification test sets associated with this
             verify procedure are still in progress,
             they will be canceled by this operation.

             If the verify procedure in progress
             is canceled, then the agent will return &lt;ok/&gt;.
            ";
      }

      rpc complete-verify {
          description
            "Complete a verify procedure already in progress.

             If no verify procedure is currently in
             progress, then an 'operation-failed' error is
             generated, and the value 'no-verify'
             is used for the error-app-tag field.

             If the verify procedure in progress
             cannot be completed for any reason, then an
             'operation-failed' error is returned, and
             the value 'complete-failed' is used in the
             error-app-tag field.

             If any verification test sets associated with
             this verify test suite are still in progress,
             they will be canceled by this operation
             following the completion of the current
             test set.

             If the verify procedure in progress
             is completed, then the agent will return &lt;ok/&gt;.
            ";
      }

      notification verifyStatus {
          description
            "Contains the current or final status of
             a verification test being invoked on behalf
             of the current verify procedure.";

          list eachTest {
              key "testIdentifier";

              leaf testIdentifier {
                  description
                    "Indicates which verification test this
                     status report is associated with.
                     This value will identify the same node
                     as specified in a 'test-template'
                     parameter instance provided in the
                     &lt;verify&gt; operation.";
                  type instance-identifier;
                  mandatory true;
              }

              leaf statusType {
                  description
                    "Indicates the type of status report that
                     this notification contains.";
                  type enumeration {
                      enum partial {
                          description
                            "Indicates this is a partial status result
                             for this verification test
                             which is still in progress.";
                      }
                      enum final {
                          description
                            "Indicates this is the final status result
                             and this verification test which completed
                             or canceled.";
                      }
                  }
                  mandatory true;
              }

              leaf status {
                  description
                    "Indicates the NETCONF error-tag value most
                     closely associated with the test status.
                     The string 'ok' is used to indicate that
                     the pass threshold for the test has been
                     exceeded.";
                  type string;
                  reference "RFC 4741bis, Appendix A";
                  mandatory true;
              }

              anyxml extendedStatus {
                  description
                    "Indicates verification test-specific status data.
                     The requirements for verification tests
                     (section 3.1.2) describes how the semantics
                     of this structure are determined.";
              }
          }
      }

      notification verifyComplete {
          description
            "Contains the final status of the
             current verify test suite.";

          leaf status {
              description
                "Indicates the NETCONF error-tag value most
                 closely associated with the test status.
                 The string 'ok' is used to indicate that
                 the pass thresholds were exceeded for
                 all tests in the verification test suite.";
              type string;
              reference "RFC 4741bis, Appendix A";
              mandatory true;
          }
      }

  }

</pre></div>
<p style='text-align: center'>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="appendixB"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Example ping.yang Module</h3>

<p>In this appendix we list an example ping.yang model for use in conjunction
         with the :verify capability.
</p>
<p>Specifically, the &lt;verify&gt; operation passes the instance-identifiers
         in the 'test-template' parameter.  Each instance-identifier
         identifies a specific ping test.  The &lt;verify&gt; operation manages
         the identification, execution and reporting of multiple tests within
         a single verification test procedure.
</p><br /><hr class="insert" />
<a name="verify_operation"></a>

<p style='text-align: center'>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;rpc xmlns="netconf-base" message-id="101"&gt;
  &lt;verify xmlns="verify-module"&gt;
     &lt;timeout&gt;3600&lt;/timeout&gt;
     &lt;test-template xmlns:as="ping-module"&gt;
        /at:ping/at:pingEntry[at:pingControlIndex=21]
        /at:ping/at:pingEntry[at:pingControlIndex=42]
        /at:ping/at:pingEntry[at:pingControlIndex=48]
     &lt;/test-template&gt;
     &lt;verifyStatus&gt;true&lt;/verifyStatus&gt;
     &lt;extendedStatus&gt;false&lt;/extendedStatus&gt;
  &lt;/verify&gt;
&lt;/rpc&gt;

</pre></div>
<p style='text-align: center'>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="ping_model"></a>

<p style='text-align: center'>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
=========Contents of "ping.yang"==================

module ping {

       namespace "unassigned";
       prefix "at";

       import ietf-yang-types { prefix yang; }
       import ietf-inet-types { prefix inet; }


       organization "IETF";

       contact
           "Andy Bierman
            InterWorking Labs
            EMail: andyb@iwl.com

            Robert G. Cole
            US Army CERDEC
            Email: robert.g.cole@us.army.mil

            Dan Romascanu
            Avaya
            Email:dromasca@avaya.com";

            description
                "The module for entities implementing
                 the ping test.";

            revision 2010-01-27 {
                description "Second revision:
                    Added 'pingEntry' list to hold multiple
                    pre-defined test specifications.  Added
                    (metric, target, threshold) triplet
                    for pass/fail determination.  Added
                    raw data collection and reporting
                    (optional).";
            }


            leaf test-reference {
                type string;
                config false;
                description "URL for the definition of this
                             test";
            }

            list pingEntry {
                key "pingControlIndex";
                config true;

                leaf pingControlIndex {
                    type uint32;
                    description
                        "Identifies the specific control table
                         row of the ping test template to be
                         executed, which represents the
                         verification tests to be performed
                         on the device as part of the verified
                         commit operation.";

                }

                leaf dstAddr {
                    type inet:ip-address;
                    description
                        "Identifies the destination address in
                         the packet header of the ping message.";
                }

                leaf srcAddr {
                    type inet:ip-address;
                    description
                        "Identifies the source address in the
                         packet header of the ping message.";
                }

                leaf spacing {
                    type uint32;
                    description
                        "The number of seconds between sending
                         subsequent ping packets.";
                }

                leaf startTime {
                    type yang:date-and-time;
                    config false;
                    description
                        "The time the first ping packet
                         was sent for the previous test.
                         This is set each time the test
                         is initiated from a client.  When this
                         value is reset, the value of the
                         'result' node is set to
                         'indeterminant' and the value of the
                         'received' node is set to zero.";

                }

                leaf number {
                    type uint32;
                    description
                        "The number of ping packets to be sent.";
                }

                leaf metric {
                    type enumeration;
                        enum loss {
                            description
                               "Holds the indication of whether
                                the transaction was successful (1)
                                or failed (0).";
                        }
                        enum delay {
                            description
                               "Holds the number of milliseconds
                                for the successful transaction
                                or '0' if the transaction failed.";
                        }
                        enum throughput {
                            description
                               "Holds the measured throughput
                                in units of bytes/millisecond for
                                the transaction if successful
                                or '0' if failed.";
                        }
                    default "loss";
                    description
                        "The metric tracked by this specific test.
                         These values are held on the rawResults
                         if the specific test indicates storage
                         of raw data values.";
                }

                leaf target {
                    type uint32;
                    description
                        "The preformance target for each transaction
                         measurement.  A measured transaction is deemed
                         successful if its measured 'metric' value
                         falls within the limits defined by this
                         'target'.  E.g.,
                             if 'metric = loss', then 'target' must
                                equal '1' indicating success if repsonse
                                recieved.
                             if 'metric = delay', then responses
                                received within 'target' milliseconds
                                are counted as successful.
                             if 'metric = throughput', then responses
                                recieved with throughputs greater than
                                'target' are counted as successful.

                         The target value carries the
                         units defined by the 'metric', i.e.,
                             unitless if 'metric = loss',
                             milliseconds if 'metric = delay',
                             bytes/milliseconds if
                             'metric = throughput'.

                         The server counts the number of transaction
                         measurements that are deemed successful.  This
                         count is compared against 'threshold' to
                         determine overall success or failure of the
                         test.";
                    default "1";
                }

                leaf threshold {
                    type uint32;
                    description
                        "The threshold value that determines the
                         pass/fail status reported to the client
                         by this server in the 'verifyStatus'
                         notification.";
                }

                leaf received {
                    type uint32;
                    config false;
                    description
                        "The number of successful
                         ping transactions received during
                         the previous test.  This value
                         is initialized to zero prior to
                         the instantiation of the test
                         and is incremented by one for
                         each received ping packet.  This
                         is set each time the test is
                         initiated from a client.";
                }

                leaf result {
                    type enumeration {
                        enum indeterminant{
                            description
                               "Set to 'indeterminant' upon
                                the initiation of a test.";
                        }
                        enum success{
                            description
                               "Set to 'success' if the
                                number of successful pings
                                exceeded the 'threshold'.";
                        }
                        enum failure{
                            description
                               "Set to 'failure' if the
                                number of successful pings is less
                                than or equal to the 'threshold'.";
                        }
                    config false;
                    description
                        "The result of the previous test.";
                }

                leaf rawResultCollection {
                    type enumeration;
                        enum off {
                            description
                               "Indicates that the server will
                                not store the raw transaction
                                measurement values of type indicated
                                by metric.";
                        }
                        enum on {
                            description
                               "Indicates that the server will
                                store the raw transaction
                                measurement values of type indicated
                                by metric.  Further, these raw
                                measurement values will be passed
                                to the client throught 'verifyStatus'
                                notification's 'extendedStatus'
                                node.";
                        }
                    config true;
                    default "off";
                    description
                        "A switch to turn ON or OFF the raw
                         data collection and notification.";
                }

                leaf-list rawResults {
                    description
                      "Holds the raw metric value for each transaction
                       successfully recorded as part of the specific
                       test.  The units used for these values conform
                       to the units defined with the 'metric' measured.

                       Upon completion of this specific test, the server
                       passes this measurement data to the requesting
                       client through the 'verifyStatus' notification's
                       'anyxml extendedStatus'.";
                    ordered-by system;
                    type uint32;
                    config false;
                    min-elements 1;
                }


            }

   }

</pre></div>
<p style='text-align: center'>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Robert G. Cole</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">U.S. Army CERDEC</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">328 Hopkins Road</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Aberdeen Proving Ground, MD  21005</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1.410.278.6779</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:robert.g.cole@us.army.mil">robert.g.cole@us.army.mil</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.cs.jhu/~rgcole/">http://www.cs.jhu/~rgcole/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dan Romascanu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Avaya</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Atidim Technology Park, Bldg. #3</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tel Aviv  61131</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Israel</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:dromasca@avaya.com">dromasca@avaya.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andy Bierman</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">InterWorking Labs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">303 Potrero Street, Suite 52</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Santa Cruz, CA  95060-2760</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:andyb@iwl.com">andyb@iwl.com</a></td></tr>
</table>
</body></html>
