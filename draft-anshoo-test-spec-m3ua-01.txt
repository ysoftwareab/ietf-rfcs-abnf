

       INTERNET-DRAFT                                  Anshoo Sharma[EDITOR]
                                                     Hughes Software Systems






       Issued:  May 2003
       Expires: Nov 2003



                     Test Specification for MTP3 User Adaptation
                        <draft-anshoo-test-spec-m3ua-01.txt>




       Status of This Memo

       This document is an Internet-Draft and is in full conformance with all
       provisions of Section 10 of RFC 2026. Internet-Drafts are working
       documents of the Internet Engineering Task Force (IETF), its areas,
       and its working groups. Note that other groups may also distribute
       working documents as Internet-Drafts.

       The list of current Internet-Drafts can be accessed at
       http://www.ietf.org/ietf/1id-abstracts.txt

       The list of Internet-Draft Shadow Directories can be accessed at
       http://www.ietf.org/shadow.html.















    Anshoo Sharma, HSS                                              [Page 1]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       Abstract

       This document presents the test specification for M3UA (MTP3 User
       Adaptation) protocol (RFC 3332), which can be used to test M3UA
       implementations for conformance to the protocol definition. The list
       of test is exhaustive and covers almost all the categories of test.
       This draft can also be used in conjunction with M3UA specification by
       implementers of protocol as implementers guide, as the pictorial
       representation of various scenarios help easy understanding of the
       protocol.
       Next revision of the draft will cover the additions done to the
       protocol revision and any subsequent RFC published by IETF.

       Table of Contents

       1. Introduction.......................................................3
           1.1 Terms Used....................................................3
           1.2 Change History................................................6
       2. General Principles of M3UA Tests...................................6
           2.1 Presentation of test descriptions.............................6
       3. Test Configurations................................................7
           3.1 Presentation of test Configurations...........................7
           3.2 Configuration for testing the M3UA at SGP.....................8
           3.3 Configuration for testing the M3UA at ASP....................12
       4.  Test Cases for Testing M3UA at SGP...............................16
           4.1 Management...................................................16
           4.2 Transfer.....................................................35
           4.3 SSNM.........................................................47
           4.4 ASPSM........................................................56
           4.5 ASPTM........................................................64
           4.6 SCTP Connection Management..................................101
           4.7 Dynamic Routing Key Management..............................106
       5.  Test Cases for Testing M3UA at ASP..............................116
           5.1 Management..................................................116
           5.2 Transfer....................................................125
           5.3 SSNM........................................................139
           5.4 ASPSM.......................................................149
           5.5 ASPTM.......................................................154
           5.6 SCTP Connection Management..................................163
           5.7 Dynamic Routing Key Management..............................167
       6. Acknowledgements.................................................169
       7. Authors' Addresses...............................................169
       8. References.......................................................169
          Copyright Statement..............................................170

    Anshoo Sharma, HSS                                              [Page 2]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       1 Introduction
       The M3UA is a protocol for the transport of any SS7 MTP3-User signaling
       (e.g. ISUP and SCCP messages) over IP using the Stream Control
       Transport Protocol (SCTP) or any other suitable transport protocol.
       This protocol would be used between a Signaling Gateway (SG) and an
       Application Service Provider (ASP) (e.g. Media Gateway Controller -
       MGC) or IP-resident Database.


       1.1 Terms Used

       Application Server (AS) - A logical entity serving a specific Routing
       Key.  An example of an Application Server is a virtual switch element
       handling all call processing for a unique range of PSTN trunks,
       identified by an SS7 SIO/DPC/OPC/CIC_range.  Another example is a
       virtual database element, handling all HLR transactions for a
       particular SS7 DPC/OPC/SCCP_SSN combination.  The AS contains a set of
       one or more unique Application Server Processes, of which one or more
       is normally actively processing traffic.  Note that there is a 1:1
       relationship between an AS and a Routing Key.

       Application Server Process (ASP) - A process instance of an Application
       Server. An Application Server Process serves as an active or backup
       process of an Application Server (e.g., part of a distributed virtual
       switch or database).  Examples of ASPs are processes (or process
       instances) of MGCs, IP SCPs or IP HLRs.  An ASP contains an SCTP
       endpoint and may be configured to process signalling traffic within
       more than one Application Server.

       Association - An association refers to an SCTP association.  The
       association provides the transport for the delivery of MTP3-User
       protocol data units and M3UA adaptation layer peer messages.

       IP Server Process (IPSP) - A process instance of an IP-based
       application.  An IPSP is essentially the same as an ASP, except that it
       uses M3UA in a point-to-point fashion.  Conceptually, an IPSP does not
       use the services of a Signalling Gateway node.

       Failover - The capability to reroute signalling traffic as required to
       an alternate Application Server Process, or group of ASPs, within an
       Application Server in the event of failure or unavailability of a
       currently used Application Server Process.  Failover also applies upon
       the return to service of a previously unavailable Application Server
       Process.

    Anshoo Sharma, HSS                                              [Page 3]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       Host - The computing platform that the process (SGP, ASP or IPSP) is
       running on.

       Layer Management - Layer Management is a nodal function that handles
       the inputs and outputs between the M3UA layer and a local management
       entity.

       Linkset - A number of signalling links that directly interconnect two
       signalling points, which are used as a module.

       MTP - The Message Transfer Part of the SS7 protocol.

       MTP3 - MTP Level 3, the signalling network layer of SS7

       MTP3-User - Any protocol normally using the services of the SS7 MTP3
       (e.g., ISUP, SCCP, TUP, etc.).

       Network Appearance - The Network Appearance is a M3UA local reference
       shared by SG and AS (typically an integer) that together with an
       Signaling Point Code uniquely identifies an SS7 node by indicating the
       specific SS7 network it belongs to. It can be used to distinguish
       between signalling traffic associated with different networks being
       sent between the SG and the ASP over a common SCTP association. An
       example scenario is where an SG appears as an element in multiple
       separate national SS7 networks and the same Signaling Point Code value
       may be reused in different networks.

       Network Byte Order: Most significant byte first, a.k.a Big Endian.

       Routing Key: A Routing Key describes a set of SS7 parameters and
       parameter values that uniquely define the range of signalling traffic
       to be handled by a particular Application Server. Parameters within the
       Routing Key cannot extend across more than a single Signalling Point
       Management Cluster.

       Routing Context - A value that uniquely identifies a Routing Key.
       Routing Context values are either configured using a configuration
       management interface, or by using the routing key management procedures
       defined in this document.

       Signalling Gateway Process (SGP) - A process instance of a Signalling
       Gateway.  It serves as an active, backup, load-sharing or broadcast
       process of a Signalling Gateway.


    Anshoo Sharma, HSS                                              [Page 4]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       Signalling Gateway - An SG is a signaling agent that receives/sends SCN
       native signaling at the edge of the IP network [11].  An SG appears to
       the SS7 network as an SS7 Signalling Point.  An SG contains a set of
       one or more unique Signalling Gateway Processes, of which one or more
       is normally actively processing traffic.  Where an SG contains more
       than one SGP, the SG is a logical entity and the contained SGPs are
       assumed to be coordinated into a single management view to the SS7
       network and to the supported Application Servers.

       Signalling Process - A process instance that uses M3UA to Communicate
       with other signalling processes.  An ASP, an SGP and an IPSP are all
       signalling processes.

       Signalling Point Management Cluster (SPMC) - The complete set of
       Application Servers represented to the SS7 network under a single MTP
       entity (Signalling Point) in one specific Network Appearance. SPMCs are
       used to aggregate the availability, congestion, and user part status of
       an MTP entity (Signalling Point) that is distributed in the IP domain,
       for the purpose of supporting MTP3 management procedures towards the
       SS7 network.  In some cases, the SG itself may also be a member of the
       SPMC.  In this case, the SG availability /congestion /User_Part status
       should also be taken into account when considering any supporting MTP3
       management actions.

       Stream - A stream refers to an SCTP stream; a unidirectional logical
       channel established from one SCTP endpoint to another associated SCTP
       endpoint, within which all user messages are delivered in-sequence
       except for those submitted to the unordered delivery service.

       ASPSM, ASPTM, SSNM - ASP State Maintenance Messages, ASP Traffic
       Maintenance Messages, Signalling System Network Management Messages.
















    Anshoo Sharma, HSS                                              [Page 5]

    Internet Draft         M3UA Conformance Test Plan               May 2003



       1.2 Change History

       1.2.1 Changes from draft-anshoo-test-spec-m3ua-00.txt
        1. Test Case for Missing Mandatory Parameter.
             Test Case Number (SGP Side) : 1.15
             Test Case Number (ASP Side) : 1.9

        2. Test Case for Unsupported Dynamic Registration
             Test Case Number (SGP Side) : 1.16

        3. Test Case for sending ASP Failure Notification from SGP.
             Test Case Number (SGP Side) : 1.17

        4. Test Case for sending DATA from ASP only in Active State of AS.
             Test Case Number (ASP Side) : 2.7


       2 General Principles of M3UA Tests
       These tests aim to verify a given implementation of a protocol in
       accordance with the relevant draft. The specification is independent of
       a given implementation and does not generally imply any modification of
       the endpoint under test. However, it is recognized that certain tests
       require capabilities of the system that are not explicitly defined in
       the draft, and these capabilities may not be present in all
       implementations. As a consequence, certain tests may not be possible in
       all implementations.


       2.1 Presentation of test descriptions
       Each test description includes the environment in which the point under
       test must be inserted in order to pass the test. Nine test
       configurations are defined (named A, B, C, D, E, F, G, H, I and J);
       they are presented in clause 3.
       Each test is precisely described. Nevertheless, some events not
       directly concerning the point under test, or without direct link with
       the test nature, are not explicitly described. In order to preserve the
       test description implementation independence, certain flexibility has
       been left in the test descriptions. This is particularly the case when
       it is necessary to terminate the SCTP association (where it is only
       mentioned "Terminate" with no more precision). The operator will choose
       according to the implementation particularities and the events expected
       in the test description, the appropriate Termination means (MML- Man
       machine Language, provoked failure, etc.).

    Anshoo Sharma, HSS                                              [Page 6]

    Internet Draft         M3UA Conformance Test Plan               May 2003



       2.1.1 Pre Test Condition
       Before starting the test we need to get the setup into a condition from
       where test can be started. These conditions are specified in Pre-Test
       condition in each test.

       Note: Where NIF has been written, it means that NIF+SM. In some
       implementation these may be two entities and in some, they may be
       implemented in single entity.


       3 Test Configurations:
       The set of tests described in this Recommendation assumes that the
       point under test is inserted in a test environment called "test
       configuration".

       3.1 Presentation of test configurations:
       There are different configurations for testing the M3UA protocol. These
       configurations and hence test cases have been divided on the basis of
       M3UA at SG and M3UA at AS.




























    Anshoo Sharma, HSS                                              [Page 7]

    Internet Draft         M3UA Conformance Test Plan               May 2003



       3.2 Configuration for testing the M3UA at SGP:

       3.2.1 Configuration A:
       This simple configuration is used for all the procedures of tests
       concerning only one AS. Configuration A is shown in figure 1. AS is
       handling the traffic for routing context P and N/w Appearance A. AS is
       having only one ASP ASP1. SG routes Data to SS7 for PC Z. SGP serves
       SG.
       Routing Context P may be based on the following information:
       1.  DPC
       2.  DPC+CIC+SIO
       3.  DPC+SIO
       4.  DPC+SSN

          SG
        +-------------+                               +--------------+
        | SGP/IPSP    |                               | AS  DPC = X  |
        | under Test  |                               |  -------     |
        | DPC = Z     |-------------------------------|--| ASP1 |    |
        |             |                               |  -------     |
        +-------------+                               +--------------+
                             Fig 1: Configuration A




       3.2.2 Configuration B:
       This configuration is used for all the procedures of tests concerning
       one ASP in two AS which is handling traffic for both AS. Configuration
       B is shown in figure 2. AS1 is handling the traffic for routing context
       P and N/w Appearance A. AS2 is handling the traffic for routing context
       Q and N/w Appearance A. ASP1 is in both AS. Point Code of SG/IPSP is Z
       and SGP serves SG.
       Routing Context P and Q may be based on the following information:
       1.  DPC
       2.  DPC+CIC+SIO
       3.  DPC+SIO
       4.  DPC+SSN







    Anshoo Sharma, HSS                                              [Page 8]

    Internet Draft         M3UA Conformance Test Plan               May 2003



                                                      +--------------+
          SG                                          | AS1 DPC  X   |
        +-------------+                               |  -------     |
        |             |-------------------------------| | ASP1  |    |
        | SGP/IPSP    |                               |  -------     |
        | Under Test  |                               +--------------+
        | DPC Z       |                               +--------------+
        |             |-------------------------------| AS2 DPC Y    |
        +-------------+                               |   -------    |
                                                      |  | ASP1  |   |
                                                      |   -------    |
                                                      +--------------+

                            Fig 2: Configuration B



       3.2.3 Configuration C:
       This configuration is used for all the procedures of tests concerning
       two or more ASP in one AS. Configuration C is shown in figure 3. AS is
       handling the traffic for routing context P and N/w Appearance A. ASP1
       and ASP2 can be in FAIL-OVER mode, LOADSHARE or BROADCAST mode of
       traffic handling. Point Code of SG/IPSP is Z and SGP serves SG.
       Routing Context P may be based on the following information:
       1.  DPC
       2.  DPC+CIC+SIO
       3.  DPC+SIO
       4.  DPC+SSN

                                                      +--------------+
          SG                                          | AS  DPC  X   |
        +-------------+                               |  -------     |
        |             |-------------------------------|-| ASP1  |    |
        | SGP/IPSP    |                               |  -------     |
        | Under Test  |                               |  -------     |
        | DPC Z       |                               | | ASP2  |    |
        |             |-------------------------------|- -------     |
        +-------------+                               +--------------+


                           Fig 3: Configuration C



    Anshoo Sharma, HSS                                              [Page 9]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       3.2.4 Configuration D:
       This configuration is used for all the procedures of tests concerning
       two or more AS which are handling traffic for different network
       appearance and different routing context. Configuration D is shown in
       figure 4. AS1, AS2 are handling the traffic for N/w Appearance A and
       AS3 is handling traffic for N/w appearance B. SGP serves SG.
       AS1 is handling traffic for Routing Context P, AS2 is handling traffic
       for Routing Context Q and AS3 is handling traffic for Routing Context
       R.

                                                      +--------------+
          SG                                          | AS1 DPC  X   |
        +-------------+                               |  -------     |
        |             |-------------------------------| | ASP1  |    |
        | SGP/IPSP    |                               |  -------     |
        | Under Test  |                               +--------------+
        | DPC Z       |                               +--------------+
        |             |-------------------------------| AS2 DPC Y    |
        |             |-------+                       |   -------    |
        +-------------+       |                       |  | ASP2  |   |
                              |                       |   -------    |
                              |                       +--------------+
                              |                       +--------------+
                              |                       | AS3 DPC T    |
                              +-----------------------|-  -------    |
                                                      |  | ASP 3 |   |
                                                      |   -------    |
                                                      +--------------+

                              Fig 4: Configuration D

       3.2.5 Configuration E:
       This configuration is used for all the procedures of tests concerning
       two AS which are handling traffic for two Routing Contexts.
       Configuration E is shown in figure 5. AS1 is handling the traffic for
       routing context P. AS2 is handling the traffic for Routing Context Q.
       ASP1 is in AS1 and ASP2 is in AS2. Routing Contexts are sharing the
       point code. SGP serves SG.








    Anshoo Sharma, HSS                                              [Page 10]

    Internet Draft         M3UA Conformance Test Plan               May 2003



                                                      +--------------+
          SG                                          | AS1 DPC  X   |
        +-------------+                               |  -------     |
        |             |-------------------------------| | ASP1  |    |
        | SGP/IPSP    |                               |  -------     |
        | Under Test  |                               +--------------+
        | DPC Z       |                               +--------------+
        |             |-------------------------------| AS2 DPC X    |
        +-------------+                               |   -------    |
                                                      |  | ASP2  |   |
                                                      |   -------    |
                                                      +--------------+
                            Fig 5: Configuration E

       3.2.6 Configuration F:
       This configuration is used for all the procedures of tests concerning
       AS serving different SIO. Configuration F is shown in figure 6. AS1 is
       handling the traffic for routing context P, AS2 is handling for routing
       context Q and AS3 for routing context R. All AS are handling traffic
       for N/w appearance A. Point Code of SG/IPSP is Z. AS1 and AS2 are
       serving the SIO ISUP but different CIC range and AS3 is serving the SIO
       SCCP. SGP serves SG.

                                                      +--------------+
          SG                                          | AS1 DPC  X   |
        +-------------+                               |  -------     |
        |             |-------------------------------| | ASP1  |    |
        | SGP/IPSP    |                               |  -------     |
        | Under Test  |                               +--------------+
        | DPC Z       |                               +--------------+
        |             |-------------------------------| AS2 DPC X    |
        |             |-------+                       |   -------    |
        +-------------+       |                       |  | ASP2  |   |
                              |                       |   -------    |
                              |                       +--------------+
                              |                       +--------------+
                              |                       | AS3 DPC X    |
                              +-----------------------|-  -------    |
                                                      |  | ASP 3 |   |
                                                      |   -------    |
                                                      +--------------+

                            Fig 6: Configuration F

    Anshoo Sharma, HSS                                              [Page 11]

    Internet Draft         M3UA Conformance Test Plan               May 2003





       3.3 Configuration for testing the M3UA at ASP

       3.3.1 Configuration G:
       This simple configuration is used for all the procedures of tests
       concerning only one SG/IPSP. Configuration G is shown in figure 7.
       SG routes Data to SS7 for PC Z and SGP serves SG. ASP is handling
       the traffic for routing context P.
       Routing Context P may be based on the following information:
       1.  DPC
       2.  DPC+CIC+SIO
       3.  DPC+SIO
       4.  DPC+SSN

        +-------------+                               +--------------+
        | ASP1        |                               | SGP/IPSP     |
        | under Test  |                               | DPC = Z      |
        | DPC = X     |-------------------------------| SG           |
        |             |                               |              |
        +-------------+                               +--------------+

                           Fig 7: Configuration G

       3.3.2 Configuration H:
       This configuration is used for all the procedures of tests concerning
       two SGs/IPSPs connected to the same ASP and handling traffic for the
       same DPC in the SEP network. Configuration H is shown in figure 8.
       SGP1/IPSP1 serving SG1 and SGP2/IPSP2 serving SG2 are handling the
       traffic for N/w Appearance A.
       Point Code of SG1/IPSP1 is Y and of SG2/IPSP2 is Z.
       Routing Context P may be based on the following
       information:
       1.  DPC
       2.  DPC+CIC+SIO
       3.  DPC+SIO
       4.  DPC+SSN








    Anshoo Sharma, HSS                                              [Page 12]

    Internet Draft         M3UA Conformance Test Plan               May 2003


                                                      +--------------+
                                                      | SGP1/IPSP1   |
        +-------------+                               | DPC Y        |
        |             |-------------------------------| SG1          |
        | ASP1        |                               |              |
        | Under Test  |                                --------------
        | DPC X       |                               +--------------+
        |             |-------------------------------| SGP2/IPSP2   |
        +-------------+                               | DPC Y        |
                                                      | SG2          |
                                                      |              |
                                                      +--------------+
                             Fig 8: Configuration H


       3.3.3 Configuration I:
       This simple configuration is used for all the procedures of tests
       concerning one ASP in two AS. Configuration I is shown in figure 9.
       Point Code of SG/IPSP is Z. ASP1 is in two AS, AS1 and AS2. AS1 is
       handling traffic for routing context P and AS2 is handling traffic for
       routing context Q. Routing Context P and Q may be based on the
       following information:

       1.  DPC
       2.  DPC+CIC+SIO
       3.  DPC+SIO
       4.  DPC+SSN

         +--------------+
         |   Under Test |
         | AS1 DPC  X   |
         |  -------     |                      +----------------+
         | | ASP1  |    | ---------------------|                |
         |  -------     |                      |  SGP / IPSP    |
         +--------------+                      |                |
         +--------------+                      |  DPC Z         |
         | AS2 DPC Y    |                      |  SG            |
         |   -------    | ---------------------|                |
         |  | ASP1  |   |                      +----------------+
         |   -------    |
         | Under Test   |
         +--------------+

                           Fig 9: Configuration I

    Anshoo Sharma, HSS                                              [Page 13]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       3.3.4 Configuration J:
       This configuration is used for all the procedures of tests concerning
       two SGPs in an SG connected to the same ASP. SG is handling traffic
       for Point Code Y and SGP1 and SGP2 are serving the SG. The ASP is
       handling Traffic for Routing Context P. Configuration J is shown in
       figure 10. The SG can be in Broadcast, Loadshare or Override Mode.
       Routing Context P may be based on the following information:
       1.  DPC
       2.  DPC+CIC+SIO
       3.  DPC+SIO
       4.  DPC+SSN



                                                      +--------------+
                                                      | SGP1         |
        +-------------+                               | DPC Y        |
        |             |-------------------------------| SG           |
        | ASP1        |                               |              |
        | Under Test  |                               +--------------+
        | DPC X       |                               +--------------+
        |             |-------------------------------| SGP2         |
        +-------------+                               | DPC Y        |
                                                      | SG           |
                                                      |              |
                                                      +--------------+

                             Fig 10 : Configuration J


       3.3.4 Configuration K:
       This configuration is used for all the procedures of tests concerning
       four SGPs connected to the same ASP. Both SG1 and SG2 are handling
       traffic for PC X and Y. ASP1 is handling traffic for routing context P.
       Point Code of SG1/IPSP1 is Y and of SG2/IPSP2 is Z. The SGs can be in
       Broadcast, Loadshare or Override Mode. Configuration J is shown in
       Figure 11. Routing Context P may be based on the following
       information:
       1.  DPC
       2.  DPC+CIC+SIO
       3.  DPC+SIO
       4.  DPC+SSN



    Anshoo Sharma, HSS                                              [Page 14]

    Internet Draft         M3UA Conformance Test Plan               May 2003


                                                      +--------------+
        +-------------+                               | SGP1 (SG1)   |
        |             |-------------------------------| DPC Y        |
        |             |                               +--------------+
        |             |                               +--------------+
        |             |                               | SGP2 (SG1)   |
        | ASP1        |-------------------------------| DPC Y        |
        | Under Test  |                               +--------------+
        | DPC X       |                               +--------------+
        |             |                               | SGP3 (SG2)   |
        |             |-------------------------------| DPC Y        |
        |             |                               +--------------+
        |             |                               +--------------+
        |             |-------------------------------| SGP4 (SG2)   |
        +-------------+                               | DPC Y        |
                                                      +--------------+


                             Fig 11 : Configuration K





























    Anshoo Sharma, HSS                                              [Page 15]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       4.  Test Cases for Testing M3UA at SGP
       Following Tests are to be carried out when the Implementation Under
       Test is SGP.

       4.1 MANAGEMENT

       Test Cases covering MANAGEMENT Procedures.

       "Notify Message with AS Status"

       + TEST NUMBER : 1.1

       + TITLE :  AS management

       + SUBTITLE : Notify Message with AS status

       + PURPOSE: To check that if ASPDN, ASPUP, ASPAC and ASPIA messages are
         received in ASP-Active, ASP-Down, ASP-Up and ASP-Active state
         respectively then NTFY message with correct status is sent to ASP.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is Active. Also arrange the data in ASP such that ASPDN,
         ASPUP messages are sent from ASP to SGP for ASP and these are sent
         on stream zero. The value of N/w Appearance is A and Routing Context
         is P in all the messages and other parameters are having valid
         values.

        EXPECTED MESSAGE SEQUENCE :
        ASP                              SGP                       SM
                                         ASP  is active

        ASPDN   --------------->
        (ASP1)                           Status Ind ---------->

                <--------------          ASP-Down-Ack
                        |                Status Ind ---------> (AS Pending)
                        |
                        |Time = z sec
                        |
                        |Timer T(r) Expiry
                        |
                       ---               Status Ind ---------> (AS Down)

    Anshoo Sharma, HSS                                              [Page 16]

    Internet Draft         M3UA Conformance Test Plan               May 2003



        ASPUP   --------------->
        (ASP1)                           Status Ind ----------->

                <--------------          ASP-Up-Ack

                <--------------          NTFY (AS-Inactive)

        ASPAC   --------------->
        (ASP1)                           Status Ind ----------->

                <--------------          ASP-Active-Ack

                <--------------          NTFY (AS-Active)

        ASPIA   --------------->
        (ASP1)                           Status Ind ----------->
                <--------------          ASP-Inactive-Ack

                <--------------          NTFY (AS-Pending)

       TEST DESCRIPTION:
       1. Send ASPDN message for ASP1 from ASP to the SGP.
       2. Check A: ASPDN is acknowledged by ASP-Down-Ack
          message at the ASP.
       3. Send ASPUP message to SGP.
       4. Check B: SGP responds with ASP-UP-Ack message and NTFY
          (AS-Inactive).
       5. Send ASPAC message with Routing Context P and check SGP responds
          with ASP-Active-Ack and NTFY with status AS-Active. Repeat the test
          case with Routing Context parameter not present in ASPAC message.
       6. Send ASPIA message and check that SGP responds with ASP Inactive-Ack
          and  NTFY with status AS-Pending.
       7. Check E: NTFY message is received on stream 0.












    Anshoo Sharma, HSS                                              [Page 17]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Notify Message with Insufficient Resources in AS"

       + TEST NUMBER : 1.2

       + TITLE :  AS management

       + SUBTITLE : Notify Message with Insufficient Resources in AS

       + PURPOSE: To check that if the number of Active ASPs in a Loadshare /
         Broadcast AS goes below the minimum number of required ASPs then a
         NTFY message for Insufficient Resources is sent to INACTIVE ASPs.

       + TEST CONFIGURATION: C

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1 and ASP2. ASP1 is Active for RC P and ASP2 is Inactive in SGP.
         The AS is in Loadshare mode and the minimum number of Active ASPs
         required is two. Also arrange the data in ASP1 such that ASPIA
         messages is sent from ASP1 to SGP for Routing Context P.

        EXPECTED MESSAGE SEQUENCE :
        ASP1      ASP2                   SGP                       SM
                                         ASP1 is Active
                                         ASP2 is Active

        ASPIA   --------------->
        (ASP1)
                <--------------          ASP-Inactive-Ack

                                         Status Ind ---------->


               (ASP2)<----------         NTFY (Insufficient Resources)

        (ASP1)<-----------------         NTFY (Insufficient Resources)
       TEST DESCRIPTION:
       1. Send ASPIA message from ASP1 to the SGP.
       2. Check A: SGP sends a NTFY Message with Insufficient Resources for
          RC P to ASP2 which is in ASP-Inactive State.
       3. Check B: ASPIA is acknowledged by ASPIA-Ack message by the SGP to
          ASP1.
       4. Repeat the Test Case when the AS is in Broadcast Mode.
       Note: This NTFY message might not be provisioned by some
             implementations.

    Anshoo Sharma, HSS                                              [Page 18]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Invalid Version Error"

       + TEST NUMBER : 1.3

       + TITLE :  Invalid Message Handling

       + SUBTITLE : Invalid Version Error

       + PURPOSE: To check that if any message with Invalid version is
         received at the SGP then SGP responds with ERROR message containing
         cause "Invalid Version" and diagnostic information filled with the
         version the SGP supports.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is Active. Also arrange the data in ASP such that ASPIA
         message is sent with the version other than Version 1.0 protocol to
         SGP. Type field can be any valid value and fill the routing context
         with any value.

       EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP             SM + NIF
                                     AS is active

          ASPIA   ---------------->
        Version = 2

                  <---------------    ERROR
                                   Cause = Invalid Version

       TEST DESCRIPTION:
       1. Send ASPIA message ASP to SGP containing version 2 in the common
          header.
       2. Check A: ERROR message is received at the ASP containing cause
          Invalid Version.
       3. Check B: Diagnostic Field Parameter in ERROR is filled with
          version 1.
       4. Repeat the above test cases for other messages from ASP to SGP like
          ASPAC, ASPUP, ASPDN, DAUD and DATA. In all these cases ERROR message
          will be received with the same cause.




    Anshoo Sharma, HSS                                              [Page 19]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Invalid Traffic Handling Mode Error"

       + TEST NUMBER : 1.4

       + TITLE : Invalid Message Handling

       + SUBTITLE : Invalid Traffic Handling Mode Error

       + PURPOSE: To check that if ASPAC or ASPIA message is received with
         Type parameter incompatible with the traffic handling mode currently
         used in AS at SGP, SGP responds with ERROR message containing cause
         "Invalid Traffic Handling Mode".

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP1 is Up. Arrange the data in ASP such that ASPAC
         message is sent with Type field filled with Loadshare mode of Traffic
         handling. Traffic Handling Mode defined at SGP for AS is Override.
         Fill value P in Routing context parameter.

       EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP             SM + NIF
                                     AS is Inactive

          ASPAC   ---------------->
        Type = Loadshare

                  <---------------    ERROR
                                   Cause = Invalid traffic Handling Mode

       TEST DESCRIPTION:
       1. Send ASPAC message from ASP to SGP containing Type field Loadshare.
          Mode of Traffic handling for AS at SGP is Override.
       2. Check A: ERROR message is received at the ASP containing cause
          Invalid Traffic Handling Mode.
       3. Repeat the above test cases for other values of Type field with
          Traffic Handling Mode for AS at SGP being different from this Type
          field.
       4. Repeat the test case with Type field having value that is not
          defined i.e. any value greater than 0x03.
       5. Repeat all the above tests for ASPIA message.



    Anshoo Sharma, HSS                                              [Page 20]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Invalid Traffic Handling Mode Error if there are two ASP in one AS"

       + TEST NUMBER : 1.5

       + TITLE : Invalid Message Handling

       + SUBTITLE : Invalid Traffic Handling Mode Error if there are two ASP
         in one AS

       + PURPOSE: To check that if ASPAC or ASPIA message is received with
         Type parameter incompatible with the traffic handling mode currently
         used in AS at SGP, SGP responds with ERROR message containing cause
         "Invalid Traffic Handling Mode".

       + TEST CONFIGURATION: C

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP1 and ASP2 are Up. Arrange the data in ASPs such that
         ASPAC message for ASP1 is sent with Type field filled with Override
         mode of Traffic handling and ASPAC message for ASP2 is sent with Type
         field filled with Loadshare mode of Traffic handling. Traffic
         Handling Mode defined at SGP for AS is Override Mode. Fill value P in
         Routing context parameter.

       EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP             SM + NIF
                                     AS is Inactive
        ASPAC(ASP1)---------------->
        Type = Override               Status Ind ------->

                   <---------------  ASP-Active-Ack

        ASPAC(ASP2) ---------------->
        Type = Loadshare
                    <---------------    ERROR
                                   Cause = Invalid traffic Handling Mode
       TEST DESCRIPTION:
       1. Send ASPAC message from ASP1 to SGP containing Type field Override.
       2. Check A: ASP-Active-Ack message is received at the ASP.
       3. Send ASPAC message from ASP2 to SGP containing Type field Loadshare.
       4. Check B: ERROR message is received at the ASP containing cause
          Invalid Traffic Handling Mode.
       5. Repeat the above test cases for other values of Type field with
          Traffic Handling Mode for AS at SGP being different from this Type.

    Anshoo Sharma, HSS                                              [Page 21]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       6. Repeat the test case with Type field having value that is not
          defined.
       7. Repeat all the above tests for ASPIA message.















































    Anshoo Sharma, HSS                                              [Page 22]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Unrecognized Message Type"

       + TEST NUMBER : 1.6

       + TITLE : Invalid Message Handling

       + SUBTITLE : Unrecognized Message Type

       + PURPOSE: To check that if a message with message type not defined is
         received at SGP, SGP responds with ERROR message containing cause
         "Invalid Message Type".

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP1 is active. Arrange the data in ASP such that a message
         with Message type not defined is sent to SGP. Let the other
         parameters in the message be like any other message.

       EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP             SM + NIF
                                     ASP is Active

          Message ---------------->
        Message Type=0x408

                  <---------------    ERROR
                                   Cause = Invalid Message Type

          DATA    ---------------->
       N/w Appearance A
                                      MTP-Transfer Ind ------->

       TEST DESCRIPTION:
       1. Send a message with message type 0x408 or any other value which is
          not defined from ASP to SGP.
       2. Check A: ERROR message is received at the ASP containing cause
          Invalid Message Type.
       3. Check B: State of AS at SGP is not disturbed.
       4. Repeat the above test cases by sending DUNA, DAVA, DUPU, DRST
          messages from ASP which the SGP is not expected to receive. In this
          case Error will be reported to the SM and Message will be discarded.



    Anshoo Sharma, HSS                                              [Page 23]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Invalid Network Appearance"

       + TEST NUMBER : 1.7

       + TITLE : Invalid Message Handling

       + SUBTITLE : Invalid Network Appearance and Invalid Routing Context

       + PURPOSE: To check that if a message with invalid network appearance
         i.e. network appearance not defined at SGP then SGP responds with
         ERROR message containing cause "Invalid Network Appearance".

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is in AS-Active state i.e. ASP1 is active. Arrange the
         data in ASP such that DATA message with Network Appearance other
         than A is sent to SGP.

       EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP                 SM + NIF
                                     ASP is Active

          DATA    ---------------->
        N/w Appearance B

                  <---------------    ERROR
                                   Cause = Invalid N/w Appearance

          DATA    ---------------->
       N/w Appearance A
                                      MTP-Transfer Ind ------->
       TEST DESCRIPTION:
       1. Send DATA message with network appearance B which is not defined at
          SGP.
       2. Check A: ERROR message containing cause Invalid Network Appearance
          should be received at AS.
       3. Check B: State of AS at SGP is not disturbed.
       4. Repeat the Test for an unconfigured Routing Context ERROR message
          with Invalid Routing Context must be returned.

       Note: Network Appearance and Routing Context parameters are optional.
       In some implementation this parameter may not come in DATA message.
       In those implementations, this test case need not be tested.

    Anshoo Sharma, HSS                                              [Page 24]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Message length less than the length of mandatory Parameters"

       + TEST NUMBER : 1.8

       + TITLE : Invalid Message Handling

       + SUBTITLE : Message length less than the length of mandatory
         parameters

       + PURPOSE: To check that if a message with value of length parameter
         less than length of mandatory parameters is received then message is
         discarded.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and AS is in AS-Active state. Arrange the data in AS such that
         ASPIA message with length parameter filled with value less than the
         length of type parameter is sent.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP                  NIF
                                     AS is Active

          ASPIA    ---------------->
        Message Length = 2

                  <---------------    Error
                                       ( Unsupported Message Type)

          DATA    ---------------->
        N/w appearance A, RC = P
                                       MTP-Transfer   --------->

       TEST DESCRIPTION:
       1. Send ASPIA message with length parameter filled with value less than
          the length of type field to the SGP.
       2. Check A: SGP will send an Error message with Unsupported Message
          Type parameter.
       3. Check B: State of AS at SGP is not disturbed.
       4. Repeat the above test case for other messages like ASPAC, ERROR,
          ASPDN.



    Anshoo Sharma, HSS                                              [Page 25]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ERROR Message Handling"

       + TEST NUMBER : 1.9

       + TITLE : ERROR

       + SUBTITLE : Handling of Received Error

       + PURPOSE: To check that if an error is received then that is reported
         to the SM and no action is taken against that.

       + TEST CONFIGURATION:   A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is active. Arrange data in ASP such that ERROR with cause
         invalid version is sent to the SGP.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP                  SM + NIF
                                   ASP is Active

        ERROR       ---------------->
        cause=Invalid version
                                          Error     ------->


       TEST DESCRIPTION:
       1. Send ERROR message with cause invalid version from ASP to SGP.
       2. Check A: Error should be reported to the SM.
       3. Check B: Further action at the SGP are implementation dependent.
          SM may tear down the connection or no action may be taken.
       4. Repeat the test case for other cause values in ERROR message.














    Anshoo Sharma, HSS                                              [Page 26]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Error - Refused - Management Blocking"

       + TEST NUMBER : 1.10

       + TITLE : ERROR

       + SUBTITLE : ASPUP and ASPAC messages are sent for a Blocked ASP then
         ERROR message is sent from SGP.

       + PURPOSE: To check that if an error is received then that is reported
         to the SM and no action is taken against that.

       + TEST CONFIGURATION:   A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is in ASP-Down state. Arrange data in ASP such that ASPUP
         and ASPAC messages are sent to SGP with valid parameters.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP                  SM + NIF
                                   ASP is Down

        ASPUP     ---------------->

                  <---------------    Error
                                       (Refused - Management Blocking)

        ASPAC     ---------------->

                  <---------------    Error
                                       (Refused - Management Blocking)



       TEST DESCRIPTION:
       1. Send ASPUP message from ASP to SGP.
       2. Check A: Error should be sent from SGP with "Refused - Management
          Blocking" to ASP.
       3. Send ASPAC message from ASP to SGP.
       4. Check A: Error should be sent from SGP with "Refused - Management
          Blocking" to ASP.




    Anshoo Sharma, HSS                                              [Page 27]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Error - Invalid Stream Identifier"

       + TEST NUMBER : 1.11

       + TITLE : ERROR

       + SUBTITLE : Stream Zero for Non-Transfer Messages for Multiple Stream
         SCTP association.

       + PURPOSE: If Non Transfer messages with the exception of ASPTM, BEAT
         and BEAT-Ack are sent on any Stream other than Zero then ERROR
         message is sent from SGP.

       + TEST CONFIGURATION:   A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is in ASP-Down state. Arrange data in ASP such that ASPUP
         is sent to SGP with valid parameters on stream 1.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP                  SM + NIF
                                   ASP is Down

        ASPUP     ---------------->
       (stream 1)

                  <---------------    Error
                                       (Invalid Stream Identifier)

       TEST DESCRIPTION:
       1. Send ASPUP message from ASP to SGP on Stream 1.
       2. Check A: Error should be sent from SGP with "Invalid Stream
          Identifier" to ASP.
       3. Repeat the Test Case for all Non-Transfer messages other than
          ASPTM, BEAT and BEAT-Ack.











    Anshoo Sharma, HSS                                              [Page 28]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Reception of Unpadded Message"

       + TEST NUMBER : 1.12

       + TITLE : ERROR

       + SUBTITLE : On Receiving Unpadded message from Peer, SGP should still
         process the Message.

       + PURPOSE: If the SGP receives a Message from the ASP which is not
         padded, then also the Message should be Processed.

       + TEST CONFIGURATION:   A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is in ASP-Down state. Arrange data in ASP such that ASPUP
         is sent to SGP with size of Info String such that the Total
         Message Length is 35 Bytes and this Message should not be padded.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP                  SM + NIF
                                   ASP is Down

        ASPUP     ---------------->
        (Length is 35 Bytes)

                  <----------------  ASPUP-Ack

                  <----------------  NTFY




       TEST DESCRIPTION:
       1. Send the ASPUP message as described from ASP to SGP on Stream 0.
       2. Check A: The Message should not be rejected at the SGP.
       3. Check B: ASP UP Ack and NTFY should be sent from the SGP side.









    Anshoo Sharma, HSS                                              [Page 29]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Error - ASP ID Required"

       + TEST NUMBER : 1.13

       + TITLE : ERROR

       + SUBTITLE : Error with cause ASP Identifier Required.

       + PURPOSE: On Receiving an ASPUP Message from an unconfigured
         Transport Address without an ASP ID the SGP sends ERROR with cause
         "ASP ID Required".

       + TEST CONFIGURATION:   A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is in ASP-Down state. Arrange data in ASP such that ASPUP
         is sent to SGP with no ASP ID. The Transport Address of the ASP has
         not been configured at the SGP side.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP                  SM + NIF
                                   ASP is Down

        ASPUP     ---------------->
        (No ASP ID)

                  <---------------- ERROR
                                    (ASP ID Required)


       TEST DESCRIPTION:
       1. Send ASPUP message from ASP to SGP.
       2. Check A: An Error Message with cause ASP ID Required is sent to the
          ASP from the SGP.












    Anshoo Sharma, HSS                                              [Page 30]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Error - Invalid ASP ID"

       + TEST NUMBER : 1.14

       + TITLE : ERROR

       + SUBTITLE : Error with cause Invalid ASP Identifier.

       + PURPOSE: On receiving a Non-Unique ASP Identifier in the ASPUP
         message an ERROR with cause Invalid ASP Identifier is sent to the
         ASP.

       + TEST CONFIGURATION: B

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         both ASPs (i.e. ASP1 and ASP2). ASP1 is in ASP-Inactive state and the
         ASP Identifier for ASP1 is 'T'. ASP2 is in ASP-Down State. Arrange
         data at ASP2 for sending an ASPUP to SGP with ASP ID as 'T'.

        EXPECTED MESSAGE SEQUENCE :
        ASP2                          SGP                  SM + NIF
                                   ASP1 is Inactive
                                   ASP2 is Down

       From ASP2
        ASPUP     ---------------->
        (ASP ID 'T')

           (ASP2) <---------------- ERROR
                                    (Invalid ASP ID)


       TEST DESCRIPTION:
       1. Send ASPUP message from ASP to SGP with ASP ID 'T'.
       2. Check A: An Error Message with cause Invalid ASP ID Required is sent
          to the ASP from the SGP and the ASPUP message is discarded.










    Anshoo Sharma, HSS                                              [Page 31]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Error - Missing Parameter"

       + TEST NUMBER : 1.15

       + TITLE : ERROR

       + SUBTITLE : Error with cause Missing Parameter.

       + PURPOSE: To check that if any message without mandatory parameter is
         received at the SGP then SGP responds with ERROR message containing
         cause "Missing Parameter".

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is Active. Also arrange the data in ASP such that Payload
         Data Message is sent without Protocol Data parameter.

        EXPECTED MESSAGE SEQUENCE :
        ASP                          SGP                  SM + NIF
                                   ASP is Active

       From ASP
        DATA     ---------------->
        (Without Payload)

           (ASP) <---------------- ERROR
                                    (Missing Parameter)


       TEST DESCRIPTION:
       1. Send Payload Data message ASP to SGP without Protocol Data
          parameter.
       2. Check A: ERROR message is received at the ASP containing Error Code
          Missing Parameter.
       3. Repeat the above test cases for other messages from ASP to SGP like
          REG REQ, DEREG REQ, SCON and DAUD without mandatory parameter. In
          all these cases ERROR message will be received with the same Error
          Code.







    Anshoo Sharma, HSS                                              [Page 32]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Error - Unsupported Message Class"

       + TEST NUMBER : 1.16

       + TITLE : ERROR

       + SUBTITLE : Error Type - Unsupported Message Class.

       + PURPOSE: To verify that A SGP that does not support registration must
         return an Error (Unsupported Message Class) (optionally with the
         message with the first 40 bytes of the offending message). This Error
         should be returned whenever an unsupported or invalid Message Type is
         received.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP
         and  ASP. Dynamic Routing Key Registration is not supported at the
         SGP. The ASP is in Inactive State at the SGP. Arrange Data in
         ASP such that a Routing Key Registration request for RK1 is sent
         from ASP to SGP on stream 0.

        EXPECTED MESSAGE SEQUENCE :
        ASP                              SGP             SM + NIF
                                         ASP is Inactive

          REG REQ      ----------------->

                      <----------------- Error (Unsupported Message Class)

       TEST DESCRIPTION:
       1. Send a valid Reg Req message for RK1 from ASP to SGP Stack.
       2. Check A: Verify that the SGP send a error message "Unsupported
          Message Class" with the first 40 bytes of the offending message
          to the ASP.











    Anshoo Sharma, HSS                                              [Page 33]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "NTFY - ASP Failure"

       + TEST NUMBER : 1.17

       + TITLE : NOTIFY

       + SUBTITLE : Sending of ASP Failure Notification

       + PURPOSE: To check that when any of the ASP's fail at SG. Notification
         ASP failure is send to all up/active ASP's with ASP ID (if available)
         of the failed ASP.

       + TEST CONFIGURATION: C

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1, ASP2. ASP1, ASP2 is in ASP-inactive state.

        EXPECTED MESSAGE SEQUENCE :
        ASP1       ASP2              SGP                  SM + NIF
                             ASP1 & ASP2 are Inactive

        ASPAC ----------------->
        (ASP1)                           Status Ind ----------->

                <--------------          ASP-Active-Ack

                <--------------          NTFY (AS-Active)

        *** Terminate the SCTP Association between ASP1 and SGP ***

                                         Status Ind ----------->

                       <-------          NTFY (AS-Pending) to ASP2
                       <-------          NTFY (ASP-Failure) to ASP2


       TEST DESCRIPTION:
       1. Send ASPAC message from ASP1 for related AS. ASP1 becomes active at
          SGP.
       2. Terminate the association between SGP and ASP1.
       3. Check that AS PENDING notification is sent to ASP2.
       4. Check that ASP FAILURE notification is sent to ASP2 with the ASP ID
          (if available) of ASP1.


    Anshoo Sharma, HSS                                              [Page 34]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       4.2 TRANSFER

       Test Cases to test TRANSFER Procedures.

       "Send and Receive Transfer Primitive in AS Active State"

       + TEST NUMBER : 2.1

       + TITLE :  MTP-Transfer Primitive

       + SUBTITLE : Send and Receive Transfer Primitive in AS Active State

       + PURPOSE: To check that on receiving Transfer primitive from NIF, DATA
                  message is sent to the AS.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP1 is active. Also arrange the data in SGP such that upper
         layers send MTP-Transfer indication primitive to M3UA with data to be
         sent to DPC X, N/w Appearance A and RC P.

        EXPECTED MESSAGE SEQUENCE :
           ASP                              SGP              NIF
       a)                                 ASP is Active
                                             <-----------  MTP-Transfer
                      <-------------       DATA            N/w appearance A

       b)

             DATA      -------------->
                                          MTP-Transfer --------->
       TEST DESCRIPTION:
       1. Send Transfer Request Primitive from the NIF at SGP side to send
          Protocol Data to the ASP.
       2. Check A: DATA message should be received at the ASP containing the
          data passed by the NIF, Network Appearance and the RC for which the
          DATA is being sent.
       3. Send DATA message from ASP containing Protocol Data and Network
          Appearance A that is known to SGP.
       4. Check B: Transfer primitive is received at the NIF with the Protocol
          Data.
       5. Repeat the test step 3 if N/w Appearance parameter and RC is not
          present in the DATA message sent from ASP to SGP.

    Anshoo Sharma, HSS                                              [Page 35]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       Note:  Network Appearance and Routing Context are optional parameters.
              In some implementation these parameter will not be present in
              DATA message sent from SGP to ASP and vice versa.















































    Anshoo Sharma, HSS                                              [Page 36]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Stream Selection"

       + TEST NUMBER : 2.2

       + TITLE :  Stream Selection

       + SUBTITLE : Stream Selection

       + PURPOSE: To check that all the messages for the same call are sent on
                  the same SCTP stream.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP with two or more streams. ASP1 is active. Also arrange the data
         in SGP such that NIF send three or more Transfer indication primitive
         to M3UA with  N/w Appearance A and Routing Context P, containing the
         Data with same CIC value to be sent to DPC X.

        EXPECTED MESSAGE SEQUENCE :
            ASP                              SGP             NIF
                                            ASP is active

                                              <---------   MTP-Transfer
       Check Stream id  <-------------      DATA           Data with CIC X

                                              <---------   MTP-Transfer
       Check Stream id  <-------------      DATA           Data with CIC X

                                              <---------   MTP-Transfer
       Check Stream id  <-------------      DATA           Data with CIC X


       TEST DESCRIPTION:
       1. Send three or more Transfer Request Primitive from the NIF at SGP
          side to send Protocol Data to the ASP. In the Protocol Data CIC
          values should be same in all Transfer Request primitive assuming
          load sharing across streams is based on CIC.
       2. Check A: DATA messages are received at the ASP1 containing the same
          Stream Sequence number.
       3. Repeat the above test with same SLS value in Protocol Data in all
          Transfer Request primitive assuming load sharing across the streams
          is based on SLS.
       4. Repeat the above test case with different CIC values and different

    Anshoo Sharma, HSS                                              [Page 37]

    Internet Draft         M3UA Conformance Test Plan               May 2003


          SLS values. DATA messages should be sent on different streams.
       Note: How the messages will be distributed on different streams based
             on CIC and SLS is implementation dependent.















































    Anshoo Sharma, HSS                                              [Page 38]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "DATA message from ASP in ASP-Down state"

       + TEST NUMBER : 2.3

       + TITLE : Invalid Message Handling

       + SUBTITLE : DATA message from ASP in ASP-Down state

       + PURPOSE: To check that if DATA message is received in ASP-Down state
         then it is discarded.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP1 is in Down State. Arrange the data in AS such that DATA
         message with N/w Appearance A, RC P is sent to the SGP.

        EXPECTED MESSAGE SEQUENCE :
         ASP                           SGP             SM + NIF
                                     ASP is Down

        DATA       ---------------->

                   <---------------   Error
                                       (Unexpected Message)

        ASPUP      ---------------->
                                        Status Ind ------->

                   <---------------   ASP-Up-Ack

                   <---------------   NTFY(AS-Inactive)

       TEST DESCRIPTION:
       1. Send DATA message to the SGP in ASP-Down state.
       2. Check A: DATA message should be discarded and an Error message
          should be received at the ASP.
       3. Check that state of the ASP at SGP is not disturbed.
       4. Send ASPUP message on stream 0 and SGP should respond with
          ASP-Up-Ack and NTFY (AS-Inactive).





    Anshoo Sharma, HSS                                              [Page 39]

    Internet Draft         M3UA Conformance Test Plan               May 2003





       "Message Routing based on DPC"

       + TEST NUMBER : 2.4

       + TITLE :  Message Routing

       + SUBTITLE : Message Routing towards ASP

       + PURPOSE: To check that if NIF sends a MTP-Transfer message containing
         Protocol DATA to send to the AS then it is sent to the correct AS.

       + TEST CONFIGURATION: D

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         all ASP i.e. ASP1, ASP2 and ASP3 and all ASP are in Active state.
         Also arrange the data in NIF at SGP such that MTP-Transfer Indication
         Primitives is sent to the AS with following parameter combination:
         Protocol Data and N/w Appearance A and DPC X
         Protocol Data and N/w Appearance A and DPC Y
         Protocol Data and N/w Appearance B and DPC T

        EXPECTED MESSAGE SEQUENCE :
        ASP1       ASP2      ASP3                SGP               NIF
                                            All AS are active
                                                 <----------  MTP-Transfer Req
                                                          N/w Appearance A
                                                          DPC X
         <----------------------------      DATA

                                                 <----------  MTP-Transfer Req
                                                          N/w Appearance A
                                                          DPC Y
                     <----------------      DATA

                                                 <---------- MTP-Transfer Req
                                                          N/w Appearance B
                                                          DPC T
                             <--------      DATA




    Anshoo Sharma, HSS                                              [Page 40]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       TEST DESCRIPTION:
       1. Send MTP-Transfer Request Primitive from NIF in SGP containing the
          Protocol Data with DPC X and N/w appearance A.
       2. Check A: DATA message will be received at the ASP1.
       3. Repeat the above test case for MTP-Transfer Req primitive containing
          Protocol Data with DPC Y and N/w appearance A.
       4. Repeat the above test case for MTP-Transfer Req primitive containing
          Protocol Data with DPC T and N/w appearance B.










































    Anshoo Sharma, HSS                                              [Page 41]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Message Routing based on DPC+CIC"

       + TEST NUMBER : 2.5

       + TITLE :  Message Routing

       + SUBTITLE : Message Routing based on DPC+CIC

       + PURPOSE: To check that if NIF sends a MTP-Transfer message containing
         Protocol DATA to send to the AS then it is sent to the correct AS.

       + TEST CONFIGURATION: E

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         all ASP i.e. ASP1 and ASP2 are in Active state. Routing
         context P consists of DPC X and CIC 1 to 31. Routing context Q
         consists of DPC X and CIC 33 to 63. Also arrange the data in NIF at
         SGP such that MTP-Transfer Request Primitives is sent to the SGP
         with the following parameter combination:
         Protocol Data with DPC X and CIC 3
         Protocol Data with DPC X and CIC 35

        EXPECTED MESSAGE SEQUENCE :
        ASP1       ASP2                         SGP               NIF
                                            All AS are active
                                                 <----------  MTP-Transfer Ind
                                                              DPC X CIC 3
         <----------------------------      DATA

                                                 <----------  MTP-Transfer Ind
                                                              DPC X CIC 35
                     <----------------      DATA


       TEST DESCRIPTION:
       1. Send MTP-Transfer indication Primitive from NIF in the SGP
          containing the Protocol Data with DPC X and CIC value 3.
       2. Check A: DATA message will be received at the ASP1.
       3. Repeat the above test case for MTP-Transfer Req primitive containing
          Protocol Data with DPC X and CIC value 35. DATA message should be
          received at ASP2




    Anshoo Sharma, HSS                                              [Page 42]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Message Routing based on DPC+SSN"

       + TEST NUMBER : 2.6

       + TITLE :  Message Routing

       + SUBTITLE : Message Routing based on DPC+SSN

       + PURPOSE: To check that if NIF sends a MTP-Transfer message containing
         Protocol DATA to send to the AS then it is sent to the correct AS.

       + TEST CONFIGURATION: E

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         all ASP i.e. ASP1 and ASP2 are in Active state. Routing
         context P consists of DPC X and SSN S. Routing context Q consists of
         DPC X and SSN T. Also arrange data in NIF at SGP such that
         MTP-Transfer Request Primitives is sent to the SGP with the
         following parameter combination:
         Protocol Data with DPC X and SSN S
         Protocol Data with DPC X and SSN T

        EXPECTED MESSAGE SEQUENCE :
        ASP1       ASP2                         SGP               NIF
                                            All AS are active
                                                 <----------  MTP-Transfer Req
                                                              DPC X SSN S
         <----------------------------      DATA

                                                 <----------  MTP-Transfer Req
                                                              DPC X SSN T
                     <----------------      DATA

       TEST DESCRIPTION:
       1. Send MTP-Transfer Request Primitive from NIF in the SGP containing
          the Protocol Data with DPC X and SSN value S.
       2. Check A: DATA message will be received at the AS1.
       3. Repeat the above test case for MTP-Transfer Req primitive containing
          Protocol Data with DPC X and SSN value T. DATA message should be
          received at AS2





    Anshoo Sharma, HSS                                              [Page 43]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Message Routing based on DPC+SIO"

       + TEST NUMBER : 2.7

       + TITLE :  Message Routing

       + SUBTITLE : Message Routing based on DPC+SIO

       + PURPOSE: To check that if NIF sends a MTP-Transfer message containing
         Protocol DATA to send to the AS then it is sent to the correct AS.

       + TEST CONFIGURATION: E

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         all ASP i.e. ASP1 and ASP2 are in Active state. Routing Context P
         consists of DPC X and SIO S. Routing context Q consists of
         DPC X and SIO T. Also arrange the data in NIF at SGP such that
         MTP-Transfer Request Primitives is sent to the AS with the
         following parameter combination:
         Protocol Data with DPC X and SIO S
         Protocol Data with DPC X and SIO T

        EXPECTED MESSAGE SEQUENCE :
        ASP1       ASP2                           SGP               NIF
                                            All AS are active
                                                 <----------  MTP-Transfer Req
                                                              DPC X SIO S
         <----------------------------      DATA

                                                 <----------  MTP-Transfer Req
                                                              DPC X SIO T
                     <----------------      DATA

       TEST DESCRIPTION:
       1. Send MTP-Transfer Request Primitive from NIF in the SGP containing
          the Protocol Data with DPC X and SIO value S.
       2. Check A: DATA message will be received at the AS1.
       3. Repeat the above test case for MTP-Transfer Req primitive containing
          Protocol Data with DPC X and SIO value T. DATA message should be
          received at ASP2





    Anshoo Sharma, HSS                                              [Page 44]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Routing for Data not matching any routing context"

       + TEST NUMBER : 2.8

       + TITLE :  Message Routing

       + SUBTITLE : Routing for Data not matching any routing context

       + PURPOSE: To check that if NIF sends a MTP-Transfer message containing
         Protocol DATA which does not match to any routing context then
         default routing is given to this message.

       + TEST CONFIGURATION: E

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1 and ASP2 and ASP and ASP2 are Active. Routing context P consists
         of DPC X and SSN S. Routing context Q consists of DPC X and SSN T.
         Also arrange the data in NIF at SGP such that MTP-Transfer Request
         Primitives is sent to the SGP with DPC X and SSN other than S or T.

        EXPECTED MESSAGE SEQUENCE :
         ASP                           SGP                 NIF + SM
                                     AS is Active
                                           <-----------  MTP-Transfer Req
                                                         DPC X & SSN <> S or T

                                     Failure Ind. ---------->

       TEST DESCRIPTION:
       1. Send MTP-Transfer Request Primitive from NIF in the SGP containing
          the Protocol Data having DPC and SSN such that they don't match any
          routing key.
       2. Check A: Failure should be returned or some default routing will be
          given to this message.
       3. Repeat the above test case if routing context is defined based on
          DPC+CIC. Send MTP-Transfer Req from NIF containing protocol data
          with DPC+CIC that doesn't match any routing key. Response will
          be same as in the above case.
       4. Repeat the above test case if routing context is defined based on
          DPC+SIO. Send MTP-Transfer Req from NIF containing protocol data
          with DPC+SIO that doesn't match this routing key. Response
          will be same as in the above case.
       5. Repeat the above test case if routing context is defined based on
          DPC. Send MTP-Transfer Req from NIF containing protocol data with

    Anshoo Sharma, HSS                                              [Page 45]

    Internet Draft         M3UA Conformance Test Plan               May 2003


          DPC that doesn't match this routing key. Response will be same as
          in the above case.
       Note: Implementation may provide a default AS for all Data. In this
             case Failure would not be returned.














































    Anshoo Sharma, HSS                                              [Page 46]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       4.3 SSNM

       Test Cases to test SSNM Procedures.

       "Received DAUD Message "

       + TEST NUMBER : 3.1

       + TITLE : Status Audit

       + SUBTITLE : Received DAUD message

       + PURPOSE: To check that if DAUD message is received from ASP then SGP
         sends Status Request primitive to the NIF and state of ASP is not
         changed at SGP.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP1 is active. Also arrange the data in ASP such that DAUD
         message is sent to the SGP with Network Appearance A and Affected DPC
         any value.

       EXPECTED MESSAGE SEQUENCE :
        ASP                              SGP                 NIF + SM
                                         AS is active
        DAUD    ------------->
                                         Status Request ------>

                                                   <------ Pause/Resume/State
                <------------            DUNA/DAVA/DRST/SCON

       TEST DESCRIPTION:
       1. Send DAUD message with N/w appearance A and affected DPC any value
          from ASP to the SGP.
       2. Check A: Status Request Primitive is received at SM with the DPC and
          N/w appearance received in the DAUD message.
       3. Check B: State of AS will not be changed at SGP. Send Pause/Resume
          primitive with N/w appearance A and SGP should send DUNA/DRST/DAVA
          message to the ASP1.
       4. Repeat the above test case if DAUD message is sent without N/w
          Appearance parameter. Response should be same as in the above case.
       Note: DUNA/DAVA/SCON message may be sent by M3UA itself in response to
             DAUD message depending upon the implementation.

    Anshoo Sharma, HSS                                              [Page 47]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       Note1: ASP auditing is an optional procedure and may not be supported
              at ASP/SGP.
















































    Anshoo Sharma, HSS                                              [Page 48]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "MTP-Pause Indication Primitive:"

       + TEST NUMBER : 3.2

       + TITLE :  MTP3 management

       + SUBTITLE : MTP-Pause Indication Primitive

       + PURPOSE: To check that if MTP-Pause indication primitive is received
         from NIF at SGP then SGP sends DUNA message to the concerned ASPs.

       + TEST CONFIGURATION: D

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1, ASP2 and ASP3. All AS are in AS-Active state. AS1 and AS2 are
         handling traffic for N/w appearance A and AS3 is handling traffic for
         N/w Appearance B. Also arrange the data in NIF at SGP such that
         MTP-Pause Indication Primitive is sent to the AS with Network
         Appearance A and B and affected DPC any value.

        EXPECTED MESSAGE SEQUENCE :
        AS1        AS2      AS3             SGP              NIF
                                            All AS are active
                                              <----------    MTP-Pause
                                                          N/w Appearance A
                                                          Affected DPC M
         <----------------------------      DUNA

                    <-----------------      DUNA

                                              <----------    MTP-Pause
                                                          N/w Appearance B
                                                          Affected DPC M
                             <---------     DUNA
       TEST DESCRIPTION:
       1. Send MTP-Pause indication Primitive message from NIF in the SGP
          containing the Network Appearance A and Affected DPC M.
       2. Check A: DUNA message will be received at the ASP1 and ASP2
          containing the network Appearance A and Affected DPC M.
       3. Check B: DUNA message is received at both AS AS1 and AS2 which are
          handling traffic for the same network appearance.
       4. Check C: DUNA message is received on the Stream number 0.
       5. Repeat the above test case with N/w Appearance B. In this case DUNA
          message should be sent to AS3.

    Anshoo Sharma, HSS                                              [Page 49]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "MTP-Resume Indication Primitive"

       + TEST NUMBER : 3.3

       + TITLE :  MTP3 management

       + SUBTITLE : MTP-Resume Indication Primitive

       + PURPOSE: To check that if MTP-Resume indication primitive is received
         from NIF at SGP then SGP sends DAVA message to the concerned ASPs.

       + TEST CONFIGURATION: D

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1, ASP2 and ASP3. All AS are in AS-Active state. AS1 and AS2 are
         handling traffic for N/w appearance A and AS3 is handling traffic for
         N/w Appearance B. Also arrange the data in NIF at SGP such that
         MTP-Resume Indication Primitive is sent to the AS with Network
         Appearance A and B and affected DPC any value.

       EXPECTED MESSAGE SEQUENCE :

        AS1        AS2      AS3                  SGP               NIF
                                            All AS are active
                                              <----------    MTP-Resume
                                                          N/w Appearance A
                                                          Affected DPC M
         <----------------------------      DAVA

                    <-----------------      DAVA

                                              <----------    MTP-Resume
                                                          N/w Appearance B
                                                          Affected DPC M
                             <---------     DAVA
       TEST DESCRIPTION:
       1. Send MTP-Resume indication Primitive from NIF in the SGP containing
          the Network Appearance A and Affected DPC M.
       2. Check A: DAVA message is received at AS1 and AS2 containing the
          network Appearance A and Affected DPC M.
       3. Check B: DAVA message is received at AS1 and AS2
       4. Check C: DAVA message is received on the Stream number 0.
       5. Repeat the test case for N/w appearance B and affected destination
          any value. Check that message is being sent to AS3.

    Anshoo Sharma, HSS                                              [Page 50]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "MTP-Status Indication Primitive with Route Congested"

       + TEST NUMBER : 3.4

       + TITLE :  MTP3 management

       + SUBTITLE : MTP-Status Indication Primitive with Route Congested

       + PURPOSE: To check that if MTP-Status indication primitive with Route
         Congested parameter is received from NIF at SGP then SGP sends SCON
         message to the concerned ASPs. Also arrange the data in NIF at SGP
         such that MTP-Status indication Primitive is sent to the SGP with
         cause Routing Congested, affected DPC, Congestion level and
         Network Appearance.

       + TEST CONFIGURATION: D

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1, ASP2 and ASP3. All AS are in AS-Active state. AS1 and AS2 are
         handling traffic for N/w appearance A and AS3 is handling traffic for
         N/w Appearance B.

       EXPECTED MESSAGE SEQUENCE :
        AS1        AS2      AS3                  SGP               NIF
                                            All AS are active

                                              <----------    MTP-Status
                                                          N/w Appearance A
                                                          DPC M Cong Level 2
         <----------------------------      SCON

                    <-----------------      SCON

                                              <----------    MTP-Status
                                                          N/w Appearance B
                                                          DPC M Cong Level 2

                             <---------     SCON




       TEST DESCRIPTION:


    Anshoo Sharma, HSS                                              [Page 51]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       1. Send MTP-Status indication Primitive from NIF in the SGP containing
          the Network Appearance A, cause Route congestion, Affected DPC M and
          congestion Level 2.
       2. Check A: SCON message is received at the AS1 and AS2 containing the
          network Appearance A, Affected DPC M, Congestion Level 2 passed to
          it from NIF.
       3. Check B: SCON message is received at AS1 and AS2.
       4. Check C: SCON message is received on the Stream number 0.
       5. Repeat the above test case for all congestion level 0, 1, 2 and 3.
          SCON message will be received with congestion level passed from NIF.
       6. Repeat the above test case with different congestion level for
          different affected DPC. SCON message should contain the correct
          congestion level for each affected destination.
       7. Repeat the above test case with N/w appearance B. SCON message will
          be received at AS3.


































    Anshoo Sharma, HSS                                              [Page 52]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "MTP-Status Indication Primitive with User Part Unavailable"

       + TEST NUMBER : 3.5

       + TITLE :  MTP3 management

       + SUBTITLE : MTP-Status Indication Primitive with User Part Unavailable

       + PURPOSE: To check that if MTP-Status indication primitive with cause
         User Part Unavailable is received from NIF at SGP then SGP sends DUPU
         message to the concerned ASPs.

       + TEST CONFIGURATION: D

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1, ASP2 and ASP3. All AS are in AS-Active state. AS1 and AS2 are
         handling traffic for N/w appearance A and AS3 is handling traffic for
         N/w Appearance B. Also arrange the data in NIF at SGP such that
         MTP-Status indication Primitive is sent to the SGP with cause User
         Part Unavailable Unknown, affected DPC, SIO for ISUP and network
         appearance A. Assume routing context is DPC+SIO based.

       EXPECTED MESSAGE SEQUENCE :

        AS1        AS2      AS3                  SGP               NIF

                                            All AS are active

                                              <----------    MTP-Status
                                                          N/w Appearance A
                                                          DPC S

         <----------------------------      DUPU

                    <-----------------      DUPU

                                              <----------    MTP-Status
                                                          N/w Appearance B
                                                          DPC S

                             <---------     DUPU




    Anshoo Sharma, HSS                                              [Page 53]

    Internet Draft         M3UA Conformance Test Plan               May 2003



       TEST DESCRIPTION:
       1. Send MTP-Status indication Primitive from NIF in the SGP containing
          the Network Appearance A, cause User Part Unavailable, Affected DPC
          S and SIO for ISUP.
       2. Check A: SGP will send DUPU message containing the network
          Appearance A, Affected DPC S, cause unknown and user ISUP.
       3. Check B: DUPU message is received at AS1 and AS2.
       4. Check C: DUPU message is received on the Stream number 0.
       5. Repeat the above test case with cause values Unequipped Remote User
          and Inaccessible Remote User and other parameters being the same as
          in the above tests. DUPU message will be received with these cause
          values.
       6. Repeat the above test case with SIO values TUP, Broadband ISUP,
          Satellite ISUP and Reserved.
       7. Repeat the above test case if MTP-Status is sent with N/w appearance
          B. DUPU message will be sent to AS3.































    Anshoo Sharma, HSS                                              [Page 54]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "MTP-Pause Indication Primitive"

       + TEST NUMBER : 3.6

       + TITLE :  MTP3 management

       + SUBTITLE : MTP-Status Indication Primitive with Route Restricted

       + PURPOSE: To check that if MTP-Status indication primitive with Route
         Restricted is received from NIF at SGP then SGP sends DRST message
         to the concerned ASPs.

       + TEST CONFIGURATION: D

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1, ASP2 and ASP3. All AS are in AS-Active state. AS1 and AS2 are
         handling traffic for N/w appearance A and AS3 is handling traffic for
         N/w Appearance B. Also arrange the data in NIF at SGP such that
         MTP-Status Indication Primitive is sent to the AS with Network
         Appearance A and B and affected DPC any value.
        EXPECTED MESSAGE SEQUENCE :
        AS1        AS2      AS3             SGP              NIF
                                            All AS are active
                                              <----------    MTP-Status
                                                          N/w Appearance A
                                                          Cause Restricted
         <----------------------------      DRST

                    <-----------------      DRST

                                              <----------    MTP-Status
                                                          N/w Appearance B
                                                          Cause Restricted
                             <---------     DRST
       TEST DESCRIPTION:
       1. Send MTP-Pause indication Primitive message from NIF in the SGP
          containing the Network Appearance A and Affected DPC M.
       2. Check A: DRST message will be received at the ASP1 and ASP2
          containing the network Appearance A and Affected DPC M.
       3. Check B: DRST message is received at both AS AS1 and AS2 which are
          handling traffic for the same network appearance.
       4. Check C: DRST message is received on the Stream number 0.
       5. Repeat the above test case with N/w Appearance B. In this case DRST
          message should be sent to AS3.

    Anshoo Sharma, HSS                                              [Page 55]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       4.4 ASPSM

       Test Cases to test ASPSM Procedures.

       "Heartbeat and Heartbeat Ack"

       + TEST NUMBER : 4.1

       + TITLE :  AS management

       + SUBTITLE : Heartbeat

       + PURPOSE: : To check that  an ASP sends Heartbeat messages (to ensure
         that the M3UA peers are still available to each other) and receives a
         Heartbeat Ack from the remote peer.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is active. Also arrange the data in ASP such that BEAT
         message is sent from ASP1 to SGP.

         EXPECTED MESSAGE SEQUENCE:

         ASP                              SGP                        SM
                                         ASP is Active

        a) BEAT (ASP1)   ----------------->
         Timer 2*T(beat)          |
         is started               |
                          <----------------   BEAT ACK

        b) BEAT (ASP1)   ----------------->
         Timer 2*T(beat)          |
         is started               |
                                  |

         Timer 2*T(beat) is expired without any BEAT ACK is from SGP.

       TEST DESCRIPTION:
       1. Send BEAT Message from ASP to the SGP.
       2. The beat message should be acknowledge by BEAT ACK before the Timer
          expires.
       3. Send the Beat message again.

    Anshoo Sharma, HSS                                              [Page 56]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       4. The timer expires and no beat Ack message is received, the ASP will
          consider remote M3UA peer as Down. Transmission of BEAT message is
          stopped and ASP-Up procedures are used to re-establish communication
          with the SGP M3UA peer.
       5. Repeat the Test when the BEAT message is sent by SGP.













































    Anshoo Sharma, HSS                                              [Page 57]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASPUP message in AS-Inactive state"

       + TEST NUMBER : 4.2

       + TITLE : Duplicate Message Handling

       + SUBTITLE : ASPUP message in ASP Inactive state

       + PURPOSE: To check that if ASPUP message is received in ASP-Inactive
         state then message with ASP-Up-Ack is sent to the AS.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is in ASP-Down state. Arrange the data in ASP such that
         ASPUP message  is sent to the SGP two times on stream 0.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP             SM + NIF
                                     AS is Down
        ASPUP      ---------------->
                                     Status Ind ------->

                   <---------------   ASP-Up-Ack

                   <---------------   NTFY(AS-Inactive)

        ASPUP      ---------------->

                   <---------------   ASP-Up-Ack

        ASPAC       ---------------->
                                      Status Ind ------->
                   <---------------   ASP-Active-Ack

                   <---------------   NTFY(AS-Active)
       TEST DESCRIPTION:
       1. Send ASPUP message to the SGP in ASP-Down state. ASP-Up-Ack and
          NTFY (AS-Inactive) messages will come from the SGP. Send ASPUP
          message  again from the AS for the same ASP.
       2. Check A: ASP-Up-Ack message should be received at AS.
       3. Check B: State of ASP at SGP is not disturbed i.e. ASP remains in
          the Inactive state. Send ASPAC message with valid Type and Routing
          Context for the ASP1 and ASP-Active-Ack message should come.

    Anshoo Sharma, HSS                                              [Page 58]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASPDN message in ASP-Down state"

       + TEST NUMBER : 4.3

       + TITLE : Duplicate Message Handling

       + SUBTITLE : ASPDN message in ASP-Down  state

       + PURPOSE: To check that if ASPDN message is received in ASP-Down state
         then ASP-Down-Ack message is sent to the AS.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and AS is in AS-Inactive state i.e. ASP1 is Inactive. Arrange the
         data in AS such that ASPDN message is sent to the SGP two times on
         stream 0.
        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP             SM + NIF
                                     AS is Inactive

        ASPDN      ---------------->
                                     Status Ind ------->

                   <---------------   ASP-Down-Ack

        ASPDN      ---------------->

                   <---------------   ASP-Down-Ack

        ASPUP       ---------------->
                                      Status Ind ------->

                   <---------------   ASP-Up-Ack

                   <---------------   NTFY(AS-Inactive)
       TEST DESCRIPTION:
       1. Send ASPDN message to the SGP in ASP-Inactive state. ASP-Down-Ack
          message will be received from the SGP. Send ASPDN message
          again from the ASP.
       2. Check A: ASP-Down-Ack message should be received at AS.
       3. Check B: State of ASP at SGP is not disturbed i.e. ASP remains in
          the Down state. Send ASPUP message for the ASP,ASP-Up-Ack and NTFY
          with status AS-Inactive should come.

    Anshoo Sharma, HSS                                              [Page 59]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASPUP message in ASP-Active state"

       + TEST NUMBER : 4.4

       + TITLE : Invalid Message Handling

       + SUBTITLE : ASPUP message in ASP-Active state

       + PURPOSE: To check that if ASPUP message is received in ASP-Active
         state then ACK message is sent to AS and ASP
         state is moved to ASP-Inactive.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP1 is Active. Arrange the data in AS such that ASPUP
         message is sent to the SGP on stream 0.

        EXPECTED MESSAGE SEQUENCE :
         ASP                           SGP             SM + NIF
                                     ASP is Active

        ASPUP      ---------------->

                   <---------------   ASP-Up-Ack

                                        Status Ind -------> AS Inactive

                   <---------------   Error
                                      (Unexpected Message)

        ASPAC      ---------------->
                                        Status Ind ------->

                   <---------------   ASP-Active-Ack

       TEST DESCRIPTION:
       1. Send ASPUP message to the SGP in ASP-Active state.
       2. Check A: An Error message with parameter Unexpected Message should
          be received at ASP.
       3. Check B: State of ASP should not change to ASP Inactive. Send ASPAC
          message with correct Type (Type is same as defined at SGP for the
          AS) and routing context P to the SGP and SGP should send
          ASP-Active-Ack.

    Anshoo Sharma, HSS                                              [Page 60]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASPDN message in ASP-Active state"

       + TEST NUMBER : 4.5

       + TITLE : Different Message Handling

       + SUBTITLE : ASPDN message in ASP-Active state

       + PURPOSE: To check that if ASPDN message is received in ASP-Active
         state then ASP-Down-Ack message is sent to AS and State
         of ASP at SGP becomes ASP-Down.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is Active. Arrange the data in ASP such that ASPDN
         Message is sent to the SGP on stream 0.

        EXPECTED MESSAGE SEQUENCE :
         ASP                           SGP             SM + NIF
                                     ASP is Active

        ASPDN      ---------------->
                                        Status Ind ------->

                   <---------------   ASP-Down-Ack
                          |
                          |           [T(r) Expiry]
                         ---            Status Ind ------->  AS Down

        ASPUP      ---------------->
                                        Status Ind ------->

                   <---------------   ASP-Up-Ack

                   <---------------   NTFY(AS-Inactive)
       TEST DESCRIPTION:
       1. Send ASPDN message to the SGP in ASP-Active state.
       2. Check A: ASP-Down-Ack message is received at ASP.
       3. Check B: State of ASP should become Down.
       4. Send ASPUP message to the SGP and SGP should send ASP-Up-Ack and
          NTFY message with Status ASP-Inactive.



    Anshoo Sharma, HSS                                              [Page 61]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASPM message when SGP has locked out the ASP for management reason"

       + TEST NUMBER : 4.6

       + TITLE : AS management

       + SUBTITLE : ASPM message when SGP has locked out the ASP for
         management reason

       + PURPOSE: To check that if ASPM message is received when SGP has
         locked out the ASP for management then ERROR message with reason
         Management Blocking is sent to ASP.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP may be in any state. Arrange the data in SGP such that
         ASP is locked out at the SGP. Arrange the data in AS such that ASPUP
         message with valid parameters is sent to the SGP on stream 0.

        EXPECTED MESSAGE SEQUENCE :
         ASP                           SGP             SM + NIF

                                         <----------  Lock-ASP

        ASPUP      ---------------->

                   <---------------   ERROR (Refused - Management Blocking)


       TEST DESCRIPTION:
       1. Lock out the ASP at the SGP by sending primitive for locking ASP
          from SM.
       2. Now send ASPUP message with valid parameters from ASP to SGP.
       2. Check A: Error message with reason " Management Blocking"
          is received at ASP.
       3. Repeat the above test case for ASPAC message from ASP to the SGP
          with valid parameters. Response should be same.








    Anshoo Sharma, HSS                                              [Page 62]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASP ID in ASP UP Message"

       + TEST NUMBER : 4.7

       + TITLE : ASP management

       + SUBTITLE : ASPUP Message from a ASP with unconfigured Transport
         Address.

       + PURPOSE: To test that on when an ASP sends an ASPUP message with
         ASP ID from a new Transport Address then the SGP updates the
         Transport Address for this ASP with the new Transport Address.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is in ASP-Down state. The Transport Address statically
         configured for the ASP is T1 and the SCTP association is with
         Transport Address T2. The ASP is statically configured to have ASP ID
         'I'.

        EXPECTED MESSAGE SEQUENCE :
         ASP                           SGP             SM + NIF

        (From Transport Addr T2)
        ASPUP      ---------------->
        (ASP ID 'I')

                   <---------------   ASPUP-Ack

                   <---------------   NTFY

                                      Status Ind ------>


       TEST DESCRIPTION:
       1. Send ASPUP from ASP (at Transport Address T2) to SGP with ASP ID
          'I'.
       2. Check A: SGP updates the Transport Address for ASP (with ASP ID 'I')
          to T2 which was in ASP-Down state up till now.
       3. Check B: ASPUP was successfully processed at the ASP and the state
          of ASP has changed to ASP-Inactive. ASPUP-Ack and NTFY messages have
          been sent to ASP.


    Anshoo Sharma, HSS                                              [Page 63]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       4.5 ASPTM

       Test Cases to test ASPTM Procedures.

       "Transfer Request Primitive from NIF in AS Inactive State"

       + TEST NUMBER : 5.1

       + TITLE :  AS management

       + SUBTITLE : Transfer Request from NIF in AS Inactive State

       + PURPOSE: To check that if AS is Inactive at SGP and NIF sends
         Transfer Primitive to send to that AS then it receives a send
         failure.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is active. Also arrange the data in ASP such that ASPIA
         message is sent from ASP1 to SGP . The Type field in ASPIA
         can be any valid value which is equal to the traffic handling mode
         for the AS at the SGP and Routing Context should be P.

       EXPECTED MESSAGE SEQUENCE :
         ASP                                 SGP                NIF + SM
                                           ASP is Active

        ASPIA        --------------->
       (ASP1)                              Status Ind  -------->

                     <--------------        ASP-Inactive-Ack

                     <--------------       NTFY(AS-Pending)
                         |
                         |
                        ___                [T(r) Expires]
                                           Status Ind   --------> AS Inactive

                                                       <-------- MTP-Transfer
                                           Send failure -------->
                                           Pause Ind    -------->



    Anshoo Sharma, HSS                                              [Page 64]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       TEST DESCRIPTION:
       1. Send ASPIA Message for ASP1 from ASP to the SGP. ASP will move to
          Inactive state at the SGP. Send MTP-Transfer Primitive with N/w
          Appearance A containing Protocol Data with DPC X.
       2. Check A: Send failure should be received at the NIF and DATA message
          should not be sent to ASP. Some implementations may also indicate a
          Pause Ind at the SGP for the SPMC.
       3. Repeat the above test if ASPIA message is sent without Routing
          Context Parameter. ASP-Inactive-Ack and NTFY(AS-Pending) should be
          received at the ASP with either all routing contexts configured at
          the SGP or with no routing context for the ASP.
       4. Repeat the above test if instead of sending ASPIA message, SCTP
          association between ASP and SGP is removed.
       Note: In some implementation there may be T(r) running on receiving
             ASPDN or ASPIA message for the last ASP and for that time AS will
             be in AS-Pending state. In that case let the timer T(r) expire
             before sending the Transfer primitive.































    Anshoo Sharma, HSS                                              [Page 65]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "MTP-Transfer Request Primitive from NIF in AS Down State"

       + TEST NUMBER : 5.2

       + TITLE :  AS management

       + SUBTITLE : MTP-Transfer Request from NIF in AS Down State

       + PURPOSE: To check that if AS is down at SGP and NIF sends MTP-
         Transfer Primitive to send to that AS then it receives a send
         failure.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is active. Also arrange the data in ASP such that ASPIA and
         ASPDN message is sent from ASP to SGP on stream 0.

       EXPECTED MESSAGE SEQUENCE :
         ASP                                 SGP                NIF + SM
                                           ASP is Active

        ASPIA        --------------->
        (ASP1)                             Status Ind --------->

                     <--------------       ASP-Inactive-Ack

                     <--------------       NTFY(AS-Pending)
                                           T(r) Started

        ASPDN        --------------->
        (ASP1)                             Status Ind --------->

                     <--------------       ASP-Down-Ack
                           |
                           |
                          ---              T(r) Expiry
                                           Status Ind (AS Down)--------->

                                                   <--------   MTP-Transfer

                                           Send failure -------->
                                           Pause Ind    -------->


    Anshoo Sharma, HSS                                              [Page 66]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       TEST DESCRIPTION:
       1. Send ASPIA Message for ASP1 from ASP to the SGP. ASP will move to
          Inactive state at the SGP.
       2. Send ASPDN message from ASP to the SGP. ASP will move to down state
          at the SGP.
       3. After Pending Timer T(r) Expires. Send MTP-Transfer Primitive with
          N/w Appearance A containing Protocol Data with DPC X.
       3. Check A: Send failure should be received at the NIF and DATA message
          should not be sent to ASP. Some implementations may also indicate a
          Pause Ind at the SGP for the SPMC.
       Note: In some implementation there may be T(r) running on receiving
             ASPDN message for the last ASP and for that time AS will
             be in AS-Pending state. In that case let the timer T(r) expire
             before sending the MTP-Transfer primitive.



































    Anshoo Sharma, HSS                                              [Page 67]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Timer T(r) Cancellation"

       + TEST NUMBER : 5.3

       + TITLE :  AS management

       + SUBTITLE : Timer T(r) Cancellation

       + PURPOSE: To check that after last ASP becomes inactive then SGP
         buffers the messages from NIF for time T(r) and if ASPAC comes before
         its expiry then all buffered messages are sent to the ASP.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is active. Arrange the data in ASP such that ASPIA and
         ASPAC messages are sent from ASP1 to SGP. The Traffic Mode
         field in ASPIA and ASPAC can be any valid value and Routing Context
         should be P. Let the value of Timer T(r) be z sec.

       EXPECTED MESSAGE SEQUENCE :
         ASP                              SGP               SM + NIF
                                          ASP is active
       ASPIA    ----------------->
       (ASP1)                             Status Ind  -------->

                <----------------         ASP-Inactive-Ack

                <----------------         NTFY(AS-Pending)
                       |                  Timer T(r) is started
                       |
                       | Time < z sec.         <-------   MTP-Transfer
                       |                  Message will be buffered
                       |                       <-------   MTP-Transfer
                       |                  Message will be buffered
       ASPAC     --------------->
       (ASP1)                             Status Ind  -------->
                 <---------------         ASP-Active-Ack

                 <---------------         NTFY(AS-Active)

                 <---------------         DATA

                 <---------------         DATA

    Anshoo Sharma, HSS                                              [Page 68]

    Internet Draft         M3UA Conformance Test Plan               May 2003




       TEST DESCRIPTION:
       1. Send ASPIA Message from ASP1 to SGP. ASP will become Inactive at the
          SGP.
       2. Send MTP-Transfer Primitive from NIF with N/w Appearance A
          containing Protocol Data to be sent to DPC X.
       3. Check A: DATA message will not be received at ASP.
       4. Send ASPAC message containing N/w Appearance A before Timer T(r)
          expires.
       5. Check B: DATA messages buffered at the SGP will be sent to the AS.
       Note: This case is implementation specific. In some implementation
             there may not be any Timer T(r) running. In that case there is no
             need to run this test case.



































    Anshoo Sharma, HSS                                              [Page 69]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Timer T(r) Expiry"

       + TEST NUMBER : 5.4

       + TITLE :  AS management

       + SUBTITLE : Timer T(r) Expiry

       + PURPOSE: To check that if timer T(r) expires without receiving an
         ASPAC Message then the AS moves into Inactive State.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is active. Arrange data in ASP such that ASPIA and ASPAC
         messages are sent from ASP to SGP. The Type field in ASPIA and ASPAC
         can be any valid value and Routing Context should be P.
         Let the value of Timer T(r) is z sec.

        EXPECTED MESSAGE SEQUENCE :
         ASP                              SGP               SM + NIF
                                          ASP is active

                                             <-------   MTP-Transfer

                 <---------------         DATA

                                            <-------   MTP-Transfer

                 <---------------         DATA

       ASPIA     ---------------->
                                          Status Ind  -------->

                 <---------------         ASP-Inactive-Ack

                 <---------------         NTFY(AS-Pending)
                        |
                        |Time = z sec     <-------   MTP-Transfer
                        |
                        |                 <-------   MTP-Transfer
                        |                  ( Data is buffered and after expiry
                        |                    of timer it will be discarded)
                       ---     Status Ind ---------> (AS Inactive)

    Anshoo Sharma, HSS                                              [Page 70]

    Internet Draft         M3UA Conformance Test Plan               May 2003



                                            <--------    MTP-Transfer

                                          Send Failure ------->


       TEST DESCRIPTION:
       1. Send MTP-Transfer Primitive with N/w appearance A containing
          protocol Data to send to DPC X. Message will be sent to ASP.
       2. Send ASPIA message from ASP1 to the SGP. ASP will become Inactive at
          SGP. AS will be in AS-Pending state at the SGP.
       3. Check A: Timer T(r) is started.
       4. Send MTP Transfer Primitive with Network Appearance A containing
          protocol data to send DPC X. Message will be buffered at SGP.
       5. Timer T(r) is expired, and the message buffered is discarded, also
          after the expiry of T(r) AS will move to the AS-INACTIVE state.
       6. Send MTP-Transfer Primitive from NIF with N/w appearance A
          containing protocol Data to send to DPC X. SGP will send
          Send Failure.
       7. Repeat the above test case if ASPDN message is sent instead of
          ASPIA message.

       Note: This case is implementation specific. In some implementation
             there may not be any Timer T(r) running. In that case send
             failure is notified by M3UA on receiving MTP-Transfer request.






















    Anshoo Sharma, HSS                                              [Page 71]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASPAC message with more than one Routing Context"

       + TEST NUMBER : 5.5

       + TITLE : AS Management

       + SUBTITLE : ASPAC message with more than one Routing Context

       + PURPOSE: To check that if ASPAC message is received with more than
         one Routing Context then status of ASP is active in all the AS for
         which the RC was present in the Message and are served by this ASP.

       + TEST CONFIGURATION: B

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is belonging to two AS, AS1 and AS2. AS1 is handling
         traffic for routing context P and AS2 is handling traffic for routing
         context Q. ASP1 is in Inactive state i.e. AS1 and AS2 are in the
         AS-Inactive state at SGP. Also arrange the data in ASP1 such that
         ASPAC message is sent from ASP1 to SGP containing Routing Context P
         and Q. Fill any valid value in the Type parameter which
         is same as configured for AS1 and AS2 at the SGP and it should be
         same for both AS.

       EXPECTED MESSAGE SEQUENCE :
        ASP                              SGP              SM + NIF
                                        AS1 & AS2 is Inactive

       ASPAC     ------------------>
       Routing Context P and Q
                                         Status Ind --------->

                 <-----------------     ASP-Active-Ack

                 <-----------------     NTFY (AS1 and AS2 Active)

                                          <--------     MTP-Transfer
                                                        for Routing Context P
                 <-----------------     DATA

                                          <--------     MTP-Transfer
                                                        for Routing Context Q
                 <-----------------     DATA


    Anshoo Sharma, HSS                                              [Page 72]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       TEST DESCRIPTION:
       1. Send ASPAC Message with routing contexts P and Q to the SGP.
       2. Check A: ASP-Active-Ack and NTFY message with status AS-Active
          should be received at ASP with routing contexts P and Q.
       3. Check B: Check that state of ASP is active in AS1 and AS2. This can
          be checked by sending DATA messages containing protocol DATA for
          both Routing Contexts.











































    Anshoo Sharma, HSS                                              [Page 73]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASPAC message without any Routing Context"

       + TEST NUMBER : 5.6

       + TITLE : AS management

       + SUBTITLE : ASPAC message without any Routing Context

       + PURPOSE: To check that if ASPAC message is received without any
         Routing Context then status of ASP is active in all the AS
         which this ASP serves.

       + TEST CONFIGURATION: B

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is Inactive in both the AS at the SGP. Arrange data in ASP
         such that ASPAC messages is sent to the SGP from ASP.
         Don't fill any routing context parameter in ASPAC.

       EXPECTED MESSAGE SEQUENCE :
        ASP                              SGP              SM + NIF
                                        AS1 & AS2 is Inactive
       ASPAC     ------------------>
       No Routing Context               Status Ind --------->

                 <-----------------     ASP-Active-Ack

                 <-----------------     NTFY (AS Active)


       TEST DESCRIPTION:
       1. Send ASPAC Message without any routing to the SGP.
       2. Check A: ASP-Active-Ack and NTFY message with status AS-Active
          should be received at ASP.
       3. Check B: Check that state of ASP is active using configuration Data
          present at the SGP.
       Note: If there is no Configuration Data present at the SGP and the ASP
             has not dynamically registered for any Routing Context, then the
             ASP Active Message is silently discarded at the SGP. No Ack or
             NTFY as shown above is sent in that case.





    Anshoo Sharma, HSS                                              [Page 74]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASPIA message with more than one Routing Context"

       + TEST NUMBER : 5.7

       + TITLE :  AS management

       + SUBTITLE : ASPIA message with more than one Routing Context

       + PURPOSE: To check that if ASPIA message is received with more than
         one Routing Context then status of ASP is Inactive in all the AS to
         which this ASP belongs.

       + TEST CONFIGURATION: B

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP1 is belonging to two AS, AS1 and AS2. AS1 is handling
         traffic for routing context P and AS2 is handling traffic for routing
         context Q. ASP1 is in Active state i.e. AS1 and AS2 are in the
         AS-Active state at SGP. Also arrange the data in ASP1 such that ASPIA
         message is sent from ASP1 to SGP containing Routing Context P and Q.
         Fill any valid value in the Type parameter which is same as
         configured for AS1 and AS2 in SGP and it should be same for both AS.

       EXPECTED MESSAGE SEQUENCE :
        ASP                        SGP                  SM + NIF
                                   AS1 & AS2 is Active

       ASPIA     ------------------>
       Routing Context P and Q          Status Ind   -------->

                 <-----------------     ASP-Inactive-Ack

                 <-----------------     NTFY(AS-Pending)
                         |
                         |
                        ___             [T(r) Expires]

                                        Status Ind -------->(AS1,AS2 Inactive)

                                          <--------     MTP-Transfer
                                                        Routing Context P
                                        Send Failure -------->



    Anshoo Sharma, HSS                                              [Page 75]

    Internet Draft         M3UA Conformance Test Plan               May 2003


                                          <--------     MTP-Transfer
                                                        Routing Context Q
                                        Send Failure -------->


       TEST DESCRIPTION:
       1. Send ASPIA Message containing routing contexts P and Q from ASP1 to
          the SGP.
       2. Check A: ASP-Inactive-Ack and NTFY (AS-Pending) message should be
          received at the ASP with routing contexts P and Q.
       3. Check B: NTFY message is received on stream 0.
       4. Check C: Check that state of ASP is Inactive in AS1 and AS2. This
          can be checked by sending MTP-Transfer primitive from NIF at SGP
          containing protocol DATA for both Routing Contexts.

       Note: Routing Context is an optional parameter in the NTFY message.
             Some implementation may not send this parameter in the NTFY
             message. In that case two NTFY message with status
             AS-Inactive/AS-Pending will be received one for AS1 and other for
             AS2.




























    Anshoo Sharma, HSS                                              [Page 76]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Notify Message with AS Status is sent only for AS State change"

       + TEST NUMBER : 5.8

       + TITLE :  AS management

       + SUBTITLE : Notify Message with AS Status is sent only for AS State
         change

       + PURPOSE: To check that NTFY message with AS state change is not sent
         if there is no change in the state of the AS.

       + TEST CONFIGURATION: C

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. Both ASP are having SCTP association with SGP and are active in
         the AS. Arrange data in ASP such that ASPUP, ASPAC, ASPIA and ASPDN
         messages are sent to the SGP from ASP1. Fill the routing
         contexts P and Type parameter any valid value which is same
         configured for AS at the SGP.

        EXPECTED MESSAGE SEQUENCE :
        AS                               SGP                        SM
                                       Both ASPs are active

       ASPIA(ASP1)  ----------------->

                    <----------------    ASP-Inactive-Ack

       Check: NTFY(AS-Pending) is not received

                                           Status Ind --------->

       ASPDN(ASP1)  ----------------->

                    <----------------    ASP-Down-Ack

        Check: NTFY is not received

                                           Status Ind --------->

       ASPUP(ASP1)  ----------------->

                    <----------------    ASP-Up-Ack

    Anshoo Sharma, HSS                                              [Page 77]

    Internet Draft         M3UA Conformance Test Plan               May 2003



        Check: NTFY(AS-Inactive) is not received

                                           Status Ind --------->

       ASPAC(ASP1)  ----------------->

                    <----------------    ASP-Active-Ack

        Check: NTFY(AS-Active) is not received

                                           Status Ind --------->

       TEST DESCRIPTION:
       1. Send ASPIA message for ASP1 from ASP to the SGP with routing context
          P and Type parameter any valid value.
       2. Check A: ASP-Inactive-Ack messages is received at the AS and
          NTFY message with status AS-Inactive is not received.
       3. Repeat the above test case for other messages like ASPDN, ASPUP and
          ASPAC for ASP1 from AS to SGP.




























    Anshoo Sharma, HSS                                              [Page 78]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Notify Message with AS Status is sent only for AS State change"

       + TEST NUMBER : 5.9

       + TITLE :  AS management

       + SUBTITLE : Notify Message with AS Status Change

       + PURPOSE: To check that NTFY message with AS state change is sent
         if AS state has changed.

       + TEST CONFIGURATION: C

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. Both ASP are having SCTP association with SGP and are active in
         the AS. Arrange data in ASP such that ASPUP, ASPAC, ASPIA and ASPDN
         messages are sent to the SGP from ASP1 and ASP2. Fill the
         routing contexts P and Type parameter any valid value which is same
         configured for AS at the SGP.

        EXPECTED MESSAGE SEQUENCE :
        AS                               SGP                        SM
                                       Both ASP are active

       ASPIA(ASP1)  ----------------->

                    <----------------    ASP-Inactive-Ack

                                           Status Ind --------->
       ASPIA(ASP2)  ----------------->

                    <----------------    ASP-Inactive-Ack

                    <----------------    NTFY(AS-Pending)

                                           Status Ind --------->
       ASPDN(ASP1)  ----------------->

                    <----------------    ASP-Down-Ack
                                           Status Ind --------->
       ASPDN(ASP2)  ----------------->

                    <----------------    ASP-Down-Ack


    Anshoo Sharma, HSS                                              [Page 79]

    Internet Draft         M3UA Conformance Test Plan               May 2003


                                           Status Ind --------->

                                         [T(r) Expiry]
                                         Status Ind   ---------> (AS Down)

        ASPUP(ASP1)  ----------------->


                    <----------------    ASP-Up-Ack

                    <----------------    NTFY( AS-Inactive)

                                           Status Ind --------->
       ASPUP(ASP2)  ----------------->

                    <----------------    ASP-Up-Ack

                                           Status Ind --------->

       ASPAC(ASP1)  ----------------->

                    <----------------    ASP-Active-Ack

                    <----------------    NTFY( AS-Active)

                                           Status Ind --------->
       ASPAC(ASP2)  ----------------->

                    <----------------    ASP-Active-Ack

                                           Status Ind --------->

       TEST DESCRIPTION:
       1. Send ASPIA message from ASP1 and ASP2 to the SGP with routing
          context P and Type parameter any valid value.
       2. Check A: ASP-Inactive-Ack and NTFY message with status AS-Pending is
          received at the AS.
       3. Check B: NTFY messages are received on stream 0.
       4. Repeat the above test case for other messages like ASPDN, ASPUP and
          ASPAC for ASP1 from ASP to SGP.


       Note: NTFY message with AS status may come before the NTFY message with
             ASP status.

    Anshoo Sharma, HSS                                              [Page 80]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Invalid routing context parameter in ASPAC message"

       + TEST NUMBER : 5.10

       + TITLE : Invalid Message Handling

       + SUBTITLE : Invalid routing context Parameter in ASPAC message

       + PURPOSE: To check that if ASPAC message with Invalid routing context
         parameter is received then ASPAC message is discarded and Error
         message is sent to the ASP.

       + TEST CONFIGURATION:    A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and AS is in AS-Inactive state i.e. ASP1 is Inactive. Arrange the
         data in AS such that ASPAC message with Routing Context P is sent
         to the SGP.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP                  NIF
                                     AS is Inactive

          ASPAC    ---------------->
        Routing context Q

                   <---------------    Error
                                       (Invalid Routing Context)

          ASPAC    ---------------->
        Routing context P and Q

                  <---------------    Error
                                       (Invalid Routing Context)

                  <---------------    ASP-Active-Ack with routing context P

                  <---------------    NTFY (AS-Active)

                                      Status Ind --------->

       TEST DESCRIPTION:
       1. Send ASPAC message with routing context Q.
       2. Check A: SGP will send an Error message with Invalid Routing Context

    Anshoo Sharma, HSS                                              [Page 81]

    Internet Draft         M3UA Conformance Test Plan               May 2003


          parameter.
       3. Send ASPAC message with routing context P and Q.
       4. Check B: ASP-Active-Ack and NTFY (AS-Active) message will be sent
          for routing context P, and ERROR would be sent for
          Routing Context Q.
       Note: Routing context is an optional parameter in ASPAC message. In
             some implementation this field may not come in ASPAC message. In
             those implementation this test case need not be run.










































    Anshoo Sharma, HSS                                              [Page 82]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Invalid routing context parameter in ASPIA message"

       + TEST NUMBER : 5.11

       + TITLE : Invalid Message Handling

       + SUBTITLE : Invalid routing context Parameter in ASPIA message

       + PURPOSE: To check that if ASPIA message with Invalid routing context
         parameter is received then ASPIA message is discarded.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and AS is in AS-Active state i.e. ASP1 is active. Arrange the
         data in AS such that ASPIA message with Routing Context Q is sent to
         the SGP.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP                  NIF
                                     ASP is Active

          ASPIA    ---------------->
        Routing context Q

                   <---------------    Error
                                       (Invalid Routing Context)

          ASPIA    ---------------->
        Routing context P and Q

                  <---------------    Error
                                       (Invalid Routing Context)

                  <---------------    ASP-Inactive-Ack with routing context P

                  <---------------    NTFY(AS-Pending)

                                      Status Ind --------->

       TEST DESCRIPTION:
       1. Send ASPIA message with Routing Context Q.
       2. Check A: SGP will send an Error message with Invalid Routing Context
          parameter.

    Anshoo Sharma, HSS                                              [Page 83]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       3. Send ASPIA message with routing context P and Q.
       4. Check B: ASP-Inactive-Ack and NTFY (AS-Pending) message will be sent
          with status AS-Pending for routing context P and ERROR would be sent
          for Routing Context Q.


       Note: Routing context is an optional parameter in ASPIA message. In
             some implementation this field may not come in ASPIA message. In
             those implementation this test case need not be run.









































    Anshoo Sharma, HSS                                              [Page 84]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASPAC message in ASP-Active state"

       + TEST NUMBER : 5.12

       + TITLE : Duplicate Message Handling

       + SUBTITLE : ASPAC message in ASP-Active  state

       + PURPOSE: To check that if ASPAC message is received in ASP-Active
         state then ASP-Active-Ack message is sent to the AS.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and AS is in AS-Inactive state i.e. ASP1 is Inactive. Arrange the
         data in ASP such that ASPAC message with correct Type (As defined at
         SGP for the AS) and routing context P is sent to the SGP.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP             SM + NIF
                                     AS is Inactive

        ASPAC      ---------------->
                                     Status Ind ------->

                   <---------------   ASP-Active-Ack

                   <---------------    NTFY (AS-Active)

        ASPAC      ---------------->

                   <---------------   ASP-Active-Ack

        DATA        ---------------->
                                      MTP-Transfer Ind ------->

       TEST DESCRIPTION:
       1. Send ASPAC message to the SGP in ASP-Inactive state. ASP-Active-Ack
          and NTFY (AS-Active) message will come from the SGP.
       2. Send ASPAC message again from the AS for the same ASP.
       3. Check A: ASP-Active-Ack message should be received at ASP.
       4. Check B: State of ASP at SGP is not disturbed i.e. ASP remains in
          the Active state. Send DATA message for the ASP and SGP should send
          MTP-Transfer indication to the NIF.

    Anshoo Sharma, HSS                                              [Page 85]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASPIA message in ASP-Inactive state"

       + TEST NUMBER : 5.13

       + TITLE : Duplicate Message Handling

       + SUBTITLE : ASPIA message in ASP-Inactive state

       + PURPOSE: To check that if ASPIA message is received in ASP-Inactive
         state then ASP-Inactive-Ack message is sent to the ASP.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and AS is in AS-Active state i.e. AS1 is active. Arrange the data
         in AS such that ASPIA message with correct Type(Type is same as
         defined at SGP for the AS) and Routing Context P is sent to the SGP.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP             SM + NIF
                                     AS is Active
        ASPIA      ---------------->
                                     Status Ind ------->

                   <---------------   ASP-Inactive-Ack

                   <---------------   NTFY(AS-Pending)

        ASPIA      ---------------->

                   <---------------   ASP-Inactive-Ack

        ASPAC      ---------------->
                                     Status Ind ------->

                   <---------------   ASP-Active-Ack

                   <---------------   NTFY(AS-Active)

       TEST DESCRIPTION:
       1. Send ASPIA message to the SGP in ASP-Active state. ASP-Inactive-Ack
          and  NTFY (AS-Pending) messages will come from the SGP.
       2. Send ASPIA message again from the AS for the same ASP.
       3. Check A: ASP-Inactive-Ack message will come from SGP.

    Anshoo Sharma, HSS                                              [Page 86]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       4. Check B: State of ASP at SGP is not disturbed i.e. ASP remains in
          the Inactive state. Send ASPAC message with correct Type(Type is
          same as defined at SGP for the AS) for the ASP1 and SGP should
          respond with ASP-Active-Ack message.














































    Anshoo Sharma, HSS                                              [Page 87]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Loadshare Mode of Traffic handling in ASPAC message"

       + TEST NUMBER : 5.14

       + TITLE : Mode of Traffic Handling by ASP in ASPAC message

       + SUBTITLE : Loadshare mode of Traffic Handling

       + PURPOSE: To check that if an ASPAC message is received with Type
         field containing Loadshare mode then traffic is distributed between
         this ASP and all other active ASPs.

       + TEST CONFIGURATION: C

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1 and ASP2. ASP1 is active. Arrange the DATA in AS such that it
         sends ASPAC message for ASP2 with Loadshare mode and routing context
         P. Also mode of traffic handling for AS at SGP is Loadshare.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP                  SM + NIF
                                     ASP1 is Active

        ASPAC(ASP2) ---------------->
        Loadshare Mode                 Status Ind ------->

                    <---------------   ASP-Active-Ack

                                           <-----------  MTP-Transfer Req
                                                         DPC X & CIC S
        To ASP1    <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         DPC X & CIC T
        To ASP2    <---------------   DATA

        ASPIA(ASP1) ---------------->
                                        Status Ind ------->

                   <---------------   ASP-Inactive-Ack

                                           <-----------  MTP-Transfer Req
                                                         DPC X & CIC S


    Anshoo Sharma, HSS                                              [Page 88]

    Internet Draft         M3UA Conformance Test Plan               May 2003


        To ASP2    <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         DPC X & CIC T
        To ASP2    <---------------   DATA

       TEST DESCRIPTION:
       1. Send ASPAC message with Loadshare mode in type field and Routing
          context P from AS to SGP for ASP2.
       2. Check A: ASP-Active-Ack message should be received at AS.
       3. Check B: Traffic should also go ASP2 which has sent the ASPAC. Check
          this by sending MTP-Transfer Req from NIF at SGP containing
          different CIC values assuming traffic is load shared based on the
          CIC.
       4. Send ASPIA message from ASP1 to the SGP.
       5. ASP1 will receive ASP-Inactive-Ack from SGP.
       6. Check that all the traffic is now going to ASP2.

       Note: An implementation can choose to do the loadsharing on the basis
             of CIC or SLS.




























    Anshoo Sharma, HSS                                              [Page 89]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Loadshare Mode of Traffic handling by ASP in ASPIA message"

       + TEST NUMBER : 5.15

       + TITLE : Mode of Traffic Handling

       + SUBTITLE : Loadshare mode of Traffic Handling by ASP in ASPIA
         message.

       + PURPOSE: To check that if an ASPIA message is received with Type
         field containing Loadshare mode and no other active ASPs are
         available then a NTFY (Insufficient ASPs) is sent to all
         inactive ASPs.

       + TEST CONFIGURATION: C

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1, ASP2 and ASP3. ASP1 and ASP2 are active and ASP3 is Inactive
         and all are in Loadshare mode of traffic handling. Arrange the DATA
         in ASP2 such that it sends ASPIA message for ASP2 and routing
         context P. Also mode of traffic handling for AS at SGP is Loadshare.
         AS is configured at SGP such that a minimum of 2 ASPs are required
         for handling the traffic for routing context P.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP                  SM + NIF
                                     ASP1 & ASP2 are Active

        ASPIA(ASP2) ---------------->
        Loadshare Mode

        To ASP3    <---------------   ASP-Inactive-Ack

                                      Status Ind ------->

        To ASP3    <---------------   NTFY (Insufficient ASPs)
                                      with routing context P

                                                <------- Transfer Req
        To ASP1    <---------------   DATA


       TEST DESCRIPTION:


    Anshoo Sharma, HSS                                              [Page 90]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       1. Send ASPIA message with Loadshare mode in type field and Routing
          context P from ASP2 to SGP.
       2. Check A: ASP-Inactive-Ack message should be received at ASP2.
       4. Check B: NTFY (Insufficient ASPs) should be received at ASP2 and
          ASP3.
       4. Check C: All the traffic is now going to ASP1.












































    Anshoo Sharma, HSS                                              [Page 91]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Over-ride Mode of Traffic handling"

       + TEST NUMBER : 5.16

       + TITLE : Mode of Traffic Handling by ASP in ASPAC message

       + SUBTITLE : To check if ASP receives data during Over-ride mode of
         Traffic Handling changeover.

       + PURPOSE: To check that if an ASP receives data during the changeover
         of ASPs in Override mode of traffic handling.

       + TEST CONFIGURATION: C

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP1 in AS is active. Arrange the data in ASP such that it sends
         ASPAC message with over-ride mode and routing context P for ASP2
         and ASP1 receives the DATA before it receives NTFY message.
        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP                  SM + NIF
                                     ASP1 is Active
        ASPAC(ASP2) ---------------->
        Override Mode                    Status Ind ------->

        DATA        ---------------->   (Data is buffered and will
        (From ASP1)                     be passed on when ASP2
                                        becomes active.)

        To ASP2     <---------------   ASP-Active-Ack

        To ASP1     <---------------   NTFY(Alternate ASP-Active)

                                       DATA     ----------->
        DATA         ---------------->
        (From ASP2)                    DATA     ----------->
       TEST DESCRIPTION:
       1. Send ASPAC message with override mode in type field and Routing
          context P from AS to SGP for ASP2.
       2. Send DATA from ASP1 to SGP before receiving NTFY message.
       3. Check A: The data is buffered at SGP.
       4. ASP2 receives ASP-Active-Ack and ASP1 receives a NTFY message with
          status as Alternate ASP Active.
       5. Check B: The data buffered at SGP is passed further. And now it will
          receive data from ASP2.

    Anshoo Sharma, HSS                                              [Page 92]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Over-ride Mode of Traffic handling"

       + TEST NUMBER : 5.17

       + TITLE : Mode of Traffic Handling by ASP in ASPAC message

       + SUBTITLE : No NTFY message to the ASP whose status is not changed in
         Over-ride mode of Traffic Handling

       + PURPOSE: To check that if an ASPAC message is received with Type
         field containing over-ride mode then NTFY Alternate ASP Active is
         send to that ASP only whose traffic is going to be handled by the
         sending ASP. All traffic is sent to that ASP which sent ASPAC
         message.

       + TEST CONFIGURATION: D

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP1 and ASP2 are active and handling the traffic for routing
         context P and Q, ASP3 is Inactive. Now arrange Data at ASP3 for ASPAC
         with traffic handling mode as override for routing context P. Also
         the mode of traffic handling for all AS at SGP is also override mode.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP                  SM + NIF
                                     ASP1 and ASP2 are Active
                                             <-----------  MTP-Transfer Req
                                                         Routing Context P
        To ASP1     <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         Routing Context Q
        To ASP2    <---------------   DATA

        ASPAC(ASP3) ---------------->
        Routing Context P
        Override Mode                    Status Ind ------->

        To ASP3     <---------------   ASP-Active-Ack

        To ASP1     <---------------   NTFY(Alternate ASP-Active)

                                           <-----------  MTP-Transfer Req
                                                         Routing Context P

    Anshoo Sharma, HSS                                              [Page 93]

    Internet Draft         M3UA Conformance Test Plan               May 2003


        To ASP3     <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         Routing Context Q
        To ASP2    <---------------   DATA

       TEST DESCRIPTION:
       1. Send data with routing context as P and Q to ASP, ASP1 and ASP2 will
          receive the data respectively.
       2. Send ASPAC for ASP3 with routing context P and traffic handling mode
          as override.
       3. Check A: ASP3 will receive ASP Active Ack and NTFY message with
          status Alternate ASP-Active should be received by ASP1.
       3. Send data with routing context as P and Q to ASP, ASP3 and ASP2 will
          receive the data respectively.
       4. Check B: NTFY message with status Alternate ASP-Active is not
          received by ASP2.































    Anshoo Sharma, HSS                                              [Page 94]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Loadshare Mode of Traffic handling in ASPIA message"

       + TEST NUMBER : 5.18

       + TITLE : Mode of Traffic Handling by ASP in ASPIA message

       + SUBTITLE : Loadshare mode of Traffic Handling

       + PURPOSE: To check that if an ASPIA message is received with Type
         field containing Loadshare mode then all traffic is sent to other
         ASP.

       + TEST CONFIGURATION: C

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1 and ASP2. ASP1 and ASP2 in AS are active and are in Loadshare
         mode of traffic handling. Arrange the DATA in AS such that it sends
         ASPIA message with Loadshare mode and routing context P for ASP1.
         Also mode of traffic handling for AS at SGP is Loadshare.

        EXPECTED MESSAGE SEQUENCE :
        ASP                           SGP                  SM + NIF
                                   ASP1 & ASP2 are Active

        ASPIA(ASP2) ---------------->
        (Mode = Loadshare)                       Status Ind ------->

        To ASP2     <---------------   ASP-Inactive-Ack
                                           <-----------  MTP-Transfer Req
                                                         DPC X & CIC S
        To ASP1    <---------------   DATA
                                           <-----------  MTP-Transfer Req
                                                         DPC X & CIC T
        To ASP1    <---------------   DATA

       TEST DESCRIPTION:
       1. Send ASPIA message with Loadshare mode in type field and Routing
          context P from ASP1 to SGP.
       2. Check A: SGP should send ASP-Inactive-Ack message.
       3. Check B: All traffic should go to ASP1. Check this by sending
          MTP-Transfer Req from NIF at SGP with Protocol Data containing
          different SLS values.



    Anshoo Sharma, HSS                                              [Page 95]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Last ASP in a SPMC becomes Inactive"

       + TEST NUMBER : 5.19

       + TITLE : SPMC Management

       + SUBTITLE : Last ASP in a SPMC goes down

       + PURPOSE: To check that if last ASP in a SPMC becomes inactive then
         SGP gives NIF the MTP-Pause indication.


       + TEST CONFIGURATION: C

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1 and ASP2. ASP1 and ASP2 in AS are active. Arrange the DATA in
         ASP such that ASPIA message is sent from ASP to SGP for ASP1 and
         ASP2.

        EXPECTED MESSAGE SEQUENCE :
        AS                            SGP                  SM + NIF
                                   ASP1 & ASP2 are Active

        ASPIA(ASP1) ---------------->
                                        Status Ind ------->
        To ASP1     <---------------   ASP-Inactive-Ack



        ASPIA(ASP2) ---------------->
                                        Status Ind ------->

        To ASP2     <---------------   ASP-Inactive-Ack

        To ASP1     <---------------   NTFY(AS-Pending)
        To ASP2     <---------------   NTFY(AS-Pending)
                          |
                          |            [ T(r) Expires]
                         ---           Status Ind ------->  AS Inactive

                                       SPMC Status Ind -------->




    Anshoo Sharma, HSS                                              [Page 96]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       TEST DESCRIPTION:
       1. Send ASPIA and message for ASP1 and ASP2 from AS to SGP.
       2. ASP Inactive Ack and NTFY (AS-Pending) messages are received at AS.
       3. Check A: SGP should send MTP-Pause indication to the NIF when last
          ASP goes down.
       4. Repeat the above test case if SGP and ASP are having the same point
          code.











































    Anshoo Sharma, HSS                                              [Page 97]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Last ASP serving a specific DPC+SIO becomes Inactive "

       + TEST NUMBER : 5.20

       + TITLE : SPMC Management

       + SUBTITLE : Last ASP serving a specific DPC+SIO becomes Inactive

       + PURPOSE: To check that if last ASP which is serving a specific
         DPC + SIO goes down then SGP gives NIF the Status indication with
         user part unavailable.

       + TEST CONFIGURATION: E

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1, ASP2 and ASP3. All ASP are active. Arrange the DATA in AS1 and
         AS2 such that if ASPIA message are sent from ASP to SGP for ASP1 and
         ASP2.

        EXPECTED MESSAGE SEQUENCE :
        AS                            SGP                  SM + NIF
                                   ASP1 & ASP2 are Active

        ASPIA(ASP1) ---------------->
                                        Status Ind ------->
        To ASP1     <---------------   ASP-Inactive-Ack

        ASPIA(ASP2) ---------------->

                                        Status Ind ------->

        To ASP2     <---------------   ASP-Inactive-Ack

        To ASP1     <---------------   NTFY(AS-Pending)
        and ASP2
                                          Status Ind -------->
                                      (user part unavailable)
       TEST DESCRIPTION:
       1. Send ASPIA and ASPDN messages for ASP1 and ASP2 from AS to SGP.
       2. Check A: SGP should send Status indication to the NIF when last ASP
          goes down.
       3. Repeat the above test case if ASP2 goes down.



    Anshoo Sharma, HSS                                              [Page 98]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Broadcast Mode of Traffic Handling"

       + TEST NUMBER : 5.21

       + TITLE : Broadcast Mode of Traffic Handling

       + SUBTITLE : Broadcast mode of Traffic Handling

       + PURPOSE: To check that if the AS is in Broadcast Mode then the
         DATA is sent to all Active ASPs in the AS and Correlation ID
         is sent in DATA to all ASPs whenever a new ASP becomes Active.

       + TEST CONFIGURATION: C with AS in Broadcast Mode.

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1 and ASP2. ASP1 and ASP2 in AS are active and traffic handling
         mode for AS is Broadcast. Arrange the DATA in ASP1 and ASP2 such
         that it sends ASPIA and ASPAC message with Traffic Mode as
         Broadcast mode and for routing context P. Arrange DATA at SGP to
         send Transfer Request with Data for RC P.


        EXPECTED MESSAGE SEQUENCE :
        ASP1        ASP2                   SGP                  SM + NIF
                                   ASP1 & ASP2 are Active

                                           <-----------  MTP-Transfer Req
                                                         DPC X

         <--------------------------------------------   DATA
                     <--------------------------------   DATA


               ASPIA ---------------->
           (ASP2, Mode=Broadcast)

                                        Status Ind ------->

                     <---------------   ASP-Inactive-Ack


                                           <-----------  MTP-Transfer Req
                                                         DPC X


    Anshoo Sharma, HSS                                              [Page 99]

    Internet Draft         M3UA Conformance Test Plan               May 2003


         <--------------------------------------------   DATA

               ASPAC ---------------->
           (ASP2, Mode=Broadcast)

                                        Status Ind ------->

                     <---------------   ASP-Active-Ack

                                           <-----------  MTP-Transfer Req
                                                         DPC X

         <--------------------------------------------   DATA
                     <--------------------------------   DATA
         (Correlation ID Present in DATA)

       TEST DESCRIPTION:
       1. Send Transfer Request to SGP for DPC X and RC P.
       2. Check A: DATA should be sent form SGP to ASP1 and ASP2 with
          RC P.
       3. Send ASPIA from ASP2 to SGP for RC P.
       4. Check B: ASPIA-Ack should be sent from SGP to ASP2 for RC P
          and state of ASP2 at SGP should change to ASP-Inactive.
       5. Send Transfer Request to SGP for DPC X and RC P.
       6. Check C: DATA should be sent from SGP to ASP1 with RC P and
          no DATA should be sent to ASP2.
       7. Send ASPAC from ASP2 to SGP for RC P.
       8. Check D: ASPAC-Ack should be sent from SGP to ASP2 for RC P
          and state of ASP2 at SGP should change to ASP-Active.
       9. Send Transfer Request to SGP for DPC X and RC P.
       10.Check E: DATA should be sent form SGP to ASP1 and ASP2 with
          RC P.














    Anshoo Sharma, HSS                                              [Page 100]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       4.6 SCTP Connection Management

       Test Cases for SCTP Connection Management Procedures.

       "SCTP Connection Establishment"

       + TEST NUMBER : 6.1

       + TITLE :  SCTP Connection Management

       + SUBTITLE : SCTP Connection Establishment

       + PURPOSE: To check that on receiving Communication Up primitive from
         SCTP, SGP M3UA will send M-SCTP-Establish indication to the SM.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is not established between SGP
         and ASP1. Also arrange the data in AS such that SCTP association is
         established between ASP1 and SGP.

        EXPECTED MESSAGE SEQUENCE :
        ASP                                   SGP                   SM

        SCTP Establish request to SCTP
              SCTP association will be established by SCTP
                       SGP will receive Communication-Up primitive from SCTP

                                       M-SCTP-Establish Ind ------->

        ASPUP   ------------------>
                                        Status Ind --------->

                <-----------------    ASP-Up-Ack

                <-----------------    NTFY(AS-Inactive)

       TEST DESCRIPTION:
       1. Make an SCTP association between ASP1 and SGP. SGP will receive
          Communication Up primitive from SCTP.
       2. Check A:SM receives M-SCTP-Establish indication.
       3. Send ASPUP message from AS to SG
       4. Check B: ASP-Up-Ack and NTFY message with status ASP-Inactive should
          be received.

    Anshoo Sharma, HSS                                              [Page 101]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "SCTP Connection Termination"

       + TEST NUMBER : 6.2

       + TITLE :  SCTP Connection Management

       + SUBTITLE : SCTP Connection Termination

       + PURPOSE: To check that on receiving SCTP-Communication Down
         indication primitive from SCTP, AS will send the M-SCTP Status
         primitive to the upper layer.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP1. Arrange for terminating the SCTP association between ASP1 and
         SGP.

        EXPECTED MESSAGE SEQUENCE :
        ASP                             SGP              SM + NIF
                                       ASP is Inactive

        ASPDN    ----------------->
                                        Status Ind --------->

                <-----------------    ASP-Down-Ack

                SCTP association is terminated

                    SGP will receive Communication-Down primitive from SCTP

                                       M-SCTP Status -------->

                                             <--------     MTP-Transfer

                                       Send Failure --------->
       TEST DESCRIPTION:
       1. Terminate the association between SGP and ASP.
       2. Check A: SCTP association will be down and on receiving
          Communication Down primitive from SCTP, M-SCTP Status indication
          will be received at SM.
       3. Check B: State of AS will be down at the SGP. Send MTP-Transfer
          primitive from the NIF to send some Protocol DATA. SGP will report
          send failure.

    Anshoo Sharma, HSS                                              [Page 102]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "SCTP Connection Restart"

       + TEST NUMBER : 6.3

       + TITLE :  SCTP Connection Management

       + SUBTITLE : SCTP Connection Restart

       + PURPOSE: To check that on receiving SCTP-Communication Restart
         Indication primitive from SCTP, ASP state at SGP will change to
         ASP Down.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is in active state. Also arrange such that the SCTP
         association is restarted between SGP and ASP.

        EXPECTED MESSAGE SEQUENCE :
        ASP                                SGP              SM + SU
                                          ASP is active

                ASP will receive Communication-Restart Primitive from SCTP

                                      M-SCTP Status -------->
                                      Status Ind    --------> ASP Down
                          |
                          |            [ T(r) Expires]
                         ---           Status Ind   -------->  AS Down

        ASPUP   ------------------>
                                      Status Ind    -------->

                <-----------------    ASP-Up-Ack

                <-----------------    NTFY(AS-Inactive)


       TEST DESCRIPTION:
       1. Invoke a Connection Restart on the association between SGP and ASP.
       2. Check A: SCTP association will be restarted and on receiving
          Communication Restart primitive from SCTP, M-SCTP Status indication
          and an ASP Status Ind will be received at the SM.
       3. Check B: State of ASP will change to Down and the SCTP association

    Anshoo Sharma, HSS                                              [Page 103]

    Internet Draft         M3UA Conformance Test Plan               May 2003


           between SGP and ASP still exists.
       4. Send an ASP-Up Message from the ASP side to the SGP.
       5. Check C: Active-Ack and NTFY would be received at the ASP and the
          state of the ASP at the SGP would change to ASP Inactive.














































    Anshoo Sharma, HSS                                              [Page 104]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "SCTP Connection Establishment"

       + TEST NUMBER : 6.4

       + TITLE :  SCTP Connection Management

       + SUBTITLE : SCTP Connection Establishment

       + PURPOSE: To check that on receiving M-SCTP-Establish primitive from
         SM, SGP initiates and establishes an SCTP association with the ASP.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is not established between SGP
         and ASP. Also arrange the data in SGP such that SM sends
         M-SCTP-Establish primitive to M3UA with the ASP id to which the
         connection is to be established.

       EXPECTED MESSAGE SEQUENCE :
        ASP                          SGP                SU + SM

                                     <---------     M-SCTP-Establish Request
             <------------------->
         SCTP association will be established by SCTP

                       SGP will receive Communication-Up primitive from SCTP

                                     M-SCTP-Establish Ind------->


       TEST DESCRIPTION:
       1. Send M-SCTP-Establish Request Primitive from the SM at SGP side to
          establish an SCTP association with the ASP.
       2. Check A: SCTP association will be established and M-SCTP-Establish
          indication will be received at the SM.











    Anshoo Sharma, HSS                                              [Page 105]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       4.7 Dynamic Routing Key (RK) Management

       Test Cases to test Dynamic RK Management Procedures.

       "Routing Key Registration"

       + TEST NUMBER : 7.1

       + TITLE :  Routing Key Registration

       + SUBTITLE : Registration of a new RK at SGP.

       + PURPOSE: To check that on receiving a Routing Key Registration
         Request for a new valid RK from an ASP, the SGP adds a RK and
         confirms the registration to the ASP.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. The ASP is in Inactive State or Active for atleast one RC at
         the SGP. The Routing Key RK1 is not configured at the SGP side.
         Arrange Data in ASP such that a Routing Key Registration request is
         sent from ASP to SGP on stream 0.

        EXPECTED MESSAGE SEQUENCE :
        ASP                             SGP             SM + NIF
                                       ASP is Inactive or Active for some RC.

                                             <-------- MTP-Transfer(For RK1)

                                       Send Failure --------->

        REG REQ(RK1) ----------------->

                                       RK REG Ind    -------->

                    <----------------- REG RSP (SUCCESS, RC1)

        ASPAC(RC1)   ---------------->
                                       Status Ind ------->

        To ASP      <----------------  ASP-Active-Ack

                    <----------------  NTFY(AS - Active)

    Anshoo Sharma, HSS                                              [Page 106]

    Internet Draft         M3UA Conformance Test Plan               May 2003



                                             <-------- MTP-Transfer(For RK1)
        To ASP      <---------------   DATA

       TEST DESCRIPTION:
       1. Select a valid RK1 (Eg. DPC = Z, SIO = 5) that is not already
          configured at the SGP. Send Data for RK1 Reg Request from SGP
          side.
       2. Check A: A Send Failure would be reported at the SGP Side.
       3. Send a valid Reg Req message from ASP to SGP Stack.
       4. Check B: A REG_IND would be received at the NIF(SM) and a
          REG_RSP message would be received at the ASP side with RC
          value and a Success Status for REG_REQ. Check that the AS
          to which ASP has been added has the same configurarion as
          requested in the Dynamic Registration.
       5. Send a ASPAC from ASP to SGP for RC1.
       6. Check C: A Status Ind for ASP Active for RC1 is received at
          the NIF(SM). Active-Ack with RC1 is received at ASP and Notify
          with State AS Active for RC1 is received at the SGP.
       7. Send Data for RK1 from SGP.
       8. Check D: Data Message is received at the ASP side.

       Note: In some implementations, when Data is sent for an
       unconfigured RK then instead of giving a Send Failure the Stack
       may route the Data to a Default AS .






















    Anshoo Sharma, HSS                                              [Page 107]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Routing Key DeRegistration"

       + TEST NUMBER : 7.2

       + TITLE :  Routing Key DeRegistration

       + SUBTITLE : DeRegistration from an existing RK at SGP.

       + PURPOSE: To check that on receiving a Routing Key Deregistration
         Request for a existing RK from an ASP, the SGP removes the
         requesting ASP from the List of ASPs serving that RK.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP
         and  ASP. The Routing Key RK1 is configured at the SGP side.
         The ASP is in Active State for RK1 at the SGP. Arrange Data in
         ASP such that a Routing Key DeRegistration request for RK1 is
         sent from ASP to SGP on stream 0.

        EXPECTED MESSAGE SEQUENCE :
        ASP                             SGP             SM + NIF
                                       ASP is Active in AS with RK1.

        ASPIA(RC1)     ---------------->
                                       Status Ind ------->

        To ASP        <----------------  ASP-Inactive-Ack

                      <----------------  NTFY(AS - Inactive)


        DEREG REQ(RC1) ----------------->

                                         RK DEREG Ind    -------->

                      <----------------- DEREG RSP (SUCCESS, RC1)

       TEST DESCRIPTION:
       1. Send an ASPIA message to the SGP from ASP with the RC as the
          RC with which RK1 is configured at the SGP.
       2. Check A: A Status Ind is received at the NIF. ASPIA-Ack is
          received at the ASP and NTFY with RC1 and Status AS-Inactive
          is received at the ASP.

    Anshoo Sharma, HSS                                              [Page 108]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       3. Send DeReg Req message with RC as RC1 from ASP to SGP.
       4. Check B: A DEREG_IND would be received at the NIF(SM) and a
          DEREG_RSP message would be received at the ASP side with RC
          value as RC1 and a Success Status for DEREG_REQ.














































    Anshoo Sharma, HSS                                              [Page 109]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Routing Key Registration"

       + TEST NUMBER : 7.3

       + TITLE :  Routing Key Registration

       + SUBTITLE : Registration in an existing AS at SGP.

       + PURPOSE: To check that on receiving a Routing Key Registration
         Request for a existing RK from an ASP, the SGP adds the
         requesting ASP to the List of ASPs serving that RK.

       + TEST CONFIGURATION: C

       + PRE-TEST CONDITIONS: SCTP association is established between SGP
         and  ASP1 and SGP and ASP2. The Routing Key RK1 is configured at
         the SGP side. The ASP1 is in Inactive State at the SGP and ASP2
         is actively handling Traffic for RK1 with RC value as RC1. The
         AS for RK1 is in Traffic Mode Override. Arrange Data in ASP such
         that a valid Routing Key Registration with Traffic Mode
         consistent with mode at SG request for RK1 is sent from ASP to
         SGP on stream 0.

        EXPECTED MESSAGE SEQUENCE :
        ASP                              SGP             SM + NIF
                                         ASP1 is Inactive

                                             <-------- MTP-Transfer(For RK1)
        To ASP2     <---------------   DATA

       From ASP1
        REG REQ(RK1) ----------------->

                                       RK REG Ind    -------->

                    <----------------- REG RSP (SUCCESS, RC1)

       From ASP1
        ASPAC(RC1)   ---------------->
                                       Status Ind ------->

        To ASP1     <----------------  ASP-Active-Ack

                    <----------------  NTFY(AS - Active)

    Anshoo Sharma, HSS                                              [Page 110]

    Internet Draft         M3UA Conformance Test Plan               May 2003



                                             <-------- MTP-Transfer(For RK1)
        To ASP1     <---------------   DATA


       TEST DESCRIPTION:
       1. Send a Data Message from SGP for RK1.
       2. Check A: Data would be received at ASP2.
       3. Send a valid Reg Req message for RK1 from ASP1 to SGP Stack.
       4. Check B: A REG_IND would be received at the NIF(SM) and a
          REG_RSP message would be received at the ASP1 with RC
          value as RC1 and a Success Status for REG_REQ.
       5. Send a ASPAC with Traffic Mode Override from ASP to SGP for RC1.
       6. Check C: A Status Ind for ASP Active for RC1 is received at
          the NIF(SM). Active-Ack with RC1 is received at ASP and Notify
          with State AS Active for RC1 is received at the SGP.
       7. Send a Data Message from SGP for RK1.
       8. Check D: Data would be received at ASP2.






























    Anshoo Sharma, HSS                                              [Page 111]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Routing Key Registration"

       + TEST NUMBER : 7.4

       + TITLE :  Routing Key Registration Failure

       + SUBTITLE : RK Registration Fails when ASP is Active for the RK.

       + PURPOSE: To check that on receiving a Routing Key Registration
         Request for an existing RK from an ASP which is already active
         for the RK, the Registration Fails and a Negative Response
         Message is sent to the ASP.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP
         and  ASP. The Routing Key RK1 is configured at the SGP side.
         The ASP is in Active State for RK1 at the SGP. Arrange Data in
         ASP such that a Routing Key Registration request for RK1 is sent
         from ASP to SGP on stream 0.

        EXPECTED MESSAGE SEQUENCE :
        ASP                              SGP             SM + NIF
                                         ASP is Active for RK1

        REG REQ(RK1) ----------------->


                    <----------------- REG RSP (FAILURE, RK not Provisioned)

                                             <-------- MTP-Transfer(For RK1)
        To ASP      <---------------   DATA


       TEST DESCRIPTION:
       1. Send a valid Reg Req message for RK1 from ASP to SGP Stack.
       2. Check B: REG_RSP message would be received at the ASP side with
          Failure Response.
       3. Send a Data Message from SGP for RK1.
       4. Check C: Data would be received at ASP.





    Anshoo Sharma, HSS                                              [Page 112]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Routing Key Deregistration"

       + TEST NUMBER : 7.5

       + TITLE :  Routing Key Deregistration Failure

       + SUBTITLE : RK Deregistration Fails when ASP is Active for the RK.

       + PURPOSE: To check that on receiving a Routing Key Deregistration
         Request for an existing RK from an ASP which is active
         for the RK, the Deregistration Fails and a Failure Response
         Message is sent to the ASP.

       + TEST CONFIGURATION: A

       + PRE-TEST CONDITIONS: SCTP association is established between SGP
         and  ASP. The Routing Key RK1 is configured at the SGP side.
         The ASP is in Active State for RK1 at the SGP. Arrange Data in
         ASP such that a Routing Key DeRegistration request for RK1 is sent
         from ASP to SGP on stream 0.

        EXPECTED MESSAGE SEQUENCE :
        ASP                              SGP             SM + NIF
                                         ASP is Active for RK1

        DEREG REQ(RC1) ----------------->

                      <----------------- DEREG RSP (FAILURE)
                                         Err Code: ASP Currently Active for RC


       TEST DESCRIPTION:
       1. Send a valid DeReg Req message for RK1 from ASP to SGP Stack.
       2. Check A: A DEREG_RSP would be received at the ASP side with
          Registration Status as Failed and Error Code as "ASP Currently
          Active for Routing Context".










    Anshoo Sharma, HSS                                              [Page 113]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Routing Key Registration"

       + TEST NUMBER : 7.6

       + TITLE :  Routing Key Registration

       + SUBTITLE : Unique RC Value for a given RK.

       + PURPOSE: To check that on receiving a Routing Key Registration
         Request from two different ASPs at the SGP Stack, the SGP
         allocates the same RC ID to both of these.

       + TEST CONFIGURATION: C

       + PRE-TEST CONDITIONS: SCTP association is established between SGP
         and  ASP1 and SGP and ASP2. Both ASP1 and ASP2 are in Inactive
         State at the SGP. Arrange Data in ASP1 and ASP2 such that a
         valid Routing Key Registration request for RK1 is sent from ASP
         to SGP on stream 0.

        EXPECTED MESSAGE SEQUENCE :
        ASP                              SGP             SM + NIF

                                       ASP1 and ASP2 are Inactive

       From ASP1
        REG REQ(RK1) ----------------->

                                       RK REG Ind    -------->

                    <----------------- REG RSP (SUCCESS, RC1)

       From ASP2
        REG REQ(RK1) ----------------->

                                       RK REG Ind    -------->

                    <----------------- REG RSP (SUCCESS, RC1)

       TEST DESCRIPTION:
       1. Send a valid Reg Req message for RK1 from ASP1 to SGP Stack.
       2. Check B: A REG_IND would be received at the NIF(SM) and a
          REG_RSP message would be received at the ASP1 with RC
          value as RC1 and a Success Status for REG_REQ.

    Anshoo Sharma, HSS                                              [Page 114]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       3. Send a valid Reg Req message for RK1 from ASP2 to SGP Stack.
       4. Check B: A REG_IND would be received at the NIF(SM) and a
          REG_RSP message would be received at the ASP2 with RC
          value again as RC1 and a Success Status for REG_REQ.














































    Anshoo Sharma, HSS                                              [Page 115]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       5  Test Cases for Testing M3UA at ASP
       Following Tests are to be carried out when the Implementation Under
       Test is ASP.

       5.1 MANAGEMENT
       Test Cases to test Management Procedures.  "Invalid Version Error"

       + TEST NUMBER : 1.1

       + TITLE :  Invalid Message Handling

       + SUBTITLE : Invalid Version Error

       + PURPOSE: To check that if any message with Invalid version is
         received at the ASP then ASP responds with ERROR message containing
         cause "Invalid Version" and diagnostic information filled with the
         version the SGP supports.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is Active. Also arrange the data in SGP such that DUNA
         message is sent on stream 0 with the version other than Version 1.0
         protocol to the ASP. N/w appearance parameters in the DUNA message
         should be A and affected DPC can be having any DPC.

        EXPECTED MESSAGE SEQUENCE :
        SGP                              ASP                        SM
                                       ASP is active
         DUNA      --------------->
        Version = 2

                   <--------------     ERROR
                                      Cause = Invalid Version
       TEST DESCRIPTION:
       1. Send DUNA message from SGP to ASP containing version 2 in the common
          header.
       2. Check A: ERROR message containing cause Invalid Version will be
          received at SGP.
       3. Check B: Diagnostic Parameter in ERROR is filled with version 1.
          However Diagnostic Information is optional so this may not be the
          case in all implementations.
       4. Repeat the above test cases for other messages from SGP to ASP like
          DAVA, SCON, DUPU, DRST, NTFY and DATA.

    Anshoo Sharma, HSS                                              [Page 116]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Unrecognized Message Type"

       + TEST NUMBER : 1.2

       + TITLE : Invalid Message Handling

       + SUBTITLE : Unrecognized Message Type

       + PURPOSE: To check that if a message with message type not defined is
         received at ASP, ASP responds with ERROR message containing cause
         "Invalid Message Type".

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is Active. Arrange the data in SGP such that a message
         with Message type not defined is sent to ASP. Let the other
         parameters in the message be like any other message.

        EXPECTED MESSAGE SEQUENCE :
        SGP                              ASP                        SM
                                       ASP is active
         Message   --------------->
        Message Type = 0408

                   <--------------     ERROR
                                      Cause = Invalid Message Type

         DATA      --------------->
         N/w Appearance A
                                        MTP-Transfer Ind --------->

       TEST DESCRIPTION:
       1. Send a message with message type 0408 or any other value which is
          not defined from SGP to ASP.
       2. Check A: ERROR message containing cause Invalid Message Type will be
          received at the SGP.
       3. Check B: State of ASP is not disturbed.








    Anshoo Sharma, HSS                                              [Page 117]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Invalid Network Appearance"

       + TEST NUMBER : 1.3

       + TITLE : Invalid Message Handling

       + SUBTITLE : Invalid Network Appearance

       + PURPOSE: To check that if a message with invalid network appearance
         i.e. ASP does not handle traffic for that network appearance then ASP
         responds with ERROR message containing cause "Invalid Network
         Appearance".

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is Active. Arrange the data in SGP such that DATA message
         with invalid value of Network Appearance is sent to ASP.

        EXPECTED MESSAGE SEQUENCE :
        SGP                              ASP                        SM
                                       ASP is active
         DATA      --------------->
        N/w appearance B

                   <--------------     ERROR
                                      Cause = Invalid Network Appearance

         DATA      --------------->
         N/w Appearance A
                                        MTP-Transfer Ind --------->

       TEST DESCRIPTION:
       1. Send DATA message to the ASP with network appearance which ASP
          doesn't handle.
       2. Check A: ASP will respond with ERROR message containing cause
          Invalid Network Appearance.
       3. Check B: State of ASP at AS is not disturbed.
       4. Repeat the above test case for other messages like DUNA, DAVA, DUPU,
          DRST and SCON.





    Anshoo Sharma, HSS                                              [Page 118]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Invalid Congestion Level in SCON message"

       + TEST NUMBER : 1.4

       + TITLE : Invalid Message Handling

       + SUBTITLE: Invalid congestion level in SCON message.

       + PURPOSE: To check that if SCON message with Invalid congestion level
         parameter is received then it is reported to the upper layer.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is active. Arrange the data in SGP such that SCON message
         with congestion level with value 4 or more is sent to the ASP. In
         N/w Appearance parameter in SCON message, fill value A and for
         affected DPC fill any value.

        EXPECTED MESSAGE SEQUENCE :
        SGP                              ASP                        SM
                                       ASP is active
         SCON      --------------->
        Congestion Level 4

                   <--------------     ERROR
                                      Cause = Invalid Parameter Value

         DATA      --------------->
         N/w Appearance A
                                        MTP-Transfer Ind --------->

       TEST DESCRIPTION:
       1. Send SCON message with congestion Level 4.
       2. Check A: ASP will send an ERROR Message with Invalid Parameter Value
          to SGP.
       3. Send a DATA Message to the ASP.
       5. Check B: Transfer Indication will be given to the SU at ASP and
          State of ASP is not disturbed.







    Anshoo Sharma, HSS                                              [Page 119]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Invalid Cause parameter in DUPU message"

       + TEST NUMBER : 1.5

       + TITLE : Invalid Message Handling

       + SUBTITLE : Invalid Cause parameter in DUPU message

       + PURPOSE: To check that if DUPU message with Invalid cause parameter
         is received then error will be reported to SM.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is Active. Arrange the data in SGP such that DUPU message
         with invalid value of cause parameter is sent to ASP. In N/w
         Appearance parameter fill value A and affected destination parameter
         fill any value. In the user parameter fill any valid value.

        EXPECTED MESSAGE SEQUENCE :
        SGP                              ASP                        SM
                                       ASP is active
         DUPU      --------------->
        Cause 03
                   <--------------     ERROR
                                       Cause = Invalid Parameter Value

         DATA      --------------->
         N/w Appearance A
                                        MTP-Transfer Ind --------->
       TEST DESCRIPTION:
       1. Send DUPU message from the SGP with cause value 03 or more to the
          ASP.
       2. Check A: ASP will send an ERROR to the SGP with Cause as
          Invalid Parameter Value.
       3. Check B: State of ASP is not disturbed.
       4. Repeat the above test case for invalid value of User parameter in
          DUPU message(11 or more).








    Anshoo Sharma, HSS                                              [Page 120]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Message length less than the length of mandatory Parameters"

       + TEST NUMBER : 1.6

       + TITLE : Invalid Message Handling

       + SUBTITLE : Message length less than length of mandatory parameters

       + PURPOSE: To check that if a message with value of length parameter
         less than length of mandatory parameters is received then message is
         discarded.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP, and ASP is Down. Arrange the data in SGP such that ASPUP-Ack
         message with length parameter filled with value less than the length
         of Common Message Header.

        EXPECTED MESSAGE SEQUENCE :
         SGP                              ASP                SM

                                         <---------       ASP-Up

                           <-----------    ASPUP

        ASP-Up-Ack         ------------>

                           <-----------    ERROR

                           <-----------    ASPUP


       TEST DESCRIPTION:
       1. Send ASP-Up primitive from SM to the M3UA at the ASP. ASPUP message
          will be sent to the SGP.
       2. Send ASP-Up-Ack message with length field less than the length of
          Common Message Header from the SGP.
       3. Check A: ASP will send an ERROR message to the SGP and discard the
          Message.
       4. Check B: ASPUP message will be sent again after ASPSM Timer Expiry.

       Note: Resending of ASPUP is implementation Dependent.


    Anshoo Sharma, HSS                                              [Page 121]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ERROR Handling"

       + TEST NUMBER : 1.7

       + TITLE : ERROR

       + SUBTITLE : Handling of Received Error

       + PURPOSE: To check that if an error is received then that is reported
         to the SM and no action is taken against that.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is in active state at the SGP. Arrange data in SGP such that
         ERROR with cause invalid version is sent to the ASP.

        EXPECTED MESSAGE SEQUENCE:
         SGP                               ASP                     SU
                                         ASP is active

        ERROR       --------------->
       Cause = invalid version              Error    -------->

       TEST DESCRIPTION:
       1. Send ERROR message with cause invalid version from SG to ASP.
       2. Check A: ASP should report the error to its SM.
       3. Check B: Further action at the SGP are implementation dependent.
       4. Repeat the test case for other cause values in ERROR message.


















    Anshoo Sharma, HSS                                              [Page 122]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Invalid Routing Context"

       + TEST NUMBER : 1.8

       + TITLE : Invalid Message Handling

       + SUBTITLE : Invalid Routing Context

       + PURPOSE: To check that if a message with Invalid Routing Context
         i.e. ASP does not handle traffic for that Routing Context then ASP
         responds with ERROR message containing cause "Invalid Routing
         Context".

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is Active for RC P and RC M is not configured on the ASP
         side. Arrange the data in SGP such that DATA message with invalid
         value of Routing Context(M) is sent to ASP.

        EXPECTED MESSAGE SEQUENCE :
        SGP                              ASP                        SM
                                       ASP is active
         DATA      --------------->
         N/w appearance A, RC = M

                   <--------------     ERROR
                                      Cause = Invalid Routing Context

         DATA      --------------->
         N/w Appearance A, RC = P
                                        MTP-Transfer Ind --------->

       TEST DESCRIPTION:
       1. Send DATA message to the ASP with routing context which ASP
          doesn't handle.
       2. Check A: ASP will respond with ERROR message containing cause
          Invalid Routing Context.
       3. Check B: State of ASP at ASP is not disturbed.
       4. Repeat the above test case for other messages like DUNA, DAVA, DUPU,
          DRST and SCON.

       Note: Routing Context is an optional field and some implementation
             might not be using it.

    Anshoo Sharma, HSS                                              [Page 123]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Error - Missing Parameter"

       + TEST NUMBER : 1.9

       + TITLE : ERROR

       + SUBTITLE : Error with cause Missing Parameter.

       + PURPOSE: To check that if any message without mandatory parameter is
         received at the ASP then ASP responds with ERROR message containing
         cause "Missing Parameter".

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is Active. Also arrange the data in SGP such that Payload
         Data Message is sent without Protocol Data parameter.

        EXPECTED MESSAGE SEQUENCE :
        SGP                          ASP                  SU
                                   ASP is Active

       From SGP
        DATA     ---------------->
        (Without Payload)

           (SGP) <---------------- ERROR
                                    (Missing Parameter)


       TEST DESCRIPTION:
       1. Send Payload Data message SGP to ASP without Protocol Data
          parameter.
       2. Check A: ERROR message is received at the SGP containing Error Code
          Missing Parameter.
       3. Repeat the above test cases for other messages from SGP to ASP like
          like REG RSP, DEREG RSP, SCON, DAVA, DUNA, DUPU, DRST and NOTIFY
          without mandatory parameter. In all these cases ERROR message will
          be received with the same Error Code.







    Anshoo Sharma, HSS                                              [Page 124]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       5.2 TRANSFER

       Test Cases to test TRANSFER Procedures.

       "Send and Receive of MTP-Transfer Primitive in AS Active State"

       + TEST NUMBER : 2.1

       + TITLE :  MTP-Transfer Primitive

       + SUBTITLE: Send and Receive of MTP-Transfer Primitive

       + PURPOSE: To check that on receiving MTP-Transfer primitive from SU,
         DATA message is sent to the SGP.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is in ASP-Active state. Also arrange the data in ASP such
         that SU send MTP-Transfer primitive to M3UA with N/w Appearance A.

        EXPECTED MESSAGE SEQUENCE :
           SGP                              ASP              SU
                                         ASP is Active
       a)
                                             <-----------  MTP-Transfer
                      <-------------       DATA            N/w appearance A
       b)

             DATA      -------------->
                                          MTP-Transfer --------->
       TEST DESCRIPTION:
       1. Send MTP-Transfer Request Primitive from the SU at ASP to send
          Protocol Data to the SGP.
       2. Check A: DATA message is received at ASP containing the data passed
          by the SU and the Network Appearance.
       3. Send DATA message from SGP containing Protocol Data and N/w
          Appearance A to the ASP.
       4. Check B: MTP-Transfer primitive is received at SU with the Protocol
          Data and N/w Appearance.
       5. Repeat the test step 3 if DATA message is sent without N/w
          appearance parameter. Response should be same as in 4.
       Note: In some implementation, N/w appearance parameter may not be
             there in the DATA message sent from ASP to SGP.

    Anshoo Sharma, HSS                                              [Page 125]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Stream Selection "

       + TEST NUMBER : 2.2

       + TITLE : Stream Selection

       + SUBTITLE : Stream Selection

       + PURPOSE: To check that all the messages for the same call are sent
         on the same SCTP stream.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP with two or more streams. ASP is active. Also arrange the data in
         ASP such that SU sends three or more MTP-Transfer Request
         primitive to M3UA containing the same CIC value and N/w Appearance A.

        EXPECTED MESSAGE SEQUENCE :
           SGP                               ASP             SU
                                            AS is active
                                              <---------   MTP-Transfer
       Check Stream id  <-------------      DATA           Data with CIC X

                                              <---------   MTP-Transfer
       Check Stream id  <-------------      DATA           Data with CIC X

                                              <---------   MTP-Transfer
       Check Stream id  <-------------      DATA           Data with CIC X

       TEST DESCRIPTION:
       1. Send three or more MTP-Transfer Request Primitive from the SU at SGP
          side to send Protocol Data to the ASP. In the Protocol data CIC
          values should be same in all MTP-Transfer Request primitive.
          It is assumed that load sharing across the streams is CIC based.
       2. Check A: DATA messages are sent to the SGP containing the same
          Stream Sequence number.
       3. Repeat the above test with same SLS value in Protocol Data in all
          MTP-Transfer Request primitives assuming load sharing across the
          streams is SLS based.
       4. Repeat the above test case with different CIC values and different
          SLS values. DATA messages should be sent on different streams.
       Note: How the messages will be distributed on different streams based
             on CIC and SLS is implementation dependent.

    Anshoo Sharma, HSS                                              [Page 126]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Routing among SGPs within an SG"

       + TEST NUMBER : 2.3

       + TITLE : Data Routing from the ASP among SGPs within an SG.

       + SUBTITLE : Data Routing from ASP when SG Mode is Loadshare.

       + PURPOSE: To check that the Data Message from the ASP is routed
         according to the mode of the SG.

       + TEST CONFIGURATION: J

       + PRE-TEST CONDITIONS: SCTP association is established between SGP1 and
         ASP and SGP2 and ASP. ASP is Active for RC P in SGP1 and is down in
         SGP2. Also arrange the data in ASP such that SU sends a MTP-Transfer
         Indication primitive to M3UA containing the RC value P and
         N/w Appearance A and CIC values S and T. Also arrange Data at SGP2 to
         send ASPUP-Ack and ASPAC-Ack for RC = P.

        EXPECTED MESSAGE SEQUENCE :
           SGP                               ASP             SU

        ASP is Active in SGP1 and
        ASP is Down in SGP2.

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC S
        To SGP1     <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC T
        To SGP1     <---------------   DATA

        To SGP2     <----------------  ASPUP

        ASPUP-Ack    --------------->
                                       Status Ind ------->

        To SGP2     <----------------  ASPAC (RC = P)

        ASPAC-Ack    --------------->
                                       Status Ind ------->


    Anshoo Sharma, HSS                                              [Page 127]

    Internet Draft         M3UA Conformance Test Plan               May 2003


                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC S
        To SGP1     <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC T
        To SGP2     <---------------   DATA

       TEST DESCRIPTION:
       1. Send two MTP-Transfer Request Primitive from the SU at ASP side
          with CIC values S and T respectively. It is assumed that load
          sharing across the streams is CIC based.
       2. Check A: Both DATA messages reach SGP1.
       3. Bring ASP in Active State for RC P in SGP2 by the Message
          Sequence shown above.
       4. Repeat the Step1 with appropriate CIC values (S,T) for loadsharing.
       5. Check B: DATA should be loadshared among SGP1 and SGP2. i.e. One
          DATA message should reach SGP1 and the other should reach SGP2.

       Note: How the messages will be loadshared based on CIC and SLS is
             implementation dependent.



























    Anshoo Sharma, HSS                                              [Page 128]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Routing among SGPs within an SG"

       + TEST NUMBER : 2.4

       + TITLE : Data Routing from the ASP among SGPs within a SG.

       + SUBTITLE : Data Routing from ASP when SG Mode is Broadcast.

       + PURPOSE: To check that the Data Message from the ASP is routed
         according to the mode of the SG.

       + TEST CONFIGURATION: J

       + PRE-TEST CONDITIONS: SCTP association is established between SGP1 and
         ASP and SGP2 and ASP. ASP is Active for RC P in SGP1 and is down in
         SGP2. Also arrange the data in ASP such that SU sends a MTP-Transfer
         Indication primitive to M3UA containing the RC value P and
         N/w Appearance A and CIC values S and T. Also arrange Data at SGP2 to
         send ASPUP-Ack and ASPAC-Ack for RC = P.

        EXPECTED MESSAGE SEQUENCE :
           SGP                               ASP             SU

        ASP is Active in SGP1 and
        ASP is Down in SGP2.

                                           <-----------  MTP-Transfer Req
                                                         DPC Y
        To SGP1     <---------------   DATA

        To SGP2     <----------------  ASPUP

        ASPUP-Ack    --------------->
                                       Status Ind ------->

        To SGP2     <----------------  ASPAC (RC = P)

        ASPAC-Ack    --------------->
                                       Status Ind ------->

                                           <-----------  MTP-Transfer Req
                                                         DPC Y
        To SGP1     <---------------   DATA


    Anshoo Sharma, HSS                                              [Page 129]

    Internet Draft         M3UA Conformance Test Plan               May 2003


        To SGP2     <---------------   DATA

       TEST DESCRIPTION:
       1. Send a MTP-Transfer Request Primitive from the SU at ASP side.
       2. Check A: A DATA messages reach SGP1.
       3. Bring ASP in Active State for RC P in SGP2 by the Message
          Sequence shown above.
       4. Repeat Step1.
       5. Check B: Same DATA should reach SGP1 and SGP2. i.e. One
          MTP Transfer Primitive at ASP should cause dispatch of two
          DATA messages for SGP1 and SGP2.






































    Anshoo Sharma, HSS                                              [Page 130]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Routing among SGPs within different SGs"

       + TEST NUMBER : 2.5

       + TITLE : Data Routing from the ASP among SGPs within different SGs.

       + SUBTITLE : Data Routing from ASP for SGs in Loadshare Mode.

       + PURPOSE: To check that the Data Message from the ASP is routed
         according to the number of SGPs in which the PC is available and
         mode of the SGs.

       + TEST CONFIGURATION: K, with both SG1 and SG2 in Loadshare Mode.

       + PRE-TEST CONDITIONS: SCTP association is established between all
         SGPs and the ASP. ASP is Active for RC P in SGP1 and is down in
         SGP2, SGP3 and SGP4. Also arrange the data in ASP such that SU sends
         a MTP-Transfer Request primitive to M3UA containing the RC value P
         and N/w Appearance A and CIC values S, T, U and V. Also arrange Data
         at SGPs to send ASPUP-Ack and ASPAC-Ack for RC = P.

        EXPECTED MESSAGE SEQUENCE :
           SGP                               ASP             SU

        ASP is Active in SGP1.
        ASP is Down in SGP2, SGP3, SGP4.

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC S
        To SGP1     <---------------   DATA
                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC T
        To SGP1     <---------------   DATA
                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC U
        To SGP1     <---------------   DATA
                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC V
        To SGP1     <---------------   DATA


        To SGP3     <----------------  ASPUP

        ASPUP-Ack    --------------->

    Anshoo Sharma, HSS                                              [Page 131]

    Internet Draft         M3UA Conformance Test Plan               May 2003


                                       Status Ind ------->

        To SGP3     <----------------  ASPAC (RC = P)

        ASPAC-Ack    --------------->
                                       Status Ind ------->

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC S
        To SGP1     <---------------   DATA
                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC T
        To SGP1     <---------------   DATA
                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC U
        To SGP3     <---------------   DATA
                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC V
        To SGP3     <---------------   DATA


        To SGP2     <----------------  ASPUP

        ASPUP-Ack    --------------->
                                       Status Ind ------->

        To SGP2     <----------------  ASPAC (RC = P)

        ASPAC-Ack    --------------->
                                       Status Ind ------->

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC S
        To SGP1     <---------------   DATA
                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC T
        To SGP2     <---------------   DATA
                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC U
        To SGP3     <---------------   DATA


        To SGP4     <----------------  ASPUP


    Anshoo Sharma, HSS                                              [Page 132]

    Internet Draft         M3UA Conformance Test Plan               May 2003


        ASPUP-Ack    --------------->

                                       Status Ind ------->

        To SGP4     <----------------  ASPAC (RC = P)

        ASPAC-Ack    --------------->
                                       Status Ind ------->

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC S
        To SGP1     <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC T
        To SGP2     <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC U
        To SGP3     <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC V
        To SGP4     <---------------   DATA


       TEST DESCRIPTION:
       1. Send Four MTP-Transfer Request Primitive from the SU at ASP side
          with CIC values S, T, U and V respectively. It is assumed that
          load sharing across the streams is CIC based.
       2. Check A: All DATA messages reach SGP1.
       3. Bring ASP in Active State for RC P in SGP3 by the Message
          Sequence shown above.
       4. Repeat the Step1 with appropriate CIC values (S,T,U,V) for
          loadsharing among two Destinations.
       5. Check C: DATA should be loadshared among SG1 and SG2 and hence
          among SGP1 and SGP3 i.e. Two DATA message should reach SGP1
          and the other two should reach SGP3.
       6. Bring ASP in Active State for RC P in SGP2 by the Message
          Sequence shown above.
       7. Repeat the Step1 with appropriate CIC values (S,T,U,V) for
          loadsharing among three Destinations.
       8. Check D: DATA should be loadshared among SGP1, SGP2 and SGP3.
       9. Bring ASP in Active State for RC P in SGP4 by the Message

    Anshoo Sharma, HSS                                              [Page 133]

    Internet Draft         M3UA Conformance Test Plan               May 2003


          Sequence shown above.
       10.Repeat the Step1 with appropriate CIC values (S,T,U,V) for
          loadsharing among four Destinations.
       11.Check E: DATA should be loadshared among SGP1, SGP2, SGP3
          and SGP4.

       Note: How the messages will be loadshared based on CIC and SLS is
             implementation dependent.










































    Anshoo Sharma, HSS                                              [Page 134]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Routing among SGPs within different SGs"

       + TEST NUMBER : 2.6

       + TITLE : Data Routing from the ASP among SGPs within different SGs.

       + SUBTITLE : Data Routing from ASP for SGs in Loadshare and Broadcast
         Mode.

       + PURPOSE: To check that the Data Message from the ASP is routed
         according to the number of SGPs in which the PC is available and
         mode of the SGs.

       + TEST CONFIGURATION: K, with SG2 in Loadshare and SG1 in Broadcast.

       + PRE-TEST CONDITIONS: SCTP association is established between all SGPs
         and the ASP. ASP is Active for RC P in SGP1 and is down in SGP2, SGP3
         and SGP4. Also arrange the data in ASP such that SU sends a
         MTP-Transfer Request primitive to M3UA containing the RC value P
         and N/w Appearance A and CIC values S, T, U and V. Also arrange Data
         at SGPs to send ASPUP-Ack and ASPAC-Ack for RC = P.

        EXPECTED MESSAGE SEQUENCE :
           SGP                               ASP             SU

        ASP is Active in SGP1.
        ASP is Down in SGP2, SGP3, SGP4.

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC S
        To SGP1     <---------------   DATA
                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC U
        To SGP1     <---------------   DATA


        To SGP3     <----------------  ASPUP

        ASPUP-Ack    --------------->
                                       Status Ind ------->

        To SGP3     <----------------  ASPAC (RC = P)

        ASPAC-Ack    --------------->

    Anshoo Sharma, HSS                                              [Page 135]

    Internet Draft         M3UA Conformance Test Plan               May 2003


                                       Status Ind ------->

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC S
        To SGP1     <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC U
        To SGP3     <---------------   DATA


        To SGP2     <----------------  ASPUP

        ASPUP-Ack    --------------->
                                       Status Ind ------->

        To SGP2     <----------------  ASPAC (RC = P)

        ASPAC-Ack    --------------->
                                       Status Ind ------->

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC S
        To SGP1     <---------------   DATA

        To SGP2     <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC U
        To SGP3     <---------------   DATA


        To SGP4     <----------------  ASPUP

        ASPUP-Ack    --------------->
                                       Status Ind ------->

        To SGP4     <----------------  ASPAC (RC = P)

        ASPAC-Ack    --------------->
                                       Status Ind ------->

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC S

    Anshoo Sharma, HSS                                              [Page 136]

    Internet Draft         M3UA Conformance Test Plan               May 2003


        To SGP1     <---------------   DATA

        To SGP2     <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC T
        To SGP3     <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC U
        To SGP4     <---------------   DATA


       TEST DESCRIPTION:
       1. Send Two MTP-Transfer Request Primitive from the SU at ASP side
          with CIC values S, U respectively. It is assumed that
          load sharing across the streams is CIC based.
       2. Check A: All DATA messages reach SGP1.
       3. Bring ASP in Active State for RC P in SGP3 by the Message
          Sequence shown above.
       4. Repeat the Step1 with appropriate CIC values (S,U) for
          loadsharing among two Destinations.
       5. Check C: DATA should be loadshared among SG1 and SG2 and hence
          among SGP1 and SGP3 i.e. One DATA message reaches SGP1 and the
          other should reach SGP3.
       6. Bring ASP in Active State for RC P in SGP2 by the Message
          Sequence shown above.
       7. Repeat the Step1 with appropriate CIC values (S,U) for
          loadsharing among two Destinations.
       8. Check D: DATA should be loadshared among SGP1 and SGP3, and
          Data reaching SGP1 also reaches SGP2.
       9. Bring ASP in Active State for RC P in SGP4 by the Message
          Sequence shown above.
       10.Repeat the Step1 with appropriate CIC values (S,T,U) for
          loadsharing among three Destinations.
       11.Check E: DATA should be loadshared among SGP1, SGP3 and SGP4,
          and Data reaching SGP1 also reaches SGP2.

       Note: How the messages will be loadshared based on CIC and SLS is
             implementation dependent.





    Anshoo Sharma, HSS                                              [Page 137]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Routing Failure"

       + TEST NUMBER : 2.7

       + TITLE : Routing Failure when AS State is not Active

       + SUBTITLE : MTP Transfer Request Fails when AS is in Inactive State.

       + PURPOSE: To check that on receiving MTP-Transfer primitive from SU,
         DATA message is rejected at ASP if the related AS is in inactive
         state.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is in ASP-inactive state for the related AS. Also arrange
         the data in ASP such that SU send MTP-Transfer primitive to M3UA with
         N/w Appearance A.

        EXPECTED MESSAGE SEQUENCE :
        SGP                              ASP                        SM
                                       ASP is Inactive

                                           <-----------  MTP-Transfer Req
                                                         DPC Z
                                       Send Failure ------->

        To SGP      <----------------  ASPAC (RC = P)

        ASPAC-Ack    --------------->
                                       Status Ind ------->

                                           <-----------  MTP-Transfer Req
                                                         DPC Z
        To SGP      <---------------   DATA
       TEST DESCRIPTION:
       1. Send MTP-Transfer Request Primitive from the SU at ASP to send
          Protocol Data to the SGP.
       2. Check A: DATA message is rejected at ASP.
       3. Send ASPAC message with Routing Context P and check SGP responds
          with ASP-Active-Ack and NTFY with status AS-Active.
       4. Send MTP-Transfer Request Primitive from the SU at ASP to send
          Protocol Data to the SGP.
       5. Check B: DATA message is received at SGP.

    Anshoo Sharma, HSS                                              [Page 138]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       5.3 SSNM

       Test Cases to Test SSNM Procedures.

       "Reception of SSNM messages"

       + TEST NUMBER : 3.1

       + TITLE :  SSNM Message handling

       + SUBTITLE: Reception of SSNM messages

       + PURPOSE: To check that if SSNM message is received at the ASP then it
         is reported to the ULP.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is Active. Also arrange the data in SGP such that DUNA,
         DAVA, DUPU, DRST and SCON messages are sent from the SGP to the ASP
         with valid parameters and they are sent on stream number 0.

       EXPECTED MESSAGE SEQUENCE :
        SGP                              ASP                        SM
                                       AS is active
       a)
         DUNA      --------------->
                                         MTP-Pause Ind  -------->

       b)
         DAVA      --------------->
                                         MTP-Resume Ind  -------->

       c)
         SCON      --------------->
                                         MTP-Status Ind  -------->

       d)
         DUPU      --------------->

                                         MTP-Status Ind  -------->
       e)
         DRST      --------------->


    Anshoo Sharma, HSS                                              [Page 139]

    Internet Draft         M3UA Conformance Test Plan               May 2003


                                         MTP-Status Ind  -------->
       TEST DESCRIPTION:

       1. Send DUNA message from SGP to ASP containing the Network
          Appearance A, Routing Context Value P and Affected DPC any value.
       2. Check A: MTP-Pause indication primitive will be received at the SU.
       3. Repeat the above test case for other messages like DAVA, SCON, DRST
          and DUPU messages.
       4. Repeat the above test case for one affected DPC and for more than
          one affected DPC parameters.
       5. Repeat the above test cases if all these messages are sent on stream
          number other than zero. They should be accepted.

       Note: Depending upon the number of affected destinations there may be
             more than one MTP-Pause, MTP-Resume and Status Indication.


































    Anshoo Sharma, HSS                                              [Page 140]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       + TEST NUMBER : 3.2

       + TITLE :  SSNM Message handling

       + SUBTITLE: Reception of SSNM messages

       + PURPOSE: To check that Pause, Resume and Status Indications are
         is given to the SU only when there is an overall availability
         in the Reachability of the Point Code.

       + TEST CONFIGURATION: H

       + PRE-TEST CONDITIONS: SCTP association is established between SGP
         belonging to SG1 and ASP and ASP is Active. Also arrange the data in
         SGP1 and SGP2 such that DUNA, DAVA, DUPU, DRST and SCON messages are
         sent from the SGP to the ASP with valid parameters and they are sent
         on stream number 0.

       EXPECTED MESSAGE SEQUENCE :
           SGP1(SG1)      SGP2(SG2)              ASP          SU
                                       ASP is active and PC Y is
                                       reachable from SG1 and SG2
       a)
         DUNA    -------------------------->
         (for Point Code Y and
          Routing Context P at SGP1)

       b)
         DUNA    -------------------------->

                          ----------------->
         (for Point Code Y and
          Routing Context P at
          SGP1 and SGP2)
                                        MTP-Pause Ind  -------->


                                       ASP is active and PC Y is
                                       unreachable from SG1 and SG2
       c)
         DAVA    -------------------------->

                                        MTP-Resume Ind  -------->


    Anshoo Sharma, HSS                                              [Page 141]

    Internet Draft         M3UA Conformance Test Plan               May 2003


                          ----------------->
         (for Point Code Y and
          Routing Context P
          at SGP1 and SGP2)


       TEST DESCRIPTION:

       1. Send DUNA message from SGP1 to ASP for Point Code Y and
          Routing Context P, when PC Y is reachable through both
          SG1 and SG2.
       2. Check A: MTP Pause Indication primitive will not be received
          at the SU.
       3. Send DUNA from SGP1 and SGP2 to ASP for routing Context P.
       4. Check B: MTP Pause indication will be received at SU.
       5. Send DAVA message from SGP1 and then SGP2 to ASP for Point Code Y
          and Routing Context P when Point Code Y is unreachable from both
          SG1 and SG2.
       6. Check C: MTP Resume indication will be received at SU after DAVA
          from SGP1 is received at ASP, and MTP Resume Indication is not
          received after DAVA is received from SGP2.
       7. Repeat the above test case for other messages like SCON, DRST and
          DUPU messages.
       8. Repeat the above test cases if all these messages are sent on stream
          number other than zero. They should be accepted.

       Note: Depending upon the number of affected destinations there may be
             more than one MTP-Pause, MTP-resume and Status Indication.



















    Anshoo Sharma, HSS                                              [Page 142]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "DAUD message is not sent if SCON message is received with congestion
        level 0 or undefined"

       + TEST NUMBER : 3.3

       + TITLE :  SSNM Message Handling

       + SUBTITLE : DAUD message is not sent if SCON message is received with
         congestion level 0 or undefined

       + PURPOSE: To check that if SCON message is received with congestion
         level 0 or undefined then DAUD message is not sent on expiry of the
         timer.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is active. Also arrange the data in SGP such that SCON
         message with congestion level 0 is sent to the ASP. Network
         Appearance parameter should be having value A and affected DPC can be
         having any value.

       EXPECTED MESSAGE SEQUENCE :
        SGP                               ASP                     SU
                                         ASP is active

        SCON(Level 1) --------------->
                             |            MTP-Status Ind  -------->
                             |
                             |Timer expires
                      <---------------    DAUD
                             |
                             |
                             |Timer expires
                      <---------------    DAUD


        SCON(Level 0) --------------->
                             |
                             |
                             |Timer expires
                      <---------------    DAUD is not sent



    Anshoo Sharma, HSS                                              [Page 143]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       TEST DESCRIPTION:
       1. Send SCON message from the SGP to the ASP. Don't send any other SSNM
          message from the SGP. Timer will be started at the ASP on receiving
          SCON message.
       2. Check A: DAUD message should be received at the SGP after expiry of
          the timer.
       3. Repeat the above test case if SCON message is sent with SCON Level0.
       4. Check B: No DAUD message should be received at the SG after expiry
          of the timer.

       Note: Value of the timer is implementation specific.






































    Anshoo Sharma, HSS                                              [Page 144]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "On Indication of SCTP Congestion the ASP sends a SCON to SGP"

       + TEST NUMBER : 3.4

       + TITLE :  SSNM Message

       + SUBTITLE : SCON Message from ASP

       + PURPOSE: To check that if the ASP detects SCTP Congestion and invokes
         a Status Ind with Cause Congestion, an SCON message is sent with the
         specified congestion Level.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is active for Routing Context P.

       EXPECTED MESSAGE SEQUENCE :
        SGP                               ASP                     SU
                                         ASP is active

                                         <---------   MTP-Status-Ind (Cong.)
                      <------------- SCON


       TEST DESCRIPTION:
       1. SU Invokes MTP-Status-Ind API with cause as congestion and a valid
          congestion level value.
       2. Check A: SCON message should be received at the SGP with a valid
          SCON value.

















    Anshoo Sharma, HSS                                              [Page 145]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "PC Availability Status from SSNM"

       + TEST NUMBER : 3.5

       + TITLE : PC Availability Status based on SSNM.

       + SUBTITLE : Data Routing from ASP on the basis of PC Availability.

       + PURPOSE: To check that the Data Message from the ASP is routed
         to the SG through which the PC is available.

       + TEST CONFIGURATION: K, SG1 and SG2 are in Broadcast.

       + PRE-TEST CONDITIONS: SCTP association is established between SGP1,
         SGP2, SGP3, SGP4 and ASP. ASP is Active for RC P in all SGPs.
         Also arrange the data in ASP such that SU sends a MTP-Transfer
         Indication primitive to M3UA containing the RC value P and
         N/w Appearance A. Also arrange Data at SGPs to send SSNM for PC Y
         and N/w Appearance A. Route to PC Y is available from both SG1
         and SG2. SG Redundancy mode for ASP is Loadshare.

        EXPECTED MESSAGE SEQUENCE :
           SGP                               ASP             SU

        ASP is Active in all SGPs.
                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC S
        To SGP1     <---------------   DATA
        To SGP2     <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC T
        To SGP3     <---------------   DATA
        To SGP4     <---------------   DATA

       From SGP1
         DUNA        --------------->
         (for PC Y)

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC S
        To SGP3     <---------------   DATA
        To SGP4     <---------------   DATA


    Anshoo Sharma, HSS                                              [Page 146]

    Internet Draft         M3UA Conformance Test Plan               May 2003


                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC T
        To SGP3     <---------------   DATA
        To SGP4     <---------------   DATA

       From SGP2
         DAVA        --------------->
         (for PC Y)
       From SGP3
         DRST        --------------->
         (for PC Y)
                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC S
        To SGP1     <---------------   DATA
        To SGP2     <---------------   DATA

                                           <-----------  MTP-Transfer Req
                                                         DPC Y & CIC T
        To SGP1     <---------------   DATA
        To SGP2     <---------------   DATA

       From SGP1
         DUNA        --------------->
         (for PC Y)
                            MTP-Pause Ind  ----------->
                                          <-----------  MTP-Transfer Req
                                                        DPC Y
        To SGP3     <---------------   DATA
        To SGP4     <---------------   DATA

       TEST DESCRIPTION:
       1. Send two MTP-Transfer Request Primitive from the SU at ASP side
          with CIC values S and T respectively. It is assumed that load
          sharing across the streams is CIC based.
       2. Check A: DATA message 1 reaches SGP1 and SGP2, and Data Message 2
          reaches SGP3 and SGP4.
       3. Send a DUNA from SGP1 to ASP with Affected Point Code as Y.
       4. Repeat the Step1 with appropriate CIC values (S,T) for loadsharing.
       5. Check B: Data Message 1 as well as Data Message 2 are both received
          SGP3 as well as SGP4.
       6. Send a DAVA from SGP2 to ASP with Affected Point Code as Y and
          a DRST from SGP3 to ASP with Affected Point Code as Y.
       7. Repeat the Step1 with appropriate CIC values (S,T) for loadsharing.


    Anshoo Sharma, HSS                                              [Page 147]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       8. Check C: DATA message 1 reaches SGP1 and SGP2, and Data Message 2
          reaches SGP1 and SGP2.
       9. Send a DUNA from SGP1 to ASP with Affected Point Code as Y.
       10.MTP-Pause Ind for Point Code Y would be received at ASP.
       11.Send Data for Point Code Y.
       12.Check B: Data Message will be received at SGP3 as well as SGP4.

       Note: How the messages will be loadshared based on CIC and SLS is
             implementation dependent.









































    Anshoo Sharma, HSS                                              [Page 148]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       5.4 ASPSM

       Test Cases to test ASPSM Procedures.

       "ASPUP-Ack message is not received in response to ASPUP message"

       + TEST NUMBER : 4.1

       + TITLE :  ASP management

       + SUBTITLE : ASP-Up-Ack is not received in response to ASPUP message

       + PURPOSE: To check that if Ack message is not received in response to
         the ASPUP message then ASP keeps on sending ASPUP message at an
         interval for some time and after some tries will report the SM.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. Also arrange the data in ASP such that SM sends ASP Up primitive
         to the M3UA. Arrange data in SGP such that Ack message
         is not sent in response to the ASPUP message.

       EXPECTED MESSAGE SEQUENCE :
        SGP                            ASP                    SM

                                          <-----------     ASP-Up
              <------------          ASPUP
                   |
                   |time t1
              <------------          ASPUP
                   |
                   |time t1
              <------------          ASPUP
                                                                     .
                                      . n tries
                                      .
                                      Status Ind ---------->


       TEST DESCRIPTION:
       1. Send ASP-Up primitive from SM at ASP. ASP will send ASPUP message to
          the SGP. Don't send Ack message from the SGP.
       2. Check A: ASPUP message will be retransmitted to the SGP.

    Anshoo Sharma, HSS                                              [Page 149]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       3. Check B: The ASPUP Message will be retransmitted as many times as
          has been configured in the implementation
       4. Check C: After Maximum number of retries, the ASP UP Ind with
          Negative Ind would be received at SM.
       5. Repeat the above test case for ASPDN message also
          i.e. Ack message is not sent in response to ASPDN message.

       Note: This case is implementation specific. In some implementation
             there may not be any retransmission. Also the time for which it
             will be retransmitted is implementation specific.







































    Anshoo Sharma, HSS                                              [Page 150]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASP-Down-Ack message is received in ASP-INACTIVE state"

       + TEST NUMBER : 4.2

       + TITLE :  ASP management

       + SUBTITLE : ASP-Down-Ack is received in ASP-INACTIVE State

       + PURPOSE: To check that if Down-Ack message is received in
         ASP-INACTIVE state, the ASP should move to Down State

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. Arrange data in SGP such that ASP-Down-Ack message is sent to
         the ASP.

       EXPECTED MESSAGE SEQUENCE :
        SGP                            ASP                    SM
                                     ASP is Inactive

       ASP-Dn-Ack  ------------>
                                      Status Ind ---------->  ASP is Down

       TEST DESCRIPTION:
       1. Check A: ASP is in Inactive State.
       1. Send ASP-Down-Ack from SGP.
       2. Check B: ASP gives a Status Ind to SM indicating that it's state
          has changed to Down.


















    Anshoo Sharma, HSS                                              [Page 151]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASP-Up-Ack is received in response to ASPDN message"

       + TEST NUMBER : 4.3

       + TITLE : Invalid Message Handling

       + SUBTITLE : ASP-Up-Ack is received in response to ASPDN message

       + PURPOSE: To check that if ASP-Up-Ack message is received in
         response to the ASPDN then the Ack message is discarded and ASPDN is
         sent again.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is Up. Arrange data in SGP such that ASP-Up-Ack is sent
         to ASP in response to ASPDN message with routing context P on stream
         0.

        EXPECTED MESSAGE SEQUENCE :
          SGP                              ASP                SM
                                          ASP is Inactive
                                         <---------       ASP-Down
                     <-----------    ASPDN

       ASP-Up-Ack    ------------>

                     <-----------    ASPDN

       TEST DESCRIPTION:
       1. Send ASP-Down Primitive to the ASP. ASPDN message will be sent to
          the SGP.
       2. Send ASP-Up-Ack message in response to the ASPDN message.
       3. Check A: ASPDN message is received again at the SGP.
       4. Repeat the above test case if Ack message is sent.











    Anshoo Sharma, HSS                                              [Page 152]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Heartbeat and Heartbeat Ack"

       + TEST NUMBER : 4.4

       + TITLE :  AS management

       + SUBTITLE : Heartbeat

       + PURPOSE: : To check that if an ASP sends a BEAT message and does not
         receive a Beat Ack then it considers the communication with M3UA Peer
         to be Down. Also the ASP sends a BEAT Ack in response to BEAT
         message.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is active. Also arrange the data in SGP and ASP such that
         BEAT message is sent to the Peer.

         EXPECTED MESSAGE SEQUENCE:
         SGP                              ASP                        SM

        a)              <----------------- BEAT (ASP)
                                  |        Timer 2*T(beat)
                                  |        is started
           BEAT Ack      ---------------->

        b)              <----------------- BEAT (ASP)
                                  |        Timer 2*T(beat)
                                  |        is started
                                  |

         Timer 2*T(beat) is expired and no BEAT ACK is from SGP.

       TEST DESCRIPTION:
       1. Send BEAT Message from ASP to the SGP.
       2. The beat message should be acknowledged by BEAT ACK before the Timer
          expires.
       3. Send the Beat message again.
       4. The timer expires and no beat ack message is received, the ASP will
          consider remote M3UA peer as Down. Transmission of BEAT message is
          stopped and ASP-Up procedures are used to re-establish communication
          with the SGP M3UA peer.
       5. Repeat the Test with SGP sending the BEAT message.

    Anshoo Sharma, HSS                                              [Page 153]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       5.5 ASPTM

       Test Cases to test ASPTM Procedures.

       "ASP Management messages towards SG"

       + TEST NUMBER : 5.1

       + TITLE :  AS management

       + SUBTITLE : ASP Management messages towards SG

       + PURPOSE: To check that if SM sends primitive to send ASP management
         messages to the SG then the corresponding message is sent to the SGP.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SG and
         ASP. ASP is active. Also arrange the data in ASP such that SM sends
         different ASP status primitive to the ASP with valid parameters.

        EXPECTED MESSAGE SEQUENCE :
        SG                              ASP                     SM

                                             <--------- ASP-Inactive

                         <------------    ASPIA

        ASP-Inactive-Ack  ------------>

        NTFY (AS-Inactive)------------>
                                        Status Ind --------->

                                             <--------- ASP-Down
                         <------------   ASPDN

        ASP-Down-Ack      ------------>

                                             <---------  ASP-Up
                         <------------   ASPUP

        ASP-Up-Ack        ------------>

        NTFY (AS-Inactive)------------>

    Anshoo Sharma, HSS                                              [Page 154]

    Internet Draft         M3UA Conformance Test Plan               May 2003


                                        Status Ind --------->

                                             <--------- ASP-Active
                         <------------   ASPAC

        ASP-Active-Ack    ------------>

        NTFY (AS-Active)  ------------>
                                   Status Ind --------->


       TEST DESCRIPTION:
       1. Send ASP-Inactive Primitive from SM in ASP to M3UA.
       2. Check A: ASPIA message will be received at the SGP.
       3. Send ASP-Inactive-Ack and NTFY(AS-Inactive) in response to the ASPIA
          message on stream 0.
       4. Check B: ASPM messages are sent on stream 0.
       5. Repeat the test case for other primitives like ASP-Down, ASP-Up, and
          ASP-Active . ASPDN, ASPUP and ASPAC messages will be sent from
          ASP to SGP with parameters passed from SM.
       6. Repeat the above test case if Ack messages are sent on stream other
          than 0.


























    Anshoo Sharma, HSS                                              [Page 155]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASP-Active-Ack is received in response to ASPIA message"

       + TEST NUMBER : 5.2

       + TITLE : Invalid Message Handling

       + SUBTITLE : ASP-Active-Ack is received in response to ASPIA message

       + PURPOSE: To check that if ASP-Active-Ack message is received in
         response to the ASPIA then the Ack message is discarded and ASPIA is
         sent again.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP and ASP is active. Arrange the data in SGP such that
         ASP-Active-Ack with routing context P is sent to ASP in response to
         ASPIA message on stream 0.

        EXPECTED MESSAGE SEQUENCE :
          SGP                              ASP                SM
                                          ASP is active

                                         <---------       ASP-Inactive

                         <-----------    ASPIA

         ASP-Active-Ack  ------------>

                         <-----------    ASPIA

       TEST DESCRIPTION:
       1. Send ASP-Inactive Primitive to the ASP. ASPIA message will be sent
          to the SGP.
       2. Send ASP-Active-Act message in response to the ASPIA message.
       3. Check A: ASPIA message is received again at the SGP.
       4. Repeat the above test case if ASP-Up-Ack is received in
          response to the ASPIA message.








    Anshoo Sharma, HSS                                              [Page 156]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASP-Down-Ack is received in ASP Active/Inactive State"

       + TEST NUMBER : 5.3

       + TITLE : Invalid Message Handling

       + SUBTITLE : ASP-Down-Ack is received in ASP Active/Inactive State.

       + PURPOSE: To check that if ASP-Down-Ack message is received in
         any state, the state of the ASP changes to Down.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP is Active/Inactive. Arrange the data in SGP such that
         ASP-Down-Ack is sent to ASP on stream 0.

        EXPECTED MESSAGE SEQUENCE :
          SGP                              ASP                SM
                                          ASP is Active/Inactive

         ASP-Down-Ack  ------------>
                                   Status Ind ---------> ASP is Down


       TEST DESCRIPTION:
       1. Send ASP-Down-Ack Message from SGP.
       2. Check A: Status Ind with ASP State a Down is received at ASP.



















    Anshoo Sharma, HSS                                              [Page 157]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "Multiple ASP-Active-Ack are received in response to ASP Active"

       + TEST NUMBER : 5.4

       + TITLE : Invalid Message Handling

       + SUBTITLE : Multiple ASP-Active-Ack are received in response to
         a single ASP Active Message.

       + PURPOSE: To Check that ASP successfully processes RCs spread
         over Multiple ASP Active Ack Messages.

       + TEST CONFIGURATION: I

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP is Inactive. Arrange the data in SGP such that ASP-Active-Ack
         with RC value P or Q are sent to ASP on stream 0.

        EXPECTED MESSAGE SEQUENCE :
          SGP                              ASP                SM
                                          ASP is Inactive

                                             <--------- ASP-Active
                         <------------   ASPAC (RC P, RC Q)

        ASP-Active-Ack    ------------>
        (RC P)
        NTFY (AS-Active)  ------------>
        (RC P)                |    Status Ind --------->
                              |
                              |    Timer Expires
                         <------------   ASPAC (only RC Q)

        ASP-Active-Ack    ------------>
        (RC Q)
        NTFY (AS-Active)  ------------>
        (RC Q)
                                   Status Ind --------->


       TEST DESCRIPTION:
       1. Invoke ASP Active Primitive from ASP with RC value as P and Q.
       2. Check A: ASPAC is received at SGP with Routing Contexts P and Q.
       3. Send ASP Active Ack and NTFY from SGP with only one RC value P.

    Anshoo Sharma, HSS                                              [Page 158]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       4. Check B: Status Ind for RC P is received at ASP and after
          time-out ASPAC is retransmitted with just one RC = Q.
       5. Send ASP Active Ack and NTFY from SGP with only one RC value Q.
       6. Check C: Status Ind for RC P is received at ASP.

       Note: In some Implementations Retransmission is not done. Here a
       negative Indication to the SM would be given regarding RC Q and
       no ASPAC will not be resent.










































    Anshoo Sharma, HSS                                              [Page 159]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASPAC-Ack message is not received in response to ASPAC message"

       + TEST NUMBER : 5.5

       + TITLE :  ASP management

       + SUBTITLE : ASP-Active-Ack is not received in response to ASPAC
         message.

       + PURPOSE: To check that if Ack message is not received in response to
         the ASPAC message then ASP keeps on sending ASPAC message at an
         interval for some number of max retries and will then report to SM.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. Also arrange the data in ASP such that SM sends ASP Active
         primitive to the M3UA. Arrange data in SGP such that Ack message
         is not sent in response to the ASPUP message.

       EXPECTED MESSAGE SEQUENCE :
        SGP                            ASP                    SM

                                          <-----------     ASP-Up
              <------------          ASPAC
                   |
                   |time t1
              <------------          ASPAC
                   |
                   |time t1
              <------------          ASPAC
                                                                     .
                                      . n tries
                                      .
                                      Status Ind ---------->

       TEST DESCRIPTION:
       1. Send ASP-Active primitive from SM at ASP. ASP will send ASPUP
          message to the SGP. Don't send Ack message from the SGP.
       2. Check A: ASPAC message will be retransmitted to the SGP.
       3. Check B: The ASPAC Message will be retransmitted as many times as
          has been configured in the implementation.
       4. Check C: After Maximum number of retries, the ASP Active Ind with
          Negative Ind would be received at SM.

    Anshoo Sharma, HSS                                              [Page 160]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       5. Repeat the above test case for ASPIA message also.
          i.e. Ack message is not sent in response to ASPIA message.

       Note: This case is implementation specific. In some implementation
       there may not be any retransmission. Also the time for which it
       will be retransmitted is implementation specific.












































    Anshoo Sharma, HSS                                              [Page 161]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "ASP-Inactive-Ack is received in ASP Active State"

       + TEST NUMBER : 5.6

       + TITLE : Invalid Message Handling

       + SUBTITLE : ASP-Inactive-Ack is received in ASP Active State.

       + PURPOSE: To check that if ASP-Inactive-Ack message is received in
         Active state, the state of the ASP changes to Inactive.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP is Active for RC P. Arrange the data in SGP such that
         ASP-Inactive-Ack for RC P is sent to ASP.

        EXPECTED MESSAGE SEQUENCE :
          SGP                              ASP                SM
                                          ASP is Active

         ASP-Inactive-Ack  ------------>
                                   Status Ind ---------> ASP is Inactive


       TEST DESCRIPTION:
       1. Send ASP-Inactive-Ack Message for RC P from SGP.
       2. Check A: Status Ind with ASP State as Inactive for RC P
          is received at ASP.


















    Anshoo Sharma, HSS                                              [Page 162]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       5.6 SCTP Connection Management

       Test Cases to test SCTP Connection Management

       "SCTP Connection Establishment"

       + TEST NUMBER : 6.1

       + TITLE :  SCTP Connection Management

       + SUBTITLE : SCTP Connection Establishment

       + PURPOSE: To check that on receiving M-SCTP-Establish primitive from
         SM, ASP initiates and establishes an SCTP association with the SGP.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is not established between SGP
         and ASP. Also arrange the data in ASP such that SM sends
         M-SCTP-Establish primitive to M3UA with the SGP id to which the
         connection is to be established.

       EXPECTED MESSAGE SEQUENCE :
        SGP                          ASP                SU + SM

                                     <---------     M-SCTP-Establish Request
             <------------------->
         SCTP association will be established by SCTP

                       ASP will receive Communication-Up primitive from SCTP

                                     M-SCTP-Establish Ind------->


       TEST DESCRIPTION:
       1. Send M-SCTP-Establish Request Primitive from the SM at ASP side to
          establish an SCTP association with the SGP.
       2. Check A: SCTP association will be established and M-SCTP-Establish
          indication will be received at the SM.







    Anshoo Sharma, HSS                                              [Page 163]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "SCTP Connection Termination"

       + TEST NUMBER : 6.2

       + TITLE :  SCTP Connection Management

       + SUBTITLE : SCTP Connection Termination

       + PURPOSE: To check that on receiving SCTP-Communication Down
         indication primitive from SCTP, ASP will send the M-SCTP Status
         primitive to the upper layer.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is in Inactive state. Also arrange the data in SGP such that
         SCTP association is terminated between SGP and ASP.

        EXPECTED MESSAGE SEQUENCE :
        SGP                                ASP              SM + SU
                                          ASP is Inactive

                      <--------------  ASPDN

        ASP-Down-Ack   -------------->

              SCTP association is terminated

                 ASP will receive Communication-Down primitive from SCTP

                                       M-SCTP Status -------->

                                                    <--------   MTP-Transfer

                                       Send Failure --------->
       TEST DESCRIPTION:
       1. Terminate the association between SGP and ASP.
       2. Check A: SCTP association will be down and on receiving
          Communication Down primitive from SCTP, M-SCTP Status indication
          will be received at the SM.
       3. Check B: State of ASP will be down. Send MTP-Transfer primitive from
          the SU to send some Protocol DATA. ASP will report send failure.
       Note: It may be possible that SCTP connection is terminated without
             exchanging the ASPDN message.

    Anshoo Sharma, HSS                                              [Page 164]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "SCTP Connection Restart"

       + TEST NUMBER : 6.3

       + TITLE :  SCTP Connection Management

       + SUBTITLE : SCTP Connection Restart

       + PURPOSE: To check that on receiving SCTP-Communication Restart
         Indication primitive from SCTP, ASP will send the M-SCTP Status
         primitive to the upper layer.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP and
         ASP. ASP is in active state. Also arrange in SGP such that SCTP
         association is restarted between SGP and ASP.

        EXPECTED MESSAGE SEQUENCE :
        SGP                                ASP              SM + SU
                                          ASP is active

                ASP will receive Communication-Restart Primitive from SCTP

                                       M-SCTP Status -------->

                                       Status Ind    --------> ASP Down

                                       Pause Ind     -------->
                                       (PC Z)

                                                     <-------- MTP-Transfer

                                       Send Failure --------->
       TEST DESCRIPTION:
       1. Invoke a Connection Restart on the association between SGP and ASP.
       2. Check A: SCTP association will be restarted and on receiving
          Communication Restart primitive from SCTP, M-SCTP Status indication
          and an ASP Status Ind will be received at the SM.
       3. Check B: State of ASP will be Down. Send MTP-Transfer primitive from
          the SU to send some Protocol DATA. ASP will report send failure.




    Anshoo Sharma, HSS                                              [Page 165]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "SCTP Connection Establishment"

       + TEST NUMBER : 6.4

       + TITLE :  SCTP Connection Management

       + SUBTITLE : SCTP Connection Establishment

       + PURPOSE: To check that on receiving Communication Up primitive from
         SCTP, SG M3UA will send M-SCTP-Establish indication to the SM.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is not established between SGP
         and ASP1. Also arrange the data in ASP such that SCTP association is
         established between ASP1 and SGP.

        EXPECTED MESSAGE SEQUENCE :
        SGP                                  ASP                   SM

        SCTP Establish request to SCTP
              SCTP association will be established by SCTP
                      ASP will receive Communication-Up primitive from SCTP

                                       M-SCTP-Establish Ind ------->

                                             <--------- ASP-UP
                   <------------------   ASPUP

        ASP-Up-Ack  ------------------>

        NTFY        ------------------>
       (AS-Inactive)
                                       Status Ind --------->

       TEST DESCRIPTION:
       1. Make an SCTP association between SGP and ASP. ASP will receive
          Communication Up primitive from SCTP.
       2. Check A: SM receives M-SCTP-Establish indication.
       3. Send ASPUP message from ASP to SGP.
       4. Send ASP-Up-Ack and NTFY message with status ASP-Inactive from
          the SGP.
       5. Check B: Status Ind for ASP State as Inactive is received at SM.


    Anshoo Sharma, HSS                                              [Page 166]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       5.7 Dynamic Routing Key (RK) Management

       Test Cases to test Dynamic RK Management Procedures.

       "RK Registration Request"

       + TEST NUMBER : 7.1

       + TITLE : RK Registration Request.

       + SUBTITLE : RK Registration is sent on Registration request by SM.

       + PURPOSE: To check that when SM invokes Registration Request a
         valid REG_REQ message is sent to the SGP.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP
         and ASP. ASP is Inactive in SGP. Also arrange the data in ASP
         such that SU sends a Reg Req Primitive to M3UA containing a
         valid Routing Key (Indicator). Also arrange Data at SGPs to send
         REG RESP with a RC value.

        EXPECTED MESSAGE SEQUENCE :
           SGP                               ASP             SU

        ASP is Inactive in SGP.
                                           <-----------  REG REQ (RK = RK1)
        To SGP      <---------------   REG_REQ (RK1)

        REG_RSP      --------------->
        (RC1)                          REG RESPONSE ----------->

       TEST DESCRIPTION:
       1. Invoke RK Registration Request SM API with a valid Routing Key.
       2. Check A: A REG_REQ Message with RK1 packed is sent from the
          ASP to SGP.
       3. Send a REG_RSP with SUCCESS and RC Value RC1 from the SGP to
          the ASP.
       4. Check B: A Registration Success Response is sent to the SM
          at ASP.




    Anshoo Sharma, HSS                                              [Page 167]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       "RK Deregistration Request"

       + TEST NUMBER : 7.2

       + TITLE : RK Deregistration Request.

       + SUBTITLE : RK Deregistration is sent on Deregistration request by SM.

       + PURPOSE: To check that when SM invokes Deregistration Request a
         valid DEREG_REQ message is sent to the SGP.

       + TEST CONFIGURATION: G

       + PRE-TEST CONDITIONS: SCTP association is established between SGP
         and ASP. ASP is Inactive in SGP. Also arrange the data in ASP
         such that SU sends a Dereg Req Primitive to M3UA containing a
         valid Routing Context. Also arrange Data at SGPs to send
         DEREG RESP with a RC value.

        EXPECTED MESSAGE SEQUENCE :
           SGP                               ASP             SU

        ASP is Inactive in SGP.
                                           <-----------  DEREG REQ (RC = RC1)

        To SGP      <---------------   DEREG_REQ (RC1)

        DEREG_RSP    --------------->
        (RC1)
                                       DEREG RESPONSE ----------->

       TEST DESCRIPTION:
       1. Invoke RK Deregistration Request SM API with a valid
          Routing Context.
       2. Check A: A DEREG_REQ Message with RC1 is sent from the
          ASP to SGP.
       3. Send a DEREG_RSP with SUCCESS and RC Value RC1 from the SGP to
          the ASP.
       4. Check B: A Deregistration Success Response is sent to the SM
          at ASP.





    Anshoo Sharma, HSS                                              [Page 168]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       6. Acknowledgements

        The author would like to thank (in alphabetical order)
           Akhtar Iqbal
           Anjali Gurmukhani
           Dipak Aggarwal
           Harsh Bhondwe
           Kamesh Kaul
           Vipin Gupta

        for their insightful comments and suggestions.

        Funding for the RFC editor function is currently provided by the
        Internet Society.


       7. Authors' Addresses

           Anshoo Sharma
           Hughes Software Systems
           Electronic City, Plot 17,
           Sector 18, Gurgaon 122015
           Harayana, India
           EMail: anshoo_s@hotmail.com


       8. References

         [M3UA]         RFC 3332 "SS7 MTP3-User Adaptation Layer (M3UA)"

         [2960]         RFC 2960 "Stream Control Transport Protocol"
                         R. Stewart, et al, November 2000.

         [ITU-MTP]      ITU-T Recommendations Q.701-Q.705, 'Signaling System
                         No. 7 (SS7) - Message Transfer Part (MTP)'

         [M3UA-CONF]    Test Specification for MTP3 User Adaptation
                         <draft-mahajan-test-spec-m3ua-00.txt> July 2000,
                         Work in Progress.







    Anshoo Sharma, HSS                                              [Page 169]

    Internet Draft         M3UA Conformance Test Plan               May 2003


       Copyright Statement

       Copyright (C) The Internet Society (2001). All Rights Reserved.

       This document and translations of it may be copied and furnished to
       others, and derivative works that comment on or otherwise explain it
       or assist in its implementation may be prepared, copied, published
       and distributed, in whole or in part, without restriction of any
       kind, provided that the above copyright notice and this paragraph
       are included on all such copies and derivative works. However, this
       document itself may not be modified in any way, such as by removing
       the copyright notice or references to the Internet Society or other
       Internet organizations, except as needed for the purpose of
       developing Internet standards in which case the procedures for
       copyrights defined in the Internet Standards process must be
       followed, or as required to translate it into languages other than
       English.

       The limited permissions granted above are perpetual and will not be
       revoked by the Internet Society or its successors or assigns.


       THIS DOCUMENT AND THE INFORMATION CONTAINED HEREIN IS PROVIDED ON AN
       "AS IS" BASIS AND THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
       TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
       BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
       HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
       MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.



















    Anshoo Sharma, HSS                                              [Page 170]
