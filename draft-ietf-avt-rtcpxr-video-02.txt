Internet Engineering Task Force                                 A. Clark
Internet-Draft                                     Telchemy Incorporated
Expires: 16th May 2008                                      A. Pendleton
                                                                  Nortel
                                                           November 2007






             RTCP XR - Video Metrics Report Blocks
                draft-ietf-avt-rtcpxr-video-02.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on 16th May 2008.

Copyright Notice


   Copyright (C) The IETF Trust (2007).

Abstract

   This document defines extensions to the RTCP XR extended report
   packet type blocks to support the monitoring of video over IP 
   for IPTV and videoconferencing endpoint reporting.






Clark                                                          [Page  1]

draft-ietf-avt-rtcpxr-video-02.txt                    18th November 2007


Table of Contents

   1.   Introduction . . . . . . . . . . . . . . . . . . . . . . . . 2
   2.   Definitions  . . . . . . . . . . . . . . . . . . . . . . . . 2
   3.   IP Video Metrics Report Block  . . . . . . . . . . . . . . . 2
   4.   Summary  . . . . . . . . . . . . . . . . . . . . . . . . . . 5
   5.   Security Considerations  . . . . . . . . . . . . . . . . . . 5
   6.   IANA Considerations  . . . . . . . . . . . . . . . . . . . . 5
   7.   Acknowledgements . . . . . . . . . . . . . . . . . . . . . . 6
   8.   Informative References . . . . . . . . . . . . . . . . . . . 6
        Authors' Addresses . . . . . . . . . . . . . . . . . . . . . 
        Intellectual Property and Copyright Statements . . . . . . . 




1.  Introduction

   This draft defines an RTCP XR block type for Quality of Service
   reporting for video over IP.  It is intended to support both the
   identification of problems affecting performance and the collection
   of data that may be useful in optimizing system configuration.

   Video performance may be measured using zero (no) reference, partial
   (reduced) reference or full reference.  The primary application of
   this draft is to support the reporting of real-time, in-service
   performance obtained using a zero or partial reference model however
   this approach could also be used to support the remote reporting of
   metrics from a full reference test.


2.  Definitions

   This draft defines metrics related to IP Video performance. Video
   MOS scores have not been included in this draft however may be 
   incorporated later if an industry standard method for computing
   such scores is defined.


3  Video Metrics Report Block

3.1 Block Description

    0               1               2               3
    0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     BT=N      |   Reserved    |         block length          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                             SSRC                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |0 0 0|       Program ID        |           Reserved            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Clark                                                          [Page  2]

draft-ietf-avt-rtcpxr-video-02.txt                    18th November 2007

   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Measurement Interval (ms)                    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Proportion Impaired I frames  | Proportion Impaired BP frames |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Loss rate within I frames  |  Loss rate within BP frames   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Mean GoP Length (frames)      | Max GoP Length (frames)       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      EPSNR Threshold          |   Time below PSNR threshold   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Mean Video bit rate (bits/sec)               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Round trip delay        |    A-V Delay (Video I/F)      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Playout Interrupt Count    |  Mean Playout Interrupt Size  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Video Playout buffer size    |      Mean buffer level        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

3.2 Metric definitions
   3.2.1 Header
   The header comprises:
     (i) Block Type for this report block
     (ii) Reserved (set to 0xFF)
     (iii) Block length in words (set to 0x000C)
     (iv) SSRC of the received RTP stream that this report refers to
     (v) Program ID (PID) for the video stream (if MPEG Transport
         encapsulation is used)
     (vi) Reserved (set to 0xFFFF)

   3.2.2 Measurement Interval
   The interval of time over which these metrics were measured,
   expressed in milliseconds.

   3.2.3 Proportion of impaired I frames 
   The proportion of I (intra-frame encoded) frames [4] that were
   impaired by packet loss or discard, expressed as a binary fraction.

   3.2.4 Proportion of impaired BP frames
   The proportion of B and P (inter-frame encoded) frames [4] that
   were impaired by packet loss or discard, expressed as a binary
   fraction.

   3.2.5 Loss rate within I frames
   The average packet loss/discard rate occurring within I frames,
   [4] expressed as a binary fraction.

   3.2.6 Loss rate within BP frames
   The average packet loss/discard rate occurring within B and P
   [4] frames, expressed as a binary fraction.

   3.2.7 Mean inter-I-frame gap (MIIF)

Clark                                                          [Page  3]

draft-ietf-avt-rtcpxr-video-02.txt                    18th November 2007

   The average interval between I frames expressed in terms of frames.
   If n(j) is the number of P and B frames between the jth and (j+1)th
   I frame then the mean inter-I-frame gap is

       MIIF(j) = ( MIIF(j-1) * 15 + n(j) ) / 16         

   The I frames occur at the start of Groups of Pictures (GoP) and
   may also be inserted during GoP's due to large scale changes in
   picture content (e.g. scene changes).  This can result in 
   bandwidth being larger than expected.  

   3.2.8 Max GoP Length (MGoP)
   The maximum GoP size (including the starting I frame and
   subsequent P and B frames) expressed in terms of frames.
   If m(j) comprises a count of the starting I frame and the
   subsequent frames (P, B or inserted I) prior to the I frame
   that forms the start of the next GoP, then the maximum GoP
   length is 

       MGoP(j) = max( m(j), MGoP(j-1) )         

   A long GoP may result in lower bandwidth however will lead to
   increased error propagation and hence degraded performance.

   3.2.9 Estimated PSNR (EPSNR)
   An estimate of the average Peak Signal to Noise Ratio, averaged
   over the duration of the measurement interval. This is expressed
   in unsigned 8:8 format and has the range 0.0 to 100.0. For
   typical high quality video streams this parameter would have a
   value in the range 35-45.

   The per frame PSNR value SHOULD be estimated by the decoder, based
   on the proportion of macroblocks within the frame that required
   concealment, the concealment algorithm used and quantization level.
   If a per-frame PSNR estimate is not available from the decoder
   then this value MAY be estimated from the proportion of packet
   loss per frame [4].

   A value of 0xFFFF shall indicate that this parameter is not
   available.

   3.2.10 EPSNR Threshold
   Threshold defined as the level below which quality is not
   acceptable

   A value of 0xFFFF shall indicate that this parameter is not
   available.

   3.2.11 Proportion of time below EPSNR threshold
   The proportion of the measurement interval during which estimated
   PSNR was below the PSNR Threshold, expressed as a binary fraction.   

   If the value of MOS Threshold is 0xFFFF then the value of this

Clark                                                          [Page  4]

draft-ietf-avt-rtcpxr-video-02.txt                    18th November 2007

   parameter is undefined. 

   3.2.12 Mean Video Bit Rate
   The average video bit rate [4] calculated over the measurement 
   interval.  This shall include RTP and MPEG Transport packet
   headers and payloads but shall exclude IP and UDP or TCP 
   overhead.

   3.2.13 Round Trip Delay
   The Round Trip Delay between the originating and terminating ends
   of this RTP stream, expressed in millseconds.  In unicast or
   multicast applications this parameter may be set to "undefined"
   (0xFFFF).

   3.2.14 A-V Delay
   The relative delay between decoded audio and video streams expressed
   in milliseconds [4].  

   3.2.15 Playout Interrupt Count
   The number of interruptions or frame freezes that occurred during
   playout, due to either packet loss or buffer underrun [4].

   3.2.16 Mean Playout Interrupt Size
   The mean duration of interruptions in playout expressed in
   milliseconds.

   3.2.17 Video Playout Buffer Size
   The available playout buffer size, expressed in milliseconds.

   3.2.18 Mean Buffer Level
   The mean playout buffer size, expressed in milliseconds.



4. Summary

   This draft defines an RTCP XR report block for video quality
   reporting.  This is intended for in-service monitoring of video
   streaming, IPTV and IP videoconferencing services to provide
   real time performance feedback and support performance management. 


5. IANA Considerations

   The block type "mmm" will need to be replaced with an IANA assigned
   number within those allocated for RTCP XR report blocks (RFC 3611).

6.  Security Considerations

   RTCP reports can contain sensitive information since they can provide
   information about the nature and duration of a session established
   between two endpoints.  As a result, any third party wishing to
   obtain this information should be properly authenticated and the

Clark                                                          [Page  5]

draft-ietf-avt-rtcpxr-video-02.txt                    18th November 2007

   information transferred securely.

7. Acknowledgments

   The authors would like to acknowledge Keith Lantz, Kaynam Hedayat,
   Satish Kumar for their helpful comments.

8.  Informative References

   [1]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", BCP 14, RFC 2119, March 1997.

   [2]  Schulzrinne, H., Casner, S., Frederick, R. and V. Jacobson,
        "RTP: A Transport Protocol for Real-Time Applications", STD 64,
        RFC 3550, July 2003.

   [3]  Friedman, T., Caceres, R. and A. Clark, "RTP Control Protocol
        Extended Reports (RTCP XR)", RFC 3611, November 2003.

   [4]  ATIS-080008 QoS Metrics for Linear Broadcast IPTV. ATIS 2007


Authors' Addresses

   Alan Clark
   Telchemy Incorporated
   2905 Premiere Parkway, Suite 280
   Duluth, GA 30097
   Email: alan@telchemy.com

   Amy Pendleton
   Nortel
   2380 Performance Drive
   Richardson, TX  75081
   Email: aspen@nortel.com

Full Copyright Statement

   Copyright (C) The IETF Trust (2007).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

Clark                                                          [Page  6]

draft-ietf-avt-rtcpxr-video-02.txt                    18th November 2007


   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.





   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).






















Clark                                                        [Page  7]
