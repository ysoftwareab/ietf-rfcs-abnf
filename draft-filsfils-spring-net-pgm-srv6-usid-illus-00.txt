



SPRING                                                  C. Filsfils, Ed.
Internet-Draft                                         P. Camarillo, Ed.
Intended status: Informational                       Cisco Systems, Inc.
Expires: August 28, 2020                                          D. Cai
                                                                 Alibaba
                                                                D. Voyer
                                                             Bell Canada
                                                               I. Meilik
                                                                Broadcom
                                                                K. Patel
                                                            Arrcus, Inc.
                                                           W. Henderickx
                                                                   Nokia
                                                         P. Jonnalagadda
                                                       Barefoot Networks
                                                               D. Melman
                                                                 Marvell
                                                       February 25, 2020


               NET-PGM extension: SRv6 uSID illustration
            draft-filsfils-spring-net-pgm-srv6-usid-illus-00

Abstract

   This document illustrates the SRv6 "micro segment" (SRv6 uSID or uSID
   for short) instruction.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on August 28, 2020.







Filsfils, et al.         Expires August 28, 2020                [Page 1]

Internet-Draft  NET-PGM extension: SRv6 uSID illustration  February 2020


Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Illustration  . . . . . . . . . . . . . . . . . . . . . . . .   2
     2.1.  Reference diagram . . . . . . . . . . . . . . . . . . . .   3
     2.2.  SRv6 overlay with underlay optimization . . . . . . . . .   3
   3.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   4
   4.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .   5
   5.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   8
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   9

1.  Introduction

   SRv6 Network Programming [I-D.ietf-spring-srv6-network-programming]
   defines a mechanism to build a network program with topological and
   service segments.  It leverages the SRH
   [I-D.ietf-6man-segment-routing-header] to encode a network program
   together with optional metadata shared among the different SIDs.

   [I-D.filsfils-spring-net-pgm-extension-srv6-usid] draft extends SRv6
   Network Programming with a new type of SRv6 SID behavior: SRv6 uN.
   This document illustrates it.

2.  Illustration

   This section extends the illustrations for SRv6 Network Programming
   [I-D.filsfils-spring-srv6-net-pgm-illustration] to cover uSID.  The
   reference topology is the same with the addition of link 6-8.








Filsfils, et al.         Expires August 28, 2020                [Page 2]

Internet-Draft  NET-PGM extension: SRv6 uSID illustration  February 2020


2.1.  Reference diagram

   Nodes 1 to 8 are considered within the network domain.

   Nodes X and Y are outside the domain.

   Nodes 1 and 8 act as PE respectively to nodes X and Y.

   All the links within the domain have the same IGP metric.  The IGP-
   metric shortest-path from 1 to 8 is 1-2-7-8 while the latency-metric
   shortest-path from 1 to 8 is 1-2-3-4-5-6-7-8.

                                3------4---5
                                |       \ /
                                |        6
                                |       / \
                           1--- 2------7---8
                          /                 \
                         X                   Y
                    Tenant100            Tenant100 with
                                           IPv4 20/8

                       Figure 1: Reference topology

2.2.  SRv6 overlay with underlay optimization

   Let us illustrate a low-latency SR-L3VPN service delivered to a
   packet (X,Y).

   PE 1 encapsulates (X, Y) in an outer IPv6 header with DA =
   2001:db8:0300:0500:0700:: and SRH (B:8:D0::; SL=1; NH=4).  Leveraging
   the illustration conventions from SRv6 network programming, the
   following resulting packet leaves node 1 in the direction of node 3:

      (A1::, 2001:db8:0300:0500:0700::)(B:8:D0::; SL=1; NH=4)(X, Y)

   2001:db8:0300:0500:0700:: is a uSID carrier encoding a source routed
   stateless path via node 3 then 5 then 7.

   B:8:D0:: is an End.DT4 SID instantiated at node 8.

   1 sends this packet to 2, as 2 is on the shortest-path to
   2001:db8:0300::/48 advertised by 3.

   When 2 receives the packet, 2 performs a regular IPv6 FIB lookup.  It
   finds a FIB entry for 2001:db8:0300::/48 and forwards along the
   shortest path to 3.




Filsfils, et al.         Expires August 28, 2020                [Page 3]

Internet-Draft  NET-PGM extension: SRv6 uSID illustration  February 2020


   When 3 receives the packet, 3 matches 2001:db8:0300::/48 in its "My
   SID Table" and executes the uN behavior.  The updated DA becomes
   2001:db8:0500:0700::. Node 3 then performs a lookup on the updated DA
   and forwards the packet to 5 along the shortest path to
   2001:db8:0500::/48.

   The following packet leaves node 3:

      (A1::, 2001:db8:0500:0700::)(B:8:D0::; SL=1; NH=4)(X, Y)

   4 forwards along the shortest path to 2001:db8:0500::/48.

   When 5 receives the packet, 5 matches 2001:db8:0500::/48 in its "My
   SID Table" and executes the uN behavior.  The updated DA becomes
   2001:db8:0700::. 5 performs a lookup on the updated DA and forwards
   the packet to 7 along the shortest path to 2001:db8:0700::/48.

   The following packet leaves node 5:

      (A1::, 2001:db8:0700::)(B:8:D0::; SL=1; NH=4)(X, Y)

   6 forwards along the shortest path to 2001:db8:0700::/48.

   When 7 receives the packet, 7 matches 2001:db8:0700::/48 in its "My
   SID Table" and finds the bound function uN.  As a result, Node 7
   executes the "End with PSP and USD support" pseudocode, decrementing
   the SL value in the SRH, and updating the DA with the next SID
   B:8:D0::. Since the SL value is zero the SRH is removed.  Node 7
   performs a lookup on the updated DA and forwards along the shortest
   path.

   The following packet leaves node 7:

      (A1::, B:8:D0::)(X, Y)

   8 receives it, performs the End.DT4 function and sends the IP packet
   (X, Y) towards its VPN destination.

   This example illustrates the benefits highlighted in the next
   section.

3.  Acknowledgements

   The authors would like to acknowledge Francois Clad, Peter Psenak,
   Ketan Talaulikar, Jakub Horn, Swadesh Agrawal, Zafar Ali, Darren
   Dukes, Kiran Sadshiran, Junaid Israr, Lakshmanan Srikanth, Asif
   Islam, Saleem Hafeez, Michael MacKenzie, Sushek Shekar, YuanChao Su,
   Alexander Preusche, Alberto Donzelli, Miya Kohno, David Smith, Ianik



Filsfils, et al.         Expires August 28, 2020                [Page 4]

Internet-Draft  NET-PGM extension: SRv6 uSID illustration  February 2020


   Semco, Bertrand Duvivier, Frederic Trate, Kris Michielsen, Eyal
   Dagan, Eli Stein, Ofer Iny, Elad Naor, Aviad Behar, Joseph Chin.

4.  Contributors

   Jisu Bhattacharyaa
   Cisco Systems, Inc.
   United States of America

   Email: jisu@cisco.com



   Kamran Raza
   Cisco Systems, Inc.
   Canada

   Email: skraza@cisco.com



   John Bettink
   Cisco Systems, Inc.
   United States of America

   Email: jbettink@cisco.com



   Tomonobu Niwa
   KDDI
   Japan

   Email: to-niwa@kddi.com



   Luay Jalil
   Verizon
   United States of America

   Email: luay.jalil@one.verizon.com



   Zhichun Jiang
   Tencent
   China



Filsfils, et al.         Expires August 28, 2020                [Page 5]

Internet-Draft  NET-PGM extension: SRv6 uSID illustration  February 2020


   Email: zcjiang@tencent.com



   Ahmed Shawky
   Saudi Telecom Company
   Saudi Arabia

   Email: ashawky@stc.com.sa



   Nic Leymann
   Deutsche Telekom
   Germany

   Email: N.Leymann@telekom.de



   Dirk Steinberg
   Lapishills Consulting Limited
   Cyprus

   Email: dirk@lapishills.com



   Shawn Zandi
   LinkedIn
   United States of America

   Email: szandi@linkedin.com



   Gaurav Dawra
   LinkedIn
   United States of America

   Email: gdawra@linkedin.com



   Jim Uttaro
   AT&T
   United States of America




Filsfils, et al.         Expires August 28, 2020                [Page 6]

Internet-Draft  NET-PGM extension: SRv6 uSID illustration  February 2020


   Email: ju1738@att.com



   Ning So
   Reliance
   United States of America

   Email: Ning.So@ril.com



   Michael Fiumano
   Sprint
   United States of America

   Email: michael.f.fiumano@sprint.com



   Mazen Khaddam
   Cox
   United States of America

   Email: Mazen.Khaddam@cox.com



   Jichun Ma
   China Unicom
   China

   Email: majc16@chinaunicom.cn



   Satoru Matsushima
   Softbank
   Japan

   Email: satoru.matsushima@g.softbank.co.jp



   Francis Ferguson
   CenturyLink
   United States of America




Filsfils, et al.         Expires August 28, 2020                [Page 7]

Internet-Draft  NET-PGM extension: SRv6 uSID illustration  February 2020


   Email: Francis.Ferguson@centurylink.com



   Takuya Miyasaka
   KDDI
   Japan

   Email: ta-miyasaka@kddi.com



   Kentaro Ebisawa
   Toyota Motor Corporation
   Japan

   Email: ebisawa@toyota-tokyo.tech



   Yukito Ueno
   NTT Communications Corporation
   Japan

   Email: yukito.ueno@ntt.com



5.  References

   [I-D.filsfils-spring-net-pgm-extension-srv6-usid]
              Filsfils, C., Camarillo, P., Cai, D., Voyer, D., Meilik,
              I., Patel, K., Henderickx, W., Jonnalagadda, P., and D.
              Melman, "Network Programming extension: SRv6 uSID
              instruction", draft-filsfils-spring-net-pgm-extension-
              srv6-usid-03 (work in progress), February 2020.

   [I-D.filsfils-spring-srv6-net-pgm-illustration]
              Filsfils, C., Camarillo, P., Li, Z., Matsushima, S.,
              Decraene, B., Steinberg, D., Lebrun, D., Raszuk, R., and
              J. Leddy, "Illustrations for SRv6 Network Programming",
              draft-filsfils-spring-srv6-net-pgm-illustration-01 (work
              in progress), August 2019.








Filsfils, et al.         Expires August 28, 2020                [Page 8]

Internet-Draft  NET-PGM extension: SRv6 uSID illustration  February 2020


   [I-D.ietf-6man-segment-routing-header]
              Filsfils, C., Dukes, D., Previdi, S., Leddy, J.,
              Matsushima, S., and D. Voyer, "IPv6 Segment Routing Header
              (SRH)", draft-ietf-6man-segment-routing-header-26 (work in
              progress), October 2019.

   [I-D.ietf-spring-srv6-network-programming]
              Filsfils, C., Camarillo, P., Leddy, J., Voyer, D.,
              Matsushima, S., and Z. Li, "SRv6 Network Programming",
              draft-ietf-spring-srv6-network-programming-10 (work in
              progress), February 2020.

Authors' Addresses

   Clarence Filsfils (editor)
   Cisco Systems, Inc.
   Belgium

   Email: cf@cisco.com


   Pablo Camarillo Garvia (editor)
   Cisco Systems, Inc.
   Spain

   Email: pcamaril@cisco.com


   Dennis Cai
   Alibaba
   China

   Email: d.cai@alibaba-inc.com


   Daniel Voyer
   Bell Canada
   Canada

   Email: daniel.voyer@bell.ca


   Israel Meilik
   Broadcom
   Israel

   Email: israel.meilik@broadcom.com




Filsfils, et al.         Expires August 28, 2020                [Page 9]

Internet-Draft  NET-PGM extension: SRv6 uSID illustration  February 2020


   Keyur Patel
   Arrcus, Inc.
   United States of America

   Email: keyur@arrcus.com


   Wim Henderickx
   Nokia
   Belgium

   Email: wim.henderickx@nokia.com


   Prem Jonnalagadda
   Barefoot Networks
   United States of America

   Email: prem@barefootnetworks.com


   David Melman
   Marvell
   Israel

   Email: davidme@marvell.com

























Filsfils, et al.         Expires August 28, 2020               [Page 10]
