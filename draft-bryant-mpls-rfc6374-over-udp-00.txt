



MPLS                                                           S. Bryant
Internet-Draft                                                G. Swallow
Intended status: Standards Track                            S. Sivabalan
Expires: September 3, 2015                                 Cisco Systems
                                                           March 2, 2015


                            RFC6374 over UDP
                 draft-bryant-mpls-rfc6374-over-udp-00

Abstract

   In draft-bryant-mpls-synonymous-flow-labels the concept of MPLS
   synonymous flow labels (SFL) was introduced and it was shown how they
   could be used to support RFC6374 loss measurements.  In draft-bryant-
   mpls-sfl-control the request, lifetime management and withdrawal of
   SFLs was described.  In this memo we show how these two protocols can
   be run over UDP to support the operation of RFC6374 in systems that
   do not support the Generic Associated Channel Label (GAL) (RFC5586).

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on September 3, 2015.

Copyright Notice

   Copyright (c) 2015 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must



Bryant, et al.          Expires September 3, 2015               [Page 1]

Internet-Draft              RFC6374 over UDP                  March 2015


   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Requirements Language . . . . . . . . . . . . . . . . . . . .   3
   3.  Protocol Stack  . . . . . . . . . . . . . . . . . . . . . . .   3
     3.1.  Querier to Responder  . . . . . . . . . . . . . . . . . .   3
   4.  Manageability Considerations  . . . . . . . . . . . . . . . .   4
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   4
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
   7.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   5
   8.  Normative References  . . . . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Introduction

   In draft-bryant-mpls-synonymous-flow-labels the concept of MPLS
   synonymous flow labels (SFL) was introduced and it was shown how they
   could be used to support RFC6374 loss measurements.  In draft-bryant-
   mpls-sfl-control the request, lifetime management and withdrawal of
   SFLs was described.  In this memo we show how these two protocols can
   be run over UDP to support the operation of RFC6374 in systems that
   do not support the Generic Associated Channel Label (GAL) [RFC5586].

   The approach is to run an Associated Channel Header directly over UDP
   using the ACH UDP port supplemented by addressing information carried
   in the ACH payload.  This memo explains how the extension of RFC6374
   as described in draft-bryant-mpls-synonymous-flow-labels and draft-
   bryant-mpls-sfl-control provide the necessary information to provide
   mapping between the RFC6374 packet carried over UDP and the MPLS
   construct being monitored, even when the RFC6374 protocol exchange is
   entirely out of band relative to the Label Switched Path (LSP),
   Virtual Private Network (VPN) or Pseudowire (PW) being instrumented.

   The key to this is the decoupling between the RFC6374 message and the
   data plane provided through the use of synonymous flow labels (SFL)
   as described in draft-bryant-mpls-synonymous-flow-labels.

   Nothing in this memo prevents the use of the ACH UDP port for other
   types of Associated Channels, but the precise method of doing so is
   outside the scope of this text.







Bryant, et al.          Expires September 3, 2015               [Page 2]

Internet-Draft              RFC6374 over UDP                  March 2015


2.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   [RFC2119].

3.  Protocol Stack

   The protocol stack is shown in Figure 1.  It consists of three
   components, the UDP header, the ACH and either an RFC6374 message or
   an SFL Control message.

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Source  Port               |       Destination Port        |  UDP
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Length                     |       Checksum                |  UDP
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |0 0 0 1|Version|   Reserved    |         Channel Type          |  ACH
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  |        RFC6374 or SFL Control Payload with SFL TLVs           .
  .                                                               .
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                 Figure 1: RFC6374 over UDP Protocol Stack

3.1.  Querier to Responder

   The following is rather laboured, but it is necessary to demonstrate
   that all of the required mapping information is carried.

   Consider the direction Querier to Responder for RFC6374 Messages.
   The following explains the identifier mapping.

   1.  Destination IP address (carried in the outer IP header (not
       shown)).  This is used to identify the targeted RFC6374 Responder
       to the IP network.

   2.  Source IP address (carried in the outer IP header (not shown)).
       This is used to identify the originating RFC6374 Querier to the
       RFC6374 Responder in order for it to construct the return IP
       packet.

   3.  UDP Source Port used by the RFC6374 Responder to direct responses
       to the correct Query process on the RFC6374 Querier.



Bryant, et al.          Expires September 3, 2015               [Page 3]

Internet-Draft              RFC6374 over UDP                  March 2015


   4.  UDP Destination Port is used by RFC6374 Querier to direct the
       message to the correct process on the RFC6374 Responder.

   5.  IP and UDP source and destination information are reversed in the
       usual way in the ACH Response messages from Responder back to
       Querier.

   6.  The RFC6374 Session Identifier used by both Querier and Responder
       to discriminate between multiple RFC6374 sessions running
       concurrently between the two nodes.

   7.  The SFL from the SFL TLV in the RFC6374 messages is used to
       identify the MPLS label that is being instrumented.

   8.  The SFL Control Protocol Session identifier used by both Querier
       and Responder to discriminate between multiple RFC6374 sessions
       running concurrently between the two nodes and used to bind the
       SFL control protocol session to the RFC6374 session.

   Note that a node running the SFL control protocol allocates a unique
   SFL in response to each SFL request, and thus there is no ambiguity
   as to which session between which source-destination pair a
   particular label belongs.

   Also note that there is no restriction on the use of the same SFL by
   many nodes since it always known which node allocated it by reference
   to items 1..8 in the list above.

4.  Manageability Considerations

   This may be provided in a future version of this document.

5.  Security Considerations

   Great care needs to be taken to ensure that the UDP packets defined
   in this document do not enter the network from unauthorised sources.
   This can be achieved by careful address management and the use of
   appropriate access control at the network's IP entry points.

6.  IANA Considerations

   IANA is requested to allocate a UDP port from the user port range:

   Service Name:  ACH over UDP

   Port Number:  TBD

   Descriptiopn  Transport of Associated Channel Headers over UDP



Bryant, et al.          Expires September 3, 2015               [Page 4]

Internet-Draft              RFC6374 over UDP                  March 2015


   Reference  This memo

7.  Acknowledgements

   TBD

8.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC5586]  Bocci, M., Vigoureux, M., and S. Bryant, "MPLS Generic
              Associated Channel", RFC 5586, June 2009.

Authors' Addresses

   Stewart Bryant
   Cisco Systems

   Email: stbryant@cisco.com


   George Swallow
   Cisco Systems

   Email: swallow@cisco.com


   Siva Sivabalan
   Cisco Systems

   Email: msiva@cisco.com



















Bryant, et al.          Expires September 3, 2015               [Page 5]
