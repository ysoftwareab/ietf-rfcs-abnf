 



INTERNET-DRAFT                                                 N. Elkins
                                                               B. Jouris
Intended Status: Informational                           Inside Products
Expires: September 30, 2017                               March 29, 2017




                  Using PDM to Monitor Net Neutrality
                      draft-elkins-ippm-pdm-nn-00

Abstract

   Monitoring of net neutrality is of interest to regulators as well as
   users throughout the world.  Standardized metrics are lacking.
   Measurements need to be at the end user client, be able to accurately
   separate wire and host time, detect quality of service provided to
   individual applications and be lightweight.  The IPv6 Performance and
   Diagnostic Metrics (PDM) Destination Option meets all these criteria.
   We propose that PDM be used for such measurements.  A gap analysis
   shows that PDM is available for IPv6 only and not for IPv4 or low
   powered devices.  

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/1id-abstracts.html

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html





 


Elkins                 Expires September 30, 2017               [Page 1]

INTERNET DRAFT           elkins-ippm-pdm-nn-00            March 29, 2017


Copyright and License Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors. All rights reserved.

   IETF Trust Legal Provisions of 28-dec-2009, Section 6.b(i), paragraph
   3: This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.     

Table of Contents

   1 Background . . . . . . . . . . . . . . . . . . . . . . . . . . .  3
     1.1 What Measurements Does PDM Provide?  . . . . . . . . . . . .  3
     1.2 How Does PDM Provide This Information? . . . . . . . . . . .  3
     1.3 Definitions of Round-Trip Delay and Server Delay . . . . . .  4
     1.4 How Will PDM Be Used to Measure Net Neutrality?  . . . . . .  4
   2 Advantages of PDM  . . . . . . . . . . . . . . . . . . . . . . .  4
     2.1 Advantages of PDM for Measurement  . . . . . . . . . . . . .  4
     2.2 Advantage of PDM for Scaleability  . . . . . . . . . . . . .  5
     2.3 Isolating Wire Time Accurately . . . . . . . . . . . . . . .  5
     2.4 Measurement of the Application . . . . . . . . . . . . . . .  5
     2.5 Calculation of speed . . . . . . . . . . . . . . . . . . . .  6
     2.6 Lightweight measurement technique  . . . . . . . . . . . . .  6
     2.7 Universal Measurement Technique  . . . . . . . . . . . . . .  6
   3 Gap Analysis of PDM in Net Neutrality Measurements . . . . . . .  7
     3.1 PDM for IPv4 . . . . . . . . . . . . . . . . . . . . . . . .  7
     3.2 PDM for Low Powered Devices  . . . . . . . . . . . . . . . .  7
   4 IANA Considerations  . . . . . . . . . . . . . . . . . . . . . .  7
   5 Security Considerations  . . . . . . . . . . . . . . . . . . . .  7
   6 References . . . . . . . . . . . . . . . . . . . . . . . . . . .  7
     6.1 Normative References . . . . . . . . . . . . . . . . . . . .  7
     6.2 Informative References . . . . . . . . . . . . . . . . . . .  7
   Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . . .  8
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . .  8







 


Elkins                 Expires September 30, 2017               [Page 2]

INTERNET DRAFT           elkins-ippm-pdm-nn-00            March 29, 2017


1 Background

   The question of whether one is actually getting the wire speed that
   one is paying for is complex.   In [NNRequire], European regulators
   make the use case: "The European Regulation requires internet service
   providers (ISPs) to specify new speed values for example minimum,
   maximum, and normally available speeds in fixed network.  The
   measurement use case is to assess if these contractual speed values
   are met.  The problem is to define measurements that can be run by
   end-users and is accurate enough to have legal value."

   A number of factors enter into measuring such time:

   1.   Measurement which resides at the end-user client

   2.   Separating wire time from the application / stack time 

   3.   Accuracy of measurement

   The hybrid measurement technique, IPv6 PDM defined in [PDM] embeds
   timing information in each packet.  Such values may be used to
   estimate QoS as experienced by an end user device.  PDM also provides
   the ability to determine quickly if the (latency) problem is in the
   network or in the server (application).

1.1 What Measurements Does PDM Provide?

   PDM provides:

   1.  Round-trip delay (wire time)
   2.  Server delay (host time)

1.2 How Does PDM Provide This Information?

   From [PDM], Section 2: Measurement Information Derived from PDM

   "Each packet contains information about the sender and receiver. In
   IP protocol,  the identifying information is called a "5-tuple".  

   The 5-tuple consists of:

         SADDR : IP address of the sender
         SPORT : Port for sender
         DADDR : IP address of the destination
         DPORT : Port for destination
         PROTC : Protocol for upper layer (ex. TCP, UDP, ICMP, etc.)

   The PDM contains the following base fields:
 


Elkins                 Expires September 30, 2017               [Page 3]

INTERNET DRAFT           elkins-ippm-pdm-nn-00            March 29, 2017


         PSNTP    : Packet Sequence Number This Packet
         PSNLR    : Packet Sequence Number Last Received
         DELTATLR : Delta Time Last Received
         DELTATLS : Delta Time Last Sent"

   This information, combined with the 5-tuple, allows the measurement
   of round-trip delay (wire time) and server delay (host time).

1.3 Definitions of Round-Trip Delay and Server Delay

   The PDM description defines the measurement fields of interest.

   From PDM [PDM]:

   "Round-trip *Network* delay is the delay for packet transfer from a
   source host to a destination host and then back to the source host.
   This measurement has been defined, and the advantages and
   disadvantages discussed in "A Round-trip Delay Metric for IPPM"
   [RFC2681]."

   "Server delay is the interval between when a packet is received by a
   device and the first corresponding packet is sent back in response.
   This may be "Server Processing Time".  It may also be a delay caused
   by acknowledgements.  Server processing time includes the time taken
   by the combination of the stack and application to return the
   response. The stack delay may be related to network performance.   If
   this aggregate time is seen as a problem, and there is a need to make
   a clear distinction between application processing time and stack
   delay, including that caused by the network, then more client based
   measurements are needed."

1.4 How Will PDM Be Used to Measure Net Neutrality?

   Since PDM is embedded in the packet, any measuring tool that is able
   to capture packets may serve as a capture point. Such devices range
   from a simple Wireshark packet capture to a large network of agents
   and controllers using the LMAP [RFC7594] protocol.


2 Advantages of PDM

2.1 Advantages of PDM for Measurement

   From [PDM]

   "Advantages include: 

   1. Real measure of actual transactions. 
 


Elkins                 Expires September 30, 2017               [Page 4]

INTERNET DRAFT           elkins-ippm-pdm-nn-00            March 29, 2017


   2. Independence from transport layer protocols. 

   3. Ability to span organizational boundaries with consistent
   instrumentation.

   4. No time synchronization needed between session partners 

   5. Ability to handle all transport protocols (TCP, UDP, SCTP, etc) in
   a uniform way "

2.2 Advantage of PDM for Scaleability

   The advantage of PDM in scaleability for measuring net neutrality is
   that no additional client software needs to be implemented.  The task
   of having some agent at each client that one wishes to measure
   throughout the world is nothing less than daunting.   Having said
   that, some organizations, for example, with the RIPE probes, have
   undertaken this task with quite a bit of success.

   Imagine how much simpler this might be if nothing needed to be
   installed at the client -- if the actual data needed for accurate
   measurement was in the packet itself.  This is what PDM provides.

2.3 Isolating Wire Time Accurately

   From [NNRequire], one of the requirements of net neutrality is to
   isolate the wire time from other factors:

   "When measurement tasks are run by an end-user, end-user environment 
   specific factors like cross-traffic, measurement interface 
   (fixed/wireless), firewalls, client operating system and hardware 
   can influence the measurement result.  These factors have to be 
   detected and taken into account when assessing measurements 
   performed by end-users."

   PDM is implemented as close to the network interface as possible so
   the isolation of wire time is expected to be quite accurate.

2.4 Measurement of the Application

   PDM is embedded in each packet.  Each packet inherently has a 5-
   tuple.   So, as the packet is captured and analyzed via analysis
   tools, data on application usage is available.





 


Elkins                 Expires September 30, 2017               [Page 5]

INTERNET DRAFT           elkins-ippm-pdm-nn-00            March 29, 2017


2.5 Calculation of speed

   One of the requirements from [NNRequire] states that "speed should be
   calculated based on IP packet payload". Since PDM is embedded in the
   packet, and packets are being captured by the measurement device, the
   length of the IP and upper layer headers are readily differentiated
   from the size of the actual payload.

2.6 Lightweight measurement technique

   Another of the requirements of [NNRequire] states that "measurement
   does not block the internet access usage for whole day and does not
   generate excessive network load."

   PDM is embedded in the packet and so clearly does not block usage of
   the Internet for the end-user for any task required.

   As far as load, from [PDM], Appendix C: Potential Overhead
   Considerations, discusses the additional overhead created by adding
   PDM to a packet.

   "Below is a table outlining the potential overhead in terms of
   additional time to deliver the response to the end user for various
   assumed RTTs.

   Bytes         RTT         Bytes       Bytes      New      Overhead
   in Packet                Per Millisec in PDM     RTT        
   =====================================================================
   1000       1000 milli         1       16     1016.000  16.000 milli
   1000        100 milli        10       16      101.600   1.600 milli
   1000         10 milli       100       16       10.160    .160 milli
   1000          1 milli      1000       16        1.016    .016 milli

   Below are some examples of actual RTTs for packets traversing large
   enterprise networks.    

   Bytes         RTT        Bytes       Bytes      New     Overhead
   in Packet                Per Millisec in PDM     RTT
   =====================================================================
   1000       17 milli         58        16       17.360   .360 milli


2.7 Universal Measurement Technique

   [NNRequire] would like technique which is universal.  That is:

   "In principle, any solution should be equally applicable to both
   fixed and mobile Internet access services from narrow band to multi-
 


Elkins                 Expires September 30, 2017               [Page 6]

INTERNET DRAFT           elkins-ippm-pdm-nn-00            March 29, 2017


   gigabit connections."

   PDM is embedded in the IP packet.  The operating system merely needs
   to implement it.  PDM has no favorites: fixed or mobile are as one to
   it.

3 Gap Analysis of PDM in Net Neutrality Measurements

3.1 PDM for IPv4

   Much as we might want the world to use IPv6 exclusively, the thorny
   issue of a world wide base of IPv4 on the Internet which refuses to
   die quietly remains.  Today, PDM is able to measure IPv6 only.   PDM
   needs to be extended to measure IPv4.

3.2 PDM for Low Powered Devices

   The world is becoming filled with small, somewhat intelligent devices
   which communicate across networks.   Should net neutrality be
   extended to such devices, then PDM will need to be defined for low
   powered devices.   Having said that, the overhead created by PDM,
   though inconsequential for laptops and cell phones, may be too much
   for very small devices.

4 IANA Considerations

   There are no IANA considerations.

5 Security Considerations

   Security considerations for PDM are detailed in the PDM [PDM]
   description.


6 References

6.1 Normative References

   [RFC2681]  Almes, G., Kalidindi, S., and M. Zekauskas, "A Round-trip
   Delay Metric for IPPM", RFC 2681, September 1999.

   [RFC7594] Eardley, P., "A Framework for Large-Scale Measurement of
   Broadband Performance (LMAP)", RFC 7594, October, 2015.

6.2 Informative References


   [PDM] Elkins, N. "IPv6 Performance and Diagnostic Metrics (PDM)
 


Elkins                 Expires September 30, 2017               [Page 7]

INTERNET DRAFT           elkins-ippm-pdm-nn-00            March 29, 2017


   Destination Option", draft-ietf-ippm-6man-pdm-option-09, March, 2017
   [Work in Progress]

   [NNRequire] Nieminen, K., "Net Neutrality Measurements: Regulatory
   Use Case and Problem Statement", draft-nieminen-ippm-nn-measurements-
   00, February, 2017 [Work in Progress]

Acknowledgments

Authors' Addresses

   Nalini Elkins
   Inside Products, Inc.
   36A Upper Circle
   Carmel Valley, CA 93924
   United States
   Phone: +1 831 659 8360
   Email: nalini.elkins@insidethestack.com
   http://www.insidethestack.com


   William Jouris
   Inside Products, Inc.
   36A Upper Circle
   Carmel Valley, CA 93924
   United States
   Phone: +1 831 659 8360
   Email: bill.jouris@insidethestack.com
   http://www.insidethestack.com






















Elkins                 Expires September 30, 2017               [Page 8]
