<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Encoding 3 PCN-States in the IP header using a single DSCP</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Requirements Language">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Changes in This Version (to be removed by RFC Editor)">
<link href="#rfc.section.2" rel="Chapter" title="2 Definitions and Abbreviations">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Terminology">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 List of Abbreviations">
<link href="#rfc.section.3" rel="Chapter" title="3 Definition of 3-in-1 PCN Encoding">
<link href="#rfc.section.4" rel="Chapter" title="4 Requirements for and Applicability of 3-in-1 PCN Encoding">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 PCN Requirements">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Requirements Imposed by Tunnelling">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Applicability of 3-in-1 PCN Encoding">
<link href="#rfc.section.5" rel="Chapter" title="5 Behaviour of a PCN-node to Comply with the 3-in-1 PCN Encoding">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 PCN-ingress Node Behaviour">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 PCN-interior Node Behaviour">
<link href="#rfc.section.5.2.1" rel="Chapter" title="5.2.1 Behaviour Common to all PCN-interior Nodes">
<link href="#rfc.section.5.2.2" rel="Chapter" title="5.2.2 Behaviour of PCN-interior Nodes Using Two PCN-markings">
<link href="#rfc.section.5.2.3" rel="Chapter" title="5.2.3 Behaviour of PCN-interior Nodes Using One PCN-marking">
<link href="#rfc.section.5.2.3.1" rel="Chapter" title="5.2.3.1 Marking using only the Excess-traffic-meter Function">
<link href="#rfc.section.5.2.3.2" rel="Chapter" title="5.2.3.2 Marking using only the Threshold-meter Function">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Behaviour of PCN-egress Nodes">
<link href="#rfc.section.6" rel="Chapter" title="6 Backward Compatibility">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Backward Compatibility with ECN">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Backward Compatibility with the Baseline Encoding">
<link href="#rfc.section.7" rel="Chapter" title="7 IANA Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Security Considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 Conclusions">
<link href="#rfc.section.10" rel="Chapter" title="10 Acknowledgements">
<link href="#rfc.section.11" rel="Chapter" title="11 Comments Solicited">
<link href="#rfc.references" rel="Chapter" title="12 References">
<link href="#rfc.references.1" rel="Chapter" title="12.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="12.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Choice of Suitable DSCPs">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B Co-existence of ECN and PCN">
<link href="#rfc.appendix.Appendix%20C" rel="Chapter" title="Appendix C Example Mapping between Encoding of PCN-Marks in IP and in MPLS Shim Headers">
<link href="#rfc.appendix.Appendix%20D" rel="Chapter" title="Appendix D Rationale for different behaviours for single marking schemes">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The objective of Pre-Congestion Notification (PCN) is to protect the quality of service (QoS) of inelastic flows within a Diffserv domain.  The overall rate of the PCN-traffic is metered on every link in the PCN domain, and PCN-packets are appropriately marked when certain configured rates are exceeded. Egress nodes pass information about these PCN-marks to decision points which then decide whether to admit or block new flow requests or to terminate some already-admitted flows during serious pre-congestion." />
  <meta name="description" content="The objective of Pre-Congestion Notification (PCN) is to protect the quality of service (QoS) of inelastic flows within a Diffserv domain.  The overall rate of the PCN-traffic is metered on every link in the PCN domain, and PCN-packets are appropriately marked when certain configured rates are exceeded. Egress nodes pass information about these PCN-marks to decision points which then decide whether to admit or block new flow requests or to terminate some already-admitted flows during serious pre-congestion." />
  <meta name="keywords" content="Quality of Service, QoS, Congestion Control, Congestion Notification, Tunnelling, Encapsulation & Decapsulation, Differentiated Services, Integrated Services, Signalling, Protocol, Flow Admission Control, Flow Termination" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Congestion and Pre-Congestion Notification</td>
<td class="right">B. Briscoe</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">BT</td>
</tr>
<tr>
<td class="left">Obsoletes: 5696 (if approved)</td>
<td class="right">T. Moncaster</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">Moncaster Internet Consulting</td>
</tr>
<tr>
<td class="left">Expires: January 11, 2012</td>
<td class="right">M. Menth</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">University of Tuebingen</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">July 10, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Encoding 3 PCN-States in the IP header using a single DSCP<br />
  <span class="filename">draft-ietf-pcn-3-in-1-encoding-06</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The objective of Pre-Congestion Notification (PCN) is to protect the quality of service (QoS) of inelastic flows within a Diffserv domain.  The overall rate of the PCN-traffic is metered on every link in the PCN domain, and PCN-packets are appropriately marked when certain configured rates are exceeded. Egress nodes pass information about these PCN-marks to decision points which then decide whether to admit or block new flow requests or to terminate some already-admitted flows during serious pre-congestion.</p>
<p>This document specifies how PCN-marks are to be encoded into the IP header by re-using the Explicit Congestion Notification (ECN) codepoints within a PCN-domain. This encoding provides for up to three different PCN marking states using a single DSCP: not-marked (NM), threshold-marked (ThM) and excess-traffic-marked (ETM). Hence, it is called the 3-in-1 PCN encoding. This document obsoletes RFC5696.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on January 11, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Requirements Language</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Changes in This Version (to be removed by RFC Editor)</a>
</li>
<li>2.   <a href="#rfc.section.2">Definitions and Abbreviations</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Terminology</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">List of Abbreviations</a>
</li>
<li>3.   <a href="#rfc.section.3">Definition of 3-in-1 PCN Encoding</a>
</li>
<li>4.   <a href="#rfc.section.4">Requirements for and Applicability of 3-in-1 PCN Encoding</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">PCN Requirements</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Requirements Imposed by Tunnelling</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Applicability of 3-in-1 PCN Encoding</a>
</li>
<li>5.   <a href="#rfc.section.5">Behaviour of a PCN-node to Comply with the 3-in-1 PCN Encoding</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">PCN-ingress Node Behaviour</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">PCN-interior Node Behaviour</a>
</li>
<li>5.2.1.   <a href="#rfc.section.5.2.1">Behaviour Common to all PCN-interior Nodes</a>
</li>
<li>5.2.2.   <a href="#rfc.section.5.2.2">Behaviour of PCN-interior Nodes Using Two PCN-markings</a>
</li>
<li>5.2.3.   <a href="#rfc.section.5.2.3">Behaviour of PCN-interior Nodes Using One PCN-marking</a>
</li>
<li>5.2.3.1.   <a href="#rfc.section.5.2.3.1">Marking using only the Excess-traffic-meter Function</a>
</li>
<li>5.2.3.2.   <a href="#rfc.section.5.2.3.2">Marking using only the Threshold-meter Function</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">Behaviour of PCN-egress Nodes</a>
</li>
<li>6.   <a href="#rfc.section.6">Backward Compatibility</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Backward Compatibility with ECN</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Backward Compatibility with the Baseline Encoding</a>
</li>
<li>7.   <a href="#rfc.section.7">IANA Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Security Considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">Conclusions</a>
</li>
<li>10.   <a href="#rfc.section.10">Acknowledgements</a>
</li>
<li>11.   <a href="#rfc.section.11">Comments Solicited</a>
</li>
<li>12.   <a href="#rfc.references">References</a>
</li>
<li>12.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>12.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Choice of Suitable DSCPs</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">Co-existence of ECN and PCN</a>
</li>
<li>Appendix C.   <a href="#rfc.appendix.Appendix%20C">Example Mapping between Encoding of PCN-Marks in IP and in MPLS Shim Headers</a>
</li>
<li>Appendix D.   <a href="#rfc.appendix.Appendix%20D">Rationale for different behaviours for single marking schemes</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#pcn3in1_Introduction" id="pcn3in1_Introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">The objective of Pre-Congestion Notification (PCN) <a href="#RFC5559">[RFC5559]</a> is to protect the quality of service (QoS) of inelastic flows within a Diffserv domain, in a simple, scalable, and robust fashion. Two mechanisms are used: admission control, to decide whether to admit or block a new flow request, and flow termination to terminate some existing flows during serious pre-congestion. To achieve this, the overall rate of PCN-traffic is metered on every link in the domain, and PCN-packets are appropriately marked when certain configured rates are exceeded. These configured rates are below the rate of the link thus providing notification to boundary nodes about overloads before any real congestion occurs (hence "pre-congestion notification").</p>
<p><a href="#RFC5670">[RFC5670]</a> provides for two metering and marking functions that are generally configured with different reference rates.  Threshold-marking marks all PCN packets once their traffic rate on a link exceeds the configured reference rate (PCN-threshold-rate).  Excess-traffic-marking marks only those PCN packets that exceed the configured reference rate (PCN-excess-rate). The PCN-excess-rate is typically larger than the PCN-threshold-rate <a href="#RFC5559">[RFC5559]</a>. Egress nodes monitor the PCN-marks of received PCN-packets and pass information about these PCN-marks to decision points which then decide whether to admit new flows or terminate existing flows <a href="#I-D.ietf-pcn-cl-edge-behaviour">[I-D.ietf-pcn-cl-edge-behaviour]</a>, <a href="#I-D.ietf-pcn-sm-edge-behaviour">[I-D.ietf-pcn-sm-edge-behaviour]</a>.</p>
<p id="rfc.section.1.p.3">The baseline encoding defined in <a href="#RFC5696">[RFC5696]</a> described how two PCN marking states (Not-marked and PCN-Marked) could be encoded into the IP header using a single Diffserv codepoint. It also provided an experimental codepoint (EXP), along with guidelines for the use of that codepoint. Two PCN marking states are sufficient for the Single Marking edge behaviour <a href="#I-D.ietf-pcn-sm-edge-behaviour">[I-D.ietf-pcn-sm-edge-behaviour]</a>. However, PCN-domains utilising the controlled load edge behaviour <a href="#I-D.ietf-pcn-cl-edge-behaviour">[I-D.ietf-pcn-cl-edge-behaviour]</a> require three PCN marking states. This document extends the baseline encoding by redefining the EXP codepoint to provide a third PCN marking state in the IP header, still using a single Diffserv codepoint. This encoding scheme is therefore called the "3-in-1 PCN encoding". It obsoletes the baseline encoding <a href="#RFC5696">[RFC5696]</a>, which provides only a sub-set of the same capabilities.</p>
<p id="rfc.section.1.p.4">The full version of this encoding requires any tunnel endpoint within the PCN-domain to support the normal tunnelling rules defined in <a href="#RFC6040">[RFC6040]</a>.  There is one limited exception to this constraint where the PCN-domain only uses the excess-traffic-marking behaviour and where the threshold-marking behaviour is deactivated. This is discussed in <a href="#pcn3in1_interior_ETM_only">Section 5.2.3.1</a>.  </p>
<p id="rfc.section.1.p.5">This document only concerns the PCN wire protocol encoding for IP headers, whether IPv4 or IPv6. It makes no changes or recommendations concerning algorithms for congestion marking or congestion response.  Other documents will define the PCN wire protocol for other header types. <a href="#pcn3in1_app_map_IP_MPLS">Appendix Appendix C</a> discusses a possible mapping between IP and MPLS.</p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> <a href="#pcn3in1_Reqs_Lang" id="pcn3in1_Reqs_Lang">Requirements Language</a>
</h1>
<p id="rfc.section.1.1.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.</p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> <a href="#pcn3in1_Changes" id="pcn3in1_Changes">Changes in This Version (to be removed by RFC Editor)</a>
</h1>
<p></p>

<dl>
<dt>From draft-ietf-pcn-3-in-1-encoding-05 to -06:</dt>
<dd style="margin-left: 8"><ul>
<li>Draft re-written to obsolete baseline encoding <a href="#RFC5696">[RFC5696]</a>.</li>
<li>New section defining utilising this encoding for single marking. Added an appendix explaining an apparent inconsistency relating to single marking.</li>
<li>Moved (and updated) informative appendixes from <a href="#RFC5696">[RFC5696]</a> to this document. Original Appendix C was omitted as it is now redundant. </li>
<li>Significant re-structuring of document.</li>
</ul></dd>
<dt>From draft-ietf-pcn-3-in-1-encoding-04 to -05:</dt>
<dd style="margin-left: 8"><ul>
<li>Draft moved to standards track as per working group discussions.</li>
<li>Added <a href="#pcn3in1_app_ecn_coexist">Appendix Appendix B</a> discussing ECN handling in the PCN-domain.</li>
<li>Clarified that this document modifies <a href="#RFC5696">[RFC5696]</a>.</li>
</ul></dd>
<dt>From draft-ietf-pcn-3-in-1-encoding-03 to -04:</dt>
<dd style="margin-left: 8"><ul>
<li>Updated document to reflect RFC6040.</li>
<li>Re-wrote introduction.</li>
<li>Re-wrote section on applicability.</li>
<li>Re-wrote section on choosing encoding scheme.</li>
<li>Updated author details.</li>
</ul></dd>
<dt>From draft-ietf-pcn-3-in-1-encoding-02 to -03:</dt>
<dd style="margin-left: 8"><ul>
<li>Corrected mistakes in introduction and improved overall readability.</li>
<li>Added new terminology.</li>
<li>Rewrote a good part of Section 4 and 5 to achieve more clarity.</li>
<li>Added appendix explaining when to use which encoding scheme and how to encode them in MPLS shim headers.</li>
<li>Added new co-author.</li>
</ul></dd>
<dt>From draft-ietf-pcn-3-in-1-encoding-01 to -02:</dt>
<dd style="margin-left: 8"><ul>
<li>Corrected mistake in introduction, which wrongly stated that the threshold-traffic rate is higher than the excess-traffic rate. Other minor corrections.</li>
<li>Updated acks &amp; refs.</li>
</ul></dd>
<dt>From draft-ietf-pcn-3-in-1-encoding-00 to -01:</dt>
<dd style="margin-left: 8"><ul>
<li>Altered the wording to make sense if draft-ietf-tsvwg-ecn-tunnel moves to proposed standard.</li>
<li>References updated</li>
</ul></dd>
<dt>From draft-briscoe-pcn-3-in-1-encoding-00 to draft-ietf-pcn-3-in-1-encoding-00:</dt>
<dd style="margin-left: 8"><ul>
<li>Filename changed to draft-ietf-pcn-3-in-1-encoding.</li>
<li>Introduction altered to include new template description of PCN.</li>
<li>References updated.</li>
<li>Terminology brought into line with <a href="#RFC5670">[RFC5670]</a>.</li>
<li>Minor corrections.</li>
</ul></dd>
</dl>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#pcn3in1_defs_reqs_abbrev" id="pcn3in1_defs_reqs_abbrev">Definitions and Abbreviations</a>
</h1>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> <a href="#pcn3in1_Terminology" id="pcn3in1_Terminology">Terminology</a>
</h1>
<p id="rfc.section.2.1.p.1">The terms PCN-domain, PCN-node, PCN-interior-node, PCN-ingress-node, PCN-egress-node, PCN-boundary-node, PCN-traffic, PCN-packets and PCN-marking are used as defined in <a href="#RFC5559">[RFC5559]</a>. The following additional terms are defined in this document: </p>

<dl>
<dt>PCN encoding:</dt>
<dd style="margin-left: 8">mapping of PCN marking states to specific codepoints in the packet header.</dd>
<dt>PCN-compatible Diffserv codepoint:</dt>
<dd style="margin-left: 8">a Diffserv codepoint indicating packets for which the ECN field is used to carry PCN-markings rather than <a href="#RFC3168">[RFC3168]</a> markings (see <a href="#pcn3in1_app_DSCP_choice">Appendix Appendix A</a>).</dd>
<dt>Threshold-marked codepoint:</dt>
<dd style="margin-left: 8">a codepoint that indicates packets that have been marked at a PCN-interior-node as a result of an indication from the threshold-metering function <a href="#RFC5670">[RFC5670]</a>. Abbreviated to ThM.</dd>
<dt>Excess-traffic-marked codepoint:</dt>
<dd style="margin-left: 8">a codepoint that indicates packets that have been marked at a PCN-interior-node as a result of an indication from the excess-traffic-metering function <a href="#RFC5670">[RFC5670]</a>. Abbreviated to ETM.</dd>
<dt>Not-marked codepoint:</dt>
<dd style="margin-left: 8">a codepoint that indicates PCN-packets but that are not PCN-marked. Abbreviated to NM.</dd>
<dt>not-PCN codepoint:</dt>
<dd style="margin-left: 8">a codepoint that indicates packets that are not PCN-packets.</dd>
</dl>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> <a href="#pcn_enc_abbreviations" id="pcn_enc_abbreviations">List of Abbreviations</a>
</h1>
<p id="rfc.section.2.2.p.1">The following abbreviations are used in this document: </p>

<ul>
<li>AF = Assured Forwarding <a href="#RFC2597">[RFC2597]</a>
</li>
<li>CE = Congestion Experienced <a href="#RFC3168">[RFC3168]</a>
</li>
<li>CS = Class Selector <a href="#RFC2474">[RFC2474]</a>
</li>
<li>DSCP = Diffserv codepoint</li>
<li>ECN = Explicit Congestion Notification <a href="#RFC3168">[RFC3168]</a>
</li>
<li>ECT = ECN Capable Transport <a href="#RFC3168">[RFC3168]</a>
</li>
<li>EF = Expedited Forwarding <a href="#RFC3246">[RFC3246]</a>
</li>
<li>ETM = Excess-traffic-marked</li>
<li>EXP = Experimental</li>
<li>IP = Internet protocol</li>
<li>NM = Not-marked</li>
<li>PCN = Pre-Congestion Notification</li>
<li>ThM = Threshold-marked</li>
</ul>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#pcn3in1_Encoding" id="pcn3in1_Encoding">Definition of 3-in-1 PCN Encoding</a>
</h1>
<p id="rfc.section.3.p.1">The 3-in-1 PCN encoding scheme allows for two or three PCN-marking states to be encoded within the IP header. The full encoding is shown in <a href="#pcn3in1_Fig_Encoding">Figure 1</a>.</p>
<div id="#rfc.figure.1"></div>
<div id="#pcn3in1_Fig_Encoding"></div>
<pre>
+--------+----------------------------------------------------+
|        |           Codepoint in ECN field of IP header      |
|  DSCP  |               &lt;RFC3168 codepoint name&gt;             |
|        +--------------+-------------+-------------+---------+
|        | 00 &lt;Not-ECT&gt; | 10 &lt;ECT(0)&gt; | 01 &lt;ECT(1)&gt; | 11 &lt;CE&gt; |
+--------+--------------+-------------+-------------+---------+
| DSCP n |    Not-PCN   |      NM     |     ThM     |   ETM   |
+--------+--------------+-------------+-------------+---------+
</pre>
<p id="rfc.section.3.p.2">As mentioned above, the 3-in-1 PCN encoding is an extension of the baseline encoding <a href="#RFC5696">[RFC5696]</a>. Like the baseline encoding it uses a combination of a PCN-compatible DSCP (DSCP n in <a href="#pcn3in1_Fig_Encoding">Figure 1</a>) and the ECN field for the encoding of PCN-marks. <a href="#pcn3in1_app_DSCP_choice">Appendix Appendix A</a> discusses the choice of suitable DSCPs. The PCN-marks have the following meaning. </p>

<dl>
<dt>Not-PCN:</dt>
<dd style="margin-left: 8">indicates a non-PCN-packet, i.e., a packet that is not subject to PCN metering and marking.</dd>
<dt>NM:</dt>
<dd style="margin-left: 8">Not-marked. Indicates a PCN-packet that has not yet been marked by any PCN marker.</dd>
<dt>ThM:</dt>
<dd style="margin-left: 8">Threshold-marked. Indicates a PCN-packet that has been marked by a threshold-marker <a href="#RFC5670">[RFC5670]</a>.</dd>
<dt>ETM:</dt>
<dd style="margin-left: 8">Excess-traffic-marked. Indicates a PCN-packet that has been marked by an excess-traffic-marker <a href="#RFC5670">[RFC5670]</a>.</dd>
</dl>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#pcn3in1_Requirement_head" id="pcn3in1_Requirement_head">Requirements for and Applicability of 3-in-1 PCN Encoding</a>
</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#pcn3in1_Requirement" id="pcn3in1_Requirement">PCN Requirements</a>
</h1>
<p id="rfc.section.4.1.p.1">In accordance with the PCN architecture <a href="#RFC5559">[RFC5559]</a>, PCN-ingress-nodes control packets entering a PCN-domain. Packets belonging to PCN-controlled flows are subject to PCN-metering and -marking, and PCN-ingress-nodes mark them as Not-marked (PCN-colouring). Any node in the PCN-domain may perform PCN-metering and -marking and mark PCN-packets if needed. There are two different metering and marking behaviours: threshold-marking and excess-traffic-marking <a href="#RFC5670">[RFC5670]</a>. Some edge behaviors require only a single marking behaviour <a href="#I-D.ietf-pcn-sm-edge-behaviour">[I-D.ietf-pcn-sm-edge-behaviour]</a>, others require both <a href="#I-D.ietf-pcn-cl-edge-behaviour">[I-D.ietf-pcn-cl-edge-behaviour]</a>. In the latter case, three PCN marking states are needed: not-marked (NM) to indicate not-marked packets, threshold-marked (ThM) to indicate packets marked by the threshold-marker, and excess-traffic-marked (ETM) to indicate packets marked by the excess-traffic-marker <a href="#RFC5670">[RFC5670]</a>. Threshold-marking and excess-traffic-marking are configured to start marking packets at different load conditions, so one marking behaviour indicates more severe pre-congestion than the other. Therefore, a fourth PCN marking state indicating that a packet is marked by both markers is not needed. However a fourth codepoint is required to indicate packets that do not use PCN (the not-PCN codepoint).</p>
<p id="rfc.section.4.1.p.2">In all current PCN edge behaviors that use two marking behaviours <a href="#RFC5559">[RFC5559]</a>, <a href="#I-D.ietf-pcn-cl-edge-behaviour">[I-D.ietf-pcn-cl-edge-behaviour]</a>, excess-traffic-marking is configured with a larger reference rate than threshold-marking. We take this as a rule and define excess-traffic-marked as a more severe PCN-mark than threshold-marked.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#pcn3in1_Requirements_Tunnelling" id="pcn3in1_Requirements_Tunnelling">Requirements Imposed by Tunnelling</a>
</h1>
<p><a href="#RFC6040">[RFC6040]</a> defines rules for the encapsulation and decapsulation of ECN markings within IP-in-IP tunnels. The publication of RFC6040 removed the tunnelling constraints that existed when the baseline encoding <a href="#RFC5696">[RFC5696]</a> was written (see section 3.3.2 of <a href="#I-D.ietf-pcn-encoding-comparison">[I-D.ietf-pcn-encoding-comparison]</a>). </p>
<p id="rfc.section.4.2.p.2">Nonetheless, there is still a problem if there are any legacy (pre-RFC6040) decapsulating tunnel endpoints within a PCN domain. If a PCN node Threshold-marks the outer header of a tunnelled packet with a Not-marked codepoint on the inner header, the legacy decapsulator will revert the Threshold-marking to Not-marked.  The rules on applicability in <a href="#pcn3in1_Requirements_Applicability">Section 4.3</a> below are designed to avoid this problem.</p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#pcn3in1_Requirements_Applicability" id="pcn3in1_Requirements_Applicability">Applicability of 3-in-1 PCN Encoding</a>
</h1>
<p id="rfc.section.4.3.p.1">The 3-in-1 encoding is applicable in situations where two marking behaviours are being used in the PCN-domain. The 3-in-1 encoding can also be used with only one marking behaviour, in which case one of the codepoints MUST NOT be used throughout the PCN-domain (see <a href="#pcn3in1_interior_one_mark_behaviour">Section 5.2.3</a>). </p>
<p id="rfc.section.4.3.p.2">For the full 3-in-1 encoding to apply, any tunnel endpoints (IP-in-IP and IPsec) within the PCN-domain MUST comply with the ECN encapsulation and decapsulation rules set out in <a href="#RFC6040">[RFC6040]</a> (see <a href="#pcn3in1_Requirements_Tunnelling">Section 4.2</a>). There is one exception to this rule outlined next. </p>
<p id="rfc.section.4.3.p.3">It may not be possible to upgrade every pre-RFC6040 tunnel endpoint within a PCN-domain. In such cirsumstances a limited version of the 3-in-1 encoding can still be used but only under the following stringent condition. If any pre-RFC6040 tunnel endpoint exists within a PCN-domain then every PCN-node in the PCN-domain MUST be configured so that it never sets the ThM codepoint.  The behaviour of PCN-interior nodes in this case is defined in <a href="#pcn3in1_interior_ETM_only">Section 5.2.3.1</a>. In all other situations where legacy tunnel endpoints might be present within the PCN domain, the 3-in-1 encoding is not applicable. </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#pcn3in1_Compliant_Node_Behaviour" id="pcn3in1_Compliant_Node_Behaviour">Behaviour of a PCN-node to Comply with the 3-in-1 PCN Encoding</a>
</h1>
<p id="rfc.section.5.p.1">As mentioned in <a href="#pcn3in1_Requirements_Applicability">Section 4.3</a> above, all PCN-nodes MUST comply with <a href="#RFC6040">[RFC6040]</a>.</p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#pcn3in1_common_ingress_behaviour" id="pcn3in1_common_ingress_behaviour">PCN-ingress Node Behaviour</a>
</h1>
<p id="rfc.section.5.1.p.1">PCN-traffic MUST be marked with a PCN-compatible Diffserv codepoint. To conserve DSCPs, Diffserv codepoints SHOULD be chosen that are already defined for use with admission-controlled traffic.  <a href="#pcn3in1_app_DSCP_choice">Appendix Appendix A</a> gives guidance to implementors on suitable DSCPs. Guidelines for mixing traffic types within a PCN-domain are given in <a href="#RFC5670">[RFC5670]</a>.</p>
<p id="rfc.section.5.1.p.2">If a packet arrives at the PCN-ingress-node that shares a PCN-compatible DSCP and is not a PCN-packet, the PCN-ingress MUST mark it as not-PCN.</p>
<p id="rfc.section.5.1.p.3">If a PCN-packet arrives at the PCN-ingress-node, the PCN-ingress MUST change the PCN codepoint to Not-marked.</p>
<p id="rfc.section.5.1.p.4">If a PCN-packet arrives at the PCN-ingress-node with its ECN field already set to a value other than not-ECT, then appropriate action MUST be taken to meet the requirements of <a href="#RFC4774">[RFC4774]</a>. The simplest appropriate action is to just drop such packets. However, this is a drastic action that an operator may feel is undesirable. <a href="#pcn3in1_app_ecn_coexist">Appendix Appendix B</a> provides more information and summarises other alternative actions that might be taken.</p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#pcn3in1_interior_behaviour" id="pcn3in1_interior_behaviour">PCN-interior Node Behaviour</a>
</h1>
<h1 id="rfc.section.5.2.1">
<a href="#rfc.section.5.2.1">5.2.1.</a> <a href="#pcn3in1_common_interior_behaviour" id="pcn3in1_common_interior_behaviour">Behaviour Common to all PCN-interior Nodes</a>
</h1>
<p id="rfc.section.5.2.1.p.1">Interior nodes MUST NOT change not-PCN to any other codepoint.</p>
<p id="rfc.section.5.2.1.p.2">Interior nodes MUST NOT change NM to not-PCN.</p>
<p id="rfc.section.5.2.1.p.3">Interior nodes MUST NOT change ThM to NM or not-PCN.</p>
<p id="rfc.section.5.2.1.p.4">Interior nodes MUST NOT change ETM to any other codepoint.</p>
<h1 id="rfc.section.5.2.2">
<a href="#rfc.section.5.2.2">5.2.2.</a> <a href="#pcn3in1_two_mark_behaviour" id="pcn3in1_two_mark_behaviour">Behaviour of PCN-interior Nodes Using Two PCN-markings</a>
</h1>
<p id="rfc.section.5.2.2.p.1">If the threshold-meter function indicates a need to mark the packet, the PCN-interior node MUST change NM to ThM.</p>
<p id="rfc.section.5.2.2.p.2">If the excess-traffic-meter function indicates a need to mark the packet:</p>

<ul>
<li>the PCN-interior node MUST change NM to ETM;</li>
<li>the PCN-interior node MUST change ThM to ETM.</li>
</ul>
<p id="rfc.section.5.2.2.p.3">If both the threshold meter and the excess-traffic meter indicate the need to mark a packet, the excess traffic marking rules MUST take priority.</p>
<h1 id="rfc.section.5.2.3">
<a href="#rfc.section.5.2.3">5.2.3.</a> <a href="#pcn3in1_interior_one_mark_behaviour" id="pcn3in1_interior_one_mark_behaviour">Behaviour of PCN-interior Nodes Using One PCN-marking</a>
</h1>
<p id="rfc.section.5.2.3.p.1">Some PCN edge behaviours require only one PCN-marking within the PCN-domain. The Single Marking edge behaviour <a href="#I-D.ietf-pcn-sm-edge-behaviour">[I-D.ietf-pcn-sm-edge-behaviour]</a> requires PCN-interior nodes to mark packets using the excess-traffic-meter function <a href="#RFC5670">[RFC5670]</a>. It is possible that future schemes may require only the threshold-meter function. Observant readers may spot an apparent inconsistency between the two following cases. <a href="#pcn3in1_app_rationale_diff_sm">Appendix Appendix D</a> explains the rationale behind this inconsistency.</p>
<h1 id="rfc.section.5.2.3.1">
<a href="#rfc.section.5.2.3.1">5.2.3.1.</a> <a href="#pcn3in1_interior_ETM_only" id="pcn3in1_interior_ETM_only">Marking using only the Excess-traffic-meter Function</a>
</h1>
<p id="rfc.section.5.2.3.1.p.1">The threshold-traffic-meter function SHOULD be disabled and MUST NOT trigger any packet marking.</p>
<p id="rfc.section.5.2.3.1.p.2">The PCN-interior node SHOULD raise a management alarm if it receives a ThM packet, but the frequency of such alarms SHOULD be limited.</p>
<p id="rfc.section.5.2.3.1.p.3">If the excess-traffic-meter function indicates a need to mark the packet:</p>

<ul>
<li>the PCN-interior node MUST change NM to ETM;</li>
<li>the PCN-interior node MUST change ThM to ETM. It SHOULD also raise an alarm as above.</li>
</ul>
<h1 id="rfc.section.5.2.3.2">
<a href="#rfc.section.5.2.3.2">5.2.3.2.</a> <a href="#pcn3in1_interior_ThM_only" id="pcn3in1_interior_ThM_only">Marking using only the Threshold-meter Function</a>
</h1>
<p id="rfc.section.5.2.3.2.p.1">The excess-traffic-meter function SHOULD be disabled and MUST NOT trigger any packet marking.</p>
<p id="rfc.section.5.2.3.2.p.2">The PCN-interior node SHOULD raise a management alarm if it receives an ETM packet, but the frequency of such alarms SHOULD be limited.</p>
<p id="rfc.section.5.2.3.2.p.3">If the threshold-meter function indicates a need to mark the packet:</p>

<ul>
<li>the PCN-interior node MUST change NM to ThM;</li>
<li>the PCN-interior node MUST NOT change ETM to any other codepoint. It SHOULD raise an alarm as above.</li>
</ul>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> <a href="#pcn3in1_egress_behaviour" id="pcn3in1_egress_behaviour">Behaviour of PCN-egress Nodes</a>
</h1>
<p id="rfc.section.5.3.p.1">A PCN-egress-node SHOULD set the not-PCN (00) codepoint on all packets it forwards out of the PCN-domain. </p>
<p id="rfc.section.5.3.p.2">The only exception to this is if the PCN-egress-node is certain that revealing other codepoints outside the PCN-domain won't contravene the guidance given in <a href="#RFC4774">[RFC4774]</a>. For instance, if the PCN-ingress-node has explicitly informed the PCN-egress-node that this flow is ECN-capable, then it might be safe to expose other codepoints. <a href="#pcn3in1_app_ecn_coexist">Appendix Appendix B</a> gives details of how such schemes might work, but such schemes are currently experimental.</p>
<p id="rfc.section.5.3.p.3">If the PCN-domain is configured to use only excess-traffic marking, the PCN-egress node MUST treat ThM as ETM and if only threshold-marking is used it should treat ETM as ThM. However it SHOULD raise a management alarm in either instance since this means there is some misconfiguration in the PCN-domain.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#pcn3in1_Backward_Compatibility" id="pcn3in1_Backward_Compatibility">Backward Compatibility</a>
</h1>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> Backward Compatibility with ECN</h1>
<p id="rfc.section.6.1.p.1">BCP 124 <a href="#RFC4774">[RFC4774]</a> gives guidelines for specifying alternative semantics for the ECN field. It sets out a number of factors to be taken into consideration. It also suggests various techniques to allow the co-existence of default ECN and alternative ECN semantics. The encoding specified in this document uses one of those techniques; it defines PCN-compatible Diffserv codepoints as no longer supporting the default ECN semantics. As such, this document is compatible with BCP 124.</p>
<p id="rfc.section.6.1.p.2">On its own, the 3-in-1 encoding cannot support both ECN marking end-to-end (e2e) and PCN-marking within a PCN-domain. <a href="#pcn3in1_app_ecn_coexist">Appendix Appendix B</a> discusses possible ways to do this, e.g. by carrying e2e ECN across a PCN-domain within the inner header of an IP-in-IP tunnel. Although <a href="#pcn3in1_app_ecn_coexist">Appendix Appendix B</a> recommends various approaches over others, it is merely informative and all such schemes are beyond the normative scope of this document.</p>
<p id="rfc.section.6.1.p.3">In any PCN deployment, traffic can only enter the PCN-domain through PCN-ingress-nodes and leave through PCN-egress-nodes.  PCN-ingress-nodes ensure that any packets entering the PCN-domain have the ECN field in their outermost IP header set to the appropriate PCN codepoint. PCN-egress-nodes then guarantee that the ECN field of any packet leaving the PCN-domain has appropriate ECN semantics. This prevents unintended leakage of ECN marks into or out of the PCN-domain, and thus reduces backward-compatibility issues.</p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> Backward Compatibility with the Baseline Encoding</h1>
<p id="rfc.section.6.2.p.1">A PCN node implemented to use the obsoleted baseline encoding could conceivably have been configured so that the Threshold-meter function marked what is now defined as the ETM codepoint in the 3-in-1 encoding. However, thre is no known deployment of such an implementation and no reason to believe that such an implementation would ever have been built. Therefore, it seems safe to ignore this issue.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#pcn3in1_IANA" id="pcn3in1_IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.7.p.1">This memo includes no request to IANA.</p>
<p id="rfc.section.7.p.2">Note to RFC Editor: this section may be removed on publication as an RFC.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#pcn3in1_Sec_Consider" id="pcn3in1_Sec_Consider">Security Considerations</a>
</h1>
<p id="rfc.section.8.p.1">PCN-marking only carries a meaning within the confines of a PCN-domain. This encoding document is intended to stand independently of the architecture used to determine how specific packets are authorised to be PCN-marked, which will be described in separate documents on PCN-boundary-node behaviour.</p>
<p id="rfc.section.8.p.2">This document assumes the PCN-domain to be entirely under the control of a single operator, or a set of operators who trust each other.  However, future extensions to PCN might include inter-domain versions where trust cannot be assumed between domains. If such schemes are proposed, they must ensure that they can operate securely despite the lack of trust. However, such considerations are beyond the scope of this document.</p>
<p id="rfc.section.8.p.3">One potential security concern is the injection of spurious PCN-marks into the PCN-domain. However, these can only enter the domain if a PCN-ingress-node is misconfigured. The precise impact of any such misconfiguration will depend on which of the proposed PCN-boundary-node behaviours is used, but in general spurious marks will lead to admitting fewer flows into the domain or potentially terminating too many flows.  In either case, good management should be able to quickly spot the problem since the overall utilisation of the domain will rapidly fall.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#pcn3in1_Conclusions" id="pcn3in1_Conclusions">Conclusions</a>
</h1>
<p id="rfc.section.9.p.1">The 3-in-1 PCN encoding uses a PCN-compatible DSCP and the ECN field to encode PCN-marks. One codepoint allows non-PCN traffic to be carried with the same PCN-compatible DSCP and three other codepoints support three PCN marking states with different levels of severity. In general, the use of this PCN encoding scheme presupposes that any tunnel endpoints within the PCN-domain comply with <a href="#RFC6040">[RFC6040]</a>.</p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> <a href="#pcn3in1_Acknowledgements" id="pcn3in1_Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.10.p.1">Many thanks to Phil Eardley for providing extensive feedback, critcism and advice.  Thanks also to Teco Boot, Kwok Ho Chan, Ruediger Geib, Georgios Karaginannis and everyone else who has commented on the document.</p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> <a href="#pcn3in1_Comments_Solicited" id="pcn3in1_Comments_Solicited">Comments Solicited</a>
</h1>
<p id="rfc.section.11.p.1">To be removed by RFC Editor: Comments and questions are encouraged and very welcome. They can be addressed to the IETF Congestion and Pre-Congestion working group mailing list &lt;pcn@ietf.org&gt;, and/or to the authors.</p>
<h1 id="rfc.references">
<a href="#rfc.references">12.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">12.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2474">[RFC2474]</b></td>
<td class="top">
<a href="mailto:kmn@cisco.com" title="Cisco Systems">Nichols, K.</a>, <a href="mailto:slblake@torrentnet.com" title="Torrent Networking Technologies">Blake, S.</a>, <a href="mailto:fred@cisco.com" title="Cisco Systems">Baker, F.</a> and <a href="mailto:black_david@emc.com" title="EMC Corporation">D.L. Black</a>, "<a href="http://tools.ietf.org/html/rfc2474">Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers</a>", RFC 2474, December 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3168">[RFC3168]</b></td>
<td class="top">
<a>Ramakrishnan, K.</a>, <a>Floyd, S.</a> and <a>D. Black</a>, "<a href="http://tools.ietf.org/html/rfc3168">The Addition of Explicit Congestion Notification (ECN) to IP</a>", RFC 3168, September 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5559">[RFC5559]</b></td>
<td class="top">
<a>Eardley, P.</a>, "<a href="http://tools.ietf.org/html/rfc5559">Pre-Congestion Notification (PCN) Architecture</a>", RFC 5559, June 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5670">[RFC5670]</b></td>
<td class="top">
<a>Eardley, P.</a>, "<a href="http://tools.ietf.org/html/rfc5670">Metering and Marking Behaviour of PCN-Nodes</a>", RFC 5670, November 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6040">[RFC6040]</b></td>
<td class="top">
<a>Briscoe, B.</a>, "<a href="http://tools.ietf.org/html/rfc6040">Tunnelling of Explicit Congestion Notification</a>", RFC 6040, November 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">12.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2597">[RFC2597]</b></td>
<td class="top">
<a href="mailto:jh@telia.fi" title="Telia Finland">Heinanen, J.</a>, <a href="mailto:fred@cisco.com" title="Cisco Systems">Baker, F.</a>, <a href="mailto:wweiss@lucent.com" title="Lucent Technologies">Weiss, W.</a> and <a href="mailto:jtw@lcs.mit.edu" title="MIT Laboratory for Computer Science">J. Wroclawski</a>, "<a href="http://tools.ietf.org/html/rfc2597">Assured Forwarding PHB Group</a>", RFC 2597, June 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3246">[RFC3246]</b></td>
<td class="top">
<a>Davie, B.</a>, <a>Charny, A.</a>, <a>Bennet, J.C.R.</a>, <a>Benson, K.</a>, <a>Le Boudec, J.Y.</a>, <a>Courtney, W.</a>, <a>Davari, S.</a>, <a>Firoiu, V.</a> and <a>D. Stiliadis</a>, "<a href="http://tools.ietf.org/html/rfc3246">An Expedited Forwarding PHB (Per-Hop Behavior)</a>", RFC 3246, March 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3540">[RFC3540]</b></td>
<td class="top">
<a>Spring, N.</a>, <a>Wetherall, D.</a> and <a>D. Ely</a>, "<a href="http://tools.ietf.org/html/rfc3540">Robust Explicit Congestion Notification (ECN) Signaling with Nonces</a>", RFC 3540, June 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4594">[RFC4594]</b></td>
<td class="top">
<a>Babiarz, J.</a>, <a>Chan, K.</a> and <a>F. Baker</a>, "<a href="http://tools.ietf.org/html/rfc4594">Configuration Guidelines for DiffServ Service Classes</a>", RFC 4594, August 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4774">[RFC4774]</b></td>
<td class="top">
<a>Floyd, S.</a>, "<a href="http://tools.ietf.org/html/rfc4774">Specifying Alternate Semantics for the Explicit Congestion Notification (ECN) Field</a>", BCP 124, RFC 4774, November 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5127">[RFC5127]</b></td>
<td class="top">
<a>Chan, K.</a>, <a>Babiarz, J.</a> and <a>F. Baker</a>, "<a href="http://tools.ietf.org/html/rfc5127">Aggregation of DiffServ Service Classes</a>", RFC 5127, February 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5129">[RFC5129]</b></td>
<td class="top">
<a>Davie, B.</a>, <a>Briscoe, B.</a> and <a>J. Tay</a>, "<a href="http://tools.ietf.org/html/rfc5129">Explicit Congestion Marking in MPLS</a>", RFC 5129, January 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5462">[RFC5462]</b></td>
<td class="top">
<a>Andersson, L.</a> and <a>R. Asati</a>, "<a href="http://tools.ietf.org/html/rfc5462">Multiprotocol Label Switching (MPLS) Label Stack Entry: "EXP" Field Renamed to "Traffic Class" Field</a>", RFC 5462, February 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5696">[RFC5696]</b></td>
<td class="top">
<a>Moncaster, T.</a>, <a>Briscoe, B.</a> and <a>M. Menth</a>, "<a href="http://tools.ietf.org/html/rfc5696">Baseline Encoding and Transport of Pre-Congestion Information</a>", RFC 5696, November 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5865">[RFC5865]</b></td>
<td class="top">
<a>Baker, F.</a>, <a>Polk, J.</a> and <a>M. Dolly</a>, "<a href="http://tools.ietf.org/html/rfc5865">A Differentiated Services Code Point (DSCP) for Capacity-Admitted Traffic</a>", RFC 5865, May 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-pcn-cl-edge-behaviour">[I-D.ietf-pcn-cl-edge-behaviour]</b></td>
<td class="top">
<a>Charny, A</a>, <a>Huang, F</a>, <a>Karagiannis, G</a>, <a>Menth, M</a> and <a>T Taylor</a>, "<a href="http://tools.ietf.org/html/draft-ietf-pcn-cl-edge-behaviour-10">PCN Boundary Node Behaviour for the Controlled Load (CL) Mode of Operation</a>", Internet-Draft draft-ietf-pcn-cl-edge-behaviour-10, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-pcn-sm-edge-behaviour">[I-D.ietf-pcn-sm-edge-behaviour]</b></td>
<td class="top">
<a>Charny, A</a>, <a>Karagiannis, G</a>, <a>Menth, M</a> and <a>T Taylor</a>, "<a href="http://tools.ietf.org/html/draft-ietf-pcn-sm-edge-behaviour-06">PCN Boundary Node Behaviour for the Single Marking (SM) Mode of Operation</a>", Internet-Draft draft-ietf-pcn-sm-edge-behaviour-06, June 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-pcn-encoding-comparison">[I-D.ietf-pcn-encoding-comparison]</b></td>
<td class="top">
<a>Karagiannis, G</a>, <a>Chan, K</a>, <a>Moncaster, T</a>, <a>Menth, M</a>, <a>Eardley, P</a> and <a>B Briscoe</a>, "<a href="http://tools.ietf.org/html/draft-ietf-pcn-encoding-comparison-06">Overview of Pre-Congestion Notification Encoding</a>", Internet-Draft draft-ietf-pcn-encoding-comparison-06, June 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#pcn3in1_app_DSCP_choice" id="pcn3in1_app_DSCP_choice">Choice of Suitable DSCPs</a>
</h1>
<p id="rfc.section.Appendix A.p.1">This appendix is informative, not normative.</p>
<p id="rfc.section.Appendix A.p.2">The PCN working group chose not to define a single DSCP for use with PCN for several reasons. Firstly, the PCN mechanism is applicable to a variety of different traffic classes. Secondly, Standards Track DSCPs are in increasingly short supply. Thirdly, PCN is not a scheduling behaviour -- rather, it should be seen as being a marking behaviour similar to ECN but intended for inelastic traffic. The choice of which DSCP is most suitable for a given PCN-domain is dependent on the nature of the traffic entering that domain and the link rates of all the links making up that domain. In PCN-domains with sufficient aggregation, the appropriate DSCPs would currently be those for the Real-Time Treatment Aggregate <a href="#RFC5127">[RFC5127]</a>. The PCN working group suggests using admission control for the following service classes (defined in <a href="#RFC4594">[RFC4594]</a>): <a href="#RFC5865">[RFC5865]</a>.</p>

<ul>
<li>Telephony (EF)</li>
<li>Real-time interactive (CS4)</li>
<li>Broadcast Video (CS3)</li>
<li>Multimedia Conferencing (AF4)</li>
</ul>

<p> CS5 is excluded from this list since PCN is not expected to be applied to signalling traffic. PCN can also be applied to the VOICE-ADMIT codepoint defined in </p>
<p id="rfc.section.Appendix A.p.3">PCN-marking is intended to provide a scalable admission-control mechanism for traffic with a high degree of statistical multiplexing.  PCN-marking would therefore be appropriate to apply to traffic in the above classes, but only within a PCN-domain containing sufficiently aggregated traffic. In such cases, the above service classes may well all be subject to a single forwarding treatment (treatment aggregate <a href="#RFC5127">[RFC5127]</a>). However, this does not imply all such IP traffic would necessarily be identified by one DSCP -- each service class might keep a distinct DSCP within the highly aggregated region <a href="#RFC5127">[RFC5127]</a>.</p>
<p id="rfc.section.Appendix A.p.4">Additional service classes may be defined for which admission control is appropriate, whether through some future standards action or through local use by certain operators, e.g., the Multimedia Streaming service class (AF3). This document does not preclude the use of PCN in more cases than those listed above.</p>
<p id="rfc.section.Appendix A.p.5">Note: The above discussion is informative not normative, as operators are ultimately free to decide whether to use admission control for certain service classes and whether to use PCN as their mechanism of choice.</p>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> <a href="#pcn3in1_app_ecn_coexist" id="pcn3in1_app_ecn_coexist">Co-existence of ECN and PCN</a>
</h1>
<p id="rfc.section.Appendix B.p.1">This appendix is informative, not normative.</p>
<p id="rfc.section.Appendix B.p.2">The PCN encoding described in this document re-uses the bits of the ECN field in the IP header. Consequently, this disables ECN within the PCN domain. Appendix B of <a href="#RFC5696">[RFC5696]</a> (obsoleted) included advice on handling ECN traffic within a PCN-domain. This appendix reiterates and clarifies that advice.</p>
<p id="rfc.section.Appendix B.p.3">For the purposes of this appendix we define two forms of traffic that might arrive at a PCN-ingress node. These are Admission-controlled traffic and Non-admission-controlled traffic.</p>
<p id="rfc.section.Appendix B.p.4">Admission-controlled traffic will be remarked to a PCN-compatible DSCP by the PCN-ingress node. Two mechanisms can be used to identify such traffic: </p>

<ol style="list-style-type: lower-alpha">
<li>flow signalling associates a filterspec with a need for admission control (e.g. through RSVP or some equivalent message, e.g. from a SIP server to the ingress), and the PCN-ingress remarks traffic matching that filterspec to a PCN-compatible DSCP, as its chosen admission control mechanism.</li>
<li>Traffic arrives with a DSCP that implies it requires admission control such as VOICE-ADMIT <a href="#RFC5865">[RFC5865]</a> or Interactive Real-Time, Broadcast TV when used for video on demand, and Multimedia Conferencing <a href="#RFC4594">[RFC4594]</a><a href="#RFC5865">[RFC5865]</a>.</li>
</ol>
<p id="rfc.section.Appendix B.p.5">All other traffic can be thought of as Non-admission-controlled (and therefore outside the scope of PCN). However such traffic may still need to share the same DSCP as the Admission-controlled traffic. This may be due to policy (for instance if it is high priority voice traffic), or may be because there is a shortage of local DSCPs. </p>
<p id="rfc.section.Appendix B.p.6">ECN <a href="#RFC3168">[RFC3168]</a> is an end-to-end congestion notification mechanism. As such it is possible that some traffic entering the PCN-domain may also be ECN capable.</p>
<p id="rfc.section.Appendix B.p.7">Unless specified otherwise, for any of the cases in the list below, an IP-in-IP tunnel can be used to preserve ECN markings across the PCN domain. However the tunnelling action should be applied wholly outside the PCN-domain as illustrated in the following figure:</p>
<div id="#rfc.figure.2"></div>
<div id="#pcn3in1_Fig_Tunnel"></div>
<pre>
             ,  .  .  .  .  .  PCN-domain  .  .  .  .  .  .
            .   ,--------.                   ,--------.    .
           .   _|  PCN-   |___________________|  PCN-  |_   .
           .  / | ingress |                   | egress | \  .
            .|  '---------'                   '--------'  |.
             | .  .  .  .  .  .  .  .  .  .  .  .  .  .  .|
        ,--------.                                     ,--------.     
  _____| Tunnel  |                                     | Tunnel |____
       | Ingress | - - ECN preserved inside tunnel - - | Egress |
       '---------'                                     '--------'  
</pre>
<p id="rfc.section.Appendix B.p.8">There are four cases for how e2e ECN traffic may wish to be treated while crossing a PCN domain: </p>

<dl>
<dt>ECN capable traffic that does not require admission control and does             not carry a DSCP that the PCN-ingress is using for PCN-capable traffic.</dt>
<dd style="margin-left: 8">This requires no action.</dd>
<dt>ECN capable traffic that does not require admission control but carries a DSCP that the             PCN-ingress is using for PCN-capable traffic.</dt>
<dd style="margin-left: 8">There are two options.</dd>
<dt></dt>
<dd style="margin-left: 8">
<ul>
<li>The ingress maps the DSCP to a local DSCP with the same scheduling PHB as the original DSCP, and the egress re-maps it to the original PCN-compatible DSCP.</li>
<li>The ingress tunnels the traffic, setting not-PCN in the outer header; note that this turns off ECN for this traffic within the PCN domain.</li>
</ul>
<p> The first option is recommended unless the operator is short of local DSCPs.</p>
</dd>
<dt>ECN-capable Admission-controlled traffic:</dt>
<dd style="margin-left: 8">There are two options.</dd>
<dt></dt>
<dd style="margin-left: 8">
<ul>
<li>The PCN-ingress places this traffic in a tunnel with a PCN-compatible DSCP in the outer header. The PCN-egress zeroes the ECN-field before decapsulation.</li>
<li>The PCN-ingress drops CE-marked packets and the PCN-egress zeros the ECN field of all PCN packets.</li>
</ul>
<p> The second option is emphatically not recommended, unless perhaps as a last resort if tunnelling is not possible for some insurmountable reason.</p>
</dd>
<dt>ECN-capable Admission-controlled traffic where the e2e transport somehow indicates that it wants to see PCN marks:</dt>
<dd style="margin-left: 8">NOTE this is currently tentative only.</dd>
<dt></dt>
<dd style="margin-left: 8">Schemes have been suggested where PCN marks may be leaked out of the PCN-domain and used by the end hosts to modify realtime data rates. Currently all such schemes require further study and the following is for guidance only.</dd>
<dt></dt>
<dd style="margin-left: 8">The PCN-ingress needs to tunnel the traffic, taking care to comply with <a href="#RFC6040">[RFC6040]</a>. In this case the PCN-egress should not zero the ECN field, and then the <a href="#RFC6040">[RFC6040]</a> tunnel egress will preserve any PCN-marking. Note that a PCN interior node may turn ECT(0) into ECT(1), which would not be compatible with the (currently experimental) ECN nonce <a href="#RFC3540">[RFC3540]</a>.</dd>
</dl>
<h1 id="rfc.appendix.Appendix C">
<a href="#rfc.appendix.Appendix%20C">Appendix C.</a> <a href="#pcn3in1_app_map_IP_MPLS" id="pcn3in1_app_map_IP_MPLS">Example Mapping between Encoding of PCN-Marks in IP and in MPLS Shim Headers</a>
</h1>
<p id="rfc.section.Appendix C.p.1">This appendix is informative not normative.</p>
<p id="rfc.section.Appendix C.p.2">The 6 bits of the DS field in the IP header provide for 64 codepoints. When encapsulating IP traffic in MPLS, it is useful to make the DS field information accessible in the MPLS header. However, the MPLS shim header has only a 3-bit traffic class (TC) field <a href="#RFC5462">[RFC5462]</a> providing for 8 codepoints. The operator has the freedom to define a site-local mapping of a subset of the 64 codepoints of the DS field to the 8 codepoints in the TC field.</p>
<p><a href="#RFC5129">[RFC5129]</a> describes how ECN markings in the IP header can also be mapped to codepoints in the MPLS TC field. Appendix A of <a href="#RFC5129">[RFC5129]</a> gives an informative description of how to support PCN in MPLS by extending the way MPLS supports ECN. But <a href="#RFC5129">[RFC5129]</a> was written while PCN specifications were in early draft stages. The following provides a clearer example of a mapping between PCN in IP and in MPLS using the PCN terminology and concepts that have since been specified.</p>
<p id="rfc.section.Appendix C.p.4">To support PCN in a MPLS domain, codepoints for all used PCN-marks need to be provided in the TC field. That means, when e.g. only excess-traffic-marking is used for PCN purposes, the operator needs to define a site-local mapping to codepoints in the MPLS TC field for IP headers with: </p>

<ul>
<li>DSCP n and ECT(0)</li>
<li>DSCP n and CE</li>
</ul>

<p> If both excess-traffic-marking and threshold-marking are used, the operator needs to define a site-local mapping to codepoints in the MPLS TC field for IP headers with all three of the 3-in-1 codepoints: </p>

<ul>
<li>DSCP n and ECT(0)</li>
<li>DSCP n and ECT(1)</li>
<li>DSCP n and CE</li>
</ul>
<p id="rfc.section.Appendix C.p.5">In either case, if the operator wishes to support the same Diffserv PHB but without PCN marking, it will also be necessary to define a site-local mapping to an MPLS TC codepoint for IP headers marked with: </p>

<ul><li>DSCP n and Not-ECT</li></ul>
<h1 id="rfc.appendix.Appendix D">
<a href="#rfc.appendix.Appendix%20D">Appendix D.</a> <a href="#pcn3in1_app_rationale_diff_sm" id="pcn3in1_app_rationale_diff_sm">Rationale for different behaviours for single marking schemes</a>
</h1>
<p id="rfc.section.Appendix D.p.1">Readers may notice an apparent discrepancy between the two single marking behaviours in <a href="#pcn3in1_interior_ETM_only">Section 5.2.3.1</a> and <a href="#pcn3in1_interior_ThM_only">Section 5.2.3.2</a>.  For the excess-traffic only marking an unexpected ThM marked packet is remarked as ETM.  For the threshold only marking, an unexpected ETM marked packet is simply ignored (apart from an optional management alarm).</p>
<p id="rfc.section.Appendix D.p.2">There are two reasons for having these seemingly contradictory requirements. Firstly these behaviours conform with the expected behaviour where both metering functions are being used for marking--ETM is always a more severe marking than ThM and so should never be re-marked.  Secondly the threshold-metering behaviour in <a href="#RFC5670">[RFC5670]</a> uses the current marking state of the arriving packet to determine what action to take. Consequently, in the ETM only marking it would be potentially unsafe to allow ThM packets to propagate forward in the network as they may adversely affect the threshold-metering function.</p>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Bob Briscoe</span> 
	  <span class="n hidden">
		<span class="family-name">Briscoe</span>
	  </span>
	</span>
	<span class="org vcardline">BT</span>
	<span class="adr">
	  <span>B54/77, Adastral Park</span>
<span>Martlesham Heath</span>

	  <span class="vcardline">
		<span class="locality">Ipswich</span>,  
		<span class="region"></span>
		<span class="code">IP5 3RE</span>
	  </span>
	  <span class="country-name vcardline">UK</span>
	</span>
	<span class="vcardline">Phone: +44 1473 645196</span>

<span class="vcardline">EMail: <a href="mailto:bob.briscoe@bt.com">bob.briscoe@bt.com</a></span>

<span class="vcardline">URI: <a href="http://bobbriscoe.net/">http://bobbriscoe.net/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Toby Moncaster</span> 
	  <span class="n hidden">
		<span class="family-name">Moncaster</span>
	  </span>
	</span>
	<span class="org vcardline">Moncaster Internet Consulting</span>
	<span class="adr">
	  <span>Dukes</span>
<span>Layer Marney</span>

	  <span class="vcardline">
		<span class="locality">Colchester</span>,  
		<span class="region"></span>
		<span class="code">CO5 9UZ</span>
	  </span>
	  <span class="country-name vcardline">UK</span>
	</span>
	<span class="vcardline">Phone: +44 7764 185416</span>

<span class="vcardline">EMail: <a href="mailto:toby@moncaster.com">toby@moncaster.com</a></span>

<span class="vcardline">URI: <a href="http://www.moncaster.com/">http://www.moncaster.com/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Michael Menth</span> 
	  <span class="n hidden">
		<span class="family-name">Menth</span>
	  </span>
	</span>
	<span class="org vcardline">University of Tuebingen</span>
	<span class="adr">
	  <span>Sand 13</span>

	  <span class="vcardline">
		<span class="locality">Tuebingen</span>,  
		<span class="region"></span>
		<span class="code">72076</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">Phone: +49 7071 2970505</span>

<span class="vcardline">EMail: <a href="mailto:menth@informatik.uni-tuebingen.de">menth@informatik.uni-tuebingen.de</a></span>

  </address>
</div>

</body>
</html>