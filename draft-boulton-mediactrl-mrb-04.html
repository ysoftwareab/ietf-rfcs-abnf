<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Media Resource
		Brokering</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Media Resource
		Brokering">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">C. Boulton</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">NS-Technologies</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">L. Miniero</td></tr>
<tr><td class="header">Expires: September 5, 2009</td><td class="header">University of Napoli</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">March 04, 2009</td></tr>
</table></td></tr></table>
<h1><br />Media Resource
		Brokering<br />draft-boulton-mediactrl-mrb-04</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 5, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>The MediaCtrl work group in the IETF is currently proposing an architecture 
			for controlling media services.  The Session Initiation Protocol (SIP) will be used as 
			the signalling protocol which provides many inherent capabilities for 
			message routing.  In addition to such signalling properties, a need 
			exists for intelligent, application level media service selection based 
			on non-static signalling properties.  This is especially true when considered in 
			conjunction with deployment architectures that include 1:M and M:M combinations 
			of Application Servers and Media Servers. 	
			
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#sec:Introduction">1.</a>&nbsp;
Introduction<br />
<a href="#Terminology">2.</a>&nbsp;
Conventions and Terminology<br />
<a href="#sec:Problem">3.</a>&nbsp;
Problem Discussion<br />
<a href="#sec:Deployment">4.</a>&nbsp;
Deployment Scenario Options <br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Query">4.1.</a>&nbsp;
Query MRB<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Query_hybrid">4.1.1.</a>&nbsp;
Hybrid Query MRB<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Inline">4.2.</a>&nbsp;
In-Line MRB<br />
<a href="#sec:Interfaces">5.</a>&nbsp;
Interface Definition<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:MS_Pub">5.1.</a>&nbsp;
Media Server Resource Publishing Interface<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Res_Cons">5.2.</a>&nbsp;
Media Service Resource Consumer Interface<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Media_Request">5.2.1.</a>&nbsp;
Media Service Resource Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Media_Response">5.2.2.</a>&nbsp;
Media Service Resource Response<br />
<a href="#sec:consumer_xml">6.</a>&nbsp;
Media Service Resource Consumer Interface XML Schema<br />
<a href="#anchor1">7.</a>&nbsp;
Acknowledgments<br />
<a href="#anchor2">8.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="sec:Introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The topic of Media Resources has been in discussion for a number of years with 
		varying proprietary solutions being used today.  It is clear that, as we move towards
		a consistent architecture and protocol for Media Server Control, a standard mechanism 
		is required for accurate media resource location.
</p>
<p>As IP based multimedia infrastructures mature, the complexity and demands from 
		deployments increase.  Such complexity will result in a wide variety of capabilities
		from a range of vendors that should all be interoperable using the architecture
		and protocols produced by the MediaCtrl work group.  It should be possible 
		for a controlling entity to be assisted in Media Server selection so that 
		the most appropriate resource is selected for a particular operation.  The
	       	importance increases when you introduce a flexible level of deployment scenarios, 
		as specified in the <a class='info' href='#I-D.ietf-mediactrl-requirements'>MediaCtrl
		Requirements<span> (</span><span class='info'>Dolly, M. and R. Even, &ldquo;Media Server Control Protocol Requirements,&rdquo; February&nbsp;2008.</span><span>)</span></a> [I&#8209;D.ietf&#8209;mediactrl&#8209;requirements] and <a class='info' href='#I-D.ietf-mediactrl-architecture'>MediaCtrl
		Architecture<span> (</span><span class='info'>Melanchuk, T., &ldquo;An Architectural Framework for Media Server Control,&rdquo; November&nbsp;2008.</span><span>)</span></a> [I&#8209;D.ietf&#8209;mediactrl&#8209;architecture] documents.  
		These documents make statements like
		&quot;it should be possible to have a many-to-many relationship between Application 
		Servers and Media Servers that use this protocol&quot;.  This leads to the following 
		deployment architectures being possible when considering media resources.
		
</p>
<p>The simplest deployment view is illustrated in <a class='info' href='#fig:arch1'>Figure&nbsp;1<span> (</span><span class='info'>Basic Architecture</span><span>)</span></a>. 
		
</p><br /><hr class="insert" />
<a name="fig:arch1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


+---+-----+---+                         +---+-----+---+
| Application |                         |    Media    |
|   Server    |&lt;-------MS Control------&gt;|    Server   |
+-------------+                         +-------------+


</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Basic Architecture&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>This simply involves a single Application Server and Media Server.  Expanding 
		on this view, it is also possible for an Application Server to be controlling 
		multiple (greater that 1) Media Servers.  This deployment view is illustrated in 
		<a class='info' href='#fig:arch2'>Figure&nbsp;2<span> (</span><span class='info'>Basic Architecture</span><span>)</span></a>.  Typically, such architectures are associated with 
		application logic that requires high demand media services.  It is more than possible 
		that each media server possesses a different media capability set.  Media servers 
		may offer different media services as specified in the Mediactrl architecture document. 
		A Media server may have similar media functionality but may have different capacity 
		or media codec support.
</p><br /><hr class="insert" />
<a name="fig:arch2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


                         		+---+-----+---+
                       		 	|    Media    |
				 +-----&gt;|    Server   |
                          	 |	+-------------+
                                 |
+---+-----+---+                  |      +---+-----+---+
| Application |                  |      |    Media    |
|   Server    |&lt;--MS Control-----+-----&gt;|    Server   |
+-------------+                  |      +-------------+
                                 |
                                 |      +---+-----+---+
                       		 +-----&gt;|    Media    |
          				|    Server   |
                          		+-------------+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Basic Architecture&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p><a class='info' href='#fig:arch3'>Figure&nbsp;3<span> (</span><span class='info'>Basic Architecture</span><span>)</span></a> conveys the opposite view to that in <a class='info' href='#fig:arch2'>Figure&nbsp;2<span> (</span><span class='info'>Basic Architecture</span><span>)</span></a>.  
		In this model there are a number of (greater than 1) application servers controlling a 
		single media server.  Typically, such architectures are associated with application 
	       	logic that requires low demand media services.	
		
</p><br /><hr class="insert" />
<a name="fig:arch3"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

+---+-----+---+
| Application |
|   Server    |&lt;-----+
+-------------+      |
                     |
+---+-----+---+      |                  +---+-----+---+
| Application |      |                  |    Media    |
|   Server    |&lt;-----+-----MS Control--&gt;|    Server   |
+-------------+      |                  +-------------+
                     |
+---+-----+---+      |
| Application |      |
|   Server    |&lt;-----+
+-------------+


</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Basic Architecture&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The final deployment view is the most complex.  In this model (M:M) there 
	exists any number of Application Servers and any number of Media Servers.  It is  
	again possible in this model that media servers might not be homogenous and have 
	different capability sets.
</p><br /><hr class="insert" />
<a name="fig:arch4"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

+---+-----+---+                         +---+-----+---+
| Application |                         |    Media    |
|   Server    |&lt;-----+            +----&gt;|    Server   |
+-------------+      |            |     +-------------+
                     |            |
+---+-----+---+      |            |     +---+-----+---+
| Application |      |            |     |    Media    |
|   Server    |&lt;-----+-MS Control-+----&gt;|    Server   |
+-------------+      |            |     +-------------+
                     |            |
+---+-----+---+      |            |     +---+-----+---+
| Application |      |            +----&gt;|    Media    |
|   Server    |&lt;-----+                  |    Server   |
+-------------+                         +---+-----+---+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Basic Architecture&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>This document will take a look at the specific problem areas related 
		to such deployment architectures.  It is recognised that the solutions 
		proposed in this document should be equally adaptable to all of the 
		previously described deployment models.  It is also recognised that 
		the solution is far more relevant to some of the previously discussed 
	       	deployment models and can almost be viewed as redundant
		on others.
</p>
<a name="Terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions and Terminology</h3>

<p>In this document, <a class='info' href='#RFC2119'>BCP 14/RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119]
	defines the key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
	NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY",
	and "OPTIONAL".  In addition, BCP 15 indicates requirement levels for
	compliant implementations.
</p>
<p>This document inherits terminology proposed in the
	<a class='info' href='#I-D.ietf-mediactrl-architecture'>MediaCtrl Architecture<span> (</span><span class='info'>Melanchuk, T., &ldquo;An Architectural Framework for Media Server Control,&rdquo; November&nbsp;2008.</span><span>)</span></a> [I&#8209;D.ietf&#8209;mediactrl&#8209;architecture] and
	<a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>Media Control Channel Framework<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework] documents.  
	In addition, the following terms are defined for use in this document and for 
	use in the context of the MediaCtrl Work group in the IETF:
			
</p>
<blockquote class="text"><dl>
<dt>Media Resource Broker (MRB):</dt>
<dd>A logical entity that is responsible for both 
	collection of appropriate published Media Server (MS) information and supplying of appropriate
	MS information to consuming entities.
</dd>
<dt>Query MRB:</dt>
<dd>An instantiation of an MRB (See previous definition) that provides 
	an interface for an Application Server to retrieve the location of an appropriate Media Server.  The result 
	returned to the Application Server can be influenced by information contained in the query 
	request.
</dd>
<dt>In-line MRB:</dt>
<dd>An instantiation of an MRB (See definition) that directly receives 
	requests on the signalling path.  The decision making process is totally delegated to the 
	MRB.
</dd>
</dl></blockquote><p>

</p>
<a name="sec:Problem"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Problem Discussion</h3>

<p>It is clear from <a class='info' href='#sec:Introduction'>Section&nbsp;1<span> (</span><span class='info'>Introduction</span><span>)</span></a> that the MediaCtrl group will 
		be producing a solution that must service a wide variety of deployment architectures.  
		These range from the simplest 1:1 relationship between Media Servers and Application 
		Servers to potentially linearly scaling 1:M, M:1 and M:M deployments.
</p>
<p>This still does not seem like a major issue for the proposed solution until 
		you add a number of additional factors into the equation that increase 
		complexity.  As Media Servers evolve it must be taken into consideration that, 
		where many can exist in a deployment, they may not have been produced by the same 
		vendor and may not have the same capability set.  It should be possible for an 
		Application Server that exists in a deployment to select a Media Service based 
		on a common, appropriate capability set.  In conjunction with capabilities, it is 
		also important to take available resources into consideration.  The ability 
		to select an appropriate Media Service function is an extremely useful  
		feature but becomes even more powerful when considered in conjunction with 
		available resources for servicing a request.
</p>
<p>In conclusion, the intention is to create a tool set that allows MediaCtrl 
		deployments to effectively utilize the available media resources.  It should 
		be noted that in the simplest deployments where only a single media server exists, 
		an MRB function is probably not required.  Only a single capability set exists 
		and resource unavailability can be handled using the appropriate underlying 
		signalling e.g. SIP response.  This document does not prohibit such uses of 
		an MRB, it simply provides the tools for various entities to interact 
		where appropriate.  It is also worth noting that the tools provided 
       		in this document aim to provide a 'best effort' view of media resources 
		at the time of request for initial Media Server routing decisions.  Any 
		dramatic change in media capabilities after a request has taken place
		should be handled by the underlying protocol.
</p>
<a name="sec:Deployment"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Deployment Scenario Options </h3>

<p>On researching Media Resource Brokering it became clear that a couple of high level 
		models exist.  The general principles of &quot;in-line&quot; and &quot;query&quot; 
		MRB concepts are discussed in the rest of this section.
		
</p>
<a name="sec:Query"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Query MRB</h3>

<p>The &quot;Query&quot; model for MRB interactions provides the ability for 
		a client of media services (for example an Application Server) to 
		&quot;ask&quot; an MRB for an appropriate Media Server, as illustrated 
		in <a class='info' href='#fig:arch5'>Figure&nbsp;5<span> (</span><span class='info'>Query MRB</span><span>)</span></a>.
		
</p><br /><hr class="insert" />
<a name="fig:arch5"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                     +---+-----+---+
       +------------&gt;|     MRB     |&lt;----------+----&lt;-----+---+
       |             +-------------+        (1)|          |   |
       |                                       |          |   |
       |(2)                             +---+--+--+---+   |   |
       |                                |    Media    |   |   |
       |                          +----&gt;|    Server   |   |   |
       |                          |     +-------------+   |   |
       |                          |                    (1)|   |
+---+--+--+---+                   |     +---+-----+---+   |   |
| Application |                   |     |    Media    |   |   |
|   Server    |&lt;-----+-MS Control-+----&gt;|    Server   |-&gt;-+   |
+-------------+          (3)      |     +-------------+       |
                                  |                           |
                                  |     +---+-----+---+    (1)|
                                  +----&gt;|    Media    |       |
				        |    Server   |---&gt;---+
                                        +---+-----+---+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Query MRB&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>In this deployment, the Media Servers use the &quot;Media Server Resource 
		Publishing Interface&quot;, as discussed in <a class='info' href='#sec:MS_Pub'>Section&nbsp;5.1<span> (</span><span class='info'>Media Server Resource Publishing Interface</span><span>)</span></a>, to 
		convey capability sets as well as resource information.  This is depicted 
		by (1) in <a class='info' href='#fig:arch5'>Figure&nbsp;5<span> (</span><span class='info'>Query MRB</span><span>)</span></a>.  It is then the MRB's responsibility to 
		accumulate all appropriate information relating to media services in the 
		logical deployment cluster.  The Application Server (or other media 
		services client) is then able to query the MRB for an appropriate resource (as 
		identified by (2) in <a class='info' href='#fig:arch5'>Figure&nbsp;5<span> (</span><span class='info'>Query MRB</span><span>)</span></a>).  Such a query would carry 
	       	specific information related to the Media Service required and enable the MRB 
		to provide an increased accuracy in its response.  This particular interface 
		is discussed in &quot;Media Resource Consumer Interface&quot; in 
		<a class='info' href='#sec:Res_Cons'>Section&nbsp;5.2<span> (</span><span class='info'>Media Service Resource Consumer Interface</span><span>)</span></a>.  The Application Server is then able 
		to direct control commands (for example create conference) and Media Dialogs 
		to the appropriate Media Server, as shown by (3) in <a class='info' href='#fig:arch5'>Figure&nbsp;5<span> (</span><span class='info'>Query MRB</span><span>)</span></a>.	
		
</p>
<a name="sec:Query_hybrid"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
Hybrid Query MRB</h3>

<p>As mentioned previously, it is the intention that a tool kit is provided 
		for MRB functionality within a MediaCtrl architecture.  It is expected that in
		specific deployment scenarios the role of the MRB might be co-hosted as a hybrid 
		logical entity with an Application Server, as shown in <a class='info' href='#fig:arch6'>Figure&nbsp;6<span> (</span><span class='info'>Hybrid Query MRB - AS Hosted</span><span>)</span></a>.
		
</p><br /><hr class="insert" />
<a name="fig:arch6"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

       +------------&lt;----------------&lt;---------+----&lt;-----+---+
       |                     (1)               |          |   |
       |                                       |          |   |
       |                                +---+--+--+---+   |   |
       |                                |    Media    |   |   |
       V                          +----&gt;|    Server   |   |   |
+------+------+                   |     +-------------+   |   |
|     MRB     |                   |                       |   |
+---+--+--+---+                   |     +---+-----+---+   |   |
| Application |                   |     |    Media    |   |   |
|   Server    |&lt;-----+-MS Control-+----&gt;|    Server   |-&gt;-+   |
+-------------+                   |     +-------------+       |
                                  |                           |
                                  |     +---+-----+---+       |
                                  +----&gt;|    Media    |       |
				        |    Server   |---&gt;---+
                                        +---+-----+---+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Hybrid Query MRB - AS Hosted&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>This diagram is identical to that in <a class='info' href='#fig:arch5'>Figure&nbsp;5<span> (</span><span class='info'>Query MRB</span><span>)</span></a> with the exception 
		that the MRB is now hosted on the Application Server.  The &quot;Media Server 
		Publishing Interface&quot; is still being used to accumulate resource information 
		at the MRB but as it is co-hosted on the Application Server, the &quot;Media
		Server Consumer Interface&quot; has collapsed.  It might still exist within the 
		Application Server/MRB interaction but this is an implementation issue.  This 
		type of deployment suits a single Application Server environment but it should be noted 
		that a &quot;Media Server Consumer Interface&quot; could then be offered from the
		hybrid if required.	
		
</p>
<p>In a similar manner, the Media Server could also act as a hybrid for the deployment 
		cluster, as illustrated in <a class='info' href='#fig:arch7'>Figure&nbsp;7<span> (</span><span class='info'>Hybrid Query MRB - MS Hosted</span><span>)</span></a>.
		
</p><br /><hr class="insert" />
<a name="fig:arch7"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                (1)                 +---+-----+---+
+---+---+-------------&gt;----------------&gt;-----------&gt;|     MRB     |
|   |   |   +---+--+--+---+                         +---+-----+---+
|   |   +-&lt;-| Application |                         |    Media    |
|   |       |   Server    |&lt;--+-MS Control-+-------&gt;|    Server   |
|   |       +-------------+                   |     +-------------+
|   |                                         |
|   |       +---+--+--+---+                   |
|   +---&lt;---| Application |                   |
|           |   Server    |&lt;--+-MS Control-+--+
|           +-------------+                   |
|                                             |
|           +---+--+--+---+                   |
+---&lt;-------| Application |                   |
            |   Server    |&lt;--+-MS Control-+--+
            +-------------+




</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Hybrid Query MRB - MS Hosted&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>This time the MRB has collapsed and is co-hosted by the Media Server.  The 
		&quot;Media Server Consumer Interface&quot; is still available to the Application 
		Servers (1) to query Media Server resources.  This time the &quot;Media
		Server Publishing Interface&quot; has collapsed onto the Media Server.  It might 
		still exist within the Media Server/MRB interaction but this is an implementation 
		issue.  This type of deployment suits a single Media Server environment but 
		it should be noted that a &quot;Media Server Publishing Interface&quot; could then 
		be offered from the hybrid if required.
		
</p>
<p></p>
<blockquote class="text">
<p>
			[MRB-01] Is this second hybrid topology really useful? The only use case for it seems to be
			for AS[i] to send a request, receive a response, and decide whether or not to place
			a CFW request at all (since only one MS is available). Such a use case makes sense, but
			it may be a bit overkill to make use of the MRB for that. Or should we envisage the possibility
			of having for instance the AS[i] construct a &quot;lighter&quot; CFW request if the MS is
			too loaded, and a &quot;normal&quot; CFW request otherwise?
		
</p>
</blockquote>

<a name="sec:Inline"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
In-Line MRB</h3>

<p>The &quot;In-line&quot; MRB is architecturally different from the &quot;Query&quot; model 
	that was discussed in the previous section.  The Concept of a &quot;Media Server
	Consumer Interface&quot; disappears.  The client of the MRB simply uses the signalling 
	to offload the decision making process - this applies to both media server Control and 
	Media Dialogs.  
	This type of deployment is illustrated in <a class='info' href='#fig:arch8'>Figure&nbsp;8<span> (</span><span class='info'>In-line MRB</span><span>)</span></a>.
	
</p><br /><hr class="insert" />
<a name="fig:arch8"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                            +-------&lt;----------+----&lt;-------+---+
                            |                  | (1)        |   |
                            |                  |            |   |
                            |             +---+--+--+---+   |   |
                            |             |    Media    |   |   |
                            |     +------&gt;|    Server   |   |   |
                            |     |(3)    +-------------+   |   |
                            |     |                      (1)|   |
+---+--+--+---+             |     |       +---+-----+---+   |   |
| Application |  (2) +---+--V--+---+  (3) |    Media    |   |   |
|   Server    |-----&gt;|     MRB     |-----&gt;|    Server   |-&gt;-+   |
+-------------+      +---+-----+---+      +-------------+       |
                                  |                             |
                                  |   (3) +---+-----+---+    (1)|
                                  +------&gt;|    Media    |       |
				          |    Server   |---&gt;---+
                                          +---+-----+---+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8: In-line MRB&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The Media Servers still use the 'Media Server Publishing Interface' to convey 
	capabilities and resources to the MRB - as illustrated by (1).  The media server 
	Control and Media dialogs are blindly sent to the MRB (2) which then selects an 
	appropriate Media Server (3).  The result of such an architecture is that the 
	decision is left entirely to the MRB and the Application Server has no input into 
	the selection process.  This is the opposite to the &quot;Query&quot; model which 
	provided information that would help influence the Media Server decision making 
	process on the application server.  As a by-product of this decision shift, a lot 
	more emphasis is placed 
	on the intelligence of the MRB to interpret the required capabilities of the request.  
	It will actually have to inspect both the SIP 
	signalling and the media server control protocol PDUs for the purpose of Media Server 
	selection.  This includes, for example, looking for explicit capabilities in the 
	signalling and session details such as media types, codecs and bandwidth requirements.  
	Ultimately the decision making and policy enforcement is removed from the 
	Application Server and shifted to the MRB logical entity.	
	
</p>
<p></p>
<blockquote class="text">
<p>
		[MRB-02] How much intelligence should the MRB have in this case? In fact, it's not just
		a matter of capabilities, but of package-specific decisions as well. For instance, let's
		say there's a conference on MS[3]. If AS[2] has created the conference and attaching
		new participants to it, it definitely wouldn't want the MRB to arbitrarily join
		its users on different MS (with having its requests failing anyway, since a non-existing
		conference would be invoked). Should we envisage, as a parameter, something like
		a &quot;context&quot; or an &quot;application session&quot;? Considering no AS would
		be able to decide to invoke a specific MS, such a parameter would be the only (or at least
		a possibly working) way of letting an AS tell the MRB &quot;this request is part of
		this specific application logic context, and so using a different MS would make it
		all collapse&quot;.
	
</p>
</blockquote>

<a name="sec:Interfaces"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Interface Definition</h3>

<p>As discussed in previous sections in this document, the intention is to 
	provide a toolkit for a variety of deployment architectures where media resource 
	brokering can take place.  As a result, two main interfaces are required to 
	support the differing requirements.  The two interfaces are described in the 
	remainder of this section and have been named the 'Media Server Resource
	Publishing' and Media Server Resource Consumer' interfaces.  These two 
	interfaces have extremely differing responsibilities and usages which is
	reflected in the choice of solutions.
	
</p>
<p>It is beyond the scope of this document to define exactly how to 
	construct an MRB.  This includes interpreting the data for the Media Service 
	Consumer interface supplied by the Media Server Publishing interface.  It 
	is, however, important that the two interfaces are complimentary so that 
	development of appropriate MRB functionality is supported.
</p>
<a name="sec:MS_Pub"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Media Server Resource Publishing Interface</h3>

<p>The Media Server Resource Publishing interface is responsible for 
		providing an MRB with appropriate Media Server resource information.  
		It is generally accepted that this interface provides both general 
		and specific details related to Media Server resources.  This 
		information needs to be conveyed using an industry standard mechanism 
		to provide increased levels of adoption and interoperability.  A
		Control Package for the Media Control Channel Framework will be specified to fulfill this interface
		requirement.  It provides the perfect establishment and monitoring
		mechanism to enable a Media Server to report appropriate statistics
		to an MRB.
		
</p>
<p>
</p>
<p>[EDITORS NOTE: The use of the Media Control Channel Framework is still up for debate.  This should
		be revisited and discussed appropriately.  It is fair to say that Media Servers will
		already support the base Media Control Channel Framework and so adding this extra auditing
		facility provides nice synergy and reuse.]
</p>
<p>EDITORS NOTE: Need to map resources to a control package and define appropriately.  The following 
		information has been taken from feedback from the community.  Please comment on existing 
		entries and any other that you feel should be added to the list.  Note that some of the 
		publishing topics would naturally be included in the 'AS Request to MRB' section
	       	that follows.  At this stage it is only included in one place for further discussion:
</p>
<p></p>
<blockquote class="text">
<p>
			[MRB-03] Should we talk of a new Control Package and/or of additional requirements to the auditing
			mechanism for each package? Some of the addressable resources are generically MS-related
			(e.g. how many G711 sessions you have available, since it affects the SIP negotiations with new
			UACs), but some look like information that only packages would be able to provide.
		
</p>
</blockquote>

<p>	</p>
<ul class="text">
<li>Active RTP sessions (including codec information).  For example, 10 G711 
			RTP sessions, 3 H.264 sessions.
</li>
<li>
<ul class="text">
<li>
				[MRB-04] This may not be required, since the purpose of the MRB is to check for
				available resources rather than occupied resources. Nevertheless, such details
				might be useful for complementary functionality as debugging and monitoring inside
				the MRB. What are your feelings about it?
			
</li>
</ul>
</li>
<li> Active Mixers.  For example F4: (2 G711, 3 G729), (second mixer and the codecs),
			(third mixer), ...).
</li>
<li>Non Active sessions - so sessions available on this MS
			(based on codecs supported).  For example, 80 G711 RTP 
			session,120 G729 sessions,30 H.264 sessions.
</li>
<li>
<ul class="text">
<li>
				[MRB-05] Should this be an AND or an OR? (e.g. an AS takes all the 80 G711 RTP sessions,
				are the G729 sessions still available as well or were the specified resources shared?)
			
</li>
</ul>
</li>
<li>MS Uptime.
</li>
<li>Codecs/media supported (could just be bundled with above 'Non 
			Active Sessions'.
</li>
<li>In addition to the generic media processing related information,
     			there are definitely cases where the AS will want to specify
     			application-level criteria, which will be application-specific,
     			and difficult to enumerate in advance. So I'm thinking we
     			need a way to express arbitrary application specific criteria
     			in addition to the generic media processing criteria.
     			For example, the AS may need an MS which is capable of prompting
     			and performing speech recognition in Swahili. Or, an MS which
     			has the capability to invoke some application-specific
			functionality. 
</li>
<li>File formats supported for announcement. E.g.: MP3, WAW etc... May
     			be this information is enough to determine announcement format
     			supported i.e. audio or video.
</li>
<li>Maximum duration for an announcement. Media servers can have
     			restrictions on memory to play the announcements for very long
     			durations.
</li>
<li>Variable announcements. Where the substitution variable can be
     			time, date, cost etc.
</li>
<li>DTMF detection and generation support.
</li>
<li>Types of mixing (conference supported) audio, video.
</li>
<li>Supported tone types in the Media Server. Different countries
     			may have different characteristics for the same tone. So the
     			tone characteristics can be configured in the media server or
     			can be downloaded. Capability to play the tone in both
			directions may be required for conferencing applications.  E.g. 
			playing a tone when a new participant joins in the
     			conference. The tone needs to be played towards the existing
     			participants and also towards the new participant.
</li>
<li>
<ul class="text">
<li>
				[MRB-06] All these features are something that probably fit better in auditing,
				rather than in here (and some are actually already there). What do you think?
			
</li>
</ul>
</li>
<li>Audio RTSP streaming. Audio conferencing. Audio record.
     			Audio transcoding.
</li>
<li>ASR/TTS usage. ASR grammar complexity. Language complexity.
</li>
<li>Speaker verification/recognition.
</li>
<li>Music recognition.
</li>
<li> Audio transformation (mask voice, raise tone, add echo,
     			effects etc.)
</li>
<li>VoiceXML dialogs and their complexity.
</li>
<li>Encryption of audio/video media streams.
</li>
<li>Video transcoding.
</li>
<li>Dynamic or static video frame rate, bit rate or picture
			size adaptation per multimedia stream.
</li>
<li>Video record.
</li>
<li>Video RTSP streaming.
</li>
<li>Media insertion (audio, video, text, picture, logo,
			avatar or background/ambiance) in a multimedia stream.
</li>
<li>Video mixing.
</li>
<li>Video broadcasting.
</li>
<li>Face/shape/image detection/removal.
</li>
<li>
<ul class="text">
<li>
				[MRB-07] Some of these features are not available in any package at the
				moment, but considering that additional packages might be written in the
				feature, it's probably ok to leave them there. What are your feelings about it?
			
</li>
</ul>
</li>
</ul><p> 
</p>
<p></p>
<blockquote class="text">
<p>
				[MRB-08] There's another additional information that might be useful,
				something that might actually fit in the codec-related information. When we
				say MS[i] supports codec X, what kind of support are we talking about? Are
				both encoding and decoding supported? Is it passthrough only (e.g. I understand
				it but I won't transcode)? Can the MS encapsulate an X encoded stream
				according to the proper RFC? Such details would likely provide valuable
				information considering that it would affect how a conference mix,
				a prompt, a recording etc. would work inside the MS. Any comments about it?
			
</p>
</blockquote>

<a name="sec:Res_Cons"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Media Service Resource Consumer Interface</h3>

<p>The Media Server Consumer interface provides the ability for clients of an MRB, 
		such as Application Servers, to request an appropriate Media Server to satisfy
		specific criteria.  The interface allows a client to pass detailed meta-information 
		to the MRB to help select an appropriate Media Server.  The MRB is then able to make 
	       	and informed decision and provide the client with an appropriate media server 
		resource.
</p>
<p>It appears the most appropriate interface for such a 'query' style interface is
		in fact a RESTful type HTTP usage.  Using HTTP and XML combined reduces complexity
		and encourages use of common tools that are widely available in the industry today.
		The following subsections explain the main operations required to request and then
		receive information from an MRB.  The following description will describe the use of
		HTTP <a class='info' href='#RFC2616'>RFC 2616<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616] and HTTPS <a class='info' href='#RFC2818'>RFC 2818<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a> [RFC2818] as
		transport for a query for media resource and
		the appropriate response.  Examples of the interface can be seen in section
		[ref examples section].
</p>
<p></p>
<blockquote class="text">
<p>
				[MRB-09] Are we all ok with this or should we consider/list alternatives?
			
</p>
</blockquote>

<a name="sec:Media_Request"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1"></a><h3>5.2.1.&nbsp;
Media Service Resource Request</h3>

<p>The media resource query is carried in the body of an HTTP/HTTPS
		POST request.  The MIME type contained in the HTTP/HTTPS
		request/reponse should be 'application/mrb+xml'.  This value MUST
		be reflected in the appropriate HTTP headers like 'Content-Type' and
		'Accept'.  The body of the POST request MUST only contain the
		'mediaResourceRequest' element as defined 
		in <a class='info' href='#sec:consumer_xml'>Section&nbsp;6<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a>.  The 'mediaResourceRequest' element
		is the primary container of information related to a media resource
		request and has the following child elements which specify the
		request parameters:
</p>
<a name="sec:mediaResourceRequest"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1.1"></a><h3>5.2.1.1.&nbsp;
<mediaResourceRequest> element</h3>

<p>The &lt;mediaResourceRequest> element provides a container for clients
		wishing to query an external MRB entity.  The &lt;mediaResourceRequest> element has
		the following child elements that are used to provide appropriate
		contextual information relating to the request:

		[Editors Note: Convert groups input into appropriate XML schema.]

		</p>
<ul class="text">
<li>RTP requirements - including media/codec type, codec priority.
</li>
<li>Conference requirements - number of users.
</li>
</ul><p>	
	
	
</p>
<a name="sec:Media_Response"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2"></a><h3>5.2.2.&nbsp;
Media Service Resource Response</h3>

<p>The use of HTTP/HTTPS for carrying the media service resource information
		has no impact on the protocol.  If protocol level operations and errors occur
		then they should be signalled as specified in HTTP <a class='info' href='#RFC2616'>RFC 2616<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616]
		and HTTPS <a class='info' href='#RFC2119'>RFC 2818<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].  A
		successful response to a HTTP POST request containing the 'mediaResourceRequest'
		MUST be responded to with a 200 OK HTTP/HTTPS response message.  This
		signifies that the request was received, was valid and could be
		responded to appropriately.  If the receiving MRB wishes to generate
		information for the requesting entity it MUST include a 'mediaResourceResponse'
		element in the 200 OK HTTP/HTTPS response (as discussed later in this section).  An
		MRB can alternatively return an application level error by including
		a 'mediaResourceError' element in the 200 OK HTTP/HTTPS response (as discussed later
		in this section).
</p>
<p></p>
<blockquote class="text">
<p>
				[MRB-10] As it was discussed when presenting CCMP, the use of 200 to convey responses
				(whether the resource has been found or not) and of error codes to
				handle HTTP-related errors is in contrast with a pure RESTful approach.
				Is it ok to proceed anyway? Or should we &quot;lighten&quot; the REST proposal
				just say something like &quot;it's XML on HTTP&quot;, clarifying that we're not claiming
				to be pure RESTers?
			
</p>
</blockquote>

<a name="sec:mediaResourceResponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2.1"></a><h3>5.2.2.1.&nbsp;
<mediaResourceResponse> element</h3>

<p>The &lt;mediaResourceResponse> element provides a container for the MRB
		to generate a response to a previous query.  The &lt;mediaResourceResponse> element has
		the following child elements that are used to provide appropriate
		contextual information relating to the request:

		[Editors Note: Convert groups input into appropriate XML schema.]

		</p>
<ul class="text">
<li>list of appropriate media server resources (include individual capabilities).
</li>
</ul><p>	
	
	
</p>
<a name="sec:mediaResourceError"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2.2"></a><h3>5.2.2.2.&nbsp;
<mediaResourceError> element</h3>

<p>The &lt;mediaResourceError> element provides a container for the MRB
		to generate an error response to a previous query.  The &lt;mediaResourceError> has
		element the following child elements that are used to provide appropriate
		contextual information relating to the request:

		[Editors Note: Convert groups input into appropriate XML schema.]

		</p>
<ul class="text">
<li>list of appropriate error response codes.
</li>
</ul><p>	
	
	
</p>
<a name="sec:consumer_xml"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Media Service Resource Consumer Interface XML Schema</h3>

<p>This section gives the XML Schema Definition
   [W3C.REC-xmlschema-1-20041028], [W3C.REC-xmlschema-2-20041028] of the
   "application/held+xml" format.
</p><br /><hr class="insert" />
<a name="fig:xml_schema"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0"?&gt;

&lt;xsd:schema
  targetNamespace="urn:ietf:params:xml:ns:mediactrl:mrb"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns:mrb="urn:ietf:params:xml:ns:mediactrl:mrb"
  xmlns:xml="http://www.w3.org/XML/1998/namespace"
  elementFormDefault="qualified"
  attributeFormDefault="unqualified"&gt;

&lt;xsd:import namespace="http://www.w3.org/XML/1998/namespace"
           schemaLocation="http://www.w3.org/2001/xml.xsd"/&gt;
&lt;xsd:element name="mrb-message" type="mrb-message-type" /&gt;

 &lt;xsd:complexType name="mrb-message-type"&gt;
  &lt;xsd:sequence&gt;
  &lt;xsd:choice&gt;
   &lt;xsd:element name="mediaResourceRequest"
             type="mrb:mediaResourceRequestType"/&gt;
   &lt;xsd:element name="mediaResourceResponse"
             type="mrb:mediaResourceResponseType"/&gt;
   &lt;xsd:element name="mediaResourceError"
             type="mrb:mediaResourceErrorType"/&gt;
   &lt;xsd:any namespace="##other" minOccurs="0"
             maxOccurs="unbounded" processContents="lax" /&gt;

  &lt;/xsd:choice&gt;
 &lt;/xsd:sequence&gt;
 &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:complexType name="mediaResourceRequestType"&gt;
  &lt;xsd:complexContent&gt;
      &lt;xsd:sequence&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
             maxOccurs="unbounded" processContents="lax" /&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:complexType name="mediaResourceResponseType"&gt;
  &lt;xsd:complexContent&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:any namespace="##other" minOccurs="0"
             maxOccurs="unbounded" processContents="lax" /&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:complexType name="mediaResourceErrorType"&gt;
  &lt;xsd:complexContent&gt;
      &lt;xsd:choice minOccurs="0" maxOccurs="unbounded"&gt;
        &lt;xsd:any namespace="##other" processContents="strict"/&gt;
      &lt;/xsd:choice&gt;
      &lt;xsd:attribute name="status" type="status.datatype"
            use="required"/&gt;
      &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

 &lt;!-- DATATYPES --&gt;

&lt;xsd:simpleType name="status.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:pattern value="[0-9][0-9][0-9]"/&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;
      &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;/xsd:schema&gt;

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;9&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgments</h3>

<p>The authors would like to thank 
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>Security Considerations to be included in later versions of this document.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2578">[RFC2578]</a></td>
<td class="author-text"><a href="mailto:kzm@cisco.com">McCloghrie, K., Ed.</a>, <a href="mailto:dperkins@snmpinfo.com">Perkins, D., Ed.</a>, and <a href="mailto:schoenw@ibr.cs.tu-bs.de">J. Schoenwaelder, Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2578">Structure of Management Information Version 2 (SMIv2)</a>,&rdquo; STD&nbsp;58, RFC&nbsp;2578, April&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2578.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2579">[RFC2579]</a></td>
<td class="author-text"><a href="mailto:kzm@cisco.com">McCloghrie, K., Ed.</a>, <a href="mailto:dperkins@snmpinfo.com">Perkins, D., Ed.</a>, and <a href="mailto:schoenw@ibr.cs.tu-bs.de">J. Schoenwaelder, Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2579">Textual Conventions for SMIv2</a>,&rdquo; STD&nbsp;58, RFC&nbsp;2579, April&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2579.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2580">[RFC2580]</a></td>
<td class="author-text"><a href="mailto:kzm@cisco.com">McCloghrie, K.</a>, <a href="mailto:dperkins@snmpinfo.com">Perkins, D.</a>, and <a href="mailto:schoenw@ibr.cs.tu-bs.de">J. Schoenwaelder</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2580">Conformance Statements for SMIv2</a>,&rdquo; STD&nbsp;58, RFC&nbsp;2580, April&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2580.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2818">[RFC2818]</a></td>
<td class="author-text">Rescorla, E., &ldquo;<a href="http://tools.ietf.org/html/rfc2818">HTTP Over TLS</a>,&rdquo; RFC&nbsp;2818, May&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2818.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3410">[RFC3410]</a></td>
<td class="author-text">Case, J., Mundy, R., Partain, D., and B. Stewart, &ldquo;<a href="http://tools.ietf.org/html/rfc3410">Introduction and Applicability Statements for Internet-Standard Management Framework</a>,&rdquo; RFC&nbsp;3410, December&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3410.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.CR-wsdl20-20051215">[W3C.CR-wsdl20-20051215]</a></td>
<td class="author-text">Chinnici, R., Moreau, J., Ryman, A., and S. Weerawarana, &ldquo;<a href="http://www.w3.org/TR/2005/CR-wsdl20-20051215">Web Services Description Language (WSDL) Version 2.0 Part 1: Core Language</a>,&rdquo; W3C CR&nbsp;CR-wsdl20-20051215, December&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-soap12-part1-20030624">[W3C.REC-soap12-part1-20030624]</a></td>
<td class="author-text">Mendelsohn, N., Gudgin, M., Moreau, J., Nielsen, H., and M. Hadley, &ldquo;<a href="http://www.w3.org/TR/2003/REC-soap12-part1-20030624">SOAP Version 1.2 Part 1: Messaging Framework</a>,&rdquo; World Wide Web Consortium FirstEdition&nbsp;REC-soap12-part1-20030624, June&nbsp;2003 (<a href="http://www.w3.org/TR/2003/REC-soap12-part1-20030624">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-soap12-part2-20030624">[W3C.REC-soap12-part2-20030624]</a></td>
<td class="author-text">Nielsen, H., Mendelsohn, N., Hadley, M., Moreau, J., and M. Gudgin, &ldquo;<a href="http://www.w3.org/TR/2003/REC-soap12-part2-20030624">SOAP Version 1.2 Part 2: Adjuncts</a>,&rdquo; World Wide Web Consortium FirstEdition&nbsp;REC-soap12-part2-20030624, June&nbsp;2003 (<a href="http://www.w3.org/TR/2003/REC-soap12-part2-20030624">HTML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mediactrl-architecture">[I-D.ietf-mediactrl-architecture]</a></td>
<td class="author-text">Melanchuk, T., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-architecture-04.txt">An Architectural Framework for Media Server Control</a>,&rdquo; draft-ietf-mediactrl-architecture-04 (work in progress), November&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-architecture-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mediactrl-requirements">[I-D.ietf-mediactrl-requirements]</a></td>
<td class="author-text">Dolly, M. and R. Even, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-requirements-04.txt">Media Server Control Protocol Requirements</a>,&rdquo; draft-ietf-mediactrl-requirements-04 (work in progress), February&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-requirements-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mediactrl-sip-control-framework">[I-D.ietf-mediactrl-sip-control-framework]</a></td>
<td class="author-text">Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-sip-control-framework-11.txt">Media Control Channel Framework</a>,&rdquo; draft-ietf-mediactrl-sip-control-framework-11 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-sip-control-framework-11.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Chris Boulton</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">NS-Technologies</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:chris@ns-technologies.com">chris@ns-technologies.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lorenzo Miniero</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Napoli</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:lorenzo.miniero@unina.it">lorenzo.miniero@unina.it</a></td></tr>
</table>
</body></html>
