<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Round-trip Loss Metrics</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Motivation">
<link href="#rfc.section.2" rel="Chapter" title="2 Scope">
<link href="#rfc.section.3" rel="Chapter" title="3 Common Specifications for Round-trip Metrics">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Name: Type-P-*">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Metric Parameters">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Metric Definition">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Metric Units">
<link href="#rfc.section.4" rel="Chapter" title="4 A Singleton Round-trip Loss Metric">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Name: Type-P-Round-trip-Loss">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Metric Parameters">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Definition and Metric Units">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Discussion and other details">
<link href="#rfc.section.5" rel="Chapter" title="5 A Sample Round-trip Loss Metric">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Name: Type-P-Round-trip-Loss-&lt;Sample&gt;-Stream">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Metric Parameters">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Definition and Metric Units">
<link href="#rfc.section.5.4" rel="Chapter" title="5.4 Discussion and other details">
<link href="#rfc.section.6" rel="Chapter" title="6 Round-trip Loss Statistic">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Type-P-Round-trip-Loss-&lt;Sample&gt;-Ratio">
<link href="#rfc.section.7" rel="Chapter" title="7 Round-trip Testing and One-way Reporting">
<link href="#rfc.section.8" rel="Chapter" title="8 Security Considerations">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Denial of Service Attacks">
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 User Data Confidentiality">
<link href="#rfc.section.8.3" rel="Chapter" title="8.3 Interference with the metrics">
<link href="#rfc.section.9" rel="Chapter" title="9 IANA Considerations">
<link href="#rfc.section.10" rel="Chapter" title="10 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="11 References">
<link href="#rfc.references.1" rel="Chapter" title="11.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="11.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="Many user applications (and the transport protocols that make them possible) require two-way communications. To assess this capability, and to achieve test system simplicity, round-trip loss measurements are frequently conducted in practice. The Two-Way Active Measurement Protocol specified in RFC 5357 establishes a round-trip loss measurement capability for the Internet. However, there is currently no metric specified according to the RFC 2330 framework." />
  <meta name="description" content="Many user applications (and the transport protocols that make them possible) require two-way communications. To assess this capability, and to achieve test system simplicity, round-trip loss measurements are frequently conducted in practice. The Two-Way Active Measurement Protocol specified in RFC 5357 establishes a round-trip loss measurement capability for the Internet. However, there is currently no metric specified according to the RFC 2330 framework." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">A. Morton</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">AT&amp;T Labs</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">February 15, 2011</td>
</tr>
<tr>
<td class="left">Expires: August 19, 2011</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Round-trip Loss Metrics<br />
  <span class="filename">draft-ietf-ippm-rt-loss-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>Many user applications (and the transport protocols that make them possible) require two-way communications. To assess this capability, and to achieve test system simplicity, round-trip loss measurements are frequently conducted in practice. The Two-Way Active Measurement Protocol specified in RFC 5357 establishes a round-trip loss measurement capability for the Internet. However, there is currently no metric specified according to the RFC 2330 framework.</p>
<p>This memo adds round-trip loss to the set of IP Performance Metrics (IPPM).</p>
<h1><a>Requirements Language</a></h1>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<p></p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on August 19, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Motivation</a>
</li>
<li>2.   <a href="#rfc.section.2">Scope</a>
</li>
<li>3.   <a href="#rfc.section.3">Common Specifications for Round-trip Metrics</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Name: Type-P-*</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Metric Parameters</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Metric Definition</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Metric Units</a>
</li>
<li>4.   <a href="#rfc.section.4">A Singleton Round-trip Loss Metric</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Name: Type-P-Round-trip-Loss</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Metric Parameters</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Definition and Metric Units</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Discussion and other details</a>
</li>
<li>5.   <a href="#rfc.section.5">A Sample Round-trip Loss Metric</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Name: Type-P-Round-trip-Loss-&lt;Sample&gt;-Stream</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Metric Parameters</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">Definition and Metric Units</a>
</li>
<li>5.4.   <a href="#rfc.section.5.4">Discussion and other details</a>
</li>
<li>6.   <a href="#rfc.section.6">Round-trip Loss Statistic</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Type-P-Round-trip-Loss-&lt;Sample&gt;-Ratio</a>
</li>
<li>7.   <a href="#rfc.section.7">Round-trip Testing and One-way Reporting</a>
</li>
<li>8.   <a href="#rfc.section.8">Security Considerations</a>
</li>
<li>8.1.   <a href="#rfc.section.8.1">Denial of Service Attacks</a>
</li>
<li>8.2.   <a href="#rfc.section.8.2">User Data Confidentiality</a>
</li>
<li>8.3.   <a href="#rfc.section.8.3">Interference with the metrics</a>
</li>
<li>9.   <a href="#rfc.section.9">IANA Considerations</a>
</li>
<li>10.   <a href="#rfc.section.10">Acknowledgements</a>
</li>
<li>11.   <a href="#rfc.references">References</a>
</li>
<li>11.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>11.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">This memo defines a metric for round-trip loss on Internet paths. It builds on the notions and conventions introduced in the IP Performance Metrics (IPPM) framework <a href="#RFC2330">[RFC2330]</a>. Also, the specifications of the One-way Loss metric <a href="#RFC2680">[RFC2680]</a> and the Round-trip Delay metric <a href="#RFC2681">[RFC2681]</a> are frequently referenced and modified to match the round-trip circumstances addressed here. However, this memo assumes that the reader is familiar with the references, and does not repeat material as was done in <a href="#RFC2681">[RFC2681]</a>.</p>
<p id="rfc.section.1.p.2">This memo uses the terms "two-way" and "round-trip" synonymously.</p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Motivation</h1>
<p id="rfc.section.1.1.p.1">Many user applications and the transport protocols that make them possible require two-way communications. For example, the TCP SYN-&gt;, &lt;-SYN-ACK, ACK-&gt; three-way handshake attempted billions of times each day cannot be completed without two-way connectivity in a near-simultaneous time interval. Thus, measurements of Internet round-trip loss performance provide a basis to infer application performance more easily.</p>
<p id="rfc.section.1.1.p.2">Measurement system designers have also recognized advantages of system simplicity when one host simply echoes or reflects test packets to the sender. Round-trip loss measurements are frequently conducted and reported in practice. The Two-Way Active Measurement Protocol specified in <a href="#RFC5357">[RFC5357]</a> establishes a round-trip loss measurement capability for the Internet. However, there is currently no round-trip loss metric specified according to the <a href="#RFC2330">[RFC2330]</a> framework.</p>
<p><a href="#RFC2681">[RFC2681]</a> indicates that round-trip measurements may sometimes encounter "asymmetric" paths. When loss is observed using a round-trip measurement, there is often a desire to ascertain which of the two directional paths "lost" the packet. Under some circumstances, it is possible to make this inference. The round-trip measurement method raises a few complications when interpreting the embedded one-way results, and the user should be aware of them.</p>
<p><a href="#RFC2681">[RFC2681]</a> also points out that loss measurement conducted sequentially in both directions of a path and reported as a round-trip result may be exactly the desired metric. On the other hand, it may be difficult to derive the state of round-trip loss from one-way measurements conducted in each direction unless a method to match the appropriate one-way measurements has pre-arranged.</p>
<p id="rfc.section.1.1.p.5">Finally, many measurement systems report statistics on a conditional delay distribution, where the condition is packet arrival at the destination. This condition is encouraged in <a href="#RFC3393">[RFC3393]</a>, <a href="#RFC5481">[RFC5481]</a>, and [draft-ietf-ippm-reporting-metrics]. As a result, lost packets need to be reported separately, according to a standardized metric. This memo defines such a metric.</p>
<p id="rfc.section.1.1.p.6">See Section 1.1 of<a href="#RFC2680">[RFC2680]</a> for additional motivation of the packet loss metric.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Scope</h1>
<p id="rfc.section.2.p.1">This memo defines a round-trip loss metric using the conventions of the IPPM framework <a href="#RFC2330">[RFC2330]</a>.</p>
<p id="rfc.section.2.p.2">The memo defines a singleton metric, a sample metric, and a statistic, as per <a href="#RFC2330">[RFC2330]</a>.</p>
<p id="rfc.section.2.p.3">The memo also investigates the topic of one-way loss inference from a two-way measurement, and lists some key considerations.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Common Specifications for Round-trip Metrics</h1>
<p id="rfc.section.3.p.1">To reduce the redundant information presented in the detailed metrics sections that follow, this section presents the specifications that are common to two or more metrics. The section is organized using the same subsections as the individual metrics, to simplify comparisons.</p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Name: Type-P-*</h1>
<p id="rfc.section.3.1.p.1">All metrics use the Type-P convention as described in <a href="#RFC2330">[RFC2330]</a>. The rest of the name is unique to each metric.</p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> Metric Parameters</h1>
<p></p>

<ul>
<li>Src, the IP address of a host</li>
<li>Dst, the IP address of a host</li>
<li>T, a time (start of test interval)</li>
<li>Tf, a time (end of test interval)</li>
<li>lambda, a rate in reciprocal seconds (for Poisson Streams)</li>
<li>incT, the nominal duration of inter-packet interval, first bit to first bit (for Periodic Streams)</li>
<li>T0, a time that MUST be selected at random from the interval [T, T+dT] to start generating packets and taking measurements (for Periodic Streams)</li>
<li>TstampSrc, the wire time of the packet as measured at MP(Src) as it leaves for Dst.</li>
<li>TstampDst, the wire time of the packet as measured at MP(Dst), assigned to packets that arrive within a "reasonable" time.</li>
<li>Tmax, a maximum waiting time for packets to arrive, set sufficiently long to disambiguate packets with long delays from packets that are discarded (lost).</li>
<li>M, the total number of packets sent between T0 and Tf</li>
<li>N, the total number of packets received at Dst (sent between T0 and Tf)</li>
<li>Type-P, as defined in <a href="#RFC2330">[RFC2330]</a>, which includes any field that may affect a packet's treatment as it traverses the network</li>
</ul>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> Metric Definition</h1>
<p id="rfc.section.3.3.p.1">This section is specific to each metric.</p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> Metric Units</h1>
<p id="rfc.section.3.4.p.1">The metric units are logical (1 or 0) when describing a single packet's loss performance, where a 0 indicates successful packet transmission and a 1 indicates packet loss.</p>
<p id="rfc.section.3.4.p.2">Units of time are as specified in <a href="#RFC2330">[RFC2330]</a>.</p>
<p id="rfc.section.3.4.p.3">Other units used are defined in the associated section.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> A Singleton Round-trip Loss Metric</h1>
<p></p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Name: Type-P-Round-trip-Loss</h1>
<p></p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Metric Parameters</h1>
<p id="rfc.section.4.2.p.1">See section 3.2.</p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> Definition and Metric Units</h1>
<p id="rfc.section.4.3.p.1">Type-P-Round-trip-Loss SHALL be represented by the binary logical values (or their equivalents) when the following conditions are met:</p>
<p id="rfc.section.4.3.p.2">Type-P-Round-trip-Loss = 0:</p>

<ul>
<li>Src sent the first bit of a Type-P packet to Dst at wire-time TstampSrc,</li>
<li>that Dst received that packet,</li>
<li>the Dst immediately sent a Type-P packet back to the Src, and</li>
<li>that Src received the last bit of the reflected packet at wire-time TstampSrc + Tmax.</li>
</ul>
<p id="rfc.section.4.3.p.3">Type-P-Round-trip-Loss = 1:</p>

<ul>
<li>Src sent the first bit of a Type-P packet to Dst at wire-time TstampSrc,</li>
<li>that Src did not receive the last bit of the reflected packet before the waiting time lapsed at TstampSrc + Tmax</li>
<li>(possibly because that Dst did not receive that packet,</li>
<li>the Dst did not immediately sent a Type-P packet back to the Src, or</li>
<li>the Src did not receive a reflected Type-P packet sent from the Dst).</li>
</ul>
<p id="rfc.section.4.3.p.4">Following the precedent of<a href="#RFC2681">[RFC2681]</a>, we make the simplifying assertion:</p>
<p id="rfc.section.4.3.p.5">Type-P-Round-trip-Loss(Src-&gt;Dst) = Type-P-Round-trip-Loss(Dst-&gt;Src)</p>
<p id="rfc.section.4.3.p.6">(and agree with the rationale presented, that the ambiguity introduced is a small price to pay for measurement efficiency).</p>
<p id="rfc.section.4.3.p.7">Therefore, each singleton can be represented by pairs of elements as follows: </p>

<ul>
<li>TstampSrc, the wire time of the packet at the Src (beginning the round-trip journey).</li>
<li>L, either zero or one (or some logical equivalent), where L=1 indicates loss and L=0 indicates successful round-trip arrival prior to TstampSrc + Tmax.</li>
</ul>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> Discussion and other details</h1>
<p id="rfc.section.4.4.p.1">See <a href="#RFC2680">[RFC2680]</a> and <a href="#RFC2681">[RFC2681]</a> for extensive discussion, methods of measurement, errors and uncertainties, and other fundamental considerations that need not be repeated here.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> A Sample Round-trip Loss Metric</h1>
<p id="rfc.section.5.p.1">Given the singleton metric Type-P-Round-trip-Loss, we now define one particular sample of such singletons. The idea of the sample is to select a particular binding of the parameters Src, Dst, and Type-P, then define a sample of values of parameter TstampSrc. This can be done in several ways, including:</p>

<ol>
<li>Poisson: a pseudo-random Poisson process of rate lambda, whose values fall between T and Tf. The time interval between successive values of TstampSrc will then average 1/lambda, as per <a href="#RFC2330">[RFC2330]</a>.</li>
<li>Periodic: a periodic stream process with pseudo-random start time T0 between T and dT, and nominal inter-packet interval incT, as per <a href="#RFC3432">[RFC3432]</a>.</li>
</ol>

<p>In the metric name, the variable &lt;Stream&gt; SHALL be replaced with the process used to define the sample, using one of the above processes (or other process, the details of which MUST be specified if used).</p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> Name: Type-P-Round-trip-Loss-&lt;Sample&gt;-Stream</h1>
<p></p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> Metric Parameters</h1>
<p id="rfc.section.5.2.p.1">See section 3.2.</p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> Definition and Metric Units</h1>
<p id="rfc.section.5.3.p.1">Given one of the methods for defining the test interval, the sample of times (TstampSrc) and other metric parameters, we obtain a sequence of Type-P-Round-trip-Loss singletons as defined in section 4.3.</p>
<p id="rfc.section.5.3.p.2">Type-P-Round-trip-Loss-&lt;Sample&gt;-Stream SHALL be a sequence of pairs with elements as follows: <a href="#RFC2330">[RFC2330]</a>.</p>

<ul>
<li>TstampSrc, as above</li>
<li>L, either zero or one (or some logical equivalent), where L=1 indicates loss and L=0 indicates successful round-trip arrival prior to TstampSrc + Tmax.</li>
</ul>

<p>where &lt;Sample&gt; SHALL be replaced with "Poisson", "Periodic", or an appropriate term to designate another sample method meeting the criteria of </p>
<h1 id="rfc.section.5.4">
<a href="#rfc.section.5.4">5.4.</a> Discussion and other details</h1>
<p id="rfc.section.5.4.p.1">See <a href="#RFC2680">[RFC2680]</a> and <a href="#RFC2681">[RFC2681]</a> for extensive discussion, methods of measurement, errors and uncertainties, and other fundamental considerations that need not be repeated here. However, when these references were approved, the packet reordering metrics in <a href="#RFC4737">[RFC4737]</a> had not yet been defined, nor had reordering been addressed in IPPM methodologies.</p>
<p><a href="#RFC4737">[RFC4737]</a> defines packets that arrive "late" with respect to their sending order as reordered. For example, when packets arrive with sequence numbers 4, 7, 5, 6, then packets 5 and 6 are reordered, and they are obviously not lost because they have arrived within some reasonable waiting time threshold. The presence of reordering on a round-trip path has several likely affects on the measurement.</p>

<ol>
<li>Methods of measurement should continue to wait the specified time for packets, and avoid prematurely declaring round-trip loss when a sequence gap or error is observed.</li>
<li>The time distribution of the singletons in the sample has been significantly changed.</li>
<li>Either the original packet stream or the reflected packet stream experienced path instability, and the original conditions may no longer be present.</li>
</ol>
<p id="rfc.section.5.4.p.3">Measurement implementations SHOULD address the possibility for packet reordering and avoid related errors in their processes.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Round-trip Loss Statistic</h1>
<p id="rfc.section.6.p.1">This section gives the primary and overall statistic for loss performance. Additional statistics and metrics originally prepared for One-way loss MAY also be applicable.</p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> Type-P-Round-trip-Loss-&lt;Sample&gt;-Ratio</h1>
<p id="rfc.section.6.1.p.1">Given a Type-P-Round-trip-Loss-&lt;Sample&gt;-Stream, the average of all the logical values, L, in the Stream is the Type-P-Round-trip-Loss-&lt;Sample&gt;-Ratio. This ratio is in units of lost packets per round-trip transmissions attempted.</p>
<p id="rfc.section.6.1.p.2">In addition, the Type-P-Round-trip-Loss-&lt;Sample&gt;-Ratio is undefined if the sample is empty.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Round-trip Testing and One-way Reporting</h1>
<p id="rfc.section.7.p.1">This section raises considerations for results collected using a round-trip measurement architecture, such as in TWAMP <a href="#RFC5357">[RFC5357]</a>.</p>
<p id="rfc.section.7.p.2">The sampling process for the return path (Dst-&gt;Src) is a conditional process that depends on successful packet arrival at the Dst and correct operation at the Dst to generate the reflected packet.  Therefore, the sampling process for the return path will be significantly affected when appreciable loss occurs on the Src-&gt;Dst path, making an attempt to assess the return path performance invalid (for loss or possibly any metric).</p>
<p id="rfc.section.7.p.3">Further, the sampling times for the return path (Dst-&gt;Src) are a random process that depends on the original sample times (TstampSrc), the one-way-delay for successful packet arrival at the Dst, and time taken at the Dst to generate the reflected packet. Therefore, the sampling process for the return path will be significantly affected when appreciable delay variation occurs on the Src-&gt;Dst path, making an attempt to assess the return path performance invalid (for loss or possibly any metric).</p>
<p id="rfc.section.7.p.4">As discussed above, packet reordering is always a possibility. In addition to the severe delay variation that usually accompanies it, reordering on the Src-&gt;Dst path will cause a mis-alignment of sequence numbers applied at the reflector when compared to the sender numbers. Measurement implementations SHOULD address this possible outcome.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> Security Considerations</h1>
<p></p>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> Denial of Service Attacks</h1>
<p id="rfc.section.8.1.p.1">This metric requires a stream of packets sent from one host (source) to another host (destination) through intervening networks, and back. This method could be abused for denial of service attacks directed at the destination and/or the intervening network(s).</p>
<p id="rfc.section.8.1.p.2">Administrators of source, destination, and the intervening network(s) should establish bilateral or multi-lateral agreements regarding the timing, size, and frequency of collection of sample metrics. Use of this method in excess of the terms agreed between the participants may be cause for immediate rejection or discard of packets or other escalation procedures defined between the affected parties.</p>
<h1 id="rfc.section.8.2">
<a href="#rfc.section.8.2">8.2.</a> User Data Confidentiality</h1>
<p id="rfc.section.8.2.p.1">Active use of this method generates packets for a sample, rather than taking samples based on user data, and does not threaten user data confidentiality. Passive measurement must restrict attention to the headers of interest. Since user payloads may be temporarily stored for length analysis, suitable precautions MUST be taken to keep this information safe and confidential. In most cases, a hashing function will produce a value suitable for payload comparisons.</p>
<h1 id="rfc.section.8.3">
<a href="#rfc.section.8.3">8.3.</a> Interference with the metrics</h1>
<p id="rfc.section.8.3.p.1">It may be possible to identify that a certain packet or stream of packets is part of a sample. With that knowledge at the destination and/or the intervening networks, it is possible to change the processing of the packets (e.g. increasing or decreasing delay) that may distort the measured performance. It may also be possible to generate additional packets that appear to be part of the sample metric. These additional packets are likely to perturb the results of the sample measurement.</p>
<p id="rfc.section.8.3.p.2">To discourage the kind of interference mentioned above, packet interference checks, such as cryptographic hash, may be used.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.9.p.1">Metrics defined in IETF are typically registered in the IANA IPPM METRICS REGISTRY as described in initial version of the registry <a href="#RFC4148">[RFC4148]</a>. However, areas for improvement of this registry have been identified, and the registry structure has to be revisited when there is consensus to do so.</p>
<p id="rfc.section.9.p.2">Therefore, the metrics in this draft may be considered for registration in the future, and no IANA Action is requested at this time.</p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> Acknowledgements</h1>
<p></p>
<h1 id="rfc.references">
<a href="#rfc.references">11.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">11.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC5835">[RFC5835]</b></td>
<td class="top">
<a>Morton, A.</a> and <a>S. Van den Berghe</a>, "<a href="http://tools.ietf.org/html/rfc5835">Framework for Metric Composition</a>", RFC 5835, April 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2330">[RFC2330]</b></td>
<td class="top">
<a href="mailto:vern@ee.lbl.gov" title="MS 50B/2239">Paxson, V.</a>, <a href="mailto:almes@advanced.org" title="Advanced Network &amp; Services, Inc.">Almes, G.</a>, <a href="mailto:mahdavi@psc.edu" title="Pittsburgh Supercomputing Center">Mahdavi, J.</a> and <a href="mailto:mathis@psc.edu" title="Pittsburgh Supercomputing Center">M. Mathis</a>, "<a href="http://tools.ietf.org/html/rfc2330">Framework for IP Performance Metrics</a>", RFC 2330, May 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2679">[RFC2679]</b></td>
<td class="top">
<a href="mailto:almes@advanced.org" title="Advanced Network &amp; Services, Inc.">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org" title="Advanced Network &amp; Services, Inc.">Kalidindi, S.</a> and <a href="mailto:matt@advanced.org" title="Advanced Network &amp; Services, Inc.">M. Zekauskas</a>, "<a href="http://tools.ietf.org/html/rfc2679">A One-way Delay Metric for IPPM</a>", RFC 2679, September 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2680">[RFC2680]</b></td>
<td class="top">
<a href="mailto:almes@advanced.org" title="Advanced Network &amp; Services, Inc.">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org" title="Advanced Network &amp; Services, Inc.">Kalidindi, S.</a> and <a href="mailto:matt@advanced.org" title="Advanced Network &amp; Services, Inc.">M. Zekauskas</a>, "<a href="http://tools.ietf.org/html/rfc2680">A One-way Packet Loss Metric for IPPM</a>", RFC 2680, September 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3393">[RFC3393]</b></td>
<td class="top">
<a>Demichelis, C.</a> and <a>P. Chimento</a>, "<a href="http://tools.ietf.org/html/rfc3393">IP Packet Delay Variation Metric for IP Performance Metrics (IPPM)</a>", RFC 3393, November 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3432">[RFC3432]</b></td>
<td class="top">
<a>Raisanen, V.</a>, <a>Grotefeld, G.</a> and <a>A. Morton</a>, "<a href="http://tools.ietf.org/html/rfc3432">Network performance measurement with periodic streams</a>", RFC 3432, November 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2681">[RFC2681]</b></td>
<td class="top">
<a href="mailto:almes@advanced.org" title="Advanced Network &amp; Services, Inc.">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org" title="Advanced Network &amp; Services, Inc.">Kalidindi, S.</a> and <a href="mailto:matt@advanced.org" title="Advanced Network &amp; Services, Inc.">M. Zekauskas</a>, "<a href="http://tools.ietf.org/html/rfc2681">A Round-trip Delay Metric for IPPM</a>", RFC 2681, September 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4148">[RFC4148]</b></td>
<td class="top">
<a>Stephan, E.</a>, "<a href="http://tools.ietf.org/html/rfc4148">IP Performance Metrics (IPPM) Metrics Registry</a>", BCP 108, RFC 4148, August 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4737">[RFC4737]</b></td>
<td class="top">
<a>Morton, A.</a>, <a>Ciavattone, L.</a>, <a>Ramachandran, G.</a>, <a>Shalunov, S.</a> and <a>J. Perser</a>, "<a href="http://tools.ietf.org/html/rfc4737">Packet Reordering Metrics</a>", RFC 4737, November 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5357">[RFC5357]</b></td>
<td class="top">
<a>Hedayat, K.</a>, <a>Krzanowski, R.</a>, <a>Morton, A.</a>, <a>Yum, K.</a> and <a>J. Babiarz</a>, "<a href="http://tools.ietf.org/html/rfc5357">A Two-Way Active Measurement Protocol (TWAMP)</a>", RFC 5357, October 2008.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">11.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="Stats">[Stats]</b></td>
<td class="top">
<a title="McGraw-Hill NY NY">, </a>, "<a>Introduction to the Theory of Statistics, 3rd Edition,</a>",   1974.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5474">[RFC5474]</b></td>
<td class="top">
<a>Duffield, N.</a>, <a>Chiou, D.</a>, <a>Claise, B.</a>, <a>Greenberg, A.</a>, <a>Grossglauser, M.</a> and <a>J. Rexford</a>, "<a href="http://tools.ietf.org/html/rfc5474">A Framework for Packet Selection and Reporting</a>", RFC 5474, March 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5481">[RFC5481]</b></td>
<td class="top">
<a>Morton, A.</a> and <a>B. Claise</a>, "<a href="http://tools.ietf.org/html/rfc5481">Packet Delay Variation Applicability Statement</a>", RFC 5481, March 2009.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Al Morton</span> 
	  <span class="n hidden">
		<span class="family-name">Morton</span>
	  </span>
	</span>
	<span class="org vcardline">AT&T Labs</span>
	<span class="adr">
	  <span>200 Laurel Avenue South</span>

	  <span class="vcardline">
		<span class="locality">Middletown,</span>,  
		<span class="region">NJ</span> 
		<span class="code">07748</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1 732 420 1571</span>

<span class="vcardline">EMail: <a href="mailto:acmorton@att.com">acmorton@att.com</a></span>

<span class="vcardline">URI: <a href="http://home.comcast.net/~acmacm/">http://home.comcast.net/~acmacm/</a></span>

  </address>
</div>

</body>
</html>