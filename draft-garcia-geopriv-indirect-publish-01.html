<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Indirect Presence Publication with the
      Session Initiation Protocol(SIP)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Indirect Presence Publication with the
      Session Initiation Protocol(SIP)">
<meta name="keywords" content="SIP, indirect, PUBLISH">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">GEOPRIV</td><td class="header">M. Garcia-Martin</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Ericsson</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">H. Tschofenig</td></tr>
<tr><td class="header">Expires: April 29, 2010</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">H. Schulzrinne</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Columbia University</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">M. Thomson</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Andrew Corporation</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 26, 2009</td></tr>
</table></td></tr></table>
<h1><br />Indirect Presence Publication with the
      Session Initiation Protocol(SIP)<br />draft-garcia-geopriv-indirect-publish-01</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on April 29, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>A method for indirectly publishing presence information is described.  This allows a
      presentity user agent to publish a URI that can be used by the presence agent to retrieve
      presence information.  A presence agent is then better able to acquire dynamic presence
      information without relying on the presentity user agent.  This also allows a presentity user
      agent to delegate responsibility for managing changing presence data to the source of that
      information.
      
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#sec-intro">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-geo-prots">1.1.</a>&nbsp;
Geolocation Protocols Relationship<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">1.2.</a>&nbsp;
Terminology<br />
<a href="#sec-overview">2.</a>&nbsp;
Indirect Presence Publish<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">2.1.</a>&nbsp;
Multiple Presence Sources<br />
<a href="#header">3.</a>&nbsp;
Location header<br />
<a href="#anchor3">4.</a>&nbsp;
Indicating and Requiring Support of Indirect Publish<br />
<a href="#anchor4">5.</a>&nbsp;
De-reference Errors<br />
<a href="#anchor5">6.</a>&nbsp;
The Geolocation Header<br />
<a href="#anchor6">7.</a>&nbsp;
Example<br />
<a href="#sec-iana">8.</a>&nbsp;
IANA Considerations<br />
<a href="#security">9.</a>&nbsp;
Security considerations<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">10.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">10.2.</a>&nbsp;
Informational References<br />
<a href="#anchor9">Appendix&nbsp;A.</a>&nbsp;
Alternative Solutions Considered<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="sec-intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The <a class='info' href='#RFC3261'>Session Initiation Protocol (SIP)<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261] is extended by the
      <a class='info' href='#RFC3265'>SIP-events<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] framework to provide subscriptions and notifications
      of SIP events. One example of such event notification mechanism is 'presence' and this
      presence information is carried in <a class='info' href='#RFC3863'>Presence Information Data Format
      (PIDF)<span> (</span><span class='info'>Sugano, H., Fujimoto, S., Klyne, G., Bateman, A., Carr, W., and J. Peterson, &ldquo;Presence Information Data Format (PIDF),&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3863] documents.
</p>
<p>Two sources of presence information have been established.  The presence agent might be
      able to acquire presence data independently, or it might rely on the presentity user agent
      providing that information.  Use of the SIP PUBLISH method for the purpose of informing the
      presence agent of state is described in <a class='info' href='#RFC3903'>RFC 3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903].
</p>
<p>Many existing elements of presence information, such as the <a class='info' href='#RFC4479'>Presence
      Data Model<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Data Model for Presence,&rdquo; July&nbsp;2006.</span><span>)</span></a> [RFC4479], <a class='info' href='#RFC4480'>Rich Presence Extensions to PIDF (RPID)<span> (</span><span class='info'>Schulzrinne, H., Gurbani, V., Kyzivat, P., and J. Rosenberg, &ldquo;RPID: Rich Presence Extensions to the Presence Information Data Format (PIDF),&rdquo; July&nbsp;2006.</span><span>)</span></a> [RFC4480], or
      the <a class='info' href='#RFC4481'>Contact Information to the Presence Information Data Format
      (CIPID)<span> (</span><span class='info'>Schulzrinne, H., &ldquo;Timed Presence Extensions to the Presence Information Data Format (PIDF) to Indicate Status Information for Past and Future Time Intervals,&rdquo; July&nbsp;2006.</span><span>)</span></a> [RFC4481], are acquired directly from the presentity user agent.  However, there are
      cases when the presentity user agent is not the direct source of the presence information.
      
</p>
<p>One such example is location information.  A presentity user agent might acquire location
      information from a Location Information Server (LIS).  Due to the dynamic nature of location
      information, a LIS might provide location information by reference rather than value.  One of
      these cases occurs when a presentity user agent acquires its own location information from a
      LIS using <a class='info' href='#I-D.ietf-geopriv-http-location-delivery'>HELD<span> (</span><span class='info'>Barnes, M., Winterbottom, J., Thomson, M., and B. Stark, &ldquo;HTTP Enabled Location Delivery (HELD),&rdquo; August&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;geopriv&#8209;http&#8209;location&#8209;delivery].  A reference in
      the form of a location URI allows the holder of the reference to obtain location information
      at any time directly from the LIS.
      
</p>
<p>This document describes a means for a presentity user agent to publish presence information
      indirectly using a URI.  The presence agent is then able to obtain information directly from
      the source of the data.  This removes some of the burden of managing dynamic content from the
      presentity user agent, as they do not need to monitor changes to presence data and publish
      updates as changes occur.
      
</p>
<p>Presence agents might provide a complex presence document that is assembled from multiple
      sources.  A means is provided where the presence agent is able to assemble a presence
      document.
      
</p>
<p>The mechanism in this document was originally designed with location information in mind,
      but it can be equally applied to any other form of dynamic presence data.
      
</p>
<a name="sec-geo-prots"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Geolocation Protocols Relationship</h3>

<p>[ED: move these pictures out of here.  We need pictures that aren't location-specific so
        that readers don't mistakenly think that this is just about location.  That's already compounded by using "Location", so this needs to be very clear.  Maybe this could be made an appendix.]
        
</p>
<p>The <a class='info' href='#RFC4119'>PIDF location object (PIDF-LO)<span> (</span><span class='info'>Peterson, J., &ldquo;A Presence-based GEOPRIV Location Object Format,&rdquo; December&nbsp;2005.</span><span>)</span></a> [RFC4119] establishes location
        information as a form of presence information.  Therefore, a presence agent might provide
        location information along with other information such as status or mood (<a class='info' href='#RFC4480'>[RFC4480]<span> (</span><span class='info'>Schulzrinne, H., Gurbani, V., Kyzivat, P., and J. Rosenberg, &ldquo;RPID: Rich Presence Extensions to the Presence Information Data Format (PIDF),&rdquo; July&nbsp;2006.</span><span>)</span></a>).
        
</p>
<p>A presence service commonly needs to rely on other entities to provide it with location
        information.  A presentity user agent might be able to provide location information, or it
        might interact with a <a class='info' href='#I-D.ietf-geopriv-arch'>Location Information Server
        (LIS)<span> (</span><span class='info'>Barnes, R., Lepinski, M., Cooper, A., Morris, J., Tschofenig, H., and H. Schulzrinne, &ldquo;An Architecture for Location and Location Privacy in Internet Applications,&rdquo; October&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;geopriv&#8209;arch] to acquire that information.
        
</p>
<p><a class='info' href='#fig-current-protocols'>Figure&nbsp;1<span> (</span><span class='info'>Presence and Geolocation Protocols (Values)</span><span>)</span></a> depicts the geolocation protocol relationship. A
	location URI points to a resource on a LIS that is able to provide location of a specific
	Target. The LIS is able to associate the Location URI to the location of the Target inside
	its administrative domain.  In this case, the Target in question is the presentity user
	agent.
        
</p><br /><hr class="insert" />
<a name="fig-current-protocols"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
         +-----------+               +------------+
         |           |               | Location   |
         |    LIS    |               | Recipient/ |
         |           |               | Presence   |
         |           |               | Agent      |
         +-----------+               +------------+
             ^  ^                           ^
             |  |                         //
Location     |  | Location              //
Configuration|  | Dereference         //
Protocol     |  | Protocol          //
(1)          |  | (2)             //
             |  |               //   Location Conveyance
             v  v             //     Protocol (e.g., SIP)
         +------------+     //       (3)
         |            |   //
         | Target /   | //
         | Presentity |&lt;
         |            |
         +------------+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Presence and Geolocation Protocols (Values)&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The following three steps are followed in <a class='info' href='#fig-current-protocols'>Figure&nbsp;1<span> (</span><span class='info'>Presence and Geolocation Protocols (Values)</span><span>)</span></a>:
        </p>
<blockquote class="text"><dl>
<dt>(1).</dt>
<dd>The presentity user agent (or Target) acquires a location URI from the Location
          Information Server (LIS) using a Location Configuration Protocol (LCP).
          
</dd>
<dt>(2).</dt>
<dd>Before publishing location information to the presence agent, the target must first
          de-reference the location URI to acquire a location value.  Alternatively, location
          information might be acquired from the LIS by value.
          
</dd>
<dt>(3).</dt>
<dd>Finally, the presentity user agent assembles an updated presence document and publishes
          this to the presence agent.
          
</dd>
</dl></blockquote>

<p>A <a class='info' href='#I-D.ietf-geopriv-lbyr-requirements'>location URI<span> (</span><span class='info'>Marshall, R., &ldquo;Requirements for a Location-by-Reference Mechanism,&rdquo; November&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;geopriv&#8209;lbyr&#8209;requirements] provides
        additional flexibility that this process does not take advantage of.  A location URI
        provides a way for a location recipient to have control over when and how location
        information is acquired.  A location URI can be used by the presence agent to acquire
        location information according to the needs of the watchers that require the information.
        
</p>
<p>This document enables the scenario shown in <a class='info' href='#fig-proposed-protocols'>Figure&nbsp;2<span> (</span><span class='info'>Presence and Geolocation Protocols (References)</span><span>)</span></a>,
	where the presentity user agent is able to acquire a location URI (step 1) and publish the
	URI (step 2).  The presence agent is then able to acquire location information directly from
	the LIS (step 3).
	
</p><br /><hr class="insert" />
<a name="fig-proposed-protocols"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 +-----------+               +------------+
 |           |  Location     | Location   |
 |    LIS    |&lt;-------------&gt;| Recipient/ |
 |           |  Dereference  | Presence   |
 |           |  Protocol (3) | Agent      |
 +-----------+               +------------+
       ^                            ^
       |                          //
       | Location               //
       | Configuration        //
       | Protocol           //
       | (1)              //
       |                //   Location Conveyance
       v              //     Protocol (e.g., SIP)
+-------------+     //       (2)
|             |   //
| Target /    | //
| Presentity  |&lt;
|             |
+-------------+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Presence and Geolocation Protocols (References)&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Terminology</h3>

<p> The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD
        NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as
        described in BCP 14, <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119]. 
</p>
<p>This document uses SIP events terminology from <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a>, presence
        terminology from <a class='info' href='#RFC3903'>[RFC3903]<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a>, and Geopriv terminology from <a class='info' href='#I-D.ietf-geopriv-arch'>[I&#8209;D.ietf&#8209;geopriv&#8209;arch]<span> (</span><span class='info'>Barnes, R., Lepinski, M., Cooper, A., Morris, J., Tschofenig, H., and H. Schulzrinne, &ldquo;An Architecture for Location and Location Privacy in Internet Applications,&rdquo; October&nbsp;2009.</span><span>)</span></a>.
        
</p>
<a name="sec-overview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Indirect Presence Publish</h3>

<p>A presentity user agent first acquires a reference to presence information in the form of a
      URI.
      
</p>
<p></p>
<blockquote class="text">
<p>For location information, a location URI can be obtained using a
      location configuration protocol, such as <a class='info' href='#I-D.ietf-geopriv-http-location-delivery'>HELD<span> (</span><span class='info'>Barnes, M., Winterbottom, J., Thomson, M., and B. Stark, &ldquo;HTTP Enabled Location Delivery (HELD),&rdquo; August&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;geopriv&#8209;http&#8209;location&#8209;delivery].  For HELD, this is done by
      including a <tt>locationType</tt> element with the value set to <tt>locationURI</tt>.
      
</p>
</blockquote>

<p>The presentity user agent then publishes the URI (or URIs) to a presence agent, using the
      <tt>Location</tt> header (see <a class='info' href='#header'>Section&nbsp;3<span> (</span><span class='info'>Location header</span><span>)</span></a>).
      
</p>
<p></p>
<blockquote class="text">
<p>This header is not specific to physical location information.  Do
      not confuse the <tt>Location:</tt> header with the <tt>Geolocation:</tt> header.  The former inherits its meaning from the <a class='info' href='#RFC2616'>HTTP<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616] header of the same name, the name being a logical location or
      address.  The latter is specifically restricted to physical location
      information.
</p>
</blockquote>

<p>The presence agent de-references URIs to acquire the referenced information.  A <tt>sip:</tt>, <tt>sips:</tt> or <tt>pres:</tt> URI is dereferenced by subscribing for the presence event package
      at the given URI; a <tt>http:</tt> or <tt>https:</tt>
      URI is dereferenced following the rules in <a class='info' href='#I-D.winterbottom-geopriv-deref-protocol'>[I&#8209;D.winterbottom&#8209;geopriv&#8209;deref&#8209;protocol]<span> (</span><span class='info'>Winterbottom, J., Tschofenig, H., Schulzrinne, H., Thomson, M., and M. Dawson, &ldquo;A Location Dereferencing Protocol Using HELD,&rdquo; January&nbsp;2010.</span><span>)</span></a>.  Other URIs MUST not be used unless a
      method is defined for that URI that produces a presence document.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Multiple Presence Sources</h3>

<p>Indirect publish establishes multiple presence sources for a presence agent.  In addition
        to the presentity user agent, multiple indirect sources of presence data can be identified
        using the <tt>Location</tt> header.
        
</p>
<p>The presence agent acquires presence information from each source.  This results in
        multiple presence documents.  These documents are combined to produce a single document.
        
</p>
<p>The single presence document contains the union of the set of tuples (or the <a class='info' href='#RFC4479'>[RFC4479]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Data Model for Presence,&rdquo; July&nbsp;2006.</span><span>)</span></a> equivalents of <tt>device</tt> or <tt>person</tt>) from every presence document thus obtained.  Tuple identifiers
        are modified as necessary to prevent collisions in the identifier namespace; this might be
        done be prefixing each tuple with the source identifier.
        
</p>
<p>The presentity identifier in the final document is the presentity identifier in any
        presence document provided by the presentity user agent itself.  Presentity identifiers from
        other sources are ignored.
        
</p>
<p>The presence agent then monitors the state of the referenced presence document according
        to the needs of watchers.  The presence agent updates its own copy of the presence data from
        each source.  As presence state provided by each source changes, this is combined with data
        from other sources and watchers are notified accordingly.
        
</p>
<p>A <a class='info' href='#RFC5264'>partial presence document<span> (</span><span class='info'>Niemi, A., Lonnfors, M., and E. Leppanen, &ldquo;Publication of Partial Presence Information,&rdquo; September&nbsp;2008.</span><span>)</span></a> [RFC5264] MAY be used if the presence
        agent supports this format.  In this case, partial differences (<tt>pidf-diff</tt> documents) provided from a given source are applied the
        information retrieved previously from the same source.
        
</p>
<a name="header"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Location header</h3>

<p>The <tt>Location</tt> header includes a URI for information that might
      otherwise be included in the body of a request.  It is defined by the following <a class='info' href='#RFC5234'>ABNF<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a> [RFC5234], using the conventions and definitions in <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>:
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
<dfn>location-header</dfn>        = "<span class='str'>Location</span>" <cite class='id'>HCOLON</cite> <cite class='id'>location-header-value</cite>
<dfn>location-value</dfn>         = (<cite class='id'>location-item</cite> <span class='rep'>*</span>(<cite class='id'>COMMA</cite> <cite class='id'>location-item</cite>))
<dfn>location-item</dfn>          = <cite class='id'>LAQUOT</cite> <cite class='id'>location-URI</cite> <cite class='id'>RAQUOT</cite>
                       / <span class='rep'>*</span>(<cite class='id'>SEMI</cite> <cite class='id'>location-param</cite>)
<dfn>location-URI</dfn>           = <cite class='id'>absoluteURI</cite>
<dfn>location-param</dfn>         = <cite class='id'>location-src-param</cite> / <cite class='id'>generic-param</cite>
<dfn>location-src-param</dfn>     = "<span class='str'>src</span>" <cite class='id'>EQUAL</cite> <cite class='id'>token</cite>
</pre></div>
<p>This document defines the <tt>Location</tt> header field as valid in
      <a class='info' href='#RFC3903'>SIP PUBLISH<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903] requests only.
      
</p>
<p>Each URI in the <tt>Location</tt> header MAY be tagged with a <tt>src</tt> parameter, identifying the source of the data that is found at the
      URI.  This identifier is an opaque tag that is used to identify different URIs as having the
      same source.  An included URI with no <tt>src</tt> parameter is
      considered to have a different <tt>src</tt> parameter to any other
      included URI.  URIs with identical <tt>src</tt> parameters indicate that
      they are alternative URIs (possibly with different schemes) for the same information.
      
</p>
<p>A presence agent MUST only attempt to use a single URI from each set with a unique <tt>src</tt> parameter.  Presence information from any given URI can only be
      updated or replaced with presence information from a URI with the same <tt>src</tt> parameter.
      
</p>
<p>Each PUBLISH message contains a complete set of URIs.  The presence agent MUST NOT use a
      URI if the most recent <tt>Location</tt> header received does not include
      that URI.  The <tt>Location</tt> header can be omitted in a request, which
      does not alter the set of URIs used by the presence agent.  Providing an empty <tt>Location</tt> header stops the presence agent from using any URIs.
      
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Indicating and Requiring Support of Indirect Publish</h3>

<p>A SIP option tag of <tt>indirectpub</tt> is created for use in the
      <tt>Require</tt> header.  This is used by a presentity user agent to
      provide surety that any request to indirectly publish presence data has been understood by the
      presence agent.
      
</p>
<p>Attempts to publish indirectly MUST use this option tag in the <tt>Require</tt> header.  If an attempt to publish information indirectly fails,
      the presence agent includes the tag in the <tt>Unsupported</tt> header of a
      420 (Bad Extension) response.  Upon receiving this response, the presentity user agent SHOULD
      attempt to de-reference the URI and re-attempt the request with the presence information
      included directly unless it is unable or local policy dictates otherwise.
      
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
De-reference Errors</h3>

<p>Indirect publish adds an additional de-reference step to the publish process.  This adds
      additional failure scenarios.  The presence agent might be unable to de-reference a URI for a
      number of reasons:
      </p>
<ul class="text">
<li>the indicated host might be unreachable
        
</li>
<li>the URI might be badly formed or it might refer to a non-existent destination
        
</li>
<li>the URI schemes - and the de-reference mechanisms they indicate - provided might not be
        supported by the presence agent
</li>
<li>the URI might produce information that is not presence data
        
</li>
<li>the presence agent might not be authorized to retrieve the indicated data and the
        de-reference request might be rejected by the server
        
</li>
</ul><p>
      
</p>
<p>Some of these errors might be detected during the processing of the request.  Others might
      be encountered later by the presence agent.  A mechanism is provided to indicate to the
      presentity user agent when the presence agent detects an error while processing the request.
      
</p>
<p>[TBD: need to work out how to do this.  Either way, it's almost essential to indicate to
      the presentity user agent that something has failed.  There are many reasons that a URI might not be
      accessible, in many cases, it might be useful if the presentity user agent could fall back on providing
      information by value if the URI can't be used.  It might be that the presentity user agent is more able
      to dereference the URI, or might be able to look for alternative sources for the information.]
      
</p>
<p>[The lessons of the Geolocation header might be of some use here.]
      
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
The Geolocation Header</h3>

<p>[ED: Useful?  Unnecessary complication?  Initial inclination is toward the latter.]
</p>
<p>A presence agent MAY choose to treat a <a class='info' href='#I-D.ietf-sipcore-location-conveyance'>Geolocation header<span> (</span><span class='info'>Polk, J. and B. Rosen, &ldquo;Location Conveyance for the Session Initiation Protocol,&rdquo; February&nbsp;2010.</span><span>)</span></a> [I&#8209;D.ietf&#8209;sipcore&#8209;location&#8209;conveyance] in a PUBLISH request
      as though it were a <tt>Location</tt> header.  The <tt>Require</tt> header of the request MUST include <tt>indirectpub</tt> in this case; if it does not, the presence agent cannot
      assume that the information was intended to be published.
      
</p>
<p>The contents of the <tt>Geolocation</tt> header MUST be ignored if a
      <tt>Location</tt> header is present.
      
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Example</h3>

<p>In the <a class='info' href='#flow'>Figure&nbsp;3</a>, the presentity user agent (PUA) acquires and publishes a
      reference to presence data that is served by a presence source (PS).  The presence agent (PA)
      provides this information to a watcher along with information included by the presentity user
      agent.  Only request messages are shown for clarity.
      
</p><br /><hr class="insert" />
<a name="flow"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     PUA              PS                   PA             WATCHER
      |               |                    |                 |
      |&lt;-- Acquire --&gt;|                    |&lt;-- Establish --&gt;|
      |   Reference   |                    |   Subscription  |
      |               |                    |                 |
      |------- M1: Publish Reference -----&gt;|                 |
      |               |                    |                 |
      |               |&lt;-- M2: Subscribe --|                 |
      |               |                    |                 |
      |               |--- M3: Notify ----&gt;|                 |
      |               |                    |                 |
      |               |                    |-- M4: Notify --&gt;|
      |               |                    |                 |
      |               |       ...          |                 |
      |               |                    |                 |
      |               |----- Notify ------&gt;|                 |
      |               |                    |                 |
      |               |                    |---- Notify ----&gt;|
      |               |                    |                 |
      .               .                    .                 .
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>A presentity user agent acquires a URI that refers to presence information.  In this
      example, it is also assumed that the watcher has also established a subscription.
      
</p>
<p>The presentity user agent publishes this information to a presence agent.  The SIP
        PUBLISH might also include information that the presentity user agent directly provides,
        such as the status.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
M1:
  PUBLISH sip:presentity@example SIP/2.0
  To: &lt;sip:presentity@example&gt;
  From: &lt;sip:presentity@example&gt;;tag=1234wxyz
  Call-ID: 81818181@pua.example
  CSeq: 1 PUBLISH
  Max-Forwards: 70
  Event: presence
  Location: &lt;pres:3cy89sckl@source.example&gt;;src=abc123,
    &lt;https://source.example/presence/3cy89sckl&gt;;src=abc123
  Contact: presentity@pua.example
  Content-Type: application/pidf+xml
  Content-Length: ...

  &lt;presence entity="pres:presentity@example"&gt;
    &lt;tuple id="status&gt;
      &lt;!-- status tuple contents--&gt;
    &lt;/tuple&gt;
  &lt;/presence&gt;
</pre></div>
<p>The presence agent selects one location from each source and de-references this
        URI.  For a SIP URI (<tt>sip:</tt>, <tt>sips:</tt>, or
        <tt>pres:</tt>) this requires a presence event package subscription.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
M2:
  SUBSCRIBE pres:3cy89sckl@source.example SIP/2.0
  To: &lt;pres:3cy89sckl@source.example&gt;
  From: &lt;pres:pa.example&gt;;tag=4567qwer
  Call-ID: 111222@example
  CSeq: 1 SUBSCRIBE
  Max-Forwards: 70
  Event: presence
  Expires: 3600
  Contact: sip:pa.example
  Content-Length: 0
</pre></div>
<p>The presence source provides a notification containing presence information
        selects one location from each source and de-references this URI.  For a SIP URI (<tt>sip:</tt>, <tt>sips:</tt>, or <tt>pres:</tt>) this requires a presence event package subscription.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
M3:
  NOTIFY pa.example SIP/2.0
  To: &lt;pres:pa.example&gt;
  From: &lt;pres:3cy89sckl@source.example&gt;;tag=7678fghj
  Call-ID: 111222@example
  CSeq: 1 NOTIFY
  Max-Forwards: 70
  Event: presence
  Subscription-State: active; expires=3599
  Contact: sip:source.example
  Content-Type: application/pidf+xml
  Content-Length: ...

  &lt;presence entity="pres:3cy89sckl@source.example"&gt;
    &lt;tuple id="geolocation"&gt;
      &lt;!-- geolocation tuple contents --&gt;
    &lt;/tuple&gt;
  &lt;/presence&gt;
</pre></div>
<p>The presence agent then provides a notification to the watcher with this new
        presence data.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
M4:
  NOTIFY watcher@example SIP/2.0
  To: &lt;pres:watcher@example&gt;
  From: &lt;pres:presentity@example&gt;;tag=asd234
  Call-ID: 789678@example
  CSeq: 1 NOTIFY
  Max-Forwards: 70
  Event: presence
  Subscription-State: active; expires=3207
  Contact: sip:pa.example
  Content-Type: application/pidf+xml
  Content-Length: ...

  &lt;presence entity="pres:presentity@example"&gt;
    &lt;tuple id="status&gt;
      &lt;!-- status tuple contents--&gt;
    &lt;/tuple&gt;
    &lt;tuple id="abc123-geolocation"&gt;
      &lt;!-- geolocation tuple contents --&gt;
    &lt;/tuple&gt;
  &lt;/presence&gt;
</pre></div>
<p>From this point, changes in presence state at the source trigger notifications to the
      presence agent.  This in turn triggers notifications to any watchers.
      
</p>
<a name="sec-iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p> TBD: register SIP header, <tt>indirectpub</tt> option tag and establish
      parameter registry (pah).
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security considerations</h3>

<p>The security considerations described in SIP Location Conveyance <a class='info' href='#I-D.ietf-sip-location-conveyance'>[I&#8209;D.ietf&#8209;sip&#8209;location&#8209;conveyance]<span> (</span><span class='info'>Polk, J. and B. Rosen, &ldquo;Location Conveyance for the Session Initiation Protocol,&rdquo; March&nbsp;2009.</span><span>)</span></a>are applicable to this document. 
</p>
<p>Privacy protections are extremely important for presence information.  Indirect publish
      potentially provides watchers and presence agents greater access to a user's private data.  A
      presence source 
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3265">[RFC3265]</a></td>
<td class="author-text">Roach, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3265">Session Initiation Protocol (SIP)-Specific Event Notification</a>,&rdquo; RFC&nbsp;3265, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3265.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5234.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.winterbottom-geopriv-deref-protocol">[I-D.winterbottom-geopriv-deref-protocol]</a></td>
<td class="author-text">Winterbottom, J., Tschofenig, H., Schulzrinne, H., Thomson, M., and M. Dawson, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-winterbottom-geopriv-deref-protocol-05.txt">A Location Dereferencing Protocol Using HELD</a>,&rdquo; draft-winterbottom-geopriv-deref-protocol-05 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-winterbottom-geopriv-deref-protocol-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sipcore-location-conveyance">[I-D.ietf-sipcore-location-conveyance]</a></td>
<td class="author-text">Polk, J. and B. Rosen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipcore-location-conveyance-02.txt">Location Conveyance for the Session Initiation Protocol</a>,&rdquo; draft-ietf-sipcore-location-conveyance-02 (work in progress), February&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipcore-location-conveyance-02.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.2.&nbsp;Informational References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3863">[RFC3863]</a></td>
<td class="author-text">Sugano, H., Fujimoto, S., Klyne, G., Bateman, A., Carr, W., and J. Peterson, &ldquo;<a href="http://tools.ietf.org/html/rfc3863">Presence Information Data Format (PIDF)</a>,&rdquo; RFC&nbsp;3863, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3863.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3903">[RFC3903]</a></td>
<td class="author-text">Niemi, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3903">Session Initiation Protocol (SIP) Extension for Event State Publication</a>,&rdquo; RFC&nbsp;3903, October&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3903.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4119">[RFC4119]</a></td>
<td class="author-text">Peterson, J., &ldquo;<a href="http://tools.ietf.org/html/rfc4119">A Presence-based GEOPRIV Location Object Format</a>,&rdquo; RFC&nbsp;4119, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4119.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4479">[RFC4479]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc4479">A Data Model for Presence</a>,&rdquo; RFC&nbsp;4479, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4479.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4480">[RFC4480]</a></td>
<td class="author-text">Schulzrinne, H., Gurbani, V., Kyzivat, P., and J. Rosenberg, &ldquo;<a href="http://tools.ietf.org/html/rfc4480">RPID: Rich Presence Extensions to the Presence Information Data Format (PIDF)</a>,&rdquo; RFC&nbsp;4480, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4480.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4481">[RFC4481]</a></td>
<td class="author-text">Schulzrinne, H., &ldquo;<a href="http://tools.ietf.org/html/rfc4481">Timed Presence Extensions to the Presence Information Data Format (PIDF) to Indicate Status Information for Past and Future Time Intervals</a>,&rdquo; RFC&nbsp;4481, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4481.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5264">[RFC5264]</a></td>
<td class="author-text">Niemi, A., Lonnfors, M., and E. Leppanen, &ldquo;<a href="http://tools.ietf.org/html/rfc5264">Publication of Partial Presence Information</a>,&rdquo; RFC&nbsp;5264, September&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5264.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-xml-20060816">[W3C.REC-xml-20060816]</a></td>
<td class="author-text">Bray, T., Paoli, J., Yergeau, F., Maler, E., and C. Sperberg-McQueen, &ldquo;<a href="http://www.w3.org/TR/2006/REC-xml-20060816">Extensible Markup Language (XML) 1.0 (Fourth Edition)</a>,&rdquo; World Wide Web Consortium FirstEdition&nbsp;REC-xml-20060816, August&nbsp;2006 (<a href="http://www.w3.org/TR/2006/REC-xml-20060816">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-xmlschema-0-20041028">[W3C.REC-xmlschema-0-20041028]</a></td>
<td class="author-text">Walmsley, P. and D. Fallside, &ldquo;<a href="http://www.w3.org/TR/2004/REC-xmlschema-0-20041028">XML Schema Part 0: Primer Second Edition</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-xmlschema-0-20041028, October&nbsp;2004 (<a href="http://www.w3.org/TR/2004/REC-xmlschema-0-20041028">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sip-location-conveyance">[I-D.ietf-sip-location-conveyance]</a></td>
<td class="author-text">Polk, J. and B. Rosen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-location-conveyance-13.txt">Location Conveyance for the Session Initiation Protocol</a>,&rdquo; draft-ietf-sip-location-conveyance-13 (work in progress), March&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-location-conveyance-13.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-geopriv-http-location-delivery">[I-D.ietf-geopriv-http-location-delivery]</a></td>
<td class="author-text">Barnes, M., Winterbottom, J., Thomson, M., and B. Stark, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-http-location-delivery-16.txt">HTTP Enabled Location Delivery (HELD)</a>,&rdquo; draft-ietf-geopriv-http-location-delivery-16 (work in progress), August&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-http-location-delivery-16.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-geopriv-lbyr-requirements">[I-D.ietf-geopriv-lbyr-requirements]</a></td>
<td class="author-text">Marshall, R., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-lbyr-requirements-09.txt">Requirements for a Location-by-Reference Mechanism</a>,&rdquo; draft-ietf-geopriv-lbyr-requirements-09 (work in progress), November&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-lbyr-requirements-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-geopriv-arch">[I-D.ietf-geopriv-arch]</a></td>
<td class="author-text">Barnes, R., Lepinski, M., Cooper, A., Morris, J., Tschofenig, H., and H. Schulzrinne, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-arch-01.txt">An Architecture for Location and Location Privacy in Internet Applications</a>,&rdquo; draft-ietf-geopriv-arch-01 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-arch-01.txt">TXT</a>).</td></tr>
</table>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Alternative Solutions Considered</h3>

<p>[ED: this section is a mess; it should be cleaned up and moved to an appendix.]
      
</p>
<p>The following alternative solutions were considered in the design of this solution:
        </p>
<ol class="text">
<li>Rather than using a header, additional SIP bodies could be defined.  This could be a
          PIDF extension, or a specialized format.  This has a number of advantages, particularly in
          terms of good protocol hygiene.  This potentially runs afoul of the shy support for
          multipart MIME in SIP agents.  As a PIDF extension, it's possible that multipart support
          is not required, but it would potentially be difficult to ensure that it is the presence
          agent that is performing the de-reference.
          
</li>
<li>Integration with <a class='info' href='#RFC5264'>partial presence publish<span> (</span><span class='info'>Niemi, A., Lonnfors, M., and E. Leppanen, &ldquo;Publication of Partial Presence Information,&rdquo; September&nbsp;2008.</span><span>)</span></a> [RFC5264] was considered.
          Including a URI in a <tt>pidf-diff</tt> document would provide an
          elegant way to integrate indirectly published data.  However, RFC 5264 defines a format
          that cannot be extended.  The scheme chosen also provides less flexibility and is
          consequently significantly simpler.
          
</li>
<li>It's possible that a mechanism is not necessary at all.  Presence sources could be
          given the information necessary to PUBLISH the information.  Mechanisms would need to be
          provided for this purpose.  Aside from the complexity of managing this relationship, it
          does not benefit from the ability to use an event-based subscription.  It is also more
          difficult to ensure that the presence source publishes when the presence agent (and
          watchers) need the information.
          
</li>
<li>The <a class='info' href='#I-D.ietf-sip-location-conveyance'>SIP Location Conveyance<span> (</span><span class='info'>Polk, J. and B. Rosen, &ldquo;Location Conveyance for the Session Initiation Protocol,&rdquo; March&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;sip&#8209;location&#8209;conveyance]
          defines a Geolocation header field that could be used for indirect publish.  Limiting this
          solution to location information would be a constraint that would prevent this from use
          for other types of information.
          
</li>
</ol><p>
      
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Miguel A. Garcia-Martin</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ericsson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Calle Via de los Poblados 13</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Madrid, ES  28033</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Spain</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:miguel.a.garcia@ericsson.com">miguel.a.garcia@ericsson.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hannes Tschofenig</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Otto-Hahn-Ring 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Munich, Bavaria  81739</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Hannes.Tschofenig@gmx.net">Hannes.Tschofenig@gmx.net</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.tschofenig.priv.at">http://www.tschofenig.priv.at</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Henning Schulzrinne</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Columbia University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Department of Computer Science</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">450 Computer Science Building</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">New York, NY  10027</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 212 939 7042</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:schulzrinne@cs.columbia.edu">schulzrinne@cs.columbia.edu</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.cs.columbia.edu/~hgs">http://www.cs.columbia.edu/~hgs</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martin Thomson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PO Box U40</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Wollongong, NSW  2500</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AU</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+61 242 212915</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:martin.thomson@andrew.com">martin.thomson@andrew.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.andrew.com/">http://www.andrew.com/</a></td></tr>
</table>
</body></html>
