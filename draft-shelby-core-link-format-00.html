<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>CoRE Link Format</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="CoRE Link Format">
<meta name="keywords" content="CoRE, Link Format, HTTP Link Header Format, Resource Discovery">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">CoRE</td><td class="header">Z. Shelby</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Sensinode</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">September 28, 2010</td></tr>
<tr><td class="header">Expires: April 1, 2011</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />CoRE Link Format<br />draft-shelby-core-link-format-00</h1>

<h3>Abstract</h3>

<p>
	This document defines a link format for use by constrained CoAP web servers to describe URIs of resources offered along with other attributes. Based on the HTTP Link Header format, the CoRE link format is carried as a payload and is assigned an Internet media type. A well-known URI is defined as a default entry-point for requesting the list of links to resources hosted by a server.
    
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on April 1, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
<a href="#format">2.</a>&nbsp;
Link Format<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">2.1.</a>&nbsp;
Target and context IRIs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">2.2.</a>&nbsp;
Link relation 'rel' usage<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.3.</a>&nbsp;
Description 'd' usage<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.4.</a>&nbsp;
Alternative URI 'sh' usage<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.5.</a>&nbsp;
Resource name 'n' usage<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.6.</a>&nbsp;
Content-type code 'ct' usage<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.7.</a>&nbsp;
Resource identifier 'id' usage<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#examples">2.8.</a>&nbsp;
Examples<br />
<a href="#well-known">3.</a>&nbsp;
Well-known Interface<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#filtering">3.1.</a>&nbsp;
Query Filtering<br />
<a href="#anchor8">4.</a>&nbsp;
Security Considerations<br />
<a href="#anchor9">5.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#iana-well-known">5.1.</a>&nbsp;
Well-known 'core' URI<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#iana-mime">5.2.</a>&nbsp;
New link-format Internet media type<br />
<a href="#anchor10">6.</a>&nbsp;
Acknowledgments<br />
<a href="#anchor11">7.</a>&nbsp;
Changelog<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
  The Constrained RESTful Environments (CoRE) working group aims at realizing the REST architecture in a suitable form for the most constrained nodes (e.g. 8-bit microcontrollers with limited RAM and ROM) and networks (e.g. 6LoWPAN). CoRE is aimed at machine-to-machine (M2M) applications such as smart energy and building automation <a class='info' href='#I-D.shelby-core-coap-req'>[I&#8209;D.shelby&#8209;core&#8209;coap&#8209;req]<span> (</span><span class='info'>Shelby, Z., Stuber, M., Sturek, D., Frank, B., and R. Kelsey, &ldquo;CoAP Requirements and Features,&rdquo; April&nbsp;2010.</span><span>)</span></a>.
  
</p>
<p>
  The discovery of resources offered by a constrained server is very important in machine-to-machine applications where there are no humans in the loop and static interfaces result in fragility. The discovery of resources provided by an HTTP Web Server is typically called Web Discovery. In this document we refer to the discovery of resources offered by a CoAP server as resource discovery.
  
</p>
<p>
  The core function of such a discovery mechanism is to provide URIs ("links") for the resources offered, complemented by information describing the relationship between the resource description and each resource as well as other attributes.  When such a collection of attributed resource references (links) is offered as a resource of its own (as opposed to as HTTP headers delivered with a different resource), we speak of its representation as a link-format.
  
</p>
<p>
  This document specifies a link-format for use in CoRE resource discovery by extending the HTTP Link Header Format <a class='info' href='#I-D.nottingham-http-link-header'>[I&#8209;D.nottingham&#8209;http&#8209;link&#8209;header]<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; May&nbsp;2010.</span><span>)</span></a> to describe resources hosted by a constrained server. The CoRE link-format is carried as a payload and is assigned an Internet media type. A well-known URI "/.well-known/core" is defined as a default entry-point for requesting the list of links to resources hosted by a server. 
  
</p>
<a name="format"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Link Format</h3>

<p>
    CoRE resource discovery extends the HTTP Link Header format specified in <a class='info' href='#I-D.nottingham-http-link-header'>[I&#8209;D.nottingham&#8209;http&#8209;link&#8209;header]<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; May&nbsp;2010.</span><span>)</span></a> which is specified in Augmented Backus-Naur Form (ABNF) notation <a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a>. The format does not require special XML or binary parsing, and is extensible. 
    
</p>
<p>
    This link format is used for a similar purpose to that described in <a class='info' href='#I-D.nottingham-http-link-header'>[I&#8209;D.nottingham&#8209;http&#8209;link&#8209;header]<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; May&nbsp;2010.</span><span>)</span></a>, to describe one or more relationships between resources. However in this specification the link format is extended with specific constrained M2M link parameters, links are carried as a payload rather than in a message header, and a default interface is defined to discover resources described by these links. 
    
</p>
<p>
    <a class='info' href='#I-D.nottingham-http-link-header'>[I&#8209;D.nottingham&#8209;http&#8209;link&#8209;header]<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; May&nbsp;2010.</span><span>)</span></a> did not require an Internet media type for this link format, as it assumes to be carried in an HTTP header. This specification thus requests a Internet media type for this format (see <a class='info' href='#iana-mime'>Section&nbsp;5.2<span> (</span><span class='info'>New link-format Internet media type</span><span>)</span></a>).
    
</p>
<p>    
    The CoRE link format uses the ABNF description and associated rules in Section 5 of <a class='info' href='#I-D.nottingham-http-link-header'>[I&#8209;D.nottingham&#8209;http&#8209;link&#8209;header]<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; May&nbsp;2010.</span><span>)</span></a>. The "Link:" text is omitted as that is part of the HTTP Link Header.   
    Multiple link descriptions are separated by commas. The CoRE link format MUST use the US-ASCII character set (support for RFC2231 encoding of non-ASCII content TBD). The following CoRE specific link-extension parameters to the format are defined:
    
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   link-extension    = ( "d" "=" URI )
   link-extension    = ( "sh" "=" URI-Reference )
   link-extension    = ( "n" "=" ( quoted-string | URI ) )
   link-extension    = ( "ct" "=" integer )
   link-extension    = ( "id" "=" ( quoted-string | URI ) )

</pre></div>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Target and context IRIs</h3>

<p>
         Each link description conveys one target URI as a URI-Reference inside angle brackets ("<>"). The context of a link conveyed in the description is by default the URI of the resource that returned the link-format representation (usually ./well-known/core). Thus each link can be thought of as describing a target resource hosted by the server in the absence of further relation information. This is an important difference to the way the HTTP Link Header format is used, as it is included in the header of an HTTP response for some URI (this URI is by default the context). Thus the HTTP Link Header is by default relating the target URI to the URI that was requested. In comparison, the CoRE link format includes one or more link entries, each describing a resource hosted by a server.
         
</p>
<p>
         As per Section 5.2 of <a class='info' href='#I-D.nottingham-http-link-header'>[I&#8209;D.nottingham&#8209;http&#8209;link&#8209;header]<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; May&nbsp;2010.</span><span>)</span></a> a link description MAY include an "anchor" attribute, in which case the context is the URI included in that attribute. This can be used to describe a relationship between two resources. A consuming implementation can however choose to ignore such links. It is not expected that most implementations will be able to derive useful from explicitly anchored links.
         
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Link relation 'rel' usage</h3>

<p>
         Link descriptions in CoRE are typically used to describe entry points to services hosted by the server, and thus in the absence of the rel attribute the registered "service" relation type is assumed. In the CoRE link format the service relation type indicates that the link is a service hosted by the server (in the absence of the anchor attribute). A description can make use of any registered relation type or extension types in the form of a URI by including the rel attribute. 
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Description 'd' usage</h3>

<p>
	 	 The description "d" attribute can provide a URI to a specific interface definition used to access the target resource. This could be for example a URI to the WADL definition of the target resource. Multiple description attributes MAY appear in a link description.
         
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Alternative URI 'sh' usage</h3>

<p>
	 	 This attribute can be included to define an alternative short URI which can also be used to access the target resource. Multiple alternative short URI attributes MAY appear in a link description.
         
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.5"></a><h3>2.5.&nbsp;
Resource name 'n' usage</h3>

<p>
	 	 The resource name "n" attribute is used to assign eith a human readable or a semantically important name to a resource. In the case of a temperature sensor resource the name could be something like "Temperature in Centigrade", a URI to an ontology like "http://sweet.jpl.nasa.gov/2.0/phys.owl#Temperature" or an application-specific semantic name like "TemperatureC". Multiple name attributes MAY appear in a link description.
         
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.6"></a><h3>2.6.&nbsp;
Content-type code 'ct' usage</h3>

<p>
	 	 The Content-type code "ct" attribute provides a hint about the Internet media type this resource returns. The value is in the CoAP identifier code format as a decimal ASCII integer <a class='info' href='#I-D.ietf-core-coap'>[I&#8209;D.ietf&#8209;core&#8209;coap]<span> (</span><span class='info'>Shelby, Z., Frank, B., and D. Sturek, &ldquo;Constrained Application Protocol (CoAP),&rdquo; September&nbsp;2010.</span><span>)</span></a>. For example application/xml would be indicated as "ct=41". If no Content-type code attribute is present then text/plain is assumed. The Content-type code attribute MUST NOT appear more than once in a link description.
         
</p>
<p>
         Alternatively, the "type" attribute MAY be used to indicate an Internet media type as a quoted-string. It is not however expected that constrained implementations are able to parse quoted-string Content-type values.
         
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.7"></a><h3>2.7.&nbsp;
Resource identifier 'id' usage</h3>

<p>
	 	 The resource identifier "id" field is a unique identifier (e.g. UUID) for this resource for use in e.g. resource or search directories. This attribute may be in quoted-string format (e.g. in the case of a UUID or XRI) or in URI format (e.g. in the case of a URN). The resource identifier attribute MUST NOT appear more than once in a link description.
         
</p>
<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.8"></a><h3>2.8.&nbsp;
Examples</h3>

<p>
  A few examples of typical link descriptions in this format follows. Multiple resource descriptions in a representation are separated by commas. Commas can also occur in quoted strings and URIs but do not end a description. Linefeeds never occur in the actual format, but are shown in the example for readability. 
</p>
<p>This example includes link descriptions for an index to sensors hosted by a server, along with links two two different sensors.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
GET /.well-known/core

&lt;/sensors&gt;;rel="index";n="Sensor Index",
&lt;/sensors/temp&gt;;sh="/t";n="TemperatureC",
&lt;/sensors/light&gt;;sh="/l";ct=41;n="LightLux"
</pre></div>
<p>This example arranges link descriptions hierarchically, with the entry point including a link description to a sub-resource containing link descriptions about the sensors.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
GET /.well-known/core

&lt;/.well-known/core/sensors&gt;;rel="section"
;type="application/link-format"

GET /.well-known/core/sensors

&lt;/sensors/temp&gt;;sh="/t";n="TemperatureC",
&lt;/sensors/light&gt;;sh="/l";ct=41;n="LightLux"

</pre></div>
<a name="well-known"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Well-known Interface</h3>

<p>
  Resource discovery in CoRE is accomplished through the use of a well-known resource URI which returns a list of links (resource descriptions) offered by that constrained server. Well-known resources have a reserved base URI "/.well-known/" as specified in <a class='info' href='#RFC5785'>[RFC5785]<span> (</span><span class='info'>Nottingham, M. and E. Hammer-Lahav, &ldquo;Defining Well-Known Uniform Resource Identifiers (URIs),&rdquo; April&nbsp;2010.</span><span>)</span></a>.  This document defines a new well-known URI for CoRE discovery "/.well-known/core" <a class='info' href='#iana-well-known'>Section&nbsp;5.1<span> (</span><span class='info'>Well-known 'core' URI</span><span>)</span></a>. A server implementing this specification MUST support this URI on the default port appropriate for the protocol, for the purpose of resource discovery. It is however up to the application which link descriptions are included and how they are organized. In the absense of any links, a zero-length payload is returned. The resource representation of this resource is described in <a class='info' href='#format'>Section&nbsp;2<span> (</span><span class='info'>Link Format</span><span>)</span></a>. 
  
</p>
<p>
  The CoRE resource discovery interface supports the following interactions:
    </p>
<ul class="text">
<li>Performing a GET on /.well-known/core to the default port returns a list of link descriptions available from a CoAP server (if any). 
</li>
<li>Filtering may be performed on any of the link format attributes using a query string as specified in <a class='info' href='#filtering'>Section&nbsp;3.1<span> (</span><span class='info'>Query Filtering</span><span>)</span></a>. For example [GET /.well-known/core?n=TemperatureC] would request resources with the name TemperatureC. A server is not however required to support filtering.
      
</li>
<li>More capable servers such as proxies could support a resource directory by requesting the resource descriptions of other end-points or accepting [POST /.well-known/core messages] from other servers. This adds the resources of other end-points as a sub-resource in which absolute URIs are included for the link-values. The details of such resource directory functionality is however out of scope for this document.
</li>
</ul><p>
  
</p>
<p>
  End-points with a large number of resources SHOULD include resource descriptions only for important services or collections and organize their resource descriptions into a hierarchy of link resources. This is done by including links in the /.well-known/core list which point to other resource lists, e.g. &lt;/.well-known/core/sensors&gt;. Such a hierarchy SHOULD be under the /.well-known/core path but could be located elsewhere.
  
</p>
<a name="filtering"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Query Filtering</h3>

<p>
	A server implementing this document MAY support the query string /.well-known/core? with uri= corresponding to the link-value or any of the resource description attributes for the purpose of filtering a discovery. It is not expected that simple implementations support filtering, but instead will just ignore the query string. Wildcard * endings MAY be supported. An exact match is performed on the query string, and a 200 OK response is returned with link descriptions that contains the matching entries (if any). If resource descriptions are organized hierarchically, a query on the root resource /.well-known/core SHOULD return all matching resource descriptions from the entire hierarchy. An example query on the example link descriptions from <a class='info' href='#format'>Section&nbsp;2<span> (</span><span class='info'>Link Format</span><span>)</span></a> may look like:
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
GET /.well-known/core?n=LightLux

&lt;/sensors/light&gt;;sh="/l";ct=41;n="LightLux"
</pre></div>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Security Considerations</h3>

<p> 
         This document needs the same security considerations as described in Section 7 of <a class='info' href='#I-D.nottingham-http-link-header'>[I&#8209;D.nottingham&#8209;http&#8209;link&#8209;header]<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; May&nbsp;2010.</span><span>)</span></a>. The /.well-known/core resource may be protected e.g. using DTLS when hosted on a CoAP server. 
     	 
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<a name="iana-well-known"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Well-known 'core' URI</h3>

<p>This memo registers the "core" well-known URI in the Well-Known
  		 URI Registry as defined by [RFC5785].
</p>
<p>URI suffix:  core
</p>
<p>Change controller:  IETF
</p>
<p>Specification document(s):  [[ this document ]]
</p>
<p>Related information:  None
</p>
<a name="iana-mime"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
New link-format Internet media type</h3>

<p>This memo registers the a new Internet media type for the CoRE link format, application/link-format. 
</p>
<p>Type name: application 
</p>
<p>Subtype name: link-format 
</p>
<p>Required parameters: None 
</p>
<p>Optional parameters: The query string may contain uri= to match the URI, or any other attribute defined for the link format to match that attribute. 
</p>
<p>Encoding considerations: US-ASCII 
</p>
<p>Security considerations: None 
</p>
<p>Interoperability considerations: 
</p>
<p>Published specification: [[ this document ]] 
</p>
<p>Applications that use this media type: CoAP server and client implementations. 
</p>
<p>Additional information: 
</p>
<p>Magic number(s):  
</p>
<p>File extension(s):  
</p>
<p>Macintosh file type code(s):  
</p>
<p>Intended usage: COMMON 
</p>
<p>Restrictions on usage: None 
</p>
<p>Author: CoRE WG 
</p>
<p>Change controller: IETF 
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Acknowledgments</h3>

<p>Special thanks to Mark Nottingham and Eran Hammer-Lahav for discussions and ideas that led to this draft, and to Carsten Bormann for extensive comments and contributions that improved the text.
</p>
<p>Thanks to Michael Stuber, Richard Kelsey, Cullen Jennings, Guido Moritz, Peter Van Der Stok, Adriano Pezzuto, Lisa Dussealt, Alexey Melnikov, Gilbert Clark, Salvatore Loreto, Petri Mutka, Szymon Sasin, Robert Quattlebaum, Robert Cragie, Angelo Castellani, Tom Herbst, Ed Beroset, Gilman Tolle, Robby Simpson, Peter Bigot, Colin O'Flynn and David Ryan for helpful comments and discussions that have shaped the document.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Changelog</h3>

<p>
    
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-core-coap">[I-D.ietf-core-coap]</a></td>
<td class="author-text">Shelby, Z., Frank, B., and D. Sturek, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-core-coap-02.txt">Constrained Application Protocol (CoAP)</a>,&rdquo; draft-ietf-core-coap-02 (work in progress), September&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-core-coap-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.nottingham-http-link-header">[I-D.nottingham-http-link-header]</a></td>
<td class="author-text">Nottingham, M., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-nottingham-http-link-header-10.txt">Web Linking</a>,&rdquo; draft-nottingham-http-link-header-10 (work in progress), May&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-nottingham-http-link-header-10.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5234.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5785">[RFC5785]</a></td>
<td class="author-text">Nottingham, M. and E. Hammer-Lahav, &ldquo;<a href="http://tools.ietf.org/html/rfc5785">Defining Well-Known Uniform Resource Identifiers (URIs)</a>,&rdquo; RFC&nbsp;5785, April&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5785.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.shelby-core-coap-req">[I-D.shelby-core-coap-req]</a></td>
<td class="author-text">Shelby, Z., Stuber, M., Sturek, D., Frank, B., and R. Kelsey, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-shelby-core-coap-req-01.txt">CoAP Requirements and Features</a>,&rdquo; draft-shelby-core-coap-req-01 (work in progress), April&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-shelby-core-coap-req-01.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Zach Shelby</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sensinode</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Kidekuja 2</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vuokatti  88600</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">FINLAND</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358407796297</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:zach@sensinode.com">zach@sensinode.com</a></td></tr>
</table>
</body></html>
