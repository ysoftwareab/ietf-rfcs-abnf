

Network Working Group                                         M. Bagnulo
Internet-Draft                                        A. Garcia-Martinez
Expires: July 23, 2004                                              UC3M
                                                        January 23, 2004


                   Multi-Homing Tunnel Broker (MHTB)
                      draft-bagnulo-multi6-mhtb-00

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on July 23, 2004.

Copyright Notice

   Copyright (C) The Internet Society (2004). All Rights Reserved.

Abstract

   RFC 3178 [1] describes a solution to provide site multi-homing
   support in IPv6. RFC 3178 multi-homing solution uses tunnels between
   the different ISPs and the multi-homed site to provide alternative
   paths in case that one of the exit links is down, protecting the
   multi-homed site from outages in the direct link with its providers.

   However, the wide adoption of RFC 3178 multi-homing solution implies
   the manual configuration of numerous tunnels on the ISPs, which may
   impose an important workload in ISP network administrators. This note
   proposes the usage of Multi-Homing Tunnel Brokers to automatically
   configure the ISP tunnel endpoint in order to ease the adoption of
   the solution.



Bagnulo & Garcia-Martinez    Expires July 23, 2004              [Page 1]

Internet-Draft                    MHTB                      January 2004


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Overview of the RFC 3178 Multi-Homing Solution . . . . . . . .  4
   3.  The Tunnel Broker Model  . . . . . . . . . . . . . . . . . . .  6
   4.  The Multi-Homing Tunnel Broker Service . . . . . . . . . . . .  7
   4.1 The Tunnel Broker Service  . . . . . . . . . . . . . . . . . .  7
   4.2 The Tunnel Server  . . . . . . . . . . . . . . . . . . . . . .  8
   5.  Security Considerations. . . . . . . . . . . . . . . . . . . . 10
       References . . . . . . . . . . . . . . . . . . . . . . . . . . 11
       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 11
       Intellectual Property and Copyright Statements . . . . . . . . 12







































Bagnulo & Garcia-Martinez    Expires July 23, 2004              [Page 2]

Internet-Draft                    MHTB                      January 2004


1. Introduction

   RFC 3178 [1]  describes a solution to provide site multi-homing
   support in IPv6. RFC 3178 multi-homing solution uses tunnels between
   the different ISPs and the multi-homed site to provide alternative
   paths in case that one of the exit links is down, protecting the
   multi-homed site from outages in the direct link with its providers.

   However, the wide adoption of RFC 3178 multi-homing solution implies
   the manual configuration of numerous tunnels on the ISPs, which may
   impose an important workload in ISP network administrators. This note
   proposes the usage of Multi-Homing Tunnel Brokers to automatically
   configure the ISP tunnel endpoint in order to ease the adoption of
   the solution.





































Bagnulo & Garcia-Martinez    Expires July 23, 2004              [Page 3]

Internet-Draft                    MHTB                      January 2004


2.  Overview of the RFC 3178 Multi-Homing Solution

   The mechanism for multi-homing support described in RFC3178 is
   illustrated in the next figure:





       +----------------------------------------+
       |                                        |
       |               Internet                 |
       +----------------------------------------+
               |                           |
         +----------+              +----------+
         |ISPA-PrefA|              |ISPB-PrefB|
         +----------+              +----------+
             | |                      |    |
             | \______________________|___ |
             |        TunnelIA-ERB    |   ||
      linkA  |  ______________________/   || linkB
             | |   TunnelIB-ERA           ||
             | |                          ||
    +--------|-|--------------------------||--------+
    |     +----|-+                      +-|---+     |
    |     | ERA  |                      | ERB |     |
    |     +------+                      +-----+     |
    |                                               |
    | Multi-Homed                      PrefA:Site:: |
    | Site             +------+        PrefB:Site:: |
    |                  | Host1|                     |
    |                  +------+                     |
    +-----------------------------------------------+



   The multi-homed site has two providers, ISPA and ISPB that have
   delegated PrefA:Site::/n and PrefB:Site::/m respectively. In the
   depicted scenario, the multi-homed site has only two providers, but
   the solution is valid to more general scenarios that include more
   than 2 providers. It is assumed that hosts within the multi-homed
   site configure at least one address per provider's prefix obtained.

   In order to obtain fault tolerance capabilities, RFC 3178 proposes
   the creation of two tunnels:

   - TunnelIA-ERB: from the ISPA's router to site exit router ERB




Bagnulo & Garcia-Martinez    Expires July 23, 2004              [Page 4]

Internet-Draft                    MHTB                      January 2004


   - TunnelIB-ERA: from the ISPB's router to site exit router ERA

   The resulting behaviour is that when one of the two exit links fails,
   packets are routed through the correspondent tunnel. That is, if
   linkA(linkB) fails, packets arriving to ISPA(ISPB) addressed to
   PrefA:Site::/n(PrefB:Site::/m) are routed through TunnelIA-ERB
   (TunnelIB-ERA) to the multi-homed end site.

   This configuration provides fault tolerance capabilities, including
   the preservation of established communications, when one of the site
   exit links fails.








































Bagnulo & Garcia-Martinez    Expires July 23, 2004              [Page 5]

Internet-Draft                    MHTB                      January 2004


3.  The Tunnel Broker Model

   RFC 3053 [2]  presents a general tunnel broker model and its
   particular application to the creation of IPv6 over IPv4 tunnels for
   the Internet's transition to IPv6. Since the tunnels used in RFC 3178
   are IPv6 in IPv6 tunnels used for redundancy, the particular
   implementation details will differ in the two configurations.
   However, the general model of the tunnel broker presented in RFC 3053
   can still be applied to the multi-homing environment.

   The tunnel broker model presented in RFC 3053 is illustrated in the
   next figure and it consists in the following components:

   - The Tunnel Broker (TB) is the element to which the end-users
   connect themselves to create, modify and delete tunnels. Then the TB
   communicates with one or several Tunnel Servers to actually create
   the tunnels requested by the users.

   - The Tunnel Server (TS) is the server's tunnel endpoint that is
   created, modified or deleted upon reception of a request from the TB.































Bagnulo & Garcia-Martinez    Expires July 23, 2004              [Page 6]

Internet-Draft                    MHTB                      January 2004


4.  The Multi-Homing Tunnel Broker Service

   In order to provide a Tunnel Broker Service for the RFC3178
   multi-homing solution, both a Tunnel Broker and one or more Tunnel
   Servers are needed.

4.1  The Tunnel Broker Service

   The TB will receive user requests to create tunnels. Potential users
   are all the clients of the ISP. We assume that the ISP clients have a
   commercial relationship with the ISP, so that the ISP can identify
   its clients and the prefix that the ISP has assigned to them. We also
   assume that, because of the existent business relationship between
   the ISP and its customer, the ISP has created the appropriate means
   to identify its clients through the network, such as a user name and
   a password or a public key certificate.

   So, the ISP customer will send a tunnel creation request to the TB.
   The TB can accept requests through different type of interfaces, for
   instance the TB can accept request submitted through http. Clients
   submitting requests have to properly identify themselves through
   existent means.

   The requests have to contain at least the following information:

   - Client identification.

   - The IPv6 address of the client side endpoint of the tunnel.

   - The IPv6 prefix for which a backup route through the tunnel will be
   created.

   - Request authorization information generated through available
   means, such as client's password or client's private/public key plus
   certificate.

   Upon the reception of a request the TB will:

   - Verify client identity.

   - Verify authorization information.

   - Verify that the prefix included in the request is contained in the
   address range that the ISP has delegated to this particular client.

   - Send configuration order to the appropriate TS to configure the
   requested tunnel.




Bagnulo & Garcia-Martinez    Expires July 23, 2004              [Page 7]

Internet-Draft                    MHTB                      January 2004


   - Inform the client of the IP address of the endpoint of ISP side of
   the tunnel.

4.2  The Tunnel Server

   The Tunnel Server service can be placed in different devices within
   the ISP network.

   An option is to use the exit router connecting the ISP to the client
   as the tunnel server. In this case, packets will always be forwarded
   to this exit router, and if the route through the direct link is not
   available, the exit router will forward the packets through the
   tunnel interface. This option requires the TB to be capable of
   communicating with the exit routers through the protocol selected for
   the task (rsh, smnp, others).


       +----------------------------------------+
       |                                        |
       |               Internet                 |
       +----------------------------------------+
               |                           |
         +----------------------+        +-----+
         |ISPA-PrefA            |        |ISPB |
         |                      |        |PrefB|
         |  +---+               |        +-----+
         |  |TB |   route to    |            |
         |  +---+   PrefA:Site::|            |
         |    |            ^    |            |
         |    v            |    |            |
         |    |          +----+ |            |
         |     ->->->->->|IAER| |            |
         |  tunnel conf  +----+ |            |
         +----------------|-|---+            |
                          | |                |
                          | \_______________ |
                          |   TunnelIA-ERB  ||
                          |                 ||
                          |                 ||
                 +--------|-----------------||--------+
                 |     +-----+            +-|---+     |
                 |     | ERA |            | ERB |     |
                 |     +-----+            +-----+     |
                 |                                    |
                 | Multi-Homed           PrefA:Site:: |
                 | Site                  PrefB:Site:: |
                 |                                    |
                 +------------------------------------+



Bagnulo & Garcia-Martinez    Expires July 23, 2004              [Page 8]

Internet-Draft                    MHTB                      January 2004


   Another option is to place specific TS devices. In this case, the TB
   will configure the tunnel in this specific TS device. The TS will
   then, upon the reception of this configuration orders, create the
   tunnel and will also start announcing the clients prefix through a
   route with a preference lower than the one contained in the route
   announced by the exit router.


       +----------------------------------------+
       |                                        |
       |               Internet                 |
       +----------------------------------------+
               |                           |
         +-----------------------+        +-----+
         |ISPA-PrefA             |        |ISPB |
         |                       |        |PrefB|
         | +---+           +---+ |        +-----+
         | |TS |-----------|TB | |           |
         | +---+tunnel conf+---+ |           |
         |   |                   |           |
         |   v         route     |           |
         | route       PrefA:Site|           |
         | PrefA:Site  pref high |           |
         | pref low       ^      |           |
         |                |      |           |
         |              +----+   |           |
         |              |IAER|   |           |
         |              +----+   |           |
         +----------------|-|----+           |
                          | |                |
                          | \_______________ |
                          |   TunnelIA-ERB  ||
                          |                 ||
                          |                 ||
                 +--------|-----------------||--------+
                 |     +-----+            +-|---+     |
                 |     | ERA |            | ERB |     |
                 |     +-----+            +-----+     |
                 |                                    |
                 | Multi-Homed           PrefA:Site:: |
                 | Site                  PrefB:Site:: |
                 |                                    |
                 +------------------------------------+








Bagnulo & Garcia-Martinez    Expires July 23, 2004              [Page 9]

Internet-Draft                    MHTB                      January 2004


5.  Security Considerations.

   This note proposes a Tunnel Broker service to simplify the management
   of tunnels used to provide multi-homing support as specified by RFC
   3178. The creation, modification and deletion of tunnels as well as
   the injection of the required routes are operations that affect the
   ISP critical infrastructure as it is the internal routing fabric. So,
   proper security mechanism has to be adopted in order to prevent
   potential attacks.

   The following communications have to be secured:

   - Communication between the client and the Tunnel Broker: it is
   assumed that the ISP has a mechanism to properly identify the client.
   Possible options are user name and password or private/public key
   pair and certificate. The request sent by the client to the Tunnel
   Broker have to contain authorization information based on this
   identification information.

   - Communication between the Tunnel Broker and the Tunnel Server. As
   specified in RFC 3053, this is a critical communication that has to
   be properly secured. Since it is a communication between two devices
   of the ISP, the particular security mechanism used by the ISP is out
   of the scope of this document.



























Bagnulo & Garcia-Martinez    Expires July 23, 2004             [Page 10]

Internet-Draft                    MHTB                      January 2004


References

   [1]  Hagino, J. and H. Snyder, "IPv6 Multihoming Support at Site Exit
        Routers", RFC 3178, October 2001.

   [2]   Durand , A.,  Fasano , P.,  Guardini , I. and D.  Lento , "IPv6
        Tunnel Broker", RFC 3053, January 2001.


Authors' Addresses

   Marcelo Bagnulo
   Universidad Carlos III de Madrid
   Av. Universidad 30
   Leganes, Madrid  28911
   SPAIN

   Phone: 34 91 6249500
   EMail: marcelo@it.uc3m.es
   URI:   http://www.it.uc3m.es


   Alberto Garcia-Martinez
   Universidad Carlos III de Madrid
   Av. Universidad 30
   Leganes, Madrid  28911
   SPAIN

   Phone: 34 91 6249500
   EMail: alberto@it.uc3m.es
   URI:   http://www.it.uc3m.es




















Bagnulo & Garcia-Martinez    Expires July 23, 2004             [Page 11]

Internet-Draft                    MHTB                      January 2004


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.


Full Copyright Statement

   Copyright (C) The Internet Society (2004). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION



Bagnulo & Garcia-Martinez    Expires July 23, 2004             [Page 12]

Internet-Draft                    MHTB                      January 2004


   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.











































Bagnulo & Garcia-Martinez    Expires July 23, 2004             [Page 13]



