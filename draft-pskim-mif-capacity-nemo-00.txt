


Network Working Group                                             P. Kim
Internet-Draft                              Korea Polytechnic University
Intended status: Experimental                                     
Expires: April 16, 2015                                 October 17, 2014         
					                                   


          Measuring Available Capacity for Mobile Networks
                  with Multiple Wireless Interfaces     

                  draft-pskim-mif-capacity-nemo-00

Abstract

   This draft proposes an estimation scheme of available capacity for 
   network mobility (NEMO) with the multi-interfaced mobile router 
   (MMR). In the proposed scheme, mobile nodes (MNs) can get 
   information on available capacity irrespective of the presence or 
   absence of estimation functionality. Since the MMR with 
   heterogeneous wireless network interfaces estimates available 
   capacity on behalf of the MNs inside the mobile network, the 
   proposed scheme does not require MNs to be involved in estimating 
   available capacity. A new algorithm for available capacity 
   estimation on MMR is developed to improve the estimation accuracy 
   compared with the existing scheme. The developed algorithm defines 
   three cases of the difference between the average output gap and the 
   input gap, and then reflects fully them, which can reduce the 
   detection error for the turning point and thus provide more accurate 
   estimation than the existing algorithm. Then, MNs can get 
   information on estimated available capacity from the MMR using L3 
   messages. Therefore, the proposed scheme can reduce burden and power 
   consumption of MNs with limited resource and battery power since MNs 
   do not estimates directly available capacity. In addition, the 
   proposed scheme can reduce considerably traffic overhead over 
   wireless links on multiple estimation paths since signaling messages 
   and injected testing traffic are reduced.

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference

Kim                     Expires  April 18, 2015                 [Page 1]

Internet-Draft      Measuring Available Capacity for NEMO       Oct 2014

   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on April 18, 2015.


Copyright Notice

   Copyright (c) 2012 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.
  
  
Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . . 2
   2.  Technical Background . . . . . . . . . . . . . . . . . . . . . 4
   2.1 End-to-End Path for Mobile Network . . . . . . . . . . . . . . 4
   2.2 Existing Available Capacity Estimation : IGI/PTR. . . . . . . 5
   3.  Available Capacity Estimation Scheme. . . . . . . . . . . . . 5
   3.1 Component. . . . . . . . . . . . . . . . . . . . . . . . . . . 6
   3.2 Algorithm for Available Capacity Estimation . . . . . . . . . 6
   3.3 Interaction between MMR and MNs. . . . . . . . . . . . . . . . 9
   4.  IANA Considerations. . . . . . . . . . . . . . . . . . . . . . 9
   5.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 9
   Author's Address . . . . . . . . . . . . . . . . . . . . . . . . .10


1.  Introduction

   The available capacity of an end-to-end network path is its 
   remaining capacity, that is, the amount of traffic that can be sent 
   along the path without congesting it[1][2]. This available capacity 
   between two hosts is an important network parameter for improving 
   quality of service (QoS) in many distributed applications, such as 
   the overlay construction of peer to peer system, optimization of 
   resource utilization, optimization of dynamic server selection, 
   socket buffer sizing, admission control, and congestion control. 
   Therefore, recently, the area of end-to-end available capacity 
   estimation has attracted considerable interest. As a result, several 
   schemes for the available capacity estimation have been developed 
   based on active measurements[3]-[5]. In active measurements, the 

Kim                     Expires  April 18, 2015                 [Page 2]

Internet-Draft      Measuring Available Capacity for NEMO       Oct 2014

   available capacity can be estimated by injecting probe traffic into
   the network, and then analyzing the observed effects of cross 
   traffic on the probes. This kind of active measurement only requires 
   access to the sender and receiver hosts.

   Meanwhile, to deal with the mobility support of mobile networks, the 
   Network Mobility (NEMO) techniques have been researched[6]. In the 
   NEMO, the mobile router (MR) is capable of changing its point of 
   attachment to the Internet without disrupting higher layer 
   connections of attached devices. Therefore, mobile nodes (MNs) 
   inside a mobile network are unaware of their network's mobility; 
   however, they are provided with uninterrupted Internet access even 
   when the network changes its attachment point to the Internet. This 
   draft considers the mobile network with a multi-interfaced mobile 
   router (MMR). In addition, to consider the heterogeneous wireless 
   network environment [7][8], the MMR can be assumed to have multiple 
   heterogeneous wireless network interfaces. Therefore, the MMR 
   establishes simultaneously multiple paths to the Internet through 
   external wireless interfaces such as wireless metropolitan area 
   network (WMAN) and wireless wide area network (WWAN) with high 
   mobility and wide coverage. However, due to capacity constraints of 
   multi-path through external wireless interfaces, the MMR might 
   require a capacity aggregation to get sufficient capacity for MNs' 
   demanding inside a mobile network. The capacity aggregation 
   requires generally several functions such as capacity estimation 
   and packet distribution, etc. Among them, this draft focuses on the 
   capacity estimation.

   Generally, there can be often many MNs inside the mobile network 
   with NEMO in heterogeneous wireless network environment. The MMR 
   enables the multi-path communication outside the mobile network. 
   Thus, MNs inside the mobile network can select the most appropriate 
   communication path depending on the network environment and then 
   communicate with corresponding hosts, such as the IPTV server, media
   streaming server, web server, FTP server, etc, via the MMR. If MNs 
   want to understand the condition of multiple communication paths, 
   they will estimates directly available capacity for each path. 
   Therefore, all MNs inside the mobile network are required to be 
   involved in estimating available capacity and thus have to 
   implement estimation functionality, which can be somewhat burdensome 
   and power consumptive for MNs with limited resource and battery 
   power. In addition, there can be the number of estimation signaling 
   messages and injected testing traffic as shown in active measurement 
   approaches[3], which can cause considerable traffic overhead over 
   wireless links on estimation paths.

   Therefore, this draft proposes an available capacity estimation 
   mobile networks. In the proposed scheme, when MNs inside the mobile 
   network want to understand the condition of multiple communication 
   paths outside the mobile network, they can get available capacity 

Kim                     Expires  April 18, 2015                 [Page 3]

Internet-Draft      Measuring Available Capacity for NEMO       Oct 2014

   irrespective of the presence or absence of estimation functionality. 
   That is, the proposed scheme does not require the MN to be involved 
   in estimating available capacity. Instead, the MMR estimates 
   available capacity on behalf of the MNs inside the mobile network. 
   The proposed available capacity estimation scheme requires an 
   estimation algorithm. Thus, in this draft, a new algorithm is 
   proposed based on the IGI/PTR scheme[3][4] to reduce the detection 
   error of the turning point and enhance the accuracy of the available 
   capacity estimation. The proposed algorithm reflects fully three 
   cases, while the existing IGI/PTR algorithm reflected only two cases. 
   Since three cases are handled respectively by appropriate 
   corresponding manners, the proposed algorithm can be expected to 
   reduce the detection error for the turning point. Therefore, the 
   end-to-end available capacity can be estimated more accurate than 
   existing algorithm. 
   
2. Technical Background

2.1 End-to-End Path for Mobile Network

   This draft considers the mobile network in heterogeneous wireless 
   networks. The MR is capable of changing its point of attachment to 
   the mobile network, moving from one link to another link. To 
   consider heterogeneous wireless networks, the MR is assumed to be 
   multi-homing and thus called the multi-interfaced mobile router 
   (MMR). The MMR has heterogeneous multiple network interfaces which 
   are categorized by internal and external wireless interfaces. With 
   the consideration of coverage and capacity, internal wireless 
   interfaces attached to MNs inside the mobile network would be WLAN 
   and external wireless interfaces attached to external base stations 
   would be WMAN and WWAN. Therefore, the MMR enables the multi-path 
   communication outside the mobile network through these heterogeneous 
   wireless interfaces. Meanwhile, MNs inside the mobile network are 
   assumed to have single wireless interface or heterogeneous multiple 
   wireless interfaces. Corresponding hosts (CHs) can be the IPTV 
   server, media streaming server, web server, FTP server, etc. MNs 
   inside the mobile network can communicate with CHs on multiple paths 
   via the MMR.

   The end-to-end multi-path from MNs inside the mobile network to CHs 
   outside the mobile network via the MMR consists of following three 
   links. Inside the mobile network, there is a link between MN and 
   MMR. The WLAN will be generally adopted as an air technology due to 
   high transmission speed and moderate coverage. Thus, MNs with WLAN 
   interface can communicate via the MMR with internal WLAN interface 
   inside the mobile network. Outside the mobile network, there is a 
   link between MMR and external BSs. The WMAN and WWAN will be 
   generally adopted as an air technology due to wide coverage. Thus, 
   the MMR with external WMAN and WWAN interfaces can communicate via 
   corresponding base stations (BSs). However, in this wireless link, 

Kim                     Expires  April 18, 2015                 [Page 4]

Internet-Draft      Measuring Available Capacity for NEMO       Oct 2014

   it is difficult to expect higher transmission speed than that of 
   the wireless link between MNs and MMR using WLAN. The link between 
   external BSs and CHs consists generally of routers with high 
   processing speed and wired networks with high transmission speed.

2.2 Existing Available Capacity Estimation : IGI/PTR

   The IGI(Initial Gap Increasing)/PTR(Packet Transmission Rate) 
   algorithm [3][4] was proposed for the available capacity estimation  
   and shown to be much faster than existing algorithms with similar 
   estimation accuracy but with shorter estimation latency. This 
   algorithm is based on a single-hop gap model that captures the 
   relationship between the competing traffic and the probing packet 
   train. As a sequence of probing packet trains from the source travel 
   through the network, packets belonging to the competing traffic may 
   be inserted between them, thus increasing the gap at the 
   destination. As a result, the average output gap value at the 
   destination may be a function of the competing traffic rate, making 
   it possible to estimate the amount of competing traffic. That is, 
   the average output gap can be used to determine the competing 
   traffic capacity and hence the available capacity on the 
   end-to-end path assuming that the bottleneck link capacity along the 
   end-to-end path is known. At some point, the average output gap 
   equals the average input gap as gaps in a probing packet train 
   increase. This point is called the "turning point". At the turning 
   point, the input gap value for which the average output gap is equal 
   to the input gap is the right value to use for estimating the 
   available capacity. However, there are some issues in the existing 
   IGI/PTR algorithm. After performing the estimation, three cases are 
   defined according to the difference between the average output gap 
   and the average input gap. These three cases mean that the average 
   output gap at the destination is (a) larger than, (b) equal to, (c) 
   less than the average input gap at the source. These three cases 
   have respectively different relationship between the average rate of 
   the probing packet train and the available capacity. However, the 
   existing algorithm did not reflect fully these three cases in order 
   to reduce the estimation latency. That is, both (b) and (c) cases 
   are handled in the same way, which can introduce the detection error 
   for the turning point since (b) and (c) cases are absolutely 
   different. Therefore, the available capacity can be estimated 
   inaccurately although the estimation latency can be reduced.

3.  Available Capacity Estimation Scheme   

   If MNs inside the mobile network measure directly IP performance 
   metrics, they are required to be involved in the measurement 
   procedure and thus have to implement measurement functionality, 
   which can be somewhat burdensome and power consumptive for MNs with 
   limited resource and battery power. In addition, there can be the 
   number of measurement signaling messages and injected testing 
   
Kim                     Expires  April 18, 2015                 [Page 5]

Internet-Draft      Measuring Available Capacity for NEMO       Oct 2014

   traffic, which can cause considerable traffic overhead over the 
   wireless links, such as link between MN and MMR, and link between 
   MMR and external BS, on measurement paths. In addition, as 
   mentioned previous section, the wireless link between MMR and 
   external BS is likely to be overloaded network link, that is, 
   "bottleneck link". Moreover, if there are many mobile networks 
   connected to external BS, this link is likely to be "tight link".  
   This means that IP performance metrics of the end-to-end 
   multi-path might be mostly influenced by the wireless link between 
   MMR and external BS.

   With the consideration of these problems, a measurement scheme of IP
   performance metrics is proposed for the mobile network in 
   heterogeneous wireless networks. In the proposed scheme, when MNs 
   inside the mobile network want to understand the condition of 
   multiple communication paths outside the mobile network, they can 
   get IP performance metrics irrespective of the presence or absence 
   of measurement functionality. Since the MMR with heterogeneous 
   wireless interfaces measures IP performance metrics on behalf of the 
   MNs inside the mobile network, the proposed scheme does not require 
   MNs to be involved in measuring IP performance metrics.

3.1  Component

   Main components on the end-to-end measurement path consist of MNs, 
   MMR, and measurement server. MNs inside the mobile network are 
   assumed to have a single wireless interface or heterogeneous 
   multiple wireless interfaces. When MNs want to get IP performance 
   metrics to understand the condition of multiple communication paths, 
   they can request to the MMR using the L3 message. Also, MNs can get 
   IP performance metrics that the MMR provides periodically. The MMR 
   measures IP performance metrics on behalf of the MNs inside the 
   mobile network. Since the MMR have heterogeneous external wireless 
   interfaces such as WMAN and WWAN, the MMR enables the multi-path 
   communication outside the mobile network and thus can measure IP 
   performance metrics for all paths through these heterogeneous 
   external wireless interfaces. The measurement server is a host that 
   receives testing traffic, calculates performance statistics, and 
   response results of IP performance metrics to the MMR. 

3.2  Algorithm for Available Capacity Estimation

   A new scheme for available capacity estimation is 
   proposed to improve the estimation accuracy compared with the 
   existing scheme. As mentioned before, since (b) and (c) cases 
   handled in the same way are absolutely different, they should be 
   handled by respectively.

   In this section, a new algorithm for available capacity estimation 
   is developed to improve the estimation accuracy compared with the 

Kim                     Expires  April 18, 2015                 [Page 6]

Internet-Draft      Measuring Available Capacity for NEMO       Oct 2014

   existing algorithm. As mentioned in Section 2, since cases (b) and 
   (c) handled in the same way are absolutely different, they should be 
   handled by respectively. Following parameters are defined:

      - A_bw : Available capacity.
      - B_bw : Bottleneck link capacity.
      - C_bw : Competing traffic capacity.
      - Gap_out : Average output gap.
      - Gap_in  : Average Input gap.
      - Delta : Equality boundary.
      - R_pkt: Average rate of the packet train.

   The end-to-end available capacity is defined as the difference 
   between the bottleneck link capacity along an end-to-end path and 
   the competing traffic. The bottleneck link capacity in the path 
   determines the end-to-end capacity which is the maximum IP layer 
   rate that the path can transfer from source to destination. In 
   other words, the capacity of a path establishes an upper bound on 
   the IP layer throughput that a user can expect to get from that 
   path. There are diverse measurement schemes for the bottleneck 
   link capacity. Therefore, the bottleneck link capacity can measured 
   from one of existing schemes.

   There are several important probing parameters such as probing 
   packet size, number of probing packet in packet train, and input 
   gap to get correct measurement. Among them, input gap in a probing 
   packet train is the most important parameter to control for 
   accurate available capacity estimation. The source sends a 
   sequence of probing packet trains with adjusting input gap. The 
   difference between the average output gap and the input gap is 
   observed for each train. Then, the turning point is detected for 
   estimating the available capacity.

   After performing a measurement, three cases are defined according to 
   the difference between the average output gap Gap_out$ and the input 
   gap Gap_in. Three cases are called 'Larger Than (LT)', 'Equal To 
   (EQ)', 'Smaller Than (ST)' cases which have respectively different 
   relationship between the average rate of the probing packet train 
   and the available capacity. These three cases are handled 
   respectively. As shown in three cases, the proposed algorithm 
   handles 'EQ' and 'ST' cases respectively while the existing 
   algorithm handles them in the same way.

        Cases   Condition                     Meanging
       ----------------------------------------------------
        LT      Gap_out > Gap_in + Delta/2    R_pkt > A_bw
        EQ      |Gap_out - Gap_in| < Delta    R_pkt = A_bw
        ST      Gap_out < Gap_in + Delta/2    R_pkt < A_bw
       ---------------------------------------------------- 


Kim                     Expires  April 18, 2015                 [Page 7]

Internet-Draft      Measuring Available Capacity for NEMO       Oct 2014

   (A) 'LT' Operation
    
   The estimation is repeated with the increased input gap. After then, 
   three cases observed once again. For each case, the estimation is 
   repeated with adjusting input gap as follows:

    - LT : increased input gap
    - EQ : same input gap as previous estimation
    - ST : decreased input gap

   In the existing algorithm, the estimation is repeated with the same 
   input gap as previous estimation for 'ST' case.

   (B) 'EQ' Operation

   The estimation is repeated with the same input gap as previous 
   estimation. After then, three cases are observed once again and then 
   handled respectively as follows:

    - LT : estimation with increased input gap
    - EQ : estimation finished (turning point detected)
    - ST : estimation with decreased input gap

   In the existing algorithm, the estimation is finished for 'ST' case.  

   (C) 'ST' Operation

   The estimation is repeated with the decreased input gap. In the 
   existing algorithm, the estimation is repeated with the same input 
   gap in this case. After then, three cases are observed once again 
   and then handled respectively as follows:

    - LT : estimation with increased input gap
    - EQ : estimation finished (turning point detected)
    - ST : estimation with decreased input gap

   In the existing algorithm, the estimation is finished for 'ST' case.  

   When the turning point is detected, the measurement is finished and 
   then the end-to-end available capacity can be estimated as follows. 
   The end-to-end available capacity  is obtained by subtracting the 
   competing traffic capacity from the bottleneck link capacity as 
   follows:

              A_bw = B_bw - C_bw
  
   As mentioned before, the bottleneck link capacity can be measured 
   from one of existing schemes. Then, the competing traffic 
   capacity can be computed using the average output gap and the input 
   gap at the turning point, and the bottleneck link capacity.

Kim                     Expires  April 18, 2015                 [Page 8]

Internet-Draft      Measuring Available Capacity for NEMO       Oct 2014
   
3.3  Interaction between MMR and MNs

   When MNs want to get IP performance metrics from the MMR to 
   understand the condition of multiple communication paths, following 
   two methods can be available:

   - Unsolicited Reqeust and Response : Irrespective of the request of 
     MNs, the MMR broadcasts periodically measured IP performances 
     metrics to MNs inside the mobile network.
   - Solicited Request and Response : A specific MN requests and then 
     the MMR unicasts measured IP performance metrics to the 
     corresponding MN.

   Request and Response messages can be defined by the Internet Control 
   Message Protocol (ICMP) message format in [10]. For example, for 
   unsolicited request and response, the unsolicited router 
   advertisement (RA) message format in [10] can be reused by the 
   modification of type field. For solicited request and response, 
   route solicitation (RS) and router advertisement (RA) message 
   formats in [10] can be reused by the modification of type field.
   Using obtained IP performance metrics, MNs can understand the 
   condition of multiple communication paths for heterogeneous multiple 
   wireless interfaces. Then, MNs may want to select the most 
   appropriate path per communication type. If the condition of all 
   communication paths is unfavorable, MNs with heterogeneous multiple 
   wireless interfaces can connect to the corresponding BS directly, 
   not via the MMR.

4.  IANA Considerations

   This document has no IANA actions.

5.  References

   [1] V. Paxson, G. Alimes, J. Mahdavi and M. Mathis, "Framework for 
       IP Performance Metrics," IETF RFC 2330, May 1998.

   [2] P. Chimento, J. Ishac, "Defining Network Capacity," IETF RFC 
       5136, Feb 2008.
             
   [3] N. Hu and P. Steenkiste, "Evaluation and characterization of 
       available bandwidth probing techniques," IEEE JSAC Special Issue
       in Internet and WWW Measurement, Mapping, and Modeling, vol. 21, 
       no. 6, pp. 879~894, 2003.

   [4] R. Prasad, C. Dovrolis, M. Murray, and K. Claffy, "Bandwidth 
       estimation: metrics, measurement techniques, and tools," IEEE 
       Network, vol. 17, pp. 27~35, 2003.

   [5] E. Bergfeldt, S. Ekelin, and J. M. Karlsson, "Real-time 

Kim                     Expires  April 18, 2015                 [Page 9]

Internet-Draft      Measuring Available Capacity for NEMO       Oct 2014

       available-bandwidth estimation using filtering and change 
       detection," Computer Networks, vol. 53, no. 15, pp. 2617~2645, 
       2009.

   [6] Thubert, P., A. Petrescu, R. Wakikawa and V. Devarapalli, 
       "Network Mobility (NEMO) Basic Support Protocol," RFC 3963, Jan 
       2005.

   [7] M. Blanchet, P. Seite, "Multiple Interfaces and Provisioning 
       Domains Problem Statement," IETF RFC 6418, November 2011.
   
   [8] M. Wasserman, P. Seite, "Current Practices for 
       Multiple-Interface Hosts," IETF RFC 6419, November 2011.

   [9] A. Conta, S. Deering, M. Gupta, "Internet Control Message 
       Protocol(ICMPv6) for the Internet Protocol Version 6 (IPv6) 
       Specification," IETF RFC 4443, March 2006.

   [10] T. Narten, E. Nordmark, W. Simpson, "Neighbor Discovery for IP 
       Version 6 (IPv6)," IETF RFC 2461, December 1998.

   [11]	L. Suciu, J-M. Bonnin, K. Guillouard, and T. Ernst, "Multiple 
        network interfaces management for mobile routers," in Proc. of 
        5th International Conference on ITS Telecommunications (ITST), 
        2005, pp. 347~351.
        
   [12]	X. Chen, H. Zhou, Y. Qin, and H. Zhang, "Multi-interfaced mobile 
        router scheme and enhanced path selection algorithm," in Proc. 
        of the International Conference on Telecommunications (ICT), 
        2008, pp. 1~8.
   
Author's Address

   Pyungsoo Kim
   Department of Electronics Engineering,
   Korea Polytechnic University,
   2121 Jungwang-Dong, Shiheung City,
   Gyeonggi-Do  429-793,    
   KOREA
   
   Phone: +82 31 8041 0489
   EMail: pskim@kpu.ac.kr
   
        
   
   
   
   
   
   
   
Kim                     Expires  April 18, 2015                [Page 10]
