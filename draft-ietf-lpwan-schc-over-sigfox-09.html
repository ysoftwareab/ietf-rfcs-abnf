<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>SCHC over Sigfox LPWAN</title>
<meta content="Juan Carlos Zúñiga" name="author">
<meta content="Carles Gomez" name="author">
<meta content="Sergio Aguilar" name="author">
<meta content="Laurent Toutain" name="author">
<meta content="Sandra Cespedes" name="author">
<meta content="Diego Wistuba" name="author">
<meta content="Julien Boite" name="author">
<meta content='
       The Generic Framework for Static Context Header Compression and Fragmentation (SCHC) specification describes two mechanisms: i) an application header 
compression scheme, and ii) a frame fragmentation and loss recovery functionality. SCHC offers a great level of flexibility that can be tailored for different 
Low Power Wide Area Network (LPWAN) technologies. 
       The present document provides the optimal parameters and modes of operation when SCHC is implemented over a Sigfox LPWAN. This set of parameters are also 
known as a "SCHC over Sigfox profile." 
       


    ' name="description">
<meta content="xml2rfc 3.12.2" name="generator">
<meta content="draft-ietf-lpwan-schc-over-sigfox-09" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.12.2
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.7.1
    pycountry 22.1.10
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.6.0
    six 1.16.0
    WeasyPrint 52.5
-->
<link href="/tmp/draft-ietf-lpwan-schc-over-sigfox-09-ak54ta8a.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">SCHC over Sigfox LPWAN</td>
<td class="right">February 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Zuniga, et al.</td>
<td class="center">Expires 25 August 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">lpwan Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-lpwan-schc-over-sigfox-09</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-02-21" class="published">21 February 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-08-25">25 August 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">JC. Zuniga</div>
</div>
<div class="author">
      <div class="author-name">C. Gomez</div>
<div class="org">Universitat Politècnica de Catalunya</div>
</div>
<div class="author">
      <div class="author-name">S. Aguilar</div>
<div class="org">Universitat Politècnica de Catalunya</div>
</div>
<div class="author">
      <div class="author-name">L. Toutain</div>
<div class="org">IMT-Atlantique</div>
</div>
<div class="author">
      <div class="author-name">S. Cespedes</div>
<div class="org">NIC Labs, Universidad de Chile</div>
</div>
<div class="author">
      <div class="author-name">D. Wistuba</div>
<div class="org">NIC Labs, Universidad de Chile</div>
</div>
<div class="author">
      <div class="author-name">J. Boite</div>
<div class="org">SIGFOX</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">SCHC over Sigfox LPWAN</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">The Generic Framework for Static Context Header Compression and Fragmentation (SCHC) specification describes two mechanisms: i) an application header 
compression scheme, and ii) a frame fragmentation and loss recovery functionality. SCHC offers a great level of flexibility that can be tailored for different 
Low Power Wide Area Network (LPWAN) technologies.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">The present document provides the optimal parameters and modes of operation when SCHC is implemented over a Sigfox LPWAN. This set of parameters are also 
known as a "SCHC over Sigfox profile."<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 25 August 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-schc-over-sigfox" class="xref">SCHC over Sigfox</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-network-architecture" class="xref">Network Architecture</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-uplink" class="xref">Uplink</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-downlink" class="xref">Downlink</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="xref">3.4</a>.  <a href="#name-schc-ack-on-downlink" class="xref">SCHC-ACK on Downlink</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="xref">3.5</a>.  <a href="#name-schc-rules" class="xref">SCHC Rules</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.6">
                <p id="section-toc.1-1.3.2.6.1"><a href="#section-3.6" class="xref">3.6</a>.  <a href="#name-fragmentation" class="xref">Fragmentation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.6.2.1">
                    <p id="section-toc.1-1.3.2.6.2.1.1"><a href="#section-3.6.1" class="xref">3.6.1</a>.  <a href="#name-uplink-fragmentation" class="xref">Uplink Fragmentation</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.6.2.2">
                    <p id="section-toc.1-1.3.2.6.2.2.1"><a href="#section-3.6.2" class="xref">3.6.2</a>.  <a href="#name-downlink-fragmentation" class="xref">Downlink Fragmentation</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.7">
                <p id="section-toc.1-1.3.2.7.1"><a href="#section-3.7" class="xref">3.7</a>.  <a href="#name-schc-over-sigfox-f-r-messag" class="xref">SCHC-over-Sigfox F/R Message Formats</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.7.2.1">
                    <p id="section-toc.1-1.3.2.7.2.1.1"><a href="#section-3.7.1" class="xref">3.7.1</a>.  <a href="#name-uplink-ack-on-error-mode-sin" class="xref">Uplink ACK-on-Error Mode: Single-byte SCHC Header</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.7.2.2">
                    <p id="section-toc.1-1.3.2.7.2.2.1"><a href="#section-3.7.2" class="xref">3.7.2</a>.  <a href="#name-uplink-ack-on-error-mode-two-" class="xref">Uplink ACK-on-Error Mode: Two-byte SCHC Header Option 2</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.8">
                <p id="section-toc.1-1.3.2.8.1"><a href="#section-3.8" class="xref">3.8</a>.  <a href="#name-schc-sender-abort" class="xref">SCHC-Sender Abort</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.9">
                <p id="section-toc.1-1.3.2.9.1"><a href="#section-3.9" class="xref">3.9</a>.  <a href="#name-schc-receiver-abort" class="xref">SCHC-Receiver Abort</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.10">
                <p id="section-toc.1-1.3.2.10.1"><a href="#section-3.10" class="xref">3.10</a>. <a href="#name-padding" class="xref">Padding</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-fragmentation-sequence-exam" class="xref">Fragmentation Sequence Examples</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-uplink-no-ack-examples" class="xref">Uplink No-ACK Examples</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-uplink-ack-on-error-example" class="xref">Uplink ACK-on-Error Examples: Single-byte SCHC Header</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-schc-abort-examples" class="xref">SCHC Abort Examples</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-security-considerations" class="xref">Security considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-acknowledgements" class="xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="Introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The Generic Framework for Static Context Header Compression and Fragmentation (SCHC) specification <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> describes two mechanisms: 
i) a frame fragmentation and loss recovery functionality, and ii) an application header compression scheme. Either can be used on top of all the four LWPAN technologies 
defined in <span>[<a href="#RFC8376" class="xref">RFC8376</a>]</span>. These LPWANs have similar characteristics such as star-oriented 
topologies, network architecture, connected devices with built-in applications, etc.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">SCHC offers a great level of flexibility to accommodate all these LPWAN technologies. Even though there are a great number of similarities between 
them, some differences exist with respect to the transmission characteristics, payload sizes, etc. Hence, there are optimal parameters and modes of operation 
that can be used when SCHC is used on top of a specific LPWAN technology.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">This document describes the recommended parameters, settings, and modes of operation to be used when SCHC is implemented over a Sigfox LPWAN. This set of parameters 
are also known as a "SCHC over Sigfox profile" or simply "SCHC/Sigfox."<a href="#section-1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">It is assumed that the reader is familiar with the terms and mechanisms defined in <span>[<a href="#RFC8376" class="xref">RFC8376</a>]</span> and 
in <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>.<a href="#section-2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="schc-over-sigfox">
<section id="section-3">
      <h2 id="name-schc-over-sigfox">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-schc-over-sigfox" class="section-name selfRef">SCHC over Sigfox</a>
      </h2>
<p id="section-3-1">The Generic SCHC Framework described in <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> takes advantage of the 
predictability of data flows existing in LPWAN applications to avoid context synchronization.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">Contexts need to be stored and pre-configured on both ends. This can be done either by using a provisioning protocol, by out of band means, or by
pre-provisioning them (e.g. at manufacturing time). The way contexts are configured and stored on both ends is out of the scope of this document.<a href="#section-3-2" class="pilcrow">¶</a></p>
<div id="network-arch">
<section id="section-3.1">
        <h3 id="name-network-architecture">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-network-architecture" class="section-name selfRef">Network Architecture</a>
        </h3>
<p id="section-3.1-1"><a href="#Fig-archi" class="xref">Figure 1</a> represents the architecture for compression/decompression (C/D) and fragmentation/reassembly (F/R) based 
on the terminology defined in <span>[<a href="#RFC8376" class="xref">RFC8376</a>]</span>, where the Radio Gateway (RG) is a Sigfox Base Station and the Network Gateway (NGW) is the 
Sigfox cloud-based Network.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<span id="name-network-architecture-2"></span><div id="Fig-archi">
<figure id="figure-1">
          <div class="alignLeft art-text artwork" id="section-3.1-2.1">
<pre>


  Sigfox Device                                           Application
+----------------+                                     +--------------+
| APP1 APP2 APP3 |                                     |APP1 APP2 APP3|
+----------------+                                     +--------------+
|   UDP  |       |                                     |     |  UDP   |
|  IPv6  |       |                                     |     | IPv6   |
+--------+       |                                     |     +--------+
| SCHC C/D &amp; F/R |                                     |              |
|                |                                     |              |
+-------+--------+                                     +--------+-----+
        $                                                       .
        $   +---------+     +--------------+     +---------+    .
        $   |         |     |              |     | Network |    .
        +~~ |Sigfox BS|     |Sigfox Network|     |  SCHC   |    .
            |  (RG)   | === |    (NGW)     | === |C/D &amp; F/R|.....
            +---------+     +--------------+     +---------+

</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-network-architecture-2" class="selfRef">Network Architecture</a>
          </figcaption></figure>
</div>
<p id="section-3.1-3">In the case of the global Sigfox Network, RGs (or Base Stations) are distributed over multiple countries wherever the Sigfox LPWAN service is provided. 
The NGW (or cloud-based Sigfox Core Network) is a single entity that connects to all Sigfox base stations in the world, providing hence a global single star network topology.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1-4">The Device sends application flows that are compressed and/or fragmented by a SCHC Compressor/Decompressor (SCHC C/D + F/R) to reduce headers size and/or fragment the packet. 
The resulting SCHC Message is sent over a layer two (L2) Sigfox frame to the Sigfox Base Stations, which then forward the SCHC Message to the Network Gateway (NGW). 
The NGW then delivers the SCHC Message and associated gathered metadata to the Network SCHC C/D + F/R.<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<p id="section-3.1-5">The Sigfox Network (NGW) communicates with the Network SCHC C/D + F/R for compression/decompression and/or for fragmentation/reassembly. The Network SCHC C/D + F/R shares the same set of rules 
as the Dev SCHC C/D + F/R. The Network SCHC C/D + F/R can be collocated with the NGW or it could be located in a different place, as long as a tunnel or secured communication is established between 
the NGW and the SCHC C/D + F/R functions. After decompression and/or reassembly, the packet can be forwarded over the Internet to one (or several) LPWAN Application Server(s) (App).<a href="#section-3.1-5" class="pilcrow">¶</a></p>
<p id="section-3.1-6">The SCHC C/D + F/R processes are bidirectional, so the same principles are applicable on both uplink (UL) and downlink (DL).<a href="#section-3.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="uplink">
<section id="section-3.2">
        <h3 id="name-uplink">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-uplink" class="section-name selfRef">Uplink</a>
        </h3>
<p id="section-3.2-1">Uplink Sigfox transmissions occur in repetitions over different times and frequencies. 
Besides time and frequency diversities, the Sigfox network also provides space diversity, as potentially an uplink message will be received by several base stations.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">Since all messages are self-contained and base stations forward all these messages back to the same Sigfox Network, multiple input copies can be 
combined at the NGW providing for extra reliability based on the triple diversity (i.e., time, space and frequency).<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">
A detailed description of the Sigfox Radio Protocol can be found in <span>[<a href="#sigfox-spec" class="xref">sigfox-spec</a>]</span>.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">Messages sent from the Device to the Network are delivered by the Sigfox network (NGW) to the Network SCHC C/D + F/R through a 
callback/API with the following information:<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-5.1">Device ID<a href="#section-3.2-5.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-5.2">Message Sequence Number<a href="#section-3.2-5.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-5.3">Message Payload<a href="#section-3.2-5.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-5.4">Message Timestamp<a href="#section-3.2-5.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-5.5">Device Geolocation (optional)<a href="#section-3.2-5.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-5.6">RSSI (optional)<a href="#section-3.2-5.6" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-5.7">Device Temperature (optional)<a href="#section-3.2-5.7" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-5.8">Device Battery Voltage (optional)<a href="#section-3.2-5.8" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-3.2-6">The Device ID is a globally unique identifier assigned to the Device, which is included in the Sigfox header of every message. The Message Sequence Number is a monotonically 
increasing number identifying the specific transmission of this uplink message, and it is also part of the Sigfox header. The Message Payload corresponds to the payload that the 
Device has sent in the uplink transmission.<a href="#section-3.2-6" class="pilcrow">¶</a></p>
<p id="section-3.2-7">The Message Timestamp, Device Geolocation, RSSI, Device Temperature and Device Battery Voltage are metadata parameters provided by the Network.<a href="#section-3.2-7" class="pilcrow">¶</a></p>
<p id="section-3.2-8">A detailed description of the Sigfox callbacks/APIs can be found in <span>[<a href="#sigfox-callbacks" class="xref">sigfox-callbacks</a>]</span>.<a href="#section-3.2-8" class="pilcrow">¶</a></p>
<p id="section-3.2-9">Only messages that have passed the L2 Cyclic Redundancy Check (CRC) at network reception are delivered by the Sigfox Network to the Network SCHC C/D + F/R.<a href="#section-3.2-9" class="pilcrow">¶</a></p>
<span id="name-schc-message-in-sigfox"></span><div id="SCHC-Message">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-3.2-10.1">
<pre>

               +---------------+-----------------+
               | Sigfox Header | Sigfox payload  |
               +---------------+---------------- +
                               |   SCHC message  |
                               +-----------------+

</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-schc-message-in-sigfox" class="selfRef">SCHC Message in Sigfox</a>
          </figcaption></figure>
</div>
<p id="section-3.2-11"><a href="#SCHC-Message" class="xref">Figure 2</a> shows a SCHC Message sent over Sigfox, where the SCHC Message could be a full SCHC Packet (e.g. compressed) 
or a SCHC Fragment (e.g. a piece of a bigger SCHC Packet).<a href="#section-3.2-11" class="pilcrow">¶</a></p>
</section>
</div>
<div id="downlink">
<section id="section-3.3">
        <h3 id="name-downlink">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-downlink" class="section-name selfRef">Downlink</a>
        </h3>
<p id="section-3.3-1">
Downlink transmissions are Device-driven and can only take place following an uplink communication that so indicates. Hence, a Device explicitly indicates its intention to receive a downlink message 
using a donwlink request flag when sending the preceding uplink message to the network. After completing the uplink transmission, the Device opens a fixed window for downlink reception.  
The delay and duration of the reception opportunity window have fixed values. If there is a downlink message to be sent for this given Device (e.g. either 
a response to the uplink message or queued information waiting to be transmitted), the network transmits this message to the Device during the reception window. If no message is received by the Device after 
the reception opportunity window has elapsed, the Device closes the reception window opportunity and gets back to the normal mode (e.g., continue UL transmissions, sleep, stand-by, etc.)<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">When a downlink message is sent to a Device, a reception acknowledgement is generated by the Device and sent back to the Network through the Sigfox radio protocol and reported in the Sigfox Network backend.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<p id="section-3.3-3">
A detailed description of the Sigfox Radio Protocol can be found in <span>[<a href="#sigfox-spec" class="xref">sigfox-spec</a>]</span> and a detailed description of the Sigfox callbacks/APIs can be found in <span>[<a href="#sigfox-callbacks" class="xref">sigfox-callbacks</a>]</span>.<a href="#section-3.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="dl_ack">
<section id="section-3.4">
        <h3 id="name-schc-ack-on-downlink">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-schc-ack-on-downlink" class="section-name selfRef">SCHC-ACK on Downlink</a>
        </h3>
<p id="section-3.4-1">
As explained previously, downlink transmissions are Device-driven and can only take place following a specific uplink transmission that indicates and allows a following downlink opportunity. 
For this reason, when SCHC bi-directional services are used (e.g. Ack-on-Error fragmentation mode) the SCHC protocol implementation needs to consider the times when a downlink message 
(e.g. SCHC-ACK) can be sent and/or received.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4-2">
For the UL ACK-on-Error fragmentation mode, a DL opportunity MUST be indicated by the last fragment of every window (i.e. FCN = All-0, or FCN = All-1). The Device sends the fragments in sequence and, after 
transmitting the FCN = All-0 or FCN = All-1, it opens up a reception opportunity. The Network SCHC can then decide to respond at that opportunity (or wait for a further one) with a SCHC-ACK indicating 
in case there are missing fragments from the current or previous windows. If there is no SCHC-ACK to be sent, or if the network decides to wait for a further DL transmission opportunity, then no 
DL transmission takes place at that opportunity and after a timeout the UL transmissions continue. Intermediate SCHC fragments with FCN different from All-0 or All-1 MUST NOT use the DL request flag 
to request a SCHC-ACK.<a href="#section-3.4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="schc-rules">
<section id="section-3.5">
        <h3 id="name-schc-rules">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-schc-rules" class="section-name selfRef">SCHC Rules</a>
        </h3>
<p id="section-3.5-1">
The RuleID MUST be included in the SCHC header. The total number of rules to be used affects directly the Rule ID field size, and therefore 
the total size of the fragmentation header. For this reason, it is recommended to keep the number of rules that are defined for a specific device to the minimum possible.<a href="#section-3.5-1" class="pilcrow">¶</a></p>
<p id="section-3.5-2">
RuleIDs can be used to differentiate data traffic classes (e.g.  QoS, control vs. data, etc.), and data sessions. 
They can also be used to interleave simultaneous fragmentation sessions between a Device and the Network.<a href="#section-3.5-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Frag">
<section id="section-3.6">
        <h3 id="name-fragmentation">
<a href="#section-3.6" class="section-number selfRef">3.6. </a><a href="#name-fragmentation" class="section-name selfRef">Fragmentation</a>
        </h3>
<p id="section-3.6-1">
The SCHC specification <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> defines a generic fragmentation functionality that
allows sending data packets or files larger than the maximum size of a Sigfox payload. The functionality also defines a mechanism to send 
reliably multiple messages, by allowing to resend selectively any lost fragments.<a href="#section-3.6-1" class="pilcrow">¶</a></p>
<p id="section-3.6-2">
The SCHC fragmentation supports several modes of operation. These modes have different advantages and disadvantages depending 
on the specifics of the underlying LPWAN technology and application Use Case. This section describes how the SCHC fragmentation functionality 
should optimally be implemented when used over a Sigfox LPWAN for the most typical Use Case applications.<a href="#section-3.6-2" class="pilcrow">¶</a></p>
<p id="section-3.6-3">As described in section 8.2.3 of <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>, the integrity of the fragmentation-reassembly process of a SCHC Packet MUST be 
checked at the receive end. Since only UL messages/fragments that have passed the Sigfox CRC-check are delivered to the Network SCHC C/D + F/R, 
integrity can be guaranteed when no consecutive messages are missing from the sequence and all FCN bitmaps are complete.  With this functionality
in mind, and in order to save protocol and processing overhead, the use of a Reassembly Check Sequence (RCS) as described in 
<a href="#all-1-behaviour" class="xref">Section 3.6.1.5</a> is RECOMMENDED.<a href="#section-3.6-3" class="pilcrow">¶</a></p>
<p id="section-3.6-4">The L2 Word Size used by Sigfox is 1 byte (8 bits).<a href="#section-3.6-4" class="pilcrow">¶</a></p>
<div id="uplink-fragmentation">
<section id="section-3.6.1">
          <h4 id="name-uplink-fragmentation">
<a href="#section-3.6.1" class="section-number selfRef">3.6.1. </a><a href="#name-uplink-fragmentation" class="section-name selfRef">Uplink Fragmentation</a>
          </h4>
<p id="section-3.6.1-1">Sigfox uplink transmissions are completely asynchronous and take place in any random frequency of the allowed uplink bandwidth allocation. 
In addition, devices may go to deep sleep mode, and then wake up and transmit whenever there is a need to send information to the network. 
Data packets are self-contained (aka "message in a bottle") with all the required information for the network to process them accordingly.
Hence, there is no need to perform any network attachment, synchronization, or other procedure before transmitting a data packet.<a href="#section-3.6.1-1" class="pilcrow">¶</a></p>
<p id="section-3.6.1-2">Since uplink transmissions are asynchronous, a SCHC fragment can be transmitted at any given time by the Device. Sigfox uplink messages 
are fixed in size, and as described in <span>[<a href="#RFC8376" class="xref">RFC8376</a>]</span> they can carry 0-12 bytes payload. Hence, a single SCHC Tile size per fragmentation 
mode can be defined so that every Sigfox message always carries one SCHC Tile.<a href="#section-3.6.1-2" class="pilcrow">¶</a></p>
<p id="section-3.6.1-3">When the ACK-on-Error mode is used for uplink fragmentation, the SCHC Compound ACK defined in <span>[<a href="#I-D.ietf-lpwan-schc-compound-ack" class="xref">I-D.ietf-lpwan-schc-compound-ack</a>]</span>) MUST be used in the downlink responses.<a href="#section-3.6.1-3" class="pilcrow">¶</a></p>
<div id="no-ack-mode">
<section id="section-3.6.1.1">
            <h5 id="name-uplink-no-ack-mode">
<a href="#section-3.6.1.1" class="section-number selfRef">3.6.1.1. </a><a href="#name-uplink-no-ack-mode" class="section-name selfRef">Uplink No-ACK Mode</a>
            </h5>
<p id="section-3.6.1.1-1">No-ACK is RECOMMENDED to be used for transmitting short, non-critical packets that require fragmentation and do not require full reliability. 
This mode can be used by uplink-only devices that do not support downlink communications, or by bidirectional devices when they send non-critical
data.<a href="#section-3.6.1.1-1" class="pilcrow">¶</a></p>
<p id="section-3.6.1.1-2">Since there are no multiple windows in the No-ACK mode, the W bit is not present. However it is RECOMMENDED to use the FCN field to indicate the 
size of the data packet. In this sense, the data packet would need to be splitted into X fragments and, similarly to the other fragmentation modes, 
the first transmitted fragment would need to be marked with FCN = X-1. Consecutive fragments MUST be marked with decreasing FCN values, having the 
last fragment marked with FCN = (All-1). Hence, even though the No-ACK mode does not allow recovering missing fragments, it allows indicating implicitly 
the size of the expected packet to the Network and hence detect at the receiver side whether all fragments have been received or not.<a href="#section-3.6.1.1-2" class="pilcrow">¶</a></p>
<p id="section-3.6.1.1-3">The RECOMMENDED Fragmentation Header size is 8 bits, and it is composed as follows:<a href="#section-3.6.1.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.6.1.1-4.1">RuleID size: 4 bits<a href="#section-3.6.1.1-4.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.1-4.2">DTag size (T): 0 bits<a href="#section-3.6.1.1-4.2" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.1-4.3">Fragment Compressed Number (FCN) size (N): 4 bits<a href="#section-3.6.1.1-4.3" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.1-4.4">As per <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>, in the No-ACK mode the W (window) field is not present.<a href="#section-3.6.1.1-4.4" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.1-4.5">RCS size: 0 bits (Not used)<a href="#section-3.6.1.1-4.5" class="pilcrow">¶</a>
</li>
            </ul>
</section>
</div>
<div id="ack-on-error-mode-1">
<section id="section-3.6.1.2">
            <h5 id="name-uplink-ack-on-error-mode-si">
<a href="#section-3.6.1.2" class="section-number selfRef">3.6.1.2. </a><a href="#name-uplink-ack-on-error-mode-si" class="section-name selfRef">Uplink ACK-on-Error Mode: Single-byte SCHC Header</a>
            </h5>
<p id="section-3.6.1.2-1">ACK-on-Error with single-byte header is RECOMMENDED for medium to large size packets that need to be sent
   reliably. ACK-on-Error is optimal for Sigfox transmissions, since it leads to a reduced number of ACKs 
   in the lower capacity downlink channel. Also, downlink messages can be sent asynchronously and opportunistically.<a href="#section-3.6.1.2-1" class="pilcrow">¶</a></p>
<p id="section-3.6.1.2-2">Allowing transmission of packets/files up to 300 bytes long, the SCHC uplink Fragmentation Header size is
   RECOMMENDED to be 8 bits in size and is composed as follows:<a href="#section-3.6.1.2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.6.1.2-3.1">Rule ID size: 3 bits<a href="#section-3.6.1.2-3.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.2-3.2">DTag size (T): 0 bits<a href="#section-3.6.1.2-3.2" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.2-3.3">Window index (W) size (M): 2 bits<a href="#section-3.6.1.2-3.3" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.2-3.4">Fragment Compressed Number (FCN) size (N): 3 bits<a href="#section-3.6.1.2-3.4" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.2-3.5">MAX_ACK_REQUESTS: 5<a href="#section-3.6.1.2-3.5" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.2-3.6">WINDOW_SIZE: 7 (with a maximum value of FCN=0b110)<a href="#section-3.6.1.2-3.6" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.2-3.7">Tile size: 11 bytes<a href="#section-3.6.1.2-3.7" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.2-3.8">Retransmission Timer: Application-dependent<a href="#section-3.6.1.2-3.8" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.2-3.9">Inactivity Timer: Application-dependent<a href="#section-3.6.1.2-3.9" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.2-3.10">RCS size: 3 bits<a href="#section-3.6.1.2-3.10" class="pilcrow">¶</a>
</li>
            </ul>
</section>
</div>
<div id="ack-on-error-mode-2">
<section id="section-3.6.1.3">
            <h5 id="name-uplink-ack-on-error-mode-tw">
<a href="#section-3.6.1.3" class="section-number selfRef">3.6.1.3. </a><a href="#name-uplink-ack-on-error-mode-tw" class="section-name selfRef">Uplink ACK-on-Error Mode: Two-byte SCHC Header Option 1</a>
            </h5>
<p id="section-3.6.1.3-1">ACK-on-Error with two-byte header is RECOMMENDED for very large size packets that need to be sent
   reliably.  ACK-on-Error is optimal for Sigfox transmissions, since it
   leads to a reduced number of ACKs in the lower capacity downlink
   channel. Also, downlink messages can be sent asynchronously and
   opportunistically.<a href="#section-3.6.1.3-1" class="pilcrow">¶</a></p>
<p id="section-3.6.1.3-2">In order to allow transmission of large packets/files up to 480 bytes long, the SCHC uplink Fragmentation Header size is 
RECOMMENDED to be 16 bits in size and composed as follows:<a href="#section-3.6.1.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.6.1.3-3.1">Rule ID size is: 6 bits<a href="#section-3.6.1.3-3.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.3-3.2">DTag size (T) is: 0 bits<a href="#section-3.6.1.3-3.2" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.3-3.3">Window index (W) size (M): 2 bits<a href="#section-3.6.1.3-3.3" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.3-3.4">Fragment Compressed Number (FCN) size (N): 4 bits.<a href="#section-3.6.1.3-3.4" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.3-3.5">MAX_ACK_REQUESTS: 5<a href="#section-3.6.1.3-3.5" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.3-3.6">WINDOW_SIZE: 12 (with a maximum value of FCN=0b1011)<a href="#section-3.6.1.3-3.6" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.3-3.7">Tile size: 10 bytes<a href="#section-3.6.1.3-3.7" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.3-3.8">Retransmission Timer: Application-dependent<a href="#section-3.6.1.3-3.8" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.3-3.9">Inactivity Timer: Application-dependent<a href="#section-3.6.1.3-3.9" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.3-3.10">RCS size: 4 bits<a href="#section-3.6.1.3-3.10" class="pilcrow">¶</a>
</li>
            </ul>
</section>
</div>
<div id="ack-on-error-mode-3">
<section id="section-3.6.1.4">
            <h5 id="name-uplink-ack-on-error-mode-two">
<a href="#section-3.6.1.4" class="section-number selfRef">3.6.1.4. </a><a href="#name-uplink-ack-on-error-mode-two" class="section-name selfRef">Uplink ACK-on-Error Mode: Two-byte SCHC Header Option 2</a>
            </h5>
<p id="section-3.6.1.4-1">In order to allow transmission of very large packets/files up to 2250 bytes long, the SCHC uplink Fragmentation Header size is 
RECOMMENDED to be 16 bits in size and composed as follows:<a href="#section-3.6.1.4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.6.1.4-2.1">Rule ID size is: 8 bits<a href="#section-3.6.1.4-2.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.4-2.2">DTag size (T) is: 0 bits<a href="#section-3.6.1.4-2.2" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.4-2.3">Window index (W) size (M): 3 bits<a href="#section-3.6.1.4-2.3" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.4-2.4">Fragment Compressed Number (FCN) size (N): 5 bits.<a href="#section-3.6.1.4-2.4" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.4-2.5">MAX_ACK_REQUESTS: 5<a href="#section-3.6.1.4-2.5" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.4-2.6">WINDOW_SIZE: 31 (with a maximum value of FCN=0b11110)<a href="#section-3.6.1.4-2.6" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.4-2.7">Tile size: 10 bytes<a href="#section-3.6.1.4-2.7" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.4-2.8">Retransmission Timer: Application-dependent<a href="#section-3.6.1.4-2.8" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.4-2.9">Inactivity Timer: Application-dependent<a href="#section-3.6.1.4-2.9" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.6.1.4-2.10">RCS size: 5 bits<a href="#section-3.6.1.4-2.10" class="pilcrow">¶</a>
</li>
            </ul>
</section>
</div>
<div id="all-1-behaviour">
<section id="section-3.6.1.5">
            <h5 id="name-all-1-and-rcs-behaviour">
<a href="#section-3.6.1.5" class="section-number selfRef">3.6.1.5. </a><a href="#name-all-1-and-rcs-behaviour" class="section-name selfRef">All-1 and RCS behaviour</a>
            </h5>
<p id="section-3.6.1.5-1">For ACK-on-Error, as defined in <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>, it is expected that the last SCHC fragment of the last window will always be delivered 
with an All-1 FCN. Since this last window may not be full (i.e. it may be comprised of less than WINDOW_SIZE fragments), an All-1 fragment 
may follow a value of FCN higher than 1 (0b01). In this case, the receiver could not derive from the FCN values alone whether there are any missing 
fragments right before the All-1 fragment or not.<a href="#section-3.6.1.5-1" class="pilcrow">¶</a></p>
<p id="section-3.6.1.5-2">For Rules where the number of fragments in the last window is unknown, an RCS field MUST be used, indicating the number of fragments 
in the last window, including the All-1. With this RCS value, the receiver can detect if there are missing fragments before the All-1 and hence 
construct the corresponding SCHC ACK Bitmap accordingly, and send it in response to the All-1.<a href="#section-3.6.1.5-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="downlink-fragmentation">
<section id="section-3.6.2">
          <h4 id="name-downlink-fragmentation">
<a href="#section-3.6.2" class="section-number selfRef">3.6.2. </a><a href="#name-downlink-fragmentation" class="section-name selfRef">Downlink Fragmentation</a>
          </h4>
<p id="section-3.6.2-1">In some LPWAN technologies, as part of energy-saving techniques, downlink transmission is only possible immediately after an uplink 
transmission. This allows the device to go in a very deep sleep mode and preserve battery, without the need to listen to any information 
from the network. This is the case for Sigfox-enabled devices, which can only listen to downlink communications after performing an 
uplink transmission and requesting a downlink.<a href="#section-3.6.2-1" class="pilcrow">¶</a></p>
<p id="section-3.6.2-2">When there are fragments to be transmitted in the downlink, an uplink message is required to trigger the downlink communication.
In order to avoid potentially high delay for fragmented datagram transmission in the downlink, the fragment receiver MAY perform an 
uplink transmission as soon as possible after reception of a downlink fragment that is not the last one. Such uplink transmission 
MAY be triggered by sending a SCHC message, such as a SCHC ACK. However, other data messages can equally be used to trigger DL 
communications.<a href="#section-3.6.2-2" class="pilcrow">¶</a></p>
<p id="section-3.6.2-3">Sigfox downlink messages are fixed in size, and as described in <span>[<a href="#RFC8376" class="xref">RFC8376</a>]</span> they can carry up to 8 bytes payload. Hence, a 
single SCHC Tile size per mode can be defined so that every Sigfox message always carries one SCHC Tile.<a href="#section-3.6.2-3" class="pilcrow">¶</a></p>
<p id="section-3.6.2-4">For reliable downlink fragment transmission, the ACK-Always mode is RECOMMENDED.<a href="#section-3.6.2-4" class="pilcrow">¶</a></p>
<p id="section-3.6.2-5">The SCHC downlink Fragmentation Header size is RECOMMENDED to be 8 bits in size and is composed as follows:<a href="#section-3.6.2-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.6.2-6.1">RuleID size: 3 bits<a href="#section-3.6.2-6.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.6.2-6.2">DTag size (T): 0 bits<a href="#section-3.6.2-6.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.6.2-6.3">Window index (W) size (M) is: 0 bits<a href="#section-3.6.2-6.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.6.2-6.4">Fragment Compressed Number (FCN) size (N): 5 bits<a href="#section-3.6.2-6.4" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.6.2-6.5">MAX_ACK_REQUESTS: 5<a href="#section-3.6.2-6.5" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.6.2-6.6">WINDOW_SIZE: 31 (with a maximum value of FCN=0b11110)<a href="#section-3.6.2-6.6" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.6.2-6.7">Tile size: 7 bytes<a href="#section-3.6.2-6.7" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.6.2-6.8">Retransmission Timer: Application-dependent<a href="#section-3.6.2-6.8" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.6.2-6.9">Inactivity Timer: Application-dependent<a href="#section-3.6.2-6.9" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.6.2-6.10">RCS size: 0 bits (Not used)<a href="#section-3.6.2-6.10" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="schc-sigfox-message-formats">
<section id="section-3.7">
        <h3 id="name-schc-over-sigfox-f-r-messag">
<a href="#section-3.7" class="section-number selfRef">3.7. </a><a href="#name-schc-over-sigfox-f-r-messag" class="section-name selfRef">SCHC-over-Sigfox F/R Message Formats</a>
        </h3>
<p id="section-3.7-1">This section depicts the different formats of SCHC Fragment, SCHC ACK (including the SCHC Compound ACK 
defined in <span>[<a href="#I-D.ietf-lpwan-schc-compound-ack" class="xref">I-D.ietf-lpwan-schc-compound-ack</a>]</span>), and SCHC Abort used in SCHC over Sigfox.<a href="#section-3.7-1" class="pilcrow">¶</a></p>
<div id="UL-ACKoE-single-byte">
<section id="section-3.7.1">
          <h4 id="name-uplink-ack-on-error-mode-sin">
<a href="#section-3.7.1" class="section-number selfRef">3.7.1. </a><a href="#name-uplink-ack-on-error-mode-sin" class="section-name selfRef">Uplink ACK-on-Error Mode: Single-byte SCHC Header</a>
          </h4>
<div id="regular-1byte-schc-fragment">
<section id="section-3.7.1.1">
            <h5 id="name-regular-schc-fragment">
<a href="#section-3.7.1.1" class="section-number selfRef">3.7.1.1. </a><a href="#name-regular-schc-fragment" class="section-name selfRef">Regular SCHC Fragment</a>
            </h5>
<p id="section-3.7.1.1-1"><a href="#reg-1byte-frag" class="xref">Figure 3</a> shows an example of a regular SCHC fragment for all fragments except the last one. 
As tiles are of 11 bytes, padding MUST NOT be added.<a href="#section-3.7.1.1-1" class="pilcrow">¶</a></p>
<span id="name-regular-schc-fragment-forma"></span><div id="reg-1byte-frag">
<figure id="figure-3">
              <div class="alignLeft art-text artwork" id="section-3.7.1.1-2.1">
<pre>

             |-- SCHC Fragment Header --|
             + ------------------------ + ------- +
             | RuleID |   W    | FCN    | Payload |
             + ------ + ------ + ------ + ------- +
             | 3 bits | 2 bits | 3 bits | 88 bits |

</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-regular-schc-fragment-forma" class="selfRef">Regular SCHC Fragment format for all fragments except the last one</a>
              </figcaption></figure>
</div>
<p id="section-3.7.1.1-3">The use of SCHC ACK REQ is NOT RECOMMENDED, instead the All-1 SCHC Fragment SHOULD be used to request a SCHC ACK from the receiver (Network SCHC). 
As per <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>, the All-0 message is distinguishable from the SCHC ACK REQ (All-1 message). 
The penultimate tile of a SCHC Packet is of regular size.<a href="#section-3.7.1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="all-1-1byte-schc-fragment">
<section id="section-3.7.1.2">
            <h5 id="name-all-1-schc-fragment">
<a href="#section-3.7.1.2" class="section-number selfRef">3.7.1.2. </a><a href="#name-all-1-schc-fragment" class="section-name selfRef">All-1 SCHC Fragment</a>
            </h5>
<p id="section-3.7.1.2-1"><a href="#all-1-1byte" class="xref">Figure 4</a> shows an example of the All-1 message. 
The All-1 message MUST contain the last tile of the SCHC Packet. 
The last tile MUST be of at least 1 byte (one L2 word). 
Padding MUST NOT be added, as the resulting size is L2-word-multiple.<a href="#section-3.7.1.2-1" class="pilcrow">¶</a></p>
<span id="name-all-1-schc-message-format-w"></span><div id="all-1-1byte">
<figure id="figure-4">
              <div class="alignLeft art-text artwork" id="section-3.7.1.2-2.1">
<pre>

           |---  SCHC Fragment Header ---|
           + --------------------------- + ------------ +
           | RuleID |   W    | FCN=ALL-1 |    Payload   |
           + ------ + ------ + --------- + ------------ +
           | 3 bits | 2 bits |  3 bits   | 8 to 88 bits |

</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-all-1-schc-message-format-w" class="selfRef">All-1 SCHC Message format with last tile</a>
              </figcaption></figure>
</div>
<p id="section-3.7.1.2-3">As per <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> the All-1 must be distinguishable from a SCHC Sender-Abort message (with same Rule ID, M, and N values). 
The All-1 MUST have the last tile of the SCHC Packet, which MUST be of at least 1 byte. 
The SCHC Sender-Abort message header size is of 1 byte, with no padding bits.<a href="#section-3.7.1.2-3" class="pilcrow">¶</a></p>
<p id="section-3.7.1.2-4">For the All-1 message to be distinguishable from the Sender-Abort message, the Sender-Abort message MUST be of 1 byte (only header with no padding).
This way, the minimum size of the All-1 is 2 bytes, and the Sender-Abort message is 1 byte.<a href="#section-3.7.1.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="schc-ack-format-1B">
<section id="section-3.7.1.3">
            <h5 id="name-schc-ack-format">
<a href="#section-3.7.1.3" class="section-number selfRef">3.7.1.3. </a><a href="#name-schc-ack-format" class="section-name selfRef">SCHC ACK Format</a>
            </h5>
<p id="section-3.7.1.3-1"><a href="#success-ack-1byte" class="xref">Figure 5</a> shows the SCHC ACK format when all fragments have been correctly received (C=1). 
Padding MUST be added to complete the 64-bit Sigfox downlink frame payload size.<a href="#section-3.7.1.3-1" class="pilcrow">¶</a></p>
<span id="name-schc-success-ack-message-fo"></span><div id="success-ack-1byte">
<figure id="figure-5">
              <div class="alignLeft art-text artwork" id="section-3.7.1.3-2.1">
<pre>

               |---- SCHC ACK Header ----|
               + ----------------------- + ------- +
               | RuleID |    W   | C=b'1 | b'0-pad |
               + ------ + ------ + ----- + ------- +
               | 3 bits | 2 bits | 1 bit | 58 bits |

</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-schc-success-ack-message-fo" class="selfRef">SCHC Success ACK message format</a>
              </figcaption></figure>
</div>
<p id="section-3.7.1.3-3">In case SCHC fragment losses are found in any of the windows of the SCHC Packet (C=0), the SCHC Compound ACK defined in <span>[<a href="#I-D.ietf-lpwan-schc-compound-ack" class="xref">I-D.ietf-lpwan-schc-compound-ack</a>]</span> MUST be used.
The SCHC Compound ACK message format is shown in <a href="#compound-ack-1byte" class="xref">Figure 6</a>.
The window numbered 00, if present in the SCHC Compound ACK, MUST be placed between the Rule ID and the C bit to avoid confusion with padding bits.  
As padding is needed for the SCHC Compound ACK, padding bits MUST be 0 to make subsequent window numbers and bitmaps distinguishable.<a href="#section-3.7.1.3-3" class="pilcrow">¶</a></p>
<span id="name-schc-compound-ack-message-f"></span><div id="compound-ack-1byte">
<figure id="figure-6">
              <div class="alignLeft art-text artwork" id="section-3.7.1.3-4.1">
<pre>

  |---- SCHC ACK Header ----|-W = x -|...| --- W = x + i ---|
  + ----------------------- + ------ +...+ ------- + ------ + ------- +
  | RuleID | W=b'x  | C=b'0 | Bitmap |...| W=b'x+i | Bitmap | b'0-pad |
  + ------ + ------ + ----- + ------ +...+ ------- + ------ + ------- +
  | 3 bits | 2 bits | 1 bit | 7 bits |   | 2 bits  | 7 bits |

     On top are noted the window number of the corresponding bitmap.
     Losses are found in windows x,...,x+i.

</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-schc-compound-ack-message-f" class="selfRef">SCHC Compound ACK message format</a>
              </figcaption></figure>
</div>
<p id="section-3.7.1.3-5">The following figures show examples of the SCHC Compound ACK message format, when used on SCHC over Sigfox.<a href="#section-3.7.1.3-5" class="pilcrow">¶</a></p>
<span id="name-schc-compound-ack-example-1"></span><div id="compound-ack-1byte-ex1">
<figure id="figure-7">
              <div class="alignLeft art-text artwork" id="section-3.7.1.3-6.1">
<pre>

   |---- SCHC ACK Header ----|- W=00 -|----- W=01 ------|
   + ----------------------- + ------ + ------ + ------ + ------- +
   | RuleID | W=b'00 | C=b'0 | Bitmap | W=b'01 | Bitmap | b'0-pad |
   + ------ + ------ + ----- + ------ + ------ + ------ + ------- +
   | 3 bits | 2 bits | 1 bit | 7 bits | 2 bits | 7 bits | 42 bits |

        Losses are found in windows 00 and 01.

</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-schc-compound-ack-example-1" class="selfRef">SCHC Compound ACK example 1</a>
              </figcaption></figure>
</div>
<span id="name-schc-compound-ack-example-2"></span><div id="compound-ack-1byte-ex2">
<figure id="figure-8">
              <div class="alignLeft art-text artwork" id="section-3.7.1.3-7.1">
<pre>

   |---- SCHC ACK Header ----|- W=01 -|----- W=11 ------|
   + ----------------------- + ------ + ------ + ------ + ------- +
   | RuleID | W=b'01 | C=b'0 | Bitmap | W=b'11 | Bitmap | b'0-pad |
   + ------ + ------ + ----- + ------ + ------ + ------ + ------- +
   | 3 bits | 2 bits | 1 bit | 7 bits | 2 bits | 7 bits | 42 bits |

        Losses are found in windows 01 and 11.

</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-schc-compound-ack-example-2" class="selfRef">SCHC Compound ACK example 2</a>
              </figcaption></figure>
</div>
<span id="name-schc-compound-ack-example-3"></span><div id="compound-ack-1byte-ex3">
<figure id="figure-9">
              <div class="alignLeft art-text artwork" id="section-3.7.1.3-8.1">
<pre>

   |---- SCHC ACK Header ----|- W=00 -|----- W=10 ------|
   + ----------------------- + ------ + ------ + ------ + ------- +
   | RuleID | W=b'00 | C=b'0 | Bitmap | W=b'10 | Bitmap | b'0-pad |
   + ------ + ------ + ----- + ------ + ------ + ------ + ------- +
   | 3 bits | 2 bits | 1 bit | 7 bits | 2 bits | 7 bits | 42 bits |

        Losses are found in windows 00 and 10.

</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-schc-compound-ack-example-3" class="selfRef">SCHC Compound ACK example 3</a>
              </figcaption></figure>
</div>
<p id="section-3.7.1.3-9"><a href="#compound-ack-1byte-ex4" class="xref">Figure 10</a> shows the SCHC Compound ACK message format when losses are found in all windows.
The window numbers and its corresponding bitmaps are ordered from window numbered 00 to 11, notifying all four possible windows.<a href="#section-3.7.1.3-9" class="pilcrow">¶</a></p>
<span id="name-schc-compound-ack-example-4"></span><div id="compound-ack-1byte-ex4">
<figure id="figure-10">
              <div class="alignLeft art-text artwork" id="section-3.7.1.3-10.1">
<pre>

  |- SCHC ACK Header -|W=b'00|-- W=b'01 ---|
  +-------------------+------+ ---- +------+
  |RuleID|W=b'00|C=b'0|Bitmap|W=b'01|Bitmap| ...
  +------+------+-----+------+------+------+
  |3 bits|2 bits|1 bit|7 bits|2 bits|7 bits|


             |--- W=b'10 --|--- W=b'11 --|
             |------+------+------+------+-------+
         ... |W=b'10|Bitmap|W=b'11|Bitmap|b'0-pad|
             |------+------+------+------+-------+
             |2 bits|7 bits|2 bits|7 bits|24 bits|

        Losses are found in windows 00, 01, 10 and 11.

</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-schc-compound-ack-example-4" class="selfRef">SCHC Compound ACK example 4</a>
              </figcaption></figure>
</div>
<span id="name-schc-compound-ack-example-5"></span><div id="compound-ack-1byte-ex5">
<figure id="figure-11">
              <div class="alignLeft art-text artwork" id="section-3.7.1.3-11.1">
<pre>

|- SCHC ACK Header -|W=b'00|-- W=b'01 ---|--- W=b'10 --|
+-------------------+------+------+------+------+------+-------+
|RuleID|W=b'00|C=b'0|Bitmap|W=b'01|Bitmap|W=b'10|Bitmap|b'0-pad|
+------+------+-----+------+------+------+------+------+-------+
|3 bits|2 bits|1 bit|7 bits|2 bits|7 bits|2 bits|7 bits|33 bits|

        Losses are found in windows 00, 01 and 10.

</pre>
</div>
<figcaption><a href="#figure-11" class="selfRef">Figure 11</a>:
<a href="#name-schc-compound-ack-example-5" class="selfRef">SCHC Compound ACK example 5</a>
              </figcaption></figure>
</div>
</section>
</div>
<div id="snd-abort-msg-format">
<section id="section-3.7.1.4">
            <h5 id="name-schc-sender-abort-message-f">
<a href="#section-3.7.1.4" class="section-number selfRef">3.7.1.4. </a><a href="#name-schc-sender-abort-message-f" class="section-name selfRef">SCHC Sender-Abort Message format</a>
            </h5>
<span id="name-schc-sender-abort-message-fo"></span><div id="snd-abort-msg">
<figure id="figure-12">
              <div class="alignLeft art-text artwork" id="section-3.7.1.4-1.1">
<pre>

                   |---- Sender-Abort Header ----|
                   + --------------------------- +
                   | RuleID |   W    | FCN=ALL-1 |
                   + ------ + ------ + --------- +
                   | 3 bits | 2 bits |  3 bits   |

</pre>
</div>
<figcaption><a href="#figure-12" class="selfRef">Figure 12</a>:
<a href="#name-schc-sender-abort-message-fo" class="selfRef">SCHC Sender-Abort message format</a>
              </figcaption></figure>
</div>
</section>
</div>
<div id="rcv-abort-msg-format">
<section id="section-3.7.1.5">
            <h5 id="name-schc-receiver-abort-message">
<a href="#section-3.7.1.5" class="section-number selfRef">3.7.1.5. </a><a href="#name-schc-receiver-abort-message" class="section-name selfRef">SCHC Receiver-Abort Message format</a>
            </h5>
<span id="name-schc-receiver-abort-message-"></span><div id="rcv-abort-msg">
<figure id="figure-13">
              <div class="alignLeft art-text artwork" id="section-3.7.1.5-1.1">
<pre>

                |- Receiver-Abort Header -|
                + ----------------------- + ------- +
                | RuleID | W=b'11 | C=b'1 | b'1-pad |
                + ------ + ------ + ----- + ------- +
                | 3 bits | 2 bits | 1 bit | 58 bits |

</pre>
</div>
<figcaption><a href="#figure-13" class="selfRef">Figure 13</a>:
<a href="#name-schc-receiver-abort-message-" class="selfRef">SCHC Receiver-Abort message format</a>
              </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="UL-ACKoE-two-byte">
<section id="section-3.7.2">
          <h4 id="name-uplink-ack-on-error-mode-two-">
<a href="#section-3.7.2" class="section-number selfRef">3.7.2. </a><a href="#name-uplink-ack-on-error-mode-two-" class="section-name selfRef">Uplink ACK-on-Error Mode: Two-byte SCHC Header Option 2</a>
          </h4>
<div id="regular-2byte-schc-fragment">
<section id="section-3.7.2.1">
            <h5 id="name-regular-schc-fragment-2">
<a href="#section-3.7.2.1" class="section-number selfRef">3.7.2.1. </a><a href="#name-regular-schc-fragment-2" class="section-name selfRef">Regular SCHC Fragment</a>
            </h5>
<p id="section-3.7.2.1-1"><a href="#reg-2byte-frag" class="xref">Figure 14</a> shows an example of a regular SCHC fragment for all fragments except the last one.
The penultimate tile of a SCHC Packet is of the regular size.<a href="#section-3.7.2.1-1" class="pilcrow">¶</a></p>
<span id="name-regular-schc-fragment-format"></span><div id="reg-2byte-frag">
<figure id="figure-14">
              <div class="alignLeft art-text artwork" id="section-3.7.2.1-2.1">
<pre>

                |-- SCHC Fragment Header --|
                + ------------------------ + ------- +
                | RuleID |   W    | FCN    | Payload |
                + ------ + ------ + ------ + ------- +
                | 8 bits | 3 bits | 5 bits | 80 bits |

</pre>
</div>
<figcaption><a href="#figure-14" class="selfRef">Figure 14</a>:
<a href="#name-regular-schc-fragment-format" class="selfRef">Regular SCHC Fragment format for all fragments except the last one</a>
              </figcaption></figure>
</div>
<p id="section-3.7.2.1-3">The use of SCHC ACK is NOT RECOMMENDED, instead the All-1 SCHC Fragment SHOULD be used to request a SCHC ACK from the receiver (Network SCHC).
As per <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>, the All-0 message is distinguishable from the SCHC ACK REQ (All-1 message).<a href="#section-3.7.2.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="all-1-2B-schc-fragment">
<section id="section-3.7.2.2">
            <h5 id="name-all-1-schc-fragment-2">
<a href="#section-3.7.2.2" class="section-number selfRef">3.7.2.2. </a><a href="#name-all-1-schc-fragment-2" class="section-name selfRef">All-1 SCHC Fragment</a>
            </h5>
<p id="section-3.7.2.2-1"><a href="#all-1-2B" class="xref">Figure 15</a> shows an example of the All-1 message. 
The All-1 message MUST contain the last tile of the SCHC Packet.<a href="#section-3.7.2.2-1" class="pilcrow">¶</a></p>
<span id="name-all-1-schc-message-format-wi"></span><div id="all-1-2B">
<figure id="figure-15">
              <div class="alignLeft art-text artwork" id="section-3.7.2.2-2.1">
<pre>

              |---  SCHC Fragment Header ---|
              + --------------------------- + ------------ +
              | RuleID |   W    | FCN=ALL-1 |    Payload   |
              + ------ + ------ + --------- + ------------ +
              | 8 bits | 3 bits |  5 bits   | 8 to 80 bits |

</pre>
</div>
<figcaption><a href="#figure-15" class="selfRef">Figure 15</a>:
<a href="#name-all-1-schc-message-format-wi" class="selfRef">All-1 SCHC message format with last tile</a>
              </figcaption></figure>
</div>
<p id="section-3.7.2.2-3">As per <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> the All-1 must be distinguishable from the a SCHC Sender-Abort message (with same Rule ID, M and N values).
The All-1 MUST have the last tile of the SCHC Packet, that MUST be of at least 1 byte. 
The SCHC Sender-Abort message header size is of 2 byte, with no padding bits.<a href="#section-3.7.2.2-3" class="pilcrow">¶</a></p>
<p id="section-3.7.2.2-4">For the All-1 message to be distinguishable from the Sender-Abort message, the Sender-Abort message MUST be of 2 byte (only header with no padding).
This way, the minimum size of the All-1 is 3 bytes, and the Sender-Abort message is 2 bytes.<a href="#section-3.7.2.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="schc-ack-format-2B">
<section id="section-3.7.2.3">
            <h5 id="name-schc-ack-format-2">
<a href="#section-3.7.2.3" class="section-number selfRef">3.7.2.3. </a><a href="#name-schc-ack-format-2" class="section-name selfRef">SCHC ACK Format</a>
            </h5>
<p id="section-3.7.2.3-1"> <a href="#success-ack-2B" class="xref">Figure 16</a> shows the SCHC ACK format when all fragments have been correctly received (C=1). 
Padding MUST be added to complete the 64-bit Sigfox downlink frame payload size.<a href="#section-3.7.2.3-1" class="pilcrow">¶</a></p>
<span id="name-schc-success-ack-message-for"></span><div id="success-ack-2B">
<figure id="figure-16">
              <div class="alignLeft art-text artwork" id="section-3.7.2.3-2.1">
<pre>

                 |----- SCHC ACK Header ----|
                 + ------------------------ + ------ +
                 | RuleID |    W   | C=b'1 | b'0-pad |
                 + ------ + ------ + ----- + ------- +
                 | 8 bits | 3 bits | 1 bit | 52 bits |

</pre>
</div>
<figcaption><a href="#figure-16" class="selfRef">Figure 16</a>:
<a href="#name-schc-success-ack-message-for" class="selfRef">SCHC Success ACK message format</a>
              </figcaption></figure>
</div>
<p id="section-3.7.2.3-3">The SCHC Compound ACK message MUST be used in case SCHC fragment losses are found in any window of the SCHC Packet (C=0).
The SCHC Compound ACK message format is shown in <a href="#schc-compound-ack-2B" class="xref">Figure 17</a>.
The SCHC Compound ACK can report up to 3 windows with losses.
The window number (W) and its corresponding bitmap MUST be ordered from the lowest-numbered window number to the highest-numbered window.
If window numbered 000 is present in the SCHC Compound ACK, the window number 000 MUST be placed between the Rule ID and C bit to avoid confusion with padding bits.<a href="#section-3.7.2.3-3" class="pilcrow">¶</a></p>
<p id="section-3.7.2.3-4">When sent in the downlink, the SCHC Compound ACK MUST be 0 padded (Padding bits must be 0) to complement the 64 bits required by
the Sigfox payload.<a href="#section-3.7.2.3-4" class="pilcrow">¶</a></p>
<span id="name-schc-compound-ack-message-fo"></span><div id="schc-compound-ack-2B">
<figure id="figure-17">
              <div class="alignLeft art-text artwork" id="section-3.7.2.3-5.1">
<pre>

  |- SCHC ACK Header -| W=b'x |...|--- W=b'x+i ---|
  +-------------------+-------+...+-------+-------+-------+
  |RuleID|W=b'x |C=b'0|Bitmap |...|W=b'x+i|Bitmap |b'0-pad|
  +------+------+-----+-------+...|-------+-------+-------+
  |8 bits|3 bits|1 bit|31 bits|   | 3 bits|31 bits|

        On top are noted the window number
                of the corresponding bitmap.
        Losses are found in windows x,...,x+i.

</pre>
</div>
<figcaption><a href="#figure-17" class="selfRef">Figure 17</a>:
<a href="#name-schc-compound-ack-message-fo" class="selfRef">SCHC Compound ACK message format</a>
              </figcaption></figure>
</div>
</section>
</div>
<div id="snd-abort-msg-2B">
<section id="section-3.7.2.4">
            <h5 id="name-schc-sender-abort-messages">
<a href="#section-3.7.2.4" class="section-number selfRef">3.7.2.4. </a><a href="#name-schc-sender-abort-messages" class="section-name selfRef">SCHC Sender-Abort Messages</a>
            </h5>
<span id="name-schc-sender-abort-message-for"></span><div id="snd-abort-msg-format-2B">
<figure id="figure-18">
              <div class="alignLeft art-text artwork" id="section-3.7.2.4-1.1">
<pre>

                |---- Sender-Abort Header ----|
                + --------------------------- +
                | RuleID |   W    | FCN=ALL-1 |
                + ------ + ------ + --------- +
                | 8 bits | 3 bits |  5 bits   |

</pre>
</div>
<figcaption><a href="#figure-18" class="selfRef">Figure 18</a>:
<a href="#name-schc-sender-abort-message-for" class="selfRef">SCHC Sender-Abort message format</a>
              </figcaption></figure>
</div>
</section>
</div>
<div id="rcv-abort-msg-2B">
<section id="section-3.7.2.5">
            <h5 id="name-schc-receiver-abort-message-2">
<a href="#section-3.7.2.5" class="section-number selfRef">3.7.2.5. </a><a href="#name-schc-receiver-abort-message-2" class="section-name selfRef">SCHC Receiver-Abort Message</a>
            </h5>
<span id="name-schc-receiver-abort-message-f"></span><div id="rcv-abort-msg-format-2B">
<figure id="figure-19">
              <div class="alignLeft art-text artwork" id="section-3.7.2.5-1.1">
<pre>

              |-- Receiver-Abort Header -|
              + ------------------------ + ------- +
              | RuleID | W=b'111 | C=b'1 | b'1-pad |
              + ------ + ------- + ----- + ------- +
              | 8 bits |  3 bits | 1 bit | 52 bits |

</pre>
</div>
<figcaption><a href="#figure-19" class="selfRef">Figure 19</a>:
<a href="#name-schc-receiver-abort-message-f" class="selfRef">SCHC Receiver-Abort message format</a>
              </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="schc_sender_abort">
<section id="section-3.8">
        <h3 id="name-schc-sender-abort">
<a href="#section-3.8" class="section-number selfRef">3.8. </a><a href="#name-schc-sender-abort" class="section-name selfRef">SCHC-Sender Abort</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-3.8-1.1">As defined in <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>, a SCHC-Sender Abort can be triggered when the number of SCHC ACK REQ attempts is greater than or equal to MAX_ACK_REQUESTS. 
In the case of SCHC/Sigfox, a SCHC-Sender Abort MUST be sent if the number of repeated All-1s (i.e., with the same bitmap) sent in sequence is greater than or equal to MAX_ACK_REQUESTS.<a href="#section-3.8-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.8-1.2">The MAX_ACK_REQUEST counter MUST be reset when a SCHC ACK is successfully received.<a href="#section-3.8-1.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="schc_receiver_abort">
<section id="section-3.9">
        <h3 id="name-schc-receiver-abort">
<a href="#section-3.9" class="section-number selfRef">3.9. </a><a href="#name-schc-receiver-abort" class="section-name selfRef">SCHC-Receiver Abort</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-3.9-1.1">As defined in <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>, a SCHC-Receiver Abort is triggered when the receiver has no RuleID and DTag pairs available for a new session. 
In the case of SCHC/Sigfox a SCHC-Receiver Abort MUST be sent if, for a single device, all the RuleIDs are being processed by the receiver (i.e., have an active session) 
at a certain time and a new one is requested, or if the RuleID of the fragment is not valid.<a href="#section-3.9-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.9-1.2">A SCHC-Receiver Abort MUST be triggered when the Inactivity Timer expires.<a href="#section-3.9-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.9-1.3">A SCHC-Receiver Abort can be triggered when the number of ACK attempts is not strictly less than MAX_ACK_REQUESTS. In the case of SCHC/Sigfox, 
a SCHC-Receiver Abort MUST be sent if the number of repeated SCHC ACKs sent in a row (i.e., synchronized with the ACK REQ case, and with identical bitmaps) 
is greater than or equal to MAX_ACK_REQUESTS.<a href="#section-3.9-1.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.9-1.4">Although a SCHC-Receiver Abort can be triggered at any point in time, a SCHC-Receiver Abort downlink message MUST only be sent when there is a downlink transmission opportunity.<a href="#section-3.9-1.4" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="padding">
<section id="section-3.10">
        <h3 id="name-padding">
<a href="#section-3.10" class="section-number selfRef">3.10. </a><a href="#name-padding" class="section-name selfRef">Padding</a>
        </h3>
<p id="section-3.10-1">The Sigfox payload fields have different characteristics in uplink and downlink.<a href="#section-3.10-1" class="pilcrow">¶</a></p>
<p id="section-3.10-2">Uplink frames can contain a payload size from 0 to 12 bytes. The Sigfox radio protocol allows sending zero bits,  
one single bit of information for binary applications (e.g. status), or an integer number of bytes.
Therefore, for 2 or more bits of payload it is required to add padding to the next integer number of bytes. The reason for this 
flexibility is to optimize transmission time and hence save battery consumption at the device.<a href="#section-3.10-2" class="pilcrow">¶</a></p>
<p id="section-3.10-3">Downlink frames on the other hand have a fixed length. The payload length MUST be 64 bits (i.e. 8 bytes). Hence, if less 
information bits are to be transmitted, padding MUST be used with bits equal to 0.<a href="#section-3.10-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sequence-examples">
<section id="section-4">
      <h2 id="name-fragmentation-sequence-exam">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-fragmentation-sequence-exam" class="section-name selfRef">Fragmentation Sequence Examples</a>
      </h2>
<p id="section-4-1">In this section, some sequence diagrams depicting messages exchanges for different fragmentation modes and use cases are shown. 
In the examples, 'Seq' indicates the Sigfox Sequence Number of the frame carrying a fragment.<a href="#section-4-1" class="pilcrow">¶</a></p>
<div id="no-ack-examples">
<section id="section-4.1">
        <h3 id="name-uplink-no-ack-examples">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-uplink-no-ack-examples" class="section-name selfRef">Uplink No-ACK Examples</a>
        </h3>
<p id="section-4.1-1">The FCN field indicates the size of the data packet. 
The first fragment is marked with FCN = X-1, where X is the number of fragments the message is split into.
All fragments are marked with decreasing FCN values.
Last packet fragment is marked with the FCN = All-1 (1111).<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">Case No losses - All fragments are sent and received successfully.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<span id="name-ul-no-ack-no-losses"></span><div id="UL-No-ACK-NL">
<figure id="figure-20">
          <div class="alignLeft art-text artwork" id="section-4.1-3.1">
<pre>


        Sender                              Receiver
          |-------FCN=6 (0110), Seq=1--------&gt;|
          |-------FCN=5 (0101), Seq=2--------&gt;|
          |-------FCN=4 (0100), Seq=3--------&gt;|
          |-------FCN=3 (0011), Seq=4--------&gt;|
          |-------FCN=2 (0010), Seq=5--------&gt;|
          |-------FCN=1 (0001), Seq=6--------&gt;|
          |-------FCN=15 (1111), Seq=7-------&gt;| All fragments received
        (End)


</pre>
</div>
<figcaption><a href="#figure-20" class="selfRef">Figure 20</a>:
<a href="#name-ul-no-ack-no-losses" class="selfRef">UL No-ACK No-Losses</a>
          </figcaption></figure>
</div>
<p id="section-4.1-4">When the first SCHC fragment is received, the Receiver can calculate the 
total number of SCHC fragments that the SCHC Packet is composed of.
For example, if the first fragment is numbered with FCN=6, the receiver can 
expect six more messages/fragments (i.e., with FCN going from 5 downwards, and the last fragment with a
FCN equal to 15).<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<p id="section-4.1-5">Case losses on any fragment except the first.<a href="#section-4.1-5" class="pilcrow">¶</a></p>
<span id="name-ul-no-ack-losses-scenario-1"></span><div id="UL-No-ACK-L-1">
<figure id="figure-21">
          <div class="alignLeft art-text artwork" id="section-4.1-6.1">
<pre>


        Sender                      Receiver
          |-------FCN=6, Seq=1--------&gt;|
          |-------FCN=5, Seq=2----X---&gt;|
          |-------FCN=4, Seq=3--------&gt;|
          |-------FCN=3, Seq=4--------&gt;|
          |-------FCN=2, Seq=5--------&gt;|
          |-------FCN=1, Seq=6--------&gt;|
          |-------FCN=15, Seq=7-------&gt;| Missing Fragment - Unable to reassemble
        (End)


</pre>
</div>
<figcaption><a href="#figure-21" class="selfRef">Figure 21</a>:
<a href="#name-ul-no-ack-losses-scenario-1" class="selfRef">UL No-ACK Losses (scenario 1)</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="ack-on-error-examples-1B-header">
<section id="section-4.2">
        <h3 id="name-uplink-ack-on-error-example">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-uplink-ack-on-error-example" class="section-name selfRef">Uplink ACK-on-Error Examples: Single-byte SCHC Header</a>
        </h3>
<p id="section-4.2-1">The single-byte SCHC header ACK-on-Error mode allows sending up to 28 fragments and packet sizes up to
300 bytes. The SCHC fragments may be delivered asynchronously and DL ACK can be sent opportunistically.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">Case No losses<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">The downlink flag must be enabled in the sender UL message to allow a DL message from the receiver. 
The DL Enable in the figures shows where the sender should enable the downlink, and 
wait for an ACK.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<span id="name-ul-ack-on-error-no-losses"></span><div id="UL-ACKoE-NL">
<figure id="figure-22">
          <div class="alignLeft art-text artwork" id="section-4.2-4.1">
<pre>


        Sender                      Receiver
          |-----W=0, FCN=6, Seq=1-----&gt;|
          |-----W=0, FCN=5, Seq=2-----&gt;|
          |-----W=0, FCN=4, Seq=3-----&gt;|
          |-----W=0, FCN=3, Seq=4-----&gt;|
          |-----W=0, FCN=2, Seq=5-----&gt;|
          |-----W=0, FCN=1, Seq=6-----&gt;|
DL Enable |-----W=0, FCN=0, Seq=7-----&gt;|
      (no ACK)
          |-----W=1, FCN=6, Seq=8-----&gt;|
          |-----W=1, FCN=5, Seq=9-----&gt;|
          |-----W=1, FCN=4, Seq=10----&gt;|
DL Enable |-----W=1, FCN=7, Seq=11----&gt;| All fragments received
          |&lt;------ ACK, W=1, C=1 ------| C=1
        (End)


</pre>
</div>
<figcaption><a href="#figure-22" class="selfRef">Figure 22</a>:
<a href="#name-ul-ack-on-error-no-losses" class="selfRef">UL ACK-on-Error No-Losses</a>
          </figcaption></figure>
</div>
<p id="section-4.2-5">Case Fragment losses in first window<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<p id="section-4.2-6">In this case, fragments are lost in the first window (W=0). 
After the first All-0 message arrives, the Receiver
leverages the opportunity and sends a SCHC ACK with the corresponding bitmap and C=0.<a href="#section-4.2-6" class="pilcrow">¶</a></p>
<p id="section-4.2-7">After the loss fragments from the first window (W=0) are resent, the sender continues 
transmitting the fragments of the following window (W=1) without opening a reception opportunity.
Finally, the All-1 fragment is sent, the downlink is enabled, and the SCHC ACK is received with C=1.<a href="#section-4.2-7" class="pilcrow">¶</a></p>
<span id="name-ul-ack-on-error-losses-on-f"></span><div id="UL-ACKoE-LW1">
<figure id="figure-23">
          <div class="alignLeft art-text artwork" id="section-4.2-8.1">
<pre>


        Sender                      Receiver
          |-----W=0, FCN=6, Seq=1-----&gt;|
          |-----W=0, FCN=5, Seq=2--X--&gt;|
          |-----W=0, FCN=4, Seq=3-----&gt;|
          |-----W=0, FCN=3, Seq=4-----&gt;|
          |-----W=0, FCN=2, Seq=5--X--&gt;|
          |-----W=0, FCN=1, Seq=6-----&gt;|
DL Enable |-----W=0, FCN=0, Seq=7-----&gt;| Missing Fragments W=0 =&gt; FCN=5, Seq=2 and FCN=2, Seq=5
          |&lt;------ ACK, W=0, C=0 ------| Bitmap:1011011
          |-----W=0, FCN=5, Seq=8-----&gt;|
          |-----W=0, FCN=2, Seq=9-----&gt;|
          |-----W=1, FCN=6, Seq=10----&gt;|
          |-----W=1, FCN=5, Seq=11----&gt;|
          |-----W=1, FCN=4, Seq=12----&gt;|
DL Enable |-----W=1, FCN=7, Seq=13----&gt;| All fragments received
          |&lt;------ ACK, W=1, C=1 ------| C=1
        (End)


</pre>
</div>
<figcaption><a href="#figure-23" class="selfRef">Figure 23</a>:
<a href="#name-ul-ack-on-error-losses-on-f" class="selfRef">UL ACK-on-Error Losses on First Window</a>
          </figcaption></figure>
</div>
<p id="section-4.2-9">Case Fragment All-0 lost in first window (W=0)<a href="#section-4.2-9" class="pilcrow">¶</a></p>
<p id="section-4.2-10">In this example, the All-0 of the first window (W=0) is lost. Therefore, 
the Receiver waits for the next All-0 message of intermediate windows, or All-1 message of last window to generate 
the corresponding SCHC ACK, notifying the absence of the All-0 of window 0.<a href="#section-4.2-10" class="pilcrow">¶</a></p>
<p id="section-4.2-11">The sender resends the missing All-0 messages (with any other missing 
fragment from window 0) without opening a reception opportunity.<a href="#section-4.2-11" class="pilcrow">¶</a></p>
<span id="name-ul-ack-on-error-all-0-lost-"></span><div id="UL-ACKoE-LA0W1">
<figure id="figure-24">
          <div class="alignLeft art-text artwork" id="section-4.2-12.1">
<pre>


        Sender                      Receiver
          |-----W=0, FCN=6, Seq=1-----&gt;|
          |-----W=0, FCN=5, Seq=2-----&gt;|
          |-----W=0, FCN=4, Seq=3-----&gt;|
          |-----W=0, FCN=3, Seq=4-----&gt;|
          |-----W=0, FCN=2, Seq=5-----&gt;|
          |-----W=0, FCN=1, Seq=6-----&gt;| DL Enable
                  |-----W=0, FCN=0, Seq=7--X--&gt;|
      (no ACK)
          |-----W=1, FCN=6, Seq=8-----&gt;|
          |-----W=1, FCN=5, Seq=9-----&gt;|
          |-----W=1, FCN=4, Seq=10----&gt;|
DL Enable |-----W=1, FCN=7, Seq=11----&gt;| Missing Fragment W=0, FCN=0, Seq=7
          |&lt;------ ACK, W=0, C=0 ------| Bitmap:1111110
          |-----W=0, FCN=0, Seq=13----&gt;| All fragments received
DL Enable |-----W=1, FCN=7, Seq=14----&gt;|
          |&lt;------ ACK, W=1, C=1 ------| C=1
        (End)


</pre>
</div>
<figcaption><a href="#figure-24" class="selfRef">Figure 24</a>:
<a href="#name-ul-ack-on-error-all-0-lost-" class="selfRef">UL ACK-on-Error All-0 Lost on First Window</a>
          </figcaption></figure>
</div>
<p id="section-4.2-13">In the following diagram, besides the All-0 there are other fragment losses in the first window (W=0).<a href="#section-4.2-13" class="pilcrow">¶</a></p>
<span id="name-ul-ack-on-error-all-0-and-o"></span><div id="UL-ACKoE-LA0FW1">
<figure id="figure-25">
          <div class="alignLeft art-text artwork" id="section-4.2-14.1">
<pre>


        Sender                      Receiver
          |-----W=0, FCN=6, Seq=1-----&gt;|
          |-----W=0, FCN=5, Seq=2--X--&gt;|
          |-----W=0, FCN=4, Seq=3-----&gt;|
          |-----W=0, FCN=3, Seq=4--X--&gt;|
          |-----W=0, FCN=2, Seq=5-----&gt;|
          |-----W=0, FCN=1, Seq=6-----&gt;|
DL Enable |-----W=0, FCN=0, Seq=7--X--&gt;|
      (no ACK)
          |-----W=1, FCN=6, Seq=8-----&gt;|
          |-----W=1, FCN=5, Seq=9-----&gt;|
          |-----W=1, FCN=4, Seq=10----&gt;|
DL Enable |-----W=1, FCN=7, Seq=11----&gt;| Missing Fragment W=0 =&gt; FCN= 5, 3 and 0
          |&lt;------ ACK, W=0, C=0 ------| Bitmap:1010110
          |-----W=0, FCN=5, Seq=13----&gt;|
          |-----W=0, FCN=3, Seq=14----&gt;|
          |-----W=0, FCN=0, Seq=15----&gt;| All fragments received
DL Enable |-----W=1, FCN=7, Seq=16----&gt;|
          |&lt;------ ACK, W=1, C=1 ------| C=1
        (End)


</pre>
</div>
<figcaption><a href="#figure-25" class="selfRef">Figure 25</a>:
<a href="#name-ul-ack-on-error-all-0-and-o" class="selfRef">UL ACK-on-Error All-0 and other Fragments Lost on First Window</a>
          </figcaption></figure>
</div>
<p id="section-4.2-15">In the next examples, there are fragment losses in both the first (W=0) and second (W=1) windows.
The retransmission cycles after the All-1 is sent (i.e., not in intermediate windows) should 
always finish with an with an All-1, as it serves as an ACK Request message to confirm the correct reception 
of the retransmitted fragments.<a href="#section-4.2-15" class="pilcrow">¶</a></p>
<span id="name-ul-ack-on-error-all-0-and-ot"></span><div id="UL-ACKoE-LFW12-1">
<figure id="figure-26">
          <div class="alignLeft art-text artwork" id="section-4.2-16.1">
<pre>


        Sender                            Receiver
          |-----W=0, FCN=6 (110), Seq=1-----&gt;|
          |-----W=0, FCN=5 (101), Seq=2--X--&gt;|
          |-----W=0, FCN=4 (100), Seq=3-----&gt;|
          |-----W=0, FCN=3 (011), Seq=4--X--&gt;|
          |-----W=0, FCN=2 (010), Seq=5-----&gt;|
          |-----W=0, FCN=1 (001), Seq=6-----&gt;|
DL enable |-----W=0, FCN=0 (000), Seq=7--X--&gt;|
     (no ACK)
          |-----W=1, FCN=6 (110), Seq=8--X--&gt;|
          |-----W=1, FCN=5 (101), Seq=9-----&gt;|
          |-----W=1, FCN=4 (011), Seq=10-X--&gt;|
DL enable |-----W=1, FCN=7 (111), Seq=11----&gt;| Missing Fragment W=0 =&gt; FCN= 5, 3 and 0, W=1 =&gt; FCN= 6 and 4
          |&lt;--- Compound ACK, W=0,1, C=0 ----| Bitmap W=0:1010110, Bitmap W=1:0100001
          |-----W=0, FCN=5 (101), Seq=13----&gt;|
          |-----W=0, FCN=3 (011), Seq=14----&gt;|
          |-----W=0, FCN=0 (000), Seq=15----&gt;|
          |-----W=1, FCN=6 (110), Seq=16----&gt;|
          |-----W=1, FCN=4 (011), Seq=17----&gt;| All fragments received
DL enable |-----W=1, FCN=7 (111), Seq=18----&gt;|
          |&lt;--------- ACK, W=1, C=1 ---------| C=1
        (End)


</pre>
</div>
<figcaption><a href="#figure-26" class="selfRef">Figure 26</a>:
<a href="#name-ul-ack-on-error-all-0-and-ot" class="selfRef">UL ACK-on-Error All-0 and other Fragments Lost on First and Second Windows (1)</a>
          </figcaption></figure>
</div>
<p id="section-4.2-17">Similar case as above, but with less fragments in the second window (W=1)<a href="#section-4.2-17" class="pilcrow">¶</a></p>
<span id="name-ul-ack-on-error-all-0-and-oth"></span><div id="UL-ACKoE-LFW12-2">
<figure id="figure-27">
          <div class="alignLeft art-text artwork" id="section-4.2-18.1">
<pre>


        Sender                            Receiver
          |-----W=0, FCN=6 (110), Seq=1-----&gt;|
          |-----W=0, FCN=5 (101), Seq=2--X--&gt;|
          |-----W=0, FCN=4 (100), Seq=3-----&gt;|
          |-----W=0, FCN=3 (011), Seq=4--X--&gt;|
          |-----W=0, FCN=2 (010), Seq=5-----&gt;|
          |-----W=0, FCN=1 (001), Seq=6-----&gt;|
DL enable |-----W=0, FCN=0 (000), Seq=7--X--&gt;|
       (no ACK)
          |-----W=1, FCN=6 (110), Seq=8--X--&gt;|
DL enable |-----W=1, FCN=7 (111), Seq=9-----&gt;| Missing Fragment W=0 =&gt; FCN= 5, 3 and 0, W=1 =&gt; FCN= 6 and 4
          |&lt;--- Compound ACK, W=0,1, C=0 ----| Bitmap W=0:1010110, Bitmap W=1:0000001
          |-----W=0, FCN=5 (101), Seq=10----&gt;|
          |-----W=0, FCN=3 (011), Seq=11----&gt;|
          |-----W=0, FCN=0 (000), Seq=12----&gt;|
          |-----W=1, FCN=6 (110), Seq=13----&gt;| All fragments received
DL enable |-----W=1, FCN=7 (111), Seq=14----&gt;|
          |&lt;--------- ACK, W=1, C=1 ---------| C=1
        (End)


</pre>
</div>
<figcaption><a href="#figure-27" class="selfRef">Figure 27</a>:
<a href="#name-ul-ack-on-error-all-0-and-oth" class="selfRef">UL ACK-on-Error All-0 and other Fragments Lost on First and Second Windows (2)</a>
          </figcaption></figure>
</div>
<p id="section-4.2-19">Case SCHC ACK is lost<a href="#section-4.2-19" class="pilcrow">¶</a></p>
<p id="section-4.2-20">SCHC over Sigfox does not implement the SCHC ACK REQ message. Instead it uses the SCHC All-1 message to request a SCHC ACK, when required.<a href="#section-4.2-20" class="pilcrow">¶</a></p>
<span id="name-ul-ack-on-error-ack-lost"></span><div id="UL-ACKoE-ACKL">
<figure id="figure-28">
          <div class="alignLeft art-text artwork" id="section-4.2-21.1">
<pre>


       Sender                      Receiver
          |-----W=0, FCN=6, Seq=1-----&gt;|
          |-----W=0, FCN=5, Seq=2-----&gt;|
          |-----W=0, FCN=4, Seq=3-----&gt;|
          |-----W=0, FCN=3, Seq=4-----&gt;|
          |-----W=0, FCN=2, Seq=5-----&gt;|
          |-----W=0, FCN=1, Seq=6-----&gt;|
DL Enable |-----W=0, FCN=0, Seq=7-----&gt;|
      (no ACK)
          |-----W=1, FCN=6, Seq=8-----&gt;|
          |-----W=1, FCN=5, Seq=9-----&gt;|
          |-----W=1, FCN=4, Seq=10----&gt;|
DL Enable |-----W=1, FCN=7, Seq=11----&gt;| All fragments received
          |&lt;------ ACK, W=1, C=1 ---X--| C=1
DL Enable |-----W=1, FCN=7, Seq=13----&gt;| RESEND ACK
          |&lt;------ ACK, W=1, C=1 ------| C=1
        (End)


</pre>
</div>
<figcaption><a href="#figure-28" class="selfRef">Figure 28</a>:
<a href="#name-ul-ack-on-error-ack-lost" class="selfRef">UL ACK-on-Error ACK Lost</a>
          </figcaption></figure>
</div>
<p id="section-4.2-22">Case SCHC Compound ACK at the end<a href="#section-4.2-22" class="pilcrow">¶</a></p>
<p id="section-4.2-23">In this example, SCHC Fragment losses are found in both windows 0 and 1. However, the sender does not send a 
SCHC ACK after the All-0 of window 0. Instead, it sends a SCHC Compound ACK notifying losses of both 
windows.<a href="#section-4.2-23" class="pilcrow">¶</a></p>
<span id="name-ul-ack-on-error-fragments-l"></span><div id="UL-ACKoE-LFW12-3">
<figure id="figure-29">
          <div class="alignLeft art-text artwork" id="section-4.2-24.1">
<pre>


        Sender                            Receiver
          |-----W=0, FCN=6 (110), Seq=1-----&gt;|
          |-----W=0, FCN=5 (101), Seq=2--X--&gt;|
          |-----W=0, FCN=4 (100), Seq=3-----&gt;|
          |-----W=0, FCN=3 (011), Seq=4--X--&gt;|
          |-----W=0, FCN=2 (010), Seq=5-----&gt;|
          |-----W=0, FCN=1 (001), Seq=6-----&gt;|
DL enable |-----W=0, FCN=0 (000), Seq=7-----&gt;| Waits for next DL opportunity
       (no ACK)
          |-----W=1, FCN=6 (110), Seq=8--X--&gt;|
DL enable |-----W=1, FCN=7 (111), Seq=9-----&gt;| Missing Fragment W=0 =&gt; FCN= 5, 3 and 0, W=1 =&gt; FCN= 6 and 4
          |&lt;--- Compound ACK, W=0,1, C=0 ----| Bitmap W=0:1010110, Bitmap W=1:0000001
          |-----W=0, FCN=5 (101), Seq=10----&gt;|
          |-----W=0, FCN=3 (011), Seq=11----&gt;|
          |-----W=1, FCN=6 (110), Seq=12----&gt;| All fragments received
DL enable |-----W=1, FCN=7 (111), Seq=13----&gt;|
          |&lt;--------- ACK, W=1, C=1 ---------| C=1
        (End)


</pre>
</div>
<figcaption><a href="#figure-29" class="selfRef">Figure 29</a>:
<a href="#name-ul-ack-on-error-fragments-l" class="selfRef">UL ACK-on-Error Fragments Lost on First and Second Windows with one Compound ACK</a>
          </figcaption></figure>
</div>
<p id="section-4.2-25">The number of times the same SCHC ACK message will be retransmitted is determined by the
 MAX_ACK_REQUESTS.<a href="#section-4.2-25" class="pilcrow">¶</a></p>
</section>
</div>
<div id="abort-examples">
<section id="section-4.3">
        <h3 id="name-schc-abort-examples">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-schc-abort-examples" class="section-name selfRef">SCHC Abort Examples</a>
        </h3>
<p id="section-4.3-1">Case SCHC Sender-Abort<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">The sender may need to send a Sender-Abort to stop the current communication.
This may happen, for example, if the All-1 has been sent MAX_ACK_REQUESTS times.<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<span id="name-ul-ack-on-error-sender-abor"></span><div id="UL-ACKoE-SndAbt">
<figure id="figure-30">
          <div class="alignLeft art-text artwork" id="section-4.3-3.1">
<pre>


        Sender                      Receiver
          |-----W=0, FCN=6, Seq=1-----&gt;|
          |-----W=0, FCN=5, Seq=2-----&gt;|
          |-----W=0, FCN=4, Seq=3-----&gt;|
          |-----W=0, FCN=3, Seq=4-----&gt;|
          |-----W=0, FCN=2, Seq=5-----&gt;|
          |-----W=0, FCN=1, Seq=6-----&gt;|
DL Enable |-----W=0, FCN=0, Seq=7-----&gt;|
      (no ACK)
          |-----W=1, FCN=6, Seq=8-----&gt;|
          |-----W=1, FCN=5, Seq=9-----&gt;|
          |-----W=1, FCN=4, Seq=10----&gt;|
DL Enable |-----W=1, FCN=7, Seq=11----&gt;| All fragments received
          |&lt;------ ACK, W=1, C=1 ---X--| C=1
DL Enable |-----W=1, FCN=7, Seq=14----&gt;| RESEND ACK  (1)
          |&lt;------ ACK, W=1, C=1 ---X--| C=1
DL Enable |-----W=1, FCN=7, Seq=15----&gt;| RESEND ACK  (2)
          |&lt;------ ACK, W=1, C=1 ---X--| C=1
DL Enable |-----W=1, FCN=7, Seq=16----&gt;| RESEND ACK  (3)
          |&lt;------ ACK, W=1, C=1 ---X--| C=1
DL Enable |-----W=1, FCN=7, Seq=17----&gt;| RESEND ACK  (4)
          |&lt;------ ACK, W=1, C=1 ---X--| C=1
DL Enable |-----W=1, FCN=7, Seq=18----&gt;| RESEND ACK  (5)
          |&lt;------ ACK, W=1, C=1 ---X--| C=1
DL Enable |----Sender-Abort, Seq=19---&gt;| exit with error condition
        (End)


</pre>
</div>
<figcaption><a href="#figure-30" class="selfRef">Figure 30</a>:
<a href="#name-ul-ack-on-error-sender-abor" class="selfRef">UL ACK-on-Error Sender-Abort</a>
          </figcaption></figure>
</div>
<p id="section-4.3-4">Case Receiver-Abort<a href="#section-4.3-4" class="pilcrow">¶</a></p>
<p id="section-4.3-5">The receiver may need to send a Receiver-Abort to stop the current communication.
This message can only be sent after a DL enable.<a href="#section-4.3-5" class="pilcrow">¶</a></p>
<span id="name-ul-ack-on-error-receiver-ab"></span><div id="UL-ACKoE-RcvAbt">
<figure id="figure-31">
          <div class="alignLeft art-text artwork" id="section-4.3-6.1">
<pre>


        Sender                      Receiver
          |-----W=0, FCN=6, Seq=1-----&gt;|
          |-----W=0, FCN=5, Seq=2-----&gt;|
          |-----W=0, FCN=4, Seq=3-----&gt;|
          |-----W=0, FCN=3, Seq=4-----&gt;|
          |-----W=0, FCN=2, Seq=5-----&gt;|
          |-----W=0, FCN=1, Seq=6-----&gt;|
DL Enable |-----W=0, FCN=0, Seq=7-----&gt;|
          |&lt;-------  RECV ABORT -------| under-resourced
       (Error)


</pre>
</div>
<figcaption><a href="#figure-31" class="selfRef">Figure 31</a>:
<a href="#name-ul-ack-on-error-receiver-ab" class="selfRef">UL ACK-on-Error Receiver-Abort</a>
          </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-5">
      <h2 id="name-security-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-security-considerations" class="section-name selfRef">Security considerations</a>
      </h2>
<p id="section-5-1">The radio protocol authenticates and ensures the integrity of each message. This is achieved by using a unique device ID and an AES-128 based message authentication code, 
ensuring that the message has been generated and sent by the device with the ID claimed in the message.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">Application data can be encrypted at the application level or not, depending on the criticality of the use case. 
This flexibility allows providing a balance between cost and effort vs. risk.  
AES-128 in counter mode is used for encryption.  Cryptographic keys are independent for each device. These keys are associated with the device ID and separate integrity and 
confidentiality keys are pre-provisioned. A confidentiality key is only provisioned if confidentiality is to be used.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">The radio protocol has protections against reply attacks, and the cloud-based core network provides firewalling protection against undesired incoming communications.<a href="#section-5-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgements">
<section id="section-6">
      <h2 id="name-acknowledgements">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-6-1">Carles Gomez has been funded in part by the Spanish Government
   through the Jose Castillejo CAS15/00336 grant, the TEC2016-79988-P
   grant, and the PID2019-106808RA-I00 grant, and by Secretaria
   d'Universitats i Recerca del Departament d'Empresa i Coneixement de
   la Generalitat de Catalunya 2017 through grant SGR 376.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">Sergio Aguilar has been funded by the ERDF and the Spanish Government through project TEC2016-79988-P and project PID2019-106808RA-I00, AEI/FEDER, EU.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">Sandra Cespedes has been funded in part by the ANID Chile Project FONDECYT Regular 1201893 and Basal Project FB0008.<a href="#section-6-3" class="pilcrow">¶</a></p>
<p id="section-6-4">Diego Wistuba has been funded by the ANID Chile Project FONDECYT Regular 1201893.<a href="#section-6-4" class="pilcrow">¶</a></p>
<p id="section-6-5">The authors would like to thank Clement Mannequin, Rafael Vidal, Julien Boite, Renaud Marty, and Antonis Platis for their useful comments and implementation design considerations.<a href="#section-6-5" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-7">
      <h2 id="name-references">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-7.1">
        <h3 id="name-normative-references">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-lpwan-schc-compound-ack">[I-D.ietf-lpwan-schc-compound-ack]</dt>
        <dd>
<span class="refAuthor">Zuniga, JC.</span>, <span class="refAuthor">Gomez, C.</span>, <span class="refAuthor">Aguilar, S.</span>, <span class="refAuthor">Toutain, L.</span>, <span class="refAuthor">Cespedes, S.</span>, and <span class="refAuthor">D. Wistuba</span>, <span class="refTitle">"SCHC Compound ACK"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-lpwan-schc-compound-ack-00</span>, <time datetime="2021-07" class="refDate">July 2021</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-lpwan-schc-compound-ack-00.txt">http://www.ietf.org/internet-drafts/draft-ietf-lpwan-schc-compound-ack-00.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8376">[RFC8376]</dt>
        <dd>
<span class="refAuthor">Farrell, S., Ed.</span>, <span class="refTitle">"Low-Power Wide Area Network (LPWAN) Overview"</span>, <span class="seriesInfo">RFC 8376</span>, <span class="seriesInfo">DOI 10.17487/RFC8376</span>, <time datetime="2018-05" class="refDate">May 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8376">https://www.rfc-editor.org/info/rfc8376</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8724">[RFC8724]</dt>
      <dd>
<span class="refAuthor">Minaburo, A.</span>, <span class="refAuthor">Toutain, L.</span>, <span class="refAuthor">Gomez, C.</span>, <span class="refAuthor">Barthel, D.</span>, and <span class="refAuthor">JC. Zuniga</span>, <span class="refTitle">"SCHC: Generic Framework for Static Context Header Compression and Fragmentation"</span>, <span class="seriesInfo">RFC 8724</span>, <span class="seriesInfo">DOI 10.17487/RFC8724</span>, <time datetime="2020-04" class="refDate">April 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8724">https://www.rfc-editor.org/info/rfc8724</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-7.2">
        <h3 id="name-informative-references">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="sigfox-callbacks">[sigfox-callbacks]</dt>
        <dd>
<span class="refAuthor">Sigfox</span>, <span class="refTitle">"Sigfox Callbacks"</span>, <span>&lt;<a href="https://support.sigfox.com/docs/callbacks-documentation">https://support.sigfox.com/docs/callbacks-documentation</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="sigfox-spec">[sigfox-spec]</dt>
      <dd>
<span class="refAuthor">Sigfox</span>, <span class="refTitle">"Sigfox Radio Specifications"</span>, <span>&lt;<a href="https://build.sigfox.com/sigfox-device-radio-specifications">https://build.sigfox.com/sigfox-device-radio-specifications</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Juan Carlos Zúñiga</span></div>
<div dir="auto" class="left">
<span class="locality">Montreal</span>  <span class="postal-code">QC</span>
</div>
<div dir="auto" class="left"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:j.c.zuniga@ieee.org" class="email">j.c.zuniga@ieee.org</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Carles Gomez</span></div>
<div dir="auto" class="left"><span class="org">Universitat Politècnica de Catalunya</span></div>
<div dir="auto" class="left"><span class="street-address">C/Esteve Terradas, 7<br>08860 Castelldefels</span></div>
<div dir="auto" class="left"><span class="country-name">Spain</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:carlesgo@entel.upc.edu" class="email">carlesgo@entel.upc.edu</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Sergio Aguilar</span></div>
<div dir="auto" class="left"><span class="org">Universitat Politècnica de Catalunya</span></div>
<div dir="auto" class="left"><span class="street-address">C/Esteve Terradas, 7<br>08860 Castelldefels</span></div>
<div dir="auto" class="left"><span class="country-name">Spain</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:sergio.aguilar.romero@upc.edu" class="email">sergio.aguilar.romero@upc.edu</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Laurent Toutain</span></div>
<div dir="auto" class="left"><span class="org">IMT-Atlantique</span></div>
<div dir="auto" class="left"><span class="street-address">2 rue de la Chataigneraie<br>CS 17607</span></div>
<div dir="auto" class="left"><span class="locality">35576 Cesson-Sevigne Cedex</span></div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:Laurent.Toutain@imt-atlantique.fr" class="email">Laurent.Toutain@imt-atlantique.fr</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Sandra Cespedes</span></div>
<div dir="auto" class="left"><span class="org">NIC Labs, Universidad de Chile</span></div>
<div dir="auto" class="left"><span class="street-address">Av. Almte. Blanco Encalada 1975<br>Santiago</span></div>
<div dir="auto" class="left"><span class="country-name">Chile</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:scespedes@niclabs.cl" class="email">scespedes@niclabs.cl</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Diego Wistuba</span></div>
<div dir="auto" class="left"><span class="org">NIC Labs, Universidad de Chile</span></div>
<div dir="auto" class="left"><span class="street-address">Av. Almte. Blanco Encalada 1975<br>Santiago</span></div>
<div dir="auto" class="left"><span class="country-name">Chile</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:wistuba@niclabs.cl" class="email">wistuba@niclabs.cl</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Julien Boite</span></div>
<div dir="auto" class="left"><span class="org">SIGFOX</span></div>
<div dir="auto" class="left"><span class="locality">Labege</span></div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:julien.boite@sigfox.com" class="email">julien.boite@sigfox.com</a>
</div>
<div class="url">
<span>URI:</span>
<a href="http://www.sigfox.com/" class="url">http://www.sigfox.com/</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
