<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Internationalized Delivery Status and Disposition Notifications </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Conventions Used in This Document">
<link href="#rfc.section.3" rel="Chapter" title="3 UTF-8 Address Type">
<link href="#rfc.section.4" rel="Chapter" title="4 UTF-8 Delivery Status Notifications">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Additional Requirements on SMTP Servers">
<link href="#rfc.section.5" rel="Chapter" title="5 UTF-8 Message Disposition Notifications">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 UTF-8 Mail Address Type Registration">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Update to 'smtp' Diagnostic Type Registration">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 message/global-headers">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 message/global-delivery-status">
<link href="#rfc.section.6.5" rel="Chapter" title="6.5 message/global-disposition-notification">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.references" rel="Chapter" title="8 References">
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="8.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Changes Since ...">
<link href="#rfc.appendix.Appendix%20A.1" rel="Chapter" title="Appendix A.1 Changes Since -00">
<link href="#rfc.appendix.Appendix%20A.2" rel="Chapter" title="Appendix A.2 Changes Since RFC 5337">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B Acknowledgements">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="Delivery status notifications (DSNs) are critical to the correct operation of an email system.  However, the existing Draft Standards (RFC 3461, RFC 3462, RFC 3464) are presently limited to US-ASCII text in the machine-readable portions of the protocol.  This specification adds a new address type for international email addresses so an original recipient address with non-US-ASCII characters can be correctly preserved even after downgrading.  This also provides updated content return media types for delivery status notifications and message disposition notifications to support use of the new address type.  " />
  <meta name="description" content="Delivery status notifications (DSNs) are critical to the correct operation of an email system.  However, the existing Draft Standards (RFC 3461, RFC 3462, RFC 3464) are presently limited to US-ASCII text in the machine-readable portions of the protocol.  This specification adds a new address type for international email addresses so an original recipient address with non-US-ASCII characters can be correctly preserved even after downgrading.  This also provides updated content return media types for delivery status notifications and message disposition notifications to support use of the new address type.  " />
  <meta name="keywords" content="EAI, DSN, SMTP" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">T. Hansen, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">AT&amp;T Laboratories</td>
</tr>
<tr>
<td class="left">Updates: 3461, 3462, 3464, 3798 (if approved)</td>
<td class="right">C. Newman</td>
</tr>
<tr>
<td class="left">Obsoletes: 5337 (if approved)</td>
<td class="right">Sun Microsystems</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">A. Melnikov</td>
</tr>
<tr>
<td class="left">Expires: October 03, 2011</td>
<td class="right">Isode Ltd</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">April 01, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Internationalized Delivery Status and Disposition Notifications <br />
  <span class="filename"></span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>Delivery status notifications (DSNs) are critical to the correct operation of an email system.  However, the existing Draft Standards (RFC 3461, RFC 3462, RFC 3464) are presently limited to US-ASCII text in the machine-readable portions of the protocol.  This specification adds a new address type for international email addresses so an original recipient address with non-US-ASCII characters can be correctly preserved even after downgrading.  This also provides updated content return media types for delivery status notifications and message disposition notifications to support use of the new address type.  </p>
<p>This document extends RFC 3461, RFC 3462, RFC 3464, and RFC 3798.  It replaces the experimental RFC 5337.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on October 03, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Conventions Used in This Document</a>
</li>
<li>3.   <a href="#rfc.section.3">UTF-8 Address Type</a>
</li>
<li>4.   <a href="#rfc.section.4">UTF-8 Delivery Status Notifications</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Additional Requirements on SMTP Servers</a>
</li>
<li>5.   <a href="#rfc.section.5">UTF-8 Message Disposition Notifications</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">UTF-8 Mail Address Type Registration</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Update to 'smtp' Diagnostic Type Registration</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">message/global-headers</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">message/global-delivery-status</a>
</li>
<li>6.5.   <a href="#rfc.section.6.5">message/global-disposition-notification</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.references">References</a>
</li>
<li>8.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>8.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Changes Since ...</a>
</li>
<li>Appendix A.1.   <a href="#rfc.appendix.Appendix%20A.1">Changes Since -00</a>
</li>
<li>Appendix A.2.   <a href="#rfc.appendix.Appendix%20A.2">Changes Since RFC 5337</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">Acknowledgements</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p><a href="#I-D.ietf-eai-rfc5336bis">UTF8SMTP</a> <cite title="NONE">[I-D.ietf-eai-rfc5336bis]</cite> extension and <a href="#I-D.ietf-eai-rfc5335bis">Internationalized Email Headers</a> <cite title="NONE">[I-D.ietf-eai-rfc5335bis]</cite>, it is sometimes necessary to return that message or generate a <a href="#RFC3798">Message Disposition Notification (MDN)</a> <cite title="NONE">[RFC3798]</cite>.  As a message sent to multiple recipients can generate a status and disposition notification for each recipient, it is helpful if a client can correlate these notifications based on the recipient address it provided; thus, preservation of the original recipient is important.  This specification describes how to preserve the original recipient and updates the MDN and DSN formats to support the new address types.  </p>
<p id="rfc.section.1.p.2">NOTE: While this specification updates the experimental versions of this protocol by removing certain constructs (e.g., the "&lt;addr &lt;addr&gt;&gt;" address syntax is no longer permitted), the name of the Address Type "UTF-8" and the media type names message/global, message/global-delivery-status and message/global-headers have not been changed.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Conventions Used in This Document</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.</p>
<p id="rfc.section.2.p.2">The formal syntax use the <a href="#RFC5234">Augmented Backus-Naur Form (ABNF)</a> <cite title="NONE">[RFC5234]</cite> notation including the core rules defined in Appendix B of <a href="#RFC5234">RFC 5234</a> <cite title="NONE">[RFC5234]</cite> and the UTF-8 syntax rules in Section 4 of <a href="#RFC3629">[RFC3629]</a>.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#utf8addr" id="utf8addr">UTF-8 Address Type</a>
</h1>
<p><a href="#RFC3464">An Extensible Message Format for Delivery Status Notifications</a> <cite title="NONE">[RFC3464]</cite> defines the concept of an address type.  The address format introduced in <a href="#I-D.ietf-eai-rfc5335bis">Internationalized Email Headers</a> <cite title="NONE">[I-D.ietf-eai-rfc5335bis]</cite> is a new address type.  The syntax for the new address type in the context of status notifications is specified at the end of this section.</p>
<p id="rfc.section.3.p.2">An <a href="#RFC5321">SMTP</a> <cite title="NONE">[RFC5321]</cite> server that advertises both the <a href="#I-D.ietf-eai-rfc5336bis">UTF8SMTP extension</a> <cite title="NONE">[I-D.ietf-eai-rfc5336bis]</cite> and the <a href="#RFC3461">DSN extension</a> <cite title="NONE">[RFC3461]</cite> MUST accept a UTF-8 address type in the ORCPT parameter including 8-bit UTF-8 characters.  This address type also includes a 7-bit encoding suitable for use in a message/delivery-status body part or an ORCPT parameter sent to an SMTP server that does not advertise UTF8SMTP.  </p>
<p id="rfc.section.3.p.3">This address type has 3 forms: utf-8-addr-xtext, utf-8-addr-unitext, and utf-8-address.  Only the first form is 7-bit safe.  </p>
<p id="rfc.section.3.p.4">The utf-8-address form is only suitable for use in newly defined protocols capable of native representation of 8-bit characters.  That is, the utf-8-address form MUST NOT be used in the ORCPT parameter when the SMTP server doesn't advertise support for UTF8SMTP, or the SMTP server supports UTF8SMTP, but the address contains US-ASCII characters not permitted in the ORCPT parameter (e.g., the ORCPT parameter forbids unencoded SP and the = character), or in a 7-bit transport environment including a message/delivery-status Original-Recipient or Final-Recipient field.  In the first and third case, the utf-8-addr-xtext form (see below) MUST be used instead; in the second case, either the utf-8-addr-unitext or the utf-8-addr-xtext form MUST be used.  The utf-8-address form MAY be used in the ORCPT parameter when the SMTP server also advertises support for UTF8SMTP and the address doesn't contain any US-ASCII characters not permitted in the ORCPT parameter. It SHOULD be used in a message/global-delivery-status Original-Recipient or Final-Recipient DSN field, or in an <a href="#RFC3798">Original-Recipient header field</a> <cite title="NONE">[RFC3798]</cite> if the message is a UTF8SMTP message.  </p>
<p id="rfc.section.3.p.5">In addition, the utf-8-addr-unitext form can be used anywhere where the utf-8-address form is allowed.  </p>
<p id="rfc.section.3.p.6">When used in the ORCPT parameter, the UTF-8 address type requires that US-ASCII CTLs, SP, \, +, and = be encoded using 'unitext' encoding (see below).  This is described by the utf-8-addr-xtext and utf-8-addr-unitext forms in the ABNF below.  The 'unitext' encoding uses "\x{HEXPOINT}" syntax (EmbeddedUnicodeChar in the ABNF below) for encoding any Unicode character outside of US-ASCII range, as well as for encoding CTLs, SP, \, +, and =.  HEXPOINT is 2 to 6 hexadecimal digits.  This encoding avoids the need to use the xtext encoding described in <a href="#RFC3461">[RFC3461]</a>, as any US-ASCII characters that needs to be escaped using xtext encoding never appear in any unitext encoded string.  When sending data to a UTF8SMTP capable server, native UTF-8 characters SHOULD be used instead of the EmbeddedUnicodeChar syntax described in details below.  When sending data to an SMTP server that does not advertise UTF8SMTP, then the EmbeddedUnicodeChar syntax MUST be used instead of UTF-8.  </p>
<p id="rfc.section.3.p.7">When the ORCPT parameter is placed in a message/global-delivery-status Original-Recipient field, the 'utf-8-addr-xtext' form of the UTF-8 address type SHOULD be converted to the 'utf-8-address' form (see the ABNF below) by removing the 'unitext' encoding.  However, if an address is labeled with the UTF-8 address type but does not conform to utf-8 syntax, then it MUST be copied into the message/global-delivery-status field without alteration.  </p>
<p id="rfc.section.3.p.8">The ability to encode characters with the EmbeddedUnicodeChar encodings should be viewed as a transitional mechanism and avoided when possible.  It is hoped that as systems lacking support for UTF8SMTP become less common over time, these encodings can eventually be phased out.  </p>
<p id="rfc.section.3.p.9">In the ABNF below, all productions not defined in this document are defined in Appendix B of <a href="#RFC5234">[RFC5234]</a>, in Section 4 of <a href="#RFC3629">[RFC3629]</a>, or in <a href="#RFC3464">[RFC3464]</a>.  </p>
<div id="#rfc.figure.1"></div>
<pre>
utf-8-type-addr     = "utf-8;" utf-8-enc-addr

utf-8-address       = uMailbox [ 1*WSP "&lt;" Mailbox "&gt;" ]
  ; uMailbox is defined in [I-D.ietf-eai-rfc5336bis].
  ; Mailbox is defined in [RFC5321].

utf-8-enc-addr      = utf-8-addr-xtext /
                      utf-8-addr-unitext /
                      utf-8-address

utf-8-addr-xtext    = 1*(QCHAR / EmbeddedUnicodeChar)
                      ; 7bit form of utf-8-addr-unitext.
                      ; Safe for use in the ORCPT [RFC3461]
                      ; parameter even when UTF8SMTP SMTP
                      ; extension is not advertised.

utf-8-addr-unitext  = 1*(QUCHAR / EmbeddedUnicodeChar)
                    ; MUST follow utf-8-address ABNF when
                    ; dequoted.
                    ; Safe for using in the ORCPT [RFC3461]
                    ; parameter when UTF8SMTP SMTP extension
                    ; is also advertised.

QCHAR              = %x21-2a / %x2c-3c / %x3e-5b / %x5d-7e
                    ; US-ASCII printable characters except
                    ; CTLs, SP, '\', '+', '='.

QUCHAR              = QCHAR / UTF8-2 / UTF8-3 / UTF8-4
                    ; US-ASCII printable characters except
                    ; CTLs, SP, '\', '+' and '=', plus
                    ; other Unicode characters encoded in UTF-8

EmbeddedUnicodeChar =   %x5C.78 "{" HEXPOINT "}"
                    ; starts with "\x"

HEXPOINT = ( ( "0"/"1" ) %x31-39 ) / "10" / "20" /
           "2B" / "3D" / "7F" /         ; all xtext-specials
           "5C" / (HEXDIG8 HEXDIG) /    ; 2 digit forms
           ( NZHEXDIG 2(HEXDIG) ) /     ; 3 digit forms		   
           ( NZDHEXDIG 3(HEXDIG) ) /    ; 4 digit forms excluding
           ( "D" %x30-37 2(HEXDIG) ) /  ; ... surrogate
           ( NZHEXDIG 4(HEXDIG) ) /     ; 5 digit forms
           ( "10" 4*HEXDIG )            ; 6 digit forms
           ; represents either "\" or a Unicode code point outside
           ; the US-ASCII repertoire

HEXDIG8             = %x38-39 / "A" / "B" / "C" / "D" / "E" / "F"
                    ; HEXDIG excluding 0-7
NZHEXDIG            = %x31-39 / "A" / "B" / "C" / "D" / "E" / "F"
                    ; HEXDIG excluding "0"
NZDHEXDIG           = %x31-39 / "A" / "B" / "C" / "E" / "F"
                    ; HEXDIG excluding "0" and "D"
</pre>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#eai-dsn-format" id="eai-dsn-format">UTF-8 Delivery Status Notifications</a>
</h1>
<p id="rfc.section.4.p.1">A traditional <a href="#RFC3464">delivery status notification</a> <cite title="NONE">[RFC3464]</cite> comes in a three-part <a href="#RFC3462">multipart/report</a> <cite title="NONE">[RFC3462]</cite> container, where the first part is human-readable text describing the error, the second part is a 7-bit-only message/delivery-status, and the optional third part is used for content (message/rfc822) or header (text/rfc822-headers) return.  As the present DSN format does not permit returning of undeliverable UTF8SMTP messages, three new media types are needed.  </p>
<p id="rfc.section.4.p.2">The first type, message/global-delivery-status, has the syntax of message/delivery-status with three modifications.  First, the charset for message/global-delivery-status is UTF-8, and thus any field MAY contain UTF-8 characters when appropriate (see the ABNF below).  In particular, the Diagnostic-Code field MAY contain UTF-8 as described in <a href="#I-D.ietf-eai-rfc5336bis">UTF8SMTP</a> <cite title="NONE">[I-D.ietf-eai-rfc5336bis]</cite>; the Diagnostic-Code field SHOULD be in i-default language <a href="#RFC2277">[RFC2277]</a>.  Second, systems generating a message/global-delivery-status body part SHOULD use the utf-8-address form of the UTF-8 address type for all addresses containing characters outside the US-ASCII repertoire.  These systems SHOULD up-convert the utf-8-addr-xtext or the utf-8-addr-unitext form of a UTF-8 address type in the ORCPT parameter to the utf-8-address form of a UTF-8 address type in the Original-Recipient field.  Third, a new optional field called Localized-Diagnostic is added.  Each instance includes a language tag <a href="#RFC5646">[RFC5646]</a> and contains text in the specified language. This is equivalent to the text part of the Diagnostic-Code field. All instances of Localized-Diagnostic MUST use different language tags.  The ABNF for message/global-delivery-status is specified below.  </p>
<p id="rfc.section.4.p.3">In the ABNF below, all productions not defined in this document are defined in Appendix B of <a href="#RFC5234">[RFC5234]</a>, in Section 4 of <a href="#RFC3629">[RFC3629]</a>, or in <a href="#RFC3464">[RFC3464]</a>.  Note that &lt;text-fixed&gt; is the same as &lt;text&gt; from <a href="#RFC5322">[RFC5322]</a>, but without &lt;obs-text&gt;.  If or when RFC 5322 is updated to disallow &lt;obs-text&gt;, this should become just &lt;text&gt; Also, if or when RFC 5322 is updated to disallow control characters in &lt;text&gt;, this should become a reference to that update instead.  </p>
<div id="#rfc.figure.2"></div>
<pre>
utf-8-delivery-status-content = per-message-fields
                      1*( CRLF utf-8-per-recipient-fields )
     ; "per-message-fields" remains unchanged from the definition
     ; in RFC 3464, except for the "extension-field"
     ; which is updated below.
	  
utf-8-per-recipient-fields =
      [ original-recipient-field CRLF ]
      final-recipient-field CRLF
      action-field CRLF
      status-field CRLF
      [ remote-mta-field CRLF ]
      [ diagnostic-code-field CRLF
        *(localized-diagnostic-text-field CRLF) ]
      [ last-attempt-date-field CRLF ]
      [ will-retry-until-field CRLF ]
      *( extension-field CRLF )
  ; All fields except for "original-recipient-field",
  ; "final-recipient-field", "diagnostic-code-field"
  ; and "extension-field" remain unchanged from
  ; the definition in RFC 3464.

generic-address =/ utf-8-enc-addr
  ; Only allowed with the "utf-8" address-type.
  ; Updates Section 3.2.3 of RFC3798
  ; 
  ; This indirectly updates "original-recipient-field"
  ; and "final-recipient-field"

diagnostic-code-field =
     "Diagnostic-Code" ":" diagnostic-type ";" *text-fixed
	  
localized-diagnostic-text-field =
     "Localized-Diagnostic" ":" Language-Tag ";" *utf8-text
  ; "Language-Tag" is a language tag as defined in [LANGTAGS].

extension-field =/ extension-field-name ":" *utf8-text
  ; Updates Section 7 of RFC3798

text-fixed = %d1-9 /      ; Any US-ASCII character except for NUL,
             %d11 /       ; CR and LF
             %d12 /       ; See note above about &lt;text-fixed&gt;
             %d14-127

utf8-text = text-fixed / UTF8-non-ascii

UTF8-non-ascii   = UTF8-2 / UTF8-3 / UTF8-4
</pre>
<p id="rfc.section.4.p.4">The second type, used for returning the content, is message/global which is similar to message/rfc822, except it contains a message with UTF-8 headers.  This media type is described in <a href="#I-D.ietf-eai-rfc5335bis">[I-D.ietf-eai-rfc5335bis]</a>.  </p>
<p id="rfc.section.4.p.5">The third type, used for returning the headers, is message/global-headers and contains only the UTF-8 header fields of a message (all lines prior to the first blank line in a UTF8SMTP message).  Unlike message/global, this body part provides no difficulties for the present infrastructure.  </p>
<p id="rfc.section.4.p.6">Note that as far as <a href="#RFC3462">multipart/report</a> <cite title="NONE">[RFC3462]</cite> container is concerned, message/global-delivery-status, message/global, and message/global-headers MUST be treated as equivalent to message/delivery-status, message/rfc822, and text/rfc822-headers. That is, implementations processing multipart/report MUST expect any combinations of the 6 media types mentioned above inside a multipart/report media type.  </p>
<p id="rfc.section.4.p.7">All three new types will typically use the "8bit" Content-Transfer-Encoding.  (In the event all content is 7-bit, the equivalent traditional types for delivery status notifications MAY be used. For example, if information in message/global-delivery-status part can be represented without any loss of information as message/delivery-status, then the message/delivery-status body part may be used.) Note that <a href="#I-D.ietf-eai-rfc5335bis">[I-D.ietf-eai-rfc5335bis]</a> relaxed restriction from <a href="#RFC2046">MIME</a> <cite title="NONE">[RFC2046]</cite> regarding use of Content-Transfer-Encoding in new "message" subtypes.  This specification explicitly allows use of Content-Transfer-Encoding in message/global-headers and message/global-delivery-status. This is not believed to be problematic as these new media types are intended primarily for use by newer systems with full support for 8-bit MIME and UTF-8 headers.  </p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#eai-servers" id="eai-servers">Additional Requirements on SMTP Servers</a>
</h1>
<p id="rfc.section.4.1.p.1">If an SMTP server that advertises both UTF8SMTP and DSN needs to return an undeliverable UTF8SMTP message, then it MUST NOT downgrade <a href="#RFC5504">[RFC5504]</a> the UTF8SMTP message when generating the corresponding multipart/report.  If the return path SMTP server does not support UTF8SMTP, then the undeliverable body part and headers MUST be encoded using a 7-bit Content-Transfer-Encoding such as "base64" or "quoted-printable" <a href="#RFC2045">[RFC2045]</a>, as detailed in <a href="#eai-dsn-format">Section 4</a>.  Otherwise, "8bit" Content-Transfer-Encoding can be used.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> UTF-8 Message Disposition Notifications</h1>
<p><a href="#RFC3798">Message Disposition Notifications</a> <cite title="NONE">[RFC3798]</cite> have a similar design and structure to DSNs.  As a result, they use the same basic return format.  When generating an MDN for a UTF-8 header message, the third part of the multipart/report contains the returned content (message/global) or header (message/global-headers), same as for DSNs.  The second part of the multipart/report uses a new media type, message/global-disposition-notification, which has the syntax of message/disposition-notification with two modifications.  First, the charset for message/global-disposition-notification is UTF-8, and thus any field MAY contain UTF-8 characters when appropriate (see the ABNF below).  (In particular, the failure-field, the error-field, and the warning-field MAY contain UTF-8. These fields SHOULD be in i-default language <a href="#RFC2277">[RFC2277]</a>.) Second, systems generating a message/global-disposition-notification body part (typically a mail user agent) SHOULD use the UTF-8 address type for all addresses containing characters outside the US-ASCII repertoire.  </p>
<p id="rfc.section.5.p.2">The MDN specification also defines the Original-Recipient header field, which is added with a copy of the contents of ORCPT at delivery time.  When generating an Original-Recipient header field, a delivery agent writing a UTF-8 header message in native format SHOULD convert the utf-8-addr-xtext or the utf-8-addr-unitext form of a UTF-8 address type in the ORCPT parameter to the corresponding utf-8-address form.  </p>
<p id="rfc.section.5.p.3">The MDN specification also defines the Disposition-Notification-To header field, which is an address header field and thus follows the same 8-bit rules as other address header fields such as "From" and "To" when used in a UTF-8 header message.  </p>
<div id="#rfc.figure.3"></div>
<pre>
  ; ABNF for "original-recipient-header", "original-recipient-field",
  ; and "final-recipient-field" from RFC 3798 is implicitly updated
  ; as they use the updated "generic-address" as defined in
  ; Section 4 of this document.

failure-field = "Failure" ":" *utf8-text
  ; "utf8-text" is defined in Section 4 of this document.

error-field = "Error" ":" *utf8-text
  ; "utf8-text" is defined in Section 4 of this document.

warning-field = "Warning" ":" *utf8-text
  ; "utf8-text" is defined in Section 4 of this document.
</pre>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> IANA Considerations</h1>
<p id="rfc.section.6.p.1">This specification does not create any new IANA registries.  However, the following items are registered as a result of this document.  </p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> UTF-8 Mail Address Type Registration</h1>
<p id="rfc.section.6.1.p.1">The mail address type registry was created by <a href="#RFC3464">[RFC3464]</a>.  The registration template response follows: </p>

<dl>
<dt>(a)</dt>
<dd style="margin-left: 4">The proposed address-type name.  <br><br> UTF-8</dd>
<dt>(b)</dt>
<dd style="margin-left: 4">The syntax for mailbox addresses of this type, specified using BNF, regular expressions, ASN.1, or other non-ambiguous language.  <br><br> See <a href="#utf8addr">Section 3</a>.  </dd>
<dt>(c)</dt>
<dd style="margin-left: 4">If addresses of this type are not composed entirely of graphic characters from the US-ASCII repertoire, a specification for how they are to be encoded as graphic US-ASCII characters in a DSN Original-Recipient or Final-Recipient DSN field.  <br><br> This address type has 3 forms (as defined in <a href="#utf8addr">Section 3</a>): utf-8-addr-xtext, utf-8-addr-unitext, and utf-8-address.  Only the first form is 7-bit safe.  </dd>
</dl>

<p> </p>
<p id="rfc.section.6.1.p.2">The utf-8-address form MUST NOT be used: <br> The utf-8-address form MAY be used in the ORCPT parameter when the SMTP server also advertises support for UTF8SMTP and the address doesn't contain any US-ASCII characters not permitted in the ORCPT parameter; in a message/global-delivery-status Original-Recipient or Final-Recipient DSN field; or in an <a href="#RFC3798">Original-Recipient header field</a> <cite title="NONE">[RFC3798]</cite> if the message is a UTF8SMTP message.  </p>

<ol>
<li>in the ORCPT parameter when the SMTP server doesn't advertise support for UTF8SMTP;</li>
<li>or the SMTP server supports UTF8SMTP, but the address contains US-ASCII characters not permitted in the ORCPT parameter (e.g., the ORCPT parameter forbids SP and the = characters);</li>
<li>or in a 7-bit transport environment including a message/delivery-status Original-Recipient or Final-Recipient field.  </li>
</ol>

<p> The utf-8-addr-xtext form MUST be used instead in the first and the third case; the utf-8-addr-unitext form MUST be used in the second case.  </p>
<p id="rfc.section.6.1.p.3">In addition, the utf-8-addr-unitext form can be used anywhere where the utf-8-address form is allowed.  </p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> Update to 'smtp' Diagnostic Type Registration</h1>
<p id="rfc.section.6.2.p.1">The mail diagnostic type registry was created by <a href="#RFC3464">[RFC3464]</a> and updated by <a href="#RFC5337">[RFC5337]</a>.  The registration for the 'smtp' diagnostic type should be updated to reference RFC XXXX in addition to <a href="#RFC3464">[RFC3464]</a> and <a href="#RFC5337">[RFC5337]</a>.  </p>
<p id="rfc.section.6.2.p.2">When the 'smtp' diagnostic type is used in the context of a message/delivery-status body part, it remains as presently defined.  When the 'smtp' diagnostic type is used in the context of a message/global-delivery-status body part, the codes remain the same, but the text portion MAY contain UTF-8 characters.  </p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> message/global-headers</h1>
<p></p>

<dl>
<dt>Type name:</dt>
<dd style="margin-left: 8">message</dd>
<dt>Subtype name:</dt>
<dd style="margin-left: 8">global-headers</dd>
<dt>Required parameters:</dt>
<dd style="margin-left: 8">none</dd>
<dt>Optional parameters:</dt>
<dd style="margin-left: 8">none</dd>
<dt>Encoding considerations:</dt>
<dd style="margin-left: 8">This media type contains <a href="#I-D.ietf-eai-rfc5335bis">Internationalized Email Headers</a> <cite title="NONE">[I-D.ietf-eai-rfc5335bis]</cite> with no message body.  Whenever possible, the 8-bit content transfer encoding SHOULD be used.  When this media type passes through a 7-bit-only SMTP infrastructure it MAY be encoded with the base64 or quoted-printable content transfer encoding.  </dd>
<dt>Security considerations:</dt>
<dd style="margin-left: 8">See <a href="#seccons">Section 7</a>.  </dd>
<dt>Interoperability considerations:</dt>
<dd style="margin-left: 8">It is important that this media type is not converted to a charset other than UTF-8.  As a result, implementations MUST NOT include a charset parameter with this media type.  Although it might be possible to downconvert this media type to the text/rfc822-header media type, such conversion is discouraged as it loses information.</dd>
<dt>Published specification:</dt>
<dd style="margin-left: 8">RFC XXXX</dd>
<dt>Applications that use this media type:</dt>
<dd style="margin-left: 8">UTF8SMTP servers and email clients that support multipart/report generation or parsing.</dd>
<dt>Additional information:</dt>
<dd style="margin-left: 8"></dd>
<dt>Magic number(s):</dt>
<dd style="margin-left: 8">none</dd>
<dt>File extension(s):</dt>
<dd style="margin-left: 8">In the event this is saved to a file, the extension ".u8hdr" is suggested.</dd>
<dt>Macintosh file type code(s):</dt>
<dd style="margin-left: 8">The 'TEXT' type code is suggested as files of this type are typically used for diagnostic purposes and suitable for analysis in a UTF-8 aware text editor.  A uniform type identifier (UTI) of "public.utf8-email-message-header" is suggested.  This type conforms to "public.utf8-plain-text" and "public.plain-text".</dd>
<dt>Person &amp; email address to contact for further information:</dt>
<dd style="margin-left: 8">See the Authors' Addresses section of this document.</dd>
<dt>Intended usage:</dt>
<dd style="margin-left: 8">COMMON</dd>
<dt>Restrictions on usage:</dt>
<dd style="margin-left: 8">This media type contains textual data in the UTF-8 charset.  It typically contains octets with the 8th bit set.  As a result, a transfer encoding is required when a 7-bit transport is used.</dd>
<dt>Author:</dt>
<dd style="margin-left: 8">See the Authors' Addresses section of this document.</dd>
<dt>Change controller:</dt>
<dd style="margin-left: 8">IETF Standards Process</dd>
</dl>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> message/global-delivery-status</h1>
<p></p>

<dl>
<dt>Type name:</dt>
<dd style="margin-left: 8">message</dd>
<dt>Subtype name:</dt>
<dd style="margin-left: 8">global-delivery-status</dd>
<dt>Required parameters:</dt>
<dd style="margin-left: 8">none</dd>
<dt>Optional parameters:</dt>
<dd style="margin-left: 8">none</dd>
<dt>Encoding considerations:</dt>
<dd style="margin-left: 8">This media type contains delivery status notification attributes in the UTF-8 charset.  The 8-bit content transfer encoding MUST be used with this content-type, unless it is sent over a 7-bit transport environment in which case quoted-printable or base64 may be necessary.</dd>
<dt>Security considerations:</dt>
<dd style="margin-left: 8">See <a href="#seccons">Section 7</a>
</dd>
<dt>Interoperability considerations:</dt>
<dd style="margin-left: 8">This media type provides functionality similar to the message/delivery-status content-type for email message return information.  Clients of the previous format will need to be upgraded to interpret the new format; however, the new media type makes it simple to identify the difference.</dd>
<dt>Published specification:</dt>
<dd style="margin-left: 8">RFC XXXX</dd>
<dt>Applications that use this media type:</dt>
<dd style="margin-left: 8">SMTP servers and email clients that support delivery status notification generation or parsing.</dd>
<dt>Additional information:</dt>
<dd style="margin-left: 8"></dd>
<dt>Magic number(s):</dt>
<dd style="margin-left: 8">none</dd>
<dt>File extension(s):</dt>
<dd style="margin-left: 8">The extension ".u8dsn" is suggested.</dd>
<dt>Macintosh file type code(s):</dt>
<dd style="margin-left: 8">A uniform type identifier (UTI) of "public.utf8-email-message-delivery-status" is suggested.  This type conforms to "public.utf8-plain-text".</dd>
<dt>Person &amp; email address to contact for further information:</dt>
<dd style="margin-left: 8">See the Authors' Addresses section of this document.</dd>
<dt>Intended usage:</dt>
<dd style="margin-left: 8">COMMON</dd>
<dt>Restrictions on usage:</dt>
<dd style="margin-left: 8">This is expected to be the second part of a multipart/report.</dd>
<dt>Author:</dt>
<dd style="margin-left: 8">See the Authors' Addresses section of this document.</dd>
<dt>Change controller:</dt>
<dd style="margin-left: 8">IETF Standards Process</dd>
</dl>
<h1 id="rfc.section.6.5">
<a href="#rfc.section.6.5">6.5.</a> message/global-disposition-notification</h1>
<p></p>

<dl>
<dt>Type name:</dt>
<dd style="margin-left: 8">message</dd>
<dt>Subtype name:</dt>
<dd style="margin-left: 8">global-disposition-notification</dd>
<dt>Required parameters:</dt>
<dd style="margin-left: 8">none</dd>
<dt>Optional parameters:</dt>
<dd style="margin-left: 8">none</dd>
<dt>Encoding considerations:</dt>
<dd style="margin-left: 8">This media type contains disposition notification attributes in the UTF-8 charset.  The 8-bit content transfer encoding MUST be used with this content-type, unless it is sent over a 7-bit transport environment in which case quoted-printable or base64 may be necessary.</dd>
<dt>Security considerations:</dt>
<dd style="margin-left: 8">See <a href="#seccons">Section 7</a>.</dd>
<dt>Interoperability considerations:</dt>
<dd style="margin-left: 8">This media type provides functionality similar to the message/disposition-notification content-type for email message disposition information.  Clients of the previous format will need to be upgraded to interpret the new format; however, the new media type makes it simple to identify the difference.</dd>
<dt>Published specification:</dt>
<dd style="margin-left: 8">RFC XXXX</dd>
<dt>Applications that use this media type:</dt>
<dd style="margin-left: 8">Email clients or servers that support message disposition notification generation or parsing.</dd>
<dt>Additional information:</dt>
<dd style="margin-left: 8"></dd>
<dt>Magic number(s):</dt>
<dd style="margin-left: 8">none</dd>
<dt>File extension(s):</dt>
<dd style="margin-left: 8">The extension ".u8mdn" is suggested.</dd>
<dt>Macintosh file type code(s):</dt>
<dd style="margin-left: 8">A uniform type identifier (UTI) of "public.utf8-email-message-disposition-notification" is suggested.  This type conforms to "public.utf8-plain-text".</dd>
<dt>Person &amp; email address to contact for further information:</dt>
<dd style="margin-left: 8">See the Authors' Addresses section of this document.</dd>
<dt>Intended usage:</dt>
<dd style="margin-left: 8">COMMON</dd>
<dt>Restrictions on usage:</dt>
<dd style="margin-left: 8">This is expected to be the second part of a multipart/report.</dd>
<dt>Author:</dt>
<dd style="margin-left: 8">See the Authors' Addresses section of this document.</dd>
<dt>Change controller:</dt>
<dd style="margin-left: 8">IETF Standards Process</dd>
</dl>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#seccons" id="seccons">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">Automated use of report types without authentication presents several security issues.  Forging negative reports presents the opportunity for denial-of-service attacks when the reports are used for automated maintenance of directories or mailing lists.  Forging positive reports may cause the sender to incorrectly believe a message was delivered when it was not.  </p>
<p id="rfc.section.7.p.2">Malicious users can generate report structures designed to trigger coding flaws in report parsers.  Report parsers need to use secure coding techniques to avoid the risk of buffer overflow or denial-of-service attacks against parser coding mistakes.  Code reviews of such parsers are also recommended.  </p>
<p id="rfc.section.7.p.3">Malicious users of the email system regularly send messages with forged envelope return paths, and these messages trigger delivery status reports that result in a large amount of unwanted traffic on the Internet.  Many users choose to ignore delivery status notifications because they are usually the result of "blowback" from forged messages and thus never notice when messages they sent go undelivered.  As a result, support for correlation of delivery status and message disposition notification messages with sent-messages has become a critical feature of mail clients and possibly mail stores if the email infrastructure is to remain reliable.  In the short term, simply correlating message-IDs may be sufficient to distinguish true status notifications from those resulting from forged originator addresses.  But in the longer term, including cryptographic signature material that can securely associate the status notification with the original message is advisable.  </p>
<p id="rfc.section.7.p.4">As this specification permits UTF-8 in additional fields, the security considerations of <a href="#RFC3629">UTF-8</a> <cite title="NONE">[RFC3629]</cite> apply.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2277">[RFC2277]</b></td>
<td class="top">
<a href="mailto:Harald.T.Alvestrand@uninett.no" title="UNINETT">Alvestrand, H.T.</a>, "<a href="http://tools.ietf.org/html/rfc2277">IETF Policy on Character Sets and Languages</a>", BCP 18, RFC 2277, January 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3461">[RFC3461]</b></td>
<td class="top">
<a>Moore, K.</a>, "<a href="http://tools.ietf.org/html/rfc3461">Simple Mail Transfer Protocol (SMTP) Service Extension for Delivery Status Notifications (DSNs)</a>", RFC 3461, January 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3462">[RFC3462]</b></td>
<td class="top">
<a>Vaudreuil, G.</a>, "<a href="http://tools.ietf.org/html/rfc3462">The Multipart/Report Content Type for the Reporting of Mail System Administrative Messages</a>", RFC 3462, January 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3464">[RFC3464]</b></td>
<td class="top">
<a>Moore, K.</a> and <a>G. Vaudreuil</a>, "<a href="http://tools.ietf.org/html/rfc3464">An Extensible Message Format for Delivery Status Notifications</a>", RFC 3464, January 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3629">[RFC3629]</b></td>
<td class="top">
<a>Yergeau, F.</a>, "<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>", STD 63, RFC 3629, November 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3798">[RFC3798]</b></td>
<td class="top">
<a>Hansen, T.</a> and <a>G. Vaudreuil</a>, "<a href="http://tools.ietf.org/html/rfc3798">Message Disposition Notification</a>", RFC 3798, May 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5646">[RFC5646]</b></td>
<td class="top">
<a>Phillips, A.</a> and <a>M. Davis</a>, "<a href="http://tools.ietf.org/html/rfc5646">Tags for Identifying Languages</a>", BCP 47, RFC 5646, September 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5321">[RFC5321]</b></td>
<td class="top">
<a>Klensin, J.</a>, "<a href="http://tools.ietf.org/html/rfc5321">Simple Mail Transfer Protocol</a>", RFC 5321, October 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5322">[RFC5322]</b></td>
<td class="top">
<a href="mailto:presnick@qualcomm.com" title="Qualcomm Incorporated">Resnick, P.</a>, "<a href="http://tools.ietf.org/html/rfc5322">Internet Message Format</a>", RFC 5322, October 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5234">[RFC5234]</b></td>
<td class="top">
<a>Crocker, D.</a> and <a>P. Overell</a>, "<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>", STD 68, RFC 5234, January 2008.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-eai-rfc5335bis">[I-D.ietf-eai-rfc5335bis]</b></td>
<td class="top">
<a>Yang, A</a>, <a>Steele, S</a> and <a>N Freed</a>, "<a href="http://tools.ietf.org/html/draft-ietf-eai-rfc5335bis-13">Internationalized Email Headers</a>", Internet-Draft draft-ietf-eai-rfc5335bis-13, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-eai-rfc5336bis">[I-D.ietf-eai-rfc5336bis]</b></td>
<td class="top">
<a>Yao, J</a> and <a>W MAO</a>, "<a href="http://tools.ietf.org/html/draft-ietf-eai-rfc5336bis-16">SMTP Extension for Internationalized Email</a>", Internet-Draft draft-ietf-eai-rfc5336bis-16, November 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">8.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2045">[RFC2045]</b></td>
<td class="top">
<a href="mailto:ned@innosoft.com" title="Innosoft International, Inc.">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com" title="First Virtual Holdings">N.S. Borenstein</a>, "<a href="http://tools.ietf.org/html/rfc2045">Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies</a>", RFC 2045, November 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2046">[RFC2046]</b></td>
<td class="top">
<a href="mailto:ned@innosoft.com" title="Innosoft International, Inc.">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com" title="First Virtual Holdings">N. Borenstein</a>, "<a href="http://tools.ietf.org/html/rfc2046">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>", RFC 2046, November 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5337">[RFC5337]</b></td>
<td class="top">
<a>Newman, C.</a> and <a>A. Melnikov</a>, "<a href="http://tools.ietf.org/html/rfc5337">Internationalized Delivery Status and Disposition Notifications</a>", RFC 5337, September 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5504">[RFC5504]</b></td>
<td class="top">
<a>Fujiwara, K.</a> and <a>Y. Yoneya</a>, "<a href="http://tools.ietf.org/html/rfc5504">Downgrading Mechanism for Email Address Internationalization</a>", RFC 5504, March 2009.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> Changes Since ...</h1>
<h1 id="rfc.appendix.Appendix A.1">
<a href="#rfc.appendix.Appendix%20A.1">Appendix A.1.</a> Changes Since -00</h1>
<p id="rfc.section.Appendix A.1.p.1">Incorporated changes from draft-ietf-eai-dsnbis-01.  </p>
<p id="rfc.section.Appendix A.1.p.2">Fixed description of utf-8-addr-xtext and utf-8-addr-unitext.  </p>
<p id="rfc.section.Appendix A.1.p.3">Other minor corrections.  </p>
<p id="rfc.section.Appendix A.1.p.4">Incorporated comments by Apps Area reviewers.  </p>
<h1 id="rfc.appendix.Appendix A.2">
<a href="#rfc.appendix.Appendix%20A.2">Appendix A.2.</a> Changes Since RFC 5337</h1>
<p id="rfc.section.Appendix A.2.p.1">Made changes to move from Experimental to Standards Track.  The most significant was the removal of an embedded alternative ASCII address within a utf-8-address.  </p>
<p id="rfc.section.Appendix A.2.p.2">ABNF changes and errata suggested by Alfred Hoenes.  </p>
<p id="rfc.section.Appendix A.2.p.3">Minor changes to MIME type references.  </p>
<p id="rfc.section.Appendix A.2.p.4">Other minor corrections.  </p>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> Acknowledgements</h1>
<p id="rfc.section.Appendix B.p.1">Many thanks for input provided by Pete Resnick, James Galvin, Ned Freed, John Klensin, Harald Alvestrand, Frank Ellermann, SM, Alfred Hoenes, Kazunori Fujiwara, and members of the EAI WG to help solidify this proposal.  </p>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Tony Hansen</span> editor
	  <span class="n hidden">
		<span class="family-name">Hansen</span>
	  </span>
	</span>
	<span class="org vcardline">AT&T Laboratories</span>
	<span class="adr">
	  <span>200 Laurel Ave.</span>

	  <span class="vcardline">
		<span class="locality">Middletown</span>,  
		<span class="region">NJ</span> 
		<span class="code">07748</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:tony+eaidsn@maillennium.att.com">tony+eaidsn@maillennium.att.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Chris Newman</span> 
	  <span class="n hidden">
		<span class="family-name">Newman</span>
	  </span>
	</span>
	<span class="org vcardline">Sun Microsystems</span>
	<span class="adr">
	  <span>800 Royal Oaks</span>

	  <span class="vcardline">
		<span class="locality">Monrovia</span>,  
		<span class="region">CA</span> 
		<span class="code">91016-6347</span>
	  </span>
	  <span class="country-name vcardline">US</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:chris.newman@oracle.com">chris.newman@oracle.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Alexey Melnikov</span> 
	  <span class="n hidden">
		<span class="family-name">Melnikov</span>
	  </span>
	</span>
	<span class="org vcardline">Isode Ltd</span>
	<span class="adr">
	  <span>5 Castle Business Village</span>
<span>36 Station Road</span>

	  <span class="vcardline">
		<span class="locality">Hampton</span>,  
		<span class="region">Middlesex</span> 
		<span class="code">TW12 2BX</span>
	  </span>
	  <span class="country-name vcardline">UK</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:Alexey.Melnikov@isode.com">Alexey.Melnikov@isode.com</a></span>

  </address>
</div>

</body>
</html>