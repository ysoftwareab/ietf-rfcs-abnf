


Network Working Group                                       H. Sitaraman
Internet-Draft                                          Juniper Networks
Expires: September 4, 2009                                     Y. Kamite
                                          NTT Communications Corporation
                                                           March 3, 2009


                Clarification of RRO Node-Id Sub-Object
         draft-sitaraman-nodeid-subobject-clarification-00.txt

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.  This document may contain material
   from IETF Documents or IETF Contributions published or made publicly
   available before November 10, 2008.  The person(s) controlling the
   copyright in some of this material may not have granted the IETF
   Trust the right to allow modifications of such material outside the
   IETF Standards Process.  Without obtaining an adequate license from
   the person(s) controlling the copyright in such materials, this
   document may not be modified outside the IETF Standards Process, and
   derivative works of it may not be created outside the IETF Standards
   Process, except to format it for publication as an RFC or to
   translate it into languages other than English.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on September 4, 2009.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.




Sitaraman & Kamite      Expires September 4, 2009               [Page 1]

Internet-Draft   Clarification of RRO Node-Id Sub-Object      March 2009


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.














































Sitaraman & Kamite      Expires September 4, 2009               [Page 2]

Internet-Draft   Clarification of RRO Node-Id Sub-Object      March 2009


Abstract

   This document clarifies the RRO format and usage of the node-id sub-
   object as defined in [RFC4561].  The RRO stacking order and allowed
   formats when including the node-id sub-object is specified.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  4
     1.1.  Terminology  . . . . . . . . . . . . . . . . . . . . . . .  4
     1.2.  Conventions  . . . . . . . . . . . . . . . . . . . . . . .  4
   2.  PLR Requirements for finding the Merge Point address . . . . .  5
   3.  RRO Node-id Sub-object formats . . . . . . . . . . . . . . . .  6
     3.1.  RRO stacking order for Node-id Sub-object  . . . . . . . .  7
   4.  Security Considerations  . . . . . . . . . . . . . . . . . . .  8
   5.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  9
   6.  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . 10
   7.  Normative References . . . . . . . . . . . . . . . . . . . . . 11
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 12































Sitaraman & Kamite      Expires September 4, 2009               [Page 3]

Internet-Draft   Clarification of RRO Node-Id Sub-Object      March 2009


1.  Introduction

   [RFC4561] describes the use of the RRO node-id sub-object to find the
   Merge Point (MP) address for MPLS Fast Reroute [RFC4090] in multi-
   domain networks, where a domain is defined as an Interior Gateway
   Protocol (IGP) area or an Autonomous System (AS).  Finding the MP
   address using the node-id sub-object for facility backup tunnels is
   useful to protect inter-domain TE LSPs from a failure of an Area
   Border Router (ABR) or Autonomous System Border Router (ASBR).

   However, [RFC4561] does not define an RRO stacking order when
   including the node-id sub-object.  Therefore different
   interpretations of the RRO seem acceptable, some of which if allowed
   do not permit an accurate parsing of the RRO to find the MP address
   in a multi-domain environment.  [RFC3209] provides clear guidelines
   regarding the order in which sub-objects are pushed on the RRO stack.
   Such stacking guidelines when pushing a node-id sub-object are
   required.  The lack of a such a guideline can also present
   interoperability problems between different implementations.

   This draft specifies a RRO stacking order when including the node-id
   sub-object in addition to explaining some of the issues in multi-
   domain environments.

1.1.  Terminology

   The Terminology used in this document is as defined in [RFC4561].

   Additionally the following notation is used describe the contents of
   the Record Route Object:

   N = Node-id (node-id sub-object)
   I = Interface-address (IPv4 sub-object)
   L = Label
   | = Marker distinguishing information from neighboring nodes
   < > = Order of RRO information from a single node

1.2.  Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].









Sitaraman & Kamite      Expires September 4, 2009               [Page 4]

Internet-Draft   Clarification of RRO Node-Id Sub-Object      March 2009


2.  PLR Requirements for finding the Merge Point address

   This section discusses the requirements at the PLR for finding the MP
   address in an inter-domain network in order to create a facility
   backup tunnel to provide link or node protection.

   As described in [RFC4561], the bypass tunnel needs to intersect with
   the primary tunnel at the MP.  The MP address can be found by
   examining the RRO of the primary tunnel to check if any of the
   addresses is the MP address.  The node-id sub-object was introduced
   to allow the PLR to pick the MP address in inter-domain environments,
   where the interface addresses in the RRO of the facility backup and
   primary tunnel cannot be correlated by the PLR as belonging to the
   same node (MP).  This is specifically true when the PLR and MP are
   not in the same domain.  As [RFC4561] also describes, the problem of
   finding the MP address within a single IGP area be easily solved
   since the entire topology information is available.

   For example, to provide node protection using facility backup tunnels
   in the inter-area or inter-AS case to protect from the failure of an
   ABR or ASBR, the PLR, which is upstream of the failure node must be
   able to accurately decipher the MP address from the RRO.

   Hence, the PLR MUST be able to find the MP address by just parsing
   the received RRO and not requiring the existence of a Traffic
   Engineering database in order to provide link or node protection.
   [RFC4561] was also written with this goal as is implied in its
   Introduction section though this requirement is not explicitly
   stated.






















Sitaraman & Kamite      Expires September 4, 2009               [Page 5]

Internet-Draft   Clarification of RRO Node-Id Sub-Object      March 2009


3.  RRO Node-id Sub-object formats

   When adding the node-id sub-object in the RRO, section 3 of [RFC4561]
   seems to allow different RRO formats when interpreted along with the
   RRO definition and usage from [RFC3209].

   From section 3 of [RFC4561]:

   1.  Add the node-id sub-object in the RRO carried in an RSVP Resv
       message and, when required, also add another IPv4/IPv6 sub-object
       to record interface address.

       It seems like the following RRO formats are acceptable:

       <N, L>, <N, I, L>, <I, N, L>, <N, L, I>, <I, L, N>

   2.  Add an IPv4/IPv6 sub-object recording the interface address and,
       when required, add a node-id sub-object in the RRO.

       It seems like the following RRO formats are acceptable:

       <I, L, N> though the order of the sub-objects is not specified.

   The RRO does not have a defined delimiter using which a node can
   parse the RRO in the Resv message to find the set of information that
   has been added by a specific downstream node.

   As a result, the PLR might not be able to deterministically find the
   MP address from the received RRO in the Resv message.  The following
   examples illustrate how the PLR might find it difficult to
   differentiate between two RRO formats just by parsing the received
   RRO:

   <N, L> | <I, L> | <I, L>
   and
   <N, L, I, L> | <I, L>

   <I, L, N> | <I, L>
   and
   <I, L> | <N, I, L>

   <N, L, I> | <N, L>
   and
   <N, L> | <I, N, L>

   <N, I, L> | <N, L, I, L>
   and
   <N, I, L> | <N, L> | <I, L>



Sitaraman & Kamite      Expires September 4, 2009               [Page 6]

Internet-Draft   Clarification of RRO Node-Id Sub-Object      March 2009


   Using the traffic engineering database to correlate whether an
   interface and node address received in the RRO belong to the same
   node is not possible in inter-area or inter-AS environments.

3.1.  RRO stacking order for Node-id Sub-object

   The following rules need to be followed by an implementation of
   [RFC4561]:

   If the node-id sub-object is included in the RRO, then the IPv4 or
   IPv6 sub-object MUST also be included.  The IPv4 or IPv6 sub-object
   MUST be pushed onto the RRO prior to pushing on the node-id sub-
   object.  As specified in [RFC3209], if Label_Recording is requested,
   then the Label Record sub-object is pushed onto the RRO prior to
   pushing the IP address.

   All implementations MUST generate either <N, I, L> or <N, L, I, L>
   and MUST be able to receive and parse both formats in order to find
   the MP address.  No other formats can be generated by a node when the
   node-id sub-object needs to be added to the RRO.

   In the <N, L, I, L> format, both values of L MUST be identical.  The
   above rules are based on already deployed implementations of
   [RFC4561].



























Sitaraman & Kamite      Expires September 4, 2009               [Page 7]

Internet-Draft   Clarification of RRO Node-Id Sub-Object      March 2009


4.  Security Considerations

   No new security issues are introduced beyond those that are described
   in [RFC4561].















































Sitaraman & Kamite      Expires September 4, 2009               [Page 8]

Internet-Draft   Clarification of RRO Node-Id Sub-Object      March 2009


5.  IANA Considerations

   This draft does not have any request for IANA.
















































Sitaraman & Kamite      Expires September 4, 2009               [Page 9]

Internet-Draft   Clarification of RRO Node-Id Sub-Object      March 2009


6.  Acknowledgments

   The authors would like to thank Miya Kohno, Yakov Rekhter, Avneesh
   Sachdev and Yasuyuki Matsuoka for their valuable and detailed
   discussions, reviews and feedback.














































Sitaraman & Kamite      Expires September 4, 2009              [Page 10]

Internet-Draft   Clarification of RRO Node-Id Sub-Object      March 2009


7.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC3209]  Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan, V.,
              and G. Swallow, "RSVP-TE: Extensions to RSVP for LSP
              Tunnels", RFC 3209, December 2001.

   [RFC4090]  Pan, P., Swallow, G., and A. Atlas, "Fast Reroute
              Extensions to RSVP-TE for LSP Tunnels", RFC 4090,
              May 2005.

   [RFC4561]  Vasseur, J., Ali, Z., and S. Sivabalan, "Definition of a
              Record Route Object (RRO) Node-Id Sub-Object", RFC 4561,
              June 2006.



































Sitaraman & Kamite      Expires September 4, 2009              [Page 11]

Internet-Draft   Clarification of RRO Node-Id Sub-Object      March 2009


Authors' Addresses

   Harish Sitaraman
   Juniper Networks
   10 Technology Park Drive
   Westford, MA  01886
   US

   Email: hsitaraman@juniper.net


   Yuji Kamite
   NTT Communications Corporation
   Granpark Tower
   3-4-1 Shibaura, Minato-ku
   Tokyo  108-8118
   Japan

   Email: y.kamite@ntt.com
































Sitaraman & Kamite      Expires September 4, 2009              [Page 12]


