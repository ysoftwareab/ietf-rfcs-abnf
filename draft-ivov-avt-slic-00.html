<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Delivering Conference Participant Sound Level Indicators in RTP
      Streams</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Delivering Conference Participant Sound Level Indicators in RTP
      Streams">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">E. Ivov</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">SIP Communicator</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">E. Marocco</td></tr>
<tr><td class="header">Expires: December 17, 2009</td><td class="header">Telecom Italia</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">June 15, 2009</td></tr>
</table></td></tr></table>
<h1><br />Delivering Conference Participant Sound Level Indicators in RTP
      Streams<br />draft-ivov-avt-slic-00</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on December 17, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>
        This document describes a mechanism for RTP-level mixers in
        audio conferences to deliver information about the sound level
        information on the individual participants. Such sound level
        indicators are transported in the same RTP packets as the audio
        data they pertain to.
      
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Terminology<br />
<a href="#anchor3">3.</a>&nbsp;
Protocol Operation<br />
<a href="#hdr-fmt">4.</a>&nbsp;
Header Format<br />
<a href="#sig-info">5.</a>&nbsp;
Signaling Information<br />
<a href="#anchor4">6.</a>&nbsp;
Security Considerations<br />
<a href="#anchor5">7.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor6">8.</a>&nbsp;
Open Issues<br />
<a href="#anchor7">9.</a>&nbsp;
Acknowledgments<br />
<a href="#anchor8">10.</a>&nbsp;
Appendix: An alternative approach<br />
<a href="#rfc.references1">11.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">11.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">11.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
        The Framework for Conferencing with the Session Initiation
        Protocol (SIP) defined in
        <a class='info' href='#RFC4353'>RFC 4353<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Framework for Conferencing with the Session Initiation Protocol (SIP),&rdquo; February&nbsp;2006.</span><span>)</span></a> [RFC4353]
        presents an overall architecture for multi-party conferencing.
        Among others, the framework borrows from
        <a class='info' href='#RFC3550'>RTP<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> [RFC3550]
        and extends the concept of a mixer entity "responsible for
        combining the media streams that make up a conference, and
        generating one or more output streams that are delivered to
        recipients". Every participant would hence receive, in a flat
        single stream, media originating from all the others.
      
</p>
<p>
        Using such centralized mixer-based architectures simplifies
        support for conference calls on the client side since they would
        hardly differ from one-to-one conversations. However, the
        method also introduces a few limitations. The flat nature of
        the streams that a mixer would output and send to participants
        makes it difficult for users to identify the original source of
        what they are hearing.
      
</p>
<p>
        Mechanisms that allow the mixer to send to participants cues on
        current speakers  (e.g. the CSRC fields in
        <a class='info' href='#RFC3550'>RTP<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> [RFC3550]) only work for speaking/silent
        binary indications. There are, however, a number of use cases
        where one would require more detailed information. Possible
        examples include the presence of background
        chat/noise/music/typing, someone breathing noisily in their
        microphone, or other cases where identifying the source of the
        disturbance would make it easy to remove it (e.g. by sending a
        private IM to the concerned party asking them to mute their
        microphone). A more advanced scenario could involve an intense
        discussion between multiple participants that the user does not
        personally know. Sound level information would help better
        recognize the speakers by associating with them complex (but
        still human readable) characteristics like loudness and speed
        for example.
      
</p>
<p>
        One way of presenting such information in a user friendly
        manner would be for a conferencing client to attach sound level
        indicators to the corresponding participant related components
        in the user interface as displayed in
        <a class='info' href='#figure-conference-ui'>Figure&nbsp;1</a>.
      
</p><br /><hr class="insert" />
<a name="figure-conference-ui"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                      ------------------------
                     |                        |
                     |  00:42 |  Weekly Call  |
                     |                        |
                     |------------------------|
                     |                        |
                     | Alice |======    | (S) |
                     |                        |
                     | Bob   |=         |     |
                     |                        |
                     | Carol |          | (M) |
                     |                        |
                     | Dave  |===       |     |
                     |                        |
                     |________________________|

</pre></div>
<p>
          Displaying detailed speaker information to the user by
          including sound level for every participant.
        
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
        Implementing a user interface like the above requires analysis
        of the media sent from other participants. In a conventional
        audio conference this is only possible for the mixer since all
        other conference participants are generally receiving a single,
        flat audio stream and have therefore no immediate way of
        determining individual sound levels.
      
</p>
<p>
        This document specifies an RTP extension header that allows such
        mixers to deliver sound level information to conference
        participants by including it directly in the RTP packets
        transporting the corresponding audio data.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>
        The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
        NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
        "OPTIONAL" in this document are to be interpreted as described
        in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
      
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Protocol Operation</h3>

<p>
        According to <a class='info' href='#RFC3550'>RFC 3550<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> [RFC3550] a mixer
        is expected to include in outgoing RTP packets a list of
        identifiers (CSRC IDs) indicating the sources that contributed
        to the resulting stream. The presence of such CSRC IDs allows an
        RTP client to determine, in a binary way, the active speaker(s)
        in any given moment. RTCP also provides a basic mechanism to map
        the CSRC IDs to user identities through the CNAME field. More
        advanced mechanisms, may exist depending on the signaling
        protocol used to establish and control a conference. In the case
        of the <a class='info' href='#RFC3261'>Session Initiation Protocol<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261]
        for example, the <a class='info' href='#RFC4575'>Event Package for
        Conference State<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;A Session Initiation Protocol (SIP) Event Package for Conference State,&rdquo; August&nbsp;2006.</span><span>)</span></a> [RFC4575] defines a &lt;src-id&gt; tag which binds
        CSRC IDs to media streams and SIP URIs.
      
</p>
<p>
        This document describes an RTP header extension that allows
        mixers to indicate the sound-level of every conference
        participant (CSRC) in addition to simply indicating their
        on/off status. This new header extension is based on the
        <a class='info' href='#RFC5285'>"General Mechanism for RTP Header
        Extensions"<span> (</span><span class='info'>Singer, D. and H. Desineni, &ldquo;A General Mechanism for RTP Header Extensions,&rdquo; July&nbsp;2008.</span><span>)</span></a> [RFC5285].
       
</p>
<p>
        Each instance of this header contains a list of one-octet
        sound level values (see <a class='info' href='#hdr-fmt'>Section&nbsp;4<span> (</span><span class='info'>Header Format</span><span>)</span></a>). Such values
        indicate sound level on a 0 to 255 scale where 0 is silence (i.e.
        same as omitting the corresponding source id from the CSRC list)
        and 255 corresponds to a threshold accepted by the mixer
        implementation as the maximum sound level that a participant is
        likely to reach during a conference.
      
</p>
<p>
        Every sound level value pertains to the CSRC identifier
        located at the corresponding position in the CSRC list. In other
        words, the first value would indicate the sound level of the
        conference participant represented by the first CSRC identifier
        in that packet and so forth. The number and order of these
        values MUST therefore match the number and order of the CSRC
        IDs present in the same packet.
       
</p>
<p>
        When encoding sound level information, a mixer SHOULD include in
        a packet information that corresponds to the audio data being
        transported in that same packet. It is important that these
        values follow the actual stream as closely as possible.
        Therefore a mixer SHOULD also calculate the values after the
        original contributing stream has undergone possible processing
        such as level normalization, and noise reduction for example.
       
</p>
<p>
        Note that in some cases a mixer may be sending an RTP audio
        stream that only contains sound level information and no actual
        audio. Updating a (web) interface conference module may be one
        reason for this to happen.
       
</p>
<p>
        It may sometimes happen that a conference involves more than a
        single mixer. In such cases each of the mixers MAY choose to
        relay the CSRC list and sound-level information they receive
        from peer mixers (as long as the total CSRC count remains below
        16). Given that the maximum sound level is not precisely defined
        by this specification, it is likely that in such situations
        average sound levels would be perceptibly different for the
        participants located behind the different mixers.
       
</p>
<a name="hdr-fmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Header Format</h3>

<p>
        The sound level indicators are delivered to the receivers
        in-band using the <a class='info' href='#RFC5285'>"General Mechanism for
        RTP Header Extensions"<span> (</span><span class='info'>Singer, D. and H. Desineni, &ldquo;A General Mechanism for RTP Header Extensions,&rdquo; July&nbsp;2008.</span><span>)</span></a> [RFC5285].  The payload of this extension
        (the transmitted list of sound level values) is a sequence of
        8-bit unsigned integers.

        
<p>
            The form of the sound level indicators extension block is
            as follows:
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  ID   |  len  |    level 1    |    level 2    |    level 3   ...
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div>
        The 4-bit len field is the number minus one of data bytes (i.e.
        sound level values) transported in this header extension element
        following the one-byte header. Therefore, the value zero in this
        field indicates that one byte of data follows. A value of 15 is
        not allowed by this specification and it MUST NOT be used as the
        RTP header can carry a maximum of 15 CSRC IDs. The maximum value
        allowed is therefore 14 indicating a following sequence of 15
        sound level values.
      

<p>
        Note that use of the two-byte header defined in
        <a class='info' href='#RFC5285'>RFC 5285<span> (</span><span class='info'>Singer, D. and H. Desineni, &ldquo;A General Mechanism for RTP Header Extensions,&rdquo; July&nbsp;2008.</span><span>)</span></a> [RFC5285] follows the same rules
        the only change being the length of the ID and len fields.
      
</p>
<a name="sig-info"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Signaling Information</h3>

<p>
        The URI for declaring the sound level header extension in an SDP
        extmap attribute and mapping it to a local extension header
        identifier is "urn:ietf:params:rtp-hdrext:csrc-sound-level".
        There is no additional setup information needed for this
        extension (i.e. no extensionattributes).
      
</p>
<p>
        An example attribute line in the SDP, for a conference might be:
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
        a=extmap:7 urn:ietf:params:rtp-hdrext:csrc-sound-level
</pre></div>
<p>
        The above mapping will most often be provided per media stream
        (in the media-level section(s) of SDP, i.e., after an "m=" line)
        or globally if there is more than one stream containing sound
        level indicators in a session.
      
</p>
<p>
        Presence of the above attribute in the SDP description of a
        media stream indicates that some or all RTP packets in that
        stream would contain the sound level information RTP extension
        header.
      
</p>
<p>
        Conferencing clients that support sound level indicators and
        have no mixing capabilities SHOULD always include the
        direction parameter in the "extmap" attribute setting it to
        "recvonly".  Conference focus entities with mixing
        capabilities MAY omit the direction or set it to "sendrecv" in
        SDP offers. Such entities SHOULD set it to "sendonly" in SDP
        answers to offers with a "recvonly" parameter and to
        "sendrecv" when answering other "sendrecv" offers.
      
</p>
<p>
        The following <a class='info' href='#client-focus'>Figure&nbsp;2</a> and <a class='info' href='#focus-focus'>Figure&nbsp;3</a> show two example offer/answer exchanges
        between a conferencing client and a focus, and between two
        conference focus entities.
      
</p><br /><hr class="insert" />
<a name="client-focus"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  v=0
  o=alice 2890844526 2890844526 IN IP6 host.example.com
  c=IN IP6 host.example.com
  t=0 0
  m=audio 49170 RTP/AVP 0 4
  a=rtpmap:0 PCMU/8000
  a=rtpmap:4 G723/8000
  a=extmap:1/recvonly urn:ietf:params:rtp-hdrext:csrc-sound-level

  v=0
  i=A Seminar on the session description protocol
  o=conf-focus 2890844730 2890844730 IN IP6 focus.example.net
  c=IN IP6 focus.example.net
  t=0 0
  m=audio 52543 RTP/AVP 0
  a=rtpmap:0 PCMU/8000
  a=extmap:1/sendonly urn:ietf:params:rtp-hdrext:csrc-sound-level
</pre></div>
<p>
          A client-initiated example SDP offer/answer exchange
          negotiating an audio stream with one-way flow of of sound
          level information.
        
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="focus-focus"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  v=0
  i=Un seminaire sur le protocole de description des sessions
  o=fr-focus 2890844730 2890844730 IN IP6 focus.fr.example.net
  c=IN IP6 focus.fr.example.net
  t=0 0
  m=audio 49170 RTP/AVP 0
  a=rtpmap:0 PCMU/8000
  a=extmap:1/sendrecv urn:ietf:params:rtp-hdrext:csrc-sound-level

  v=0
  i=A Seminar on the session description protocol
  o=us-focus 2890844526 2890844526 IN IP6 focus.us.example.net
  c=IN IP6 focus.us.example.net
  t=0 0
  m=audio 52543 RTP/AVP 0
  a=rtpmap:0 PCMU/8000
  a=extmap:1/sendrecv urn:ietf:params:rtp-hdrext:csrc-sound-level
</pre></div>
<p>
          An example SDP offer/answer exchange between two conference
          focus entities with mixing capabilities negotiating an audio
          stream with bidirectional flwo of sound level information.
        
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>
        </p>
<ol class="text">
<li>
            This document defines a means of attributing sound level
            to a particular participant in a conference. An attacker may
            try to modify the content of RTP packets in a way that would
            make sound activity from one participant appear as coming
            from another.
          
</li>
<li>
            Furthermore, the fact that sound level values would not be
            protected even in an SRTP session may be of concern in some
            cases where the activity of a particular participant in a
            conference is confidential.
          
</li>
<li>
            Both of the above are concerns that stem from the design of
            the RTP protocol itself. It is therefore important that
            according to the needs of a particular scenario,
            implementors and deployers consider use of a lower level
            security and authentication mechanism.
          
</li>
</ol><p>
      
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>
        This document defines a new extension URI that, if approved,
        would need to be added to the RTP Compact Header Extensions
        sub-registry of the Real-Time Transport Protocol (RTP)
        Parameters registry, according to the following data:
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
        Extension URI: urn:ietf:params:rtp-hdrext:csrc-sound-level
        Description:   Sound level indicators
        Contact:       emcho@sip-communicator.org
        Reference:     RFC XXXX
</pre></div>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Open Issues</h3>

<p>
        At the time of writing of this document the authors have no
        clear view on how and if the following list of issues should
        be address here:
        </p>
<ol class="text">
<li>
            Specific sound level mappings. The current version of this
            specification treats sound level indicators as referable
            to any scale chosen by the mixer. The only limitations
            consist in making sure that the value of 0 should correspond
            to participant inactivity/silence and the value 255x to a
            level that would appear to users as loud but still
            attainable. It is however possible to map specific levels
            (e.g. measured in dBm) with the purpose of achieving
            cross-mixer uniformity of these values. An obvious tradeoff
            here is the increased complexity of implementation that
            would require mixers to convert sound level to whatever
            specific unit they use for internal estimation, which could
            be non-trivial in a number of cases.
          
</li>
<li>
            Sound levels in video streams. This specification allows
            use of sound level values in "silent" audio streams that
            don't otherwise carry any payload thus allowing their
            delivery within systems where the various focus/mixer
            components communicate with each other as conference
            participants. The same train of thought may very well
            justify sound level transport in video streams.
          
</li>
</ol><p>
      
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Acknowledgments</h3>

<p>
          Roni Even, Ingemar Johansson, and several others provided
          helpful feedback over the dispatch mailing list.
        
</p>
<p>
          SIP Communicator's participation in this specification is
          funded by the NLnet Foundation.
        
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Appendix: An alternative approach</h3>

<p>
          The <a class='info' href='#I-D.ivov-dispatch-slic-ps'>problem statement<span> (</span><span class='info'>Ivov, E. and E. Marocco, &ldquo;Dispatching Sound Level Indicators in Conferences (Problem Statement),&rdquo; May&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ivov&#8209;dispatch&#8209;slic&#8209;ps] preceding this document originally favored a slightly
          different resolution approach that the authors feel may still
          be relevant and therefore worth publishing here.
        
</p>
<p>
          A very simple way for a mixer to use the CSRC fields as a
          transport means for sound level indication would be to extend
          their meaning over a series of packets rather than a single
          one. This way it could be specified that the sound-level of
          a particular participant, represented on a zero to ten scale,
          corresponds to the number of occurrences of its CSRC
          identifier in the ten most recent RTP packets received from
          the mixer.
        
</p>
<p>
          For example, consider a conference call with four
          participants: Alice, Bob, Carol, and Dave. At a certain
          point in time Alice has a sound level of 6/10, Bob 1/10,
          Carol is silent or in other words 0/10 and Dave has a level
          of 3/10. In order to describe this state the mixer could
          have sent the last ten RTP packets with the following CSRC
          configuration:
        
</p><br /><hr class="insert" />
<a name="tab:differences"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="10%"><col align="left" width="9%"><col align="left" width="9%"><col align="left" width="9%"><col align="left" width="9%"><col align="left" width="9%"><col align="left" width="9%"><col align="left" width="9%"><col align="left" width="9%"><col align="left" width="9%"><col align="left" width="9%">
<tr><th align="left"></th><th align="left">P1</th><th align="left">P2</th><th align="left">P3</th><th align="left">P4</th><th align="left">P5</th><th align="left">P6</th><th align="left">P7</th><th align="left">P8</th><th align="left">P9</th><th align="left">P10</th></tr>
<tr>
<td align="left"> Alice </td>
<td align="left">+</td>
<td align="left">+</td>
<td align="left">+</td>
<td align="left">+</td>
<td align="left">+</td>
<td align="left">+</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left"> Bob </td>
<td align="left">&nbsp;</td>
<td align="left">+</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left"> Carol </td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left"> Dave </td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
<td align="left">+</td>
<td align="left">+</td>
<td align="left">+</td>
</tr>
</table>
<br clear="all" />

<p style='text-align: center'>
            A possible representation of a particular sound level
            configuration through the presence/absence of CSRC IDs in
            subsequent RTP packets.
          
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
          The graphical interface of a user agent involved in such a
          conference (like the one sketched in
          <a class='info' href='#figure-conference-ui'>Figure&nbsp;1</a>) would then display
          correct sound levels just showing for each participant as
          many ticks as were the occurrencies of the respective CSRC
          in the previous ten RTP packets.
        
</p>
<p>
          The algorithm for encoding sound level information this way
          is relatively simple. In order to determine whether or not
          to include a particular CSRC a mixer should:
          </p>
<ul class="text">
<li>
              include the CSRC if the sound level of the participant
              in the current packet is greater than the number of
              occurrencies of that same CSRC in the nine previous
              packets;
            
</li>
<li>
              omit the CSRC if the sound level of the participant in
              the current packet is lower than or equal to the number
              of occurrencies of that same CSRC in the nine previous
              packets.
            
</li>
</ul><p>
        
</p>
<p>
          There are several advantages to using this approach, the
          most obvious being its simplicity as well as the fact that
          sound level information is transported together with the
          parts of the audio stream that it actually concerns which
          should make synchronization straightforward.
        
</p>
<p>
          The technique would also work with other signaling protocols
          using RTP such as <a class='info' href='#RFC3920'>XMPP's<span> (</span><span class='info'>Saint-Andre, P., Ed., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Core,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3920] Jingle
          extensions for example.
        
</p>
<p>
          One of the first disadvantages that come to mind with this
          approach is the fact that mixer would not be able to indicate
          level in a single packet but would have to distribute it over
          a succession of up to ten packets which would reduce the
          reactivity of the representation.
        
</p>
<p>
          It is probably worth mentioning, however, that a granularity
          that allows switching from a level of zero to ten and back to
          zero again in an instant manner is not of much use anyway
          since such UI updates would be barely perceptible to the user.
          Still, this is a UI decision and making it on a protocol level
          may bring some inconveniences.
        
</p>
<p>
          Another possible problem would come from implementations using
          CSRC presence in a binary way to determine current speaker.
          When running against a mixer that supports sound level
          indication such implementations may appear to be jumpy as
          the participants that they are designating as active may be
          changing status too rapidly.
        
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3550">[RFC3550]</a></td>
<td class="author-text">Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>,&rdquo; STD&nbsp;64, RFC&nbsp;3550, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3550.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc3550.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc3550.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5285">[RFC5285]</a></td>
<td class="author-text">Singer, D. and H. Desineni, &ldquo;<a href="http://tools.ietf.org/html/rfc5285">A General Mechanism for RTP Header Extensions</a>,&rdquo; RFC&nbsp;5285, July&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5285.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mmusic-ice">[I-D.ietf-mmusic-ice]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mmusic-ice-19.txt">Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols</a>,&rdquo; draft-ietf-mmusic-ice-19 (work in progress), October&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mmusic-ice-19.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ivov-dispatch-slic-ps">[I-D.ivov-dispatch-slic-ps]</a></td>
<td class="author-text">Ivov, E. and E. Marocco, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ivov-dispatch-slic-ps-00.txt">Dispatching Sound Level Indicators in Conferences (Problem Statement)</a>,&rdquo; draft-ivov-dispatch-slic-ps-00 (work in progress), May&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ivov-dispatch-slic-ps-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3551">[RFC3551]</a></td>
<td class="author-text">Schulzrinne, H. and S. Casner, &ldquo;<a href="http://tools.ietf.org/html/rfc3551">RTP Profile for Audio and Video Conferences with Minimal Control</a>,&rdquo; STD&nbsp;65, RFC&nbsp;3551, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3551.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc3551.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc3551.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3920">[RFC3920]</a></td>
<td class="author-text"><a href="mailto:stpeter@jabber.org">Saint-Andre, P., Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3920">Extensible Messaging and Presence Protocol (XMPP): Core</a>,&rdquo; RFC&nbsp;3920, October&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3920.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3920.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3920.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4353">[RFC4353]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc4353">A Framework for Conferencing with the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;4353, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4353.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4575">[RFC4575]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;<a href="http://tools.ietf.org/html/rfc4575">A Session Initiation Protocol (SIP) Event Package for Conference State</a>,&rdquo; RFC&nbsp;4575, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4575.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Emil Ivov</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">SIP Communicator</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Strasbourg  67000</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:emcho@sip-communicator.org">emcho@sip-communicator.org</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Enrico Marocco</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Telecom Italia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Via G. Reiss Romoli, 274</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Turin  10148</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Italy</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:enrico.marocco@telecomitalia.it">enrico.marocco@telecomitalia.it</a></td></tr>
</table>
</body></html>
