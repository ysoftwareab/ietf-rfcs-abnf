

                                                   Juergen Schoenwaelder
Internet-Draft                                           TU Braunschweig
Expires May 1999                                        18 November 1998


            DateAndTime Extension for the MIB-2 system Group

                 <draft-schoenw-snmpv2-mib-ext-00.txt>

Status of this Memo

   This document is an Internet-Draft. Internet-Drafts are working
   documents of the Internet Engineering Task Force (IETF), its areas,
   and its working groups.  Note that other groups may also distribute
   working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as ``work in progress.''

   To view the entire list of current Internet-Drafts, please check the
   "1id-abstracts.txt" listing contained in the Internet-Drafts Shadow
   Directories on ftp.is.co.za (Africa), ftp.nordu.net (Northern
   Europe), ftp.nis.garr.it (Southern Europe), munnari.oz.au (Pacific
   Rim), ftp.ietf.org (US East Coast), or ftp.isi.edu (US West Coast).

   Distribution of this document is unlimited. Please send comments to
   the SNMP Version 3 Working Group, <snmpv3@tis.com>.

Abstract

   This memo defines an extension of the Management Information Base
   (MIB) for Version 2 of the Simple Network Management Protocol
   (SNMPv2) as published in RFC 1907. In particular, it defines an
   object which allows to read and modify the notion of wall clock time
   accessible by an SNMP agent. The addition of this object allows to
   use the DateAndTime textual convention as defined in RFC 1903 even on
   devices that do not have a real-time clock.












J. Schoenwaelder                                                [Page 1]

Internet-Draft           System MIB Extensions             November 1998


   Table of Contents

   1 Introduction .................................................    2
   2 Problem ......................................................    2
   3 Solution .....................................................    3
   4 Definitions ..................................................    4
   5 Acknowledgments ..............................................    4
   6 Authors' Address .............................................    5


1.  Introduction

   This memo defines an extension of the Management Information Base
   (MIB) for Version 2 of the Simple Network Management Protocol
   (SNMPv2) as published in RFC 1907. In particular, it defines an
   object which allows to read and modify the notion of wall clock time
   accessible by an SNMP agent. The addition of this object allows to
   use the DateAndTime textual convention as defined in RFC 1903 even on
   devices that do not have a real-time clock.



2.  Problem

   Many MIBs require to time-stamp events. This is usually accomplished
   by using either the TimeStamp or the DateAndTime textual convention
   defined in RFC 1903. Both approaches have strength and weaknesses:

   TimeStamp:

     +  One advantage of a TimeStamp is that sysUpTime is always locally
        available, even on devices that have no notion of wall clock
        time.

     +  Further, sysUpTime is supported by the AgentX sub-agent protocol
        defined in RFC 2257 since it is exchanged in master/sub-agent
        message exchanges.

     -  A TimeStamp time-stamp is based on sysUpTime and becomes
        ambiguous after some time.

     -  A TimeStamp has itself no meaning - a manager must also retrieve
        the current value of sysUpTime and do calculations against its
        local notion of date and time in order to calculate when an
        event happened.






J. Schoenwaelder                                                [Page 2]

Internet-Draft           System MIB Extensions             November 1998


     -  A TimeStamp can not be used to time-stamp events that have
        occurred prior to the initialization of the network management
        of the system was last re-initialized.

     -  TimeStamps reported by sub-agents can be ambiguous if the master
        agent has been restarted. Resetting or recalculating time stamps
        on such an event can be expensive.

   DateAndTime:

     +  DateAndTime time-stamps report the time an event occurred in the
        local notion of date and time. A DateAndTime time-stamp is
        therefore self-contained.

     +  DateAndTime time-stamps are globally unambiguous if they contain
        the offset from UTC. DateAndTime time-stamps are still locally
        unambiguous if they miss the offset from UTC.

     +  DateAndTime time-stamps can describe events that have occurred
        prior to the initialization of the network management subsystem.

     +  DateAndTime time-stamps do not require any special attention in
        a sub-agent environment when the master agent restarts.

     -  A DateAndTime time-stamp is slightly longer than a TimeStamp
        time-stamp.

     -  DateAndTime time-stamps requires that the agent has a notion of
        wall clock time. This is generally not supported on devices
        without a battery powered clock or devices that do not support
        time protocols such as NTP. A MIB which records a time-stamp as
        a DateAndTime value can thus not me implemented on such a
        device.

     -  The AgentX sub-agent protocol does not allow to share the notion
        of DateAndTime between sub-agents. The notion of DateAndTime
        must therefore be exchanged with other local mechanisms. (This
        is typically a service of the underlying operating system).


3.  Solution

   The sysDateAndTime object defined below solves the main problem with
   DateAndTime time-stamps by providing a mechanism which allows to
   configure the date and time with an SNMP set operations. This enables
   devices without a battery powered clock and without time protocols to
   have a notion of wall clock time.





J. Schoenwaelder                                                [Page 3]

Internet-Draft           System MIB Extensions             November 1998


   In addition, the sysDateAndTime object allows a manager to read the
   remote notion of the current date and time in order to detect clock
   screw or mis-configurations. This can be of great help when
   interpreting DateAndTime time-stamp values from devices that have
   mis-configured clocks.

   Objects that record a time-stamp can now be written similar to the
   following example:

      smRunStartTime OBJECT-TYPE
          SYNTAX      DateAndTime
          MAX-ACCESS  read-only
          STATUS      current
          DESCRIPTION
              "The date and time when the execution started. The value
               '0000000000000000'H is returned if the script has not
               started yet or if the current date and time is not (yet)
               known by the agent."
          DEFVAL { '0000000000000000'H }
          ::= { smRunEntry 3 }


4.  Definitions

   SNMPv2-MIB-EXT-01 DEFINITIONS ::= BEGIN

   IMPORTS
       MODULE-IDENTITY, OBJECT-TYPE,
           FROM SNMPv2-SMI
       system
           FROM SNMPv2-MIB;

   -- This module is not valid SMIv2. The author left out all the
   -- administrative stuff in order to keep it small.

   sysDateAndTime OBJECT-TYPE
       SYNTAX      DateAndTime
       MAX-ACCESS  read-write
       STATUS      current
       DESCRIPTION
           "The locally known date and time. The value '0000000000000000'H
            is returned on systems without a local clock until the local
            date and time is learned, either from a network time protocol
            such as NTP or a management set operations on this object."
       ::= { system 9 }

   END





J. Schoenwaelder                                                [Page 4]

Internet-Draft           System MIB Extensions             November 1998


5.  Acknowledgments

   The definition of the sysDateAndTime object was inspired by a remark
   Eamonn McManus <emcmanus@gr.opengroup.org> about implementing
   DateAndTime objects of the Script MIB in an embedded system without a
   hardware clock.

   The comparison of the advantages and disadvantages of the frequently
   used TimeStamp mechanisms was inspired by discussions about the
   TimeStamp textual convention in the SMI design team and on the SNMPv3
   mailing list.



6.  Authors' Address

     Juergen Schoenwaelder             Email: schoenw@ibr.cs.tu-bs.de
     TU Braunschweig                     Tel: +49 531 391-3283
     Bueltenweg 74/75
     38106 Braunschweig
     Germany






























J. Schoenwaelder                                                [Page 5]

