<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Self-configuring Stub Networks: Problem Statement</title>
<meta content="Ted Lemon" name="author">
<meta content="
       

 IETF currently provides protocols for automatically connecting single hosts to existing network infrastructure. This
 document describes a related problem: the problem of connecting a stub network (a collection of hosts behind a router)
 automatically to existing network infrastructure in the same manner.

       
    " name="description">
<meta content="xml2rfc 3.5.0" name="generator">
<meta content="draft-lemon-stub-networks-01" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.5.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.3
    google-i18n-address 2.4.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.2
    pycountry 20.7.3
    pyflakes 2.2.0
    PyYAML 5.4.1
    requests 2.25.1
    setuptools 53.0.0
    six 1.15.0
-->
<link href="/tmp/draft-lemon-stub-networks-ps-dve8quel.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Stub Networks Problem Statement</td>
<td class="right">February 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Lemon</td>
<td class="center">Expires 26 August 2021</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Internet Engineering Task Force</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-02-22" class="published">22 February 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Best Current Practice</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2021-08-26">26 August 2021</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">T. Lemon</div>
<div class="org">Apple, Inc.</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Self-configuring Stub Networks: Problem Statement</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">

 IETF currently provides protocols for automatically connecting single hosts to existing network infrastructure. This
 document describes a related problem: the problem of connecting a stub network (a collection of hosts behind a router)
 automatically to existing network infrastructure in the same manner.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo-3">
<a href="#name-status-of-this-memo-3" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 26 August 2021.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice-3">
<a href="#name-copyright-notice-3" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents-3">
<a href="#name-table-of-contents-3" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction-3" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-interoperability-goals" class="xref">Interoperability Goals</a><a href="#section-toc.1-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-usability-goals" class="xref">Usability Goals</a><a href="#section-toc.1-1.1.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1" class="keepWithNext"><a href="#section-1.3" class="xref">1.3</a>.  <a href="#name-state-of-the-art" class="xref">State of the Art</a><a href="#section-toc.1-1.1.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-possible-approaches" class="xref">Possible Approaches</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-proxy-nd" class="xref">Proxy ND</a><a href="#section-toc.1-1.2.2.1.1" class="pilcrow">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.2.2.1.2.1">
                    <p id="section-toc.1-1.2.2.1.2.1.1"><a href="#section-2.1.1" class="xref">2.1.1</a>.  <a href="#name-reachability" class="xref">Reachability</a><a href="#section-toc.1-1.2.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.1.2.2">
                    <p id="section-toc.1-1.2.2.1.2.2.1"><a href="#section-2.1.2" class="xref">2.1.2</a>.  <a href="#name-addressability" class="xref">Addressability</a><a href="#section-toc.1-1.2.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.1.2.3">
                    <p id="section-toc.1-1.2.2.1.2.3.1"><a href="#section-2.1.3" class="xref">2.1.3</a>.  <a href="#name-discoverability" class="xref">Discoverability</a><a href="#section-toc.1-1.2.2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.1.2.4">
                    <p id="section-toc.1-1.2.2.1.2.4.1"><a href="#section-2.1.4" class="xref">2.1.4</a>.  <a href="#name-requirements" class="xref">Requirements</a><a href="#section-toc.1-1.2.2.1.2.4.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.1.2.5">
                    <p id="section-toc.1-1.2.2.1.2.5.1"><a href="#section-2.1.5" class="xref">2.1.5</a>.  <a href="#name-observations" class="xref">Observations</a><a href="#section-toc.1-1.2.2.1.2.5.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-stub-reachability-using-ra" class="xref">Stub reachability using RA</a><a href="#section-toc.1-1.2.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.2.2.2.2.1">
                    <p id="section-toc.1-1.2.2.2.2.1.1"><a href="#section-2.2.1" class="xref">2.2.1</a>.  <a href="#name-reachability-2" class="xref">Reachability</a><a href="#section-toc.1-1.2.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.2.2.2">
                    <p id="section-toc.1-1.2.2.2.2.2.1"><a href="#section-2.2.2" class="xref">2.2.2</a>.  <a href="#name-addressability-2" class="xref">Addressability</a><a href="#section-toc.1-1.2.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.2.2.3">
                    <p id="section-toc.1-1.2.2.2.2.3.1"><a href="#section-2.2.3" class="xref">2.2.3</a>.  <a href="#name-discoverability-2" class="xref">Discoverability</a><a href="#section-toc.1-1.2.2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.2.2.4">
                    <p id="section-toc.1-1.2.2.2.2.4.1"><a href="#section-2.2.4" class="xref">2.2.4</a>.  <a href="#name-requirements-2" class="xref">Requirements</a><a href="#section-toc.1-1.2.2.2.2.4.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.2.2.5">
                    <p id="section-toc.1-1.2.2.2.2.5.1"><a href="#section-2.2.5" class="xref">2.2.5</a>.  <a href="#name-observations-2" class="xref">Observations</a><a href="#section-toc.1-1.2.2.2.2.5.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-global-reachability" class="xref">Global reachability</a><a href="#section-toc.1-1.2.2.3.1" class="pilcrow">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.2.2.3.2.1">
                    <p id="section-toc.1-1.2.2.3.2.1.1"><a href="#section-2.3.1" class="xref">2.3.1</a>.  <a href="#name-reachability-3" class="xref">Reachability</a><a href="#section-toc.1-1.2.2.3.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.3.2.2">
                    <p id="section-toc.1-1.2.2.3.2.2.1"><a href="#section-2.3.2" class="xref">2.3.2</a>.  <a href="#name-addressability-3" class="xref">Addressability</a><a href="#section-toc.1-1.2.2.3.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.3.2.3">
                    <p id="section-toc.1-1.2.2.3.2.3.1"><a href="#section-2.3.3" class="xref">2.3.3</a>.  <a href="#name-discoverability-3" class="xref">Discoverability</a><a href="#section-toc.1-1.2.2.3.2.3.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.3.2.4">
                    <p id="section-toc.1-1.2.2.3.2.4.1"><a href="#section-2.3.4" class="xref">2.3.4</a>.  <a href="#name-requirements-3" class="xref">Requirements</a><a href="#section-toc.1-1.2.2.3.2.4.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.3.2.5">
                    <p id="section-toc.1-1.2.2.3.2.5.1"><a href="#section-2.3.5" class="xref">2.3.5</a>.  <a href="#name-observations-3" class="xref">Observations</a><a href="#section-toc.1-1.2.2.3.2.5.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="xref">2.4</a>.  <a href="#name-support-for-ipv4" class="xref">Support for IPv4</a><a href="#section-toc.1-1.2.2.4.1" class="pilcrow">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.2.2.4.2.1">
                    <p id="section-toc.1-1.2.2.4.2.1.1"><a href="#section-2.4.1" class="xref">2.4.1</a>.  <a href="#name-reachability-4" class="xref">Reachability</a><a href="#section-toc.1-1.2.2.4.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.4.2.2">
                    <p id="section-toc.1-1.2.2.4.2.2.1"><a href="#section-2.4.2" class="xref">2.4.2</a>.  <a href="#name-addressability-4" class="xref">Addressability</a><a href="#section-toc.1-1.2.2.4.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.4.2.3">
                    <p id="section-toc.1-1.2.2.4.2.3.1"><a href="#section-2.4.3" class="xref">2.4.3</a>.  <a href="#name-discoverability-4" class="xref">Discoverability</a><a href="#section-toc.1-1.2.2.4.2.3.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.4.2.4">
                    <p id="section-toc.1-1.2.2.4.2.4.1"><a href="#section-2.4.4" class="xref">2.4.4</a>.  <a href="#name-requirements-4" class="xref">Requirements</a><a href="#section-toc.1-1.2.2.4.2.4.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.4.2.5">
                    <p id="section-toc.1-1.2.2.4.2.5.1"><a href="#section-2.4.5" class="xref">2.4.5</a>.  <a href="#name-observations-4" class="xref">Observations</a><a href="#section-toc.1-1.2.2.4.2.5.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-discoverability-options" class="xref">Discoverability Options</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-multiple-egress-multiple-li" class="xref">Multiple Egress, Multiple Link</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-management-considerations" class="xref">Management Considerations</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-privacy-considerations-2" class="xref">Privacy Considerations</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-security-considerations-3" class="xref">Security Considerations</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations-3" class="xref">IANA considerations</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-informative-references-3" class="xref">Informative References</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-appendix.a" class="xref"></a><a href="#name-authors-address" class="xref">Author's Address</a><a href="#section-toc.1-1.10.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction-3">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction-3" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">

 This document describes the problem of linking stub networks to existing networks automatically, in the same way that hosts,
 when connected to an existing network, are able to discover network addressing parameters, information about routing, and
 services that are advertised on the network.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">
 There are several use cases for stub networks. Motivating factors include:<a href="#section-1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-3.1">

     Transitory connectivity: a mobile device acting as a router for a set of co-located devices could connect to a network
     and gain access to services for itself and for the co-located devices.  Such a stub network is unlikely to have more
     than one stub router.<a href="#section-1-3.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-3.2">

     Incompatible media: for example, a constrained 802.15.4 network connected as a stub network to a WiFi or ethernet
     infrastructure network.  In the case of an 802.15.4 network, it is quite possible that the devices used to link the
     infrastructure network to the stub network will not be conceived of by the end user as routers.  Consequently, we cannot
     assume that these devices will be on all the time. A solution for this use case will require some sort of commissioning
     process for stub routers, and can't assume that any particular stub router will always be available; rather, any stub
     router that is available must be able to adapt to current conditions to provide reachability.<a href="#section-1-3.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-3.3">

     Convenience: end users often connect devices to each other in order to extend networks<a href="#section-1-3.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-1-4">

 What makes stub networks a distinct type of network is simply that a stub network never provides transit between networks to
 which it is connected. The term "stub" refers to the way the network is seen by the link to which it is connected: there is
 reachability through a stub network router to the stub network from that link, but there is no reachability to any link
 beyond that one.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">

 Stub networks may be globally reachable, or may be only locally reachable. A host on a globally reachable stub network can
 interoperate with other hosts anywhere on the Internet. A host on a locally reachable stub network can only interoperate
 with hosts on the network link(s) to which it is connected.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">

 The goal of this document is to describe the minimal set of changes or behaviors required to use existing IETF
 specifications to support the stub network use case. The result should be a small set of protocol enhancements
 (ideally no changes at all to protocols) and should be deployable on existing networks without requiring changes
 to those networks.  Both the locally-reachable and globally-reachable use case should be able to be made to work,
 and ideally the globally-reachable use case should build on what is used to make the locally-reachable use case
 work, rather than requiring two separate solutions.<a href="#section-1-6" class="pilcrow">¶</a></p>
<div id="interop-goals">
<section id="section-1.1">
        <h3 id="name-interoperability-goals">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-interoperability-goals" class="section-name selfRef">Interoperability Goals</a>
        </h3>
<p id="section-1.1-1">
   What we mean by "interoperate" is that a host on a stub network:<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-2.1">is discoverable by applicable hosts that are not on the stub network<a href="#section-1.1-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-2.2">is able to acquire an IP address that can be used to communicate with applicable hosts not on the stub network<a href="#section-1.1-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-2.3">has reachability to the network(s) to which applicable hosts are attached<a href="#section-1.1-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-2.4">is reachable from the network(s) to which applicable hosts are attached<a href="#section-1.1-2.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.1-3">

   Discoverability here means "discoverable using DNS, or DNS Service Discovery".  As an example, when one host connected to
   a specific WiFi network wishes to discover services on hosts connected to that same WiFi network, it can do so using
   multicast DNS (RFC6762), which is an example of DNS Service Discovery.  Similarly, when a host on some other network
   wishes to discover the same service, it must use DNS-based DNS Service Discovery <span>[<a href="#RFC6763" class="xref">RFC6763</a>]</span>.  In both cases,
   "discoverable using DNS" means that the host has an entry in the DNS.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<p id="section-1.1-4">

   NOTE: it may be tempting to ask, why do we lump discoverability in with reachability and addressability, both of
   which are essentially Layer 3 issues? The answer is that it does us no good to automatically set up connectivity
   between stub network hosts and infrastructure hosts if the infrastructure hosts have no mechanism for learning
   about the availability of services provided by stub network hosts. For stub networks that only consume cloud services
   this will not be an issue, but for stub networks that provide services, e.g. the incompatible media use case
   mentioned earlier, discoverability is necessary in order for stub network connectivity to be useful.<a href="#section-1.1-4" class="pilcrow">¶</a></p>
<p id="section-1.1-5">

   Ability to acquire an IP address that can be used to communicate means that the IP address a host on the stub network
   acquires can be used to communicate with it by hosts on neighbor networks, for locally reachable stub networks, or by
   hosts on any network, for globally reachable networks. Various means of providing such addresses are discussed later.<a href="#section-1.1-5" class="pilcrow">¶</a></p>
<p id="section-1.1-6">

   Reachability to networks on which applicable hosts are attached means that when a host on the stub network has the IP
   address of an applicable host with which it intends to communicate, that host knows of a next-hop router to which it can
   send datagrams, so that they will ultimately reach the host with that IP address.<a href="#section-1.1-6" class="pilcrow">¶</a></p>
<p id="section-1.1-7">

   Reachability from networks on which applicable hosts are attached means that when such a host has a datagram destined for
   an IP address on the stub network, a next-hop router is known by that host which, when the datagram is sent to that
   router, will ultimately result in the datagram reaching the intended stub network host.<a href="#section-1.1-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="usability-goals">
<section id="section-1.2">
        <h3 id="name-usability-goals">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-usability-goals" class="section-name selfRef">Usability Goals</a>
        </h3>
<p id="section-1.2-1">

   In addition to the interoperability goals we've described above, the additional goal for stub networks is that they be
   able to be connected automatically, with no user intervention.  The experience of connecting a stub network to an
   infrastructure should be as straightforward as connecting a new host to the same infrastructure network.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-1.3">
        <h3 id="name-state-of-the-art">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-state-of-the-art" class="section-name selfRef">State of the Art</a>
        </h3>
<p id="section-1.3-1">

   Currently there is one known way to accomplish what we are describing here [[Michael, does ANIMA have a second way?]]. The
   Homenet working group produced a protocol, HomeNet Configuration Protocol (HNCP), the purpose of which is to allow a
   collection of routers to self-configure. HNCP is not technically constrained to home environments; in principle, it can
   work in any environment.<a href="#section-1.3-1" class="pilcrow">¶</a></p>
<p id="section-1.3-2">

   The problem with HNCP is twofold.  First, it only works if it is deployed on all routers within the network infrastructure
   for a site. Secondly, it attempts to do too much, and invents too much that is new.  Let's look at these in order.<a href="#section-1.3-2" class="pilcrow">¶</a></p>
<p id="section-1.3-3">

   First, HNCP only works when deployed on all routers within the network infrastructure. To be clear, this does not mean
   that it is impossible to use HNCP on a network where, for instance, the edge router(s) do not support HNCP. What it does
   mean is that if this configuration works, the reason it works is that the network supports prefix delegation to routers
   inside the network. So a router doing HNCP can get a prefix using prefix delegation from, for example, an edge router, and
   this will work.<a href="#section-1.3-3" class="pilcrow">¶</a></p>
<p id="section-1.3-4">

   Unfortunately, the way that such an HNCP server should behave is not documented, and it's not actually clear how it should
   behave. What if the DHCP server allocates it a /64?  HNCP is designed to get a larger prefix and subdivide it-there
   is no provision for requesting multiple delegations. So if we wanted to use HNCP to solve this problem, we would need to
   do additional work.<a href="#section-1.3-4" class="pilcrow">¶</a></p>
<p id="section-1.3-5">

   Secondly, HNCP tries to do too much, and invents too much that is new. HNCP is a complicated protocol for propagating
   network configuration information in a mesh. It does not assume that any network is a stub network, and because of that,
   using it to support stub networks is needlessly complicated.<a href="#section-1.3-5" class="pilcrow">¶</a></p>
<p id="section-1.3-6">

   Despite having been an IETF proposed standard since 2016, and having been worked on for quite some time before that, it is
   not possible to purchase a router that implements HNCP.  There exists a prototype implementation in OpenWRT, but getting
   it to actually work is problematic, and many problems have been left unsolved, and would be quite difficult to solve with
   additional standards work.<a href="#section-1.3-6" class="pilcrow">¶</a></p>
<p id="section-1.3-7">

   We know this because several participants in the Homenet Working Group have tried to implement make it work, and yet as
   yet we have made no documentable progress, and indeed the Homenet Working Group appears to be on the verge of closing.<a href="#section-1.3-7" class="pilcrow">¶</a></p>
<p id="section-1.3-8">

   Because of the first point-the utter lack of commercial implementations of HNCP-any stub network solution that
   is intended to be deployed to arbitrary networks can't rely on the availability of HNCP. This may come in the future, but
   is not available now, and may never be.  Therefore, whatever approach is taken MAY use HNCP if available, but MUST work
   without HNCP. Therefore, using HNCP represents additional implementation complexity; whether this is worth doing is
   something that should be considered, but because using HNCP is necessarily optional, it probably makes the most sense to
   assume that any functionality provided by HNCP will be external to the stub network router, and that the stub network
   router itself need not participate in the HNCP mesh.<a href="#section-1.3-8" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2">
      <h2 id="name-possible-approaches">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-possible-approaches" class="section-name selfRef">Possible Approaches</a>
      </h2>
<section id="section-2.1">
        <h3 id="name-proxy-nd">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-proxy-nd" class="section-name selfRef">Proxy ND</a>
        </h3>
<section id="section-2.1.1">
          <h4 id="name-reachability">
<a href="#section-2.1.1" class="section-number selfRef">2.1.1. </a><a href="#name-reachability" class="section-name selfRef">Reachability</a>
          </h4>
<p id="section-2.1.1-1">

     Proxy Neighbor Discovery provides reachability to hosts on the stub network by simply pretending that they are on the
     infrastructure network. This reachability can be local or global depending on what IPv6 service (if any) is available on
     the infrastructure link.  The use of Proxy ND for providing connectivity to stub networks is described in
     <span>[<a href="#I-D.ietf-6lo-backbone-router" class="xref">I-D.ietf-6lo-backbone-router</a>]</span>.<a href="#section-2.1.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.2">
          <h4 id="name-addressability">
<a href="#section-2.1.2" class="section-number selfRef">2.1.2. </a><a href="#name-addressability" class="section-name selfRef">Addressability</a>
          </h4>
<p id="section-2.1.2-1">

     If IPv6 service is available on the infrastructure link, this service can be used to provide addressability on
     the stub network, and also provides addressability on the infrastructure link.<a href="#section-2.1.2-1" class="pilcrow">¶</a></p>
<p id="section-2.1.2-2">

     If IPv6 service is not available on the infrastructure link, addressability for proxy ND can be provided by
     advertising an on-link autoconfigurable prefix in a Router Advertisement offered by the stub router.<a href="#section-2.1.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.3">
          <h4 id="name-discoverability">
<a href="#section-2.1.3" class="section-number selfRef">2.1.3. </a><a href="#name-discoverability" class="section-name selfRef">Discoverability</a>
          </h4>
<p id="section-2.1.3-1">

     Discoverability for stub network hosts can be provided using DNS-SD service registration protocol on the stub
     network, in combination with an Advertising Proxy on the stub router which would advertise registered services
     to the infrastructure link.<a href="#section-2.1.3-1" class="pilcrow">¶</a></p>
<p id="section-2.1.3-2">

     Discoverability of infrastructure link hosts by stub network hosts can be provided using a DNS-SD discovery proxy and/or
     regular DNS. As long as the stub network requires that each stub router provide a DNS-SD Discovery Proxy and
     also provide name resolution, this will work even in the multiple stub router case.<a href="#section-2.1.3-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.4">
          <h4 id="name-requirements">
<a href="#section-2.1.4" class="section-number selfRef">2.1.4. </a><a href="#name-requirements" class="section-name selfRef">Requirements</a>
          </h4>
<ul class="normal">
<li class="normal" id="section-2.1.4-1.1">

 The infrastructure must either provide IPv6 service, or not block the provision of IPv6 service by the stub router.<a href="#section-2.1.4-1.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.1.4-1.2">

 Hosts on the infrastructure link must support IPv6 and must support IPv6 neighbor discovery.<a href="#section-2.1.4-1.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.1.4-1.3">

 Every stub host must register with at least one stub router that will do proxy ND for it.<a href="#section-2.1.4-1.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.1.4-1.4">

 Routers must share proxy ND information, or else each router is a single point of failure for the set of hosts that
 have registered with it.<a href="#section-2.1.4-1.4" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.1.4-1.5">

 Sharing proxy ND information requires new protocol work<a href="#section-2.1.4-1.5" class="pilcrow">¶</a>
</li>
          </ul>
</section>
<section id="section-2.1.5">
          <h4 id="name-observations">
<a href="#section-2.1.5" class="section-number selfRef">2.1.5. </a><a href="#name-observations" class="section-name selfRef">Observations</a>
          </h4>
<p id="section-2.1.5-1">

     Can definitely work in specific circumstances, but probably doesn't lend itself to full automation.<a href="#section-2.1.5-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2.2">
        <h3 id="name-stub-reachability-using-ra">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-stub-reachability-using-ra" class="section-name selfRef">Stub reachability using RA</a>
        </h3>
<section id="section-2.2.1">
          <h4 id="name-reachability-2">
<a href="#section-2.2.1" class="section-number selfRef">2.2.1. </a><a href="#name-reachability-2" class="section-name selfRef">Reachability</a>
          </h4>
<p id="section-2.2.1-1">

     Reachability to the stub network is provided using the Route Information Option <span>[<a href="#RFC4191" class="xref">RFC4191</a>]</span> in a router
     advertisement <span>[<a href="#RFC4861" class="xref">RFC4861</a>]</span> issued by the stub router. Since the stub router does not provide IPv6
     connectivity, it must not advertise itself as a default router.  Each stub router can provide a default route to the
     stub network.<a href="#section-2.2.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2">
          <h4 id="name-addressability-2">
<a href="#section-2.2.2" class="section-number selfRef">2.2.2. </a><a href="#name-addressability-2" class="section-name selfRef">Addressability</a>
          </h4>
<p id="section-2.2.2-1">

     Addressability on the stub network is provided using a ULA prefix generated by the stub router. Addressibility on the
     infrastructure link is either provided by the infrastructure, or else must be provided by the stub router.<a href="#section-2.2.2-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.3">
          <h4 id="name-discoverability-2">
<a href="#section-2.2.3" class="section-number selfRef">2.2.3. </a><a href="#name-discoverability-2" class="section-name selfRef">Discoverability</a>
          </h4>
<p id="section-2.2.3-1">

     Discoverability for this approach is the same as for the Proxy ND approach.<a href="#section-2.2.3-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.4">
          <h4 id="name-requirements-2">
<a href="#section-2.2.4" class="section-number selfRef">2.2.4. </a><a href="#name-requirements-2" class="section-name selfRef">Requirements</a>
          </h4>
<ul class="normal">
<li class="normal" id="section-2.2.4-1.1">

 Infrastructure network must not block router advertisements.<a href="#section-2.2.4-1.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.2.4-1.2">

 Hosts on the infrastructure network must support IPv6, must support the use of non-default routes as described in
 <span>[<a href="#RFC4191" class="xref">RFC4191</a>]</span>, and must support routing through non-default routers (routers with a router lifetime of
 0).<a href="#section-2.2.4-1.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.2.4-1.3">

 Stub routers must cooperate with other stub routers in announcing an on-link prefix to the stub network.<a href="#section-2.2.4-1.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.2.4-1.4">

 Stub routers must cooperate with infrastructure routers in announcing an on-link prefix for the infrastructure
 network. Stub routers must not advertise an on-link prefix when an on-link prefix is already present.<a href="#section-2.2.4-1.4" class="pilcrow">¶</a>
</li>
          </ul>
</section>
<section id="section-2.2.5">
          <h4 id="name-observations-2">
<a href="#section-2.2.5" class="section-number selfRef">2.2.5. </a><a href="#name-observations-2" class="section-name selfRef">Observations</a>
          </h4>
<p id="section-2.2.5-1">
     This option has the advantage of relying primarily on ordinary IPv6 routing, as opposed to workarounds like
     proxy neighbor discovery or NAT64.  The cooperation that is required between stub routers is minimal: they
     need simply minimize the advertising of redundant information. When redundant information is advertised,
     this is an aesthetic issue rather than an operational issue, and can be allowed to heal gradually.<a href="#section-2.2.5-1" class="pilcrow">¶</a></p>
<p id="section-2.2.5-2">

     Additionally, this option does not require any new behavior on the part of existing hosts or routers. It does assume
     that infrastructure hosts actually implement <span>[<a href="#RFC4191" class="xref">RFC4191</a>]</span>, but it is not unreasonable to expect that this
     either is already the case, or can easily be accomplished. It also assumes that the infrastructure does not
     enforce <span><a href="#RFC6105" class="xref">RA Guard</a> [<a href="#RFC6105" class="xref">RFC6105</a>]</span>. This is compatible with the recommendations in RFC6105, which
     indicates that RA guard needs to be configured before it is enabled.<a href="#section-2.2.5-2" class="pilcrow">¶</a></p>
<p id="section-2.2.5-3">
     The approach described in this section only makes it possible for stub network hosts to interoperate with
     hosts on the link to which the stub router is directly attached. The "Global Reachability" approach talks
     about how to establish interoperability between stub network hosts and hosts on links to which the stub
     network is not directly attached.<a href="#section-2.2.5-3" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2.3">
        <h3 id="name-global-reachability">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-global-reachability" class="section-name selfRef">Global reachability</a>
        </h3>
<p id="section-2.3-1">

   Global reachability for stub networks requires either the use of NAT64, or else the presence of global
   IPv6 service on the link.  As such it is more of an add-on approach than a different approach.  This section
   talks about a specific example of global reachability: how to make global reachability work for the
   "Stub Reachability using RA" approach mentioned earlier.<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<p id="section-2.3-2">

   The "global reachability" approach has applicability both in the literal sense, and also in the sense of
   "reachability beyond the link to which the stub router is directly attached."  The behavior of the stub
   router is the same in both cases: it is up to the network infrastructure what prefix is delegated to the
   stub router, and what reachability is provided.<a href="#section-2.3-2" class="pilcrow">¶</a></p>
<section id="section-2.3.1">
          <h4 id="name-reachability-3">
<a href="#section-2.3.1" class="section-number selfRef">2.3.1. </a><a href="#name-reachability-3" class="section-name selfRef">Reachability</a>
          </h4>
<p id="section-2.3.1-1">

     Reachability in this case requires integration into the routing infrastructure. This is most easily accomplished
     by having the DHCPv6 prefix delegation server add an entry in the routing table pointing to the stub router
     to which the prefix has been delegated. Stub routers can also advertise reachability to the stub network using
     router advertisements, but these will only work on the local link.<a href="#section-2.3.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.3.2">
          <h4 id="name-addressability-3">
<a href="#section-2.3.2" class="section-number selfRef">2.3.2. </a><a href="#name-addressability-3" class="section-name selfRef">Addressability</a>
          </h4>
<p id="section-2.3.2-1">

     Addressability in this case for hosts on the infrastructure link is assumed to be provided by the infrastructure,
     since we are relying on the infrastructure to provide DHCPv6 prefix delegation.  Addressibility on the stub
     network is provided using the prefix acquired with prefix delegation.<a href="#section-2.3.2-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.3.3">
          <h4 id="name-discoverability-3">
<a href="#section-2.3.3" class="section-number selfRef">2.3.3. </a><a href="#name-discoverability-3" class="section-name selfRef">Discoverability</a>
          </h4>
<p id="section-2.3.3-1">
     Discoverability for devices on the link to which the stub network is attached can be done as described earlier under
     the "Proxy ND" approach.<a href="#section-2.3.3-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.3.4">
          <h4 id="name-requirements-3">
<a href="#section-2.3.4" class="section-number selfRef">2.3.4. </a><a href="#name-requirements-3" class="section-name selfRef">Requirements</a>
          </h4>
<ul class="normal">
<li class="normal" id="section-2.3.4-1.1">

 Infrastructure network must support prefix allocation using DHCPv6 prefix delegation.<a href="#section-2.3.4-1.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.3.4-1.2">

 Infrastructure network must install routes to prefixes provided using DHCPv6 prefix delegation.<a href="#section-2.3.4-1.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.3.4-1.3">

 In the case of multiple stub routers, stub routers must cooperate both in acquiring and renewing prefixes
 acquired using prefix delegation. Stub routers must communicate complete routing information to the DHCPv6
 prefix delegation server so that it can install routes.<a href="#section-2.3.4-1.3" class="pilcrow">¶</a>
</li>
          </ul>
</section>
<section id="section-2.3.5">
          <h4 id="name-observations-3">
<a href="#section-2.3.5" class="section-number selfRef">2.3.5. </a><a href="#name-observations-3" class="section-name selfRef">Observations</a>
          </h4>
<p id="section-2.3.5-1">

     This approach should be a proper superset of the "Stub Reachability using RA" approach. The primary technical
     challenge here is specifying how multiple stub routers cooperate in doing prefix delegation.<a href="#section-2.3.5-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2.4">
        <h3 id="name-support-for-ipv4">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-support-for-ipv4" class="section-name selfRef">Support for IPv4</a>
        </h3>
<p id="section-2.4-1">

   This document generally assumes that stub networks only support IPv6. Bidirectional reachability for IPv4 can be provided
   using a combination of NAT44 and <span><a href="#RFC6887" class="xref">Port Control Protocol</a> [<a href="#RFC6887" class="xref">RFC6887</a>]</span>. The use of NAT44 and PCP in this way
   has already been solved and need not be discussed here.<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<section id="section-2.4.1">
          <h4 id="name-reachability-4">
<a href="#section-2.4.1" class="section-number selfRef">2.4.1. </a><a href="#name-reachability-4" class="section-name selfRef">Reachability</a>
          </h4>
<p id="section-2.4.1-1">

     Reachability is complicated for NAT64.  Typical NAT64 deployments provide reachability from the stub network to
     the rest of the Internet, but do not provide reachability from the rest of the internet to the stub network.
     As with NAT44 and PCP, this type of reachability is a solved problem and need not be discussed here.  To provide
     complete reachability to the IPv4 internet, a stub router must not only provide reachability to the cloud, but also
     reachability from the cloud. That additional work is discussed here.<a href="#section-2.4.1-1" class="pilcrow">¶</a></p>
<p id="section-2.4.1-2">

     To provide reachability from the cloud to devices on the network, devices on the network will need to obtain
     static mappings from the external IPv4 address and a port to the internal IPv6 address and a port.  There are
     three ways to do this:<a href="#section-2.4.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.1-3.1">The stub host can use Port Control Protocol to register a port, and then advertise that using SRP.<a href="#section-2.4.1-3.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.4.1-3.2">The stub host can simply register using SRP, and then SRP can establish a port mapping.<a href="#section-2.4.1-3.2" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-2.4.1-4">

     The first option has the advantage that the stub host is in complete control over what is advertised.
     However, it places an additional burden on the stub host which may not be desirable: the host has to
     implement PCP and link the PCP port allocation to the SRP registration.<a href="#section-2.4.1-4" class="pilcrow">¶</a></p>
<p id="section-2.4.1-5">

     For a constrained network device, it is most likely preferable to combine the two transactions: the SRP server can
     receive the registration from the stub host and acquire a PCP mapping for it, and then register an AAAA and A record for
     the host along with an SRV record for the IPv4 and IPv6 mappings. The hostname mapping would need to be different for
     the A record and the AAAA record in order to avoid spurious connections to the IPv4 port on the IPv6 address and vice
     versa.<a href="#section-2.4.1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-2.4.2">
          <h4 id="name-addressability-4">
<a href="#section-2.4.2" class="section-number selfRef">2.4.2. </a><a href="#name-addressability-4" class="section-name selfRef">Addressability</a>
          </h4>
<p id="section-2.4.2-1">

     Addressability on the stub network can be provided using a ULA prefix specific to the stub network or, if NAT64 is
     being used in addition to one of the other solutions discussed here, the prefix allocated on the stub network
     for that purpose can also be used for NAT64.<a href="#section-2.4.2-1" class="pilcrow">¶</a></p>
<p id="section-2.4.2-2">

     IPv4 addressability on the infrastructure network is provided by the infrastructure network.  It is also possible
     that the infrastructure network is an IPv6 network. In that case, the NAT64 edge router may be provided by the
     infrastructure as well.<a href="#section-2.4.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.4.3">
          <h4 id="name-discoverability-4">
<a href="#section-2.4.3" class="section-number selfRef">2.4.3. </a><a href="#name-discoverability-4" class="section-name selfRef">Discoverability</a>
          </h4>
<p id="section-2.4.3-1">
     The discoverability described for the "ND Proxy" approach should work here as well, except for the
     caveat mentioned above under "reachability".<a href="#section-2.4.3-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.4.4">
          <h4 id="name-requirements-4">
<a href="#section-2.4.4" class="section-number selfRef">2.4.4. </a><a href="#name-requirements-4" class="section-name selfRef">Requirements</a>
          </h4>
<ul class="normal">
<li class="normal" id="section-2.4.4-1.1">
 TBD<a href="#section-2.4.4-1.1" class="pilcrow">¶</a>
</li>
          </ul>
</section>
<section id="section-2.4.5">
          <h4 id="name-observations-4">
<a href="#section-2.4.5" class="section-number selfRef">2.4.5. </a><a href="#name-observations-4" class="section-name selfRef">Observations</a>
          </h4>
<p id="section-2.4.5-1">

     Support for NAT64 may be required for some deployments. NAT64 support requires either close cooperation between stub
     routers, or else requires that the NAT64 translation be done externally.  The latter choice is likely quite a bit
     easier; solutions that provide load balancing and high availability are already available on the market, and hence do
     not require that the stub routers perform this function. This is expected to be the best approach to serve the needs
     of consumers of this capability.<a href="#section-2.4.5-1" class="pilcrow">¶</a></p>
</section>
</section>
</section>
<section id="section-3">
      <h2 id="name-discoverability-options">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-discoverability-options" class="section-name selfRef">Discoverability Options</a>
      </h2>
<p id="section-3-1">

 We can divide the set of hosts needing to be discovered and the set of hosts needing to discover them into
 four categories:<a href="#section-3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-2.1">Stub network hosts (stub hosts)<a href="#section-3-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-2.2">Hosts that are on the link to which the stub network is directly connected (direct hosts)<a href="#section-3-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-2.3">Hosts that are on other links within the same infrastructure (infrastructure hosts)<a href="#section-3-2.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-2.4">Hosts that are on other links not within the same infrastructure (cloud hosts)<a href="#section-3-2.4" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-3-3">

 To enable stub hosts to discover direct hosts, a <span><a href="#RFC8766" class="xref">Discovery Proxy</a> [<a href="#RFC8766" class="xref">RFC8766</a>]</span> can be used.
 This must be resident on any stub network router that is seen by the stub host as a resolver.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">

 To enable stub hosts to discover infrastructure hosts using DNS-SD <span>[<a href="#RFC6763" class="xref">RFC6763</a>]</span>, the infrastructure
 must provide support for RFC6763 service discover using DNS.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">

 To enable stub hosts to discover infrastructure hosts and cloud hosts using DNS, DNS resolution must be provided by the stub
 router, and the infrastructure must additionally provide the stub router with the ability to resolve names.<a href="#section-3-5" class="pilcrow">¶</a></p>
<p id="section-3-6">

 To enable direct hosts to discover stub hosts, stub routers must implement a DNS-SD Advertising Proxy. Stub hosts must
 register with the advertising proxy using SRP.<a href="#section-3-6" class="pilcrow">¶</a></p>
<p id="section-3-7">

 To enable infrastructure hosts to discover stub hosts, stub routers must provide authoritative DNS service for the
 stub network link so that it can be integrated into the infrastructure DNS-SD service. To do this automatically will
 require additional protocol work.<a href="#section-3-7" class="pilcrow">¶</a></p>
<p id="section-3-8">

 To enable cloud hosts to discover stub hosts, stub hosts would need to register with the DNS, and the infrastructure
 would need to make those registrations available globally, perhaps with whitelisting.  This is probably not a very
 widely applicable use case, and we do not consider specifying how this works to be part of the work of this document.<a href="#section-3-8" class="pilcrow">¶</a></p>
</section>
<section id="section-4">
      <h2 id="name-multiple-egress-multiple-li">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-multiple-egress-multiple-li" class="section-name selfRef">Multiple Egress, Multiple Link</a>
      </h2>
<p id="section-4-1">

 In the case of a stub network that has multiple stub routers, it is possible that, either when the stub network is initially
 set up, or subsequently, one or more stub routers might be connected to a different infrastructure link than one or more
 other stub routers.  There are two viable approaches to this problem:<a href="#section-4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-2.1">declare it out of scope and have the stub routers prevent such configurations<a href="#section-4-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.2">make sure that stub routers attached to each infrastructure link provide complete service on that link<a href="#section-4-2.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-4-3">
 Explain further.<a href="#section-4-3" class="pilcrow">¶</a></p>
</section>
<div id="mgt">
<section id="section-5">
      <h2 id="name-management-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-management-considerations" class="section-name selfRef">Management Considerations</a>
      </h2>
<p id="section-5-1">
 TBD<a href="#section-5-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-6">
      <h2 id="name-privacy-considerations-2">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-privacy-considerations-2" class="section-name selfRef">Privacy Considerations</a>
      </h2>
<p id="section-6-1">

 In the locally reachable case, privacy is protected in the sense that names published locally are only visible to devices
 connected locally.  This may be insufficient privacy in some cases.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">

 In the globally reachable case, discoverability has privacy implications. Unfiltered automatic discoverability is probably
 not a good idea in the globally reachable case.  If automatic discoverability is provided, some filtering mechanism would
 need to be specified.<a href="#section-6-2" class="pilcrow">¶</a></p>
</section>
<section id="section-7">
      <h2 id="name-security-considerations-3">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations-3" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">

 TBD<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
<div id="IANA">
<section id="section-8">
      <h2 id="name-iana-considerations-3">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations-3" class="section-name selfRef">IANA considerations</a>
      </h2>
<p id="section-8-1">No new actions are required by IANA for this document.<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-9">
      <h2 id="name-informative-references-3">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-informative-references-3" class="section-name selfRef">Informative References</a>
      </h2>
<dl class="references">
<dt id="RFC4191">[RFC4191]</dt>
      <dd>
<span class="refAuthor">Draves, R.</span><span class="refAuthor"> and D. Thaler</span>, <span class="refTitle">"Default Router Preferences and More-Specific Routes"</span>, <span class="seriesInfo">RFC 4191</span>, <span class="seriesInfo">DOI 10.17487/RFC4191</span>, <time datetime="2005-11" class="refDate">November 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4191">https://www.rfc-editor.org/info/rfc4191</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4861">[RFC4861]</dt>
      <dd>
<span class="refAuthor">Narten, T.</span><span class="refAuthor">, Nordmark, E.</span><span class="refAuthor">, Simpson, W.</span><span class="refAuthor">, and H. Soliman</span>, <span class="refTitle">"Neighbor Discovery for IP version 6 (IPv6)"</span>, <span class="seriesInfo">RFC 4861</span>, <span class="seriesInfo">DOI 10.17487/RFC4861</span>, <time datetime="2007-09" class="refDate">September 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4861">https://www.rfc-editor.org/info/rfc4861</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6105">[RFC6105]</dt>
      <dd>
<span class="refAuthor">Levy-Abegnoli, E.</span><span class="refAuthor">, Van de Velde, G.</span><span class="refAuthor">, Popoviciu, C.</span><span class="refAuthor">, and J. Mohacsi</span>, <span class="refTitle">"IPv6 Router Advertisement Guard"</span>, <span class="seriesInfo">RFC 6105</span>, <span class="seriesInfo">DOI 10.17487/RFC6105</span>, <time datetime="2011-02" class="refDate">February 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6105">https://www.rfc-editor.org/info/rfc6105</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6763">[RFC6763]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span><span class="refAuthor"> and M. Krochmal</span>, <span class="refTitle">"DNS-Based Service Discovery"</span>, <span class="seriesInfo">RFC 6763</span>, <span class="seriesInfo">DOI 10.17487/RFC6763</span>, <time datetime="2013-02" class="refDate">February 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6763">https://www.rfc-editor.org/info/rfc6763</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6887">[RFC6887]</dt>
      <dd>
<span class="refAuthor">Wing, D., Ed.</span><span class="refAuthor">, Cheshire, S.</span><span class="refAuthor">, Boucadair, M.</span><span class="refAuthor">, Penno, R.</span><span class="refAuthor">, and P. Selkirk</span>, <span class="refTitle">"Port Control Protocol (PCP)"</span>, <span class="seriesInfo">RFC 6887</span>, <span class="seriesInfo">DOI 10.17487/RFC6887</span>, <time datetime="2013-04" class="refDate">April 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6887">https://www.rfc-editor.org/info/rfc6887</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8766">[RFC8766]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span>, <span class="refTitle">"Discovery Proxy for Multicast DNS-Based Service Discovery"</span>, <span class="seriesInfo">RFC 8766</span>, <span class="seriesInfo">DOI 10.17487/RFC8766</span>, <time datetime="2020-06" class="refDate">June 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8766">https://www.rfc-editor.org/info/rfc8766</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-6lo-backbone-router">[I-D.ietf-6lo-backbone-router]</dt>
    <dd>
<span class="refAuthor">Thubert, P.</span><span class="refAuthor">, Perkins, C.</span><span class="refAuthor">, and E. Levy-Abegnoli</span>, <span class="refTitle">"IPv6 Backbone Router"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-6lo-backbone-router-20</span>, <time datetime="2020-03-23" class="refDate">23 March 2020</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-6lo-backbone-router-20">https://tools.ietf.org/html/draft-ietf-6lo-backbone-router-20</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="authors-addresses">
<section id="section-appendix.a">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ted Lemon</span></div>
<div dir="auto" class="left"><span class="org">Apple, Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">One Apple Park Way</span></div>
<div dir="auto" class="left">
<span class="locality">Cupertino</span>, <span class="region">California</span> <span class="postal-code">95014</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:elemon@apple.com" class="email">elemon@apple.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
