<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>A Survey of Protocols to Control Network
      Address Translators and Firewalls</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="A Survey of Protocols to Control Network
      Address Translators and Firewalls">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">L. Eggert</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">P. Sarolahti</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">R. Denis-Courmont</td></tr>
<tr><td class="header">Expires: January 10, 2008</td><td class="header">V. Stirbu</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Nokia</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">H. Tschofenig</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">July 09, 2007</td></tr>
</table></td></tr></table>
<h1><br />A Survey of Protocols to Control Network
      Address Translators and Firewalls<br />draft-eggert-middlebox-control-survey-01.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.
This document may not be modified,
and derivative works of it may not be created,
except to publish it as an RFC and to translate it into languages other
than English.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on January 10, 2008.</p>

<h3>Abstract</h3>

<p>This document surveys existing protocols for the control of network address translators and
        firewalls. It includes standards-level protocols developed by the IETF and other standards
        organizations, as well as protocols designed by individuals.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#classification">2.</a>&nbsp;
Protocol Classification<br />
<a href="#socks">3.</a>&nbsp;
SOCKS<br />
<a href="#nsis">4.</a>&nbsp;
NSIS - NAT/Firewall Signaling Layer Protocol<br />
<a href="#midcom">5.</a>&nbsp;
MIDCOM - Managed Objects for Middlebox Communication<br />
<a href="#simco">6.</a>&nbsp;
SIMCO - NEC's Simple Middlebox Configuration Protocol<br />
<a href="#diameter">7.</a>&nbsp;
Diameter Gq', Rx+, Gx+<br />
<a href="#upnp">8.</a>&nbsp;
UPnP - Internet Gateway Device Standardized Device Control Protocol<br />
<a href="#pmp">9.</a>&nbsp;
NAT-PMP - NAT Port Mapping Protocol<br />
<a href="#stun">10.</a>&nbsp;
STUN - Controlling NAT Bindings using STUN<br />
<a href="#rsip">11.</a>&nbsp;
RSIP - Realm-Specific IP<br />
<a href="#ald">12.</a>&nbsp;
ALD - Application Listener Discovery for IPv6<br />
<a href="#nls">13.</a>&nbsp;
NLS - Network Layer Signaling Transport Layer<br />
<a href="#afwc">14.</a>&nbsp;
AFWC - Authorized IP Firewall Control Application<br />
<a href="#seccons">15.</a>&nbsp;
Security Considerations<br />
<a href="#ianacons">16.</a>&nbsp;
IANA Considerations<br />
<a href="#ack">17.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">18.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>Network address translators (NATs) and firewalls - frequently referred to as "middleboxes"
        - are a subject of active discussion in the IETF and related development and standardization
        communities. These devices are not part of the traditional end-to-end Internet architecture,
        because they usually operate on transport- and higher-layer information inside the network,
        which is a layering violation in the original architecture, because operating on that
        information was the exclusive providence of the end-hosts. 
</p>
<p> However, in practice, NATs have turned out to be necessary to be able to mitigate the IPv4
        address space limitations of many network domains. Similarly, because the networking
        software in many systems has turned out to contain security defects of different kinds, use
        of firewalls is common to protect the systems from attacks coming from the network. Another
        motivation for firewalls is to protect against the abuse of possibly scarce of expensive
        bandwidth, for example, unwanted traffic on wireless links.
</p>
<p>A shared disadvantage of NATs and firewalls is that they often encode knowledge about a
        particular set of higher-layer protocols and applications in order to operate. This practice
        prevents new types of network protocols or applications from being deployed end-to-end,
        unless the middleboxes are upgraded or reconfigured as well. For example, a firewall is
        usually configured with a list of ports for a set of common network applications, preventing
        introduction of new applications. Furthermore, they commonly only support traditional
        transport protocols, such as TCP and UDP, preventing the use of other protocols, such as
        IPsec, IP tunneling, or other transport protocols. In addition, many NATs and firewalls
        maintain some state for each active transport-layer session that typically needs to be
        refreshed in constant intervals, and can be initiated only by certain hosts.
</p>
<p>The IETF is currently developing recommendations for the operation of NATs in the BEHAVE
        working group. These recommendations provide guidelines for how NATs should translate a
        number of common protocols, including TCP <a class='info' href='#I-D.ietf-behave-tcp'>[I&#8209;D.ietf&#8209;behave&#8209;tcp]<span> (</span><span class='info'>Guha, S., Biswas, K., Ford, B., Sivakumar, S., and P. Srisuresh, &ldquo;NAT Behavioral Requirements for TCP,&rdquo; September&nbsp;2008.</span><span>)</span></a>, UDP <a class='info' href='#RFC4787'>[RFC4787]<span> (</span><span class='info'>Audet, F. and C. Jennings, &ldquo;Network Address Translation (NAT) Behavioral Requirements for Unicast UDP,&rdquo; January&nbsp;2007.</span><span>)</span></a>, ICMP <a class='info' href='#I-D.ietf-behave-nat-icmp'>[I&#8209;D.ietf&#8209;behave&#8209;nat&#8209;icmp]<span> (</span><span class='info'>Srisuresh, P., Ford, B., Sivakumar, S., and S. Guha, &ldquo;NAT Behavioral Requirements for ICMP protocol,&rdquo; January&nbsp;2009.</span><span>)</span></a> and IP multicast <a class='info' href='#I-D.ietf-behave-multicast'>[I&#8209;D.ietf&#8209;behave&#8209;multicast]<span> (</span><span class='info'>Wing, D. and T. Eckert, &ldquo;IP Multicast Requirements for a Network Address (and port) Translator  (NAT),&rdquo; November&nbsp;2007.</span><span>)</span></a>. Other organizations are developing similar
        guidelines. One example are Microsoft's requirements for the "Works with Windows Vista" and
        "Certified for Windows Vista" logo program <a class='info' href='#VISTALOGO'>[VISTALOGO]<span> (</span><span class='info'>Microsoft Corporation, &ldquo;Windows Logo Program Device Requirements for Windows Vista Client and Windows             Server code named 'Longhorn' (Version 3.09),&rdquo; December&nbsp;2006.</span><span>)</span></a> (see page 121 to page
        132). 
</p>
<p>Even if these efforts result in more unified behavior of middleboxes, they will not
        necessarily overcome the above-mentioned limitations: different protocols and applications
        will still need to adapt to the behavior of NATs and firewalls. Commonly, new protocols must
        be encapsulated into UDP packets in order to pass through these devices. Although the UDP
        header and protocol logic are minimal and do not consume much network capacity, the use of
        UDP causes other problems, because it is not connection-oriented. Because there are no
        messages for connection establishment or connection tear-down in UDP, a stateful NAT or
        firewall needs to monitor ongoing UDP traffic between a source and destination, and in the
        absence of such traffic assumes that the session has ended, removing the related session
        state. In practice, the timers for state clean-up have turned out to be short (on the order
        of seconds), requiring the end hosts to transmit frequent and resource-consuming keep-alive
        messages to refresh the session state maintained at middleboxes.
</p>
<p>A more advanced method to overcome the limitations caused by NATs or firewalls would be to
        allow end-hosts to signal their communication characteristics and profiles explicitly to the
        NATs and firewalls, or alternatively to allow these devices to signal their configuration
        information to the end-hosts. With such schemes, the number of state-refreshing keep-alives
        could be significantly reduced, and NATs and firewalls could be made directly aware of the
        communication characteristics of the end-hosts. 
</p>
<p> A number of existing protocols have been proposed for this purpose, and new proposals are
        being prepared. This document aims to support such efforts by surveying existing proposals
        and by discussing the the benefits and shortcomings of these schemes.
</p>
<a name="classification"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Protocol Classification</h3>

<p> This section categorizes the proposals into clusters to illustrate the major design
        choices.
</p>
<p>
        </p>
<ul class="text">
<li>End-System-Initiated Protocols
            
<ul class="text">
<li>Two Party Approach
                    
<ul class="text">
<li> UPnP (<a class='info' href='#upnp'>Section&nbsp;8<span> (</span><span class='info'>UPnP - Internet Gateway Device Standardized Device Control Protocol</span><span>)</span></a>)
</li>
<li> NAT-PMP (<a class='info' href='#pmp'>Section&nbsp;9<span> (</span><span class='info'>NAT-PMP - NAT Port Mapping Protocol</span><span>)</span></a>) 
</li>
</ul>
              
</li>
<li>Multi-Party Approach
                    
<ul class="text">
<li>STUN controlled NAT (<a class='info' href='#stun'>Section&nbsp;10<span> (</span><span class='info'>STUN - Controlling NAT Bindings using STUN</span><span>)</span></a>)
</li>
<li>NLS (<a class='info' href='#nls'>Section&nbsp;13<span> (</span><span class='info'>NLS - Network Layer Signaling Transport Layer</span><span>)</span></a>)
</li>
<li>NSIS NATFW NSLP (<a class='info' href='#nsis'>Section&nbsp;4<span> (</span><span class='info'>NSIS - NAT/Firewall Signaling Layer Protocol</span><span>)</span></a>)
</li>
</ul>
              
</li>
</ul>
          
</li>
<li>Third-Party-Initiated Approaches
                
<ul class="text">
<li>Diameter Gq', Rx+, Gx+ (<a class='info' href='#diameter'>Section&nbsp;7<span> (</span><span class='info'>Diameter Gq', Rx+, Gx+</span><span>)</span></a>) 
</li>
<li>SIMCO (<a class='info' href='#simco'>Section&nbsp;6<span> (</span><span class='info'>SIMCO - NEC's Simple Middlebox Configuration Protocol</span><span>)</span></a>)
</li>
<li>MIDCOM (<a class='info' href='#midcom'>Section&nbsp;5<span> (</span><span class='info'>MIDCOM - Managed Objects for Middlebox Communication</span><span>)</span></a>)
</li>
</ul>
          
</li>
</ul><p>
      
</p>
<p>A reasonable classification of RSIP (<a class='info' href='#rsip'>Section&nbsp;11<span> (</span><span class='info'>RSIP - Realm-Specific IP</span><span>)</span></a>), ALD (<a class='info' href='#ald'>Section&nbsp;12<span> (</span><span class='info'>ALD - Application Listener Discovery for IPv6</span><span>)</span></a>), 
        SOCKS (<a class='info' href='#socks'>Section&nbsp;3<span> (</span><span class='info'>SOCKS</span><span>)</span></a>) and AFWC (<a class='info' href='#afwc'>Section&nbsp;14<span> (</span><span class='info'>AFWC - Authorized IP Firewall Control Application</span><span>)</span></a>) is still pending.
</p>
<p>The following document were (or are being) developed within the IETF: 
</p>
<p>
        </p>
<ul class="text">
<li>SOCKS <a class='info' href='#socks'>Section&nbsp;3<span> (</span><span class='info'>SOCKS</span><span>)</span></a>
</li>
<li>NSIS NATFW NSLP, <a class='info' href='#nsis'>Section&nbsp;4<span> (</span><span class='info'>NSIS - NAT/Firewall Signaling Layer Protocol</span><span>)</span></a>
</li>
<li>MIDCOM - Managed Objects for Middlebox Communication, <a class='info' href='#midcom'>Section&nbsp;5<span> (</span><span class='info'>MIDCOM - Managed Objects for Middlebox Communication</span><span>)</span></a>
</li>
<li>SIMCO - NEC's Simple Middlebox Configuration Protocol, <a class='info' href='#simco'>Section&nbsp;6<span> (</span><span class='info'>SIMCO - NEC's Simple Middlebox Configuration Protocol</span><span>)</span></a>
</li>
</ul><p>
      
</p>
<p>These protocols were developed outside the IETF:
</p>
<p>
        </p>
<ul class="text">
<li> UPnP - Internet Gateway Device Standardized Device Control Protocol (<a class='info' href='#upnp'>Section&nbsp;8<span> (</span><span class='info'>UPnP - Internet Gateway Device Standardized Device Control Protocol</span><span>)</span></a>)
</li>
<li> Diameter Gq', Rx+, Gx+ (<a class='info' href='#diameter'>Section&nbsp;7<span> (</span><span class='info'>Diameter Gq', Rx+, Gx+</span><span>)</span></a>)
</li>
</ul><p>
      
</p>
<p>The following protocols are proposals by individuals: 
</p>
<p>
        </p>
<ul class="text">
<li>NAT-PMP - NAT Port Mapping Protocol (<a class='info' href='#pmp'>Section&nbsp;9<span> (</span><span class='info'>NAT-PMP - NAT Port Mapping Protocol</span><span>)</span></a>)
</li>
<li>STUN - Controlling NAT Bindings using STUN (<a class='info' href='#stun'>Section&nbsp;10<span> (</span><span class='info'>STUN - Controlling NAT Bindings using STUN</span><span>)</span></a>)
</li>
<li>RSIP - Realm-Specific IP (<a class='info' href='#rsip'>Section&nbsp;11<span> (</span><span class='info'>RSIP - Realm-Specific IP</span><span>)</span></a>)
</li>
<li>ALD - Application Listener Discovery for IPv6 (<a class='info' href='#ald'>Section&nbsp;12<span> (</span><span class='info'>ALD - Application Listener Discovery for IPv6</span><span>)</span></a>)
</li>
<li>NLS - Network Layer Signaling Transport Layer (<a class='info' href='#nls'>Section&nbsp;13<span> (</span><span class='info'>NLS - Network Layer Signaling Transport Layer</span><span>)</span></a>)
</li>
<li>AFWC - Authorized IP Firewall Control Application (<a class='info' href='#afwc'>Section&nbsp;14<span> (</span><span class='info'>AFWC - Authorized IP Firewall Control Application</span><span>)</span></a>)
</li>
</ul><p>
      
</p>
<a name="socks"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
SOCKS</h3>

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Protocol Overview</h3>

<p>The SOCKS Protocol Version 5 <a class='info' href='#RFC1928'>[RFC1928]<span> (</span><span class='info'>Leech, M., Ganis, M., Lee, Y., Kuris, R., Koblas, D., and L. Jones, &ldquo;SOCKS Protocol Version 5,&rdquo; March&nbsp;1996.</span><span>)</span></a> defines a method for nodes located
          on an IP network (such as an Intranet with no routing to the Internet) to establish TCP
          sessions and exchange UDP datagrams with another IP network (usually the global Internet).
          To that end, a SOCKS server must be located on the boundary of both networks, and SOCKS
          clients must explicitly request the server to relay their communication sessions.
</p>
<p>When a SOCKS client establishes a TCP session to the remote network, it first connects to
          the SOCKS server on a well-known TCP port, sending a connection request with optional
          authentication credentials. The request specifies in which direction the TCP session is to
          be established, i.e., whether the SOCKS server will act as the active or passive endpoint.
          The SOCKS server, if it accepts the request, informs the client of the external IP address
          and TCP port number that it will use.
          
          If the SOCKS server acts as the passive endpoint, it sends an additional response once the
          TCP three-way handshake is completed.
           The SOCKS server then forwards
          traffic between the internal and external TCP sessions, until either of them is
          terminated. 
</p>
<p>UDP sessions are also initially negotiated via a TCP session to the SOCKS server, in a
          similar manner. If successful, the client obtains the IP address and UDP port number of a
          UDP relay server. The relay forwards UDP datagrams between the local and remote networks.
          When sending a datagram, the client adds an additional, SOCKS-specific header, which
          carries the IP address or DNS name of the remote peer and the intended destination UDP
          port number of the datagram. The relay adds the same header when forwarding datagrams from
          the remote network back to the client. 
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Protocol Analysis</h3>

<p>The SOCKS protocol makes few assumptions about the network environment it operates in. In
          particular, there can be any number NAT/firewall devices between the client and the SOCKS
          server, and there need not be a router between the local and remote networks. It is
          assumed that the SOCKS server itself can freely exchange TCP and UDP packets with the
          remote network. 
</p>
<p>SOCKS supports both IPv4 and IPv6 as well as translation from one to the other. SOCKS
          only supports UDP and TCP as transport protocols. Conveyance of IP header parameters other
          than the IP addresses (such as IP options, hop limit, TOS field, etc.) are not defined.
          SOCKS cannot be used for generic server applications: only one passive TCP session per
          request is allowed. 
        
</p>
<p> The protocol is mature and implementations for clients and servers are widely available.
          SOCKS is supported in many FTP and HTTP clients. Applications must usually be modified to
          support SOCKS, but it is also possible to implement SOCKS transparently as a shim layer
          above the BSD socket API. 
</p>
<p>SOCKS requires manual configuration on the client. SOCKS server address and optional
          credentials must be explicitly provisioned. 
</p>
<a name="nsis"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
NSIS - NAT/Firewall Signaling Layer Protocol</h3>

<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Protocol Overview</h3>

<p> NSIS uses a two-layer architecture with one lower-layer transport (NTLP) and multiple
          upper-layer application signaling protocols (NSLPs). This section first discusses the generic properties of the NTLP transport and then the specific characteristics of the NAT/Firewall signaling protocol built upon it.
          
</p>
<p> GIST <a class='info' href='#I-D.ietf-nsis-ntlp'>[I&#8209;D.ietf&#8209;nsis&#8209;ntlp]<span> (</span><span class='info'>Schulzrinne, H. and M. Stiemerling, &ldquo;GIST: General Internet Signalling Transport,&rdquo; June&nbsp;2009.</span><span>)</span></a> establishes NTLP
            "routing" state that allows signaling messages to be routed forwards and backwards along a           path. GIST also provides two ways to send signaling messages: 
</p>
<p>
            </p>
<ol class="text">
<li>An RSVP-like signaling style with end-to-end addressed messages that contain the source and the destination IP addresses of
                the data flow. The messages are intercepted along the path by NSIS nodes interested
                in these messages (by using Router Alert Options). The GIST specification refers to
                this as the Datagram mode (D-mode). 
</li>
<li>Connection mode (or C-mode) is used when NSIS nodes are
                directly addressed. This mode assumes that the discovery procedure has already
                finished (or the address of the receiving node is known via other means) and
                information about the node is already available. 
</li>
</ol><p>
          
</p>
<p>An important part of GIST is its discovery mechanism. 
              
              As an outcome of the discovery procedure
            the querying node learns the address of the responding node, its capability and
            establishes GIST routing state. 
</p>
<p> Once the next NSIS aware node is known, a messaging association can be established
            between these two nodes using C-mode. The same procedure is repeated again and again for
            the C-Mode until the last GIST node is reached.  
</p>
<p> The NAT/Firewall NSLP description <a class='info' href='#I-D.ietf-nsis-nslp-natfw'>[I&#8209;D.ietf&#8209;nsis&#8209;nslp&#8209;natfw]<span> (</span><span class='info'>Stiemerling, M., Tschofenig, H., Aoun, C., and E. Davies, &ldquo;NAT/Firewall NSIS Signaling Layer Protocol (NSLP),&rdquo; April&nbsp;2010.</span><span>)</span></a>
            defines an NSIS Signaling Layer Protocol (NSLP) for configuration of network address
            translators and firewalls on top of GIST. 
</p>
<p>The NATFW NSLP uses GIST as a transport for its signaling messages. Objects about a
            created NAT binding, as well as lifetime and signaling information (such as protocol
            headers and error messages) are contained in a NATFW NSLP message itself. All other
            information about the flow identifier and the session identifier is carried in GIST. For
            communication security between neighboring NATFW NSLP nodes the usage of Transport Layer
            Security (TLS) is specified. The usage of an authorization token is possible <a class='info' href='#I-D.manner-nsis-nslp-auth'>[I&#8209;D.manner&#8209;nsis&#8209;nslp&#8209;auth]<span> (</span><span class='info'>Manner, J., Stiemerling, M., Tschofenig, H., and R. Bless, &ldquo;Authorization for NSIS Signaling Layer Protocols,&rdquo; July&nbsp;2008.</span><span>)</span></a> 
</p>
<p> It is useful to distinguish between two signaling modes: 
</p>
<p>
            </p>
<blockquote class="text">
<p> The first mode (CREATE) is the traditional way of creating a NAT binding by
                sending a message from the data sender along the path to the data receiver. <a class='info' href='#create'>Figure&nbsp;1<span> (</span><span class='info'>The NATFW NSLP CREATE Mode</span><span>)</span></a> shows a message exchange for this signaling mode.<br />
<br />

              
</p>
<p> The second mode (EXTERNAL) is used when a data receiver is behind a NAT and wants
                to establish a NAT binding to allow incoming data traffic. <a class='info' href='#external'>Figure&nbsp;2<span> (</span><span class='info'>The NATFW NSLP EXTERNAL Mode</span><span>)</span></a>
                shows this mode. It was necessary to introduce this mode, because of an end-to-end
                reachability problem. Furthermore, it provides a transition scenario where the data
                receiver behind a NAT or a firewall is able to configure their middlebox locally.
              
</p>
</blockquote><p>
          
</p>
<p>
            <br /><hr class="insert" />
<a name="create"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
               Private Address              Public  Address
  +----------+    Space        +----------+    Space       +----------+
  | Data     |                 |   NAT    |                | Data     |
  | Sender   |                 |          |                | Receiver |
  +----------+                 +----------+                +----------+
     |                              |                            |
     |       CREATE                 | CREATE                     |
     |-----------------------------&gt;+---------------------------&gt;|
     |                              |                            |
     |       RESPONSE               | RESPONSE                   |
     |&lt;-----------------------------+&lt;---------------------------|
     |                              |                            |
     ============================================================&gt;
                      Direction of data traffic
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: The NATFW NSLP CREATE Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

          
</p>
<p>With the CREATE mode shown in <a class='info' href='#create'>Figure&nbsp;1<span> (</span><span class='info'>The NATFW NSLP CREATE Mode</span><span>)</span></a> the data sender (which happens to
            be the NSIS initiator in this case) sends a message to request a NAT binding to be
            created. The message is targeted to the data receiver, which returns a success or
            failure in the RESPONSE message. The data sender learns about the new NAT binding with
            information carried in the RESPONSE message. 
</p>
<p>
            <br /><hr class="insert" />
<a name="external"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
               Public Internet              Private Address
  +----------+                 +----------+    Space       +----------+
  | Data     |                 |   NAT    |                | Data     |
  | Sender   |                 |          |                | Receiver |
  +----------+                 +----------+                +----------+
     |                              |                            |
     |                              | EXTERNAL                   |
     |                              |&lt;---------------------------|
     |                              |                            |
     |                              | RESPONSE                   |
     |                              |---------------------------&gt;|
     |                              |                            |
     ============================================================&gt;
                      Direction of data traffic
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: The NATFW NSLP EXTERNAL Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

          
</p>
<p> With the EXTERNAL mode shown in <a class='info' href='#external'>Figure&nbsp;2<span> (</span><span class='info'>The NATFW NSLP EXTERNAL Mode</span><span>)</span></a> the data receiver behind a
            NAT creates a NAT binding. This allows data traffic from a node on the Internet to be
            received. Please note that the EXTERNAL message is sent in the opposite direction of the
            data traffic.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Protocol Analysis</h3>

<p>This section discusses the pros and cons of the protocol.
</p>
<p>
          </p>
<blockquote class="text">
<p> Is the protocol is restricted to certain applications or network environments?
</p>
</blockquote><p>
        
</p>
<p>The usage of the protocol is not restricted to a specific environment but to take
          advantage of its features it is necessary that Network Address Translators and firewalls
          implement this protocol. 
</p>
<p>
          </p>
<blockquote class="text">
<p> Does it require additional infrastructure, lower-layer features or cooperation from
              other entities? 
</p>
</blockquote><p>
        
</p>
<p>While the protocol supports a zero-configuration scheme so that it works in almost network
          topologies. The protocol works with multiple nested NATs and firewalls unless the data
          receiver is behind a complex network topology combined with routing asymmetry (without)
          state synchronization between the edge firewalls when the data sender does not support the
          protocol as well. 
</p>
<p>To make use of the security functionality and to perform meaningful authorization
          capabilities it is, however, necessary to have some form of security infrastructure in
          place. The protocol provides a very flexible security model with support in different
          security architectures. 
</p>
<p>Furthermore,for the EXTERNAL signal mode to work it is necessary that the edge firewall
          or edge NAT towards the public Internet terminates the signaling message exchange since
          the message might be targeted towards an address that does not exist. 
</p>
<p>
          </p>
<blockquote class="text">
<p> Does it require modifications to applications? 
</p>
</blockquote><p>
        
</p>
<p>The protocol can be used in a proxy mode where no end host support is necessary. In order
          to benefit best from the supported functionality is is advisable to make applications
          aware of the capability. 
</p>
<p>
          </p>
<blockquote class="text">
<p> How mature is the specification? Has the protocol seen any use or deployment? 
</p>
</blockquote><p>
        
</p>
<p>The specification is passed Working Group Last Call and several implementations
          (including open source implementations) exist. However, the protocol is not deployed yet. 
</p>
<p>
          </p>
<blockquote class="text">
<p> How does the client discover the middlebox? 
</p>
</blockquote><p>
        
</p>
<p>The middlebox discovery is accomplished as part of the functionality provided in GIST,
          namely specifically crafted packets that look like data packets are used. These discovery
          packets are marked with a router alert option and they are intercepted by firewalls and
          NATs along the path. 
</p>
<p>
          </p>
<blockquote class="text">
<p> What kinds of "pinholes" does the protocol support? 
</p>
</blockquote><p>
        
</p>
<p>The protocol supports a long range of pinholes. The complete list can be found in Section
          5.8.1.1 of GIST. 
</p>
<p>
          </p>
<blockquote class="text">
<p> What kinds of prior security arrangements does the protocol assume? 
</p>
</blockquote><p>
        
</p>
<p>When client authentication is required then the credentials of a ciphersuite available
          for TLS need to be available to the end host. The security architecture builds on a
          hop-by-hop security architecture. Alternatively, the usage of an authorization token is
          possible. Authorization tokens can also be used in a non-hop-by-hop fashion. 
</p>
<p>The security architecture is meant to provide strong security protection rather than
          opportunistic security mechanisms. Further security mechanisms can be added without the
          need to re-define the protocol by plugging new security functionality into GIST or the
          NATFW NSLP and my making use of the initial capability exchange. 
</p>
<p>
          </p>
<blockquote class="text">
<p> Does it work if routers (not supporting this protocol) somewhere drop packets with
              IP options? 
</p>
</blockquote><p>
        
</p>
<p>GIST and the NATFW NSLP has problems if routers drop packets marked with the Router Alert
          option. It is, however, possible to extend GIST with a different path-coupled signaling
          procedure. 
</p>
<p>
          </p>
<blockquote class="text">
<p> Does the protocol allow running a general-purpose server behind the NAT/firewall?
            
</p>
</blockquote><p>
        
</p>
<p>Yes. 
</p>
<a name="midcom"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
MIDCOM - Managed Objects for Middlebox Communication</h3>

<p>To be completed <a class='info' href='#RFC3303'>[RFC3303]<span> (</span><span class='info'>Srisuresh, P., Kuthan, J., Rosenberg, J., Molitor, A., and A. Rayhan, &ldquo;Middlebox communication architecture and framework,&rdquo; August&nbsp;2002.</span><span>)</span></a>.
</p>
<a name="simco"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
SIMCO - NEC's Simple Middlebox Configuration Protocol</h3>

<p>To be completed <a class='info' href='#RFC4540'>[RFC4540]<span> (</span><span class='info'>Stiemerling, M., Quittek, J., and C. Cadar, &ldquo;NEC's Simple Middlebox Configuration (SIMCO) Protocol Version 3.0,&rdquo; May&nbsp;2006.</span><span>)</span></a>.
</p>
<a name="diameter"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Diameter Gq', Rx+, Gx+</h3>

<p>To be completed [need reference].
</p>
<a name="upnp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
UPnP - Internet Gateway Device Standardized Device Control Protocol</h3>

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
Protocol Overview</h3>

<p>The Internet Gateway Device (IGD) is an "edge" interconnection device between a
          residential Local Area Network (LAN) and a Wide Area Network (WAN), providing connectivity
          to the Internet for the networked devices in the residential network. The IGD could be
          physically implemented as a dedicated, standalone device or modeled as a set of Universal
          Plug-and-Play (UPnP) devices and services on a personal computer.
</p>
<p>As an UPnP-based protocol, the IGD Standardized Device Control Protocol <a class='info' href='#UPNP'>[UPNP]<span> (</span><span class='info'>UPnP Forum, &ldquo;Internet Gateway Device (IGD) Standardized Device Control Protocol V 1.0,&rdquo; November&nbsp;2001.</span><span>)</span></a> inherits the features that the UPnP Device Architecture provides for
          support zero-configuration, "invisible" networking, and automatic discovery for a breadth
          of device categories. Any device can dynamically join a network, obtain an IP address,
          announce its name, convey its capabilities upon request, and learn about the presence and
          capabilities of other devices. Devices can disconnect from the network automatically
          without leaving any unwanted state information behind.
</p>
<p>The IGD Standardized Device Control Protocol contains a set of devices and services that
          allow clients (in the UPnP context also called "Control Points") to control the initiation
          and termination of connections, monitor status and events of connections, or manage host
          configuration services, e.g., DHCP or Dynamic DNS. Among these services, the
          "WANIPConnection" service provides the functionality that allows the Control Points to
          manage the network address translation on the IGD device.
</p>
<p>The IGD Standardized Device Control Protocol preserves the ability of non-UPnP devices to
          initiate and/or share Internet access.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
Protocol Analysis</h3>

<p>The IGD Standardized Device Control Protocol is intended to be used in unmanaged network
          environments such as those found typically in residential networks. The residential
          network can have up to four segments, a limitation inherited from the UPnP Device
          Architecture, because the TTL value for the link-local multicast discovery messages is
          four.
</p>
<p>By design, the protocol does permit the presence of several residential gateways in the
          same network and also permits residential gateways to have multiple connections to the
          Internet. In practice, a lack of routing mechanisms across multiple, simultaneously active
          WAN connections on multiple WAN interfaces and related issues caused by multiple,
          simultaneously active Internet Gateway devices (e.g., default gateway conflict resolution,
          load balancing or fail over) make scenarios other than that of a single Gateway Device
          with a single Internet connection difficult to support.
</p>
<p>A residential gateway supporting the IGD Standardized Device Control Protocol is able to
          operate in two modes. In "routed mode", the gateway shares the routable WAN IP address
          with the control points on the LAN using NAT. In "bridged" mode, all Ethernet packets from
          devices on the LAN are bridged to the WAN. In scenarios where the IP address on the WAN
          interface is not routable, the device can be switched from routed to bridged mode,
          allowing both the discovery of IGD Standardized Device Control Protocol devices further
          along the path as well as the use of other NAT hole-punching protocols.
</p>
<p>Applications that intend to create port mappings on a residential gateway supporting the
          IGD Standardized Device Control Protocol need to have embedded control point
          functionality, enabling them to create port mappings from TCP or UDP port on the external
          IPv4 address to the corresponding ports on the internal IPv4 addresses.
</p>
<p>The protocol is implemented in more than 90% of the consumer routers, although the
          functionality might not be enabled by default.
          
</p>
<a name="pmp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
NAT-PMP - NAT Port Mapping Protocol</h3>

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
Protocol Overview</h3>

<p>The NAT Port Mapping Protocol <a class='info' href='#I-D.cheshire-nat-pmp'>[I&#8209;D.cheshire&#8209;nat&#8209;pmp]<span> (</span><span class='info'>Cheshire, S., &ldquo;NAT Port Mapping Protocol (NAT-PMP),&rdquo; April&nbsp;2008.</span><span>)</span></a> is a light-weight
          binary protocol running on top of UDP between client hosts and their IPv4 gateway. Clients
          can send requests to their first-hop gateway on a well-known UDP port, in order to
          determine whether NAT-PMP is supported. If that is the case, they will also learn the
          external IPv4 address of the gateway device.
</p>
<p>If the gateway supports NAT-PMP, a host can assume that it is behind a NAT and start
          sending request for mapping of external TCP or UDP ports on the external IPv4 address.
          Mappings can be destroyed explicitly. They also automatically expire after a timeout that
          can be negotiated per mapping, unless refreshed.
</p>
<p>Through the use of link-local multicast, the gateway can notify hosts if its external IP
          changes, and/or if it has rebooted. In the latter case, hosts are expected to recreate any
          mappings. This procedure attempts to protect against loss of state at the gateway.
</p>
<p>NAT-PMP assumes that there is one and only one NAT along the path, which also has to be
          the first-hop gateway. A gateway must not enable NAT-PMP if it is does not perform
          address/port translation.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2"></a><h3>9.2.&nbsp;
Protocol Analysis</h3>

<p>NAT-PMP is applicable to small, unmanaged, non-routed networks, connecting multiple hosts
          to the IPv4 Internet through a single public IPv4 address. It does not require any
          configuration. Support from the gateway can be auto-detected by clients, and the trust
          model is solely based on network attachment. There is no support for IPv6, nor is there
          support for transport protocols other than TCP or UDP. Nested NATs and non-NAT'ing
          firewalls are not supported.
</p>
<p>NAT-PMP covers the same use cases as <a class='info' href='#UPNP'>[UPNP]<span> (</span><span class='info'>UPnP Forum, &ldquo;Internet Gateway Device (IGD) Standardized Device Control Protocol V 1.0,&rdquo; November&nbsp;2001.</span><span>)</span></a>, although it is not as widely
          deployed today. (NAT-PMP is currently mostly implemented by equipment from Apple Computer,
          Inc.). The specification is recent, but nevertheless mature.
</p>
<p>Applications will normally need to be modified to explicitly request port mappings from
          the operating system, which would then operate the NAT-PMP state machine and message
          handling. By design, the protocol allows applications to expose services to the outside,
          so hole-punching could conceivably be done automatically whenever an application listens
          to a local TCP port (although this would probably have unwelcome security implications).
</p>
<a name="stun"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
STUN - Controlling NAT Bindings using STUN</h3>

<p>To be completed <a class='info' href='#I-D.wing-behave-nat-control-stun-usage'>[I&#8209;D.wing&#8209;behave&#8209;nat&#8209;control&#8209;stun&#8209;usage]<span> (</span><span class='info'>Wing, D., Rosenberg, J., and H. Tschofenig, &ldquo;Discovering, Querying, and Controlling Firewalls and NATs,&rdquo; October&nbsp;2007.</span><span>)</span></a>.
</p>
<a name="rsip"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
RSIP - Realm-Specific IP</h3>

<p>To be completed <a class='info' href='#RFC3103'>[RFC3103]<span> (</span><span class='info'>Borella, M., Grabelsky, D., Lo, J., and K. Taniguchi, &ldquo;Realm Specific IP: Protocol Specification,&rdquo; October&nbsp;2001.</span><span>)</span></a>.
</p>
<a name="ald"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
ALD - Application Listener Discovery for IPv6</h3>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.1"></a><h3>12.1.&nbsp;
Protocol Overview</h3>

<p>Application Listener Discovery for IPv6 <a class='info' href='#I-D.woodyatt-ald'>[I&#8209;D.woodyatt&#8209;ald]<span> (</span><span class='info'>Woodyatt, J., &ldquo;Application Listener Discovery (ALD) for IPv6,&rdquo; July&nbsp;2008.</span><span>)</span></a> is a
          light-weight, binary protocol to explicitly punch holes through stateful IPv6 firewalls.
          It uses ICMPv6 for signaling and is auto-configured through an explicit ICMPv6 router
          advertisement option.
</p>
<p>If the gateway supports ALD, a host can request the opening of holes for any incoming
          packet toward its own IPv6 address, based on one of multiple possible criteria: </p>
<ul class="text">
<li>always
</li>
<li>an IP protocol (excluding IPv6 extension headers)
</li>
<li>for any standard transport protocol, a destination port number
</li>
<li>for IPsec ESP, an SPI value
</li>
</ul>

<p>Holes automatically expire if not refreshed before a negotiated timeout. The gateway can
          additionally notify hosts through unsolicited advertisements if it has rebooted or lost
          state.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.2"></a><h3>12.2.&nbsp;
Protocol Analysis</h3>

<p>ALD is aimed at unmanaged IPv6 networks, where it might not be acceptable to pass any
          unsolicited packets coming from the outside toward any hosts in the internal network. ALD
          needs support from all IPv6 routers within the network, because clients learn the ALD
          middlebox address through IPv6 Neighbor Discovery auto-configuration. It is expected that
          ALD will operate on the router itself in most cases. As with IPv6 Neighbor Discovery,
          there is no authentication. 
</p>
<p>The specification is currently a work-in-progress; there is no known deployment to date.
          Applications would supposedly need slight modifications, similar as with <a class='info' href='#UPNP'>[UPNP]<span> (</span><span class='info'>UPnP Forum, &ldquo;Internet Gateway Device (IGD) Standardized Device Control Protocol V 1.0,&rdquo; November&nbsp;2001.</span><span>)</span></a> or <a class='info' href='#I-D.cheshire-nat-pmp'>[I&#8209;D.cheshire&#8209;nat&#8209;pmp]<span> (</span><span class='info'>Cheshire, S., &ldquo;NAT Port Mapping Protocol (NAT-PMP),&rdquo; April&nbsp;2008.</span><span>)</span></a>.
</p>
<p>ALD can handle "pinholes" for any transport protocol, although it is limited to IPv6
          networks, and is meant to restore the ability to operate general-purpose servers behind
          stateful firewalls. It currently does not explicitly support nesting, though ALD
          middleboxes could probably forward pinholes request in a hierarchical manner (from
          innermost to outermost device).
</p>
<a name="nls"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
NLS - Network Layer Signaling Transport Layer</h3>

<p>To be completed <a class='info' href='#I-D.shore-nls-fw'>[I&#8209;D.shore&#8209;nls&#8209;fw]<span> (</span><span class='info'>Shore, M., &ldquo;The NLS Firewall Application,&rdquo; February&nbsp;2006.</span><span>)</span></a>.
</p>
<a name="afwc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.14"></a><h3>14.&nbsp;
AFWC - Authorized IP Firewall Control Application</h3>

<p>To be completed <a class='info' href='#I-D.shore-afwc'>[I&#8209;D.shore&#8209;afwc]<span> (</span><span class='info'>Shore, M. and D. McGrew, &ldquo;An Authorized IP Firewall Control Application,&rdquo; September&nbsp;2006.</span><span>)</span></a>.
</p>
<a name="seccons"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.15"></a><h3>15.&nbsp;
Security Considerations</h3>

<p>This document is a survey of existing protocols and does not raise any new security
        considerations. The security considerations of the surveyed protocols are discussed in their
        respective specifications, at least for protocols developed within the IETF.
</p>
<a name="ianacons"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.16"></a><h3>16.&nbsp;
IANA Considerations</h3>

<p>This document raises no IANA considerations.
</p>
<a name="ack"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.17"></a><h3>17.&nbsp;
Acknowledgments</h3>

<p>The authors would like to thank Pasi Eronen, Albrecht Schwarz and Dan Wing for their
        comments on this document.
</p>
<p>Dave Thaler provided information on the "Works with Windows Vista" and "Certified for
        Windows Vista" logo program <a class='info' href='#VISTALOGO'>[VISTALOGO]<span> (</span><span class='info'>Microsoft Corporation, &ldquo;Windows Logo Program Device Requirements for Windows Vista Client and Windows             Server code named 'Longhorn' (Version 3.09),&rdquo; December&nbsp;2006.</span><span>)</span></a>.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>18.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.cheshire-nat-pmp">[I-D.cheshire-nat-pmp]</a></td>
<td class="author-text">Cheshire, S., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-cheshire-nat-pmp-03.txt">NAT Port Mapping Protocol (NAT-PMP)</a>,&rdquo; draft-cheshire-nat-pmp-03 (work in progress), April&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-cheshire-nat-pmp-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-behave-multicast">[I-D.ietf-behave-multicast]</a></td>
<td class="author-text">Wing, D. and T. Eckert, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-multicast-12.txt">IP Multicast Requirements for a Network Address (and port) Translator  (NAT)</a>,&rdquo; draft-ietf-behave-multicast-12 (work in progress), November&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-multicast-12.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-behave-nat-icmp">[I-D.ietf-behave-nat-icmp]</a></td>
<td class="author-text">Srisuresh, P., Ford, B., Sivakumar, S., and S. Guha, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-nat-icmp-12.txt">NAT Behavioral Requirements for ICMP protocol</a>,&rdquo; draft-ietf-behave-nat-icmp-12 (work in progress), January&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-nat-icmp-12.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-behave-tcp">[I-D.ietf-behave-tcp]</a></td>
<td class="author-text">Guha, S., Biswas, K., Ford, B., Sivakumar, S., and P. Srisuresh, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-tcp-08.txt">NAT Behavioral Requirements for TCP</a>,&rdquo; draft-ietf-behave-tcp-08 (work in progress), September&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-tcp-08.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-nsis-nslp-natfw">[I-D.ietf-nsis-nslp-natfw]</a></td>
<td class="author-text">Stiemerling, M., Tschofenig, H., Aoun, C., and E. Davies, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-nslp-natfw-25.txt">NAT/Firewall NSIS Signaling Layer Protocol (NSLP)</a>,&rdquo; draft-ietf-nsis-nslp-natfw-25 (work in progress), April&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-nslp-natfw-25.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-nsis-ntlp">[I-D.ietf-nsis-ntlp]</a></td>
<td class="author-text">Schulzrinne, H. and M. Stiemerling, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-ntlp-20.txt">GIST: General Internet Signalling Transport</a>,&rdquo; draft-ietf-nsis-ntlp-20 (work in progress), June&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-ntlp-20.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.manner-nsis-nslp-auth">[I-D.manner-nsis-nslp-auth]</a></td>
<td class="author-text">Manner, J., Stiemerling, M., Tschofenig, H., and R. Bless, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-manner-nsis-nslp-auth-04.txt">Authorization for NSIS Signaling Layer Protocols</a>,&rdquo; draft-manner-nsis-nslp-auth-04 (work in progress), July&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-manner-nsis-nslp-auth-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.shore-afwc">[I-D.shore-afwc]</a></td>
<td class="author-text">Shore, M. and D. McGrew, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-shore-afwc-00.txt">An Authorized IP Firewall Control Application</a>,&rdquo; draft-shore-afwc-00 (work in progress), September&nbsp;2006 (<a href="http://www.ietf.org/internet-drafts/draft-shore-afwc-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.shore-nls-fw">[I-D.shore-nls-fw]</a></td>
<td class="author-text">Shore, M., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-shore-nls-fw-00.txt">The NLS Firewall Application</a>,&rdquo; draft-shore-nls-fw-00 (work in progress), February&nbsp;2006 (<a href="http://www.ietf.org/internet-drafts/draft-shore-nls-fw-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.wing-behave-nat-control-stun-usage">[I-D.wing-behave-nat-control-stun-usage]</a></td>
<td class="author-text">Wing, D., Rosenberg, J., and H. Tschofenig, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-wing-behave-nat-control-stun-usage-05.txt">Discovering, Querying, and Controlling Firewalls and NATs</a>,&rdquo; draft-wing-behave-nat-control-stun-usage-05 (work in progress), October&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-wing-behave-nat-control-stun-usage-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.woodyatt-ald">[I-D.woodyatt-ald]</a></td>
<td class="author-text">Woodyatt, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-woodyatt-ald-03.txt">Application Listener Discovery (ALD) for IPv6</a>,&rdquo; draft-woodyatt-ald-03 (work in progress), July&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-woodyatt-ald-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1928">[RFC1928]</a></td>
<td class="author-text"><a href="mailto:mleech@bnr.ca">Leech, M.</a>, Ganis, M., Lee, Y., Kuris, R., Koblas, D., and L. Jones, &ldquo;<a href="http://tools.ietf.org/html/rfc1928">SOCKS Protocol Version 5</a>,&rdquo; RFC&nbsp;1928, March&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc1928.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3103">[RFC3103]</a></td>
<td class="author-text">Borella, M., Grabelsky, D., Lo, J., and K. Taniguchi, &ldquo;<a href="http://tools.ietf.org/html/rfc3103">Realm Specific IP: Protocol Specification</a>,&rdquo; RFC&nbsp;3103, October&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3103.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3303">[RFC3303]</a></td>
<td class="author-text">Srisuresh, P., Kuthan, J., Rosenberg, J., Molitor, A., and A. Rayhan, &ldquo;<a href="http://tools.ietf.org/html/rfc3303">Middlebox communication architecture and framework</a>,&rdquo; RFC&nbsp;3303, August&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3303.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4540">[RFC4540]</a></td>
<td class="author-text">Stiemerling, M., Quittek, J., and C. Cadar, &ldquo;<a href="http://tools.ietf.org/html/rfc4540">NEC's Simple Middlebox Configuration (SIMCO) Protocol Version 3.0</a>,&rdquo; RFC&nbsp;4540, May&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4540.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4787">[RFC4787]</a></td>
<td class="author-text">Audet, F. and C. Jennings, &ldquo;<a href="http://tools.ietf.org/html/rfc4787">Network Address Translation (NAT) Behavioral Requirements for Unicast UDP</a>,&rdquo; BCP&nbsp;127, RFC&nbsp;4787, January&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4787.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="UPNP">[UPNP]</a></td>
<td class="author-text">UPnP Forum, &ldquo;Internet Gateway Device (IGD) Standardized Device Control Protocol V 1.0,&rdquo; November&nbsp;2001.</td></tr>
<tr><td class="author-text" valign="top"><a name="VISTALOGO">[VISTALOGO]</a></td>
<td class="author-text">Microsoft Corporation, &ldquo;Windows Logo Program Device Requirements for Windows Vista Client and Windows
            Server code named 'Longhorn' (Version 3.09),&rdquo; December&nbsp;2006.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lars Eggert</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Research Center</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O. Box 407</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Group  FIN-00045</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 50 4824461</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:lars.eggert@nokia.com">lars.eggert@nokia.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://research.nokia.com/people/lars_eggert/">http://research.nokia.com/people/lars_eggert/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Pasi Sarolahti</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Research Center</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O. Box 407</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Group  FIN-00045</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 50 4876607</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:pasi.sarolahti@nokia.com">pasi.sarolahti@nokia.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.iki.fi/pasi.sarolahti/">http://www.iki.fi/pasi.sarolahti/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">R&eacute;mi Denis-Courmont</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Technology Platforms</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O. Box 407</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Group  FIN-00045</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 50 4876315</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:remi.denis-courmont@nokia.com">remi.denis-courmont@nokia.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.remlab.net/">http://www.remlab.net/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vlad Stirbu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Technology Platforms</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O. Box 407</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Group  FIN-00045</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 50 3860572</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:vlad.stirbu@nokia.com">vlad.stirbu@nokia.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hannes Tschofenig</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Otto-Hahn-Ring 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Munich, Bavaria  81739</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:hannes.tschofenig@nsn.com">hannes.tschofenig@nsn.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.tschofenig.com/">http://www.tschofenig.com/</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2007).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
