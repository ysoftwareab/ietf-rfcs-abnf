

IETF Mobile IP Working Group                          Charles E. Perkins
INTERNET DRAFT                                     Nokia Research Center
                                                         26 January 2004

             Foreign Agent Error Extension for Mobile IPv4
                    draft-perkins-mip4-faerr-00.txt


Status of This Memo

   This document is an individual submission to the Internet Engineering
   Task Force (IETF).  Comments should be submitted to the mip4@ietf.org
   mailing list.

   Distribution of this memo is unlimited.

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.  Internet-Drafts are working
   documents of the Internet Engineering Task Force (IETF), its areas,
   and its working groups.  Note that other groups may also distribute
   working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at
   any time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at:
        http://www.ietf.org/ietf/1id-abstracts.txt
   The list of Internet-Draft Shadow Directories can be accessed at:
        http://www.ietf.org/shadow.html.


Abstract

   This document specifies a new extension for use by Foreign Agents
   operating Mobile IP for IPv4.  The new extension option allows a
   foreign agent to supply an error code without disturbing the data
   supplied by the Home Agent within the Registration Reply message.
   In this way, the mobile node can verify that the Registration
   Reply message was generated by the Home Agent even in cases where
   the foreign agent is required by protocol to insert new status
   information into the Registration Reply message.












Perkins                  Expires 26 July 2004                   [Page i]

Internet Draft            FA Error Extension             26 January 2004


1. Introduction

   This document specifies a new non-skippable extension for use
   by Foreign Agents operating Mobile IP for IPv4 [2].  The new
   extension option allows a foreign agent to supply an error code
   without disturbing the data supplied by the Home Agent within the
   Registration Reply message.  In this way, the mobile node can verify
   that the Registration Reply message was generated by the Home Agent
   even in cases where the foreign agent is required by protocol to
   insert new status information into the Registration Reply message.


2. Terminology

   The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [1].  Other
   terminology is used as already defined in [2].


3. FA Error Extension Format

   The format of the FA Error Extension conforms to the Short Extension
   format specified for Mobile IPv4 [2].  The FA Error Extension is not
   skippable.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Type      |   Length      |    Sub-Type   |     Status    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      Type

         <To Be Assigned by IANA>

      Length

         4

      Sub-Type

         0

      Status

         A status code used by the foreign agent to supply status
         information to the mobile node.




Perkins                  Expires 26 July 2004                   [Page 1]

Internet Draft            FA Error Extension             26 January 2004


4. Operation and Use of the FA Error Extension

   The FA Error extension is only valid for use within Mobile IPv4
   Registration Reply messages.  The FA Error Extension is not
   skippable.  A mobile node that cannot correctly interpret the
   contents of the FA Error Extension MUST NOT use the care-of
   address provided in the Registration Reply message, until another
   Registration Request message has been sent and a successful
   Registration Reply message received.

   The status codes allowable for use within the FA Error Extension are
   as follows:

       64 reason unspecified
       65 administratively prohibited
       66 insufficient resources
       68 home agent failed authentication
       71 poorly formed Reply
       77 invalid care-of address
       78 registration timeout

   as defined in RFC 3344 [2] for use by the Foreign Agent.  Status
   codes for use with the FA Error extensions must not be differently
   defined for use in the Code field of Registration Reply messages.

   When a foreign agent appends a FA Error Extension to the Registration
   Reply as received from the Home Agent, it has to update the UDP
   Length field in the UDP header [3] to account for the extra 4 bytes
   of length.


5. IANA Considerations

   This specification reserves one number for the FA Error extension
   (see section 3) from the space of numbers for nonskippable mobility
   extensions (i.e., 0-127) defined in the specification for Mobile
   IPv4 [2].

   This specification also creates a new number space of sub-types for
   the type number of this extension.  Sub-type zero is to be allocated
   from this number space for the protocol extension specified in this
   document.  Future allocations from this number space require IETF
   consensus.


6. Security Considerations

   The extension in this document improves the security features
   of Mobile IPv4 by allowing the mobile node to be assured of the



Perkins                  Expires 26 July 2004                   [Page 2]

Internet Draft            FA Error Extension             26 January 2004


   authenticity of the information supplied within a Registration
   Request.  Previously, whenever the foreign agent was required to
   provide status information to the mobile node, it could only do so
   by destroying the ability of the mobile device to authenticated the
   Mobile-Home Authentication Extension data.


References

   [1] S. Bradner.  Key words for use in RFCs to Indicate Requirement
       Levels.  Request for Comments (Best Current Practice) 2119,
       Internet Engineering Task Force, March 1997.

   [2] C. Perkins.  IP Mobility Support.  Request for Comments (Proposed
       Standard) 3344, Internet Engineering Task Force, August 2002.

   [3] J. Postel.  User Datagram Protocol.  Request for Comments
       (Standard) 768, Internet Engineering Task Force, August 1980.


Author Address

   Questions about this memo can be directed to the author:

      Charles E. Perkins
      Communications Systems Lab
      Nokia Research Center
      313 Fairchild Drive

      Mountain View, California 94043
      USA
      Phone:  +1-650 625-2986
      Fax:  +1 650 625-2502
      EMail:  charles.perkins@.nokia.com


















Perkins                  Expires 26 July 2004                   [Page 3]

