<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Free Lossless Audio Codec</title>
<meta content="Michael Sandelman" name="author">
<meta content="Andrew Weaver" name="author">
<meta content="
       This document defines FLAC, which stands for Free Lossless Audio Codec, a free, open source codec for lossless audio compression and decompression. 
    " name="description">
<meta content="xml2rfc 3.7.0" name="generator">
<meta content="free,lossless,audio,codec,encoder,decoder,compression,compressor,archival,archive,archiving,backup,music" name="keyword">
<meta content="draft-ietf-cellar-flac-01" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.7.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.4
    google-i18n-address 2.4.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.3.1
    PyYAML 5.4.1
    requests 2.25.1
    setuptools 56.0.0
    six 1.15.0
-->
<link href="/tmp/draft-ietf-cellar-flac-01-qfzlnatw.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">FLAC</td>
<td class="right">April 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Sandelman &amp; Weaver</td>
<td class="center">Expires 29 October 2021</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">cellar</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-cellar-flac-01</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-04-27" class="published">27 April 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2021-10-29">29 October 2021</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Sandelman</div>
</div>
<div class="author">
      <div class="author-name">A. Weaver</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Free Lossless Audio Codec</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines FLAC, which stands for Free Lossless Audio Codec, a free, open source codec for lossless audio compression and decompression.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 29 October 2021.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-notation-and-conventions" class="xref">Notation and Conventions</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="xref">3</a>.  <a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-scope" class="xref">Scope</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-architecture" class="xref">Architecture</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-definitions" class="xref">Definitions</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-blocking" class="xref">Blocking</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-interchannel-decorrelation" class="xref">Interchannel Decorrelation</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-prediction" class="xref">Prediction</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-residual-coding" class="xref">Residual Coding</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-format" class="xref">Format</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="xref">11.1</a>.  <a href="#name-conventions" class="xref">Conventions</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="xref">11.2</a>.  <a href="#name-stream" class="xref">STREAM</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.3">
                <p id="section-toc.1-1.11.2.3.1"><a href="#section-11.3" class="xref">11.3</a>.  <a href="#name-metadata_block" class="xref">METADATA_BLOCK</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.4">
                <p id="section-toc.1-1.11.2.4.1"><a href="#section-11.4" class="xref">11.4</a>.  <a href="#name-metadata-block-header" class="xref">METADATA<em>BLOCK</em>HEADER</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.5">
                <p id="section-toc.1-1.11.2.5.1"><a href="#section-11.5" class="xref">11.5</a>.  <a href="#name-block_type" class="xref">BLOCK_TYPE</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.6">
                <p id="section-toc.1-1.11.2.6.1"><a href="#section-11.6" class="xref">11.6</a>.  <a href="#name-metadata-block-data" class="xref">METADATA<em>BLOCK</em>DATA</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.7">
                <p id="section-toc.1-1.11.2.7.1"><a href="#section-11.7" class="xref">11.7</a>.  <a href="#name-metadata-block-streaminfo" class="xref">METADATA<em>BLOCK</em>STREAMINFO</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.8">
                <p id="section-toc.1-1.11.2.8.1"><a href="#section-11.8" class="xref">11.8</a>.  <a href="#name-metadata-block-padding" class="xref">METADATA<em>BLOCK</em>PADDING</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.9">
                <p id="section-toc.1-1.11.2.9.1"><a href="#section-11.9" class="xref">11.9</a>.  <a href="#name-metadata-block-application" class="xref">METADATA<em>BLOCK</em>APPLICATION</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.10">
                <p id="section-toc.1-1.11.2.10.1"><a href="#section-11.10" class="xref">11.10</a>. <a href="#name-metadata-block-seektable" class="xref">METADATA<em>BLOCK</em>SEEKTABLE</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.11">
                <p id="section-toc.1-1.11.2.11.1"><a href="#section-11.11" class="xref">11.11</a>. <a href="#name-seekpoint" class="xref">SEEKPOINT</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.12">
                <p id="section-toc.1-1.11.2.12.1"><a href="#section-11.12" class="xref">11.12</a>. <a href="#name-metadata-block-vorbis_comme" class="xref">METADATA<em>BLOCK</em>VORBIS_COMMENT</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.13">
                <p id="section-toc.1-1.11.2.13.1"><a href="#section-11.13" class="xref">11.13</a>. <a href="#name-metadata-block-cuesheet" class="xref">METADATA<em>BLOCK</em>CUESHEET</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.14">
                <p id="section-toc.1-1.11.2.14.1"><a href="#section-11.14" class="xref">11.14</a>. <a href="#name-cuesheet_track" class="xref">CUESHEET_TRACK</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.15">
                <p id="section-toc.1-1.11.2.15.1"><a href="#section-11.15" class="xref">11.15</a>. <a href="#name-cuesheet-track-index" class="xref">CUESHEET<em>TRACK</em>INDEX</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.16">
                <p id="section-toc.1-1.11.2.16.1"><a href="#section-11.16" class="xref">11.16</a>. <a href="#name-metadata-block-picture" class="xref">METADATA<em>BLOCK</em>PICTURE</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.17">
                <p id="section-toc.1-1.11.2.17.1"><a href="#section-11.17" class="xref">11.17</a>. <a href="#name-picture_type" class="xref">PICTURE_TYPE</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.18">
                <p id="section-toc.1-1.11.2.18.1"><a href="#section-11.18" class="xref">11.18</a>. <a href="#name-frame" class="xref">FRAME</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.19">
                <p id="section-toc.1-1.11.2.19.1"><a href="#section-11.19" class="xref">11.19</a>. <a href="#name-frame_header" class="xref">FRAME_HEADER</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.11.2.19.2.1">
                    <p id="section-toc.1-1.11.2.19.2.1.1"><a href="#section-11.19.1" class="xref">11.19.1</a>.  <a href="#name-frame-header-reserved" class="xref">FRAME HEADER RESERVED</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.19.2.2">
                    <p id="section-toc.1-1.11.2.19.2.2.1"><a href="#section-11.19.2" class="xref">11.19.2</a>.  <a href="#name-blocking-strategy" class="xref">BLOCKING STRATEGY</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.19.2.3">
                    <p id="section-toc.1-1.11.2.19.2.3.1"><a href="#section-11.19.3" class="xref">11.19.3</a>.  <a href="#name-interchannel-sample-block-s" class="xref">INTERCHANNEL SAMPLE BLOCK SIZE</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.19.2.4">
                    <p id="section-toc.1-1.11.2.19.2.4.1"><a href="#section-11.19.4" class="xref">11.19.4</a>.  <a href="#name-sample-rate" class="xref">SAMPLE RATE</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.19.2.5">
                    <p id="section-toc.1-1.11.2.19.2.5.1"><a href="#section-11.19.5" class="xref">11.19.5</a>.  <a href="#name-channel-assignment" class="xref">CHANNEL ASSIGNMENT</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.19.2.6">
                    <p id="section-toc.1-1.11.2.19.2.6.1"><a href="#section-11.19.6" class="xref">11.19.6</a>.  <a href="#name-sample-size" class="xref">SAMPLE SIZE</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.19.2.7">
                    <p id="section-toc.1-1.11.2.19.2.7.1"><a href="#section-11.19.7" class="xref">11.19.7</a>.  <a href="#name-frame-header-reserved2" class="xref">FRAME HEADER RESERVED2</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.19.2.8">
                    <p id="section-toc.1-1.11.2.19.2.8.1"><a href="#section-11.19.8" class="xref">11.19.8</a>.  <a href="#name-coded-number" class="xref">CODED NUMBER</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.19.2.9">
                    <p id="section-toc.1-1.11.2.19.2.9.1"><a href="#section-11.19.9" class="xref">11.19.9</a>.  <a href="#name-block-size-int" class="xref">BLOCK SIZE INT</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.19.2.10">
                    <p id="section-toc.1-1.11.2.19.2.10.1"><a href="#section-11.19.10" class="xref">11.19.10</a>. <a href="#name-sample-rate-int" class="xref">SAMPLE RATE INT</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.19.2.11">
                    <p id="section-toc.1-1.11.2.19.2.11.1"><a href="#section-11.19.11" class="xref">11.19.11</a>. <a href="#name-frame-crc" class="xref">FRAME CRC</a></p>
</li>
                </ul>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.20">
                <p id="section-toc.1-1.11.2.20.1"><a href="#section-11.20" class="xref">11.20</a>. <a href="#name-frame_footer" class="xref">FRAME_FOOTER</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.21">
                <p id="section-toc.1-1.11.2.21.1"><a href="#section-11.21" class="xref">11.21</a>. <a href="#name-subframe" class="xref">SUBFRAME</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.22">
                <p id="section-toc.1-1.11.2.22.1"><a href="#section-11.22" class="xref">11.22</a>. <a href="#name-subframe_header" class="xref">SUBFRAME_HEADER</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.11.2.22.2.1">
                    <p id="section-toc.1-1.11.2.22.2.1.1"><a href="#section-11.22.1" class="xref">11.22.1</a>.  <a href="#name-subframe-type" class="xref">SUBFRAME TYPE</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.22.2.2">
                    <p id="section-toc.1-1.11.2.22.2.2.1"><a href="#section-11.22.2" class="xref">11.22.2</a>.  <a href="#name-wasted-bits-per-sample-flag" class="xref">WASTED BITS PER SAMPLE FLAG</a></p>
</li>
                </ul>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.23">
                <p id="section-toc.1-1.11.2.23.1"><a href="#section-11.23" class="xref">11.23</a>. <a href="#name-subframe_constant" class="xref">SUBFRAME_CONSTANT</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.24">
                <p id="section-toc.1-1.11.2.24.1"><a href="#section-11.24" class="xref">11.24</a>. <a href="#name-subframe_fixed" class="xref">SUBFRAME_FIXED</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.25">
                <p id="section-toc.1-1.11.2.25.1"><a href="#section-11.25" class="xref">11.25</a>. <a href="#name-subframe_lpc" class="xref">SUBFRAME_LPC</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.26">
                <p id="section-toc.1-1.11.2.26.1"><a href="#section-11.26" class="xref">11.26</a>. <a href="#name-subframe_verbatim" class="xref">SUBFRAME_VERBATIM</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.27">
                <p id="section-toc.1-1.11.2.27.1"><a href="#section-11.27" class="xref">11.27</a>. <a href="#name-residual" class="xref">RESIDUAL</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.11.2.27.2.1">
                    <p id="section-toc.1-1.11.2.27.2.1.1"><a href="#section-11.27.1" class="xref">11.27.1</a>.  <a href="#name-residual-coding-method" class="xref">RESIDUAL<em>CODING</em>METHOD</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.27.2.2">
                    <p id="section-toc.1-1.11.2.27.2.2.1"><a href="#section-11.27.2" class="xref">11.27.2</a>.  <a href="#name-residual-coding-method-part" class="xref">RESIDUAL<em>CODING</em>METHOD<em>PARTITIONED</em>EXP_GOLOMB</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.27.2.3">
                    <p id="section-toc.1-1.11.2.27.2.3.1"><a href="#section-11.27.3" class="xref">11.27.3</a>.  <a href="#name-residual-coding-method-parti" class="xref">RESIDUAL<em>CODING</em>METHOD<em>PARTITIONED</em>EXP_GOLOMB2</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.27.2.4">
                    <p id="section-toc.1-1.11.2.27.2.4.1"><a href="#section-11.27.4" class="xref">11.27.4</a>.  <a href="#name-encoded-residual" class="xref">ENCODED RESIDUAL</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-appendix.a" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">This is a detailed description of the FLAC format. There is also a companion document that describes <a href="https://xiph.org/flac/ogg_mapping.html">FLAC-to-Ogg mapping</a>.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">For a user-oriented overview, see <a href="https://xiph.org/flac/documentation_format_overview.html">About the FLAC Format</a>.<a href="#section-1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="notation-and-conventions">
<section id="section-2">
      <h2 id="name-notation-and-conventions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-notation-and-conventions" class="section-name selfRef">Notation and Conventions</a>
      </h2>
<p id="section-2-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when, they appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgments">
<section id="section-3">
      <h2 id="name-acknowledgments">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-3-1">FLAC owes much to the many people who have advanced the audio compression field so freely. For instance:
- <a href="http://svr-www.eng.cam.ac.uk/~ajr/">A. J. Robinson</a> for his work on <a href="http://svr-www.eng.cam.ac.uk/reports/abstracts/robinson_tr156.html">Shorten</a>; his paper is a good starting point on some of the basic methods used by FLAC. FLAC trivially extends and improves the fixed predictors, LPC coefficient quantization, and Exponential-Golomb coding used in Shorten.
- <a href="https://web.archive.org/web/20040215005354/http://csi.usc.edu/faculty/golomb.html">S. W. Golomb</a> and Robert F. Rice; their universal codes are used by FLAC's entropy coder.
- N. Levinson and J. Durbin; the reference encoder uses an algorithm developed and refined by them for determining the LPC coefficients from the autocorrelation coefficients.
- And of course, <a href="http://en.wikipedia.org/wiki/Claude_Shannon">Claude Shannon</a><a href="#section-3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="scope">
<section id="section-4">
      <h2 id="name-scope">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-scope" class="section-name selfRef">Scope</a>
      </h2>
<p id="section-4-1">It is a known fact that no algorithm can losslessly compress all possible input, so most compressors restrict themselves to a useful domain and try to work as well as possible within that domain. FLAC's domain is audio data. Though it can losslessly code any input, only certain kinds of input will get smaller. FLAC exploits the fact that audio data typically has a high degree of sample-to-sample correlation.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">Within the audio domain, there are many possible subdomains. For example: low bitrate speech, high-bitrate multi-channel music, etc. FLAC itself does not target a specific subdomain, but many of the default parameters of the reference encoder are tuned to CD-quality music data (i.e. 44.1 kHz, 2 channel, 16 bits per sample). The effect of the encoding parameters on different kinds of audio data will be examined later.<a href="#section-4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="architecture">
<section id="section-5">
      <h2 id="name-architecture">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-architecture" class="section-name selfRef">Architecture</a>
      </h2>
<p id="section-5-1">Similar to many audio coders, a FLAC encoder has the following stages:<a href="#section-5-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-2.1">
          <p id="section-5-2.1.1"><code>Blocking</code> (see <a href="#blocking">section on Blocking</a>). The input is broken up into many contiguous blocks. With FLAC, the blocks MAY vary in size. The optimal size of the block is usually affected by many factors, including the sample rate, spectral characteristics over time, etc. Though FLAC allows the block size to vary within a stream, the reference encoder uses a fixed block size.<a href="#section-5-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-2.2">
          <p id="section-5-2.2.1"><code>Interchannel Decorrelation</code> (see <a href="#interchannel-decorrelation">section on Interchannel Decorrelation</a>). In the case of stereo streams, the encoder will create mid and side signals based on the average and difference (respectively) of the left and right channels. The encoder will then pass the best form of the signal to the next stage.<a href="#section-5-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-2.3">
          <p id="section-5-2.3.1"><code>Prediction</code> (see <a href="#prediction">section on Prediction</a>). The block is passed through a prediction stage where the encoder tries to find a mathematical description (usually an approximate one) of the signal. This description is typically much smaller than the raw signal itself. Since the methods of prediction are known to both the encoder and decoder, only the parameters of the predictor need be included in the compressed stream. FLAC currently uses four different classes of predictors, but the format has reserved space for additional methods. FLAC allows the class of predictor to change from block to block, or even within the channels of a block.<a href="#section-5-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-2.4">
          <p id="section-5-2.4.1"><code>Residual Coding</code> (See <a href="#residual-coding">section on Residual Coding</a>). If the predictor does not describe the signal exactly, the difference between the original signal and the predicted signal (called the error or residual signal) MUST be coded losslessly. If the predictor is effective, the residual signal will require fewer bits per sample than the original signal. FLAC currently uses only one method for encoding the residual, but the format has reserved space for additional methods. FLAC allows the residual coding method to change from block to block, or even within the channels of a block.<a href="#section-5-2.4.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-5-3">In addition, FLAC specifies a metadata system, which allows arbitrary information about the stream to be included at the beginning of the stream.<a href="#section-5-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="definitions">
<section id="section-6">
      <h2 id="name-definitions">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-definitions" class="section-name selfRef">Definitions</a>
      </h2>
<p id="section-6-1">Many terms like "block" and "frame" are used to mean different things in different encoding schemes. For example, a frame in MP3 corresponds to many samples across several channels, whereas an S/PDIF frame represents just one sample for each channel. The definitions we use for FLAC follow. Note that when we talk about blocks and subblocks we are referring to the raw unencoded audio data that is the input to the encoder, and when we talk about frames and subframes, we are referring to the FLAC-encoded data.<a href="#section-6-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-2.1">
          <p id="section-6-2.1.1"><strong>Block</strong>: One or more audio samples that span several channels.<a href="#section-6-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-2.2">
          <p id="section-6-2.2.1"><strong>Subblock</strong>: One or more audio samples within a channel. A block contains one subblock for each channel, and all subblocks contain the same number of samples.<a href="#section-6-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-2.3">
          <p id="section-6-2.3.1"><strong>Blocksize</strong>: The number of samples in any of a block's subblocks. For example, a one second block sampled at 44.1 kHz has a blocksize of 44100, regardless of the number of channels.<a href="#section-6-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-2.4">
          <p id="section-6-2.4.1"><strong>Frame</strong>: A frame header plus one or more subframes.<a href="#section-6-2.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-2.5">
          <p id="section-6-2.5.1"><strong>Subframe</strong>: A subframe header plus one or more encoded samples from a given channel. All subframes within a frame will contain the same number of samples.<a href="#section-6-2.5.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-2.6">
          <p id="section-6-2.6.1"><strong>Exponential-Golomb coding</strong>: One of Robert Rice's universal coding schemes, FLAC's residual coder, compresses data by writing the number of bits to be read minus 1, before writing the actual value.<a href="#section-6-2.6.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-2.7">
          <p id="section-6-2.7.1"><strong>LPC</strong>: <a href="https://en.wikipedia.org/wiki/Linear_predictive_coding">Linear predictive coding</a>.<a href="#section-6-2.7.1" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="blocking">
<section id="section-7">
      <h2 id="name-blocking">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-blocking" class="section-name selfRef">Blocking</a>
      </h2>
<p id="section-7-1">The size used for blocking the audio data has a direct effect on the compression ratio. If the block size is too small, the resulting large number of frames mean that excess bits will be wasted on frame headers. If the block size is too large, the characteristics of the signal MAY vary so much that the encoder will be unable to find a good predictor. In order to simplify encoder/decoder design, FLAC imposes a minimum block size of 16 samples, and a maximum block size of 65535 samples. This range covers the optimal size for all of the audio data FLAC supports.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">Currently the reference encoder uses a fixed block size, optimized on the sample rate of the input. Future versions MAY vary the block size depending on the characteristics of the signal.<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">Blocked data is passed to the predictor stage one subblock (channel) at a time. Each subblock is independently coded into a subframe, and the subframes are concatenated into a frame. Because each channel is coded separately, one channel of a stereo frame MAY be encoded as a constant subframe, and the other an LPC subframe.<a href="#section-7-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="interchannel-decorrelation">
<section id="section-8">
      <h2 id="name-interchannel-decorrelation">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-interchannel-decorrelation" class="section-name selfRef">Interchannel Decorrelation</a>
      </h2>
<p id="section-8-1">In stereo streams, many times there is an exploitable amount of correlation between the left and right channels. FLAC allows the frames of stereo streams to have different channel assignments, and an encoder MAY choose to use the best representation on a frame-by-frame basis.<a href="#section-8-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8-2.1">
          <p id="section-8-2.1.1"><strong>Independent</strong>. The left and right channels are coded independently.<a href="#section-8-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-8-2.2">
          <p id="section-8-2.2.1"><strong>Mid-side</strong>. The left and right channels are transformed into mid and side channels. The mid channel is the midpoint (average) of the left and right signals, and the side is the difference signal (left minus right).<a href="#section-8-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-8-2.3">
          <p id="section-8-2.3.1"><strong>Left-side</strong>. The left channel and side channel are coded.<a href="#section-8-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-8-2.4">
          <p id="section-8-2.4.1"><strong>Right-side</strong>. The right channel and side channel are coded.<a href="#section-8-2.4.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-8-3">Surprisingly, the left-side and right-side forms can be the most efficient in many frames, even though the raw number of bits per sample needed for the original signal is slightly more than that needed for independent or mid-side coding.<a href="#section-8-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prediction">
<section id="section-9">
      <h2 id="name-prediction">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-prediction" class="section-name selfRef">Prediction</a>
      </h2>
<p id="section-9-1">FLAC uses four methods for modeling the input signal:<a href="#section-9-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-9-2">
<li id="section-9-2.1">
          <p id="section-9-2.1.1"><strong>Verbatim</strong>. This is essentially a zero-order predictor of the signal. The predicted signal is zero, meaning the residual is the signal itself, and the compression is zero. This is the baseline against which the other predictors are measured. If you feed random data to the encoder, the verbatim predictor will probably be used for every subblock. Since the raw signal is not actually passed through the residual coding stage (it is added to the stream 'verbatim'), the encoding results will not be the same as a zero-order linear predictor.<a href="#section-9-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-9-2.2">
          <p id="section-9-2.2.1"><strong>Constant</strong>. This predictor is used whenever the subblock is pure DC ("digital silence"), i.e. a constant value throughout. The signal is run-length encoded and added to the stream.<a href="#section-9-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-9-2.3">
          <p id="section-9-2.3.1"><strong>Fixed linear predictor</strong>. FLAC uses a class of computationally-efficient fixed linear predictors (for a good description, see <a href="http://www.hpl.hp.com/techreports/1999/HPL-1999-144.pdf">audiopak</a> and <a href="http://svr-www.eng.cam.ac.uk/reports/abstracts/robinson_tr156.html">shorten</a>). FLAC adds a fourth-order predictor to the zero-to-third-order predictors used by Shorten. Since the predictors are fixed, the predictor order is the only parameter that needs to be stored in the compressed stream. The error signal is then passed to the residual coder.<a href="#section-9-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-9-2.4">
          <p id="section-9-2.4.1"><strong>FIR Linear prediction</strong>. For more accurate modeling (at a cost of slower encoding), FLAC supports up to 32nd order FIR linear prediction (again, for information on linear prediction, see <a href="http://www.hpl.hp.com/techreports/1999/HPL-1999-144.pdf">audiopak</a> and <a href="http://svr-www.eng.cam.ac.uk/reports/abstracts/robinson_tr156.html">shorten</a>). The reference encoder uses the Levinson-Durbin method for calculating the LPC coefficients from the autocorrelation coefficients, and the coefficients are quantized before computing the residual. Whereas encoders such as Shorten used a fixed quantization for the entire input, FLAC allows the quantized coefficient precision to vary from subframe to subframe. The FLAC reference encoder estimates the optimal precision to use based on the block size and dynamic range of the original signal.<a href="#section-9-2.4.1" class="pilcrow">¶</a></p>
</li>
      </ol>
</section>
</div>
<div id="residual-coding">
<section id="section-10">
      <h2 id="name-residual-coding">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-residual-coding" class="section-name selfRef">Residual Coding</a>
      </h2>
<p id="section-10-1">FLAC uses Exponential-Golomb (a variant of Rice) coding as its residual encoder. You can learn more about <a href="https://en.wikipedia.org/wiki/Exponential-Golomb_coding">exp-golomb coding</a> on Wikipedia.<a href="#section-10-1" class="pilcrow">¶</a></p>
<p id="section-10-2">FLAC currently defines two similar methods for the coding of the error signal from the prediction stage. The error signal is coded using Exponential-Golomb codes in one of two ways:<a href="#section-10-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-10-3">
<li id="section-10-3.1">
          <p id="section-10-3.1.1">the encoder estimates a single exp-golomb parameter based on the variance of the residual and exp-golomb codes the entire residual using this parameter;<a href="#section-10-3.1.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-10-3.2">
          <p id="section-10-3.2.1">the residual is partitioned into several equal-length regions of contiguous samples, and each region is coded with its own exp-golomb parameter based on the region's mean.<a href="#section-10-3.2.1" class="pilcrow">¶</a></p>
</li>
      </ol>
<p id="section-10-4">(Note that the first method is a special case of the second method with one partition, except the exp-golomb parameter is based on the residual variance instead of the mean.)<a href="#section-10-4" class="pilcrow">¶</a></p>
<p id="section-10-5">The FLAC format has reserved space for other coding methods. Some possibilities for volunteers would be to explore better context-modeling of the exp-golomb parameter, or Huffman coding. See <a href="http://www.hpl.hp.com/techreports/98/HPL-98-193.html">LOCO-I</a> and <a href="http://web.archive.org/web/20140827133312/http://www.cs.tut.fi/~albert/Dev/pucrunch/packing.html">pucrunch</a> for descriptions of several universal codes.<a href="#section-10-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="format">
<section id="section-11">
      <h2 id="name-format">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-format" class="section-name selfRef">Format</a>
      </h2>
<p id="section-11-1">This section specifies the FLAC bitstream format. FLAC has no format version information, but it does contain reserved space in several places. Future versions of the format MAY use this reserved space safely without breaking the format of older streams. Older decoders MAY choose to abort decoding or skip data encoded with newer methods. Apart from reserved patterns, in places the format specifies invalid patterns, meaning that the patterns MAY never appear in any valid bitstream, in any prior, present, or future versions of the format. These invalid patterns are usually used to make the synchronization mechanism more robust.<a href="#section-11-1" class="pilcrow">¶</a></p>
<p id="section-11-2">All numbers used in a FLAC bitstream MUST be integers; there are no floating-point representations. All numbers MUST be big-endian coded. All numbers MUST be unsigned unless otherwise specified.<a href="#section-11-2" class="pilcrow">¶</a></p>
<p id="section-11-3">Before the formal description of the stream, an overview might be helpful.<a href="#section-11-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11-4.1">A FLAC bitstream consists of the "fLaC" (i.e. 0x664C6143) marker at the beginning of the stream, followed by a mandatory metadata block (called the STREAMINFO block), any number of other metadata blocks, then the audio frames.<a href="#section-11-4.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-11-4.2">
          <p id="section-11-4.2.1">FLAC supports up to 128 kinds of metadata blocks; currently the following are defined:<a href="#section-11-4.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11-4.2.2.1">
              <code>STREAMINFO</code>: This block has information about the whole stream, like sample rate, number of channels, total number of samples, etc. It MUST be present as the first metadata block in the stream. Other metadata blocks MAY follow, and ones that the decoder doesn't understand, it will skip.<a href="#section-11-4.2.2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-11-4.2.2.2">
              <code>PADDING</code>: This block allows for an arbitrary amount of padding. The contents of a PADDING block have no meaning. This block is useful when it is known that metadata will be edited after encoding; the user can instruct the encoder to reserve a PADDING block of sufficient size so that when metadata is added, it will simply overwrite the padding (which is relatively quick) instead of having to insert it into the right place in the existing file (which would normally require rewriting the entire file).<a href="#section-11-4.2.2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-11-4.2.2.3">
              <code>APPLICATION</code>: This block is for use by third-party applications. The only mandatory field is a 32-bit identifier. This ID is granted upon request to an application by the FLAC maintainers. The remainder is of the block is defined by the registered application. Visit the <a href="https://xiph.org/flac/id.html">registration page</a> if you would like to register an ID for your application with FLAC.<a href="#section-11-4.2.2.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-11-4.2.2.4">
              <code>SEEKTABLE</code>: This is an OPTIONAL block for storing seek points. It is possible to seek to any given sample in a FLAC stream without a seek table, but the delay can be unpredictable since the bitrate MAY vary widely within a stream. By adding seek points to a stream, this delay can be significantly reduced. Each seek point takes 18 bytes, so 1% resolution within a stream adds less than 2K. There can be only one SEEKTABLE in a stream, but the table can have any number of seek points. There is also a special 'placeholder' seekpoint which will be ignored by decoders but which can be used to reserve space for future seek point insertion.<a href="#section-11-4.2.2.4" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-11-4.2.2.5">
              <code>VORBIS_COMMENT</code>: This block is for storing a list of human-readable name/value pairs. Values are encoded using UTF-8. It is an implementation of the <a href="http://xiph.org/vorbis/doc/v-comment.html">Vorbis comment specification</a> (without the framing bit). This is the only officially supported tagging mechanism in FLAC. There MUST be only zero or one VORBIS_COMMENT blocks in a stream. In some external documentation, Vorbis comments are called FLAC tags to lessen confusion.<a href="#section-11-4.2.2.5" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-11-4.2.2.6">
              <code>CUESHEET</code>: This block is for storing various information that can be used in a cue sheet. It supports track and index points, compatible with Red Book CD digital audio discs, as well as other CD-DA metadata such as media catalog number and track ISRCs. The CUESHEET block is especially useful for backing up CD-DA discs, but it can be used as a general purpose cueing mechanism for playback.<a href="#section-11-4.2.2.6" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-11-4.2.2.7">
              <code>PICTURE</code>: This block is for storing pictures associated with the file, most commonly cover art from CDs. There MAY be more than one PICTURE block in a file. The picture format is similar to the <a href="http://www.id3.org/id3v2.4.0-frames">APIC frame in ID3v2</a>. The PICTURE block has a type, MIME type, and UTF-8 description like ID3v2, and supports external linking via URL (though this is discouraged). The differences are that there is no uniqueness constraint on the description field, and the MIME type is mandatory. The FLAC PICTURE block also includes the resolution, color depth, and palette size so that the client can search for a suitable picture without having to scan them all.<a href="#section-11-4.2.2.7" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li class="normal" id="section-11-4.3">
          <p id="section-11-4.3.1">The audio data is composed of one or more audio frames. Each frame consists of a frame header, which contains a sync code, information about the frame like the block size, sample rate, number of channels, et cetera, and an 8-bit CRC. The frame header also contains either the sample number of the first sample in the frame (for variable-blocksize streams), or the frame number (for fixed-blocksize streams). This allows for fast, sample-accurate seeking to be performed. Following the frame header are encoded subframes, one for each channel, and finally, the frame is zero-padded to a byte boundary. Each subframe has its own header that specifies how the subframe is encoded.<a href="#section-11-4.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-4.4">
          <p id="section-11-4.4.1">Since a decoder MAY start decoding in the middle of a stream, there MUST be a method to determine the start of a frame. A 14-bit sync code begins each frame. The sync code will not appear anywhere else in the frame header. However, since it MAY appear in the subframes, the decoder has two other ways of ensuring a correct sync. The first is to check that the rest of the frame header contains no invalid data. Even this is not foolproof since valid header patterns can still occur within the subframes. The decoder's final check is to generate an 8-bit CRC of the frame header and compare this to the CRC stored at the end of the frame header.<a href="#section-11-4.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-4.5">
          <p id="section-11-4.5.1">Again, since a decoder MAY start decoding at an arbitrary frame in the stream, each frame header MUST contain some basic information about the stream because the decoder MAY not have access to the STREAMINFO metadata block at the start of the stream. This information includes sample rate, bits per sample, number of channels, etc. Since the frame header is pure overhead, it has a direct effect on the compression ratio. To keep the frame header as small as possible, FLAC uses lookup tables for the most commonly used values for frame parameters. For instance, the sample rate part of the frame header is specified using 4 bits. Eight of the bit patterns correspond to the commonly used sample rates of 8, 16, 22.05, 24, 32, 44.1, 48 or 96 kHz. However, odd sample rates can be specified by using one of the 'hint' bit patterns, directing the decoder to find the exact sample rate at the end of the frame header. The same method is used for specifying the block size and bits per sample. In this way, the frame header size stays small for all of the most common forms of audio data.<a href="#section-11-4.5.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-4.6">
          <p id="section-11-4.6.1">Individual subframes (one for each channel) are coded separately within a frame, and appear serially in the stream. In other words, the encoded audio data is NOT channel-interleaved. This reduces decoder complexity at the cost of requiring larger decode buffers. Each subframe has its own header specifying the attributes of the subframe, like prediction method and order, residual coding parameters, etc. The header is followed by the encoded audio data for that channel.<a href="#section-11-4.6.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-4.7">
          <p id="section-11-4.7.1"><code>FLAC</code> specifies a subset of itself as the Subset format. The purpose of this is to ensure that any streams encoded according to the Subset are truly "streamable", meaning that a decoder that cannot seek within the stream can still pick up in the middle of the stream and start decoding. It also makes hardware decoder implementations more practical by limiting the encoding parameters such that decoder buffer sizes and other resource requirements can be easily determined. <strong>flac</strong> generates Subset streams by default unless the "--lax" command-line option is used. The Subset makes the following limitations on what MAY be used in the stream:<a href="#section-11-4.7.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-4.8">
          <p id="section-11-4.8.1">The blocksize bits in the <code>FRAME_HEADER</code> (see <a href="#frameheader">FRAME_HEADER section</a>) MUST be 0b0001-0b1110. The blocksize MUST be &lt;= 16384; if the sample rate is &lt;= 48000 Hz, the blocksize MUST be &lt;= 4608 = 2^9 * 3^2.<a href="#section-11-4.8.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-4.9">
          <p id="section-11-4.9.1">The sample rate bits in the <code>FRAME_HEADER</code> MUST be 0b0001-0b1110.<a href="#section-11-4.9.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-4.10">
          <p id="section-11-4.10.1">The bits-per-sample bits in the <code>FRAME_HEADER</code> MUST be 0b001-0b111.<a href="#section-11-4.10.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-4.11">
          <p id="section-11-4.11.1">If the sample rate is &lt;= 48000 Hz, the filter order in <code>LPC subframes</code> (see <a href="#subframelpc">SUBFRAME_LPC section</a>) MUST be less than or equal to 12, i.e. the subframe type bits in the <code>SUBFRAME_HEADER</code> (see <a href="#subframeheader">SUBFRAME_HEADER section</a>) SHOULD NOT be 0b101100-0b111111.<a href="#section-11-4.11.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-4.12">
          <p id="section-11-4.12.1">The Rice partition order in an <code>exp-golomb coded residual section</code> (see <a href="#residualcodingmethodpartitionedexpgolomb">RESIDUAL_CODING_METHOD_PARTITIONE_EXP_GOLOMB section</a>) MUST be less than or equal to 8.<a href="#section-11-4.12.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<div id="conventions">
<section id="section-11.1">
        <h3 id="name-conventions">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-conventions" class="section-name selfRef">Conventions</a>
        </h3>
<p id="section-11.1-1">The following tables constitute a formal description of the FLAC format. Values expressed as <code>u(n)</code> represent unsigned big-endian integer using <code>n</code> bits. <code>n</code> may be expressed as an equation using <code>*</code> (multiplication), <code>/</code> (division), <code>+</code> (addition), or <code>-</code> (subtraction). An inclusive range of the number of bits expressed may be represented with an ellipsis, such as <code>u(m...n)</code>. The name of a value followed by an asterisk <code>*</code> indicates zero or more occurrences of the value. The name of a value followed by a plus sign <code>+</code> indicates one or more occurrences of the value.<a href="#section-11.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="stream">
<section id="section-11.2">
        <h3 id="name-stream">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-stream" class="section-name selfRef">STREAM</a>
        </h3>
<table class="center" id="table-1">
          <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">"fLaC", the FLAC stream marker in ASCII, meaning byte 0 of the stream is 0x66, followed by 0x4C 0x61 0x43</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>METADATA_BLOCK_STREAMINFO</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">This is the mandatory STREAMINFO metadata block that has the basic properties of the stream.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>METADATA_BLOCK</code>*</td>
              <td class="text-left" rowspan="1" colspan="1">Zero or more metadata blocks</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>FRAME</code>+</td>
              <td class="text-left" rowspan="1" colspan="1">One or more audio frames</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="metadata-block">
<section id="section-11.3">
        <h3 id="name-metadata_block">
<a href="#section-11.3" class="section-number selfRef">11.3. </a><a href="#name-metadata_block" class="section-name selfRef">METADATA_BLOCK</a>
        </h3>
<table class="center" id="table-2">
          <caption><a href="#table-2" class="selfRef">Table 2</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>METADATA_BLOCK_HEADER</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">A block header that specifies the type and size of the metadata block data.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>METADATA_BLOCK_DATA</code>
</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="metadata-block-header">
<section id="section-11.4">
        <h3 id="name-metadata-block-header">
<a href="#section-11.4" class="section-number selfRef">11.4. </a><a href="#name-metadata-block-header" class="section-name selfRef">METADATA<em>BLOCK</em>HEADER</a>
        </h3>
<table class="center" id="table-3">
          <caption><a href="#table-3" class="selfRef">Table 3</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(1)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Last-metadata-block flag: '1' if this block is the last metadata block before the audio blocks, '0' otherwise.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(7)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>BLOCK_TYPE</code>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(24)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Length (in bytes) of metadata to follow (does not include the size of the <code>METADATA_BLOCK_HEADER</code>)</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="block-type">
<section id="section-11.5">
        <h3 id="name-block_type">
<a href="#section-11.5" class="section-number selfRef">11.5. </a><a href="#name-block_type" class="section-name selfRef">BLOCK_TYPE</a>
        </h3>
<table class="center" id="table-4">
          <caption><a href="#table-4" class="selfRef">Table 4</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Value</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0</td>
              <td class="text-left" rowspan="1" colspan="1">STREAMINFO</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">1</td>
              <td class="text-left" rowspan="1" colspan="1">PADDING</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">2</td>
              <td class="text-left" rowspan="1" colspan="1">APPLICATION</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">3</td>
              <td class="text-left" rowspan="1" colspan="1">SEEKTABLE</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">4</td>
              <td class="text-left" rowspan="1" colspan="1">VORBIS_COMMENT</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">5</td>
              <td class="text-left" rowspan="1" colspan="1">CUESHEET</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">6</td>
              <td class="text-left" rowspan="1" colspan="1">PICTURE</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">7 - 126</td>
              <td class="text-left" rowspan="1" colspan="1">reserved</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">127</td>
              <td class="text-left" rowspan="1" colspan="1">invalid, to avoid confusion with a frame sync code</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="metadata-block-data">
<section id="section-11.6">
        <h3 id="name-metadata-block-data">
<a href="#section-11.6" class="section-number selfRef">11.6. </a><a href="#name-metadata-block-data" class="section-name selfRef">METADATA<em>BLOCK</em>DATA</a>
        </h3>
<table class="center" id="table-5">
          <caption><a href="#table-5" class="selfRef">Table 5</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>METADATA_BLOCK_STREAMINFO</code> || <code>METADATA_BLOCK_PADDING</code> || <code>METADATA_BLOCK_APPLICATION</code> || <code>METADATA_BLOCK_SEEKTABLE</code> || <code>METADATA_BLOCK_VORBIS_COMMENT</code> || <code>METADATA_BLOCK_CUESHEET</code> || <code>METADATA_BLOCK_PICTURE</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The block data MUST match the block type in the block header.</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="metadata-block-streaminfo">
<section id="section-11.7">
        <h3 id="name-metadata-block-streaminfo">
<a href="#section-11.7" class="section-number selfRef">11.7. </a><a href="#name-metadata-block-streaminfo" class="section-name selfRef">METADATA<em>BLOCK</em>STREAMINFO</a>
        </h3>
<table class="center" id="table-6">
          <caption><a href="#table-6" class="selfRef">Table 6</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(16)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The minimum block size (in samples) used in the stream.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(16)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The maximum block size (in samples) used in the stream. (Minimum blocksize == maximum blocksize) implies a fixed-blocksize stream.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(24)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The minimum frame size (in bytes) used in the stream. A value of <code>0</code> signifies that the value is not known.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(24)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The maximum frame size (in bytes) used in the stream. A value of <code>0</code> signifies that the value is not known.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(20)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Sample rate in Hz. Though 20 bits are available, the maximum sample rate is limited by the structure of frame headers to 655350 Hz. Also, a value of 0 is invalid.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(3)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">(number of channels)-1. FLAC supports from 1 to 8 channels</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(5)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">(bits per sample)-1. FLAC supports from 4 to 32 bits per sample. Currently the reference encoder and decoders only support up to 24 bits per sample.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(36)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Total samples in stream. 'Samples' means inter-channel sample, i.e. one second of 44.1 kHz audio will have 44100 samples regardless of the number of channels. A value of zero here means the number of total samples is unknown.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(128)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">MD5 signature of the unencoded audio data. This allows the decoder to determine if an error exists in the audio data even when the error does not result in an invalid bitstream.</td>
            </tr>
          </tbody>
        </table>
<p id="section-11.7-2">NOTE<a href="#section-11.7-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11.7-3.1">FLAC specifies a minimum block size of 16 and a maximum block size of 65535, meaning the bit patterns corresponding to the numbers 0-15 in the minimum blocksize and maximum blocksize fields are invalid.<a href="#section-11.7-3.1" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="metadata-block-padding">
<section id="section-11.8">
        <h3 id="name-metadata-block-padding">
<a href="#section-11.8" class="section-number selfRef">11.8. </a><a href="#name-metadata-block-padding" class="section-name selfRef">METADATA<em>BLOCK</em>PADDING</a>
        </h3>
<table class="center" id="table-7">
          <caption><a href="#table-7" class="selfRef">Table 7</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">n '0' bits (n MUST be a multiple of 8)</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="metadata-block-application">
<section id="section-11.9">
        <h3 id="name-metadata-block-application">
<a href="#section-11.9" class="section-number selfRef">11.9. </a><a href="#name-metadata-block-application" class="section-name selfRef">METADATA<em>BLOCK</em>APPLICATION</a>
        </h3>
<table class="center" id="table-8">
          <caption><a href="#table-8" class="selfRef">Table 8</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Registered application ID. (Visit the <a href="https://xiph.org/flac/id.html">registration page</a> to register an ID with FLAC.)</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Application data (n MUST be a multiple of 8)</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="metadata-block-seektable">
<section id="section-11.10">
        <h3 id="name-metadata-block-seektable">
<a href="#section-11.10" class="section-number selfRef">11.10. </a><a href="#name-metadata-block-seektable" class="section-name selfRef">METADATA<em>BLOCK</em>SEEKTABLE</a>
        </h3>
<table class="center" id="table-9">
          <caption><a href="#table-9" class="selfRef">Table 9</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>SEEKPOINT</code>+</td>
              <td class="text-left" rowspan="1" colspan="1">One or more seek points.</td>
            </tr>
          </tbody>
        </table>
<p id="section-11.10-2">NOTE
- The number of seek points is implied by the metadata header 'length' field, i.e. equal to length / 18.<a href="#section-11.10-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="seekpoint">
<section id="section-11.11">
        <h3 id="name-seekpoint">
<a href="#section-11.11" class="section-number selfRef">11.11. </a><a href="#name-seekpoint" class="section-name selfRef">SEEKPOINT</a>
        </h3>
<table class="center" id="table-10">
          <caption><a href="#table-10" class="selfRef">Table 10</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(64)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Sample number of first sample in the target frame, or <code>0xFFFFFFFFFFFFFFFF</code> for a placeholder point.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(64)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Offset (in bytes) from the first byte of the first frame header to the first byte of the target frame's header.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(16)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Number of samples in the target frame.</td>
            </tr>
          </tbody>
        </table>
<p id="section-11.11-2">NOTES<a href="#section-11.11-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11.11-3.1">For placeholder points, the second and third field values are undefined.<a href="#section-11.11-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-11.11-3.2">Seek points within a table MUST be sorted in ascending order by sample number.<a href="#section-11.11-3.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-11.11-3.3">Seek points within a table MUST be unique by sample number, with the exception of placeholder points.<a href="#section-11.11-3.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-11.11-3.4">The previous two notes imply that there MAY be any number of placeholder points, but they MUST all occur at the end of the table.<a href="#section-11.11-3.4" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="metadata-block-vorbis-comment">
<section id="section-11.12">
        <h3 id="name-metadata-block-vorbis_comme">
<a href="#section-11.12" class="section-number selfRef">11.12. </a><a href="#name-metadata-block-vorbis_comme" class="section-name selfRef">METADATA<em>BLOCK</em>VORBIS_COMMENT</a>
        </h3>
<table class="center" id="table-11">
          <caption><a href="#table-11" class="selfRef">Table 11</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Also known as FLAC tags, the contents of a vorbis comment packet as specified <a href="http://www.xiph.org/vorbis/doc/v-comment.html">here</a> (without the framing bit). Note that the vorbis comment spec allows for on the order of 2^64 bytes of data where as the FLAC metadata block is limited to 2^24 bytes. Given the stated purpose of vorbis comments, i.e. human-readable textual information, this limit is unlikely to be restrictive. Also note that the 32-bit field lengths are little-endian coded according to the vorbis spec, as opposed to the usual big-endian coding of fixed-length integers in the rest of FLAC.</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="metadata-block-cuesheet">
<section id="section-11.13">
        <h3 id="name-metadata-block-cuesheet">
<a href="#section-11.13" class="section-number selfRef">11.13. </a><a href="#name-metadata-block-cuesheet" class="section-name selfRef">METADATA<em>BLOCK</em>CUESHEET</a>
        </h3>
<table class="center" id="table-12">
          <caption><a href="#table-12" class="selfRef">Table 12</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(128*8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Media catalog number, in ASCII printable characters 0x20-0x7E. In general, the media catalog number SHOULD be 0 to 128 bytes long; any unused characters SHOULD be right-padded with NUL characters. For CD-DA, this is a thirteen digit number, followed by 115 NUL bytes.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(64)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The number of lead-in samples. This field has meaning only for CD-DA cuesheets; for other uses it SHOULD be 0. For CD-DA, the lead-in is the TRACK 00 area where the table of contents is stored; more precisely, it is the number of samples from the first sample of the media to the first sample of the first index point of the first track. According to the Red Book, the lead-in MUST be silence and CD grabbing software does not usually store it; additionally, the lead-in MUST be at least two seconds but MAY be longer. For these reasons the lead-in length is stored here so that the absolute position of the first track can be computed. Note that the lead-in stored here is the number of samples up to the first index point of the first track, not necessarily to INDEX 01 of the first track; even the first track MAY have INDEX 00 data.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(1)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>1</code> if the CUESHEET corresponds to a Compact Disc, else <code>0</code>.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(7+258*8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Reserved. All bits MUST be set to zero.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The number of tracks. Must be at least 1 (because of the requisite lead-out track). For CD-DA, this number MUST be no more than 100 (99 regular tracks and one lead-out track).</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>CUESHEET_TRACK</code>+</td>
              <td class="text-left" rowspan="1" colspan="1">One or more tracks. A CUESHEET block is REQUIRED to have a lead-out track; it is always the last track in the CUESHEET. For CD-DA, the lead-out track number MUST be 170 as specified by the Red Book, otherwise it MUST be 255.</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="cuesheet-track">
<section id="section-11.14">
        <h3 id="name-cuesheet_track">
<a href="#section-11.14" class="section-number selfRef">11.14. </a><a href="#name-cuesheet_track" class="section-name selfRef">CUESHEET_TRACK</a>
        </h3>
<table class="center" id="table-13">
          <caption><a href="#table-13" class="selfRef">Table 13</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(64)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Track offset in samples, relative to the beginning of the FLAC audio stream. It is the offset to the first index point of the track. (Note how this differs from CD-DA, where the track's offset in the TOC is that of the track's INDEX 01 even if there is an INDEX 00.) For CD-DA, the offset MUST be evenly divisible by 588 samples (588 samples = 44100 samples/s * 1/75 s).</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Track number. A track number of 0 is not allowed to avoid conflicting with the CD-DA spec, which reserves this for the lead-in. For CD-DA the number MUST be 1-99, or 170 for the lead-out; for non-CD-DA, the track number MUST for 255 for the lead-out. It is not REQUIRED but encouraged to start with track 1 and increase sequentially. Track numbers MUST be unique within a CUESHEET.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(12*8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Track ISRC. This is a 12-digit alphanumeric code; see <a href="http://isrc.ifpi.org/">here</a> and <a href="http://www.disctronics.co.uk/technology/cdaudio/cdaud_isrc.htm">here</a>. A value of 12 ASCII NUL characters MAY be used to denote absence of an ISRC.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(1)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The track type: 0 for audio, 1 for non-audio. This corresponds to the CD-DA Q-channel control bit 3.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(1)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The pre-emphasis flag: 0 for no pre-emphasis, 1 for pre-emphasis. This corresponds to the CD-DA Q-channel control bit 5; see <a href="http://www.chipchapin.com/CDMedia/cdda9.php3">here</a>.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(6+13*8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Reserved. All bits MUST be set to zero.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The number of track index points. There MUST be at least one index in every track in a CUESHEET except for the lead-out track, which MUST have zero. For CD-DA, this number SHOULD NOT be more than 100.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>CUESHEET_TRACK_INDEX</code>+</td>
              <td class="text-left" rowspan="1" colspan="1">For all tracks except the lead-out track, one or more track index points.</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="cuesheet-track-index">
<section id="section-11.15">
        <h3 id="name-cuesheet-track-index">
<a href="#section-11.15" class="section-number selfRef">11.15. </a><a href="#name-cuesheet-track-index" class="section-name selfRef">CUESHEET<em>TRACK</em>INDEX</a>
        </h3>
<table class="center" id="table-14">
          <caption><a href="#table-14" class="selfRef">Table 14</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(64)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Offset in samples, relative to the track offset, of the index point. For CD-DA, the offset MUST be evenly divisible by 588 samples (588 samples = 44100 samples/s * 1/75 s). Note that the offset is from the beginning of the track, not the beginning of the audio data.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The index point number. For CD-DA, an index number of 0 corresponds to the track pre-gap. The first index in a track MUST have a number of 0 or 1, and subsequently, index numbers MUST increase by 1. Index numbers MUST be unique within a track.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(3*8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Reserved. All bits MUST be set to zero.</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="metadata-block-picture">
<section id="section-11.16">
        <h3 id="name-metadata-block-picture">
<a href="#section-11.16" class="section-number selfRef">11.16. </a><a href="#name-metadata-block-picture" class="section-name selfRef">METADATA<em>BLOCK</em>PICTURE</a>
        </h3>
<table class="center" id="table-15">
          <caption><a href="#table-15" class="selfRef">Table 15</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The PICTURE_TYPE according to the ID3v2 APIC frame.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The length of the MIME type string in bytes.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n*8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The MIME type string, in printable ASCII characters 0x20-0x7E. The MIME type MAY also be <code>--&gt;</code> to signify that the data part is a URL of the picture instead of the picture data itself.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The length of the description string in bytes.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n*8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The description of the picture, in UTF-8.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The width of the picture in pixels.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The height of the picture in pixels.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The color depth of the picture in bits-per-pixel.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">For indexed-color pictures (e.g. GIF), the number of colors used, or <code>0</code> for non-indexed pictures.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The length of the picture data in bytes.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n*8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The binary picture data.</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="picture-type">
<section id="section-11.17">
        <h3 id="name-picture_type">
<a href="#section-11.17" class="section-number selfRef">11.17. </a><a href="#name-picture_type" class="section-name selfRef">PICTURE_TYPE</a>
        </h3>
<table class="center" id="table-16">
          <caption><a href="#table-16" class="selfRef">Table 16</a></caption>
<thead>
            <tr>
              <th class="text-right" rowspan="1" colspan="1">Value</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">0</td>
              <td class="text-left" rowspan="1" colspan="1">Other</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">1</td>
              <td class="text-left" rowspan="1" colspan="1">32x32 pixels 'file icon' (PNG only)</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">2</td>
              <td class="text-left" rowspan="1" colspan="1">Other file icon</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">3</td>
              <td class="text-left" rowspan="1" colspan="1">Cover (front)</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">4</td>
              <td class="text-left" rowspan="1" colspan="1">Cover (back)</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">5</td>
              <td class="text-left" rowspan="1" colspan="1">Leaflet page</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">6</td>
              <td class="text-left" rowspan="1" colspan="1">Media (e.g. label side of CD)</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">7</td>
              <td class="text-left" rowspan="1" colspan="1">Lead artist/lead performer/soloist</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">8</td>
              <td class="text-left" rowspan="1" colspan="1">Artist/performer</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">9</td>
              <td class="text-left" rowspan="1" colspan="1">Conductor</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">10</td>
              <td class="text-left" rowspan="1" colspan="1">Band/Orchestra</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">11</td>
              <td class="text-left" rowspan="1" colspan="1">Composer</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">12</td>
              <td class="text-left" rowspan="1" colspan="1">Lyricist/text writer</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">13</td>
              <td class="text-left" rowspan="1" colspan="1">Recording Location</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">14</td>
              <td class="text-left" rowspan="1" colspan="1">During recording</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">15</td>
              <td class="text-left" rowspan="1" colspan="1">During performance</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">16</td>
              <td class="text-left" rowspan="1" colspan="1">Movie/video screen capture</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">17</td>
              <td class="text-left" rowspan="1" colspan="1">A bright colored fish</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">18</td>
              <td class="text-left" rowspan="1" colspan="1">Illustration</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">19</td>
              <td class="text-left" rowspan="1" colspan="1">Band/artist logotype</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">20</td>
              <td class="text-left" rowspan="1" colspan="1">Publisher/Studio logotype</td>
            </tr>
          </tbody>
        </table>
<p id="section-11.17-2">Other values are reserved and SHOULD NOT be used. There MAY only be one each of picture type 1 and 2 in a file.<a href="#section-11.17-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="frame">
<section id="section-11.18">
        <h3 id="name-frame">
<a href="#section-11.18" class="section-number selfRef">11.18. </a><a href="#name-frame" class="section-name selfRef">FRAME</a>
        </h3>
<table class="center" id="table-17">
          <caption><a href="#table-17" class="selfRef">Table 17</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>FRAME_HEADER</code>
</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>SUBFRAME</code>+</td>
              <td class="text-left" rowspan="1" colspan="1">One SUBFRAME per channel.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(?)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Zero-padding to byte alignment.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>FRAME_FOOTER</code>
</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="frame-header">
<section id="section-11.19">
        <h3 id="name-frame_header">
<a href="#section-11.19" class="section-number selfRef">11.19. </a><a href="#name-frame_header" class="section-name selfRef">FRAME_HEADER</a>
        </h3>
<table class="center" id="table-18">
          <caption><a href="#table-18" class="selfRef">Table 18</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(14)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Sync code '0b11111111111110'</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(1)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>FRAME HEADER RESERVED</code>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(1)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>BLOCKING STRATEGY</code>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(4)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>INTERCHANNEL SAMPLE BLOCK SIZE</code>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(4)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>SAMPLE RATE</code>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(4)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>CHANNEL ASSIGNMENT</code>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(3)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>SAMPLE SIZE</code>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(1)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>FRAME HEADER RESERVED2</code>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(?)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>CODED NUMBER</code>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(?)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>BLOCK SIZE INT</code>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(?)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>SAMPLE RATE INT</code>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>FRAME CRC</code>
</td>
            </tr>
          </tbody>
        </table>
<div id="frame-header-reserved">
<section id="section-11.19.1">
          <h4 id="name-frame-header-reserved">
<a href="#section-11.19.1" class="section-number selfRef">11.19.1. </a><a href="#name-frame-header-reserved" class="section-name selfRef">FRAME HEADER RESERVED</a>
          </h4>
<table class="center" id="table-19">
            <caption><a href="#table-19" class="selfRef">Table 19</a></caption>
<thead>
              <tr>
                <th class="text-right" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">mandatory value</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">reserved for future use</td>
              </tr>
            </tbody>
          </table>
<p id="section-11.19.1-2">FRAME HEADER RESERVED MUST remain reserved for <code>0</code> in order for a FLAC frame's initial 15 bits to be distinguishable from the start of an MPEG audio frame (<a href="http://lists.xiph.org/pipermail/flac-dev/2008-December/002607.html">see also</a>).<a href="#section-11.19.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="blocking-strategy">
<section id="section-11.19.2">
          <h4 id="name-blocking-strategy">
<a href="#section-11.19.2" class="section-number selfRef">11.19.2. </a><a href="#name-blocking-strategy" class="section-name selfRef">BLOCKING STRATEGY</a>
          </h4>
<table class="center" id="table-20">
            <caption><a href="#table-20" class="selfRef">Table 20</a></caption>
<thead>
              <tr>
                <th class="text-right" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">fixed-blocksize stream; frame header encodes the frame number</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">variable-blocksize stream; frame header encodes the sample number</td>
              </tr>
            </tbody>
          </table>
<p id="section-11.19.2-2">The <code>BLOCKING STRATEGY</code> bit MUST be the same throughout the entire stream.<a href="#section-11.19.2-2" class="pilcrow">¶</a></p>
<p id="section-11.19.2-3">The <code>BLOCKING STRATEGY</code> bit determines how to calculate the sample number of the first sample in the frame. If the bit is <code>0</code> (fixed-blocksize), the frame header encodes the frame number as above, and the frame's starting sample number will be the frame number times the blocksize. If it is <code>1</code> (variable-blocksize), the frame header encodes the frame's starting sample number itself. (In the case of a fixed-blocksize stream, only the last block MAY be shorter than the stream blocksize; its starting sample number will be calculated as the frame number times the previous frame's blocksize, or zero if it is the first frame).<a href="#section-11.19.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="interchannel-sample-block-size">
<section id="section-11.19.3">
          <h4 id="name-interchannel-sample-block-s">
<a href="#section-11.19.3" class="section-number selfRef">11.19.3. </a><a href="#name-interchannel-sample-block-s" class="section-name selfRef">INTERCHANNEL SAMPLE BLOCK SIZE</a>
          </h4>
<table class="center" id="table-21">
            <caption><a href="#table-21" class="selfRef">Table 21</a></caption>
<thead>
              <tr>
                <th class="text-right" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0000</td>
                <td class="text-left" rowspan="1" colspan="1">reserved</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0001</td>
                <td class="text-left" rowspan="1" colspan="1">192 samples</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0010 - 0b0101</td>
                <td class="text-left" rowspan="1" colspan="1">576 * (2^(n-2)) samples, i.e. 576, 1152, 2304 or 4608</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0110</td>
                <td class="text-left" rowspan="1" colspan="1">get 8 bit (blocksize-1) from end of header</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0111</td>
                <td class="text-left" rowspan="1" colspan="1">get 16 bit (blocksize-1) from end of header</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b1000 - 0b1111</td>
                <td class="text-left" rowspan="1" colspan="1">256 * (2^(n-8)) samples, i.e. 256, 512, 1024, 2048, 4096, 8192, 16384 or 32768</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="sample-rate">
<section id="section-11.19.4">
          <h4 id="name-sample-rate">
<a href="#section-11.19.4" class="section-number selfRef">11.19.4. </a><a href="#name-sample-rate" class="section-name selfRef">SAMPLE RATE</a>
          </h4>
<table class="center" id="table-22">
            <caption><a href="#table-22" class="selfRef">Table 22</a></caption>
<thead>
              <tr>
                <th class="text-right" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0000</td>
                <td class="text-left" rowspan="1" colspan="1">get from STREAMINFO metadata block</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0001</td>
                <td class="text-left" rowspan="1" colspan="1">88.2 kHz</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0010</td>
                <td class="text-left" rowspan="1" colspan="1">176.4 kHz</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0011</td>
                <td class="text-left" rowspan="1" colspan="1">192 kHz</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0100</td>
                <td class="text-left" rowspan="1" colspan="1">8 kHz</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0101</td>
                <td class="text-left" rowspan="1" colspan="1">16 kHz</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0110</td>
                <td class="text-left" rowspan="1" colspan="1">22.05 kHz</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0111</td>
                <td class="text-left" rowspan="1" colspan="1">24 kHz</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b1000</td>
                <td class="text-left" rowspan="1" colspan="1">32 kHz</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b1001</td>
                <td class="text-left" rowspan="1" colspan="1">44.1 kHz</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b1010</td>
                <td class="text-left" rowspan="1" colspan="1">48 kHz</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b1011</td>
                <td class="text-left" rowspan="1" colspan="1">96 kHz</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b1100</td>
                <td class="text-left" rowspan="1" colspan="1">get 8 bit sample rate (in kHz) from end of header</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b1101</td>
                <td class="text-left" rowspan="1" colspan="1">get 16 bit sample rate (in Hz) from end of header</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b1110</td>
                <td class="text-left" rowspan="1" colspan="1">get 16 bit sample rate (in daHz) from end of header</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b1111</td>
                <td class="text-left" rowspan="1" colspan="1">invalid, to prevent sync-fooling string of 1s</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="channel-assignment">
<section id="section-11.19.5">
          <h4 id="name-channel-assignment">
<a href="#section-11.19.5" class="section-number selfRef">11.19.5. </a><a href="#name-channel-assignment" class="section-name selfRef">CHANNEL ASSIGNMENT</a>
          </h4>
<p id="section-11.19.5-1">For values 0b0000-0b0111, the value represents the (number of independent channels)-1. Where defined, the channel order follows SMPTE/ITU-R recommendations.<a href="#section-11.19.5-1" class="pilcrow">¶</a></p>
<table class="center" id="table-23">
            <caption><a href="#table-23" class="selfRef">Table 23</a></caption>
<thead>
              <tr>
                <th class="text-right" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0000</td>
                <td class="text-left" rowspan="1" colspan="1">1 channel: mono</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0001</td>
                <td class="text-left" rowspan="1" colspan="1">2 channels: left, right</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0010</td>
                <td class="text-left" rowspan="1" colspan="1">3 channels: left, right, center</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0011</td>
                <td class="text-left" rowspan="1" colspan="1">4 channels: front left, front right, back left, back right</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0100</td>
                <td class="text-left" rowspan="1" colspan="1">5 channels: front left, front right, front center, back/surround left, back/surround right</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0101</td>
                <td class="text-left" rowspan="1" colspan="1">6 channels: front left, front right, front center, LFE, back/surround left, back/surround right</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0110</td>
                <td class="text-left" rowspan="1" colspan="1">7 channels: front left, front right, front center, LFE, back center, side left, side right</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0111</td>
                <td class="text-left" rowspan="1" colspan="1">8 channels: front left, front right, front center, LFE, back left, back right, side left, side right</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b1000</td>
                <td class="text-left" rowspan="1" colspan="1">left/side stereo: channel 0 is the left channel, channel 1 is the side(difference) channel</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b1001</td>
                <td class="text-left" rowspan="1" colspan="1">right/side stereo: channel 0 is the side(difference) channel, channel 1 is the right channel</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b1010</td>
                <td class="text-left" rowspan="1" colspan="1">mid/side stereo: channel 0 is the mid(average) channel, channel 1 is the side(difference) channel</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b1011 - 0b1111</td>
                <td class="text-left" rowspan="1" colspan="1">reserved</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="sample-size">
<section id="section-11.19.6">
          <h4 id="name-sample-size">
<a href="#section-11.19.6" class="section-number selfRef">11.19.6. </a><a href="#name-sample-size" class="section-name selfRef">SAMPLE SIZE</a>
          </h4>
<table class="center" id="table-24">
            <caption><a href="#table-24" class="selfRef">Table 24</a></caption>
<thead>
              <tr>
                <th class="text-right" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b000</td>
                <td class="text-left" rowspan="1" colspan="1">get from STREAMINFO metadata block</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b001</td>
                <td class="text-left" rowspan="1" colspan="1">8 bits per sample</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b010</td>
                <td class="text-left" rowspan="1" colspan="1">12 bits per sample</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b011</td>
                <td class="text-left" rowspan="1" colspan="1">reserved</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b100</td>
                <td class="text-left" rowspan="1" colspan="1">16 bits per sample</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b101</td>
                <td class="text-left" rowspan="1" colspan="1">20 bits per sample</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b110</td>
                <td class="text-left" rowspan="1" colspan="1">24 bits per sample</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b111</td>
                <td class="text-left" rowspan="1" colspan="1">reserved</td>
              </tr>
            </tbody>
          </table>
<p id="section-11.19.6-2">For subframes that encode a difference channel, the sample size is one bit larger than the sample size of the frame, in order to be able to encode the difference between extreme values.<a href="#section-11.19.6-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="frame-header-reserved2">
<section id="section-11.19.7">
          <h4 id="name-frame-header-reserved2">
<a href="#section-11.19.7" class="section-number selfRef">11.19.7. </a><a href="#name-frame-header-reserved2" class="section-name selfRef">FRAME HEADER RESERVED2</a>
          </h4>
<table class="center" id="table-25">
            <caption><a href="#table-25" class="selfRef">Table 25</a></caption>
<thead>
              <tr>
                <th class="text-right" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">mandatory value</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">reserved for future use</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="coded-number">
<section id="section-11.19.8">
          <h4 id="name-coded-number">
<a href="#section-11.19.8" class="section-number selfRef">11.19.8. </a><a href="#name-coded-number" class="section-name selfRef">CODED NUMBER</a>
          </h4>
<p id="section-11.19.8-1">Frame/Sample numbers are encoded using the UTF-8 format, from BEFORE it was limited to 4 bytes by RFC3629, this variant supports the original 7 byte maximum.<a href="#section-11.19.8-1" class="pilcrow">¶</a></p>
<p id="section-11.19.8-2">Note to implementors: All Unicode compliant UTF-8 decoders and encoders are limited to 4 bytes, it's best to just write your own one off solution.<a href="#section-11.19.8-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-11.19.8-3">
<pre>if(variable blocksize)
  `u(8...56)`: "UTF-8" coded sample number (decoded number is 36 bits)
else
  `u(8...48)`: "UTF-8" coded frame number (decoded number is 31 bits)
</pre><a href="#section-11.19.8-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="block-size-int">
<section id="section-11.19.9">
          <h4 id="name-block-size-int">
<a href="#section-11.19.9" class="section-number selfRef">11.19.9. </a><a href="#name-block-size-int" class="section-name selfRef">BLOCK SIZE INT</a>
          </h4>
<div class="artwork art-text alignLeft" id="section-11.19.9-1">
<pre>if(`INTERCHANNEL SAMPLE BLOCK SIZE` == 0b0110)
  8 bit (blocksize-1)
else if(`INTERCHANNEL SAMPLE BLOCK SIZE` == 0b0111)
  16 bit (blocksize-1)
</pre><a href="#section-11.19.9-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="sample-rate-int">
<section id="section-11.19.10">
          <h4 id="name-sample-rate-int">
<a href="#section-11.19.10" class="section-number selfRef">11.19.10. </a><a href="#name-sample-rate-int" class="section-name selfRef">SAMPLE RATE INT</a>
          </h4>
<div class="artwork art-text alignLeft" id="section-11.19.10-1">
<pre>if(`SAMPLE RATE` == 0b1100)
  8 bit sample rate (in kHz)
else if(`SAMPLE RATE` == 0b1101)
  16 bit sample rate (in Hz)
else if(`SAMPLE RATE` == 0b1110)
  16 bit sample rate (in daHz)
</pre><a href="#section-11.19.10-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="frame-crc">
<section id="section-11.19.11">
          <h4 id="name-frame-crc">
<a href="#section-11.19.11" class="section-number selfRef">11.19.11. </a><a href="#name-frame-crc" class="section-name selfRef">FRAME CRC</a>
          </h4>
<p id="section-11.19.11-1">CRC-8 (polynomial = x^8 + x^2 + x^1 + x^0, initialized with 0) of everything before the CRC, including the sync code<a href="#section-11.19.11-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="frame-footer">
<section id="section-11.20">
        <h3 id="name-frame_footer">
<a href="#section-11.20" class="section-number selfRef">11.20. </a><a href="#name-frame_footer" class="section-name selfRef">FRAME_FOOTER</a>
        </h3>
<table class="center" id="table-26">
          <caption><a href="#table-26" class="selfRef">Table 26</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(16)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">CRC-16 (polynomial = x^16 + x^15 + x^2 + x^0, initialized with 0) of everything before the CRC, back to and including the frame header sync code</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="subframe">
<section id="section-11.21">
        <h3 id="name-subframe">
<a href="#section-11.21" class="section-number selfRef">11.21. </a><a href="#name-subframe" class="section-name selfRef">SUBFRAME</a>
        </h3>
<table class="center" id="table-27">
          <caption><a href="#table-27" class="selfRef">Table 27</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>SUBFRAME_HEADER</code>
</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>SUBFRAME_CONSTANT</code> || <code>SUBFRAME_FIXED</code> || <code>SUBFRAME_LPC</code> || <code>SUBFRAME_VERBATIM</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The SUBFRAME_HEADER specifies which one.</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="subframe-header">
<section id="section-11.22">
        <h3 id="name-subframe_header">
<a href="#section-11.22" class="section-number selfRef">11.22. </a><a href="#name-subframe_header" class="section-name selfRef">SUBFRAME_HEADER</a>
        </h3>
<table class="center" id="table-28">
          <caption><a href="#table-28" class="selfRef">Table 28</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(1)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Zero bit padding, to prevent sync-fooling string of 1s</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(6)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>SUBFRAME TYPE</code> (see <a href="#subframe-type">section on SUBFRAME TYPE</a>)</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(1+k)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>WASTED BITS PER SAMPLE FLAG</code> (see <a href="#wasted-bits-per-sample-flag">section on WASTED BITS PER SAMPLE FLAG</a>)</td>
            </tr>
          </tbody>
        </table>
<div id="subframe-type">
<section id="section-11.22.1">
          <h4 id="name-subframe-type">
<a href="#section-11.22.1" class="section-number selfRef">11.22.1. </a><a href="#name-subframe-type" class="section-name selfRef">SUBFRAME TYPE</a>
          </h4>
<table class="center" id="table-29">
            <caption><a href="#table-29" class="selfRef">Table 29</a></caption>
<thead>
              <tr>
                <th class="text-right" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b000000</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>SUBFRAME_CONSTANT</code>
</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b000001</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>SUBFRAME_VERBATIM</code>
</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b00001x</td>
                <td class="text-left" rowspan="1" colspan="1">reserved</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b0001xx</td>
                <td class="text-left" rowspan="1" colspan="1">reserved</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b001xxx</td>
                <td class="text-left" rowspan="1" colspan="1">if(xxx &lt;= 4) <code>SUBFRAME_FIXED</code>, xxx=order; else reserved</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b01xxxx</td>
                <td class="text-left" rowspan="1" colspan="1">reserved</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b1xxxxx</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>SUBFRAME_LPC</code>, xxxxx=order-1</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="wasted-bits-per-sample-flag">
<section id="section-11.22.2">
          <h4 id="name-wasted-bits-per-sample-flag">
<a href="#section-11.22.2" class="section-number selfRef">11.22.2. </a><a href="#name-wasted-bits-per-sample-flag" class="section-name selfRef">WASTED BITS PER SAMPLE FLAG</a>
          </h4>
<table class="center" id="table-30">
            <caption><a href="#table-30" class="selfRef">Table 30</a></caption>
<thead>
              <tr>
                <th class="text-right" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">no wasted bits-per-sample in source subblock, k=0</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">k wasted bits-per-sample in source subblock, k-1 follows, unary coded; e.g. k=3 =&gt; 0b001 follows, k=7 =&gt; 0b0000001 follows.</td>
              </tr>
            </tbody>
          </table>
<p id="section-11.22.2-2">The size of the samples stored in the subframe is the subframe sample size reduced by k bits. Decoded samples must be shifted left by k bits.<a href="#section-11.22.2-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="subframe-constant">
<section id="section-11.23">
        <h3 id="name-subframe_constant">
<a href="#section-11.23" class="section-number selfRef">11.23. </a><a href="#name-subframe_constant" class="section-name selfRef">SUBFRAME_CONSTANT</a>
        </h3>
<table class="center" id="table-31">
          <caption><a href="#table-31" class="selfRef">Table 31</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Unencoded constant value of the subblock, n = frame's bits-per-sample.</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="subframe-fixed">
<section id="section-11.24">
        <h3 id="name-subframe_fixed">
<a href="#section-11.24" class="section-number selfRef">11.24. </a><a href="#name-subframe_fixed" class="section-name selfRef">SUBFRAME_FIXED</a>
        </h3>
<table class="center" id="table-32">
          <caption><a href="#table-32" class="selfRef">Table 32</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Unencoded warm-up samples (n = frame's bits-per-sample * predictor order).</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>RESIDUAL</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Encoded residual</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="subframe-lpc">
<section id="section-11.25">
        <h3 id="name-subframe_lpc">
<a href="#section-11.25" class="section-number selfRef">11.25. </a><a href="#name-subframe_lpc" class="section-name selfRef">SUBFRAME_LPC</a>
        </h3>
<table class="center" id="table-33">
          <caption><a href="#table-33" class="selfRef">Table 33</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Unencoded warm-up samples (n = frame's bits-per-sample * lpc order).</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(4)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">(quantized linear predictor coefficients' precision in bits)-1 (NOTE: 0b1111 is invalid).</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(5)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Quantized linear predictor coefficient shift needed in bits (NOTE: this number is signed two's-complement).</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Unencoded predictor coefficients (n = qlp coeff precision * lpc order) (NOTE: the coefficients are signed two's-complement).</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>RESIDUAL</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Encoded residual</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="subframe-verbatim">
<section id="section-11.26">
        <h3 id="name-subframe_verbatim">
<a href="#section-11.26" class="section-number selfRef">11.26. </a><a href="#name-subframe_verbatim" class="section-name selfRef">SUBFRAME_VERBATIM</a>
        </h3>
<table class="center" id="table-34">
          <caption><a href="#table-34" class="selfRef">Table 34</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n\*i)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Unencoded subblock, where <code>n</code> is frame's bits-per-sample and <code>i</code> is frame's blocksize.</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="residual">
<section id="section-11.27">
        <h3 id="name-residual">
<a href="#section-11.27" class="section-number selfRef">11.27. </a><a href="#name-residual" class="section-name selfRef">RESIDUAL</a>
        </h3>
<table class="center" id="table-35">
          <caption><a href="#table-35" class="selfRef">Table 35</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(2)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>RESIDUAL_CODING_METHOD</code>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>RESIDUAL_CODING_METHOD_PARTITIONED_EXP_GOLOMB</code> || <code>RESIDUAL_CODING_METHOD_PARTITIONED_EXP_GOLOMB2</code>
</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
          </tbody>
        </table>
<div id="residual-coding-method">
<section id="section-11.27.1">
          <h4 id="name-residual-coding-method">
<a href="#section-11.27.1" class="section-number selfRef">11.27.1. </a><a href="#name-residual-coding-method" class="section-name selfRef">RESIDUAL<em>CODING</em>METHOD</a>
          </h4>
<table class="center" id="table-36">
            <caption><a href="#table-36" class="selfRef">Table 36</a></caption>
<thead>
              <tr>
                <th class="text-right" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b00</td>
                <td class="text-left" rowspan="1" colspan="1">partitioned Exp-Golomb coding with 4-bit Exp-Golomb parameter; RESIDUAL<em>CODING</em>METHOD<em>PARTITIONED</em>EXP_GOLOMB follows</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b01</td>
                <td class="text-left" rowspan="1" colspan="1">partitioned Exp-Golomb coding with 5-bit Exp-Golomb parameter; RESIDUAL<em>CODING</em>METHOD<em>PARTITIONED</em>EXP_GOLOMB2 follows</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b10 - 0b11</td>
                <td class="text-left" rowspan="1" colspan="1">reserved</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="residual-coding-method-partitioned-exp-golomb">
<section id="section-11.27.2">
          <h4 id="name-residual-coding-method-part">
<a href="#section-11.27.2" class="section-number selfRef">11.27.2. </a><a href="#name-residual-coding-method-part" class="section-name selfRef">RESIDUAL<em>CODING</em>METHOD<em>PARTITIONED</em>EXP_GOLOMB</a>
          </h4>
<table class="center" id="table-37">
            <caption><a href="#table-37" class="selfRef">Table 37</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Data</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>u(4)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Partition order.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>EXP_GOLOMB_PARTITION</code>+</td>
                <td class="text-left" rowspan="1" colspan="1">There will be 2^order partitions.</td>
              </tr>
            </tbody>
          </table>
<div id="exp-golomb-partition">
<section id="section-11.27.2.1">
            <h5 id="name-exp-golomb-partition">
<a href="#section-11.27.2.1" class="section-number selfRef">11.27.2.1. </a><a href="#name-exp-golomb-partition" class="section-name selfRef">EXP<em>GOLOMB</em>PARTITION</a>
            </h5>
<table class="center" id="table-38">
              <caption><a href="#table-38" class="selfRef">Table 38</a></caption>
<thead>
                <tr>
                  <th class="text-left" rowspan="1" colspan="1">Data</th>
                  <th class="text-left" rowspan="1" colspan="1">Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">
                    <code>u(4(+5))</code>
</td>
                  <td class="text-left" rowspan="1" colspan="1">
                    <code>EXP-GOLOMB PARTITION ENCODING PARAMETER</code> (see <a href="#exp-golomb-partition-encoding-parameter">section on EXP-GOLOMB PARTITION ENCODING PARAMETER</a>)</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">
                    <code>u(?)</code>
</td>
                  <td class="text-left" rowspan="1" colspan="1">
                    <code>ENCODED RESIDUAL</code> (see <a href="#encoded-residual">section on ENCODED RESIDUAL</a>)</td>
                </tr>
              </tbody>
            </table>
</section>
</div>
<div id="exp-golomb-partition-encoding-parameter">
<section id="section-11.27.2.2">
            <h5 id="name-exp-golomb-partition-encodi">
<a href="#section-11.27.2.2" class="section-number selfRef">11.27.2.2. </a><a href="#name-exp-golomb-partition-encodi" class="section-name selfRef">EXP GOLOMB PARTITION ENCODING PARAMETER</a>
            </h5>
<table class="center" id="table-39">
              <caption><a href="#table-39" class="selfRef">Table 39</a></caption>
<thead>
                <tr>
                  <th class="text-right" rowspan="1" colspan="1">Value</th>
                  <th class="text-left" rowspan="1" colspan="1">Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-right" rowspan="1" colspan="1">0b0000 - 0b1110</td>
                  <td class="text-left" rowspan="1" colspan="1">Exp-golomb parameter.</td>
                </tr>
                <tr>
                  <td class="text-right" rowspan="1" colspan="1">0b1111</td>
                  <td class="text-left" rowspan="1" colspan="1">Escape code, meaning the partition is in unencoded binary form using n bits per sample; n follows as a 5-bit number.</td>
                </tr>
              </tbody>
            </table>
</section>
</div>
</section>
</div>
<div id="residual-coding-method-partitioned-exp-golomb2">
<section id="section-11.27.3">
          <h4 id="name-residual-coding-method-parti">
<a href="#section-11.27.3" class="section-number selfRef">11.27.3. </a><a href="#name-residual-coding-method-parti" class="section-name selfRef">RESIDUAL<em>CODING</em>METHOD<em>PARTITIONED</em>EXP_GOLOMB2</a>
          </h4>
<table class="center" id="table-40">
            <caption><a href="#table-40" class="selfRef">Table 40</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Data</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>u(4)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Partition order.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>EXP-GOLOMB2_PARTITION</code>+</td>
                <td class="text-left" rowspan="1" colspan="1">There will be 2^order partitions.</td>
              </tr>
            </tbody>
          </table>
<div id="exp-golomb2-partition">
<section id="section-11.27.3.1">
            <h5 id="name-exp-golomb2-partition">
<a href="#section-11.27.3.1" class="section-number selfRef">11.27.3.1. </a><a href="#name-exp-golomb2-partition" class="section-name selfRef">EXP<em>GOLOMB2</em>PARTITION</a>
            </h5>
<table class="center" id="table-41">
              <caption><a href="#table-41" class="selfRef">Table 41</a></caption>
<thead>
                <tr>
                  <th class="text-left" rowspan="1" colspan="1">Data</th>
                  <th class="text-left" rowspan="1" colspan="1">Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">
                    <code>u(5(+5))</code>
</td>
                  <td class="text-left" rowspan="1" colspan="1">
                    <code>EXP-GOLOMB2 PARTITION ENCODING PARAMETER</code> (see <a href="#expgolomb2-partition-encoding-parameter">section on EXP-GOLOMB2 PARTITION ENCODING PARAMETER</a>)</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">
                    <code>u(?)</code>
</td>
                  <td class="text-left" rowspan="1" colspan="1">
                    <code>ENCODED RESIDUAL</code> (see <a href="#encoded-residual">section on ENCODED RESIDUAL</a>)</td>
                </tr>
              </tbody>
            </table>
</section>
</div>
<div id="exp-golomb2-partition-encoding-parameter">
<section id="section-11.27.3.2">
            <h5 id="name-exp-golomb2-partition-encod">
<a href="#section-11.27.3.2" class="section-number selfRef">11.27.3.2. </a><a href="#name-exp-golomb2-partition-encod" class="section-name selfRef">EXP-GOLOMB2 PARTITION ENCODING PARAMETER</a>
            </h5>
<table class="center" id="table-42">
              <caption><a href="#table-42" class="selfRef">Table 42</a></caption>
<thead>
                <tr>
                  <th class="text-right" rowspan="1" colspan="1">Value</th>
                  <th class="text-left" rowspan="1" colspan="1">Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-right" rowspan="1" colspan="1">0b00000 - 0b11110</td>
                  <td class="text-left" rowspan="1" colspan="1">Exp-golomb parameter.</td>
                </tr>
                <tr>
                  <td class="text-right" rowspan="1" colspan="1">0b11111</td>
                  <td class="text-left" rowspan="1" colspan="1">Escape code, meaning the partition is in unencoded binary form using n bits per sample; n follows as a 5-bit number.</td>
                </tr>
              </tbody>
            </table>
</section>
</div>
</section>
</div>
<div id="encoded-residual">
<section id="section-11.27.4">
          <h4 id="name-encoded-residual">
<a href="#section-11.27.4" class="section-number selfRef">11.27.4. </a><a href="#name-encoded-residual" class="section-name selfRef">ENCODED RESIDUAL</a>
          </h4>
<p id="section-11.27.4-1">The number of samples (n) in the partition is determined as follows:<a href="#section-11.27.4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11.27.4-2.1">if the partition order is zero, n = frame's blocksize - predictor order<a href="#section-11.27.4-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-11.27.4-2.2">else if this is not the first partition of the subframe, n = (frame's blocksize / (2^partition order))<a href="#section-11.27.4-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-11.27.4-2.3">else n = (frame's blocksize / (2^partition order)) - predictor order<a href="#section-11.27.4-2.3" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
</section>
</div>
<section id="section-12">
      <h2 id="name-normative-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
    <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="authors-addresses">
<section id="section-appendix.a">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Michael Sandelman</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mcr@sandelman.ca" class="email">mcr@sandelman.ca</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Andrew Weaver</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:theandrewjw@gmail.com" class="email">theandrewjw@gmail.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
