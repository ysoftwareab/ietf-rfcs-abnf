



IS-IS Working Group                                          J. Tantsura
Internet-Draft                                                Individual
Intended status: Standards Track                             U. Chunduri
Expires: July 8, 2018                                Huawei Technologies
                                                               S. Aldrin
                                                             Google, Inc
                                                             L. Ginsberg
                                                           Cisco Systems
                                                        January 04, 2018


             Signaling MSD (Maximum SID Depth) using IS-IS
                 draft-ietf-isis-segment-routing-msd-08

Abstract

   This document proposes a way to signal Maximum SID Depth (MSD)
   supported by a node and/or link granularity by an IS-IS Router.  In a
   Segment Routing (SR) enabled network a centralized controller that
   programs SR tunnels needs to know the MSD supported by the head-end
   at node and/or link granularity to impose the SID stack of an
   appropriate depth.  MSD is relevant to the head-end of a SR tunnel or
   Binding-SID anchor node where Binding-SID expansions might result in
   creation of a new SID stack.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on July 8, 2018.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.





Tantsura, et al.          Expires July 8, 2018                  [Page 1]

Internet-Draft                                              January 2018


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Conventions used in this document . . . . . . . . . . . .   3
       1.1.1.  Terminology . . . . . . . . . . . . . . . . . . . . .   3
     1.2.  Requirements Language . . . . . . . . . . . . . . . . . .   3
   2.  Node MSD Advertisement  . . . . . . . . . . . . . . . . . . .   4
   3.  Link MSD Advertisement  . . . . . . . . . . . . . . . . . . .   4
   4.  Node MSD vs Link MSD conflict resolution  . . . . . . . . . .   5
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   6
   7.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .   7
   8.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   7
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   7
     9.1.  Normative References  . . . . . . . . . . . . . . . . . .   7
     9.2.  Informative References  . . . . . . . . . . . . . . . . .   7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   8

1.  Introduction

   When Segment Routing tunnels are computed by a centralized
   controller, it is critical that the controller learns the MSD
   "Maximum SID Depth" of the node or link SR tunnel exits over, so the
   SID stack depth of a path computed doesn't exceed the number of SID's
   the node is capable of imposing.  This document describes how to use
   IS-IS to signal the MSD of a node or link to a centralized
   controller.

   PCEP SR extensions draft [I-D.ietf-pce-segment-routing] signals MSD
   in SR PCE Capability TLV and METRIC Object.  However, if PCEP is not
   supported/configured on the head-end of a SR tunnel or a Binding-SID
   anchor node and controller does not participate in IGP routing, it
   has no way to learn the MSD of nodes and links which has been
   configured.  BGP-LS [RFC7752] defines a way to expose topology and
   associated attributes and capabilities of the nodes in that topology
   to a centralized controller.  MSD signaling by BGP-LS has been
   defined in [I-D.ietf-idr-bgp-ls-segment-routing-msd].  Typically,
   BGP-LS is configured on a small number of nodes, that do not



Tantsura, et al.          Expires July 8, 2018                  [Page 2]

Internet-Draft                                              January 2018


   necessarily act as head-ends.  In order, for BGP-LS to signal MSD for
   all the nodes and links in the network MSD is relevant, MSD
   capabilites should be advertised to every IS-IS router in the
   network.

   [I-D.ietf-isis-mpls-elc] defines Readable Label Depth Capability
   (RLDC) that is used by a head-end to insert Entropy Label (EL) at
   appropriate depth, so it could be read by transit nodes.  MSD in
   contrary signals ability to impose SID's stack of a particular depth.

   MSD of type 1 (IANA Registry), called Base MSD, is used to signal the
   total number of SID's a node is capable of imposing, to be used by a
   path computation element/controller.  In case, there are additional
   SID's (e.g. service) that are to be imposed to the stack - this would
   be signaled with an another MSD type (TBD), no adjustment to the Base
   MSD should be made.  In the future, new MSD types could be defined to
   signal additional capabilities: entropy labels, SID's that can be
   imposed thru recirculation, or another dataplane e.g IPv6.

1.1.  Conventions used in this document

1.1.1.  Terminology

   BGP-LS: Distribution of Link-State and TE Information using Border
   Gateway Protocol

   IS-IS: Intermediate System to Intermediate System

   MSD: Maximum SID Depth - a number of SID's a node or a link on a node
   is capable of imposing

   PCC: Path Computation Client

   PCE: Path Computation Element

   PCEP: Path Computation Element Protocol

   SID: Segment Identifier

   SR: Segment Routing

1.2.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].





Tantsura, et al.          Expires July 8, 2018                  [Page 3]

Internet-Draft                                              January 2018


2.  Node MSD Advertisement

   A new sub-TLV "Node MSD sub-TLV" is defined within the body of IS-IS
   Router Capability TLV [RFC7981], to carry the provisioned MSD of the
   router originating the Router Capability TLV.  Node MSD is the lowest
   MSD supported by the node of any interface and if not known throught
   an API, can be provisioned in IS-IS instance.

        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1

       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |    Type       |   Length      |   Sub-Type and Value pair     |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                        Figure 1: Node MSD Sub-TLV

   The Type (1 byte) of this sub-TLV has value of 23.

   Length is variable (minimum of 2, multiple of 2 octets) and
   represents the total length of value field.

   Value field consists of a 1 octet Sub-Type (IANA Registry) and 1
   octet Value.  There could be one or more of the Sub-Type/Value pairs.

   Sub-Type 1 (IANA Section), MSD and the Value field associated with
   the Sub-Type contains maximum MSD of the router originating the
   Router Capability TLV.

   Node MSD value is a number in the range of 0-254. 0 represents lack
   of the ability to impose SID stack of any depth; any other value
   represents that of the node.  This value SHOULD represent the lowest
   value supported by node.

   Other Sub-Types other than defined above are reserved for future
   extensions.

   This sub-TLV is optional.  The scope of the advertisement is specific
   to the deployment.

3.  Link MSD Advertisement

   A new sub-TLV - Link MSD sub-TLV is defined for TLVs 22, 23, 141,
   222, and 223 to carry the provisioned MSD of the interface associated
   with the link.





Tantsura, et al.          Expires July 8, 2018                  [Page 4]

Internet-Draft                                              January 2018


        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1

       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |    Type       |   Length      |      Sub-Type and Value pair  |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                        Figure 2: Link MSD Sub-TLV

   The Type (1 byte) of this sub-TLV has value of 15.

   Length is variable and similar to what is defined in Section 2.

   Value field consists of a 1 octet sub-type (IANA Registry) and 1
   octet value.  There could be one or more of the Sub-Type/Value pairs.

   Sub-Type 1 (IANA Section), MSD and the Value field associated with
   the Sub-Type contains Link MSD of the router originating the
   corresponding TLV's 22, 23, 141, 222, and 223.

   The value of Link MSD represents MSD on the outgoing link.  Link MSD
   is a number in the range of 0-254. 0 represents lack of the ability
   to impose SID stack of any depth; any other value represents that of
   the particular link MSD value.

4.  Node MSD vs Link MSD conflict resolution

   When both Node MSD and Link MSD are present, the value of the Link
   MSD MUST be used.

5.  IANA Considerations

   This document includes a request to IANA to allocate sub-TLV type
   codes for the new sub TLV proposed in Section 2 of this document from
   IS-IS Router Capability TLV Registry as defined by [RFC7981].

   Following values have been allocated by IANA:


      Value     Description                      Reference
      -----     ---------------                  -------------
      23        Node MSD                         This document

                            Figure 3: Node MSD






Tantsura, et al.          Expires July 8, 2018                  [Page 5]

Internet-Draft                                              January 2018


   For the Link MSD, we request IANA to allocate new sub-TLV codes as
   defined in Section 3 from Sub-TLVs for TLVs 22, 23, 141, 222 and 223
   registry.


      Value     Description                      Reference
      -----     ---------------                  -------------
      15        Link MSD                         This document

                            Figure 4: Link MSD

   Per TLV information where Link MSD sub-TLV can be part of:


      TLV  22 23 25 141 222 223
      ---  --------------------
           y  y  y  y   y   y

           Figure 5: TLVs where LINK MSD Sub-TLV can be present

   This document requests creation of a new IANA managed registry under
   a new category of "Interior Gateway Protocol (IGP) Parameters" IANA
   registries to identify MSD types as proposed in Section 2, Section 3.
   The registration procedure is "Expert Review" as defined in
   [RFC8126].  Suggested registry name is "MSD Sub-types".  Types are an
   unsigned 8 bit number.  The following values are defined by this
   document


      Value     Name                             Reference
      -----     ---------------------            -------------
      0         Reserved                         This document
      1         Base MSD                         This document
      2-250     Unassigned                       This document
      251-254   Experimental                     This document
      255       Reserved                         This document

                Figure 6: MSD Sub-type Codepoints Registry

6.  Security Considerations

   Security considerations, as specified by [RFC7981] are applicable to
   this document








Tantsura, et al.          Expires July 8, 2018                  [Page 6]

Internet-Draft                                              January 2018


7.  Contributors

   The following people contributed to this document:

   Peter Psenak

   Email: ppsenak@cisco.com

8.  Acknowledgements

   The authors would like to thank Stephane Litkowski and Bruno Decraene
   for their reviews and valuable comments.

9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC5305]  Li, T. and H. Smit, "IS-IS Extensions for Traffic
              Engineering", RFC 5305, DOI 10.17487/RFC5305, October
              2008, <https://www.rfc-editor.org/info/rfc5305>.

   [RFC7981]  Ginsberg, L., Previdi, S., and M. Chen, "IS-IS Extensions
              for Advertising Router Information", RFC 7981,
              DOI 10.17487/RFC7981, October 2016,
              <https://www.rfc-editor.org/info/rfc7981>.

9.2.  Informative References

   [I-D.ietf-idr-bgp-ls-segment-routing-msd]
              Tantsura, J., Chunduri, U., Mirsky, G., and S. Sivabalan,
              "Signaling Maximum SID Depth using Border Gateway Protocol
              Link-State", draft-ietf-idr-bgp-ls-segment-routing-msd-01
              (work in progress), October 2017.

   [I-D.ietf-isis-mpls-elc]
              Xu, X., Kini, S., Sivabalan, S., Filsfils, C., and S.
              Litkowski, "Signaling Entropy Label Capability and
              Readable Label-stack Depth Using IS-IS", draft-ietf-isis-
              mpls-elc-03 (work in progress), January 2018.







Tantsura, et al.          Expires July 8, 2018                  [Page 7]

Internet-Draft                                              January 2018


   [I-D.ietf-pce-segment-routing]
              Sivabalan, S., Filsfils, C., Tantsura, J., Henderickx, W.,
              and J. Hardwick, "PCEP Extensions for Segment Routing",
              draft-ietf-pce-segment-routing-11 (work in progress),
              November 2017.

   [RFC1195]  Callon, R., "Use of OSI IS-IS for routing in TCP/IP and
              dual environments", RFC 1195, DOI 10.17487/RFC1195,
              December 1990, <https://www.rfc-editor.org/info/rfc1195>.

   [RFC5120]  Przygienda, T., Shen, N., and N. Sheth, "M-ISIS: Multi
              Topology (MT) Routing in Intermediate System to
              Intermediate Systems (IS-ISs)", RFC 5120,
              DOI 10.17487/RFC5120, February 2008,
              <https://www.rfc-editor.org/info/rfc5120>.

   [RFC7752]  Gredler, H., Ed., Medved, J., Previdi, S., Farrel, A., and
              S. Ray, "North-Bound Distribution of Link-State and
              Traffic Engineering (TE) Information Using BGP", RFC 7752,
              DOI 10.17487/RFC7752, March 2016,
              <https://www.rfc-editor.org/info/rfc7752>.

   [RFC8126]  Cotton, M., Leiba, B., and T. Narten, "Guidelines for
              Writing an IANA Considerations Section in RFCs", BCP 26,
              RFC 8126, DOI 10.17487/RFC8126, June 2017,
              <https://www.rfc-editor.org/info/rfc8126>.

Authors' Addresses

   Jeff Tantsura
   Individual

   Email: jefftant.ietf@gmail.com


   Uma Chunduri
   Huawei Technologies

   Email: uma.chunduri@huawei.com


   Sam Aldrin
   Google, Inc

   Email: aldrin.ietf@gmail.com






Tantsura, et al.          Expires July 8, 2018                  [Page 8]

Internet-Draft                                              January 2018


   Les Ginsberg
   Cisco Systems

   Email: ginsberg@cisco.com















































Tantsura, et al.          Expires July 8, 2018                  [Page 9]
