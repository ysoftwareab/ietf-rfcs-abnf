<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Load Sharing for the Stream Control Transmission Protocol (SCTP) </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Conventions">
<link href="#rfc.section.3" rel="Chapter" title="3 Load Sharing">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Split Fast Retransmissions">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Appropriate Congestion Window Growth">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Appropriate Delayed Acknowledgements">
<link href="#rfc.section.4" rel="Chapter" title="4 Buffer Blocking Mitigation">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Sender Buffer Splitting">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Receiver Buffer Splitting">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Problems during Path Failure">
<link href="#rfc.section.4.3.1" rel="Chapter" title="4.3.1 Problem Description">
<link href="#rfc.section.4.3.2" rel="Chapter" title="4.3.2 Solution: Potentially-failed Destination State">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Non-Renegable SACK">
<link href="#rfc.section.4.4.1" rel="Chapter" title="4.4.1 Problem Description">
<link href="#rfc.section.4.4.2" rel="Chapter" title="4.4.2 Solution: Non-Renegable SACKs">
<link href="#rfc.section.5" rel="Chapter" title="5 Handling of Shared Bottlenecks">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Introduction">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Initial Values">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Congestion Window Growth">
<link href="#rfc.section.5.4" rel="Chapter" title="5.4 Congestion Window Decrease">
<link href="#rfc.section.6" rel="Chapter" title="6 Chunk Scheduling">
<link href="#rfc.section.7" rel="Chapter" title="7 Application Programming Interface">
<link href="#rfc.section.8" rel="Chapter" title="8 IANA Considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 Security Considerations">
<link href="#rfc.references" rel="Chapter" title="10 References">
<link href="#rfc.references.1" rel="Chapter" title="10.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="10.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The Stream Control Transmission Protocol (SCTP) supports multi-homing for providing network fault tolerance. However, mainly one path is used for data transmission. Only timer-based retransmissions are carried over other paths as well." />
  <meta name="description" content="The Stream Control Transmission Protocol (SCTP) supports multi-homing for providing network fault tolerance. However, mainly one path is used for data transmission. Only timer-based retransmissions are carried over other paths as well." />
  <meta name="keywords" content="Internet-Draft" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">M. Becke</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">T. Dreibholz</td>
</tr>
<tr>
<td class="left">Intended status: Experimental Protocol</td>
<td class="right">University of Duisburg-Essen</td>
</tr>
<tr>
<td class="left">Expires: January 03, 2012</td>
<td class="right">J. Iyengar</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Franklin and Marshall College</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">P. Natarajan</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Cisco Systems</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">M. Tuexen</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Muenster Univ. of Applied Sciences</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">July 02, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Load Sharing for the Stream Control Transmission Protocol (SCTP) <br />
  <span class="filename">draft-tuexen-tsvwg-sctp-multipath-02.txt</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The Stream Control Transmission Protocol (SCTP) supports multi-homing for providing network fault tolerance. However, mainly one path is used for data transmission. Only timer-based retransmissions are carried over other paths as well.</p>
<p>This document describes how multiple paths can be used simultaneously for transmitting user messages.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on January 03, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Conventions</a>
</li>
<li>3.   <a href="#rfc.section.3">Load Sharing</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Split Fast Retransmissions</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Appropriate Congestion Window Growth</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Appropriate Delayed Acknowledgements</a>
</li>
<li>4.   <a href="#rfc.section.4">Buffer Blocking Mitigation</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Sender Buffer Splitting</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Receiver Buffer Splitting</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Problems during Path Failure</a>
</li>
<li>4.3.1.   <a href="#rfc.section.4.3.1">Problem Description</a>
</li>
<li>4.3.2.   <a href="#rfc.section.4.3.2">Solution: Potentially-failed Destination State</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Non-Renegable SACK</a>
</li>
<li>4.4.1.   <a href="#rfc.section.4.4.1">Problem Description</a>
</li>
<li>4.4.2.   <a href="#rfc.section.4.4.2">Solution: Non-Renegable SACKs</a>
</li>
<li>5.   <a href="#rfc.section.5">Handling of Shared Bottlenecks</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Introduction</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Initial Values</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">Congestion Window Growth</a>
</li>
<li>5.4.   <a href="#rfc.section.5.4">Congestion Window Decrease</a>
</li>
<li>6.   <a href="#rfc.section.6">Chunk Scheduling</a>
</li>
<li>7.   <a href="#rfc.section.7">Application Programming Interface</a>
</li>
<li>8.   <a href="#rfc.section.8">IANA Considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">Security Considerations</a>
</li>
<li>10.   <a href="#rfc.references">References</a>
</li>
<li>10.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>10.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">One of the important features of the Stream Control Transmission Protocol (SCTP), which is currently specified in <a href="#RFC4960">[RFC4960]</a>, is network fault tolerance. This feature is for example required for Reliable Server Pooling (RSerPool, <a href="#RFC5351">[RFC5351]</a>). Therefore, transmitting messages over multiple paths is supported, but only for redundancy. So <a href="#RFC4960">[RFC4960]</a> does not specify how to use multiple paths simultaneously.</p>
<p id="rfc.section.1.p.2">This document overcomes this limitation by specifying how multiple paths can be used simultaneously. This has several benefits: </p>

<ul>
<li>Improved bandwidth usage.</li>
<li>Better availability check with real user messages compared to HEARTBEAT-based information.</li>
</ul>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#conv" id="conv">Conventions</a>
</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#CMT-SCTP" id="CMT-SCTP">Load Sharing</a>
</h1>
<p id="rfc.section.3.p.1">Basic requirement for applying SCTP load sharing is the Concurrent Multipath Transfer (CMT) extension of SCTP, which utilises multiple paths simultaneously. We denote CMT-enabled SCTP as CMT-SCTP throughout this document. CMT-SCTP is introduced in <a href="#IAS06">[IAS06]</a> and in more detail in <a href="#I06">[I06]</a>, some illustrative examples of chunk handling are provided in <a href="#DBP+10a">[DBP+10a]</a>.  CMT-SCTP provides three modifications to standard SCTP (split Fast Retransmissions, appropriate congestion window growth and delayed SACKs), which are described in the following subsections.</p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#splitfastrtx" id="splitfastrtx">Split Fast Retransmissions</a>
</h1>
<p id="rfc.section.3.1.p.1">Paths with different latencies lead to overtaking of DATA chunks.  This leads to gap reports, which are handled by Fast Retransmissions.  However, due to the fact that multiple paths are used simultaneously, these Fast Retransmissions are usually useless and furthermore lead to a decreased congestion window size.</p>
<p id="rfc.section.3.1.p.2">To avoid unnecessary Fast Retransmissions, the sender has to keep track of the path each DATA chunk has been sent on and consider transmission paths before performing Fast Retransmissions. That is, on reception of a SACK, the sender MUST identify the highest acknowledged TSN on each path. A chunk SHOULD only be considered as missing if its TSN is smaller than the highest acknowledged TSN on its path. Section 3.1 of <a href="#DBP+10a">[DBP+10a]</a> contains an illustrated example.</p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#cwndupdate" id="cwndupdate">Appropriate Congestion Window Growth</a>
</h1>
<p id="rfc.section.3.2.p.1">The congestion window adaptation algorithm for SCTP <a href="#RFC4960">[RFC4960]</a> allows increasing the congestion window only when a new cumulative ack (CumAck) is received by a sender. When SACKs with unchanged CumAcks are generated (due to reordering) and later arrive at a sender, the sender does not modify its congestion window. Since a CMT-SCTP receiver naturally observes reordering, many SACKs are sent containing new gap reports but not new CumAcks. When these gaps are later acked by a new CumAck, congestion window growth occurs, but only for the data newly acked in the most recent SACK. Data previously acked through gap reports will not contribute to congestion window growth, in order to prevent sudden increases in the congestion window resulting in bursts of data being sent.</p>
<p id="rfc.section.3.2.p.2">To overcome the problems described above, the congestion window growth has to be handled as follows <a href="#IAS06">[IAS06]</a>: </p>

<ul>
<li>The sender SHOULD keep track of the earliest non-retransmitted outstanding TSN per path.</li>
<li>The sender SHOULD keep track of the earliest retransmitted outstanding TSN per path.</li>
<li>The in-order delivery per path SHOULD be deduced.</li>
<li>The congestion window of a path SHOULD be increased when the earliest non-retransmitted outstanding TSN of this path is advanced ("Pseudo CumAck") OR when the earliest retransmitted outstanding TSN of this path is advanced ("RTX Pseudo CumAck").</li>
</ul>

<p> </p>
<p id="rfc.section.3.2.p.3">Section 3.2 of <a href="#DBP+10a">[DBP+10a]</a> contains an illustrated example of appropriate congestion window handling for CMT-SCTP.</p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> <a href="#delayedack" id="delayedack">Appropriate Delayed Acknowledgements</a>
</h1>
<p id="rfc.section.3.3.p.1">Standard SCTP <a href="#RFC4960">[RFC4960]</a> sends a SACK as soon as an out-of-sequence TSN has been received. Delayed Acknowledgements are only allowed if the received TSNs are in sequence. However, due to the load balancing of CMT-SCTP, DATA chunks may overtake each other. This leads to a high number of out-of-sequence TSNs, which have to be acknowledged immediately. Clearly, this behaviour increases the overhead traffic (usually nearly one SACK chunk for each received packet containing a DATA chunk).</p>
<p id="rfc.section.3.3.p.2">Delayed Acknowledgements for CMT-SCTP are handled as follows: </p>

<ul>
<li>In addition to <a href="#RFC4960">[RFC4960]</a>, delaying of SACKs SHOULD *also* be applied for out-of-sequence TSNs.</li>
<li>A receiver MUST maintain a counter for the number of DATA chunks received before sending a SACK. The value of the counter is stored into each SACK chunk (FIXME: add details; needs reservation of flags bits by IANA). After transmitting a SACK, the counter MUST be reset to 0. Its initial value MUST be 0.</li>
<li>The SACK handling procedure for a missing TSN M is extended as follows: <ul>
<li>If all newly acknowledged TSNs have been transmitted over the same path: <ul>
<li>If there are newly acknowledged TSNs L and H so that L &#8249;= M &#8249;= H, the missing count of TSN M SHOULD be incremented by one (like for standard SCTP according to <a href="#RFC4960">[RFC4960]</a>).</li>
<li>Else if all newly acknowledged TSNs N satisfy the condition M &#8249;= N, the missing count of TSN M SHOULD be incremented by the number of TSNs reported in the SACK chunk.</li>
</ul>
</li>
<li>Otherwise (that is, there are newly acknowledged TSNs on different paths), the missing count of TSN M SHOULD be incremented by one (like for standard SCTP according to <a href="#RFC4960">[RFC4960]</a>).</li>
</ul>
<p> </p>
</li>
</ul>

<p> </p>
<p id="rfc.section.3.3.p.3">Section 3.3 of <a href="#DBP+10a">[DBP+10a]</a> contains an illustrated example of Delayed Acknowledgements for CMT-SCTP.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#blocking" id="blocking">Buffer Blocking Mitigation</a>
</h1>
<p id="rfc.section.4.p.1">TBD. See <a href="#ADB+11">[ADB+11]</a>, <a href="#DBR+10">[DBR+10]</a>.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#sndbufsplitting" id="sndbufsplitting">Sender Buffer Splitting</a>
</h1>
<p id="rfc.section.4.1.p.1">TBD. See <a href="#ADB+11">[ADB+11]</a>, <a href="#DBR+10">[DBR+10]</a>.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#rcvbufsplitting" id="rcvbufsplitting">Receiver Buffer Splitting</a>
</h1>
<p id="rfc.section.4.2.p.1">TBD. See <a href="#ADB+11">[ADB+11]</a>, <a href="#DBR+10">[DBR+10]</a>.</p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#pf" id="pf">Problems during Path Failure</a>
</h1>
<p id="rfc.section.4.3.p.1">This section discusses CMT's receive buffer related problems during path failure, and proposes a solution for the same.</p>
<h1 id="rfc.section.4.3.1">
<a href="#rfc.section.4.3.1">4.3.1.</a> Problem Description</h1>
<p id="rfc.section.4.3.1.p.1">Link failures arise when a router or a link connecting two routers fails due to link disconnection, hardware malfunction, or software error. Overloaded links caused by flash crowds and denial-of-service (DoS) attacks also degrade end-to-end communication between peer hosts.  Ideally, the routing system detects link failures, and in response, reconfigures the routing tables and avoids routing traffic via the failed link. However, existing research highlights problems with Internet backbone routing that result in long route convergence times.  The pervasiveness of path failures motivated us to study their impact on CMT, since CMT achieves better throughput via simultaneous data transmission over multiple end-to-end paths.</p>
<p id="rfc.section.4.3.1.p.2">CMT is an extension to SCTP, and therefore retains SCTP's failure detection process. A CMT sender uses a tunable failure detection threshold called Path.Max.Retrans (PMR). When a sender experiences more than PMR consecutive timeouts while trying to reach an active destination, the destination is marked as failed. With PMR=5, the failure detection takes 6 consecutive timeouts or 63s. After every timeout, the CMT sender continues to transmit new data on the failed path increasing the chances of receive buffer (rbuf) blocking and degrading CMT performance during permanent and short-term path failures <a href="#NEA+08">[NEA+08]</a>.</p>
<h1 id="rfc.section.4.3.2">
<a href="#rfc.section.4.3.2">4.3.2.</a> Solution: Potentially-failed Destination State</h1>
<p id="rfc.section.4.3.2.p.1">To mitigate the rbuf blocking, we introduce a new destination state called "potentially-failed" state in SCTP (and CMT's) failure detection process <a href="#I-D.nishida-tsvwg-sctp-failover">[I-D.nishida-tsvwg-sctp-failover]</a>.  This solution is based on the rationale that loss detected by a timeout implies either severe congestion or failure en route.  After a single timeout on a path, a sender is unsure, and marks the corresponding destination as "potentially-failed" (PF).  A PF destination is not used for data transmission or retransmission.  CMT's retransmission policies are augmented to include the PF state.  Performance evaluations prove that the PF state significantly reduces rbuf blocking during failure detection <a href="#NEA+08">[NEA+08]</a>.</p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> <a href="#nrsack" id="nrsack">Non-Renegable SACK</a>
</h1>
<p id="rfc.section.4.4.p.1">This section discusses problems with SCTP's SACK mechanism and how it affects the send buffer and CMT performance.</p>
<h1 id="rfc.section.4.4.1">
<a href="#rfc.section.4.4.1">4.4.1.</a> Problem Description</h1>
<p id="rfc.section.4.4.1.p.1">Gap-acks acknowledge DATA chunks that arrive out-of-order to a transport layer data receiver.  A gap-ack in SCTP is advisory, in that, while it notifies a data sender about the reception of indicated DATA chunks, the data receiver is permitted to later discard DATA chunks that it previously had gap-acked.  Discarding a previously gap-acked DATA chunk is known as "reneging".  Because of the possibility of reneging in SCTP, any gap-acked DATA chunk MUST NOT be removed from the data sender's retransmission queue until the DATA chunk is later CumAcked.</p>
<p id="rfc.section.4.4.1.p.2">Situations exist when a data receiver knows that reneging on a particular out-of-order DATA chunk will never take place, such as (but not limited to) after an out-of-order DATA chunk is delivered to the receiving application. With current SACKs in SCTP, it is not possible for a data receiver to inform a data sender if or when a particular out-of-order "deliverable" DATA chunk has been "delivered" to the receiving application.  Thus the data sender MUST keep a copy of every gap-acked out-of-order DATA chunk(s) in the data sender's retransmission queue until the DATA chunk is CumAcked.  This use of the data sender's retransmission queue is wasteful. The wasted buffer often degrades CMT performance; the degradation increases when a CMT flow traverses via paths with disparate end-to-end properties <a href="#NEY+08">[NEY+08]</a>.</p>
<h1 id="rfc.section.4.4.2">
<a href="#rfc.section.4.4.2">4.4.2.</a> Solution: Non-Renegable SACKs</h1>
<p id="rfc.section.4.4.2.p.1">Non-Renegable Selective Acknowledgments (NR-SACKs) <a href="#I-D.natarajan-tsvwg-sctp-nrsack">[I-D.natarajan-tsvwg-sctp-nrsack]</a> are a new kind of acknowledgements, extending SCTP's SACK chunk functionalities. The NR-SACK chunk is an extension of the existing SACK chunk. Several fields are identical, including the Cumulative TSN Ack, the Advertised Receiver Window Credit (a_rwnd), and Duplicate TSNs. These fields have the same semantics as described in <a href="#RFC4960">[RFC4960]</a>.</p>
<p id="rfc.section.4.4.2.p.2">NR-SACKs also identify out-of-order DATA chunks that a receiver either: (1) has delivered to its receiving application, or (2) takes full responsibility to eventually deliver to its receiving application.  These out-of-order DATA chunks are "non-renegable." Non-Renegable data are reported in the NR Gap Ack Block field of the NR-SACK chunk as described <a href="#I-D.natarajan-tsvwg-sctp-nrsack">[I-D.natarajan-tsvwg-sctp-nrsack]</a>.  We refer to non-renegable selective acknowledgements as "nr-gap-acks."</p>
<p id="rfc.section.4.4.2.p.3">When an out-of-order DATA chunk is nr-gap-acked, the data sender no longer needs to keep that particular DATA chunk in its retransmission queue, thus allowing the data sender to free up its buffer space sooner than if the DATA chunk were only gap-acked.  NR-SACKs improve send buffer utilization and throughput for CMT flows <a href="#NEY+08">[NEY+08]</a>.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#bottlenecks" id="bottlenecks">Handling of Shared Bottlenecks</a>
</h1>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#rpintro" id="rpintro">Introduction</a>
</h1>
<p id="rfc.section.5.1.p.1">CMT-SCTP assumes all paths to be disjoint. Since each path independently uses a TCP-like congestion control, an SCTP association using N paths over the same bottleneck acquires N times the bandwidth of a concurrent TCP flow. This is clearly unfair. A reliable detection of shared bottlenecks is impossible in arbitrary networks like the Internet. Therefore, <a href="#DBA+11">[DBA+11]</a>, <a href="#DBP+10b">[DBP+10b]</a> apply the idea of Resource Pooling to CMT-SCTP. Resource Pooling (RP) denotes "making a collection of resources behave like a single pooled resource" <a href="#WHB09">[WHB09]</a>. The modifications of RP-enabled CMT-SCTP, further denoted as CMT/RP-SCTP, are described in the following subsections.  A detailed description of CMT/RP-SCTP, including congestion control examples, can be found in <a href="#DBA+11">[DBA+11]</a>, <a href="#DBP+10b">[DBP+10b]</a>.</p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#rpinitial" id="rpinitial">Initial Values</a>
</h1>
<p id="rfc.section.5.2.p.1">TDB.</p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> <a href="#rpcwndgrowth" id="rpcwndgrowth">Congestion Window Growth</a>
</h1>
<p id="rfc.section.5.3.p.1">TDB. See <a href="#DBA+11">[DBA+11]</a>.</p>
<h1 id="rfc.section.5.4">
<a href="#rfc.section.5.4">5.4.</a> <a href="#rpcwnddecrease" id="rpcwnddecrease">Congestion Window Decrease</a>
</h1>
<p id="rfc.section.5.4.p.1">TDB. See <a href="#DBA+11">[DBA+11]</a>.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#schedule" id="schedule">Chunk Scheduling</a>
</h1>
<p id="rfc.section.6.p.1">TDB. See <a href="#DST+10">[DST+10]</a>.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#API" id="API">Application Programming Interface</a>
</h1>
<p id="rfc.section.7.p.1">See <a href="#I-D.dreibholz-tsvwg-sctpsocket-multipath">[I-D.dreibholz-tsvwg-sctpsocket-multipath]</a> and <a href="#I-D.dreibholz-tsvwg-sctpsocket-sqinfo">[I-D.dreibholz-tsvwg-sctpsocket-sqinfo]</a>.  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.8.p.1">TBD.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#sec" id="sec">Security Considerations</a>
</h1>
<p id="rfc.section.9.p.1">This document does not add any additional security considerations in addition to the ones given in <a href="#RFC4960">[RFC4960]</a>.</p>
<h1 id="rfc.references">
<a href="#rfc.references">10.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">10.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4960">[RFC4960]</b></td>
<td class="top">
<a>Stewart, R.</a>, "<a href="http://tools.ietf.org/html/rfc4960">Stream Control Transmission Protocol</a>", RFC 4960, September 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5351">[RFC5351]</b></td>
<td class="top">
<a>Lei, P.</a>, <a>Ong, L.</a>, <a>Tuexen, M.</a> and <a>T. Dreibholz</a>, "<a href="http://tools.ietf.org/html/rfc5351">An Overview of Reliable Server Pooling Protocols</a>", RFC 5351, September 2008.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.nishida-tsvwg-sctp-failover">[I-D.nishida-tsvwg-sctp-failover]</b></td>
<td class="top">
<a>Nishida, Y</a>, <a>Natarajan, P</a> and <a>A Caro</a>, "<a href="http://tools.ietf.org/html/draft-nishida-tsvwg-sctp-failover-04">Quick Failover Algorithm in SCTP</a>", Internet-Draft draft-nishida-tsvwg-sctp-failover-04, September 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.natarajan-tsvwg-sctp-nrsack">[I-D.natarajan-tsvwg-sctp-nrsack]</b></td>
<td class="top">
<a>Ekiz, N</a>, <a>Amer, P</a>, <a>Natarajan, P</a>, <a>Stewart, R</a> and <a>J Iyengar</a>, "<a href="http://tools.ietf.org/html/draft-natarajan-tsvwg-sctp-nrsack-08">Non-Renegable Selective Acknowledgements (NR-SACKs) for SCTP</a>", Internet-Draft draft-natarajan-tsvwg-sctp-nrsack-08, August 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.dreibholz-tsvwg-sctpsocket-multipath">[I-D.dreibholz-tsvwg-sctpsocket-multipath]</b></td>
<td class="top">
<a>Dreibholz, T</a> and <a>M Becke</a>, "<a href="http://tools.ietf.org/html/draft-dreibholz-tsvwg-sctpsocket-multipath-02">SCTP Socket API Extensions for Concurrent Multipath Transfer</a>", Internet-Draft draft-dreibholz-tsvwg-sctpsocket-multipath-02, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.dreibholz-tsvwg-sctpsocket-sqinfo">[I-D.dreibholz-tsvwg-sctpsocket-sqinfo]</b></td>
<td class="top">
<a>Dreibholz, T</a>, <a>Seggelmann, R</a> and <a>M Becke</a>, "<a href="http://tools.ietf.org/html/draft-dreibholz-tsvwg-sctpsocket-sqinfo-02">Sender Queue Info Option for the SCTP Socket API</a>", Internet-Draft draft-dreibholz-tsvwg-sctpsocket-sqinfo-02, October 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">10.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I06">[I06]</b></td>
<td class="top">
<a>Iyengar, J.</a>, "<a>End-to-End Concurrent Multipath Transfer Using Transport Layer Multihoming</a>", PhD Dissertation Computer Science Dept., University of Delaware, April 2006.</td>
</tr>
<tr>
<td class="reference"><b id="IAS06">[IAS06]</b></td>
<td class="top">
<a>Iyengar, J.</a>, <a>Amer, P. D.</a> and <a>R. R. Stewart</a>, "<a>Concurrent Multipath Transfer Using SCTP Multihoming Over Independent End-to-End Paths</a>", Journal IEEE/ACM Transactions on Networking, October 2006.</td>
</tr>
<tr>
<td class="reference"><b id="NEA+08">[NEA+08]</b></td>
<td class="top">
<a>Natarajan, P.</a>, <a>Ekiz, N.</a>, <a>Iyengar, J.</a>, <a>Amer, P.</a> and <a>R. Stewart</a>, "<a>Concurrent Multipath Transfer Using Transport Layer Multihoming: Introducing the Potentially-failed Destination State</a>", Proceedings of the IFIP Networking, May 2008.</td>
</tr>
<tr>
<td class="reference"><b id="NEY+08">[NEY+08]</b></td>
<td class="top">
<a>Natarajan, P.</a>, <a>Ekiz, N.</a>, <a>Yilmaz, E.</a>, <a>Amer, P.</a>, <a>Iyengar, J.</a> and <a>R. Stewart</a>, "<a>Non-Renegable Selective Acknowledgments (NR-SACKs) for SCTP</a>", Proceedings of the 16th IEEE International Conference on Network Protocols (ICNP), October 2008.</td>
</tr>
<tr>
<td class="reference"><b id="WHB09">[WHB09]</b></td>
<td class="top">
<a>Wischik, D.</a>, <a>Handley, M.</a> and <a>M. B. Braun</a>, "<a>The Resource Pooling Principle</a>", Journal ACM SIGCOMM Computer Communication Review, October 2009.</td>
</tr>
<tr>
<td class="reference"><b id="DBP+10a">[DBP+10a]</b></td>
<td class="top">
<a>Dreibholz, T.</a>, <a>Becke, M.</a>, <a>Pulinthanath, J.</a> and <a>E.P. Rathgeb</a>, "<a>Implementation and Evaluation of Concurrent Multipath Transfer for SCTP in the INET Framework</a>", Proceedings of the 3rd ACM/ICST OMNeT++ Workshop, March 2010.</td>
</tr>
<tr>
<td class="reference"><b id="DBP+10b">[DBP+10b]</b></td>
<td class="top">
<a>Dreibholz, T.</a>, <a>Becke, M.</a>, <a>Pulinthanath, J.</a> and <a>E. P. Rathgeb</a>, "<a>Applying TCP-Friendly Congestion Control to Concurrent Multipath Transfer</a>", Proceedings of the IEEE 24th International Conference on Advanced Information Networking and Applications (AINA), April 2010.</td>
</tr>
<tr>
<td class="reference"><b id="DBR+10">[DBR+10]</b></td>
<td class="top">
<a>Dreibholz, T.</a>, <a>Becke, M.</a>, <a>Rathgeb, E. P.</a> and <a>M. Tuexen</a>, "<a>On the Use of Concurrent Multipath Transfer over Asymmetric Paths</a>", Proceedings of the IEEE Global Communications Conference (GLOBECOM), December 2010.</td>
</tr>
<tr>
<td class="reference"><b id="DST+10">[DST+10]</b></td>
<td class="top">
<a>Dreibholz, T.</a>, <a>Seggelmann, R.</a>, <a>Tuexen, M.</a> and <a>E. P. Rathgeb</a>, "<a>Transmission Scheduling Optimizations for Concurrent Multipath Transfer</a>", Proceedings of the 8th International Workshop on Protocols for Future, Large-Scale and Diverse Network Transports (PFLDNeT) , November 2010.</td>
</tr>
<tr>
<td class="reference"><b id="ADB+11">[ADB+11]</b></td>
<td class="top">
<a>Adhari, H.</a>, <a>Dreibholz, T.</a>, <a>Becke, M.</a>, <a>Rathgeb, E.&#160;P.</a> and <a>M. T&#252;xen</a>, "<a>Evaluation of Concurrent Multipath Transfer over Dissimilar Paths</a>", Proceedings of the 1st International Workshop on Protocols and Applications with Multi-Homing Support&#160;(PAMS), March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="DBA+11">[DBA+11]</b></td>
<td class="top">
<a>Dreibholz, T.</a>, <a>Becke, M.</a>, <a>Adhari, H.</a> and <a>E.&#160;P. Rathgeb</a>, "<a>On the Impact of Congestion Control for Concurrent Multipath Transfer on the Transport Layer</a>", Proceedings of the 11th IEEE International Conference on Telecommunications&#160;(ConTEL), June 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Martin Becke</span> 
	  <span class="n hidden">
		<span class="family-name">Becke</span>
	  </span>
	</span>
	<span class="org vcardline">University of Duisburg-Essen, Institute for Experimental Mathematics</span>
	<span class="adr">
	  <span>Ellernstrasse 29</span>

	  <span class="vcardline">
		<span class="locality">45326 Essen</span>,  
		<span class="region">Nordrhein-Westfalen</span> 
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">Phone: +49-201-183-7667</span>

<span class="vcardline">EMail: <a href="mailto:martin.becke@uni-due.de">martin.becke@uni-due.de</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Thomas Dreibholz</span> 
	  <span class="n hidden">
		<span class="family-name">Dreibholz</span>
	  </span>
	</span>
	<span class="org vcardline">University of Duisburg-Essen, Institute for Experimental Mathematics</span>
	<span class="adr">
	  <span>Ellernstrasse 29</span>

	  <span class="vcardline">
		<span class="locality">45326 Essen</span>,  
		<span class="region">Nordrhein-Westfalen</span> 
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">Phone: +49-201-183-7637</span>

<span class="vcardline">EMail: <a href="mailto:dreibh@iem.uni-due.de">dreibh@iem.uni-due.de</a></span>

<span class="vcardline">URI: <a href="http://www.iem.uni-due.de/~dreibh/">http://www.iem.uni-due.de/~dreibh/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Janardhan Iyengar</span> 
	  <span class="n hidden">
		<span class="family-name">Iyengar</span>
	  </span>
	</span>
	<span class="org vcardline">Franklin and Marshall College, Mathematics and Computer Science</span>
	<span class="adr">
	  <span>PO Box 3003</span>

	  <span class="vcardline">
		<span class="locality">Lancaster</span>,  
		<span class="region">Pennsylvania</span> 
		<span class="code">17604-3003</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1-717-358-4774</span>

<span class="vcardline">EMail: <a href="mailto:jiyengar@fandm.edu">jiyengar@fandm.edu</a></span>

<span class="vcardline">URI: <a href="http://www.fandm.edu/jiyengar/">http://www.fandm.edu/jiyengar/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Preethi Natarajan</span> 
	  <span class="n hidden">
		<span class="family-name">Natarajan</span>
	  </span>
	</span>
	<span class="org vcardline">Cisco Systems</span>
	<span class="adr">
	  <span>425 East Tasman Drive</span>

	  <span class="vcardline">
		<span class="locality">San Jose</span>,  
		<span class="region">California</span> 
		<span class="code">95134</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:prenatar@cisco.com">prenatar@cisco.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Michael Tuexen</span> 
	  <span class="n hidden">
		<span class="family-name">Tuexen</span>
	  </span>
	</span>
	<span class="org vcardline">Muenster University of Applied Sciences</span>
	<span class="adr">
	  <span>Stegerwaldstrasse 39</span>

	  <span class="vcardline">
		<span class="locality">48565 Steinfurt</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:tuexen@fh-muenster.de">tuexen@fh-muenster.de</a></span>

  </address>
</div>

</body>
</html>