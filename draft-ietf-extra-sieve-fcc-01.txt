



EXTRA                                                       K. Murchison
Internet-Draft                                               B. Gondwana
Updates: 5230, 5435 (if approved)                               FastMail
Intended status: Standards Track                        January 11, 2018
Expires: July 15, 2018


                Sieve Extension: File Carbon Copy (Fcc)
                     draft-ietf-extra-sieve-fcc-01

Abstract

   The Sieve Email Filtering Language provides a number of action
   commands, some of which can generate additional messages on behalf of
   the user.  This document defines an extension to such commands to
   allow a copy of any generated message to be filed into a target
   mailbox.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on July 15, 2018.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of




Murchison & Gondwana      Expires July 15, 2018                 [Page 1]

Internet-Draft                  Sieve Fcc                   January 2018


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Conventions Used in This Document . . . . . . . . . . . . . .   2
   3.  Tagged Argument ":fcc"  . . . . . . . . . . . . . . . . . . .   3
     3.1.  Interaction with the Vacation Action  . . . . . . . . . .   3
     3.2.  Interaction with the Notify Action  . . . . . . . . . . .   4
     3.3.  Compatibility with the Reject and Extended Reject
           Actions . . . . . . . . . . . . . . . . . . . . . . . . .   4
     3.4.  Compatibility with Other Actions  . . . . . . . . . . . .   4
     3.5.  Interaction with Fileinto Extensions  . . . . . . . . . .   4
       3.5.1.  Imap4flags Extension  . . . . . . . . . . . . . . . .   5
       3.5.2.  Mailbox Extension . . . . . . . . . . . . . . . . . .   5
       3.5.3.  Special-Use Extension . . . . . . . . . . . . . . . .   5
       3.5.4.  Extended Example  . . . . . . . . . . . . . . . . . .   6
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .   6
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
     5.1.  Registration of Sieve Extension . . . . . . . . . . . . .   6
   6.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   6
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   6
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   6
     7.2.  Informative References  . . . . . . . . . . . . . . . . .   7
   Appendix A.  Change History (To be removed by RFC Editor before
                publication) . . . . . . . . . . . . . . . . . . . .   8
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   8

1.  Introduction

   The Sieve Email Filtering Language [RFC5228] provides a number of
   action commands, some of which can generate additional messages on
   behalf of the user.  Two such commands are defined by the Vacation
   [RFC5230] and Notify [RFC5435] extensions.  It is sometimes desirable
   to have an archive of the messages generated by these commands.

   This extension defines a new optional tagged argument ":fcc" to
   action commands which generate additional messages to allow a copy of
   the generated message to be filed into a target mailbox.

   The capability string associated with this extension is "fcc".

2.  Conventions Used in This Document

   Conventions for notations are as in Section 1.1 of [RFC5228],
   including use of the "Usage:" label for the definition of action and
   tagged arguments syntax.



Murchison & Gondwana      Expires July 15, 2018                 [Page 2]

Internet-Draft                  Sieve Fcc                   January 2018


   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   [RFC2119].

3.  Tagged Argument ":fcc"

   Usage:   ":fcc" FCC-OPTIONS <mailbox: string>

   The positional FCC-OPTIONS argument is defined here in ABNF [RFC4234]
   syntax so that it can be modified by other extensions.

   FCC-OPTIONS = ""  ; empty string

   If the optional ":fcc" argument is specified with an action that
   generates an additional message, it instructs the Sieve interpreter
   to file a copy of the generated message into the target mailbox.  If
   the specified mailbox doesn't exist, the implementation MAY treat it
   as an error, create the mailbox, or file the message into an
   implementation-defined mailbox.

3.1.  Interaction with the Vacation Action

   This document extends the "vacation" [RFC5230] action (see also
   "vacation-seconds" [RFC6131]) to optionally store a copy of the auto-
   reply messages into a target mailbox.

   Usage:   vacation [":days" number | ":seconds" number]
                     [":subject" string]
                     [":from" string]
                     [":addresses" string-list]
                     [":mime"]
                     [":handle" string]
                     [":fcc" FCC-OPTIONS <mailbox: string>]
                     <reason: string>

   Example:

   require ["vacation", "fcc"];

   vacation :days 7
            :fcc "INBOX.Sent"
            :from "hemingway@example.com" "Gone Fishin'";








Murchison & Gondwana      Expires July 15, 2018                 [Page 3]

Internet-Draft                  Sieve Fcc                   January 2018


3.2.  Interaction with the Notify Action

   This document extends the "notify" [RFC5435] action to optionally
   store a copy of the notification messages into a target mailbox.

   Usage:   notify [":from" string]
                   [":importance" <"1" / "2" / "3">]
                   [":options" string-list]
                   [":message" string]
                   [":fcc" FCC-OPTIONS <mailbox: string>]
                   <method: string>

   Example:

   require ["enotify", "fcc"];

   notify :message "You got mail!"
          :fcc "INBOX.Sent"
          "mailto:ken@example.com";

3.3.  Compatibility with the Reject and Extended Reject Actions

   "fcc" MUST be incompatible with the "reject" and "ereject" [RFC5429]
   actions.  Making "fcc" compatible with these actions violates the
   SMTP [RFC5321] principle that a message is either delivered or
   bounced back to the sender.  Namely, the saved copy of the rejection
   message will contain the original message.

   It is an error for a script to use the ":fcc" tagged argument with
   either "reject" or "ereject".

3.4.  Compatibility with Other Actions

   The "fcc" extension is not compatible with any Sieve action that does
   not generate an additional message on behalf of the user.  It is an
   error for a script to use the ":fcc" tagged argument with any such
   action.

   Future extensions that define actions that generate additional
   messages on behalf of the user should describe their compatibility
   with ":fcc".

3.5.  Interaction with Fileinto Extensions

   The "fcc" extension can be used with some tagged arguments defined in
   extensions to the "fileinto" action.  The sections below describe its
   interaction with currently defined extensions.  Tagged arguments in




Murchison & Gondwana      Expires July 15, 2018                 [Page 4]

Internet-Draft                  Sieve Fcc                   January 2018


   future extensions to the "fileinto" command should describe their
   interaction with ":fcc", if any.

3.5.1.  Imap4flags Extension

   This document extends the definition of the ":flags" [RFC5232] tagged
   argument so that it can be used as an FCC-OPTIONS to the ":fcc"
   argument.

   FCC-OPTIONS =/ [":flags" <list-of-flags: string-list>]

   If the optional ":flags" argument is specified with ":fcc", it
   instructs the Sieve interpreter to set the IMAP4 flags provided in
   the subsequent argument when the generated message is filed into the
   target mailbox.

3.5.2.  Mailbox Extension

   This document extends the definition of the ":create" [RFC5490]
   tagged argument so that it can be used as an FCC-OPTIONS to the
   ":fcc" argument.

   FCC-OPTIONS =/ [":create"]

   If the optional ":create" argument is specified with ":fcc", it
   instructs the Sieve interpreter to create the target mailbox, if
   needed, before attempting to file the generated message into the
   target mailbox.

3.5.3.  Special-Use Extension

   This document extends the definition of the ":specialuse"
   [I-D.ietf-extra-sieve-special-use] tagged argument so that it can be
   used as an FCC-OPTIONS to the ":fcc" argument.

   FCC-OPTIONS =/ [":specialuse <special-use-flag: string>"]

   If the optional ":specialuse" argument is specified with ":fcc", it
   instructs the Sieve interpreter to check whether a mailbox exists
   with the specific special-use flag assigned to it.  If such a mailbox
   exists, the generated message is filed into the special-use mailbox.
   Otherwise, the generated message is filed into the target mailbox.

   If both the optional ":specialuse" and ":create" arguments are
   specified with ":fcc", the Sieve interpreter is instructed to create
   the target mailbox per Section 4.1 of
   [I-D.ietf-extra-sieve-special-use], if needed.




Murchison & Gondwana      Expires July 15, 2018                 [Page 5]

Internet-Draft                  Sieve Fcc                   January 2018


3.5.4.  Extended Example

require ["vacation", "fcc", "mailbox", "special-use", "imap4flags"];

vacation :days 7
         :fcc :specialuse "\\Sent" :create :flags ["\\Seen"] "INBOX.Sent"
         :from "hemingway@example.com" "Gone Fishin'";

4.  Security Considerations

   The "fcc" extension does not raise any other security considerations
   that are not already present in [RFC5228], [RFC5230], [RFC5435], and
   [RFC6131].

5.  IANA Considerations

5.1.  Registration of Sieve Extension

      To: iana@iana.org

      Subject: Registration of new Sieve extension

      Capability name: fcc

      Description: Adds the ":fcc" parameter to Sieve action commands
      that generate additional messages.

      RFC number: RFC XXXX

      Contact address: The Sieve discussion list <sieve@ietf.org>

6.  Acknowledgments

   The authors would like to thank the following individuals for
   contributing their ideas and support for writing this specification:
   Ned Freed, Stan Kalisch.

7.  References

7.1.  Normative References

   [I-D.ietf-extra-sieve-special-use]
              Bosch, S., "Sieve Email Filtering: Delivering to Special-
              Use Mailboxes", draft-ietf-extra-sieve-special-use-01
              (work in progress), January 2018.






Murchison & Gondwana      Expires July 15, 2018                 [Page 6]

Internet-Draft                  Sieve Fcc                   January 2018


   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC4234]  Crocker, D., Ed. and P. Overell, "Augmented BNF for Syntax
              Specifications: ABNF", RFC 4234, DOI 10.17487/RFC4234,
              October 2005, <https://www.rfc-editor.org/info/rfc4234>.

   [RFC5228]  Guenther, P., Ed. and T. Showalter, Ed., "Sieve: An Email
              Filtering Language", RFC 5228, DOI 10.17487/RFC5228,
              January 2008, <https://www.rfc-editor.org/info/rfc5228>.

   [RFC5230]  Showalter, T. and N. Freed, Ed., "Sieve Email Filtering:
              Vacation Extension", RFC 5230, DOI 10.17487/RFC5230,
              January 2008, <https://www.rfc-editor.org/info/rfc5230>.

   [RFC5232]  Melnikov, A., "Sieve Email Filtering: Imap4flags
              Extension", RFC 5232, DOI 10.17487/RFC5232, January 2008,
              <https://www.rfc-editor.org/info/rfc5232>.

   [RFC5435]  Melnikov, A., Ed., Leiba, B., Ed., Segmuller, W., and T.
              Martin, "Sieve Email Filtering: Extension for
              Notifications", RFC 5435, DOI 10.17487/RFC5435, January
              2009, <https://www.rfc-editor.org/info/rfc5435>.

   [RFC5490]  Melnikov, A., "The Sieve Mail-Filtering Language --
              Extensions for Checking Mailbox Status and Accessing
              Mailbox Metadata", RFC 5490, DOI 10.17487/RFC5490, March
              2009, <https://www.rfc-editor.org/info/rfc5490>.

7.2.  Informative References

   [RFC5321]  Klensin, J., "Simple Mail Transfer Protocol", RFC 5321,
              DOI 10.17487/RFC5321, October 2008,
              <https://www.rfc-editor.org/info/rfc5321>.

   [RFC5429]  Stone, A., Ed., "Sieve Email Filtering: Reject and
              Extended Reject Extensions", RFC 5429,
              DOI 10.17487/RFC5429, March 2009,
              <https://www.rfc-editor.org/info/rfc5429>.

   [RFC6131]  George, R. and B. Leiba, "Sieve Vacation Extension:
              "Seconds" Parameter", RFC 6131, DOI 10.17487/RFC6131, July
              2011, <https://www.rfc-editor.org/info/rfc6131>.






Murchison & Gondwana      Expires July 15, 2018                 [Page 7]

Internet-Draft                  Sieve Fcc                   January 2018


Appendix A.  Change History (To be removed by RFC Editor before
             publication)

   Changes since draft-ietf-extra-sieve-fcc-00:

   o  Updated abstract with text from Ned.

   o  Added support for :fcc to notify extension.

   o  Prohibit use of :fcc with reject and ereject extensions.

   o  Added registration of the extension with IANA.

   o  Added Acknowledgments.

   o  Minor editorial changes.

Authors' Addresses

   Kenneth Murchison
   FastMail Pty Ltd
   Level 2, 114 William Street
   Melbourne, VIC  3000
   Australia

   Email: murch@fastmailteam.com


   Bron Gondwana
   FastMail Pty Ltd
   Level 2, 114 William Street
   Melbourne, VIC  3000
   Australia

   Email: brong@fastmailteam.com
















Murchison & Gondwana      Expires July 15, 2018                 [Page 8]
