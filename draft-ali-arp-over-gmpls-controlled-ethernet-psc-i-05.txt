      
      
     CCAMP Working Group                                     Zafar Ali 
                                                         Hassan Sheikh 
     Internet Draft                                Cisco Systems, Inc. 
                                                        Tomohiro Otani 
                                           KDDI R&D Laboratories, Inc. 
                                                    Hidetsugu Sugiyama 
                                                      Juniper Networks  
     Intended status: BCP                            November 18, 2007 
     Expires: May 2008 
                                         
      
                                        
             Address Resolution for GMPLS controlled PSC Ethernet 
                                  Interfaces 
                                        
          draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-05.txt 
                                        
     Status of this Memo 

           By submitting this Internet-Draft, each author represents 
        that any applicable patent or other IPR claims of which he or 
        she is aware have been or will be disclosed, and any of which 
        he or she becomes aware will be disclosed, in accordance with 
        Section 6 of BCP 79. 

           Internet-Drafts are working documents of the Internet 
        Engineering Task Force (IETF), its areas, and its working 
        groups.  Note that other groups may also distribute working 
        documents as Internet-Drafts. 

           Internet-Drafts are draft documents valid for a maximum of 
        six months and may be updated, replaced, or obsoleted by other 
        documents at any time. It is inappropriate to use Internet-
        Drafts as reference material or to cite them other than as 
        "work in progress." 

        The list of current Internet-Drafts can be accessed at        
        http://www.ietf.org/ietf/1id-abstracts.txt. 
         
        The list of Internet-Draft Shadow Directories can be accessed 
        at http://www.ietf.org/shadow.html. 

     Copyright Notice 

        Copyright (C) The IETF Trust (2007). 

      

      
      
      
     Z. Ali             Expires May 18, 2008                  [Page 1] 
      
          draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-05.txt          
         

     Abstract 

        This document outlines some interoperability issues observed 
        with the use of ARP over GMPLS controlled Ethernet router-to-
        router (PSC) interfaces transiting from a non-Ethernet core, 
        e.g., FSC or LSC core. The document also recommends some 
        procedures to address these issues. The aim of this document 
        is to facilitate and ensure better interworking of GMPLS-
        capable Label Switching Routers (LSRs), based on experience 
        gained in interoperability testing.  

     Conventions used in this document 

        In examples, "C:" and "S:" indicate lines sent by the client 
        and server respectively. 

        The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL 
        NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and 
        "OPTIONAL" in this document are to be interpreted as described 
        in RFC-2119 [RFC2119]. 

     Table of Contents 

         
        1. Terminology...............................................2 
        2. Introduction..............................................3 
        3. Address to use for ARP Resolution.........................5 
        4. Security Considerations...................................5 
        5. IANA Considerations.......................................5 
        6. References................................................6 
           6.1. Normative References.................................6 
           6.2. Informative References...............................6 
        7. Author's Addresses........................................6 
        8. Intellectual Property Statement...........................7 
        9. Copyright Statement.......................................7 
         
     1. Terminology 

        The control plane address refers to the address assigned to 
        the TE Links. This address is used to advertise TE link in the 
        TE topology. 
         
        The data plane address refers to the address assigned to the 
        Ethernet data link or the address assigned to the GMPLS tunnel 
        interface. This address is used at PSC (packet switching 
        capable) layer for forwarding traffic over the GMPLS LSP. The 

      
      
        Z. Ali, et al        Expires May 18, 2008            [Page 2] 
         
          draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-05.txt          
         

        terms the data plane address and the GMPLS tunnel address are 
        used synonymously.  
     2. Introduction 

        This draft addresses the scenario where edge routers are 
        connected via a non-Ethernet switch capable GMPLS core, e.g., 
        FSC or LSC core [RFC3471], [RFC3473]. Furthermore, the 
        interfaces between the router and the optical device (OXC) are 
        Ethernet, and considered as point-to-point. The TE links can 
        be numbered or unnumbered. Similarly, data plane address can 
        be numbered or unnumbered. Furthermore, the LSP end-points may 
        or may not be in the same subnets. 
         
        When an LSP Path is established between the Ingress and Egress 
        LSRs, Ethernet interface at the two LSRs comes up. Unlike POS 
        links where a L2 adjacency resolution is not required, the 
        Ethernet links require that the ARP be resolved (also known as 
        Layer 2 MAC address) before any forwarding works on this link. 
        Specifically, before a GMPLS LSP with Ethernet end-point can 
        forward any IP traffic, MAC address of the remote router needs 
        to be resolved. The remote MAC address learning is the same 
        procedure used in ARP resolution to be able to map an ip 
        address to a MAC address on an Ethernet Data Link.  
      
        End-point MAC address needs to be re-learned once the ARP 
        cache entries time-out, or every time the Ethernet Data Link 
        path taken by the GMPLS LSP changes (e.g., due to re-routing 
        or re-optimization). This introduces latency that is at least 
        equal to the round trip delay. Such latency adds to the 
        traffic switchover delay and consequently traffic loss for 1:1 
        protected LSP without extra traffic, or when LSP route changes 
        due to re-routing (restoration) or re-optimization, etc.  
         
        Interoperability issues in learning end-point MAC address in 
        the Ethernet Data Link using ARP are also found among vendors 
        at various Interoperability events/ testing efforts. This is 
        because different vendors use different IP address for ARP 
        resolution. Some LSR vendor uses the control plane address of 
        the TE link at the end-point, while others adapt to use data 
        plane address on the Ethernet Data Link for ARP resolution. 
         
        When GMPLS tunnel is protected, i.e., it has working and 
        protecting LSP-es, the ARP requested for a given Ethernet IF 
        address should resolve ARP for the physical Ethernet 
        interfaces along the path of working and protecting LSP. Issue 
        associated with ARP latency and traffic loss for 1:1 protected 
        LSP without extra traffic, or when LSP route changes due to 
      
      
        Z. Ali, et al        Expires May 18, 2008            [Page 3] 
         
          draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-05.txt          
         

        re-routing (restoration) or re-optimization, etc. could not be 
        addressed.  
         
        This document provides some recommendations for the use of the 
        MAC addresses resolution (ARP resolution) for a GMPLS LSP. In 
        the following, we provide reason behind recommendations 
        provided in this document.  
         
        Consider following scenarios.  
         
        1. When numbered TE links are used but the LSP end-points are 
           in different subnets:  
            
           In this case disjoint subnets are used with numbered TE 
           links between the Ingress LSR and the Optical node, and 
           the Egress LSR and the optical node. In this situation we 
           really have no way of resolving ARP using the addresses of 
           the underlying TE link, without using static ARP entries. 
           The issue is that the subnets are different so the ARP 
           request received by Egress LSR from Ingress LSR will be 
           rejected as it is not known to Egress LSR, and vice versa. 
           This issue can be resolved when the ARP request uses 
           Ethernet data link address. This is because the Ethernet 
           data link is point-to-point logical link with IPV4 
           addresses in the same subnet. 
            
        2. When the Ethernet data link is numbered but the TE links 
           are Unnumbered and Ingress LSR does not have loopback 
           address used by Egress LSR in its forwarding database, and 
           vice versa.  
         
           An example of such scenario is the case when optical and 
           packet TE links are flooded with different IGP instances. 
           In this case, we are again faced with the same issue of L2 
           ARP adjacency resolution between Ingress and Egress LSR. 
           Egress LSR will reject the ARP request for Ingress LSR as 
           it will not find the unnumbered address (used by Ingress 
           LSR) in its forwarding database. This issue can also be 
           resolve by using Ethernet data link address in the ARP 
           request. 
            
        3. Unnumbered for Ethernet data link:  
         
           If the Ethernet data link is unnumbered then the ARP 
           resolution needs to be done using donor interface IP 
           address such as Loopback address (/32).  However, OSPFv2 
           adjacency is not established between non-network nodes 
      
      
        Z. Ali, et al        Expires May 18, 2008            [Page 4] 
         
          draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-05.txt          
         

           (/32) in Ethernet. In this case, the Ethernet data link 
           established with GMPLS tunnel would require the router to 
           support OSPFv2/ISIS adjacency in non-network data plane 
           segment.  
         
        4. GMPLS Protection Case:  
         
           The use of the protected Ethernet data link along with 
           GMPLS LSP for ARP resolution can also extended to the case 
           where the GMPLS tunnel is provided end-to-end 1:1 
           protection i.e. a working LSP and a protected LSP of the 
           GMPLS tunnel are typically using different physical 
           interfaces (different MAC addresses) with different TE 
           Link.  This issue can be resolved by using the same IP 
           address and same MAC address for ARP resolution over 
           working and protecting interfaces. The use of this 
           implementation along with the creation of such mapping 
           would also eliminate the problem of ARP cache timeout on 
           the protected link; and hence can address the above-
           mentioned ARP latency issue related to protection case.  
         
     3. Address to use for ARP Resolution 

        An LSR SHOULD use data plane address on Ethernet data link for 
        ARP request. For protected point-to-point interfaces, an LSR 
        SHOULD resolve APR for two or more physical interfaces using 
        the same IP address and same MAC address (this is to address 
        ARP Latency issue mentioned-above). In the case of unnumbered 
        interface in Ethernet data link associate with GMPLS tunnel, 
        ARP resolution SHOULD use donor interface such as Loopback 
        interface (/32) and OSPFv2 SHOULD establish adjacency in the 
        non-network IP segment. 
          

     4. Security Considerations 

        This document does not introduce new security issues. 

      
     5. IANA Considerations 

        This document does not require any IANA consideration.   





      
      
        Z. Ali, et al        Expires May 18, 2008            [Page 5] 
         
          draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-05.txt          
         

     6. References 

     6.1. Normative References 

        [RFC2119] "Key words for use in RFCs to Indicate Requirement 
        Levels", S. Bradner, http://tools.ietf.org/html/rfc2119. 

     6.2. Informative References 

        [RFC3471] Generalized Multi-Protocol Label Switching (GMPLS) 
           Signaling Functional Description, RFC 3471, L. Berger, et 
           al, January 2003. 
        [RFC3473] "Generalized Multi-Protocol Label Switching (GMPLS) 
           Signaling Resource ReserVation Protocol-Traffic Engineering 
           (RSVP-TE) Extensions", RFC 3473, L. Berger, et al, January 
           2003.  
         
     7. Author's Addresses 

        Zafar Ali 
        Cisco Systems Inc. 
        2000 Innovation Dr.,  
        Kanata, Ontario, K2K 3E8   
        Canada. 
        Phone: (613) 889-6158 
        Email: zali@cisco.com  
         
        Hassan Sheikh 
        Cisco Systems Inc. 
        2000 Innovation Dr.,  
        Kanata, Ontario, K2K 3E8   
        Canada. 
        Phone: (613) 254-3356 
        Email: hassans@cisco.com  
         
        Tomohiro Otani 
        KDDI R&D Laboratories, Inc.  
        2-1-15 Ohara Fujimino-shi      
        Saitama, 356-8502. Japan      
        Phone:  +81-49-278-7357 
        Email:  otani@kddilabs.jp 
         
        Hidetsugu Sugiyama 
        Juniper Networks 
        Email: hidet@juniper.net 


      
      
        Z. Ali, et al        Expires May 18, 2008            [Page 6] 
         
          draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-05.txt          
         

         
     8. Intellectual Property Statement 

           The IETF takes no position regarding the validity or scope 
        of any Intellectual Property Rights or other rights that might 
        be claimed to pertain to the implementation or use of the 
        technology described in this document or the extent to which 
        any license under such rights might or might not be available; 
        nor does it represent that it has made any independent effort 
        to identify any such rights. Information on the procedures 
        with respect to rights in RFC documents can be found in BCP 78 
        and BCP 79. 

           Copies of IPR disclosures made to the IETF Secretariat and 
        any assurances of licenses to be made available, or the result 
        of an attempt made to obtain a general license or permission 
        for the use of such proprietary rights by implementers or 
        users of this specification can be obtained from the IETF on-
        line IPR repository at http://www.ietf.org/ipr. 

           The IETF invites any interested party to bring to its 
        attention any copyrights, patents or patent applications, or 
        other proprietary rights that may cover technology that may be 
        required to implement this standard. Please address the 
        information to the IETF at ietf-ipr@ietf.org. 

     9. Copyright Statement 

      
           Copyright (C) The IETF Trust (2007). 

           This document is subject to the rights, licenses and 
        restrictions contained in BCP 78, and except as set forth 
        therein, the authors retain all their rights. 

           This document and the information contained herein are 
        provided on an "AS IS" basis and THE CONTRIBUTOR, THE 
        ORGANIZATION HE/SHE REPRESENTS OR IS SPONSORED BY (IF ANY), 
        THE INTERNET SOCIETY, THE IETF TRUST AND THE INTERNET 
        ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR 
        IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE 
        USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR 
        ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A 
        PARTICULAR PURPOSE. 

         

      
      
        Z. Ali, et al        Expires May 18, 2008            [Page 7] 
         
          draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-05.txt          
         

         

         












































      
      
        Z. Ali, et al        Expires May 18, 2008            [Page 8] 
         
