PIM Working Group                                               H. Zhao
Internet Draft                                                 Ericsson
Intended status: Standards Track                                 X. Liu
Expires: May 21, 2022                                    Volta Networks
                                                                 Y. Liu
                                                           China Mobile
                                                           M. Sivakumar
                                                                Juniper
                                                               A. Peter
                                                             Individual

                                                      November 22, 2021



           IGMP and MLD Snooping Yang Module Extension for L2VPN
          draft-zhao-pim-igmp-mld-snooping-yang-l2vpn-ext-00.txt




Abstract

Internet Group Management Protocol (IGMP) and Multicast Listener
Discovery (MLD) Snooping could be used in both BRIGDE service and L2VPN
service. The old ietf-igmp-mld-snooping yang module just describes the
BRIGDE service. In this document we extend the existing ietf-igmp-mld-
snooping yang module and make it could be used in L2VPN service.

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html




Zhao & Liu, etc            Expires May 21, 2022                [Page 1]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

   This Internet-Draft will expire on May 21, 2022.

Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors. All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document. Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document. Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.



Table of Contents


   1. Introduction...................................................3
      1.1. Terminology...............................................3
      1.2. Tree Diagrams.............................................3
      1.3. Prefixes in Data Node Names...............................4
   2. Design of Data Model...........................................4
   3. Module Structure...............................................5
      3.1. Mrouter interface for L2VPN...............................5
      3.2. Outgoing interface for L2VPN..............................6
      3.3. Using IGMP and MLD Snooping Instances in L2VPN service....7
   4. IGMP and MLD Snooping Yang Module Extension....................7
   5. Security Considerations.......................................12
   6. IANA Considerations...........................................14
      6.1. XML Registry.............................................14
      6.2. YANG Module Names Registry...............................14
   7. References....................................................14
      7.1. Normative References.....................................14
      7.2. Informative References...................................16
   Appendix A.  Data Tree Example...................................17
      L2VPN service.................................................17
   Authors' Addresses...............................................21










Zhao & Liu, etc                   Expires May 21, 2022                   [Page 2]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

1. Introduction

The Internet Group Management Protocol (IGMP) and Multicast Listener
Discovery (MLD) Snooping [RFC4541] could be used in both BRIGE and
L2VPN. This document extends the existing ietf-igmp-mld-snooping yang
module and introduces l2vpn as a new l2-service-type [draft-ietf-pim-
igmp-mld-snooping-yang]. The YANG module in this document conforms to
the Network Management Datastore Architecture defined in [RFC8342].

1.1. Terminology

The terminology for describing YANG data models is found in [RFC6020]

and [RFC7950], including:

  *  augment

  *  data model

  *  data node

  *  identity

  *  module

The following terminologies are used in this document:

  *  mrouter: The multicast router, which is a router that has multicast
routing enabled [RFC4286].

  *  mrouter interface: The snooping switch ports where multicast
routers are attached [RFC4541]. Either Attachment Circuit (AC) or Pseudo
Wire (PW) could be mrouter interface in L2VPN.

The following abbreviations are used in this document and defined model:

  IGMP: Internet Group Management Protocol [RFC3376].

  MLD:  Multicast Listener Discovery [RFC3810].

  AC:   Attachment Circuit [RFC3916].

  PW:   Pseudo Wire [RFC3916].

1.2. Tree Diagrams

Tree diagrams used in this document follow the notation defined in

[RFC8340].



Zhao & Liu, etc                   Expires May 21, 2022                   [Page 3]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

1.3. Prefixes in Data Node Names

In this document, names of data nodes, actions, and other data model
objects are often used without a prefix, as long as it is clear from the
context in which YANG module each name is defined. Otherwise, names are
prefixed using the standard prefix associated with the corresponding
YANG module, as shown in Table 1.

+-------+-----------------------+----------------------------------------+
| Prefix| YANG module           | Reference                              |
+=======+=======================+========================================+
| if    | ietf-interfaces       | [RFC8343]                              |
+-------+-----------------------+----------------------------------------+
| rt    | ietf-routing          | [RFC8349]                              |
+-------+-----------------------+----------------------------------------+
| ni    | ietf-network-instance | [RFC8529]                              |
+-------+-----------------------+----------------------------------------+
| pw    | ietf-pseudowires      | [draft-ietf-bess-l2vpn-yang]           |
+-------+-----------------------+----------------------------------------+
| l2vpn | ietf-l2vpn            | [draft-ietf-bess-l2vpn-yang]           |
+-------+-----------------------+----------------------------------------+
| ims   | ietf-igmp-mld-snooping| [draft-ietf-pim-igmp-mld-snooping-yang]|
+-------+-----------------------+----------------------------------------+
      Table 1: Prefixes and Corresponding YANG Modules


2. Design of Data Model

Besides BRIDGE, IGMP & MLD snooping also provides a way to constrain
multicast traffic for L2VPN. By monitoring the IGMP & MLD membership
reports sent by hosts within the L2VPN domain, IGMP & MLD snooping can
set up Layer 2 multicast forwarding tables to deliver traffic only to
ports with at least one interested member within the L2VPN domain.
Thereby significantly reduce the volume of multicast traffic that would
otherwise flood an entire L2VPN domain. The IGMP & MLD snooping
operation applies to both access circuits and pseudowires within a L2VPN
domain. A network-instance [RFC8529] whose type is vpls-instance-type
[draft-ietf-bess-l2vpn-yang] could be treated as a L2VPN domain.

The YANG module in this document includes all the common building blocks
for IGMP & MLD snooping used in L2VPN. It defines a new L2 service type
which is L2VPN [draft-ietf-bess-l2vpn-yang]. When value of l2-service-
type is l2vpn, the IGMP & MLD Snooping instance will be used in the
L2VPN service. One instance corresponds to one L2VPN [draft-ietf-bess-

Zhao & Liu, etc                   Expires May 21, 2022                   [Page 4]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

l2vpn-yang] instance. It also defines mrouter interface and outgoing
interface including statically configured and dynamically learned.

3. Module Structure

This module augments ietf-igmp-mld-snooping data model specified in
[draft-ietf-pim-igmp-mld-snooping-yang]. It adds mrouter interface,
outgoing AC and outgoing PW which could be used in both igmp-snooping-
instance and mld-snooping-instance.

This module also defines how to use the igmp-snooping-instance and mld-
snooping-instance in L2VPN service.

This module conforms to the Network Management Datastore Architecture
(NMDA) [RFC8342]. The operational state data is combined with the
associated configuration data in the same hierarchy [RFC8407].

3.1. Mrouter interface for L2VPN

This module augments /rt:routing/rt:control-plane-protocols/rt:control-
plane-protocol/ims:igmp-snooping-instance to add mrouter interface for
L2VPN in IGMP Snooping.

The static-l2vpn-mrouter-interface-ac and static-l2vpn-mrouter-
interface-pw represent mrouter interfaces which are manually configured.

The l2vpn-mrouter-interface-ac and l2vpn-mrouter-interface-pw represent
mrouter interfaces learned by the snooping device dynamically.


  augment /rt:routing/rt:control-plane-protocols
            /rt:control-plane-protocol/ims:igmp-snooping-instance:
    +--rw static-l2vpn-mrouter-interface-ac*   if:interface-ref
    +--rw static-l2vpn-mrouter-interface-pw*   pw:pseudowire-ref
    +--ro l2vpn-mrouter-interface-ac*          if:interface-ref
   +--ro l2vpn-mrouter-interface-pw*          pw:pseudowire-ref

Similarly this module also augments /rt:routing/rt:control-plane-
protocols/rt:control-plane-protocol/ims:mld-snooping-instance to add
mrouter interface for L2VPN in MLD Snooping.

  augment /rt:routing/rt:control-plane-protocols
            /rt:control-plane-protocol/ims:mld-snooping-instance:
    +--rw static-l2vpn-mrouter-interface-ac*   if:interface-ref
    +--rw static-l2vpn-mrouter-interface-pw*   pw:pseudowire-ref
    +--ro l2vpn-mrouter-interface-ac*          if:interface-ref
    +--ro l2vpn-mrouter-interface-pw*          pw:pseudowire-ref





Zhao & Liu, etc                   Expires May 21, 2022                   [Page 5]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

3.2. Outgoing interface for L2VPN

IGMP & MLD snooping can set up Layer 2 multicast forwarding tables to
deliver multicast traffic, so each packet should have at least one
corresponding outgoing interface. The outgoing interfaces might be
Attachment Circuit (AC) or Pseudo Wire (PW) in L2VPN. They could be
manually configured or dynamically learned by the snooping device.

This module augments /rt:routing/rt:control-plane-protocols/rt:control-
plane-protocol/ims:igmp-snooping-instance/ims:static-l2-multicast-group
to add l2vpn-outgoing-ac and l2vpn-outgoing-pw for L2VPN in IGMP
Snooping. They should be configured manually.

  augment /rt:routing/rt:control-plane-protocols
            /rt:control-plane-protocol/ims:igmp-snooping-instance
            /ims:static-l2-multicast-group:
    +--rw l2vpn-outgoing-ac*   if:interface-ref
   +--rw l2vpn-outgoing-pw*   pw:pseudowire-ref

Similarly it also augments /rt:routing/rt:control-plane-
protocols/rt:control-plane-protocol/ims:mld-snooping-
instance/ims:static-l2-multicast-group to add l2vpn-outgoing-ac and
l2vpn-outgoing-pw for L2VPN in MLD Snooping. They should be configured
manually.

  augment /rt:routing/rt:control-plane-protocols
            /rt:control-plane-protocol/ims:mld-snooping-instance
            /ims:static-l2-multicast-group:
    +--rw l2vpn-outgoing-ac*   if:interface-ref
   +--rw l2vpn-outgoing-pw*   pw:pseudowire-ref

This module augments /rt:routing/rt:control-plane-protocols/rt:control-
plane-protocol/ims:igmp-snooping-instance/ims:group/ims:source to add
l2vpn-outgoing-ac and l2vpn-outgoing-pw for L2VPN in IGMP Snooping. They
are read only and should be filled dynamically.

  augment /rt:routing/rt:control-plane-protocols
            /rt:control-plane-protocol/ims:igmp-snooping-instance
            /ims:group/ims:source:
    +--ro l2vpn-outgoing-ac*   if:interface-ref
    +--ro l2vpn-outgoing-pw*   pw:pseudowire-ref

Similarly it also augments /rt:routing/rt:control-plane-
protocols/rt:control-plane-protocol/ims:mld-snooping-
instance/ims:group/ims:source to add l2vpn-outgoing-ac and l2vpn-
outgoing-pw for L2VPN in MLD Snooping. They are read only and should be
filled dynamically.

  augment /rt:routing/rt:control-plane-protocols
            /rt:control-plane-protocol/ims:mld-snooping-instance
            /ims:group/ims:source:
    +--ro l2vpn-outgoing-ac*   if:interface-ref
Zhao & Liu, etc                   Expires May 21, 2022                   [Page 6]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

    +--ro l2vpn-outgoing-pw*   pw:pseudowire-ref


3.3. Using IGMP and MLD Snooping Instances in L2VPN service

This module augments /ni:network-instances/ni:network-instance/ni:ni-
type/l2vpn:l2vpn [RFC8529] to use igmp-snooping-instance. It means IGMP
Snooping is enabled in the specified L2VPN instance.

  augment /ni:network-instances/ni:network-instance/ni:ni-type
            /l2vpn:l2vpn:
    +--rw igmp-snooping-instance?
    |       ims:igmp-mld-snooping-instance-ref
    +--rw mld-snooping-instance?
            ims:igmp-mld-snooping-instance-ref


The mld-snooping-instance could be used in concurrence with igmp-
snooping-instance to configure the MLD Snooping.



4. IGMP and MLD Snooping Yang Module Extension

This module references [RFC1112],[RFC2236],[RFC2710],[RFC3376],
[RFC3810],[RFC4541],[RFC5790],[RFC6991],[RFC7761],[RFC8343],[RFC8529],[d
raft-ietf-pim-igmp-mld-snooping-yang] and [draft-ietf-bess-l2vpn-yang].

<CODE BEGINS> file ietf-igmp-mld-snooping-l2vpn@2021-10-25.yang
module ietf-igmp-mld-snooping-l2vpn {
  yang-version 1.1;
  namespace "urn:ietf:params:xml:ns:yang:ietf-igmp-mld-snooping-l2vpn";

  prefix ims-l2vpn;

  import ietf-interfaces {
    prefix "if";
    reference
      "RFC 8343: A YANG Data Model for Interface Management";
  }

  import ietf-routing {
    prefix "rt";
    reference
      "RFC 8349: A YANG Data Model for Routing Management (NMDA
       Version)";
  }

  import ietf-network-instance {
    prefix "ni";
    reference
      "RFC 8529: YANG Data Model for Network Instances";
Zhao & Liu, etc                   Expires May 21, 2022                   [Page 7]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

  }

  import ietf-l2vpn {
    prefix "l2vpn";
    reference
      "draft-ietf-bess-l2vpn-yang: YANG Data Model for MPLS-based
L2VPN";
  }

  import ietf-pseudowires {
    prefix "pw";
    reference
      "draft-ietf-bess-l2vpn-yang: YANG Data Model for MPLS-based
L2VPN";
  }

  import ietf-igmp-mld-snooping {
    prefix "ims";
    reference
      "draft-ietf-pim-igmp-mld-snooping-yang: A Yang Data Model for IGMP
and MLD Snooping";
  }

  organization
    "IETF PIM Working Group";

  contact
    "WG Web:   <http://tools.ietf.org/wg/pim/>
     WG List:  <mailto:pim@ietf.org>

     Editors:  Hongji Zhao
               <mailto:hongji.zhao@ericsson.com>

               Xufeng Liu
               <mailto:xufeng.liu.ietf@gmail.com>

               Yisong Liu
               <mailto:liuyisong@chinamobile.com>

               Anish Peter
               <mailto:anish.ietf@gmail.com>

               Mahesh Sivakumar
               <mailto:sivakumar.mahesh@gmail.com>

    ";

  description
    "The module contains a collection of YANG definitions of
     IGMP & MLD Snooping in L2VPN service.

     Copyright (c) 2021 IETF Trust and the persons identified as
Zhao & Liu, etc                   Expires May 21, 2022                   [Page 8]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject to
     the license terms contained in, the Simplified BSD License set
     forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (http://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX; see the
     RFC itself for full legal notices.";

  revision 2021-10-25 {
    description
      "Initial revision.";
    reference
      "RFC XXXX: IGMP and MLD Snooping Yang Module Extension in L2VPN
service";
  }

  /* identities */

  identity l2vpn {
    base ims:l2-service-type;
    description
      "This identity represents L2VPN service.";
  }

  /*
   * Groupings
   */

  grouping static-l2vpn-mrouter-interface-ac-pw-igmp-mld-snooping {
    description
      "The static mrouter interface in L2VPN service.";

    leaf-list static-l2vpn-mrouter-interface-ac {
      when 'derived-from-or-self(../l2-service-type,"ims:l2vpn")';
      type if:interface-ref;
      description
        "The static mrouter interface whose type is interface
         in L2VPN service.";
    }

    leaf-list static-l2vpn-mrouter-interface-pw {
      when 'derived-from-or-self(../l2-service-type,"ims:l2vpn")';
      type pw:pseudowire-ref;
      description
        "The static mrouter interface whose type is PW
         in L2VPN service.";
    }
  }
Zhao & Liu, etc                   Expires May 21, 2022                   [Page 9]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021


  grouping dynamic-l2vpn-mrouter-interface-ac-pw-igmp-mld-snooping {

    description
      "The dynamic mrouter interface in L2VPN service.";

    leaf-list l2vpn-mrouter-interface-ac {
      when 'derived-from-or-self(../l2-service-type,"ims:l2vpn")';
      type if:interface-ref;
      config false;
      description
        "The mrouter interface whose type is interface in L2VPN
         service. When switch receives IGMP/MLD queries from
         multicast router on an interface, this interface will
         become mrouter interface for IGMP/MLD snooping.";
    }

    leaf-list l2vpn-mrouter-interface-pw {
      when 'derived-from-or-self(../l2-service-type,"ims:l2vpn")';
      type pw:pseudowire-ref;
      config false;
      description
        "The mrouter interface whose type is PW in L2VPN service.
         When switch receives IGMP/MLD queries from multicast router
         on a PW, this PW will become mrouter interface for IGMP/MLD
         snooping.";
    }
  }

  grouping l2vpn-outgoing-ac-pw-igmp-mld-snooping {
    description
      "Outgoing Attachment Circuit (AC) or Pseudo Wire (PW) in L2VPN.";

    leaf-list l2vpn-outgoing-ac {
      when 'derived-from-or-self(../../../l2-service-type,"ims:l2vpn")';
      type if:interface-ref;
      description "Outgoing Attachment Circuit (AC) in L2VPN";
    }

    leaf-list l2vpn-outgoing-pw {
      when 'derived-from-or-self(../../../l2-service-type,"ims:l2vpn")';
      type pw:pseudowire-ref;
      description "Outgoing Pseudo Wire (PW) in L2VPN";
    }
  }

  /*
   * The mrouter interface in L2VPN service.
   */

  augment "/rt:routing/rt:control-plane-protocols"+
        "/rt:control-plane-protocol/ims:igmp-snooping-instance" {
Zhao & Liu, etc                   Expires May 21, 2022                   [Page 10]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021


    description
      "The mrouter interface in L2VPN service for IGMP Snooping.";

    uses static-l2vpn-mrouter-interface-ac-pw-igmp-mld-snooping;

    uses dynamic-l2vpn-mrouter-interface-ac-pw-igmp-mld-snooping;

  }

  augment "/rt:routing/rt:control-plane-protocols"+
        "/rt:control-plane-protocol/ims:mld-snooping-instance" {
    description
      "The mrouter interface in L2VPN service for MLD Snooping.";

    uses static-l2vpn-mrouter-interface-ac-pw-igmp-mld-snooping;

    uses dynamic-l2vpn-mrouter-interface-ac-pw-igmp-mld-snooping;

  }

  /*
   * Static Outgoing AC or PW in L2VPN service
   */

  augment "/rt:routing/rt:control-plane-protocols"+
        "/rt:control-plane-protocol"+
        "/ims:igmp-snooping-instance/ims:static-l2-multicast-group" {

    description
      "Static Outgoing AC or PW in L2VPN service for IGMP snooping.";

    uses l2vpn-outgoing-ac-pw-igmp-mld-snooping;

  }

  augment "/rt:routing/rt:control-plane-protocols"+
        "/rt:control-plane-protocol"+
        "/ims:mld-snooping-instance/ims:static-l2-multicast-group" {

    description
      "Static Outgoing AC or PW in L2VPN service for MLD snooping.";

    uses l2vpn-outgoing-ac-pw-igmp-mld-snooping;

  }

  /*
   * Dynamic Outgoing AC or PW in L2VPN service
   */

  augment "/rt:routing/rt:control-plane-protocols"+
Zhao & Liu, etc                   Expires May 21, 2022                   [Page 11]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

        "/rt:control-plane-protocol"+
        "/ims:igmp-snooping-instance/ims:group/ims:source" {

    description
      "Dynamic Outgoing AC or PW in L2VPN service for IGMP snooping.";

    uses l2vpn-outgoing-ac-pw-igmp-mld-snooping;

  }

  augment "/rt:routing/rt:control-plane-protocols"+
        "/rt:control-plane-protocol"+
        "/ims:mld-snooping-instance/ims:group/ims:source" {

    description
      "Dynamic Outgoing AC or PW in L2VPN service for MLD snooping.";

    uses l2vpn-outgoing-ac-pw-igmp-mld-snooping;

  }

  /*
   * Use IGMP & MLD snooping instance in L2VPN
   */

  augment "/ni:network-instances/ni:network-instance"+
    "/ni:ni-type/l2vpn:l2vpn" {

    description
      "Use IGMP & MLD snooping instance in L2VPN.";

    leaf igmp-snooping-instance {
      type ims:igmp-mld-snooping-instance-ref;
      description
        "Configure IGMP snooping instance in L2VPN.";
    }

    leaf mld-snooping-instance {
      type ims:igmp-mld-snooping-instance-ref;
      description
        "Configure MLD snooping instance in L2VPN.";
    }
  }
}
<CODE ENDS>


5. Security Considerations

The YANG module specified in this document defines a schema for data
that is designed to be accessed via network management protocols such as
NETCONF [RFC6241] or RESTCONF [RFC8040]. The lowest NETCONF layer is the
Zhao & Liu, etc                   Expires May 21, 2022                   [Page 12]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

secure transport layer, and the mandatory-to-implement secure transport
is Secure Shell (SSH) [RFC6242]. The lowest RESTCONF layer is HTTPS, and
the mandatory-to-implement secure transport is TLS [RFC8446].

The Network Configuration Access Control Model (NACM) [RFC8341] provides
the means to restrict access for particular NETCONF or RESTCONF users to
a preconfigured subset of all available NETCONF or RESTCONF protocol
operations and content.

There are a number of data nodes defined in this YANG module that are
writable/creatable/deletable (i.e., config true, which is the default).
These data nodes may be considered sensitive or vulnerable in some
network environments. Write operations (e.g., edit-config) to these data
nodes without proper protection can have a negative effect on network
operations. These are the subtrees and data nodes and their
sensitivity/vulnerability, and they are all under
/rt:routing/rt:control-plane-protocols/rt:control-plane-
protocol:/ims:igmp-snooping-instance or /rt:routing/rt:control-plane-
protocols/rt:control-plane-protocol:/ims:mld-snooping-instance :

/igmp-mld-snooping-extension:static-l2vpn-mrouter-interface-ac

/igmp-mld-snooping-extension:static-l2vpn-mrouter-interface-pw

/ims:static-l2-multicast-group/igmp-mld-snooping-extension:l2vpn-outgoing-ac

/ims:static-l2-multicast-group/igmp-mld-snooping-extension:l2vpn-outgoing-pw

The subtrees under /ni:network-instances/ni:network-instance/ni:ni-
type/l2vpn:l2vpn

ims:igmp-snooping-instance

ims:mld-snooping-instance

Unauthorized access to any data node of these subtrees can adversely
affect the IGMP & MLD Snooping subsystem of both the local device and
the network. This may lead to network malfunctions, delivery of packets
to inappropriate destinations, and other problems.

Some of the readable data nodes in this YANG module may be considered
sensitive or vulnerable in some network environments. It is thus
important to control read access (e.g., via get, get-config, or
notification) to these data nodes. These are the subtrees and data nodes
and their sensitivity/vulnerability, and they are all under
/rt:routing/rt:control-plane-protocols/rt:control-plane-
protocol:/ims:igmp-snooping-instance or /rt:routing/rt:control-plane-
protocols/rt:control-plane-protocol:/ims:mld-snooping-instance:

/igmp-mld-snooping-extension:l2vpn-mrouter-interface-ac

/igmp-mld-snooping-extension:l2vpn-mrouter-interface-pw
Zhao & Liu, etc                   Expires May 21, 2022                   [Page 13]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

/ims:group/ims:source/igmp-mld-snooping-extension:l2vpn-outgoing-ac

/ims:group/ims:source/igmp-mld-snooping-extension:l2vpn-outgoing-pw

Unauthorized access to any data node of these subtrees can disclose the
operational state information of IGMP & MLD Snooping on this device. The
devices that use this YANG module should heed the Security
Considerations in [RFC4541].



6. IANA Considerations

RFC Ed.: In this section, replace all occurrences of 'XXXX' with the
actual RFC number (and remove this note).

6.1. XML Registry

This document registers the following namespace URIs in the IETF XML

registry [RFC3688]:

--------------------------------------------------------------------
URI: urn:ietf:params:xml:ns:yang:ietf-igmp-mld-snooping-l2vpn
Registrant Contact: The IETF.
XML: N/A, the requested URI is an XML namespace.
--------------------------------------------------------------------

6.2. YANG Module Names Registry

This document registers the following YANG modules in the YANG Module
Names registry [RFC7950]:
--------------------------------------------------------------------
name:      ietf-igmp-mld-snooping-l2vpn
namespace: urn:ietf:params:xml:ns:yang:ietf-igmp-mld-snooping-l2vpn
prefix:    ims-l2vpn
reference: RFC XXXX
--------------------------------------------------------------------
7. References

7.1. Normative References

   [RFC1112] Deering, S., "Host extensions for IP multicasting", STD 5,
             RFC 1112, August 1989.


Zhao & Liu, etc                   Expires May 21, 2022                   [Page 14]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

   [RFC2236] W. Fenner, "Internet Group Management Protocol, Version 2",
             RFC 2236, November 1997.

   [RFC2710] Deering, S., Fenner, W., and B. Haberman, "Multicast
             Listener Discovery (MLD) for IPv6", RFC 2710, October 1999.

   [RFC3376] Cain, B., Deering, S., Kouvelas, I., Fenner, B., and A.
             Thyagarajan, "Internet Group Management Protocol, Version
             3", RFC 3376, October 2002.

   [RFC3688] Mealling, M., "The IETF XML Registry", RFC 3688, January
             2004.

   [RFC3810] Vida, R. and L. Costa, "Multicast Listener Discovery
             Version 2 (MLDv2) for IPv6", RFC 3810, June 2004.

   [RFC4286] B. Haberman and J. Martin, "Multicast Router Discovery",
             RFC 4286, December 2005.

   [RFC4541] M. Christensen, K. Kimball, F. Solensky, "Considerations
             for Internet Group Management Protocol (IGMP) and Multicast
             Listener Discovery (MLD) Snooping Switches", RFC 4541, May
             2006.

   [RFC5790] H. Liu, W. Cao, H. Asaeda, "Lightweight Internet Group
             Management Protocol Version 3 (IGMPv3) and Multicast
             Listener Discovery Version 2 (MLDv2) Protocols", RFC 5790,
             February 2010.

   [RFC6020] Bjorklund, M., Ed., "YANG - A Data Modeling Language for
             the Network Configuration Protocol (NETCONF)", RFC 6020,
             October 2010.

   [RFC6241] R. Enns, Ed., M. Bjorklund, Ed., J. Schoenwaelder, Ed., A.
             Bierman, Ed., "Network Configuration Protocol (NETCONF)",
             RFC 6241, June 2011.

   [RFC6242] Wasserman, M., "Using the NETCONF Protocol over Secure
             Shell (SSH)", RFC 6242, June 2011.

   [RFC6991] Schoenwaelder, J., Ed., "Common YANG Data Types", RFC 6991,
             July 2013.

   [RFC7761] B. Fenner, M. Handley, H. Holbrook, I. Kouvelas, R. Parekh,
             Z. Zhang, L. Zheng, "Protocol Independent Multicast -
             Sparse Mode (PIM-SM): Protocol Specification (Revised)",
             RFC 7761, March 2016.

   [RFC7950] M. Bjorklund, Ed., "The YANG 1.1 Data Modeling Language",
             RFC 7950, August 2016.


Zhao & Liu, etc                   Expires May 21, 2022                   [Page 15]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

   [RFC8040] A. Bierman, M. Bjorklund, K. Watsen, "RESTCONF Protocol",
             RFC 8040, January 2017.

   [RFC8340] M. Bjorklund, and L. Berger, Ed., "YANG Tree Diagrams", RFC
             8340, March 2018.

   [RFC8341] Bierman, A. and M. Bjorklund, "Network Configuration Access
             Control Model", RFC 8341, March 2018.

   [RFC8342] M. Bjorklund and J. Schoenwaelder, "Network Management
             Datastore Architecture (NMDA)", RFC 8342, March 2018.

   [RFC8343] M. Bjorklund, "A YANG Data Model for Interface Management",
             RFC 8343, March 2018.

   [RFC8349] L. Lhotka, A. Lindem, Y. Qu, "A YANG Data Model for Routing
             Management (NMDA Version)", RFC 8349, March 2018.

   [RFC8446] Rescorla, E., "The Transport Layer Security (TLS) Protocol
             Version 1.3", RFC 8446, August 2018.

   [RFC8529] L. Berger, C. Hopps, A. Lindem, D. Bogdanovic, X. Liu,
             "YANG Data Model for Network Instances", RFC 8529, March
             2019.

   [draft-ietf-bess-l2vpn-yang] Shah, H., Brissette, P., Chen, I.,
             Hussain, I., Wen, B., and K. Tiruveedhula, "YANG Data Model
             for MPLS-basedL2VPN", draft-ietf-bess-l2vpn-yang-10 (work
             in progress), July 2019.

7.2. Informative References

   [RFC3916] X. Xiao, Ed., D. McPherson, Ed., P. Pate, Ed.,
             "Requirements for Pseudo-Wire Emulation Edge-to-Edge
             (PWE3)", RFC 3916, September 2004.

   [RFC7951] L. Lhotka, "JSON Encoding of Data Modeled with YANG", RFC
             7951, August 2016.

   [RFC8407] A. Bierman, "Guidelines for Authors and Reviewers of
             Documents Containing YANG Data Models", RFC 8407, October
             2018.










Zhao & Liu, etc                   Expires May 21, 2022                   [Page 16]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

Appendix A.  Data Tree Example

L2VPN service

This section contains an example for L2VPN service in the JSON encoding
[RFC7951], containing both configuration and state data.


              +-----------+
              +  Source   +
              +-----+-----+
                    |
   -----------------+----------------------------
                    |eth1/1
                +---+---+
                +  R1   +
                +-+---+-+
           eth1/2 |    \ eth1/3
                |     \
                |      \
                 |       \
                 |        \
          eth2/1 |         \ eth3/1
            +---+---+    +-+---+
              +  R2   +---+ R3  +
              +---+---+   +-+---+
           eth2/2 |          | eth3/2
                  |        |
   ---------------+----------+-------------------
                  |          |
                |          |
        +--------+--+   +---+--------+
         + Receiver1 +   +  Receiver2 +
          +-----------+   +------------+



The configuration data for R1 in the above figure could be as follows:
{
"ietf-interfaces:interfaces":{
  "interface":[
   {
    "name":"eth1/1",
    "type":"iana-if-type:ethernetCsmacd"
   }
  ]
 },
 "ietf-pseudowires:pseudowires": {
  "pseudowire": [
   {
    "name": "pw2"
   },
Zhao & Liu, etc                   Expires May 21, 2022                   [Page 17]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

   {
    "name": "pw3"
   }
  ]
 },
 "ietf-network-instance:network-instances": {
  "network-instance": [
   {
    "name": "vpls1",
    "ietf-igmp-mld-snooping:igmp-snooping-instance": "vis1",
    "ietf-l2vpn:type": "ietf-l2vpn:vpls-instance-type",
    "ietf-l2vpn:signaling-type": "ietf-l2vpn:ldp-signaling",
    "ietf-l2vpn:endpoint": [
     {
      "name": "acs",
      "ac": [
        {
         "name": "eth1/1"
        }
      ]
     },
     {
      "name": "pws",
      "pw": [
        {
         "name": "pw2"
        },
        {
         "name": "pw3"
        }
      ]
     }
    ]
   }
  ]
 },
 "ietf-routing:routing": {
  "control-plane-protocols": {
   "control-plane-protocol": [
    {
     "type": "ietf-igmp-mld-snooping:igmp-snooping",
     "name": "vis1",
     "ietf-igmp-mld-snooping:igmp-snooping-instance": {
      "l2-service-type": "ims-l2vpn:l2vpn",
      "enable": true
     }
    }
   ]
  }
 }
}

Zhao & Liu, etc                   Expires May 21, 2022                   [Page 18]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021



The corresponding operational state data for R1 could be as follows:

{
"ietf-interfaces:interfaces":{
  "interface":[
   {
    "name":"eth1/1",
    "type":"iana-if-type:ethernetCsmacd",
    "oper-status": "up",
    "statistics": {
     "discontinuity-time": "2018-05-23T12:34:56-05:00"
    }
   }
  ]
 },
 "ietf-pseudowires:pseudowires": {
  "pseudowire": [
   {
    "name": "pw2"
   },
   {
    "name": "pw3"
   }
  ]
 },
 "ietf-network-instance:network-instances": {
  "network-instance": [
   {
    "name": "vpls1",
    "ietf-igmp-mld-snooping:igmp-snooping-instance": "vis1",
    "ietf-l2vpn:type": "ietf-l2vpn:vpls-instance-type",
    "ietf-l2vpn:signaling-type": "ietf-l2vpn:ldp-signaling",
    "ietf-l2vpn:endpoint": [
     {
      "name": "acs",
      "ac": [
        {
         "name": "eth1/1"
        }
      ]
     },
     {
      "name": "pws",
      "pw": [
        {
         "name": "pw2"
        },
        {
         "name": "pw3"
        }
Zhao & Liu, etc                   Expires May 21, 2022                   [Page 19]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

      ]
     }
    ]
   }
  ]
 },
 "ietf-routing:routing": {
  "control-plane-protocols": {
   "control-plane-protocol": [
    {
     "type": "ietf-igmp-mld-snooping:igmp-snooping",
     "name": "vis1",
     "ietf-igmp-mld-snooping:igmp-snooping-instance": {
      "l2-service-type": "ims-l2vpn:l2vpn",
      "enable": true
     }
    }
   ]
  }
 }
}































Zhao & Liu, etc                   Expires May 21, 2022                   [Page 20]

Internet-Draft  IGMP & MLD Snooping Yang Module extension for L2VPN  November 22, 2021

Authors' Addresses

   Hongji Zhao
   Ericsson (China) Communications Company Ltd.
   Ericsson Tower, No. 5 Lize East Street,
   Chaoyang District Beijing 100102, China

   Email: hongji.zhao@ericsson.com


   Xufeng Liu
   Volta Networks
   USA

   EMail: xufeng.liu.ietf@gmail.com


   Yisong Liu
   China Mobile
   China

   Email: liuyisong@chinamobile.com


   Anish Peter
   Individual

   EMail: anish.ietf@gmail.com


   Mahesh Sivakumar
   Juniper Networks
   1133 Innovation Way
   Sunnyvale, California
   USA

   EMail: sivakumar.mahesh@gmail.com















Zhao & Liu, etc                   Expires May 21, 2022                   [Page 21] 
