
NETWORK Working Group                                  Cuneyt Akinlar
INTERNET-DRAFT                                         David Braun
Category: Informational                                Sarit Mukherjee
<draft-akinlar-zeroconf-multirouter-00.txt>            Panasonic
Research March 5 2000

         Multi-Router Zeroconf Network Requirements

Status of this Memo

This document is an Internet-Draft and is in full conformance with all
provisions of Section 10 of RFC2026.

Internet-Drafts are working documents of the Internet Engineering Task
Force (IETF), its areas, and its working groups.  Note that other groups
may also distribute working documents as Internet-Drafts.  Internet-
Drafts are draft documents valid for a maximum of six months and may be
updated, replaced, or obsoleted by other documents at any time.  It is
inappropriate to use Internet-Drafts as reference material or to cite
them other than as "work in progress."

     The list of current Internet-Drafts can be accessed at
     http://www.ietf.org/ietf/1id-abstracts.txt

     The list of Internet-Draft Shadow Directories can be accessed at
     http://www.ietf.org/shadow.html.

The distribution of this memo is unlimited.  It is filed as <draft-
akinlar-zeroconf-multirouter-00.txt>, and expires August 5, 2000. Please
send comments to the authors.

Abstract

  Zero Configuration (Zeroconf) Networks are a particular class of
TCP/IP networks that may be established in the home, in small offices or
even for an adhoc purpose. Zeroconf networks do not have and should not
be expected to have user configurable network infrastructure such as
DHCP, DNS and other administered network services. This is because
typical zeroconf network users neither have the skill nor the desire to
configure, administer or manage a network [1].

  The IETF Zeroconf Requirements draft [1] presents the zeroconf
protocol requirements for 4 areas: IP host configuration, domain name to
IP address resolution, IP multicast address allocation, and service
discovery. The most complex network topology addressed by the Zeroconf
Requirements document [1] is a multi-segment zeroconf network connected
by a single router. This drafts builds on that draft and lists the
zeroconf protocol requirements for IP router configuration and dynamic



Akinlar, Braun, Mukherjee       Informational           [Page 1]

INTERNET-DRAFT  Multi-Router Zeroconf Network Requirements    March 2000


routing protocols in multi-router zeroconf networks.

Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in [6].

1. Introduction

  Zero Configuration (Zeroconf) Networks are a particular class of
TCP/IP networks that may be established in the home, in small offices or
even for an adhoc purpose. IETF Zeroconf Requirements draft [1] presents
the zeroconf protocol requirements for 4 areas: IP host configuration,
domain name to IP address resolution, IP multicast address allocation,
and service discovery. The most complex network topology addressed by
the Zeroconf Requirements document [1] is a multi-segment zeroconf
network connected by a single zeroconf router. Multi-router zeroconf
networks are not addressed in [1].

                  +---------------------------+
                  |   Non-Zeroconf Network    |
                  +------------+--------------+
                               |
                      +--------+-------+
   *******************|     Gateway    |************************
   * Zeroconf Network +-+--------------+                       *
   *                    |                                      *
   *                    |                                      *
   *           ***********              ***********            *
   *           *   R1    *              *   R2    *            *
   * +---+     *         *              *         *      +---+ *
   * | A |-----*1(X) 3(Z)*--------------*1(Z) 3(W)*------| E | *
   * +---+     *         *      |       *         *      +---+ *
   *           *   2(Y)  *    +---+     *   2(V)  *            *
   *           ***********    | C |     ***********            *
   *                |         +---+          |                 *
   *              +---+                    +---+               *
   *              | B |                    | D |               *
   *              +---+                    +---+               *
   *                                                           *
   *************************************************************

     Figure 1: A zeroconf network with 2 routers and a gateway

  Figure 1 shows a typical multi-router zeroconf network consisting of 2
internal zeroconf routers and 1 zeroconf gateway connecting the zeroconf
network to the Internet. The zeroconf network consists of 5 IP segments.



Akinlar, Braun, Mukherjee       Informational           [Page 2]

INTERNET-DRAFT  Multi-Router Zeroconf Network Requirements    March 2000


A zeroconf gateway is defined in [1] to be a specialized router. It
restricts packets that pass between the Zeroconf and non-zeroconf
networks to ensure autonomy of the zeroconf network and to avoid many
security problems. The gateways SHOULD act as boundary routers as
defined in RFC 2365 [1].

  In this document, we present the zeroconf protocol requirements for
router IP configuration and dynamic routing protocols in multi-router
zeroconf networks such as the one in Figure 1. The host IP configuration
protocol requirements as defined in [1] directly apply to this
environment. Therefore, we do not list them here.

2. IP router Configuration Protocol Requirements

  Requirements for IP Router Configuration Protocol are the following:

  (1) Routers MUST configure an IP address for each of their interfaces.
  (2) Routers MUST configure a netmask for each of their interfaces.
  (3) The network number (subnet number) of all the segments within
      the zeroconf network MUST be unique. The subnet number of a
      segment is obtained by ANDing the IP address of a host on the
      segment with the netmask of the host.
  (4) The host number of an IP address MUST be unique within a single
      IP network.

  As Figure 2 shows, each segment in the zeroconf network MUST have a
unique subnet number. In the Figure, R1 has assigned unique subnet
numbers X, Y and Z to its interfaces 1, 2 and 3 respectively. Similarly,
R2 has assigned subnet numbers Z, V, and W to its interfaces 1, 2 and 3.
In an administered network the shared segments are usually assigned the
same subnet number at all the routers sharing the segment. In the
figure, both R1 and R2 has assigned subnet number Z to the shared
segment. This is not a requirement though. The network will work fine
even if the routers assign different subnet numbers to the shared
segment. So:

   (5) A shared segment between multiple routers SHOULD be
       assigned the same subnet number.

  Since each segment MUST have a unique subnet number within the
zeroconf network:

   (6) Routers MUST be able to detect subnet conflicts(use of the same
       subnet number for different physical segments) and resolve
       them.
   (7) Routers MUST be able to re-configure their IP address and
       netmask after new routers are connected to the network.




Akinlar, Braun, Mukherjee       Informational           [Page 3]

INTERNET-DRAFT  Multi-Router Zeroconf Network Requirements    March 2000


  When multiple routers are connected together, there might be subnet
number conflicts.(6) & (7) state that these conflicts MUST be detected
and resolved as new routers are added to the network.

3. Dynamic Routing Protocols

  In administered networks, routers use dynamic routing protocols such
as RIP [2-3] and OSPF [4] to communicate with each other to exchange
routing information. This way, routers in the network learn about all
the subnets in the network and hosts in any part of the network can
communicate with each other. The routers within the network will route
the packets from the source to the destination using the information
that they obtain by the dynamic routing protocol. In zeroconf networks
consisting of multiple routers, dynamic routing must also be performed.
The requirements for the zeroconf dynamic routing protocols are the
following:

  (1) Routers MUST learn about all the existing subnets in the
      zeroconf network.
  (2) Routers MUST learn about new subnets when they are connected to
      the zeroconf network.
  (3) Routers MUST learn that some routes do not exist in the zeroconf
      network anymore when those routes are removed from the zeroconf
      network.
  (4) Router MAY use dynamic routing protocol to detect and resolve
      subnet conflicts.
  (5) If routers use a zeroconf dynamic routing protocol both to
      advertise routes and to detect and resolve subnet number
      conflicts, then the zeroconf dynamic routing protocol MUST NOT
      coexist with an administered routing protol on the zeroconf
      network.

4. References:

  [1] M. Hatting, Zeroconf Requirements,
      draft-ietf-zeroconf-reqts-02.txt, Jan. 2000. A work in progress.

  [2] C. Hedrick, Routing Information Protocol, RFC 1058, June 1988.

  [3] G. Malkin, RIP Version 2, RFC 2453, November 1998.

  [4] J. Moy, OSPF Version 2, RFC 2328, April 1998.

  [5] Bernard Aboba, Auto-Addressing in Multi-segment Networks,
      draft-aboba-zeroconf-multi-00.txt, Oct 1999. A work in progress.

  [6] Bradner, S., "Key words for use in RFCs to Indicate Requirement
      Levels", BCP 14, RFC 2119, March 1997.



Akinlar, Braun, Mukherjee       Informational           [Page 4]

INTERNET-DRAFT  Multi-Router Zeroconf Network Requirements    March 2000


4.  Authors' Addresses

Cuneyt Akinlar
Panasonic Research
2 Research Way
Princeton NJ 08540
Phone: +1 (609) 734-7356
EMail: akinlar@research.panasonic.com

David Braun
Panasonic Research
2 Research Way
Princeton NJ 08540
Phone: +1 (609) 734-7322
EMail: braun@research.panasonic.com

Sarit Mukherjee
Panasonic Research
2 Research Way
Princeton NJ 08540
Phone: +1 (609) 734-7347
EMail: sarit@research.panasonic.com





























Akinlar, Braun, Mukherjee       Informational           [Page 5]

