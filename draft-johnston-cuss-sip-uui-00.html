<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>A Mechanism for Transporting User to User Call Control Information in SIP</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="A Mechanism for Transporting User to User Call Control Information in SIP">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">A. Johnston, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Avaya</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">J. McMillen</td></tr>
<tr><td class="header">Expires: March 20, 2011</td><td class="header">Unaffiliated</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">J. Rafferty</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Dialogic</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">September 16, 2010</td></tr>
</table></td></tr></table>
<h1><br />A Mechanism for Transporting User to User Call Control Information in SIP<br />draft-johnston-cuss-sip-uui-00</h1>

<h3>Abstract</h3>

<p>
The need for applications using SIP to exchange User to User Information (UUI) data during session establishment has been discussed.  Several approaches to transporting call control User to User Information (UUI) data in SIP have been proposed. As networks move to SIP it is 
important that applications requiring this data can continue to function in SIP 
networks as well as the ability to interwork with this ISDN service for end-to-
end transparency. This document discusses three mechanisms to meet the 
requirements defined in the Requirements for SIP Call Control UUI document.  A 
new SIP header field which bests meets these requirements is proposed.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on March 20, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Overview<br />
<a href="#anchor2">2.</a>&nbsp;
Terminology<br />
<a href="#anchor3">3.</a>&nbsp;
Possible Mechanisms<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
Why INFO is Not Used<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.2.</a>&nbsp;
Why Other Protocol Encapsulation UUI Mechanisms are Not Used<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.3.</a>&nbsp;
MIME body Approach<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.4.</a>&nbsp;
URI Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.5.</a>&nbsp;
Header Field Approach<br />
<a href="#anchor9">4.</a>&nbsp;
Recommendation<br />
<a href="#anchor10">5.</a>&nbsp;
Syntax for UUI Header Field<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">5.1.</a>&nbsp;
Definition of New Parameter Values<br />
<a href="#anchor12">6.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">6.1.</a>&nbsp;
Registration of Header Field<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">6.2.</a>&nbsp;
Registration of Header Field Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">6.3.</a>&nbsp;
Registration of SIP Option Tag<br />
<a href="#anchor16">7.</a>&nbsp;
Security Considerations<br />
<a href="#anchor17">8.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Informative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Overview</h3>

<p>  
This document describes the transport of User to User Information (UUI) using SIP <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>.    Specifically, we 
discuss a mechanism for the transport of general application UUI and also for the transport of call control related ITU-T Q.931 User to User 
Information  Element (UU IE) <a class='info' href='#Q931'>[Q931]<span> (</span><span class='info'>, &ldquo;ITU-T Q.931 User to User Information  Element (UU IE),&rdquo; .</span><span>)</span></a> and ITU-T Q.763 User to User 
Information Parameter <a class='info' href='#Q763'>[Q763]<span> (</span><span class='info'>, &ldquo;ITU-T Q.763 Signaling System No. 7 - ISDN user part formats and  codes,&rdquo; .</span><span>)</span></a> data in SIP. UUI is widely used in 
the PSTN today in contact centers and call centers which are transitioning away 
from ISDN to SIP.  This extension will also be used for native SIP endpoints 
implementing similar services and interworking with ISDN services. 

</p>
<p>
The definition, use cases, requirements, and call flows for SIP call control UUI is 
discussed in <a class='info' href='#johnston-cuss-sip-uui-reqs'>[johnston&#8209;cuss&#8209;sip&#8209;uui&#8209;reqs]<span> (</span><span class='info'>Johnston, A., McMillen, J., and L. Liess, &ldquo;Problem Statement and Requirements for Transporting User to User Call Control Information in  SIP,&rdquo; .</span><span>)</span></a>.  All references to 
requirement numbers (REQ-N) and figure numbers refer to this draft.  


</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in BCP 14, RFC 2119 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Possible Mechanisms</h3>

<p> 
Three possible mechanisms for transporting UUI will be described: MIME body, URI 
parameter, and header field transport.

</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Why INFO is Not Used</h3>

<p>
Since the INFO method <a class='info' href='#RFC2976'>[RFC2976]<span> (</span><span class='info'>Donovan, S., &ldquo;The SIP INFO Method,&rdquo; October&nbsp;2000.</span><span>)</span></a>, was developed for ISUP 
interworking of user-to-user information, it might seem to be the logical choice 
here.  For non-call control user-to-user information, INFO can be utilized for 
end to end transport.  However, for transport of call control user-to-user 
information, INFO can not be used.  As the call flows in the previous section 
show, the information is related to an attempt to establish a session and must 
be passed with the session setup request (INVITE), responses to that INVITE, or 
session termination requests.  As a result, it is not possible to use INFO in 
these cases.

</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Why Other Protocol Encapsulation UUI Mechanisms are Not Used</h3>

<p>
Other protocols have the ability to transport UUI information.  For example, consider ITU-T Q.931 User to User 
Information  Element (UU IE) <a class='info' href='#Q931'>[Q931]<span> (</span><span class='info'>, &ldquo;ITU-T Q.931 User to User Information  Element (UU IE),&rdquo; .</span><span>)</span></a> and ITU-T Q.763 User to User 
Information Parameter <a class='info' href='#Q763'>[Q763]<span> (</span><span class='info'>, &ldquo;ITU-T Q.763 Signaling System No. 7 - ISDN user part formats and  codes,&rdquo; .</span><span>)</span></a>, as discussed in the requirements draft.  In addition, NSS (Narrowband Signaling System) <a class='info' href='#Q1980'>[Q1980]<span> (</span><span class='info'>, &ldquo;ITU-T Q.1980.1 The Narrowband Signalling Syntax (NSS) - Syntax Definition,&rdquo; .</span><span>)</span></a> is also able to transport UUI information.  Should one of these protocols be in use, and present in both User Agents, then utilizing these other protocols to transport UUI might make a lot of sense.  Essentially, this is just adding an additional layer in the protocol stack.  SIP is not transporting the UUI, it is encapsulating another protocol, and that protocol is transporting the UUI.  Once there is a mechanism to transport that other protocol using SIP, the UUI transport function is essentially obtained without any additional effort or work.

</p>
<p>
However, the authors believe that SIP needs to have its own native UUI transport mechanism.  It is not reasonable for a SIP UA to have to implement another entire protocol (either ISDN or NSS, for example) just to get the very simple UUI transport service.  Of course, this work does not preclude anyone from using other protocols with SIP to transport UUI information.

</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
MIME body Approach</h3>

<p>
One method of transport is to transport the UUI information as a MIME body.  
This is in keeping with the SIP-T architecture <a class='info' href='#RFC3372'>[RFC3372]<span> (</span><span class='info'>Vemuri, A. and J. Peterson, &ldquo;Session Initiation Protocol for Telephones (SIP-T): Context and Architectures,&rdquo; September&nbsp;2002.</span><span>)</span></a>
in which MIME bodies are used to transport ISUP information.  Since the INVITE 
will normally have an SDP message body, the resulting INVITE with SDP and UUI 
will be multipart MIME.  This is not ideal as many SIP UAs do not support 
multipart MIME INVITEs.

</p>
<p>
A bigger problem is the insertion of a UUI message body by a redirect server or 
in a REFER.  The body would need to be encoded in the Contact URI of the 3xx 
response or the Refer-To URI of a REFER.  Currently, no UAs support this 
capability today, and even defining this is problematic.  For example, do all 
the Content-* header fields have to be escaped as well?  What if the escaped 
Content-Length does not agree with the escaped body? 

</p>
<p>
An example:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;allOneLine&gt;
Contact: &lt;sip:+12125551212@gateway.example.com?Content-Type=
application/uui&amp;body=ZeGl9i2icVqaNVailT6F5iJ90m6mvuTS4OK05M0vDk0Q4Xs&gt;
&lt;/allOneLine&gt;
</pre></div>
<p>
Note that the &lt;allOneLine&gt; tag convention from <a class='info' href='#RFC4475'>SIP 
Torture Test Messages<span> (</span><span class='info'>Sparks, R., Hawrylyshen, A., Johnston, A., Rosenberg, J., and H. Schulzrinne, &ldquo;Session Initiation Protocol (SIP) Torture Test Messages,&rdquo; May&nbsp;2006.</span><span>)</span></a> [RFC4475] is used to show that there are no line breaks in 
the actual message syntax.

</p>
<p>
The MIME body approach meets REQs 1-5.  However, it does not meet REQ-6 as 
support for Multipart MIME and escaped bodies in URIs is uncommon in SIP UAs.  


</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
URI Parameter</h3>

<p>
Another proposed approach is to encode the UUI as a URI parameter into the 
Contact or Refer-To URI.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;allOneLine&gt;
Contact: &lt;sip:+12125551212@gateway.example.com;uui=ZeGl9i2icVqaNVailT6
F5iJ90m6mvuTS4OK05M0vDk0Q4Xs&gt;
&lt;/allOneLine&gt;
</pre></div>
<p>
An INVITE sent to this Contact URI would contain UUI in the Request-URI of the 
INVITE.  The URI parameter has a drawback in that a URI parameter carried in a 
Request-URI will not survive retargeting by a proxy as shown in Figure 2 of 
<a class='info' href='#johnston-cuss-sip-uui-reqs'>[johnston&#8209;cuss&#8209;sip&#8209;uui&#8209;reqs]<span> (</span><span class='info'>Johnston, A., McMillen, J., and L. Liess, &ldquo;Problem Statement and Requirements for Transporting User to User Call Control Information in  SIP,&rdquo; .</span><span>)</span></a>. That is, if the URI is included 
with an Address of Record instead of a Contact URI, the URI parameter in the 
Reqeuest-URI will not be copied over to the Contact URI, resulting in the loss 
of the information. As a result, this approach does not meet REQ-4.  Note that 
if this same URI was present in a Refer-To header field, the same loss of 
information would occur.

</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
Header Field Approach</h3>

<p>
Another approach that has been proposed is to use a header field to transport 
the UUI information.  The header field would be included in INVITE requests and 
responses and BYE requests and responses, and would pass transparently through 
proxies. For redirection, the header field would be escaped into the Contact or 
Refer-To URI.  This is commonly supported in UAs due to call transfer use cases.  
As a result, the header field approach supports REQs 1-7.  In order to meet REQ-
8, a SIP feature tag is needed which can be included in Supported and Require 
header fields.

</p>
<p>
The Call-Info header field is related to the UUI information.  However, there 
are a number of important differences:

</p>
<p>
  </p>
<ul class="text">
<li>
Call-Info is typically used for rendering to the user.  While some of the UUI 
information may ultimately be rendered to the user, most of the UUI information 
will be consumed by the end device or by an application server.  

</li>
<li>
Call-Info usually contains a URI pointer to the information instead of the 
actual information itself which does not meet REQ-5. It could be possible to use 
a data URI to carry the UUI directly in this header field.

</li>
<li>
The use of Call-Info for interworking to and from ISDN networks seems 
problematic.

</li>
</ul>

<p>
Overall, the overloading of the Call-Info header field for carrying interworked 
UUI does not seem like a good idea.  A separate header field allows for clear 
policy and authorization rules to be used.  For these reasons, a separate header 
field needs to be defined, described here as User-to-User.  
For example, here is an example User-to-User header field from message F1 in 
Figure 1 of <a class='info' href='#johnston-cuss-sip-uui-reqs'>[johnston&#8209;cuss&#8209;sip&#8209;uui&#8209;reqs]<span> (</span><span class='info'>Johnston, A., McMillen, J., and L. Liess, &ldquo;Problem Statement and Requirements for Transporting User to User Call Control Information in  SIP,&rdquo; .</span><span>)</span></a>:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
User-to-User: 56a390f3d2b7310023a;encoding=hex;purpose=isdn-interwork
 ;content=isdn-uui
</pre></div>
<p>

For example, here is an escaped User-to-User header field from the redirection 
response F2 of Figure 3:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;allOneLine&gt;
Contact: &lt;sip:+12125551212@gateway.example.com?User-to-User=
56a390f3d2b7310023a%3Bencoding%3Dhex%3Bpurpose%3Disdn-interwork%3B
content%3Disdn-uui&gt;
&lt;/allOneLine&gt;
</pre></div>
<p>
The resulting INVITE F5 would contain:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
User-to-User: 56a390f3d2b7310023a;encoding=hex;purpose=isdn-interwork
 ;content=isdn-uui
</pre></div>
<p>
An escaped User-to-User header field from the REFER message response F1 of 
Figure 4:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;allOneLine&gt;
Refer-To: &lt;sip:+12125551212@gateway.example.com?User-to-User=
56a390f3d2b7310023a%3Bencoding%3Dhex%3Bpurpose%3Disdn-interwork%3B
content%3Disdn-uui&gt;
&lt;/allOneLine&gt;
</pre></div>
<p>This would result in the INVITE F4 containing:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
User-to-User: 56a390f3d2b7310023a;encoding=hex;purpose=isdn-interwork
 ;content=isdn-uui
</pre></div>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Recommendation</h3>

<p>
The recommendation is to define a new SIP header field "User-to-User" to 
transport call control UUI since this mechanism 
best supports the requirements in <a class='info' href='#johnston-cuss-sip-uui-reqs'>[johnston&#8209;cuss&#8209;sip&#8209;uui&#8209;reqs]<span> (</span><span class='info'>Johnston, A., McMillen, J., and L. Liess, &ldquo;Problem Statement and Requirements for Transporting User to User Call Control Information in  SIP,&rdquo; .</span><span>)</span></a>. 
There are also existing implementations and running code for this header field approach.  A SIP feature tag 
"uui" also needs to be defined so that it can be used in Supported and Require 
header fields to meet REQ-8.

</p>
<p>
To help tag and identify the UUI used with this header field, "purpose", 
"content", and "encoding" parameters are defined.  This specification only 
defines encodings of hex and IA5.  Other 
specifications can define other purposes and contents for this header field per 
the requirements of this document.

</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Syntax for UUI Header Field</h3>

<p>
   The User-to-User header field can be present in INVITE requests and responses 
only and in BYE requests and responses.

</p>
<p>
   The following syntax specification uses the augmented Backus-Naur
   Form (BNF) as described in RFC 2234 and extends RFC 3261.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      UUI         = "User-to-User" HCOLON uui-data *(SEMI uui-param)
      uui-data    = token
      uui-param   = enc-param | cont-param | purp-param | generic-param
      enc-param   = "encoding=" ("hex" | "IA5" | token)
      cont-param  = "content=" token
      purp-param  = "purpose=" token
</pre></div>
<p>
The parameter "encoding=hex" means hexadecimal encoding.  The parameter "encoding=IA5" means Internet Alphabet Number 5 encoding, also known as ITU-T T.50 <a class='info' href='#ia5'>[ia5]<span> (</span><span class='info'>, &ldquo;T.50 : International Reference Alphabet (IRA) (Formerly International Alphabet No. 5 or IA5) - Information technology - 7-bit coded character set for information interchange,&rdquo; .</span><span>)</span></a>.  If the encoding parameter is not present, the default 
value of "hex" MUST be assumed.   Other encoding methods of encoding MAY 
also be standardized.  

</p>
<p>
User-to-User header fields with different purpose parameters may be present in a request or response.  The number of User-to-User header fields which may be present in a 
request or response is defined for a particular purpose (application).   Any size limitations on the UUI for a particular purpose must be defined by that purpose.  

</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Definition of New Parameter Values</h3>

<p>
This specification defines only the values of "hex", "IA5", and for the "encoding" parameter.
New values can be defined and added to the IANA registry with a standards track 
RFC, which needs to discuss the issues in this section.

</p>
<p>
New "encoding" values must reference a common encoding scheme or define the 
exact new encoding scheme.

</p>
<p>
New "content" values must describe the content of the UUI and give some example 
use cases.  The default "encoding" and other allowed encoding methods must be 
defined for this new content.

</p>
<p>
New "purpose" values must describe the new purpose and give some example use 
cases.  The default "content" value and other allowed contents must be defined 
for this new purpose.  Any restrictions on the size of the UUI data must be 
described for the new purpose. 

</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Registration of Header Field</h3>

<p>

   This document defines a new SIP header field named "User-to-User".

</p>
<p>
   The following row shall be added to the "Header Fields" section of
   the SIP parameter registry:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

              +------------------+--------------+-----------+
              | Header Name      | Compact Form | Reference |
              +------------------+--------------+-----------+
              | User-to-User     |              | [RFCXXXX] |
              +------------------+--------------+-----------+
</pre></div>
<p>

   Editor's Note: [RFCXXXX] should be replaced with the designation of
   this document.

</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Registration of Header Field Parameters</h3>

<p>

   This document defines the parameters for the header field defined in the
   preceding section.  The header field "User-to-User" can contain the 
parameters "encoding", "content", and "purpose".

</p>
<p>
   The following rows shall be added to the "Header Field Parameters and
   Parameter Values" section of the SIP parameter registry:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   +------------------+----------------+-------------------+-----------+
   | Header Field     | Parameter Name | Predefined Values | Reference |
   +------------------+----------------+-------------------+-----------+
   | User-to-User     | encoding       | hex               | [RFCXXXX] |
   +------------------+----------------+-------------------+-----------+
   | User-to-User     | encoding       | IA5               | [RFCXXXX] |
   +------------------+----------------+-------------------+-----------+
</pre></div>
<p>

   Editor's Note: [RFCXXXX] should be replaced with the designation of
this document.


</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Registration of SIP Option Tag</h3>

<p>

This specification registers a new SIP option tag, as per the
   guidelines in Section 27.1 of <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>.

</p>
<p>
   This document defines the SIP option tag "uui".

</p>
<p>
   The following row has been added to the "Option Tags" section of the
   SIP Parameter Registry:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   +------------+------------------------------------------+-----------+
   | Name       | Description                              | Reference |
   +------------+------------------------------------------+-----------+
   | uui        | This option tag is used to indicate that | [RFCXXXX] |
   |            | a UA supports and understands the        |           |
   |            | User-to-User header field.               |           |
   +------------+------------------------------------------+-----------+
</pre></div>
<p>

   Editor's Note: [RFCXXXX] should be replaced with the designation of
this document.


</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>
User to user information can be exchanged over SIP on a hop-by-hop or end-to-end 
basis. In some cases, UUI may carry privacy information that would require 
confidentiality and message integrity.  Standard SIP security mechanisms, viz., 
based on TLS, offer these properties per-hop. To preserve multi-hop or
end-end confidentiality and integrity, S/MIME profile MUST be utilized.  Since 
the security requirements and key management of the UUI information are likely 
to be quite different from the SIP signaling transport, another approach would 
be for the UUI information to be encrypted before being passed to SIP for 
transport.

</p>
<p>
Received User-to-User information should only be trusted if it is authenticated 
or if it is received within a trust domain.  For example, Spec-T, defined in 
<a class='info' href='#RFC3324'>[RFC3324]<span> (</span><span class='info'>Watson, M., &ldquo;Short Term Requirements for Network Asserted Identity,&rdquo; November&nbsp;2002.</span><span>)</span></a> could be used to define a trust domain.  When utilized 
by a gateway to map information to or from ISDN Q.931 and ISUP Q.763, 
appropriate policy should be applied based on the PSTN trust domain.

</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Acknowledgements</h3>

<p>
Thanks to Spencer Dawkins, Keith Drage, Vijay Gurbani, and Laura Liess for their 
review of the document.  The authors wish to thank Francois Audet, Denis 
Alexeitsev, Paul Kyzivat, Cullen Jennings, and Mahalingam Mani for their 
comments.

</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="Q763">[Q763]</a></td>
<td class="author-text">&ldquo;<a href="http://www.itu.int/rec/T-REC-Q.763-199912-I/en">ITU-T Q.763 Signaling System No. 7 - ISDN user part formats and 
codes</a>,&rdquo; http://www.itu.int/rec/T-REC-Q.931-199805-I/en&nbsp;.</td></tr>
<tr><td class="author-text" valign="top"><a name="Q931">[Q931]</a></td>
<td class="author-text">&ldquo;<a href="http://www.itu.int/rec/T-REC-Q.931-199805-I/en">ITU-T Q.931 User to User Information  Element (UU IE)</a>,&rdquo; http://www.itu.int/rec/T-REC-Q.931-199805-I/en&nbsp;.</td></tr>
<tr><td class="author-text" valign="top"><a name="ETSI">[ETSI]</a></td>
<td class="author-text">&ldquo;ETSI ETS 300 207-1 Ed.1 (1994), Integrated Services Digital Network 
(ISDN); Diversion supplementary services.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3372">[RFC3372]</a></td>
<td class="author-text">Vemuri, A. and J. Peterson, &ldquo;<a href="http://tools.ietf.org/html/rfc3372">Session Initiation Protocol for Telephones (SIP-T): Context and Architectures</a>,&rdquo; BCP&nbsp;63, RFC&nbsp;3372, September&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3372.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2976">[RFC2976]</a></td>
<td class="author-text">Donovan, S., &ldquo;<a href="http://tools.ietf.org/html/rfc2976">The SIP INFO Method</a>,&rdquo; RFC&nbsp;2976, October&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2976.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4475">[RFC4475]</a></td>
<td class="author-text">Sparks, R., Hawrylyshen, A., Johnston, A., Rosenberg, J., and H. Schulzrinne, &ldquo;<a href="http://tools.ietf.org/html/rfc4475">Session Initiation Protocol (SIP) Torture Test Messages</a>,&rdquo; RFC&nbsp;4475, May&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4475.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Q1980">[Q1980]</a></td>
<td class="author-text">&ldquo;<a href="http://www.itu.int/itudoc/itu-t/aap/sg11aap/history/q1980.1/q1980.1.html">ITU-T Q.1980.1 The Narrowband Signalling Syntax (NSS) - Syntax Definition</a>,&rdquo; http://www.itu.int/itudoc/itu-t/aap/sg11aap/history/q1980.1/q1980.1.html&nbsp;.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3324">[RFC3324]</a></td>
<td class="author-text">Watson, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3324">Short Term Requirements for Network Asserted Identity</a>,&rdquo; RFC&nbsp;3324, November&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3324.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="johnston-cuss-sip-uui-reqs">[johnston-cuss-sip-uui-reqs]</a></td>
<td class="author-text">Johnston, A., McMillen, J., and L. Liess, &ldquo;<a href="http://www.tools.ietf.org/html/draft-johnston-cuss-sip-uui-reqs">Problem Statement and Requirements for Transporting User to User Call Control Information in 
SIP</a>,&rdquo; draft-johnston-cuss-sip-uui-reqs-00&nbsp;.</td></tr>
<tr><td class="author-text" valign="top"><a name="ia5">[ia5]</a></td>
<td class="author-text">&ldquo;<a href="http://www.itu.int/rec/T-REC-T.50-199209-I/en">T.50 : International Reference Alphabet (IRA) (Formerly International Alphabet No. 5 or IA5) - Information technology - 7-bit coded character set for information interchange</a>,&rdquo; http://www.itu.int/rec/T-REC-T.50-199209-I/en&nbsp;.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alan Johnston (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Avaya</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">St. Louis, MO  63124</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alan.b.johnston@gmail.com">alan.b.johnston@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Joanne McMillen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Unaffiliated</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:c.joanne.mcmillen@gmail.com">c.joanne.mcmillen@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">James Rafferty</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dialogic</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:james.rafferty@dialogic.com">james.rafferty@dialogic.com</a></td></tr>
</table>
</body></html>
