<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Test Plan and Results for Advancing RFC 2680 on the Standards Track</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 RFC 2680 Coverage">
<link href="#rfc.section.2" rel="Chapter" title="2 A Definition-centric metric advancement process">
<link href="#rfc.section.3" rel="Chapter" title="3 Test configuration">
<link href="#rfc.section.4" rel="Chapter" title="4 Error Calibration, RFC 2679">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Clock Synchronization Calibration">
<link href="#rfc.section.4.1.1" rel="Chapter" title="4.1.1 NetProbe Clock Error">
<link href="#rfc.section.4.1.2" rel="Chapter" title="4.1.2 Perfas Clock Error">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Packet Loss Determination Error">
<link href="#rfc.section.5" rel="Chapter" title="5 Pre-determined Limits on Equivalence">
<link href="#rfc.section.6" rel="Chapter" title="6 Tests to evaluate RFC 2680 Specifications">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 One-way Packet Loss, ADK Sample Comparison - Same &amp; Cross Implementation">
<link href="#rfc.section.6.1.1" rel="Chapter" title="6.1.1 NetProbe Same-implementation results">
<link href="#rfc.section.6.1.2" rel="Chapter" title="6.1.2 Perfas Same-implementation results">
<link href="#rfc.section.6.1.3" rel="Chapter" title="6.1.3 One-way Packet Loss, Cross-Implementation ADK Comparison">
<link href="#rfc.section.6.1.4" rel="Chapter" title="6.1.4 Conclusions on the ADK Results for One-way Packet Loss">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 One-way Packet Loss, Loss threshold, RFC 2680">
<link href="#rfc.section.6.2.1" rel="Chapter" title="6.2.1 NetProbe results for Loss Threshold">
<link href="#rfc.section.6.2.2" rel="Chapter" title="6.2.2 Perfas Results for Loss Threshold">
<link href="#rfc.section.6.2.3" rel="Chapter" title="6.2.3 Conclusions for Loss Threshold">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 Implementation of Statistics for One-way Delay">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 IANA Considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="10 References">
<link href="#rfc.references.1" rel="Chapter" title="10.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="10.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This memo proposes to advance a performance metric RFC along the standards track, specifically RFC 2680 on One-way Loss Metrics.  Observing that the metric definitions themselves should be the primary focus rather than the implementations of metrics, this memo describes the test procedures to evaluate specific metric requirement clauses to determine if the requirement has been interpreted and implemented as intended. Two completely independent implementations have been tested against the key specifications of RFC 2680." />
  <meta name="description" content="This memo proposes to advance a performance metric RFC along the standards track, specifically RFC 2680 on One-way Loss Metrics.  Observing that the metric definitions themselves should be the primary focus rather than the implementations of metrics, this memo describes the test procedures to evaluate specific metric requirement clauses to determine if the requirement has been interpreted and implemented as intended. Two completely independent implementations have been tested against the key specifications of RFC 2680." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">L. Ciavattone</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">AT&amp;T Labs</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">R. Geib</td>
</tr>
<tr>
<td class="left">Expires: April 23, 2012</td>
<td class="right">Deutsche Telekom</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">A. Morton</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">AT&amp;T Labs</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">M. Wieser</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">University of Applied Sciences Darmstadt</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 21, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Test Plan and Results for Advancing RFC 2680 on the Standards Track<br />
  <span class="filename">draft-morton-ippm-testplan-rfc2680-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This memo proposes to advance a performance metric RFC along the standards track, specifically RFC 2680 on One-way Loss Metrics.  Observing that the metric definitions themselves should be the primary focus rather than the implementations of metrics, this memo describes the test procedures to evaluate specific metric requirement clauses to determine if the requirement has been interpreted and implemented as intended. Two completely independent implementations have been tested against the key specifications of RFC 2680.</p>
<h1><a>Requirements Language</a></h1>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 23, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>
<p>This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008.  The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process. Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">RFC 2680 Coverage</a>
</li>
<li>2.   <a href="#rfc.section.2">A Definition-centric metric advancement process</a>
</li>
<li>3.   <a href="#rfc.section.3">Test configuration</a>
</li>
<li>4.   <a href="#rfc.section.4">Error Calibration, RFC 2679</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Clock Synchronization Calibration</a>
</li>
<li>4.1.1.   <a href="#rfc.section.4.1.1">NetProbe Clock Error</a>
</li>
<li>4.1.2.   <a href="#rfc.section.4.1.2">Perfas Clock Error</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Packet Loss Determination Error</a>
</li>
<li>5.   <a href="#rfc.section.5">Pre-determined Limits on Equivalence</a>
</li>
<li>6.   <a href="#rfc.section.6">Tests to evaluate RFC 2680 Specifications</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">One-way Packet Loss, ADK Sample Comparison - Same &amp; Cross Implementation</a>
</li>
<li>6.1.1.   <a href="#rfc.section.6.1.1">NetProbe Same-implementation results</a>
</li>
<li>6.1.2.   <a href="#rfc.section.6.1.2">Perfas Same-implementation results</a>
</li>
<li>6.1.3.   <a href="#rfc.section.6.1.3">One-way Packet Loss, Cross-Implementation ADK Comparison</a>
</li>
<li>6.1.4.   <a href="#rfc.section.6.1.4">Conclusions on the ADK Results for One-way Packet Loss</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">One-way Packet Loss, Loss threshold, RFC 2680</a>
</li>
<li>6.2.1.   <a href="#rfc.section.6.2.1">NetProbe results for Loss Threshold</a>
</li>
<li>6.2.2.   <a href="#rfc.section.6.2.2">Perfas Results for Loss Threshold</a>
</li>
<li>6.2.3.   <a href="#rfc.section.6.2.3">Conclusions for Loss Threshold</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">Implementation of Statistics for One-way Delay</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">IANA Considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">Acknowledgements</a>
</li>
<li>10.   <a href="#rfc.references">References</a>
</li>
<li>10.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>10.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">The IETF (IP Performance Metrics working group, IPPM) has considered how to advance their metrics along the standards track since 2001.</p>
<p id="rfc.section.1.p.2">A renewed work effort sought to investigate ways in which the measurement variability could be reduced and thereby simplify the problem of comparison for equivalence.</p>
<p id="rfc.section.1.p.3">There is consensus <a href="#I-D.ietf-ippm-metrictest">[I-D.ietf-ippm-metrictest]</a> that the metric definitions should be the primary focus of evaluation rather than the implementations of metrics, and equivalent results are deemed to be evidence that the metric specifications are clear and unambiguous. This is the metric specification equivalent of protocol interoperability. The advancement process either produces confidence that the metric definitions and supporting material are clearly worded and unambiguous, OR, identifies ways in which the metric definitions should be revised to achieve clarity.</p>
<p id="rfc.section.1.p.4">The process should also permit identification of options that were not implemented, so that they can be removed from the advancing specification (this is an aspect more typical of protocol advancement along the standards track).</p>
<p id="rfc.section.1.p.5">This memo's purpose is to implement the current approach for <a href="#RFC2680">[RFC2680]</a>. </p>
<p id="rfc.section.1.p.6">In particular, this memo documents consensus on the extent of tolerable errors when assessing equivalence in the results. In discussions, the IPPM working group agreed that test plan and procedures should include the threshold for determining equivalence, and this information should be available in advance of cross-implementation comparisons. This memo includes procedures for same-implementation comparisons to help set the equivalence threshold.</p>
<p id="rfc.section.1.p.7">Another aspect of the metric RFC advancement process is the requirement to document the work and results. The procedures of <a href="#RFC2026">[RFC2026]</a> are expanded in<a href="#RFC5657">[RFC5657]</a>, including sample implementation and interoperability reports. This memo follows the template in <a href="#I-D.morton-ippm-advance-metrics">[I-D.morton-ippm-advance-metrics]</a> for the report that accompanies the protocol action request submitted to the Area Director, including description of the test set-up, procedures, results for each implementation and conclusions.</p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> RFC 2680 Coverage</h1>
<p id="rfc.section.1.1.p.1">This plan, in its first draft version, does not cover all critical requirements and sections of <a href="#RFC2680">[RFC2680]</a>. Material will be added as it is "discovered" (not all requirements use requirements language).</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> A Definition-centric metric advancement process</h1>
<p id="rfc.section.2.p.1">The process described in Section 3.5 of <a href="#I-D.ietf-ippm-metrictest">[I-D.ietf-ippm-metrictest]</a> takes as a first principle that the metric definitions, embodied in the text of the RFCs, are the objects that require evaluation and possible revision in order to advance to the next step on the standards track.</p>
<p id="rfc.section.2.p.2">IF two implementations do not measure an equivalent singleton or sample, or produce the an equivalent statistic,</p>
<p id="rfc.section.2.p.3">AND sources of measurement error do not adequately explain the lack of agreement,</p>
<p id="rfc.section.2.p.4">THEN the details of each implementation should be audited along with the exact definition text, to determine if there is a lack of clarity that has caused the implementations to vary in a way that affects the correspondence of the results.</p>
<p id="rfc.section.2.p.5">IF there was a lack of clarity or multiple legitimate interpretations of the definition text,</p>
<p id="rfc.section.2.p.6">THEN the text should be modified and the resulting memo proposed for consensus and advancement along the standards track.</p>
<p id="rfc.section.2.p.7">Finally, all the findings MUST be documented in a report that can support advancement on the standards track, similar to those described in <a href="#RFC5657">[RFC5657]</a>. The list of measurement devices used in testing satisfies the implementation requirement, while the test results provide information on the quality of each specification in the metric RFC (the surrogate for feature interoperability).</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Test configuration</h1>
<p id="rfc.section.3.p.1">One metric implementation used was NetProbe version 5.8.5, (an earlier version is used in the WIPM system and deployed world-wide).  NetProbe uses UDP packets of variable size, and can produce test streams with Periodic <a href="#RFC3432">[RFC3432]</a> or Poisson <a href="#RFC2330">[RFC2330]</a> sample distributions.</p>
<p id="rfc.section.3.p.2">The other metric implementation used was Perfas+ version 3.1, developed by Deutsche Telekom. Perfas+ uses UDP unicast packets of variable size (but supports also TCP and multicast). Test streams with periodic, Poisson or uniform sample distributions may be used.</p>
<p id="rfc.section.3.p.3">Figure 1 shows a view of the test path as each Implementation's test flows pass through the Internet and the L2TPv3 tunnel IDs (1 and 2), based on Figure 1 of <a href="#I-D.ietf-ippm-metrictest">[I-D.ietf-ippm-metrictest]</a>.</p>
<div id="#rfc.figure.1"></div>
<div id="#L2TPv3_tunnel"></div>
<p></p>

<p></p>
<pre>        +----+  +----+                                +----+  +----+
        |Imp1|  |Imp1|           ,---.                |Imp2|  |Imp2|  
        +----+  +----+          /     \    +-------+  +----+  +----+  
          | V100 | V200        /       \   | Tunnel|   | V300  |  V400
          |      |            (         )  | Head  |   |       |
         +--------+  +------+ |         |__| Router|  +----------+
         |Ethernet|  |Tunnel| |Internet |  +---B---+  |Ethernet  |
         |Switch  |--|Head  |-|         |      |      |Switch    |
         +-+--+---+  |Router| |         |  +---+---+--+--+--+----+
           |__|      +--A---+ (         )  |Network|     |__|     
                               \       /   |Emulat.|         
         U-turn                 \     /    |"netem"|     U-turn 
         V300 to V400            `-+-'     +-------+     V100 to V200        

     
       
        Implementations                  ,---.       +--------+
                            +~~~~~~~~~~~/     \~~~~~~| Remote |
         +-------&gt;-----F2-&gt;-|          /       \     |-&gt;---.  |
         | +---------+      | Tunnel  (         )    |     |  |  
         | | transmit|-F1-&gt;-|   ID 1  (         )    |-&gt;.  |  |
         | | Imp 1   |      +~~~~~~~~~|         |~~~~|  |  |  |
         | | receive |-&lt;--+           (         )    | F1  F2 |
         | +---------+    |           |Internet |    |  |  |  |
         *-------&lt;-----+  F1          |         |    |  |  |  |
           +---------+ |  | +~~~~~~~~~|         |~~~~|  |  |  |
           | transmit|-*  *-|         |         |    |&lt;-*  |  |
           | Imp 2   |      | Tunnel  (         )    |     |  |
           | receive |-&lt;-F2-|   ID 2   \       /     |&lt;----*  |     
           +---------+      +~~~~~~~~~~~\     /~~~~~~| Switch |
                                         `-+-'       +--------+
        </pre>
<p>Illustrations of a test setup with a bi-directional tunnel. The upper diagram emphasizes the VLAN connectivity and geographical location. The lower diagram shows example flows traveling between two measurement implementations (for simplicity, only two flows are shown).</p>
<p id="rfc.section.3.p.5">The testing employs the Layer 2 Tunnel Protocol, version 3 (L2TPv3) <a href="#RFC3931">[RFC3931]</a> tunnel between test sites on the Internet. The tunnel IP and L2TPv3 headers are intended to conceal the test equipment addresses and ports from hash functions that would tend to spread different test streams across parallel network resources, with likely variation in performance as a result.</p>
<p id="rfc.section.3.p.6">At each end of the tunnel, one pair of VLANs encapsulated in the tunnel are looped-back so that test traffic is returned to each test site. Thus, test streams traverse the L2TP tunnel twice, but appear to be one-way tests from the test equipment point of view.</p>
<p id="rfc.section.3.p.7">The network emulator is a host running Fedora 14 Linux [http://fedoraproject.org/] with IP forwarding enabled and the "netem" Network emulator as part of the Fedora Kernel 2.6.35.11 [http://www.linuxfoundation.org/collaborate/workgroups/networking/netem] loaded and operating. Connectivity across the netem/Fedora host was accomplished by bridging Ethernet VLAN interfaces together with "brctl" commands (e.g., eth1.100 &lt;-&gt; eth2.100). The netem emulator was activated on one interface (eth1) and only operates on test streams traveling in one direction. In some tests, independent netem instances operated separately on each VLAN.</p>
<p id="rfc.section.3.p.8">The links between the netem emulator host and router and switch were found to be 100baseTx-HD (100Mbps half duplex) as reported by "mii-tool"when the testing was complete. Use of Half Duplex was not intended, but probably added a small amount of delay variation that could have been avoided in full duplex mode.</p>
<p id="rfc.section.3.p.9">Each individual test was run with common packet rates (1 pps, 10pps) Poisson/Periodic distributions, and IP packet sizes of 64, 340, and 500 Bytes.</p>
<p id="rfc.section.3.p.10">For these tests, a stream of at least 300 packets were sent from Source to Destination in each implementation. Periodic streams (as per <a href="#RFC3432">[RFC3432]</a>) with 1 second spacing were used, except as noted.</p>
<p id="rfc.section.3.p.11">As required in Section 2.8.1 of <a href="#RFC2680">[RFC2680]</a>, packet Type-P must be reported. The packet Type-P for this test was IP-UDP with Best Effort DCSP. These headers were encapsulated according to the L2TPv3 specifications <a href="#RFC3931">[RFC3931]</a>, and thus may not influence the treatment received as the packets traversed the Internet.</p>
<p id="rfc.section.3.p.12">With the L2TPv3 tunnel in use, the metric name for the testing configured here (with respect to the IP header exposed to Internet processing) is:</p>
<p id="rfc.section.3.p.13">Type-IP-protocol-115-One-way-Packet-Loss-&lt;StreamType&gt;-Stream</p>
<p id="rfc.section.3.p.14">With (Section 3.2. <a href="#RFC2680">[RFC2680]</a>) Metric Parameters:</p>
<p id="rfc.section.3.p.15">+ Src, the IP address of a host (12.3.167.16 or 193.159.144.8)</p>
<p id="rfc.section.3.p.16">+ Dst, the IP address of a host (193.159.144.8 or 12.3.167.16)</p>
<p id="rfc.section.3.p.17">+ T0, a time</p>
<p id="rfc.section.3.p.18">+ Tf, a time</p>
<p id="rfc.section.3.p.19">+ lambda, a rate in reciprocal seconds</p>
<p id="rfc.section.3.p.20">+ Thresh, a maximum waiting time in seconds (see Section 2.8.2 of <a href="#RFC2680">[RFC2680]</a>) and (Section 3.8. <a href="#RFC2680">[RFC2680]</a>)</p>
<p id="rfc.section.3.p.21">Metric Units: A sequence of pairs; the elements of each pair are:</p>
<p id="rfc.section.3.p.22">+ T, a time, and</p>
<p id="rfc.section.3.p.23">+ L, either a zero or a one</p>
<p id="rfc.section.3.p.24">The values of T in the sequence are monotonic increasing. Note that T would be a valid parameter to the *singleton* Type-P-One-way-Packet-Loss, and that L would be a valid value of Type-P-One-way-Packet Loss (see Section 2 of <a href="#RFC2680">[RFC2680]</a>).</p>
<p id="rfc.section.3.p.25">Also, Section 2.8.4 of <a href="#RFC2680">[RFC2680]</a> recommends that the path SHOULD be reported. In this test set-up, most of the path details will be concealed from the implementations by the L2TPv3 tunnels, thus a more informative path trace route can be conducted by the routers at each location.</p>
<p id="rfc.section.3.p.26">When NetProbe is used in production, a traceroute is conducted in parallel with, and at the outset of measurements.</p>
<p id="rfc.section.3.p.27">Perfas+ does not support traceroute.</p>
<div id="#rfc.figure.2"></div>
<p></p>

<p></p>
<pre>IPLGW#traceroute 193.159.144.8

Type escape sequence to abort.
Tracing the route to 193.159.144.8

  1 12.126.218.245 [AS 7018] 0 msec 0 msec 4 msec
  2 cr84.n54ny.ip.att.net (12.123.2.158) [AS 7018] 4 msec 4 msec
    cr83.n54ny.ip.att.net (12.123.2.26) [AS 7018] 4 msec
  3 cr1.n54ny.ip.att.net (12.122.105.49) [AS 7018] 4 msec
    cr2.n54ny.ip.att.net (12.122.115.93) [AS 7018] 0 msec
    cr1.n54ny.ip.att.net (12.122.105.49) [AS 7018] 0 msec
  4 n54ny02jt.ip.att.net (12.122.80.225) [AS 7018] 4 msec 0 msec
    n54ny02jt.ip.att.net (12.122.80.237) [AS 7018] 4 msec
  5 192.205.34.182 [AS 7018] 0 msec
    192.205.34.150 [AS 7018] 0 msec
    192.205.34.182 [AS 7018] 4 msec
  6 da-rg12-i.DA.DE.NET.DTAG.DE (62.154.1.30) [AS 3320] 88 msec 88 msec
88 msec
  7 217.89.29.62 [AS 3320] 88 msec 88 msec 88 msec
  8 217.89.29.55 [AS 3320] 88 msec 88 msec 88 msec
  9  *  *  *
</pre>
<p></p>
<p id="rfc.section.3.p.29">It was only possible to conduct the traceroute for the measured path on one of the tunnel-head routers (the normal trace facilities of the measurement systems are confounded by the L2TPv3 tunnel encapsulation).</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Error Calibration, RFC 2679</h1>
<p id="rfc.section.4.p.1">An implementation is required to report calibration results on clock synchronization in Section 2.8.3 of <a href="#RFC2680">[RFC2680]</a> (also required in Section 3.7 of <a href="#RFC2680">[RFC2680]</a> for sample metrics).</p>
<p id="rfc.section.4.p.2">Also, it is recommended to report the probability that a packet successfully arriving at the destination network interface is incorrectly designated as lost due to resource exhaustion in Section 2.8.3 of <a href="#RFC2680">[RFC2680]</a>.</p>
<p></p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Clock Synchronization Calibration</h1>
<p id="rfc.section.4.1.p.1">First, we look at clock synchronization. Sections 3.6, 3.7, and 3.8 of <a href="#RFC2679">[RFC2679]</a> give the detailed formulation of the errors and uncertainties for calibration. In summary, Section 3.7.1 of <a href="#RFC2679">[RFC2679]</a> describes the total time-varying uncertainty as:</p>
<p id="rfc.section.4.1.p.2">Esynch(t)+ Rsource + Rdest</p>
<p id="rfc.section.4.1.p.3">where:</p>
<p id="rfc.section.4.1.p.4">Esynch(t) denotes an upper bound on the magnitude of clock synchronization uncertainty.</p>
<p id="rfc.section.4.1.p.5">Rsource and Rdest denote the resolution of the source clock and the destination clock, respectively.</p>
<p id="rfc.section.4.1.p.6">Further, Section 3.7.2 of <a href="#RFC2679">[RFC2679]</a> describes the total wire-time uncertainty as</p>
<p id="rfc.section.4.1.p.7">Hsource + Hdest</p>
<p id="rfc.section.4.1.p.8">referring to the upper bounds on host-time to wire-time for source and destination, respectively.</p>
<p id="rfc.section.4.1.p.9">Section 3.7.3 of <a href="#RFC2679">[RFC2679]</a> describes a test with small packets over an isolated minimal network where the results can be used to estimate systematic and random components of the sum of the above errors or uncertainties. In a test with hundreds of singletons, the median is the systematic error and when the median is subtracted from all singletons, the remaining variability is the random error.</p>
<p id="rfc.section.4.1.p.10">The test context, or Type-P of the test packets, must also be reported, as required in Section 3.8 of <a href="#RFC2679">[RFC2679]</a> and all metrics defined there. Type-P is defined in Section 13 of <a href="#RFC2330">[RFC2330]</a> (as are many terms used below).</p>
<h1 id="rfc.section.4.1.1">
<a href="#rfc.section.4.1.1">4.1.1.</a> NetProbe Clock Error</h1>
<p id="rfc.section.4.1.1.p.1">In general, NetProbe clock error is dependent on the specific version and installation details.</p>
<p id="rfc.section.4.1.1.p.2">NetProbe operates using host time above the UDP layer, which is different from the wire-time preferred in <a href="#RFC2330">[RFC2330]</a>, but can be identified as a source of error according to Section 3.7.2 of <a href="#RFC2679">[RFC2679]</a>.</p>
<p id="rfc.section.4.1.1.p.3">Accuracy of NetProbe measurements is usually limited by NTP synchronization performance (which is typically taken as ~+/-1ms error or greater), although the installation used in this testing often exhibits errors much less than typical for NTP. The primary stratum 1 NTP server is closely located on a sparsely utilized network management LAN, thus it avoids many concerns raised in Section 10 of<a href="#RFC2330">[RFC2330]</a> (in fact, smooth adjustment, long-term drift analysis and compensation, and infrequent adjustment all lead to stability during measurement intervals, the main concern).</p>
<p id="rfc.section.4.1.1.p.4">The resolution of the reported results is 1us (us = microsecond) in the version of NetProbe tested here, which contributes to at least +/-1us error.</p>
<p id="rfc.section.4.1.1.p.5">NetProbe implements a time-keeping sanity check on sending and receiving time-stamping processes. When the significant process interruption takes place, individual test packets are flagged as possibly containing unusual time errors, and are excluded from the sample used for all "time" metrics.</p>
<p id="rfc.section.4.1.1.p.6">We performed a NetProbe calibration of the type described in Section 3.7.3 of <a href="#RFC2679">[RFC2679]</a>, using 64 Byte packets over a cross-connect cable. The results estimate systematic and random components of the sum of the Hsource + Hdest errors or uncertainties. In a test with 300 singletons conducted over 30 seconds (periodic sample with 100ms spacing), the median is the systematic error and the remaining variability is the random error.  One set of results is tabulated below:</p>
<div id="#rfc.figure.3"></div>
<p></p>

<p>(Results from the "R" software environment for statistical computing and graphics - http://www.r-project.org/ )</p>
<pre>&gt; summary(XD4CAL) 
      CAL1            CAL2             CAL3          
 Min.   : 89.0   Min.   : 68.00   Min.   : 54.00   
 1st Qu.: 99.0   1st Qu.: 77.00   1st Qu.: 63.00   
 Median :110.0   Median : 79.00   Median : 65.00  
 Mean   :116.8   Mean   : 83.74   Mean   : 69.65   
 3rd Qu.:127.0   3rd Qu.: 88.00   3rd Qu.: 74.00    
 Max.   :205.0   Max.   :177.00   Max.   :163.00    
&gt; </pre>
<p>NetProbe Calibration with Cross-Connect Cable, one-way delay values in microseconds (us)</p>
<p id="rfc.section.4.1.1.p.8">The median or systematic error can be as high as 110 us, and the range of the random error is also on the order of 116 us for all streams.</p>
<div id="#rfc.figure.4"></div>
<p id="rfc.section.4.1.1.p.9">Also, anticipating the Anderson-Darling K-sample (ADK) comparisons to follow, we corrected the CAL2 values for the difference between means between CAL2 and CAL3 (as specified in <a href="#I-D.ietf-ippm-metrictest">[I-D.ietf-ippm-metrictest]</a>), and found strong support for the (Null Hypothesis that) the samples are from the same distribution (resolution of 1 us and alpha equal 0.05 and 0.01)</p>

<p></p>
<pre>&gt; XD4CVCAL2 &lt;- XD4CAL$CAL2 - (mean(XD4CAL$CAL2)-mean(XD4CAL$CAL3))
&gt; boxplot(XD4CVCAL2,XD4CAL$CAL3) 
&gt; XD4CV2_ADK &lt;- adk.test(XD4CVCAL2, XD4CAL$CAL3)
&gt; XD4CV2_ADK
Anderson-Darling k-sample test.

Number of samples:  2
Sample sizes: 300 300
Total number of values: 600
Number of unique values: 97

Mean of Anderson Darling Criterion: 1
Standard deviation of Anderson Darling Criterion: 0.75896

T = (Anderson Darling Criterion - mean)/sigma

Null Hypothesis: All samples come from a common population.

                     t.obs P-value extrapolation
not adj. for ties  0.71734 0.17042             0
adj. for ties     -0.39553 0.44589             1
&gt; </pre>
<p></p>
<h1 id="rfc.section.4.1.2">
<a href="#rfc.section.4.1.2">4.1.2.</a> Perfas Clock Error</h1>
<p id="rfc.section.4.1.2.p.1">Perfas+ is configured to use GPS synchronisation and uses NTP synchronization as a fall-back or default. GPS synchronisation worked throughout this test with the exception of the calibration stated here (one implementation was NTP synchronised only). The time stamp accuracy typically is 0.1 ms.</p>
<p id="rfc.section.4.1.2.p.2">The resolution of the results reported by Perfas+ is 1us (us = microsecond) in the version tested here, which contributes to at least +/-1us error.</p>
<div id="#rfc.figure.5"></div>
<p></p>

<p></p>
<pre>Port    5001 5002 5003 
Min.    -227 -226  294  
Median  -169 -167  323  
Mean    -159 -157  335  
Max.       6  -52  376 
s        102  102   93</pre>
<p>Perfas Calibration with Cross-Connect Cable, one-way delay values in microseconds (us)</p>
<p id="rfc.section.4.1.2.p.4">The median or systematic error can be as high as 323 us, and the range of the random error is also less than 232 us for all streams.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Packet Loss Determination Error</h1>
<p id="rfc.section.4.2.p.1">Since both measurement implementations have resource limitations, it is theoretically possible that these limits could be exceeded and a packet that arrived at the destination successfully might be discarded in error. </p>
<p id="rfc.section.4.2.p.2">In previous test efforts <a href="#I-D.morton-ippm-advance-metrics">[I-D.morton-ippm-advance-metrics]</a>, NetProbe produced 6 multicast streams with an aggregate bit rate over 53 Mbit/s, in order to characterize the 1-way capacity of a NISTNet-based emulator.  Neither the emulator nor the pair of NetProbe implementations used in this testing dropped any packets in these streams. </p>
<p id="rfc.section.4.2.p.3">The maximum load used here between any 2 NetProbe implementations was be 11.5 Mbit/s divided equally among 3 unicast test streams. We conclude that steady resource usage does not contribute error (additional loss) to the measurements.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Pre-determined Limits on Equivalence</h1>
<p id="rfc.section.5.p.1">In this section, we provide the numerical limits on comparisons between implementations, in order to declare that the results are equivalent and therefore, the tested specification is clear.</p>
<p id="rfc.section.5.p.2">A key point is that the allowable errors, corrections, and confidence levels only need to be sufficient to detect mis-interpretation of the tested specification resulting in diverging implementations.</p>
<p id="rfc.section.5.p.3">Also, the allowable error must be sufficient to compensate for measured path differences. It was simply not possible to measure fully identical paths in the VLAN-loopback test configuration used, and this practical compromise must be taken into account.</p>
<p id="rfc.section.5.p.4">For Anderson-Darling K-sample (ADK) comparisons, the required confidence factor for the cross-implementation comparisons SHALL be the smallest of:</p>
<p></p>

<ul>
<li>0.95 confidence factor at 1ms resolution, or</li>
<li>the smallest confidence factor (in combination with resolution) of the two same-implementation comparisons for the same test conditions.</li>
</ul>

<p>A constant time accuracy error of as much as +/-0.5ms MAY be removed from one implementation's distributions (all singletons) before the ADK comparison is conducted.</p>
<p id="rfc.section.5.p.6">A constant propagation delay error (due to use of different sub-nets between the switch and measurement devices at each location) of as much as +2ms MAY be removed from one implementation's distributions (all singletons) before the ADK comparison is conducted.</p>
<p id="rfc.section.5.p.7">For comparisons involving the mean of a sample or other central statistics, the limits on both the time accuracy error and the propagation delay error constants given above also apply.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Tests to evaluate RFC 2680 Specifications</h1>
<p id="rfc.section.6.p.1">This section describes some results from production network (cross-Internet) tests with measurement devices implementing IPPM metrics and a network emulator to create relevant conditions, to determine whether the metric definitions were interpreted consistently by implementors.</p>
<p id="rfc.section.6.p.2">The procedures are similar contained in Appendix A.1 of <a href="#I-D.ietf-ippm-metrictest">[I-D.ietf-ippm-metrictest]</a> for One-way Delay. </p>
<p id="rfc.section.6.p.3">Note that there are only five instances of the requirement term "MUST" in <a href="#RFC2680">[RFC2680]</a> outside of the boilerplate and <a href="#RFC2119">[RFC2119]</a> reference.</p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> One-way Packet Loss, ADK Sample Comparison - Same &amp; Cross Implementation</h1>
<p id="rfc.section.6.1.p.1">This test determines if implementations produce results that appear to come from a common packet loss distribution, as an overall evaluation of Section 3 of <a href="#RFC2680">[RFC2680]</a>, "A Definition for Samples of One-way Packet Loss". Same-implementation comparison results help to set the threshold of equivalence that will be applied to cross-implementation comparisons.</p>
<p id="rfc.section.6.1.p.2">This test is intended to evaluate measurements in sections 2 and 3 of <a href="#RFC2680">[RFC2680]</a>.</p>
<p id="rfc.section.6.1.p.3">By testing the extent to which the distributions of one-way packet loss ratios from two implementations of <a href="#RFC2679">[RFC2679]</a> appear to be from the same distribution, we economize on comparisons, because comparing a set of individual summary statistics (as defined in Section 5 of <a href="#RFC2679">[RFC2679]</a>) would require another set of individual evaluations of equivalence. Instead, we can simply check which statistics were implemented, and report on those facts.</p>
<p></p>

<ol>
<li>Configure an L2TPv3 path between test sites, and each pair of measurement devices to operate tests in their designated pair of VLANs.</li>
<li>Measure a sample of one-way packet loss singletons with 2 or more implementations, using identical options and network emulator settings (if used).</li>
<li>Measure a sample of one-way packet loss singletons with *four* instances of the *same* implementations, using identical options, noting that connectivity differences SHOULD be the same as for the cross implementation testing.</li>
<li>Apply the ADK comparison procedures (see Appendix C of <a href="#I-D.ietf-ippm-metrictest">[I-D.ietf-ippm-metrictest]</a>) and determine the resolution and confidence factor for distribution equivalence of each same-implementation comparison and each cross-implementation comparison.</li>
<li>Take the coarsest resolution and confidence factor for distribution equivalence from the same-implementation pairs, or the limit defined in Section 5 above, as a limit on the equivalence threshold for these experimental conditions.</li>
<li>Apply constant correction factors to all singletons of the sample distributions, as described and limited in Section 5 above.</li>
<li>Compare the cross-implementation ADK performance with the equivalence threshold determined in step 5 to determine if equivalence can be declared.</li>
</ol>
<p id="rfc.section.6.1.p.5">The common parameters used for tests in this section are:</p>
<p></p>

<ul>
<li>IP header + payload = 64 octets</li>
<li>Periodic sampling at 1 packet per second</li>
<li>Test duration = 300 seconds (March 29)</li>
</ul>

<p>The netem emulator was set for 100ms average delay, with uniform delay variation of +/-50ms. In this experiment, the netem emulator was configured to operate independently on each VLAN and thus the emulator itself is a potential source of error when comparing streams that traverse the test path in different directions.</p>
<p id="rfc.section.6.1.p.7">In the result analysis of this section:</p>
<p></p>

<ul>
<li>All comparisons used 1 microsecond resolution.</li>
<li>No Correction Factors were applied.</li>
<li>The 0.95 confidence factor (1.960 for paired stream comparison) was used.</li>
</ul>
<h1 id="rfc.section.6.1.1">
<a href="#rfc.section.6.1.1">6.1.1.</a> NetProbe Same-implementation results</h1>
<p id="rfc.section.6.1.1.p.1">A single same-implementation comparison </p>
<h1 id="rfc.section.6.1.2">
<a href="#rfc.section.6.1.2">6.1.2.</a> Perfas Same-implementation results</h1>
<p id="rfc.section.6.1.2.p.1">All pair comparisons pass the ADK criterion.</p>
<p></p>
<h1 id="rfc.section.6.1.3">
<a href="#rfc.section.6.1.3">6.1.3.</a> One-way Packet Loss, Cross-Implementation ADK Comparison</h1>
<p id="rfc.section.6.1.3.p.1">The cross-implementation results are compared using a combined ADK analysis [ref], where all NetProbe results are compared with all Perfas results after testing that the combined same-implementation results pass the ADK criterion.</p>
<h1 id="rfc.section.6.1.4">
<a href="#rfc.section.6.1.4">6.1.4.</a> Conclusions on the ADK Results for One-way Packet Loss</h1>
<p id="rfc.section.6.1.4.p.1">Similar testing was repeated many times ...</p>
<p id="rfc.section.6.1.4.p.2">We conclude that the two implementations are capable of producing equivalent one-way packet loss distributions based on their interpretation of <a href="#RFC2680">[RFC2680]</a> .</p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> One-way Packet Loss, Loss threshold, RFC 2680</h1>
<p id="rfc.section.6.2.p.1">This test determines if implementations use the same configured maximum waiting time delay from one measurement to another under different delay conditions, and correctly declare packets arriving in excess of the waiting time threshold as lost.</p>
<p id="rfc.section.6.2.p.2">See Section 2.8.2 of <a href="#RFC2680">[RFC2680]</a>.</p>
<p></p>

<ol>
<li>configure an L2TPv3 path between test sites, and each pair of measurement devices to operate tests in their designated pair of VLANs.</li>
<li>configure the network emulator to add 1.0 sec one-way constant delay in one direction of transmission.</li>
<li>measure (average) one-way delay with 2 or more implementations, using identical waiting time thresholds (Thresh) for loss set at 3 seconds.</li>
<li>configure the network emulator to add 3 sec one-way constant delay in one direction of transmission equivalent to 2 seconds of additional one-way delay (or change the path delay while test is in progress, when there are sufficient packets at the first delay setting)</li>
<li>repeat/continue measurements</li>
<li>observe that the increase measured in step 5 caused all packets with 2 sec additional delay to be declared lost, and that all packets that arrive successfully in step 3 are assigned a valid one-way delay.</li>
</ol>
<p id="rfc.section.6.2.p.4">The common parameters used for tests in this section are:</p>
<p></p>

<ul>
<li>IP header + payload = 64 octets</li>
<li>Poisson sampling at lambda = 1 packet per second</li>
<li>Test duration = 900 seconds total (March 21)</li>
</ul>

<p>The netem emulator was set to add constant delays as specified in the procedure above.</p>
<h1 id="rfc.section.6.2.1">
<a href="#rfc.section.6.2.1">6.2.1.</a> NetProbe results for Loss Threshold</h1>
<p id="rfc.section.6.2.1.p.1">In NetProbe, the Loss Threshold is implemented uniformly over all packets as a post-processing routine. With the Loss Threshold set at 3 seconds, all packets with one-way delay &gt;3 seconds are marked "Lost" and included in the Lost Packet list with their transmission time (as required in Section 3.3 of <a href="#RFC2680">[RFC2680]</a>).  This resulted in 342 packets designated as lost in one of the test streams (with average delay = 3.091 sec).</p>
<h1 id="rfc.section.6.2.2">
<a href="#rfc.section.6.2.2">6.2.2.</a> Perfas Results for Loss Threshold</h1>
<p id="rfc.section.6.2.2.p.1">Perfas uses a fixed Loss Threshold which was not adjustable during this study. The Loss Threshold is approximately one minute, and emulation of a delay of this size was not attempted. However, it is possible to implement any delay threshold desired with a post-processing routine and subsequent analysis. Using this method, 195 packets would be declared lost (with average delay = 3.091 sec).</p>
<h1 id="rfc.section.6.2.3">
<a href="#rfc.section.6.2.3">6.2.3.</a> Conclusions for Loss Threshold</h1>
<p id="rfc.section.6.2.3.p.1">Both implementations assume that any constant delay value desired can be used as the Loss Threshold, since all delays are stored as a pair &lt;Time, Delay&gt; as required in <a href="#RFC2680">[RFC2680]</a>. This is a simple way to enforce the constant loss threshold envisioned in <a href="#RFC2680">[RFC2680]</a> (see specific section reference above). We take the position that the assumption of post-processing is compliant, and that the text of the RFC should be revised slightly to include this point.</p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> Implementation of Statistics for One-way Delay</h1>
<div id="#rfc.figure.6"></div>
<p id="rfc.section.6.3.p.1">We check which statistics were implemented, and report on those facts, noting that Section 4 of <a href="#RFC2680">[RFC2680]</a> does not specify the calculations exactly, and gives only some illustrative examples.</p>

<p></p>
<pre>                                              NetProbe    Perfas

4.1. Type-P-One-way-Delay-Packet-Loss-Ave       yes       yes
     (this is more commonly referred to as loss ratio)

</pre>
<p>Implementation of Section 4 Statistics</p>
<p></p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">The security considerations that apply to any active measurement of live networks are relevant here as well. See <a href="#RFC4656">[RFC4656]</a> and <a href="#RFC5357">[RFC5357]</a>.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.8.p.1">This memo makes no requests of IANA, and the authos hope that IANA will be able to use their time in other worthwhile pursuits.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.9.p.1">The authors thank Lars Eggert for his continued encouragement to advance the IPPM metrics during his tenure as AD Advisor.</p>
<p id="rfc.section.9.p.2">Nicole Kowalski supplied the needed CPE router for the NetProbe side of the test set-up, and graciously managed her testing in spite of issues caused by dual-use of the router. Thanks Nicole!</p>
<p id="rfc.section.9.p.3">The "NetProbe Team" also acknowledges many useful discussions with Ganga Maguluri.</p>
<h1 id="rfc.references">
<a href="#rfc.references">10.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">10.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2026">[RFC2026]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2026">The Internet Standards Process -- Revision 3</a>", BCP 9, RFC 2026, October 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2330">[RFC2330]</b></td>
<td class="top">
<a href="mailto:vern@ee.lbl.gov" title="MS 50B/2239">Paxson, V.</a>, <a href="mailto:almes@advanced.org" title="Advanced Network &amp; Services, Inc.">Almes, G.</a>, <a href="mailto:mahdavi@psc.edu" title="Pittsburgh Supercomputing Center">Mahdavi, J.</a> and <a href="mailto:mathis@psc.edu" title="Pittsburgh Supercomputing Center">M. Mathis</a>, "<a href="http://tools.ietf.org/html/rfc2330">Framework for IP Performance Metrics</a>", RFC 2330, May 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2679">[RFC2679]</b></td>
<td class="top">
<a href="mailto:almes@advanced.org" title="Advanced Network &amp; Services, Inc.">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org" title="Advanced Network &amp; Services, Inc.">Kalidindi, S.</a> and <a href="mailto:matt@advanced.org" title="Advanced Network &amp; Services, Inc.">M. Zekauskas</a>, "<a href="http://tools.ietf.org/html/rfc2679">A One-way Delay Metric for IPPM</a>", RFC 2679, September 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2680">[RFC2680]</b></td>
<td class="top">
<a href="mailto:almes@advanced.org" title="Advanced Network &amp; Services, Inc.">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org" title="Advanced Network &amp; Services, Inc.">Kalidindi, S.</a> and <a href="mailto:matt@advanced.org" title="Advanced Network &amp; Services, Inc.">M. Zekauskas</a>, "<a href="http://tools.ietf.org/html/rfc2680">A One-way Packet Loss Metric for IPPM</a>", RFC 2680, September 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3432">[RFC3432]</b></td>
<td class="top">
<a>Raisanen, V.</a>, <a>Grotefeld, G.</a> and <a>A. Morton</a>, "<a href="http://tools.ietf.org/html/rfc3432">Network performance measurement with periodic streams</a>", RFC 3432, November 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4656">[RFC4656]</b></td>
<td class="top">
<a>Shalunov, S.</a>, <a>Teitelbaum, B.</a>, <a>Karp, A.</a>, <a>Boote, J.</a> and <a>M. Zekauskas</a>, "<a href="http://tools.ietf.org/html/rfc4656">A One-way Active Measurement Protocol (OWAMP)</a>", RFC 4656, September 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4814">[RFC4814]</b></td>
<td class="top">
<a>Newman, D.</a> and <a>T. Player</a>, "<a href="http://tools.ietf.org/html/rfc4814">Hash and Stuffing: Overlooked Factors in Network Device Benchmarking</a>", RFC 4814, March 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5226">[RFC5226]</b></td>
<td class="top">
<a>Narten, T.</a> and <a>H. Alvestrand</a>, "<a href="http://tools.ietf.org/html/rfc5226">Guidelines for Writing an IANA Considerations Section in RFCs</a>", BCP 26, RFC 5226, May 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5357">[RFC5357]</b></td>
<td class="top">
<a>Hedayat, K.</a>, <a>Krzanowski, R.</a>, <a>Morton, A.</a>, <a>Yum, K.</a> and <a>J. Babiarz</a>, "<a href="http://tools.ietf.org/html/rfc5357">A Two-Way Active Measurement Protocol (TWAMP)</a>", RFC 5357, October 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5657">[RFC5657]</b></td>
<td class="top">
<a>Dusseault, L.</a> and <a>R. Sparks</a>, "<a href="http://tools.ietf.org/html/rfc5657">Guidance on Interoperation and Implementation Reports for Advancement to Draft Standard</a>", BCP 9, RFC 5657, September 2009.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-ippm-metrictest">[I-D.ietf-ippm-metrictest]</b></td>
<td class="top">
<a>Geib, R</a>, <a>Morton, A</a>, <a>Fardid, R</a> and <a>A Steinmitz</a>, "<a href="http://tools.ietf.org/html/draft-ietf-ippm-metrictest-04">IPPM standard advancement testing</a>", Internet-Draft draft-ietf-ippm-metrictest-04, October 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">10.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.morton-ippm-advance-metrics">[I-D.morton-ippm-advance-metrics]</b></td>
<td class="top">
<a>Morton, A</a>, "<a href="http://tools.ietf.org/html/draft-morton-ippm-advance-metrics-02">Lab Test Results for Advancing Metrics on the Standards Track</a>", Internet-Draft draft-morton-ippm-advance-metrics-02, October 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3931">[RFC3931]</b></td>
<td class="top">
<a>Lau, J.</a>, <a>Townsley, M.</a> and <a>I. Goyret</a>, "<a href="http://tools.ietf.org/html/rfc3931">Layer Two Tunneling Protocol - Version 3 (L2TPv3)</a>", RFC 3931, March 2005.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Len Ciavattone</span> 
	  <span class="n hidden">
		<span class="family-name">Ciavattone</span>
	  </span>
	</span>
	<span class="org vcardline">AT&T Labs</span>
	<span class="adr">
	  <span>200 Laurel Avenue South</span>

	  <span class="vcardline">
		<span class="locality">Middletown</span>,  
		<span class="region">NJ</span> 
		<span class="code">07748</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1 732 420 1239</span>

<span class="vcardline">EMail: <a href="mailto:lencia@att.com">lencia@att.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Ruediger Geib</span> 
	  <span class="n hidden">
		<span class="family-name">Geib</span>
	  </span>
	</span>
	<span class="org vcardline">Deutsche Telekom</span>
	<span class="adr">
	  <span>Heinrich Hertz Str. 3-7</span>

	  <span class="vcardline">
		<span class="locality">Darmstadt</span>,  
		<span class="region"></span>
		<span class="code">64295</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">Phone: +49 6151 58 12747</span>

<span class="vcardline">EMail: <a href="mailto:Ruediger.Geib@telekom.de">Ruediger.Geib@telekom.de</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Al Morton</span> 
	  <span class="n hidden">
		<span class="family-name">Morton</span>
	  </span>
	</span>
	<span class="org vcardline">AT&T Labs</span>
	<span class="adr">
	  <span>200 Laurel Avenue South</span>

	  <span class="vcardline">
		<span class="locality">Middletown</span>,  
		<span class="region">NJ</span> 
		<span class="code">07748</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1 732 420 1571</span>

<span class="vcardline">EMail: <a href="mailto:acmorton@att.com">acmorton@att.com</a></span>

<span class="vcardline">URI: <a href="http://home.comcast.net/~acmacm/">http://home.comcast.net/~acmacm/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Matthias Wieser</span> 
	  <span class="n hidden">
		<span class="family-name">Wieser</span>
	  </span>
	</span>
	<span class="org vcardline">University of Applied Sciences Darmstadt</span>
	<span class="adr">
	  <span>Birkenweg 8 Department EIT</span>

	  <span class="vcardline">
		<span class="locality">Darmstadt</span>,  
		<span class="region"></span>
		<span class="code">64295</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:matthias.wieser@stud.h-da.de">matthias.wieser@stud.h-da.de</a></span>

  </address>
</div>

</body>
</html>