Application Working Group                               Bruce Greenblatt
Internet Draft
<draft-greenblatt-ldapext-sos-00.txt>
Expires in six months


                Simple Operations on Subtrees (for LDAP)


Status of this Memo


     This document is an Internet-Draft and is in full conformance with
all provisions of Section 10 of RFC2026.

     This document is an Internet-Draft. Internet-Drafts are working
documents of the Internet Engineering Task Force (IETF), its areas,
andits working groups. Note that other groups may also distribute work-
ing documents as Internet-Drafts.

     Internet-Drafts are draft documents valid for a maximum of six
months.  Internet-Drafts may be updated, replaced, or made obsolete by
other documents at any time. It is not appropriate to use Internet-
Drafts as reference material or to cite them other than as a "working
draft" or "work in progress".

The list of current Internet-Drafts can be accessed at
http://www.ietf.org/ietf/1id-abstracts.txt

The list of Internet-Draft Shadow Directories can be accessed at
http://www.ietf.org/shadow.html.

     To learn the current status of any Internet-Draft, please check the
1id-abstracts.txt listing contained in the Internet-Drafts Shadow Direc-
tories on ds.internic.net (US East Coast), nic.nordu.net (Europe),
ftp.isi.edu (US West Coast), or munnari.oz.au (Pacific Rim).

     Distribution of this document is unlimited.

     Abstract

     This draft defines several new LDAP extensions.  These extensions
are operations that can manipulate an entire portion of Directory Infor-
mation Tree at once (DIT).  This draft does not presume any specific DIT
structure or schema modifications.

1.  Mechanism

     Operations that make changes to the Directory Information Tree
(DIT) via that are part of the standard set of protocol operations oper-
ate on a single object.  This document defines three new LDAP operations
that manipulate an entire DIT subtree.  These three operations are:





Greenblatt                                                      [Page 1]





Internet Draft                                                 June 1999


-    Copy Subtree

-    Delete Subtree

-    Update Subtree

     The syntax that is used in any LDAP extended request is:

     ExtendedRequest ::= [APPLICATION 23] SEQUENCE {
                requestName      [0] LDAPOID,
                requestValue     [1] OCTET STRING OPTIONAL }

     The corresponding response syntax is:

     ExtendedResponse ::= [APPLICATION 24] SEQUENCE {
                COMPONENTS OF LDAPResult,
                responseName     [10] LDAPOID OPTIONAL,
                response         [11] OCTET STRING OPTIONAL }

     The extensions defined in this draft obey this syntax.  Assume that
the OID 3.0 is the root of the OIDs that will be used.  Thus, the OIDs
for these extended operations are:

-    3.0.0 - Copy Subtree Request

-    3.0.1 - Copy Subtree Response

-    3.0.2 - Delete Subtree Request

-    3.0.3 - Delete Subtree Response

-    3.0.4 - Update Subtree Request

-    3.0.5 - Update Subtree Response


1.1.  Copy Subtree

     The Copy Subtree operation makes a replica of all objects from one
subtree (the source) in the DIT in another part (the target) in the DIT.
Note that if the LDAP client submitting the operation does not have
access to some objects in the source subtree, then objects corresponding
to them will not be created in the target subtree.  Similarly, if the
LDAP client submitting the operation does not have access to some object
attributes in the source subtree, then the corresponding object in the
target subtree will be missing those attributes.  The Copy Subtree
Request names the source and target of the operation:
CopySubtreeRequest ::= SEQUENCE {



Greenblatt                                                      [Page 2]





Internet Draft                                                 June 1999


    source           LDAPDN,
    target           LDAPDN,
    filter           Filter OPTIONAL}

     If the filter is present in the request, only those objects in the
source subtree that match the filter are copied to the target subtree.


1.2.  Delete Subtree

     The Delete Subtree operation removes all objects from a specified
part (the target) in the DIT.  Note that if the LDAP client submitting
the operation does not have access to some objects in the target sub-
tree, then those objects will not be deleted, and neither will any
objects betwween the target and the inaccessible object.    The Delete
Subtree Request names the target:
DeleteSubtreeRequest ::= SEQUENCE {
    source          LDAPDN,
    filter          Filter OPTIONAL}

     If the filter is present in the request, only those objects in the
source subtree that match the filter are deleted.


1.3.  Update Subtree

     The Update Subtree operation makes the same change to all objects
in a subtree (the target) in the DIT.  Note that if the LDAP client sub-
mitting the operation does not have access to some objects in the source
subtree, then objects corresponding to them will not be modified.  Simi-
larly, if the LDAP client submitting the operation does not have access
to some object attributes in the target subtree that are to be modified,
then the update operation fails on those objects.  The format of the
Update Subtree request is identical to the Modify Operation:
UpdateSubtreeRequest ::= SEQUENCE {
    object          LDAPDN,
    modification    SEQUENCE OF SEQUENCE {
    operation       ENUMERATED {
    add     (0),
    delete  (1),
    replace (2) },
    modification    AttributeTypeAndValues }
    filter          Filter OPTIONAL}

     If the filter is present in the request, only those objects in the
source subtree that match the filter are updated.





Greenblatt                                                      [Page 3]





Internet Draft                                                 June 1999


2.  References

[1]  M. Wahl, et. al., "Lightweight Directory Access Protocol (v3)," RFC
     2251, July 1997.

3.  Author's Address

     Bruce Greenblatt
     DTASI
     6841 Heaton Moor Drive
     San Jose, CA 95119
     USA
     Phone: +1-408-390-4776
     Email: bgreenblatt@dtasi.com





































Greenblatt                                                      [Page 4]


