<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Diameter Quality of Service
    Application</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Diameter Quality of Service
    Application">
<meta name="keywords" content="Diameter, AAA, QoS, Policy, VoIP, SIP">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Diameter Maintenance and</td><td class="header">D. Sun, Ed.</td></tr>
<tr><td class="header">Extensions (DIME)</td><td class="header">Alcatel-Lucent</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">P. McCann</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Motorola Labs</td></tr>
<tr><td class="header">Expires: November 8, 2009</td><td class="header">H. Tschofenig</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">T. Tsou</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Huawei</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">A. Doria</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Lulea University of Technology</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">G. Zorn, Ed.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Aruba Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">May 07, 2009</td></tr>
</table></td></tr></table>
<h1><br />Diameter Quality of Service
    Application<br />draft-ietf-dime-diameter-qos-08.txt</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on November 8, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>This document describes the framework, messages and procedures for
      the Diameter Quality of Service (QoS) application. The Diameter QoS
      application allows network elements to interact with Diameter servers
      when allocating QoS resources in the network. In particular, two modes
      of operation -- Pull and Push -- are defined.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
<a href="#anchor1">2.</a>&nbsp;
Terminology<br />
<a href="#architecture">3.</a>&nbsp;
Framework<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#router_model">3.1.</a>&nbsp;
Network Element Functional Model<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Implication">3.2.</a>&nbsp;
Implications of Endpoint QoS Capabilities<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Categories">3.2.1.</a>&nbsp;
Endpoint Categories<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">3.2.2.</a>&nbsp;
Interaction Modes Between the Authorizing Entity and Network Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">3.3.</a>&nbsp;
Authorization Schemes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#authz_models">3.3.1.</a>&nbsp;
Pull Mode Schemes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.3.2.</a>&nbsp;
Push Mode Schemes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.4.</a>&nbsp;
QoS Application Requirements<br />
<a href="#anchor6">4.</a>&nbsp;
QoS Application Session Establishment and Management<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.1.</a>&nbsp;
Parties Involved<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">4.2.</a>&nbsp;
Session Establishment<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">4.2.1.</a>&nbsp;
Session Establishment for Pull Mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#push_setup">4.2.2.</a>&nbsp;
Session Establishment for Push Mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#peer_discovery">4.2.3.</a>&nbsp;
Discovery and Selection of Peer Diameter QoS Application Node<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#re-authz">4.3.</a>&nbsp;
Session Re-authorization<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">4.3.1.</a>&nbsp;
Client-Side Initiated Re-Authorization<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">4.3.2.</a>&nbsp;
Server-Side Initiated Re-Authorization<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#session-termination">4.4.</a>&nbsp;
Session Termination<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">4.4.1.</a>&nbsp;
Client-Side Initiated Session Termination<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">4.4.2.</a>&nbsp;
Server-Side Initiated Session Termination<br />
<a href="#qos_messages">5.</a>&nbsp;
QoS Application Messages<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#QAR">5.1.</a>&nbsp;
QoS-Authorization Request (QAR)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#QAA">5.2.</a>&nbsp;
QoS-Authorization Answer (QAA)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#QIR">5.3.</a>&nbsp;
QoS-Install Request (QIR)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#QIA">5.4.</a>&nbsp;
QoS-Install Answer (QIA)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RAR">5.5.</a>&nbsp;
Re-Auth-Request (RAR)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RAA">5.6.</a>&nbsp;
Re-Auth-Answer (RAA)<br />
<a href="#QoS_state_machine">6.</a>&nbsp;
QoS Application State Machine<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#state_supplement">6.1.</a>&nbsp;
Supplemented States for Push Mode<br />
<a href="#avps">7.</a>&nbsp;
QoS Application AVPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#diameter-base-avps">7.1.</a>&nbsp;
Reused Base Protocol AVPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#qos-new-avps">7.2.</a>&nbsp;
QoS Application Defined AVPs<br />
<a href="#accounting">8.</a>&nbsp;
Accounting<br />
<a href="#examples">9.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#example_pull">9.1.</a>&nbsp;
Example Call Flow for Pull Mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#example_push">9.2.</a>&nbsp;
Example Call Flow for Push Mode<br />
<a href="#iana">10.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">10.1.</a>&nbsp;
AVP Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">10.2.</a>&nbsp;
AVP Specific Values<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">10.3.</a>&nbsp;
AVP Flags<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">10.4.</a>&nbsp;
Application IDs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">10.5.</a>&nbsp;
Command Codes<br />
<a href="#security">11.</a>&nbsp;
Security Considerations<br />
<a href="#anchor19">12.</a>&nbsp;
Acknowledgements<br />
<a href="#contributors">13.</a>&nbsp;
Contributors<br />
<a href="#rfc.references1">14.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">14.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">14.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>This document describes the framework, messages and procedures for
      the Diameter Quality of Service (QoS) Application. The Diameter QoS
      Application allows Network Elements (NEs) to interact with Diameter
      servers when allocating QoS resources in the network.
</p>
<p>Two modes of operation are defined. In the first, called "Pull" mode,
      the network element requests QoS authorization from the Diameter server
      based on some trigger (such as a QoS signaling protocol) that arrives
      along the data path. In the second, called "Push" mode, the Diameter
      server pro-actively sends a command to the network element(s) to install
      QoS authorization state. This could be triggered, for instance, by
      off-path signaling such as Session Initiation Protocol (SIP) <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> call control.
</p>
<p>A set of command codes is specified that allows a single Diameter QoS
      application server to support both Pull and Push modes based on the
      requirements of network technologies, deployment scenarios and end-host
      capabilities. In conjunction with parameters defined in the documents
      "Quality of Service Attributes for Diameter" <a class='info' href='#I-D.ietf-dime-qos-attributes'>[I&#8209;D.ietf&#8209;dime&#8209;qos&#8209;attributes]<span> (</span><span class='info'>Korhonen, J., Tschofenig, H., Arumaithurai, M., Jones, M., and A. Lior, &ldquo;Traffic Classification and Quality of Service Attributes for Diameter,&rdquo; December&nbsp;2009.</span><span>)</span></a> and "Quality of Service
      Parameters for Usage with the AAA Framework" <a class='info' href='#I-D.ietf-dime-qos-parameters'>[I&#8209;D.ietf&#8209;dime&#8209;qos&#8209;parameters]<span> (</span><span class='info'>Korhonen, J., Tschofenig, H., and E. Davies, &ldquo;Quality of Service Parameters for Usage with Diameter,&rdquo; May&nbsp;2009.</span><span>)</span></a>, this note depicts the
      basic call flow procedures used to establish, modify and terminate a
      Diameter QoS application session.
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in RFC 2119 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<p>The following terms are used in this document:
</p>
<p></p>
<blockquote class="text"><dl>
<dt>AAA Cloud</dt>
<dd> An infrastructure
          of AAA entities (clients, agents, servers) communicating via a AAA
          protocol over trusted, secure connections. It offers authentication,
          authorization and accounting services to applications in flexible
          local and roaming scenarios. Diameter <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>
          and RADIUS <a class='info' href='#RFC2865'>[RFC2865]<span> (</span><span class='info'>Rigney, C., Willens, S., Rubens, A., and W. Simpson, &ldquo;Remote Authentication Dial In User Service (RADIUS),&rdquo; June&nbsp;2000.</span><span>)</span></a> are both widely deployed
          AAA protocols. <br />
<br />

</dd>
<dt>Application Endpoint (AppE)</dt>
<dd>
          An Application Endpoint is an entity in an end-user device that
          exchanges signaling messages with Application Servers (see below) or
          directly with other Application Endpoints. Based on the result of
          this signaling, the Endpoint may make a request for QoS from the
          network. For example, a SIP Agent is one kind of Application
          Endpoint. <br />
<br />

</dd>
<dt>Application Server (AppS)</dt>
<dd> An
          Application Server is an entity that exchanges signaling messages
          with an Application Endpoint (see above). It may be a source of
          authorization for QoS-enhanced application flows. For example, a SIP
          server is one kind of Application Server.<br />
<br />

</dd>
<dt>Authorizing Entity (AE)</dt>
<dd> The
          Authorizing Entity is a Diameter server that supports the QoS
          application. It is responsible for authorizing QoS requests for a
          particular application flow or aggregate. The Authorizing Entity may
          be a standalone entity or may be integrated with an Application
          Server and may be co-located with a subscriber database. This entity
          corresponds to the Policy Decision Point (PDP) <a class='info' href='#RFC2753'>[RFC2753]<span> (</span><span class='info'>Yavatkar, R., Pendarakis, D., and R. Guerin, &ldquo;A Framework for Policy-based Admission Control,&rdquo; January&nbsp;2000.</span><span>)</span></a>.<br />
<br />

</dd>
<dt>Network Element (NE)</dt>
<dd> A QoS
          aware router that acts as a Diameter client for the QoS application.
          This entity triggers the protocol interaction for the Pull mode, and
          it is the recipient of QoS information in the Push mode. The Network
          Element corresponds to the Policy Enforcement Point (PEP) <a class='info' href='#RFC2753'>[RFC2753]<span> (</span><span class='info'>Yavatkar, R., Pendarakis, D., and R. Guerin, &ldquo;A Framework for Policy-based Admission Control,&rdquo; January&nbsp;2000.</span><span>)</span></a>.<br />
<br />

</dd>
<dt>Pull Mode</dt>
<dd>In this mode, the
          QoS authorization process is invoked by the QoS reservation request
          received from the Application Endpoint. The Network Element then
          requests the QoS authorization decision from the Authorizing
          Entity.<br />
<br />

</dd>
<dt>Push Mode</dt>
<dd>In this mode, the
          QoS authorization process is invoked by the request from Application
          Server or local policies in the Authorizing Entity. The Authorizing
          Entity then installs the QoS authorization decision to the Network
          Element directly. <br />
<br />

</dd>
<dt>Resource Requesting Entity (RRE)</dt>
<dd> A Resource Requesting Entity is a logical entity
          that supports the protocol interaction for QoS resources. The RRE
          resides in the end-host and is able to communicate with peer logical
          entities in an Authorizing Entity or a Network Element to trigger
          the QoS authorization process.<br />
<br />

</dd>
</dl></blockquote>

<a name="architecture"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Framework</h3>

<p>The Diameter QoS application runs between a NE (acting as a Diameter
      client) and the resource AE (acting as a Diameter server). A high-level
      picture of the resulting architecture is shown in <a class='info' href='#fig-qos-aaa'>Figure&nbsp;1<span> (</span><span class='info'>An Architecture Supporting QoS-AAA</span><span>)</span></a>.
</p>
<p><br /><hr class="insert" />
<a name="fig-qos-aaa"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
            +-------+---------+
            |   Authorizing   |
            |     Entity      |
            |(Diameter Server)|
            +-------+---------+
                    |
                    |
             /\-----+-----/\
         ////               \\\\
       ||       AAA Cloud       ||
      |   (Diameter application)  |
       ||                       ||
         \\\\               ////
             \-------+-----/
                     |
    +---+--+   +-----+----+   +---+--+
    |      |   |    NE    |   |      |    Media
    +  NE  +===+(Diameter +===+  NE  +=============&gt;&gt;
    |      |   |  Client) |   |      |    Flow
    +------+   +----------+   +------+
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: An Architecture Supporting QoS-AAA&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<p><a class='info' href='#fig-qos-aaa'>Figure&nbsp;1<span> (</span><span class='info'>An Architecture Supporting QoS-AAA</span><span>)</span></a> depicts NEs through which media
      flows need to pass, a cloud of AAA servers, and an AE. Note that there
      may be more than one router that needs to interact with the AAA cloud
      along the path of a given application flow, although the figure only
      depicts one for clarity.
</p>
<p>In some deployment scenarios, NEs may request authorization through
      the AAA cloud based on an incoming QoS reservation request. The NE will
      route the request to a designated AE. The AE will return the result of
      the authorization decision. In other deployment scenarios, the
      authorization will be initiated upon dynamic application state, so that
      the request must be authenticated and authorized based on information
      from one or more AppSs. After receiving the authorization request from
      the AppS or the NE, the AE decides the appropriate mode (i.e. Push or
      Pull). The usage Push or Pull mode can be determined by the authorizing
      entity either statically or dynamically. Static determination might be
      based on a configurable defined policy in the authorizing entity, while
      dynamic determination might be based on information received from an
      application server. For Push mode, the authorizing entity needs to
      identify the appropriate NE(s) to which QoS authorization information
      needs to be pushed. It might determine this based on information
      received from the AppS, such as the IP addresses of media flows.
</p>
<p>In some deployment scenarios, there is a mapping between access
      network type and the service logic (e.g. selection of the Push or Pull
      mode, and other differentiated handling of the resource admission and
      control). The access network type might be derived from the
      authorization request from the AppS or the NE, and in this case, the
      authorizing entity can identify the corresponding service logic based on
      the mapping.
</p>
<p>If defined properly, the interface between the NEs and AAA cloud
      would be identical whether the AE communicates with an AppS or not.
      Routers are therefore insulated from the details of particular
      applications and need not know that Application Servers are involved at
      all. Also, the AAA cloud would naturally encompass business
      relationships such as those between network operators and third-party
      application providers, enabling flexible intra- or inter-domain
      authorization, accounting, and settlement.
</p>
<a name="router_model"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Network Element Functional Model</h3>

<p><a class='info' href='#fig-ne-model'>Figure&nbsp;2<span> (</span><span class='info'>Network Element Functional Model</span><span>)</span></a> depicts a logical operational
        model of resource management in a router.
</p>
<p><br /><hr class="insert" />
<a name="fig-ne-model"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
            +-------------------------------------------------------+
            | DIAMETER Client                                       |
            | Functionality                                         |
            | +---------------++-----------------++---------------+ |
            | | User          || QoS Application || Accounting    | |
            | | Authentication|| Client          || Client (e.g.  | |
            | | Client        || (Authorization  ||for QoS Traffic| |
            | +---------------+| of QoS Requests)|+---------------+ |
            |                  +-----------------+                  |
            +-------------------------------------------------------+
                                           ^
                                           v
         +--------------+            +----------+
         |QoS Signaling |            | Resource |
         |Msg Processing|&lt;&lt;&lt;&lt;&lt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;|Management|
         +--------------+            +----------+
              .  ^   |              *      ^
              |  v   .            *        ^
         +-------------+        *          ^
         |Signaling msg|       *           ^
         | Processing  |       *           V
         +-------------+       *           V
              |      |         *           V
  ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
              .      .         *           V
              |      |         *     .............................
              .      .         *     .   Traffic Control         .
              |      |         *     .                +---------+.
              .      .         *     .                |Admission|.
              |      |         *     .                | Control |.
    +----------+    +------------+   .                +---------+.
&lt;-.-|  Input   |    | Outgoing   |-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-&gt;
    |  Packet  |    | Interface  |   .+----------+    +---------+.
===&gt;|Processing|====| Selection  |===.|  Packet  |====| Packet  |.=&gt;
    |          |    |(Forwarding)|   .|Classifier|     Scheduler|.
    +----------+    +------------+   .+----------+    +---------+.
                                     .............................
        &lt;.-.-&gt; = signaling flow
        =====&gt; = data flow (sender --&gt; receiver)
        &lt;&lt;&lt;&gt;&gt;&gt; = control and configuration operations
        ****** = routing table manipulation
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Network Element Functional Model&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<p>Processing of incoming QoS reservation requests includes three
        actions: admission control, authorization and resource
        reservation.
</p>
<p>The admission control function provides information about available
        resources and determines whether there are enough resources to fulfill
        the request. Authorization is performed by the Diameter client, which
        involves contacting an authorization entity through the AAA cloud
        shown in <a class='info' href='#architecture'>Section&nbsp;3<span> (</span><span class='info'>Framework</span><span>)</span></a>. If both checks are
        successful, the authorized QoS parameters are set in the packet
        classifier and the packet scheduler. Note that the parameters passed
        to the Traffic Control function may be different from requested QoS
        (depending on the authorization decision). Once the requested resource
        is granted, the Resource Management function provides accounting
        information to the AE via the Diameter client.
</p>
<a name="Implication"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Implications of Endpoint QoS Capabilities</h3>

<p>
</p>
<a name="Categories"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
Endpoint Categories</h3>

<p>The QoS capabilities of Application Endpoints are varied, and can
          be categorized as follows: <br />
<br />
 </p>
<blockquote class="text"><dl>
<dt>Category 1</dt>
<dd> A Category 1
              Application Endpoint has no QoS capability at either the
              application or the network level. This type of AppE may set up a
              connection through application signaling, but it is incapable of
              specifying resource/QoS requirements through either application
              or network-level signaling. <br />
<br />

</dd>
<dt>Category 2</dt>
<dd> A Category 2
              Application Endpoint only has QoS capability at the application
              level. This type of AppE is able to set up a connection through
              application signaling with certain resource/QoS requirements
              (e.g., application attributes), but it is unable to signal any
              resource/QoS requirements at the network level. <br />
<br />

</dd>
<dt>Category 3</dt>
<dd> A Category 3
              Application Endpoint has QoS capability at the network level.
              This type of AppE may set up a connection through application
              signaling, translate service characteristics into network
              resource/QoS requirements (e.g., network QoS class) locally, and
              request the resources through network signaling, e.g., Resource
              ReSerVation Protocol (RSVP) <a class='info' href='#RFC2205'>[RFC2205]<span> (</span><span class='info'>Braden, B., Zhang, L., Berson, S., Herzog, S., and S. Jamin, &ldquo;Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification,&rdquo; September&nbsp;1997.</span><span>)</span></a> or
              NSIS <a class='info' href='#I-D.ietf-nsis-qos-nslp'>[I&#8209;D.ietf&#8209;nsis&#8209;qos&#8209;nslp]<span> (</span><span class='info'>Manner, J., Karagiannis, G., and A. McDonald, &ldquo;NSLP for Quality-of-Service Signaling,&rdquo; January&nbsp;2010.</span><span>)</span></a>.
</dd>
</dl></blockquote>

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2"></a><h3>3.2.2.&nbsp;
Interaction Modes Between the Authorizing Entity and Network Element</h3>

<p>Different QoS mechanisms are employed in packet networks. Those
          QoS mechanisms can be categorized into two schemes: IntServ <a class='info' href='#RFC2211'>[RFC2211]<span> (</span><span class='info'>Wroclawski, J., &ldquo;Specification of the Controlled-Load Network Element Service,&rdquo; September&nbsp;1997.</span><span>)</span></a>, <a class='info' href='#RFC2212'>[RFC2212]<span> (</span><span class='info'>Shenker, S., Partridge, C., and R. Guerin, &ldquo;Specification of Guaranteed Quality of Service,&rdquo; September&nbsp;1997.</span><span>)</span></a> and
          DiffServ <a class='info' href='#RFC2474'>[RFC2474]<span> (</span><span class='info'>Nichols, K., Blake, S., Baker, F., and D. Black, &ldquo;Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers,&rdquo; December&nbsp;1998.</span><span>)</span></a>. In the IntServ scheme,
          network signaling (e.g., RSVP, NSIS, or link specific signaling) is
          commonly used to initiate a request from an AppE for the desired QoS
          resource. In the DiffServ scheme, QoS resources are provisioned
          based upon some predefined QoS service classes rather than
          AppE-initiated, flow-based QoS requests.
</p>
<p>It is obvious that the eligible QoS scheme is correlated to the
          AppE's capability in the context of QoS authorization. Since
          Category 1 and 2 AppEs cannot initiate the QoS resource requests by
          means of network signaling, using the current mechanism of IntServ
          model to signal QoS information across the network is not applicable
          to them in general. Depending on network technology and operator
          requirements, a Category 3 AppE may either make use of network
          signaling for resource requests or not.
</p>
<p>The diversity of QoS capabilities of endpoints and QoS schemes of
          network technology leads to the distinction on the interaction mode
          between QoS authorization system and underlying NEs. When the
          IntServ scheme is employed by a Category 3 endpoint, the
          authorization process is typically initiated by a NE when a trigger
          is received from the endpoint such as network QoS signaling. In the
          DiffServ scheme, since the NE is unable to request the resource
          authorization on its own initiative, the authorization process is
          typically triggered by either the request of AppSs or policies
          defined by the operator.
</p>
<p>As a consequence, two interaction modes are needed in support of
          different combinations of QoS schemes and endpoint&rsquo;s QoS
          capabilities: Push mode and Pull mode.
</p>
<p></p>
<blockquote class="text"><dl>
<dt>Push mode</dt>
<dd> The QoS
              authorization process is triggered by AppSs or local network
              conditions (e.g., time of day on resource usage and QoS
              classes), and the authorization decisions are installed by the
              AE to the network element on its own initiative without explicit
              request. In order to support the push mode, the AE (i.e.,
              Diameter server) should be able to initiate a Diameter
              authorization session to communicate with the NE (i.e., Diameter
              client) without any pre-established connection from the network
              element. <br />
<br />

</dd>
<dt>Pull mode</dt>
<dd> The QoS
              authorization process is triggered by the network signaling
              received from end-user equipment or by a local event in the NE
              according to pre-configured policies, and authorization
              decisions are produced upon the request of the NE. In order to
              support the pull mode, the NE (i.e., Diameter client) will
              initiate a Diameter authorization session to communicate with
              the authorizing entity (i.e., Diameter server).
</dd>
</dl></blockquote>

<p>For Category 1 and 2 Application Endpoints, Push mode is
          required. For a Category 3 AppE, either Push mode or Pull mode may
          be used.
</p>
<p>Push mode is applicable to certain networks, for example, Cable
          network, DSL, Ethernet, and Diffserv-enabled IP/MPLS as defined by
          other SDOs (e.g., ETSI TISPAN and ITU-T}. The Pull mode is more
          appropriate to IntServ-enabled IP networks or certain wireless
          networks such as the GPRS networks defined by 3GPP. Some networks
          (for example, WiMAX) may require both Push and Pull modes.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Authorization Schemes</h3>

<p>
</p>
<a name="authz_models"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.1"></a><h3>3.3.1.&nbsp;
Pull Mode Schemes</h3>

<p>Three types of basic authorization schemes for Pull mode exist:
          one type of two-party scheme and two types of three-party schemes.
          The notation adopted here is in respect to the entity that performs
          the QoS authorization. The authentication of the QoS requesting
          entity might be done at the NE as part of the QoS signaling
          protocol, or by an off-path protocol run (on the application layer
          or for network access authentication) or the AE might be contacted
          with request for authentication and authorization of the QoS
          requesting entity. From the Diameter QoS application's point of view
          these schemes differ in type of information that need to be carried.
          Here we focus on the 'Basic Three Party Scheme' (see <a class='info' href='#fig-three-party-approach'>Figure&nbsp;3<span> (</span><span class='info'>Three Party Scheme</span><span>)</span></a>) and the 'Token-based
          Three Party Scheme' (see <a class='info' href='#fig-three-party-token-approach'>Figure&nbsp;4<span> (</span><span class='info'>Token-based Three Party Scheme</span><span>)</span></a>). In the 'Two Party
          Scheme', the QoS RRE is authenticated by the NE and the
          authorization decision is made either locally at the NE itself or
          offloaded to a trusted entity (most likely within the same
          administrative domain). In the two-party case no Diameter QoS
          protocol interaction is required.
</p>
<p><br /><hr class="insert" />
<a name="fig-three-party-approach"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                     +--------------+
                                     | Entity       |
                                     | authorizing  | &lt;......+
                                     | resource     |        .
                                     | request      |        .
                                     +------------+-+        .
                                     --^----------|--   .    .
                                /////  |          |  \\\\\   .
                              //       |          |       \\ .
                             |     QoS | QoS AAA  | QoS     |.
                             |    authz| protocol |authz    |.
                             |     req.|          | res.    |.
                              \\       |          |       // .
                                \\\\\  |          |  /////   .
                       QoS           --|----------v--   .    .
    +-------------+    request       +-+------------+        .
    |  Entity     |-----------------&gt;| NE           |        .
    |  requesting |                  | performing   |        .
    |  resource   |granted / rejected| QoS          |  &lt;.....+
    |             |&lt;-----------------| reservation  | financial
    +-------------+                  +--------------+ settlement
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Three Party Scheme&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<p>In the 'Basic Three Party Scheme' a QoS reservation request that
          arrives at the NE is forwarded to the Authorizing Entity (e.g., in
          the user's home network), where the authorization decision is made.
          A business relationship, such as a roaming agreement, between the
          visited network and the home network ensures that the visited
          network is compensated for the resources consumed by the user via
          the home network.
</p>
<p><br /><hr class="insert" />
<a name="fig-three-party-token-approach"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                            financial settlement
                             ...........................+
   Authorization             V             -------      .
   Token Request   +--------------+      / QoS AAA \    .
   +--------------&gt;|              |     /  protocol \   .
   |               | Authorizing  +--------------+   \  .
   |               | Entity       |   |          |    | .
   |        +------+              |&lt;--+----+     |    | .
   |        |      +--------------+  |QoS  |     |QoS  |.
   |        |                        |authz|     |authz|.
   |        |Authorization           |req.+|     |res. |.
   |        |Token                   |Token|     |     |.
   |        |                         |    |     | .  | .
   |        |                          \   |     | . /  .
   |        |                            \ |     | /    .
   |        |      QoS request             |-----V .    .
 +-------------+ + Authz. Token   +--------+-----+      .
 |  Entity     |-----------------&gt;| NE           |      .
 |  requesting |                  | performing   |      .
 |  resource   |granted / rejected| QoS          | &lt;....+
 |             |&lt;-----------------| reservation  |
 +-------------+                  +--------------+
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Token-based Three Party Scheme&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<p>The 'Token-based Three Party Scheme' is applicable to
          environments where a previous protocol interaction is used to
          request authorization tokens to assist the authorization process at
          the NE or the AE <a class='info' href='#RFC3521'>[RFC3521]<span> (</span><span class='info'>Hamer, L-N., Gage, B., and H. Shieh, &ldquo;Framework for Session Set-up with Media Authorization,&rdquo; April&nbsp;2003.</span><span>)</span></a>.
</p>
<p>The QoS RRE may be involved in an application layer protocol
          interaction, for example using SIP <a class='info' href='#RFC3313'>[RFC3313]<span> (</span><span class='info'>Marshall, W., &ldquo;Private Session Initiation Protocol (SIP) Extensions for Media Authorization,&rdquo; January&nbsp;2003.</span><span>)</span></a>,
          with the AE. As part of this interaction, authentication and
          authorization at the application layer might take place. As a result
          of a successful authorization decision, which might involve the
          user's home AAA server, an authorization token is generated by the
          AE (e.g., the SIP proxy and an entity trusted by the SIP proxy) and
          returned to the end host for inclusion into the QoS signaling
          protocol. The authorization token will be used by a NE that receives
          the QoS signaling message to authorize the QoS request.
          Alternatively, the Diameter QoS application will be used to forward
          the authorization token to the user's home network. The
          authorization token allows the authorization decision performed at
          the application layer protocol run to be associated with a
          corresponding QoS signaling session. Note that the authorization
          token might either refer to established state concerning the
          authorization decision or the token might itself carry the
          authorized parameters (protected by a digital signature or a keyed
          message digest to prevent tampering). In the latter case the
          authorization token may contain several pieces of information
          pertaining to the authorized application session, but at minimum it
          should contain: </p>
<ul class="text">
<li>An identifier for the AE (for example, an AppS) that issued
              the authorization token
</li>
<li>An identifier referring to a specific application protocol
              session for which the token was issued and
</li>
<li>A keyed message digest or digital signature protecting the
              content of the authorization token
</li>
</ul>

<p>A possible structure for the authorization token and the policy
          element carrying it are proposed in context of RSVP <a class='info' href='#RFC3520'>[RFC3520]<span> (</span><span class='info'>Hamer, L-N., Gage, B., Kosinski, B., and H. Shieh, &ldquo;Session Authorization Policy Element,&rdquo; April&nbsp;2003.</span><span>)</span></a>.
</p>
<p>In the scenario mentioned above, where the QoS resource
          requesting entity is involved in an application layer protocol
          interaction with the AE, it may be worthwhile to consider a
          token-less binding mechanism also. The application layer protocol
          interaction may have indicated the transport port numbers at the QoS
          RRE where it might receive media streams (for example in SIP/SDP
          <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a> signalling, these port numbers are
          advertised). The QoS RRE may also use these port numbers in some IP
          filter indications to the NE performing QoS reservation so that it
          may properly tunnel the inbound packets. The NE performing QoS
          reservation will forward the QoS resource requesting entity's IP
          address and the IP filter indications to the AE in the QoS
          authorization request. The AE will use the QoS RRE's IP address and
          the port numbers in the IP filter indication, which will match the
          port numbers advertised in the earlier application layer protocol
          interaction, to identify the right piece of policy information to be
          sent to the NE performing the QoS reservation in the QoS authz.
          response.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.2"></a><h3>3.3.2.&nbsp;
Push Mode Schemes</h3>

<p>The push mode can be further divided into two types:
          endpoint-initiated and network-initiated. In the former case, the
          authorization process is triggered by AppS in response to an
          explicit QoS request from an endpoint through application signaling,
          e.g. SIP; in the latter case, the authorization process is triggered
          by the AppS without an explicit QoS request from an endpoint.
</p>
<p>In the endpoint-initiated scheme, the QoS RRE (i.e., the AppE)
          determines the required application level QoS and sends a QoS
          request through an application signaling message. The AppS will
          extract application-level QoS information and trigger the
          authorization process to the AE. In the network-initiated scheme,
          the AE and/or AppS should derive and determine the QoS requirements
          according to application attribute, subscription and endpoint's
          capability when the endpoint does not explicitly indicate the QoS
          attributes. The AE makes an authorization decision based on
          application level QoS information, network policies, end-user
          subscription, network resource availability, etc., and installs the
          decision to NE directly.
</p>
<p>A Category 1 AppE requires network-initiated Push mode and a
          Category 2 AppE may use either type of Push Mode.
</p>
<p><br /><hr class="insert" />
<a name="fig-three-party-push-approach"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                            financial settlement
                             ...........................+
   Application               V             -------      .
   signaling msg   +--------------+      / QoS AAA \    .
   +--------------&gt;|              |     /  protocol \   .
   |               | Authorizing  +--------------+   \  .
   |               | Entity       |   |          |    | .
   |               +              |&lt;--+----+     |    | .
   |               +--------------+  |QoS  |     |QoS  |.
   |                                install|     |install
   |                                 |rsp. |     |req. |.
   |                                 |     |     |     |.
   |                                  |    |     | .  | .
   |                                   \   |     | . /  .
   |                                     \ |     | /    .
   V                                       |-----V .    .
 +-------------+                  +--------+-----+      .
 |  Entity     |                  | NE           |      .
 |  requesting |                  | performing   |      .
 |  resource   |QoS rsrc granted  | QoS          | &lt;....+
 |             |&lt;-----------------| reservation  |
 +-------------+                  +--------------+
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Scheme for Push Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
QoS Application Requirements</h3>

<p>A QoS application must meet a number of requirements applicable to
        a diverse set of networking environments and services. It should be
        compatible with different deployment scenarios having specific QoS
        signaling models and security issues. Satisfying the requirements
        listed below while interworking with QoS signaling protocols, a
        Diameter QoS application should accommodate the capabilities of the
        QoS signaling protocols rather than introducing functional
        requirements on them. A list of requirements for a QoS authorization
        application is provided here:
</p>
<p></p>
<blockquote class="text"><dl>
<dt>Inter-domain support</dt>
<dd> In
            particular, users may roam outside their home network, leading to
            a situation where the NE and AE are in different administrative
            domains.<br />
<br />

</dd>
<dt>Identity-based Routing</dt>
<dd> The
            QoS AAA protocol MUST route AAA requests to the Authorizing
            Entity, based on the provided identity of the QoS requesting
            entity or the identity of the AE encoded in the provided
            authorization token.<br />
<br />

</dd>
<dt>Flexible Authentication Support</dt>
<dd> The QoS AAA protocol MUST support a variety of
            different authentication protocols for verification of
            authentication information present in QoS signaling messages. The
            support for these protocols MAY be provided indirectly by tying
            the signaling communication for QoS to a previous authentication
            protocol exchange (e.g., using network access
            authentication).<br />
<br />

</dd>
<dt>Making an Authorization Decision</dt>
<dd> The QoS AAA protocol MUST exchange sufficient
            information between the AE and the enforcing entity (and vice
            versa) to compute an authorization decision and to execute this
            decision.<br />
<br />

</dd>
<dt>Triggering an Authorization Process</dt>
<dd> The QoS AAA protocol MUST allow periodic and
            event triggered execution of the authorization process, originated
            at the enforcing entity or even at the AE.<br />
<br />

</dd>
<dt>Associating QoS Reservations and Application State</dt>
<dd> The QoS AAA protocol MUST carry information
            sufficient for an AppS to identify the appropriate application
            session and associate it with a particular QoS reservation.<br />
<br />

</dd>
<dt>Dynamic Authorization</dt>
<dd> It
            MUST be possible for the QoS AAA protocol to push updates towards
            the NE(s) from authorizing entities.<br />
<br />

</dd>
<dt>Bearer Gating</dt>
<dd> The QoS AAA
            protocol MUST allow the AE to gate (i.e., enable/disable)
            authorized application flows based on, e.g., application state
            transitions.<br />
<br />

</dd>
<dt>Accounting Records</dt>
<dd> The QoS
            AAA protocol may define QoS accounting records containing
            duration, volume (byte count) usage information and description of
            the QoS attributes (e.g., bandwidth, delay, loss rate) that were
            supported for the flow.<br />
<br />

</dd>
<dt>Sending Accounting Records</dt>
<dd>
            The NE SHOULD be able to send accounting records for a particular
            QoS reservation state to an accounting entity.<br />
<br />

</dd>
<dt>Failure Notification</dt>
<dd> The
            QoS AAA protocol MUST allow the NE to report failures, such as
            loss of connectivity due to movement of a mobile node or other
            reasons for packet loss, to the authorizing entity.<br />
<br />

</dd>
<dt>Accounting Correlation</dt>
<dd> The
            QoS AAA protocol may support the exchange of sufficient
            information to allow for correlation between accounting records
            generated by the NEs and accounting records generated by an
            AppS.<br />
<br />

</dd>
<dt>Interaction with other AAA Applications</dt>
<dd> Interaction with other AAA applications such as
            Diameter Network Access (NASREQ) application <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a> is required for exchange of
            authorization, authentication and accounting information.<br />
<br />

</dd>
</dl></blockquote>

<p>In deployment scenarios where authentication of the QoS reservation
        requesting entity (e.g., the user) is done by means outside the
        Diameter QoS application protocol interaction, the AE is contacted
        only with a request for QoS authorization. Authentication might have
        taken place already via the interaction with the Diameter NASREQ
        application or as part of the QoS signaling protocol (e.g., Transport
        Layer Security (TLS) <a class='info' href='#RFC4346'>[RFC4346]<span> (</span><span class='info'>Dierks, T. and E. Rescorla, &ldquo;The Transport Layer Security (TLS) Protocol Version 1.1,&rdquo; April&nbsp;2006.</span><span>)</span></a> in the General
        Internet Signaling Transport (GIST) protocol <a class='info' href='#I-D.ietf-nsis-ntlp'>[I&#8209;D.ietf&#8209;nsis&#8209;ntlp]<span> (</span><span class='info'>Schulzrinne, H. and M. Stiemerling, &ldquo;GIST: General Internet Signalling Transport,&rdquo; June&nbsp;2009.</span><span>)</span></a>).
</p>
<p>Authentication of the QoS reservation requesting entity to the AE
        is necessary if a particular Diameter QoS application protocol run
        cannot be related (or if there is no intention to relate it) to a
        prior authentication. In this case the AE MUST authenticate the QoS
        reservation requesting entity in order to authorize the QoS request as
        part of the Diameter QoS protocol interaction.
</p>
<p>The document refers to three types of sessions that need to be
        properly correlated.
</p>
<p></p>
<blockquote class="text"><dl>
<dt>QoS Signaling Session</dt>
<dd> The
            time period during which a QoS signaling protocol establishes,
            maintains and deletes a QoS reservation state at the QoS network
            element is referred to as QoS signaling session. Different QoS
            signaling protocols use different ways to identify QoS signaling
            sessions. The same applies to different usage environments.
            Currently, this document supports three types of QoS session
            identifiers, namely a signaling session id (e.g., the Session
            Identifier used by the NSIS protocol suite), a flow id (e.g.,
            identifier assigned by an application to a certain flow as used in
            the 3GPP) and a flow description based on the IP parameters of the
            flow's end points.<br />
<br />

</dd>
<dt>Diameter Authorization Session</dt>
<dd> The time period, for which a Diameter server
            authorizes a requested service (i.e., QoS resource reservation) is
            referred to as a Diameter authorization session. It is identified
            by a Session-Id included in all Diameter messages used for
            management of the authorized service (initial authorization,
            re-authorization, termination), see <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>.<br />
<br />

</dd>
<dt>Application-layer Session</dt>
<dd>
            The application layer session identifies the duration of an
            application layer service which requires provision of certain QoS.
            An application layer session identifier is provided by the QoS
            requesting entity in the QoS signaling messages, for example as
            part of the authorization token. In general, the application
            session identifier is opaque to the QoS aware NEs. It is included
            in the authorization request message sent to the AE and helps it
            to correlate the QoS authorization request to the application
            session state information. <br />
<br />

</dd>
</dl></blockquote>

<p>Correlating these sessions is done at each of the three involved
        entities: The QoS requesting entity correlates the application with
        the QoS signaling sessions. The QoS NE correlates the QoS signaling
        session with the Diameter authorization sessions. The AE SHOULD bind
        the information about the three sessions together. Note that in
        certain scenarios not all of the sessions are present. For example,
        the application session might not be visible to QoS signaling protocol
        directly if there is no binding between the application session and
        the QoS requesting entity using the QoS signaling protocol.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
QoS Application Session Establishment and Management</h3>

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Parties Involved</h3>

<p>Authorization models supported by this application include three
        parties: </p>
<ul class="text">
<li>Resource Requesting Entity
</li>
<li>Network Elements (Diameter QoS application (DQA) client)
</li>
<li>Authorizing Entity (Diameter QoS application (DQA) server)
</li>
</ul>

<p>Note that the QoS RRE is only indirectly involved in the message
        exchange. This entity provides the trigger to initiate the Diameter
        QoS protocol interaction by transmitting QoS signaling messages. The
        Diameter QoS application is only executed between the Network Element
        (i.e., DQA client) and the Authorizing Entity (i.e., DQA server).
</p>
<p>The QoS RRE may communicate with the AE using application layer
        signaling for negotiation of service parameters. As part of this
        application layer protocol interaction, for example using SIP,
        authentication and authorization might take place. This message
        exchange is, however, outside the scope of this document. The protocol
        communication between the QoS resource requesting entity and the QoS
        NE might be accomplished using the NSIS protocol suite, RSVP or a link
        layer signaling protocol. A description of these protocols is also
        outside the scope of this document.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Session Establishment</h3>

<p>The Pull and Push modes use a different set of command codes for
        session establishment. For other operations, such as session
        modification and termination, they use the same set of command
        codes.
</p>
<p>The selection of Pull mode or Push mode operation is based on the
        trigger of the QoS Authorization session. When a QoS-Authz-Request
        (QAR, see <a class='info' href='#QAR'>Section&nbsp;5.1<span> (</span><span class='info'>QoS-Authorization Request (QAR)</span><span>)</span></a>) message with a new session ID is
        received, the AE operates in the Pull mode; when other triggers are
        received, the AE operates in the Push mode. Similarly, when a
        QoS-Install-Request (QIR, see <a class='info' href='#QIR'>Section&nbsp;5.3<span> (</span><span class='info'>QoS-Install Request (QIR)</span><span>)</span></a>} with a new
        session ID is received, the NE operates in the Push mode; when other
        triggers are received, the NE operation in the Pull mode.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.1"></a><h3>4.2.1.&nbsp;
Session Establishment for Pull Mode</h3>

<p>A request for a QoS reservation or local events received by a NE
          can trigger the initiation of a Diameter QoS authorization session.
          The NE generates a QAR message in which the required objects from
          the QoS signaling message that is converted to Diameter AVPs.
</p>
<p><a class='info' href='#fig-initial-qos-request-pull'>Figure&nbsp;6<span> (</span><span class='info'>Initial QoS Request Authorization for Pull Mode</span><span>)</span></a> shows the
          protocol interaction between a Resource Requesting Entity, a Network
          Element and the Authorizing Entity.
</p>
<p>The AE's identity, information about the application session
          and/or identity and credentials of the QoS RRE, requested QoS
          parameters, signaling session identifier and/or QoS enabled data
          flows identifiers MAY be encapsulated into respective Diameter AVPs
          and included in the Diameter message sent to the AE. The QAR is sent
          to a Diameter server that can either be the home server of the QoS
          requesting entity or an AppS.
</p><br /><hr class="insert" />
<a name="pull_mapping"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">QoS-specific Input Data</th><th align="left">Diameter AVPs</th></tr>
<tr>
<td align="left">Authorizing entity ID (e.g., Destination-Host taken from
            authorization token, Destination-Realm or derived from the NAI of
            the QoS requesting entity)</td>
<td align="left">Destination-Host Destination-Realm</td>
</tr>
<tr>
<td align="left">Authorization Token Credentials of the QoS requesting
            entity</td>
<td align="left">QoS-Authz-Data User-Name</td>
</tr>
<tr>
<td align="left">QoS parameters</td>
<td align="left">QoS-Resources</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: Mapping Input Data to QoS AVPs--Pull Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
</p>
<p>Authorization processing starts at the Diameter QoS server when
          it receives the QAR. Based on the information in the
          QoS-Authentication-Data, User-Name and QoS-Resources AVPs the server
          determines the authorized QoS resources and flow state
          (enabled/disabled) from locally available information (e.g., policy
          information that may be previously established as part of an
          application layer signaling exchange, or the user's subscription
          profile). The QoS-Resources AVP is defined in <a class='info' href='#I-D.ietf-dime-qos-attributes'>[I&#8209;D.ietf&#8209;dime&#8209;qos&#8209;attributes]<span> (</span><span class='info'>Korhonen, J., Tschofenig, H., Arumaithurai, M., Jones, M., and A. Lior, &ldquo;Traffic Classification and Quality of Service Attributes for Diameter,&rdquo; December&nbsp;2009.</span><span>)</span></a>. The authorization
          decision is then reflected in the response returned to the Diameter
          client with the QoS-Authorization-Answer message (QAA).
</p>
<p><br /><hr class="insert" />
<a name="fig-initial-qos-request-pull"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                            Authorizing
  End-Host         Network Element             Entity
requesting QoS      ( Diameter              ( Diameter
                     QoS Client)             QoS Server)
    |                   |                         |
    +---QoS-Reserve----&gt;|                         |
    |                   +- - - - - QAR - - - - - &gt;|
    |                   |(QoS-Resources,          |
    |                   |   QoS-Auth-Data,User-ID)|
    |                   |                +--------+--------------+
    |                   |                |  Authorize request    |
    |                   |                |  Keep session data    |
    |                   |                |/Authz-time,Session-Id/|
    |                   |                +--------+--------------+
    |                   |&lt; - - - - QAA - - - - - -+
    |                   |(Result-Code,            |
    |                   |QoS-Resources,Authz-time)|
    |           +-------+---------+
    |           |Install QoS state|
    |           |       +         |
    |           | Authz. session  |
    |           | /Authz-time/    |                QoS Responder
    |           |                 |                    Node
    |           +-------+---------+                      |
    |                   +----------QoS-Reserve---....---&gt;|
    |                   |                                |
    |                   |&lt;---------QoS-Response--....----|
    |&lt;--QoS-Response----+                                |
    |                   |                                |
    |=====================Data Flow==============....===&gt;|
    |                   |
    |                   +- - - - - QAR - - - - - &gt;|
    |                   |(START,QoS-Resources)    |
    |                   |                         |
    |                   |                +--------+--------------+
    |                   |                | Report for successful |
    |                   |                |   QoS reservation     |
    |                   |                |Update of reserved QoS |
    |                   |                |      resources        |
    |                   |                +--------+--------------+
    |                   |&lt; - - - - QAA - - - - - -+
    |                   |                         |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Initial QoS Request Authorization for Pull Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<p>The Authorizing Entity keeps authorization session state and
          SHOULD save additional information for management of the session
          (e.g., Signaling-Session-Id, authentication data) as part of the
          session state information.
</p>
<p>The final result of the authorization request is provided in the
          Result-Code AVP of the QAA message sent by the Authorizing Entity.
          In case of successful authorization (i.e., Result-Code =
          DIAMETER_LIMITED_SUCCESS, (see <a class='info' href='#diameter-base-avps'>Section&nbsp;7.1<span> (</span><span class='info'>Reused Base Protocol AVPs</span><span>)</span></a>)), information about the
          authorized QoS resources and the status of the authorized flow
          (enabled/disabled) is provided in the QoS-Resources AVP of the QAA
          message. The QoS information provided via the QAA is installed by
          the QoS Traffic Control function of the NE. The value
          DIAMETER_LIMITED_SUCCESS indicates that the AE expects confirmation
          via another QAR message for successful QoS resource reservation and
          for final reserved QoS resources (see below).
</p>
<p>One important piece of information returned from the Authorizing
          Entity is the authorization lifetime (carried inside the QAA). The
          authorization lifetime allows the NE to determine how long the
          authorization decision is valid for this particular QoS reservation.
          A number of factors may influence the authorized session duration,
          such as the user's subscription plan or currently available credits
          at the user's account (see <a class='info' href='#accounting'>Section&nbsp;8<span> (</span><span class='info'>Accounting</span><span>)</span></a>). The
          authorization duration is time-based as specified in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. For an extension of the authorization
          period, a new QoS-Authorization-Request/Answer message exchange
          SHOULD be initiated. Further aspects of QoS authorization session
          maintenance is discussed in <a class='info' href='#re-authz'>Section&nbsp;4.3<span> (</span><span class='info'>Session Re-authorization</span><span>)</span></a>, <a class='info' href='#session-termination'>Section&nbsp;4.4<span> (</span><span class='info'>Session Termination</span><span>)</span></a> and <a class='info' href='#accounting'>Section&nbsp;8<span> (</span><span class='info'>Accounting</span><span>)</span></a>.
</p>
<p>The indication of a successful QoS reservation and activation of
          the data flow is provided by the transmission of a QAR message,
          which reports the parameters of the established QoS state: reserved
          resources, duration of the reservation, and identification of the
          QoS enabled flow/QoS signaling session. The Diameter QoS server
          acknowledges the reserved QoS resources with the QA Answer (QAA)
          message where the Result-Code is set to 'DIAMETER_SUCCESS'. Note
          that the reserved QoS resources reported in this QAR message MAY be
          different than those authorized with the initial QAA message, due to
          the QoS signaling specific behavior (e.g., receiver-initiated
          reservations with One-Path-With-Advertisements) or specific process
          of QoS negotiation along the data path.
</p>
<a name="push_setup"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2"></a><h3>4.2.2.&nbsp;
Session Establishment for Push Mode</h3>

<p>The Diameter QoS server in the AE initiates a Diameter QoS
          authorization session upon the request for QoS reservation triggered
          by application layer signaling or by local events, and generates a
          QoS-Install-Request (QIR) message to Diameter QoS client in the NE
          in which it maps required objects to Diameter payload objects.
</p>
<p><a class='info' href='#fig-initial-qos-request-push'>Figure&nbsp;7<span> (</span><span class='info'>Initial QoS Request Authorization for Push Mode</span><span>)</span></a> shows the
          protocol interaction between the AE, a Network Element and a
          RRE.
</p>
<p>The NE's identity, information about the application session
          and/or identity and credentials of the QoS resource requesting
          entity, requested QoS parameters, signaling session identifier
          and/or QoS enabled data flows identifiers MAY be encapsulated into
          respective Diameter AVPs and included into the Diameter message sent
          from a Diameter QoS server in the Authorizing Entity to a Diameter
          QoS client in the NE. This requires that the AE has knowledge of
          specific information for allocating and identifying the NE that
          should be contacted and the data flow for which the QoS reservation
          should be established. This information can be statically configured
          or dynamically discovered, see <a class='info' href='#peer_discovery'>Section&nbsp;4.2.3<span> (</span><span class='info'>Discovery and Selection of Peer Diameter QoS Application Node</span><span>)</span></a>
          for details.
</p><br /><hr class="insert" />
<a name="push_mapping"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">QoS-specific Input Data</th><th align="left">Diameter AVPs</th></tr>
<tr>
<td align="left">Network Element ID</td>
<td align="left">Destination-Host Destination-Realm</td>
</tr>
<tr>
<td align="left">Authorization Token Credentials of the QoS requesting
            entity</td>
<td align="left">QoS-Authz-Data User-Name</td>
</tr>
<tr>
<td align="left">QoS parameters</td>
<td align="left">QoS-Resources</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 2: Mapping Input Data to QoS AVPs--Push Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
</p>
<p>Authorization processing starts at the Diameter QoS server when
          it receives a request from a RRE through an AppS (e.g., SIP Invite)
          or is triggered by a local event (e.g., pre-configured timer). Based
          on the received information the server determines the authorized QoS
          resources and flow state (enabled/disabled) from locally available
          information (e.g., policy information that may be previously
          established as part of an application layer signaling exchange, or
          the user's subscription profile). The authorization decision is then
          reflected in the QoS-Install-Request message (QIR) to the Diameter
          QoS client.
</p>
<p><br /><hr class="insert" />
<a name="fig-initial-qos-request-push"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                            Authorizing
  End-Host         Network Element             Entity
requesting QoS      ( Diameter              ( Diameter
                     QoS Client)             QoS Server)
    |                   |                          |
    |                   |                          |&lt;-- Trigger --
    |                   |                 +--------+--------------+
    |                   |                 |  Authorize request    |
    |                   |                 |  Keep session data    |
    |                   |                 |/Authz-time,Session-Id/|
    |                   |                 +--------+--------------+
    |                   |                          |
    |                   |&lt;-- - -- - QIR - - - - - -+
    |                   |(Initial Request,Decision |
    |                   |(QoS-Resources,Authz-time)|
    |           +-------+---------+
    |           |Install QoS state|
    |           |       +         |
    |           | Authz. session  |
    |           | /Authz-time/    |
    |           |                 |
    |           +-------+---------+
    |                   + - - - - QIA - - - - - -&gt;|
    |                   |    (Result-Code,        |
    |                   |     QoS-Resources)      |
    |                   |                +--------+--------------+
    |                   |                | Report for successful |
    |                   |                |   QoS reservation     |
    |                   |                |Update of reserved QoS |
    |                   |                |      resources        |
    |                   |                +--------+--------------+
    |                   |                         QoS Responder
    |                   |                               Node
    |                   |                                |
    |=====================Data Flow==============....===&gt;|
    |                   |
    |                  (+- - - - - QAR - - - - - &gt;|)
    |                  (|(START,QoS-Resources)    |)
    |                  (|&lt; - - - - QAA - - - - - -+)
    |                   |                         |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Initial QoS Request Authorization for Push Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<p>The AE keeps authorization session state and SHOULD save
          additional information for management of the session (e.g.,
          Signaling-Session-Id, authentication data) as part of the session
          state information.
</p>
<p>The final result of the authorization decision is provided in the
          QoS-Resources AVP of the QIR message sent by the AE. The QoS
          information provided via the QIR is installed by the QoS Traffic
          Control function of the NE.
</p>
<p>One important piece of information from the AE is the
          authorization lifetime (carried inside the QIR). The authorization
          lifetime allows the NE to determine how long the authorization
          decision is valid for this particular QoS reservation. A number of
          factors may influence the authorized session duration, such as the
          user's subscription plan or currently available credits at the
          user's account (see <a class='info' href='#accounting'>Section&nbsp;8<span> (</span><span class='info'>Accounting</span><span>)</span></a>). The
          authorization duration is time-based as specified in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. For an extension of the authorization
          period, a new QoS-Install-Request/Answer message or
          QoS-Authorization-Request/Answer message exchange SHOULD be
          initiated. Further aspects of QoS authorization session maintenance
          is discussed in <a class='info' href='#re-authz'>Section&nbsp;4.3<span> (</span><span class='info'>Session Re-authorization</span><span>)</span></a>, <a class='info' href='#session-termination'>Section&nbsp;4.4<span> (</span><span class='info'>Session Termination</span><span>)</span></a> and <a class='info' href='#accounting'>Section&nbsp;8<span> (</span><span class='info'>Accounting</span><span>)</span></a>.
</p>
<p>The indication of QoS reservation and activation of the data flow
          can be provided by the QoS-Install-Answer message immediately. In
          the case of successful enforcement, the Result-Code (=
          DIAMETER_SUCCESS, (see <a class='info' href='#diameter-base-avps'>Section&nbsp;7.1<span> (</span><span class='info'>Reused Base Protocol AVPs</span><span>)</span></a>))
          information is provided in the QIA message. Note that the reserved
          QoS resources reported in the QIA message MAY be different than
          those initially authorized with the QIR message, due to the QoS
          signaling specific behavior (e.g., receiver-initiated reservations
          with One-Path-With-Advertisements) or specific process of QoS
          negotiation along the data path. When path coupled signaling is used
          for QoS reservation along the data path, QAR/QAA may be used to
          update the results of QoS reservation and enforcement following the
          establishment of data flows.
</p>
<a name="peer_discovery"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.3"></a><h3>4.2.3.&nbsp;
Discovery and Selection of Peer Diameter QoS Application Node</h3>

<p>Discovery of Diameter QoS application nodes
</p>
<p>The Diameter QoS application node may obtain information of its
          peer nodes (e.g., FQDN, IP address) through static configuration or
          dynamic discovery as described in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. In
          particular, the NE shall perform the relevant operation for Pull
          mode; the AE shall perform the relevant operations for Push
          mode.
</p>
<p>Selection of peer Diameter QoS application node
</p>
<p>Upon receipt of a trigger to initiate a new Diameter QoS
          authorization session, the Diameter QoS application node selects and
          retrieves the location information of the peer node and based on
          some index information provided by the RRE. For instance, it can be
          the Authorization Entity's ID stored in the authorization token, the
          end-user's identity (e.g., NAI <a class='info' href='#RFC4282'>[RFC4282]<span> (</span><span class='info'>Aboba, B., Beadles, M., Arkko, J., and P. Eronen, &ldquo;The Network Access Identifier,&rdquo; December&nbsp;2005.</span><span>)</span></a>) or
          globally routable IP address.
</p>
<a name="re-authz"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Session Re-authorization</h3>

<p>Client and server-side initiated re-authorizations are considered
        in the design of the Diameter QoS application. Whether the
        re-authorization events are transparent for the resource requesting
        entity or result in specific actions in the QoS signaling protocol is
        outside the scope of the Diameter QoS application. It is directly
        dependent on the capabilities of the QoS signaling protocol.
</p>
<p>There are a number of options for policy rules according to which
        the NE (AAA client) contacts the AE for re-authorization. These rules
        depend on the semantics and contents of the QAA message sent by the
        AE:
</p>
<p></p>
<blockquote class="text"><dl>
<dt>a.</dt>
<dd>The QAA message contains the authorized parameters of the flow
            and its QoS and sets their limits (presumably upper). With these
            parameters the AE specifies the services that the NE can provide
            and will be financially compensated for. Therefore, any change or
            request for change of the parameters of the flow and its QoS that
            do not conform to the authorized limits requires contacting the AE
            for authorization.
</dd>
<dt>b.</dt>
<dd>The QAA message contains authorized parameters of the flow and
            its QoS. The rules that determine whether parameters&rsquo;
            changes require re-authorization are agreed out of band, based on
            a Service Level Agreement (SLA) between the domains of the NE and
            the AE.
</dd>
<dt>c.</dt>
<dd>The QAA message contains the authorized parameters of the flow
            and its QoS. Any change or request for change of these parameters
            requires contacting the AE for re-authorization.
</dd>
<dt>d.</dt>
<dd>In addition to the authorized parameters of the flow and its
            QoS, the QAA message contains policy rules that determine the NEs
            actions in case of change or request for change in authorized
            parameters.
</dd>
</dl></blockquote>

<p>Provided options are not exhaustive. Elaborating on any of the
        listed approaches is deployment /solution specific and is not
        considered in the current document.
</p>
<p>In addition, the AE may use a RAR to perform re-authorization with
        the authorized parameters directly when the re-authorization is
        triggered by service request or local events/policy rules.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1"></a><h3>4.3.1.&nbsp;
Client-Side Initiated Re-Authorization</h3>

<p>The AE provides the duration of the authorization session as part
          of the QoS-Authorization-Answer message (QAA). At any time before
          expiration of this period, a new QoS-Authorization-Request message
          (QAR) MAY be sent to the AE. The transmission of the QAR MAY be
          triggered when the NE receives a QoS signaling message that requires
          modification of the authorized parameters of an ongoing QoS session,
          or authorization lifetime expires.
</p>
<p><br /><hr class="insert" />
<a name="fig-qos-request-re-authz"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                            Authorizing
  End-Host         Network Element             Entity
requesting QoS      ( Diameter              ( Diameter
                     QoS Client)             QoS Server)
    |                   |                         |
    |=====================Data Flow==========================&gt;
    |                   |                         |
    |           +-------+----------+              |
    |           |Authz-time/CC-Time|              |
    |           |    expires       |              |
    |           +-------+----------+              |
    |                   +- - - - - QAR - - - - - &gt;|
    |                   |(QoS-Resources,          |
    |                   | QoS-Authz-Data,User-ID) |
                        |                +--------+--------------+
 NOTE:                  |                |  Authorize request    |
 Re-authorization       |                | Update session data   |
 is transparent to      |                |/Authz-time,Session-Id/|
 the End-Host           |                +--------+--------------+
                        |&lt; - - - - QAA - - - - - -+
    |                   |(Result-Code,            |
    |                   |QoS-Resources,Authz-time)|
    |           +-------+---------+               |
    |           |Update QoS state |               |
    |           |       +         |               |
    |           | Authz. session  |               |
    |           | /Authz-time/    |               |
    |           |                 |               |
    |           +-------+---------+               |
    |                   |                         |
    |=====================Data Flow==========================&gt;
    |                   |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8: Client-side Initiated QoS Re-Authorization&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.2"></a><h3>4.3.2.&nbsp;
Server-Side Initiated Re-Authorization</h3>

<p>The AE MAY initiate a QoS re-authorization by issuing a
          Re-Auth-Request message (RAR) as defined in the Diameter base
          protocol <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>, which may include the
          parameters of the re-authorized QoS state: reserved resources,
          duration of the reservation, identification of the QoS enabled
          flow/QoS signaling session for re-installation of the resource state
          by the QoS Traffic Control function of the NE.
</p>
<p>A NE that receives such a RAR message with Session-Id matching a
          currently active QoS session acknowledges the request by sending the
          Re-Auth-Answer (RAA) message towards the AE.
</p>
<p>If RAR does not include any parameters of the re-authorized QoS
          state, the NE MUST initiate a QoS re-authorization by sending a
          QoS-Authorization-Request (QAR) message towards the AE.
</p>
<p><br /><hr class="insert" />
<a name="fig-qos-re-auth-server-side"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                            Authorizing
  End-Host         Network Element             Entity
requesting QoS      ( Diameter              ( Diameter
                     QoS Client)             QoS Server)
    |                   |                          |
    |                   |                          |&lt;-- Trigger --
    |                   |                 +--------+--------------+
    |                   |                 |  Authorize request    |
    |                   |                 |  Keep session data    |
    |                   |                 |/Authz-time,Session-Id/|
    |                   |                 +--------+--------------+
    |                   |                          |
    |                   |&lt;-- - -- - RAR - - - - - -+
    |                   |(Request,Decision         |
    |                   |(QoS-Resources,Authz-time)|
    |           +-------+---------+
    |           |Install QoS state|
    |           |       +         |
    |           | Authz. session  |
    |           | /Authz-time/    |
    |           |                 |
    |           +-------+---------+
    |                   + - - - - RAA - - - - - -&gt;|
    |                   |    (Result-Code,        |
    |                   |     QoS-Resources)      |
    |                   |                +--------+--------------+
    |                   |                | Report for successful |
    |                   |                |   QoS reservation     |
    |                   |                |Update of reserved QoS |
    |                   |                |      resources        |
    |                   |                +--------+--------------+
    |                   |                         |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;9: Server-side Initiated QoS Re-Authorization&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<a name="session-termination"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Session Termination</h3>

<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.1"></a><h3>4.4.1.&nbsp;
Client-Side Initiated Session Termination</h3>

<p>The authorization session for an installed QoS reservation state
          MAY be terminated by the Diameter client by sending a
          Session-Termination-Request message (STR) to the Diameter server.
          This is a Diameter base protocol function and it is defined in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. Session termination can be caused by a QoS
          signaling messaging requesting deletion of the existing QoS
          reservation state or it can be caused as a result of a soft-state
          expiration of the QoS reservation state.
</p>
<p><br /><hr class="insert" />
<a name="fig-client-termination"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                            Authorizing
  End-Host         Network Element             Entity
requesting QoS      ( Diameter              ( Diameter
                     QoS Client)             QoS Server)
    |                   |                         |
    |==Data Flow==&gt;X /Stop of the data flow/      |
    |                   |                         |
    +---QoS-Reserve----&gt;|                         |
    |  (Delete QoS      +- - - - - STR - - - - - &gt;|
    |   reservation)    |                +--------+--------------+
    |                   |                | Remove authorization  |
    |&lt;--QoS-Response----+                | session state         |
    |                   |                +--------+--------------+
                        |&lt; - - - - STA - - - - - -+
                +-------+--------+                |
                |Delete QoS state|
                +-------+--------+                   QoS Responder
                        |                                Node
                        +----------QoS-Reserve-----....---&gt;|
                        |         (Delete QoS              |
                        |          reservation)            |
                        |&lt;---------QoS-Response----....----+
                        |                                  |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;10: Client-Side Initiated Session Termination&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2"></a><h3>4.4.2.&nbsp;
Server-Side Initiated Session Termination</h3>

<p>At anytime during a session the AE MAY send an
          Abort-Session-Request message (ASR) to the NE. This is a Diameter
          base protocol function and it is defined in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. Possible reasons for initiating the ASR
          message to the NE are insufficient credits or session termination at
          the application layer. The ASR message results in termination of the
          authorized session, release of the reserved resources at the NE and
          transmission of an appropriate QoS signaling message indicating a
          notification to other Network Elements aware of the signaling
          session.
</p>
<p><br /><hr class="insert" />
<a name="fig-server-termination"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                            Authorizing
  End-Host         Network Element             Entity
requesting QoS      ( Diameter              ( Diameter
                     QoS Client)             QoS Server)
    |                   |                         |
    |=====================Data Flow==========================&gt;
    |                   |
    |                   |&lt; - - - - ASR - - - - - -+
    |                   |                         |
    |====Data Flow=====&gt;X                         |  QoS Responder
    |                   |                         |      Node
    |&lt;--QoS-Notify------+----------QoS-Reserve-----....---&gt;|
    |                   |         (Delete QoS     |        |
                        |          reservation)   |
                +-------+--------+                |
                |Delete QoS state|                |
                +-------+--------+                |
                        +- - - - - ASA - - - - - &gt;|
                        |                +--------+--------------+
                        |                | Remove authorization  |
                        |                |     session state     |
                        |                +--------+--------------+
                        |                            QoS Responder
                        |                                Node
                        |&lt;---------QoS-Response----....----+
                        |                                  |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;11: Server-Side Initiated Session Termination&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<a name="qos_messages"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
QoS Application Messages</h3>

<p>The Diameter QoS Application requires the definition of new mandatory
      AVPs and Command-codes (see Section 3 of <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>). Four new Diameter messages are defined along
      with Command-Codes whose values MUST be supported by all Diameter
      implementations that conform to this specification.
</p><br /><hr class="insert" />
<a name="qos_commands"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="center"><col align="center"><col align="left">
<tr><th align="left">Command Name</th><th align="center">Abbrev.</th><th align="center">Code</th><th align="left">Reference</th></tr>
<tr>
<td align="left">QoS-Authz-Request</td>
<td align="center">QAR</td>
<td align="center">[TBD1]</td>
<td align="left"><a class='info' href='#QAR'>Section&nbsp;5.1<span> (</span><span class='info'>QoS-Authorization Request (QAR)</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">QoS-Authz-Answer</td>
<td align="center">QAA</td>
<td align="center">[TBD2]</td>
<td align="left"><a class='info' href='#QAA'>Section&nbsp;5.2<span> (</span><span class='info'>QoS-Authorization Answer (QAA)</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">QoS-Install-Request</td>
<td align="center">QIR</td>
<td align="center">[TBD3]</td>
<td align="left"><a class='info' href='#QIR'>Section&nbsp;5.3<span> (</span><span class='info'>QoS-Install Request (QIR)</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">QoS-Install-Answer</td>
<td align="center">QIA</td>
<td align="center">[TBD4]</td>
<td align="left"><a class='info' href='#QIA'>Section&nbsp;5.4<span> (</span><span class='info'>QoS-Install Answer (QIA)</span><span>)</span></a></td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 3: Diameter QoS Commands&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>In addition, the following Diameter Base protocol messages are used
      in the Diameter QoS application:
</p><br /><hr class="insert" />
<a name="base_messages"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="center"><col align="center"><col align="left">
<tr><th align="left">Command-Name</th><th align="center">Abbrev.</th><th align="center">Code</th><th align="left">Reference</th></tr>
<tr>
<td align="left">Re-Auth-Request</td>
<td align="center">RAR</td>
<td align="center">258</td>
<td align="left"><a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">Re-Auth-Answer</td>
<td align="center">RAA</td>
<td align="center">258</td>
<td align="left"><a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">Abort-Session-Request</td>
<td align="center">ASR</td>
<td align="center">274</td>
<td align="left"><a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">Abort-Session-Answer</td>
<td align="center">ASA</td>
<td align="center">274</td>
<td align="left"><a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">Session-Term-Request</td>
<td align="center">STR</td>
<td align="center">275</td>
<td align="left"><a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">Session-Term-Answer</td>
<td align="center">STA</td>
<td align="center">275</td>
<td align="left"><a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a></td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 4: Diameter Base Commands&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Diameter nodes conforming to this specification MAY advertise support
      by including the value of [TBD5] in the Auth-Application-Id or the
      Acct-Application-Id AVP of the Capabilities-Exchange-Request and
      Capabilities-Exchange-Answer commands, see <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>.
</p>
<p>The value of {TBD5] MUST be used as the Application-Id in all QAR/QAA
      and QIR/QIA commands.
</p>
<p>The value of zero (0) SHOULD be used as the Application-Id in all
      STR/STA, ASR/ASA, and RAR/RAA commands, because these commands are
      defined in the Diameter base protocol and no additional mandatory AVPs
      for those commands are defined in this document.
</p>
<a name="QAR"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
QoS-Authorization Request (QAR)</h3>

<p>The QoS-Authorization-Request message (QAR) indicated by the
        Command-Code field (see Section 3 of <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>)
        set to [TBD1] and 'R' bit set in the Command Flags field is used by
        NEs to request quality of service related resource authorization for a
        given flow.
</p>
<p>The QAR message MUST carry information for signaling session
        identification, AE identification, information about the requested
        QoS, and the identity of the QoS requesting entity. In addition,
        depending on the deployment scenario, an authorization token and
        credentials of the QoS requesting entity SHOULD be included.
</p>
<p>The message format, presented in ABNF form <a class='info' href='#RFC4234'>[RFC4234]<span> (</span><span class='info'>Crocker, D., Ed. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; October&nbsp;2005.</span><span>)</span></a>, is defined as follows:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 &lt;QoS-Request&gt; ::= &lt; Diameter Header: [TBD1], REQ, PXY &gt;
                      &lt; Session-Id &gt;
                      { Auth-Application-Id }
                      { Origin-Host }
                      { Origin-Realm }
                      { Destination-Realm }
                      { Auth-Request-Type }
                      [ Destination-Host ]
                      [ User-Name ]
                   *  [ QoS-Resources ]
                      [ QoS-Authz-Data ]
                      [ Bound-Auth-Session-Id ]
                   *  [ AVP ]
</pre></div><p>

</p>
<a name="QAA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
QoS-Authorization Answer (QAA)</h3>

<p>The QoS-Authorization-Answer message (QAA), indicated by the
        Command- Code field set to [TBD2] and 'R' bit cleared in the Command
        Flags field is sent in response to the QoS-Authorization-Request
        message (QAR). If the QoS authorization request is successfully
        authorized, the response will include the AVPs to allow authorization
        of the QoS resources and transport plane gating information.
</p>
<p>The message format is defined as follows:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 &lt;QoS-Answer&gt; ::= &lt; Diameter Header: [TBD2], PXY &gt;
                  &lt; Session-Id &gt;
                  { Auth-Application-Id }
                  { Auth-Request-Type }
                  { Result-Code }
                  { Origin-Host }
                  { Origin-Realm }
               *  [ QoS-Resources ]
                  [ Acct-Multisession-Id ]
                  [ Session-Timeout ]
                  [ Authorization-Session-Lifetime ]
                  [ Authorization-Grace-Period ]
               *  [ AVP ]
</pre></div><p>

</p>
<a name="QIR"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
QoS-Install Request (QIR)</h3>

<p>The QoS-Install Request message (QIR), indicated by the
        Command-Code field set to [TBD3] and 'R' bit set in the Command Flags
        field is used by AE to install or update the QoS parameters and the
        flow state of an authorized flow at the transport plane element.
</p>
<p>The message MUST carry information for signaling session
        identification or identification of the flow to which the provided QoS
        rules apply, identity of the transport plane element, description of
        provided QoS parameters, flow state and duration of the provided
        authorization.
</p>
<p>The message format is defined as follows:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 &lt;QoS-Install-Request&gt; ::= &lt; Diameter Header: [TBD3], REQ, PXY &gt;
                           &lt; Session-Id &gt;
                           { Auth-Application-Id }
                           { Origin-Host }
                           { Origin-Realm }
                           { Destination-Realm }
                           { Auth-Request-Type }
                           [ Destination-Host ]
                        *  [ QoS-Resources ]
                           [ Session-Timeout ]
                           [ Authorization-Session-Lifetime ]
                           [ Authorization-Grace-Period ]
                           [ Authorization-Session-Volume ]
                        *  [ AVP ]
</pre></div><p>

</p>
<a name="QIA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
QoS-Install Answer (QIA)</h3>

<p>The QoS-Install Answer message (QIA), indicated by the Command-Code
        field set to [TBD4] and 'R' bit cleared in the Command Flags field is
        sent in response to the QoS-Install Request message (QIR) for
        confirmation of the result of the installation of the provided QoS
        reservation instructions.
</p>
<p>The message format is defined as follows:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;QoS-Install-Answer&gt; ::= &lt; Diameter Header: [TBD4], PXY &gt;
                           &lt; Session-Id &gt;
                           { Auth-Application-Id }
                           { Origin-Host }
                           { Origin-Realm }
                           { Result-Code }
                        *  [ QoS-Resources ]
                        *  [ AVP ]
</pre></div><p>

</p>
<a name="RAR"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
Re-Auth-Request (RAR)</h3>

<p>The Re-Auth-Request message (RAR), indicated by the Command-Code
        field set to 258 and the 'R' bit set in the Command Flags field, is
        sent by the AE to the NE in order to initiate the QoS re-authorization
        from DQA server side.
</p>
<p>If the RAR command is received by the NE without any parameters of
        the re-authorized QoS state, the NE MUST initiate a QoS
        re-authorization by sending a QoS-Authorization-Request (QAR) message
        towards the AE.
</p>
<p>The message format is defined as follows:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 &lt;Re-Auth-Request&gt; ::= &lt; Diameter Header: 258, REQ, PXY &gt;
                           &lt; Session-Id &gt;
                           { Auth-Application-Id }
                           { Origin-Host }
                           { Origin-Realm }
                           { Destination-Realm }
                           { Auth-Request-Type }
                           [ Destination-Host ]
                        *  [ QoS-Resources ]
                           [ Session-Timeout ]
                           [ Authorization-Session-Lifetime ]
                           [ Authorization-Grace-Period ]
                           [ Authorization-Session-Volume ]
                        *  [ AVP ]
</pre></div><p>

</p>
<a name="RAA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6"></a><h3>5.6.&nbsp;
Re-Auth-Answer (RAA)</h3>

<p>The Re-Auth-Answer message (RAA), indicated by the Command-Code
        field set to 258 and the 'R' bit cleared in the Command Flags field,
        is sent by the NE to the AE in response to the RAR command.
</p>
<p>The message format is defined as follows:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;Re-Auth-Answer&gt; ::= &lt; Diameter Header: 258, PXY &gt;
                           &lt; Session-Id &gt;
                           { Auth-Application-Id }
                           { Origin-Host }
                           { Origin-Realm }
                           { Result-Code }
                        *  [ QoS-Resources ]
                        *  [ AVP ]
</pre></div><p>

</p>
<a name="QoS_state_machine"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
QoS Application State Machine</h3>

<p>The QoS application defines its own state machine that is based on
      the authorization state machine defined in Section 8.1 of the Base
      Protocol (<a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>). The Qos state machine uses
      own messages as defined in <a class='info' href='#qos_messages'>Section&nbsp;5<span> (</span><span class='info'>QoS Application Messages</span><span>)</span></a> and QoS
      AVPs as defined in <a class='info' href='#avps'>Section&nbsp;7<span> (</span><span class='info'>QoS Application AVPs</span><span>)</span></a>.
</p>
<a name="state_supplement"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Supplemented States for Push Mode</h3>

<p>Using the Base Protocol state machine as a basis, the following
        states are supplemented to first 2 state machines in which the session
        state is maintained on the Server. This MUST be supported in any QoS
        application implementations in support of server initiated push mode
        (<a class='info' href='#push_setup'>see<span> (</span><span class='info'>Session Establishment for Push Mode</span><span>)</span></a>).
</p>
<p>The following states are supplemented to the state machine on the
        client when state is maintained on the client as defined in Section
        8.1 of the Base Protocol <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                              SERVER, STATEFUL
      State     Event                          Action     New State
      -------------------------------------------------------------
      Idle      An application or local        Send       Pending
                event triggers an initial      QIR initial
                QoS request to the server      request

      Pending   Received QIA with a failed     Cleanup    Idle
                Result-Code

      Pending   Received QIA with Result-Code  Update     Open
                = SUCCESS                      session
      Pending   Error in processing received   Send      Discon
                QIA with Result-Code = SUCCESS ASR

</pre></div><p>

</p>
<p>The following states are supplemented to the state machine on the
        client when state is maintained on the server as defined in Section
        8.1 of the Base Protocol <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                              CLIENT, STATEFUL
      State     Event                          Action     New State
      -------------------------------------------------------------
      Idle      QIR initial request            Send       Open
                received and successfully      QIA initial
                processed                      answer,
                                               reserve resources

      Idle      QIR initial request            Send       Idle
                received but not               QIA initial
                successfully processed         answer with
                                               Result-Code
                                               != SUCCESS
</pre></div><p>

</p>
<a name="avps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
QoS Application AVPs</h3>

<p>Each of the AVPs identified in the QoS-Authorization-Request/Answer
      and QoS-Install-Request/Answer messages and the assignment of their
      value(s) is given in this section.
</p>
<a name="diameter-base-avps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Reused Base Protocol AVPs</h3>

<p>The QoS application uses a number of session management AVPs,
        defined in the Base Protocol (<a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>).
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Attribute Name                AVP Code     Reference [RFC3588]
Origin-Host                   264             Section 6.3
Origin-Realm                  296             Section 6.4
Destination-Host              293             Section 6.5
Destination-Realm             283             Section 6.6
Auth-Application-Id           258             Section 6.8
Result-Code                   268             Section 7.1
Auth-Request-Type             274             Section 8.7
Session-Id                    263             Section 8.8
Authorization-Lifetime        291             Section 8.9
Authorization-Grace-Period    276             Section 8.10
Session-Timeout                27             Section 8.13
User-Name                       1             Section 8.14
</pre></div><p>

</p>
<p>The Auth-Application-Id AVP (AVP Code 258) is assigned by IANA to
        Diameter applications. The value of the Auth-Application-Id for the
        Diameter QoS application is TBD.
</p>
<a name="qos-new-avps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
QoS Application Defined AVPs</h3>

<p>
</p>
<p>This document reuses the AVPs defined in Section 4 of <a class='info' href='#I-D.ietf-dime-qos-attributes'>[I&#8209;D.ietf&#8209;dime&#8209;qos&#8209;attributes]<span> (</span><span class='info'>Korhonen, J., Tschofenig, H., Arumaithurai, M., Jones, M., and A. Lior, &ldquo;Traffic Classification and Quality of Service Attributes for Diameter,&rdquo; December&nbsp;2009.</span><span>)</span></a>.
</p>
<p>This section lists the AVPs that are introduced specifically for
        the QoS application. The following new AVPs are defined:
        Bound-Auth-Session-Id and the QoS-Authorization-Data AVP.
</p>
<p>The following table describes the Diameter AVPs newly defined in
        this document for usage with the QoS Application, their AVP code
        values, types, possible flag values, and whether the AVP may be
        encrypted.
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                               +-------------------+
                                               |    AVP Flag rules |
+----------------------------------------------|----+--------+-----+
|                       AVP  Section           |    |    SHLD| MUST|
| Attribute Name        Code Defined Data Type |MUST|     NOT|  NOT|
+----------------------------------------------+----+--------+-----+
|QoS-Authorization-Data TBD    7.2  Grouped    | M  |        |  V  |
|Bound-Auth-Session-Id  TBD    7.2  UTF8String | M  |        |  V  |
+----------------------------------------------+----+--------+-----+
|M - Mandatory bit. An AVP with "M" bit set and its value MUST be  |
|    supported and recognized by a Diameter entity in order the    |
|    message, which carries this AVP, to be accepted.              |
|V - Vendor specific bit that indicates whether the AVP belongs to |
|    a address space.                                              |
+------------------------------------------------------------------+
</pre></div><p>

</p>
<p>
</p>
<p></p>
<blockquote class="text"><dl>
<dt>QoS-Authz-Data</dt>
<dd> The
            QoS-Authorization-Data AVP (AVP Code TBD) is of type OctetString.
            It is a container that carries application session or user
            specific data that has to be supplied to the AE as input to the
            computation of the authorization decision. <br />
<br />

</dd>
<dt>Bound-Authentication-Session-Id</dt>
<dd> The Bound-Authentication-Session AVP (AVP Code
            TBD) is of type UTF8String. It carries the id of the Diameter
            authentication session that is used for the network access
            authentication (NASREQ authentication session). It is used to tie
            the QoS authorization request to a prior authentication of the end
            host done by a co-located application for network access
            authentication (Diameter NASREQ) at the QoS NE. <br />
<br />

</dd>
</dl></blockquote>

<a name="accounting"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Accounting</h3>

<p>A NE may start an accounting session by sending an Accounting-Request
      message (ACR) after successful QoS reservation and activation of the
      data flow (see <a class='info' href='#fig-initial-qos-request-pull'>Figure&nbsp;6<span> (</span><span class='info'>Initial QoS Request Authorization for Pull Mode</span><span>)</span></a> and
      <a class='info' href='#fig-initial-qos-request-push'>Figure&nbsp;7<span> (</span><span class='info'>Initial QoS Request Authorization for Push Mode</span><span>)</span></a>). After every
      successful re-authorization procedure (see <a class='info' href='#fig-qos-request-re-authz'>Figure&nbsp;8<span> (</span><span class='info'>Client-side Initiated QoS Re-Authorization</span><span>)</span></a> and <a class='info' href='#fig-qos-re-auth-server-side'>Figure&nbsp;9<span> (</span><span class='info'>Server-side Initiated QoS Re-Authorization</span><span>)</span></a>), the NE may initiate an
      interim accounting message exchange. After successful session
      termination (see <a class='info' href='#fig-client-termination'>Figure&nbsp;10<span> (</span><span class='info'>Client-Side Initiated Session Termination</span><span>)</span></a> and <a class='info' href='#fig-server-termination'>Figure&nbsp;11<span> (</span><span class='info'>Server-Side Initiated Session Termination</span><span>)</span></a>), the NE may initiate a final
      exchange of accounting messages for terminating of the accounting
      session and reporting final records for the usage of the QoS resources
      reserved. It should be noted that the two sessions (authorization and
      accounting) have independent management by the Diameter base protocol,
      which allows for finalizing the accounting session after the end of the
      authorization session.
</p>
<p>The detailed QoS accounting procedures are out of scope in this
      document.
</p>
<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Examples</h3>

<a name="example_pull"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
Example Call Flow for Pull Mode</h3>

<p>This section presents an example of the interaction between the end
        host and Diameter QoS application entities using Pull mode. The
        application layer signaling is, in this example, provided using SIP.
        Signaling for a QoS resource reservation is done using the QoS NSLP.
        The authorization of the QoS reservation request is done by the
        Diameter QoS application (DQA).<br /><hr class="insert" />
<a name="fig-example-pull"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  End-Host                                 SIP Server  Correspondent
requesting QoS                            (DQA Server)        Node

      |                                          |              |
    ..|....Application layer SIP signaling.......|..............|..
    . |  Invite (SDP)                            |              | .
    . +.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-&gt;              | .
    . |  100 Trying                              |              | .
    . &lt;.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-+  Invite (SDP)| .
    . |                                          +-.-.-.....-.-.&gt; .
    . |                                          |  180 SDP'    | .
    . |                                          &lt;-.-.-.....-.-.+ .
    . |                                 +--------+--------+     | .
    . |                                 |Authorize session|     | .
    . |                                 |   parameters    |     | .
    . | 180 (Session parameters)        +--------+--------+     | .
    . &lt;.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-+              | .
    ..|..........................................|... ..........|..
      |                                          |              |
      |           +------------+                 |              |
      |           |     NE     |                 |              |
      |           |(DQA Client)|                 |              |
      |           +------+-----+                 |              |
      |                  |                       |              |
      |QoS NSLP Reserve  |                       |              |
      +------------------&gt; QAR                   |              |
      | (POLICY_DATA&gt;v   +- - - - -&lt;&lt;AAA&gt;&gt;- - - -&gt;              |
      |  QSPEC)  v   &gt;===&gt;(Destination-Host,     |              |
      |      v   &gt;=======&gt;QoS-Authorization-Data        ++------------+ |
      |      &gt;===========&gt;QoS-Resources)        |Authorize    | |
      |                  |                      |QoS resources| |
      |                  |                      ++------------+ |
      |                  | QAA                   |              |
      |                  &lt;- - - - -&lt;&lt;AAA&gt;&gt;- - - -+              |
      |                  |(Result-Code,          |              |
      |                  |QoS-Resources,         |              |
      |                  |Authorization-Lifetime)        |              |
      |        +---------+--------+              |              |
      |        |Install QoS state1|              |              |
      |        |+ Authorization. session  |              |              |
      |        +---------+--------+              |              |
      |                  |QoS NSLP Reserve                      |
      |                  +---------------..............---------&gt;
      |                  |                                      |
      |                  |                     QoS NSLP Response|
      |QoS NSLP Response &lt;---------------..............---------+
      &lt;------------------+                                      |
      |                  |                        QoS NSLP Query|
      |QoS NSLP Query    &lt;---------------..............---------+
      &lt;------------------+                                      |
      |QoS NSLP Reserve  |                                      |
      +------------------&gt; QAR                   |              |
      |                  +- - - - -&lt;&lt;AAA&gt;&gt;- - - -&gt;              |
      |                  |                   +---+---------+    |
      |                  |                   |Authorize    |    |
      |                  |                   |QoS resources|    |
      |                  | QAA               +---+---------+    |
      |                  &lt;- - - - -&lt;&lt;AAA&gt;&gt;- - - -+              |
      |        +---------+--------+              |              |
      |        |Install QoS state2|                             |
      |        |+ Authorization. session  |                             |
      |        +---------+--------+                             |
      |                  |  QoS NSLP Reserve                    |
      |                  +---------------..............---------&gt;
      |                  |                     QoS NSLP Response|
      |QoS NSLP Response &lt;---------------..............---------+
      &lt;------------------+                                      |
      |                  |                                      |
      /------------------+--Data Flow---------------------------\
      \------------------+--------------------------------------/
      |                  |                                      |


      .-.-.-.-.  SIP signaling
      ---------  QoS NSLP signaling
      - - - - -  Diameter QoS Application messages
      =========  Mapping of objects between QoS and AAA protocol
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;12: QoS Authorization Example - Pull Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<p>The communication starts with SIP signaling between the two end
        points and the SIP server for negotiation and authorization of the
        requested service and its parameters (see <a class='info' href='#fig-example-pull'>Figure&nbsp;12<span> (</span><span class='info'>QoS Authorization Example - Pull Mode</span><span>)</span></a>). As a part of the process, the SIP
        server verifies whether the user at Host A is authorized to use the
        requested service (and potentially the ability to be charged for the
        service usage). Negotiated session parameters are provided to the end
        host.
</p>
<p>Subsequently, Host A initiates a QoS signaling message towards Host
        B. It sends a QoS NSLP Reserve message, in which it includes
        description of the required QoS (QSPEC object) and authorization data
        for negotiated service session (part of the POLICY_DATA object).
        Authorization data includes, as a minimum, the identity of the AE
        (e.g., the SIP server) and an identifier of the application service
        session for which QoS resources are requested.
</p>
<p>A QoS NSLP Reserve message is intercepted and processed by the
        first QoS aware Network Element. The NE uses the Diameter QoS
        application to request authorization for the received QoS reservation
        request. The identity of the AE (in this case the SIP server that is
        co-located with a Diameter server) is put into the Destination-Host
        AVP, any additional session authorization data is encapsulated into
        the QoS-Authorization-Data AVP and the description of the QoS
        resources is included into QoS-Resources AVP. These AVPs are included
        into a QoS Authorization Request message, which is sent to the AE.
</p>
<p>A QAR message will be routed through the AAA network to the AE. The
        AE verifies the requested QoS against the QoS resources negotiated for
        the service session and replies with QoS-Authorization answer (QAA)
        message. It carries the authorization result (Result-Code AVP) and the
        description of the authorized QoS parameters (QoS-Resources AVP), as
        well as duration of the authorization session (Authorization-Lifetime
        AVP).
</p>
<p>The NE interacts with the traffic control function and installs the
        authorized QoS resources and forwards the QoS NSLP Reserve message
        further along the data path. Moreover, the NE may serve as a signaling
        proxy and process the QoS signaling (e.g. initiation or termination of
        QoS signaling) based on the QoS decision received from the authorizing
        entity.
</p>
<a name="example_push"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2"></a><h3>9.2.&nbsp;
Example Call Flow for Push Mode</h3>

<p>This section presents an example of the interaction between the
        end-host and Diameter QoS application entities using Push mode. The
        application layer signaling is, in this example, provided using SIP.
        Signaling for a QoS resource reservation is done using the QoS NSLP.
        The authorization of the QoS reservation request is done by the
        Diameter QoS application (DQA).<br /><hr class="insert" />
<a name="fig-example-push"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  End-Host              NE                  SIP Server  Correspondent
requesting QoS      (DQA Client)           (DQA Server)        Node

      |                  |                          |              |
    ..|....Application layer SIP signaling..........|..............|..
    . | Invite(SDP offer)|                          |              | .
    . +.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.&gt;              | .
    . |  100 Trying      |                          |              | .
    . &lt;.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.+              | .
    . |.............................................|..............| .
      |                  |                +---------+-------------+|
      |                  |                |  Authorize request    ||
      |                  |                |  Keep session data    ||
      |                  |                |/Authorization-time,Session-Id/||
      |                  |                +---------+-------------+|
      |                  |                          |              |
      |                  |&lt;-- - -- - QIR - -- - -- -+              |
      |                  |(Initial Request,Decision |              |
      |                  |(QoS-Resources,Authorization-time)|              |
      |          +-------+---------+                |              |
      |          |Install QoS state|                |              |
      |          |       +         |                |              |
      |          | Authorization. session  |                |              |
      |          | /Authorization-time/    |                |              |
      |          +-------+---------+                |              |
      |                  + - - -- - QIA - - - - - -&gt;|              |
      |                  |     (Result-Code,        |              |
      |                  |      QoS-Resources)      |              |
      |                  |               +----------+------------+ |
      |                  |               | Report for successful | |
      |                  |               |   QoS reservation     | |
      |                  |               |Update of reserved QoS | |
      |                  |               |      resources        | |
      |                  |               +----------+------------+ |
    . |                  |                          | Invite (SDP) | .
    . |                  |                          +-.-.-.....-.-.&gt; .
    . | 180 (Ringing)                               |              | .
    . &lt;.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.&lt;.-.-.-.-.-.-.-+ .
    . |                  |                          |  200 OK (SDP)| .
    . |                  |                          &lt;-.-.-.....-.-.+ .
      |                  |                 +--------+-----------+  |
      |                  |                 |re-Authorize session|  |
      |                  |                 |   parameters       |  |
      |                  |                 +--------+-----------+  |
      |                  &lt;- - - - - - RAR - - - - - +              |
      |        +---------+--------+                 |              |
      |        |Activate QoS state|                 |              |
      |        +---------+--------+                 |              |
      |                  +- - - - - - RAA - - - - - &gt;              |
    . | 200 (SDP answer) |                          |              | .
    . &lt;.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.+              | .
      |                  |                                         |
      /------------------+-----Data Flow---------------------------\
      \------------------+-----------------------------------------/
      |                  |                                         |

      .-.-.-.-.  SIP signaling
      - - - - -  Diameter QoS Application messages
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;13: QoS Authorization Example - Push Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<p>The communication starts with SIP signaling between the two end
        points and the SIP server for negotiation and authorization of the
        requested service and its parameters (see <a class='info' href='#fig-example-push'>Figure&nbsp;13<span> (</span><span class='info'>QoS Authorization Example - Push Mode</span><span>)</span></a>). As a part of the process, the SIP
        server verifies whether the user at Host A is authorized to use the
        requested service (and potentially the ability to be charged for the
        service usage). The DQA server is triggered to authorize the QoS
        request based on session parameters (i.e., SDP offer), initiate a
        Diameter QoS authorization session and install authorized QoS state to
        the Network Element via QIR message.
</p>
<p>The DQA server may obtain the info of peer DQA client from
        pre-configured information or query the DNS based on Host A's identity
        or IP address (In this case a DQA server is co-located with a SIP
        server and a DQA client is co-located with a NE). The identity of
        Network Element is put into the Destination-Host AVP, the description
        of the QoS resources is included into QoS-Resources AVP, as well as
        duration of the authorization session (Authorization-Lifetime AVP).
        The NE interacts with the traffic control function and reserves the
        authorized QoS resources accordingly, for instance, the NE may serve
        as a signaling proxy and process the QoS signaling (e.g. initiation or
        termination of QoS signaling) based on the QoS decision received from
        the authorizing entity.
</p>
<p>With successful QoS authorization, the SDP offer in SIP Invite is
        forwarded to Host B. Host B sends back a 18x (ringing) message towards
        Host A and processes the SDP. Once Host B accepts the call, it sends
        back a 200 OK, in which it includes description of the accepted
        session parameters (i.e. SDP answer).
</p>
<p>The DQA server may verify the accepted QoS against the
        pre-authorized QoS resources, and sends a Diameter RAR message to the
        DQA client in the NE for activating the installed policies and commit
        the resource allocation. With successful QoS enforcement, the 200 OK
        is forwarded towards Host A.
</p>
<p>Note that the examples above show a sender-initiated reservation
        from the end host towards the corresponding node and a
        receiver-initiated reservation from the correspondent node towards the
        end host.
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
IANA Considerations</h3>

<p>This section contains the namespaces that have either been created in
      this specification or had their values assigned to existing namespaces
      managed by IANA.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.1"></a><h3>10.1.&nbsp;
AVP Codes</h3>

<p>IANA is requested to allocate two AVP codes to the following:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Registry:
AVP Code            Attribute Name             Reference
-----------------------------------------------------------
to be assigned   QoS-Authorization-Data                Section 7.2
to be assigned   Bound-Auth-Session-Id         Section 7.2

</pre></div><p>

</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.2"></a><h3>10.2.&nbsp;
AVP Specific Values</h3>

<p>IANA is requested to allocate the following sub-registry
        values.
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Sub-registry: Auth-Application-Id  AVP Values (code 258)
Registry:
AVP Values          Attribute Name             Reference
-------------  -------------------------------------------
to be assigned     DIAMETER-QOS-NOSUPPORT      Section 5
to be assigned     DIAMETER-QOS-SUPPORT        Section 5
</pre></div><p>

</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Sub-registry: Acct-Application-Id   AVP Values (code 259)
Registry:
AVP Values          Attribute Name             Reference
-------------  -------------------------------------------
to be assigned     DIAMETER-QOS-NOSUPPORT      Section 5
to be assigned     DIAMETER-QOS-SUPPORT        Section 5
</pre></div><p>

</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.3"></a><h3>10.3.&nbsp;
AVP Flags</h3>

<p>There are no new AVP flags defined for either the
        QoS-Authorization-Data AVP or the Bound-Ath-Session-ID AVP.
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.4"></a><h3>10.4.&nbsp;
Application IDs</h3>

<p>IANA is requested to allocate the following application ID using
        the next value from the 7-16777215 range. </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Registry:
ID values            Name                        Reference
-----------------------------------------------------------
to be assigned      Diameter QoS application      Section 5
</pre></div><p>

</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.5"></a><h3>10.5.&nbsp;
Command Codes</h3>

<p>IANA is requested to allocate command code values for the following
        from the range 289-299.
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Registry:
Code Value             Name                     Reference
-----------------------------------------------------------
to be assigned      QoS-Authorization-Request (QAR)     Section 5.1
to be assigned      QoS-Authorization-Answer  (QAA)     Section 5.2
to be assigned      QoS-Install-Request (QIR)   Section 5.3
to be assigned      QoS-Install-Answer (QIA)    Section 5.4
</pre></div><p>

</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Security Considerations</h3>

<p>This document describes a mechanism for performing authorization of a
      QoS reservation at a third party entity. Therefore, sufficient
      information needs to be made available to the Authorizing Entity to can
      make such an authorization decision. Information may come from various
      sources, including the application layer signaling, the Diameter
      protocol (with its security mechanisms), from policy information stored
      available with a AAA server and from a QoS signaling protocol.
</p>
<p>Below there is a discussion about considerations for the Diameter QoS
      interaction between an Authorizing Entity and a Network Element.
      Security between the Authorizing Entity and the Network Element has a
      number of components: authentication, authorization, integrity and
      confidentiality.
</p>
<p>Authentication refers to confirming the identity of an originator for
      all datagrams received from the originator. Lack of authentication of
      Diameter messages between the Authorizing Entity and the Network Element
      can seriously jeopardize the fundamental service rendered by the Network
      Element. A consequence of not authenticating the message sender by the
      Network Element would be that an attacker could spoof the identity of a
      "legitimate" Authorizing Entity in order to allocate resources, change
      resource assignments or free resources. The adversary can also
      manipulate the state at the Network Element in such a way that it leads
      to a denial of service attack by, for example, setting the allowed
      bandwidth to zero or allocating the entire bandwidth available to a
      single flow.
</p>
<p>A consequence of not authenticating the Network Element to an
      Authorizing Entity is that an attacker could impact the policy based
      admission control procedure run by the Authorizing Entity to provide a
      wrong view of the resources used in the network. Failing to provide the
      required credentials should be subject to logging.
</p>
<p>Authorization refers to whether a particular Authorizing Entity is
      authorized to signal a Network Element with requests for one or more
      applications, adhering to a certain policy profile. Failing the
      authorization process might indicate a resource theft attempt or failure
      due to administrative and/or credential deficiencies. In either case,
      the Network Element should take the proper measures to log such
      attempts.
</p>
<p>Integrity is required to ensure that a Diameter message has not been
      maliciously altered. The result of a lack of data integrity enforcement
      in an untrusted environment could be that an imposter will alter the
      messages exchanged between a Network Entity and an Authorizing Entity
      potentially causing a denial of service.
</p>
<p>Confidentiality protection of Diameter messages ensures that the
      signaling data is accessible only to the authorized entities. When
      signaling messages from the Application Server, via the Authorizing
      Entity towards the Network Element traverse untrusted networks, lack of
      confidentiality will allow eavesdropping and traffic analysis.
      Additionally, Diamater QoS messages may carry authorization tokens that
      require confidentiality protection.
</p>
<p>Lastly, there can be security vulnerability to the applications
      traversing a Network Element when a resource on a Network Element is
      controlled by multiple Authorizing Entities. The operation of a Network
      Element may be disrupted due to conflicting directives from multiple
      Authorizing Entities. Care must be taken in deployment to ensure that
      Network Elements are impacted by misconfiguration.
</p>
<p>Diameter offers security mechanisms to deal with the functionality
      demanded in the paragraphs above. In particular, Diameter offers
      communication security between neighboring Diameter peers using
      Transport Layer Security (TLS) or IPsec. Authorization capabilities are
      application specific and part of the overal implementation.
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
Acknowledgements</h3>

<p>The authors would like to thank John Loughney and Allison Mankin for
      their input to this document. In September 2005 Robert Hancock, Jukka
      Manner, Cornelia Kappler, Xiaoming Fu, Georgios Karagiannis and Elwyn
      Davies provided a detailed review. Robert also provided us with good
      feedback earlier in 2005. Jerry Ash provided us review comments late
      2005/early 2006. Rajith R provided some inputs to the document early
      2007
</p>
<a name="contributors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
Contributors</h3>

<p>The authors would like to thank Tseno Tsenov and Frank Alfano for
      starting the Diameter Quality of Service work within the IETF, for your
      significant draft contributions and for being the driving force for the
      first few draft versions.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.14"></a><h3>14.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>14.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-dime-qos-attributes">[I-D.ietf-dime-qos-attributes]</a></td>
<td class="author-text">Korhonen, J., Tschofenig, H., Arumaithurai, M., Jones, M., and A. Lior, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-qos-attributes-15.txt">Traffic Classification and Quality of Service Attributes for Diameter</a>,&rdquo; draft-ietf-dime-qos-attributes-15 (work in progress), December&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-qos-attributes-15.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-dime-qos-parameters">[I-D.ietf-dime-qos-parameters]</a></td>
<td class="author-text">Korhonen, J., Tschofenig, H., and E. Davies, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-qos-parameters-11.txt">Quality of Service Parameters for Usage with Diameter</a>,&rdquo; draft-ietf-dime-qos-parameters-11 (work in progress), May&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-qos-parameters-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3588">[RFC3588]</a></td>
<td class="author-text">Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;<a href="http://tools.ietf.org/html/rfc3588">Diameter Base Protocol</a>,&rdquo; RFC&nbsp;3588, September&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3588.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4005">[RFC4005]</a></td>
<td class="author-text">Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;<a href="http://tools.ietf.org/html/rfc4005">Diameter Network Access Server Application</a>,&rdquo; RFC&nbsp;4005, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4005.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4234">[RFC4234]</a></td>
<td class="author-text"><a href="mailto:dcrocker@bbiw.net">Crocker, D., Ed.</a> and <a href="mailto:paul.overell@thus.net">P. Overell</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc4234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; RFC&nbsp;4234, October&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4234.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc4234.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc4234.xml">XML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>14.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-nsis-ntlp">[I-D.ietf-nsis-ntlp]</a></td>
<td class="author-text">Schulzrinne, H. and M. Stiemerling, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-ntlp-20.txt">GIST: General Internet Signalling Transport</a>,&rdquo; draft-ietf-nsis-ntlp-20 (work in progress), June&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-ntlp-20.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-nsis-qos-nslp">[I-D.ietf-nsis-qos-nslp]</a></td>
<td class="author-text">Manner, J., Karagiannis, G., and A. McDonald, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-qos-nslp-18.txt">NSLP for Quality-of-Service Signaling</a>,&rdquo; draft-ietf-nsis-qos-nslp-18 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-qos-nslp-18.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2205">[RFC2205]</a></td>
<td class="author-text"><a href="mailto:Braden@ISI.EDU">Braden, B.</a>, <a href="mailto:lixia@cs.ucla.edu">Zhang, L.</a>, <a href="mailto:Berson@ISI.EDU">Berson, S.</a>, <a href="mailto:Herzog@WATSON.IBM.COM">Herzog, S.</a>, and <a href="mailto:jamin@EECS.UMICH.EDU">S. Jamin</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2205">Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification</a>,&rdquo; RFC&nbsp;2205, September&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2205.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2205.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2205.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2211">[RFC2211]</a></td>
<td class="author-text"><a href="mailto:jtw@lcs.mit.edu">Wroclawski, J.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2211">Specification of the Controlled-Load Network Element Service</a>,&rdquo; RFC&nbsp;2211, September&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2211.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2211.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2211.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2212">[RFC2212]</a></td>
<td class="author-text"><a href="mailto:shenker@parc.xerox.com">Shenker, S.</a>, <a href="mailto:craig@bbn.com">Partridge, C.</a>, and <a href="mailto:guerin@watson.ibm.com">R. Guerin</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2212">Specification of Guaranteed Quality of Service</a>,&rdquo; RFC&nbsp;2212, September&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2212.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2212.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2212.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2474">[RFC2474]</a></td>
<td class="author-text"><a href="mailto:kmn@cisco.com">Nichols, K.</a>, <a href="mailto:slblake@torrentnet.com">Blake, S.</a>, <a href="mailto:fred@cisco.com">Baker, F.</a>, and <a href="mailto:black_david@emc.com">D. Black</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2474">Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers</a>,&rdquo; RFC&nbsp;2474, December&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2474.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2474.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2474.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2753">[RFC2753]</a></td>
<td class="author-text"><a href="mailto:raj.yavatkar@intel.com">Yavatkar, R.</a>, <a href="mailto:dimitris@watson.ibm.com">Pendarakis, D.</a>, and <a href="mailto:guerin@ee.upenn.edu">R. Guerin</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2753">A Framework for Policy-based Admission Control</a>,&rdquo; RFC&nbsp;2753, January&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2753.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2865">[RFC2865]</a></td>
<td class="author-text">Rigney, C., Willens, S., Rubens, A., and W. Simpson, &ldquo;<a href="http://tools.ietf.org/html/rfc2865">Remote Authentication Dial In User Service (RADIUS)</a>,&rdquo; RFC&nbsp;2865, June&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2865.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3313">[RFC3313]</a></td>
<td class="author-text">Marshall, W., &ldquo;<a href="http://tools.ietf.org/html/rfc3313">Private Session Initiation Protocol (SIP) Extensions for Media Authorization</a>,&rdquo; RFC&nbsp;3313, January&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3313.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3520">[RFC3520]</a></td>
<td class="author-text">Hamer, L-N., Gage, B., Kosinski, B., and H. Shieh, &ldquo;<a href="http://tools.ietf.org/html/rfc3520">Session Authorization Policy Element</a>,&rdquo; RFC&nbsp;3520, April&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3520.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3521">[RFC3521]</a></td>
<td class="author-text">Hamer, L-N., Gage, B., and H. Shieh, &ldquo;<a href="http://tools.ietf.org/html/rfc3521">Framework for Session Set-up with Media Authorization</a>,&rdquo; RFC&nbsp;3521, April&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3521.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4282">[RFC4282]</a></td>
<td class="author-text">Aboba, B., Beadles, M., Arkko, J., and P. Eronen, &ldquo;<a href="http://tools.ietf.org/html/rfc4282">The Network Access Identifier</a>,&rdquo; RFC&nbsp;4282, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4282.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4346">[RFC4346]</a></td>
<td class="author-text">Dierks, T. and E. Rescorla, &ldquo;<a href="http://tools.ietf.org/html/rfc4346">The Transport Layer Security (TLS) Protocol Version 1.1</a>,&rdquo; RFC&nbsp;4346, April&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4346.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4566">[RFC4566]</a></td>
<td class="author-text">Handley, M., Jacobson, V., and C. Perkins, &ldquo;<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>,&rdquo; RFC&nbsp;4566, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4566.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dong Sun (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alcatel-Lucent</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">600 Mountain Ave</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Murray Hill, NJ  07974</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 908 582 2617</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:dongsun@alcatel-lucent.com">dongsun@alcatel-lucent.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Peter J. McCann</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Motorola Labs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1301 E. Algonquin Rd</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Schaumburg, IL  60196</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 847 576 3440</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:pete.mccann@motorola.com">pete.mccann@motorola.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hannes Tschofenig</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Linnoitustie 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Espoo  02600</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 (50) 4871445</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Hannes.Tschofenig@gmx.net">Hannes.Tschofenig@gmx.net</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.tschofenig.priv.at">http://www.tschofenig.priv.at</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tina Tsou</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Huawei</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Shenzhen,   </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.R.C</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:tena@huawei.com">tena@huawei.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Avri Doria</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lulea University
      of Technology</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Arbetsvetenskap</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lulea,   SE-97187</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sweden</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:avri@ltu.se">avri@ltu.se</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Glen Zorn (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Aruba Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1322 Crossman Avenue</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sunnyvale, CA  94089-1113</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:gwz@arubanetworks.com">gwz@arubanetworks.com</a></td></tr>
</table>
</body></html>
