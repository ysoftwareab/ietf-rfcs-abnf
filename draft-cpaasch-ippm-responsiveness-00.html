<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Responsiveness under Working Conditions</title>
<meta content="Christoph Paasch" name="author">
<meta content="Randall Meyer" name="author">
<meta content="Stuart Cheshire" name="author">
<meta content="Omer Shapira" name="author">
<meta content="
       Bufferbloat has been a long-standing problem on the Internet with more than a
decade of work on standardizing technical solutions, implementations and
testing. However, to this date, bufferbloat is still a very common problem for
the end-users. Everyone &quot;knows&quot; that it is &quot;normal&quot; for a video conference to
have problems when somebody else on the same home-network is watching a 4K
movie. 
       The reason for this problem is not the lack of technical solutions, but
rather a lack of awareness of the problem-space, and a lack of tooling to
accurately measure the problem. We believe that exposing the problem of
bufferbloat to the end-user by measuring the end-users' experience at a high
level will help to create the necessary awareness. 
       This document is a first attempt at specifying
a measurement methodology to evaluate bufferbloat the way common users are
experiencing it today, using today's most frequently used protocols and
mechanisms to accurately measure the user-experience. We also provide a way to
express the bufferbloat as a measure of &quot;Round-trips per minute&quot; (RPM) to have
a more intuitive way for the users to understand the notion of bufferbloat. 
    " name="description">
<meta content="xml2rfc 3.9.1" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-cpaasch-ippm-responsiveness-00" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.9.1
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.1
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.3.1
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 57.4.0
    six 1.16.0
-->
<link href="/tmp/draft-cpaasch-ippm-responsiveness-p5tv8qm0.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Responsiveness under Working Conditions</td>
<td class="right">August 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Paasch, et al.</td>
<td class="center">Expires 14 February 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">IP Performance Measurement</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-cpaasch-ippm-responsiveness-00</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-08-13" class="published">13 August 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Experimental</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-02-14">14 February 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">C. Paasch</div>
<div class="org">Apple Inc.</div>
</div>
<div class="author">
      <div class="author-name">R. Meyer</div>
<div class="org">Apple Inc.</div>
</div>
<div class="author">
      <div class="author-name">S. Cheshire</div>
<div class="org">Apple Inc.</div>
</div>
<div class="author">
      <div class="author-name">O. Shapira</div>
<div class="org">Apple Inc.</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Responsiveness under Working Conditions</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">Bufferbloat has been a long-standing problem on the Internet with more than a
decade of work on standardizing technical solutions, implementations and
testing. However, to this date, bufferbloat is still a very common problem for
the end-users. Everyone "knows" that it is "normal" for a video conference to
have problems when somebody else on the same home-network is watching a 4K
movie.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">The reason for this problem is not the lack of technical solutions, but
rather a lack of awareness of the problem-space, and a lack of tooling to
accurately measure the problem. We believe that exposing the problem of
bufferbloat to the end-user by measuring the end-users' experience at a high
level will help to create the necessary awareness.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
<p id="section-abstract-3">This document is a first attempt at specifying
a measurement methodology to evaluate bufferbloat the way common users are
experiencing it today, using today's most frequently used protocols and
mechanisms to accurately measure the user-experience. We also provide a way to
express the bufferbloat as a measure of "Round-trips per minute" (RPM) to have
a more intuitive way for the users to understand the notion of bufferbloat.<a href="#section-abstract-3" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo-3">
<a href="#name-status-of-this-memo-3" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 14 February 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice-3">
<a href="#name-copyright-notice-3" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents-3">
<a href="#name-table-of-contents-3" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty ulBare compact">
<li class="toc ulEmpty ulBare compact" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction-3" class="xref">Introduction</a></p>
</li>
          <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-measuring-is-hard-3" class="xref">Measuring is hard</a></p>
</li>
          <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="xref">3</a>.  <a href="#name-goals-3" class="xref">Goals</a></p>
</li>
          <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-measuring-responsiveness-5" class="xref">Measuring Responsiveness</a></p>
<ul class="toc ulEmpty compact ulBare">
<li class="toc ulEmpty compact ulBare" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-working-conditions-3" class="xref">Working Conditions</a></p>
<ul class="toc ulEmpty ulBare compact">
<li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a href="#section-4.1.1" class="xref">4.1.1</a>.  <a href="#name-parallel-vs-sequential-uplink" class="xref">Parallel vs Sequential Uplink and Downlink</a></p>
</li>
                  <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.1.2.2">
                    <p id="section-toc.1-1.4.2.1.2.2.1"><a href="#section-4.1.2" class="xref">4.1.2</a>.  <a href="#name-from-single-flow-to-multi-flo" class="xref">From single-flow to multi-flow</a></p>
</li>
                  <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.1.2.3">
                    <p id="section-toc.1-1.4.2.1.2.3.1"><a href="#section-4.1.3" class="xref">4.1.3</a>.  <a href="#name-reaching-saturation-3" class="xref">Reaching saturation</a></p>
</li>
                  <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.1.2.4">
                    <p id="section-toc.1-1.4.2.1.2.4.1"><a href="#section-4.1.4" class="xref">4.1.4</a>.  <a href="#name-final-algorithm-3" class="xref">Final algorithm</a></p>
</li>
                </ul>
</li>
              <li class="toc ulEmpty compact ulBare" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-measuring-responsiveness-6" class="xref">Measuring Responsiveness</a></p>
<ul class="toc ulEmpty ulBare compact">
<li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a href="#section-4.2.1" class="xref">4.2.1</a>.  <a href="#name-aggregating-round-trips-per-m" class="xref">Aggregating Round-trips per Minute</a></p>
</li>
                  <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a href="#section-4.2.2" class="xref">4.2.2</a>.  <a href="#name-statistical-confidence-3" class="xref">Statistical Confidence</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-protocol-specification-3" class="xref">Protocol Specification</a></p>
</li>
          <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-security-considerations-3" class="xref">Security Considerations</a></p>
</li>
          <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-iana-considerations-3" class="xref">IANA Considerations</a></p>
</li>
          <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-acknowledgments-3" class="xref">Acknowledgments</a></p>
</li>
          <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-informative-references-3" class="xref">Informative References</a></p>
</li>
          <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses-3" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction-3">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction-3" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">For many years, bufferbloat has been known as an unfortunately common issue in
todays networks <span>[<a href="#Bufferbloat" class="xref">Bufferbloat</a>]</span>. Solutions like FQ-codel <span>[<a href="#RFC8289" class="xref">RFC8289</a>]</span> or PIE
<span>[<a href="#RFC8033" class="xref">RFC8033</a>]</span> have been standardized and are
to some extend widely implemented. Nevertheless, users still suffer from bufferbloat.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">The way bufferbloat impacts the user-experience is very subtle. Whenever a network
is actively being used at its full capacity, buffers are filling up and create
latency for the traffic. These moments of a full buffer may be very brief during
a medium-sized file-transfer, like an email-attachment. They create short-lived bursts
of latency-spikes that users may experience. An example of this is lag occuring
during a video-conference.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">While on one side, bufferbloat disrupts the user-experience, its short-lived nature
makes it hard to narrow down the problem and make the user sensible to it.
Lack of well-known measurement tools and popular measurement platforms add to
the "obscure" nature of the bufferbloat problem.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">We believe that it is necessary to create a standardized way for measuring the
extend of bufferbloat in a network and express it to the user in a user-friendly way.
This should help existing measurement tools to add a bufferbloat measurement to
their set of metrics. It will also allow to raise the awareness to the problem and
shift the focus away from purely quantifying network quality through throughput
and idle latency.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">In this document, we describe a methodology for measuring bufferbloat and its impact on
the user-experience. We create the term "Responsiveness under working conditions"
to make it more user-accessible. We focus on using protocols that are most commonly
used in end-user use-cases, as performance enhancing proxies and traffic classification
for those protocols is very common. It is thus very important to use those protocols
for the measurements to avoid focusing on use-cases that are not actually affecting the end-user.
Finally, we propose to use "round-trips per minute" as a metric to express the
extend of bufferbloat.<a href="#section-1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="measuring-is-hard">
<section id="section-2">
      <h2 id="name-measuring-is-hard-3">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-measuring-is-hard-3" class="section-name selfRef">Measuring is hard</a>
      </h2>
<p id="section-2-1">There are several challenges around measuring bufferbloat accurately on the
Internet. These challenges are due to different factors. Namely the diverse and
dynamic nature of the Internet, the large problem space, and the
reproducibility of the measurement.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">It is well-known that transparent TCP proxies are widely deployed on port 443
and/or port 80, while less common on other ports. Thus, choice of the
port-number to measure bufferbloat has a significant influence on the result.
Other factors are the protocols being used. TCP and UDP traffic may take a
largely different path on the Internet and be subject to entirely different QoS
constraints. Again, bufferbloat measured on UDP vs TCP may be entirely
different.  Another aspect is the queuing configuration on the bottleneck. It
may be that fair-queuing is configured which may "hide" queuing latency that
affects other flows.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">The Internet is not just diverse; it is changing all the time. Since its
inception as a network that can adapt to major outages, the Internet has
demonstrated exceptional ability to survive disruptions. At any given moment,
the Internet routing is changing to rebalance the traffic, so that a particular
local outage will not have a global effect. The cost of such resiliency is the
fact that the routing is constantly changing. Daily fluctuations in the demand
for the traffic make the bottlenecks ebb and flow. Because of that, measuring
the responsiveness during the peak hours is likely to encounter a different
bottleneck queue compared to off-peak measurement. It seems that it's best to
avoid extending the duration of the test beyond what's needed.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">The problem space around the bufferbloat is huge. Traditionally, one thinks of
bufferbloat happening on the routers and switches of the Internet. Thus, simply
measuring bufferbloat at the transport layer would be sufficient. However, the
networking stacks of the clients and servers can also experience huge amounts
of bufferbloat. Data sitting in TCP sockets or waiting in the application to be
scheduled for sending causes artificial latency, which affects user-experience
the same way the "traditional" bufferbloat does.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">Finally, measuring bufferbloat requires us to fill the buffers of the bottleneck
and when buffer occupancy is at its peak, the latency measurement needs to be
done. Achieving this in a reliable and reproducible way is not easy. First, one
needs to ensure that buffers are actually full for a sustained period of time
to allow for repeated latency measurements in this particular state. Filling of
the buffers should happen with standard transport layer traffic - typical for
the end-user's use of the network - and thus is subject to the transport's
congestion control, implying rate-reduction which reduces the buffering in the
network. The amount of bufferbloat is thus constantly fluctuating and a
reliable measurement requires to overcome these fluctuations.<a href="#section-2-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="goals">
<section id="section-3">
      <h2 id="name-goals-3">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-goals-3" class="section-name selfRef">Goals</a>
      </h2>
<p id="section-3-1">There are many different ways on how one can measure bufferbloat. The focus in this document is to capture how bufferbloat affects the user-experience and to provide this as a measurement-tool to non-expert users.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">The focus on end-user experience means a number of things:<a href="#section-3-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3-3">
<li id="section-3-3.1">
          <p id="section-3-3.1.1">Today's user-facing Internet traffic is primarily using HTTP/2 over TLS.
Thus, the measurement should use that protocol.<a href="#section-3-3.1.1" class="pilcrow">¶</a></p>
<p id="section-3-3.1.2">
As a side-note: other types of traffic are gaining in popularity (HTTP/3)
and/or are already being used widely (RTP). Due to traffic prioritization
and QoS rules on the Internet, each of these may experience completely
different path-characteristics and should also be measured separately.<a href="#section-3-3.1.2" class="pilcrow">¶</a></p>
</li>
        <li id="section-3-3.2">The Internet is marked by the deployment of countless middleboxes like
transparent TCP proxies or traffic prioritization for certain types of
traffic. The measurement methodology should allow us to explore all of these
as they affect the user-experience. This means, each stage of a user's
interaction with the Internet (DNS-request, TCP-handshake, TLS-handshake,
and request/response) needs to be evaluated.<a href="#section-3-3.2" class="pilcrow">¶</a>
</li>
        <li id="section-3-3.3">User-friendliness of the result means that it should be expressed in a
non-technical way to the user. Users commonly look for a single "score" of
their performance. This enables the goal of raising awareness to a large
user-base on the problem of bufferbloat.<a href="#section-3-3.3" class="pilcrow">¶</a>
</li>
        <li id="section-3-3.4">Finally, in order for this measurement to be user-friendly to a wide
audience it is important that such a measurement finishes within a short
time-frame and short being anything below 20 seconds.<a href="#section-3-3.4" class="pilcrow">¶</a>
</li>
      </ol>
</section>
</div>
<div id="measuring-responsiveness">
<section id="section-4">
      <h2 id="name-measuring-responsiveness-5">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-measuring-responsiveness-5" class="section-name selfRef">Measuring Responsiveness</a>
      </h2>
<p id="section-4-1">The ability to reliably measure the responsiveness under typical working
conditions is predicated by the ability to reliably put the network in a state
representative of the said conditions. Once the network has reached the
required state, its responsiveness can be measured. The following explains how
the former and the latter are achieved.<a href="#section-4-1" class="pilcrow">¶</a></p>
<div id="working-conditions">
<section id="section-4.1">
        <h3 id="name-working-conditions-3">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-working-conditions-3" class="section-name selfRef">Working Conditions</a>
        </h3>
<p id="section-4.1-1">For the purpose of this methodology, "typical working conditions" represent a
state of the network, in which the bottleneck node is experiencing ingress and
egress flows that are similar to those when used by humans in the typical
day-to-day pattern.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">While any network can be put momentarily into working condition by the means of
a single HTTP transaction, taking measurements requires maintaining such
conditions over sufficient time.  Thus, measuring the network responsiveness in
a consistent way depends on our ability to recreate typical working conditions
on demand. The most reliable way to achieve this is by creating multiple large
bulk data-transfers in either downstream or upstream direction. Similar to
conventional speed-test applications that also create a varying number of
streams to measure throughput. Working-conditions does the same.  It also
requires a way to detect when the network is in a persistent working condition,
called "saturation". This can be achieved by monitoring the instantaneous
goodput over time. When the goodput stops increasing, it means that a
saturation has been reached and that responsiveness can be measured.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1-3">Desired properties of the "working condition actuation"<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-4.1">Should not waste traffic, since the user may be paying for it<a href="#section-4.1-4.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.1-4.2">Should finish within a short time-frame to avoid impacting other users on the
same network and/or experience varying conditions<a href="#section-4.1-4.2" class="pilcrow">¶</a>
</li>
        </ul>
<div id="parallel-vs-sequential-uplink-and-downlink">
<section id="section-4.1.1">
          <h4 id="name-parallel-vs-sequential-uplink">
<a href="#section-4.1.1" class="section-number selfRef">4.1.1. </a><a href="#name-parallel-vs-sequential-uplink" class="section-name selfRef">Parallel vs Sequential Uplink and Downlink</a>
          </h4>
<p id="section-4.1.1-1">From an end-user perspective, bufferbloat can happen in both the upstream and
the downstream direction. Both paths can be hugely different due to access-link
conditions (e.g., 5G downstream and LTE upstream) or the routing in the ISPs.
Users sending data to an Internet service will fill the bottleneck on the
upstream path to the server and thus expose a potential for bufferbloat to
happen at this bottleneck. On the downlink direction any download from an
Internet service will encounter a bottleneck and thus exposes another potential
for bufferbloat. Thus, when measuring responsiveness under working conditions
it is important to consider both, the upstream and the downstream bufferbloat.
This opens the door to measure both uplink and downlink in parallel.<a href="#section-4.1.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1.1-2">Measuring in parallel allows to achieve higher overall confidence in the
results within the time constraint of the entire test. For example, if the
overall time constraint for the test is 20 seconds, running uplink and downlink
sequentially would allow for only 10 seconds of test per direction, while
parallel measurement will allow for 20 seconds of testing in both directions.<a href="#section-4.1.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1.1-3">However, a number caveats come with measuring in parallel:
- Half-duplex links may not expose uplink and downlink bufferbloat: A
  half-duplex link may not allow during parallel measurement to saturate both
  the uplink and the downlink direction. Thus, bufferbloat in either of the
  directions may not be exposed during parallel measurement.
- Debuggability of the results becomes more obscure: During parallel
  measurement it is impossible to differentiate on whether the bufferbloat
  happens in the uplink or the downlink direction.<a href="#section-4.1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="from-single-flow-to-multi-flow">
<section id="section-4.1.2">
          <h4 id="name-from-single-flow-to-multi-flo">
<a href="#section-4.1.2" class="section-number selfRef">4.1.2. </a><a href="#name-from-single-flow-to-multi-flo" class="section-name selfRef">From single-flow to multi-flow</a>
          </h4>
<p id="section-4.1.2-1">As described in RFC 6349, a single TCP connection may not be sufficient to
saturate a path between a client and a server. On a high-BDP network,
traditional TCP window-size constraints of 4MB are often not sufficient to fill
the pipe. Additionally, traditional loss-based TCP congestion control
algorithms aggressively reacts to packet-loss by reducing the congestion
window. This reaction will reduce the queuing in the network, and thus
"artificially" make the bufferbloat appear lesser.<a href="#section-4.1.2-1" class="pilcrow">¶</a></p>
<p id="section-4.1.2-2">The goal of the measurement is to keep the network as busy as possible in a
sustained and persistent way. Thus, using multiple TCP connections is needed
for a sustained bufferbloat by gradually adding TCP flows until saturation is
needed.<a href="#section-4.1.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="reaching-saturation">
<section id="section-4.1.3">
          <h4 id="name-reaching-saturation-3">
<a href="#section-4.1.3" class="section-number selfRef">4.1.3. </a><a href="#name-reaching-saturation-3" class="section-name selfRef">Reaching saturation</a>
          </h4>
<p id="section-4.1.3-1">It is best to detect when saturation has been reached so that the measurement
of responsiveness can start with the confidence that the network is
sufficiently saturated. For this, we first need to define what "saturation"
means. Saturation means not only that the load-bearing connections are
utilizing all the capacity, but also that the buffers are completely filled.
Thus, this depends highly on the congestion control that is being deployed on
the sender-side. Congestion control algorithms like BBR may reach high
throughput without causing bufferbloat. (because the bandwidth-detection
portion of BBR is effectively seeking the bottleneck capacity)<a href="#section-4.1.3-1" class="pilcrow">¶</a></p>
<p id="section-4.1.3-2">It is advised to rather use loss-based congestion controls like Cubic to
"reliably" ensure that the buffers are filled.<a href="#section-4.1.3-2" class="pilcrow">¶</a></p>
<p id="section-4.1.3-3">An indication of saturation is when the observed goodput is no more increasing
even as connections are being added to the pool of load-generating connections.
An additional indication is the presence of packet-loss or ECN-marks signaling
a congestion or even a full buffer of the bottleneck link.<a href="#section-4.1.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="final-algorithm">
<section id="section-4.1.4">
          <h4 id="name-final-algorithm-3">
<a href="#section-4.1.4" class="section-number selfRef">4.1.4. </a><a href="#name-final-algorithm-3" class="section-name selfRef">Final algorithm</a>
          </h4>
<p id="section-4.1.4-1">The following is a proposal for an algorithm to reach saturation of a network
by using HTTP/2 upload (POST) or download (GET) requests of infinitely large
files. The algorithm is the same for upload and download and thus we will use
the same term "load-bearing connection" for either of them.<a href="#section-4.1.4-1" class="pilcrow">¶</a></p>
<p id="section-4.1.4-2">The algorithm takes into account that throughput gradually increases as TCP
connections go through their TCP slow-start phase. Throughput-increase
eventually stalls for a constant number of TCP-connections - usually due to
receive-window limitations. At that point, the only means to further increase
throughput is by adding more TCP connections to the pool of load-bearing
connections. This will then either result in a further increase in throughput,
or throughput will remain stable. In the latter case, this means that
saturation has been reached and - more importantly - is stable.<a href="#section-4.1.4-2" class="pilcrow">¶</a></p>
<p id="section-4.1.4-3">In detail, the steps of the algorithm are the following<a href="#section-4.1.4-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.4-4.1">Create 4 load-bearing connections<a href="#section-4.1.4-4.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-4.1.4-4.2">
              <p id="section-4.1.4-4.2.1">At each 1-second interval:<a href="#section-4.1.4-4.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.4-4.2.2.1">Compute "instantaneous aggregate" goodput which is the number of bytes received within the last second.<a href="#section-4.1.4-4.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.1.4-4.2.2.2">Compute moving average as the last 4 "instantaneous aggregate goodput" measurements<a href="#section-4.1.4-4.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.1.4-4.2.2.3">
                  <p id="section-4.1.4-4.2.2.3.1">If moving average &gt; "previous" moving average + 5%:<a href="#section-4.1.4-4.2.2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.4-4.2.2.3.2.1">We did not yet reach saturation, but if we haven't added more flows for 4 seconds, add 4 more flows to the mix.<a href="#section-4.1.4-4.2.2.3.2.1" class="pilcrow">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-4.1.4-4.2.2.4">
                  <p id="section-4.1.4-4.2.2.4.1">Else, we reached saturation for the current flow-count.<a href="#section-4.1.4-4.2.2.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.4-4.2.2.4.2.1">If we added flows and for 4 seconds the moving average throughput did not change: We reached stable saturation<a href="#section-4.1.4-4.2.2.4.2.1" class="pilcrow">¶</a>
</li>
                    <li class="normal" id="section-4.1.4-4.2.2.4.2.2">Else, add more flows<a href="#section-4.1.4-4.2.2.4.2.2" class="pilcrow">¶</a>
</li>
                  </ul>
</li>
              </ul>
</li>
          </ul>
<p id="section-4.1.4-5">Note: It may be tempting to steer the algorithm through an initial base-RTT
measurement and adjust the intervals as a function of the RTT. However,
experiments have shown that this makes the saturation-detection extremely
unstable in low-RTT environments. When the "unloaded" RTT is in the
single-digit milli-second range, while under load the network's RTT increases
to more than a hundred milliseconds, the intervals become much too low to
accurately drive the algorithm.<a href="#section-4.1.4-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="measuring-responsiveness-1">
<section id="section-4.2">
        <h3 id="name-measuring-responsiveness-6">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-measuring-responsiveness-6" class="section-name selfRef">Measuring Responsiveness</a>
        </h3>
<p id="section-4.2-1">Once the network is in consistent working conditions, the network's
responsiveness can be measured. As the focus of our responsiveness metric is to
evaluate a real user-experience we focus on measuring the different stages of a
separate network transaction as well as measuring on the load-bearing
connections themselves.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">Two aspects are being measured with this approach :<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.2-3">
<li id="section-4.2-3.1">How the network handles new connections and their different stages
(DNS-request, TCP-handshake, TLS-handshake, HTTP/2 request/response) while
being under working conditions. E.g., the presence of fair-queueing on the
bottleneck will drastically improve the experience on these connections.<a href="#section-4.2-3.1" class="pilcrow">¶</a>
</li>
          <li id="section-4.2-3.2">How the network and the client/server networking stack handles the latency
on the load-bearing connections themselves. E.g., Smart queuing techniques
on the bottleneck will allow to keep the latency within a reasonable limit
in the network and buffer-reducing techniques like TCP_NOTSENT_LOWAT makes
sure the client and server TCP-stack is not a source of significant latency.<a href="#section-4.2-3.2" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-4.2-4">To measure the former, we send a DNS-request, establish a TCP-connection on
port 443, establish a TLS-context using TLS1.3 and send an HTTP2 GET request
for an object of a single byte large. This measurement will be repeated
multiple times for accuracy. Each of these stages allows to collect a single
latency measurement that can then be factored into the responsiveness
computation.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
<p id="section-4.2-5">To measure the latter, on the load-bearing connections (that uses HTTP/2) a GET
request is multiplexed. This GET request is for a 1-byte object. This allows to
measure the end-to-end latency on the connections that are using the network at
full speed.<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<div id="aggregating-round-trips-per-minute">
<section id="section-4.2.1">
          <h4 id="name-aggregating-round-trips-per-m">
<a href="#section-4.2.1" class="section-number selfRef">4.2.1. </a><a href="#name-aggregating-round-trips-per-m" class="section-name selfRef">Aggregating Round-trips per Minute</a>
          </h4>
<p id="section-4.2.1-1">The above described method will produce 5 sets of measurement results,
namely: DNS-handshake, TCP-handshake, TLS handshake, HTTP/2 request/response on
separate connections, HTTP/2 request/response on load-bearing connections. Each
of these sets of numbers focuses on a specific aspect of a user's interaction
with the network. In order to expose a single "Responsiveness" number to the
user the weighting among these sets needs to be decided. In our first iteration
we give an equal weight to each of these measurements.<a href="#section-4.2.1-1" class="pilcrow">¶</a></p>
<p id="section-4.2.1-2">Finally, the resulting latency needs to be exposed to the users. Users have
been trained to accept metrics that have a notion of "The higher the better".
Latency measuring in units of seconds however is "the lower the better". Thus,
converting the latency measurement to a frequency allows using the familiar
notion of "The higher the better". The term frequency has a very technical
connotation. What we are effectively measuring is the number of round-trips
from the user's device to the server endpoint that can be done within a unit of
time. This leads to the notion of Round-trips per Minute. It has the advantage
that the range of values is within a reasonable 50 to 3000 Round-trips per
Minute. It can also be abbreviated to "RPM" which is a wink to the "revolutions
per minute" that we are used to in cars.<a href="#section-4.2.1-2" class="pilcrow">¶</a></p>
<p id="section-4.2.1-3">Thus, our unit of measure is "Round-trip per Minute" (RPM) that expresses
responsiveness under working conditions.<a href="#section-4.2.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="statistical-confidence">
<section id="section-4.2.2">
          <h4 id="name-statistical-confidence-3">
<a href="#section-4.2.2" class="section-number selfRef">4.2.2. </a><a href="#name-statistical-confidence-3" class="section-name selfRef">Statistical Confidence</a>
          </h4>
<p id="section-4.2.2-1">It remains an open question as to how many repetitions of the above described
latency measurements a tool would need to execute. One could imagine a
computation of the variance and confidence interval that would drive the number
of measurements and balance the accuracy with the speed of the measurement
itself.<a href="#section-4.2.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="protocol-specification">
<section id="section-5">
      <h2 id="name-protocol-specification-3">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-protocol-specification-3" class="section-name selfRef">Protocol Specification</a>
      </h2>
<p id="section-5-1">By using standard protocols that are most commonly used by end-users, no new
protocol needs to be specified. However, both client and servers need
capabilities to execute this kind of measurement as well as a standard to flow
to provision the client with the necessary information.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">First, the capabilities of both the client and the server: It is expected that
both hosts support HTTP/2 over TLS 1.3. That the client is able to send a
GET-request and a POST. The server needs the ability to serve both of these
HTTP commands. Further, the server endpoint is accessible through a hostname
that can be resolved through DNS. Finally, the server has the ability to
provide content upon a GET-request.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">Given those capabilities, the server is expected to provide 4 URLs/responses:<a href="#section-5-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5-4">
<li id="section-5-4.1">
          <p id="section-5-4.1.1">A config URL/response: This is the configuration file/format used by the
client. It's a simple JSON file format that points the client at the various
URLs mentioned below. All of the fields are required except "test_endpoint".
If the service-procier can pin all of the requests for a test run to a
specific node in the service (for a particular run), they can specify that
node's name in the "test_endpoint" field. It's preferred that pinning of
some sort is available. This is to ensure the measurement is against the
same paths and not switching hosts during a test run (ie moving from near
POP A to near POP B) Sample content of this JSON would be:<a href="#section-5-4.1.1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5-4.1.2">
<pre>
{
  "version": 1,
  "urls": {
    "small_https_download_url": "https://example.apple.com/api/v1/small",
    "large_https_download_url": "https://example.apple.com/api/v1/large",
    "https_upload_url": "https://example.apple.com/api/v1/upload"
  },
  "test_endpoint": "hostname123.cdnprovider.com"
}
</pre><a href="#section-5-4.1.2" class="pilcrow">¶</a>
</div>
</li>
        <li id="section-5-4.2">A "small" URL/response:
This needs to serve a status code of 200 and 1 byte in the body. The actual body content is irrelevant.<a href="#section-5-4.2" class="pilcrow">¶</a>
</li>
        <li id="section-5-4.3">A "large" URL/response:
This needs to serve a status code of 200 and a body size of at least 8GB. The body can be bigger, and will need to grow as network speeds increases over time. The actual body content is irrelevant. The client will probably never completely download the object.<a href="#section-5-4.3" class="pilcrow">¶</a>
</li>
        <li id="section-5-4.4">An "upload" URL/response:
This needs to handle a POST request with an arbitrary body size. Nothing needs to be done with the payload, it should be discarded.<a href="#section-5-4.4" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-5-5">Given those 4 services provided by the server, the client can bootstrap the responsiveness measurement by querying the JSON configuration. Upon which it has the URLs for creating the load-bearing connections in the upstream and downstream direction as well as the small object for the latency measurements.<a href="#section-5-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-6">
      <h2 id="name-security-considerations-3">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations-3" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-6-1">TBD<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-7">
      <h2 id="name-iana-considerations-3">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-iana-considerations-3" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-7-1">TBD<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgments">
<section id="section-8">
      <h2 id="name-acknowledgments-3">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-acknowledgments-3" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-8-1">TBD<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-9">
      <h2 id="name-informative-references-3">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-informative-references-3" class="section-name selfRef">Informative References</a>
      </h2>
<dl class="references">
<dt id="Bufferbloat">[Bufferbloat]</dt>
      <dd>
<span class="refAuthor">Gettys, J.</span> and <span class="refAuthor">K. Nichols</span>, <span class="refTitle">"Bufferbloat: Dark Buffers in the Internet"</span>, <span class="seriesInfo">Communications of the ACM, Volume 55, Number 1 (2012) </span>, <span>n.d.</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8033">[RFC8033]</dt>
      <dd>
<span class="refAuthor">Pan, R.</span>, <span class="refAuthor">Natarajan, P.</span>, <span class="refAuthor">Baker, F.</span>, and <span class="refAuthor">G. White</span>, <span class="refTitle">"Proportional Integral Controller Enhanced (PIE): A Lightweight Control Scheme to Address the Bufferbloat Problem"</span>, <span class="seriesInfo">RFC 8033</span>, <span class="seriesInfo">DOI 10.17487/RFC8033</span>, <time datetime="2017-02" class="refDate">February 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8033">https://www.rfc-editor.org/info/rfc8033</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8289">[RFC8289]</dt>
    <dd>
<span class="refAuthor">Nichols, K.</span>, <span class="refAuthor">Jacobson, V.</span>, <span class="refAuthor">McGregor, A., Ed.</span>, and <span class="refAuthor">J. Iyengar, Ed.</span>, <span class="refTitle">"Controlled Delay Active Queue Management"</span>, <span class="seriesInfo">RFC 8289</span>, <span class="seriesInfo">DOI 10.17487/RFC8289</span>, <time datetime="2018-01" class="refDate">January 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8289">https://www.rfc-editor.org/info/rfc8289</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses-3">
<a href="#name-authors-addresses-3" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Christoph Paasch</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">One Apple Park Way</span></div>
<div dir="auto" class="left">
<span class="locality">Cupertino, California 95014</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:cpaasch@apple.com" class="email">cpaasch@apple.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Randall Meyer</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">One Apple Park Way</span></div>
<div dir="auto" class="left">
<span class="locality">Cupertino, California 95014</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:rrm@apple.com" class="email">rrm@apple.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Stuart Cheshire</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">One Apple Park Way</span></div>
<div dir="auto" class="left">
<span class="locality">Cupertino, California 95014</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:cheshire@apple.com" class="email">cheshire@apple.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Omer Shapira</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">One Apple Park Way</span></div>
<div dir="auto" class="left">
<span class="locality">Cupertino, California 95014</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:oesh@apple.com" class="email">oesh@apple.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
