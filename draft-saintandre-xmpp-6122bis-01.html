<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Extensible Messaging and Presence Protocol (XMPP): Address Format</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Overview">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Terminology">
<link href="#rfc.section.2" rel="Chapter" title="2 Addresses">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Fundamentals">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Domainpart">
<link href="#rfc.section.2.3" rel="Chapter" title="2.3 Localpart">
<link href="#rfc.section.2.4" rel="Chapter" title="2.4 Resourcepart">
<link href="#rfc.section.3" rel="Chapter" title="3 Internationalization Considerations">
<link href="#rfc.section.4" rel="Chapter" title="4 Security Considerations">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Reuse of PRECIS">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Reuse of Unicode">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Address Spoofing">
<link href="#rfc.section.4.3.1" rel="Chapter" title="4.3.1 Address Forging">
<link href="#rfc.section.4.3.2" rel="Chapter" title="4.3.2 Address Mimicking">
<link href="#rfc.section.5" rel="Chapter" title="5 IANA Considerations">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Use of NameClass">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Use of FreeClass">
<link href="#rfc.section.6" rel="Chapter" title="6 Conformance Requirements">
<link href="#rfc.references" rel="Chapter" title="7 References">
<link href="#rfc.references.1" rel="Chapter" title="7.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="7.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Differences from RFC 6122">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B Acknowledgements">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document defines the format for addresses used in the Extensible Messaging and Presence Protocol (XMPP), including support for Unicode characters outside the US-ASCII range.  This document obsoletes RFC 6122." />
  <meta name="description" content="This document defines the format for addresses used in the Extensible Messaging and Presence Protocol (XMPP), including support for Unicode characters outside the US-ASCII range.  This document obsoletes RFC 6122." />
  <meta name="keywords" content="Extensible Messaging and Presence Protocol, XMPP, Jabber, Messaging, Instant Messaging, Presence, Extensible Markup Language, XML" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">XMPP</td>
<td class="right">P. Saint-Andre</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Cisco</td>
</tr>
<tr>
<td class="left">Obsoletes: 6122 (if approved)</td>
<td class="right">July 12, 2011</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right"></td>
</tr>
<tr>
<td class="left">Expires: January 13, 2012</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Extensible Messaging and Presence Protocol (XMPP): Address Format<br />
  <span class="filename">draft-saintandre-xmpp-6122bis-01</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document defines the format for addresses used in the Extensible Messaging and Presence Protocol (XMPP), including support for Unicode characters outside the US-ASCII range.  This document obsoletes RFC 6122.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on January 13, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Overview</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Terminology</a>
</li>
<li>2.   <a href="#rfc.section.2">Addresses</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Fundamentals</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Domainpart</a>
</li>
<li>2.3.   <a href="#rfc.section.2.3">Localpart</a>
</li>
<li>2.4.   <a href="#rfc.section.2.4">Resourcepart</a>
</li>
<li>3.   <a href="#rfc.section.3">Internationalization Considerations</a>
</li>
<li>4.   <a href="#rfc.section.4">Security Considerations</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Reuse of PRECIS</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Reuse of Unicode</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Address Spoofing</a>
</li>
<li>4.3.1.   <a href="#rfc.section.4.3.1">Address Forging</a>
</li>
<li>4.3.2.   <a href="#rfc.section.4.3.2">Address Mimicking</a>
</li>
<li>5.   <a href="#rfc.section.5">IANA Considerations</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Use of NameClass</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Use of FreeClass</a>
</li>
<li>6.   <a href="#rfc.section.6">Conformance Requirements</a>
</li>
<li>7.   <a href="#rfc.references">References</a>
</li>
<li>7.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>7.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Differences from RFC 6122</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">Acknowledgements</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a>
</h1>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> <a href="#overview" id="overview">Overview</a>
</h1>
<p id="rfc.section.1.1.p.1">The Extensible Messaging and Presence Protocol <a href="#XMPP">[XMPP]</a> is an application profile of the Extensible Markup Language <a href="#XML">[XML]</a> for streaming XML data in close to real time between any two or more network-aware entities.  The address format for XMPP entities was originally developed in the Jabber open-source community in 1999, first described by <a href="#XEP-0029">[XEP-0029]</a> in 2002, and then defined canonically by <a href="#RFC3920">[RFC3920]</a> in 2004 and <a href="#RFC6122">[RFC6122]</a> in 2011.</p>
<p id="rfc.section.1.1.p.2">As specified in RFC 3920 and RFC 6122, the XMPP address format used the "stringprep" technology for preparation of non-ASCII characters <a href="#STRINGPREP">[STRINGPREP]</a>.  This document defines the XMPP address format in a way that no longer depends on stringprep.  Instead, this document depends on the internationalization framework defined by the IETF's PRECIS Working Group <a href="#FRAMEWORK">[FRAMEWORK]</a>.</p>
<p id="rfc.section.1.1.p.3">This document obsoletes RFC 6122.</p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> <a href="#terms" id="terms">Terminology</a>
</h1>
<p id="rfc.section.1.2.p.1">Many important terms used in this document are defined in <a href="#FRAMEWORK">[FRAMEWORK]</a>, <a href="#I18N-TERMS">[I18N-TERMS]</a>, <a href="#IDNA-DEFS">[IDNA-DEFS]</a>, <a href="#UNICODE">[UNICODE]</a>, and <a href="#XMPP">[XMPP]</a>.</p>
<p id="rfc.section.1.2.p.2">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 <a href="#KEYWORDS">[KEYWORDS]</a>.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#addressing" id="addressing">Addresses</a>
</h1>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> <a href="#addressing-fundamentals" id="addressing-fundamentals">Fundamentals</a>
</h1>
<p id="rfc.section.2.1.p.1">An XMPP entity is anything that is network-addressable and that can communicate using XMPP.  For historical reasons, the native address of an XMPP entity is called a Jabber Identifier ("JID").  A valid JID is a string of <a href="#UNICODE">[UNICODE]</a> code points, encoded using <a href="#UTF-8">[UTF-8]</a>, and structured as an ordered sequence of localpart, domainpart, and resourcepart (where the first two parts are demarcated by the '@' character used as a separator, and the last two parts are similarly demarcated by the '/' character).</p>
<p id="rfc.section.2.1.p.2">The syntax for a JID is defined as follows using the Augmented Backus-Naur Form as specified in <a href="#ABNF">[ABNF]</a>.</p>
<div id="#rfc.figure.1"></div>
<pre>
   jid           = [ localpart "@" ] domainpart [ "/" resourcepart ]
   localpart     = 1*(localpoint)
                   ;
                   ; a "localpoint" is a UTF-8 encoded Unicode 
                   ; code point that conforms to the localpart
                   ; subclass of the "NameClass" string class
                   ; defined in draft-blanchet-precis-framework
                   ;
   domainpart    = IP-literal / IPv4address / ifqdn
                   ;
                   ; the "IPv4address" and "IP-literal" rules are
                   ; defined in RFC 3986, and the first-match-wins
                   ; (a.k.a. "greedy") algorithm described in RFC
                   ; 3986 applies to the matching process
                   ;
                   ; note well that reuse of the IP-literal rule
                   ; from RFC 3986 implies that IPv6 addresses are 
                   ; enclosed in square brackets (i.e., beginning 
                   ; with '[' and ending with ']')
                   ;
   ifqdn         = 1*(domainpoint)
                   ;
                   ; a "domainpoint" is a UTF-8 encoded Unicode
                   ; code point that conforms to the "domain name"
                   ; string class effectively defined in RFC 5890
                   ;
   resourcepart  = 1*(resourcepoint)
                   ;
                   ; a "resourcepoint" is a UTF-8 encoded Unicode
                   ; code point that conforms to the localpart 
                   ; subclass of the "FreeClass" string class
                   ; defined in draft-blanchet-precis-framework
                   ;
        </pre>
<p id="rfc.section.2.1.p.3">All JIDs are based on the foregoing structure.</p>
<p id="rfc.section.2.1.p.4">Each allowable portion of a JID (localpart, domainpart, and resourcepart) MUST NOT be zero bytes in length and MUST NOT be more than 1023 bytes in length, resulting in a maximum total size (including the '@' and '/' separators) of 3071 bytes.</p>
<p id="rfc.section.2.1.p.5">For the purposes of communication over an XMPP network (e.g., in the 'to' or 'from' address of an XMPP stanza), an entity's address MUST be represented as a JID, not as a Uniform Resource Identifier <a href="#URI">[URI]</a> or Internationalized Resource Identifier <a href="#IRI">[IRI]</a>.  An XMPP URI or IRI <a href="#XMPP-URI">[XMPP-URI]</a> is in essence a JID prepended with 'xmpp:'; however, the native addressing format used in XMPP is that of a mere JID without a URI scheme.  <a href="#XMPP-URI">[XMPP-URI]</a> is provided only for identification and interaction outside the context of XMPP itself, for example when linking to a JID from a web page.  See <a href="#XMPP-URI">[XMPP-URI]</a> for information about securely extracting a JID from an XMPP URI or IRI.</p>
<p></p>

<ul class="empty"><li>Implementation Note: When dividing a JID into its component parts, an implementation needs to match the separator characters '@' and '/' before applying any transformation algorithms, which might decompose certain Unicode code points to the separator characters (e.g., U+FE6B SMALL COMMERCIAL AT might decompose to U+0040 COMMERCIAL AT).</li></ul>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> <a href="#addressing-domain" id="addressing-domain">Domainpart</a>
</h1>
<p id="rfc.section.2.2.p.1">The domainpart of a JID is that portion after the '@' character (if any) and before the '/' character (if any); it is the primary identifier and is the only REQUIRED element of a JID (a mere domainpart is a valid JID).  Typically a domainpart identifies the "home" server to which clients connect for XML routing and data management functionality.  However, it is not necessary for an XMPP domainpart to identify an entity that provides core XMPP server functionality (e.g., a domainpart can identify an entity such as a multi-user chat service <a href="#XEP-0045">[XEP-0045]</a>, a publish-subscribe service, or a user directory).</p>
<p id="rfc.section.2.2.p.2">The domainpart for every XMPP service MUST be a fully qualified domain name (FQDN; see <a href="#DNS">[DNS]</a>), IPv4 address, IPv6 address, or unqualified hostname (i.e., a text label that is resolvable on a local network).</p>
<p></p>

<ul class="empty"><li>Interoperability Note: Domainparts that are IP addresses might not be accepted by other services for the sake of server-to-server communication, and domainparts that are unqualified hostnames cannot be used on public networks because they are resolvable only on a local network.</li></ul>
<p id="rfc.section.2.2.p.4">If the domainpart includes a final character considered to be a label separator (dot) by <a href="#DNS">[DNS]</a>, this character MUST be stripped from the domainpart before the JID of which it is a part is used for the purpose of routing an XML stanza, comparing against another JID, or constructing an <a href="#XMPP-URI">[XMPP-URI]</a>. In particular, the character MUST be stripped before any other canonicalization steps are taken.</p>
<p id="rfc.section.2.2.p.5">A domainpart MUST NOT be zero bytes in length and MUST NOT be more than 1023 bytes in length.  This rule is to be enforced after any mapping or normalization of code points.  Naturally, the length limits of <a href="#DNS">[DNS]</a> apply, and nothing in this document is to be interpreted as overriding those more fundamental limits.</p>
<p id="rfc.section.2.2.p.6">In the terms of IDNA2008 <a href="#IDNA-DEFS">[IDNA-DEFS]</a>, the domainpart of a JID is a "domain name slot".</p>
<p id="rfc.section.2.2.p.7">A domainpart consisting of a fully qualified domain name MUST be an "internationalized domain name" as defined in <a href="#IDNA-DEFS">[IDNA-DEFS]</a> and MUST consist only of Unicode code points that conform to the rules specified in <a href="#IDNA-CODE">[IDNA-CODE]</a>.</p>
<p id="rfc.section.2.2.p.8">For the purposes of communication over XMPP, the domainpart of a JID MUST be treated as follows, where the operations specified MUST be completed in the order shown:</p>
<p></p>

<ol>
<li>Uppercase and titlecase characters MUST be mapped to their lowercase equivalents.<br><br>
</li>
<li>All characters MUST be mapped using Unicode Normalization Form C (NFC).<br><br>
</li>
<li>Each A-label SHOULD be converted to a U-label (however, if it is not converted then the application MUST apply the Punycode algorithm <a href="#PUNYCODE">[PUNYCODE]</a> to each A-label and prepend the ACE prefix ("xn--") to the resulting DNS domain name).</li>
</ol>

<p> </p>
<p id="rfc.section.2.2.p.10">With regard to directionality, the "Bidi Rule" provided in <a href="#IDNA-BIDI">[IDNA-BIDI]</a> applies.</p>
<h1 id="rfc.section.2.3">
<a href="#rfc.section.2.3">2.3.</a> <a href="#addressing-localpart" id="addressing-localpart">Localpart</a>
</h1>
<p id="rfc.section.2.3.p.1">The localpart of a JID is an optional identifier placed before the domainpart and separated from the latter by the '@' character.  Typically a localpart uniquely identifies the entity requesting and using network access provided by a server (i.e., a local account), although it can also represent other kinds of entities (e.g., a chat room associated with a multi-user chat service <a href="#XEP-0045">[XEP-0045]</a>).  The entity represented by an XMPP localpart is addressed within the context of a specific domain (i.e., &lt;localpart@domainpart&gt;).</p>
<p id="rfc.section.2.3.p.2">A localpart MUST NOT be zero bytes in length and MUST NOT be more than 1023 bytes in length.  This rule is to be enforced after any mapping or normalization of code points.</p>
<p id="rfc.section.2.3.p.3">A localpart MUST consist only of Unicode code points that conform to the "NameClass" base string class defined in <a href="#FRAMEWORK">[FRAMEWORK]</a>, with the exception of the following characters that are explicitly disallowed in XMPP localparts:</p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">U+0022 (QUOTATION MARK), i.e., "</dd>
<dt></dt>
<dd style="margin-left: 8">U+0026 (AMPERSAND), i.e., &amp;</dd>
<dt></dt>
<dd style="margin-left: 8">U+0027 (APOSTROPHE), i.e., '</dd>
<dt></dt>
<dd style="margin-left: 8">U+002F (SOLIDUS), i.e., /</dd>
<dt></dt>
<dd style="margin-left: 8">U+003A (COLON), i.e., :</dd>
<dt></dt>
<dd style="margin-left: 8">U+003C (LESS-THAN SIGN), i.e., &lt;</dd>
<dt></dt>
<dd style="margin-left: 8">U+003E (GREATER-THAN SIGN), i.e., &gt;</dd>
<dt></dt>
<dd style="margin-left: 8">U+0040 (COMMERCIAL AT), i.e., @</dd>
</dl>

<p> </p>
<p id="rfc.section.2.3.p.5">For the purposes of communication over XMPP, the localpart of a JID MUST be treated as follows, where the operations specified MUST be completed in the order shown:</p>
<p></p>

<ol>
<li>Uppercase and titlecase characters MUST be mapped to their lowercase equivalents.<br><br>
</li>
<li>All characters MUST be mapped using Unicode Normalization Form C (NFC).</li>
</ol>

<p> </p>
<p id="rfc.section.2.3.p.7">With regard to directionality, any localpart containing a right-to-left code point MUST be treated as a right-to-left string.</p>
<h1 id="rfc.section.2.4">
<a href="#rfc.section.2.4">2.4.</a> <a href="#addressing-resource" id="addressing-resource">Resourcepart</a>
</h1>
<p id="rfc.section.2.4.p.1">The resourcepart of a JID is an optional identifier placed after the domainpart and separated from the latter by the '/' character.  A resourcepart can modify either a &lt;localpart@domainpart&gt; address or a mere &lt;domainpart&gt; address.  Typically a resourcepart uniquely identifies a specific connection (e.g., a device or location) or object (e.g., an occupant in a multi-user chat room <a href="#XEP-0045">[XEP-0045]</a>) belonging to the entity associated with an XMPP localpart at a domain (i.e., &lt;localpart@domainpart/resourcepart&gt;).</p>
<p></p>

<ul class="empty"><li>Informational Note: For historical reasons, the term "resource identifier" is often used in XMPP to refer to the optional portion of an XMPP address that follows the domainpart and the "/" separator character; to help prevent confusion between an XMPP "resource identifier" and the meanings of "resource" and "identifier" provided in Section 1.1 of <a href="#URI">[URI]</a>, this specification uses the term "resourcepart" instead of "resource identifier" (as in RFC 3920).</li></ul>
<p id="rfc.section.2.4.p.3">A resourcepart MUST NOT be zero bytes in length and MUST NOT be more than 1023 bytes in length.  This rule is to be enforced after any mapping or normalization of code points.</p>
<p id="rfc.section.2.4.p.4">A resourcepart MUST consist only of Unicode code points that conform to the "FreeClass" base string class defined in <a href="#FRAMEWORK">[FRAMEWORK]</a>.</p>
<p id="rfc.section.2.4.p.5">For the purposes of communication over XMPP, the localpart of a JID MUST be treated as follows, where the operations specified MUST be completed in the order shown:</p>
<p></p>

<ol>
<li>Uppercase and titlecase characters MAY be mapped to their lowercase equivalents.<br><br>
</li>
<li>All characters MUST be mapped using Unicode Normalization Form C (NFC).</li>
</ol>

<p> </p>
<p id="rfc.section.2.4.p.7">With regard to directionality, any resourcepart containing a right-to-left code point MUST be treated as a right-to-left string.</p>
<p id="rfc.section.2.4.p.8">XMPP entities SHOULD consider resourceparts to be opaque strings and SHOULD NOT impute meaning to any given resourcepart.  In particular:</p>
<p></p>

<ul>
<li>Use of the '/' character as a separator between the domainpart and the resourcepart does not imply that XMPP addresses are hierarchical in the way that, say, HTTP addresses are hierarchical; thus for example an XMPP address of the form &lt;localpart@domainpart/foo/bar&gt; does not identify a resource "bar" that exists below a resource "foo" in a hierarchy of resources associated with the entity "localpart@domain".<br><br>
</li>
<li>The '@' character is allowed in the resourcepart and is often used in the "nick" shown in XMPP chatrooms <a href="#XEP-0045">[XEP-0045]</a>.  For example, the JID &lt;room@chat.example.com/user@host&gt; describes an entity who is an occupant of the room &lt;room@chat.example.com&gt; with an (asserted) nick of &lt;user@host&gt;.  However, chatroom services do not necessarily check such an asserted nick against the occupant's real JID.</li>
</ul>

<p> </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#i18n" id="i18n">Internationalization Considerations</a>
</h1>
<p id="rfc.section.3.p.1">XMPP applications MUST support IDNA2008 for domainparts, the "NameClass" string class from <a href="#FRAMEWORK">[FRAMEWORK]</a> for localparts (with the exception of certain ASCII characters specified under <a href="#addressing-localpart">Section 2.3</a>), and the "FreeClass" string class from <a href="#FRAMEWORK">[FRAMEWORK]</a> for resourceparts.  This enables XMPP addresses to include a wide variety of characters outside the US-ASCII range.  Rules for enforcement of the XMPP address format are provided in <a href="#XMPP">[XMPP]</a> and relevant XMPP extensions.</p>
<p id="rfc.section.3.p.2">For backward compatibility, many XMPP applications support <a href="#IDNA2003">[IDNA2003]</a> for domainparts, and the <a href="#STRINGPREP">[STRINGPREP]</a> profiles Nodeprep and Resourceprep <a href="#RFC3920">[RFC3920]</a> for localparts and resourceparts, respectively.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#security-PRECIS" id="security-PRECIS">Reuse of PRECIS</a>
</h1>
<p id="rfc.section.4.1.p.1">The security considerations described in <a href="#FRAMEWORK">[FRAMEWORK]</a> apply to the "NameClass" and "FreeClass" base string classes used in this document for XMPP localparts and resourceparts.  The security considerations described in <a href="#IDNA-DEFS">[IDNA-DEFS]</a> apply to internationalized domain names, which are used here for XMPP domainparts.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#security-unicode" id="security-unicode">Reuse of Unicode</a>
</h1>
<p id="rfc.section.4.2.p.1">The security considerations described in <a href="#UNICODE-SEC">[UNICODE-SEC]</a> apply to the use of Unicode characters in XMPP addresses.</p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#security-spoofing" id="security-spoofing">Address Spoofing</a>
</h1>
<p id="rfc.section.4.3.p.1">There are two forms of address spoofing: forging and mimicking.</p>
<h1 id="rfc.section.4.3.1">
<a href="#rfc.section.4.3.1">4.3.1.</a> <a href="#security-forging" id="security-forging">Address Forging</a>
</h1>
<p id="rfc.section.4.3.1.p.1">In the context of XMPP technologies, address forging occurs when an entity is able to generate an XML stanza whose 'from' address does not correspond to the account credentials with which the entity authenticated onto the network (or an authorization identity provided during negotiation of SASL authentication <a href="#SASL">[SASL]</a> as described in <a href="#XMPP">[XMPP]</a>).  For example, address forging occurs if an entity that authenticated as "juliet@im.example.com" is able to send XML stanzas from "nurse@im.example.com" or "romeo@example.net".</p>
<p id="rfc.section.4.3.1.p.2">Address forging is difficult in XMPP systems, given the requirement for sending servers to stamp 'from' addresses and for receiving servers to verify sending domains via server-to-server authentication (see <a href="#XMPP">[XMPP]</a>).  However, address forging is possible if:</p>
<p></p>

<ul>
<li>A poorly implemented server ignores the requirement for stamping the 'from' address.  This would enable any entity that authenticated with the server to send stanzas from any localpart@domainpart as long as the domainpart matches the sending domain of the server.<br><br>
</li>
<li>An actively malicious server generates stanzas on behalf of any registered account.</li>
</ul>

<p> </p>
<p id="rfc.section.4.3.1.p.4">Therefore, an entity outside the security perimeter of a particular server cannot reliably distinguish between JIDs of the form &lt;localpart@domainpart&gt; at that server and thus can authenticate only the domainpart of such JIDs with any level of assurance.  This specification does not define methods for discovering or counteracting such poorly implemented or rogue servers.  However, the end-to-end authentication or signing of XMPP stanzas could help to mitigate this risk, since it would require the rogue server to generate false credentials for signing or encryption of each stanza, in addition to modifying 'from' addresses.</p>
<p id="rfc.section.4.3.1.p.5">Furthermore, it is possible for an attacker to forge JIDs at other domains by means of a DNS poisoning attack if DNS security extensions <a href="#DNSSEC">[DNSSEC]</a> are not used.</p>
<h1 id="rfc.section.4.3.2">
<a href="#rfc.section.4.3.2">4.3.2.</a> <a href="#security-mimicking" id="security-mimicking">Address Mimicking</a>
</h1>
<p id="rfc.section.4.3.2.p.1">Address mimicking occurs when an entity provides legitimate authentication credentials for and sends XML stanzas from an account whose JID appears to a human user to be the same as another JID.  Because many characters are visually similar, it is relatively easy to mimic JIDs in XMPP systems.  As one simple example, the localpart "ju1iet" using the Arabic numeral one as the third character might appear the same as the localpart "juliet" using lowercase "L" as the third character.</p>
<p id="rfc.section.4.3.2.p.2">As explained in <a href="#IDNA-DEFS">[IDNA-DEFS]</a> and <a href="#FRAMEWORK">[FRAMEWORK]</a>, there is no easy solution to the problem of visually similar characters, and IDNA and PRECIS technologies do not attempt to define such a solution.  As a result, XMPP domainparts, localparts, and resourceparts could contain such characters, leading to security vulnerabilities such as the following:</p>
<p></p>

<ul>
<li>A domainpart is always employed as one part of an entity's address in XMPP.  One common usage is as the address of a server or server-side service, such as a multi-user chat service <a href="#XEP-0045">[XEP-0045]</a>.  The security of such services could be compromised based on different interpretations of the internationalized domainpart; for example, a user might authorize a malicious entity at a fake server to view the user's presence information, or a user could join chatrooms at a fake multi-user chat service.<br><br>
</li>
<li>A localpart can be employed as one part of an entity's address in XMPP.  One common usage is as the username of an instant messaging user; another is as the name of a multi-user chat room; and many other kinds of entities could use localparts as part of their addresses.  The security of such services could be compromised based on different interpretations of the internationalized localpart; for example, a user entering a single internationalized localpart could access another user's account information, or a user could gain access to a hidden or otherwise restricted chat room or service.<br><br>
</li>
<li>A resourcepart can be employed as one part of an entity's address in XMPP.  One common usage is as the name for an instant messaging user's connected resource; another is as the nickname of a user in a multi-user chat room; and many other kinds of entities could use resourceparts as part of their addresses.  The security of such services could be compromised based on different interpretations of the internationalized resourcepart; for example, two or more confusable resources could be bound at the same time to the same account (resulting in inconsistent authorization decisions in an XMPP application that uses full JIDs), or a user could send a message to someone other than the intended recipient in a multi-user chat room.</li>
</ul>

<p> </p>
<p id="rfc.section.4.3.2.p.4">XMPP services and clients are strongly encouraged to define and implement consistent policies regarding the registration, storage, and presentation of visually similar characters in XMPP systems.  In particular, service providers and software implementers are strongly encouraged to use the policies recommended in <a href="#FRAMEWORK">[FRAMEWORK]</a>.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#iana" id="iana">IANA Considerations</a>
</h1>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#iana-nameclass" id="iana-nameclass">Use of NameClass</a>
</h1>
<p id="rfc.section.5.1.p.1">The IANA shall add an entry to the PRECIS Usage Registry for reuse of the PRECIS NameClass in XMPP, as follows:</p>
<p></p>

<dl>
<dt>Base Class:</dt>
<dd style="margin-left: 8">NameClass.</dd>
<dt>Subclassing:</dt>
<dd style="margin-left: 8">Yes. See <a href="#addressing-localpart">Section 2.3</a> of RFCXXXX.</dd>
<dt>Directionality:</dt>
<dd style="margin-left: 8">If the string contains at least one right-to-left code point, the entire string is considered to be right-to-left.</dd>
<dt>Casemapping:</dt>
<dd style="margin-left: 8">Uppercase and titlecase code points are mapped to their lowercase equivalents.</dd>
<dt>Normalization:</dt>
<dd style="margin-left: 8">NFC.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#iana-freeclass" id="iana-freeclass">Use of FreeClass</a>
</h1>
<p id="rfc.section.5.2.p.1">The IANA shall add an entry to the PRECIS Usage Registry for reuse of the PRECIS FreeClass in XMPP, as follows:</p>
<p></p>

<dl>
<dt>Base Class:</dt>
<dd style="margin-left: 8">FreeClass</dd>
<dt>Subclassing:</dt>
<dd style="margin-left: 8">No.</dd>
<dt>Directionality:</dt>
<dd style="margin-left: 8">If the string contains at least one right-to-left code point, the entire string is considered to be right-to-left.</dd>
<dt>Casemapping:</dt>
<dd style="margin-left: 8">None.</dd>
<dt>Normalization:</dt>
<dd style="margin-left: 8">NFC.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#conformance" id="conformance">Conformance Requirements</a>
</h1>
<p id="rfc.section.6.p.1">This section describes a protocol feature set that summarizes the conformance requirements of this specification.  This feature set is appropriate for use in software certification, interoperability testing, and implementation reports.  For each feature, this section provides the following information:</p>
<p></p>

<ul>
<li>A human-readable name</li>
<li>An informational description</li>
<li>A reference to the particular section of this document that normatively defines the feature</li>
<li>Whether the feature applies to the Client role, the Server role, or both (where "N/A" signifies that the feature is not applicable to the specified role)</li>
<li>Whether the feature MUST or SHOULD be implemented, where the capitalized terms are to be understood as described in <a href="#KEYWORDS">[KEYWORDS]</a>
</li>
</ul>

<p> </p>
<p id="rfc.section.6.p.3">The feature set specified here attempts to adhere to the concepts and formats proposed by Larry Masinter within the IETF's NEWTRK Working Group in 2005, as captured in <a href="#INTEROP">[INTEROP]</a>.  Although this feature set is more detailed than called for by <a href="#REPORTS">[REPORTS]</a>, it provides a suitable basis for the generation of implementation reports to be submitted in support of advancing this specification from Proposed Standard to Draft Standard in accordance with <a href="#PROCESS">[PROCESS]</a>.</p>
<p></p>

<dl>
<dt>Feature:</dt>
<dd style="margin-left: 8">address-domain-length</dd>
<dt>Description:</dt>
<dd style="margin-left: 8">Ensure that the domainpart of an XMPP address is at least one byte in length and at most 1023 bytes in length, and conforms to the underlying length limits of the DNS.</dd>
<dt>Section:</dt>
<dd style="margin-left: 8"><a href="#addressing-domain">Section 2.2</a></dd>
<dt>Roles:</dt>
<dd style="margin-left: 8">Both MUST.</dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>Feature:</dt>
<dd style="margin-left: 8">address-domain-prep</dd>
<dt>Description:</dt>
<dd style="margin-left: 8">Ensure that the domainpart of an XMPP address conforms to IDNA2008, mapped to lowercase and normalized using NFC.</dd>
<dt>Section:</dt>
<dd style="margin-left: 8"><a href="#addressing-domain">Section 2.2</a></dd>
<dt>Roles:</dt>
<dd style="margin-left: 8">Both MUST.</dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>Feature:</dt>
<dd style="margin-left: 8">address-localpart-length</dd>
<dt>Description:</dt>
<dd style="margin-left: 8">Ensure that the localpart of an XMPP address is at least one byte in length and at most 1023 bytes in length.</dd>
<dt>Section:</dt>
<dd style="margin-left: 8"><a href="#addressing-localpart">Section 2.3</a></dd>
<dt>Roles:</dt>
<dd style="margin-left: 8">Both MUST.</dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>Feature:</dt>
<dd style="margin-left: 8">address-localpart-prep</dd>
<dt>Description:</dt>
<dd style="margin-left: 8">Ensure that the localpart of an XMPP address conforms to the "NameClass" base string class from the PRECIS framework, excluding the eight XMPP prohibited code points (U+0022, U+0026, U+0027, U+002F, U+003A, U+003C, U+003E, and U+0040), with all code points mapped to lowercase and normalized using NFC.</dd>
<dt>Section:</dt>
<dd style="margin-left: 8"><a href="#addressing-localpart">Section 2.3</a></dd>
<dt>Roles:</dt>
<dd style="margin-left: 8">Both MUST.</dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>Feature:</dt>
<dd style="margin-left: 8">address-resource-length</dd>
<dt>Description:</dt>
<dd style="margin-left: 8">Ensure that the resourcepart of an XMPP address is at least one byte in length and at most 1023 bytes in length.</dd>
<dt>Section:</dt>
<dd style="margin-left: 8"><a href="#addressing-resource">Section 2.4</a></dd>
<dt>Roles:</dt>
<dd style="margin-left: 8">Both MUST.</dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>Feature:</dt>
<dd style="margin-left: 8">address-resource-prep</dd>
<dt>Description:</dt>
<dd style="margin-left: 8">Ensure that the resourcepart of an XMPP address conforms to the "FreeClass" base string class from the PRECIS framework, with all code points normalized using NFC.</dd>
<dt>Section:</dt>
<dd style="margin-left: 8">
<a href="#addressing-resource">Section 2.4</a> </dd>
<dt>Roles:</dt>
<dd style="margin-left: 8">Both MUST.</dd>
</dl>

<p> </p>
<h1 id="rfc.references">
<a href="#rfc.references">7.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">7.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="ABNF">[ABNF]</b></td>
<td class="top">
<a>Crocker, D.</a> and <a>P. Overell</a>, "<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>", STD 68, RFC 5234, January 2008.</td>
</tr>
<tr>
<td class="reference"><b id="DNS">[DNS]</b></td>
<td class="top">
<a title="USC/ISI">Mockapetris, P.</a>, "<a href="http://tools.ietf.org/html/rfc1035">Domain names - implementation and specification</a>", STD 13, RFC 1035, November 1987.</td>
</tr>
<tr>
<td class="reference"><b id="FRAMEWORK">[FRAMEWORK]</b></td>
<td class="top">
<a title="Viagenie">Blanchet, M</a> and <a title="Cisco">P Saint-Andre</a>, "<a href="http://tools.ietf.org/html/draft-blanchet-precis-framework-02">Precis Framework: Handling Internationalized Strings in Protocols</a>", Internet-Draft draft-blanchet-precis-framework-02, July 2011.</td>
</tr>
<tr>
<td class="reference"><b id="IDNA-BIDI">[IDNA-BIDI]</b></td>
<td class="top">
<a>Alvestrand, H.</a> and <a>C. Karp</a>, "<a href="http://tools.ietf.org/html/rfc5893">Right-to-Left Scripts for Internationalized Domain Names for Applications (IDNA)</a>", RFC 5893, August 2010.</td>
</tr>
<tr>
<td class="reference"><b id="IDNA-CODE">[IDNA-CODE]</b></td>
<td class="top">
<a>Faltstrom, P.</a>, "<a href="http://tools.ietf.org/html/rfc5892">The Unicode Code Points and Internationalized Domain Names for Applications (IDNA)</a>", RFC 5892, August 2010.</td>
</tr>
<tr>
<td class="reference"><b id="IDNA-DEFS">[IDNA-DEFS]</b></td>
<td class="top">
<a>Klensin, J.</a>, "<a href="http://tools.ietf.org/html/rfc5890">Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework</a>", RFC 5890, August 2010.</td>
</tr>
<tr>
<td class="reference"><b id="IDNA-PROTO">[IDNA-PROTO]</b></td>
<td class="top">
<a>Klensin, J.</a>, "<a href="http://tools.ietf.org/html/rfc5891">Internationalized Domain Names in Applications (IDNA): Protocol</a>", RFC 5891, August 2010.</td>
</tr>
<tr>
<td class="reference"><b id="KEYWORDS">[KEYWORDS]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="UNICODE">[UNICODE]</b></td>
<td class="top">
<a>The Unicode Consortium</a>, "<a>The Unicode Standard, Version 3.2.0</a>", 2000.<p>The Unicode Standard, Version 3.2.0 is defined by The Unicode Standard, Version 3.0 (Reading, MA, Addison-Wesley, 2000. ISBN 0-201-61633-5), as amended by the Unicode Standard Annex #27: Unicode 3.1 (http://www.unicode.org/reports/tr27/) and by the Unicode Standard Annex #28: Unicode 3.2 (http://www.unicode.org/reports/tr28/).  </p>
</td>
</tr>
<tr>
<td class="reference"><b id="UNICODE-SEC">[UNICODE-SEC]</b></td>
<td class="top">
<a>The Unicode Consortium</a>, "<a>Unicode Technical Report #36: Unicode Security Considerations</a>", 2008.</td>
</tr>
<tr>
<td class="reference"><b id="UTF-8">[UTF-8]</b></td>
<td class="top">
<a>Yergeau, F.</a>, "<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>", STD 63, RFC 3629, November 2003.</td>
</tr>
<tr>
<td class="reference"><b id="XMPP">[XMPP]</b></td>
<td class="top">
<a>Saint-Andre, P</a>, "<a href="http://tools.ietf.org/html/rfc6120">Extensible Messaging and Presence Protocol (XMPP): Core</a>", RFC 6120, March 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">7.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="DNSSEC">[DNSSEC]</b></td>
<td class="top">
<a>Arends, R.</a>, <a>Austein, R.</a>, <a>Larson, M.</a>, <a>Massey, D.</a> and <a>S. Rose</a>, "<a href="http://tools.ietf.org/html/rfc4033">DNS Security Introduction and Requirements</a>", RFC 4033, March 2005.</td>
</tr>
<tr>
<td class="reference"><b id="I18N-TERMS">[I18N-TERMS]</b></td>
<td class="top">
<a>Hoffman, P</a> and <a>J Klensin</a>, "<a href="http://tools.ietf.org/html/draft-hoffman-rfc3536bis-02">Terminology Used in Internationalization in the IETF</a>", Internet-Draft draft-hoffman-rfc3536bis-02, April 2011.</td>
</tr>
<tr>
<td class="reference"><b id="IDNA2003">[IDNA2003]</b></td>
<td class="top">
<a>Faltstrom, P.</a>, <a>Hoffman, P.</a> and <a>A. Costello</a>, "<a href="http://tools.ietf.org/html/rfc3490">Internationalizing Domain Names in Applications (IDNA)</a>", RFC 3490, March 2003.<p>See Section 1 for an explanation of why the normative reference to an obsoleted specification is needed.</p>
</td>
</tr>
<tr>
<td class="reference"><b id="IDNA-RATIONALE">[IDNA-RATIONALE]</b></td>
<td class="top">
<a>Klensin, J.</a>, "<a href="http://tools.ietf.org/html/rfc5894">Internationalized Domain Names for Applications (IDNA): Background, Explanation, and Rationale</a>", RFC 5894, August 2010.</td>
</tr>
<tr>
<td class="reference"><b id="INTEROP">[INTEROP]</b></td>
<td class="top">
<a>Masinter, L</a>, "<a>Formalizing IETF Interoperability Reporting</a>", Work in Progress, October 2005.</td>
</tr>
<tr>
<td class="reference"><b id="IRI">[IRI]</b></td>
<td class="top">
<a>Duerst, M.</a> and <a>M. Suignard</a>, "<a href="http://tools.ietf.org/html/rfc3987">Internationalized Resource Identifiers (IRIs)</a>", RFC 3987, January 2005.</td>
</tr>
<tr>
<td class="reference"><b id="PROCESS">[PROCESS]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2026">The Internet Standards Process -- Revision 3</a>", BCP 9, RFC 2026, October 1996.</td>
</tr>
<tr>
<td class="reference"><b id="PUNYCODE">[PUNYCODE]</b></td>
<td class="top">
<a>Costello, A.</a>, "<a href="http://tools.ietf.org/html/rfc3492">Punycode: A Bootstring encoding of Unicode for Internationalized Domain Names in Applications (IDNA)</a>", RFC 3492, March 2003.</td>
</tr>
<tr>
<td class="reference"><b id="REPORTS">[REPORTS]</b></td>
<td class="top">
<a>Dusseault, L.</a> and <a>R. Sparks</a>, "<a href="http://tools.ietf.org/html/rfc5657">Guidance on Interoperation and Implementation Reports for Advancement to Draft Standard</a>", BCP 9, RFC 5657, September 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3920">[RFC3920]</b></td>
<td class="top">
<a href="mailto:stpeter@jabber.org" title="Jabber Software Foundation">Saint-Andre, P.</a>, "<a href="http://tools.ietf.org/html/rfc3920">Extensible Messaging and Presence Protocol (XMPP): Core</a>", RFC 3920, October 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6122">[RFC6122]</b></td>
<td class="top">
<a>Saint-Andre, P.</a>, "<a href="http://tools.ietf.org/html/rfc6122">Extensible Messaging and Presence Protocol (XMPP): Address Format</a>", RFC 6122, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="SASL">[SASL]</b></td>
<td class="top">
<a>Melnikov, A.</a> and <a>K. Zeilenga</a>, "<a href="http://tools.ietf.org/html/rfc4422">Simple Authentication and Security Layer (SASL)</a>", RFC 4422, June 2006.</td>
</tr>
<tr>
<td class="reference"><b id="STRINGPREP">[STRINGPREP]</b></td>
<td class="top">
<a>Hoffman, P.</a> and <a>M. Blanchet</a>, "<a href="http://tools.ietf.org/html/rfc3454">Preparation of Internationalized Strings ("stringprep")</a>", RFC 3454, December 2002.</td>
</tr>
<tr>
<td class="reference"><b id="URI">[URI]</b></td>
<td class="top">
<a href="mailto:timbl@w3.org" title="World Wide Web Consortium">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com" title="Day Software">Fielding, R.</a> and <a href="mailto:LMM@acm.org" title="Adobe Systems Incorporated">L. Masinter</a>, "<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>", STD 66, RFC 3986, January 2005.</td>
</tr>
<tr>
<td class="reference"><b id="XEP-0029">[XEP-0029]</b></td>
<td class="top">
<a href="mailto:craigk@jabber.com">Kaes, C.</a>, "<a>Definition of Jabber Identifiers (JIDs)</a>", XSF XEP 0029, October 2003.</td>
</tr>
<tr>
<td class="reference"><b id="XEP-0045">[XEP-0045]</b></td>
<td class="top">
<a href="mailto:stpeter@jabber.org">Saint-Andre, P.</a>, "<a>Multi-User Chat</a>", XSF XEP 0045, July 2008.</td>
</tr>
<tr>
<td class="reference"><b id="XEP-0165">[XEP-0165]</b></td>
<td class="top">
<a href="mailto:stpeter@jabber.org">Saint-Andre, P.</a>, "<a>Best Practices to Discourage JID Mimicking</a>", XSF XEP 0165, December 2007.</td>
</tr>
<tr>
<td class="reference"><b id="XML">[XML]</b></td>
<td class="top">
<a>Paoli, J.</a>, <a>Maler, E.</a>, <a>Sperberg-McQueen, C.</a>, <a>Yergeau, F.</a> and <a>T. Bray</a>, "<a>Extensible Markup Language (XML) 1.0 (Fourth Edition)</a>", World Wide Web Consortium Recommendation REC-xml-20060816, August 2006.</td>
</tr>
<tr>
<td class="reference"><b id="XMPP-URI">[XMPP-URI]</b></td>
<td class="top">
<a>Saint-Andre, P.</a>, "<a href="http://tools.ietf.org/html/rfc5122">Internationalized Resource Identifiers (IRIs) and Uniform Resource Identifiers (URIs) for the Extensible Messaging and Presence Protocol (XMPP)</a>", RFC 5122, February 2008.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#diffs" id="diffs">Differences from RFC 6122</a>
</h1>
<p id="rfc.section.Appendix A.p.1">Based on consensus derived from implementation and deployment experience as well as formal interoperability testing, the following substantive modifications were made from RFC 3920.</p>
<p></p>

<ul>
<li>Changed domainpart preparation to use IDNA2008 instead of IDNA2003.</li>
<li>Changed localpart preparation to use PRECIS instead of the Nodeprep profile of Stringprep.</li>
<li>Changed resourcepart preparation to use PRECIS instead of the Resourceprep profile of Stringprep.</li>
</ul>

<p> </p>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> <a href="#acks" id="acks">Acknowledgements</a>
</h1>
<p id="rfc.section.Appendix B.p.1">Some text in this document was borrowed or adapted from <a href="#IDNA-DEFS">[IDNA-DEFS]</a>, <a href="#IDNA-PROTO">[IDNA-PROTO]</a>, <a href="#IDNA-RATIONALE">[IDNA-RATIONALE]</a>, and <a href="#XEP-0165">[XEP-0165]</a>.</p>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Peter Saint-Andre</span> 
	  <span class="n hidden">
		<span class="family-name">Saint-Andre</span>
	  </span>
	</span>
	<span class="org vcardline">Cisco</span>
	<span class="adr">
	  <span>1899 Wyknoop Street, Suite 600</span>

	  <span class="vcardline">
		<span class="locality">Denver</span>,  
		<span class="region">CO</span> 
		<span class="code">80202</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1-303-308-3282</span>

<span class="vcardline">EMail: <a href="mailto:psaintan@cisco.com">psaintan@cisco.com</a></span>

  </address>
</div>

</body>
</html>