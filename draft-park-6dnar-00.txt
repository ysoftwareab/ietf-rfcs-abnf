  INTERNET-DRAFT                                    Soohong Daniel Park           
  Expires: June 2003                                       Pyungsoo Kim
                                                          Youngkeun Kim
                                                    Samsung Electronics                    
                                                           January 2003




               IPv6 Domain Name Auto-Registration (6DNAR)
                       draft-park-6dnar-00.txt
              

             

  Status of This Memo

  This document is an Internet-Draft and is subject to all provisions
  of Section 10 of RFC2026.

  Internet-Drafts are working documents of the Internet Engineering
  Task Force (IETF), its areas, and its working groups.  Note that
  other groups may also distribute working documents as Internet-
  Drafts.

  Internet-Drafts are draft documents valid for a maximum of six
  months and may be updated, replaced, or obsoleted by other
  documents at any time.  It is inappropriate to use Internet-Drafts
  as reference material or to cite them other than as "work in
  progress."

  The list of current Internet-Drafts can be accessed at
  http://www.ietf.org/ietf/1id-abstracts.txt

  The list of Internet-Draft Shadow Directories can be accessed at
  http://www.ietf.org/shadow.html.



  Abstract  

  The address in IPv6[2460] architecture is difficult to remember,
  so many users need to use  Domain Name instead of IPv6 address. 
  In addition, some networks like home network or small network using
  IPv6, that want to make network easily without having  configure
  the DNS Server.  Even if DNS Server remains, there is no need to 
  manually configure it. Therefore, this draft proposes automatic 
  configuration of IPv6 network using Domain Name  Auto-Registration 
  (called 6DNAR). In order to provide 6DNAR function, Neighbor 
  Discovery Protocol[2461] will be used.













  Park,Kim,Kim                                                 [page 1]
   
  Table of Contents
 
  1.  Introduction ............................................ 2
  2.  Terminology ............................................. 2
  3.  DAD operation ........................................... 2
      3.1   ND' option ........................................ 4
      3.2   Domain Name into new option ....................... 4
  4.  Duplication procedure ................................... 5
      4.1   Duplication of Domain Name ........................ 5
      4.2   New flag of NA .................................... 5
      4.3   Options of NA ..................................... 6
  5.  Autoregistration both IPv6 address and Domain Name ...... 6
  6.  Address scope ........................................... 7
  Reference ................................................... 8
  Author' addresses ........................................... 9





                                                       

  1.  Introduction
 
  Today most networks use DNS[1034][1035] for convenience.
  In IPv6 case, DNS is more important element because of long address 
  architecture. In addition, some networks like home network or small 
  network using IPv6, just want to make network easily without 
  configuring DNS Server. This draft discusses IPv6 Domain Name 
  Auto-Registration(6DNAR) processing. 6DNAR can be applied to all 
  defined IPv6 address, Link-local address, Site-local address and 
  Global address.
 
 
 
 
  2.  Terminology
   
  NS            - Neighbor Solicition message (is defined [2461])
 
  NA            - Neighbor Advertisement message (is defined [2461]
 
  DAD           - Duplication Address Detection (is defined [2461]
 
  "D" flag      - D flag is defined newly for acknowledgement of
                  duplication of Domain Name (temporary defined)
 
 
 
 
  3.  DAD operation
 
  As we know, DAD uses Neighbor Discovery[2461] Protocol.
  When all interfaces compose of each address, especially Link-local
  address, DAD processing must be operated for detecting of duplicated
  address. During DAD, NS Message is sent to all nodes. If this address
  is duplicated, they received node  must reply to originated  which 
  was sent NS Message, using NA Message. If not, all nodes don't reply.
  e.g. is as follows:
 
  
  Park,Kim,Kim                                                 [page 2]
 
                       
        [node1] ---------------------->
                  send NS Message
 
        MAC address        : aa:bb:cc:dd:ee:ff
        Interface ID       : aabb:ccff:fedd:eeff(EUI-64)
        SRC                : :: (unspecified address)
        DST                : ff02::1:fedd:eeff
                             (Solicited-node multicast address)
        Target address     : fe80::aabb:ccff:fedd:eeff
                             (node1' Link-local address)
        Option             : NO
       
                                .
                                .
                                .
                                .
                                       
                            not reply
                       
       
            <Figure 1 : NS Message for DAD on starting>
       
       
       
 
  Neighbor Solicitation Message format is as follows
 
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |     Type      |     Code      |          Checksum             |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                           Reserved                            |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  +                                                               +
  |                                                               |
  +                       Target Address                          +
  |                                                               |
  +                                                               +
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |   Options ...
  +-+-+-+-+-+-+-+-+-+-+-+-
 
 
        <Figure 2 : Neighbor Solicitation Message format>
 
 
 
  After verifying address uniqueness, node1' Link-local address is
  assigned own interface. If node1 is received reply message, this
  address is duplicated, therefore this address can't assign and
  have to use stateful autoconfiguration for own address. However,
  in small network case, duplication is hardly happened. After 
  stateful autoconfiguration, node1 must try to registrate again. 
  Note that above NS Message for DAD don't have any option.
 
 
 
  Park,Kim,Kim                                                 [page 3]
 
  3.1  ND' option
 
  NDP[2461] defines five types for option field as follows
 
 
  
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |     Type      |    Length     |              ...              |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  ~                              ...                              ~
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

 
        Option Name                              Type

        Source Link-Layer Address                 1
        Target Link-Layer Address                 2
        Prefix Information                        3
        Redirected Header                         4
        MTU                                       5
       
 
        <Figure 3 : Neighbor Discovery Option format and types>
       
               
 
 
  3.2  Domain Name into new option
 
  DNS Server can know node' Link-local address through DAD processing
  because NS Message has node' Link-local address into target address
  field. In order to announce Domain Name simultaneously,
  this draft defines new option (Type will be defined).
 
 
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |     Type      |    Length     |              ...              |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  ~                          Domain Name                          ~
  ~                                                               ~
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 
        Option Name                              Type
       
        ....                                      ..
        Domain Name                              (TBD)
       
       
              <Figure 4 : new option for Domain Name>
       
       
       
       
       
       
       
 
  Park,Kim,Kim                                                 [page 4]
 
  4.  Duplication procedure
 
  There are two kinds of duplications, IPv6 address and Domain Name.
  Duplication of IPv6 address can not be stateless autoregistration
  repeatly so, it must be configured stateful mechanism [2461]. 
  However, Duplication of Domain Name is different.
  It can be modified and registrated repealty.
 
 
   
 
  4.1  Duplication of Domain Name
 
  If IPv6 address or Domain Name is duplicated in file when DNS Server
  is registrating, DNS Server must reply to originated node to announce
  duplication. If IPv6 address is duplication, by [2461] node should
  be configured stateful autoconfiguration. However, if Domain Name is
  duplicated, it can only change Domain Name and registe
  repeatly. Note that for supporting of repeat registration, NA [2461]
  must be modified to announce duplication of Domain Name not IPv6
  address.
 
 
 
 
 
  4.2  New flag of NA
 
  In order to announce duplication, node is received NS message which 
  must reply NA message to originated node in response to NS message.
 
 
 
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Type      |     Code      |          Checksum             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |R|S|O|D|                   Reserved                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +                                                               +
   |                                                               |
   +                       Target Address                          +
   |                                                               |
   +                                                               +
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   Options ...                                                 |
   |                    Domain Name of NS' Option                  |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  
  
   Note that new "D" (temporary defined) flag is defined to announce
   duplication of Domain Name. another flag was shown [2461]
 
  
                <Figure 5 : new flag for NA message>
               
  
  Park,Kim,Kim                                                 [page 5]
       
  4.3  Options of NA
  
  In order to announce duplicated Domain Name, NA message must have
  duplicated Domain Name in Options field
  
  
  
  
  
  5.  Autoregistration both IPv6 address and Domain Name
 
  Since NS Message for DAD has both IPv6 address and Domain Name, all
  nodes including DNS Server and any kind of Server can obtain which 
  want to Interface informations. In order to register address and 
  Domain Name to own file, DNS Server must receive NS Message which 
  has new option, then reserve IP address included in target address' 
  field and Domain Name included in new option' field.  
  e.g. is shown below

 
        [node1] -----(sending NS Message)-----> [DNS Server]
   
    node1.example.com    
                 
                   
        MAC address        : aa:bb:cc:dd:ee:ff
        Domain Name        : node1.example.com
        Interface ID       : aabb:ccff:fedd:eeff(EUI-64)
        SRC                : :: (unspecified address)
        DST                : ff02::1:fedd:eeff
                                (Solicited-node multicast address)
        Target address     : fe80::aabb:ccff:fedd:eeff
                                (node1' Link-local address)
        Option             : node1.example.com
       
       
             <Figure 6 : new option' NS Message>
 
 
  Even if someone don't configure DNS Server, DNS Server can obtain 
  and register IP and Domain Name to own file. However, obtained 
  address is not global address, but  still link -local adress. 
  If an admistrator want to make use of global address, DNS Server 
  must receive global prefix information from router or any 
  equipment. When global prefix is announced, DNS Server reserves 
  global prefix for the purpose of making a global address using 
  global prefix and Interface ID which is obtained from target 
  address' low-order 64 bits. (see section 6. Address scope)
 
 
 
 
 
 
 
 
 
 
 
 
 
  Park,Kim,Kim                                                 [page 6]
  
  6.  Address scope

  [2373] defines Link-local address, Site-local address and Global
  address. Link-local address is generated by itself of course DAD must
  be confirmed. Therefore, if only Link-local address is used, another
  prefix is not required. But for using of Site-local or Global,       
  an appropriate prefix must be announced from router or that kind of
  equipment.

  
   
                                               
            6DNA                     DNS                
            Node                     Server                   router
              |                        |                        |
              |<-----------------------|<----(prefix by RA)-----|*
              |                        |                        |
              |                 storing prefix                  |
              |                        |                        |
   [1]        |           .            |                        |
   node ON    |           .            |                        |
   DAD        |           .            |                        |
   processing |----(sending NS)------->|----------------------->|**
              |                        |                        |
              |                obtaining IPv6 address           |
              |                   and Domain Name               |
              |                        |                        |
              |             IPv6 address Duplication            |
              |                        |                        |
              |<----(sending NA)-------|----------------------->|***
   Stateful   |                        |                        |
   state      |                        |                        |
              |           .            |                        |
   obtained   |           .            |                        |
   address    |           .            |                        |
   from server|                        |                        |
              |----(go to [1])-------->|----------------------->|
              |           .            |                        |
              |           .            |                        |
              |              Domain Name Duplication            |      
              |                        |                        |
   changing   |<--(sending newly NA)---|****                    |
   Domain Name|                        |                        |
              |                        |                        |
              |----(sending NS)------->|****                    |
              |                        |                        |
              |                  registrating                   |
              |            (stored prefix + obtained ID         |
              |             and changed Domain Name)            |

              |                        |                        |
               
             
             
   
   
                         <Figure 7 : 6DNA mechanism>
   
   
   
       
  Park,Kim,Kim                                                 [page 7]     
       
              
        Note:
       
        *       is either site-local prefix or global prefix
       
        **      is solicited node multicast address
       
        ***     is all node multicast address
       
        ****    is unicast address
 
 
 
   
   
 
 
 
 
 References
 
   
  [2373]        Hinden, R. and S. Deering, "IP Version 6 Addressing
                Architecture", RFC 2373, July 1998
               
  [2460]        Deering, S. abd R. Hinden, "Internet Protocol, Version 6
                (IPv6) Specification", RFC 2460, December 1998
               
  [2461]        Narten, T., Mordmark, E. and W. Simpson, "Neighbor
                Discovery for IP version 6(IPv6)", RFC 2461, December
                1998
               
  [1034]        P. Mockapetris, "DOMAIN NAMES - CONCEPTS AND FACILITIES"
                RFC 1034, November 1987
               
  [1035]        P. Mockapetris, "Domain Names - Implementation and
                Specification" RFC 1035, November 1987
























  Park,Kim,Kim                                                 [page 8]



  Authors' Addresses

  Soohong Daniel Park
  Samsung Electronics
  Digital Media R&D Center
  416, Maetan-3Dong,Paldal-Gu,
  Suwon City, Gyeonggi-Do,Korea

  Phone: +82-31-200-3728
  Email:soohong.park@samsung.com


  Pyungsoo Kim
  Samsung Electronics
  Digital Media R&D Center
  416, Maetan-3Dong,Paldal-Gu,
  Suwon City, Gyeonggi-Do,Korea

  Phone: +82-31-200-4635
  Email:kimps@samsung.com


  Youngkeun Kim
  Samsung Electronics
  Digital Media R&D Center
  416, Maetan-3Dong,Paldal-Gu,
  Suwon City, Gyeonggi-Do,Korea

  Phone: +82-31-200-3772
  Email:ykksam@samsung.com





























  Park,Kim,Kim                                                 [page 9]
