


MEXT Working Group                                             F. Dupont
Internet-Draft                                                       ISC
Intended status: Experimental                                  W. Haddad
Expires: August 21, 2008                               Ericsson Research
                                                       February 18, 2008


                      DHCPv6 Relay Agents and NEMO
                   draft-dupont-mext-dhcrelay-00.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 21, 2008.

Copyright Notice

   Copyright (C) The IETF Trust (2008).

Abstract

   The IPv6 network mobility (NEMO) configuration relies on a prefix
   delegation service to fulfill its task.  Such service has already
   been described in two different proposals, one is based on DHCPv6 and
   the other extends NEMO signaling.

   However, both failed to gather consensus.  This memo describes how
   DHCPv6 Relay Agents can be used in order to provide the missing



Dupont & Haddad          Expires August 21, 2008                [Page 1]

Internet-Draft        DHCPv6 Relay Agents and NEMO         February 2008


   flexibility and pave the way for a solution.


1.  Introduction

   One aspect of network mobility support is the assignment of a prefix
   or a set of prefixes to a Mobile Router (MR) for use on the links in
   the Mobile Network.  For this purpose, two solutions have been
   proposed.  The first one (described in [NEMOdhc]) uses DHPCv6
   [RFC3315] Prefix Delegation [RFC3633] in the tunnel between the MR
   and its Home Agent (HA), while the second [NEMOpd] is an adhoc
   extension of NEMO signaling.

   While DHCPv6 Prefix Delegation is the standard way to provide the
   Prefix Delegation service, using it directly over the MR-HA tunnel is
   far from immediate and a source of complexities.  In an attempt to
   avoid these complexities, the second proposal did not reuse the
   DHCPv6 Prefix Delegation framework but failed to gain a rough
   consensus as it went against the DHCPv6 mainstream.

   In order to improve this situation, the use of DHCPv6 Relay Agents
   has been suggested but was never written down and thus, had a limited
   effect.  This document aims to explain how a clever use of DHCPv6
   Relay Agents can inject the desired flexibility to extend the
   applicability of DHCPv6 in general and DHCPv6 Prefix Delegation in
   particular to environments with very different constraints than in
   the original design.


2.  A short description of DHCPv6 Relay Agent function

   The main function of DHCPv6 Relay Agents is to allow DHCPv6 Servers
   to be located anywhere in the network and not only on the same link
   than their Clients.  But DHCPv6 extends it with the support of
   multiple Relays, the resulting topology from a Client is a tree with:
   -  the Client as the tree root
   -  Relays as intermediate nodes
   -  Servers as leaves
   Relays forward messages from downstream Clients or Relays to upstream
   Servers or Relays, using unicast and/or multicast, and forward
   responses back in the other way.

   DHCPv6 Relay Agents use two specific messages (Relay-forward and
   Relay-repl).  These messages share a common header:
   -  a message type
   -  a hop-count (to detect loops)





Dupont & Haddad          Expires August 21, 2008                [Page 2]

Internet-Draft        DHCPv6 Relay Agents and NEMO         February 2008


   -  a link-address (to identify the downstream link)
   -  a peer-address (to identity the downstream Client or Relay)
   To help the identification of the downstream link, the Relay may
   insert an Interface-id option which will be reflected back by Servers
   in Relay-repl messages.  The content of this option is opaque, i.e.,
   Servers do not parse it.

   On another side, for the identification of DHCPv6 Clients, Relay
   Agents may insert Subscriber-id [RFC4580] or Remote-id [RFC4649]
   options in Relay-forward messages.


3.  Flexibility introduced by the use of DHCPv6 Relay Agents

   DHCPv6 mandates the Client to use link-local address and multicast to
   communicate with an onlink Server or Relay.  Such design makes sense
   for global address assignments but is a very annoying constraint in
   the MR-HA context.

   Since a Relay does not have such constraint, the idea is to co-locate
   a Relay in the MR at the MR end of the tunnel.


4.  Transport of DHCPv6 messages

   DHCPv6 messages can be easily encapsulated, in fact relaying
   encapsulates recursively DHCPv6 messages in Relay-message options.
   But when reusing DHCPv6 code, the Relay function is the easiest,
   i.e., when flexibility is needed to support transport of DHCPv6
   messages in a not standard way the solution is to use (again) Relays.
   Consequently, the main argument of NEMO Prefix Delegation [NEMOpd],
   the overhead to run signaling then prefix delegation after each
   movement, no more stands as DHCPv6 can be piggy-backed into the
   mobility signaling.


5.  Final recommendation

   If the use of DHCPv6 Relays introduces flexibility, it shoud
   nevertheless be mentioned that this is not a reason to enforce their
   use.  It follows that the wording should be enough accurate in order
   to keep the choice between a Relay or another entity.  For instance,
   the DHCPv6 Prefix Delegation for NEMO [NEMOdhc] is right when it
   allows a Relay or a Server in the Home Agent.







Dupont & Haddad          Expires August 21, 2008                [Page 3]

Internet-Draft        DHCPv6 Relay Agents and NEMO         February 2008


6.  Acknowledgments

   The idea described in this document is not new so we are sure it is
   not our own idea...


7.  Security Considerations

   This memo proposes some ways to improve code and security analysis
   sharing for the Prefix Delegation service so should indirectly help
   security.


8.  IANA Considerations

   None.


9.  References

9.1.  Normative References

   [RFC3315]  Droms, R., Ed., Bound, J., Volz, B., Lemon, T., Perkins,
              C., and M. Carney, "Dynamic Host Configuration Protocol
              for IPv6 (DHCPv6)", RFC 3315, July 2003.

   [RFC3633]  Troan, O. and R. Droms, "IPv6 Prefix Options for Dynamic
              Host Configuration Protocol (DHCP) version 6", RFC 3633,
              December 2003.

9.2.  Informative References

   [NEMOdhc]  Droms, R. and P. Thubert, "DHCPv6 Prefix Delegation for
              NEMO", draft-ietf-nemo-dhcpv6-pd-03.txt (work in
              progress), December 2007.

   [NEMOpd]   Thubert, P. and TJ. Kniveton, "Mobile Network Prefix
              Delegation", draft-ietf-nemo-prefix-delegation-02.txt
              (work in progress), August 2007.

   [RFC4580]  Volz, B., "Dynamic Host Configuration Protocol for IPv6
              (DHCPv6) Relay Agent Subscriber-ID Option", RFC 4580,
              June 2006.

   [RFC4649]  Volz, B., "Dynamic Host Configuration Protocol for IPv6
              (DHCPv6) Relay Agent Remote-ID Option", RFC 4649,
              August 2006.




Dupont & Haddad          Expires August 21, 2008                [Page 4]

Internet-Draft        DHCPv6 Relay Agents and NEMO         February 2008


Authors' Addresses

   Francis Dupont
   ISC

   Email: Francis.Dupont@fdupont.fr


   Wassim Haddad
   Ericsson Research

   Email: Wassim.Haddad@ericsson.com







































Dupont & Haddad          Expires August 21, 2008                [Page 5]

Internet-Draft        DHCPv6 Relay Agents and NEMO         February 2008


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Acknowledgment

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).





Dupont & Haddad          Expires August 21, 2008                [Page 6]

