





Network Working Group                                   Pedro R. Marques
Internet Draft                                       cisco Systems, Inc.
Expiration Date: May 1998
                                                           November 1997


    BGP-4 Capabilities Negotiation for BGP Multiprotocol Extensions


                    draft-marques-bgp4-cap-mp-00.txt

Status of this Memo

   This document is an Internet-Draft.  Internet-Drafts are working
   documents of the Internet Engineering Task Force (IETF), its areas,
   and its working groups.  Note that other groups may also distribute
   working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   To learn the current status of any Internet-Draft, please check the
   "1id-abstracts.txt" listing contained in the Internet-Drafts Shadow
   Directories on ftp.is.co.za (Africa), nic.nordu.net (Europe),
   munnari.oz.au (Pacific Rim), ds.internic.net (US East Coast), or
   ftp.isi.edu (US West Coast).


1. Abstract

   This document defines the usage of the BGP-4 Capabilities Negotiation
   parameter to negotiate the support for a particular Address Family,
   Sub-address Family pair between BGP-4 speakers using BGP-4
   Multiprotocol Extensions.


2. Overview

   BGP-4 Multiprotocol Extensions [BGP-MP] define two optional non-
   transitive attributes that enable BGP-4 to carry routing information
   for multiple Network Layer protocols. Such attributes are ignored by
   BGP-4 when unrecognized either because the peer doesn't implement or
   is not configured to accept BGP-4 Multiprotocol Extensions or a given
   (AFI, SAFI) pair.

   The use of BGP-4 Capabilities Parameter [BGP-CAP] allows two peers to



Marques                                                         [Page 1]

Internet Draft      draft-marques-bgp4-cap-mp-00.txt       November 1997


   negotiate the set of (AFI, SAFI) combinations supported on a
   particular peering relationship.  This document defines a Capability
   Code that can be used for this purpose.


3. MP Capability Code

   BGP speakers that wish to negotiate the set of (AFI, SAFI) pairs
   availiable on a particular peering should use the MP_EXT Capability
   Code (Type 0x81, in hexadecimal). The high-order bit on this code is
   set to 1 meaning that this Capability is marked as "Required".

   The Capability Value associated with the code is a 32 bit value, in
   network byte-order, defined as:


                     0       7      15      23      31
                     +-------+-------+-------+-------+
                     |      AFI      | Res.  | SAFI  |
                     +-------+-------+-------+-------+

   The use and meaning of this fields is as follows:


         AFI  - Address Family Identifier (16 bit) as defined in [RFC-
         1700].

         Res. - Reserved (8 bit) field. Should be set to 0 by the sender
         and ignored by the receiver.

         SAFI - Subsequent Address Family Identifier (8 bit) field as
         defined in [BGP-MP]

   Each (AFI, SAFI) pair is encoded in the Capabilities Optional
   Parameter of a BGP-4 OPEN message as a separate triple <MP_EXT
   Capability Code, Capability Length, MP_EXT Capability Value>. This
   allows the requester to identify which (AFI, SAFI) values are not
   supported by the peer on the receipt of a Unsupported Capability
   NOTIFICATION.












Marques                                                         [Page 2]

Internet Draft      draft-marques-bgp4-cap-mp-00.txt       November 1997


4. Security Considerations

   Security issues are not discussed in this document.


5. Acknowledgements

   To be supplied.


6. References

   [BGP-4]     "A Border Gateway Protocol 4 (BGP-4)",
               Y. Rekhter and T. Li, RFC1771, March 1995.

   [BGP-CAP]   "Capabilities Negotiation with BGP-4",
               R. Chandra and J. Scudder, Internet Draft, August 1997.
               <draft-ietf-idr-bgp4-cap-neg-00.txt>

   [BGP-MP]    "Multiprotocol Extensions for BGP-4",
               T. Bates, R. Chandra, D. Katz, and Y. Rekhter,
               Internet Draft, September 1997.
               <draft-ietf-idr-bgp4-multiprotocol-01.txt>

   [RFC1700]   "Assigned Numbers",
               J. Reynolds and J. Postel, RFC 1700, October 1994.


7. Author Information

   Pedro R. Marques
   cisco Systems, Inc.
   170 West Tasman Drive
   San Jose, CA 95134
   email: roque@cisco.com
















Marques                                                         [Page 3]

