<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Indicating Character Encoding and Language for HTTP Header Field Parameters</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Notational Conventions">
<link href="#rfc.section.3" rel="Chapter" title="3 Comparison to RFC 2231 and Definition of the Encoding">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Parameter Continuations">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Parameter Value Character Set and Language Information">
<link href="#rfc.section.3.2.1" rel="Chapter" title="3.2.1 Definition">
<link href="#rfc.section.3.2.2" rel="Chapter" title="3.2.2 Examples">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Language Specification in Encoded Words">
<link href="#rfc.section.4" rel="Chapter" title="4 Guidelines for Usage in HTTP Header Field Definitions">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 When to Use the Extension">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Error Handling">
<link href="#rfc.section.5" rel="Chapter" title="5 Security Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="7 References">
<link href="#rfc.references.1" rel="Chapter" title="7.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="7.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Changes from RFC 5987">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B Change Log (to be removed by RFC Editor before publication)">
<link href="#rfc.appendix.Appendix%20B.1" rel="Chapter" title="Appendix B.1 Since RFC5987">
<link href="#rfc.appendix.Appendix%20B.2" rel="Chapter" title="Appendix B.2 Since draft-reschke-rfc5987bis-00">
<link href="#rfc.appendix.Appendix%20C" rel="Chapter" title="Appendix C Resolved issues (to be removed by RFC Editor before publication)">
<link href="#rfc.appendix.Appendix%20C.1" rel="Chapter" title="Appendix C.1 iso-8859-1">
<link href="#rfc.appendix.Appendix%20C.2" rel="Chapter" title="Appendix C.2 title">
<link href="#rfc.appendix.Appendix%20C.3" rel="Chapter" title="Appendix C.3 historic5987">
<link href="#rfc.appendix.Appendix%20D" rel="Chapter" title="Appendix D Open issues (to be removed by RFC Editor prior to publication)">
<link href="#rfc.appendix.Appendix%20D.1" rel="Chapter" title="Appendix D.1 edit">
<link href="#rfc.appendix.Appendix%20D.2" rel="Chapter" title="Appendix D.2 impls">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="By default, message header field parameters in Hypertext Transfer Protocol (HTTP) messages cannot carry characters outside the ISO-8859-1 character set. RFC 2231 defines an encoding mechanism for use in Multipurpose Internet Mail Extensions (MIME) headers. This document specifies an encoding suitable for use in HTTP header fields that is compatible with a profile of the encoding defined in RFC 2231.  " />
  <meta name="description" content="By default, message header field parameters in Hypertext Transfer Protocol (HTTP) messages cannot carry characters outside the ISO-8859-1 character set. RFC 2231 defines an encoding mechanism for use in Multipurpose Internet Mail Extensions (MIME) headers. This document specifies an encoding suitable for use in HTTP header fields that is compatible with a profile of the encoding defined in RFC 2231.  " />
  <meta name="keywords" content="HTTP, header field parameter, internationalization" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">J. F. Reschke</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">greenbytes</td>
</tr>
<tr>
<td class="left">Obsoletes: 5987 (if approved)</td>
<td class="right">September 08, 2011</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right"></td>
</tr>
<tr>
<td class="left">Expires: March 11, 2012</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Indicating Character Encoding and Language for HTTP Header Field Parameters<br />
  <span class="filename">draft-reschke-rfc5987bis-01</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>By default, message header field parameters in Hypertext Transfer Protocol (HTTP) messages cannot carry characters outside the ISO-8859-1 character set. RFC 2231 defines an encoding mechanism for use in Multipurpose Internet Mail Extensions (MIME) headers. This document specifies an encoding suitable for use in HTTP header fields that is compatible with a profile of the encoding defined in RFC 2231.  </p>
<h1><a>Editorial Note (To be removed by RFC Editor before publication)</a></h1>
<p>Distribution of this document is unlimited. Although this is not a work item of the HTTPbis Working Group, comments should be sent to the Hypertext Transfer Protocol (HTTP) mailing list at <a href="mailto:ietf-http-wg@w3.org">ietf-http-wg@w3.org</a>, which may be joined by sending a message with subject "subscribe" to <a href="mailto:ietf-http-wg-request@w3.org?subject=subscribe">ietf-http-wg-request@w3.org</a>.  </p>
<p>Discussions of the HTTPbis Working Group are archived at <a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">http://lists.w3.org/Archives/Public/ietf-http-wg/</a>.  </p>
<p>XML versions, latest edits and the issues list for this document are available from <a href="http://greenbytes.de/tech/webdav/#draft-reschke-rfc5987bis">http://greenbytes.de/tech/webdav/#draft-reschke-rfc5987bis</a>.  A collection of test cases is available at <a href="http://greenbytes.de/tech/tc2231/">http://greenbytes.de/tech/tc2231/</a>.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on March 11, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Notational Conventions</a>
</li>
<li>3.   <a href="#rfc.section.3">Comparison to RFC 2231 and Definition of the Encoding</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Parameter Continuations</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Parameter Value Character Set and Language Information</a>
</li>
<li>3.2.1.   <a href="#rfc.section.3.2.1">Definition</a>
</li>
<li>3.2.2.   <a href="#rfc.section.3.2.2">Examples</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Language Specification in Encoded Words</a>
</li>
<li>4.   <a href="#rfc.section.4">Guidelines for Usage in HTTP Header Field Definitions</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">When to Use the Extension</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Error Handling</a>
</li>
<li>5.   <a href="#rfc.section.5">Security Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">Acknowledgements</a>
</li>
<li>7.   <a href="#rfc.references">References</a>
</li>
<li>7.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>7.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Changes from RFC 5987</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">Change Log (to be removed by RFC Editor before publication)</a>
</li>
<li>Appendix B.1.   <a href="#rfc.appendix.Appendix%20B.1">Since RFC5987</a>
</li>
<li>Appendix B.2.   <a href="#rfc.appendix.Appendix%20B.2">Since draft-reschke-rfc5987bis-00</a>
</li>
<li>Appendix C.   <a href="#rfc.appendix.Appendix%20C">Resolved issues (to be removed by RFC Editor before publication)</a>
</li>
<li>Appendix C.1.   <a href="#rfc.appendix.Appendix%20C.1">iso-8859-1</a>
</li>
<li>Appendix C.2.   <a href="#rfc.appendix.Appendix%20C.2">title</a>
</li>
<li>Appendix C.3.   <a href="#rfc.appendix.Appendix%20C.3">historic5987</a>
</li>
<li>Appendix D.   <a href="#rfc.appendix.Appendix%20D">Open issues (to be removed by RFC Editor prior to publication)</a>
</li>
<li>Appendix D.1.   <a href="#rfc.appendix.Appendix%20D.1">edit</a>
</li>
<li>Appendix D.2.   <a href="#rfc.appendix.Appendix%20D.2">impls</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">By default, message header field parameters in HTTP (<a href="#RFC2616">[RFC2616]</a>) messages cannot carry characters outside the ISO-8859-1 character set (<a href="#ISO-8859-1">[ISO-8859-1]</a>). RFC 2231 (<a href="#RFC2231">[RFC2231]</a>) defines an encoding mechanism for use in MIME headers.  This document specifies an encoding suitable for use in HTTP header fields that is compatible with a profile of the encoding defined in RFC 2231.  </p>
<p id="rfc.section.1.p.2">This document obsoletes <a href="#RFC5987">[RFC5987]</a> and moves it to "historic" status; the changes are summarized in <a href="#changes.from.rfc5987">Appendix Appendix A</a>.  </p>
<p></p>

<ul class="empty"><li>Note: in the remainder of this document, RFC 2231 is only referenced for the purpose of explaining the choice of features that were adopted; they are therefore purely informative.  </li></ul>
<p></p>

<ul class="empty"><li>Note: this encoding does not apply to message payloads transmitted over HTTP, such as when using the media type "multipart/form-data" (<a href="#RFC2388">[RFC2388]</a>).  </li></ul>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Notational Conventions</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.  </p>
<p id="rfc.section.2.p.2">This specification uses the ABNF (Augmented Backus-Naur Form) notation defined in <a href="#RFC5234">[RFC5234]</a>. The following core rules are included by reference, as defined in <a href="#RFC5234">[RFC5234]</a>, Appendix B.1: ALPHA (letters), DIGIT (decimal 0-9), HEXDIG (hexadecimal 0-9/A-F/a-f), and LWSP (linear whitespace).  </p>
<p id="rfc.section.2.p.3">Note that this specification uses the term "character set" for consistency with other IETF specifications such as RFC 2277 (see <a href="#RFC2277">[RFC2277]</a>, Section 3). A more accurate term would be "character encoding" (a mapping of code points to octet sequences).  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Comparison to RFC 2231 and Definition of the Encoding</h1>
<p id="rfc.section.3.p.1">RFC 2231 defines several extensions to MIME. The sections below discuss if and how they apply to HTTP header fields.  </p>
<p id="rfc.section.3.p.2">In short: </p>

<ul>
<li>Parameter Continuations aren't needed (<a href="#parameter.continuations">Section 3.1</a>),</li>
<li>Character Set and Language Information are useful, therefore a simple subset is specified (<a href="#character.set.and.language.information">Section 3.2</a>), and</li>
<li>Language Specifications in Encoded Words aren't needed (<a href="#language.specification.in.encoded.words">Section 3.3</a>).</li>
</ul>

<p> </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#parameter.continuations" id="parameter.continuations">Parameter Continuations</a>
</h1>
<p id="rfc.section.3.1.p.1">Section 3 of <a href="#RFC2231">[RFC2231]</a> defines a mechanism that deals with the length limitations that apply to MIME headers. These limitations do not apply to HTTP (<a href="#RFC2616">[RFC2616]</a>, Section 19.4.7).  </p>
<p id="rfc.section.3.1.p.2">Thus, parameter continuations are not part of the encoding defined by this specification.  </p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#character.set.and.language.information" id="character.set.and.language.information">Parameter Value Character Set and Language Information</a>
</h1>
<p id="rfc.section.3.2.p.1">Section 4 of <a href="#RFC2231">[RFC2231]</a> specifies how to embed language information into parameter values, and also how to encode non-ASCII characters, dealing with restrictions both in MIME and HTTP header parameters.  </p>
<p id="rfc.section.3.2.p.2">However, RFC 2231 does not specify a mandatory-to-implement character set, making it hard for senders to decide which character set to use.  Thus, recipients implementing this specification MUST support the "UTF-8" character set <a href="#RFC3629">[RFC3629]</a>.  </p>
<p id="rfc.section.3.2.p.3">Furthermore, RFC 2231 allows the character set information to be left out.  The encoding defined by this specification does not allow that.  </p>
<h1 id="rfc.section.3.2.1">
<a href="#rfc.section.3.2.1">3.2.1.</a> Definition</h1>
<p id="rfc.section.3.2.1.p.1">The syntax for parameters is defined in Section 3.6 of <a href="#RFC2616">[RFC2616]</a> (with RFC 2616 implied LWS translated to RFC 5234 LWSP): </p>
<div id="#rfc.figure.1"></div>
<pre>
  parameter     = attribute LWSP "=" LWSP value
</pre>
<div id="#rfc.figure.2"></div>
<pre>  attribute     = token
  value         = token / quoted-string

  quoted-string = &lt;quoted-string, defined in [RFC2616], Section 2.2&gt;
  token         = &lt;token, defined in [RFC2616], Section 2.2&gt;
</pre>
<p id="rfc.section.3.2.1.p.2">In order to include character set and language information, this specification modifies the RFC 2616 grammar to be: </p>
<div id="#rfc.figure.3"></div>
<pre>
  parameter     = reg-parameter / ext-parameter

  reg-parameter = parmname LWSP "=" LWSP value

  ext-parameter = parmname "*" LWSP "=" LWSP ext-value

  parmname      = 1*attr-char

  ext-value     = charset  "'" [ language ] "'" value-chars
                ; like RFC 2231's &lt;extended-initial-value&gt;
                ; (see [RFC2231], Section 7)

  charset       = "UTF-8" / mime-charset

  mime-charset  = 1*mime-charsetc
  mime-charsetc = ALPHA / DIGIT
                / "!" / "#" / "$" / "%" / "&amp;"
                / "+" / "-" / "^" / "_" / "`"
                / "{" / "}" / "~"
                ; as &lt;mime-charset&gt; in Section 2.3 of [RFC2978]
                ; except that the single quote is not included
                ; SHOULD be registered in the IANA charset registry

  language      = &lt;Language-Tag, defined in [RFC5646], Section 2.1&gt;

  value-chars   = *( pct-encoded / attr-char )

  pct-encoded   = "%" HEXDIG HEXDIG
                ; see [RFC3986], Section 2.1

  attr-char     = ALPHA / DIGIT
                / "!" / "#" / "$" / "&amp;" / "+" / "-" / "."
                / "^" / "_" / "`" / "|" / "~"
                ; token except ( "*" / "'" / "%" )
</pre>
<p id="rfc.section.3.2.1.p.3">Thus, a parameter is either a regular parameter (reg-parameter), as previously defined in Section 3.6 of <a href="#RFC2616">[RFC2616]</a>, or an extended parameter (ext-parameter).  </p>
<p id="rfc.section.3.2.1.p.4">Extended parameters are those where the left-hand side of the assignment ends with an asterisk character.  </p>
<p id="rfc.section.3.2.1.p.5">The value part of an extended parameter (ext-value) is a token that consists of three parts: the REQUIRED character set name (charset), the OPTIONAL language information (language), and a character sequence representing the actual value (value-chars), separated by single quote characters. Note that both character set names and language tags are restricted to the US-ASCII character set, and are matched case-insensitively (see <a href="#RFC2978">[RFC2978]</a>, Section 2.3 and <a href="#RFC5646">[RFC5646]</a>, Section 2.1.1).  </p>
<p id="rfc.section.3.2.1.p.6">Inside the value part, characters not contained in attr-char are encoded into an octet sequence using the specified character set. That octet sequence is then percent-encoded as specified in Section 2.1 of <a href="#RFC3986">[RFC3986]</a>.  </p>
<p id="rfc.section.3.2.1.p.7">Producers MUST use the "UTF-8" (<a href="#RFC3629">[RFC3629]</a>)  character set.  Extension character sets (mime-charset) are reserved for future use.  </p>
<p></p>

<ul class="empty"><li>Note: recipients should be prepared to handle encoding errors, such as malformed or incomplete percent escape sequences, or non-decodable octet sequences, in a robust manner. This specification does not mandate any specific behavior, for instance, the following strategies are all acceptable: <ul>
<li>ignoring the parameter,</li>
<li>stripping a non-decodable octet sequence,</li>
<li>substituting a non-decodable octet sequence by a replacement character, such as the Unicode character U+FFFD (Replacement Character).</li>
</ul>
<p> </p>
</li></ul>
<p></p>

<ul class="empty"><li>Note: the RFC 2616 token production (<a href="#RFC2616">[RFC2616]</a>, Section 2.2) differs from the production used in RFC 2231 (imported from Section 5.1 of <a href="#RFC2045">[RFC2045]</a>) in that curly braces ("{" and "}") are excluded. Thus, these two characters are excluded from the attr-char production as well.  </li></ul>
<p></p>

<ul class="empty"><li>Note:  the &lt;mime-charset&gt; ABNF defined here differs from the one in Section 2.3 of <a href="#RFC2978">[RFC2978]</a> in that it does not allow the single quote character (see also RFC Errata ID 1912 <a href="#Err1912">[Err1912]</a>). In practice, no character set names using that character have been registered at the time of this writing.  </li></ul>
<p></p>

<ul class="empty"><li>Note:  <a href="#RFC5987">[RFC5987]</a> did require support for ISO-8859-1, too; for compatibility with legacy code, recipients are encouraged to support this encoding as well.  </li></ul>
<h1 id="rfc.section.3.2.2">
<a href="#rfc.section.3.2.2">3.2.2.</a> <a href="#examples" id="examples">Examples</a>
</h1>
<div id="#rfc.figure.4"></div>
<p>Non-extended notation, using "token": </p>
<pre>
  foo: bar; title=Economy
</pre>
<div id="#rfc.figure.5"></div>
<p>Non-extended notation, using "quoted-string": </p>
<pre>
  foo: bar; title="US-$ rates"
</pre>
<div id="#rfc.figure.6"></div>
<p>Extended notation, using the Unicode character U+00A3 (POUND SIGN): </p>
<pre>
  foo: bar; title*=utf-8'en'%C2%A3%20rates
</pre>
<p>Note: the Unicode pound sign character U+00A3 was encoded into the octet sequence C2 A3 using the UTF-8 character encoding, then percent-encoded. Also, note that the space character was encoded as %20, as it is not contained in attr-char.  </p>
<div id="#rfc.figure.7"></div>
<p>Extended notation, using the Unicode characters U+00A3 (POUND SIGN) and U+20AC (EURO SIGN): </p>
<pre>
  foo: bar; title*=UTF-8''%c2%a3%20and%20%e2%82%ac%20rates
</pre>
<p>Note: the Unicode pound sign character U+00A3 was encoded into the octet sequence C2 A3 using the UTF-8 character encoding, then percent-encoded. Likewise, the Unicode euro sign character U+20AC was encoded into the octet sequence E2 82 AC, then percent-encoded. Also note that HEXDIG allows both lowercase and uppercase characters, so recipients must understand both, and that the language information is optional, while the character set is not.  </p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> <a href="#language.specification.in.encoded.words" id="language.specification.in.encoded.words">Language Specification in Encoded Words</a>
</h1>
<p id="rfc.section.3.3.p.1">Section 5 of <a href="#RFC2231">[RFC2231]</a> extends the encoding defined in <a href="#RFC2047">[RFC2047]</a> to also support language specification in encoded words. Although the HTTP/1.1 specification does refer to RFC 2047 (<a href="#RFC2616">[RFC2616]</a>, Section 2.2), it's not clear to which header field exactly it applies, and whether it is implemented in practice (see <a href="http://tools.ietf.org/wg/httpbis/trac/ticket/111">http://tools.ietf.org/wg/httpbis/trac/ticket/111</a> for details).  </p>
<p id="rfc.section.3.3.p.2">Thus, this specification does not include this feature.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#usage.guidelines" id="usage.guidelines">Guidelines for Usage in HTTP Header Field Definitions</a>
</h1>
<p id="rfc.section.4.p.1">Specifications of HTTP header fields that use the extensions defined in <a href="#character.set.and.language.information">Section 3.2</a> ought to clearly state that. A simple way to achieve this is to normatively reference this specification, and to include the <a href="#bnf">ext-value</a> <cite title="NONE">[bnf]</cite> production into the ABNF for that header field.  </p>
<div id="#rfc.figure.8"></div>
<p>For instance:</p>
<pre>
  foo-header  = "foo" LWSP ":" LWSP token ";" LWSP title-param
  title-param = "title" LWSP "=" LWSP value
              / "title*" LWSP "=" LWSP ext-value
  ext-value   = &lt;see RFC 5987, Section 3.2&gt;
</pre>
<p></p>

<ul class="empty"><li>Note: The Parameter Value Continuation feature defined in Section 3 of <a href="#RFC2231">[RFC2231]</a> makes it impossible to have multiple instances of extended parameters with identical parmname components, as the processing of continuations would become ambiguous. Thus, specifications using this extension are advised to disallow this case for compatibility with RFC 2231.  </li></ul>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#when.to.use.the.extension" id="when.to.use.the.extension">When to Use the Extension</a>
</h1>
<p id="rfc.section.4.1.p.1">Section 4.2 of <a href="#RFC2277">[RFC2277]</a> requires that protocol elements containing human-readable text are able to carry language information. Thus, the <a href="#bnf">ext-value</a> <cite title="NONE">[bnf]</cite> production ought to be always used when the parameter value is of textual nature and its language is known.  </p>
<p id="rfc.section.4.1.p.2">Furthermore, the extension ought to also be used whenever the parameter value needs to carry characters not present in the US-ASCII (<a href="#USASCII">[USASCII]</a>) character set (note that it would be unacceptable to define a new parameter that would be restricted to a subset of the Unicode character set).  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Error Handling</h1>
<p id="rfc.section.4.2.p.1">Header field specifications need to define whether multiple instances of parameters with identical parmname components are allowed, and how they should be processed. This specification suggests that a parameter using the extended syntax takes precedence. This would allow producers to use both formats without breaking recipients that do not understand the extended syntax yet.  </p>
<div id="#rfc.figure.9"></div>
<p>Example:</p>
<pre>
  foo: bar; title="EURO exchange rates";
            title*=utf-8''%e2%82%ac%20exchange%20rates
</pre>
<p>In this case, the sender provides an ASCII version of the title for legacy recipients, but also includes an internationalized version for recipients understanding this specification -- the latter obviously ought to prefer the new syntax over the old one.</p>
<p></p>

<ul class="empty"><li>Note: at the time of this writing, many implementations failed to ignore the form they do not understand, or prioritize the ASCII form although the extended syntax was present.  </li></ul>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#security.considerations" id="security.considerations">Security Considerations</a>
</h1>
<p id="rfc.section.5.p.1">The format described in this document makes it possible to transport non-ASCII characters, and thus enables character "spoofing" scenarios, in which a displayed value appears to be something other than it is.  </p>
<p id="rfc.section.5.p.2">Furthermore, there are known attack scenarios relating to decoding UTF-8.  </p>
<p id="rfc.section.5.p.3">See Section 10 of <a href="#RFC3629">[RFC3629]</a> for more information on both topics.  </p>
<p id="rfc.section.5.p.4">In addition, the extension specified in this document makes it possible to transport multiple language variants for a single parameter, and such use might allow spoofing attacks, where different language versions of the same parameter are not equivalent.  Whether this attack is useful as an attack depends on the parameter specified.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Acknowledgements</h1>
<p id="rfc.section.6.p.1">Thanks to Martin Duerst and Frank Ellermann for help figuring out ABNF details, to Graham Klyne and Alexey Melnikov for general review, to Chris Newman for pointing out an RFC 2231 incompatibility, and to Benjamin Carlyle, Roar Lauritzsen, and Eric Lawrence for implementer's feedback.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">7.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">7.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2616">[RFC2616]</b></td>
<td class="top">
<a href="mailto:fielding@ics.uci.edu" title="University of California, Irvine">Fielding, R.</a>, <a href="mailto:jg@w3.org" title="W3C">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com" title="Compaq Computer Corporation">Mogul, J.</a>, <a href="mailto:frystyk@w3.org" title="MIT Laboratory for Computer Science">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com" title="Xerox Corporation">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com" title="Microsoft Corporation">Leach, P.</a> and <a href="mailto:timbl@w3.org" title="W3C">T. Berners-Lee</a>, "<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>", RFC 2616, June 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2978">[RFC2978]</b></td>
<td class="top">
<a>Freed, N.</a> and <a>J. Postel</a>, "<a href="http://tools.ietf.org/html/rfc2978">IANA Charset Registration Procedures</a>", BCP 19, RFC 2978, October 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3629">[RFC3629]</b></td>
<td class="top">
<a href="mailto:fyergeau@alis.com" title="Alis Technologies">Yergeau, F.</a>, "<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>", STD 63, RFC 3629, November 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3986">[RFC3986]</b></td>
<td class="top">
<a href="mailto:timbl@w3.org" title="World Wide Web Consortium">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com" title="Day Software">Fielding, R.</a> and <a href="mailto:LMM@acm.org" title="Adobe Systems Incorporated">L. Masinter</a>, "<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>", STD 66, RFC 3986, January 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5646">[RFC5646]</b></td>
<td class="top">
<a href="mailto:addison@inter-locale.com" title="Lab126">Phillips, A.</a> and <a href="mailto:mark.davis@google.com" title="Google">M. Davis</a>, "<a href="http://tools.ietf.org/html/rfc5646">Tags for Identifying Languages</a>", BCP 47, RFC 5646, September 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5234">[RFC5234]</b></td>
<td class="top">
<a href="mailto:dcrocker@bbiw.net" title="Brandenburg InternetWorking">Crocker, D.</a> and <a href="mailto:paul.overell@thus.net" title="THUS plc.">P. Overell</a>, "<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>", STD 68, RFC 5234, January 2008.</td>
</tr>
<tr>
<td class="reference"><b id="USASCII">[USASCII]</b></td>
<td class="top">
<a>American National Standards Institute</a>, "<a>Coded Character Set -- 7-bit American Standard Code for Information Interchange</a>", ANSI X3.4, 1986.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">7.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="Err1912">[Err1912]</b></td>
<td class="top">
<a>RFC Errata</a>, "<a>Errata ID 1912, RFC 2978</a>", .</td>
</tr>
<tr>
<td class="reference"><b id="ISO-8859-1">[ISO-8859-1]</b></td>
<td class="top">
<a>International Organization for Standardization</a>, "<a>Information technology -- 8-bit single-byte coded graphic character sets -- Part 1: Latin alphabet No. 1</a>", ISO/IEC 8859-1:1998, 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2045">[RFC2045]</b></td>
<td class="top">
<a href="mailto:ned@innosoft.com" title="Innosoft International, Inc.">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com" title="First Virtual Holdings">N.S. Borenstein</a>, "<a href="http://tools.ietf.org/html/rfc2045">Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies</a>", RFC 2045, November 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2047">[RFC2047]</b></td>
<td class="top">
<a href="mailto:moore@cs.utk.edu" title="University of Tennessee">Moore, K.</a>, "<a href="http://tools.ietf.org/html/rfc2047">MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text</a>", RFC 2047, November 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2231">[RFC2231]</b></td>
<td class="top">
<a href="mailto:ned.freed@innosoft.com" title="Innosoft International, Inc.">Freed, N.</a> and <a href="mailto:moore@cs.utk.edu" title="University of Tennessee">K. Moore</a>, "<a href="http://tools.ietf.org/html/rfc2231">MIME Parameter Value and Encoded Word Extensions: Character Sets, Languages, and Continuations</a>", RFC 2231, November 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2277">[RFC2277]</b></td>
<td class="top">
<a href="mailto:Harald.T.Alvestrand@uninett.no" title="UNINETT">Alvestrand, H.T.</a>, "<a href="http://tools.ietf.org/html/rfc2277">IETF Policy on Character Sets and Languages</a>", BCP 18, RFC 2277, January 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2388">[RFC2388]</b></td>
<td class="top">
<a href="mailto:masinter@parc.xerox.com" title="Xerox Palo Alto Research Center">Masinter, L.</a>, "<a href="http://tools.ietf.org/html/rfc2388">Returning Values from Forms: multipart/form-data</a>", RFC 2388, August 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5987">[RFC5987]</b></td>
<td class="top">
<a href="mailto:julian.reschke@greenbytes.de" title="greenbytes GmbH">Reschke, J. F.</a>, "<a href="http://tools.ietf.org/html/rfc5987">Character Set and Language Encoding for Hypertext Transfer Protocol (HTTP) Header Field Parameters</a>", RFC 5987, August 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#changes.from.rfc5987" id="changes.from.rfc5987">Changes from RFC 5987</a>
</h1>
<p id="rfc.section.Appendix A.p.1">This section summarizes the changes compared to <a href="#RFC5987">[RFC5987]</a>: </p>
<p></p>

<ul>
<li>The document title was changed to "Indicating Character Encoding and Language for HTTP Header Field Parameters".  </li>
<li>The requirement to support the "ISO-8859-1" encoding was removed.  </li>
</ul>

<p> </p>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> <a href="#change.log" id="change.log">Change Log (to be removed by RFC Editor before publication)</a>
</h1>
<h1 id="rfc.appendix.Appendix B.1">
<a href="#rfc.appendix.Appendix%20B.1">Appendix B.1.</a> Since RFC5987</h1>
<p id="rfc.section.Appendix B.1.p.1">Only editorial changes for the purpose of starting the revision process (obs5987).  </p>
<h1 id="rfc.appendix.Appendix B.2">
<a href="#rfc.appendix.Appendix%20B.2">Appendix B.2.</a> Since draft-reschke-rfc5987bis-00</h1>
<p id="rfc.section.Appendix B.2.p.1">Resolved issues "iso-8859-1" and "title" (title simplified).  Added and resolved issue "historic5987".  </p>
<h1 id="rfc.appendix.Appendix C">
<a href="#rfc.appendix.Appendix%20C">Appendix C.</a> Resolved issues (to be removed by RFC Editor before publication)</h1>
<p id="rfc.section.Appendix C.p.1">Issues that were either rejected or resolved in this version of this document.  </p>
<h1 id="rfc.appendix.Appendix C.1">
<a href="#rfc.appendix.Appendix%20C.1">Appendix C.1.</a> iso-8859-1</h1>
<p id="rfc.section.Appendix C.1.p.1">Type: change</p>
<p id="rfc.section.Appendix C.1.p.2">julian.reschke@greenbytes.de (2011-04-15): Remove requirement to support ISO-8859-1? It doesn't really help, and it is not implemented in IE9.  </p>
<p id="rfc.section.Appendix C.1.p.3">Resolution (2011-09-07): Removed requirement; adjusted examples; explain that RFC 5987 required this so recipients may want to support it anyway.  </p>
<h1 id="rfc.appendix.Appendix C.2">
<a href="#rfc.appendix.Appendix%20C.2">Appendix C.2.</a> title</h1>
<p id="rfc.section.Appendix C.2.p.1">Type: edit</p>
<p id="rfc.section.Appendix C.2.p.2">duerst@it.aoyama.ac.jp (2011-04-17): Proposed title: "Indicating Character Encoding and Language for HTTP Header Field Parameters" </p>
<p id="rfc.section.Appendix C.2.p.3">Resolution (2011-09-07): Done.  </p>
<h1 id="rfc.appendix.Appendix C.3">
<a href="#rfc.appendix.Appendix%20C.3">Appendix C.3.</a> historic5987</h1>
<p id="rfc.section.Appendix C.3.p.1">In Section 1: </p>
<p id="rfc.section.Appendix C.3.p.2">Type: change</p>
<p id="rfc.section.Appendix C.3.p.3">julian.reschke@greenbytes.de (2011-09-08): Point out that RFC 5987 should be moved to "historic".  </p>
<p id="rfc.section.Appendix C.3.p.4">Resolution (2011-09-08): Done.  </p>
<h1 id="rfc.appendix.Appendix D">
<a href="#rfc.appendix.Appendix%20D">Appendix D.</a> Open issues (to be removed by RFC Editor prior to publication)</h1>
<h1 id="rfc.appendix.Appendix D.1">
<a href="#rfc.appendix.Appendix%20D.1">Appendix D.1.</a> edit</h1>
<p id="rfc.section.Appendix D.1.p.1">Type: edit</p>
<p id="rfc.section.Appendix D.1.p.2">julian.reschke@greenbytes.de (2011-04-15): Umbrella issue for editorial fixes/enhancements.  </p>
<h1 id="rfc.appendix.Appendix D.2">
<a href="#rfc.appendix.Appendix%20D.2">Appendix D.2.</a> impls</h1>
<p id="rfc.section.Appendix D.2.p.1">Type: change</p>
<p id="rfc.section.Appendix D.2.p.2">julian.reschke@greenbytes.de (2011-04-15): Add implementation report.  </p>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Julian F. Reschke</span> 
	  <span class="n hidden">
		<span class="family-name">Reschke</span>
	  </span>
	</span>
	<span class="org vcardline">greenbytes GmbH</span>
	<span class="adr">
	  <span>Hafenweg 16</span>

	  <span class="vcardline">
		<span class="locality">Muenster</span>,  
		<span class="region">NW</span> 
		<span class="code">48155</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:julian.reschke@greenbytes.de">julian.reschke@greenbytes.de</a></span>

<span class="vcardline">URI: <a href="http://greenbytes.de/tech/webdav/">http://greenbytes.de/tech/webdav/</a></span>

  </address>
</div>

</body>
</html>