<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Constrained Application Protocol (CoAP)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Constrained Application Protocol (CoAP)">
<meta name="keywords" content="CoAP, Constrained Application Protocol, REST">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">CoRE</td><td class="header">Z. Shelby</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Sensinode</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">B. Frank</td></tr>
<tr><td class="header">Expires: December 9, 2010</td><td class="header">SkyFoundry</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">D. Sturek</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Pacific Gas & Electric</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">June 7, 2010</td></tr>
</table></td></tr></table>
<h1><br />Constrained Application Protocol (CoAP)<br />draft-ietf-core-coap-00</h1>

<h3>Abstract</h3>

<p>
    This document specifies the Constrained Application Protocol (CoAP), a specialized transfer protocol for use with constrained networks and nodes for machine-to-machine applications such as smart energy and building automation. These constrained nodes often have 8-bit microcontrollers with small amounts of ROM and RAM, while networks such as 6LoWPAN often have high packet error rates and typical throughput of 10s of kbit/s. 
    CoAP provides request/reply and subscribe/notify interaction models between application end-points, supports built-in resource discovery, and includes key web concepts such as URIs and RESTful methods. CoAP easily translates to HTTP for integration with the web while meeting specialized requirements such as multicast support, very low overhead and simplicity for constrained environments.
    
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on December 9, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
<a href="#protocol">2.</a>&nbsp;
Constrained Application Protocol<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#interaction">2.1.</a>&nbsp;
Interaction Model<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#request">2.1.1.</a>&nbsp;
Request messages<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#notify">2.1.2.</a>&nbsp;
Notify messages (Experimental)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#resp-send">2.1.3.</a>&nbsp;
Response message<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#opt-proc">2.1.4.</a>&nbsp;
Option fields<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#transactionid">2.1.5.</a>&nbsp;
Transaction IDs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#methods">2.2.</a>&nbsp;
Methods<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#read">2.2.1.</a>&nbsp;
GET<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#create">2.2.2.</a>&nbsp;
POST<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#update">2.2.3.</a>&nbsp;
PUT<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#delete">2.2.4.</a>&nbsp;
DELETE<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subscribe">2.2.5.</a>&nbsp;
SUBSCRIBE (Experimental)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#uri">2.3.</a>&nbsp;
URIs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">2.4.</a>&nbsp;
CoAP Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#content-type">2.5.</a>&nbsp;
Content-type encoding<br />
<a href="#messages">3.</a>&nbsp;
Message Formats<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#base">3.1.</a>&nbsp;
CoAP header<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#options">3.2.</a>&nbsp;
Header options<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#option-content">3.2.1.</a>&nbsp;
Content-type Option<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#option-uri">3.2.2.</a>&nbsp;
Uri Option<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#option-max-age">3.2.3.</a>&nbsp;
Max-age Option<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#option-etag">3.2.4.</a>&nbsp;
Etag Option<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#option-date">3.2.5.</a>&nbsp;
Date Option<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#option-subscription">3.2.6.</a>&nbsp;
Subscription-lifetime Option (Experimental)<br />
<a href="#binding">4.</a>&nbsp;
UDP Binding<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#retransmission">4.1.</a>&nbsp;
Retransmission<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#port">4.2.</a>&nbsp;
Default Port<br />
<a href="#caching">5.</a>&nbsp;
Caching<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#cache-control">5.1.</a>&nbsp;
Cache control<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#cache-refreshing">5.2.</a>&nbsp;
Cache refresh<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#proxying">5.3.</a>&nbsp;
Proxying<br />
<a href="#discovery">6.</a>&nbsp;
Resource Discovery<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#link_format">6.1.</a>&nbsp;
Link Format<br />
<a href="#http">7.</a>&nbsp;
HTTP Mapping<br />
<a href="#constants">8.</a>&nbsp;
Protocol Constants<br />
<a href="#examples">9.</a>&nbsp;
Examples<br />
<a href="#anchor2">10.</a>&nbsp;
Security Considerations<br />
<a href="#anchor3">11.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#appendix_codes">11.1.</a>&nbsp;
Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#appendix_content">11.2.</a>&nbsp;
Content Types<br />
<a href="#anchor4">12.</a>&nbsp;
Acknowledgments<br />
<a href="#anchor5">13.</a>&nbsp;
Changelog<br />
<a href="#rfc.references1">14.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">14.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">14.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
  The use of web services on the Internet has become ubiquitous in most applications, and depends on the fundamental Representational State Transfer (REST) architecture of the web. 
  

  
  The Constrained RESTful Environments (CoRE) working group aims at realizing the REST architecture in a suitable form for the most constrained nodes (e.g. 8-bit microcontrollers with limited RAM and ROM) and networks (e.g. 6LoWPAN). One of the main goals of CoRE is to design a generic RESTful protocol for the special requirements of this constrained environment, especially considering energy and building automation applications.
  
</p>
<p>
  This document specifies the RESTful Constrained Application Protocol (CoAP) which easily translates to HTTP for integration with the web while meeting specialized requirements such as multicast support, very low overhead and simplicity for constrained environments <a class='info' href='#I-D.shelby-core-coap-req'>[I&#8209;D.shelby&#8209;core&#8209;coap&#8209;req]<span> (</span><span class='info'>Shelby, Z., Stuber, M., Sturek, D., Frank, B., and R. Kelsey, &ldquo;CoAP Requirements and Features,&rdquo; April&nbsp;2010.</span><span>)</span></a>. CoAP has the following main features:

  </p>
<ul class="text">
<li>RESTful protocol design minimizing the complexity of mapping with HTTP.
</li>
<li>UDP binding with multicast and retransmission support.
</li>
<li>Low header overhead and parsing complexity.
</li>
<li>URI and Content-type support.
</li>
<li>Built-in resource discovery.
</li>
<li>Simple subscription for a resource with a resulting notification mechanism.
</li>
<li>Simple caching based on a relative time limit ("max-age").
</li>
</ul><p>
  
</p>
<p>
  The mapping of CoAP with HTTP is defined, allowing proxies to be built providing access to CoAP resources via HTTP in a uniform way.
  
</p>
<a name="protocol"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Constrained Application Protocol</h3>

<p>
  This section specifies the basic functionality and processing rules of CoAP.
  
</p>
<a name="interaction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Interaction Model</h3>

<p>
    The interaction model of CoAP is client/server with request or notify messages initiating a transaction responded to with a matching response based on a transaction ID. Machine-to-machine interactions with a RESTful design typically result in a CoAP implementation acting in both client and server roles (called an end-point). A CoAP request is similar to an HTTP request, and is sent by a client to request an action (using a method) on a resource (identified by a URI) on a server. 
</p>
<p>
    In addition to this typical request/response model, CoAP also supports an asynchronous subscribe/notify interaction model. A CoAP notify is the inverse of a request, where a server sends a notify message to a client about a resource on the server (identified by a URI). A notify includes the representation, Etag and/or Date of the resource. Example message exchanges can be found from <a class='info' href='#examples'>Section&nbsp;9<span> (</span><span class='info'>Examples</span><span>)</span></a>. 
    
</p>
<p>
    This document specifies the interaction of two CoAP end-points, one of which acting as a client, and the other acting as a server. A host may run any number of CoAP end-points.
    
</p>
<a name="request"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.1"></a><h3>2.1.1.&nbsp;
Request messages</h3>

<p>
      A CoAP end-point acting as a client sends a request with the following rules. The Version field is set to 0. The Type Flag is set to 0 indicating a request. The A Flag SHOULD be set requesting a response and enabling retransmission in case of a timeout (see <a class='info' href='#retransmission'>Section&nbsp;4.1<span> (</span><span class='info'>Retransmission</span><span>)</span></a>). The A Flag MAY be unset in cases when a response is too costly (such as a multicast message) or not useful (e.g. real-time streaming). The Method field MUST be set with a value of 0-4. A new TRANSACTION_ID is generated, and this value is placed in the Transaction ID Field. See <a class='info' href='#opt-proc'>Section&nbsp;2.1.4<span> (</span><span class='info'>Option fields</span><span>)</span></a> for options rules.
      If a payload is to be included in the message, it immediately follows the last option or the Transaction ID if none. 
      

      
</p>
<p>
      For each request sent with the A flag set, a CoAP end-point keeps track of the destination IP address and Transaction ID of the request for the purpose of matching responses. The retransmission procedure is described in <a class='info' href='#retransmission'>Section&nbsp;4.1<span> (</span><span class='info'>Retransmission</span><span>)</span></a>.
      
</p>
<p>
      Upon receiving a request, a CoAP end-point performs the following validation and processing:
      
</p>
<p>
        </p>
<blockquote class="text">
<p>o The Version Field MUST be 0.
</p>
<p>o The Type Flag MUST be 0.
</p>
<p>o The Method Field MUST be 0-4.
</p>
<p>o If the Number of Options Field is > 0, then each option is validated and processed as in <a class='info' href='#opt-proc'>Section&nbsp;2.1.4<span> (</span><span class='info'>Option fields</span><span>)</span></a>. 
</p>
<p>o The length of the Payload is calculated from the datagram length.
</p>
<p>o The Method, URI, any options and Payload are passed on to the corresponding application process.
</p>
<p>o If the A bit is set, an appropriate response message MUST be sent to the source IPv6 address and port of the request with the same Transaction ID of the request. If the A bit is unset, a response message MUST NOT be sent.
</p>
</blockquote><p>
      
</p>
<p>

      
</p>
<a name="notify"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.2"></a><h3>2.1.2.&nbsp;
Notify messages (Experimental)</h3>

<p>
      The sending of a notify message is similar to sending a request message, with the following difference:  The Type Flag is set to 2. The processing of a notify message is similar to processing a request message.
      
</p>
<a name="resp-send"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.3"></a><h3>2.1.3.&nbsp;
Response message</h3>

<p>
      A response message is created with the following rules. The Version Field is set to 0. The Type Flag is set to 1. The Code is set to one of the supported response codes in <a class='info' href='#appendix_codes'>Section&nbsp;11.1<span> (</span><span class='info'>Codes</span><span>)</span></a>. The Transaction ID MUST be set to that of the corresponding request. See <a class='info' href='#opt-proc'>Section&nbsp;2.1.4<span> (</span><span class='info'>Option fields</span><span>)</span></a> for options rules. An optional Payload may be included as appropriate for the request.
      
</p>
<p>
      Upon receiving a response, a CoAP end-point performs the following validation and processing:
      
</p>
<p>
        </p>
<blockquote class="text">
<p>o The Version Field MUST be 0.
</p>
<p>o The Type Flag MUST be 1.
</p>
<p>o The Code Field MUST contain a valid code.
</p>
<p>o If the Number of Options Field is > 0, then each option is validated and processed as in <a class='info' href='#opt-proc'>Section&nbsp;2.1.4<span> (</span><span class='info'>Option fields</span><span>)</span></a>. 
</p>
<p>o The length of the Payload is calculated from the datagram length.
</p>
<p>o The Transaction ID is used to match the response to an open request entry, and the response code, any options and Payload are passed on to the corresponding application process. If no match is found, the message is silently discarded.
</p>
</blockquote><p>
      
</p>
<p>

      
</p>
<a name="opt-proc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.4"></a><h3>2.1.4.&nbsp;
Option fields</h3>

<p>
      If no options are to be included, the Option Number Field is set to 0 and the Payload (if any) immediately follows the Transaction ID. If options are to be included, the following rules apply. The number of options is placed in the Number of Options Field. Each option is then placed in order of Type, immediately following the Transaction ID with no padding. Upon reception, unknown options MUST be silently skipped.
      
</p>
<p>

      
</p>
<a name="transactionid"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.5"></a><h3>2.1.5.&nbsp;
Transaction IDs</h3>

<p>
      The Transaction ID is an unsigned integer kept by a CoAP end-point for all of the CoAP request or notify messages it sends. Each CoAP end-point keeps a single Transaction ID variable, which is changed each time a new request or notify message is sent regardless of the destination address or port. The Transaction ID is used to match a response with an outstanding request or notify, for retransmission and to discard duplicate messages. The initial Transaction ID should be randomized.
      
</p>
<a name="methods"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Methods</h3>

<p>
    CoAP supports the basic RESTful methods of GET, POST, PUT, DELETE, which are easily mapped to HTTP methods. In this section each method is defined along with its behavior. In addition, CoAP defines a new SUBSCRIBE method for requesting soft-state subscriptions for resources. 
    
</p>
<p>
    As CoAP methods manipulate resources, they have the same properties of safe (only retrieval) and idempotent (you can invoke it multiple times with the same effects) as HTTP <a class='info' href='#RFC2616'>Section 9.1<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616]. The GET method is safe, therefore it MUST NOT take any other action on a resource other than retrieval. The GET, PUT and DELETE methods MUST be performed in such a way that they are idempotent.
    
</p>
<a name="read"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1"></a><h3>2.2.1.&nbsp;
GET</h3>

<p>
      The GET method retrieves the information of the resource identified by the request URI. Upon success a 200 (OK) response SHOULD be sent.
      
</p>
<p>
      The response to a GET is cacheable if it meets the requirements in <a class='info' href='#caching'>Section&nbsp;5<span> (</span><span class='info'>Caching</span><span>)</span></a>.
      
</p>
<a name="create"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2"></a><h3>2.2.2.&nbsp;
POST</h3>

<p>
      The POST method is used to request the server to create a new resource under the requested URI. If a resource has been created on the server, the response should be 201 (Created) including the URI of the new resource in the header and any possible status in the message body. If the POST does not result in a new resource being created on the server, a 200 (OK) response code is returned.
      
</p>
<p>
      Responses to this method are not cacheable.
      
</p>
<a name="update"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.3"></a><h3>2.2.3.&nbsp;
PUT</h3>

<p>
      The PUT method requests that the resource identified by the request URI be updated with the enclosed message body. If a resource exists at that URI the message body SHOULD be considered a modified version of that resource. If no resource exists then the server MAY create a new resource with that URI.
      
</p>
<p>
      Responses to this method are not cacheable.
      
</p>
<a name="delete"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.4"></a><h3>2.2.4.&nbsp;
DELETE</h3>

<p>
      The DELETE method requests that the resource identified by the request URI be deleted.
      The response 200 (OK) SHOULD be sent on success.
      
</p>
<p>
      Responses to this method are not cacheable.
      
</p>
<a name="subscribe"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.5"></a><h3>2.2.5.&nbsp;
SUBSCRIBE (Experimental)</h3>

<p>
	CoAP supports a built-in subscribe/notify push model for an end-point to notify another end-point about a resource of interest. This push is accomplished using the CoAP notify message type, whose URI corresponds to the resource of interest on the end-point sending the notify message. A notify may include the latest representation of the resource in its payload and/or the Etag Option.
	
</p>
<p>
	The SUBSCRIBE method allows an end-point to request notifications about a resource. A request of this method MAY include the Subscription-lifetime Option defined in <a class='info' href='#option-subscription'>Section&nbsp;3.2.6<span> (</span><span class='info'>Subscription-lifetime Option (Experimental)</span><span>)</span></a>. In the absence of this Option, its maximum lifetime is assumed. End-points MUST NOT send notify messages without a valid subscription. Subscriptions are soft-state, and must be refreshed by sending a new SUBSCRIBE message before the end of its lifetime. 
	
</p>
<p>
	Servers keep track of subscriptions, and upon change a notify message is sent to the source address and port of the original SUBSCRIBE request with the URI of the resource in question. Notifications MAY be sent with the A bit set, enabling a server to detect if a subscriber is no longer valid. A subscription SHOULD be removed after MAX_RETRANSMIT failures when the A bit is set. A server is not required to support subscriptions for its resources (thus this feature is optional), and MAY limit the number of simultaneous subscriptions.
	
</p>
<a name="uri"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
URIs</h3>

<p>
    The Universal Resource Identifier (URI) <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a> is an important feature of the REST architecture, where the relative part of the URI indicates which resource is being manipulated. CoAP supports variable-length string URIs with the Uri Option. As this URI is used as a locator, CoAP only supports Universal Resource Locator features of <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a> although throughout the document we refer to URI. CoAP supports relative references in the Uri Option (e.g. /sensors/temperature) for messages to a CoAP end-point, and absolute URIs for use with a proxy (coap://[2001:1ba3::450a]/sensors/temperature), and does not support "." and ".." schemes. A CoAP implementation MAY support query "?" processing if needed, however fragment "#" processing is not supported. IRIs are not supported. All URI strings in CoAP MUST use the US-ASCII encoding defined in <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>. When including a relative reference URI in the Uri Option, the leading slash MUST be omitted. Thus the above example "/sensors/temperature" is included in the Uri Option as "sensors/temperature". 
    
    


       
</p>
<p>
    The CoAP protocol scheme is identified in URIs with "coap://" (TODO: IANA considerations).
    
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
CoAP Codes</h3>

<p>
    When a response message is sent in response to a request or notify message it MUST always include a response code in the header. Notify messages also include a code field, which is set to "200 OK" by default. CoAP makes use of a subset of HTTP response codes as defined in <a class='info' href='#appendix_codes'>Section&nbsp;11.1<span> (</span><span class='info'>Codes</span><span>)</span></a>.
    
</p>
<a name="content-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.5"></a><h3>2.5.&nbsp;
Content-type encoding</h3>

<p>
    In order to support heterogeneous uses, CoAP is transparent to the use of different application payloads. In order for the application process receiving a packet to properly parse a payload, its content-type should be explicitly known from the header (as e.g. with HTTP). The use of typical binary encodings for XML is discussed in <a class='info' href='#I-D.shelby-6lowapp-encoding'>[I&#8209;D.shelby&#8209;6lowapp&#8209;encoding]<span> (</span><span class='info'>Shelby, Z., Luimula, M., and D. Peintner, &ldquo;Efficient XML Encoding and 6LowApp,&rdquo; October&nbsp;2009.</span><span>)</span></a>.
    
</p>
<p>
    String names of Internet media types <a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a> are not optimal for use in the CoAP header. Instead, CoAP simply assigns identifiers to a subset of common MIME and content transfer encoding types. The content-type identifier is optionally included in the Content-type Option Header of messages to indicate the type of the message body. CoAP Content-type identifiers are defined in <a class='info' href='#appendix_content'>Section&nbsp;11.2<span> (</span><span class='info'>Content Types</span><span>)</span></a>. In the absence of the Content-type Option the MIME type "text/plain" MUST BE assumed.
    
</p>
<a name="messages"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Message Formats</h3>

<p>
  CoAP makes use of three message types - request, notify and response, using a simple binary header format. This base header may be followed by options in Type-Length-Value (TLV) format. CoAP is bound to UDP as described in <a class='info' href='#binding'>Section&nbsp;4<span> (</span><span class='info'>UDP Binding</span><span>)</span></a>. 
  


  
</p>
<p>
  Any bytes after the headers in the packet are considered the message payload, if any. The length of the message payload is implied by the datagram length or the Length Field of the magic byte header if included. When bound to UDP the entire message MUST fit within a single datagram.  When used with 6LoWPAN <a class='info' href='#RFC4944'>[RFC4944]<span> (</span><span class='info'>Montenegro, G., Kushalnagar, N., Hui, J., and D. Culler, &ldquo;Transmission of IPv6 Packets over IEEE 802.15.4 Networks,&rdquo; September&nbsp;2007.</span><span>)</span></a>, messages SHOULD fit into a single IEEE 802.15.4 frame to minimize fragmentation.
  
</p>
<a name="base"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
CoAP header</h3>

<p>
    This section defines the CoAP header, which is shared for all message types.
    
</p>
<p>
       </p>
<blockquote class="text"><dl>
<dt>Request:</dt>
<dd>
         A CoAP request message is sent by a client to request a URI on a server using one of the methods listed in <a class='info' href='#tab-method'>Table&nbsp;1<span> (</span><span class='info'>Method codes</span><span>)</span></a>.
         
</dd>
<dt>Response:</dt>
<dd>
          A CoAP response message is sent in response to a CoAP request or notify when appropriate. Responses include a Transaction ID corresponding to that of the request. A response is always sent when the A flag is set in a request, and is never sent when the A flag is not set. A response is always sent to the source IP address and port of the corresponding request or notify. 
         
</dd>
<dt>Notify: (Experimental)</dt>
<dd>
         A CoAP notify message is sent by a server to notify a client about a resource (identified by a URI) on the server as a result of a valid subscription for that resource.
         
</dd>
</dl></blockquote><p>
    
</p><br /><hr class="insert" />
<a name="fig-req"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

 Template:

 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Ver| T |   O   | Type Specific |        Transaction ID         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Options (if any) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Payload (if any) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Request (T=0):

 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Ver|0 0|   O   |A|_____| Meth  |        Transaction ID         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Options (if any) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Payload (if any) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


Response (T=1):

 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Ver|0 1|   O   |___|    Code   |        Transaction ID         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Options (if any) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Payload (if any) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


Notify (T=2):

 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Ver|1 0|   O   |A|_|    Code   |        Transaction ID         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Options (if any) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Payload (if any) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: CoAP header format&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
         </p>
<blockquote class="text"><dl>
<dt>Header Fields:</dt>
<dd>
       
<blockquote class="text"><dl>
<dt>Ver:</dt>
<dd>
         Version. 2-bit unsigned integer. Indicates the version of CoAP. Implementations of this specification MUST set this field to 0. The values 1-3 are reserved for future versions.
         
</dd>
<dt>T:</dt>
<dd>
         2-bit Message Type flag. Indicates if this message is a CoAP request (0), response (1) or notify (2) header. The value 3 is forbidden to avoid collision with the magic byte 'r'.
         
</dd>
<dt>O:</dt>
<dd>
         4-bit Number of Options field. Indicates if there are Option Headers following the base header. If set to 0 the payload (if any) immediately follows the base header. If greater than zero the field indicates the number of options to immediately follow the header.
         
</dd>
<dt>A:</dt>
<dd>
         1-bit Acknowledgement flag. When set to 1, indicates that the destination MUST respond with a response message matching this request (see <a class='info' href='#binding'>Section&nbsp;4<span> (</span><span class='info'>UDP Binding</span><span>)</span></a>). When set to 0, the destination MUST NOT send a response to this request. 
         
</dd>
<dt>Meth:</dt>
<dd>
         4-bit unsigned integer. This field indicates the CoAP Method of the request according to <a class='info' href='#tab-method'>Table&nbsp;1<span> (</span><span class='info'>Method codes</span><span>)</span></a>. Methods are described in detail in <a class='info' href='#methods'>Section&nbsp;2.2<span> (</span><span class='info'>Methods</span><span>)</span></a>. 
         
</dd>
<dt>Code:</dt>
<dd>
         6-bit unsigned integer. This field indicates the code of a response or notify message as defined in <a class='info' href='#appendix_codes'>Section&nbsp;11.1<span> (</span><span class='info'>Codes</span><span>)</span></a>.
         
</dd>
<dt>Transaction ID:</dt>
<dd>
         16-bit unsigned integer. A unique Transaction ID assigned by the source and used to match responses. The Transaction ID MUST be changed for each new request (regardless of the end-point) and MUST NOT be changed when retransmitting a request.
         
</dd>
<dt>_:</dt>
<dd>
         This field is unused. It MUST be initialized to zero by the sender and MUST be ignored by the receiver.
         
</dd>
</dl></blockquote>
     
</dd>
</dl></blockquote><p>
    
</p><br /><hr class="insert" />
<a name="tab-method"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Method</th><th align="left">Code</th></tr>
<tr>
<td align="left">GET</td>
<td align="left">0</td>
</tr>
<tr>
<td align="left">POST</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">PUT</td>
<td align="left">2</td>
</tr>
<tr>
<td align="left">DELETE</td>
<td align="left">3</td>
</tr>
<tr>
<td align="left">SUBSCRIBE</td>
<td align="left">4</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: Method codes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="options"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Header options</h3>

<p>
    CoAP messages may also include one or more header options in TLV format. Each option has the following format:
    
</p><br /><hr class="insert" />
<a name="fig-opt"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Template:

 0
 0 1 2 3 4 5
+-+-+-+-+-+-+
|  Type   |X|
+-+-+-+-+-+-+

Length of 0-4:

 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Type   |0|Len|  Option Value ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Length of 5-1024:

 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Type   |1|        Len        |  Option Value ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Header option format&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
       </p>
<blockquote class="text"><dl>
<dt>Type:</dt>
<dd>
          5-bit unsigned integer. The type of the option as defined in <a class='info' href='#tab-options'>Table&nbsp;2<span> (</span><span class='info'>Option headers</span><span>)</span></a>, allowing for up to 32 options. Future specifications may define new CoAP option types. Option types 30-32 are reserved for experimental purposes.
         
</dd>
<dt>X:</dt>
<dd>
          1-bit Extended Length Flag. When 0 the Length is a 2-bit unsigned integer. When 1 the option header is extended by an octet and Length is a 10-bit unsigned integer. 
         
</dd>
<dt>Len:</dt>
<dd>
          Length Field. When X is 0 Length is a 2-bit unsigned integer allowing values of 0-3 octets. When X is 1 Length is a 10-bit unsigned integer allowing values of 0-1023 octets.
         
</dd>
<dt>Option Value</dt>
<dd>
         The value in the format defined for that option in <a class='info' href='#tab-options'>Table&nbsp;2<span> (</span><span class='info'>Option headers</span><span>)</span></a> with a length of Option Len octets. Options may use variable length unsigned integer values of Len Field octets in network byte order as shown in <a class='info' href='#fig-variable'>Figure&nbsp;3<span> (</span><span class='info'> Variable length unsigned integer value format</span><span>)</span></a>.
         
</dd>
</dl></blockquote><p>
     
</p><br /><hr class="insert" />
<a name="fig-variable"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

             0
             0 1 2 3 4 5 6 7
            +-+-+-+-+-+-+-+-+
Len = 1     |     0-255     |
            +-+-+-+-+-+-+-+-+

             0                   1
             0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
            +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
Len = 2     |            0-65535            |
            +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Len = 3 is 24 bits, Len = 4 is 32 bits etc.

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3:  Variable length unsigned integer value format&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
    The following options are defined in this document.
    
</p><br /><hr class="insert" />
<a name="tab-options"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="left">Type</th><th align="left">Name</th><th align="left">Data type</th><th align="left">Length</th><th align="left">Rules</th></tr>
<tr>
<td align="left">0</td>
<td align="left">Content-type</td>
<td align="left">Variable uint</td>
<td align="left">1-2 B</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">Uri</td>
<td align="left">String</td>
<td align="left">1-32768 B</td>
<td align="left">Never in response</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">Not used</td>
<td align="left">-</td>
<td align="left">-</td>
<td align="left">-</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">Max-age</td>
<td align="left">Variable uint</td>
<td align="left">0-4 B</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">Etag</td>
<td align="left">Variable uint</td>
<td align="left">1-4 B</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">Date</td>
<td align="left">Variable integer</td>
<td align="left">4-6 B</td>
<td align="left">Never in request</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left">Subscription-lifetime</td>
<td align="left">Variable uint</td>
<td align="left">1-3 B</td>
<td align="left">With SUBSCRIBE or its response</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 2: Option headers&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="option-content"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
Content-type Option</h3>

<p>The Content-type Identifier Option indicates the Internet Media Type of the message-body, see <a class='info' href='#appendix_content'>Section&nbsp;11.2<span> (</span><span class='info'>Content Types</span><span>)</span></a> for the encoding and identifier tables. A Content-type Identifier Option SHOULD be included if there is a payload included with a CoAP message, and MUST not be included for a zero-length payload. In the absence of the Content-type Option the MIME type "text/plain" MUST be assumed.
</p>
<a name="option-uri"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2"></a><h3>3.2.2.&nbsp;
Uri Option</h3>

<p>The Uri Option indicates the string URI of the resource that may be included in request and notify messages. In the absence of this option, the URI is assumed to be "/". <a class='info' href='#uri'>Section&nbsp;2.3<span> (</span><span class='info'>URIs</span><span>)</span></a> specifies the rules for URIs in CoAP. When including a relative reference URI in the Uri Option, the leading slash MUST be omitted. 
</p>
<a name="option-max-age"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.3"></a><h3>3.2.3.&nbsp;
Max-age Option</h3>

<p>The Max-age Option indicates the maximum age of the resource for use in cache control in seconds. The option is represented as a variable length unsigned integer maximum 32-bits in length. A length of 0 is used to indicate a Max-age of 0.
  
</p>
<p>
  When included in a request, Max-age indicates the maximum age of a cached representation of that resource the client will accept. When included in a response or a notify, Max-age indicates the maximum time the representation may be cached before it MUST be discarded.
  
</p>
<a name="option-etag"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.4"></a><h3>3.2.4.&nbsp;
Etag Option</h3>

<p>The Etag Option is a variable length unsigned integer which specifies the version of a resource representation. An Etag may be generated for a resource in any number of ways including a version, checksum, hash or time. An end-point receiving an Etag MUST treat it as opaque and make no assumptions about its format. The Etag MAY be included in a notify message to indicate to a client if a resource has changed. 
</p>
<a name="option-date"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.5"></a><h3>3.2.5.&nbsp;
Date Option</h3>

<p>The Date Option indicates the creation time and date of a given resource representation. It MAY be used in response and notify messages. The integer value is the number of seconds, after midnight UTC, January 1, 1970. This time format cannot represent time values prior to January 1, 1970. The latest UTC time value that can be represented by a 31 bit integer value is 03:14:07 on January 19, 2038. Time values beyond 03:14:07 on January 19, 2038, are represented by 39 bit integer values which is sufficient     		  
  to represent dates that should be enough for anyone. For applications requiring more accuracy, a 48-bit integer MAY be included representing this value in milliseconds instead of seconds.
  
</p>
<a name="option-subscription"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.6"></a><h3>3.2.6.&nbsp;
Subscription-lifetime Option (Experimental)</h3>

<p>The Subscription-lifetime Option indicates the subscription lifetime and is optionally included with the SUBSCRIBE method (see <a class='info' href='#subscribe'>Section&nbsp;2.2.5<span> (</span><span class='info'>SUBSCRIBE (Experimental)</span><span>)</span></a>). The corresponding response MUST include a Subscription-lifetime Option confirming (or modifying) the subscription lifetime.
  
</p>
<p>
  The value of this option is a variable length unsigned integer up to 24-bits indicating the lifetime of the subscription in seconds with a maximum value of 194 days. In a response the server MAY return a different value that fits its own scheduling better. A value of all 0 in a request indicates cancellation of a subscription and in a response indicates subscription failure or rejection.
  
</p>
<a name="binding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
UDP Binding</h3>

<p>
  The CoAP protocol operates by default over UDP. CoAP could be used over other transports such as TCP or SCTP, the specification of which is out of this document's scope.
  
</p>
<p>
    The goal of binding CoAP to UDP is to provide the bare minimum features for the protocol to operate over UDP, without trying to re-create the full feature set of TCP. CoAP over UDP has the following features:
    
</p>
<p>
      </p>
<ul class="text">
<li>Simple stop-and-wait retransmission reliability with exponential back-off as described in <a class='info' href='#retransmission'>Section&nbsp;4.1<span> (</span><span class='info'>Retransmission</span><span>)</span></a> when the A Flag is set.
</li>
<li>Transaction ID for response matching as described in <a class='info' href='#transactionid'>Section&nbsp;2.1.5<span> (</span><span class='info'>Transaction IDs</span><span>)</span></a>.
</li>
<li>Multicast support without retransmission. CoAP supports the use of multicast destination addresses when bound to UDP. Although the A bit may be used to force a response, retransmission MUST NOT be performed.
</li>
</ul><p>
    
</p>
<p>
    When a CoAP message is sent using UDP, the length of the Payload is calculated from the datagram length. When bound to UDP the entire message MUST fit within a single datagram of length 1024 octets.  When used with 6LoWPAN <a class='info' href='#RFC4944'>[RFC4944]<span> (</span><span class='info'>Montenegro, G., Kushalnagar, N., Hui, J., and D. Culler, &ldquo;Transmission of IPv6 Packets over IEEE 802.15.4 Networks,&rdquo; September&nbsp;2007.</span><span>)</span></a>, messages SHOULD fit into a single link-layer frame to minimize fragmentation if possible (often on the order of 60-90 octets). 
    
</p>
<a name="retransmission"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Retransmission</h3>

<p>
      A CoAP end-point keeps track of open request or notify messages expecting a response (A Flag set). Each entry includes at least the destination address and port of the original message, the message itself, a retransmission counter (UDP only) and a timeout. When a request or notify message is sent with the A Flag set, an entry is made for that message with a default initial timeout of RESPONSE_TIMEOUT and the retransmission counter set to 0. When a matching response is received for an entry, the entry is removed. When a timeout is triggered for an entry and the retransmission counter is less than MAX_RETRANSMIT, the original message is retransmitted to the destination without modification, the retransmission counter is incremented, and the timeout is doubled. If the retransmission counter reaches MAX_RETRANSMIT on a timeout, then the entry is removed and the application process informed of delivery failure.
      
</p>
<p>
      For CoAP messages sent to IP multicast addresses, retransmission MUST NOT be performed. Therefore MAX_RETRANSMIT is always set to 0 when the destination address is multicast.
      
</p>
<a name="port"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Default Port</h3>

<p>
    CoAP SHOULD use a default port of 61616 which is within the compressed UDP port space defined in <a class='info' href='#RFC4944'>[RFC4944]<span> (</span><span class='info'>Montenegro, G., Kushalnagar, N., Hui, J., and D. Culler, &ldquo;Transmission of IPv6 Packets over IEEE 802.15.4 Networks,&rdquo; September&nbsp;2007.</span><span>)</span></a>. As this port is in the dynamic port space, it however can not be reserved for CoAP use. 
    
</p>
<a name="caching"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Caching</h3>

<p>
  CoAP end-points are by definition constrained by bandwidth and processing power.  To optimize the performance of data transfer under these constraints, we use caching features consistent with HTTP.  Caching includes the following concepts:
    </p>
<ul class="text">
<li>cache life of a resource is controlled via the Max-Age header option
</li>
<li>cache refresh and versioning of a resource is controlled via the Etag header option
</li>
<li>proxies between a client and end-point may participate in the caching process on behalf of sleeping end-points and to avoid unnecessary traffic on the constrained network
</li>
</ul><p>
  
</p>
<a name="cache-control"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Cache control</h3>

<p>
    When an end-point publishes a resource for a GET request, it SHOULD specify the Max-Age header option.  The Max-Age specifies the cache life of the resource in seconds.  Resources which change rapidly will have a short cache life, and resources which change infrequently should specify a long cache life.  If Max-Age is unspecified in a GET response, then it is assumed to be 60 seconds.  If an end-point wishes to disable caching, it must explicitly specify a Max-Age of zero seconds.
    
</p>
<p>
    When a client reads the response from a GET request, it should cache the resource representation for the cache lifetime as specified by the Max-Age header.  During the cache lifetime, the client SHOULD use its cached version and avoid performing additional GETs for the resource.
    
</p>
<p>
    In general, the origin server end-point is responsible for determining cache age. However, in some cases a client may wish to determine its own tolerance for cache staleness.  In this case, a client may specify the Max-Age header during a GET request.  If the client's Max-Age is of a shorter duration than the age of a cached resource, then the proxy or end-point SHOULD perform a cache refresh.  If the client specifies a Max-Age of zero seconds, then the response MUST discard the cached representation and return a fresh representation.
    
</p>
<a name="cache-refreshing"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Cache refresh</h3>

<p>
    After the expiration of the cache lifetime, clients and proxies can refresh their cached representation of a resource.  Cache refresh is accomplished using GET request which will return a representation of the resource's current state.
    
</p>
<p>
    If the end-point has the capability to version the resource, then the end-point should include the Etag header option in the response to a GET request.  The Etag is a variable length integer which captures a version checksum of the resource.  The Etag is an opaque identifier; clients MUST NOT infer any semantics from the Etag value.
    
</p>
<p>
    If an end-point specifies the Etag header option, then the client SHOULD specify a matching Etag header option in their GET request during cache refresh.  If the end-point's version of the resource is unmodified, then it SHOULD specify a 304 response with no payload to avoid retransmitting the resource representation.
    
</p>
<a name="proxying"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Proxying</h3>

<p>
    See <a class='info' href='#I-D.frank-6lowapp-chopan'>[I&#8209;D.frank&#8209;6lowapp&#8209;chopan]<span> (</span><span class='info'>Frank, B., &ldquo;Chopan - Compressed HTTP Over PANs,&rdquo; September&nbsp;2009.</span><span>)</span></a>.
    
</p>
<p>
    TODO:
    </p>
<ul class="text">
<li>Are interception proxies are still required to deal with a) sleeping nodes and b) protecting Internet HTTP traffic from overwhelming the CoAP network?
</li>
<li>But interception proxies breaks end-to-end IP encapsulation and requires support at the routing level
</li>
<li>Often the interception proxy is the same as the HTTP-to-CoAP gateway, so we need to decide how these topics dovetail
</li>
<li>In Chopan, the sleeping problem was tackled by having sleeping nodes check-in with their proxies while awake, notify model might solve this problem to some extent but still have to coordinate the sleep/awake times
</li>
<li>In Chopan we actually used caching to deal with POSTs, etc because otherwise how do you send a request to a sleeping node? The current caching sections are to be exclusive to GETs, but we still need to solve the problem for other types if methods.
</li>
</ul><p>
    
</p>
<a name="discovery"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Resource Discovery</h3>

<p>
  The discovery of resources offered by a CoAP end-point is extremely important in machine-to-machine applications where there are no humans in the loop and static interfaces result in fragility. The discovery of resources provided by an HTTP Web Server is called Web Discovery. In this document we refer to the discovery of resources offered by a CoAP end-point as Resource Discovery.
  
</p>
<p>
  CoAP makes the assumption that end-points are available on the default CoAP port, or otherwise have been configured or discovered using some general service discovery mechanism such as <a class='info' href='#I-D.cheshire-dnsext-multicastdns'>[I&#8209;D.cheshire&#8209;dnsext&#8209;multicastdns]<span> (</span><span class='info'>Cheshire, S. and M. Krochmal, &ldquo;Multicast DNS,&rdquo; March&nbsp;2010.</span><span>)</span></a>. This section assumes that such a configuration or service discovery has already been performed, if needed.
  
</p>
<p>
  Resource Discovery in CoAP is accomplished through the use of well-known resources which describe the links offered by that CoAP end-point. Well-known resources have the URI form "/.well-known/" as specified in <a class='info' href='#RFC5785'>[RFC5785]<span> (</span><span class='info'>Nottingham, M. and E. Hammer-Lahav, &ldquo;Defining Well-Known Uniform Resource Identifiers (URIs),&rdquo; April&nbsp;2010.</span><span>)</span></a>. Every CoAP end-point MUST support this well-known resource. The resource representation of this is described in <a class='info' href='#link_format'>Section&nbsp;6.1<span> (</span><span class='info'>Link Format</span><span>)</span></a>.
  
</p>
<p>
  CoAP requests the following well-known URL for discovery: "/.well-known/resources" (TODO: Formal description for use in request as per <a class='info' href='#RFC5785'>[RFC5785]<span> (</span><span class='info'>Nottingham, M. and E. Hammer-Lahav, &ldquo;Defining Well-Known Uniform Resource Identifiers (URIs),&rdquo; April&nbsp;2010.</span><span>)</span></a>).
  
</p>
<p>
  CoAP Resource Discovery supports the following interactions:
    </p>
<ul class="text">
<li>[request GET /.well-known/resources] returns the list of links available from a CoAP end-point. 
</li>
<li>A CoAP end-point may notify interested clients when this description has changed by sending [notify /.well-known/resources]. This resource MAY support subscription.
</li>
<li>More capable end-points such as proxies MAY support a resource directory by accepting [request POST /.well-known/resources] messages from other CoAP end-points. This adds the resources of other end-points to an agent directory in which absolute URIs are included for the links.
</li>
</ul><p>
  
</p>
<p>
  End-points with a large number of resources SHOULD organize their resource descriptions into a hierarchy of link resources. This is done by including links in the /.well-known/resources list which point to other resource lists, e.g. /.well-known/resources/sensors. 
  
</p>
<a name="link_format"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Link Format</h3>

<p>
    CoAP resource discovery makes use of the HTTP Link Header format specified in <a class='info' href='#I-D.nottingham-http-link-header'>[I&#8209;D.nottingham&#8209;http&#8209;link&#8209;header]<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; April&nbsp;2010.</span><span>)</span></a>. This specification allows for the use of this simple link format by other protocols, thus not limiting it to the actual HTTP Link Header. The format does not require special XML or binary parsing, and is extensible.
    
</p>
<p>
    CoAP defines a subset of the <a class='info' href='#I-D.nottingham-http-link-header'>[I&#8209;D.nottingham&#8209;http&#8209;link&#8209;header]<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; April&nbsp;2010.</span><span>)</span></a> features and specific parameters that have known meaning for CoAP resource discovery. A CoAP end-point MAY make use of link extension parameters as needed. The CoAP link format does not start with the "Link:" text. The following formal description is used for forming and parsing this link format:
    
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   link-value        = "&lt;" URI-Reference "&gt;" *( ";" link-param )
   link-param        = ( ( "desc" "=" URI )
                     | ( "name" "=" quoted-string )
                     | ( "type" "=" ( media-type | media-code) )
                     | ( "id" "=" integer )
                     | ( link-extension ) )
   link-extension    = ( parmname [ "=" ( ptoken | quoted-string ) ] )
   ptoken            = 1*ptokenchar
   ptokenchar        = "!" | "#" | "$" | "%" | "&amp;" | "'" | "("
                     | ")" | "*" | "+" | "-" | "." | "/" | DIGIT
                     | ":" | "&lt;" | "=" | "&gt;" | "?" | "@" | ALPHA
                     | "[" | "]" | "^" | "_" | "`" | "{" | "|"
                     | "}" | "~"
   media-code        = see Section 11.2
   media-type        = type-name "/" subtype-name

</pre></div>
<p>
  The link-value is the relative URI of the resource on that end-point or an absolute URI in the case of a directory agent. The desc parameter is a URI that points to the definition of that resource interface, for example in WADL. The name parameter is a descriptive or ontology name of the resource class. This name parameter SHOULD be in an m-DNS <a class='info' href='#I-D.cheshire-dnsext-multicastdns'>[I&#8209;D.cheshire&#8209;dnsext&#8209;multicastdns]<span> (</span><span class='info'>Cheshire, S. and M. Krochmal, &ldquo;Multicast DNS,&rdquo; March&nbsp;2010.</span><span>)</span></a> compatible form. The type parameter includes Internet media type this resource returns in ascii or code format. The id field is a unique identifier (e.g. UUID) for this resource for use in e.g. search directories. All link parameters are optional and custom link-extensions may be defined.

  

 
  
  An example of a typical CoAP link description in this format would be:
  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;/sensor/temp&gt;; name="TemperatureC"; type=text/xml;&lt;CR&gt;
&lt;/sensor/light&gt;; name="LightLux"; type=text/xml;

</pre></div>
<a name="http"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
HTTP Mapping</h3>

<p>
  TODO
  
</p>
<a name="constants"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Protocol Constants</h3>

<p>
    This section defines the relevant protocol constants defined in this document:

         </p>
<blockquote class="text"><dl>
<dt>RESPONSE_TIMEOUT</dt>
<dd>1 second
</dd>
<dt>MAX_RETRANSMIT</dt>
<dd>5
</dd>
</dl></blockquote><p>
  
</p>
<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Examples</h3>

<p>
  <a class='info' href='#fig-example-1'>Figure&nbsp;4<span> (</span><span class='info'>Basic request/response</span><span>)</span></a> shows a basic request sequence. A client makes a GET request for the resource /temperature to the server. The A Flag is set, requesting a response and the Transaction ID is 1234. The request includes one Uri Option "temperature" of Len = 11. This request is a total of 17 octets long. The corresponding response is of code 200 OK and includes a Payload of "22.3 C". The Transaction ID is 1234, thus the transaction is successfully completed. The response is 10 octets long.
  
</p><br /><hr class="insert" />
<a name="fig-example-1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

CLIENT                                                     SERVER
  |                                                          |
  |     ------  GET /temperature [A, TID=1234]  ------&gt;      |
  |                                                          |


 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 0 | 0 |   1   |1|  R  |Meth=0 |           TID=1234            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Type=1 |1|     Len = 11      |   "temperature" (11 Octets) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+



CLIENT                                                     SERVER
  |                                                          |
  |          &lt;-------- 200 OK [TID=1234] ---------           |
  |                                                          |


 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 0 | 1 |   0   | R |  Code=0   |           TID=1234            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    "22.3 C" (6 Octets) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Basic request/response&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
  TODO: Request with multiple packed messages (magic byte example..)
  
</p>
<p>
  TODO: Request - Response (with retransmission)
  
</p>
<p>
  TODO: Request - Response (discovery)
  
</p>
<p>
  TODO: Request (SUBSCRIBE) - Response ...
  Resulting Notify - Response
  
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Security Considerations</h3>

<p>
         TODO: Expand this section to a full security analysis, including how to use CoAP with various security options.
         
</p>
<p>
         Some of the features considered in this document will need further security considerations during a protocol design. For example the use of string URLs may have entail security risks due to complex processing on limited microcontroller implementations.
         
</p>
<p>
     	 The CoAP protocol will be designed for use with e.g. (D)TLS, IPsec or object security. A protocol design should consider how integration with these security methods will be done, how to secure the CoAP header and other implications.
     	 
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
IANA Considerations</h3>

<p>
         TODO (See IANA comments in the document).
     
</p>
<a name="appendix_codes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11.1"></a><h3>11.1.&nbsp;
Codes</h3>

<p>
  CoAP makes use of (a subset of) the HTTP status codes defined in <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>. The HTTP status code is encoded into a 6-bit unsigned integer code with the mapping defined in <a class='info' href='#tab-codes'>Table&nbsp;3<span> (</span><span class='info'>CoAP Codes</span><span>)</span></a>. The use of these codes is defined throughout this document using the HTTP Name.
  
</p><br /><hr class="insert" />
<a name="tab-codes"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Code</th><th align="left">HTTP Name</th></tr>
<tr>
<td align="left">0</td>
<td align="left">200 OK</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">201 Created</td>
</tr>
<tr>
<td align="left">14</td>
<td align="left">304 Not Modified</td>
</tr>
<tr>
<td align="left">20</td>
<td align="left">400 Bad Request</td>
</tr>
<tr>
<td align="left">21</td>
<td align="left">401 Unauthorized</td>
</tr>
<tr>
<td align="left">23</td>
<td align="left">403 Forbidden</td>
</tr>
<tr>
<td align="left">24</td>
<td align="left">404 Not Found</td>
</tr>
<tr>
<td align="left">25</td>
<td align="left">405 Method Not Allowed</td>
</tr>
<tr>
<td align="left">29</td>
<td align="left">409 Conflict</td>
</tr>
<tr>
<td align="left">35</td>
<td align="left">415 Unsupported Media Type</td>
</tr>
<tr>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">40</td>
<td align="left">500 Internal Server Error</td>
</tr>
<tr>
<td align="left">43</td>
<td align="left">503 Service Unavailable</td>
</tr>
<tr>
<td align="left">44</td>
<td align="left">504 Gateway Timeout</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 3: CoAP Codes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="appendix_content"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11.2"></a><h3>11.2.&nbsp;
Content Types</h3>

<p>
  Internet media types are identified by a string in HTTP, such as "application/xml". This string is made up of a top-level type "application" and a sub-type "xml" <a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a>. In order to minimize the overhead of using these media types to indicate the type of message payload, CoAP defines an identifier encoding scheme for a subset of Internet media types. It is expected that this table of identifiers will be extensible and maintained by IANA.
  
</p>
<p>
  The Content-type Option is formatted as a variable length unsigned integer, thus the most common media types are encoded into an 8-bit unsigned integer. This identifier is encoded as follows. Regardless of the length of the integer, the most significant 3 bits indicates the top-level media type (text, application etc.) as defined in <a class='info' href='#tab-content-class'>Table&nbsp;4<span> (</span><span class='info'>Top-level type identifiers</span><span>)</span></a>. The five initial top-level types defined in <a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a> are supported. Composite high-level types (multipart and message) are not supported. The remaining bits indicate the sub-types <a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a>. This allows for up to 8 high-level types, with up to 32 sub-types for each in an 8-bit identifier and up to 8192 sub-types in a 16-bit identifier.
  
</p>
<p>
  For example, "application/xml" would be encoded in 8-bits as:
  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
5 &lt;&lt; 5 | 00  =  10100000
</pre></div><br /><hr class="insert" />
<a name="tab-content-class"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Top-level type</th><th align="left">Identifier</th></tr>
<tr>
<td align="left">text</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">image</td>
<td align="left">2</td>
</tr>
<tr>
<td align="left">audio</td>
<td align="left">3</td>
</tr>
<tr>
<td align="left">video</td>
<td align="left">4</td>
</tr>
<tr>
<td align="left">application</td>
<td align="left">5</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 4: Top-level type identifiers&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="tab-content-text"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Sub-type</th><th align="left">Identifier</th></tr>
<tr>
<td align="left">xml</td>
<td align="left">0</td>
</tr>
<tr>
<td align="left">plain</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">csv</td>
<td align="left">2</td>
</tr>
<tr>
<td align="left">html</td>
<td align="left">3</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 5: text sub-type identifiers&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="tab-content-image"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Sub-type</th><th align="left">Identifier</th></tr>
<tr>
<td align="left">gif</td>
<td align="left">0</td>
</tr>
<tr>
<td align="left">jpeg</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">png</td>
<td align="left">2</td>
</tr>
<tr>
<td align="left">tiff</td>
<td align="left">3</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 6: image sub-type identifiers&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="tab-content-audio"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Sub-type</th><th align="left">Identifier</th></tr>
<tr>
<td align="left">raw</td>
<td align="left">0</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 7: audio sub-type identifiers&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="tab-content-video"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Sub-type</th><th align="left">Identifier</th></tr>
<tr>
<td align="left">raw</td>
<td align="left">0</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 8: video sub-type identifiers&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="tab-content-application"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Sub-type</th><th align="left">Identifier</th></tr>
<tr>
<td align="left">xml</td>
<td align="left">0</td>
</tr>
<tr>
<td align="left">octet-stream</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">rdf+xml</td>
<td align="left">2</td>
</tr>
<tr>
<td align="left">soap+xml</td>
<td align="left">3</td>
</tr>
<tr>
<td align="left">atom+xml</td>
<td align="left">4</td>
</tr>
<tr>
<td align="left">xmpp+xml</td>
<td align="left">5</td>
</tr>
<tr>
<td align="left">exi</td>
<td align="left">6</td>
</tr>
<tr>
<td align="left">x-bxml</td>
<td align="left">7</td>
</tr>
<tr>
<td align="left">fastinfoset</td>
<td align="left">8</td>
</tr>
<tr>
<td align="left">soap+fastinfoset</td>
<td align="left">9</td>
</tr>
<tr>
<td align="left">json</td>
<td align="left">10</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 9: application sub-type identifiers&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
Acknowledgments</h3>

<p>Thanks to Carsten Bormann, Michael Stuber, Richard Kelsey, Cullen Jennings, Guido Moritz, Peter Van Der Stok, Adriano Pezzuto, Lisa Dussealt, Alexey Melnikov, Gilbert Clark, Salvatore Loreto, Petri Mutka, Szymon Sasin, Robert Quattlebaum, Robert Cragie, Angelo Castellani, Tom Herbst and David Ryan for helpful comments and discussions.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
Changelog</h3>

<p>Changes from shelby-01 to ietf-00:
      </p>
<blockquote class="text">
<p>o Removed the TCP binding section, left open for the future.
</p>
<p>o Fixed a bug in the example.
</p>
<p>o Marked current Sub/Notify as (Experimental) while under WG discussion.
</p>
<p>o Fixed maximum datagram size to 1280 for both IPv4 and IPv6 (for CoAP-CoAP proxying to work).
</p>
<p>o Temporarily removed the Magic Byte header as TCP is no longer included as a binding. 
</p>
<p>o Removed the Uri-code Option as different URI encoding schemes are being discussed.
</p>
<p>o Changed the rel= field to desc= for resource discovery.
</p>
<p>o Changed the maximum message size to 1024 bytes to allow for IP/UDP headers.
</p>
<p>o Made the URI slash optimization and method impotence MUSTs 
</p>
<p>o Minor editing and bug fixing.
</p>
</blockquote><p>
    
</p>
<p>Changes from shelby-00 to shelby-01:
      </p>
<blockquote class="text">
<p>o Unified the message header and added a notify message type.
</p>
<p>o Renamed methods with HTTP names and removed the NOTIFY method.
</p>
<p>o Added a number of options field to the header.
</p>
<p>o Combines the Option Type and Length into an 8-bit field.
</p>
<p>o Added the magic byte header.
</p>
<p>o Added new Etag option.
</p>
<p>o Added new Date option.
</p>
<p>o Added new Subscription option.
</p>
<p>o Completed the HTTP Code - CoAP Code mapping table appendix.
</p>
<p>o Completed the Content-type Identifier appendix and tables.
</p>
<p>o Added more simplifications for URI support.
</p>
<p>o Initial subscription and discovery sections.
</p>
<p>o A Flag requirements simplified.
</p>
</blockquote><p>
    
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.14"></a><h3>14.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>14.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.frank-6lowapp-chopan">[I-D.frank-6lowapp-chopan]</a></td>
<td class="author-text">Frank, B., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-frank-6lowapp-chopan-00.txt">Chopan - Compressed HTTP Over PANs</a>,&rdquo; draft-frank-6lowapp-chopan-00 (work in progress), September&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-frank-6lowapp-chopan-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.nottingham-http-link-header">[I-D.nottingham-http-link-header]</a></td>
<td class="author-text">Nottingham, M., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-nottingham-http-link-header-09.txt">Web Linking</a>,&rdquo; draft-nottingham-http-link-header-09 (work in progress), April&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-nottingham-http-link-header-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2046">[RFC2046]</a></td>
<td class="author-text"><a href="mailto:ned@innosoft.com">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com">N. Borenstein</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2046">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>,&rdquo; RFC&nbsp;2046, November&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2046.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4346">[RFC4346]</a></td>
<td class="author-text">Dierks, T. and E. Rescorla, &ldquo;<a href="http://tools.ietf.org/html/rfc4346">The Transport Layer Security (TLS) Protocol Version 1.1</a>,&rdquo; RFC&nbsp;4346, April&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4346.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4347">[RFC4347]</a></td>
<td class="author-text">Rescorla, E. and N. Modadugu, &ldquo;<a href="http://tools.ietf.org/html/rfc4347">Datagram Transport Layer Security</a>,&rdquo; RFC&nbsp;4347, April&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4347.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5785">[RFC5785]</a></td>
<td class="author-text">Nottingham, M. and E. Hammer-Lahav, &ldquo;<a href="http://tools.ietf.org/html/rfc5785">Defining Well-Known Uniform Resource Identifiers (URIs)</a>,&rdquo; RFC&nbsp;5785, April&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5785.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>14.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.cheshire-dnsext-multicastdns">[I-D.cheshire-dnsext-multicastdns]</a></td>
<td class="author-text">Cheshire, S. and M. Krochmal, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-cheshire-dnsext-multicastdns-11.txt">Multicast DNS</a>,&rdquo; draft-cheshire-dnsext-multicastdns-11 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-cheshire-dnsext-multicastdns-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.shelby-6lowapp-encoding">[I-D.shelby-6lowapp-encoding]</a></td>
<td class="author-text">Shelby, Z., Luimula, M., and D. Peintner, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-shelby-6lowapp-encoding-00.txt">Efficient XML Encoding and 6LowApp</a>,&rdquo; draft-shelby-6lowapp-encoding-00 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-shelby-6lowapp-encoding-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.shelby-core-coap-req">[I-D.shelby-core-coap-req]</a></td>
<td class="author-text">Shelby, Z., Stuber, M., Sturek, D., Frank, B., and R. Kelsey, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-shelby-core-coap-req-01.txt">CoAP Requirements and Features</a>,&rdquo; draft-shelby-core-coap-req-01 (work in progress), April&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-shelby-core-coap-req-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4944">[RFC4944]</a></td>
<td class="author-text">Montenegro, G., Kushalnagar, N., Hui, J., and D. Culler, &ldquo;<a href="http://tools.ietf.org/html/rfc4944">Transmission of IPv6 Packets over IEEE 802.15.4 Networks</a>,&rdquo; RFC&nbsp;4944, September&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4944.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Zach Shelby</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sensinode</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Kidekuja 2</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vuokatti  88600</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">FINLAND</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358407796297</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:zach@sensinode.com">zach@sensinode.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Brian Frank</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">SkyFoundry</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Richmond, VA  </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:brian@skyfoundry.com">brian@skyfoundry.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Don Sturek</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Pacific Gas & Electric</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">77 Beale Street</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Francisco, CA  </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1-619-504-3615</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:d.sturek@att.net">d.sturek@att.net</a></td></tr>
</table>
</body></html>
