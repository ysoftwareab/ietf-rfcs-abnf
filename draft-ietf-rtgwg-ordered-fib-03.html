<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Loop-free convergence using oFIB</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Loop-free convergence using oFIB">
<meta name="keywords" content="I-D, Internet-Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header"> Pierre Francois</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header"> Olivier Bonaventure</td></tr>
<tr><td class="header">Intended status: Experimental</td><td class="header">Universite catholique de Louvain</td></tr>
<tr><td class="header">Expires: September 6, 2010</td><td class="header"> Mike Shand</td></tr>
<tr><td class="header">&nbsp;</td><td class="header"> Stewart Bryant</td></tr>
<tr><td class="header">&nbsp;</td><td class="header"> Stefano Previdi</td></tr>
<tr><td class="header">&nbsp;</td><td class="header"> Clarence Filsfils</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Cisco Systems</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">March 05, 2010</td></tr>
</table></td></tr></table>
<h1><br />Loop-free convergence using oFIB<br />draft-ietf-rtgwg-ordered-fib-03</h1>

<h3>Abstract</h3>

<p>This draft describes a mechanism for use in conjunction with link
      state routing protocols which prevents the transient loops which would
      otherwise occur during topology changes. It does this by correctly
      sequencing the FIB updates on the routers.
</p>
<p>This mechanism can be used in the case of non-urgent link or node
      shutdowns and restarts or link metric changes. It can also be used in
      conjunction with a FRR mechanism which converts a sudden link or node
      failure into a non-urgent topology change. This is possible where a
      complete repair path is provided for all affected destinations.
</p>
<p>After a non-urgent topology change, each router computes a rank that
      defines the time at which it can safely update its FIB. A method for
      accelerating this loop-free convergence process by the use of completion
      messages is also described.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 6, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Conventions used in the document<br />
<a href="#anchor2">2.</a>&nbsp;
Introduction<br />
<a href="#sec.ordering">3.</a>&nbsp;
The required FIB update order<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.ordering.single">3.1.</a>&nbsp;
Single Link Events<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.ordering.single.down">3.1.1.</a>&nbsp;
Link Down / Metric Increase<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.ordering.single.up">3.1.2.</a>&nbsp;
Link Up / Metric Decrease<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.ordering.multilink">3.2.</a>&nbsp;
Multi-link events<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.ordering.linecard.router.down">3.2.1.</a>&nbsp;
Router Down events<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.ordering.linecard.router.up">3.2.2.</a>&nbsp;
Router Up events<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.ordering.multilink.linecards">3.2.3.</a>&nbsp;
Linecard Failure/Restoration Events<br />
<a href="#sec.applying">4.</a>&nbsp;
Applying ordered FIB updates<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.deducing">4.1.</a>&nbsp;
Deducing the topology change<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.deciding">4.2.</a>&nbsp;
Deciding if ordered FIB updates applies<br />
<a href="#sec.calculation">5.</a>&nbsp;
Computation of the ordering<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.implementation.down">5.1.</a>&nbsp;
Link or Router Down or Metric Increase<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.implementation.up">5.2.</a>&nbsp;
Link or Router Up or Metric Decrease<br />
<a href="#sec.completion">6.</a>&nbsp;
Acceleration of Ordered Convergence<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.completion.construction">6.1.</a>&nbsp;
Construction of the waiting list and notification list<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.completion.construction.down">6.1.1.</a>&nbsp;
Down events<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.completion.construction.up">6.1.2.</a>&nbsp;
Up Events<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec.completion.format">6.2.</a>&nbsp;
Format of Completion Messages<br />
<a href="#sec.fallback">7.</a>&nbsp;
Fall back to Conventional Convergence<br />
<a href="#anchor3">8.</a>&nbsp;
oFIB state machine<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">8.1.</a>&nbsp;
OFIB_STABLE<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">8.2.</a>&nbsp;
OFIB_HOLDING_DOWN<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">8.3.</a>&nbsp;
OFIB_HOLDING_UP<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">8.4.</a>&nbsp;
OFIB_ONGOING<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">8.5.</a>&nbsp;
OFIB_ABANDONED<br />
<a href="#anchor9">9.</a>&nbsp;
IANA considerations<br />
<a href="#anchor10">10.</a>&nbsp;
Security considerations<br />
<a href="#sec.ack">11.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">12.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Conventions used in the document</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in BCP 14, <a class='info' href='#RFC2119'>[4]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Introduction</h3>

<p>With link-state protocols, such as IS-IS <a class='info' href='#ISO10589'>[1]<span> (</span><span class='info'>International Organization for             Standardization, &ldquo;Intermediate system to Intermediate system intra-domain           routeing information exchange protocol for use in conjunction with           the protocol for providing the connectionless-mode Network Service           (ISO 8473),&rdquo; Nov&nbsp;2002.</span><span>)</span></a> and OSPF <a class='info' href='#RFC2328'>[5]<span> (</span><span class='info'>Moy, J., &ldquo;OSPF Version 2,&rdquo; April&nbsp;1998.</span><span>)</span></a>, each
      time the network topology changes, some routers need to modify their
      Forwarding Information Base (FIB) to take into account the new topology.
      Each topology change causes a convergence phase. During this phase,
      routers may transiently have inconsistent FIBs, which may lead to packet
      loops and losses, even if the reachability of the destinations is not
      compromised after the topology change. Packet losses and transient loops
      can also occur in the case of a link down event implied by a maintenance
      operation, even if this operation is predictable and not urgent. When
      the link state change is a metric update and when a new link is brought
      up in the network, there is no direct loss of connectivity, but
      transient packet loops and loss can still occur.
</p>
<p>
<p> For example, in <a class='info' href='#fig.example'>Figure&nbsp;1<span> (</span><span class='info'>A simple topology</span><span>)</span></a>, if the link
      between X and Y is shut down by an operator, packets destined to X can
      loop between R and Y when Y has updated its FIB while R has not yet
      updated its FIB, and packets destined to Y can loop between X and S if X
      updates its FIB before S. According to the current behaviour of ISIS and
      OSPF, this scenario will happen most of the time because X and Y are the
      first routers to be aware of the failure, so that they will update their
      FIBs first.
</p> <br /><hr class="insert" />
<a name="fig.example"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                  1
                    X-------------/-------------Y
                    |                           |
                    |                           |
                    |                           |
                    |                           |
                  1 |                           | 1
                    |                           |
                    |                           |
                    |                           |
                    |                           |
                    S---------------------------R
                                  2
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: A simple topology&nbsp;</b></font><br /></td></tr></table><hr class="insert" />


<p>It should be noted that the loops can occur remotely from the
      failure, not just adjacent to it.
</p>
<p>The goal of this draft is to define a mechanism which sequences the
      router FIB updates to maintain consistency throughout the network. By
      correctly setting the FIB change order no looping or packet loss can
      occur. This mechanism may be applied to the case of managed link-state
      changes, i.e. link metric change, manual link down/up, manual router
      down/up, and managed state changes of a set of links attached to one
      router. It may also be applied to the case where one or more network
      elements are protected by a fast re-route mechanism <a class='info' href='#RFC5714'>[7]<span> (</span><span class='info'>Shand, M. and S. Bryant, &ldquo;IP Fast Reroute Framework,&rdquo; January&nbsp;2010.</span><span>)</span></a> <a class='info' href='#RFC4090'>[6]<span> (</span><span class='info'>Pan, P., Swallow, G., and A. Atlas, &ldquo;Fast Reroute Extensions to RSVP-TE for LSP Tunnels,&rdquo; May&nbsp;2005.</span><span>)</span></a>. The mechanisms
      that are used in the failure case are exactly the same as those used for
      managed changes. For simplicity this draft makes no further distinction
      between managed and unplanned changes.
</p>
<a name="sec.ordering"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
The required FIB update order</h3>

<p>This section provides an overview of the required ordering of the FIB
      updates. A more detailed analysis of the rerouting dynamics and
      correctness proofs of the mechanism can be found in <a class='info' href='#refs.PFOB07'>[3]<span> (</span><span class='info'>P. Francois and O. Bonaventure, &ldquo;Avoiding transient loops during IGP convergence in IP           Networks,&rdquo; December&nbsp;2007.</span><span>)</span></a>.
</p>
<a name="sec.ordering.single"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Single Link Events</h3>

<p>For simplicity the correct ordering for single link changes are
        described first. The draft then builds on this to demonstrate that the
        same principles can be applied to more complex scenarios such as line
        card or node changes.
</p>
<a name="sec.ordering.single.down"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.1"></a><h3>3.1.1.&nbsp;
Link Down / Metric Increase</h3>

<p>First consider the non-urgent failure of a link or the increase
          of a link metric. In this case, a router R MUST NOT update its FIB
          until all other routers that send traffic via R and the affected
          link have first updated their FIBs.
</p>
<p>The following argument shows that this rule ensures the correct
          order of FIB change when the link X-&gt;Y is shut down or its metric
          is increased.
</p>
<p>An "outdated" FIB entry for a destination is defined as being a
          FIB entry that still reflects the shortest path(s) in use before the
          topology change. Once a packet reaches a router R that has an
          outdated FIB entry for the packet destination, then, provided the
          oFIB ordering is respected, the packet will continue to X only
          traversing routers that also have an outdated FIB entry for the
          destination. The packet thus reaches X without looping and will be
          forwarded to Y via X-&gt;Y (or in the case of FRR, the X-&gt;Y
          repair path) and hence reach its destination.
</p>
<p>Since it can be assumed that the original topology was loop-free,
          Y will never use the link Y-&gt;X to reach the destination and hence
          the path(s) between Y and the destination are guaranteed to be
          unaffected by the topology change. It therefore follows that the
          packet arriving at Y will reach its destination without looping.
</p>
<p>Since it can also be assumed that the new topology is loop-free,
          by definition a packet cannot loop while being forwarded exclusively
          by routers with an updated FIB entry.
</p>
<p>In other words, when the oFIB ordering is respected, if a packet
          reaches an outdated router, it can never subsequently reach an
          updated router, and cannot loop because from this point on it will
          only be forwarded on the consistent path that was used before the
          event. If it does not reach an outdated router, it will only be
          forwarded on the loop free path that will be used after the
          convergence.
</p>
<p>According to the proposed ordering, X will be the last router to
          update its FIB. Once it has updated its FIB, the link X-&gt;Y can
          actually be shut down (or the repair removed).
</p>
<p>If the link X-Y is bidirectional a similar process must be run to
          order the FIB update for destinations using the link in the
          direction Y-&gt;X. As has already been shown, no packet ever
          traverses the X-Y link in both directions, and hence the operation
          of the two ordering processes is orthogonal.
</p>
<a name="sec.ordering.single.up"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.2"></a><h3>3.1.2.&nbsp;
Link Up / Metric Decrease</h3>

<p>In the case of link up events or metric decreases, a router R
          MUST update its FIB BEFORE all other routers that WILL use R to
          reach the affected link.
</p>
<p>The following argument shows that this rule ensures the correct
          order of FIB change when the link X-&gt;Y is brought into service or
          its metric is decreased.
</p>
<p>Firstly, when a packet reaches a router R that has already
          updated its FIB, all the routers on the path from R to X will also
          have updated their FIB, so that the packet will reach X and be
          forwarded along X-&gt;Y, ultimately reaching its destination.
</p>
<p>Secondly, a packet cannot loop between routers that have not yet
          updated their FIB. This proves that no packet can loop.
</p>
<a name="sec.ordering.multilink"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Multi-link events</h3>

<p>The following sections describe the required ordering for single
        events which may be manifest as multiple link events. For example, the
        failure of a router may be notified to the rest of the network as the
        individual failure of all its attached links. The means of identifying
        the event type from the collection of received link events is
        described in <a class='info' href='#sec.deducing'>Section&nbsp;4.1<span> (</span><span class='info'>Deducing the topology change</span><span>)</span></a>.
</p>
<a name="sec.ordering.linecard.router.down"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
Router Down events</h3>

<p>In the case of the non-urgent shut-down of a router, a router R
          MUST NOT update its FIB until all other routers that send traffic
          via R and the affected router have first updated their FIBs.
</p>
<p>Using a proof similar to that for link failure, it can be shown
          that no loops will occur if this ordering is respected <a class='info' href='#refs.PFOB07'>[3]<span> (</span><span class='info'>P. Francois and O. Bonaventure, &ldquo;Avoiding transient loops during IGP convergence in IP           Networks,&rdquo; December&nbsp;2007.</span><span>)</span></a>.
</p>
<a name="sec.ordering.linecard.router.up"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2"></a><h3>3.2.2.&nbsp;
Router Up events</h3>

<p>In the case of a router being brought into service, a router R
          MUST update its FIB BEFORE all other routers that WILL use R to
          reach the affected router.
</p>
<p>A proof similar to that for link up, shows that no loops will
          occur if this ordering is respected <a class='info' href='#refs.PFOB07'>[3]<span> (</span><span class='info'>P. Francois and O. Bonaventure, &ldquo;Avoiding transient loops during IGP convergence in IP           Networks,&rdquo; December&nbsp;2007.</span><span>)</span></a>.
</p>
<a name="sec.ordering.multilink.linecards"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.3"></a><h3>3.2.3.&nbsp;
Linecard Failure/Restoration Events</h3>

<p>The failure of a line card involves the failure of a set of links
          all of which have a single node in common, i.e. the parent router.
          The ordering to be applied is the same as if it were the failure of
          the parent router.
</p>
<p>In a similar way, the restoration of an entire linecard to
          service as a single event can be treated as if the parent router
          were returning to service.
</p>
<a name="sec.applying"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Applying ordered FIB updates</h3>

<a name="sec.deducing"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Deducing the topology change</h3>

<p>As has been described, a single event such as the failure or
        restoration of a single link, single router or a linecard may be
        notified to the rest of the network as a set of individual link change
        events. It is necessary to deduce from this collection of link state
        notifications the type of event that has occurred in the network and
        hence the required ordering.
</p>
<p>When a link change event is received which impacts the receiving
        router's FIB, the routers at the near and far end of the link are
        noted.
</p>
<p>If all events received within some hold-down period have a single
        router (R) in common, then it is assumed that the change reflects an
        event (line-card or router change) concerning the common router
        (R).
</p>
<p>In the case of a link change event, the router at the far end of
        the link is deemed to be the common router (R).
</p>
<p>All ordering computations are based on treating the common router R
        as the root for both link and node events.
</p>
<a name="sec.deciding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Deciding if ordered FIB updates applies</h3>

<p>There are some events (for example a subsequent failure with
        conflicting repair requirements occurring before the ordered FIB
        process has completed) that cannot be correctly processed by this
        mechanism. In these cases it is necessary to ensure that convergence
        falls back to the conventional mode of operation (see <a class='info' href='#sec.fallback'>Section&nbsp;7<span> (</span><span class='info'>Fall back to Conventional Convergence</span><span>)</span></a>).
</p>
<p>In all cases it is necessary to wait some hold-down period after
        receiving the first notification to ensure that all routers have
        received the complete set of link state notifications associated with
        the single event.
</p>
<p>At any time, if a link change notification is received which would
        have no effect on the receiving router's FIB, then it may be
        ignored.
</p>
<p>If no other event is received during the hold-down time, the event
        is treated as a link event. Note that the reverse connectivity check
        means that only the first failure event, or second up event have an
        effect on the FIB.
</p>
<p>If an event is received within the hold down period which does NOT
        reference the common router (R) then in this version of the
        specification normal convergence is invoked immediately (see <a class='info' href='#sec.fallback'>Section&nbsp;7<span> (</span><span class='info'>Fall back to Conventional Convergence</span><span>)</span></a>).
</p>
<p>The sudden failure of a link or a set of links that are not
        protected using a FRR mechanism must be processed using the
        conventional mode of operation.
</p>
<p>In summary an ordered FIB process is applicable iif the set of link
        state notifications received between the first event and the hold down
        period reference a common router R, and one of the following
        assertions is verified : </p>
<blockquote class="text">
<p>. The set of notifications refer to link down events concerning
            protected links and metric increase events
</p>
<p>. The set of notifications refer to link up events and metric
            decrease events.
</p>
</blockquote>

<a name="sec.calculation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Computation of the ordering</h3>

<p>This section describes how the required ordering is computed.
</p>
<a name="sec.implementation.down"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Link or Router Down or Metric Increase</h3>

<p>To respect the proposed ordering, routers compute a rank that will
        be used to determine the time at which they are permitted to perform
        their FIB update. In the case of a failure event rooted at router Y or
        an increase of the metric of link X-&gt;Y, router R computes the
        reverse Shortest Path Tree in the topology before the failure
        (rSPT_OLD) rooted at Y. This rSPT gives the shortest paths to reach Y
        before the failure. The branch of the reverse SPT that is below R
        corresponds to the set of shortest paths to R that are used by the
        routers that reach Y via R.
</p>
<p>The rank of router R is defined as the depth (in number of hops) of
        this branch. In the case of ECMP, the maximum depth of the ECMP path
        set is used.
</p>
<p>Router R is required to update its FIB at time
</p>
<p>T0 + H + rank * MAX_FIB
</p>
<p>where T0 is the arrival time of the link-state packet containing
        the topology change, H is the hold-down time and MAX_FIB is a
        network-wide constant that reflects the maximum time required to
        update a FIB irrespective of the change required. The value of MAX_FIB
        is network specific and its determination is out of the scope of this
        document. This value must be agreed by all the routers in the network.
        This agreement can be performed by using a capability TLV as defined
        in <a class='info' href='#I-D.atlas-bryant-shand-lf-timers'>[8]<span> (</span><span class='info'>K, A. and S. Bryant, &ldquo;Synchronisation of Loop Free Timer Values,&rdquo; February&nbsp;2008.</span><span>)</span></a>.
</p>
<p>All the routers that use R to reach Y will compute a lower rank
        than R, and hence the correct order will be respected. It should be
        noted that only the routers that used Y before the event need to
        compute their rank.
</p>
<a name="sec.implementation.up"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Link or Router Up or Metric Decrease</h3>

<p>In the case of a link or router up event rooted at Y or a link
        metric decrease affecting link Y-&gt;W, a router R must have a rank
        that is higher than the rank of the routers that it will use to reach
        Y, according to the rule described in <a class='info' href='#sec.ordering'>Section&nbsp;3<span> (</span><span class='info'>The required FIB update order</span><span>)</span></a>. The rank of R is thus the number of
        hops between R and Y in its renewed Shortest Path Tree. When R has
        multiple equal cost paths to Y, the rank is the length in hops of the
        longest ECMP path to Y.
</p>
<p>Router R is required to update its FIB at time
</p>
<p>T0 + H + rank * MAX_FIB
</p>
<p>It should be noted that only the routers that use Y after the event
        have to compute a rank, i.e. only the routers that have Y in their SPT
        after the link-state change.
</p>
<a name="sec.completion"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Acceleration of Ordered Convergence</h3>

<p>The mechanism described above is conservative, and hence may be
      relatively slow. The purpose of this section is to describe a method of
      accelerating the controlled convergence in such a way that ordered
      loop-free convergence is still guaranteed.
</p>
<p>In many cases a router will complete its required FIB changes in a
      time much shorter than MAX_FIB and in many other cases, a router will
      not have to perform any FIB change at all.
</p>
<p>This section describes the use of completion messages to speed up the
      convergence by providing a means for a router to inform those routers
      waiting for it, that it has completed any required FIB changes. When a
      router has been advised of completion by all the routers for which it is
      waiting, it can safely update its own FIB without further delay. In most
      cases this can result in a sub-second re-convergence time comparable
      with that of normal convergence.
</p>
<p>Routers maintain a waiting list of the neighbours from which a
      completion message must be received. Upon reception of a completion
      message from a neighbour, a router removes this neighbour from its
      waiting list. Once its waiting list becomes empty, the router is allowed
      to update its FIB immediately even if its ranking timer has not yet
      expired. Once this is done, the router sends a completion message to the
      neighbours that are waiting for it to complete. Those routers are listed
      in a list called the Notification List. Completion messages contain an
      identification of the event to which they refer.
</p>
<p>Note that, since this is only an optimization, any loss of completion
      messages will result in the routers waiting their defined ranking time
      and hence the loop-free properties will be preserved.
</p>
<a name="sec.completion.construction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Construction of the waiting list and notification list</h3>

<a name="sec.completion.construction.down"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.1"></a><h3>6.1.1.&nbsp;
Down events</h3>

<p>Consider a link or node down event rooted at router Y or the cost
          increase of the link X-&gt;Y. A router R will compute rSPT_OLD(Y) to
          determine its rank. When doing this, R also computes the set of
          neighbors that R uses to reach the failing node or link, and the set
          of neighbors that are using R to reach the failing node or link. The
          Notification list of R is equal to the former set and the Waiting
          list of R is equal to the latter.
</p>
<p>Note that R could include all its neighbors except those in the
          Waiting list in the Notification list, this has no impact on the
          correctness of the protocol, but would be unnecessarily
          inefficient.
</p>
<a name="sec.completion.construction.up"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.2"></a><h3>6.1.2.&nbsp;
Up Events</h3>

<p>Consider a link or node up event rooted at router Y or the cost
          decrease of the link Y-&gt;X. A router R will compute its new SPT
          (SPT_new(R)). The Waiting list is the set of nexthop routers that R
          uses to reach Y in SPT_new(R).
</p>
<p>In a simple implementation the notification list of R is all the
          neighbours of R excluding those in the Waiting list. This may be
          further optimized by computing rSPT_new(Y) to determine those
          routers that are waiting for R to complete.
</p>
<a name="sec.completion.format"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Format of Completion Messages</h3>

<p>The format of completion messages and means of their delivery is
        routing protocol dependent and is outside the scope of this document.
        An encoding of completion message for IS-IS is proposed in <a class='info' href='#I-D.bonaventure-isis-ordered'>[2]<span> (</span><span class='info'>Bonaventure, O., &ldquo;ISIS extensions for ordered FIB updates,&rdquo; February&nbsp;2006.</span><span>)</span></a>.
</p>
<p>The following information is required:
</p>
<p></p>
<blockquote class="text">
<p>. Identity of the sender.
</p>
<p>. A list of routing notifications being considered in the
            associated FIB change. Each notification is defined as :
</p>
<blockquote class="text">
<p>. Node ID of the near end of the link
</p>
<p>. Node ID of the far end of the link
</p>
<p>. Old Metric
</p>
<p>. New Metric
</p>
</blockquote>
</blockquote>

<a name="sec.fallback"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Fall back to Conventional Convergence</h3>

<p>In circumstances where a router detects that it is dealing with
      incomplete or inconsistent link state information, or when a further
      topology event is received before completion of the current ordered FIB
      update process it may be expedient to abandon the controlled convergence
      process. Fall back mechanisms are investigated in <a class='info' href='#I-D.bryant-francois-shand-ipfrr-aah'>[9]<span> (</span><span class='info'>Shand, M., Bryant, S., and P. Francois, &ldquo;Mechanisms for safely abandoning loop-free convergence (AAH),&rdquo; October&nbsp;2008.</span><span>)</span></a>. The state machine
      defined in this version of the draft does not make an assumption on
      which fall back mechanism will be used.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
oFIB state machine</h3>

<p>An ofib capable router maintains an ofib state value which can be one
      of : OFIB_STABLE, OFIB_HOLDING_DOWN, OFIB_HOLDING_UP, OFIB_ABANDONED,
       OFIB_ONGOING.
</p>
<p>An ofib capable router maintains a timer, Hold_down_timer. An ofib
      capable router is configured with a value refered to as
      HOLD_DOWN_DURATION. This configuration can be performed manually or
      using <a class='info' href='#I-D.atlas-bryant-shand-lf-timers'>[8]<span> (</span><span class='info'>K, A. and S. Bryant, &ldquo;Synchronisation of Loop Free Timer Values,&rdquo; February&nbsp;2008.</span><span>)</span></a>.
</p>
<p>An ofib capable router maintains a timer, rank_timer.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
OFIB_STABLE</h3>

<p>OFIB_STABLE is the state of a router which is not currently
        involved in any convergence process. This router is ready to process
        an event by applying ofib.
</p>
<p>EVENT : Reception of a link-state packet describing an event of the
        type link X--Y down or metric increase to be processed using oFIB.
</p>
<p>ACTION : Set state to OFIB_HOLDING_DOWN. Start Hold_down_timer.
        ofib_current_common_set = {X,Y}. Compute rank with respect to the
        event, as defined in <a class='info' href='#sec.calculation'>Section&nbsp;5<span> (</span><span class='info'>Computation of the ordering</span><span>)</span></a>. Store
        Waiting List and Notification List for X--Y obtained from the rank
        computation.
</p>
<p>EVENT : Reception of a link-state packet describing an event of the
        type link X--Y up or metric decrease which to be processed using
        oFIB.
</p>
<p>ACTION :
</p>
<p></p>
<blockquote class="text">
<p>Set state to OFIB_HOLDING_UP.
</p>
<p>Start Hold_down_timer.
</p>
<p>ofib_current_common_set = {X,Y}
</p>
<p>Compute rank with respect to the event, as defined in section
            <a class='info' href='#sec.calculation'>Section&nbsp;5<span> (</span><span class='info'>Computation of the ordering</span><span>)</span></a> .
</p>
<p>Store Waiting List and Notification List for X--Y obtained from
            the rank computation.
</p>
</blockquote>

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
OFIB_HOLDING_DOWN</h3>

<p>OFIB_HOLDING_DOWN is the state of a router that is collecting a set
        of link down or metric increase link-state packets to be processed
        together using controlled convergence.
</p>
<p>EVENT : Reception of a link-state packet describing an event of the
        type link up or metric decrease which in itself can be processed using
        oFIB.
</p>
<p>ACTION :
</p>
<p></p>
<blockquote class="text">
<p>Set state to OFIB_ABANDONED.
</p>
<p>Reset Hold_down_timer.
</p>
<p>Trigger AAH mechanism
</p>
</blockquote>

<p>EVENT : Reception of a link-state packet describing an event of the
        type link A--B down or metric increase which in itself can be
        processed using oFIB.
</p>
<p>ACTION :
</p>
<p></p>
<blockquote class="text">
<p>ofib_current_common_set =
            intersection(ofib_current_common_set,{A,B}).
</p>
<p>If ofib_current_common_set is empty, then there is no longer a
            node in common in all the pending link-state changes.
</p>
<blockquote class="text">
<p>Set state to OFIB_ABANDONED
</p>
<p>Reset Hold_down_timer
</p>
<p>Trigger AAH mechanism.
</p>
</blockquote>
<p>If ofib_current_common set is not empty, update waiting list
            and notification list as defined in <a class='info' href='#sec.calculation'>Section&nbsp;5<span> (</span><span class='info'>Computation of the ordering</span><span>)</span></a>. Note that in the case of a single
            link event, the link-state packet received when the router is in
            this state describes the state change of the other direction of
            the link, hence no changes will be made to the waiting and
            notification lists.
</p>
</blockquote>

<p>EVENT : Hold_down_timer expires.
</p>
<p>ACTION :
</p>
<p></p>
<blockquote class="text">
<p>Set state to OFIB_ONGOING.
</p>
<p>Start rank_timer with computed rank.
</p>
</blockquote>

<p>EVENT : Reception of a completion message
</p>
<p>ACTION : Remove the sender from waiting list associated with the
        event identified in the completion message.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3"></a><h3>8.3.&nbsp;
OFIB_HOLDING_UP</h3>

<p>OFIB_HOLDING_UP is the state of a router that is collecting a set
        of link up or metric decrease link-state packets to be processed
        together using controlled convergence.
</p>
<p>EVENT : Reception of a link-state packet describing an event of the
        type link down or metric increase to be processed using oFIB.
</p>
<p>ACTION :
</p>
<p></p>
<blockquote class="text">
<p>Set state to OFIB_ABANDONED.
</p>
<p>Reset Hold_down_timer.
</p>
<p>Trigger AAH mechanism.
</p>
</blockquote>

<p>EVENT : Reception of a link-state packet describing an event of the
        type link A--B up or metric decrease to be processed using oFIB.
</p>
<p>ACTION :
</p>
<p></p>
<blockquote class="text">
<p>ofib_current_common_set =
            intersection(ofib_current_common_set,{A,B}).
</p>
<p>If ofib_current_common_set is empty, then there is no longer a
            common node in the set of pending link-state changes.
</p>
<blockquote class="text">
<p>Set state to OFIB_ABANDONED.
</p>
<p>Reset Hold_down_timer.
</p>
<p>Trigger AAH mechanism.
</p>
</blockquote>
<p>If ofib_current_common set is not empty, update waiting list
            and notification list as defined in <a class='info' href='#sec.calculation'>Section&nbsp;5<span> (</span><span class='info'>Computation of the ordering</span><span>)</span></a>. Note that in the case of a single
            link event, the link-state packet received when the router is in
            this state describes the state change of the other direction of
            the link, hence no changes will be made to the waiting and
            notification lists.
</p>
</blockquote>

<p>EVENT : Reception of a completion message
</p>
<p>ACTION : Remove the sender from the waiting list associated with
        the event identified in the completion message.
</p>
<p>EVENT : Hold_down_timer expires.
</p>
<p>ACTION :
</p>
<p></p>
<blockquote class="text">
<p>Set state to OFIB_ONGOING.
</p>
<p>Start rank_timer with computed rank.
</p>
</blockquote>

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.4"></a><h3>8.4.&nbsp;
OFIB_ONGOING</h3>

<p>OFIB_ONGOING is the state of a router that is applying the ordering
        mechanism w.r.t. the set of LSP collected when in OFIB_HOLDING_DOWN or
        OFIB_HOLDING_UP state.
</p>
<p>EVENT : rank_timer expires or waiting list becomes empty.
</p>
<p>ACTION :
</p>
<p></p>
<blockquote class="text">
<p>Perform FIB updates according to the change.
</p>
<p>Send completion message to each member of the notification
            list.
</p>
<p>Set State to OFIB_STABLE.
</p>
</blockquote>

<p>EVENT : Reception of a completion message
</p>
<p>ACTION : Remove the sender from the waiting list.
</p>
<p>EVENT : Reception of a link-state packet describing a link state
        change event.
</p>
<p>ACTION :
</p>
<p></p>
<blockquote class="text">
<p>Set state to OFIB_ABANDONED.
</p>
<p>Trigger AAH.
</p>
<p>Start Hold_down_timer.
</p>
</blockquote>

<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.5"></a><h3>8.5.&nbsp;
OFIB_ABANDONED</h3>

<p>OFIB_ABANDONED is the state of a router that has fallen back to
        fast convergence due to the reception of link-state packets that
        cannot be dealt together using oFIB.
</p>
<p>EVENT : Reception of a link-state packet describing a link-state
        change event.
</p>
<p>ACTION : Trigger AAH, reset Hold_down_timer.
</p>
<p>EVENT : Hold_down_timer expires.
</p>
<p>ACTION : Set state to OFIB_STABLE
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
IANA considerations</h3>

<p>There are no IANA considerations which arise from this document. Any
      such considerations will be called out in protocol specific documents
      such as <a class='info' href='#I-D.atlas-bryant-shand-lf-timers'>[8]<span> (</span><span class='info'>K, A. and S. Bryant, &ldquo;Synchronisation of Loop Free Timer Values,&rdquo; February&nbsp;2008.</span><span>)</span></a><a class='info' href='#I-D.bonaventure-isis-ordered'>and<span> (</span><span class='info'>Bonaventure, O., &ldquo;ISIS extensions for ordered FIB updates,&rdquo; February&nbsp;2006.</span><span>)</span></a> [2]
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Security considerations</h3>

<p>This draft requires only minor modifications to existing routing
      protocols and therefore does not add significant additional security
      risks. However a full security analysis would need to be provided within
      the protocol specific specifications proposed for deployment.
</p>
<a name="sec.ack"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Acknowledgments</h3>

<p>We would like to thank Jean-Philippe Vasseur for his useful
      suggestions and comments.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="ISO10589">[1]</a></td>
<td class="author-text">International Organization for
            Standardization, &ldquo;Intermediate system to Intermediate system intra-domain
          routeing information exchange protocol for use in conjunction with
          the protocol for providing the connectionless-mode Network Service
          (ISO 8473),&rdquo; ISO/IEC&nbsp;10589:2002, Second Edition, Nov&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.bonaventure-isis-ordered">[2]</a></td>
<td class="author-text">Bonaventure, O., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-bonaventure-isis-ordered-00.txt">ISIS extensions for ordered FIB updates</a>,&rdquo; draft-bonaventure-isis-ordered-00 (work in progress), February&nbsp;2006 (<a href="http://www.ietf.org/internet-drafts/draft-bonaventure-isis-ordered-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="refs.PFOB07">[3]</a></td>
<td class="author-text">P. Francois and O. Bonaventure, &ldquo;Avoiding transient loops during IGP convergence in IP
          Networks,&rdquo; in&nbsp;IEEE/ACM Transactions on Networking, http://inl.info.ucl.ac.be/publications, December&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[4]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2328">[5]</a></td>
<td class="author-text"><a href="mailto:jmoy@casc.com">Moy, J.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2328">OSPF Version 2</a>,&rdquo; STD&nbsp;54, RFC&nbsp;2328, April&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2328.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2328.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2328.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4090">[6]</a></td>
<td class="author-text">Pan, P., Swallow, G., and A. Atlas, &ldquo;<a href="http://tools.ietf.org/html/rfc4090">Fast Reroute Extensions to RSVP-TE for LSP Tunnels</a>,&rdquo; RFC&nbsp;4090, May&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4090.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5714">[7]</a></td>
<td class="author-text">Shand, M. and S. Bryant, &ldquo;<a href="http://tools.ietf.org/html/rfc5714">IP Fast Reroute Framework</a>,&rdquo; RFC&nbsp;5714, January&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5714.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.atlas-bryant-shand-lf-timers">[8]</a></td>
<td class="author-text">K, A. and S. Bryant, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-atlas-bryant-shand-lf-timers-04.txt">Synchronisation of Loop Free Timer Values</a>,&rdquo; draft-atlas-bryant-shand-lf-timers-04 (work in progress), February&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-atlas-bryant-shand-lf-timers-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.bryant-francois-shand-ipfrr-aah">[9]</a></td>
<td class="author-text">Shand, M., Bryant, S., and P. Francois, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-bryant-francois-shand-ipfrr-aah-01.txt">Mechanisms for safely abandoning loop-free convergence (AAH)</a>,&rdquo; draft-bryant-francois-shand-ipfrr-aah-01 (work in progress), October&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-bryant-francois-shand-ipfrr-aah-01.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Pierre Francois</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Universite catholique de Louvain</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Place Ste Barbe, 2</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Louvain-la-Neuve  1348</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">BE</td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://inl.info.ucl.ac.be/">http://inl.info.ucl.ac.be/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Olivier Bonaventure</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Universite catholique de Louvain</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Place Ste Barbe, 2</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Louvain-la-Neuve  1348</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">BE</td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://inl.info.ucl.ac.be/">http://inl.info.ucl.ac.be/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mike Shand</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Green Park, 250, Longwater Avenue,</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Reading  RG2 6GB</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">UK</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mshand@cisco.com">mshand@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Stewart Bryant</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Green Park, 250, Longwater Avenue,</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Reading  RG2 6GB</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">UK</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:stbryant@cisco.com">stbryant@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Stefano Previdi</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Via Del Serafico 200</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">00142 Roma</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Italy</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:sprevidi@cisco.com">sprevidi@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Clarence Filsfils</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Brussels,   </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Belgium</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:cfilsfil@cisco.com">cfilsfil@cisco.com</a></td></tr>
</table>
</body></html>
