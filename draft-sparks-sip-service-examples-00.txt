Internet Engineering Task Force                            Robert Sparks
Internet Draft                                          Chris Cunningham
draft-sparks-sip-service-examples-00                       Alan Johnston
October 1999                                               Steve Donovan
                                                           Kevin Summers
                                                            MCI WorldCom



              SIP Telephony Service Examples With Call Flows





STATUS OF THIS MEMO

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026 [1].

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six
   months and may be updated, replaced, or obsoleted by other documents
   at any time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as work in progress.

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html





Abstract

   This is an informational draft showing one implementation of a set
   of traditional telephony services using the Session Initiation
   Protocol. Diagrams of the SIP conversations and the complete SIP
   messages are provided.









Sparks, et. al.                                                 [Page 1]

Internet Draft             Service Examples               October 1999



Table of Contents:


1  Overview:.........................................................3

2  Call Flows - IP Desktop Services Features.........................4

 2.1 Call Hold.......................................................4
 2.2 Consultation Hold..............................................16
 2.3 Unattended Transfer............................................32
 2.4 Attended Transfer..............................................48
 2.5 Call Forwarding Unconditional..................................48
 2.6 Call Forwarding - Busy.........................................54
 2.7 Call Forwarding û No Answer....................................61
 2.8 3-way Call.....................................................67
 2.9 Single Line Extension..........................................67
 2.10 Find-Me.......................................................68
 2.11 Call Management (Incoming Call Screening).....................77
 2.12 Call Management (Outgoing Call Screening).....................80

3  Author's Addresses...............................................83

4  Acknowledgments..................................................83

5  References.......................................................84



























MCI WorldCom                                                    [Page 2]

Internet Draft             Service Examples               October 1999




1  Overview:

   This document provides call flows detailing a SIP implementation of
   the following traditional telephony services:

         Call Hold                     Consultation Hold
         Unattended Transfer           Attended Transfer
         Unconditional Call Forwarding Busy Call Forwarding
         No Answer Call Forwarding     3-way Call
         Single-Line Extension         Find-Me
         Incoming Call Screening       Outgoing Call Screening

   It is the hope of the authors that this document will be useful for
   SIP implementors, users, designers, and protocol researchers alike
   and will help further the goal of a standard SIP implementation for
   IP Telephony.  It is envisioned that as changes to the standard and
   additional RFCs are added that this document will reflect those
   changes and represent the current state of a standard SIP IP
   Telephony implementation.

   These flows assume the functionality described in "SIP Telephony
   Call Flow Examples" [2], which explores basic behavior and PSTN
   internetworking. Some of the scenarios described herein make use of
   "SIP Call Control Services" [3].

   These flows were prepared assuming a network of proxies, registrars,
   PSTN gateways, and other SIP servers that have a pre-established
   trust relationship with each other, secured through other means than
   SIP. User agents wishing to use the services in this network are
   required to authenticate themselves with an edge proxy using SIP
   Digest. All communication between these user agents and the
   remaining network elements MUST occur through the edge proxy. To
   improve the clarity of this document, this authentication step is
   not explicitly shown in all flows.

   These flows use SIP as defined by RFC2543 [4] with the following
   changes/extensions assumed throughout:

       A Contact header is included with every INVITE and 200 OK.
       A Content-Length header is present in every message, set to zero
         if there is no message body.
       The final entry in a Route header is always the Contact
         information obtained from the INVITE or 200 OK messages.

   Each call flow is presented with a textual description of the
   scenario, a message flow diagram showing the messages exchanged
   between separate network elements, and the detailed contents of each
   message shown in the diagram.

MCI WorldCom                                                    [Page 3]

Internet Draft             Service Examples               October 1999



   Legend for Message Flows:

   Dashed lines represent SIP messages. Optional messages have their
   labels surrounded with parenthesis. The direction of the message is
   indicated with < or >.

   Example:       Invite

               ------------>

   Media paths are denoted with alternating dashes and ms. Direction is
   indicated as above.

   Example:           Both way RTP established

              <-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m->


2  Call Flows - IP Desktop Services Features


2.1 Call Hold

   User A calls User B, User B places call on hold.  User B then takes
   call off hold.  User A hangs up call.

         User A           Proxy          User B
           |                |              |
           |    INVITE F1   |              |
           |--------------->|              |
           |                |              |
           | 407 Proxy Authorization F2    |
           |<---------------|              |
           |                |              |
           |     ACK F3     |              |
           |--------------->|              |
           |                |              |
           |    INVITE F4   |              |
           |--------------->|              |
           |                |   INVITE F5  |
           |(100 Trying) F6 |------------->|
           |<---------------|              |
           |                |180 Ringing F7|
           | 180 Ringing F8 |<-------------|
           |<---------------|              |
           |                |  200 OK F9   |
           |    200 OK F10  |<-------------|
           |<---------------|              |
           |                |              |

MCI WorldCom                                                    [Page 4]

Internet Draft             Service Examples               October 1999



           |     ACK F11    |              |
           |--------------->|    ACK F12   |
           |                |------------->|
           |                |              |
           |    Both way RTP Established   |
           |<-m-m-m-m-m-m-m-m-m-m-m-m-m-m->|
           |                |              |
           |                |INVITE (c=0) F13
           |INVITE (c=0) F14|<-------------|
           |<---------------|              |
           |                |              |
           |    200 OK F15  |              |
           |--------------->|   200 OK F16 |
           |                |------------->|
           |                |              |
           |                |     ACK F17  |
           |     ACK F18    |<-------------|
           |<---------------|              |
           |                |              |
           |           No RTP Sent!        |
           |                |              |
           |                |  INVITE F19  |
           |  INVITE F20    |<-------------|
           |<---------------|              |
           |                |              |
           |    200 OK F21  |              |
           |--------------->|   200 OK F22 |
           |                |------------->|
           |                |              |
           |                |     ACK F23  |
           |     ACK F24    |<-------------|
           |<---------------|              |
           |                |              |
           |    Both way RTP Established   |
           |<-m-m-m-m-m-m-m-m-m-m-m-m-m-m->|
           |                |              |
           |     BYE F25    |              |
           |--------------->|   BYE F26    |
           |                |------------->|
           |                |              |
           |                |   200 OK F27 |
           |    200 OK F28  |<-------------|
           |<---------------|              |
           |                |              |


   F1
   Invite
   A->Proxy1

MCI WorldCom                                                    [Page 5]

Internet Draft             Service Examples               October 1999




          INVITE sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F2 /* Proxy 1 challenges User A for authentication */
   407 Proxy Authorization Required
   Proxy 1 -> A

          SIP/2.0 407 Proxy Authorization Required
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Proxy-Authenticate: Digest realm="MCI WorldCom SIP",
          domain="wcom.com", nonce="ea9c8e88df84f1cec4341ae6cbe5a359",
          opaque="", stale="FALSE", algorithm="MD5"
          Content-Length: 0

   F3
   ACK
   A -> Proxy 1

          ACK sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length:0





MCI WorldCom                                                    [Page 6]

Internet Draft             Service Examples               October 1999



   F4 /* User A responds be re-sending the INVITE with authentication
   credentials in it.  */
   Invite
   A -> Proxy 1

          INVITE sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Proxy-Authorization: DIGEST username="UserA", realm="MCI
          WorldCom SIP", nonce="ea9c8e88df84f1cec4341ae6cbe5a359",
          opaque="", uri="sip:ss1.wcom.com",
          response="dfe56131d1958046689cd83306477ecc"
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F5 /* Proxy 1 accepts the credentials and forwards the INVITE User
   B.  Client for A prepares to receive data on port 49170 from the
   network. */
   Invite
   Proxy 1 -> B

          INVITE sip:UserB@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103

MCI WorldCom                                                    [Page 7]

Internet Draft             Service Examples               October 1999



          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F6
   (100 Trying)
   Proxy 1-> A

          SIP/2.0 100 Trying
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE
          Content-Length: 0


   F7
   180 Ringing
   B->Proxy 1

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE
          Content Length:0

   F8
   180 Ringing
   Proxy 1->A

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE
          Content Length: 0

   F9
   200 OK
   B->Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060

MCI WorldCom                                                    [Page 8]

Internet Draft             Service Examples               October 1999



          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F10
   200 OK
   Proxy 1-> A

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F11
   ACK
   A->Proxy 1

          ACK sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          Route: <sip:UserB@there.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159

MCI WorldCom                                                    [Page 9]

Internet Draft             Service Examples               October 1999



          Call-Id: 12345601@here.com
          CSeq: 1 ACK
          Content-Length:0

   F12
   ACK
   Proxy 1->B

          ACK sip: UserB@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345601@here.com
          CSeq: 1 ACK
          Content-Length:0



   F13 /* User B places User A on hold. */
   INVITE
   B -> Proxy 1

          INVITE sip:UserA@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          Route: <sip:UserA@here.com>
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 0.0.0.0
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F14
   INVITE
   Proxy 1 -> A

          INVITE sip:UserA@here.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060

MCI WorldCom                                                   [Page 10]

Internet Draft             Service Examples               October 1999



          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 0.0.0.0
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F15
   200 OK
   A -> Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 0.0.0.0
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F16
   200 OK
   Proxy 1 -> B

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE

MCI WorldCom                                                   [Page 11]

Internet Draft             Service Examples               October 1999



          Contact: TheBigGuy <sip:UserA@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 0.0.0.0
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F17
   ACK
   B-> Proxy 1

          ACK sip:UserA@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          Route: <sip:UserB@there.com>
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345601@here.com
          CSeq: 1 ACK
          Content-Length: 0

   F18
   ACK
   Proxy 1 -> A

          ACK sip: UserA@here.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345601@here.com
          CSeq: 1 ACK
          Content-Length: 0

          /* User B takes the call off hold */

   F19
   INVITE
   B -> Proxy 1

          INVITE sip:UserA@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          Route: <sip:UserA@here.com>
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567

MCI WorldCom                                                   [Page 12]

Internet Draft             Service Examples               October 1999



          Call-Id: 12345601@here.com
          CSeq: 2 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F20
   INVITE
   Proxy 1 -> A

          INVITE sip:UserA@here.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345601@here.com
          CSeq: 2 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F21
   200 OK
   A -> Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345601@here.com
          CSeq: 2 INVITE
          Contact: TheBigGuy <sip:UserA@there.com>

MCI WorldCom                                                   [Page 13]

Internet Draft             Service Examples               October 1999



          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s= Session SDP
          c=IN IP4 100.101.102.103
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F22
   200 OK
   Proxy 1 -> B

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345601@here.com
          CSeq: 2 INVITE
          Contact: TheBigGuy <sip:UserA@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F23
   ACK
   B -> Proxy1

          ACK sip:UserA@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          Route: <sip:UserA@here.com>
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345601@here.com
          CSeq: 2 ACK
          Content-Length: 0

   F24
   ACK
   Proxy 1 -> A

MCI WorldCom                                                   [Page 14]

Internet Draft             Service Examples               October 1999




          ACK sip: UserA@here.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345601@here.com
          CSeq: 2 ACK
          Content-Length: 0


   F25
   BYE
   A -> Proxy 1

          BYE sip: UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          Route: <sip:userB@there.com>
          From: TheBigGuy <sip:UserA@here.com>;tag=1234567
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345601@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F26
   BYE
   Proxy 1 -> B

          BYE sip: UserB@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>;tag=1234567
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345601@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F27
   200 OK
   B -> Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>;tag=1234567
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345601@here.com
          CSeq: 2 BYE
          Content-Length: 0

MCI WorldCom                                                   [Page 15]

Internet Draft             Service Examples               October 1999




   F28
   200 OK
   Proxy 1 -> A

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>;tag=1234567
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345601@here.com
          CSeq: 2 BYE
          Content-Length: 0



2.2 Consultation Hold

   User A calls user B.  User B places call on hold.  User B calls User
   C, after that call is finished User B take the call with User A off
   hold.


         User A           Proxy          User B              User C
           |                |              |                   |
           |    INVITE F1   |              |                   |
           |--------------->|   INVITE F2  |                   |
           |                |------------->|                   |
           |(100 Trying) F3 |              |                   |
           |<---------------|180 Ringing F4|                   |
           |                |<-------------|                   |
           | 180 Ringing F5 |              |                   |
           |<---------------|  200 OK F6   |                   |
           |                |<-------------|                   |
           |    200 OK F7   |              |                   |
           |<---------------|              |                   |
           |                |              |                   |
           |     ACK F8     |              |                   |
           |--------------->|     ACK F9   |                   |
           |                |------------->|                   |
           |                |              |                   |
           |     Both way RTP Established  |                   |
           |<-m-m-m-m-m-m-m-m-m-m-m-m-m-m->|                   |
           |                |              |                   |
           |                |INVITE (c=0) F10                  |
           |INVITE (c=0) F11|<-------------|                   |
           |<---------------|              |                   |
           |                |              |                   |
           |    200 OK F12  |              |                   |
           |--------------->|              |                   |

MCI WorldCom                                                   [Page 16]

Internet Draft             Service Examples               October 1999



           |                |   200 OK F13 |                   |
           |                |------------->|                   |
           |                |              |                   |
           |                |     ACK F14  |                   |
           |                |<-------------|                   |
           |    ACK F15     |              |                   |
           |<---------------|              |                   |
           |                |              |                   |
           |         No RTP Sent!          |                   |
           |                |              |                   |
           |                |   INVITE F16 |                   |
           |                |<-------------|                   |
           |                |              |    INVITE F17     |
           |                |--------------------------------->|
           |                |              |                   |
           |                |(100 Trying) F18                  |
           |                |------------->|                   |
           |                |              | 180 Ringing F19   |
           |                |<---------------------------------|
           |                |              |                   |
           |                | 180 Ringing F20                  |
           |                |------------->|                   |
           |                |              |    200 OK F21     |
           |                |<---------------------------------|
           |                |              |                   |
           |                |   200 OK F22 |                   |
           |                |------------->|                   |
           |                |              |                   |
           |                |    ACK F23   |                   |
           |                |<-------------|                   |
           |                |              |      ACK F24      |
           |                |--------------------------------->|
           |                |              |                   |
           |                |         Both way RTP Established |
           |                |              |<-m-m-m-m-m-m-m-m->|
           |                |   BYE F25    |                   |
           |                |<-------------|                   |
           |                |              |       BYE F26     |
           |                |--------------------------------->|
           |                |              |                   |
           |                |              |    200 OK F27     |
           |                |<---------------------------------|
           |                |              |                   |
           |                |   200 OK F28 |                   |
           |                |------------->|                   |
           |                |              |                   |
           |                |   INVITE F29 |                   |
           |    INVITE F30  |<-------------|                   |
           |<---------------|              |                   |

MCI WorldCom                                                   [Page 17]

Internet Draft             Service Examples               October 1999



           |                |              |                   |
           |    200 OK F31  |              |                   |
           |--------------->|   200 OK F32 |                   |
           |                |------------->|                   |
           |                |              |                   |
           |                |     ACK F33  |                   |
           |                |<-------------|                   |
           |    ACK F34     |              |                   |
           |<---------------|              |                   |
           |                |              |                   |
           |     Both way RTP Established  |                   |
           |<-m-m-m-m-m-m-m-m-m-m-m-m-m-m->|                   |
           |                |              |                   |
           |    BYE F35     |              |                   |
           |--------------->|    BYE F36   |                   |
           |                |------------->|                   |
           |                |              |                   |
           |                |   200 OK F37 |                   |
           |                |<-------------|                   |
           |  200 OK F38    |              |                   |
           |<---------------|              |                   |
           |                |              |                   |




   F1
   Invite
   A -> Proxy 1

          INVITE sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Proxy-Authorization: DIGEST username="UserA", realm="MCI
          WorldCom SIP", nonce="ea9c8e88df84f1cec4341ae6cbe5a359",
          opaque="", uri="sip:ss1.wcom.com",
          response="dfe56131d1958046689cd83306477ecc"
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=3034423619 0

MCI WorldCom                                                   [Page 18]

Internet Draft             Service Examples               October 1999



          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F2 /* Proxy 1 accepts the credentials and forwards the INVITE User
   B.  Client for A prepares to receive data on port 49170 from the
   network. */
   Invite
   Proxy 1 -> B

          INVITE sip:UserB@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F3
   (100 Trying)
   Proxy 1-> A

          SIP/2.0 100 Trying
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0


   F4
   180 Ringing
   B->Proxy 1

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060

MCI WorldCom                                                   [Page 19]

Internet Draft             Service Examples               October 1999



          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content Length:0

   F5
   180 Ringing
   Proxy 1->A

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content Length: 0

   F6
   200 OK
   B->Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F7
   200 OK
   Proxy 1-> A

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>

MCI WorldCom                                                   [Page 20]

Internet Draft             Service Examples               October 1999



          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F8
   ACK
   A->Proxy 1

          ACK sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          Route: <sip:UserB@there.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length:0

   F9
   ACK
   Proxy 1->B

          ACK sip: UserB@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length:0



   F10 /* User B places User A on hold. */
   INVITE
   B -> Proxy 1

          INVITE sip:UserA@ss1.wcom.com SIP/2.0

MCI WorldCom                                                   [Page 21]

Internet Draft             Service Examples               October 1999



          Via: SIP/2.0/UDP there.com:5060
          Route: <sip:UserA@here.com>
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 0.0.0.0
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F11
   INVITE
   Proxy 1 -> A

          INVITE sip:UserA@here.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 0.0.0.0
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F12
   200 OK
   A -> Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159

MCI WorldCom                                                   [Page 22]

Internet Draft             Service Examples               October 1999



          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 0.0.0.0
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F13
   200 OK
   Proxy 1 -> B

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 0.0.0.0
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F14
   ACK
   B-> Proxy 1

          ACK sip:UserA@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          Route: <sip:UserA@here.com>
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length: 0

MCI WorldCom                                                   [Page 23]

Internet Draft             Service Examples               October 1999




   F15
   ACK
   Proxy 1 -> A

          ACK sip: UserA@here.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length: 0

   F16
   Invite
   B -> Proxy 1

          INVITE sip:UserC@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>
          Call-Id: 9876543210@there.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844526 2890844526 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 50170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000


   F17
   Invite
   Proxy 1 -> C

          INVITE sip:UserC@anywhere.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>
          Call-Id: 9876543210@there.com
          CSeq: 1 INVITE

MCI WorldCom                                                   [Page 24]

Internet Draft             Service Examples               October 1999



          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844526 2890844526 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 50170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F18
   (100 Trying)
   Proxy 1-> B

          SIP/2.0 100 Trying
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>
          Call-Id: 9876543210@there.com
          CSeq: 1 INVITE
          Content-Length: 0


   F19
   180 Ringing
   C->Proxy 1

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@here.com
          CSeq: 1 INVITE
          Content Length:0

   F20
   180 Ringing
   Proxy 1->B

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@there.com
          CSeq: 1 INVITE
          Content Length: 0

MCI WorldCom                                                   [Page 25]

Internet Draft             Service Examples               October 1999




   F21
   200 OK
   C->Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@there.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserC@anywhere.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserC 2890844527 2890844527 IN IP4 client.anywhere.com
          s=Session SDP
          c=IN IP4 120.121.122.123
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F22
   200 OK
   Proxy 1-> B

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP there.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@there.com
          CSeq: 1 INVITE
          Contact: TheOtherGuy <sip:UserC@anywhere.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserC 2890844527 2890844527 IN IP4 client.anywhere.com
          s=Session SDP
          c=IN IP4 120.121.122.123
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000



MCI WorldCom                                                   [Page 26]

Internet Draft             Service Examples               October 1999



   F23
   ACK
   B->Proxy 1

          ACK sip:UserC@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          Route: <sip:UserC@anywhere.com>
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@there.com
          CSeq: 1 ACK
          Content-Length:0

   F24
   ACK
   Proxy 1->C

          ACK sip: UserC@anywhere.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@there.com
          CSeq: 1 ACK
          Content-Length:0


   F25
   BYE
   B -> Proxy 1

          BYE sip: UserC@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          Route: <sip:userC@anywhere.com>
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@there.com
          CSeq: 2 BYE
          Content-Length: 0

   F26
   BYE
   Proxy 1 -> C

          BYE sip: UserC@anywhere.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654

MCI WorldCom                                                   [Page 27]

Internet Draft             Service Examples               October 1999



          Call-Id: 9876543210@there.com
          CSeq: 2 BYE
          Content-Length: 0

   F27
   200 OK
   C -> Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@there.com
          CSeq: 2 BYE
          Content-Length: 0

   F28
   200 OK
   Proxy 1 -> B

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@there.com
          CSeq: 2 BYE
          Content-Length: 0

   F29 /* User B takes the call off hold */
   INVITE
   B -> Proxy 1

          INVITE sip:UserA@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          Route: <sip:UserA@here.com>
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345600@here.com
          CSeq: 2 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0

MCI WorldCom                                                   [Page 28]

Internet Draft             Service Examples               October 1999



          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F30
   INVITE
   Proxy 1 -> A

          INVITE sip:UserA@here.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345600@here.com
          CSeq: 2 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F31
   200 OK
   A -> Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345600@here.com
          CSeq: 2 INVITE
          Contact: TheBigGuy <sip:UserA@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000


MCI WorldCom                                                   [Page 29]

Internet Draft             Service Examples               October 1999



   F32
   200 OK
   Proxy 1 -> B

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345600@here.com
          CSeq: 2 INVITE
          Contact: TheBigGuy <sip:UserA@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F33
   ACK
   B -> Proxy1

          ACK sip:UserA@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345600@here.com
          CSeq: 2 ACK
          Content-Length: 0

   F34
   ACK
   Proxy 1 -> A

          ACK sip: UserA@here.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=314159
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345600@here.com
          CSeq: 2 ACK
          Content-Length: 0




MCI WorldCom                                                   [Page 30]

Internet Draft             Service Examples               October 1999



   F35
   BYE
   A -> Proxy 1

          BYE sip: UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          Route: <sip:userB@there.com>
          From: TheBigGuy <sip:UserA@here.com>;tag=1234567
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F36
   BYE
   Proxy 1 -> B

          BYE sip: UserB@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>;tag=1234567
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F37
   200 OK
   B -> Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>;tag=1234567
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0












MCI WorldCom                                                   [Page 31]

Internet Draft             Service Examples               October 1999



   F38
   200 OK
   Proxy 1 -> A

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>;tag=1234567
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0


2.3 Unattended Transfer

   User A call user B.  User A then transfers User B to user C.  User C
   then transfers User B to User D.  User B hangs up the call.




         User A           Proxy          User B     User C     User D
           |                |              |          |          |
           |    INVITE F1   |              |          |          |
           |--------------->|   INVITE F2  |          |          |
           |                |------------->|          |          |
           |(100 Trying) F3 |              |          |          |
           |<---------------|180 Ringing F4|          |          |
           |                |<-------------|          |          |
           | 180 Ringing F5 |              |          |          |
           |<---------------|  200 OK F6   |          |          |
           |                |<-------------|          |          |
           |    200 OK F7   |              |          |          |
           |<---------------|              |          |          |
           |                |              |          |          |
           |     ACK F8     |              |          |          |
           |--------------->|     ACK F9   |          |          |
           |                |------------->|          |          |
           |                |              |          |          |
           |     Both way RTP Established  |          |          |
           |<-m-m-m-m-m-m-m-m-m-m-m-m-m-m->|          |          |
           |                |              |          |          |
           | BYE (Also C) F10              |          |          |
           |--------------->| BYE (Also C) F11        |          |
           |                |------------->|          |          |
           |                |              |          |          |
           |                |   200 OK F12 |          |          |
           |    200 OK F13  |<-------------|          |          |
           |<---------------|              |          |          |

MCI WorldCom                                                   [Page 32]

Internet Draft             Service Examples               October 1999



           |                | INVITE (ReqBy A) F14    |          |
           |                |<-------------|          |          |
           |                |              |          |          |
           |                |    INVITE (ReqBy A) F15 |          |
           |                |------------------------>|          |
           |                |              |          |          |
           |                |(100 Trying) F16         |          |
           |                |------------->|          |          |
           |                |              |          |          |
           |                |         180 Ringing F17 |          |
           |                |<------------------------|          |
           |                |              |          |          |
           |                | 180 Ringing F18         |          |
           |                |------------->|          |          |
           |                |              |          |          |
           |                |               200 OK F19|          |
           |                |<------------------------|          |
           |                |              |          |          |
           |                | 200 OK F20   |          |          |
           |                |------------->|          |          |
           |                |              |          |          |
           |                |    ACK F21   |          |          |
           |                |<-------------|          |          |
           |                |              |  ACK F22 |          |
           |                |------------------------>|          |
           |                |              |          |          |
           |                |           Both way RTP Established |
           |                |              |<-m-m-m-m>|          |
           |                |              |          |          |
           |                |         BYE (Also D) F23|          |
           |                |<------------------------|          |
           |                |              |          |          |
           |                | BYE (Also D) F24        |          |
           |                |------------->|          |          |
           |                |              |          |          |
           |                | 200 OK F25   |          |          |
           |                |<-------------|          |          |
           |                |              |200 OK F26|          |
           |                |------------------------>|          |
           |                |              |          |          |
           |                | INVITE (ReqBy C) F27    |          |
           |                |<-------------|          |          |
           |                |               INVITE (ReqBy C) F28 |
           |                |----------------------------------->|
           |                |              |          |          |
           |                |(100 Trying) F29         |          |
           |                |------------->|          |          |
           |                |              |     180 Ringing F30 |
           |                |<-----------------------------------|

MCI WorldCom                                                   [Page 33]

Internet Draft             Service Examples               October 1999



           |                |              |          |          |
           |                | 180 Ringing F31         |          |
           |                |------------->|          |          |
           |                |              |          |          |
           |                |              |          |200 OK F32|
           |                |<-----------------------------------|
           |                |              |          |          |
           |                | 200 OK F33   |          |          |
           |                |------------->|          |          |
           |                |              |          |          |
           |                |    ACK F34   |          |          |
           |                |<-------------|          |          |
           |                |              |          |          |
           |                |              |          |  ACK F35 |
           |                |----------------------------------->|
           |                |              |          |          |
           |                |           Both way RTP Established |
           |                |              |<-m-m-m-m-m-m-m-m-m->|
           |                |   BYE F36    |          |          |
           |                |<-------------|          |  BYE F37 |
           |                |----------------------------------->|
           |                |              |          |          |
           |                |              |          |200 OK F38|
           |                |<-----------------------------------|
           |                |              |          |          |
           |                | 200 OK F39   |          |          |
           |                |------------->|          |          |
           |                |              |          |          |
           |                |              |          |          |


   F1
   Invite
   A -> Proxy 1

          INVITE sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Proxy-Authorization: DIGEST username="UserA", realm="MCI
          WorldCom SIP", nonce="ea9c8e88df84f1cec4341ae6cbe5a359",
          opaque="", uri="sip:ss1.wcom.com",
          response="dfe56131d1958046689cd83306477ecc"
          Content-Type: application/sdp
          Content-Length: ...


MCI WorldCom                                                   [Page 34]

Internet Draft             Service Examples               October 1999



          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F2 /* Proxy 1 accepts the credentials and forwards the INVITE User
   B.  Client for A prepares to receive data on port 49170 from the
   network. */
   Invite
   Proxy 1 -> B

          INVITE sip:UserB@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F3
   (100 Trying)
   Proxy 1-> A

          SIP/2.0 100 Trying
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0

   F4
   180 Ringing
   B->Proxy 1

MCI WorldCom                                                   [Page 35]

Internet Draft             Service Examples               October 1999




          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content Length:0

   F5
   180 Ringing
   Proxy 1->A

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content Length: 0

   F6
   200 OK
   B->Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F7
   200 OK
   Proxy 1-> A

MCI WorldCom                                                   [Page 36]

Internet Draft             Service Examples               October 1999




          SIP/2.0 200 OK
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F8
   ACK
   A->Proxy 1

          ACK sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          Route: <sip:UserB@there.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length:0

   F9
   ACK
   Proxy 1->B

          ACK sip: UserB@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length:0

   F10 /* User A transfers User B to User C */
   BYE
   A -> Proxy 1

MCI WorldCom                                                   [Page 37]

Internet Draft             Service Examples               October 1999




          BYE sip: UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          Route: <sip:userB@there.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Also: TheOtherGuy <sip:UserC@anywhere.com>
          Content-Length: 0

   F11
   BYE
   Proxy 1 -> B

          BYE sip: UserB@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Also: TheOtherGuy <sip:UserC@anywhere.com>
          Content-Length: 0

   F12
   200 OK
   B -> Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F13
   200 OK
   Proxy 1 -> A

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

MCI WorldCom                                                   [Page 38]

Internet Draft             Service Examples               October 1999




   F14
   Invite
   B -> Proxy 1

          INVITE sip:UserC@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>
          Call-Id: 9876543210@there.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Requested-By: TheBigGuy <sip:UserA@here.com>
          Content-Length: ...

          v=0
          o=UserB 2890844526 2890844526 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 50170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F15
   Invite
   Proxy 1 -> C

          INVITE sip:UserC@anywhere.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>
          Call-Id: 9876543210@there.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Requested-By: TheBigGuy<sip:UserA@here.com>
          Content-Length: ...

          v=0
          o=UserB 2890844526 2890844526 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 50170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000


MCI WorldCom                                                   [Page 39]

Internet Draft             Service Examples               October 1999



   F16
   (100 Trying)
   Proxy 1-> B

          SIP/2.0 100 Trying
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>
          Call-Id: 9876543210@there.com
          CSeq: 1 INVITE
          Content-Length: 0

   F17
   180 Ringing
   C->Proxy 1

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@here.com
          CSeq: 1 INVITE
          Content Length:0

   F18
   180 Ringing
   Proxy 1->B

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@there.com
          CSeq: 1 INVITE
          Content Length: 0

   F19
   200 OK
   C->Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@there.com
          CSeq: 1 INVITE

MCI WorldCom                                                   [Page 40]

Internet Draft             Service Examples               October 1999



          Contact: TheLittleGuy <sip:UserC@anywhere.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserC 2890844527 2890844527 IN IP4 client.anywhere.com
          s=Session SDP
          c=IN IP4 120.121.122.123
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F20
   200 OK
   Proxy 1-> B

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP there.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@there.com
          CSeq: 1 INVITE
          Contact: TheOtherGuy <sip:UserC@anywhere.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserC 2890844527 2890844527 IN IP4 client.anywhere.com
          s=Session SDP
          c=IN IP4 120.121.122.123
          t=3034423619 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F21
   ACK
   B->Proxy 1

          ACK sip:UserC@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          Route: <sip:UserC@anywhere.com>
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@there.com
          CSeq: 1 ACK
          Content-Length:0



MCI WorldCom                                                   [Page 41]

Internet Draft             Service Examples               October 1999



   F22
   ACK
   Proxy 1->C

          ACK sip: UserC@anywhere.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          Call-Id: 9876543210@there.com
          CSeq: 1 ACK
          Content-Length:0

   F23
   BYE
   B -> Proxy 1

          BYE sip: UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP anywhere.com:5060
          Route: <sip:userB@there.com>
          From: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          To: TheLittleGuy <sip:UserB@there.com>
          Also: TheNewGuy<sip:UserD@nowhere.com>
          Call-Id: 9876543210@there.com
          CSeq: 200 BYE
          Content-Length: 0

   F24
   BYE
   Proxy 1 -> C

          BYE sip: UserB@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP anywhere.com:5060
          From: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          To: TheLittleGuy <sip:UserB@there.com>;tag=1234567
          Also: TheNewGuy<sip:UserD@nowhere.com>
          Call-Id: 9876543210@there.com
          CSeq: 200 BYE
          Content-Length: 0

   F25
   200 OK
   C -> Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP anywhere.com:5060
          From: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654

MCI WorldCom                                                   [Page 42]

Internet Draft             Service Examples               October 1999



          To: TheLittleGuy <sip:UserB@there.com>;tag=1234567
          Call-Id: 9876543210@there.com
          CSeq: 200 BYE
          Content-Length: 0

   F26
   200 OK
   Proxy 1 -> B

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP anywhere.com:5060
          From: TheOtherGuy <sip:UserC@anywhere.com>;tag=456654
          To: TheLittleGuy <sip:UserB@there.com>;tag=1234567
          Call-Id: 9876543210@there.com
          CSeq: 200 BYE
          Content-Length: 0

   F27
   Invite
   B -> Proxy 1

          INVITE sip:UserD@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheNewGuy <sip:UserD@nowhere.com>
          Call-Id: 123123123@there.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Requested-By: TheOtherGuy <sip:UserC@here.com>
          Content-Length: ...

          v=0
          o=UserB 2890844526 2890844526 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 50170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F28 /* Proxy 1 accepts the credentials and forwards the INVITE to
   User D.  Client for B prepares to receive data on port 49170 from
   the network. */
   Invite
   Proxy 1 -> D

          INVITE sip:UserD@nowhere.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060

MCI WorldCom                                                   [Page 43]

Internet Draft             Service Examples               October 1999



          Record-Route: <sip:ss1.wcom.com>
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheNewGuy <sip:UserD@nowhere.com>
          Call-Id: 123123123@there.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB@there.com>
          Content-Type: application/sdp
          Requested-By: TheOtherGuy<sip:UserC@here.com>
          Content-Length: ...

          v=0
          o=UserB 2890844526 2890844526 IN IP4 client.there.com
          s=Session SDP
          c=IN IP4 110.111.112.113
          t=3034423619 0
          m=audio 50170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F29
   (100 Trying)
   Proxy 1-> B

          SIP/2.0 100 Trying
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheNewGuy <sip:UserD@nowhere.com>
          Call-Id: 123123123@there.com
          CSeq: 1 INVITE
          Content-Length: 0

   F30
   180 Ringing
   D->Proxy 1

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheNewGuy <sip:UserD@nowhere.com>;tag=789789
          Call-Id: 123123123@there.com
          CSeq: 1 INVITE
          Content Length:0

   F31
   180 Ringing
   Proxy 1->B

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP there.com:5060

MCI WorldCom                                                   [Page 44]

Internet Draft             Service Examples               October 1999



          From: TheLittleGuy <sip:UserB@there.com>
          To: TheNewGuy <sip:UserD@nowhere.com>;tag=789789
          Call-Id: 123123123@there.com
          CSeq: 1 INVITE
          Content Length: 0

   F32
   200 OK
   D->Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheNewGuy <sip:UserD@nowhere.com>;tag=789789
          Call-Id: 123123123@there.com
          CSeq: 1 INVITE
          Contact: TheNewGuy <sip:UserD@nowhere.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserD 2890844527 2890844527 IN IP4 client.nowhere.com
          s=Session SDP
          c=IN IP4 150.151.152.153
          t=3094598698 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F33
   200 OK
   Proxy 1-> B

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP there.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheNewGuy <sip:UserD@nowhere.com>;tag=789789
          Call-Id: 123123123@there.com
          CSeq: 1 INVITE
          Contact: TheNewGuy <sip:UserD@nowhere.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserD 2890844527 2890844527 IN IP4 client.nowhere.com
          s=Session SDP
          c=IN IP4 150.151.152.153

MCI WorldCom                                                   [Page 45]

Internet Draft             Service Examples               October 1999



          t=3094598698 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F34
   ACK
   B->Proxy 1

          ACK sip:UserD@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          Route: <sip:UserD@nowhere.com>
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheNewGuy <sip:UserD@nowhere.com>;tag=789789
          Call-Id: 123123123@there.com
          CSeq: 1 ACK
          Content-Length:0

   F35
   ACK
   Proxy 1->D

          ACK sip: UserD@nowhere.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheNewGuy <sip:UserD@nowhere.com>;tag=789789
          Call-Id: 123123123@there.com
          CSeq: 1 ACK
          Content-Length:0

   F36
   BYE
   B -> Proxy 1

          BYE sip: UserD@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          Route: <sip:userD@nowhere.com>
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheNewGuy <sip:UserD@nowhere.com>;tag=789789
          Call-Id: 123123123@there.com
          CSeq: 2 BYE
          Content-Length: 0

   F37
   BYE
   Proxy 1 -> D

          BYE sip: UserD@nowhere.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060

MCI WorldCom                                                   [Page 46]

Internet Draft             Service Examples               October 1999



          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheNewGuy <sip:UserD@nowhere.com>;tag=789789
          Call-Id: 123123123@there.com
          CSeq: 2 BYE
          Content-Length: 0

   F38
   200 OK
   D -> Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheNewGuy <sip:UserD@nowhere.com>;tag=789789
          Call-Id: 123123123@there.com
          CSeq: 2 BYE
          Content-Length: 0

   F39
   200 OK
   Proxy 1 -> B

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>
          To: TheNewGuy <sip:UserD@nowhere.com>;tag=789789
          Call-Id: 123123123@there.com
          CSeq: 2 BYE
          Content-Length: 0



















MCI WorldCom                                                   [Page 47]

Internet Draft             Service Examples               October 1999






2.4 Attended Transfer

   User A calls user B.  User A puts User B on hold, and Calls user C
   to announce transfer.  User A terminates call with User C.  User A
   transfers User B to User C.  The call flow for this session would be
   a combination of Consultation Hold and Unattended Transfer.


2.5 Call Forwarding Unconditional

   User B wants all calls forwarded to a Private Dialing Plan number
   777-3660. (This information is known by the proxy).  User A calls
   User B.  The Proxy server rewrites the request URI, and forwards the
   INVITE to a gateway.

         User A           Proxy          Gateway
           |                |              |
           |    INVITE F1   |              |
           |--------------->|   INVITE F2  |
           |(100 Trying) F3 |------------->|
           |<---------------|180 Ringing F4|
           | 180 Ringing F5 |<-------------|
           |<---------------|  200 OK F6   |
           |    200 OK F7   |<-------------|
           |<---------------|              |
           |     ACK F8     |              |
           |--------------->|    ACK F9    |
           |                |------------->|
           |                |              |
           |    Both way RTP Established   |
           |<-m-m-m-m-m-m-m-m-m-m-m-m-m-m->|
           |                |              |
           |     BYE F10    |              |
           |--------------->|   BYE F11    |
           |                |------------->|
           |                |              |
           |                |   200 OK F12 |
           |    200 OK F13  |<-------------|
           |<---------------|              |
           |                |              |







MCI WorldCom                                                   [Page 48]

Internet Draft             Service Examples               October 1999



   F1
   INVITE
   A->Proxy

          INVITE sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Proxy-Authorization: DIGEST username="UserA", realm="MCI
          WorldCom SIP", nonce="ea9c8e88df84f1cec4341ae6cbe5a359",
          opaque="", uri="sip:ss1.wcom.com",
          response="dfe56131d1958046689cd83306477ecc"
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F2 /* Proxy 1 accepts the credentials and forwards the INVITE the
   gateway for the extension that User B wants his calls forwarded to.
   Client for A prepares to receive data on port 49170 from the
   network. */
   INVITE
   Proxy->B2

          INVITE sip:7773660,phone-
          context=p1234@gw1.wcom.com;user=phone SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          c=IN IP4 100.101.102.103

MCI WorldCom                                                   [Page 49]

Internet Draft             Service Examples               October 1999



          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000
          s=Session SDP
          t=3034423619 0

   F3
   (100 Trying)
   Proxy->A

          SIP/2.0 100 Trying
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0

   F4
   180 Ringing
   B2->Proxy

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content Length:0

   F5
   180 Ringing
   Proxy -> A

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content Length: 0

   F6
   200 OK
   B2->Proxy

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060

MCI WorldCom                                                   [Page 50]

Internet Draft             Service Examples               October 1999



          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact:  <sip:7773660,phone-
          context=p1234@gw1.wcom.com;user=phone >
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=GATEWAY1 2890844527 2890844527 IN IP4 gatewayone.wcom.com
          t=0 0
          c=IN IP4 gatewayone.wcom.com
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F7
   200 OK
   Proxy->A

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:7773660,phone-
          context=p1234@gw1.wcom.com;user=phone >
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=GATEWAY1 2890844527 2890844527 IN IP4 gatewayone.wcom.com
          t=0 0
          c=IN IP4 gatewayone.wcom.com
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F8
   ACK
   A->Proxy

          ACK sip:7773660,phone-context=p1234@gw1.wcom.com;user=phone
          SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          Route: < sip:7773660,phone-
          context=p1234@gw1.wcom.com;user=phone >

MCI WorldCom                                                   [Page 51]

Internet Draft             Service Examples               October 1999



          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length:0

   F9
   ACK
   Proxy->B4

          ACK sip:7773660,phone-context=p1234@gw1.wcom.com;user=phone
          SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length:0

   F10
   BYE
   A -> Proxy 1

          BYE sip:7773660,phone-context=p1234@gw1.wcom.com;user=phone
          SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          Route: < sip:7773660,phone-
          context=p1234@gw1.wcom.com;user=phone >
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F11
   BYE
   Proxy 1 -> B2

          BYE sip:7773660,phone-context=p1234@gw1.wcom.com;user=phone
          SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0


MCI WorldCom                                                   [Page 52]

Internet Draft             Service Examples               October 1999



   F12
   200 OK
   B2 -> Proxy 1

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F13
   200 OK
   Proxy 1 -> A

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314159
          Call-Id: 12345600@here.com
          CSeq:  2 BYE
          Content-Length: 0


























MCI WorldCom                                                   [Page 53]

Internet Draft             Service Examples               October 1999




2.6 Call Forwarding - Busy

   User B wants calls to B1 forwarded to B2 if B1 is busy (this
   information is known to the proxy).  User A calls B1, B1 is busy,
   the proxy server places call to B2.

         User A           Proxy          User B1             User B2
           |                |              |                   |
           |    INVITE F1   |              |                   |
           |--------------->|   INVITE F2  |                   |
           |                |------------->|                   |
           |(100 Trying) F3 |              |                   |
           |<---------------|486 Busy Here F4                  |
           |                |<-------------|                   |
           |                |     ACK F5   |                   |
           |                |------------->|                   |
           |                |              |    INVITE F6      |
           |                |--------------------------------->|
           |                |              | 180 Ringing F7    |
           |                |<---------------------------------|
           | 180 Ringing F8 |              |                   |
           |<---------------|              |      200 OK F9    |
           |                |<---------------------------------|
           |    200 OK F10  |              |                   |
           |<---------------|              |                   |
           |     ACK F11    |              |                   |
           |--------------->|              |     ACK F12       |
           |                |--------------------------------->|
           |                |              |                   |
           |               Both way RTP Established            |
           |<-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m->|
           |                |              |                   |
           |    BYE F13     |              |                   |
           |--------------->|              |      BYE F14      |
           |                |--------------------------------->|
           |                |              |    200 OK F15     |
           |  200 OK F16    |<---------------------------------|
           |<---------------|              |                   |
           |                |              |                   |










MCI WorldCom                                                   [Page 54]

Internet Draft             Service Examples               October 1999




   F1
   INVITE
   A->Proxy

          INVITE sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Proxy-Authorization: DIGEST username="UserA", realm="MCI
          WorldCom SIP", nonce="ea9c8e88df84f1cec4341ae6cbe5a359",
          opaque="", uri="sip:ss1.wcom.com",
          response="dfe56131d1958046689cd83306477ecc"
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s= Session SDP
          c=IN IP4 100.101.102.103
          t=0 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F2
   INVITE
   Proxy->B1

          INVITE sip:UserB1@ there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=1
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:SS2@ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=0 0
          m=audio 49170 RTP/AVP 0

MCI WorldCom                                                   [Page 55]

Internet Draft             Service Examples               October 1999



          a=rtpmap:0 PCMU/8000

   F3
   (100 Trying)
   Proxy->A

          SIP/2.0 100 Trying
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0

   F4
   486 Busy Here
   B1->Proxy

          SIP/2.0 486 Busy Here
          Via: SIP/2.0/UDP ss1.wcom.com:5060;branch=1
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=123456
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0

   F5
   ACK
   Proxy->B1

          ACK sip: UserB1@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=1
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=123456
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length: 0

   F6
   INVITE
   Proxy->B2

          INVITE sip:UserB2@ there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060;branch=2
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>

MCI WorldCom                                                   [Page 56]

Internet Draft             Service Examples               October 1999



          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=0 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F7
   180 Ringing
   B4->Proxy

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=2
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7654321
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0

   F8
   180 Ringing
   Proxy -> A

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7654321
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0

   F9
   200 OK
   B2->Proxy

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=2
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7654321

MCI WorldCom                                                   [Page 57]

Internet Draft             Service Examples               October 1999



          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB2@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client2.there.com
          s=Session SDP
          c=IN IP4 110.111.112.114
          t=0 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F10
   200 OK
   Proxy->A

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7654321
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB2@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client2.there.com
          s=Session SDP
          c=IN IP4 110.111.112.114
          t=0 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F11
   ACK
   A->Proxy

          ACK sip:UserB2@there.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          Route: <sip:UserB2.there.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7654321
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length: 0

MCI WorldCom                                                   [Page 58]

Internet Draft             Service Examples               October 1999




   F12
   ACK
   Proxy->B2

          ACK sip: UserB2@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7654321
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length: 0

   F13 /* RTP streams are established between A and B2 */
   /* User A eventually hangs up with User B2. */
   BYE
   A->Proxy

          BYE sip: UserB2@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          Route: <sip:userB2@there.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7654321
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F14
   BYE
   Proxy->B2

          BYE sip: UserB2@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7654321
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F15
   200 OK
   B2->Proxy

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>

MCI WorldCom                                                   [Page 59]

Internet Draft             Service Examples               October 1999



          To: TheLittleGuy <sip:UserB@there.com>;tag=7654321
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F16
   200 OK
   Proxy->A

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7654321
          Call-Id: 12345600@here.com
          CSeq:  2 BYE
          Content-Length: 0


































MCI WorldCom                                                   [Page 60]

Internet Draft             Service Examples               October 1999




2.7 Call Forwarding û No Answer

   User B wants calls to B1 forwarded to B2 if B1 is not answered
   (information is known to the proxy server).  User A calls B1 and no
   one answers.  The proxy server then places the call to B2.

         User A           Proxy          User B1             User B2
           |                |              |                   |
           |    INVITE F1   |              |                   |
           |--------------->|   INVITE F2  |                   |
           |(100 Trying) F3 |------------->|                   |
           |<---------------|180 Ringing F4|                   |
           | 180 Ringing F5 |<-------------|                   |
           |<---------------|              |                   |
           |                |              |                   |
           |                |Request Timeout                   |
           |                |              |                   |
           |                |   CANCEL F6  |                   |
           |                |------------->|                   |
           |                |   200 OK F7  |                   |
           |                |<-------------|                   |
           |                |              |                   |
           |                |              |    INVITE F8      |
           |                |--------------------------------->|
           |                |              | 180 Ringing F9    |
           |                |<---------------------------------|
           |                |              |      200 OK F10   |
           |                |<---------------------------------|
           |   200 OK F11   |              |                   |
           |<---------------|              |                   |
           |     ACK F12    |              |                   |
           |--------------->|              |     ACK F13       |
           |                |--------------------------------->|
           |                |              |                   |
           |               Both way RTP Established            |
           |<-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m->|
           |                |              |                   |
           |    BYE F14     |              |                   |
           |--------------->|              |      BYE F15      |
           |                |--------------------------------->|
           |                |              |    200 OK F16     |
           |  200 OK F17    |<---------------------------------|
           |<---------------|              |                   |
           |                |              |                   |





MCI WorldCom                                                   [Page 61]

Internet Draft             Service Examples               October 1999



   F1
   INVITE
   A->Proxy

          INVITE sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Proxy-Authorization: DIGEST username="UserA", realm="MCI
          WorldCom SIP", nonce="ea9c8e88df84f1cec4341ae6cbe5a359",
          opaque="", uri="sip:ss1.wcom.com",
          response="dfe56131d1958046689cd83306477ecc"
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=0 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F2
   INVITE
   Proxy->B1

          INVITE sip:UserB1@ there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=1
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=0 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

MCI WorldCom                                                   [Page 62]

Internet Draft             Service Examples               October 1999




   F3
   (100 Trying)
   Proxy->A

          SIP/2.0 100 Trying
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0

   F4
   180 Ringing
   B1->Proxy

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=1
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=3145678
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0

   F5
   180 Ringing
   Proxy->A

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=3145678
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0

   F6 /* B1 rings until a configurable timer expires in the Proxy. The
         Proxy sends Cancel and proceeds down the list of routes. */
   CANCEL
   Proxy->B1

          CANCEL sip:UserB1@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=1
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=3145678
          Call-Id: 12345600@here.com
          CSeq: 1 CANCEL

MCI WorldCom                                                   [Page 63]

Internet Draft             Service Examples               October 1999



          Content-Length: 0

   F7
   200 OK
   B1->Proxy

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=1
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=3145678
          Call-Id: 12345600@here.com
          CSeq: 1 CANCEL
          Content-Length: 0

   F8
   INVITE
   Proxy->B2

          INVITE sip:UserB4@ there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060;branch=2
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=0 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F9
   180 Ringing
   B2->Proxy

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=2
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=123456
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE

MCI WorldCom                                                   [Page 64]

Internet Draft             Service Examples               October 1999



          Content-Length: 0

   F10
   200 OK
   B2->Proxy

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=2
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=123456
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB2@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client2.there.com
          s=Session SDP
          c=IN IP4 110.111.112.114
          t=0 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F11
   200 OK
   Proxy->A

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=123456
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB2@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client2.there.com
          s=Session SDP
          c=IN IP4 110.111.112.114
          t=0 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000


MCI WorldCom                                                   [Page 65]

Internet Draft             Service Examples               October 1999



   F12
   ACK
   A->Proxy

          ACK sip:UserB2@there.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          Route: <sip:UserB2@there.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=123456
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length: 0

   F13
   ACK
   Proxy->B2

          ACK sip: UserB2@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=123456
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length: 0

   F14/* RTP streams are established between A and B2*/
      /* User A Hangs Up with User B2. */
   BYE
   A->Proxy

          BYE sip: UserB2@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          Route: <sip:userB2@there.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=123456
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F15
   BYE
   Proxy->B2

          BYE sip: UserB2@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=123456

MCI WorldCom                                                   [Page 66]

Internet Draft             Service Examples               October 1999



          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F16
   200 OK
   B2->Proxy

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=123456
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F17
   200 OK
   Proxy->A

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=123456
          Call-Id: 12345600@here.com
          CSeq:  2 BYE
          Content-Length: 0

2.8 3-way Call

   User A calls User B, User B then invites user C to a 3-way call.
   User B will mix the audio streams (act as the conference bridge).
   If user B drops out of the call then the entire call is dropped.
   This is not a fully meshed conference, and does not make use of the
   concepts in the call control draft.

   The signaling for this scenario is as follows:  User A calls User B,
   this establishes the call between A and B.  User B calls User C,
   this establishes the call between B and C.  User B will mix the
   audio streams, sending media originating at A to C, and media
   originating at C to A.  There is no SIP signalling relationship
   between User A and User C.


2.9 Single Line Extension

   Single Line Extension (Sequential, First Wins implementation), a
   call will ring several extensions in sequence.  The extension to

MCI WorldCom                                                   [Page 67]

Internet Draft             Service Examples               October 1999



   answer the call becomes the active set, no other sets may join the
   call. The signalling for this implementation of Single Line
   Extension and Find-Me is the same, the difference may be in the
   provisioning of the service.


2.10 Find-Me

   A call to a user will attempt to locate that user by calling
   locations from a list of contacts.  The  location to answer the call
   becomes the active set, no other sets may join the call.

   It is anticipated that the Find-me feature will be associated with
   individual users.  The signalling for the implementation of Single
   Line Extension and Find-Me is the same, the difference may be in the
   provisioning of the service.




         User A           Proxy           User   User   User   User
                                           B1     B2     B3     B4
           |                |              |      |      |      |
           |    INVITE F1   |              |      |      |      |
           |--------------->|   INVITE F2  |      |      |      |
           |                |------------->|      |      |      |
           |(100 Trying) F3 |              |      |      |      |
           |<---------------|180 Ringing F4|      |      |      |
           |                |<-------------|      |      |      |
           | 180 Ringing F5 |              |      |      |      |
           |<---------------|              |      |      |      |
           |                | Request Timeout     |      |      |
           |                |              |      |      |      |
           |                |              |      |      |      |
           |                |   CANCEL F6  |      |      |      |
           |                |------------->|      |      |      |
           |                |   200 OK F7  |      |      |      |
           |                |<-------------|      |      |      |
           |                |            INVITE F8|      |      |
           |                |-------------------->|      |      |
           |                | 480 Not Logged In F9|      |      |
           |                |<--------------------|      |      |
           |                |              ACK F10|      |      |
           |                |-------------------->|      |      |
           |                |              |      |      |      |
           |                |              |   INVITE F11|      |
           |                |--------------------------->|      |
           |                |           486 Busy Here F12|      |
           |                |<---------------------------|      |

MCI WorldCom                                                   [Page 68]

Internet Draft             Service Examples               October 1999



           |                |              |      ACK F13|      |
           |                |--------------------------->|      |
           |                |              |      |   INVITE F14|
           |                |---------------------------------->|
           |                |              |     180 Ringing F15|
           |                |<----------------------------------|
           |                |              |      |   200 OK F16|
           |   200 OK F17   |<----------------------------------|
           |<---------------|              |      |      |      |
           |     ACK F18    |              |      |      |      |
           |--------------->|              |      |      ACK F19|
           |                |---------------------------------->|
           |                |              |      |      |      |
           |               Both way RTP Established      |      |
           |<-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m-m>|
           |                |              |      |      |      |
           |                |              |      |      BYE F20|
           |     BYE F21    |<----------------------------------|
           |<---------------|              |      |      |      |
           |    200 OK F22  |              |      |      |      |
           |--------------->|              |      |   200 OK F23|
           |                |---------------------------------->|
           |                |              |      |      |      |


   F1
   INVITE
   A->Proxy

          INVITE sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Proxy-Authorization: DIGEST username="UserA", realm="MCI
          WorldCom SIP", nonce="ea9c8e88df84f1cec4341ae6cbe5a359",
          opaque="", uri="sip:ss1.wcom.com",
          response="dfe56131d1958046689cd83306477ecc"
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          s= Session SDP
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          c=IN IP4 100.101.102.103
          t=0 0
          m=audio 49170 RTP/AVP 0

MCI WorldCom                                                   [Page 69]

Internet Draft             Service Examples               October 1999



          a=rtpmap:0 PCMU/8000

   F2
   INVITE
   Proxy->B1

          INVITE sip:UserB1@ there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=1
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t= 0 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F3
   (100 Trying)
   Proxy->A

          SIP/2.0 100 Trying
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0

   F4
   180 Ringing
   B1->Proxy

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=1
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=123456
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE

MCI WorldCom                                                   [Page 70]

Internet Draft             Service Examples               October 1999



          Content-Length: 0
   F5
   180 Ringing
   Proxy->A

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=123456
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0

   F6 /* B1 rings for until a configurable timer in the Proxy expires.
         The Proxy then sends Cancel and proceeds down the list of
         routes. */
   CANCEL
   Proxy->B1

          CANCEL sip:UserB1@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=1
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 CANCEL
          Content-Length: 0

   F7
   200 OK
   B1->Proxy

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=1
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 CANCEL
          Content-Length: 0

   F8
   INVITE
   Proxy->B2

          INVITE sip:UserB2@ there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=2
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>

MCI WorldCom                                                   [Page 71]

Internet Draft             Service Examples               October 1999



          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s= Session SDP
          c=IN IP4 100.101.102.103
          t=0 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F9
   480 Not Logged In
   B2->Proxy

          SIP/2.0 480 Not Logged In
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=2
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314756
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0

   F10
   ACK
   Proxy->B2

          ACK sip: UserB2@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=2
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=314756
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length: 0

   F11
   INVITE
   Proxy->B3

          INVITE sip:UserB3@ there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=3
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>

MCI WorldCom                                                   [Page 72]

Internet Draft             Service Examples               October 1999



          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=0 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F12
   486 Busy Here
   B3->Proxy

          SIP/2.0 486 Busy Here
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=3
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7654321
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0

   F13
   ACK
   Proxy->B3

          ACK sip: UserB3@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7654321
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length: 0

   F14
   INVITE
   Proxy->B4

          INVITE sip:UserB4@ there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060;branch=4
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com

MCI WorldCom                                                   [Page 73]

Internet Draft             Service Examples               October 1999



          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=0 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F15
   180 Ringing
   B4->Proxy

          SIP/2.0 180 Ringing
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=4
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7137136
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Content-Length: 0

   F16
   200 OK
   B4->Proxy

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060; branch=4
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7137136
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB4@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client4.there.com
          s=Session SDP
          c=IN IP4 110.111.112.116
          t=0 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

MCI WorldCom                                                   [Page 74]

Internet Draft             Service Examples               October 1999




   F17
   200 OK
   Proxy->A

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP here.com:5060
          Record-Route: <sip:ss1.wcom.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7137136
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheLittleGuy <sip:UserB4@there.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserB 2890844527 2890844527 IN IP4 client4.there.com
          s=Session SDP
          c=IN IP4 110.111.112.116
          t=0 0
          m=audio 3456 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F18
   ACK
   A->Proxy

          ACK sip:UserB4@there.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          Route: <UserB4@there.com>
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7137136
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length: 0

   F19
   ACK
   Proxy->B4

          ACK sip: UserB4@there.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>;tag=7137136
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length: 0

MCI WorldCom                                                   [Page 75]

Internet Draft             Service Examples               October 1999




   F20 /* RTP streams are established between A and B4*/
       /* User B4 Hangs Up with User A. */
   BYE
   B4->Proxy

          BYE sip: UserA@here.com SIP/2.0
          Via: SIP/2.0/UDP there.com:5060
          Route: <sip:UserA@here.com>
          From: TheLittleGuy <sip:UserB@there.com>;tag=7137136
          To: TheBigGuy <sip:UserA@here.com>
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F21
   BYE
   Proxy->A

          BYE sip: UserA@here.com SIP/2.0
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=7137136
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F22
   200 OK
   A->Proxy

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP ss1.wcom.com:5060
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=7137136
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567
          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

   F23
   200 OK
   Proxy->B4

          SIP/2.0 200 OK
          Via: SIP/2.0/UDP there.com:5060
          From: TheLittleGuy <sip:UserB@there.com>;tag=7137136
          To: TheBigGuy <sip:UserA@here.com>;tag=1234567

MCI WorldCom                                                   [Page 76]

Internet Draft             Service Examples               October 1999



          Call-Id: 12345600@here.com
          CSeq: 2 BYE
          Content-Length: 0

2.11 Call Management (Incoming Call Screening)

   User B has an incoming call screening list, User A is included on
   the list of addresses User B will not accept calls from.  User A
   attempts to call user B.

         User A           Proxy          User B
           |                |              |
           |    INVITE F1   |              |
           |--------------->|              |
           |                |              |
           | 407 Proxy Authorization F2    |
           |<---------------|              |
           |                |              |
           |     ACK F3     |              |
           |--------------->|              |
           |                |              |
           |    INVITE F4   |              |
           |--------------->|              |
           |                |              |
           | 403 Screening Failure (Terminating) F5
           |<---------------|              |
           |                |              |
           |     ACK F3     |              |
           |--------------->|              |
           |                |              |



   F1
   Invite
   A->Proxy1

          INVITE sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com

MCI WorldCom                                                   [Page 77]

Internet Draft             Service Examples               October 1999



          c=IN IP4 100.101.102.103
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000
          s=Session SDP
          t=3034423619 0

   F2 /* Proxy 1 challenges User A for authentication */
   407 Proxy Authorization Required
   Proxy 1 -> A

          SIP/2.0 407 Proxy Authorization Required
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Proxy-Authenticate: Digest realm="MCI WorldCom SIP",
          domain="wcom.com", nonce="ea9c8e88df84f1cec4341ae6cbe5a359",
          opaque="", stale="FALSE", algorithm="MD5"
          Content-Length:0

   F3
   ACK
   A -> Proxy 1

          ACK sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length:0

   F4 /* User A responds by sending an INVITE with authentication
         credentials in it.  */
   Invite
   A -> Proxy 1

          INVITE sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Proxy-Authorization: DIGEST username="UserA", realm="MCI
          WorldCom SIP", nonce="ea9c8e88df84f1cec4341ae6cbe5a359",
          opaque="", uri="sip:ss1.wcom.com",
          response="dfe56131d1958046689cd83306477ecc"

MCI WorldCom                                                   [Page 78]

Internet Draft             Service Examples               October 1999



          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F5
   403 Screening Failure (Terminating)
   Proxy 1 -> A

          SIP/2.0 403 Screening Failure (Terminating)
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE
          Content-Length:0

   F6
   ACK
   A -> Proxy 1

          ACK sip:UserB@there.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345601@here.com
          CSeq: 1 ACK
          Content-Length:0
















MCI WorldCom                                                   [Page 79]

Internet Draft             Service Examples               October 1999




2.12 Call Management (Outgoing Call Screening)

   User A has an outgoing call screening list, User B is included on
   the list of addresses User A will not be able to place a call to.
   User A attempts to call user B.

         User A           Proxy          User B
           |                |              |
           |    INVITE F1   |              |
           |--------------->|              |
           |                |              |
           | 407 Proxy Authorization F2    |
           |<---------------|              |
           |                |              |
           |     ACK F3     |              |
           |--------------->|              |
           |                |              |
           |    INVITE F4   |              |
           |--------------->|              |
           |                |              |
           | 403 Screening Failure (Originating) F5
           |<---------------|              |
           |                |              |
           |     ACK F3     |              |
           |--------------->|              |
           |                |              |
   F1
   Invite
   A->Proxy1

          INVITE sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP
          c=IN IP4 100.101.102.103
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000


MCI WorldCom                                                   [Page 80]

Internet Draft             Service Examples               October 1999



   F2 /* Proxy 1 challenges User A for authentication */
   407 Proxy Authorization Required
   Proxy 1 -> A

          SIP/2.0 407 Proxy Authorization Required
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 INVITE
          Proxy-Authenticate: Digest realm="MCI WorldCom SIP",
          domain="wcom.com", nonce="ea9c8e88df84f1cec4341ae6cbe5a359",
          opaque="", stale="FALSE", algorithm="MD5"
          Content-Length:0

   F3
   ACK
   A -> Proxy 1

          ACK sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345600@here.com
          CSeq: 1 ACK
          Content-Length:0

   F4 /* User A responds be sending an INVITE with authentication
         credentials in it.  */
   Invite
   A -> Proxy 1

          INVITE sip:UserB@ss1.wcom.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE
          Contact: TheBigGuy <sip:UserA@here.com>
          Proxy-Authorization: DIGEST username="UserA", realm="MCI
          WorldCom SIP", nonce="ea9c8e88df84f1cec4341ae6cbe5a359",
          opaque="", uri="sip:ss1.wcom.com",
          response="dfe56131d1958046689cd83306477ecc"
          Content-Type: application/sdp
          Content-Length: ...

          v=0
          o=UserA 2890844526 2890844526 IN IP4 client.here.com
          s=Session SDP

MCI WorldCom                                                   [Page 81]

Internet Draft             Service Examples               October 1999



          c=IN IP4 100.101.102.103
          t=3034423619 0
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 PCMU/8000

   F5
   403 Screening Failure (Originating)
   Proxy 1 -> A

          SIP/2.0 403 Screening Failure (Originating)
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345601@here.com
          CSeq: 1 INVITE
          Content-Length:0

   F6
   ACK
   A -> Proxy 1

          ACK sip:UserB@there.com SIP/2.0
          Via: SIP/2.0/UDP here.com:5060
          From: TheBigGuy <sip:UserA@here.com>
          To: TheLittleGuy <sip:UserB@there.com>
          Call-Id: 12345601@here.com
          CSeq: 1 ACK
          Content-Length:0






















MCI WorldCom                                                   [Page 82]

Internet Draft             Service Examples               October 1999




3  Author's Addresses

         Robert Sparks
         MCI WorldCom
         2400 N Glenville Drive        Phone:  +1-972-729-5241
         Richardson, TX  75082         Email:  Robert.Sparks@wcom.com

         Chris Cunningham
         MCI WorldCom
         400 International Parkway    Phone:  +1-972-729-3110
         Richardson, TX  75081        Email:  Chris.Cunningham@wcom.com

         Alan Johnston
         MCI WorldCom
         100 S 4th Street             Phone:  +1-314-342-7360
         St. Louis, MO  63104         Email:  alan.johnston@wcom.com

         Steve Donovan
         MCI WorldCom
         901 International Parkway    Phone:  +1-972-729-1621
         Richardson, TX  65081        Email:  steven.r.donovan@wcom.com

         Kevin Summers
         MCI WorldCom
         2400 N Glenville Drive        Phone:  +1-972-729-7976
         Richardson, TX  75082        Email:  Kevin.Summers@wcom.com



4  Acknowledgments

   The authors wish to thank the following for their assistance and
   review of this document: Denise Caballero, Matt Cannon, David
   Devanathan, John Hearty, Denise Ingram, Steve McKinnon, Danny
   Mistry, Bich Nguyen, Scott Orton, Greg Osterhout, Joe Pizzimenti,
   Tom Redman, Henry Sinnreich, Ilya Slain, Pat Sollee, John Truetken,
   Doug Weisenberg, Dean Willis and others from MCI WorldCom, 3Com,
   Cisco, Lucent and Nortel.











MCI WorldCom                                                   [Page 83]

Internet Draft             Service Examples               October 1999




5  References

   [1] S. Bradner, "The Internet Standards Process -- Revision 3", BCP
      9, RFC2026, October 1996.

   [2] A. Johnston, et. al., "SIP Telephony Call Flow Examples",
      Internet Draft, Internet Engineering Task Force, October 1999,
      Work in Progress.

   [2] H. Schulzrinne, J. Rosenberg, "SIP Call Control Services",
      Internet Draft, Internet Engineering Task Force, June 17, 1999,
      Work in Progress.

   [3] M. Handley, H. Schulzrinne, E. Schooler, and J. Rosenberg, "SIP:
      Session Initiation Protocol", RFC 2543, March 1999.


































MCI WorldCom                                                   [Page 84]
