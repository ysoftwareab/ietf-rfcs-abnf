



BFD Working Group                                              G. Mirsky
Internet-Draft                                                 ZTE Corp.
Intended status: Standards Track                           June 22, 2020
Expires: December 24, 2020


            BFD in Demand Mode over Point-to-Point MPLS LSP
                    draft-mirsky-bfd-mpls-demand-07

Abstract

   This document describes procedures for using Bidirectional Forwarding
   Detection (BFD) in Demand mode to detect data plane failures in
   Multiprotocol Label Switching (MPLS) point-to-point Label Switched
   Paths.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on December 24, 2020.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.




Mirsky                  Expires December 24, 2020               [Page 1]

Internet-Draft      BFD Demand Mode over P2P MPLS LSP          June 2020


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Conventions used in this document . . . . . . . . . . . . . .   2
     2.1.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   2
     2.2.  Requirements Language . . . . . . . . . . . . . . . . . .   2
   3.  Use of the BFD Demand Mode  . . . . . . . . . . . . . . . . .   3
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   4
   6.  Normative References  . . . . . . . . . . . . . . . . . . . .   4
   Appendix A.  Acknowledgements . . . . . . . . . . . . . . . . . .   5
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Introduction

   [RFC5884] defined use of the Asynchronous method of Bidirectional
   Detection (BFD) [RFC5880] to monitor and detect failures in the data
   path of a Multiprotocol Label Switching (MPLS) Label Switched Path
   (LSP).  Use of the Demand mode, also specified in [RFC5880], has not
   been defined so far.  This document describes procedures for using
   the Demand mode of BFD protocol to detect data plane failures in MPLS
   point-to-point (p2p) LSPs.

2.  Conventions used in this document

2.1.  Terminology

   MPLS: Multiprotocol Label Switching

   LSP: Label Switched Path

   LER: Label switching Edge Router

   BFD: Bidirectional Forwarding Detection

   p2p: Point-to-Point

2.2.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.







Mirsky                  Expires December 24, 2020               [Page 2]

Internet-Draft      BFD Demand Mode over P2P MPLS LSP          June 2020


3.  Use of the BFD Demand Mode

   [RFC5880] defines that the Demand mode MAY be:

   o  asymmetric, i.e. used in one direction of a BFD session;

   o  switched to and from without bringing BFD session to Down state
      through using a Poll Sequence.

   For the case of BFD over MPLS LSP, ingress Label switching Edge
   Router (LER) usually acts as Active BFD peer and egress LER acts as
   Passive BFD peer.  The Active peer bootstraps the BFD session by
   using LSP ping.  Once the BFD session is in Up state the ingress LER
   that supports this specification MUST switch to the Demand mode by
   setting Demand (D) bit in its Control packet and initiating a Poll
   Sequence.  If the egress LER supports this specification it MUST
   respond with the Final (F) bit set in its BFD Control packet sent to
   the ingress LER and ceases further transmission of periodic BFD
   control packets to the ingress LER.

   In this state BFD peers MAY remain as long as the egress LER is in Up
   state.  The ingress LER MAY check liveness of the egress LER by
   setting the Poll flag.  The egress LER will respond by transmitting
   BFD control packet with the Final flag set.  If the ingress LER
   doesn't receive BFD packet with the Final flag from its peer after
   the predetermined period of time, default wait time recommended 1
   second, the ingress MAY transmit another packet with the Poll flag
   set.  If ingress doesn't receive BFD control packet with the Final
   flag set in response to three consecutive packets with Poll flag, it
   MAY declare the BFD peer non-responsive and change state of the BFD
   session to Down state.

   If the Detection timer at the egress LER expires it MUST send BFD
   Control packet to the ingress LER with the Poll (P) bit set, Status
   (Sta) field set to Down value, and the Diagnostic (Diag) field set to
   Control Detection Time Expired value.  The egress LER sends these
   Control packets to the ingress LER at the rate of one per second
   until either it receives the valid for this BFD session control
   packet with the Final (F) bit set from the ingress LER or the defect
   condition clears and the BFD session state reaches Up state at the
   egress LER.

   The ingress LER transmits BFD Control packets over the MPLS LSP with
   the Demand (D) flag set at negotiated interval per [RFC5880], the
   greater of bfd.DesiredMinTxInterval and bfd.RemoteMinRxInterval,
   until it receives the valid BFD packet from the egress LER with the
   Poll (P) bit and the Diagnostic (Diag) field value Control Detection
   Time Expired.  Reception of such BFD control packet by the ingress



Mirsky                  Expires December 24, 2020               [Page 3]

Internet-Draft      BFD Demand Mode over P2P MPLS LSP          June 2020


   LER indicates that the monitored LSP has a failure and sending BFD
   control packet with the Final flag set to acknowledge failure
   indication is likely to fail.  Instead, the ingress LER transmits the
   BFD Control packet to the egress LER over the IP network with:

   o  destination IP address MUST be set to the destination IP address
      of the LSP Ping Echo request message [RFC8029];

   o  destination UDP port set to 4784 [RFC5883];

   o  Final (F) flag in BFD control packet MUST be set;

   o  Demand (D) flag in BFD control packet MUST be cleared.

   The ingress LER changes the state of the BFD session to Down and
   changes rate of BFD Control packets transmission to one packet per
   second.  The ingress LER in Down mode changes to Asynchronous mode
   until the BFD session comes to Up state once again.  Then the ingress
   LER switches to the Demand mode.

4.  IANA Considerations

   TBD

5.  Security Considerations

   This document does not introduce new security aspects but inherits
   all security considerations from [RFC5880], [RFC5884], [RFC7726],
   [RFC8029], and [RFC6425].

6.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC5880]  Katz, D. and D. Ward, "Bidirectional Forwarding Detection
              (BFD)", RFC 5880, DOI 10.17487/RFC5880, June 2010,
              <https://www.rfc-editor.org/info/rfc5880>.

   [RFC5883]  Katz, D. and D. Ward, "Bidirectional Forwarding Detection
              (BFD) for Multihop Paths", RFC 5883, DOI 10.17487/RFC5883,
              June 2010, <https://www.rfc-editor.org/info/rfc5883>.







Mirsky                  Expires December 24, 2020               [Page 4]

Internet-Draft      BFD Demand Mode over P2P MPLS LSP          June 2020


   [RFC5884]  Aggarwal, R., Kompella, K., Nadeau, T., and G. Swallow,
              "Bidirectional Forwarding Detection (BFD) for MPLS Label
              Switched Paths (LSPs)", RFC 5884, DOI 10.17487/RFC5884,
              June 2010, <https://www.rfc-editor.org/info/rfc5884>.

   [RFC6425]  Saxena, S., Ed., Swallow, G., Ali, Z., Farrel, A.,
              Yasukawa, S., and T. Nadeau, "Detecting Data-Plane
              Failures in Point-to-Multipoint MPLS - Extensions to LSP
              Ping", RFC 6425, DOI 10.17487/RFC6425, November 2011,
              <https://www.rfc-editor.org/info/rfc6425>.

   [RFC7726]  Govindan, V., Rajaraman, K., Mirsky, G., Akiya, N., and S.
              Aldrin, "Clarifying Procedures for Establishing BFD
              Sessions for MPLS Label Switched Paths (LSPs)", RFC 7726,
              DOI 10.17487/RFC7726, January 2016,
              <https://www.rfc-editor.org/info/rfc7726>.

   [RFC8029]  Kompella, K., Swallow, G., Pignataro, C., Ed., Kumar, N.,
              Aldrin, S., and M. Chen, "Detecting Multiprotocol Label
              Switched (MPLS) Data-Plane Failures", RFC 8029,
              DOI 10.17487/RFC8029, March 2017,
              <https://www.rfc-editor.org/info/rfc8029>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

Appendix A.  Acknowledgements

   TBD

Author's Address

   Greg Mirsky
   ZTE Corp.

   Email: gregimirsky@gmail.com














Mirsky                  Expires December 24, 2020               [Page 5]
