<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Throughput Estimation for MPLS based Transport Networks</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Throughput Estimation for MPLS based Transport Networks">
<meta name="keywords" content="Request for Comments, RFC, Internet Draft, I-D">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">MPLS Working Group</td><td class="header">M. Xiao, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">L. Jin</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">B. Wu</td></tr>
<tr><td class="header">Expires: April 18, 2011</td><td class="header">J. Yang</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">ZTE Corporation</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 15, 2010</td></tr>
</table></td></tr></table>
<h1><br />Throughput Estimation for MPLS based Transport Networks<br />draft-xiao-mpls-tp-throughput-estimation-01</h1>

<h3>Abstract</h3>

<p>An important Operation, Administration and Maintenance requirement of the MPLS Transport Profile (MPLS-TP) is the ability to estimate the throughput (i.e. bandwidth) for an MPLS-TP connection which could be an MPLS-TP PW, LSP or Section. This document specifies OAM packets and protocol mechanisms to facilitate the efficient and precise measurement of throughput.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on April 18, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Conventions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Abbreviations<br />
<a href="#anchor4">2.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.1.</a>&nbsp;
Two-way Throughput Measurement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.2.</a>&nbsp;
One-way Throughput Measurement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.3.</a>&nbsp;
Unidirectional Connections<br />
<a href="#anchor8">3.</a>&nbsp;
Packet Format<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.1.</a>&nbsp;
Throughput Measurement Indication Packet Format<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.2.</a>&nbsp;
Throughput Measurement Test Packet Format<br />
<a href="#anchor11">4.</a>&nbsp;
Throughput Measurement Procedures<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">4.1.</a>&nbsp;
Transmitting a Throughput Measurement Start Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">4.2.</a>&nbsp;
Receiving a Throughput Measurement Start Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">4.3.</a>&nbsp;
Transmitting a Throughput Measurement Start Reply<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">4.4.</a>&nbsp;
Receiving a Throughput Measurement Start Reply<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">4.5.</a>&nbsp;
Sending and Receiving Test Traffic<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">4.6.</a>&nbsp;
Transmitting a Throughput Measurement Stop Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">4.7.</a>&nbsp;
Receiving a Throughput Measurement Stop Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">4.8.</a>&nbsp;
Transmitting a Throughput Measurement Stop Reply<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">4.9.</a>&nbsp;
Receiving a Throughput Measurement Stop Reply<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">4.10.</a>&nbsp;
Consequent Actions and Searching Algorithm<br />
<a href="#anchor22">5.</a>&nbsp;
Throughput Measurement Time<br />
<a href="#anchor23">6.</a>&nbsp;
Open Issue<br />
<a href="#anchor24">7.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor25">8.</a>&nbsp;
Security Considerations<br />
<a href="#anchor26">9.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">10.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">10.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>As defined in <a class='info' href='#RFC5860'>[RFC5860]<span> (</span><span class='info'>Vigoureux, M., Ward, D., and M. Betts, &ldquo;Requirements for Operations, Administration, and Maintenance (OAM) in MPLS Transport Networks,&rdquo; May&nbsp;2010.</span><span>)</span></a>, the MPLS-TP OAM toolset MUST provide a function to enable conducting diagnostic tests on a PW, LSP or Section, this function SHOULD be performed on-demand and one example of such diagnostic test consists in estimating the bandwidth of e.g., an LSP.
</p>
<p>To make this requirement clearer and provide more details, this sub-function of diagnostic tests is specified as "throughput estimation" in <a class='info' href='#I-D.ietf-mpls-tp-oam-framework'>[I&#8209;D.ietf&#8209;mpls&#8209;tp&#8209;oam&#8209;framework]<span> (</span><span class='info'>Allan, D., Busi, I., Niven-Jenkins, B., Fulignoli, A., Hernandez-Valencia, E., Levrau, L., Sestito, V., Sprecher, N., Helvoort, H., Vigoureux, M., Weingarten, Y., and R. Winter, &ldquo;Operations, Administration and Maintenance Framework for MPLS- based Transport Networks,&rdquo; October&nbsp;2010.</span><span>)</span></a>, throughput estimation is an on-demand out-of-service function, that allows verifying the bandwidth/throughput of an MPLS-TP transport path (LSP or PW) before it is put in-service. Throughput estimation is performed between MEPs and can be performed in one-way or two-way mode.
</p>
<p>This document specifies the OAM packets and procedures for both one-way and two-way throughput estimation/measurement.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Conventions</h3>

<p> The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Abbreviations</h3>

<p> CRC: Cyclic Redundancy Check
</p>
<p> G-ACh: Generic Associated Channel
</p>
<p> DUT: Device Under Test
</p>
<p> LSP: Label Switched Path
</p>
<p> MEG: Maintenance Entity Group
</p>
<p> MEP: Maintenance Entity Group End Point
</p>
<p> MPLS-TP: MPLS Transport Profile
</p>
<p> NMS: Network Management System
</p>
<p> OAM: Operations, Administration and Maintenance
</p>
<p> PHB: Per-hop Behavior
</p>
<p> PRBS: Pseudo-Random Bit Sequence
</p>
<p> PW: PseudoWire
</p>
<p> TLV: Type Length Value
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Overview</h3>

<p>In <a class='info' href='#RFC1242'>[RFC1242]<span> (</span><span class='info'>Bradner, S., &ldquo;Benchmarking terminology for network interconnection devices,&rdquo; July&nbsp;1991.</span><span>)</span></a>, the throughput is specified as a performance metric for network interconnection device, and it's defined by "the maximum rate at which none of the offered frames are dropped by the device". In MPLS-TP context the concept of throughput is not just for a particular device, but extended to apply to an MPLS-TP connection which could be a PW, LSP or Section.
</p>
<p>In <a class='info' href='#RFC2544'>[RFC2544]<span> (</span><span class='info'>Bradner, S. and J. McQuaid, &ldquo;Benchmarking Methodology for Network Interconnect Devices,&rdquo; March&nbsp;1999.</span><span>)</span></a>, corresponding to <a class='info' href='#RFC1242'>[RFC1242]<span> (</span><span class='info'>Bradner, S., &ldquo;Benchmarking terminology for network interconnection devices,&rdquo; July&nbsp;1991.</span><span>)</span></a>, the throughput measurement procedures are specified as "send a specific number of frames at a specific rate through the DUT and then count the frames that are transmitted by the DUT. If the count of offered frames is equal to the count of received frames, the fewer frames are received than were transmitted, the rate of the offered stream is reduced and the test is rerun. The throughput is the fastest rate at which the count of test frames transmitted by the DUT is equal to the number of test frames sent to it by the test equipment". But in current practical throughput measurement scenario, usually the throughput is measured by test equipment using the more efficient and precise binary search algorithm.
</p>
<p>It should also be noted that for different test packet size, or test packet pattern, or test packet PHB, or expected measurement resolution, or even sending duration of test traffic, different result of throughput measurement may be obtained, so all these parameters need to be configurable for throughput measurement.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Two-way Throughput Measurement</h3>

<p> For a bidirectional MPLS-TP connection, two-way throughput measurement needs to be supported. Two-way throughput should include both the throughput for the forward direction of the connection and the throughput for the reverse direction of the connection. In order to simplify the implementation and facilitate the results collection, all computational overhead and procedures control will be taken by the initiator MEP of throughput measurement, and the peer MEP will act just as a responder. Also note that both the initiator MEP and the peer MEP need to send test traffic for two-way throughput measurement.
</p>
<p> It is worth noting that there is another optional definition of two-way throughput estimation, in which only the initiator MEP needs to send test traffic and the peer MEP will loop back all received test packets. But note that in this case only the minimum of available throughput of the two directions can be achieved, so this optional definition of two-way throughput estimation is not recommended in this draft.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
One-way Throughput Measurement</h3>

<p> For a bidirectional MPLS-TP connection, one-way throughput measurement also needs to be supported. One-way throughput only indicates the throughput for the forward direction of the connection. Similar to two-way throughput measurement, the initiator MEP controls the whole process of one-way throughput measurement and the peer MEP will act just as a responder. Also note that only the initiator MEP needs to send test traffic for one-way throughput measurement.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Unidirectional Connections</h3>

<p> For a unidirectional MPLS-TP connection (such as a unidirectional LSP), only one-way throughput measurement needs to be supported. If it's a unidirectional connection with return path, the procedures of one-way throughput measurement for bidirectional connection still apply. Else if it's a unidirectional connection without return path, the procedures of one-way throughput measurement are not as automatic as that for bidirectional connection, and manual provision of test parameters is needed for every run of sending test traffic. Besides, in this case the peer MEP instead of the initiator MEP will act as calculator for the packet loss of every run.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Packet Format</h3>

<p>For throughput measurement the specific packets sent by the MEP can be divided into indication packets and test packets. The throughput measurement indication packets flow over the Generic Associated Channel Channel (G-ACh) <a class='info' href='#RFC5586'>[RFC5586]<span> (</span><span class='info'>Bocci, M., Vigoureux, M., and S. Bryant, &ldquo;MPLS Generic Associated Channel,&rdquo; June&nbsp;2009.</span><span>)</span></a> of an MPLS-TP connection and perform signaling between the initiator MEP and the peer MEP, while the throughput measurement test packets compose the test traffic which intends to emulate the real user traffic.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Throughput Measurement Indication Packet Format</h3>

<p>The format of a throughput measurement indication packet is shown below.
</p><br /><hr class="insert" />
<a name="Figure_1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |0 0 0 1|Version|   Reserved    |  0xHH (Thput Meas Indication) |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               ~
     ~            Throughput Measurement Indication Message          ~
     ~                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Throughput Measurement Indication Packet&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The Version and Reserved field are always set to 0.
</p>
<p>The Thput Meas Indication Channel Type is 0xHH (to be assigned by IANA).
</p>
<p>The format of a throughput measurement indication message is shown below.
</p><br /><hr class="insert" />
<a name="Figure_2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |Version| Flags |   Run Count   |  Control Code | Total TLV Len |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                             TLVs                              |
     ~                                                               ~
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Throughput Measurement Indication Message&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Version
</p>
<p>&nbsp;&nbsp;&nbsp;The Version Number is currently set to 0.
</p>
<p>Flags
</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>Each bit indicates a message control flag. Three flags are defined and listed from left to right as follow:
</dd>
</dl></blockquote><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     +-+-+-+-+
     |W|S|R|E|
     +-+-+-+-+

</pre></div>
<blockquote class="text"><dl>
<dt></dt>
<dd>W-flag: This Flag represents the operational mode which could be One-way mode or Two-way mode. Set to 0 for a One-way throughput measurement; Set to 1 for a Two-way throughput measurement.
</dd>
<dt></dt>
<dd>S-flag: This Flag represents the message type which could be Start type or Stop type. Set to 0 for a Start message; Set to 1 for a Stop message.
</dd>
<dt></dt>
<dd>R-flag: This Flag represents the message direction which could be Forward direction (i.e. Request) or Reverse direction (i.e. Reply). Set to 0 for a Request message; Set to 1 for a Reply message.
</dd>
<dt></dt>
<dd>E bit (the fourth bit): Reserved for future use and set to 0.
</dd>
</dl></blockquote>
<p>Run Count
</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>The Run Count is set to the number of all run times in one throughput measurement process and it starts from 1.
</dd>
</dl></blockquote>
<p>Control Code
</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>According to the value of R-flag, the Control Code is set as follow.
</dd>
<dt></dt>
<dd>For a Request:
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>0x0: Request (in-band reply requested).  Indicates that this request has been sent over a bidirectional connection and the reply is expected over the same connection.
</dd>
<dt></dt>
<dd>0x1: Request (out-of-band reply requested).  Indicates that the reply is expected over an out-of-band path.
</dd>
<dt></dt>
<dd>0x2: Request (no reply requested).  Indicates that no reply is expected.
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>For a Reply:
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>0x0: Success.  Indicates that the operation succeeded.
</dd>
<dt></dt>
<dd>0x1: Error.  Indicates that the operation failed.
</dd>
</dl></blockquote>
<p>Total TLV Length
</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>The total TLV length is the total of all included TLVs.
</dd>
</dl></blockquote>
<p>TLVs
</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>According to the values of W-flag, S-flag and R-flag, the TLVs are defined as follow.
</dd>
<dt></dt>
<dd>For Start Request/Reply message in One-way throughput measurement:
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>No TLVs are defined at this time.
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>For Start Request/Reply message in Two-way throughput measurement:
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>One TLV is defined as follow.
</dd>
</dl></blockquote><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |            Type = 0           |         Length = 10           |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                          Sending Rate                         |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |        Sending Duration       |         Packet Size           |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     | Packet Pattern| PHB | Reserved|
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div>
<blockquote class="text"><dl>
<dt></dt>
<dd>All the values in this TLV are test parameters for the peer MEP to send test traffic.
</dd>
<dt></dt>
<dd>Sending Rate
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>The Sending Rate in Mbps is set to the provisioned initial sending rate of test traffic for the first run, and set to the calculated sending rate of test traffic for the rerun.
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>Sending Duration
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>The Sending Duration in seconds is set to the provisioned sending interval of test traffic for every run.
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>Packet Size
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>The Packet Size in octets is set to the provisioned throughput measurement test packet size.
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>Packet Pattern
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>The Packet Pattern is set to the provisioned throughput measurement test packet pattern. According to <a class='info' href='#ITU-T Y.1731'>[ITU&#8209;T Y.1731]<span> (</span><span class='info'>International Telecommunications Union - Telecommunication Standardization, &ldquo;OAM functions and mechanisms for Ethernet based networks,&rdquo; February&nbsp;2008.</span><span>)</span></a>, four pattern types of throughput measurement test packets pattern types are defined as below:
</dd>
<dt></dt>
<dd>0x00: Null (all-zeros) signal without CRC-32
</dd>
<dt></dt>
<dd>0x01: Null (all-zeros) signal with CRC-32
</dd>
<dt></dt>
<dd>0x02: PRBS (2^31-1) without CRC-32
</dd>
<dt></dt>
<dd>0x03: PRBS (2^31-1) with CRC-32
</dd>
<dt></dt>
<dd>0x04~0xFF: Reserved for future standardization
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>PHB
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>The PHB is set to the provisioned throughput measurement test packet PHB.
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>Reserved
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>Reserved bits for future use and always set to 0.
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>For Stop Request/Reply message in One-way/Two-way throughput measurement:
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>One TLV is defined as follow.
</dd>
</dl></blockquote><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |            Type = 1           |         Length = 16           |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                           Tx Counter                          |
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                           Rx Counter                          |
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div>
<blockquote class="text"><dl>
<dt></dt>
<dd>Tx Counter
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>Tx Counter is set to the number of throughput measurement test packets sent by the local MEP (i.e. the MEP sending this indication message) in this run.
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>Rx Counter
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>Rx Counter is set to the number of throughput measurement test packets received by the local MEP (i.e. the MEP sending this indication message) in this run.
</dd>
</dl></blockquote>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Throughput Measurement Test Packet Format</h3>

<p>In order to simplify the implementation of MPLS-TP OAM functions, the format of a throughput measurement test packet should be aligned with the format of a data plane loopback test packet, which is specified in section 5 of <a class='info' href='#I-D.ietf-mpls-tp-li-lb'>[I&#8209;D.ietf&#8209;mpls&#8209;tp&#8209;li&#8209;lb]<span> (</span><span class='info'>Boutros, S., Sivabalan, S., Swallow, G., Bryant, S., and C. Pignataro, &ldquo;MPLS Transport Profile Lock Instruct and Loopback Functions,&rdquo; September&nbsp;2010.</span><span>)</span></a>. As indicated in section 3.1, four pattern types of throughput measurement test packets can be constructed based on Padding field and optional CRC-32 field.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Throughput Measurement Procedures</h3>

<p>As specified in <a class='info' href='#I-D.ietf-mpls-tp-oam-framework'>[I&#8209;D.ietf&#8209;mpls&#8209;tp&#8209;oam&#8209;framework]<span> (</span><span class='info'>Allan, D., Busi, I., Niven-Jenkins, B., Fulignoli, A., Hernandez-Valencia, E., Levrau, L., Sestito, V., Sprecher, N., Helvoort, H., Vigoureux, M., Weingarten, Y., and R. Winter, &ldquo;Operations, Administration and Maintenance Framework for MPLS- based Transport Networks,&rdquo; October&nbsp;2010.</span><span>)</span></a>, before throughput measurement is initiated, the diagnosed MEG should be put into a Lock status, and an MEG can be put into a Lock status either via NMS action or using the Lock Instruct OAM tool which is specified in <a class='info' href='#I-D.ietf-mpls-tp-li-lb'>[I&#8209;D.ietf&#8209;mpls&#8209;tp&#8209;li&#8209;lb]<span> (</span><span class='info'>Boutros, S., Sivabalan, S., Swallow, G., Bryant, S., and C. Pignataro, &ldquo;MPLS Transport Profile Lock Instruct and Loopback Functions,&rdquo; September&nbsp;2010.</span><span>)</span></a>. In addition, the test parameters for sending test traffic need to be provisioned at the initiator MEP before initiating a throughput measurement, and they include initial sending rate, sending duration for every run, test packet size, test packet Pattern, test packet PHB and also the expected measurement resolution. Also note that no any provision is needed at the peer MEP.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Transmitting a Throughput Measurement Start Request</h3>

<p>After initiating a throughput measurement operation, the initiator MEP will at first transmit a throughput measurement Start Request to the peer MEP. Also note that for every rerun of sending test traffic, the initiator MEP must transmit this message as beginning.
</p>
<p>For one-way throughput measurement, this message is intended to inform the peer MEP about the start of test traffic sending and trigger the peer MEP to start counting test packets. Specifically if one-way throughput measurement is performed on a unidirectional MPLS-TP connection without return path, the initiator MEP also should start sending test traffic a while (such as 1 second) after transmitting the Start Request. For two-way throughput measurement, except for the same intention as one-way throughput measurement, this message is also intended to convey necessary test parameters to the peer MEP and trigger the test traffic sending at the peer MEP, and note that for rerun only Run Count and Sending Rate in the message need to be changed while other parameters retain initial values. Furthermore, for both one-way and two-way measurement, the initiator MEP should start counting test packets as soon as it transmits this message.
</p>
<p>Specifically if the connection is unidirectional, then the Control Code in the message must not be set to 0x0 (in-band reply requested), moreover if no return path exists the Control Code in the message must be set to 0x2 (no reply requested).
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Receiving a Throughput Measurement Start Request</h3>

<p>Upon the reception of a throughput measurement Start Request, the peer MEP must inspect this message at first, if no unexpected field or value is found then the peer MEP should start counting test packets. In addition, if the received W-flag indicates that this is a two-way throughput measurement, then the peer MEP also should start sending test traffic.
</p>
<p>Specifically if the received W-flag indicates that this is a one-way throughput measurement, and the received Control Code is set to 0x2 (no reply requested) which means the connection is unidirectional without return path, then the peer MEP won't transmit Start Reply.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Transmitting a Throughput Measurement Start Reply</h3>

<p>When the Control Code in a received Start Request is set to 0x0 (in-band reply requested) or 0x1 (out-of-band reply requested), the peer MEP must transmit a throughput measurement Start Reply to the initiator MEP. The Control Code in Start Reply Message should be set to 0x0 to reflect the successful operation at the peer MEP, or on the contrary set to 0x1 to reflect the failed operation at the peer MEP. Except the R-flag and Control Code field, other fields of Start Reply Message will be copied from the received Start Request Message.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Receiving a Throughput Measurement Start Reply</h3>

<p>Upon the reception of a throughput measurement Start Reply, the initiator MEP must inspect this message at first, if no unexpected field or value is found, and the received Control Code indicates successful operation at the peer MEP, then the initiator MEP should start sending test traffic. If there is no any throughput measurement Start Reply received after a while (such as 1 second), then specific error should be returned at the initiator MEP and no test traffic will be sent from the initiator MEP.
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Sending and Receiving Test Traffic</h3>

<p>From above procedures it can be seen that for two-way throughput measurement the pair of MEPs will send test traffic asynchronously, and the peer MEP will start/stop sending test traffic some earlier than the initiator MEP, but the asynchronism has no side-effect on the measurement result because both MEPs shall start counting test packets before they receive any test traffic.
</p>
<p>Also note that when the initiator MEP sends test traffic the test parameters are all derived from the provisioned test parameters for the first run, and for rerun only the sending rate is changed and derived from the local calculation. When the peer MEP sends test traffic, the test parameters are all derived from the received Start Request Message.
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6"></a><h3>4.6.&nbsp;
Transmitting a Throughput Measurement Stop Request</h3>

<p>For every run, after the initiator MEP finished sending test traffic, it will transmit a throughput measurement Stop Request to the peer MEP. This message is intended to inform the peer MEP about the stop of test traffic sending, and also trigger the peer MEP to stop counting test packets and feed back the counters.
</p>
<p>Specifically if the connection is unidirectional, then the Control Code in the message must not be set to 0x0 (in-band reply requested), moreover if no return path exists the Control Code in the message must be set to 0x2 (no reply requested).
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7"></a><h3>4.7.&nbsp;
Receiving a Throughput Measurement Stop Request</h3>

<p>Upon the reception of a throughput measurement Stop Request, the peer MEP must inspect this message at first, if no unexpected field or value is found then the peer MEP should stop counting test packets.
</p>
<p>Specifically if the received W-flag indicates that this is a one-way throughput measurement, and the received Control Code is set to 0x2 (no reply requested) which means the connection is unidirectional without return path, then the peer MEP won't transmit Stop Reply and it will use the received Tx Counter to calculate test packet loss directly.
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.8"></a><h3>4.8.&nbsp;
Transmitting a Throughput Measurement Stop Reply</h3>

<p>When the Control Code in a received Stop Request is set to 0x0 (in-band reply requested) or 0x1 (out-of-band reply requested), the peer MEP must transmit a throughput measurement Stop Reply to the initiator MEP. The Control Code in Stop Reply Message should be set to 0x0 to reflect the successful operation at the peer MEP, or on the contrary set to 0x1 to reflect the failed operation at the peer MEP. Furthermore, the Stop Reply is transmitted also to confirm that the peer MEP has stopped sending test traffic for this run. The Tx Counter and Rx Counter are set to the test packet counting values at the peer MEP. 
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.9"></a><h3>4.9.&nbsp;
Receiving a Throughput Measurement Stop Reply</h3>

<p>Upon the reception of a throughput measurement Stop Reply, the initiator MEP must inspect this message at first, if no unexpected field or value is found, and the received Control Code indicates successful operation at the peer MEP, then the initiator MEP should stop counting test packets and start calculating the test packet loss. Suppose the Tx Counter and Rx Counter for the initiator MEP are TxP1 and RxP1, and for the peer MEP are TxP2 and RxP2.
</p>
<p>For two-way throughput measurement, the calculation formulas are as follow:
</p>
<p>Packet Loss (forward) = TxP1 - RxP2
</p>
<p>Packet Loss (reverse) = TxP2 - RxP1
</p>
<p>For one-way throughput measurement, the calculation formula is as follow:
</p>
<p>Packet Loss (one-way) = TxP1 - RxP2
</p>
<p>If there is no any throughput measurement Stop Reply received after a while (such as 1 second), then specific error should be returned at the initiator MEP and no consequent action will happen.
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.10"></a><h3>4.10.&nbsp;
Consequent Actions and Searching Algorithm</h3>

<p>Procedures for one run of test traffic sending and test packet loss calculation have been described above in details, but usually iterative reruns of the procedures are needed for a throughput measurement. Whether the rerun is needed or not is based on the calculated test packet loss and whether the expected measurement resolution is met. For one-way throughput measurement, if calculated Packet Loss (one-way) is equal to zero and the expected measurement resolution is met, then rerun is not needed (i.e. the one-way throughput measurement finished) and the current sending rate is the measured one-way throughput, otherwise the one-way throughput measurement proceeds. For two-way throughput measurement, if calculated forward Packet Loss and reverse Packet Loss are both equal to zero and the expected measurement resolution for both forward and reverse directions is met, then rerun is not needed (i.e. the two-way throughput measurement finished) and the current sending rate for forward/reverse direction is the measured forward/reverse throughput, otherwise the two-way throughput measurement proceeds, and in this case the sending rates for rerun should be calculated for forward direction and reverse direction respectively.
</p>
<p>The simple and efficient binary search algorithm is RECOMMENDED to calculate the sending rate for the next run, which is the only changed test parameter compared with this run. How the binary search works, if packet loss is found for this run, it searches downwards for a lower rate which is halfway rate between the rate of this run and the known highest rate at which no packet loss is found; if no packet loss is found but the expected measurement resolution is not met for this run, it searches upwards for a higher rate which is halfway rate between the rate of this run and the known lowest rate at which packet loss is found; the measurement searches among higher and lower rates on the analogy of this, until it finds the rate at which no test packet is lost and expected measurement resolution is met, and this rate is the measured throughput. How to judge whether the expected measurement resolution is met or not, if the rate difference between the two consecutive runs (i.e. this run and the previous run), expressed as a percentage, is smaller than or equal to the specified measurement resolution, it's known as that the expected measurement resolution is met, otherwise it's not met.
</p>
<p>For example, suppose to measure the throughput of a connection whose actual throughput is 70Mbps, the provisioned initial sending rate is 100Mbps and the specified measurement resolution is 0.1. Note that the initial sending rate should be higher than the actual throughput, otherwise the binary search is not applicable, and so it's often set to the maximum theoretical throughput of the measured connection. For the first run, packet loss is found, so for the second run, the sending rate will be calculated as (100+0)/2 = 50Mbps, no packet loss is found, then the resolution will be calculated as (100-50)/50 = 1, which is bigger than 0.1, the expected measurement resolution is not met, so for the third run, the sending rate will be calculated as (100+50)/2 = 75Mbps, packet loss is found, so for the fourth run, the sending rate will be calculated as (50+75)/2 = 62.5Mbps, no packet loss is found, then the resolution will be calculated as (75-62.5)/62.5 = 0.2, which is bigger than 0.1, the expected measurement resolution is not met, so for the fifth run, the sending rate will be calculated as (75+62.5)/2 = 68.75Mbps, no packet loss is found, then the resolution will be calculated as (68.75-62.5)/68.75 = 0.09, which is smaller than 0.1, the expected measurement resolution is met, so the measurement finished and the rate 68.75Mbps is the measured throughput.
</p>
<p>Other algorithms than the binary search algorithm could also be used to search throughput in practice, e.g. increasing or decreasing the sending rate in a fixed step from a specified initial sending rate until the test packet loss appears or disappears.
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Throughput Measurement Time</h3>

<p>The throughput measurement time is about the product of sending duration for one run and number of all run times. The sending duration for one run is provisioned before the throughput measurement starts, and the number of all run times is related to several factors, which include the provisioned initial sending rate, the applied searching algorithm and the specified expected measurement resolution. It's obvious that longer sending duration is provisioned, then longer throughput measurement time is needed, but it should be noted that longer sending duration can result in more precise measured throughput, so there should be a balance between them. Also obviously the expectations for shorter throughput measurement time and higher throughput measurement resolution are mutually exclusive, so the balance between them is needed too.
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Open Issue</h3>

<p>Wouldn't it be better to have a threshold on the acceptable frame loss rate and not require absolutely no packet loss?
</p>
<p>[Editor's note: As the authors know in practice when the throughput is measured by test devices, one threshold on the acceptable frame loss rate is configurable, but in <a class='info' href='#RFC1242'>[RFC1242]<span> (</span><span class='info'>Bradner, S., &ldquo;Benchmarking terminology for network interconnection devices,&rdquo; July&nbsp;1991.</span><span>)</span></a> and <a class='info' href='#RFC2544'>[RFC2544]<span> (</span><span class='info'>Bradner, S. and J. McQuaid, &ldquo;Benchmarking Methodology for Network Interconnect Devices,&rdquo; March&nbsp;1999.</span><span>)</span></a> the throughput is defined as that way no packet loss permitted.]
</p>
<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>To be added in a later version of this document.
</p>
<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>To be added in a later version of this document.
</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Acknowledgements</h3>

<p>The authors would like to thank Huub (Huawei), Curtis (Infinera) and Ayal (celtro) for their valuable comments on this draft.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mpls-tp-li-lb">[I-D.ietf-mpls-tp-li-lb]</a></td>
<td class="author-text">Boutros, S., Sivabalan, S., Swallow, G., Bryant, S., and C. Pignataro, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-li-lb-00.txt">MPLS Transport Profile Lock Instruct and Loopback Functions</a>,&rdquo; draft-ietf-mpls-tp-li-lb-00 (work in progress), September&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-li-lb-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5586">[RFC5586]</a></td>
<td class="author-text">Bocci, M., Vigoureux, M., and S. Bryant, &ldquo;<a href="http://tools.ietf.org/html/rfc5586">MPLS Generic Associated Channel</a>,&rdquo; RFC&nbsp;5586, June&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5586.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5860">[RFC5860]</a></td>
<td class="author-text">Vigoureux, M., Ward, D., and M. Betts, &ldquo;<a href="http://tools.ietf.org/html/rfc5860">Requirements for Operations, Administration, and Maintenance (OAM) in MPLS Transport Networks</a>,&rdquo; RFC&nbsp;5860, May&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5860.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mpls-tp-oam-framework">[I-D.ietf-mpls-tp-oam-framework]</a></td>
<td class="author-text">Allan, D., Busi, I., Niven-Jenkins, B., Fulignoli, A., Hernandez-Valencia, E., Levrau, L., Sestito, V., Sprecher, N., Helvoort, H., Vigoureux, M., Weingarten, Y., and R. Winter, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-oam-framework-09.txt">Operations, Administration and Maintenance Framework for MPLS- based Transport Networks</a>,&rdquo; draft-ietf-mpls-tp-oam-framework-09 (work in progress), October&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-oam-framework-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="ITU-T Y.1731">[ITU-T Y.1731]</a></td>
<td class="author-text">International Telecommunications Union - Telecommunication Standardization, &ldquo;OAM functions and mechanisms for Ethernet based networks,&rdquo; ITU-T&nbsp;Y.1731, February&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1242">[RFC1242]</a></td>
<td class="author-text"><a href="mailto:SOB@HARVARD.HARVARD.EDU">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1242">Benchmarking terminology for network interconnection devices</a>,&rdquo; RFC&nbsp;1242, July&nbsp;1991 (<a href="http://www.rfc-editor.org/rfc/rfc1242.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2544">[RFC2544]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a> and <a href="mailto:mcquaidj@netscout.com">J. McQuaid</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2544">Benchmarking Methodology for Network Interconnect Devices</a>,&rdquo; RFC&nbsp;2544, March&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2544.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Min Xiao (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ZTE Corporation</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:xiao.min2@zte.com.cn">xiao.min2@zte.com.cn</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">LiZhong Jin</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ZTE Corporation</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:lizhong.jin@zte.com.cn">lizhong.jin@zte.com.cn</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bo Wu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ZTE Corporation</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:wu.bo@zte.com.cn">wu.bo@zte.com.cn</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jian Yang</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ZTE Corporation</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:yang_jian@zte.com.cn">yang_jian@zte.com.cn</a></td></tr>
</table>
</body></html>
