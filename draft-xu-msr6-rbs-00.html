<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>RBS(Recursive BitString Structure) for Multicast Source Routing over IPv6</title>
<meta content="Bing Xu" name="author">
<meta content="Xuesong Geng" name="author">
<meta content="
       This document defines a new type of segment: End.RBS, and the
      corresponding packet processing procedures over the IPv6 data plane for
      the MSR6(Multicast Source Routing over IPv6) TE solutions. 
    " name="description">
<meta content="xml2rfc 3.12.3" name="generator">
<meta content="draft-xu-msr6-rbs-00" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.12.3
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.8.0
    MarkupSafe 2.0.1
    pycountry 22.1.10
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.6.0
    six 1.16.0
    WeasyPrint 52.5
-->
<link href="/tmp/draft-xu-msr6-rbs-00-ikg5b4fe.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">draft-xu-msr6-rbs-00</td>
<td class="right">March 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Xu &amp; Geng</td>
<td class="center">Expires 8 September 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-xu-msr6-rbs-00</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-03-07" class="published">7 March 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-09-08">8 September 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">B. Xu</div>
<div class="org">Huawei</div>
</div>
<div class="author">
      <div class="author-name">X. Geng</div>
<div class="org">Huawei</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">RBS(Recursive BitString Structure) for Multicast Source Routing over IPv6</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines a new type of segment: End.RBS, and the
      corresponding packet processing procedures over the IPv6 data plane for
      the MSR6(Multicast Source Routing over IPv6) TE solutions.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note" id="section-note.1">
      <h2 id="name-requirements-language-2">
<a href="#name-requirements-language-2" class="section-name selfRef">Requirements Language</a>
      </h2>
<p id="section-note.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <span><a href="#RFC2119" class="xref">RFC 2119</a> [<a href="#RFC2119" class="xref">RFC2119</a>]</span>.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo-3">
<a href="#name-status-of-this-memo-3" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 8 September 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice-3">
<a href="#name-copyright-notice-3" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents-3">
<a href="#name-table-of-contents-3" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction-3" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminologies-2" class="xref">Terminologies</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-explicit-multicast-path-wit" class="xref">Explicit Multicast Path with RBS</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-rbs-architecture" class="xref">RBS Architecture</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-recursive-encoding-in-packe" class="xref">Recursive encoding in packet</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-rbs-bift" class="xref">RBS BIFT</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-endrbs-segment-definition" class="xref">End.RBS Segment Definition</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-rbs-sub-tlv" class="xref">RBS Sub-TLV</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-illustration" class="xref">Illustration</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-iana-considerations-3" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-security-considerations-3" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-acknowledgements-3" class="xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-normative-references-3" class="xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses-3" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction-3">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction-3" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">MSR6(Multicast Source Routing over IPv6) is an IPv6 based multicast
      source routing (MSR6) solution, defined in <span>[<a href="#I-D.cheng-spring-ipv6-msr-design-consideration" class="xref">I-D.cheng-spring-ipv6-msr-design-consideration</a>]</span>, which
      leverages the benefits of source routing over IPv6 data plane to provide
      simplified multicast TE and BE service in an IPv6 network without
      unnecessary multicast tree status and complex control plane protocols.
      MSR6 needs to reuse the advantages of SRv6 and BIER to implement source
      routing.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">MSR6 has two basic modes of forwarding: one is based on Shortest Path
      First(SPF), which is called MSR6 BE mode; the other is based on traffic
      engineered, which is called MSR6 TE mode. <span>[<a href="#I-D.geng-msr6-traffic-engineering" class="xref">I-D.geng-msr6-traffic-engineering</a>]</span>, <span>[<a href="#I-D.chen-pim-srv6-p2mp-path" class="xref">I-D.chen-pim-srv6-p2mp-path</a>]</span> and <span>[<a href="#I-D.geng-msr6-rlb-segment" class="xref">I-D.geng-msr6-rlb-segment</a>]</span> have introduced structured segment
      list by defining arguments in each segment.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">This document defines IPv6 based RBS <span>[<a href="#I-D.eckert-bier-cgm2-rbs" class="xref">I-D.eckert-bier-cgm2-rbs</a>]</span> which provides an optional solution
      for MSR6 TE. A new type of segment End.RBS and the corresponding RBS
      type sub-TLV in MRH defined in <span>[<a href="#I-D.geng-msr6-traffic-engineering" class="xref">I-D.geng-msr6-traffic-engineering</a>]</span>, which could indicate
      multicast tree in the a recuisive bitstring and save the header
      overhead.<a href="#section-1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-2">
      <h2 id="name-terminologies-2">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminologies-2" class="section-name selfRef">Terminologies</a>
      </h2>
<p id="section-2-1">MSR6: Multicast Source Routing over IPv6, defined in .<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">MRH: Multicast Routing Header, a new type of Routing Header which is
      used for MSR6 <span>[<a href="#I-D.cheng-spring-ipv6-msr-design-consideration" class="xref">I-D.cheng-spring-ipv6-msr-design-consideration</a>]</span>.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">Replication Endpoint: the intermediate node of a multicast tree,
      which replicates packet and forwards the packet to the downstream nodes.
      For MSR6, the Replication Node is called Replication Endpoint which can
      be indicated by the MSR6 Segment and replicate packets according to the
      multicast source routing information encapsulation in the MSR6 header of
      the packet.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">BFR: Bit-Forwarding Router, a router support RBS.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">BIFT: Bit Index Forwarding Table, locally to BFR.<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">RU: RecursiveUnit, a Bit String is to be parsed by BFR along the
      multicast tree of the packet, defined in <span>[<a href="#I-D.eckert-bier-cgm2-rbs" class="xref">I-D.eckert-bier-cgm2-rbs</a>]</span><a href="#section-2-6" class="pilcrow">¶</a></p>
</section>
<section id="section-3">
      <h2 id="name-explicit-multicast-path-wit">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-explicit-multicast-path-wit" class="section-name selfRef">Explicit Multicast Path with RBS</a>
      </h2>
<p id="section-3-1">This section describes the encoding of explictit multicast path with
      RecursiveUnit BitString Structure (RBS) .<a href="#section-3-1" class="pilcrow">¶</a></p>
<section id="section-3.1">
        <h3 id="name-rbs-architecture">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-rbs-architecture" class="section-name selfRef">RBS Architecture</a>
        </h3>
<p id="section-3.1-1">An explicit muliticast path is encapsulated with RBS as shown in
        Figure 1.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.1-2">
<pre>   +----------+---------------------+---------+
   | TotalLen |     RecursiveUnit   | Padding |
   +----------+---------------------+---------+
              .                     .
              ...... TotalLen .......
      Figure 1: Architecture of RBS Address
</pre><a href="#section-3.1-2" class="pilcrow">¶</a>
</div>
<p id="section-3.1-3">For the reference encoding, TotalLen is an 16-bit field
        that counts the size of the RecursiveUnit in bits, permitting for up
        to 65535 Bit long RBS addresses.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1-4">The Rsv filed,which is defined in <span>[<a href="#I-D.eckert-bier-cgm2-rbs" class="xref">I-D.eckert-bier-cgm2-rbs</a>]</span> , is omitted in this scenario.<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<p id="section-3.1-5">Padding is used to align the RBS address as required by the IPv6
        encapsulation.<a href="#section-3.1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2">
        <h3 id="name-recursive-encoding-in-packe">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-recursive-encoding-in-packe" class="section-name selfRef">Recursive encoding in packet</a>
        </h3>
<p id="section-3.2-1">This section uses a hierarchical multicast tree as an example to
        describe the RecursiveUnit coding format.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.2-2">
<pre>                                +---+
                                | R |
                                +-+-+
                                  |
                  +----------+----+-----+-----------+
                  |          |          |           |
                +-v-+      +-v-+      +-v-+      +-v-+
                | A1|      | A2|      | A3|  ... | AM|
                +-+-+      +---+      +---+      +---+
                  |
  +----------+----+-----+----------+
  |          |          |          |
+-v-+      +-v-+      +-v-+      +-v-+
| B1|      | B2|      | B3|  ... | BN|
+---+      +---+      +---+      +---+
              Figure 2: Hierarchical multicast tree
</pre><a href="#section-3.2-2" class="pilcrow">¶</a>
</div>
<p id="section-3.2-3">As Shown in Figure 2, the whole explicit multicast path
        should be encapsulated (See Section 3.1) in-packet, which will be
        parsed by each Router along the delivery tree.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">The RecursiveUnit filed is structured as shown in Figure 3. To
        abbreviate the size of the figure, we use AF for AddressingFiled, and
        RU for RecursiveUnit In the following figures.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.2-5">
<pre>  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  | TotalLen| BitString | AF 1 | AF 2 | ...| AF M-1 | RU 1 | RU 2 | ...| RU M | Padding |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                                   /         \
                                                /                \
                                            /                        \
                                          +-+-+-+-+-+-+-+-+-+-+-+-+-+-+--+
                                          |BitString|AF 1...N-1|RU 1 ...N|
                                          +-+-+-+-+-+-+-+-+-+-+-+-+-+-+--+
                            Figure 3: RecursiveUnit Filed Structure</pre><a href="#section-3.2-5" class="pilcrow">¶</a>
</div>
<p id="section-3.2-6">The BitString field guides the first-hop node 'R' to
        locally duplicate packets and forwarding. The length of BitString
        matches the Maxnumber of adjacencies in node 'R' (See Section
        3.3).<a href="#section-3.2-6" class="pilcrow">¶</a></p>
<p id="section-3.2-7">The AddressingField consists M-1 fields. Each filed is an 8-bits
        filed and the value of it is the length of relative RecursiveUnit, and
        may be the offset in some scenario . The length of last RecursiveUnit
        M could be caculated by TotalLen.<a href="#section-3.2-7" class="pilcrow">¶</a></p>
<p id="section-3.2-8">And each RecursiveUnit is structured in same mechnism as shown in
        Figurse 3.<a href="#section-3.2-8" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3">
        <h3 id="name-rbs-bift">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-rbs-bift" class="section-name selfRef">RBS BIFT</a>
        </h3>
<p id="section-3.3-1">RBS BIFT as shown in Figure 4 are containing for each BP an
        adjacency.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.3-2">
<pre>   +--+---------+-------------+
   |BP|RecuFlag |    Adjacency|
   +--+---------+-------------+
   | 1|        1|adjacenct BFR|
   +--+---------+-------------+
   | 2|        0|    punt/host|
   +--+---------+-------------+
   |     .....    ...         |
   +--+---------+-------------+
   | N|      ...|         ... |
   +--+---------+-------------+

        Figure 4: RBS BIFT</pre><a href="#section-3.3-2" class="pilcrow">¶</a>
</div>
<p id="section-3.3-3">The BP of the BIFT are all local to the BFR. When a BFR
        receives a packet encapuslated with RBS, it expects that the BitString
        filed length must be matched with N, which is configured by BFR.<a href="#section-3.3-3" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-4">
      <h2 id="name-endrbs-segment-definition">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-endrbs-segment-definition" class="section-name selfRef">End.RBS Segment Definition</a>
      </h2>
<p id="section-4-1">When the packet is received by an Replication Endpoint and the DA of
      this packet is a local SID with the function of End.RBS, the packet will
      be replicated based on the RBS sub-TLV defined in section 5. The DA of
      the replicated packets is replaced by the End.RBS for the next
      Replication Endpoinds.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">The behavior of End.RBS is defined in section 5 of <span>[<a href="#I-D.eckert-bier-cgm2-rbs" class="xref">I-D.eckert-bier-cgm2-rbs</a>]</span>.<a href="#section-4-2" class="pilcrow">¶</a></p>
</section>
<section id="section-5">
      <h2 id="name-rbs-sub-tlv">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-rbs-sub-tlv" class="section-name selfRef">RBS Sub-TLV</a>
      </h2>
<p id="section-5-1">MRH defined in <span>[<a href="#I-D.geng-msr6-traffic-engineering" class="xref">I-D.geng-msr6-traffic-engineering</a>]</span> is
      as follows:<a href="#section-5-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5-2">
<pre>     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Next Header   |  Hdr Ext Len  | Routing Type  | Segments Left |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  MRH Sub-type |                   Reserved                    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    //                                                             //
    //         Optional Type Length Value objects (variable)       //
    //                                                             //
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                   Figure 5.MRH of RBS Type Encapsulation
</pre><a href="#section-5-2" class="pilcrow">¶</a>
</div>
<p id="section-5-3">MRH Sub-type: 8-bit identifier of the sub-type. The sub-type of RBS
      is to be assigned by IANA.<a href="#section-5-3" class="pilcrow">¶</a></p>
<p id="section-5-4">Segments Left: MUST be set to 0 when the MRH sub-type is RBS
      sub-type.<a href="#section-5-4" class="pilcrow">¶</a></p>
<p id="section-5-5">Type Length Value objects: Must habe RBS sub-TLV when the MRH
      sub-type is RBS sub-type.<a href="#section-5-5" class="pilcrow">¶</a></p>
<p id="section-5-6"></p>
<p id="section-5-7">A "RBS" type sub-TLV is defined for RBS in the feild of Optional Type
      Length Value Objects. The format is shown as below<a href="#section-5-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5-8">
<pre>    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Type     |           Length          |      RESERVED     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                      RBS Address(variable)                   //
   |                                                              //
   |                                                              //
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                      Figure 6.RBS Sub-TLV
</pre><a href="#section-5-8" class="pilcrow">¶</a>
</div>
<p id="section-5-9">Type: 8-bit identifier of the type of sub-TLV. The type of RBS option
      is to be assigned by IANA.<a href="#section-5-9" class="pilcrow">¶</a></p>
<p id="section-5-10">Length: 16-bit unsigned integer indicates the length of the option
      Data field of this option, in octets. The value of Opt Data Len of RBS
      option depends on the encoding of multicast tree, according to the
      mechanism defined in section 3.<a href="#section-5-10" class="pilcrow">¶</a></p>
<p id="section-5-11">RBS Address: defined in <span>[<a href="#I-D.eckert-bier-cgm2-rbs" class="xref">I-D.eckert-bier-cgm2-rbs</a>]</span>.
      The packet is forwarded based on the multicast tree indicated by the RBS
      Address.<a href="#section-5-11" class="pilcrow">¶</a></p>
</section>
<section id="section-6">
      <h2 id="name-illustration">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-illustration" class="section-name selfRef">Illustration</a>
      </h2>
<p id="section-6-1">Figure 7 shows an example for RBS forwarding.<a href="#section-6-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-2">
<pre>                                      +-+
                                 /-=&gt;-|C|-=&gt; Client2
                                /     +-+
                               /
               +-+    +-+    +-+    +-+
    Client1 =&gt;-|B|-=&gt;-|R|-=&gt;-|S|-=&gt;-|D|-=&gt; Client3
               +-+    +-+    +-+    +-+
                         \
                          \     +-+
                           \-=&gt;-|E|-=&gt; Client4
                                +-+

                     Figure 7: Example Network Topology</pre><a href="#section-6-2" class="pilcrow">¶</a>
</div>
<p id="section-6-3">A packet from Client1 connected to BFR B is intended to be
      replicated to Client2,3,4.<a href="#section-6-3" class="pilcrow">¶</a></p>
<p id="section-6-4">The encapsulation of RBS at BFR-B is shown in Figure 8.<a href="#section-6-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-5">
<pre>               ........................ RecursiveUnit ...................................
               .                                                                        .
  +-----------+------------+-----------------------------------------------------------+-------+
  |TotalLen:34|BitString:01|RU1:(R:011|AF:00010010|S:011|AF:00000011|C:001|D:0001|E:001)|Padding|
  +-----------+------------+-----------------------------------------------------------+-------+
                               Figure 8: Encapsulation of RBS at BFR-B</pre><a href="#section-6-5" class="pilcrow">¶</a>
</div>
<p id="section-6-6">Since there is only one RecursiveUnit, the AddressingField is
      omitted at BFR-B.<a href="#section-6-6" class="pilcrow">¶</a></p>
<p id="section-6-7">BFR-B rewrites the RBS by replacing the RecursiveUnit with
      RecursiveUnit 1 and adjusts the TotalLen and Padding fileds.<a href="#section-6-7" class="pilcrow">¶</a></p>
<p id="section-6-8">And BFR-R receives the packet with RBS, which has been processed by
      BFR-B, shown in Figure 9.<a href="#section-6-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-9">
<pre>               .......................... RecursiveUnit ..............................
               .                                                                     .
  +-----------+-------------+------------+----------------------------------------------+-------+
  |TotalLen:32|BitString:011|AF1:00010010|RU1(S:011|AF1:00000011|C:001|D:0001)RU2(E:001)|Padding|
  +-----------+-------------+------------+----------------------------------------------+-------+
                               Figure 9: Encapsulation of RBS at BFR-R</pre><a href="#section-6-9" class="pilcrow">¶</a>
</div>
<p id="section-6-10">And BFR-R parse the Bitstring filed using BIFT shown in Figure
      10.<a href="#section-6-10" class="pilcrow">¶</a></p>
<p id="section-6-11">Because there are two recursive BP set in the BitString for R, one
      AddressingFiled is required to indicate the length of RecursiveUnit
      1.<a href="#section-6-11" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-12">
<pre>   +--+---------+---------+
   |BP|RecuFlag |Adjacency|
   +--+---------+---------+
   | 1|        1|       B |
   +--+---------+---------+
   | 2|        1|       S |
   +--+---------+---------+
   | 3|        1|       E |
   +--+---------+---------+
 Figure 10: RBS BIFT on BFR-R
</pre><a href="#section-6-12" class="pilcrow">¶</a>
</div>
<p id="section-6-13">BFR-R accordingly creates one copy for BFR-S using
      RecursiveUnit 1, and only copy for BFR-E using RecursiveUnit 2, updating
      Padding accordingly for each copy.<a href="#section-6-13" class="pilcrow">¶</a></p>
<p id="section-6-14">BFR-S receives from BFR-R the packet as shown in Figure 11.<a href="#section-6-14" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-15">
<pre>              ............. RecursiveUnit ......................
              .                                                .
  +-----------+-------------+------------+---------------------+-------+
  |TotalLen:18|BitString:011|AF1:00000011|RU1(C:001)RU2(D:0001)|Padding|
  +-----------+-------------+------------+---------------------+-------+
            Figure 11: Encapsulation of RBS at BFR-S</pre><a href="#section-6-15" class="pilcrow">¶</a>
</div>
<p id="section-6-16">BFR-E receives from BFR-R the packet as shown in Figure 12.<a href="#section-6-16" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-17">
<pre>   +-----------+-------------+-------+
   |TotalLen:32|BitString:001|Padding|
   +-----------+-------------+-------+
  Figure 12: Encapsulation of RBS at BFR-E</pre><a href="#section-6-17" class="pilcrow">¶</a>
</div>
<p id="section-6-18">BFR-E would impose or rewrite a unicast encapsulation to make
      the packet become a unicast packet directed to Client 4.<a href="#section-6-18" class="pilcrow">¶</a></p>
<p id="section-6-19"></p>
<p id="section-6-20">The procedures for processing of the packet on BFR-S are very much
      the same as on BFR-R.<a href="#section-6-20" class="pilcrow">¶</a></p>
<p id="section-6-21">BFR-C receives from BFR-R the packet as shown in Figure 13. And it
      will make the packet become a unicast packet directed to Client 2.<a href="#section-6-21" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-22">
<pre>   +-----------+-------------+-------+
   |TotalLen:3 |BitString:001|Padding|
   +-----------+-------------+-------+
 Figure 13: Encapsulation of RBS at BFR-C
</pre><a href="#section-6-22" class="pilcrow">¶</a>
</div>
<p id="section-6-23">BFR-D receives from BFR-R the packet as shown in Figure 14. And it
      will make the packet become a unicast packet directed to Client 3.<a href="#section-6-23" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-24">
<pre>   +-----------+--------------+-------+
   |TotalLen:4 |BitString:0001|Padding|
   +-----------+--------------+-------+
 Figure 14: Encapsulation of RBS at BFR-D
</pre><a href="#section-6-24" class="pilcrow">¶</a>
</div>
<p id="section-6-25">The brief of RBS BitString conversion is shown in Figure 15.<a href="#section-6-25" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-26">
<pre>                                                                  +------------+
                                                                  |{S=S , D=C} |
                                                                  +------------+
                                                                  |[BitStr=001]|
                                                                  +============+
                                                                  | (C-MC Pkt) |
                                                                  +============+ +-+
                                                                /--------=&gt;------|C|----=&gt;---Client2
                     +------------+     +------------+         /+------------+   +-+ +==========+
                     |{S=B , D=R} |     |{S=R , D=S} |        / |{S=S , D=D} |       |(C-MC Pkt)|
                     +------------+     +------------+       /  +------------+       +==========+
                     |[BitStr=011]|     |[BitStr=011]|      /   |[BitStr=0001]|
  +==========+       +============+     +=============+    /    +============+
  |(C-MC Pkt)|       | (C-MC Pkt) |     | (C-MC Pkt) |    /     | (C-MC Pkt) |
  +==========+   +-+ +============+ +-+ +============+ +-+      +============+ +-+
  Client1---=&gt;---|B|-------=&gt;-------|R|-------=&gt;-------|S|---------=&gt;-=--------|D|----=&gt;----Client3
                 +-+                +-+                +-+                     +-+ +==========+
                         +------------+ \                                          |(C-MC Pkt)|
                         |{S=R , D=E}|   \     +-+                                 +==========+
                         +------------+   \-=&gt;-|E|-----=&gt;------ Client4
                         |[BitStr=001]|        +-+  +==========+
                         +============+             |(C-MC Pkt)|
                         | (C-MC Pkt) |             +==========+
                         +============+

                     Figure 15: Brief of RBS BitString coversion
</pre><a href="#section-6-26" class="pilcrow">¶</a>
</div>
<p id="section-6-27"></p>
</section>
<div id="IANA">
<section id="section-7">
      <h2 id="name-iana-considerations-3">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-iana-considerations-3" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-7-1">This document makes no request of IANA.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">Note to RFC Editor: this section may be removed on publication as an
      RFC.<a href="#section-7-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Security">
<section id="section-8">
      <h2 id="name-security-considerations-3">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-security-considerations-3" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-8-1"></p>
</section>
</div>
<div id="Acknowledgements">
<section id="section-9">
      <h2 id="name-acknowledgements-3">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-acknowledgements-3" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-9-1"></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-normative-references-3">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-normative-references-3" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="I-D.chen-pim-srv6-p2mp-path">[I-D.chen-pim-srv6-p2mp-path]</dt>
      <dd>
<span class="refAuthor">Chen, H.</span>, <span class="refAuthor">McBride, M.</span>, <span class="refAuthor">Fan, Y.</span>, <span class="refAuthor">Li, Z.</span>, <span class="refAuthor">Geng, X.</span>, <span class="refAuthor">Toy, M.</span>, <span class="refAuthor">Mishra, G. S.</span>, <span class="refAuthor">Wang, A.</span>, <span class="refAuthor">Liu, L.</span>, and <span class="refAuthor">X. Liu</span>, <span class="refTitle">"Stateless SRv6 Point-to-Multipoint Path"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-chen-pim-srv6-p2mp-path-05</span>, <time datetime="2021-11-11" class="refDate">11 November 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-chen-pim-srv6-p2mp-path-05.txt">https://www.ietf.org/archive/id/draft-chen-pim-srv6-p2mp-path-05.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.cheng-spring-ipv6-msr-design-consideration">[I-D.cheng-spring-ipv6-msr-design-consideration]</dt>
      <dd>
<span class="refAuthor">Cheng, W.</span>, <span class="refAuthor">Mishra, G.</span>, <span class="refAuthor">Li, Z.</span>, <span class="refAuthor">Wang, A.</span>, <span class="refAuthor">Qin, Z.</span>, and <span class="refAuthor">C. Fan</span>, <span class="refTitle">"Design Consideration of IPv6 Multicast Source Routing (MSR6)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-cheng-spring-ipv6-msr-design-consideration-01</span>, <time datetime="2021-10-25" class="refDate">25 October 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-cheng-spring-ipv6-msr-design-consideration-01.txt">https://www.ietf.org/archive/id/draft-cheng-spring-ipv6-msr-design-consideration-01.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.eckert-bier-cgm2-rbs">[I-D.eckert-bier-cgm2-rbs]</dt>
      <dd>
<span class="refAuthor">Eckert, T.</span> and <span class="refAuthor">B. (. Xu</span>, <span class="refTitle">"Carrier Grade Minimalist Multicast (CGM2) using Bit Index Explicit Replication (BIER) with Recursive BitString Structure (RBS) Addresses"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-eckert-bier-cgm2-rbs-01</span>, <time datetime="2022-02-09" class="refDate">9 February 2022</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-eckert-bier-cgm2-rbs-01.txt">https://www.ietf.org/archive/id/draft-eckert-bier-cgm2-rbs-01.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.geng-msr6-rlb-segment">[I-D.geng-msr6-rlb-segment]</dt>
      <dd>
<span class="refAuthor">Geng, X.</span>, <span class="refAuthor">Li, Z.</span>, and <span class="refAuthor">J. Xie</span>, <span class="refTitle">"RLB (Replication through Local Bitstring) Segment for Multicast Source Routing over IPv6"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-geng-msr6-rlb-segment-00</span>, <time datetime="2022-02-10" class="refDate">10 February 2022</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-geng-msr6-rlb-segment-00.txt">https://www.ietf.org/archive/id/draft-geng-msr6-rlb-segment-00.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.geng-msr6-traffic-engineering">[I-D.geng-msr6-traffic-engineering]</dt>
      <dd>
<span class="refAuthor">Geng, X.</span>, <span class="refAuthor">Li, Z.</span>, and <span class="refAuthor">J. Xie</span>, <span class="refTitle">"IPv6 Multicast Source Routing Traffic Engineering"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-geng-msr6-traffic-engineering-01</span>, <time datetime="2022-03-07" class="refDate">7 March 2022</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-geng-msr6-traffic-engineering-01.txt">https://www.ietf.org/archive/id/draft-geng-msr6-traffic-engineering-01.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
    <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses-3">
<a href="#name-authors-addresses-3" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Bing Xu</span></div>
<div dir="auto" class="left"><span class="org">Huawei</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:bing.xu@huawei.com" class="email">bing.xu@huawei.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Xuesong Geng</span></div>
<div dir="auto" class="left"><span class="org">Huawei</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:gengxuesong@huawei.com" class="email">gengxuesong@huawei.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
