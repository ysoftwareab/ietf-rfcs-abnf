



Internet Area                                                 C. Perkins
Internet-Draft                                                M. McBride
Intended status: Informational                                 Futurewei
Expires: August 7, 2018                                       D. Stanley
                                                                     HPE
                                                               W. Kumari
                                                                  Google
                                                              JC. Zuniga
                                                                  SIGFOX
                                                        February 3, 2018


         Multicast Considerations over IEEE 802 Wireless Media
              draft-ietf-mboned-ieee802-mcast-problems-01

Abstract

   Well-known issues with multicast have prevented the deployment of
   multicast in 802.11 [dot11], [mc-props], [mc-prob-stmt], and other
   local-area wireless environments.  IETF multicast experts have been
   meeting together to discuss these issues and provide IEEE updates.
   The mboned working group is chartered to receive regular reports on
   the current state of the deployment of multicast technology, create
   "practice and experience" documents that capture the experience of
   those who have deployed and are deploying various multicast
   technologies, and provide feedback to other relevant working groups.
   This document offers guidance on known limitations and problems with
   wireless multicast.  Also described are various multicast enhancement
   features that have been specified at IETF and IEEE 802 for wireless
   media, as well as some operational chioces that can be taken to
   improve the performace of the network.  Finally, some recommendations
   are provided about the usage and combination of these features and
   operational choices.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."



Perkins, et al.          Expires August 7, 2018                 [Page 1]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


   This Internet-Draft will expire on August 7, 2018.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   4
   3.  Identified mulitcast issues . . . . . . . . . . . . . . . . .   5
     3.1.  Issues at Layer 2 and Below . . . . . . . . . . . . . . .   5
       3.1.1.  Multicast reliability . . . . . . . . . . . . . . . .   5
       3.1.2.  Lower and Variable Data Rate  . . . . . . . . . . . .   5
       3.1.3.  High Interference . . . . . . . . . . . . . . . . . .   6
       3.1.4.  Power-save Effects on Multicast . . . . . . . . . . .   6
     3.2.  Issues at Layer 3 and Above . . . . . . . . . . . . . . .   7
       3.2.1.  IPv4 issues . . . . . . . . . . . . . . . . . . . . .   7
       3.2.2.  IPv6 issues . . . . . . . . . . . . . . . . . . . . .   7
       3.2.3.  MLD issues  . . . . . . . . . . . . . . . . . . . . .   8
       3.2.4.  Spurious Neighbor Discovery . . . . . . . . . . . . .   8
   4.  Multicast protocol optimizations  . . . . . . . . . . . . . .   9
     4.1.  Proxy ARP in 802.11-2012  . . . . . . . . . . . . . . . .   9
     4.2.  IPv6 Address Registration and Proxy Neighbor Discovery  .  10
     4.3.  Buffering to improve Power-Save . . . . . . . . . . . . .  11
     4.4.  IPv6 support in 802.11-2012 . . . . . . . . . . . . . . .  12
     4.5.  Conversion of multicast to unicast  . . . . . . . . . . .  12
     4.6.  Directed Multicast Service (DMS)  . . . . . . . . . . . .  12
     4.7.  GroupCast with Retries (GCR)  . . . . . . . . . . . . . .  13
   5.  Operational optimizations . . . . . . . . . . . . . . . . . .  14
     5.1.  Mitigating Problems from Spurious Neighbor Discovery  . .  14
   6.  Multicast Considerations for Other Wireless Media . . . . . .  16
   7.  Recommendations . . . . . . . . . . . . . . . . . . . . . . .  16
   8.  Discussion Items  . . . . . . . . . . . . . . . . . . . . . .  16
   9.  Security Considerations . . . . . . . . . . . . . . . . . . .  17
   10. IANA Considerations . . . . . . . . . . . . . . . . . . . . .  17
   11. Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  17



Perkins, et al.          Expires August 7, 2018                 [Page 2]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


   12. Informative References  . . . . . . . . . . . . . . . . . . .  17
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  19

1.  Introduction

   Performance issues have been observed when multicast packet
   transmissions of IETF protocols are used over IEEE 802 wireless
   media.  Even though enhamcements for multicast transmissions have
   been designed at both IETF and IEEE 802, incompatibilities still
   exist between specifications, implementations and configuration
   choices.

   Many IETF protocols depend on multicast/broadcast for delivery of
   control messages to multiple receivers.  Multicast is used for
   various purposes such as neighborhood discovery, network flooding,
   address resolution, as well minimizing media occupancy for the
   transmission of data that is intended for multiple receivers.  In
   addition to protocol use of broadcast/multicast for control messages,
   more applications, such as push to talk in hospitals, video in
   enterprises and lectures in Universities, are streaming over wifi.
   Many types of end devices are increasingly using wifi for their
   connectivity.

   IETF protocols typically rely on network protocol layering in order
   to reduce or eliminate any dependence of higher level protocols on
   the specific nature of the MAC layer protocols or the physical media.
   In the case of multicast transmissions, higher level protocols have
   traditionally been designed as if transmitting a packet to an IP
   address had the same cost in interference and network media access,
   regardless of whether the destination IP address is a unicast address
   or a multicast or broadcast address.  This model was reasonable for
   networks where the physical medium was wired, like Ethernet.
   Unfortunately, for many wireless media, the costs to access the
   medium can be quite different.  Multicast over wifi has often been
   plagued by such poor performance that it is disallowed.  Some
   enhancements have been designed in IETF protocols that are assumed to
   work primarily over wireless media.  However, these enhancements are
   usually implemented in limited deployments and not widespread on most
   wireless networks.

   IEEE 802 wireless protocols have been designed with certain features
   to support multicast traffic.  For instance, lower modulations are
   used to transmit multicast frames, so that these can be received by
   all stations in the cell, regardless of the distance or path
   attenuation from the base station or access point.  However, these
   lower modulation transmissions occupy the medium longer; they hamper
   efficient transmission of traffic using higher order modulations to
   nearby stations.  For these and other reasons, IEEE 802 working



Perkins, et al.          Expires August 7, 2018                 [Page 3]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


   groups such as 802.11 have designed features to improve the
   performance of multicast transmissions at Layer 2 [ietf_802-11].  In
   addition to protocol design features, certain operational and
   configuration enhancements can ameliorate the network performance
   issues created by multicast traffic.  as described in Section 5.

   In discussing these issues over email, and in a side meeting at IETF
   99, it has been generally agreed that these problems will not be
   fixed anytime soon primarily because it's expensive to do so and
   multicast is unreliable.  A big problem is that multicast is somewhat
   a second class citizen, to unicast, over wifi.  There are many
   protocols using multicast and there needs to be something provided in
   order to make them more reliable.  The problem of IPv6 neighbor
   discovery saturating the wifi link is only part of the problem.  Wifi
   traffic classes may help.  We need to determine what problem should
   be solved by the IETF and what problem should be solved by the IEEE
   (see Section 8).  A "multicast over wifi" IETF mailing list has been
   formed (mcast-wifi@ietf.org) for further discussion.  This draft will
   be updated according to the current state of discussion.

   This Internet Draft details various problems caused by multicast
   transmission over wireless networks, including high packet error
   rates, no acknowledgements, and low data rate.  It also explains some
   enhancements that have been designed at IETF and IEEE 802, as well as
   the operational choices that can be taken, to ameliorate the effects
   of multicast traffic.  Recommendations about how to use and combine
   these enhancements are also provided.

2.  Terminology

   This document uses the following definitions:

   AP
      IEEE 802.11 Access Point.

   basic rate
      The "lowest common denominator" data rate at which multicast and
      broadcast traffic is generally transmitted.

   DTIM
      Delivery Traffic Indication Map (DTIM): An information element
      that advertises whether or not any associated stations have
      buffered multicast or broadcast frames.

   MCS
      Modulation and Coding Scheme.

   STA



Perkins, et al.          Expires August 7, 2018                 [Page 4]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


      802.11 station (e.g. handheld device).

   TIM
      Traffic Indication Map (TIM): An information element that
      advertises whether or not any associated stations have buffered
      unicast frames.


3.  Identified mulitcast issues

3.1.  Issues at Layer 2 and Below

   In this section we describe some of the issues related to the use of
   multicast transmissions over IEEE 802 wireless technologies.

3.1.1.  Multicast reliability

   Multicast traffic is typically much less reliable than unicast
   traffic.  Since multicast makes point-to-multipoint communications,
   multiple acknowledgements would be needed to guarantee reception at
   all recipients.  Since typically there are no ACKs for multicast
   packets, it is not possible for the Access Point (AP) to know whether
   or not a retransmission is needed.  Even in the wired Internet, this
   characteristic often causes undesirably high error rates.  This has
   contributed to the relatively slow uptake of multicast applications
   even though the protocols have long been available.  The situation
   for wireless links is much worse, and is quite sensitive to the
   presence of background traffic.  Consequently, there can be a high
   packet error rate (PER) due to lack of retransmission, and because
   the sender never backs off.  It is not uncommon for there to be a
   packet loss rate of 5% or more, which is particularly troublesome for
   video and other environments where high data rates and high
   reliability are required.

3.1.2.  Lower and Variable Data Rate

   One big difference between multicast over wired versus multicast over
   wired is that transmission over wired links often occurs at a fixed
   rate.  Wifi, on the other hand, has a transmission rate which varies
   depending upon the clients proximity to the AP.  The throughput of
   video flows, and the capacity of the broader wifi network, will
   change and will impact the ability for QoS solutions to effectively
   reserve bandwidth and provide admission control.

   For wireless stations associated with an Access Points, the power
   necessary for good reception can vary from station to station.  For
   unicast, the goal is to minimize power requirements while maximizing
   the data rate to the destination.  For multicast, the goal is simply



Perkins, et al.          Expires August 7, 2018                 [Page 5]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


   to maximize the number of receivers that will correctly receive the
   multicast packet; generally the Access Point has to use a much lower
   data rate at a power level high enough for even the farthest station
   to receive the packet.  Consequently, the data rate of a video
   stream, for instance, would be constrained by the environmental
   considerations of the least reliable receiver associated with the
   Access Point.

   Because more robust modulation and coding schemes (MCSs) have longer
   range but also lower data rate, multicast / broadcast traffic is
   generally transmitted at the lowest common denominator rate, also
   known as the basic rate.  Depending on the specific 802.11
   technology, and the configured choice for the base data rate for
   multicast transmission from the Access Point, the amount of
   additional interference can range from a factor of ten, to a factor
   thousands for 802.11ac.

   Wired multicast also affects wireless LANs when the AP extends the
   wired segment; in that case, multicast / broadcast frames on the
   wired LAN side are copied to WLAN.  Since broadcast messages are
   transmitted at the most robust MCS, many large frames are sent at a
   slow rate over the air.

3.1.3.  High Interference

   Transmissions at a lower rate require longer occupancy of the
   wireless medium and thus take away from the airtime of other
   communications and degrade the overall capacity.  Furthermore,
   transmission at higher power, as is required to reach all multicast
   clients associated to the AP, proportionately increases the area of
   interference.

3.1.4.  Power-save Effects on Multicast

   One of the characteristics of multicast transmission is that every
   station has to be configured to wake up to receive the multicast,
   even though the received packet may ultimately be discarded.  This
   process can have a large effect on the power consumption by the
   multicast receiver station.

   Multicast can work poorly with the power-save mechanisms defined in
   IEEE 802.11e, for the following reasons.

   o  Clients may be unable to stay in sleep mode due to multicast
      control packets frequently waking them up.
   o  Both unicast and multicast traffic can be delayed by power-saving
      mechanisms.




Perkins, et al.          Expires August 7, 2018                 [Page 6]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


   o  A unicast packet is delayed until a STA wakes up and requests it.
      Unicast traffic may also be delayed to improve power save,
      efficiency and increase probability of aggregation.
   o  Multicast traffic is delayed in a wireless network if any of the
      STAs in that network are power savers.  All STAs associated to the
      AP have to be awake at a known time to receive multicast traffic.
   o  Packets can also be discarded due to buffer limitations in the AP
      and non-AP STA.

3.2.  Issues at Layer 3 and Above

   This section identifies some representative IETF protocols, and
   describes possible negative effects due to performance degradation
   when using multicast transmissions for control messages.  Common uses
   of multicast include:

   o  Control plane for IPv4 and IPv6
   o  ARP and Neighbor Discovery
   o  Service discovery
   o  Applications (video delivery, stock data etc)
   o  Other L3 protocols (non-IP)

3.2.1.  IPv4 issues

   The following list contains a few representative IPv4 protocols using
   multicast.

   o  ARP
   o  DHCP
   o  mDNS

   After initial configuration, ARP and DHCP occur much less commonly.
   But service discovery can occur at any time.  Apple's Bonjour
   protocol, for instance, provides service discovery (for printing)
   that utilizes multicast.  It's the first thing operators drop.  Even
   if multicast snooping is utilized, many devices register at once
   using Bonjour, causing serious network degradation.

3.2.2.  IPv6 issues

   IPv6 makes much more extensive use of multicast, including the
   following:

   o  DHCPv6
   o  IPv6 Neighbor Discovery Protocol (NDP) is not very tolerant of
      packet losses.  In particular, the Duplicate Address Detection
      (DAD) process fails when the owner of an address does not receive
      the multicast DAD message from another node that wishes to own



Perkins, et al.          Expires August 7, 2018                 [Page 7]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


      that same address.  This can result in an address being duplicated
      in the subnet, breaking a basic assumption of IPv6 connectivity.
   o  IPv6 NDP Neighbor Solicitation (NS) messages used in DAD and
      Address Lookup make use of Link-Scope multicast.  In contrast to
      IPv4, an IPv6 Node will typically use multiple addresses, and may
      change them often for privacy reasons.  This multiplies the impact
      of multicast messages that are associated to the mobility of a
      Node.  Router advertisement (RA) messages are also periodically
      multicasted over the Link.
   o  Neighbors may be considered lost if several consecutive packets
      fail.

   Address Resolution

   Service Discovery

   Route Discovery

   Decentralized Address Assignment

   Geographic routing

3.2.3.  MLD issues

   Multicast Listener Discovery(MLD) [RFC4541] is often used to identify
   members of a multicast group that are connected to the ports of a
   switch.  Forwarding multicast frames into a WiFi-enabled area can use
   such switch support for hardware forwarding state information.
   However, since IPv6 makes heavy use of multicast, each STA with an
   IPv6 address will require state on the switch for several and
   possibly many multicast solicited-node addresses.  Multicast
   addresses that do not have forwarding state installed (perhaps due to
   hardware memory limitations on the switch) cause frames to be flooded
   on all ports of the switch.

3.2.4.  Spurious Neighbor Discovery

   On the Internet there is a "background radiation" of scanning traffic
   (people scanning for vulnerable machines) and backscatter (responses
   from spoofed traffic, etc).  This means that routers very often
   receive packets destined for machines whose IP addresses may or may
   not be in use.  In the cases where the IP is assigned to a host, the
   router broadcasts an ARP request, gets back an ARP reply, and caches
   it; then traffic can be delivered to the host.  When the IP address
   is not in use, the router broadcasts one (or more) ARP requests, and
   never gets a reply.  This means that it does not populate the ARP
   cache, and the next time there is traffic for that IP address the
   router will rebroadcast the ARP requests.



Perkins, et al.          Expires August 7, 2018                 [Page 8]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


   The rate of these ARP requests is proportional to the size of the
   subnets, the rate of scanning and backscatter, and how long the
   router keeps state on non-responding ARPs.  As it turns out, this
   rate is inversely proportional to how occupied the subnet is (valid
   ARPs end up in a cache, stopping the broadcasting; unused IPs never
   respond, and so cause more broadcasts).  Depending on the address
   space in use, the time of day, how occupied the subnet is, and other
   unknown factors, on the order of 2000 broadcasts per second have been
   observed at the IETF NOCs.

   On a wired network, there is not a huge difference amongst unicast,
   multicast and broadcast traffic; but this is not true in the wireless
   realm.  Wireless equipment often is unable to send this amount of
   broadcast and multicast traffic.  Consequently, on the wireless
   networks, we observe a significant amount of dropped broadcast and
   multicast packets.  This, in turn, means that when a host connects it
   is often not able to complete DHCP, and IPv6 RAs get dropped, leading
   to users being unable to use the network.

4.  Multicast protocol optimizations

   This section lists some optimizations that have been specified in
   IEEE 802 and IETF that are aimed at reducing or eliminating the
   issues discussed in Section 3.

4.1.  Proxy ARP in 802.11-2012

   The AP knows the MAC address and IP address for all associated STAs.
   In this way, the AP acts as the central "manager" for all the 802.11
   STAs in its BSS.  Proxy ARP is easy to implement at the AP, and
   offers the following advantages:

   o  Reduced broadcast traffic (transmitted at low MCS) on the wireless
      medium
   o  STA benefits from extended power save in sleep mode, as ARP
      requests for STA's IP address are handled instead by the AP.
   o  ARP frames are kept off the wireless medium.
   o  No changes are needed to STA implementation.

   Here is the specification language as described in clause 10.23.13 of
   [dot11-proxyarp]:

      When the AP supports Proxy ARP "[...] the AP shall maintain a
      Hardware Address to Internet Address mapping for each associated
      station, and shall update the mapping when the Internet Address of
      the associated station changes.  When the IPv4 address being
      resolved in the ARP request packet is used by a non-AP STA




Perkins, et al.          Expires August 7, 2018                 [Page 9]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


      currently associated to the BSS, the proxy ARP service shall
      respond on behalf of the non-AP STA"

4.2.  IPv6 Address Registration and Proxy Neighbor Discovery

   As used in this section, a Low-Power Wireless Personal Area Network
   (6LoWPAN) denotes a low power lossy network (LLN) that supports
   6LoWPAN Header Compression (HC) [RFC6282].  A 6TiSCH network
   [I-D.ietf-6tisch-architecture] is an example of a 6LowPAN.  In order
   to control the use of IPv6 multicast over 6LoWPANs, the 6LoWPAN
   Neighbor Discovery (6LoWPAN ND) [RFC6775] standard defines an address
   registration mechanism that relies on a central registry to assess
   address uniqueness, as a substitute to the inefficient Duplicate
   Address Detection (DAD) mechanism found in the mainstream IPv6
   Neighbor Discovery Protocol (NDP) [RFC4861][RFC4862].

   The 6lo Working Group is now completing an update
   [I-D.ietf-6lo-rfc6775-update] to RFC6775.  The update enables the
   registration to a Backbone Router [I-D.ietf-6lo-backbone-router],
   which proxies for the registered addresses with the mainstream IPv6
   NDP running on a high speed aggragating backbone.  The update also
   enables a proxy registration on behalf of the registered node, e.g.
   by a 6LoWPAN router to which the mobile node is attached.

   The general idea behind the backbone router concept is that in a
   variety of Wireless Local Area Networks (WLANs) and Wireless Personal
   Area Networks (WPANs), the broadcast/multicast domain should be
   controlled, and connectivity to a particular link that provides the
   subnet should be left to Layer-3.  The model for the Backbone Router
   operation is represented in Figure 1.





















Perkins, et al.          Expires August 7, 2018                [Page 10]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


                 |
               +-----+
               |     | Gateway (default) router
               |     |
               +-----+
                  |
                  |      Backbone Link
            +--------------------+------------------+
            |                    |                  |
         +-----+             +-----+             +-----+
         |     | Backbone    |     | Backbone    |     | Backbone
         |     | router      |     | router      |     | router
         +-----+             +-----+             +-----+
            o                o   o  o              o o
        o o   o  o       o o   o  o  o         o  o  o  o o
       o  o o  o o       o   o  o  o  o        o  o  o o o
       o   o  o  o          o    o  o           o  o   o
         o   o o               o  o                 o o

         LLN              LLN              LLN

               Figure 1: Backbone Link and Backbone Routers

   LLN nodes can move freely from an LLN anchored at one IPv6 Backbone
   Router to an LLN anchored at another Backbone Router on the same
   backbone, keeping any of the IPv6 addresses they have configured.
   The Backbone Routers maintain a Binding Table of their Registered
   Nodes, which serves as a distributed database of all the LLN Nodes.
   An extension to the Neighbor Discovery Protocol is introduced to
   exchange that information across the Backbone Link in the reactive
   fashion of mainstream IPv6 Neighbor Discovery.

   RFC6775 and follow-on work (e.g., [I-D.ietf-6lo-ap-nd], are designed
   to address the needs of LLNs, but the techniques are likely to be
   valuable on any type of link where sleeping devices are attached, or
   where the use of broadcast and multicast operations should be
   limited.

4.3.  Buffering to improve Power-Save

   Methods have been developed to help save battery life; for example, a
   device might not wake up when the AP receives a multicast packet.
   The AP acts on behalf of STAs in various ways.  In order to improve
   the power-saving feature for STAs in its BSS, the AP buffers frames
   for delivery to the STA at the time when the STA is scheduled for
   reception.  If an AP, for instance, expresses a DTIM of 3 then it
   will send a multicast packet every 3 packets.  But the reality is
   that most AP's will send a multicast every 30 packets.  For unicast



Perkins, et al.          Expires August 7, 2018                [Page 11]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


   there's a TIM.  But because multicast is going to everyone, the AP
   sends a broadcast to everyone.  DTIM does power management but
   clients can choose whether or not to wake up or not and whether or
   not to drop the packet.  Unfortunately, without proper administrative
   control, such clients may no longer be able to determine why their
   multicast operations do not work.

4.4.  IPv6 support in 802.11-2012

   IPv6 uses Neighbor Discovery Protocol (NDP) instead of ARP.  Every
   IPv6 node subscribes to a special multicast address for this purpose.

   Here is the specification language from clause 10.23.13 of
   [dot11-proxyarp]:

      "When an IPv6 address is being resolved, the Proxy Neighbor
      Discovery service shall respond with a Neighbor Advertisement
      message [...] on behalf of an associated STA to an [ICMPv6]
      Neighbor Solicitation message [...].  When MAC address mappings
      change, the AP may send unsolicited Neighbor Advertisement
      Messages on behalf of a STA."

   NDP may be used to request additional information

   o  Maximum Transmission Unit
   o  Router Solicitation
   o  Router Advertisement, etc.

   NDP messages are sent as group addressed (broadcast) frames in
   802.11.  Using the proxy operation helps to keep NDP messages off the
   wireless medium.

4.5.  Conversion of multicast to unicast

   It is often possible to transmit multicast control and data messages
   by using unicast transmissions to each station individually.

4.6.  Directed Multicast Service (DMS)

   There are situations where more is needed than simply converting
   multicast to unicast.  For these purposes, DMS enables a client to
   request that the AP transmit multicast group addressed frames
   destined to the requesting clients as individually addressed frames
   [i.e., convert multicast to unicast].  Here are some characteristics
   of DMS:

   o  Requires 802.11n A-MSDUs




Perkins, et al.          Expires August 7, 2018                [Page 12]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


   o  Individually addressed frames are acknowledged and are buffered
      for power save clients
   o  The requesting STA may specify traffic characteristics for DMS
      traffic
   o  DMS was defined in IEEE Std 802.11v-2011
   o  DMS requires changes to both AP and STA implementation.

   DMS is not currently implemented in products.

4.7.  GroupCast with Retries (GCR)

   GCR (defined in [dot11aa]) provides greater reliability by using
   either unsolicited retries or a block acknowledgement mechanism.  GCR
   increases probability of broadcast frame reception success, but still
   does not guarantee success.

   For the block acknowledgement mechanism, the AP transmits each group
   addressed frame as conventional group addressed transmission.
   Retransmissions are group addressed, but hidden from non-11aa
   clients.  A directed block acknowledgement scheme is used to harvest
   reception status from receivers; retransmissions are based upon these
   responses.

   GCR is suitable for all group sizes including medium to large groups.
   As the number of devices in the group increases, GCR can send block
   acknowledgement requests to only a small subset of the group.  GCR
   does require changes to both AP and STA implementation.

   GCR may introduce unacceptable latency.  After sending a group of
   data frames to the group, the AP has do the following:

   o  unicast a Block Ack Request (BAR) to a subset of members.
   o  wait for the corresponding Block Ack (BA).
   o  retransmit any missed frames.
   o  resume other operations which may have been delayed.

   This latency may not be acceptable for some traffic.

   There are ongoing extensions in 802.11 to improve GCR performance.

   o  BAR is sent using downlink MU-MIMO (note that downlink MU-MIMO is
      already specified in 802.11-REVmc 4.3).
   o  BA is sent using uplink MU-MIMO (which is a .11ax feature).
   o  Additional 802.11ax extensions are under consideration; see
      [mc-ack-mux]
   o  Latency may also be reduced by simultaneously receiving BA
      information from multiple clients.




Perkins, et al.          Expires August 7, 2018                [Page 13]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


5.  Operational optimizations

   This section lists some operational optimizations that can be
   implemented when deploying wireless IEEE 802 networks to mitigate the
   issues discussed in Section 3.

5.1.  Mitigating Problems from Spurious Neighbor Discovery

   ARP Sponges

         An ARP Sponge sits on a network and learn which IPs addresses
         are actually in use.  It also listen for ARP requests, and, if
         it sees an ARP for an IP address which it believes is not used,
         it will reply with its own MAC address.  This means that the
         router now has an IP to MAC mapping, which it caches.  If that
         IP is later assigned to an machine (e.g using DHCP), the ARP
         sponge will see this, and will stop replying for that address.
         Gratuitous ARPs (or the machine ARPing for its gateway) will
         replace the sponged address in the router ARP table.  This
         technique is quite effective; but, unfortunately, the ARP
         sponge daemons were not really designed for this use (the
         standard one [arpsponge], was designed to deal with the
         disappearance of participants from an IXP) and so are not
         optimized for this purpose.  We have to run one daemon per
         subnet, the tuning is tricky (the scanning rate versus the
         population rate versus retires, etc.) and sometimes the daemons
         just seem to stop, requiring a restart of the daemon and
         causing disruption.

   Router mitigations

         Some routers (often those based on Linux) implement a "negative
         ARP cache" daemon.  Simply put, if the router does not see a
         reply to an ARP it can be configured to cache this information
         for some interval.  Unfortunately, the core routers which we
         are using do not support this.  When a host connects to network
         and gets an IP address, it will ARP for its default gateway
         (the router).  The router will update its cache with the IP to
         host MAC mapping learnt from the request (passive ARP
         learning).

   Firewall unused space

         The distribution of users on wireless networks / subnets
         changes from meeting to meeting (e.g the "IETF-secure" SSID was
         renamed to "IETF", fewer users use "IETF-legacy", etc).  This
         utilization is difficult to predict ahead of time, but we can
         monitor the usage as attendees use the different networks.  By



Perkins, et al.          Expires August 7, 2018                [Page 14]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


         configuring multiple DHCP pools per subnet, and enabling them
         sequentially, we can have a large subnet, but only assign
         addresses from the lower portions of it.  This means that we
         can apply input IP access lists, which deny traffic to the
         upper, unused portions.  This means that the router does not
         attempt to forward packets to the unused portions of the
         subnets, and so does not ARP for it.  This method has proven to
         be very effective, but is somewhat of a blunt axe, is fairly
         labor intensive, and requires coordination.

   Disabling/filtering ARP requests

         In general, the router does not need to ARP for hosts; when a
         host connects, the router can learn the IP to MAC mapping from
         the ARP request sent by that host.  This means that we should
         be able to disable and / or filter ARP requests from the
         router.  Unfortunately, ARP is a very low level / fundamental
         part of the IP stack, and is often offloaded from the normal
         control plane.  While many routers can filter layer-2 traffic,
         this is usually implemented as an input filter and / or has
         limited ability to filter output broadcast traffic.  This means
         that the simple "just disable ARP or filter it outbound" seems
         like a really simple (and obvious) solution, but
         implementations / architectural issues make this difficult or
         awkward in practice.

   NAT

         The broadcasts are overwhelmingly being caused by outside
         scanning / backscatter traffic.  This means that, if we were to
         NAT the entire (or a large portion) of the attendee networks,
         there would be no NAT translation entries for unused addresses,
         and so the router would never ARP for them.  The IETF NOC has
         discussed NATing the entire (or large portions) attendee
         address space, but a: elegance and b: flaming torches and
         pitchfork concerns means we have not attempted this yet.

   Stateful firewalls

         Another obvious solution would be to put a stateful firewall
         between the wireless network and the Internet.  This firewall
         would block incoming traffic not associated with an outbound
         request.  The IETF philosophy has been to have the network as
         open as possible / honor the end-to-end principle.  An attendee
         on the meeting network should be an Internet host, and should
         be able to receive unsolicited requests.  Unfortunately,
         keeping the network working and stable is the first priority




Perkins, et al.          Expires August 7, 2018                [Page 15]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


         and a stateful firewall may be required in order to achieve
         this.

6.  Multicast Considerations for Other Wireless Media

   Many of the causes of performance degradation described in earlier
   sections are also observable for wireless media other than 802.11.

   For instance, problems with power save, excess media occupancy, and
   poor reliability will also affect 802.15.3 and 802.15.4.  However,
   802.15 media specifications do not include mechanisms similar to
   those developed for 802.11.  In fact, the design philosophy for
   802.15 is oriented towards minimality, with the result that many such
   functions would more likely be relegated to operation within higher
   layer protocols.  This leads to a patchwork of non-interoperable and
   vendor-specific solutions.  See [uli] for some additional discussion,
   and a proposal for a task group to resolve similar issues, in which
   the multicast problems might be considered for mitigation.

7.  Recommendations

   This section will provide some recommendations about the usage and
   combinations of the multicast enhancements described in Section 4 and
   Section 5.

   (FFS)

8.  Discussion Items

   This section will suggest some discussion items for further
   resolution.

   The IETF may need to decide that broadcast is more expensive so
   multicast needs to be sent wired.  For example, 802.1ak works on
   ethernet and wifi.  802.1ak has been pulled into 802.1Q as of 802.1Q-
   2011.  802.1Q-2014 can be looked at here: http://www.ieee802.org/1/
   pages/802.1Q-2014.html.  If a generic solution is not found,
   guidelines for multicast over wifi should be established.

   To provide an idea going forward, perhaps a reliable registration to
   Layer-2 multicast groups and a reliable multicast operation at
   Layer-2 could provide a generic solution.  There is no need to
   support 2^24 groups to get solicited node multicast working: it is
   possible to simply select a number of trailing bits that make sense
   for a given network size to limit the amount of unwanted deliveries
   to reasonable levels.  IEEE 802.1, 802.11, and 802.15 should be
   encouraged to revisit L2 multicast issues.  In particular, Wi-Fi
   provides a broadcast service, not a multicast one; at the PHY level,



Perkins, et al.          Expires August 7, 2018                [Page 16]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


   all frames are broadcast except in very unusual cases in which
   special beamforming transmitters are used.  Unicast offers the
   advantage of being much faster (2 orders of magnitude) and much more
   reliable (L2 ARQ).

9.  Security Considerations

   This document does not introduce any security mechanisms, and does
   not have affect existing security mechanisms.

10.  IANA Considerations

   This document does not specify any IANA actions.

11.  Acknowledgements

   This document has benefitted from discussions with the following
   people, in alphabetical order: Pascal Thubert

12.  Informative References

   [arpsponge]
              Arien Vijn, Steven Bakker, "Arp Sponge", March 2015.

   [dot11]    P802.11, "Part 11: Wireless LAN Medium Access Control
              (MAC) and Physical Layer (PHY) Specifications", March
              2012.

   [dot11-proxyarp]
              P802.11, "Proxy ARP in 802.11ax", September 2015.

   [dot11aa]  P802.11, "Part 11: Wireless LAN Medium Access Control
              (MAC) and Physical Layer (PHY) Specifications Amendment 2:
              MAC Enhancements for Robust Audio Video Streaming", March
              2012.

   [I-D.ietf-6lo-ap-nd]
              Thubert, P., Sarikaya, B., and M. Sethi, "Address
              Protected Neighbor Discovery for Low-power and Lossy
              Networks", draft-ietf-6lo-ap-nd-05 (work in progress),
              January 2018.

   [I-D.ietf-6lo-backbone-router]
              Thubert, P., "IPv6 Backbone Router", draft-ietf-6lo-
              backbone-router-05 (work in progress), January 2018.






Perkins, et al.          Expires August 7, 2018                [Page 17]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


   [I-D.ietf-6lo-rfc6775-update]
              Thubert, P., Nordmark, E., Chakrabarti, S., and C.
              Perkins, "An Update to 6LoWPAN ND", draft-ietf-6lo-
              rfc6775-update-11 (work in progress), December 2017.

   [I-D.ietf-6tisch-architecture]
              Thubert, P., "An Architecture for IPv6 over the TSCH mode
              of IEEE 802.15.4", draft-ietf-6tisch-architecture-13 (work
              in progress), November 2017.

   [ietf_802-11]
              Dorothy Stanley, "IEEE 802.11 multicast capabilities", Nov
              2015.

   [mc-ack-mux]
              Yusuke Tanaka et al., "Multiplexing of Acknowledgements
              for Multicast Transmission", July 2015.

   [mc-prob-stmt]
              Mikael Abrahamsson and Adrian Stephens, "Multicast on
              802.11", March 2015.

   [mc-props]
              Adrian Stephens, "IEEE 802.11 multicast properties", March
              2015.

   [RFC4541]  Christensen, M., Kimball, K., and F. Solensky,
              "Considerations for Internet Group Management Protocol
              (IGMP) and Multicast Listener Discovery (MLD) Snooping
              Switches", RFC 4541, DOI 10.17487/RFC4541, May 2006,
              <https://www.rfc-editor.org/info/rfc4541>.

   [RFC4861]  Narten, T., Nordmark, E., Simpson, W., and H. Soliman,
              "Neighbor Discovery for IP version 6 (IPv6)", RFC 4861,
              DOI 10.17487/RFC4861, September 2007,
              <https://www.rfc-editor.org/info/rfc4861>.

   [RFC4862]  Thomson, S., Narten, T., and T. Jinmei, "IPv6 Stateless
              Address Autoconfiguration", RFC 4862,
              DOI 10.17487/RFC4862, September 2007,
              <https://www.rfc-editor.org/info/rfc4862>.

   [RFC6282]  Hui, J., Ed. and P. Thubert, "Compression Format for IPv6
              Datagrams over IEEE 802.15.4-Based Networks", RFC 6282,
              DOI 10.17487/RFC6282, September 2011,
              <https://www.rfc-editor.org/info/rfc6282>.





Perkins, et al.          Expires August 7, 2018                [Page 18]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


   [RFC6775]  Shelby, Z., Ed., Chakrabarti, S., Nordmark, E., and C.
              Bormann, "Neighbor Discovery Optimization for IPv6 over
              Low-Power Wireless Personal Area Networks (6LoWPANs)",
              RFC 6775, DOI 10.17487/RFC6775, November 2012,
              <https://www.rfc-editor.org/info/rfc6775>.

   [uli]      Pat Kinney, "LLC Proposal for 802.15.4", Nov 2015.

Authors' Addresses

   Charles E. Perkins
   Futurewei Inc.
   2330 Central Expressway
   Santa Clara, CA  95050
   USA

   Phone: +1-408-330-4586
   Email: charliep@computer.org


   Mike McBride
   Futurewei Inc.
   2330 Central Expressway
   Santa Clara, CA  95055
   USA

   Email: michael.mcbride@huawei.com


   Dorothy Stanley
   Hewlett Packard Enterprise
   2000 North Naperville Rd.
   Naperville, IL  60566
   USA

   Phone: +1 630 979 1572
   Email: dstanley@arubanetworks.com


   Warren Kumari
   Google
   1600 Amphitheatre Parkway
   Mountain View, CA  94043
   USA

   Email: warren@kumari.net





Perkins, et al.          Expires August 7, 2018                [Page 19]

Internet-Draft      Multicast Over IEEE 802 Wireless       February 2018


   Juan Carlos Zuniga
   SIGFOX
   425 rue Jean Rostand
   Labege  31670
   France

   Email: j.c.zuniga@ieee.org












































Perkins, et al.          Expires August 7, 2018                [Page 20]

