<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>RNFD: Fast border router crash detection in RPL</title>
<meta content="Konrad Iwanicki" name="author">
<meta content="
       By and large, a correct operation of a RPL network requires border routers to be up.
In many applications, it is beneficial for the nodes to detect a crash of a border router as soon as possible to trigger fallback actions.
This document describes RNFD, an extension to RPL that expedites border router failure detection, even by an order of magnitude, by having nodes collaboratively monitor the status of a given border router.
The extension introduces an additional state at each node, a new type of RPL Control Message Options for synchronizing this state among different nodes, and the coordination algorithm itself. 
    " name="description">
<meta content="xml2rfc 3.12.3" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-ietf-roll-rnfd-00" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.12.3
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.8.0
    MarkupSafe 2.0.1
    pycountry 22.1.10
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.6.0
    six 1.16.0
    WeasyPrint 52.5
-->
<link href="/tmp/draft-ietf-roll-rnfd-00-mybvm1p3.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">RNFD</td>
<td class="right">March 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Iwanicki</td>
<td class="center">Expires 2 September 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">ROLL</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-roll-rnfd-00</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-03-01" class="published">1 March 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-09-02">2 September 2022</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">K. Iwanicki</div>
<div class="org">University of Warsaw</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">RNFD: Fast border router crash detection in RPL</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">By and large, a correct operation of a RPL network requires border routers to be up.
In many applications, it is beneficial for the nodes to detect a crash of a border router as soon as possible to trigger fallback actions.
This document describes RNFD, an extension to RPL that expedites border router failure detection, even by an order of magnitude, by having nodes collaboratively monitor the status of a given border router.
The extension introduces an additional state at each node, a new type of RPL Control Message Options for synchronizing this state among different nodes, and the coordination algorithm itself.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 2 September 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-effects-of-lbr-crashes" class="xref">Effects of LBR Crashes</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-design-principles" class="xref">Design Principles</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-overview" class="xref">Overview</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-protocol-state-machine" class="xref">Protocol State Machine</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-counters-and-communication" class="xref">Counters and Communication</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-the-rnfd-option" class="xref">The RNFD Option</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-general-cfrc-requirements" class="xref">General CFRC Requirements</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-format-of-the-option" class="xref">Format of the Option</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-rpl-router-behavior" class="xref">RPL Router Behavior</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-joining-a-dodag-version-and" class="xref">Joining a DODAG Version and Changing the RNFD Role</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-detecting-and-verifying-pro" class="xref">Detecting and Verifying Problems with the DODAG Root</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-disseminating-observations-" class="xref">Disseminating Observations and Reaching Agreement</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="xref">5.4</a>.  <a href="#name-dodag-roots-behavior" class="xref">DODAG Root's Behavior</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.5">
                <p id="section-toc.1-1.5.2.5.1"><a href="#section-5.5" class="xref">5.5</a>.  <a href="#name-activating-and-deactivating" class="xref">Activating and Deactivating the Protocol on Demand</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.6">
                <p id="section-toc.1-1.5.2.6.1"><a href="#section-5.6" class="xref">5.6</a>.  <a href="#name-processing-cfrcs-of-incompa" class="xref">Processing CFRCs of Incompatible Lengths</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.7">
                <p id="section-toc.1-1.5.2.7.1"><a href="#section-5.7" class="xref">5.7</a>.  <a href="#name-summary-of-rnfds-interactio" class="xref">Summary of RNFD's Interactions with RPL</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.8">
                <p id="section-toc.1-1.5.2.8.1"><a href="#section-5.8" class="xref">5.8</a>.  <a href="#name-summary-of-rnfds-constants" class="xref">Summary of RNFD's Constants</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-manageability-consideration" class="xref">Manageability Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-role-assignment-and-cfrc-si" class="xref">Role Assignment and CFRC Size Adjustment</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-virtual-dodag-roots" class="xref">Virtual DODAG Roots</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-acknowledgements" class="xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-address" class="xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="intro">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">RPL is an IPv6 routing protocol for low-power and lossy networks (LLNs) <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span>.
Such networks are usually constrained in device energy and channel capacity.
They are formed largely of nodes that offer little processing power and memory, and links that are of variable qualities and support low data rates.
Therefore, the main challenge that a routing protocol for LLNs has to address is minimizing resource consumption without sacrificing reaction time to network changes.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">One of the main design principles adopted in RPL to minimize node resource consumption is delegating much of the responsibility for routing to LLN border routers (LBRs).
A network is organized into destination-oriented directed acyclic graphs (DODAGs), each corresponding to an LBR and having all its paths terminate at the LBR.
To this end, every node is dynamically assigned a rank representing its distance, measured in some metric, to a given LBR, with the LBR having the minimal rank, which reflects its role as the DODAG root.
The ranks allow each non-LBR node to select from among its neighbors (i.e., nodes to which the node has links) those ones that are closer to the LBR than the node itself: the node's parents in the graph.
The resulting DODAG paths, consisting of the node-parent links, are utilized for routing packets upward: to the LBR and outside the LLN.
They are also used by nodes to periodically report their connectivity upward to the LBR, which allows in turn for directing packets downward, from the LBR to these nodes, for instance, by means of source routing <span>[<a href="#RFC6554" class="xref">RFC6554</a>]</span>.
All in all, not only do LBRs participate in routing but also drive the process of DODAG construction and maintenance underlying the protocol.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">To play this central role, LBRs are expected to be more capable than regular LLN nodes.
They are assumed not to be constrained in computing power, memory, and energy, which often entails a more involved hardware-software architecture and tethered power supply.
This, however, also makes them more prone to failures, especially since in large deployments it is often difficult to ensure a backup power supply for every LBR.<a href="#section-1-3" class="pilcrow">¶</a></p>
<div id="effects-of-lbr-crashes">
<section id="section-1.1">
        <h3 id="name-effects-of-lbr-crashes">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-effects-of-lbr-crashes" class="section-name selfRef">Effects of LBR Crashes</a>
        </h3>
<p id="section-1.1-1">When an LBR crashes, the nodes in its DODAG lose the ability to communicate with other Internet hosts.
In addition, a significant fraction of DODAG paths interconnecting the nodes become invalid, as they pass through the LBR.
The others also degenerate as a result of DODAG repair attempts, which are bound to fail.
In effect, routing inside the DODAG also becomes largely impossible.
Consequently, it is desirable that an LBR crash be detected by the nodes fast, so that they can leave the broken DODAG and join another one or trigger additional application- or deployment-dependent fallback mechanisms, thereby minimizing the negative impact of the disconnection.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">Since all DODAG paths lead to the corresponding LBR, detecting its crash by a node entails dropping all parents and adopting an infinite rank, which reflects the node's inability to reach the LBR.
Depending on the deployment settings, the node can then remain in such a state, join a different DODAG, or even become itself the root of a floating DODAG.
In any case, however, achieving this state for all nodes is slow, can generate heavy traffic, and is difficult to implement correctly <span>[<a href="#Iwanicki16" class="xref">Iwanicki16</a>]</span> <span>[<a href="#Paszkowska19" class="xref">Paszkowska19</a>]</span> <span>[<a href="#Ciolkosz19" class="xref">Ciolkosz19</a>]</span>.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">To start with, tearing down all DODAG paths requires each of the LBR's neighbors to detect that its link with the LBR is no longer up.
Otherwise, any of the neighbors unaware of this fact can keep advertising a finite rank and can thus be other nodes' parent or ancestor in the DODAG: such nodes will incorrectly believe they have a valid path to the LBR.
Detecting a crash of a link by a node normally happens when the node has observed sufficiently many forwarding failures over the link.
Therefore, considering the low-data-rate applications of LLNs, the period from the crash to the moment of eliminating from the DODAG the last link to the LBR may be long.
Subsequently learning by all nodes that none of their links can form any path leading to the LBR also adds latency, partly due to parent changes that the nodes independently perform in attempts to repair their broken paths locally.
Since a non-LBR node has only local knowledge of the network, potentially inconsistent with that of other nodes, such parent changes often produce paths containing loops, which have to be broken before all nodes can conclude that no path to the LBR exists globally.
Even with RPL's dedicated loop detection mechanisms <span>[<a href="#RFC6553" class="xref">RFC6553</a>]</span>, this also requires traffic, and hence time.
Finally, switching a parent or discovering a loop can also generate cascaded bursts of control traffic, owing to the adaptive Trickle algorithm for exchanging DODAG information <span>[<a href="#RFC6202" class="xref">RFC6202</a>]</span>.
Overall, the behavior of the network when handling an LBR crash is highly suboptimal, thereby not being in line with RPL's goal of minimizing resource consumption and reaction latencies.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="design-principles">
<section id="section-1.2">
        <h3 id="name-design-principles">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-design-principles" class="section-name selfRef">Design Principles</a>
        </h3>
<p id="section-1.2-1">To address this issue, this document proposes an extension to RPL, dubbed Root Node Failure Detector (RNFD).
To minimize the time and traffic required to handle an LBR crash, the RNFD algorithm adopts the following design principles, derived directly from the previous observations:<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-1.2-2">
<li id="section-1.2-2.1">Explicitly coordinating LBR monitoring between nodes instead of relying only on the emergent behavior resulting from their independent operation.<a href="#section-1.2-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-1.2-2.2">Avoiding probing all links to the dead LBR so as to reduce the tail latency when eliminating these links from the DODAG.<a href="#section-1.2-2.2" class="pilcrow">¶</a>
</li>
          <li id="section-1.2-2.3">Exploiting concurrency by prompting proactive checking for a possible LBR crash when some nodes suspect such a failure may have taken place, which aims to further reduce the critical path.<a href="#section-1.2-2.3" class="pilcrow">¶</a>
</li>
          <li id="section-1.2-2.4">Minimizing changes to RPL's existing algorithms by operating in parallel and largely independently (in the background), and introducing few additional assumptions.<a href="#section-1.2-2.4" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-1.2-3">While these principles do improve RPL's performance under a wide range of LBR crashes, their probabilistic nature precludes hard guarantees for all possible corner cases.
In particular, in some scenarios, RNFD's operation may result in false negatives, but these situations are peculiar and will eventually be handled by RPL's own aforementioned mechanisms.
Likewise, in some scenarios, notably involving highly unstable links, false positives may occur, but they can be alleviated as well.
In any case, the principles also guarantee that RNFD can be deactivated at any time, if needed, in which case RPL's operation is unaffected.<a href="#section-1.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="terms">
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when, they appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">The Terminology used in this document is consistent with and incorporates that described in "Terms Used in Routing for Low-Power and Lossy Networks (LLNs)" <span>[<a href="#RFC7102" class="xref">RFC7102</a>]</span>, "RPL: IPv6 Routing Protocol for Low-Power and Lossy Networks" <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span>, and "The Routing Protocol for Low-Power and Lossy Networks (RPL) Option for Carrying RPL Information in Data-Plane Datagrams" <span>[<a href="#RFC6553" class="xref">RFC6553</a>]</span>.
Other terms in use in LLNs can be found in "Terminology for Constrained-Node Networks" <span>[<a href="#RFC7228" class="xref">RFC7228</a>]</span>.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">In particular, the following acronyms appear in the document:<a href="#section-2-3" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2-4">
        <dt id="section-2-4.1">DIO</dt>
        <dd style="margin-left: 1.5em" id="section-2-4.2">
  DODAG Information Object (a RPL message)<a href="#section-2-4.2" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-4.3">DIS</dt>
        <dd style="margin-left: 1.5em" id="section-2-4.4">
  DODAG Information Solicitation (a RPL message)<a href="#section-2-4.4" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-4.5">DODAG</dt>
        <dd style="margin-left: 1.5em" id="section-2-4.6">
  Destination-Oriented Directed Acyclic Graph<a href="#section-2-4.6" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-4.7">LLN</dt>
        <dd style="margin-left: 1.5em" id="section-2-4.8">
  Low-power and Lossy Network<a href="#section-2-4.8" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-4.9">LBR</dt>
        <dd style="margin-left: 1.5em" id="section-2-4.10">
  LLN Border Router<a href="#section-2-4.10" class="pilcrow">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-2-5">In addition, the document introduces the following concepts:<a href="#section-2-5" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2-6">
        <dt id="section-2-6.1">Sentinel</dt>
        <dd style="margin-left: 1.5em" id="section-2-6.2">
  One of the two roles that a node can play in RNFD. For a given DODAG Version, a Sentinel node is the DODAG root's neighbor that monitors the DODAG root's status. There are normally multiple Sentinels for a DODAG root. However, being the DODAG root's neighbor need not imply being Sentinel.<a href="#section-2-6.2" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-6.3">Acceptor</dt>
        <dd style="margin-left: 1.5em" id="section-2-6.4">
  The other of the two roles that a node can play in RNFD. For a given DODAG Version, an Acceptor node is a node that is not Sentinel.<a href="#section-2-6.4" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-6.5">Locally Observed DODAG Root's State (LORS)</dt>
        <dd style="margin-left: 1.5em" id="section-2-6.6">
  A node's local knowledge of the DODAG root's status, specifying in particular whether the DODAG root is up.<a href="#section-2-6.6" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-6.7">Conflict-Free Replicated Counter (CFRC)</dt>
        <dd style="margin-left: 1.5em" id="section-2-6.8">
  Conceptually represents a dynamic set whose cardinality can be estimated. It defines a partial order on its values and supports element addition and union. The union operation is order- and duplicate-insensitive, that is, idempotent, commutative, and associative.<a href="#section-2-6.8" class="pilcrow">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="overview">
<section id="section-3">
      <h2 id="name-overview">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-overview" class="section-name selfRef">Overview</a>
      </h2>
<p id="section-3-1">As mentioned previously, LBRs are DODAG roots in RPL, and hence a crash of an LBR is global in that it affects all nodes in the corresponding DODAG.
Therefore, each node running RNFD for a given DODAG explicitly tracks the DODAG root's current condition, which is referred to as Locally Observed DODAG Root's State (LORS), and synchronizes its local knowledge with other nodes.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">Since monitoring the condition of the DODAG root is performed by tracking the status of its links (i.e., whether they are up or down), it must be done by the root's neighbors; other nodes must accept their observations.
Consequently, depending on their roles, non-root nodes are divided in RNFD into two disjoint groups: Sentinels and Acceptors.
A Sentinel node is the DODAG root's neighbor that monitors its link with the root.
The DODAG root thus normally has multiple Sentinels but being its neighbor need not imply being Sentinel.
An Acceptor node is in turn a node that is not Sentinel.
Acceptors thus mainly collect and propagate Sentinels' observations.
More information on Sentinel selection can be found in <a href="#mgmnt_roles_and_cfrc_lens" class="xref">Section 6.1</a>.<a href="#section-3-2" class="pilcrow">¶</a></p>
<div id="protocol-state-machine">
<section id="section-3.1">
        <h3 id="name-protocol-state-machine">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-protocol-state-machine" class="section-name selfRef">Protocol State Machine</a>
        </h3>
<p id="section-3.1-1">The possible values of LORS and transitions between them are depicted in <a href="#fig_state_machine" class="xref">Figure 1</a>.
States "UP" and "GLOBALLY DOWN" can be attained by both Sentinels and Acceptors; states "SUSPECTED DOWN" and "LOCALLY DOWN"--by Sentinels only.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<span id="name-rnfd-states-and-transitions"></span><div id="fig_state_machine">
<figure id="figure-1">
          <div class="alignLeft art-text artwork" id="section-3.1-2.1">
<pre>
  +---------------------------------------------------------+
  |                      |---------------------------+   3a |
  |    +-----------------+---------+              3b |      |
  |    | 2b              |         v                 v      v
+-+----+-+   1 +---------+-+     +-----------+     +-+------+-+
|   UP   +----&gt;+ SUSPECTED +----&gt;+  LOCALLY  +----&gt;+ GLOBALLY |
|        +&lt;----+    DOWN   | 2a  |    DOWN   | 3c  |   DOWN   |
+-+----+-+  4a +-----------+     +-+---------+     +-+--------+
  ^    ^                           |                 |
  |    |                        4b |                 |
  |    +---------------------------+               5 |
  +--------------------------------------------------+

</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-rnfd-states-and-transitions" class="selfRef">RNFD States and Transitions</a>
          </figcaption></figure>
</div>
<p id="section-3.1-3">To begin with, when any node joins a DODAG Version, the DODAG root must appear alive, so the node initializes RNFD with its LORS equal to "UP".
For a properly working DODAG root, the node remains in state "UP".<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1-4">However, when a node--acting as Sentinel--starts suspecting that the root may have crashed, it changes its LORS to "SUSPECTED DOWN" (transition 1 in <a href="#fig_state_machine" class="xref">Figure 1</a>).
The transition from "UP" to "SUSPECTED DOWN" can happen based on the node's observations at either the data plane, for instance, link-layer triggers about missing hop-by-hop acknowledgments for packets forwarded over the node's link to the root, or the control plane, for example, a significant growth in the number of Sentinels already suspecting the root to be dead.
In state "SUSPECTED DOWN", the Sentinel node may verify its suspicion and/or inform other nodes about the suspicion.
When this has been done, it changes its LORS to "LOCALLY DOWN" (transition 2a).
In some cases, the verification need not be performed and, as an optimization, a direct transition from "UP" to "LOCALLY DOWN" (transition 2b) can be done instead.<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<p id="section-3.1-5">If sufficiently many Sentinels have their LORS equal to "LOCALLY DOWN", all nodes--Sentinels and Acceptors--consent globally that the DODAG root must have crashed and set their LORS to "GLOBALLY DOWN", irrespective of the previous value (transitions 3a, 3b, and 3c).
State "GLOBALLY DOWN" is terminal in that the only transition any node can perform from this to another state (transition 5) takes place when the node joins a new DODAG version.
When a node is in state "GLOBALLY DOWN", RNFD forces RPL to maintain an infinite rank and no parent, thereby preventing routing packets upward in the DODAG.
In other words, this state represents a situation in which all non-root nodes agree that the current DODAG version is unusable, and hence, to recover, the root has to give a proof of being alive by initiating a new DODAG Version.<a href="#section-3.1-5" class="pilcrow">¶</a></p>
<p id="section-3.1-6">In contrast, if a node--either Sentinel or Acceptor--is in state "UP", RNFD does not influence RPL's packet forwarding: a node can route packets upward if it has a parent.
The same is true for a Sentinel node in states "SUSPECTED DOWN" and "LOCALLY DOWN".
Finally, while in any of the two states, a Sentinel node may observe some activity of the DODAG root, and hence decide that its suspicion is a mistake.
In such a case, it returns to state "UP" (transitions 4a and 4b).<a href="#section-3.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="counters-and-communication">
<section id="section-3.2">
        <h3 id="name-counters-and-communication">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-counters-and-communication" class="section-name selfRef">Counters and Communication</a>
        </h3>
<p id="section-3.2-1">To enable arriving at a global conclusion that the DODAG root has crashed (i.e., transiting to state "GLOBALLY DOWN"), all nodes count locally and synchronize among each other the number of Sentinels considering the root to be dead (i.e., those in state "LOCALLY DOWN").
This process employs structures referred to as conflict-free replicated counters (CFRCs).
They are stored and modified independently by each node and are disseminated throughout the network in options added to RPL link-local control messages: DODAG Information Objects (DIOs) and DODAG Information Solicitations (DISs).
Upon reception of such an option from its neighbor, a node merges the received counter with its local one, thereby obtaining a new content for its local counter.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">The merging operation is idempotent, commutative, and associative.
Moreover, all possible counter values are partially ordered.
This enables ensuring eventual consistency of the counters acros all nodes, irrespective of the particular sequence of merges, shape of the DODAG, or general network topology.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">Each node in RNFD maintains two CFRCs for a DODAG:<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-4.1">PositiveCFRC, counting Sentinels that have considered or still consider the root node as alive in the current DODAG Version,<a href="#section-3.2-4.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-4.2">NegativeCFRC, counting Sentinels that have considered or still consider the root node as dead in the current DODAG Version.<a href="#section-3.2-4.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-3.2-5">PositiveCFRC is always greater than or equal to the NegativeCFRC in terms of the partial order defined for the counters.
The difference between the value of PositiveCFRC and the value of NegativeCFRC is thus nonnegative and estimates the number of Sentinels that still consider the DODAG root node as alive.<a href="#section-3.2-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="the-rnfd-option">
<section id="section-4">
      <h2 id="name-the-rnfd-option">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-the-rnfd-option" class="section-name selfRef">The RNFD Option</a>
      </h2>
<p id="section-4-1">RNFD state synchronization between nodes takes place through the RNFD Option.
It is a new type of RPL Control Message Options that is carried in link-local RPL control messages, notably DIOs and DISs.
Its main task is allowing the receivers to merge their two CFRCs with the sender's CFRCs.<a href="#section-4-1" class="pilcrow">¶</a></p>
<div id="general-cfrc-requirements">
<section id="section-4.1">
        <h3 id="name-general-cfrc-requirements">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-general-cfrc-requirements" class="section-name selfRef">General CFRC Requirements</a>
        </h3>
<p id="section-4.1-1">CFRCs in RNFD MUST support the following operations:<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-4.1-2">
          <dt id="section-4.1-2.1">value(c)</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-2.2">
  Returns a non-negative integer value corresponding to the number of nodes counted by a given CFRC, c.<a href="#section-4.1-2.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-2.3">zero()</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-2.4">
  Returns a CFRC that counts no nodes, that is, has its value equal to 0.<a href="#section-4.1-2.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-2.5">self()</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-2.6">
  Returns a CFRC that counts only the node executing the operation.<a href="#section-4.1-2.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-2.7">infinity()</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-2.8">
  Returns a CFRC that counts all possible nodes and represents a special value, infinity.<a href="#section-4.1-2.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-2.9">merge(c1, c2)</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-2.10">
  Returns a CFRC that is a union of c1 and c2 (i.e., counts all nodes that are counted by either c1, c2, or both c1 and c2).<a href="#section-4.1-2.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-2.11">compare(c1, c2)</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-2.12">
  Returns the result of comparing c1 to c2.<a href="#section-4.1-2.12" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-2.13">saturated(c)</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-2.14">
  Returns TRUE if a given CFRC, c, is saturated (i.e., no more new nodes should be counted by it), or FALSE otherwise.<a href="#section-4.1-2.14" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-4.1-3">The partial ordering of CFRCs implies that the result of compare(c1, c2) can be either:<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-4.1">smaller, if c1 is ordered before c2 (i.e., c2 counts all nodes that c1 counts and at least one node that c1 does not count);<a href="#section-4.1-4.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.1-4.2">greater, if c1 is ordered after c2 (i.e., c1 counts all nodes that c2 counts and at least one node that c2 does not count);<a href="#section-4.1-4.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.1-4.3">equal, if c1 and c2 are the same (i.e., they count the same nodes);<a href="#section-4.1-4.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.1-4.4">incomparable, otherwise.<a href="#section-4.1-4.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.1-5">In particular, zero() is smaller than all other values and infinity() is greater than any other value.<a href="#section-4.1-5" class="pilcrow">¶</a></p>
<p id="section-4.1-6">The properties of merging in turn can be formalized as follows for any c1, c2, and c3:<a href="#section-4.1-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-7.1">idempotence: c1 = merge(c1, c1);<a href="#section-4.1-7.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.1-7.2">commutativity: merge(c1, c2) = merge(c2, c1);<a href="#section-4.1-7.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.1-7.3">associativity: merge(c1, merge(c2, c3)) = merge(merge(c1, c2), c3).<a href="#section-4.1-7.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.1-8">In particular, merge(c, zero()) always equals c while merge(c, infinity()) always equals infinity().<a href="#section-4.1-8" class="pilcrow">¶</a></p>
<p id="section-4.1-9">There are many algorithmic structures that can provide the aforementioned properties of CFRC.
Although in principle RNFD does not rely on any specific one, the option adopts so-called linear counting <span>[<a href="#Whang90" class="xref">Whang90</a>]</span>.<a href="#section-4.1-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="msg_format">
<section id="section-4.2">
        <h3 id="name-format-of-the-option">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-format-of-the-option" class="section-name selfRef">Format of the Option</a>
        </h3>
<p id="section-4.2-1">The format of the RNFD Option conforms to the generic format of RPL Control Message Options:<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<span id="name-format-of-the-rnfd-option"></span><div id="fig_opt_format">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-4.2-2.1">
<pre>
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |   Type = TBD1 | Option Length |                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
  |                                                               |
  +                                                               +
  |               PosCFRC, NegCFRC (Variable Length*)             |
  .                                                               .
  .                                                               .
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

The '*' denotes that the fields have equal lengths of at least one
octet each. In effect, together they occupy at least two octets.
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-format-of-the-rnfd-option" class="selfRef">Format of the RNFD Option</a>
          </figcaption></figure>
</div>
<span class="break"></span><dl class="dlParallel" id="section-4.2-3">
          <dt id="section-4.2-3.1">Option Type</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-3.2">
  TBD1<a href="#section-4.2-3.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.2-3.3">Option Length</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-3.4">
  8-bit unsigned integer. Denotes the length of the option in octets excluding the Option Type and Option Length fields. Its value MUST be even. A value of 0 denotes that RNFD is disabled in the current DODAG Version.<a href="#section-4.2-3.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.2-3.5">PosCFRC, NegCFRC</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-3.6">
  Two variable-length, octet-aligned bit arrays carrying the sender's PositiveCFRC and NegativeCFRC, respectively.<a href="#section-4.2-3.6" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-4.2-4">The length of the arrays constituting the PosCFRC and NegCFRC fields is the same and is derived from Option Length as follows.
The value of Option Length is divided by 2 to obtain the number of octets each of the two arrays occupies.
The resulting number of octets is multiplied by 8 which yields an upper bound on the number of bits in each array.
As the actual bit length of each of the arrays, the largest prime number less than the upper bound is assumed.
For example, if the value of Option Length is 16, then each array occupies 8 octets, and its actual bit length is 61, as this is the largest prime number less than 64.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
<p id="section-4.2-5">Furthermore, for any bit equal to 1 in the NegCFRC, the bit with the same index MUST be equal to 1 also in the PosCFRC.
Any unused bits (i.e., the bits beyond the actual bit length of each of the arrays) MUST be equal to 0.
Finally, if PosCFRC has all its bits equal to 1, then NegCFRC MUST also have all its bits equal to 1.<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<p id="section-4.2-6">The CFRC operations are defined for such bit arrays of a given length as follows:<a href="#section-4.2-6" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-4.2-7">
          <dt id="section-4.2-7.1">value(c)</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-7.2">
  Returns the smallest integer value not less than -LT*ln(L0/LT), where ln() is the natural logarithm function, L0 is the number of bits equal to 0 in the array corresponding to <code>c</code> and LT is the bit length of the array.<a href="#section-4.2-7.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.2-7.3">zero()</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-7.4">
  Returns an array with all bits equal to 0.<a href="#section-4.2-7.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.2-7.5">self()</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-7.6">
  Returns an array with a single bit, selected uniformly at random, equal to 1.<a href="#section-4.2-7.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.2-7.7">infinity()</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-7.8">
  Returns an array with all bits equal to 1.<a href="#section-4.2-7.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.2-7.9">merge(c1, c2)</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-7.10">
  Returns a bit array that constitutes a bitwise OR of c1 and c2, that is, a bit in the resulting array is equal to 0 only if the same bit is equal to 0 in both c1 and c2.<a href="#section-4.2-7.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.2-7.11">compare(c1, c2)</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-7.12">
  Returns:<a href="#section-4.2-7.12" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<ul class="normal">
<li class="normal" id="section-4.2-8.1">equal if each bit of c1 is equal to the corresponding bit of c2;<a href="#section-4.2-8.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-8.2">less if c1 and c2 are not equal and, for each bit equal to 1 in c1, the corresponding bit in c2 is also equal to 1;<a href="#section-4.2-8.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-8.3">greater if c1 and c2 are not equal and, for each bit equal to 1 in c2, the corresponding bit in c1 is also equal to 1;<a href="#section-4.2-8.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-8.4">incomparable, otherwise.<a href="#section-4.2-8.4" class="pilcrow">¶</a>
</li>
        </ul>
<span class="break"></span><dl class="dlParallel" id="section-4.2-9">
          <dt id="section-4.2-9.1">saturated(c)</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-9.2">
  Returns TRUE, if more than 63% of the bits in c are equal to 1, or FALSE, otherwise.<a href="#section-4.2-9.2" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="rnfd_behavior">
<section id="section-5">
      <h2 id="name-rpl-router-behavior">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-rpl-router-behavior" class="section-name selfRef">RPL Router Behavior</a>
      </h2>
<p id="section-5-1">Although RNFD operates largely independently of RPL, it does need interact with RPL and the overall protocol stack.
These interactions are described next and can be realized, for instance, by means of event triggers.<a href="#section-5-1" class="pilcrow">¶</a></p>
<div id="rnfd_behavior_roles">
<section id="section-5.1">
        <h3 id="name-joining-a-dodag-version-and">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-joining-a-dodag-version-and" class="section-name selfRef">Joining a DODAG Version and Changing the RNFD Role</a>
        </h3>
<p id="section-5.1-1">Whenever RPL running at a node joins a DODAG Version, RNFD--if active--MUST assume for the node the role of Acceptor.
Accordingly, it MUST set its LORS to "UP" and its PositiveCFRC and NegativeCFRC to zero().<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">The role MAY then change between Acceptor and Sentinel at any time.
However, while a switch from Sentinel to Acceptor has no preconditions, for a switch from Acceptor to Sentinel to be possible, <em>all</em> of the following conditions MUST hold:<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.1-3">
<li id="section-5.1-3.1">LORS is "UP";<a href="#section-5.1-3.1" class="pilcrow">¶</a>
</li>
          <li id="section-5.1-3.2">saturated(PositiveCFRC) is FALSE;<a href="#section-5.1-3.2" class="pilcrow">¶</a>
</li>
          <li id="section-5.1-3.3">a neighbor entry for the DODAG root is present in RPL's DODAG parent set;<a href="#section-5.1-3.3" class="pilcrow">¶</a>
</li>
          <li id="section-5.1-3.4">the neighbor is considered reachable via its link-local IPv6 address.<a href="#section-5.1-3.4" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-5.1-4">A role change also REQUIRES appropriate updates to LORS and CFRCs, so that the node is properly accounted for.
More specifically, when changing its role from Acceptor to Sentinel, the node MUST add itself to its PositiveCFRC as follows.
It MUST generate a new CFRC value, selfc = self(), and MUST replace its PositiveCFRC, denoted oldpc, with newpc = merge(oldpc, selfc).
In contrast, the effects of a switch from Sentinel to Acceptor vary depending on the node's value of LORS before the switch:<a href="#section-5.1-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-5.1">for "GLOBALLY DOWN", the node MUST NOT modify its LORS, PositiveCFRC, and NegativeCFRC;<a href="#section-5.1-5.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.1-5.2">for "LOCALLY DOWN", the node MUST set its LORS to "UP" but MUST NOT modify its PositiveCFRC and NegativeCFRC;<a href="#section-5.1-5.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.1-5.3">for "UP" and "SUSPECTED DOWN", the node MUST set its LORS to "UP", MUST NOT modify it PositiveCFRC, but MUST add itself to NegativeCFRC, that is, replace its NegativeCFRC, denoted oldnc, with newnc = merge(oldnc, selfc), where selfc is the counter generated with self() when the node last added itself to its PositiveCFRC.<a href="#section-5.1-5.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="rnfd_behavior_detection">
<section id="section-5.2">
        <h3 id="name-detecting-and-verifying-pro">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-detecting-and-verifying-pro" class="section-name selfRef">Detecting and Verifying Problems with the DODAG Root</a>
        </h3>
<p id="section-5.2-1">Only nodes that are Sentinels take active part in detecting crashes of the DODAG Root; Acceptors just disseminate their observations, reflected in the CFRCs.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">The DODAG root monitoring SHOULD be based on both internal inputs, notably the values of CFRCs and LORS, and external inputs, such as triggers from RPL and other protocols.
External input monitoring SHOULD be performed preferably in a reactive fashion, also independently of RPL, and at both data plane and control plane.
In particular, it is RECOMMENDED that RNFD be directly notified of events relevant to the routing adjacency maintenance mechanisms on which RPL relies, such as Layer 2 triggers <span>[<a href="#RFC5184" class="xref">RFC5184</a>]</span> or the Neighbor Unreachability Detection <span>[<a href="#RFC4861" class="xref">RFC4861</a>]</span> mechanism.
Only events concerning the DODAG root need be monitored to this end.
For example, RNFD can conclude that there may be problems with the DODAG root if it observes a lack of multiple consecutive L2 acknowledgments for packets transmitted by the node via the link to the DODAG root.
Internally, in turn, it is RECOMMENDED that RNFD take action whenever there is a change to its local CFRCs, so that a node can have a chance to participate in detecting potential problems even when normally it would not exchange packets over the link with the DODAG root during some period.
In particular, RNFD SHOULD conclude that there may be problems with the DODAG root, when the fraction value(NegativeCFRC)/value(PositiveCFRC) has grown by at least RNFD_SUSPICION_GROWTH_THRESHOLD since the node last set its LORS to "UP".<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<p id="section-5.2-3">Whenever having its LORS set to "UP" RNFD concludes--based on either external or internal inputs--that there may be problems with the link with the DODAG root, it MUST set its LORS to either "SUSPECTED DOWN" or, as an optimization, to "LOCALLY DOWN".<a href="#section-5.2-3" class="pilcrow">¶</a></p>
<p id="section-5.2-4">The "SUSPECTED DOWN" value of LORS is temporary: its aim is to give RNFD an additional opportunity to verify whether the link with the DODAG root is indeed down.
Depending on the outcome of such verification, RNFD MUST set its LORS to either "UP", if the link has been confirmed not to be down, or "LOCALLY DOWN", otherwise.
The verification can be performed, for example, by transmitting RPL DIS or ICMPv6 Echo Request messages to the DODAG root's link-local IPv6 address and expecting replies confirming that the root is up and reachable through the link.
Care SHOULD be taken not to overload the DODAG root with traffic due to simultaneous probes, for instance, random backoffs can be employed to this end.
It is RECOMMENDED that the "SUSPECTED DOWN" value of LORS is attained and verification takes place if RNFD's conclusion on the state of the DODAG root is based only on indirect observations, for example, the aforementioned growth of the CFRC values.
In contrast, for direct observations, such as missing L2 acknowledgments, the verification MAY be skipped, with the node's LORS effectively changing from "UP" directly to "LOCALLY DOWN".<a href="#section-5.2-4" class="pilcrow">¶</a></p>
<p id="section-5.2-5">For consistency with RPL, when detecting potential problems with the DODAG root, RNFD also MUST make use of RPL's independent knowledge.
More specifically, a node MUST switch its LORS from "UP" or "SUSPECTED DOWN" directly to "LOCALLY DOWN" if a neighbor entry for the DODAG root is removed from RPL's DODAG parent set or the neighbor ceases to be considered reachable via its link-local IPv6 address.<a href="#section-5.2-5" class="pilcrow">¶</a></p>
<p id="section-5.2-6">Finally, while having its LORS already equal to "LOCALLY DOWN", a node may make an observation confirming that its link with the DODAG root is actually up.
In such a case, it SHOULD set its LORS back to "UP" but MUST NOT do this before the previous conditions 2-4 necessary for a node to change its role from Acceptor to Sentinel all hold.<a href="#section-5.2-6" class="pilcrow">¶</a></p>
<p id="section-5.2-7">To appropriately account for the node's observations on the state of the DODAG root, the aforementioned LORS transitions are accompanied by changes to the node's local CFRCs as follows.
Changes between "UP" and "SUSPECTED DOWN" do not affect any of the two CFRCs.
During a switch from "UP" or "SUSPECTED DOWN" to "LOCALLY DOWN", in turn, the node MUST add itself to its NegativeCFRC, as explained previously.
By symmetry, a transition from "LOCALLY DOWN" to "UP" REQUIRES the node to add itself to its PositiveCFRC, again, as explained previously.<a href="#section-5.2-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="rnfd_behavior_consensus">
<section id="section-5.3">
        <h3 id="name-disseminating-observations-">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-disseminating-observations-" class="section-name selfRef">Disseminating Observations and Reaching Agreement</a>
        </h3>
<p id="section-5.3-1">Nodes disseminate their observations by exchanging CFRCs in the RNFD Options embedded in link-local RPL control messages, notably DIOs and DISs.
When processing such a received option, a node--acting as Sentinel or Acceptor--MUST update its PositiveCFRC and NegativeCFRC to respectively newpc = merge(oldpc, recvpc) and newnc = merge(oldnc, recvnc), where oldpc and oldnc are the values of the node's PositiveCFRC and NegativeCFRC before the update, while recvpc and recvnc are the received values of option fields PosCFRC and NegCFRC, respectively.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">In effect, the node's value of fraction value(NegativeCFRC)/value(PositiveCFRC) may change.
If the fraction reaches at least RNFD_CONSENSUS_THRESHOLD (with value(PositiveCFRC) being greater than zero), then the node consents on the DODAG root being down.
Accordingly, it MUST change its LORS to "GLOBALLY DOWN" and set its PositiveCFRC and NegativeCFRC both to infinity().<a href="#section-5.3-2" class="pilcrow">¶</a></p>
<p id="section-5.3-3">The "GLOBALLY DOWN" value of LORS is terminal: the node MUST NOT change it and MUST NOT modify its CFRCs until it joins a new DODAG Version.
With this value of LORS, RNFD at the node MUST also prevent RPL from having any DODAG parent and advertising any Rank other than INFINITE_RANK.<a href="#section-5.3-3" class="pilcrow">¶</a></p>
<p id="section-5.3-4">Since the RNFD Option is embedded, among others, in RPL DIO control messages, updates to a node's CFRCs may affect the sending schedule of these messages, which is driven by the DIO Trickle timer <span>[<a href="#RFC6206" class="xref">RFC6206</a>]</span>.
It is RECOMMENDED to use for RNFD a dedicated Trickle timer, different from RPL's DIO Trickle timer.
In such a setting, whenever RNFD's timer fires and no DIO message containing the RNFD Option has been sent to the link-local all-RPL-nodes multicast IPv6 address since the previous firing, the node sends a DIO message containing the RNFD Option to the address.
In contrast, in the absence of a dedicated Trickle timer for RNFD, an implementation SHOULD ensure that the RNFD Option is present in multicast DIO messages sufficiently often to quickly propagate changes to the node's CFRCs.
In either case, a node MUST reset its Trickle timer when it changes its LORS to "GLOBALLY DOWN", so that information about the detected crash of the DODAG root is disseminated in the DODAG fast.
Likewise, a node SHOULD reset its Trickle timer when any of its local CFRCs changes significantly.<a href="#section-5.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="rnfd_behavior_root">
<section id="section-5.4">
        <h3 id="name-dodag-roots-behavior">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-dodag-roots-behavior" class="section-name selfRef">DODAG Root's Behavior</a>
        </h3>
<p id="section-5.4-1">The DODAG root node MUST assume the role of Acceptor in RNFD and MUST NOT ever switch this role.
It MUST also monitor its LORS and local CFRCs, so that it can react to various events.<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<p id="section-5.4-2">To start with, the DODAG root MUST generate a new DODAG Version, thereby restarting the protocol, if it changes its LORS to "GLOBALLY DOWN", which may happen when the root has restarted after a crash or the nodes have falsely detected its crash.
It MAY also generate a new DODAG Version if fraction value(NegativeCFRC)/value(PositiveCFRC) approaches RNFD_CONSENSUS_THRESHOLD, so as to avoid potential interruptions to routing.<a href="#section-5.4-2" class="pilcrow">¶</a></p>
<p id="section-5.4-3">Furthermore, the DODAG root SHOULD either generate a new DODAG Version or increase the bit length of its CFRCs if saturated(PositiveCFRC) becomes TRUE.
This is a self-regulation mechanism that helps adjust the CFRCs to a potentially large number of Sentinels (see <a href="#mgmnt_roles_and_cfrc_lens" class="xref">Section 6.1</a>).<a href="#section-5.4-3" class="pilcrow">¶</a></p>
<p id="section-5.4-4">In general, issuing a new DODAG Version effectively restarts RNFD.
The DODAG root MAY thus perform this operation also in other situations.<a href="#section-5.4-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="rnfd_behavior_deactivation">
<section id="section-5.5">
        <h3 id="name-activating-and-deactivating">
<a href="#section-5.5" class="section-number selfRef">5.5. </a><a href="#name-activating-and-deactivating" class="section-name selfRef">Activating and Deactivating the Protocol on Demand</a>
        </h3>
<p id="section-5.5-1">RNFD CAN be activated and deactivated on demand, once per DODAG Version.
The particular policies for activating and deactivating the protocol are outside the scope of this document.
However, the activation and deactivation SHOULD be done at the DODAG root node; other nodes MUST comply.<a href="#section-5.5-1" class="pilcrow">¶</a></p>
<p id="section-5.5-2">More specifically, when a non-root node joins a DODAG Version, RNFD at the node is initially inactive.
The node MUST NOT activate the protocol unless it receives for this DODAG Version a valid RNFD Option containing some CFRCs, that is, having its Option Length field positive.
In particular, if the option accompanies the message that causes the node to join the DODAG Version, the protocol SHOULD be active from the moment of the joining.
RNFD then remains active at the node until it is explicitly deactivated or the node joins a new DODAG Version.
An explicit deactivation MUST take place when the node receives an RNFD Option for the DODAG Version with no CFRCs, that is, having its Option Length field equal to zero.
When explicitly deactivated, RNFD MUST NOT be reactivated unless the node joins a new DODAG Version.
In particular, when the first RNFD Option received by the node has its Option Length field equal to zero, the protocol MUST remain deactivated for the entire time the node belongs to the current DODAG Version.<a href="#section-5.5-2" class="pilcrow">¶</a></p>
<p id="section-5.5-3">When RNFD at a node is initially inactive for a DODAG Version, the node MUST NOT attach any RNFD Option to the messages it sends (in particular, because it may not know the desired CFRC length--see <a href="#rnfd_behavior_cfrc_size" class="xref">Section 5.6</a>).
When the protocol has been explicitly deactivated, the node MAY also decide not to attach the option to its outgoing messages.
However, it is RECOMMENDED that it sends sufficiently many messages with the option to the link-local all-RPL-nodes multicast IPv6 address to allow its neighbors to learn that RNFD has been deactivated in the current DODAG version.
In particular, it MAY reset its Trickle timer to this end but also MAY use some reactive mechanisms, for example, replying with a unicast DIO or DIS containing the RNFD Option with no CFRCs to a message from a neighbor that contains the option with some CFRCs, as such a neighbor appears not to have learned about the deactivation of RNFD.<a href="#section-5.5-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="rnfd_behavior_cfrc_size">
<section id="section-5.6">
        <h3 id="name-processing-cfrcs-of-incompa">
<a href="#section-5.6" class="section-number selfRef">5.6. </a><a href="#name-processing-cfrcs-of-incompa" class="section-name selfRef">Processing CFRCs of Incompatible Lengths</a>
        </h3>
<p id="section-5.6-1">The merge() and compare() operations on CFRCs require both arguments to be compatible, that is, to have the same bit length.
However, the processing rules for the RNFD Option (see <a href="#msg_format" class="xref">Section 4.2</a>) do not necessitate this.
This fact is made use of not only in the mechanisms for activating and deactivating the protocol (see <a href="#rnfd_behavior_deactivation" class="xref">Section 5.5</a>), but also in mechanisms for dynamic adjustments of CFRCs, which aim to enable deployment-specific policies (see <a href="#mgmnt_roles_and_cfrc_lens" class="xref">Section 6.1</a>).
A node thus MUST be prepared to receive the RNFD Option with fields PosCFRC and NegCFRC of a different bit length than the node's own PositiveCFRC and NegativeCFRC.
Assuming that it has RNFD active and that fields PosCFRC and NegCFRC in the option have a positive length, the node MUST react as follows.<a href="#section-5.6-1" class="pilcrow">¶</a></p>
<p id="section-5.6-2">If the bit length of fields PosCFRC and NegCFRC is the same as that of the node's local PositiveCFRC and NegativeCFRC, then the node MUST perform the merges, as detailed previously (see <a href="#rnfd_behavior_consensus" class="xref">Section 5.3</a>).<a href="#section-5.6-2" class="pilcrow">¶</a></p>
<p id="section-5.6-3">If the bit length of fields PosCFRC and NegCFRC is smaller than that of the node's local PositiveCFRC and NegativeCFRC, then the node MUST ignore the option and MAY reset its Trickle timer.<a href="#section-5.6-3" class="pilcrow">¶</a></p>
<p id="section-5.6-4">If the bit length of fields PosCFRC and NegCFRC is greater than that of the node's local PositiveCFRC and NegativeCFRC, then the node MUST extend the bit length of its local CFRCs to be equal to that in the option and set the CFRCs as follows:<a href="#section-5.6-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.6-5.1">If the node's LORS is "GLOBALLY DOWN", then both its local CFRCs MUST be set to infinity().<a href="#section-5.6-5.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.6-5.2">Otherwise, they both MUST be set to zero(), and the node MUST account for itself in so initialized CFRCs. More specifically, if the node is Sentinel, then it MUST add itself to its PositiveCFRC, as detailed previously. In addition, if its LORS is "LOCALLY DOWN", then it MUST also add itself to its NegativeCFRC, again, as explained previously. Finally, the node MUST perform merges of its local CFRCs and the ones received in the option (see <a href="#rnfd_behavior_consensus" class="xref">Section 5.3</a>) and MAY reset its Trickle timer.<a href="#section-5.6-5.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.6-6">In contrast, if the node is unable to extend its local CFRCs, for example, because it lacks resources, then it MUST stop participating in RNFD, that is, until it joins a new DODAG Version, it MUST NOT send the RNFD Option and MUST ignore this option in received messages.<a href="#section-5.6-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="summary-of-rnfds-interactions-with-rpl">
<section id="section-5.7">
        <h3 id="name-summary-of-rnfds-interactio">
<a href="#section-5.7" class="section-number selfRef">5.7. </a><a href="#name-summary-of-rnfds-interactio" class="section-name selfRef">Summary of RNFD's Interactions with RPL</a>
        </h3>
<p id="section-5.7-1">In summary, RNFD interacts with RPL in the following manner:<a href="#section-5.7-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.7-2.1">While having its LORS equal to "GLOBALLY DOWN", RNFD prevents RPL from routing packets and advertising upward routes in the corresponding DODAG (see <a href="#rnfd_behavior_consensus" class="xref">Section 5.3</a>).<a href="#section-5.7-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.7-2.2">In some scenarios, RNFD triggers RPL to issue a new DODAG Version (see <a href="#rnfd_behavior_root" class="xref">Section 5.4</a>).<a href="#section-5.7-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.7-2.3">Depending on the implementation, RNFD may cause RPL's DIO Trickle timer resets (see <a href="#rnfd_behavior_consensus" class="xref">Section 5.3</a>, <a href="#rnfd_behavior_deactivation" class="xref">Section 5.5</a>, and <a href="#rnfd_behavior_cfrc_size" class="xref">Section 5.6</a>).<a href="#section-5.7-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.7-2.4">RNFD monitors events relevant to routing adjacency maintenance as well as those affecting RPL's DODAG parent set (see <a href="#rnfd_behavior_roles" class="xref">Section 5.1</a> and <a href="#rnfd_behavior_detection" class="xref">Section 5.2</a>).<a href="#section-5.7-2.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.7-2.5">Using RNFD entails embedding the RNFD Option into link-local RPL control messages (see <a href="#msg_format" class="xref">Section 4.2</a>).<a href="#section-5.7-2.5" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="rnfd_behavior_constants">
<section id="section-5.8">
        <h3 id="name-summary-of-rnfds-constants">
<a href="#section-5.8" class="section-number selfRef">5.8. </a><a href="#name-summary-of-rnfds-constants" class="section-name selfRef">Summary of RNFD's Constants</a>
        </h3>
<p id="section-5.8-1">The following is a summary of RNFD's constants:<a href="#section-5.8-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.8-2">
          <dt id="section-5.8-2.1">RNFD_SUSPICION_GROWTH_THRESHOLD</dt>
          <dd style="margin-left: 1.5em" id="section-5.8-2.2">
  A threshold concerning the value of fraction value(NegativeCFRC)/value(PositiveCFRC). If the value at a Sentinel node grows at least by this threshold since the time the node's LORS was last set to "UP", then the node's LORS is set to "SUSPECTED DOWN" or "LOCALLY DOWN", which implies that the node suspects or assumes a crash of the DODAG root (see <a href="#rnfd_behavior_detection" class="xref">Section 5.2</a>). The default value of the threshold is 0.12. The higher the value the longer the detection period but the lower risk of increased traffic due suspicion verification.<a href="#section-5.8-2.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.8-2.3">RNFD_CONSENSUS_THRESHOLD</dt>
          <dd style="margin-left: 1.5em" id="section-5.8-2.4">
  A threshold concerning the value of fraction value(NegativeCFRC)/value(PositiveCFRC). If the value at a Sentinel or Acceptor node reaches the threshold, then the node's LORS is set to "GLOBALLY DOWN", which implies that consensus has been reached on the DODAG root node being down  (see <a href="#rnfd_behavior_consensus" class="xref">Section 5.3</a>). The default value of the threshold is 0.51. The higher the value the longer the detection period but the lower the risk of false positives.<a href="#section-5.8-2.4" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-5.8-3">The means of configuring the constants at individual nodes are outside the scope of this document.<a href="#section-5.8-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="mgmnt">
<section id="section-6">
      <h2 id="name-manageability-consideration">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-manageability-consideration" class="section-name selfRef">Manageability Considerations</a>
      </h2>
<p id="section-6-1">RNFD is largely self-managed, with the exception of protocol activation and deactivation, as well as node role assignment and the related CFRC size adjustment, for which only the aforementioned mechanisms are defined, so as to enable adopting deployment-specific policies.
This section outlines some of the possible policies.<a href="#section-6-1" class="pilcrow">¶</a></p>
<div id="mgmnt_roles_and_cfrc_lens">
<section id="section-6.1">
        <h3 id="name-role-assignment-and-cfrc-si">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-role-assignment-and-cfrc-si" class="section-name selfRef">Role Assignment and CFRC Size Adjustment</a>
        </h3>
<p id="section-6.1-1">One approach to node role and CFRC size selection is to manually designate specific nodes as Sentinels in RNFD, assuming that they will have chances to satisfy the necessary conditions for attaining this role (see <a href="#rnfd_behavior_roles" class="xref">Section 5.1</a>), and fixing the CFRC bit length to accommodate these nodes.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">Another approach is to automate the selection process: in principle, any node satisfying the necessary conditions for becoming Sentinel (see <a href="#rnfd_behavior_roles" class="xref">Section 5.1</a>) can attain this role.
However, in networks where the DODAG root node has many neighbors, this approach may lead to saturated(PositiveCFRC) quickly becoming TRUE, which--without additional measures--may degrade RNFD's performance.
This issue can be handled with a probabilistic solution: if PositiveCFRC becomes saturated with little or no increase in NegativeCFRC, then a new DODAG Version can be issued and a node satisfying the necessary conditions can become Sentinel in this version only with probability 1/2.
This process can be continued with the probability being halved in each new DODAG Version until PositiveCFRC is no longer quickly saturated.
Another solution is to increase, potentially multiple times the bit length of the CFRCs by the DODAG root if PositiveCFRC becomes saturated with little or no growth in NegativeCFRC, which does not require issuing a new DODAG Version but lengthens the RNFD Option.
In this way, again, a sufficient bit length can be dynamically discovered or the root can conclude that a given bit length is excessive for (some) nodes and resort to the previous solution.
Increasing the bit length can be done, for instance, by doubling it, respecting the condition that it has to be a prime number (see <a href="#msg_format" class="xref">Section 4.2</a>).<a href="#section-6.1-2" class="pilcrow">¶</a></p>
<p id="section-6.1-3">In either of the solutions, Sentinel nodes SHOULD preferably be stable themselves and have stable links to the DODAG root.
Otherwise, they may often exhibit LORS transitions between "UP" and "LOCALLY DOWN" or switches between Acceptor and Sentinel roles, which gradually saturates CFRCs.
Although as a mitigation the number of such transitions and switches per node MAY be limited, having Sentinels stable SHOULD be preferred.<a href="#section-6.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mgmnt_virt_dodag_roots">
<section id="section-6.2">
        <h3 id="name-virtual-dodag-roots">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-virtual-dodag-roots" class="section-name selfRef">Virtual DODAG Roots</a>
        </h3>
<p id="section-6.2-1">RPL allows a DODAG to have a so-called virtual root, that is, a collection of nodes coordinating to act as a single root of the DODAG.
The details of the coordination process are left open in the specification <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span> but, from RNFD's perspective, two possible realizations are worth consideration:<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.2-2.1">Just a single (primary) node of the nodes comprising the virtual root acts as the actual root of the DODAG. Only when this node fails, does another (backup) node take over. As a result, at any time, at most one of the nodes comprising the virtual root is the actual root.<a href="#section-6.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-2.2">More than one of the nodes comprising the virtual root act as actual roots of the DODAG, all advertising the same Rank in the DODAG. When some of the nodes fail, the other nodes may or may not react in any specific way. In other words, at any time, more than one node can be the actual root.<a href="#section-6.2-2.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-6.2-3">In the first realization, RNFD's operation is largely unaffected.
The necessary conditions for a node to become Sentinel (<a href="#rnfd_behavior_roles" class="xref">Section 5.1</a>) guarantee that only the current primary root node is monitored by the protocol.
This SHOULD be taken into account in the policies for node role assignment, CFRC size selection, and, possibly, the setting of the two thresholds (<a href="#rnfd_behavior_constants" class="xref">Section 5.8</a>).
Moreover, when a new primary has been elected, to avoid polluting CFRCs with observations on the previous primary, it is RECOMMENDED to issue a new DODAG Version, especially if the new primary has different neighbors compared to the old one.<a href="#section-6.2-3" class="pilcrow">¶</a></p>
<p id="section-6.2-4">In the second realization, the fact that the virtual root consists of multiple nodes is transparent to RNFD.
Therefore, employing RNFD is such a setting can be beneficial only if the nodes comprising the virtual root may suffer from correlated crashes, for instance, due to global power outages.<a href="#section-6.2-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="security">
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">RNFD is an extension to RPL and is thus both vulnerable to and benefits from the security issues and solutions described in <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span> and <span>[<a href="#RFC7416" class="xref">RFC7416</a>]</span>.
Its specification in this document does not introduce new traffic patterns or new messages, for which specific mitigation techniques would be required beyond what can already be adopted for RPL.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">In particular, RNFD depends on information exchanged in the RNFD Option.
If the contents of this option were compromised, then failure misdetection may occur.
One possibility is that the DODAG root may be falsely detected as crashed, which would result in an inability of the nodes to route packets, at least until a new DODAG Version is issued by the root.
Another possibility is that a crash of the DODAG root may not be detected by RNFD, in which case RPL would have to rely on its own mechanisms.
Moreover, compromising the contents of the RNFD Option may also lead to increased traffic due to DIO Trickle timer resets.
Consequently, RNFD deployments are RECOMMENDED to use RPL security mechanisms if there is a risk that control information might be modified or spoofed.<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">In this context, RNFD's two features are worth highlighting.
First, unless a DODAG root's all neighbors are compromised, a false positive can always be detected by the root based on its local CFRCs.
If the frequency of such false positives becomes problematic, RNFD can be disabled altogether, for instance, until the problem has been diagnosed.
This procedure can be largely automated at LBRs.
Second, some types of false negatives can also be detected this way.
Those that pass undetected, in turn, are likely not to have major negative consequences on RPL apart from the lack of improvement to its performance upon a DODAG root's crash, at least if RPL's other components are not attacked as well.<a href="#section-7-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-8-1">To represent the RNFD Option, IANA is requested to allocate the value TBD1 from the <a href="https://www.iana.org/assignments/rpl/rpl.xhtml#control-message-options">"RPL Control Message Options" sub-registry</a> of the "Routing Protocol for Low Power and Lossy Networks (RPL)" registry.<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgements">
<section id="section-9">
      <h2 id="name-acknowledgements">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-9-1">The authors would like to acknowledge Piotr Ciolkosz and Agnieszka Paszkowska.
Agnieszka contributed to deeper understanding and formally proving various aspects of RPL's behavior upon an LBR crash.
Piotr in turn developed a prototype implementation of RNFD dedicated for RPL to verify earlier performance claims.<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2"><em>TODO</em> More likely to follow.<a href="#section-9-2" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-10.1">
        <h3 id="name-normative-references">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6206">[RFC6206]</dt>
        <dd>
<span class="refAuthor">Levis, P.</span>, <span class="refAuthor">Clausen, T.</span>, <span class="refAuthor">Hui, J.</span>, <span class="refAuthor">Gnawali, O.</span>, and <span class="refAuthor">J. Ko</span>, <span class="refTitle">"The Trickle Algorithm"</span>, <span class="seriesInfo">RFC 6206</span>, <span class="seriesInfo">DOI 10.17487/RFC6206</span>, <time datetime="2011-03" class="refDate">March 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6206">https://www.rfc-editor.org/info/rfc6206</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6550">[RFC6550]</dt>
        <dd>
<span class="refAuthor">Winter, T., Ed.</span>, <span class="refAuthor">Thubert, P., Ed.</span>, <span class="refAuthor">Brandt, A.</span>, <span class="refAuthor">Hui, J.</span>, <span class="refAuthor">Kelsey, R.</span>, <span class="refAuthor">Levis, P.</span>, <span class="refAuthor">Pister, K.</span>, <span class="refAuthor">Struik, R.</span>, <span class="refAuthor">Vasseur, JP.</span>, and <span class="refAuthor">R. Alexander</span>, <span class="refTitle">"RPL: IPv6 Routing Protocol for Low-Power and Lossy Networks"</span>, <span class="seriesInfo">RFC 6550</span>, <span class="seriesInfo">DOI 10.17487/RFC6550</span>, <time datetime="2012-03" class="refDate">March 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6550">https://www.rfc-editor.org/info/rfc6550</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6553">[RFC6553]</dt>
        <dd>
<span class="refAuthor">Hui, J.</span> and <span class="refAuthor">JP. Vasseur</span>, <span class="refTitle">"The Routing Protocol for Low-Power and Lossy Networks (RPL) Option for Carrying RPL Information in Data-Plane Datagrams"</span>, <span class="seriesInfo">RFC 6553</span>, <span class="seriesInfo">DOI 10.17487/RFC6553</span>, <time datetime="2012-03" class="refDate">March 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6553">https://www.rfc-editor.org/info/rfc6553</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6554">[RFC6554]</dt>
        <dd>
<span class="refAuthor">Hui, J.</span>, <span class="refAuthor">Vasseur, JP.</span>, <span class="refAuthor">Culler, D.</span>, and <span class="refAuthor">V. Manral</span>, <span class="refTitle">"An IPv6 Routing Header for Source Routes with the Routing Protocol for Low-Power and Lossy Networks (RPL)"</span>, <span class="seriesInfo">RFC 6554</span>, <span class="seriesInfo">DOI 10.17487/RFC6554</span>, <time datetime="2012-03" class="refDate">March 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6554">https://www.rfc-editor.org/info/rfc6554</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-10.2">
        <h3 id="name-informative-references">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="Ciolkosz19">[Ciolkosz19]</dt>
        <dd>
<span class="refAuthor">Ciolkosz, P.</span>, <span class="refTitle">"Integration of the RNFD Algorithm for Border Router Failure Detection with the RPL Standard for Routing IPv6 Packets"</span>, <span class="seriesInfo">Master's Thesis, University of Warsaw</span>, <time datetime="2019" class="refDate">2019</time>. </dd>
<dd class="break"></dd>
<dt id="Iwanicki16">[Iwanicki16]</dt>
        <dd>
<span class="refAuthor">Iwanicki, K.</span>, <span class="refTitle">"RNFD: Routing-layer detection of DODAG (root) node failures in low-power wireless networks"</span>, <span class="seriesInfo">In IPSN 2016: Proceedings of the 15th ACM/IEEE International Conference on Information Processing in Sensor Networks, IEEE, pp. 1--12</span>, <span class="seriesInfo">DOI 10.1109/IPSN.2016.7460720</span>, <time datetime="2016" class="refDate">2016</time>, <span>&lt;<a href="https://doi.org/10.1109/IPSN.2016.7460720">https://doi.org/10.1109/IPSN.2016.7460720</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Paszkowska19">[Paszkowska19]</dt>
        <dd>
<span class="refAuthor">Paszkowska, A.</span> and <span class="refAuthor">K. Iwanicki</span>, <span class="refTitle">"Failure Handling in RPL Implementations: An Experimental Qualitative Study"</span>, <span class="seriesInfo">In Mission-Oriented Sensor Networks and Systems: Art and Science (Habib M. Ammari ed.), Springer International Publishing,  pp. 49--95</span>, <span class="seriesInfo">DOI 10.1007/978-3-319-91146-5_3</span>, <time datetime="2019" class="refDate">2019</time>, <span>&lt;<a href="https://doi.org/10.1007/978-3-319-91146-5_3">https://doi.org/10.1007/978-3-319-91146-5_3</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4861">[RFC4861]</dt>
        <dd>
<span class="refAuthor">Narten, T.</span>, <span class="refAuthor">Nordmark, E.</span>, <span class="refAuthor">Simpson, W.</span>, and <span class="refAuthor">H. Soliman</span>, <span class="refTitle">"Neighbor Discovery for IP version 6 (IPv6)"</span>, <span class="seriesInfo">RFC 4861</span>, <span class="seriesInfo">DOI 10.17487/RFC4861</span>, <time datetime="2007-09" class="refDate">September 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4861">https://www.rfc-editor.org/info/rfc4861</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5184">[RFC5184]</dt>
        <dd>
<span class="refAuthor">Teraoka, F.</span>, <span class="refAuthor">Gogo, K.</span>, <span class="refAuthor">Mitsuya, K.</span>, <span class="refAuthor">Shibui, R.</span>, and <span class="refAuthor">K. Mitani</span>, <span class="refTitle">"Unified Layer 2 (L2) Abstractions for Layer 3 (L3)-Driven Fast Handover"</span>, <span class="seriesInfo">RFC 5184</span>, <span class="seriesInfo">DOI 10.17487/RFC5184</span>, <time datetime="2008-05" class="refDate">May 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5184">https://www.rfc-editor.org/info/rfc5184</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6202">[RFC6202]</dt>
        <dd>
<span class="refAuthor">Loreto, S.</span>, <span class="refAuthor">Saint-Andre, P.</span>, <span class="refAuthor">Salsano, S.</span>, and <span class="refAuthor">G. Wilkins</span>, <span class="refTitle">"Known Issues and Best Practices for the Use of Long Polling and Streaming in Bidirectional HTTP"</span>, <span class="seriesInfo">RFC 6202</span>, <span class="seriesInfo">DOI 10.17487/RFC6202</span>, <time datetime="2011-04" class="refDate">April 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6202">https://www.rfc-editor.org/info/rfc6202</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7102">[RFC7102]</dt>
        <dd>
<span class="refAuthor">Vasseur, JP.</span>, <span class="refTitle">"Terms Used in Routing for Low-Power and Lossy Networks"</span>, <span class="seriesInfo">RFC 7102</span>, <span class="seriesInfo">DOI 10.17487/RFC7102</span>, <time datetime="2014-01" class="refDate">January 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7102">https://www.rfc-editor.org/info/rfc7102</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7228">[RFC7228]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span>, <span class="refAuthor">Ersue, M.</span>, and <span class="refAuthor">A. Keranen</span>, <span class="refTitle">"Terminology for Constrained-Node Networks"</span>, <span class="seriesInfo">RFC 7228</span>, <span class="seriesInfo">DOI 10.17487/RFC7228</span>, <time datetime="2014-05" class="refDate">May 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7228">https://www.rfc-editor.org/info/rfc7228</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7416">[RFC7416]</dt>
        <dd>
<span class="refAuthor">Tsao, T.</span>, <span class="refAuthor">Alexander, R.</span>, <span class="refAuthor">Dohler, M.</span>, <span class="refAuthor">Daza, V.</span>, <span class="refAuthor">Lozano, A.</span>, and <span class="refAuthor">M. Richardson, Ed.</span>, <span class="refTitle">"A Security Threat Analysis for the Routing Protocol for Low-Power and Lossy Networks (RPLs)"</span>, <span class="seriesInfo">RFC 7416</span>, <span class="seriesInfo">DOI 10.17487/RFC7416</span>, <time datetime="2015-01" class="refDate">January 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7416">https://www.rfc-editor.org/info/rfc7416</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Whang90">[Whang90]</dt>
      <dd>
<span class="refAuthor">Whang, K.-Y.</span>, <span class="refAuthor">Vander-Zanden, B.T.</span>, and <span class="refAuthor">H.M. Taylor</span>, <span class="refTitle">"A Linear-time Probabilistic Counting Algorithm for Database Applications"</span>, <span class="seriesInfo">In ACM Transactions on Database Systems</span>, <span class="seriesInfo">DOI 10.1145/78922.78925</span>, <time datetime="1990" class="refDate">1990</time>, <span>&lt;<a href="https://doi.org/10.1145/78922.78925">https://doi.org/10.1145/78922.78925</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Konrad Iwanicki</span></div>
<div dir="auto" class="left"><span class="org">University of Warsaw</span></div>
<div dir="auto" class="left"><span class="street-address">Banacha 2</span></div>
<div dir="auto" class="left">
<span class="postal-code">02-097</span> <span class="locality">Warszawa</span>
</div>
<div dir="auto" class="left"><span class="country-name">Poland</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+48%2022%2055%2044%20428" class="tel">+48 22 55 44 428</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:iwanicki@mimuw.edu.pl" class="email">iwanicki@mimuw.edu.pl</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
