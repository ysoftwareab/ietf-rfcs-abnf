INTERNET-DRAFT                 SONET LINEAR APS MIB           J. Johnson
Expires December 28, 1999                                     J. Kuhfeld
                                                        Redback Networks
                                                           June 28, 1999



                     Definitions of Managed Objects
                   for SONET Linear APS architectures

                   draft-kuhfeld-sonet-aps-mib-01.txt



Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


Copyright Notice

   Copyright (C) The Internet Society 1999.  All Rights Reserved.


Abstract

   This memo defines a portion of the Management Information Base (MIB)
   for use with network management protocols in TCP/IP based internets.
   In particular it defines objects for managing networks using SONET
   linear Automatic Protection Switching (APS) architectures.




Expires December 28, 1999                                       [Page 1]

INTERNET-DRAFT                                                 June 1999


   This memo specifies a MIB module in a manner that is both compliant
   to the SNMPv2 SMI, and semantically identical to the peer SNMPv1
   definitions.


1. Introduction

   This memo defines a portion of the Management Information Base (MIB)
   used for managing SONET linear Automatic Protection Switching (APS)
   architectures. Two linear APS architectures are supported, the 1+1
   architecture and the 1:n architecture.


1.1 Change Log

   This section lists changes made in the Internet Draft revisions of
   this document.

   June 28, 1999

   The following changes were made for the version of this document
   dated June 28, 1999.

   References to Protection Switch Byte Failure (PSBF) conditions were
   moved from the channel table to the group status table. Specifically,
   the psbf failure bit was moved from apsChanStatus to
   apsStatusCurrent, apsChanPSBFs was deleted and replaced with
   apsStatusPSBFs and the NOTIFICATION-TYPE apsTrapPSBF was created.


2. The SNMP Management Framework

   The SNMP Management Framework presently consists of five major
   components:

   An overall architecture, described in RFC 2571 [1].

   Mechanisms for describing and naming objects and events for the
   purpose of management. The first version of this Structure of
   Management Information (SMI) is called SMIv1 and described in RFC
   1155 [2], RFC 1212 [3] and RFC 1215 [4]. The second version, called
   SMIv2, is described in RFC 2578 [5], RFC 2579 [6] and RFC 2580 [7].

   Message protocols for transferring management information. The first
   version of the SNMP message protocol is called SNMPv1 and described
   in RFC 1157 [8]. A second version of the SNMP message protocol, which
   is not an Internet standards track protocol, is called SNMPv2c and
   described in RFC 1901 [9] and RFC 1906 [10]. The third version of the



Expires December 28, 1999                                       [Page 2]

INTERNET-DRAFT                                                 June 1999


   message protocol is called SNMPv3 and described in RFC 1906 [10], RFC
   2572 [11] and RFC 2574 [12].

   Protocol operations for accessing management information. The first
   set of protocol operations and associated PDU formats is described in
   RFC 1157 [8]. A second set of protocol operations and associated PDU
   formats is described in RFC 1905 [13].

   A set of fundamental applications described in RFC 2573 [14] and the
   view-based access control mechanism described in RFC 2575 [15].

   A more detailed introduction to the current SNMP Management Framework
   can be found in RFC 2570 [16].

   Managed objects are accessed via a virtual information store, termed
   the Management Information Base or MIB.  Objects in the MIB are
   defined using the mechanisms defined in the SMI.

   This memo specifies a MIB module that is compliant to the SMIv2. A
   MIB conforming to the SMIv1 can be produced through the appropriate
   translations. The resulting translated MIB must be semantically
   equivalent, except where objects or events are omitted because no
   translation is possible (use of Counter64). Some machine readable
   information in SMIv2 will be converted into textual descriptions in
   SMIv1 during the translation process. However, this loss of machine
   readable information is not considered to change the semantics of the
   MIB.


3. Object Definitions

   Managed objects are accessed via a virtual information store, termed
   the Management Information Base or MIB.  Objects in the MIB are
   defined using the subset of Abstract Syntax Notation One (ASN.1)
   defined in the SMI.  In particular, each object type is named by an
   OBJECT IDENTIFIER, an administratively assigned name.  The object
   type together with an object instance serves to uniquely identify a
   specific instantiation of the object.  For human convenience, we
   often use a textual string, termed the descriptor, to refer to the
   object type.


4. Overview

   These objects are used to control and manage SONET linear APS
   architectures.

   The mib contains two scalars, containing counts of APS groups and



Expires December 28, 1999                                       [Page 3]

INTERNET-DRAFT                                                 June 1999


   SONET LTEs respectively and four tables: the APS Config Table, the
   APS Command Table, the APS Status Table and the APS Channel Table.
   The APS Config Table supports addition, modification and deletion of
   entries representing linear APS groups. The APS Command Table
   provides linear APS commands that support protection switching and
   the ability to modify APS operation.  The APS Status Table provides
   statistics and information about the current APS group state. The APS
   Channel Table provides the ability to add and delete SONET LTE
   channels from APS groups.


5. Definitions

   RBN-APS-MIB DEFINITIONS ::= BEGIN

   IMPORTS
        MODULE-IDENTITY, TimeTicks,
        OBJECT-IDENTITY
             FROM SNMPv2-SMI
        rbnMgmt
             FROM RBN-SMI;

   rbnApsMIB MODULE-IDENTITY
       LAST-UPDATED    "9905072300Z"
       ORGANIZATION    "RedBack Networks, Inc."
       CONTACT-INFO
           " RedBack Networks, Inc.

                   Postal:  1389 Moffett Park Drive
                   Sunnyvale, CA  94089-1134
                                         USA

                   Phone:   +1 408 548 3500
                   Fax: +1 408 548 3599

                   E-mail:  mib-info@RedBackNetworks.com"
       DESCRIPTION
           "This management information module supports the configuration and
            management of SONET linear APS groups.  The definitions and
            descriptions used in this mib have been derived from
            GR-253-CORE Revision 2, January 1999, section 5.3.

            The mib contains four tables.

            The apsConfigTable supports addition, modification and deletion of
            entries representing linear APS groups.  Ring APS groups are not
            currently supported by this MIB.  Entries are indexed by a text
            group name. Each entry contains parameters that specify the



Expires December 28, 1999                                       [Page 4]

INTERNET-DRAFT                                                 June 1999


            configuration of a particular linear APS group.

            The apsCommandTable provides linear APS commands that support
            protection switching and the ability to modify APS operation.
            Commands may only be entered if the corresponding
            apsConfigRowStatus instance is set to active.

            The apsStatusTable provides statistics and information about
            the current APS group state.

            The apsChanTable provides the ability to add and delete
            SONET LTE channels from APS groups. Additionally
            statistics and current state information are provided
            at the APS channel level. The table contains entries for
            each SONET LTE interface available on the system. The
            field apsChanGroupName is initially set to a string of
            size zero indicating that the SONET LTE is not part of
            an APS group. Fields that are associated with APS configuration
            may be modified. An apsChanEntry instance may not be added or
            deleted through rbnApsMIB mib access operations. However, an
            apsChanEntry may be added or deleted through other
            system mechanisms, such as hot swap.

            An APS group is created and configured with the following sequence
            of events:

            CHANNEL CONFIGURATION

            Set the apsChanGroupName in an apsChanEntry to a
            user-friendly text string. The string must not be equal to
            the apsConfigName of an existing apsConfigEntry with
            apsConfigRowStatus set to active, since a channel cannot be
            added to an active group. The string may be set equal
            to the apsConfigName of a row which is currently not
            set to active, or it may be set to a string which does
            not currently exist in any instance of apsConfigName.
            A channel number is entered in apsChanNumber.
            A channel priority is entered in apsChanPriority, if
            the intended architecture is 1:n. apsChanPriority is
            ignored if the architecture is 1+1.

            This step is repeated for all apsChanEntry instances
            which are to be included in the APS group.

            ACTIVATING THE GROUP

            If the apsChanGroupName does not exist in an instance
            of apsConfigName, an apsGroupEntry is created with



Expires December 28, 1999                                       [Page 5]

INTERNET-DRAFT                                                 June 1999


            the apsChanGroupName value used as the index for the row.
            The apsConfigRowStatus value may be set to createAndGo.
            The apsGroupConfigEntry and apsChanEntry instances with
            matching name fields will be checked for consistency.
            If any errors in the channel numbers, architecture or
            configuration are uncovered the apsConfigRowStatus set
            will return inconsistentValue , otherwise noError is returned.

            If the apsChanGroupName value used in channel configuration
            exists in a previously created, inactive apsChanEntry instance,
            the apsConfigRowStatus value may be set to active.
            "

       REVISION      "9905072300Z"
       DESCRIPTION
           "Creation of the linear APS MIB."
           ::= { rbnMgmt 5 }


   rbnApsMIBNotifications OBJECT IDENTIFIER
        ::= { rbnApsMIB 0 }

   rbnApsMIBObjects OBJECT IDENTIFIER
        ::= { rbnApsMIB 1 }

   rbnApsMIBConformance OBJECT IDENTIFIER
        ::= { rbnApsMIB 2 }


   ApsK1K2 ::= TEXTUAL-CONVENTION
       STATUS current
       DESCRIPTION
       "This Textual Convention describes an object that stores
        a SONET K1 and K2 byte APS protocol field.

       K1 is located in the low order byte, K2 is located in
       the higher order second byte.

       Bits 1-4 of the K1 byte indicate a request.

       1111  Lockout of Protection
       1110  Forced Switch
       1101  SF - High Priority
       1100  SF - Low Priority
       1011  SD - High Priority
       1010  SD - Low Priority
       1001  not used
       1000  Manual Switch



Expires December 28, 1999                                       [Page 6]

INTERNET-DRAFT                                                 June 1999


       0111  not used
       0110  Wait-to-Restore
       0101  not used
       0100  Exercise
       0011  not used
       0010  Reverse Request
       0001  Do Not Revert
       0000  No Request

       Bits 5-8 of the K1 byte indicate the channel associated with the
       request defined in bits 1-4.

       0000 is the Null channel

       1-14 are working channels.
       15   is the extra traffic channel

       Bits 1-4 of the K2 byte indicate a channel. The channel is
       defined with the same syntax as K1 Bits 5-8.


       Bits 5 of the K2 byte indicates the
       architecture.

       0 if the architecture is 1+1
       1 if the architecture is 1:n

       Bits 6-8 of the K2 byte indicates the
       mode.

       000 - 011 are reserved for future use

       100  indicates the mode is unidirectional
       101  indicates the mode is bidirectional

       110  RDI-L

       111  AIS-L
       "
       SYNTAX Integer32

   --
   -- APS Configuration Group
   --
   -- This table supports the addition, configuration and deletion of APS
   -- groups.
   --




Expires December 28, 1999                                       [Page 7]

INTERNET-DRAFT                                                 June 1999


   apsConfig     OBJECT IDENTIFIER ::= { rbnApsMIBObjects 1 }

   apsConfigGroups OBJECT-TYPE
       SYNTAX      Counter32
       MAX-ACCESS  read-only
       STATUS      current
       DESCRIPTION
           "The count of APS groups."
       ::= { apsConfig 1 }


   apsConfigTable OBJECT-TYPE
       SYNTAX      SEQUENCE OF ApsConfigEntry
       MAX-ACCESS  not-accessible
       STATUS      current
       DESCRIPTION
           "This table lists the APS groups that have been configured
            on the system."
       ::= { apsConfig 2 }

   apsConfigEntry OBJECT-TYPE
       SYNTAX      ApsConfigEntry
       MAX-ACCESS  not-accessible
       STATUS      current
       DESCRIPTION
           "A conceptual row in the apsConfigTable."
       INDEX { IMPLIED apsConfigName }
       ::= { apsConfigTable  1 }

   ApsConfigEntry ::= SEQUENCE {
       apsConfigName                  DisplayString,
       apsConfigMode                  INTEGER,
       apsConfigSdBerThreshold        Integer32,
       apsConfigSfBerThreshold        Integer32,
       apsConfigWaitToRestore         Integer32,
       apsConfigRowStatus             RowStatus
   }


   apsConfigName OBJECT-TYPE
       SYNTAX      DisplayString (SIZE (1..32))
       MAX-ACCESS  not-accessible
       STATUS      current
       DESCRIPTION
           "A textual name for the APS group.
           "
       ::= { apsConfigEntry 1 }




Expires December 28, 1999                                       [Page 8]

INTERNET-DRAFT                                                 June 1999


   apsConfigMode OBJECT-TYPE
                 SYNTAX      BITS {
                                  onePlusOne(0),
                                  oneToN(1),
                                  revertive(2),
                                  bidirectional(3),
                                  extraTrafficAllowed(4)
                                  }
                 MAX-ACCESS  read-create
                 STATUS      current
                 DESCRIPTION
                 "The architecture and mode of the APS group.  The
                  values mean:

                  onePlusOne

                  The 1+1 architecture permanently bridges the working
                  line to the protection line.

                  oneToN

                  The 1:n architecture allows one protection channel to
                  protect up to n working channels. When a fault is detected
                  on one of the n working channels that channel is bridged
                  over the protection channel.

                  Note: onePlusOne and oneToN are mutually exclusive.

                  revertive

                  When the condition that caused a switch to the protection
                  line has been cleared the signal is switched back to the
                  working line. If this bit is clear it indicates a
                  non-revertive system which remains on the protection line
                  until another switch request is received.

                  bidirectional

                  The bi-directional mode provides protection in both
                  directions.

                  If this bit is clear it indicates  unidirectional mode which
                  provides protection in one direction. The default for 1:n is
                  bidirectional. The default for 1+1 is unidirectional.

                  extraTrafficAllowed

                  Extra traffic may be carried on the protection channel in



Expires December 28, 1999                                       [Page 9]

INTERNET-DRAFT                                                 June 1999


                  a 1:n architecture if this flag is set. It may be necessary
                  to disable this in order to interwork with other SONET
                  network elements that don't support extra traffic.

                  This object may not be modified if the associated
                  apsConfigRowStatus object is equal to active(1)."
       DEFVAL { '1'H }
       ::= { apsConfigEntry 2 }





   apsConfigSdBerThreshold OBJECT-TYPE
       SYNTAX      Integer32 (5..9)
       MAX-ACCESS  read-create
       STATUS      current
       DESCRIPTION
           "The Signal Degrade Bit Error Rate.

            The negated value of this number is used as the exponent of
            10 for computing the threshold value for the Bit Error Rate
            (BER). For example, a value of 5 indicates a BER threshold of
            10^-5.

           This object may not be modified if the associated
           apsConfigRowStatus object is equal to active(1)."
       DEFVAL { 5 }
       ::= { apsConfigEntry 3 }


   apsConfigSfBerThreshold OBJECT-TYPE
       SYNTAX      Integer32 (3..5)
       MAX-ACCESS  read-create
       STATUS      current
       DESCRIPTION
           "The Signal Failure Bit Error Rate.

            The negated value of this number is used as the exponent of
            10 for computing the threshold value for the Bit Error Rate
            (BER). For example, a value of 5 indicates a BER threshold of
            10^-5.

           This object may not be modified if the associated
           apsConfigRowStatus object is equal to active(1)."
       DEFVAL { 3 }
       ::= { apsConfigEntry 4 }




Expires December 28, 1999                                      [Page 10]

INTERNET-DRAFT                                                 June 1999


   apsConfigWaitToRestore OBJECT-TYPE
       SYNTAX      Integer32 (300..720)
       MAX-ACCESS  read-create
       STATUS      current
       DESCRIPTION
           "The Wait To Restore period in seconds.

            This field only applies if revertive switching is enabled,
            otherwise this value is ignored. After clearing of a
            condition that necessitated an automatic switch, the
            wait to restore period must elapse before reverting.
            This is intended to avoid rapid switch oscillations.

            This object may not be modified if the associated
            apsConfigRowStatus object is equal to active(1)."
       DEFVAL { 600 }
       ::= { apsConfigEntry 5 }


   apsConfigRowStatus OBJECT-TYPE
       SYNTAX      RowStatus
       MAX-ACCESS  read-create
       STATUS      current
       DESCRIPTION
           "The status of this APS group entry.

           An entry may not exist in the active state unless all
           objects in the entry have an appropriate value.

           If this object is set to destroy, all associated instances of
           apsChanGroupName will be set to a string of size 0 and all
           associated instances of apsChanNumber will be set to 0."
       ::= { apsConfigEntry 6 }

   apsCommandTable OBJECT-TYPE
       SYNTAX      SEQUENCE OF ApsCommandEntry
       MAX-ACCESS  not-accessible
       STATUS      current
       DESCRIPTION
           "This table allows commands to be sent to configured APS groups."
       ::= { rbnApsMIBObjects 2 }

   apsCommandEntry OBJECT-TYPE
       SYNTAX      ApsCommandEntry
       MAX-ACCESS  not-accessible
       STATUS      current
       DESCRIPTION
           "A conceptual row in the apsCommandTable."



Expires December 28, 1999                                      [Page 11]

INTERNET-DRAFT                                                 June 1999


       INDEX { IMPLIED apsConfigName}
       ::= { apsCommandTable  1 }

   ApsCommandEntry ::= SEQUENCE {
       apsCommandSwitch         Integer32,
       apsCommandControl        Integer32
   }

   apsCommandSwitch OBJECT-TYPE
       SYNTAX      Integer32
       MAX-ACCESS  read-write
       STATUS      current
       DESCRIPTION
       "This field accepts an Integer32 value containing a 16 bit switch
        command in the low order word and a channel number in lowest
        four bits of the high order word.

        The Switch command values are:

        Clear(0)

        Clears all of the switch commands listed below for the specified
        channel.

        Lockout of Protection(1)

        Prevents any of the working channels from switching to the protection
        line.

        Forced Switch of Working (to Protection)(2)

        Switches the specified working channel to the protection line.

        Forced Switch of Protection (to Working)(3)

        Switches the working channel back from the protection line to
        the working line.

        Manual Switch of Working (to Protection)(4)

        Switches the specified working channel to the protection line.

        Manual Switch of Protection (to Working)(5)

        Switches the working channel back from the protection line to
        the working line.

        Exercise(6)



Expires December 28, 1999                                      [Page 12]

INTERNET-DRAFT                                                 June 1999


        Exercises the protocol for a protection switch of the specified
        channel by issuing an Exercise request for that channel and
        checking the response on the APS channel.
        "
       ::= { apsCommandEntry 1 }

   apsCommandControl OBJECT-TYPE
       SYNTAX      Integer32
       MAX-ACCESS  read-write
       STATUS      current
       DESCRIPTION
       "This field accepts an Integer32 value containing a 16 bit control
        command in the low order word and a channel number in lowest
        four bits of the high order word.

        The Control command values are:

        Lockout a Working Channel(0)

        Prevents the specified working channel from switching to the protection
        line.

        Clear Lockout a Working Channel(1)

        Clears the lockout a working channel command for the channel specified.
        "
       ::= { apsCommandEntry 2 }


   apsStatusTable OBJECT-TYPE
       SYNTAX      SEQUENCE OF ApsStatusEntry
       MAX-ACCESS  not-accessible
       STATUS      current
       DESCRIPTION
           "This table provides status information about APS groups that have
            been configured on the system."
       ::= { rbnApsMIBObjects 3 }

   apsStatusEntry OBJECT-TYPE
       SYNTAX      ApsStatusEntry
       MAX-ACCESS  not-accessible
       STATUS      current
       DESCRIPTION
           "A conceptual row in the apsStatusTable."
       INDEX { IMPLIED apsConfigName}
       ::= { apsStatusTable  1 }

   ApsStatusEntry ::= SEQUENCE {



Expires December 28, 1999                                      [Page 13]

INTERNET-DRAFT                                                 June 1999


       apsStatusK1K2Rcv               ApsK1K2,
       apsStatusK1K2Trans             ApsK1K2,
       apsStatusCurrent               BITS,
       apsStatusModeMismatches        Counter32,
       apsStatusChannelMismatches     Counter32,
       apsStatusPSBFs                 Counter32,
       apsStatusCreationTime          TimeTicks
   }


   apsStatusK1K2Rcv OBJECT-TYPE
       SYNTAX      ApsK1K2
       MAX-ACCESS  read-only
       STATUS      current
       DESCRIPTION
       "The current value of the K1 and K2 bytes received on the
        protection channel."
       ::= { apsStatusEntry 1 }


   apsStatusK1K2Trans OBJECT-TYPE
       SYNTAX        ApsK1K2
       MAX-ACCESS    read-only
       STATUS        current
       DESCRIPTION
       "The current value of the K1 and K2 bytes transmitted on the
        protection channel."
       ::= { apsStatusEntry 2 }



   apsStatusCurrent OBJECT-TYPE
       SYNTAX      BITS {
                     modeMismatch(0),
                     channelMismatch(1),
                     psbf(2),
                     extraTraffic(3)
                    }
       MAX-ACCESS  read-only
       STATUS      current
       DESCRIPTION
       "The current status of the APS group.

        modeMismatch

        Modes other than 1+1 unidirectional monitor protection line
        K2 bit 5, which indicates the architecture  and K2 bits
        6-8, which indicate if the mode is unidirectional or



Expires December 28, 1999                                      [Page 14]

INTERNET-DRAFT                                                 June 1999


        bidirectional. A conflict between the current local mode
        and the received K2 mode information constitutes a
        mode mismatch.

        channelMismatch

        This bit indicates a  mismatch between the transmitted K1 channel
        and the received K2 channel has been detected.

        psbf

        This bit indicates a Protection Switch Byte Failure (PSBF) is
        in effect. This condition occurs when an invalid code or
        persistently unacceptable codes in the K1 byte are received.


        extraTraffic

        This bit indicates whether extra traffic is currently being
        accepted on the protection line.
       "
       ::= { apsStatusEntry 3 }


   apsStatusModeMismatches OBJECT-TYPE
       SYNTAX     Counter32
       MAX-ACCESS read-only
       STATUS     current
       DESCRIPTION
           "A count of Mode Mismatch conditions."
       ::= { apsStatusEntry 4 }


   apsStatusChannelMismatches OBJECT-TYPE
       SYNTAX     Counter32
       MAX-ACCESS read-only
       STATUS     current
       DESCRIPTION
           "A count of Channel Mismatch conditions."
       ::= { apsStatusEntry 5 }

   apsStatusPSBFs OBJECT-TYPE
       SYNTAX     Counter32
       MAX-ACCESS read-only
       STATUS     current
       DESCRIPTION
           "A count of Protection Switch Byte Failure conditions.
            This condition occurs when an invalid code or persistently



Expires December 28, 1999                                      [Page 15]

INTERNET-DRAFT                                                 June 1999


            unacceptable codes in the K1 byte are received."
       ::= { apsStatusEntry 6 }


   apsStatusCreationTime OBJECT-TYPE
       SYNTAX      TimeTicks
       MAX-ACCESS  read-only
       STATUS      current
       DESCRIPTION
           "The value of sysUpTime at the time the associated
            apsConfigRowStatus instance was set to active."
       ::= { apsStatusEntry 7 }



   --
   -- APS Channel  Group
   --
   -- Lists the SONET LTE interfaces that may be used to create APS groups.

   apsChan      OBJECT IDENTIFIER ::= { rbnApsMIBObjects 4 }

   apsChanLTEs OBJECT-TYPE
       SYNTAX      Counter32
       MAX-ACCESS  read-only
       STATUS      current
       DESCRIPTION
           "The count of available SONET LTE interfaces that may be included
            in APS groups."
       ::= { apsChan 1 }


   apsChanTable OBJECT-TYPE
       SYNTAX      SEQUENCE OF ApsChanEntry
       MAX-ACCESS  not-accessible
       STATUS      current
       DESCRIPTION
           "This table lists the SONET LTE interfaces that may be included in
            APS groups."
       ::= { apsChan 2 }

   apsChanEntry OBJECT-TYPE
       SYNTAX      ApsChanEntry
       MAX-ACCESS  not-accessible
       STATUS      current
       DESCRIPTION
           "A conceptual row in the apsChanTable."
       INDEX { apsChanIfIndex }



Expires December 28, 1999                                      [Page 16]

INTERNET-DRAFT                                                 June 1999


       ::= { apsChanTable  1 }

   ApsChanEntry ::= SEQUENCE {
       apsChanIfIndex               InterfaceIndex,
       apsChanGroupName             DisplayString,
       apsChanNumber                Integer32,
       apsChanPriority              INTEGER,
       apsChanStatus                BITS,
       apsChanSignalDegrades        Counter32,
       apsChanSignalFailures        Counter32,
       apsChanSwitchovers           Counter32,
       apsChanLastSwitchover        TimeTicks
   }



   apsChanIfIndex OBJECT-TYPE
       SYNTAX     InterfaceIndex
       MAX-ACCESS not-accessible
       STATUS     current
       DESCRIPTION
       "The Interface Index assigned to a SONET LTE."
       ::= { apsChanEntry 1 }


   apsChanGroupName OBJECT-TYPE
       SYNTAX      DisplayString (SIZE (1..64))
       MAX-ACCESS  read-write
       STATUS      current
       DESCRIPTION
           "A textual name for the APS group which this channel is
            included in.

           This object may not be modified if an instance of
           apsConfigName exists with the same value and the associated
           apsConfigRowStatus object is equal to active.

           If the channel is not part of an APS group this value is set to
           a string of size 0.

           This field can be changed from a string of size 0 to a value
           of apsConfigName which has an associated apsConfigRowStatus
           object which is not set to active. This action includes the
           SONET LTE into the inactive APS group.

           This field can be changed from a string of size 0 to a value
           which is not equal to any existing instance of apsConfigName.
           This action is the initial step in adding a SONET LTE to a



Expires December 28, 1999                                      [Page 17]

INTERNET-DRAFT                                                 June 1999


           new APS group. An instance of apsConfigName equal to this
           instance of apsChanGroupName will subsequently be created.

           If this field is set to any non-empty string it may only
           be set to a string of size 0. If an attempt is made to set
           this field from a non-empty string to another non-empty string
           the error inconsistentValue will be returned. This prevents
           a manager from inadvertantly re-assigning a channel."
       ::= { apsChanEntry 2 }


   apsChanNumber OBJECT-TYPE
       SYNTAX     Integer32 (0..14)
       MAX-ACCESS read-write
       STATUS     current
       DESCRIPTION
       "This field is set to a unique channel number within an APS group.
        The value 0 indicates the null channel. The values 1-14 define a
        working channel.

        If the port is not part of an APS group this value is set to 0.

        If an attempt is made to set this field when the associated
        apsChanGroupName field is a string of size 0 the error
        inconsistentValue is returned.

        If an attempt is made to set this field when an associated
        apsConfigName field exists and the corresponding apsConfigRowStatus
        field is set to active the error inconsistentValue is returned.

        This field must be assigned a unique number within the group.
        When an attempt is made to set the  corresponding apsConfigRowStatus
        field to active the apsChanNumber values of all entries with equal
        apsChanGroupName fields must represent a set of consecutive integer
        values beginning with 0 and ending with n, where n is greater than or
        equal to 1 and less than or equal to 14. Otherwise the error
        inconsistentValue is returned to the apsConfigRowStatus set attempt."
       ::= { apsChanEntry 3 }



   apsChanPriority OBJECT-TYPE
       SYNTAX     INTEGER {low(1), high(2)}
       MAX-ACCESS read-write
       STATUS     current
       DESCRIPTION
           "The priority of the channel.




Expires December 28, 1999                                      [Page 18]

INTERNET-DRAFT                                                 June 1999


            This field deterimines whether high or low priority
            SD and SF codes are used in K1 requests.

           This field is only applicable if the channel is to be included in
           a group using the 1:n architecture. It is not applicable if the
           channel is to be included in a group using the 1+1 architecture,
           and is ignored in that case.
           "
       ::= { apsChanEntry 4 }


   apsChanStatus OBJECT-TYPE
       SYNTAX     BITS {
                  lockedOut(0),
                  sd(1),
                  sf(2),
                  switched(3)
               }
       MAX-ACCESS read-only
       STATUS     current
       DESCRIPTION
           "Indicates the current state of the port.

            lockedOut

            This bit, when applied to a working channel, indicates that
            the channel is prevented from switching to the protection line.
            When applied to the null channel, this bit indicates that no
            working channel may switch to the protection line.

            sd

            A signal degrade condition is in effect.

            sf

            A signal failure condition is in effect.

            switched

            The switched bit is applied to a working channel if that
            channel is currently switched to the protection line.
            "
       ::= { apsChanEntry 5 }


   apsChanSignalDegrades OBJECT-TYPE
       SYNTAX     Counter32



Expires December 28, 1999                                      [Page 19]

INTERNET-DRAFT                                                 June 1999


       MAX-ACCESS read-only
       STATUS     current
       DESCRIPTION
           "A count of Signal Degrade conditions. This
            condition occurs when the line Bit Error Rate
            exceeds the currently configured threshold."
       ::= { apsChanEntry 6 }

   apsChanSignalFailures OBJECT-TYPE
       SYNTAX     Counter32
       MAX-ACCESS read-only
       STATUS     current
       DESCRIPTION
           "A count of Signal Failure conditions that have been
            detected on the incoming signal. This condition occurs
            when a loss of signal, loss of frame, AIS-L or a Line
            bit error rate exceeding 10^-3 is detected on an
            incoming line."
       ::= { apsChanEntry 7 }

   apsChanSwitchovers OBJECT-TYPE
       SYNTAX     Counter32
       MAX-ACCESS read-only
       STATUS     current
       DESCRIPTION
           "The number of switchovers that have occurred on this port."
       ::= { apsChanEntry 8 }

   apsChanLastSwitchover OBJECT-TYPE
       SYNTAX     TimeTicks
       MAX-ACCESS read-only
       STATUS     current
       DESCRIPTION
           "The value of sysUpTime when this port last switched over."
       ::= { apsChanEntry 9 }



   -- APS TRAPS


   apsTrapSwitchover NOTIFICATION-TYPE
       OBJECTS { apsChanSwitchovers, apsChanStatus }
       STATUS  current
       DESCRIPTION
               "An apsTrapSwitchover notification is sent when the
               value of an instance of apsChanSwitchovers increments."
                  ::= { rbnApsMIBNotifications 1 }



Expires December 28, 1999                                      [Page 20]

INTERNET-DRAFT                                                 June 1999


   apsTrapModeMismatch NOTIFICATION-TYPE
       OBJECTS { apsStatusModeMismatches, apsStatusCurrent }
       STATUS  current
       DESCRIPTION
               "An apsTrapModeMismatch notification is sent when the
               value of an instance of apsStatusModeMismatches increments."
                  ::= { rbnApsMIBNotifications 2 }

   apsTrapChannelMismatch NOTIFICATION-TYPE
       OBJECTS { apsStatusChannelMismatches, apsStatusCurrent }
       STATUS  current
       DESCRIPTION
               "An apsTrapChannelMismatch notification is sent when the
               value of an instance of apsStatusChannelMismatches increments."
                  ::= { rbnApsMIBNotifications 3 }

   apsTrapPSBF NOTIFICATION-TYPE
       OBJECTS { apsStatusPSBFs, apsStatusCurrent }
       STATUS  current
       DESCRIPTION
               "An apsTrapPSBF notification is sent when the
                value of an instance of apsStatusPSBFs increments."
                  ::= { rbnApsMIBNotifications 4 }


   -- conformance information

   apsGroups      OBJECT IDENTIFIER ::= { rbnApsMIBConformance 1 }
   apsCompliances OBJECT IDENTIFIER ::= { rbnApsMIBConformance 2 }


   apsCompliance MODULE-COMPLIANCE
       STATUS  current
       DESCRIPTION
       "The compliance statement for linear APS groups."

       MODULE
       MANDATORY-GROUPS { apsConfigGeneral, apsStatusGeneral, apsChanGeneral }

           OBJECT  apsConfigMode
           MIN-ACCESS  read-only
           DESCRIPTION
               "Write access is not required."

           OBJECT  apsConfigSdBerThreshold
           MIN-ACCESS  read-only
           DESCRIPTION
               "Write access is not required."



Expires December 28, 1999                                      [Page 21]

INTERNET-DRAFT                                                 June 1999


           OBJECT  apsConfigSfBerThreshold
           MIN-ACCESS  read-only
           DESCRIPTION
               "Write access is not required."


           OBJECT  apsConfigWaitToRestore
           MIN-ACCESS  read-only
           DESCRIPTION
               "Write access is not required."


           OBJECT  apsConfigRowStatus
           MIN-ACCESS  read-only
           DESCRIPTION
               "Write access is not required."

           OBJECT  apsChanGroupName
           MIN-ACCESS  read-only
           DESCRIPTION
               "Write access is not required."


           OBJECT  apsChanNumber
           MIN-ACCESS  read-only
           DESCRIPTION
               "Write access is not required."

           OBJECT  apsChanPriority
           MIN-ACCESS  read-only
           DESCRIPTION
               "Write access is not required."


           GROUP       apsConfigOneToN
           DESCRIPTION
               "Implementation of this group is optional for all
                linear APS implementations. The information is
                applicable to groups implementing the linear
                APS 1:n architecture"

           GROUP       apsCommandOnePlusOne
           DESCRIPTION
               "Implementation of this group is optional for all
                linear APS implementations. The information is
                applicable to groups implementing the linear
                APS 1+1 architecture and supporting set operations."




Expires December 28, 1999                                      [Page 22]

INTERNET-DRAFT                                                 June 1999


          GROUP       apsCommandOneToN
           DESCRIPTION
               "Implementation of this group is optional for all
                linear APS implementations. The information is
                applicable to groups implementing the linear
                APS 1:n architecture and supporting set operations."

          GROUP       apsChanOneToN
           DESCRIPTION
               "Implementation of this group is optional for all
                linear APS implementations. The information is
                applicable to groups implementing the linear
                APS 1:n architecture."

          GROUP       apsTotalsGroup
           DESCRIPTION
               "Implementation of this group is optional for all
                linear APS implementations."


       ::= { apsCompliances 1 }

   -- units of conformance

   apsConfigGeneral    OBJECT-GROUP
       OBJECTS
       {
           apsConfigMode,
           apsConfigSdBerThreshold,
           apsConfigSfBerThreshold,
           apsConfigRowStatus
       }
       STATUS  current
       DESCRIPTION
       "A collection of apsConfigTable objects providing configuration
        information applicable to all linear APS groups."
       ::= { apsGroups 1 }

   apsConfigOneToN    OBJECT-GROUP
       OBJECTS
       {
           apsConfigWaitToRestore
       }
       STATUS  current
       DESCRIPTION
       "The apsConfigTable object that provides information which is only
        applicable to groups implementing the linear APS 1:n architecture."
       ::= { apsGroups 2 }



Expires December 28, 1999                                      [Page 23]

INTERNET-DRAFT                                                 June 1999


   --  If set operations are not supported neither of the following two groups
   --  are implemented. If sets are supported only one of these groups is
   --  implemented for a linear APS group instance.

   apsCommandOnePlusOne    OBJECT-GROUP
       OBJECTS
       {
           apsCommandSwitch
       }
       STATUS  current
       DESCRIPTION
       "The  apsCommandTable object which is applicable to groups
        implementing the linear APS 1+1 architecture. Also, set operations
        must be supported."
       ::= { apsGroups 3 }

   apsCommandOneToN    OBJECT-GROUP
       OBJECTS
       {
           apsCommandSwitch,
           apsCommandControl
       }
       STATUS  current
       DESCRIPTION
       "A collection of apsCommandTable objects which are applicable to
        groups implementing the linear APS 1:n architecture. Also, set
        operations must be supported."
       ::= { apsGroups 4 }


   apsStatusGeneral    OBJECT-GROUP
       OBJECTS
       {
           apsStatusK1K2Rcv,
           apsStatusK1K2Trans,
           apsStatusCurrent,
           apsStatusModeMismatches,
           apsStatusChannelMismatches,
           apsStatusPSBFs,
           apsStatusCreationTime
       }
       STATUS  current
       DESCRIPTION
       "A collection of apsStatusTable objects providing status information
        applicable to all linear APS groups."
       ::= { apsGroups 5 }

   apsChanGeneral    OBJECT-GROUP



Expires December 28, 1999                                      [Page 24]

INTERNET-DRAFT                                                 June 1999


       OBJECTS
       {
           apsChanGroupName,
           apsChanNumber,
           apsChanStatus,
           apsChanSignalDegrades,
           apsChanSignalFailures,
           apsChanSwitchovers,
           apsChanLastSwitchover
      }
       STATUS  current
       DESCRIPTION
       "A collection of apsChanTable objects providing information applicable to
        all linear APS channels."
       ::= { apsGroups 6 }

   apsChanOneToN    OBJECT-GROUP
       OBJECTS
       {
           apsChanPriority
       }
       STATUS  current
       DESCRIPTION
       "The apsChanTable object that provides information which is only
        applicable to groups implementing the linear APS 1:n architecture."
       ::= { apsGroups 7 }

   apsTotalsGroup OBJECT-GROUP
       OBJECTS
       {
           apsConfigGroups,
           apsChanLTEs
       }
       STATUS  current
       DESCRIPTION
       "A collection of objects providing optional counts of configured APS groups
        and SONET LTE interfaces."
       ::= { apsGroups 8 }

   apsTrapOptional NOTIFICATION-GROUP
       NOTIFICATIONS {apsTrapSwitchover, apsTrapModeMismatch,
                      apsTrapChannelMismatch, apsTrapPSBF }
       STATUS    current
       DESCRIPTION
       "A collection of SONET linear APS notifications that may optionally be
        implemented."
       ::= { apsGroups 9 }




Expires December 28, 1999                                      [Page 25]

INTERNET-DRAFT                                                 June 1999


   END


6. Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights.  Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11.  Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.



7. References

   [1]  Harrington, D., Presuhn, R., and B. Wijnen, An Architecture for
        Describing SNMP Management Frameworks, RFC 2571, Cabletron Systems,
        Inc., BMC Software, Inc., IBM T. J. Watson Research, April 1999

   [2]  Rose, M., and K. McCloghrie, Structure and Identification of
        Management Information for TCP/IP-based Internets, RFC 1155,
        STD 16, Performance Systems International, Hughes LAN Systems, May 1990

   [3]  Rose, M., and K. McCloghrie, Concise MIB Definitions, RFC 1212,
        STD 16, Performance Systems International, Hughes LAN Systems, March 1991

   [4]  M. Rose, A Convention for Defining Traps for use with the SNMP,
        RFC 1215, Performance Systems International, March 1991

   [5]  McCloghrie, K., Perkins, D., Schoenwaelder, J., Case, J., Rose,
        M., and S. Waldbusser, Structure of Management Information Version 2
        (SMIv2), RFC 2578, STD 58, Cisco Systems, SNMPinfo, TU
        Braunschweig, SNMP Research, First Virtual Holdings, International
        Network Services, April 1999

   [6]  McCloghrie, K., Perkins, D., Schoenwaelder, J., Case, J., Rose,
        M., and S. Waldbusser, Textual Conventions for SMIv2, RFC 2579,
        STD 58, Cisco Systems, SNMPinfo, TU Braunschweig, SNMP Research,
        First Virtual Holdings, International Network Services, April 1999




Expires December 28, 1999                                      [Page 26]

INTERNET-DRAFT                                                 June 1999


   [7]  McCloghrie, K., Perkins, D., Schoenwaelder, J., Case, J., Rose,
        M., and S. Waldbusser, Conformance Statements for SMIv2, RFC
        2580, STD 58, Cisco Systems, SNMPinfo, TU Braunschweig, SNMP Research,
        First Virtual Holdings, International Network Services, April 1999

   [8]  Case, J., Fedor, M., Schoffstall, M., and J. Davin, Simple Network
        Management Protocol, RFC 1157, STD 15, SNMP Research, Performance
        Systems International, Performance Systems International, MIT Laboratory
        for Computer Science, May 1990.

   [9]  Case, J., McCloghrie, K., Rose, M., and S. Waldbusser,
        Introduction to Community-based SNMPv2, RFC 1901, SNMP Research,
        Inc., Cisco Systems, Inc., Dover Beach Consulting, Inc., International
        Network Services, January 1996.

   [10] Case, J., McCloghrie, K., Rose, M., and S. Waldbusser,
        Transport Mappings for Version 2 of the Simple
        Network Management Protocol (SNMPv2), RFC 1906, SNMP Research, Inc.,
        Cisco Systems, Inc., Dover Beach Consulting, Inc., International
        Network Services, January 1996.

   [11] Case, J., Harrington D., Presuhn R., and B. Wijnen, Message
        Processing and Dispatching for the Simple Network Management Protocol
        (SNMP), RFC 2572, SNMP Research, Inc., Cabletron Systems, Inc.,
        BMC Software, Inc., IBM T. J. Watson Research, April 1999

   [12] Blumenthal, U., and B. Wijnen, User-based Security Model (USM)
        for version 3 of the Simple Network Management Protocol (SNMPv3),
        RFC 2574, IBM T. J. Watson Research, April 1999

   [13] Case, J., McCloghrie, K., Rose, M., and S. Waldbusser,
        Protocol Operations for Version 2 of the Simple
        Network Management Protocol (SNMPv2), RFC 1905, SNMP Research, Inc.,
        Cisco Systems, Inc., Dover Beach Consulting, Inc., International
        Network Services, January 1996.

   [14] Levi, D., Meyer, P., and B. Stewart, SNMPv3 Applications,
        RFC 2573, SNMP Research, Inc., Secure Computing Corporation,
        Cisco Systems, April 1999

   [15] Wijnen, B., Presuhn, R., and K. McCloghrie, View-based Access
        Control Model (VACM) for the Simple Network Management Protocol
        (SNMP), RFC 2575, IBM T. J. Watson Research, BMC Software, Inc.,
        Cisco Systems, Inc., April 1999

   [16] Case, J., Mundy, R., Partain, D., and B. Stewart, Introduction to
        Version 3 of the Internet-standard Network Management Framework,
        RFC 2570, SNMP Research, Inc., TIS Labs at Network Associates, Inc.,



Expires December 28, 1999                                      [Page 27]

INTERNET-DRAFT                                                 June 1999


        Ericsson, Cisco Systems, April 1999

   [17] McCloghrie, K., and F. Kastenholz.  "The Interfaces Group MIB
        using SMIv2", RFC 2233, November 1997.

   [18] GR-253-CORE Issue 2, December 1995, Revision 2, January 1999



8.Security Considerations

   There are a number of management objects defined in this MIB
   that have a MAX-ACCESS clause of read-write and/or read-create.
   Such objects may be considered sensitive or vulnerable in some
   network environments.  The support for SET operations in a
   non-secure environment without proper protection can have a
   negative effect on network operations.

   SNMPv1 by itself is not a secure environment.  Even if the
   network itself is secure (for example by using IPSec), even then,
   there is no control as to who on the secure network is allowed
   to access and GET/SET (read/change/create/delete) the objects in
   this MIB.

   It is recommended that the implementers consider the security
   features as provided by the SNMPv3 framework.  Specifically, the
   use of the User-based Security Model RFC 2574 [RFC2574] and the
   View-based Access Control Model RFC 2575 [RFC2575] is recommended.

   It is then a customer/user responsibility to ensure that the SNMP
   entity giving access to an instance of this MIB, is properly
   configured to give access to the objects only to those
   principals (users) that have legitimate rights to indeed GET or
   SET (change/create/delete) them.


9. Authors'  Address

   Jeff Johnson
   RedBack Networks. Inc.
   1389 Moffett Park Drive
   Sunnyvale, CA  94089-1134
   Phone: +1 408 548 3516
   Email: jeff@redback.com

   Jim Kuhfeld
   RedBack Networks. Inc.
   1389 Moffett Park Drive



Expires December 28, 1999                                      [Page 28]

INTERNET-DRAFT                                                 June 1999


   Sunnyvale, CA  94089-1134
   Phone: +1 408 548 2817
   Email: jkuhfeld@redback.com


10. Full Copyright Statement

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

   This document and translations of it may be copied and furnished
   to others, and derivative works that comment on or otherwise
   explain it or assist in its implmentation may be prepared, copied,
   published and distributed, in whole or in part, without
   restriction of any kind, provided that the above copyright notice
   and this paragraph are included on all such copies and derivative
   works.  However, this document itself may not be modified in any
   way, such as by removing the copyright notice or references to the
   Internet Society or other Internet organizations, except as needed
   for the purpose of developing Internet standards in which case the
   procedures for copyrights defined in the Internet Standards
   process must be followed, or as required to translate it into
   languages other than English.

   The limited permissions granted above are perpetual and will not
   be revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on
   an "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR
   IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
   PURPOSE."


















Expires December 28, 1999                                      [Page 29]
