<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Mapping of YANG to DSDL</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Mapping of YANG to DSDL">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">NETMOD</td><td class="header">L. Lhotka</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">CESNET</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">July 06, 2008</td></tr>
<tr><td class="header">Expires: January 7, 2009</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Mapping of YANG to DSDL<br />draft-lhotka-yang-dsdl-map-00</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on January 7, 2009.</p>

<h3>Abstract</h3>

<p>This draft describes the algorithm and rules for mapping data
    models expressed in the YANG language to Document Schema
    Definition Languages (DSDL) with additional annotations.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#overview">2.</a>&nbsp;
Overview of the Mapping Algorithm<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#optcont">2.1.</a>&nbsp;
Optional Content<br />
<a href="#schema-lang">3.</a>&nbsp;
Schema Languages<br />
<a href="#design">4.</a>&nbsp;
Design Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#modularity">4.1.</a>&nbsp;
Modularity<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#granularity">4.2.</a>&nbsp;
Granularity<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mangling">4.3.</a>&nbsp;
Mangled Names of RELAX NG Named Patterns<br />
<a href="#issues">5.</a>&nbsp;
Open Issues<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rootel">5.1.</a>&nbsp;
No Root or Multiple Root Nodes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#issues-ext">5.2.</a>&nbsp;
The extension Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#issues-rpc">5.3.</a>&nbsp;
The rpc and notification statements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#issues-aug">5.4.</a>&nbsp;
The augment Statement<br />
<a href="#stmts">6.</a>&nbsp;
Mapping Rules for YANG Statements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anyxml">6.1.</a>&nbsp;
The anyxml Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#argument-stmt">6.2.</a>&nbsp;
The argument Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#augment-stmt">6.3.</a>&nbsp;
The augment Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#belongs-to-stmt">6.4.</a>&nbsp;
The belongs-to Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#bit-stmt">6.5.</a>&nbsp;
The bit Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#case-stmt">6.6.</a>&nbsp;
The case Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#choice-stmt">6.7.</a>&nbsp;
The choice Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#config-stmt">6.8.</a>&nbsp;
The config Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#contact-stmt">6.9.</a>&nbsp;
The contact Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#container-stmt">6.10.</a>&nbsp;
The container Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#default-stmt">6.11.</a>&nbsp;
The default Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#description-stmt">6.12.</a>&nbsp;
The description Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#enum-stmt">6.13.</a>&nbsp;
The enum Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#error-app-tag-stmt">6.14.</a>&nbsp;
The error-app-tag Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#error-message-stmt">6.15.</a>&nbsp;
The error-message Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#extension-stmt">6.16.</a>&nbsp;
The extension Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#grouping-stmt">6.17.</a>&nbsp;
The grouping Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#import-stmt">6.18.</a>&nbsp;
The import Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#include-stmt">6.19.</a>&nbsp;
The include Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#input-stmt">6.20.</a>&nbsp;
The input Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#key-stmt">6.21.</a>&nbsp;
The key Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#leaf-stmt">6.22.</a>&nbsp;
The leaf Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#leaf-list-stmt">6.23.</a>&nbsp;
The leaf-list Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#length-stmt">6.24.</a>&nbsp;
The length Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#list-stmt">6.25.</a>&nbsp;
The list Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mandatory-stmt">6.26.</a>&nbsp;
The mandatory Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#max-elements-stmt">6.27.</a>&nbsp;
The max-elements Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#min-elements-stmt">6.28.</a>&nbsp;
The min-elements Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#module-stmt">6.29.</a>&nbsp;
The module Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#must-stmt">6.30.</a>&nbsp;
The must Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#namespace-stmt">6.31.</a>&nbsp;
The namespace Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#notification-stmt">6.32.</a>&nbsp;
The notification Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ordered-by-stmt">6.33.</a>&nbsp;
The ordered-by Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#organization-stmt">6.34.</a>&nbsp;
The organization Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#output-stmt">6.35.</a>&nbsp;
The output Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#path-stmt">6.36.</a>&nbsp;
The path Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#pattern-stmt">6.37.</a>&nbsp;
The pattern Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#position-stmt">6.38.</a>&nbsp;
The position Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#prefix-stmt">6.39.</a>&nbsp;
The prefix Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#presence-stmt">6.40.</a>&nbsp;
The presence Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#range-stmt">6.41.</a>&nbsp;
The range Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reference-stmt">6.42.</a>&nbsp;
The reference Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#revision-stmt">6.43.</a>&nbsp;
The revision Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rpc-stmt">6.44.</a>&nbsp;
The rpc Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#status-stmt">6.45.</a>&nbsp;
The status Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#submodule-stmt">6.46.</a>&nbsp;
The submodule Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#type-stmt">6.47.</a>&nbsp;
The type Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#empty-type">6.47.1.</a>&nbsp;
The empty Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#boobi-types">6.47.2.</a>&nbsp;
The boolean and binary Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ii-type">6.47.3.</a>&nbsp;
The instance identifier Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#bits-type">6.47.4.</a>&nbsp;
The bits Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#enuun-type">6.47.5.</a>&nbsp;
The enumeration and union Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#keyref-type">6.47.6.</a>&nbsp;
The keyref type<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#numeric-types">6.47.7.</a>&nbsp;
The numeric Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#string-type">6.47.8.</a>&nbsp;
The string Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#typedef-stmt">6.48.</a>&nbsp;
The typedef Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#unique-stmt">6.49.</a>&nbsp;
The unique Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#units-stmt">6.50.</a>&nbsp;
The units Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#uses-stmt">6.51.</a>&nbsp;
The uses Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#value-stmt">6.52.</a>&nbsp;
The value Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#when-stmt">6.53.</a>&nbsp;
The when Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#yang-version-stmt">6.54.</a>&nbsp;
The yang-version Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#yin-element-stmt">6.55.</a>&nbsp;
The yin-element Statement<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
<a href="#app-dhcp">Appendix&nbsp;A.</a>&nbsp;
Translation of the DHCP Data Model<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#xml-synt">A.1.</a>&nbsp;
XML Syntax<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#comp-synt">A.2.</a>&nbsp;
Compact Syntax<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The NETMOD working group complements the results of the NETCONF
    WG by addressing the data modeling issues. The major item in the
    NETMOD charter is a new data modeling language called YANG <a class='info' href='#YANG'>[YANG]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A data modeling language for NETCONF,&rdquo; May&nbsp;2008.</span><span>)</span></a>. This language, being based on SMIng <a class='info' href='#RFC3216'>[RFC3216]<span> (</span><span class='info'>Elliott, C., Harrington, D., Jason, J., Schoenwaelder, J., Strauss, F., and W. Weiss, &ldquo;SMIng Objectives,&rdquo; December&nbsp;2001.</span><span>)</span></a>, builds on the experience of previous network
    management systems, most notably SNMP. However, since NETCONF
    chose eXtensible Markup Language <a class='info' href='#XML'>[XML]<span> (</span><span class='info'>Bray, T., Paoli, J., Sperberg-McQueen, C., Maler, E., and F. Yergeau, &ldquo;Extensible Markup Language (XML) 1.0 (Fourth Edition),&rdquo; August&nbsp;2006.</span><span>)</span></a> as the
    method for encoding both configuration data and their envelope
    (RPC layer), this work can and should also benefit from the body
    of knowledge, standards and software tools that have been
    established in the XML world. To this end, YANG also provides an
    alternative syntax called YIN that is able to represent the same
    information using XML. Despite the syntactic differences, the
    information models of YANG and YIN are virtually identical and
    conversion between YANG and YIN is straightforward in both
    directions.
</p>
<p>However, having data models expressed in an XML syntax is not
    by itself sufficient for leveraging the existing XML know-how and
    tools. It is also necessary to convey the meaning of YANG models
    and present it in a way that the existing XML tools can
    understand. As a matter of fact, YANG/YIN can be viewed as yet
    another XML schema language. While there are several aspects that
    make YANG models specific to the NETCONF realm, for the most part
    the grammatical and semantic constraints that the models express can
    be equivalently represented in the general-purpose XML schema
    languages such as W3C XML Schema, RELAX NG, Schematron and
    others.
</p>
<p>Therefore, one of the chartered items of the NETMOD WG is to
    define a mapping from YANG to the Document Schema Definition
    Languages (DSDL) that is being standardized as ISO/IEC 19757 <a class='info' href='#DSDL'>[DSDL]<span> (</span><span class='info'>ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 1:         Overview,&rdquo; 11&nbsp;2004.</span><span>)</span></a>. The DSDL framework comprises a set of XML schema
    languages that address grammar rules, semantic constraints and
    other data modeling aspect but also, and more importantly, can do
    it in a coordinated and consistent way. While it is true that some
    DSDL parts have not been standardized yet and are still work in
    progress, the two crucial parts that the YANG -> DSDL mapping
    relies upon - RELAX NG and Schematron - already have the status of
    ISO/IEC Final Draft International Standard and are supported in a
    number of software tools.
</p>
<p>This memo describes the algorithm for translating YANG data
    models to a schema (or multiple schemas) utilizing a subset of the
    DSDL schema languages together with a limited number of other
    annotations. The aim is to map as much structural, datatyping and
    semantic information as possible from YANG to DSDL with
    annotations so that the resulting schema(s) can be used with
    standard XML tools for a relatively comprehensive validation of
    the contents of configuration datastores. The most important
    schema language in the DSDL framework is RELAX NG <a class='info' href='#RNG'>[RNG]<span> (</span><span class='info'>ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 2:         Regular-Grammar-Based Validation - RELAX NG,&rdquo; 2002.</span><span>)</span></a>. The specification of the mapping algorithm given
    below assumes that output of RELAX NG uses the XML
    syntax. However, RELAX NG compact syntax <a class='info' href='#RNG-CS'>[RNG&#8209;CS]<span> (</span><span class='info'>Clark, J., Ed., &ldquo;RELAX NG Compact Syntax,&rdquo; November&nbsp;2002.</span><span>)</span></a>
    is often the preferred form for perusal by human readers. A
    secondary goal therefore is to guarantee a reasonable level of
    readability of the resulting RELAX NG in the compact syntax as
    well, even if multiple embedded annotation types are used.
</p>
<p>In the text, we use the following typographic conventions:
    </p>
<ul class="text">
<li>YANG statement keywords are delimited by single quotes.
</li>
<li>Literal values are delimited by double quotes.
</li>
<li>XML element names are delimited by "&lt;" and "&gt;" characters.
</li>
<li>Names of XML attributes are prefixed by the "@" character.
</li>
</ul><p>
    
</p>
<a name="overview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Overview of the Mapping Algorithm</h3>

<p>The mapping algorithm assumes input in the form of a tree data
    structure representing a valid YANG module, henceforth denoted as
    the "YANG tree". Each node in the YANG tree is a data structure
    that corresponds to a single YANG statement. The node records the
    essential parameters of the statement (keyword, argument string)
    and keeps a pointer to the parent statement and a list of
    substatements. It is also assumed that the algorithm has access,
    perhaps on demand, to the parsed form of all YANG modules that the
    module imports (transitively).
</p>
<p>The algorithm recursively traverses the YANG tree in preorder
    and constructs one or more XML trees for each of the DSDL schema
    languages that the algorithm generates (see <a class='info' href='#schema-lang'>Section&nbsp;3<span> (</span><span class='info'>Schema Languages</span><span>)</span></a>). In parallel, it keeps a pointer to the
    current position in each of the schema trees where new XML
    fragments corresponding to YANG statements get attached.
</p>
<p>The resulting schema(s) may be internally represented in the
    form of a Document Object Model (DOM) or any other framework for
    creating and manipulating moderately sized XML trees.
</p>
<p>An implementation of the mapping algorithm MUST provide the
    resulting schema(s) in at least one of the following forms:
    </p>
<ol class="text">
<li>A set of separate schemas, typically in
      different disk files, one for each DSDL schema
      language. Non-DSDL annotations MUST be attached to the RELAX NG
      schema.
</li>
<li>A single RELAX NG schema with elements and
      attributes of the remaining DSDL schema languages and other
      annotations.
</li>
</ol><p>
    The first form is essentially what the DSDL standard <a class='info' href='#DSDL'>[DSDL]<span> (</span><span class='info'>ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 1:         Overview,&rdquo; 11&nbsp;2004.</span><span>)</span></a> expects and can be readily used with existing
    tools. The advantage of the second form is a more concise
    representation and better comprehensibility.
</p>
<p>Note that non-DSDL annotations are always embedded in the RELAX
    NG schema.
</p>
<p>An implementation SHOULD also allow the user to select a subset
    of schema languages and annotation types that are used for
    output. For example, a user might want to select pure RELAX NG
    without any annotations and still obtain a schema that is
    reasonably usable for validation.
</p>
<a name="optcont"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Optional Content</h3>

<p>In YANG, all leaf nodes are optional unless they contain
      substatement
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
mandatory true;</pre></div>
<p>or unless they are declared as list keys.
</p>
<p>Lists or leaf-lists are optional unless they contain
      'min-elements' substatement with argument value greater than zero.
</p>
<p>YANG specification allows non-presence containers to be be
      omitted if they are empty. Containers with the 'presence'
      substatement are always optional since their presence or absence
      carries specific information.
</p>
<p>Putting it all together, we get the following recursive rule
      for containers:
</p>
<p>A container is optional if and only if at least one of the
      following conditions holds:
        </p>
<ol class="text">
<li>it is a container with presence;
</li>
<li>none of its descendant leaf nodes is mandatory or, if
          such a leaf exists, it is enclosed in an intervening
          container with presence;
</li>
<li>none of its descendant list or leaf-list nodes has
          'min-elements' substatement with argument value greater than
          zero or, if such a list or leaf-list exists, it is enclosed
          in an intervening container with presence.
</li>
</ol>

<p>In RELAX NG, all elements that are optional must be
      explicitly wrapped in the &lt;optional&gt; element.
</p>
<p>Therefore, the mapping algorithm MUST be able to determine
      whether a YANG node is optional and if so, insert the
      &lt;optional&gt; element in the RELAX NG schema.
</p>
<a name="schema-lang"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Schema Languages</h3>

<p>The mapping algorithm uses the following schema languages and
    annotation types:
    </p>
<ul class="text">
<li><em>RELAX NG</em> (DSDL Part 2 <a class='info' href='#RNG'>[RNG]<span> (</span><span class='info'>ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 2:         Regular-Grammar-Based Validation - RELAX NG,&rdquo; 2002.</span><span>)</span></a>) is used for representing grammatical constraints,
      simple datatypes (via the W3C XML Schema Datatype Library <a class='info' href='#XSD-D'>[XSD&#8209;D]<span> (</span><span class='info'>Biron, P. and A. Malhotra, &ldquo;XML Schema Part 2: Datatypes Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>), complex datatypes, restrictions of datatypes,
      and YANG groupings. RELAX NG namespace is
      "http://relaxng.org/ns/structure/1.0".
</li>
<li><em>Schematron</em> (DSDL Part 3 <a class='info' href='#Schtrn'>[Schtrn]<span> (</span><span class='info'>ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 3:         Rule-Based Validation - Schematron,&rdquo; 2004.</span><span>)</span></a>) is used for specifying additional semantic
      constraints that are either inherent to YANG (e.g., uniqueness
      of list keys) or specified by the data model author (e.g., using
      the 'must' statement). Schematron namespace is
      "http://purl.oclc.org/dsdl/schematron".
</li>
<li><em>Document Schema Renaming Language</em>
      (DSRL; DSDL Part 8 <a class='info' href='#DSRL'>[DSRL]<span> (</span><span class='info'>ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 8:         Document Schema Renaming Language - DSRL,&rdquo; 2006.</span><span>)</span></a>) is used only for
      specifying default values for YANG leaf nodes and typedefs
      (cf. 'default' statement). DSRL namespace is
      "http://purl.oclc.org/dsdl/dsrl".
</li>
<li><em>Dublin Core metadata terms</em> <a class='info' href='#DCMT'>[DCMT]<span> (</span><span class='info'>DCMI, &ldquo;DCMI Metadata Terms,&rdquo; January&nbsp;2008.</span><span>)</span></a> are used for general data model metadata such as
      authorship information, revision date or model description. The
      namespace for Dublin Core metadata terms is
      "http://purl.org/dc/terms".
</li>
<li><em>RELAX NG DTD compatibility
      annotations</em> <a class='info' href='#RNG-DTD'>[RNG&#8209;DTD]<span> (</span><span class='info'>Clark, J., Ed. and M. Murata, Ed., &ldquo;RELAX NG DTD Compatibility,&rdquo; December&nbsp;2001.</span><span>)</span></a> are used for
      'description' and 'reference' strings, except at the top level
      of a module where Dublin Core metadata terms are used for this
      purpose. The namespace for DTD compatibility annotations is
      "http://relaxng.org/ns/compatibility/annotations/1.0".
</li>
<li><em>NETMOD-specific annotations</em> is a
      small collection of other annotations that convey additional
      semantics expressed by YANG model. They are always modeled as
      XML attributes attached to the RELAX NG elements that they
      qualify. The namespace for NETMOD-specific annotations is
      "urn:ietf:params:xml:ns:netmod:dsdl-attrib:1".
</li>
</ul>

<p>If the YANG module contains no schema tree - for example, if it
    contains only definitions of grouping and typedefs - then the
    resulting RELAX NG schema SHOULD NOT have a &lt;start&gt;
    element.
</p>
<p>If an implementation generates multiple DSDL schemas (output
    alternative <a class='info' href='#multsch'>1</a> in <a class='info' href='#overview'>Section&nbsp;2<span> (</span><span class='info'>Overview of the Mapping Algorithm</span><span>)</span></a>), then all such schemas MUST be valid
    according to the current DSDL standards. However, if the output
    form is a single annotated RELAX NG schema (output alternative
    <a class='info' href='#onesch'>2</a> in <a class='info' href='#overview'>Section&nbsp;2<span> (</span><span class='info'>Overview of the Mapping Algorithm</span><span>)</span></a>), certain parts of the annotating DSDL schema
    rules MAY be omitted, provided that the corresponding information
    can be unambiguously inferred, typically from the location of the
    annotating elements within the RELAX NG tree.
</p>
<p>For example, consider the following YANG
      snippet:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
module dhcp {
  ...
  container dhcp {
    ...
    leaf max-lease-time { ... };
    leaf default-lease-time {
      ...
      must '$this &lt;= ../max-lease-time' {
        error-message
          "default-lease-time must be less than max-lease-time";
      }
      default 600;
    }
    ...
  }
  ...
}</pre></div>
<p>If multiple schemas are generated, in this case RELAX NG,
    Schematron and DSRL, the 'must' statement shall be mapped to the
    following Schematron fragment:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;sch:pattern&gt;
  &lt;sch:rule context="/dhcp/default-lease-time"
    &lt;sch:assert test=". &amp;lt;= ../max-lease-time"&gt;
      default-lease-time must be less than max-lease-time
    &lt;/sch:assert&gt;
  &lt;/sch:rule&gt;
&lt;sch:pattern&gt;</pre></div>
<p>Similarly, the 'default' statement results in the following
    DSRL fragment:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;dsrl:element-map&gt;
  &lt;dsrl:within&gt;/dhcp&lt;/dsrl:within&gt;
  &lt;dsrl:name&gt;default-lease-time&lt;/dsrl:name&gt;
  &lt;dsrl:default-content&gt;600&lt;/dsrl:default-content&gt;
&lt;dsrl:element-map&gt;</pre></div>
<p>In both the Schematron and DSRL fragments, the context for the
    rules is explicitly specified by means of an XPath expression. If
    we insert these rules as annotations into the RELAX NG schema, the
    context is implicitly defined by the location of the rules with
    the RELAX NG schema. Therefore, the resulting RELAX NG schema
    fragment can be only
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;element name="default-lease-time"&gt;
  ...
  &lt;sch:assert test=". &lt;= ../max-lease-time"&gt;
    The default-lease-time must be less than max-lease-time
  &lt;/sch:assert&gt;
  &lt;dsrl:default-content&gt;600&lt;/dsrl:default-content&gt;
&lt;/element&gt;</pre></div>
<a name="design"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Design Considerations</h3>

<p>This section describes the general principles and conventions
    used by the mapping algorithm.
</p>
<a name="modularity"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Modularity</h3>

<p>Both YANG and RELAX NG offer means for modularity, i.e.,
      splitting the contents into separate modules (schemas) and
      combining or reusing them in various ways. However, the
      approaches taken by YANG and RELAX NG differ. Modularity in
      RELAX NG is intended more for ad hoc combinations of a small
      number of schemas whereas YANG assumes a large set of modules
      similar to SNMP MIBs. In particular, RELAX NG uses a single flat
      namespace for all named patterns, be they local or imported,
      while every YANG module has its unique namespace and symbols
      imported by other modules remain in the namespace of their
      original module. Consequently, multiple YANG groupings and
      typedefs defined in different modules can have the same (local)
      identifier but still be used together in another module, but in
      RELAX NG this would mean a name conflict.
</p>
<p>Therefore, the design decision for the mapping algorithm was
      to collect all contents in a single DSDL module even if in YANG
      it is distributed in several modules. Translations of foreign
      groupings and typedefs are installed in the importing module
      with appropriately mangled names - but only if they are really
      used by the importing module.
</p>
<p>On the other hand, YANG submodules share the same namespace
      with the modules they belong to, so their modular structure can
      be retained in RELAX NG by using the &lt;include&gt; element.
</p>
<a name="granularity"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Granularity</h3>

<p>RELAX NG supports different styles of structuring the schema:
      One extreme, often called "Russian Doll", specifies the
      structure of an XML instance document in a single schema. The
      other extreme, the flat style, is similar to the original Data
      Type Definition (DTD) schema language - every XML element is
      introduced inside a new named pattern. In practice, some
      compromise between the two extremes is usually chosen.
</p>
<p>YANG in principle supports both styles, too, but in most
      cases the modules are organized in a way that's closer to the
      "Russian Doll" style, which provides a better insight into the
      structure of the configuration data. Groupings are usually
      defined only for subtrees that are prepared for reuse via the
      'uses' statement. In contrast, RELAX NG schemas tend to be much
      flatter, because finer granularity is in RELAX NG also needed
      for extensibility of the schemas - it is only possible to
      replace or modify schema fragments that are factored out as
      named patterns. For YANG this is not an issue since its
      'augment' statement can delve, by using path expressions, into
      arbitrary depths of existing structures.
</p>
<p>We argue in <a class='info' href='#issues-aug'>Section&nbsp;5.4<span> (</span><span class='info'>The augment Statement</span><span>)</span></a> that is is in general
      not feasible to map YANG extension mechanisms to those of RELAX
      NG. For this reason, the mapping keeps the granularity of the
      original YANG data model: definitions of named patterns in the
      resulting RELAX NG schema have direct counterparts in YANG
      groupings and definitions of complex types.
</p>
<a name="mangling"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Mangled Names of RELAX NG Named Patterns</h3>

<p>YANG typedefs and groupings may appear in all levels of the
      module hierarchy and are subject to lexical scoping. Moreover,
      top-level symbols from external modules are imported as
      qualified names consisting of the external module namespace and
      the name of the symbol. In contrast, named patterns in RELAX NG
      (both local and imported) share the same namespace and their
      definitions may only appear at the top level of the RELAX NG
      schema as children of the &lt;grammar&gt; element. Consequently,
      whenever YANG groupings and typedefs are translated into RELAX
      NG named pattern definitions, their MUST be disambiguated in
      order to avoid naming conflicts. The following name mangling
      procedure is suggested:
      </p>
<ul class="text">
<li>Mangled names of local groupings and typedefs start with a
        double underline character and names of all ancestor nodes in
        the YANG data tree are recorded in the mangled name, separated
        by double underlines.
</li>
<li>Mangled names of imported groupings and typedefs starts
        with the name of the modules where they are defined followed
        by double underline followed by the local name of the grouping
        or typedef.
</li>
</ul>

<p>For example, YANG content
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
import "inet-types" {
  prefix "inet";
}
grouping "grp1" {
  leaf "void" {
    type "empty";
  }
}
container "cont" {
  grouping "grp2" {
    leaf "address" {
      type "inet:ip-address";
    }
  }
  uses "grp1";
  uses "grp2";
}</pre></div>
<p>would result in the following definitions of RELAX NG named
      patterns:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;define name="__grp1"&gt;
  &lt;optional&gt;
    &lt;element name="void"&gt;
      &lt;empty/&gt;
    &lt;/element&gt;
  &lt;/optional&gt;
&lt;/define&gt;

&lt;define name="__cont__grp2"&gt;
  &lt;element name="address"&gt;
    &lt;ref name="inet-types__ip-address"/&gt;
  &lt;/element&gt;
&lt;/define&gt;

&lt;define name="inet-types__ip-address"&gt;
  ...
&lt;/define&gt;</pre></div>
<a name="issues"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Open Issues</h3>

<p>This section collects open issues that need further discussion
    within the NETMOD WG.
</p>
<a name="rootel"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
No Root or Multiple Root Nodes</h3>

<p>Well-formed XML documents must have exactly one root element
      (cf. <a class='info' href='#XML'>[XML]<span> (</span><span class='info'>Bray, T., Paoli, J., Sperberg-McQueen, C., Maler, E., and F. Yergeau, &ldquo;Extensible Markup Language (XML) 1.0 (Fourth Edition),&rdquo; August&nbsp;2006.</span><span>)</span></a>, Section 2.1). In contrast, YANG data
      models may also allow multiple root nodes or no root at
      all. Consequently, it is impossible to translate such data
      models to a valid RELAX NG schema.
</p>
<p>For multiple roots, the YANG specification <a class='info' href='#YANG'>[YANG]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A data modeling language for NETCONF,&rdquo; May&nbsp;2008.</span><span>)</span></a> recommends in Section 5.1.1 to use an extra
      conceptual root node such as &lt;data&gt; or
      &lt;config&gt;. While it is possible to include such a
      conceptual node in the RELAX NG schema, it would likely become
      an annoyance for data models with a single root. Therefore, a
      general solution to the problem of multiple roots should be
      devised.
</p>
<p><a class='info' href='#schema-lang'>Section&nbsp;3<span> (</span><span class='info'>Schema Languages</span><span>)</span></a> specifies that the resulting
      RELAX NG schema should not have a &lt;start&gt; element if the
      original YANG model contains no explicit data tree. Strictly
      speaking, this leads to an invalid RELAX NG schema (cf. <a class='info' href='#RNG'>[RNG]<span> (</span><span class='info'>ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 2:         Regular-Grammar-Based Validation - RELAX NG,&rdquo; 2002.</span><span>)</span></a>, Section 7.19) and some RELAX NG parsers indeed
      do complain about it. However, it is a common practice to
      prepare such "startless" RELAX NG schemas with definitions of
      reusable named patterns, see e.g., <a class='info' href='#Vli04'>[Vli04]<span> (</span><span class='info'>van der Vlist, E., &ldquo;RELAX NG,&rdquo; 2004.</span><span>)</span></a>,
      Chapter 10. It is thus probably no reason for concerns - it has
      to be understood that such schemas are not supposed to be used
      as stand-alone.
</p>
<p>However, a YANG data model may also allow empty instance
      documents if all nodes are optional, as discussed in <a class='info' href='#optcont'>Section&nbsp;2.1<span> (</span><span class='info'>Optional Content</span><span>)</span></a>. This leads to an invalid RELAX NG schema
      with the following &lt;start&gt; element:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;start&gt;
  &lt;optional&gt;
    ...
  &lt;/optional&gt;
&lt;/start&gt;</pre></div>
<p>The problems of no root or multiple root nodes can be solved
      by changing YANG specification in the sense that all instances
      of data models must be enclosed in a fixed and mandatory
      container, for example "netmod-data".
</p>
<a name="issues-ext"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
The extension Statement</h3>

<p>The 'extension' statement can be used for declaring new
      statements for the YANG language itself. Their keywords are
      qualified names carrying the namespace name of the module that
      defines them. It is not difficult to insert such extensions into
      the resulting RELAX NG schema because RELAX NG allows elements
      and attributes from different namespaces to be freely intermixed
      with its own elements and attributes. A straightforward option
      for translating such extensions is to generate the YIN
      representation of the extension (utilizing the 'argument'
      substatement of the 'extension' statement) and attach this XML
      subtree at the corresponding position in the RELAX NG schema
      tree.
</p>
<p>It is not clear though whether it is sensible to blindly copy
      such extensions without knowing their semantics. For example, if
      the extension utilizes paths referring to the YANG model tree,
      this paths may become incorrect when used as XPaths in the RELAX
      NG tree.
</p>
<a name="issues-rpc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
The rpc and notification statements</h3>

<p>In YANG, the 'rpc' statement declares the signature of a
      NETCONF RPC operation - method names, input and output
      parameters. With this information, one can create a pair of
      schemas for validating protocol data units with NETCONF
      &lt;rpc&gt; and &lt;rpc-reply&gt; messages, but these schemas
      would be different from the data model for the entire
      configuration datastore that the rest of the YANG module is
      about. It is therefore not very clear whether and how to use the
      'rpc' statement in the mapping algorithm.
</p>
<p>A completely analogical situation is with the 'notification'
      statement that defines a NETCONF notification.
</p>
<a name="issues-aug"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
The augment Statement</h3>

<p>For the translation to DSDL schemas, the most difficult YANG
      concept turns out to be the 'augment' statement. This is partly
      because it in fact serves several different purposes:
</p>
<p>At the top level of the YANG module hierarchy, the 'augment'
      statement may be used to add new nodes to a foreign schema that
      is defined in another module, which is imported in the module
      where the 'augment' statement appears (see the examples in
      Section 7.5.14 of <a class='info' href='#YANG'>[YANG]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A data modeling language for NETCONF,&rdquo; May&nbsp;2008.</span><span>)</span></a>). In the context of the
      augmenting module, this 'augment' has no effect since the
      'import' statement does not actually import any part of the
      foreign schema tree, just the top-level groupings and
      typedefs. Consequently, the algorithm that maps a single YANG
      module to DSDL should probably ignore it.
</p>
<p>Probably the most common use of the 'augment' statement is
      for applying a grouping with additional content that is added at
      a specified location inside the grouping, for example
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
grouping "def-coll" {
  container collector {
    leaf address { ... }
    leaf port { ... }
  }
}
...
container export {
  uses "def-coll";
  augment collector {
    leaf protocol { ... }
  }
}</pre></div>
<p>An minor difficulty here is that the relation between the
      'augment' statement and the corresponding 'uses' is only
      implicit. If there are multiple 'uses' statements, one first has
      to figure out which of them the 'augment' applies to, i.e., by
      inspecting all the groupings and finding the one that has
      "collector" as its top node.
</p>
<p>In RELAX NG, a similar effect can be achieved by combining
      pattern definitions, schematically
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;define name="def-coll"&gt;
  ...original content...
&lt;/define&gt;
...
&lt;define name="def-coll" combine="interleave"&gt;
  ...added content...
&lt;/define&gt;</pre></div>
<p>However, there are three notable differences:
      </p>
<ul class="text">
<li>It is the original definition that is extended. This means
        that every reference to the "def-coll" pattern will use the
        augmented content.
</li>
<li>The two definitions can only by combined at their top
        level. Therefore, the second pattern definition actually
        cannot add new content inside "collector". In order to be able
        to do that, the original content of "collector" must be put into
        a special named pattern (cf. <a class='info' href='#granularity'>Section&nbsp;4.2<span> (</span><span class='info'>Granularity</span><span>)</span></a>).
</li>
<li>The contents of the two definitions are "interleaved",
        which means that the original and added content may appear in
        any order and can even be intermixed. In contrast, the
        semantics of 'augment' in YANG dictates that the added content
        be placed after the original one.
</li>
</ul><p>
      
</p>
<p>As a result, the only way for translating 'uses' with
      'augment' to RELAX NG seems to be to copy the grouping content
      to the place where it is used and augment it there.
</p>
<p>Finally, another practical motivation for using 'augment' may
      be its 'when' substatement, which allows for conditional
      content, for example
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
augment "." {
  when "ifType='wireless'" {
    ...added content...
  }
}</pre></div>
<p>In DSDL schema languages, there is no direct way for
      specifying conditional content, but it could be simulated by
      adding Schematron rules that report an error if any part of the
      conditional content is present and the when condition is not
      satisfied.
</p>
<p>In author's opinion, the problems of the 'augment' statement
      mentioned above can be mitigated by making the following changes
      to YANG:
      </p>
<ul class="text">
<li>Reconsider the use of 'augment' for modifications of an
        external schema. It would be better to bind the modifications
        explicitly to the schema that is to be augmented.
</li>
<li>Allow 'augment' to appear only as a substatement of 'uses',
        along with refinements. This way, the relation between
        the 'augment' and 'uses' statements will be made explicit.
</li>
<li>Make the 'when' statement a general mechanism for including
        conditional content, even outside 'augment'.
</li>
</ul><p>


</p>
<a name="stmts"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Mapping Rules for YANG Statements</h3>

<p>This section describes in each of its subsections the mapping
    procedure for one YANG statement, as it is currently implemented
    in the YANG->DSDL translator plug-in for the <em>pyang</em> tool. It is a work in progress and the
    implementation is open for discussion and changes.
</p>
<p>In accord with the description of the mapping algorithm in
    <a class='info' href='#overview'>Section&nbsp;2<span> (</span><span class='info'>Overview of the Mapping Algorithm</span><span>)</span></a>, we assume the following context:
    </p>
<ul class="text">
<li>The data structure (or object) representing the YANG
      statement being mapped is stored in the "stmt" variable. In
      particular, "stmt.arg" is the argument of this statement.
</li>
<li>A pointer to the RELAX NG element that will become parent of
      the new XML fragment representing the translation of the current
      YANG statement is also available. Schematically, the context in
      the RELAX NG tree looks like this:
      <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:parent_element&gt;
  ... next new schema stuff comes here ...
&lt;/rng:parent_element&gt;</pre></div>
</li>
<li>When we say here that a new element is inserted, it means
      that it becomes a child of &lt;rng:parent_element&gt;. When we
      say that &lt;rng:new_element&gt; is inserted and becomes the new
      parent element, the situation changes as follows:
      <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:parent_element&gt;
  &lt;rng:new_element&gt;
  ... next new schema stuff comes here ...
  &lt;/rng:new_element&gt;
&lt;rng:parent_element&gt;</pre></div>
</li>
</ul><p>

</p>
<p>Throughout this section, we use qualified names for all XML
elements. The mapping of prefixes to namespace URIs is shown in <a class='info' href='#tab-ns'>Table&nbsp;1</a>.
</p><br /><hr class="insert" />
<a name="tab-ns"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Prefix</th><th align="left">Namespace URI</th></tr>
<tr>
<td align="left">a</td>
<td align="left">http://relaxng.org/ns/compatibility/annotations/1.0</td>
</tr>
<tr>
<td align="left">dc</td>
<td align="left">http://purl.org/dc/terms</td>
</tr>
<tr>
<td align="left">dsrl</td>
<td align="left">http://purl.oclc.org/dsdl/dsrl</td>
</tr>
<tr>
<td align="left">nm</td>
<td align="left">urn:ietf:params:xml:ns:netmod:dsdl-attrib:1</td>
</tr>
<tr>
<td align="left">sch</td>
<td align="left">http://purl.oclc.org/dsdl/schematron</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>In order to avoid unnecessary complications, this section describes
the mapping algorithm for single-file output, i.e., alternative <a class='info' href='#onesch'>2</a> in <a class='info' href='#overview'>Section&nbsp;2<span> (</span><span class='info'>Overview of the Mapping Algorithm</span><span>)</span></a>.
</p>
<a name="anyxml"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
The anyxml Statement</h3>

<p>At the first occurrence of this statement, the following
      pattern definition is added to the RELAX NG schema (cf.  <a class='info' href='#Vli04'>[Vli04]<span> (</span><span class='info'>van der Vlist, E., &ldquo;RELAX NG,&rdquo; 2004.</span><span>)</span></a>, p. 172):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;define name="__anyxml__"&gt;
  &lt;zeroOrMore&gt;
    &lt;choice&gt;
      &lt;attribute&gt;
        &lt;anyName/&gt;
      &lt;/attribute&gt;
      &lt;element&gt;
        &lt;anyName/&gt;
        &lt;ref name="__anyxml__"/&gt;
      &lt;/element&gt;
      &lt;text/&gt;
    &lt;/choice&gt;
  &lt;/zeroOrMore&gt;
&lt;/define&gt;</pre></div>
<p>Reference to this pattern is then inserted for
      all 'anyxml' statements.
</p>
<a name="argument-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
The argument Statement</h3>

<p>Not implemented, see <a class='info' href='#issues-ext'>Section&nbsp;5.2<span> (</span><span class='info'>The extension Statement</span><span>)</span></a>.
</p>
<a name="augment-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
The augment Statement</h3>

<p>Not implemented, see <a class='info' href='#issues-aug'>Section&nbsp;5.4<span> (</span><span class='info'>The augment Statement</span><span>)</span></a>.
</p>
<a name="belongs-to-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
The belongs-to Statement</h3>

<p>Insert Dublin Core metadata term &lt;dc:isPartOf&gt;.
</p>
<a name="bit-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.5"></a><h3>6.5.&nbsp;
The bit Statement</h3>

<p>Handled within the "bits" type, see <a class='info' href='#bits-type'>Section&nbsp;6.47.4<span> (</span><span class='info'>The bits Type</span><span>)</span></a>.
</p>
<a name="case-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.6"></a><h3>6.6.&nbsp;
The case Statement</h3>

<p>Insert &lt;rng:group&gt; element and handle all
      substatements.
</p>
<a name="choice-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.7"></a><h3>6.7.&nbsp;
The choice Statement</h3>

<p>Insert &lt;rng:choice&gt; element and handle all
      substatements.
</p>
<a name="config-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.8"></a><h3>6.8.&nbsp;
The config Statement</h3>

<p>Attach attribute @nm:config to the parent element and use
      stmt.arg as its value.
</p>
<a name="contact-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.9"></a><h3>6.9.&nbsp;
The contact Statement</h3>

<p>Insert Dublin Core metadata term &lt;dc:contributor&gt; and
      use stmt.arg as its content.
</p>
<a name="container-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.10"></a><h3>6.10.&nbsp;
The container Statement</h3>

<p>Using the procedure outlined in <a class='info' href='#optcont'>Section&nbsp;2.1<span> (</span><span class='info'>Optional Content</span><span>)</span></a>,
      determine whether the container is optional, and if so, insert
      the &lt;rng:optional&gt; element and make it the new parent
      element.
</p>
<p>Then insert &lt;rng:element&gt; element at the current
      position and use stmt.arg as the value of its @name
      attribute.
</p>
<p>Then handle all substatements.
</p>
<a name="default-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.11"></a><h3>6.11.&nbsp;
The default Statement</h3>

<p>Insert element &lt;dsrl:default-content&gt; with stmt.arg as
      its content.
</p>
<a name="description-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.12"></a><h3>6.12.&nbsp;
The description Statement</h3>

<p>If the statement is at the module top level, insert Dublin
      Core metadata term &lt;dc:description&gt; and use stmt.arg as
      its content.
</p>
<p>Otherwise, insert DTD compatibility element
      &lt;a:documentation&gt;. In order to get properly formatted in
      the RELAX NG compact syntax, this element must be inserted as
      the first child of the parent element.
</p>
<a name="enum-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.13"></a><h3>6.13.&nbsp;
The enum Statement</h3>

<p>Insert &lt;rng:value&gt; element and use stmt.arg as its
      content.
</p>
<p>Then handle the 'status' substatement. Other substatements
      ('value', 'description' and 'reference') are ignored because the
      &lt;rng:value&gt; element cannot contain foreign elements, see
      <a class='info' href='#RNG'>[RNG]<span> (</span><span class='info'>ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 2:         Regular-Grammar-Based Validation - RELAX NG,&rdquo; 2002.</span><span>)</span></a>, Section 6.
</p>
<a name="error-app-tag-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.14"></a><h3>6.14.&nbsp;
The error-app-tag Statement</h3>

<p>Not implemented.
</p>
<a name="error-message-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.15"></a><h3>6.15.&nbsp;
The error-message Statement</h3>

<p>Handled only within the 'must' statement, see <a class='info' href='#must-stmt'>Section&nbsp;6.30<span> (</span><span class='info'>The must Statement</span><span>)</span></a>. Ignored in other contexts.
</p>
<a name="extension-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.16"></a><h3>6.16.&nbsp;
The extension Statement</h3>

<p>Not implemented, see <a class='info' href='#issues-ext'>Section&nbsp;5.2<span> (</span><span class='info'>The extension Statement</span><span>)</span></a>.
</p>
<a name="grouping-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.17"></a><h3>6.17.&nbsp;
The grouping Statement</h3>

<p>Insert &lt;rng:define&gt; element and set the value of its
      @name attribute to stmt.arg with prepended full path, i.e.,
      names of all ancestor nodes in the YANG schema tree separated by
      double underlines - see <a class='info' href='#mangling'>Section&nbsp;4.3<span> (</span><span class='info'>Mangled Names of RELAX NG Named Patterns</span><span>)</span></a>.
</p>
<p>Then handle all substatements.
</p>
<a name="import-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.18"></a><h3>6.18.&nbsp;
The import Statement</h3>

<p>Ignored, as it is assumed that all imported modules are
      processed by the YANG parser and made available to the mapping
      algorithm.
</p>
<a name="include-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.19"></a><h3>6.19.&nbsp;
The include Statement</h3>

<p>Insert &lt;rng:include&gt; and set the value of its @href attribute
      to stmt.arg concatenated with the file extension ".rng".
</p>
<a name="input-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.20"></a><h3>6.20.&nbsp;
The input Statement</h3>

<p>Not implemented, see <a class='info' href='#issues-rpc'>Section&nbsp;5.3<span> (</span><span class='info'>The rpc and notification statements</span><span>)</span></a>.
</p>
<a name="key-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.21"></a><h3>6.21.&nbsp;
The key Statement</h3>

<p>Attach attribute @nm:key to the parent element and use
      stmt.arg as its value.
</p>
<a name="leaf-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.22"></a><h3>6.22.&nbsp;
The leaf Statement</h3>

<p>Unless there is the "mandatory true;" substatement or unless
      an enclosing list declares this leaf among its keys, insert
      &lt;rng:optional&gt; element and make it the new parent
      element.
</p>
<p>Then insert &lt;rng:element&gt; element and use stmt.arg as the value
      of its @name attribute.
</p>
<p>Then handle all substatements.
</p>
<a name="leaf-list-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.23"></a><h3>6.23.&nbsp;
The leaf-list Statement</h3>

<p>If there is a 'min-elements' substatement with argument value
      greater than zero, insert &lt;rng:oneOrMore&gt; and make it the
      new parent element. Otherwise insert &lt;rng:zeroOrMore&gt; and make it
      the new parent element.
</p>
<p>Then insert &lt;rng:element&gt; and use stmt.arg as its value. If
      there is a 'min-elements' substatement with argument value
      greater than zero, attach attribute @nm:min-elements to the
      &lt;rng:element&gt; element and use the argument of the 'min-elements'
      statement as its value. If there is a 'max-elements'
      substatement, attach attribute @nm:max-elements to the
      &lt;rng:element&gt; element and use the argument of the 'max-elements'
      statement as its value. If there is an 'ordered-by'
      substatement, attach attribute @nm:ordered-by to the &lt;rng:element
&gt;      element and use the argument of the 'ordered-by' statement as
      its value.
</p>
<p>Then handle all remaining substatements.
</p>
<a name="length-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.24"></a><h3>6.24.&nbsp;
The length Statement</h3>

<p>Handled within the "string" type, see <a class='info' href='#string-type'>Section&nbsp;6.47.8<span> (</span><span class='info'>The string Type</span><span>)</span></a>.
</p>
<a name="list-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.25"></a><h3>6.25.&nbsp;
The list Statement</h3>

<p>Handled exactly as the 'leaf-list' statement, see <a class='info' href='#leaf-list-stmt'>Section&nbsp;6.23<span> (</span><span class='info'>The leaf-list Statement</span><span>)</span></a>.
</p>
<a name="mandatory-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.26"></a><h3>6.26.&nbsp;
The mandatory Statement</h3>

<p>Handled within the 'leaf' statement, see <a class='info' href='#leaf-stmt'>Section&nbsp;6.22<span> (</span><span class='info'>The leaf Statement</span><span>)</span></a>.
</p>
<a name="max-elements-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.27"></a><h3>6.27.&nbsp;
The max-elements Statement</h3>

<p>Handled within 'leaf-list' or 'list' statements, see <a class='info' href='#leaf-list-stmt'>Section&nbsp;6.23<span> (</span><span class='info'>The leaf-list Statement</span><span>)</span></a>.
</p>
<a name="min-elements-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.28"></a><h3>6.28.&nbsp;
The min-elements Statement</h3>

<p>Handled within 'leaf-list' or 'list' statements, see <a class='info' href='#leaf-list-stmt'>Section&nbsp;6.23<span> (</span><span class='info'>The leaf-list Statement</span><span>)</span></a>.
</p>
<a name="module-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.29"></a><h3>6.29.&nbsp;
The module Statement</h3>

<p>This statement is not specifically handled. The mapping
      algorithm starts with its substatements.
</p>
<a name="must-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.30"></a><h3>6.30.&nbsp;
The must Statement</h3>

<p>Insert &lt;sch:assert&gt; element. The value of its @test
      attribute is set to stmt.arg in which all occurrences of the
      string "$this" are replaced by "." (single dot). If there is an
      'error-message' substatement, its argument value is used as the
      content of &lt;sch:assert&gt;, otherwise the &lt;sch:assert&gt;
      element is empty.
</p>
<a name="namespace-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.31"></a><h3>6.31.&nbsp;
The namespace Statement</h3>

<p>Attach @ns attribute to the &lt;rng:grammar&gt; element (the root
      of the RELAX NG schema) and use stmt.arg as its value.
</p>
<a name="notification-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.32"></a><h3>6.32.&nbsp;
The notification Statement</h3>

<p>Not implemented, see <a class='info' href='#issues-rpc'>Section&nbsp;5.3<span> (</span><span class='info'>The rpc and notification statements</span><span>)</span></a>.
</p>
<a name="ordered-by-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.33"></a><h3>6.33.&nbsp;
The ordered-by Statement</h3>

<p>Handled within 'leaf-list' and 'list' statements, see <a class='info' href='#leaf-list-stmt'>Section&nbsp;6.23<span> (</span><span class='info'>The leaf-list Statement</span><span>)</span></a>.
</p>
<a name="organization-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.34"></a><h3>6.34.&nbsp;
The organization Statement</h3>

<p>Insert Dublin Core metadata term &lt;dc:creator&gt; and
      use stmt.arg as its content.
</p>
<a name="output-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.35"></a><h3>6.35.&nbsp;
The output Statement</h3>

<p>Not implemented, see <a class='info' href='#issues-rpc'>Section&nbsp;5.3<span> (</span><span class='info'>The rpc and notification statements</span><span>)</span></a>.
</p>
<a name="path-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.36"></a><h3>6.36.&nbsp;
The path Statement</h3>

<p>Handled within "keyref" type, see <a class='info' href='#keyref-type'>Section&nbsp;6.47.6<span> (</span><span class='info'>The keyref type</span><span>)</span></a>.
</p>
<a name="pattern-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.37"></a><h3>6.37.&nbsp;
The pattern Statement</h3>

<p>Handled within "string" type, see <a class='info' href='#string-type'>Section&nbsp;6.47.8<span> (</span><span class='info'>The string Type</span><span>)</span></a>.
</p>
<a name="position-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.38"></a><h3>6.38.&nbsp;
The position Statement</h3>

<p>Not implemented.
</p>
<a name="prefix-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.39"></a><h3>6.39.&nbsp;
The prefix Statement</h3>

<p>Not implemented. In RELAX NG, the elements of the target
      namespace are unprefixed.
</p>
<a name="presence-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.40"></a><h3>6.40.&nbsp;
The presence Statement</h3>

<p>Handled within 'container' statement, see <a class='info' href='#container-stmt'>Section&nbsp;6.10<span> (</span><span class='info'>The container Statement</span><span>)</span></a> and also <a class='info' href='#optcont'>Section&nbsp;2.1<span> (</span><span class='info'>Optional Content</span><span>)</span></a>.
</p>
<a name="range-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.41"></a><h3>6.41.&nbsp;
The range Statement</h3>

<p>Handled within numeric types, see <a class='info' href='#numeric-types'>Section&nbsp;6.47.7<span> (</span><span class='info'>The numeric Types</span><span>)</span></a>.
</p>
<a name="reference-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.42"></a><h3>6.42.&nbsp;
The reference Statement</h3>

<p>If this statement is at module top level, insert Dublin Core
      metadata term &lt;dc:BibliographicResource&gt; and use stmt.arg
      as its content.
</p>
<p>Otherwise insert &lt;a:documentation&gt;
      and use stmt.arg as its content. Within parent element children,
      insert it as the last of &lt;a:documentation&gt; elements (i.e.,
      after translations of 'description' statements), but before any
      other subelements.
</p>
<a name="revision-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.43"></a><h3>6.43.&nbsp;
The revision Statement</h3>

<p>Insert Dublin Core metadata term &lt;dc:issued&gt; and
      use stmt.arg as its content.
</p>
<a name="rpc-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.44"></a><h3>6.44.&nbsp;
The rpc Statement</h3>

<p>Not implemented, see <a class='info' href='#issues-rpc'>Section&nbsp;5.3<span> (</span><span class='info'>The rpc and notification statements</span><span>)</span></a>.
</p>
<a name="status-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.45"></a><h3>6.45.&nbsp;
The status Statement</h3>

<p>Attach attribute @nm:status to the parent element and use
      stmt.arg as its value.
</p>
<a name="submodule-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.46"></a><h3>6.46.&nbsp;
The submodule Statement</h3>

<p>This statement is not specifically handled. The mapping
      algorithm starts with its substatements.
</p>
<a name="type-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.47"></a><h3>6.47.&nbsp;
The type Statement</h3>

<p>References to derived types are handled in the same way as
      references to groupings via the 'uses' statement (<a class='info' href='#uses-stmt'>Section&nbsp;6.51<span> (</span><span class='info'>The uses Statement</span><span>)</span></a>): &lt;rng:ref&gt; element is inserted with a
      properly mangled name and definitions of derived types are copied
      from external modules as necessary.
</p>
<p>Most YANG built-in types have an equivalent in the XSD
      datatype library <a class='info' href='#XSD-D'>[XSD&#8209;D]<span> (</span><span class='info'>Biron, P. and A. Malhotra, &ldquo;XML Schema Part 2: Datatypes Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a> as shown in <a class='info' href='#tab-types'>Table&nbsp;2<span> (</span><span class='info'>Selected datatypes from the W3C XML Schema Type Library</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="tab-types"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">YANG type</th><th align="left">XSD type</th><th align="left">Meaning</th></tr>
<tr>
<td align="left">int8</td>
<td align="left">byte</td>
<td align="left">8-bit integer value</td>
</tr>
<tr>
<td align="left">int16</td>
<td align="left">short</td>
<td align="left">16-bit integer value</td>
</tr>
<tr>
<td align="left">int32</td>
<td align="left">int</td>
<td align="left">32-bit integer value</td>
</tr>
<tr>
<td align="left">int64</td>
<td align="left">long</td>
<td align="left">64-bit integer value</td>
</tr>
<tr>
<td align="left">uint8</td>
<td align="left">unsignedByte</td>
<td align="left">8-bit unsigned integer value</td>
</tr>
<tr>
<td align="left">uint16</td>
<td align="left">unsignedShort</td>
<td align="left">16-bit unsigned integer value</td>
</tr>
<tr>
<td align="left">uint32</td>
<td align="left">unsignedInt</td>
<td align="left">32-bit unsigned integer value</td>
</tr>
<tr>
<td align="left">uint64</td>
<td align="left">unsignedLong</td>
<td align="left">64-bit unsigned integer value</td>
</tr>
<tr>
<td align="left">float32</td>
<td align="left">float</td>
<td align="left">32-bit IEEE floating-point value</td>
</tr>
<tr>
<td align="left">float64</td>
<td align="left">double</td>
<td align="left">64-bit IEEE floating-point value</td>
</tr>
<tr>
<td align="left">string</td>
<td align="left">string</td>
<td align="left">character string</td>
</tr>
<tr>
<td align="left">boolean</td>
<td align="left">boolean</td>
<td align="left">"true" or "false"</td>
</tr>
<tr>
<td align="left">binary</td>
<td align="left">base64Binary</td>
<td align="left">binary data in base64 encoding</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 2: Selected datatypes from the W3C XML Schema Type Library&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Details about the mapping of individual YANG built-in types
      are given in the following subsections.
</p>
<a name="empty-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.47.1"></a><h3>6.47.1.&nbsp;
The empty Type</h3>

<p>Insert empty &lt;rng:empty&gt; element.
</p>
<a name="boobi-types"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.47.2"></a><h3>6.47.2.&nbsp;
The boolean and binary Types</h3>

<p>These two built-in types do not allow any restrictions and
        are mapped simply by inserting &lt;rng:data&gt; element whose @type
        attribute is set to stmt.arg mapped according to <a class='info' href='#tab-types'>Table&nbsp;2<span> (</span><span class='info'>Selected datatypes from the W3C XML Schema Type Library</span><span>)</span></a>.
</p>
<a name="ii-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.47.3"></a><h3>6.47.3.&nbsp;
The instance identifier Type</h3>

<p>This YANG built-in type has no equivalent in the XSD
        datatype library and is mapped to the RELAX NG "string"
        type:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:data type="string"/&gt;</pre></div>
<a name="bits-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.47.4"></a><h3>6.47.4.&nbsp;
The bits Type</h3>

<p>Insert &lt;rng:list&gt; element and insert under it for each 'bit'
        substatement the following XML fragment:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:optional&gt;
  &lt;rng:value&gt;bit_name&lt;/rng:value&gt;
&lt;/rng:optional&gt;</pre></div>
<p>where bit_name is the name of the bit as found in the
        argument of the corresponding 'bit' statement.
</p>
<a name="enuun-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.47.5"></a><h3>6.47.5.&nbsp;
The enumeration and union Types</h3>

<p>Insert &lt;rng:choice&gt; and handle all substatements.
</p>
<a name="keyref-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.47.6"></a><h3>6.47.6.&nbsp;
The keyref type</h3>

<p>As there is no suitable counterpart for the YANG built-in
        "keyref" type in the XSD datatype library, this type is mapped
        to "string" by inserting &lt;rng:data&gt; element with @type attribute
        set to "string". In addition, &lt;sch:assert&gt; element is
        inserted as child of &lt;rng:data,&gt; which checks that a 'list' entry
        with the corresponding value of the key exists.
</p>
<a name="numeric-types"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.47.7"></a><h3>6.47.7.&nbsp;
The numeric Types</h3>

<p>YANG built-in numeric types are "int8", "int16", "int32",
        "int64", "uint8", "uint16", "uint32", "uint64", "float32" and
        "float64". They are handled by inserting &lt;rng:data&gt; element with
        @type attribute set to stmt.arg mapped according to <a class='info' href='#tab-types'>Table&nbsp;2<span> (</span><span class='info'>Selected datatypes from the W3C XML Schema Type Library</span><span>)</span></a>.
</p>
<p>All numeric types support the 'range' restriction, which is
        handled in the following way:
        </p>
<ul class="text">
<li>If the range expression consists of a single range part,
          insert the pair of RELAX NG facets
          <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:param name="minInclusive"&gt;...&lt;/rng:param&gt;</pre></div>
          and
          <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:param name="maxInclusive"&gt;...&lt;/rng:param&gt;</pre></div>
          Their contents are the lower and upper bound of the range
          part, respectively. If the range part consists of a single
          number, both "minInclusive" and "maxInclusive" facets use
          this value as their content. If the lower bound is "min",
          the "minInclusive" facet is omitted and if the upper bound
          is "max", the "maxInclusive" facet is omitted.
</li>
<li>If the range expression has multiple parts separated by
          "|", then repeat the &lt;rng:data&gt; element once for every
          range part and wrap them all in &lt;rng:choice&gt;
          element. Inside each &lt;rng:data&gt; element, the
          corresponding range part is handled as described in the
          previous item.
</li>
</ul><p>
        
</p>
<p>For example, the 'typedef' statement
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
typedef rt {
  type int32 {
    range "-6378..0|42|100..max";
  }
}</pre></div>
<p>translates to the following RELAX NG fragment:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:define name="__rt"&gt;
  &lt;rng:choice&gt;
    &lt;rng:data type="int"&gt;
      &lt;rng:param name="minInclusive"&gt;-6378&lt;/rng:param&gt;
      &lt;rng:param name="maxInclusive"&gt;0&lt;/rng:param&gt;
    &lt;/rng:data&gt;
    &lt;rng:data type="int"&gt;
      &lt;rng:param name="minInclusive"&gt;42&lt;/rng:param&gt;
      &lt;rng:param name="maxInclusive"&gt;42&lt;/rng:param&gt;
    &lt;/rng:data&gt;
    &lt;rng:data type="int"&gt;
      &lt;rng:param name="minInclusive"&gt;100&lt;/rng:param&gt;
    &lt;/rng:data&gt;
  &lt;/rng:choice&gt;
&lt;/rng:define&gt;</pre></div>
<a name="string-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.47.8"></a><h3>6.47.8.&nbsp;
The string Type</h3>

<p>This type is mapped by inserting the &lt;rng:data&gt; element with
        the @type attribute set to "string".
</p>
<p>For the 'pattern' restriction, insert &lt;rng:param&gt; element
        with @name attribute set to "pattern". The argument of the
        'pattern' statement (regular expression) becomes the content
        of this element.
</p>
<p>The 'length' restriction is handled in the same way as the
        'range' restriction for the numeric types, with the additional
        twist that if the length expression has multiple parts, the
        "pattern" facet
        </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:param name="pattern"&gt;...&lt;/rng:param&gt;</pre></div><p>

        if there is any, must be repeated inside each copy of the
        &lt;rng:data&gt; element, i.e., for each length part.
</p>
<a name="typedef-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.48"></a><h3>6.48.&nbsp;
The typedef Statement</h3>

<p>Handled exactly as the 'grouping' statement, see <a class='info' href='#grouping-stmt'>Section&nbsp;6.17<span> (</span><span class='info'>The grouping Statement</span><span>)</span></a>.
</p>
<a name="unique-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.49"></a><h3>6.49.&nbsp;
The unique Statement</h3>

<p>Insert &lt;sch:assert&gt; element. Its test checks that no
      two list items (sibling elements) have the same combination of
      values of leafs listed in stmt.arg. The content of the
      &lt;sch:assert&gt; element, i.e., the error message, is formed
      by a concatenation of "Not unique: " and stmt.arg.
</p>
<a name="units-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.50"></a><h3>6.50.&nbsp;
The units Statement</h3>

<p>Attach attribute @nm:units to the parent element and use
      stmt.arg as its value.
</p>
<a name="uses-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.51"></a><h3>6.51.&nbsp;
The uses Statement</h3>

<p>
        </p>
<ol class="text">
<li>Check whether the grouping that the statement refers to
          is defined in the same module that is being translated. If
          it is so, go to step <a class='info' href='#putref'>4</a>.
</li>
<li>[the grouping is defined in another module] If the same
          grouping has been already used in the module that is being
          translated, go to step <a class='info' href='#putref'>4</a>.
</li>
<li>[first use of an external grouping] Copy the grouping
          definition from the external module and install its
          translation according to <a class='info' href='#grouping-stmt'>Section&nbsp;6.17<span> (</span><span class='info'>The grouping Statement</span><span>)</span></a>  with a
          properly mangled name (see <a class='info' href='#mangling'>Section&nbsp;4.3<span> (</span><span class='info'>Mangled Names of RELAX NG Named Patterns</span><span>)</span></a>).
</li>
<li>Insert &lt;rng:ref&gt; element and set its @name
          attribute to stmt.arg after performing the name mangling
          procedure described in <a class='info' href='#mangling'>Section&nbsp;4.3<span> (</span><span class='info'>Mangled Names of RELAX NG Named Patterns</span><span>)</span></a>, taking
          into account whether the grouping is local or external.
</li>
</ol><p>
      
</p>
<p>Handling of substatements, and in particular the refinement
      statements, is not implemented yet.
</p>
<a name="value-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.52"></a><h3>6.52.&nbsp;
The value Statement</h3>

<p>Not implemented.
</p>
<a name="when-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.53"></a><h3>6.53.&nbsp;
The when Statement</h3>

<p>Not implemented, see <a class='info' href='#issues-aug'>Section&nbsp;5.4<span> (</span><span class='info'>The augment Statement</span><span>)</span></a>.
</p>
<a name="yang-version-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.54"></a><h3>6.54.&nbsp;
The yang-version Statement</h3>

<p>Not implemented. Its stmt.arg may be checked by the mapping
      algorithm in order to make sure that the module is compatible.
</p>
<a name="yin-element-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.55"></a><h3>6.55.&nbsp;
The yin-element Statement</h3>

<p>Not implemented, see <a class='info' href='#issues-ext'>Section&nbsp;5.2<span> (</span><span class='info'>The extension Statement</span><span>)</span></a>.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.&nbsp;References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="XML">[XML]</a></td>
<td class="author-text">Bray, T., Paoli, J., Sperberg-McQueen, C., Maler, E., and F. Yergeau, &ldquo;<a href="http://www.w3.org/TR/2006/REC-xml-20060816">Extensible Markup Language (XML) 1.0 (Fourth Edition)</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-xml-20060816, August&nbsp;2006 (<a href="http://www.w3.org/TR/2006/REC-xml-20060816">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="XSD-D">[XSD-D]</a></td>
<td class="author-text">Biron, P. and A. Malhotra, &ldquo;<a href="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028">XML Schema Part 2: Datatypes Second Edition</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-xmlschema-2-20041028, October&nbsp;2004 (<a href="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="YANG">[YANG]</a></td>
<td class="author-text">Bjorklund, M., Ed., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-netmod-yang-00.txt">YANG - A data modeling language for NETCONF</a>,&rdquo; draft-ietf-netmod-yang-00 (work in progress), May&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-netmod-yang-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RNG-CS">[RNG-CS]</a></td>
<td class="author-text">Clark, J., Ed., &ldquo;<a href="http://www.oasis-open.org/committees/relax-ng/compact-20021121.html">RELAX NG Compact Syntax</a>,&rdquo; OASIS Committee Specification&nbsp;21 November 2002, November&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="RNG-DTD">[RNG-DTD]</a></td>
<td class="author-text">Clark, J., Ed. and M. Murata, Ed., &ldquo;<a href="http://relaxng.org/compatibility-20011203.html">RELAX NG DTD Compatibility</a>,&rdquo; OASIS Committee Specification&nbsp;3 December 2001, December&nbsp;2001.</td></tr>
<tr><td class="author-text" valign="top"><a name="DCMT">[DCMT]</a></td>
<td class="author-text">DCMI, &ldquo;<a href="http://www.dublincore.org/documents/dcmi-terms/">DCMI Metadata Terms</a>,&rdquo; January&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3216">[RFC3216]</a></td>
<td class="author-text">Elliott, C., Harrington, D., Jason, J., Schoenwaelder, J., Strauss, F., and W. Weiss, &ldquo;<a href="http://tools.ietf.org/html/rfc3216">SMIng Objectives</a>,&rdquo; RFC&nbsp;3216, December&nbsp;2001 (<a href="http://www.ietf.org/rfc/rfc3216.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="DSDL">[DSDL]</a></td>
<td class="author-text">ISO/IEC, &ldquo;<a href="http://www.dsdl.org/0567.pdf">Document Schema Definition Languages (DSDL) - Part 1:
        Overview</a>,&rdquo; ISO/IEC&nbsp;19757-1, 11&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="RNG">[RNG]</a></td>
<td class="author-text">ISO/IEC, &ldquo;<a href="http://www.dsdl.org/relaxng-is.pdf">Document Schema Definition Languages (DSDL) - Part 2:
        Regular-Grammar-Based Validation - RELAX NG</a>,&rdquo; ISO/IEC&nbsp;19757-2, 2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="Schtrn">[Schtrn]</a></td>
<td class="author-text">ISO/IEC, &ldquo;<a href="http://www.dsdl.org/0524.pdf">Document Schema Definition Languages (DSDL) - Part 3:
        Rule-Based Validation - Schematron</a>,&rdquo; ISO/IEC&nbsp;19757-3, 2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="DSRL">[DSRL]</a></td>
<td class="author-text">ISO/IEC, &ldquo;<a href="http://www.dsdl.org/0792.pdf">Document Schema Definition Languages (DSDL) - Part 8:
        Document Schema Renaming Language - DSRL</a>,&rdquo; ISO/IEC&nbsp;19757-8, 2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="Vli04">[Vli04]</a></td>
<td class="author-text">van der Vlist, E., &ldquo;RELAX NG,&rdquo; O'Reilly&nbsp;, 2004.</td></tr>
</table>

<a name="app-dhcp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Translation of the DHCP Data Model</h3>

<p>This appendix demonstrates output of the YANG->DSDL mapping
    algorithm applied to the "canonical" <a href='http://www.yang-central.org/twiki/bin/view/Main/DhcpTutorial'>DHCP
    tutorial</a> data model. It is presented as a single-file
    annotated RELAX NG schema (output alternative <a class='info' href='#multsch'>1</a> in <a class='info' href='#overview'>Section&nbsp;2<span> (</span><span class='info'>Overview of the Mapping Algorithm</span><span>)</span></a>).
</p>
<p><a class='info' href='#xml-synt'>Appendix&nbsp;A.1<span> (</span><span class='info'>XML Syntax</span><span>)</span></a> shows the result of the mapping
    algorithm in the RELAX NG XML syntax and <a class='info' href='#comp-synt'>Appendix&nbsp;A.2<span> (</span><span class='info'>Compact Syntax</span><span>)</span></a> the same in the compact syntax, which was
    obtained using the <a href='http://thaiopensource.com/relaxng/trang.html'>Trang
    tool</a>.
</p>
<p>The long regular expressions for IP addresses etc.  would
    exceed the limit of 72 characters per line, so they were replaced
    by a dummy text. Other than that, the results of the automatic
    translations were not changed.
</p>
<a name="xml-synt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>A.1.&nbsp;
XML Syntax</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
         xmlns:dc="http://purl.org/dc/terms"
         xmlns:dsrl="http://purl.oclc.org/dsdl/dsrl"
         xmlns:nm="urn:ietf:params:xml:ns:netmod:dsdl-attrib:1"
         xmlns:sch="http://purl.oclc.org/dsdl/schematron"
         datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes"
         ns="http://example.com/ns/dhcp"&gt;
  &lt;dc:creator&gt;yang-central.org&lt;/dc:creator&gt;
  &lt;dc:description&gt;Partial data model for DHCP, based on the config of
  the ISC DHCP reference implementation.&lt;/dc:description&gt;
  &lt;dc:source&gt;YANG module 'dhcp' (automatic translation)&lt;/dc:source&gt;
  &lt;start&gt;
    &lt;optional&gt;
      &lt;element name="dhcp"&gt;
        &lt;a:documentation&gt;configuration and operational parameters for
        a DHCP server.&lt;/a:documentation&gt;
        &lt;optional&gt;
          &lt;element name="max-lease-time" nm:units="seconds"&gt;
            &lt;data type="unsignedInt"/&gt;
            &lt;dsrl:default-content&gt;7200&lt;/dsrl:default-content&gt;
          &lt;/element&gt;
        &lt;/optional&gt;
        &lt;optional&gt;
          &lt;element name="default-lease-time" nm:units="seconds"&gt;
            &lt;data type="unsignedInt"/&gt;
            &lt;sch:assert test=". &amp;lt;= ../max-lease-time"&gt;The
            default-lease-time must be less than
            max-lease-time&lt;/sch:assert&gt;
            &lt;dsrl:default-content&gt;600&lt;/dsrl:default-content&gt;
          &lt;/element&gt;
        &lt;/optional&gt;
        &lt;ref name="__subnet-list"/&gt;
        &lt;optional&gt;
          &lt;element name="shared-networks"&gt;
            &lt;zeroOrMore&gt;
              &lt;element name="shared-network" nm:key="name"&gt;
                &lt;element name="name"&gt;
                  &lt;data type="string"/&gt;
                &lt;/element&gt;
                &lt;ref name="__subnet-list"/&gt;
              &lt;/element&gt;
            &lt;/zeroOrMore&gt;
          &lt;/element&gt;
        &lt;/optional&gt;
        &lt;optional&gt;
          &lt;element name="status" nm:config="false"&gt;
            &lt;zeroOrMore&gt;
              &lt;element name="leases" nm:key="address"&gt;
                &lt;element name="address"&gt;
                  &lt;ref name="inet-types__ip-address"/&gt;
                &lt;/element&gt;
                &lt;optional&gt;
                  &lt;element name="starts"&gt;
                    &lt;ref name="yang-types__date-and-time"/&gt;
                  &lt;/element&gt;
                &lt;/optional&gt;
                &lt;optional&gt;
                  &lt;element name="ends"&gt;
                    &lt;ref name="yang-types__date-and-time"/&gt;
                  &lt;/element&gt;
                &lt;/optional&gt;
                &lt;optional&gt;
                  &lt;element name="hardware"&gt;
                    &lt;optional&gt;
                      &lt;element name="type"&gt;
                        &lt;choice&gt;
                          &lt;value&gt;ethernet&lt;/value&gt;
                          &lt;value&gt;token-ring&lt;/value&gt;
                          &lt;value&gt;fddi&lt;/value&gt;
                        &lt;/choice&gt;
                      &lt;/element&gt;
                    &lt;/optional&gt;
                    &lt;optional&gt;
                      &lt;element name="address"&gt;
                        &lt;ref name="yang-types__phys-address"/&gt;
                      &lt;/element&gt;
                    &lt;/optional&gt;
                  &lt;/element&gt;
                &lt;/optional&gt;
              &lt;/element&gt;
            &lt;/zeroOrMore&gt;
          &lt;/element&gt;
        &lt;/optional&gt;
      &lt;/element&gt;
    &lt;/optional&gt;
  &lt;/start&gt;
  &lt;define name="inet-types__ip-address"&gt;
    &lt;choice&gt;
      &lt;ref name="inet-types__ipv4-address"/&gt;
      &lt;ref name="inet-types__ipv6-address"/&gt;
    &lt;/choice&gt;
  &lt;/define&gt;
  &lt;define name="inet-types__ipv4-address"&gt;
    &lt;data type="string"&gt;
      &lt;param name="pattern"&gt;... IPv4 address regexp ...&lt;/param&gt;
    &lt;/data&gt;
  &lt;/define&gt;
  &lt;define name="inet-types__ipv6-address"&gt;
    &lt;data type="string"&gt;
      &lt;param name="pattern"&gt;... IPv6 address regexp ...&lt;/param&gt;
    &lt;/data&gt;
  &lt;/define&gt;
  &lt;define name="yang-types__date-and-time"&gt;
    &lt;data type="string"&gt;
      &lt;param name="pattern"&gt;... date-and-time regexp ...&lt;/param&gt;
    &lt;/data&gt;
  &lt;/define&gt;
  &lt;define name="yang-types__phys-address"&gt;
    &lt;data type="string"/&gt;
  &lt;/define&gt;
  &lt;define name="__subnet-list"&gt;
    &lt;a:documentation&gt;A reusable list of subnets&lt;/a:documentation&gt;
    &lt;zeroOrMore&gt;
      &lt;element name="subnet" nm:key="net"&gt;
        &lt;element name="net"&gt;
          &lt;ref name="inet-types__ip-prefix"/&gt;
        &lt;/element&gt;
        &lt;element name="range"&gt;
          &lt;optional&gt;
            &lt;element name="dynamic-bootp"&gt;
              &lt;a:documentation&gt;Allows BOOTP clients to get addresses
              in this range&lt;/a:documentation&gt;
              &lt;empty/&gt;
            &lt;/element&gt;
          &lt;/optional&gt;
          &lt;element name="low"&gt;
            &lt;ref name="inet-types__ip-address"/&gt;
          &lt;/element&gt;
          &lt;element name="high"&gt;
            &lt;ref name="inet-types__ip-address"/&gt;
          &lt;/element&gt;
        &lt;/element&gt;
        &lt;optional&gt;
          &lt;element name="dhcp-options"&gt;
            &lt;a:documentation&gt;
            Options in the DHCP protocol
            &lt;/a:documentation&gt;
            &lt;zeroOrMore nm:ordered-by="user"&gt;
              &lt;element name="router"&gt;
                &lt;a:documentation&gt;
                See: RFC 2132, sec. 3.8
                &lt;/a:documentation&gt;
                &lt;ref name="inet-types__host"/&gt;
              &lt;/element&gt;
            &lt;/zeroOrMore&gt;
            &lt;optional&gt;
              &lt;element name="domain-name"&gt;
                &lt;a:documentation&gt;
                See: RFC 2132, sec. 3.17
                &lt;/a:documentation&gt;
                &lt;ref name="inet-types__domain-name"/&gt;
              &lt;/element&gt;
            &lt;/optional&gt;
          &lt;/element&gt;
        &lt;/optional&gt;
        &lt;optional&gt;
          &lt;element name="max-lease-time" nm:units="seconds"&gt;
            &lt;data type="unsignedInt"/&gt;
            &lt;dsrl:default-content&gt;7200&lt;/dsrl:default-content&gt;
          &lt;/element&gt;
        &lt;/optional&gt;
      &lt;/element&gt;
    &lt;/zeroOrMore&gt;
  &lt;/define&gt;
  &lt;define name="inet-types__ip-prefix"&gt;
    &lt;choice&gt;
      &lt;ref name="inet-types__ipv4-prefix"/&gt;
      &lt;ref name="inet-types__ipv6-prefix"/&gt;
    &lt;/choice&gt;
  &lt;/define&gt;
  &lt;define name="inet-types__ipv4-prefix"&gt;
    &lt;data type="string"&gt;
      &lt;param name="pattern"&gt;... IPv4 prefix regexp ...&lt;/param&gt;
    &lt;/data&gt;
  &lt;/define&gt;
  &lt;define name="inet-types__ipv6-prefix"&gt;
    &lt;data type="string"&gt;
      &lt;param name="pattern"&gt;... IPv6 prefix regexp ...&lt;/param&gt;
    &lt;/data&gt;
  &lt;/define&gt;
  &lt;define name="inet-types__host"&gt;
    &lt;choice&gt;
      &lt;ref name="inet-types__ip-address"/&gt;
      &lt;ref name="inet-types__domain-name"/&gt;
    &lt;/choice&gt;
  &lt;/define&gt;
  &lt;define name="inet-types__domain-name"&gt;
    &lt;data type="string"&gt;
      &lt;param name="pattern"&gt;([\p{L}\p{N}]+\.)*[\p{L}\p{N}]&lt;/param&gt;
    &lt;/data&gt;
  &lt;/define&gt;
&lt;/grammar&gt;


</pre></div>
<a name="comp-synt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2"></a><h3>A.2.&nbsp;
Compact Syntax</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
default namespace = "http://example.com/ns/dhcp"
namespace a = "http://relaxng.org/ns/compatibility/annotations/1.0"
namespace dc = "http://purl.org/dc/terms"
namespace dsrl = "http://purl.oclc.org/dsdl/dsrl"
namespace nm = "urn:ietf:params:xml:ns:netmod:dsdl-attrib:1"
namespace sch = "http://purl.oclc.org/dsdl/schematron"

dc:creator [ "yang-central.org" ]
dc:description [
  "Partial data model for DHCP, based on the config of\x{a}" ~
  "the ISC DHCP reference implementation."
]
dc:source [ "YANG module 'dhcp' (automatic translation)" ]
start =

  ## configuration and operational parameters for a DHCP server.
  element dhcp {
    [ nm:units = "seconds" ]
    element max-lease-time {
      xsd:unsignedInt &gt;&gt; dsrl:default-content [ "7200" ]
    }?,
    [ nm:units = "seconds" ]
    element default-lease-time {
      xsd:unsignedInt
      &gt;&gt; sch:assert [
           test = ". &lt;= ../max-lease-time"
           "The default-lease-time must be less than max-lease-time"
         ]
      &gt;&gt; dsrl:default-content [ "600" ]
    }?,
    __subnet-list,
    element shared-networks {
      [ nm:key = "name" ]
      element shared-network {
        element name { xsd:string },
        __subnet-list
      }*
    }?,
    [ nm:config = "false" ]
    element status {
      [ nm:key = "address" ]
      element leases {
        element address { inet-types__ip-address },
        element starts { yang-types__date-and-time }?,
        element ends { yang-types__date-and-time }?,
        element hardware {
          element type { "ethernet" | "token-ring" | "fddi" }?,
          element address { yang-types__phys-address }?
        }?
      }*
    }?
  }?
inet-types__ip-address =
  inet-types__ipv4-address | inet-types__ipv6-address
inet-types__ipv4-address =
  xsd:string {
    pattern =
      "... IPv4 address regexp ..."
  }
inet-types__ipv6-address =
  xsd:string {
    pattern =
      "... IPv6 address regexp ..."
  }
yang-types__date-and-time =
  xsd:string {
    pattern =
      "... date-and-time regexp ..."
  }
yang-types__phys-address = xsd:string

## A reusable list of subnets
__subnet-list =
  [ nm:key = "net" ]
  element subnet {
    element net { inet-types__ip-prefix },
    element range {

      ## Allows BOOTP clients to get addresses in this range
      element dynamic-bootp { empty }?,
      element low { inet-types__ip-address },
      element high { inet-types__ip-address }
    },

    ## Options in the DHCP protocol
    element dhcp-options {
      [ nm:ordered-by = "user" ]
      (
       ## See: RFC 2132, sec. 3.8
       element router { inet-types__host }*),

      ## See: RFC 2132, sec. 3.17
      element domain-name { inet-types__domain-name }?
    }?,
    [ nm:units = "seconds" ]
    element max-lease-time {
      xsd:unsignedInt &gt;&gt; dsrl:default-content [ "7200" ]
    }?
  }*
inet-types__ip-prefix =
  inet-types__ipv4-prefix | inet-types__ipv6-prefix
inet-types__ipv4-prefix =
  xsd:string {
    pattern =
      "... IPv4 prefix regexp ..."
  }
inet-types__ipv6-prefix =
  xsd:string {
    pattern =
      "... IPv6 prefix regexp ..."
  }
inet-types__host = inet-types__ip-address | inet-types__domain-name
inet-types__domain-name =
  xsd:string { pattern = "([\p{L}\p{N}]+\.)*[\p{L}\p{N}]" }


</pre></div>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ladislav Lhotka</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">CESNET</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:lhotka@cesnet.cz">lhotka@cesnet.cz</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
