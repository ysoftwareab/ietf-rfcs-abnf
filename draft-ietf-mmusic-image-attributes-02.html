<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Negotiation of Generic Image
    Attributes in SDP</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Negotiation of Generic Image
    Attributes in SDP">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">I. Johansson</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Ericsson AB</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">K. Jung</td></tr>
<tr><td class="header">Expires: October 18, 2009</td><td class="header">Samsung Electronics Co., Ltd.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">April 16, 2009</td></tr>
</table></td></tr></table>
<h1><br />Negotiation of Generic Image
    Attributes in SDP<br />draft-ietf-mmusic-image-attributes-02</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on October 18, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>This document proposes a new generic session setup attribute to make
      it possible to negotiate different image attributes such as image size.
      A possible use case is to make it possible for a e.g a low-end hand-held
      terminal to display video without the need to rescale the image,
      something that may consume large amounts of memory and processing power.
      The draft also helps to maintain an optimal bitrate for video as only
      the image size that is desired by the receiver is transmitted.
</p>
<h3>Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#sec-intro">1.</a>&nbsp;
Introduction<br />
<a href="#anchor1">2.</a>&nbsp;
Conventions, Definitions and Acronyms<br />
<a href="#sec-definition">3.</a>&nbsp;
Defintion of Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">3.1.</a>&nbsp;
Requirements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">3.2.</a>&nbsp;
Attribute syntax<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-syntax-overall">3.2.1.</a>&nbsp;
Overall view of syntax<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-syntax-descr">3.2.2.</a>&nbsp;
Syntax description<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.3.</a>&nbsp;
Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.3.1.</a>&nbsp;
No imageattr in 1st offer<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.3.2.</a>&nbsp;
Asymmetry<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-sendonly-recvonly">3.3.3.</a>&nbsp;
sendonly and recvonly<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-sar-considerations">3.3.4.</a>&nbsp;
Sample aspect ratio<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.3.5.</a>&nbsp;
SDPCapNeg support<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.3.6.</a>&nbsp;
Interaction with codec parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.3.7.</a>&nbsp;
Change of display in middle of session<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">3.3.8.</a>&nbsp;
Addition of parameters<br />
<a href="#anchor15">4.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">4.1.</a>&nbsp;
Example 1<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">4.2.</a>&nbsp;
Example 2<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">4.3.</a>&nbsp;
Example 3<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">4.4.</a>&nbsp;
Example 4<br />
<a href="#anchor20">5.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor21">6.</a>&nbsp;
Security Considerations<br />
<a href="#Acknowledgements">7.</a>&nbsp;
Acknowledgements<br />
<a href="#anchor22">8.</a>&nbsp;
Changes<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Informative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="sec-intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>This document proposes a new attribute to make it possible to
      negotiate different image attributes such as image size. The term image
      size is defined here as it may differ from the physical screen size of
      e.g a hand-held terminal. For instance it may be beneficial to display a
      video image on a part of the physical screen and leave space on the
      screen for e.g menus and other info.
</p>
<p>There are a number of benefits with a possibility to negotiate the
      image size:</p>
<ul class="text">
<li>Less image distortion: Rescaling of images introduces additional
          distortion, something that can be avoided (at least on the receiver
          side) if the image size can be negotiated.
</li>
<li>Reduced complexity: Image rescaling can be quite computation
          intensive. For low end devices this can be a problem.
</li>
<li>Optimal quality for the given bitrate: The sender does not need
          to encode an entire CIF (352x288) image if only an image size of
          288x256 is displayed on the receiver screen. This gives
          alternatively a saving in bitrate.
</li>
<li>Memory requirement: The receiver device will know the size of the
          image and can then allocate memory accordingly.
</li>
<li>Optimal aspect ratio: If rescaling of the image is possible on
          the receiver side one can imagine that the offer contains three
          resolutions 100x200, 200x100 and 100x100 with sar=1.0 (1:1). If the
          receiver screen has the resolution 200x200 with sar=1 then the
          obvious is to select 100x100 and scale the image by a factor 2. If
          on the other hand the screen has the resolution 100x200 with sar=2
          (2:1) then the obvious is again to select 100x100 and scale the
          image by a factor 2 in the x-axis.
</li>
</ul>

<p>The cautious reader may however object that the rescaling issue has
      been moved to the sender and also that codecs such as H.264 are not
      mandated to support the rescaling of the video image size. This
      potentially reduces the number of valid arguments to only 1 (optimal use
      of bandwidth).
</p>
<p>However, what must then be considered is that:</p>
<ul class="text">
<li>Rescaling on the sender/encoder side is likely to be easier to do
          as the camera related software/hardware already contains the
          necessary functionality for zooming/cropping/trimming/sharpening the
          video signal. Moreover, rescaling is generally done in RGB or YUV
          domain and should not depend on the codecs used.
</li>
<li>The encoder may be able to encode in a number of formats but may
          not know which format to choose as it, without the image attribute,
          does not know the receivers performance or preference.
</li>
<li>The quality drop due to digital domain rescaling using
          interpolation is likely to be lower if it is done before the video
          encoding rather than after the decoding esp. when low bitrate video
          coding is used.
</li>
<li>If low-complexity rescaling operations such as cropping only must
          be performed after all, the benefit with having this functionality
          on the sender side is that it is then possible to present a
          miniature "what you send" image on the display to help the user to
          target the camera correctly.
</li>
</ul>

<p>Several of the existing standards ([H.263], [H.264] and [MPEG-4])
      have support for different resolutions at different framerates. The
      purpose of this document is to provide for a generic mechanism and is
      targeted mainly at the negotiation of the image size but to make it more
      general the attribute is named "imageattr". A problem statement and
      discussion that gives a motivation to this document can be found in
      <a class='info' href='#S4-080144'>[S4&#8209;080144]<span> (</span><span class='info'>3GPP, &ldquo;Signaling of Image Size: Combining Flexibility and Low Cost,           http://www.3gpp.org/ftp/tsg_sa/WG4_CODEC/TSGS4_48/Docs/S4-080144.zip,&rdquo; .</span><span>)</span></a>.
</p>
<p>The draft is limited to unicast scenarios in general and more
      specific peer to peer situations. The attribute may be used in
      centralized conferencing scenarios as well but due to the abundance of
      configuration options it may then be difficult to come up with a
      configuration that fits all parties.
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions, Definitions and Acronyms</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in RFC 2119.
</p>
<a name="sec-definition"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Defintion of Attribute</h3>

<p>A new image attribute is defined with the name "imageattr". The new
      SDP attribute contains a set of image attribute options that the offerer
      can provide. The receiver can then select the desired image attribute
      (e.g image size in pixels) and may then have the ability to avoid costly
      transformations (e.g rescaling) of the images. In this approach only the
      image resolution and optionally sample aspect ratio, allowed range in
      picture aspect ratio and preference is covered but the framework makes
      it possible to extend with other image related attributes that make
      sense.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Requirements</h3>

<p>The new image attribute should meet the following
        requirements:</p>
<blockquote class="text"><dl>
<dt>REQ-1:</dt>
<dd>Support the offer of a specific image size on
            the receiver display or in other words, reduce or avoid the need
            for rescaling images in the receiver to fit a given portion of the
            screen.
</dd>
<dt>REQ-2:</dt>
<dd>Support asymmetric setups i.e the very likely
            scenario where Alice prefers an image size of 320x240 for her
            display while Bob prefers an image size of 176x144.
</dd>
<dt>REQ-3:</dt>
<dd>Interoperate with codec specific parameters
            such as sprop-parameter-sets in H.264 or config in MPEG4.
</dd>
<dt>REQ-3:</dt>
<dd>Make the attribute generic with as little
            codec specific details/tricks as possible. Ideally the attribute
            should not care about the codec specific features.
</dd>
<dt>OPT-1:</dt>
<dd>Make it possible to use attribute for other
            purposes than video. One possible use case may be distributed
            white-board presentations which are based on transmission of
            compressed bitmap images where rescaling often produce very poor
            results.
</dd>
</dl></blockquote>

<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Attribute syntax</h3>

<p>In this section the syntax of the image attribute is described. The
        section is split up in two parts, the first gives an overall view of
        the syntax while the second describes how the syntax is used.
</p>
<a name="sec-syntax-overall"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
Overall view of syntax</h3>

<p>The syntax for the image attribute is in ABNF:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    image-attr = "imageattr:" PT 1*2( 1*WSP ( "send" / "recv" )
                                      1*WSP attr_list )

    PT = 1*DIGIT / "*"
    attr_list = ( set *(1*WSP set) ) / "*"

     see below for a definition of set.
    ----</pre></div>
<p></p>
<ul class="text">
<li>Maximum one occurrence of the "send" keyword and
              corresponding attr_list is allowed per image attribute.
</li>
<li>Maximum one occurrence of the "recv" keyword and
              corresponding attr_list is allowed per image attribute.
</li>
<li>PT is the payload type number, it can be set to * to indicate
              that the attribute applies to all payload types in the media
              description.
</li>
<li>For sendonly or recvonly streams one of the directions MAY be
              omitted. See <a class='info' href='#sec-sendonly-recvonly'>Section&nbsp;3.3.3<span> (</span><span class='info'>sendonly and recvonly</span><span>)</span></a>,
              moreover the order of the send and recv directions is not
              important.
</li>
</ul>

<p>The syntax for the set is given by:</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    set= "[" "x=" range "," "y=" range [",sar="range]
             [",par=" range] [",q=" value] "]"
     x is the horizontal image size range
     y is the vertical image size range
     sar (sample aspect ratio) is the sample aspect ratio associated
      with the set (optional and MAY be ignored)
     par (picture aspect ratio) is the allowed ratios between the
      displays x and y physical size (optional)
     q (optional with range [0.0..1.0], default value 0.5)
      is the preference for the given set, a higher value means higher
      preference from the sender point of view

     range is expressed in a few different formats
      1) range= value
           a single value
      2) range= "[" value1 ":" [ step ":" ] value2 "]"
           values between value1 and value2 inclusive,
           if step is omitted a stepsize of 1 is implied
      3) range= "[" value 1*( "," value ) "]"
           any value from the list of values
      4) range= "[" value1 "-" value2 "]"
           any real value between value1 and value2 inclusive

      value is a positive integer or real value
      step is a positive integer or real value
       If step is left out in the syntax a stepsize of 1 is implied
      Real values are only applicable for the
       sar, par and q parameters
      Note the use of brackets [..] if more that one value
       is specified.
    ----
</pre></div><p>

</p>
<p>Some further guidelines for the use of the attribute is given
          below:</p>
<ul class="text">
<li>The image attribute is bound to a specific media by means of
              the payload type number. A wild card (*) can be specified for
              the payload type number to indicate that it applies to all
              payload types in the media description. Several image attributes
              can be defined e.g for different video codec alternatives
              conditioned that the payload type number differs.
</li>
<li>The preference for each set is 0.5 by default, setting the
              optional q parameter to another value makes it possible to set
              different preferences for the sets. A higher value gives a
              higher preference for the given set.
</li>
<li>The sar parameter specifies the sample aspect ratio
              associated to the given range of x and y values. The sar
              parameter is defined as dx/dy where dx and dy is the size of the
              pixels. Square pixels gives a sar=1.0. The parameter sar MAY be
              expressed as a range. <br />
If this parameter is not present
              a default sar value of 1.0 is assumed. <br />
The
              interpretation of sar differs between the send and the receive
              directions. 
<ul class="text">
<li>In the send direction it defines a specific sample aspect
                  ration associated to a given x and y image size (range).
</li>
<li>In the recv direction sar expresses that the receiver of
                  the given media prefers to receive a given x and y
                  resolution with a given sample aspect ratio.
</li>
</ul>See <a class='info' href='#sec-sar-considerations'>Section&nbsp;3.3.4<span> (</span><span class='info'>Sample aspect ratio</span><span>)</span></a> for a
              more detailed discussion. <br />
The sar parameter will
              likely not solve all the issues that are related to different
              sample aspect ratios but it can help to solve them and reduce
              aspect ratio distortion.
</li>
<li>The par (width/height = x/y ratio) parameter indicates a
              range of allowed ratios between x and y physical size (picture
              aspect ratio). This is used to limit the number of x and y image
              size combinations, par is given as <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    par=[ratio_min-ratio_max]
    ----</pre></div>Where ratio_min and ratio_max are the min and max
              allowed picture aspect ratios.<br />
If sar and the display
              sample aspect ration is the same (or close) the relation between
              the x and y pixel resolution and the physical size of the image
              is straightforward. If however sar differs from the sample
              aspect ratio of the receiver display this must be taken into
              consideration when the x and y pixel resolution alternatives are
              sorted out.
</li>
<li>The offerer MUST be able to support the image attributes that
              it offers.
</li>
<li>The answerer MAY choose to keep imageattr but is not required
              to do so. If the attribute is kept in the SDP answer:
<ul class="text">
<li>The answerer MUST for its receive direction only include
                  one or more valid entries taken from the offer. In other
                  words, the answerer MUST for its receive direction only pick
                  one or more valid entries from the multidimensional solution
                  space spanned by the offer.
</li>
<li>The answerer MAY for its send direction modify the
                  attribute in the sense that new entries other than those
                  presented in the offer are added. It must however be noted
                  that this may lead to an extra offer/answer exchange of the
                  added parameters are not supported by the offerer.
</li>
</ul>
</li>
</ul>

<a name="sec-syntax-descr"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2"></a><h3>3.2.2.&nbsp;
Syntax description</h3>

<p>In the description of the syntax we here assume that Alice wish
          to setup a session with Bob and that Alice takes the first
          initiative. The syntactical white-space delimiters (1*WSP) and
          double-quotes are removed to make reading easier.
</p>
<p>In the offer Alice provides with information for both the send
          and receive (recv) directions using syntax version 1. For the send
          direction Alice provides with a list that the answerer can select
          from. For the receive direction Alice may either specify a desired
          image size range right away or a * to instruct Bob to fill with a
          list of image size that Bob can support to send. Using the overall
          high level syntax the image attribute may then look like </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:PT send attr_list recv attr_list
    ----</pre></div><p>
or</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:PT send attr_list recv *
    ----</pre></div><p>
In the first alternative the recv direction may be a full
          list of desired image size formats. It may however (and most likely)
          just be a list with one alternative for the preferred x and y
          resolution.
</p>
<p>If Bob supports an x and y resolution in the given x and y range
          the answer from Bob will look like: </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:PT send attr_list recv attr_list
    ----</pre></div><p>
And the offer answer negotiation is done. Worth notice
          here is that the attr_list will likely be pruned in the answer.
          While it may contain many different alternatives in the offer it may
          in the end contain just one or two alternatives in the end.
</p>
<p>If Bob does not support any x and y resolution in the given x and
          y range in attr_list or a * was given for the recv direction then he
          MUST either: </p>
<ul class="text">
<li>Provide with another list of options (attr_list). The answer
              from Bob may then look like:<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:PT recv attr_list send attr_list
    ----</pre></div>In this case the offer/answer negotiation is not
              quite done. To complete the offer/answer Alice sends another
              offer that looks like:<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:PT send attr_list recv attr_list
    ----</pre></div>Bob MAY send back an answer to complete the 2nd
              offer/answer but this is not necessary.
</li>
<li>Remove the corresponding part completely in which case the
              answer from bob would look like:<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:PT recv attr_list
    ----</pre></div>Again it is worth notice that the attr_list for each
              direction is likely pruned depending on preferred and supported
              options.
</li>
</ul>

<p>If the 1st offer (from Alice) already defines a desired image
          size for the recv direction the answerer can do one of the
          following:</p>
<ol class="text">
<li>Accept the image size and return it in the answer.
</li>
<li>Replace with a list of options in the answer.
</li>
<li>Remove the corresponding part completely. This may happen if
              it is deemed that it is unlikely that the list of options is
              supported. The answer will then lack a description for the send
              direction and will look like:<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:PT recv attr_list
    ----</pre></div>
</li>
</ol>

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Considerations</h3>

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.1"></a><h3>3.3.1.&nbsp;
No imageattr in 1st offer</h3>

<p>A high end device (Alice) may not see any need for the image
          attribute as it most likely has the processing capacity to rescale
          incoming video and may therefore not include the attribute in the
          offer as it otherwise does not see any use for it. The answerer
          (Bob) MAY include imageattr in the answer. This has two
          implications:</p>
<ul class="text">
<li>Longer session setup time due to extra offer/answer
              exchanges
</li>
<li>There is a risk that Alice does not recognize or support
              imageattr and will thus anyway ignore the attribute.
</li>
</ul>

<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.2"></a><h3>3.3.2.&nbsp;
Asymmetry</h3>

<p>While the image attribute supports asymmetry there are some
          limitations to this. One important limitation is that the codec
          being used can only support up to a given maximum resolution for a
          given profile level.
</p>
<p>As an example H.264 with profile level 1.2 does not support
          higher resolution than 352x288 (CIF). The offer/answer rules
          essentially gives that the same profile level must be used in both
          directions. This means that for an asymmetric scenario where Alice
          wants an image size of 580x360 and Bob wants 150x120 profile level
          2.2 is needed in both directions even though profile level 1 would
          have been enough in one direction.
</p>
<p>Currently, the only solution to this problem is to specify two
          unidirectional media descriptions. Note however that the asymmetry
          issue for the H.264 codec is solved in <a class='info' href='#RFC3984bis'>[RFC3984bis]<span> (</span><span class='info'>IETF, &ldquo;RTP Payload Format for H.264 Video,           http://tools.ietf.org/wg/avt/draft-ietf-avt-rtp-rfc3984bis/,&rdquo; .</span><span>)</span></a>.
</p>
<a name="sec-sendonly-recvonly"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.3"></a><h3>3.3.3.&nbsp;
sendonly and recvonly</h3>

<p>If the directional attributes a=sendonly or a=recvonly are given
          for a media, there is of course no need to specify the image
          attribute for both directions. Therefore one of directions in the
          attribute MAY be omitted. However it may be good to do the image
          attribute negotiation in both directions in case the session is
          updated for media in both directions at a later stage.
</p>
<a name="sec-sar-considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.4"></a><h3>3.3.4.&nbsp;
Sample aspect ratio</h3>

<p>The sar parameter in relation to the x and y pixel resolution
          deserves some extra discussion. Consider the offer from Alice to Bob
          (we set the recv direction aside for the moment): </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:97 send [x=720,y=576,sar=1.1]
    ----</pre></div><p>
If the receiver display has square pixels the 720x576
          image would need to be rescaled to for example 792x576 or 720x524 to
          ensure a correct image aspect ratio. This in practice means that
          rescaling would need to be performed on the receiver side, something
          that is contrary to the spirit of this draft. <br />
To avoid
          this problem Alice MAY specify a range of values for the sar
          parameter like:</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:97 send [x=720,y=576,sar=[0.91,1.0,1.09,1.45]]
    ----</pre></div><p>
Meaning that Alice can encode with any of the mentioned
          sample aspect ratios, leaving to Bob to decide which one he
          prefers.
</p>
<p>The response MUST NOT include the sar parameter if there is no
          acceptable value given.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.5"></a><h3>3.3.5.&nbsp;
SDPCapNeg support</h3>

<p>The image attribute can be used within the SDP Capability
          Negotiation <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>IETF, &ldquo;SDP Capability Negotiation,           http://tools.ietf.org/wg/mmusic/draft-ietf-mmusic-sdp-capability-negotiation,&rdquo; .</span><span>)</span></a> framework and its use
          is then specified using the "a=acap" parameter. An example is
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=acap:1 imageattr:97 send [x=720,y=576,sar=[0.91,1.0,1.09,1.45]]
    ----</pre></div>
<p>For use with SDP Media Capability Negotiation extension <a class='info' href='#SDPMedCapNeg'>[SDPMedCapNeg]<span> (</span><span class='info'>IETF, &ldquo;SDP media capabilities Negotiation,           http://tools.ietf.org/wg/mmusic/draft-ietf-mmusic-sdp-media-capabilities,&rdquo; .</span><span>)</span></a>, where it is no longer possible to
          specify payload type numbers, it is possible to use the parameter
          substitution rule, an example of this is.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    ...
    a=mcap:1 video H264/90000
    a=acap:1 imageattr:%1% send [x=720,y=576,sar=[0.91,1.0,1.09,1.45]]
    ...
    ----</pre></div>
<p>Where %1% maps to media capability number 1.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.6"></a><h3>3.3.6.&nbsp;
Interaction with codec parameters</h3>

<p>As most codecs specifies some kind of indication of e.g. the
          image size already at session setup some measures must be taken to
          avoid that the image attribute conflicts with this already existing
          information.
</p>
<p>The following subsections describes the most well known codecs
          and how they define image-size related information.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.6.1"></a><h3>3.3.6.1.&nbsp;
H.263</h3>

<p>The payload format for H.263 is described in <a class='info' href='#RFC4629'>[RFC4629]<span> (</span><span class='info'>Ott, H., Bormann, C., Sullivan, G., Wenger, S., and R. Even, &ldquo;RTP Payload Format for ITU-T Rec,&rdquo; January&nbsp;2007.</span><span>)</span></a>.
</p>
<p>H.263 defines (on the fmtp line) a list of image sizes and
            their maximum frame rates (profiles) that the offerer can receive.
            The answerer is not allowed to modify this list and must reject a
            payload type that contains an unsupported profile. The CUSTOM
            profile may be used for image size negotiation but support for
            asymmetry requires the specification of two unidirectional media
            descriptions using the sendonly/recvonly attributes.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.6.2"></a><h3>3.3.6.2.&nbsp;
H.264</h3>

<p>The payload format for H.264 is described in <a class='info' href='#RFC3984'>[RFC3984]<span> (</span><span class='info'>Wenger, S., Hannuksela, M., Stockhammer, T., Westerlund, M., and D. Singer, &ldquo;RTP Payload Format for H.264 Video,&rdquo; February&nbsp;2005.</span><span>)</span></a> and updated in <a class='info' href='#RFC3984bis'>[RFC3984bis]<span> (</span><span class='info'>IETF, &ldquo;RTP Payload Format for H.264 Video,           http://tools.ietf.org/wg/avt/draft-ietf-avt-rtp-rfc3984bis/,&rdquo; .</span><span>)</span></a>.
</p>
<p>H.264 defines image size related information in the fmtp line
            by means of sprop-parameter-sets. According to the specification
            several sprop-parameter-sets may be defined for one payload type.
            The sprop-parameter-sets describe the image size (+ more) that the
            offerer sends in the stream and need not be complete. This means
            that this does not represent any negotiation. Moreover an answer
            is not allowed to change the sprop-parameter-sets.
</p>
<p>This configuration may be changed later inband if for instance
            image sizes need to be changed or added.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.6.3"></a><h3>3.3.6.3.&nbsp;
MPEG-4</h3>

<p>The payload format for MPEG-4 is described in <a class='info' href='#RFC3016'>[RFC3016]<span> (</span><span class='info'>Kikuchi, Y., Nomura, T., Fukunaga, S., Matsui, Y., and H. Kimata, &ldquo;RTP Payload Format for MPEG-4 Audio/Visual Streams,&rdquo; November&nbsp;2000.</span><span>)</span></a>.
</p>
<p>MPEG-4 defines a config parameter on the fmtp line which is a
            hexadecimal representation of the MPEG-4 visual configuration
            information. This configuration does not represent any negotiation
            and the answer is not allowed to change the parameter.
</p>
<p>Currently it is not possible to change the configuration using
            inband signaling.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.6.4"></a><h3>3.3.6.4.&nbsp;
Possible solutions</h3>

<p>The subsections above clearly indicate that this kind of
            information must be aligned well with the image attribute to avoid
            conflicts. There are a number of possible solutions:</p>
<ul class="text">
<li>Ignore payload format parameters: This may not work well
                e.g in the presence of bad channel conditions esp. in the
                beginning of a session. Moreover this is not a good option for
                MPEG-4.
</li>
<li>2nd session-wide offer/answer round: In the 2nd
                offer/answer the codec payload format specific parameters are
                defined based on the outcome of the imageattr negotiation. The
                drawback with this is that setup of the entire session
                (including audio) may be delayed considerably, especially as
                the imageattr negotiation can already itself cost up to two
                offer/answer rounds. Also the conflict between the imageattr
                negotiation and the payload format specific parameters is
                still present after the first offer/anser round and a
                fuzzy/buggy implementation may start media before the second
                offer/answer is completed with unwanted results.
</li>
<li>2nd session-wide offer/answer round only for video: This is
                similar to the alternative above with the exception that setup
                time for audio is not increased, moreover the port number for
                video is set to 0 during the 1st offer answer round to avoid
                that media flows. <br />
This has the effect that video
                will blend in some time after the audio is started (up to 2
                seconds delay). This alternative is likely the most clean-cut
                and failsafe alternative. The drawback is, as the port number
                in the first offer is always zero, the media startup will
                always be delayed even though it would in fact have been
                possible to start media already after the first offer/answer
                round.
</li>
</ul>

<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.7"></a><h3>3.3.7.&nbsp;
Change of display in middle of session</h3>

<p>A very likely scenario is that a user switches to another phone
          during e.g a video telephony call or plugs the cellphone into an
          external monitor. In both cases it is very likely that a
          renegotiation is initiated using e.g the SIP-REFER or SIP-UPDATE
          methods. It is RECOMMENDED to negotiate the image size during this
          renegotiation.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.8"></a><h3>3.3.8.&nbsp;
Addition of parameters</h3>

<p>The image attribute opens up for the addition of parameters in
          the future. To make backwards adaptation possible; an entity that
          process the attribute MUST remove parameters that are not recognized
          before returning the attribute in the SDP answer. Addition of future
          parameters that are not understood by the receiving endpoint may
          lead to ambiguities if mutual dependencies between parameters exist,
          therefore addition of parameters must be done with great care.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Examples</h3>

<p>A few examples to highlight the syntax, here is assumed where needed
      that Alice initiates a session with Bob
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Example 1</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] \
                   recv [x=330,y=250]
    ----</pre></div>
<p>Two image resolution alternatives are offered with 800x640 with
        sar=1.1 having the highest preference
</p>
<p>The example also indicates that Alice wish to display video with a
        resolution of 330x250 on her display
</p>
<p>In case Bob accepts the "recv [x=330,y=250]" the answer may look
        like
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:97 recv [x=800,y=640,sar=1.1] \
                   send [x=330,y=250]
    ----</pre></div>
<p>Indicating that the receiver (Bob) wish the encoder (on Alice's
        side) to compensate for a sample aspect ratio of 1.1 (11:10) and
        desires an image size on its screen of 800x640.
</p>
<p>There is however a possibility that "recv [x=330,y=250]" is not
        supported. If the case, Bob may completely remove this part or replace
        it with a list of supported image sizes.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:97 recv [x=800,y=640,sar=1.1] \
                   send [x=[320:16:640],y=[240:16:480],par=[1.2-1.3]]
    ----</pre></div>
<p>Alice can then select a valid image size which is closest to the
        one that was originally desired (336x256) and performs a second
        offer/answer
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:97 send [x=800,y=640,sar=1.1] \
                   recv [x=336,y=256]
    ----</pre></div>
<p>Bob replies with (actually not necessary):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:97 recv [x=800,y=640,sar=1.1] \
                   send [x=336,y=256]
    ----</pre></div>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Example 2</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:97 \
      send [x=[480:16:800],y=[320:16:640],par=[1.2-1.3],q=0.6] \
           [x=[176:8:208],y=[144:8:176],par=[1.2-1.3]] \
      recv *
    ----</pre></div>
<p>Two image resolution sets are offered with the first having a
        higher preference (q=0.6). The x-axis resolution can take the values
        480 to 800 in 16 pixels steps and 176 to 208 in 8 pixels steps. The
        par parameter limits the set of possible x and y screen resolution
        combinations such that 800x640 (ratio=1.25) is a valid combination
        while 720x608 (ratio=1.18) or 800x608 (ratio=1.31) are invalid
        combinations.
</p>
<p>For the recv direction (Bob-&gt;Alice) Bob is requested to provide
        with a list of supported image sizes
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Example 3</h3>

<p>In this example is defined a complete SDP offer for the video media
        part
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    m=video 49154 RTP/AVP 99
    a=rtpmap:99 H264/90000
    a=fmtp:99 packetization-mode=0;profile-level-id=42e011; \
      sprop-parameter-sets=Z0LgC5ZUCg/I,aM4BrFSAa
    a=imageattr:99 \
      send [x=176,y=144] [x=224,y=176] [x=272,y=224] [x=320,y=240] \
      recv [x=176,y=144] [x=224,y=176] [x=272,y=224,q=0.6] [x=320,y=240]
    ----</pre></div>
<p>In the send direction, sprop-parameter-sets is defined for a
        resolution of 320x240 which is the largest image size offered in the
        send direction. This means that if 320x240 is selected, no additional
        offer/answer is necessary. In the receive direction four alternative
        image sizes are offered with 272x224 being the preferred choice.
</p>
<p>The answer may look like:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    m=video 49154 RTP/AVPF 99
    a=rtpmap:99 H264/90000
    a=fmtp:99 packetization-mode=0;profile-level-id=42e011; \
      sprop-parameter-sets=Z0LgC5ZUCg/I,aM4BrFSAa
    a=imageattr:99 send [x=320,y=240] recv [x=320,y=240]
    ----</pre></div>
<p>Indicating (in this example) that the image size is 320x240 in both
        directions. Although the offerer preferred 272x224 for the receive
        direction, the answerer might not be able to offer 272x224 or not
        allow encoding and decoding of video of different image sizes
        simultaneously. The answerer sets new sprop-parameter-sets,
        constructed for both send and receive directions at the restricted
        conditions and image size of 320x240.
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Example 4</h3>

<p>This example illustrates in more detail how compensation for
        different sample aspect ratios can be negotiated with the image
        attribute.
</p>
<p>We setup a session between Alice and Bob, Alice is the offerer of
        the session. The offer (from Alice) contains the image attribute
        below:</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:97 \
      send [sar=[1.0-1.3],x=400:16:800],y=[320:16:640],par=[1.2-1.3]] \
      recv [sar=1.1,x=800,y=600]
    ----</pre></div><p>

</p>
<p>First we consider the recv direction: The offerer (Alice)
        explicitly states that she wish to receive the screen resolution
        800x600, however she also indicates that the screen on her display
        does not use square pixels, the sar value=1.1 means that Bob must
        (preferably) compensate for this. So.. If Bob's video camera produces
        square pixels, and wish to satisfy Alice's sar requirement, the image
        processing algorithm must rescale a 880x600 pixel image (880=800*1.1)
        to 800x600 pixels (could be done other ways).
</p>
<p>... and now the send direction: Alice indicates that she can (in
        the image processing algorithms) rescale the image for sample aspect
        ratios in the range 1.0 to 1.3. She can also provide with a number of
        different image sizes (in pixels) ranging from 400x320 to 800x640. Bob
        inspects the offered sar and image sizes and responds with the
        modified image attribute </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>    ----
    a=imageattr:97 \
      recv [sar=1.15,x=464,y=384] \
      send [sar=1.1,x=800,y=600]
    ----</pre></div><p>

</p>
<p>Alice will, in order to satisfy Bob's request, need to rescale the
        image from her video camera from 534x384 (534=464*1.15) to
        464x384.
</p>
<p>Neither part is required to rescale like this (sar MAY be ignored),
        the consequence will of course be a distorted image.
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>Following the guidelines in <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a>, the IANA
      is requested to register one new SDP attribute:</p>
<ul class="text">
<li>Contact name, email address and telephone number: Authors of
          RFCXXXX
</li>
<li>Attribute-name: imageattr
</li>
<li>Type of attribute: media-level
</li>
<li>Subject to charset: no
</li>
</ul>

<p>This attribute defines the ability to negotiate various image
      attributes such as image sizes. The attribute contains a number of
      parameters which can be modified in and offer/answer exchange.
</p>
<p>Note to RFC Editor: please replace "RFC XXXX" above with the RFC
      number of this memo, and remove this note.
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>This draft does not add any additional security issues other than
      those already existing with currently specified offer/answer
      procedures.
</p>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgements</h3>

<p>The authors would like to thank the people who has contributed with
      objections and suggestions to this draft and provided with valuable
      guidance in the amazing video-coding world. Special thanks go to Clinton
      Priddle, Roni Even, Randell Jesup, and Dan Wing.
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Changes</h3>

<p>The main changes are:</p>
<blockquote class="text"><dl>
<dt>From WG -01 to WG -02</dt>
<dd>
<ul class="text">
<li>Added extra example that highlights the negotiation of
              sar
</li>
</ul>
</dd>
<dt>From WG -00 to WG -01</dt>
<dd>
<ul class="text">
<li>Added info about future addition of parameters and backwards
              compatibility
</li>
<li>Added IANA considerations
</li>
</ul>
</dd>
<dt>From individual -02 to WG -00</dt>
<dd>
<ul class="text">
<li>Cleanup of syntax, ABNF form
</li>
<li>Additional example
</li>
</ul>
</dd>
<dt>From -01 to -02</dt>
<dd>
<ul class="text">
<li>Cleanup of the sar and par parameters to make them match the
              established conventions
</li>
<li>Requirement specification added
</li>
<li>New bidirectional syntax
</li>
<li>Interoperability considerations with well known video codecs
              discussed
</li>
</ul>
</dd>
</dl></blockquote>

<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="H.264">[H.264]</a></td>
<td class="author-text">ITU-T, &ldquo;ITU-T Recommendation H.264,
          http://www.itu.int/rec/T-REC-H.264-200711-I/en.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3016">[RFC3016]</a></td>
<td class="author-text">Kikuchi, Y., Nomura, T., Fukunaga, S., Matsui, Y., and H. Kimata, &ldquo;<a href="http://tools.ietf.org/html/rfc3016">RTP Payload Format for MPEG-4 Audio/Visual Streams</a>,&rdquo; RFC&nbsp;3016, November&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc3016.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3264">[RFC3264]</a></td>
<td class="author-text">Rosenberg, J. and H. Schulzrinne, &ldquo;<a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with Session Description Protocol (SDP)</a>,&rdquo; RFC&nbsp;3264, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3264.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3984">[RFC3984]</a></td>
<td class="author-text">Wenger, S., Hannuksela, M., Stockhammer, T., Westerlund, M., and D. Singer, &ldquo;<a href="http://tools.ietf.org/html/rfc3984">RTP Payload Format for H.264 Video</a>,&rdquo; RFC&nbsp;3984, February&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3984.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3984bis">[RFC3984bis]</a></td>
<td class="author-text">IETF, &ldquo;RTP Payload Format for H.264 Video,
          http://tools.ietf.org/wg/avt/draft-ietf-avt-rtp-rfc3984bis/.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4566">[RFC4566]</a></td>
<td class="author-text">Handley, M., Jacobson, V., and C. Perkins, &ldquo;<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>,&rdquo; RFC&nbsp;4566, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4566.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4587">[RFC4587]</a></td>
<td class="author-text">Even, R., &ldquo;<a href="http://tools.ietf.org/html/rfc4587">RTP Payload Format for H.261 Video Streams</a>,&rdquo; RFC&nbsp;4587, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4587.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4629">[RFC4629]</a></td>
<td class="author-text">Ott, H., Bormann, C., Sullivan, G., Wenger, S., and R. Even, &ldquo;<a href="http://tools.ietf.org/html/rfc4629">RTP Payload Format for ITU-T Rec</a>,&rdquo; RFC&nbsp;4629, January&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4629.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="S4-080144">[S4-080144]</a></td>
<td class="author-text">3GPP, &ldquo;Signaling of Image Size: Combining Flexibility and Low Cost,
          http://www.3gpp.org/ftp/tsg_sa/WG4_CODEC/TSGS4_48/Docs/S4-080144.zip.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="SDPCapNeg">[SDPCapNeg]</a></td>
<td class="author-text">IETF, &ldquo;SDP Capability Negotiation,
          http://tools.ietf.org/wg/mmusic/draft-ietf-mmusic-sdp-capability-negotiation.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="SDPMedCapNeg">[SDPMedCapNeg]</a></td>
<td class="author-text">IETF, &ldquo;SDP media capabilities Negotiation,
          http://tools.ietf.org/wg/mmusic/draft-ietf-mmusic-sdp-media-capabilities.&rdquo;</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ingemar Johansson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ericsson AB</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Laboratoriegrand 11</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">SE-971 28 Lulea</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">SWEDEN</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+46 73 0783289</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ingemar.s.johansson@ericsson.com">ingemar.s.johansson@ericsson.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Kyunghun Jung</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Samsung Electronics Co., Ltd.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dong Suwon P.O. Box 105</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">416, Maetan-3Dong, Yeongtong-gu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Suwon-city, Gyeonggi-do</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Korea 442-600</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+82 10 9909 4743</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:kyunghun.jung@samsung.com">kyunghun.jung@samsung.com</a></td></tr>
</table>
</body></html>
