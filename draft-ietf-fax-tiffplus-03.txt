Internet Fax Working Group                                Lloyd McIntyre
Internet Draft                                            Stephen Zilles
Expires in six months                                     Robert Buckley
                                                          Dennis Venable
                                                           Glenn Parsons
                                                          James Rafferty
                                                       November 17, 1997

                       File Format for Internet Fax

                     <draft-ietf-fax-tiffplus-03.txt>

Status

This document is an Internet Draft. Internet Drafts are working 
documents of the Internet Engineering Task Force (IETF), its Areas, and 
its Working Groups. Note that other groups may also distribute working 
documents as Internet Drafts.

Internet Drafts are valid for a maximum of six months and may be 
updated, replaced, or obsoleted by other documents at any time. It is 
inappropriate to use Internet Drafts as reference material or to cite 
them other than as a "work in progress."

To learn the current status of any Internet-Draft, please check the 
"1id-abstracts.txt" listing contained in the Internet-Drafts Shadow 
Directories on ftp.is.co.za (Africa), nic.nordu.net (Europe), 
munnari.oz.au (Pacific Rim), ds.internic.net (US East Coast), or 
ftp.isi.edu (US West Coast).

Abstract

This Internet Draft describes the TIFF (Tag Image File Format) 
representation of image data specified by the ITU-T Recommendations for 
black-and-white and color facsimile. It formally defines Applications W, 
F, J, C, P and M of the MIME Media Type image/tiff for use with Internet 
Fax. Applications W, F and J describe the minimal, extended and lossless 
JBIG modes for black-and-white fax. Applications C, P and M describe the 
base JPEG, lossless JBIG and Mixed Raster Content modes for color and 
grayscale fax. This file format specification is commonly called TIFF-FX. 
















McIntyre, Zilles, et al.         Expires 5/17/98                [Page 1]

Internet Draft         File Format for Internet Fax    November 17, 1997


Table of Contents

1. INTRODUCTION........................................................4
   1.1. Scope..........................................................5
   1.2. Approach.......................................................5
   1.3. Overview of this draft.........................................5
2. TIFF and Fax........................................................6
   2.1. TIFF Overview..................................................6
     2.1.1. File Structure.............................................6
     2.1.2. Image Structure............................................8
     2.1.3. TIFF File Structure for Fax Applications...................8
   2.2 TIFF Fields for All Fax Applications...........................10
     2.2.1. TIFF Fields required for all fax modes....................11
     2.2.2. Additional TIFF Fields required for all fax modes.........12
     2.2.3. TIFF Fields recommended for all fax modes.................13
     2.2.4. New TIFF Fields recommended for fax modes.................13
3. Minimal Black-and-White Fax Mode...................................15
   3.1. Overview......................................................15
   3.2. Required TIFF Fields..........................................15
     3.2.1 Baseline Fields............................................16
     3.2.2 Extension Fields...........................................17
     3.2.3 New Fields.................................................17
   3.3. Recommended TIFF Fields.......................................17
   3.4. End of Line (EOL) and Return to Control (RTC).................18
   3.5. File Structure................................................19
   3.6. Minimal Black-and-White Mode Summary..........................19
4. Extended Black-and-White Fax Mode..................................21
   4.1. TIFF-F Overview...............................................21
   4.2. Required TIFF Fields..........................................22
     4.2.1. Baseline Fields...........................................22
     4.2.2. Extension Fields..........................................25
     4.2.3. New Fields................................................25
   4.3. Recommended TIFF Fields.......................................25
     4.3.1. Baseline Fields...........................................25
     4.3.2. Extension Fields..........................................26
     4.3.3. New Fields................................................26
   4.4. Technical Implementation Issues...............................27
     4.4.1. Strips....................................................27
     4.4.2. Bit Order.................................................27
     4.4.3. Multi-Page................................................28
     4.4.4. Compression...............................................28
     4.4.5. Example Use of Page-quality Fields........................29
     4.4.6. Practical Guidelines for Writing and Reading Multi-Page
            TIFF-F Files..............................................29
     4.4.7. Use of TIFF-F for Streaming Applications..................30
   4.5. Implementation Warnings.......................................31
     4.5.1. Uncompressed Data.........................................31
     4.5.2. Encoding and Resolution...................................31
     4.5.3. EOL byte-aligned..........................................32
     4.5.4. EOL.......................................................32
     4.5.5. RTC Exclusion.............................................32
     4.5.6. Use of EOFB for T.6 Compressed Images.....................33

McIntyre, Zilles, et al.         Expires 5/17/98                [Page 2]

Internet Draft         File Format for Internet Fax    November 17, 1997


   4.6. Example Use of TIFF-F.........................................34
   4.7. Extended Black-and-white Fax Mode Summary.....................34
5. Lossless JBIG Black-and-White Fax Mode.............................36
   5.1. Overview......................................................36
   5.2. Required TIFF Fields..........................................37
     5.2.1. Baseline Fields...........................................37
     5.2.2. Extension Fields..........................................37
     5.2.3. New Fields................................................37
   5.3. Recommended TIFF Fields.......................................37
   5.4. Lossless JBIG Black-and-White Mode Summary....................37
6. Base Color Fax Mode................................................39
   6.1. Overview......................................................39
   6.2. Required TIFF Fields..........................................39
     6.2.1. Baseline Fields...........................................40
     6.2.2. Extension Fields..........................................41
     6.2.3. New Fields................................................43
   6.3. Recommended TIFF Fields.......................................43
   6.4. Base Color Fax Mode Summary...................................43
7. Lossless Color Mode................................................45
   7.1. Overview......................................................45
     7.1.1. Color Encoding............................................45
     7.1.2. JBIG Encoding.............................................46
   7.2. Required TIFF Fields..........................................46
     7.2.1. Baseline Fields...........................................46
     7.2.2. Extension Fields..........................................48
     7.2.3. New Fields................................................48
   7.3. Recommended TIFF Fields.......................................48
   7.4. Lossless Color Fax Mode Summary...............................48
8. Mixed Raster Content Mode..........................................50
   8.1 Overview.......................................................50
     8.1.1. MRC 3-layer model.........................................50
     8.1.2. A TIFF Representation for the MRC 3-layer model...........51
   8.2. Required TIFF Fields..........................................53
     8.2.1. Baseline Fields...........................................53
     8.2.2. Extension Fields..........................................54
     8.2.3. New Fields................................................55
   8.3. Recommended TIFF Fields.......................................56
   8.4. Rules and Requirements for Images.............................56
   8.5. MRC Fax Mode Summary..........................................57
9. Security Considerations............................................60
10. Copyright.........................................................60
11. References........................................................61
12. Authors' Addresses................................................62
Annex A: Summary of TIFF Fields for Internet Fax .....................63
Appendix 1: Open Issues...............................................67








McIntyre, Zilles, et al.         Expires 5/17/98                [Page 3]

Internet Draft         File Format for Internet Fax    November 17, 1997


1. Introduction

This document describes the use of TIFF (Tag Image File Format) to 
represent the data content and structure generated by the current suite 
of ITU-T Recommendations for Group 3 facsimile. These Recommendations 
and the TIFF fields described here support six facsimile modes:

    1. minimal black-and-white mode, using binary compression [T.4]
          - Application W of image/tiff media type
     2. extended black-and-white mode, using binary compression [T.4,
          T.6]
          - Application F of image/tiff media type
     3. lossless JBIG black-and-white mode, with JBIG compression [T.85, 
          T.82]
          - Application J of image/tiff media type
     4. lossy color and grayscale mode, using JPEG compression [T.42, 
          T.81]
          - Application C of image/tiff media type
     5. lossless color and grayscale mode, using JBIG compression [T.43, 
          T.82]
          - Application P of image/tiff media type
     6. mixed raster content mode [T.44], using a combination of 
          compression methods in 1-5
          - Application M of image/tiff media type


As noted, these six modes correspond to values W, F, J, C, P and M of 
the Application parameter of the MIME image/tiff media type. The 
Application parameter is described in the corresponding update to the 
registration of the MIME Media Type image/tiff [TIFF-REG]. For 
convenience, Application F, for example, of MIME Media Type image/tiff 
will be referred to as TIFF-F in this document. A previous version of 
this Internet Draft was known informally as TIFF-FX, where "FX" stood 
for "fax extended." 

The minimal interchange set of fields (Application W) will guarantee 
that, at least, binary black-and-white images will be supported. 
Implementations are required to support this minimal interchange set of 
fields.

With the intent of specifying a file format for Internet Fax, this 
draft: 

    1.  specifies the structure of TIFF files for facsimile data,
    2.  defines ITU fax-compatible values for existing TIFF fields,
    3.  defines new TIFF fields and values required for compatibility
        with ITU color fax.






McIntyre, Zilles, et al.         Expires 5/17/98                [Page 4]

Internet Draft         File Format for Internet Fax    November 17, 1997


1.1 Scope

This document defines a TIFF-based file format specification for 
enabling standardized messaging-based fax over the Internet. It 
specifies the TIFF fields and field values required for compatibility 
with the existing ITU-T Recommendations for Group 3 black-and-white, 
grayscale and color facsimile. TIFF has historically been used for 
handling fax image files in applications such as store-and-forward 
messaging.  Implementations that support this file format specification 
for import/export may elect to support it as a native format. This 
document recommends a TIFF file structure that is compatible with 
low-memory and page-level streaming implementations.  

Unless otherwise noted, the current TIFF specification [TIFF] and 
selected TIFF Technical Notes [TTN1, TTN2] are the primary references 
for defining TIFF fields. This document is the primary reference for 
defining TIFF field values for Internet fax applications. 


1.2 Approach

The basic approach to using TIFF for facsimile data is to insert the 
compressed fax data in a TIFF file and use TIFF fields to encode the 
parameters that describe the image data. These fields will have values 
that comply with the ITU-T Recommendations. The MIME media type of the 
resulting file will be image/tiff, with an optional Application 
parameter to identify the fax mode and the ITU-T Recommendations with 
which the file contents are compatible. 

This approach takes advantage of TIFF features and structures that 
bridge the data formats and performance requirements of both legacy fax 
machines and host-based fax applications. TIFF constructs for pages, 
images, and strips allow a TIFF file to preserve the fax data stream 
structure and the performance advantages that come with it. A TIFF-based 
approach also builds on an established base of users and implementors 
and ensures backward compatibility with existing TIFF-based IETF 
proposals and work in progress for Internet fax.


1.3 Overview of this draft

Section 2 gives an overview of TIFF. Section 2.1 describes the structure 
of TIFF files, including practical guidelines for structuring multi-page 
TIFF files. Section 2.2 lists the TIFF fields that are required or 
recommended for all fax modes. The TIFF fields used by some but not all 
fax modes are described in Sections 3-8, which describe the individual 
fax modes. These sections also specify the ITU-compatible field values 
(image parameters) for each mode. 





McIntyre, Zilles, et al.         Expires 5/17/98                [Page 5]

Internet Draft         File Format for Internet Fax    November 17, 1997


Section 3 defines the representation of the minimal black-and-white 
facsimile mode required of all implementations (Application = W).  
Section 4 defines the optional extended black-and-white fax capabilities 
and provides a standard definition for Application F of image/tiff, also 
known as TIFF-F. Section 5 describes the lossless black-and-white mode 
using JBIG compression (Application = J). Section 6 defines the 
representation of lossy color and grayscale facsimile (Application = C). 
Section 7 defines the representation of lossless color and grayscale 
facsimile (Application = P) and Section 8 defines the representation of 
Mixed Raster Content facsimile (Application =M). Each of these sections 
concludes with a table summarizing the required and recommended fields 
for each mode and the values they can have. 

Sections 9, 10 and 11 give Security Considerations, References and 
Authors' Addresses. Annex A gives a summary of the TIFF fields used or 
defined in this document and provides a convenient reference for 
implementors. 

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", " NOT", "SHOULD", 
"SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this document are 
to be interpreted as described in [REQ].

To implement only the minimal interchange black-and-white set of fields 
and values, one need read only Sections 1, 2, 3 and 9. To implement 
TIFF-F, the only sections needed are 1, 2, 3, 4 and 9.


2. TIFF and Fax


2.1. TIFF Overview

TIFF provides a means for describing, storing and interchanging raster 
image data. A primary goal of TIFF is to provide a rich environment 
within which applications can exchange image data. The current TIFF 
specification [TIFF] defines a commonly used, core set of TIFF fields 
known as Baseline TIFF,. The current specification and TIFF Technical 
Notes 1 and 2 [TTN1, TTN2] define several TIFF extensions. The TIFF-
based specification for fax applications uses Baseline TIFF fields with 
selected extensions, as described in this document. In a few cases, this 
document defines new fields specifically for fax applications.


2.1.1. File Structure

TIFF is designed for scanned images, which makes it a good match for 
facsimile documents, which are multi-page scanned raster images. Each 
raster image consists of a number of rows or scanlines, each of which 
has the same number of pixels, the unit of sampling. Each pixel has at 
least one sample (exactly one for black-and-white images).



McIntyre, Zilles, et al.         Expires 5/17/98                [Page 6]

Internet Draft         File Format for Internet Fax    November 17, 1997


A TIFF file begins with an 8-byte image file header. The first two bytes  
describe the byte order used within the file. Legal values are "II" 
(0x4949) when bytes are ordered from least to most significant (little-
endian), and "MM" (0x4D4D), when bytes are ordered from most to least 
significant (big-endian) within a 16- or 32-bit integer. Either byte 
order can be used, except in the case of the minimal black-and-white 
mode, which SHALL use value "II". The next two bytes contain the value 
42 that identifies the file as a TIFF file and is ordered according to 
the value in the first two bytes of the header. The last four bytes give 
the offset that point to the first image file directory (IFD). This and 
all other offsets in a TIFF file are with respect to the beginning of 
the TIFF file. An IFD can be at any location in the file after the 
header but must begin on a word boundary. Section 2.1.3 gives 
requirements and practical guidelines on the location of IFDs within a 
TIFF file for the fax applications described in this document. 

An IFD is a sequence of tagged fields, sorted in ascending order by tag 
value. An IFD consists of a 2-byte count of the number of fields, a 
sequence of field entries and a 4-byte offset to the next IFD. The 
fields contain information about the image and pointers to the image 
data. Each separate raster image in the file is represented by an IFD.

Each field entry has 12 bytes and consists of a 2-byte Tag, 2 bytes 
identifying the field type (e.g. short, long, rational, ASCII), 4 bytes 
giving the count (number of values or offsets), and the 4-byte offset of 
the field value. If, based on the type and count, the value takes 4 
bytes or less, then it replaces the offset in the field entry.  Details 
are given in the TIFF specification [TIFF].  

A TIFF file can contain more than one IFD, where each IFD is a subfile 
whose type is given in the NewSubfileType field. Multiple IFDs can be 
organized either as a linked list, with the last entry in each IFD 
pointing to the next IFD (the pointer in the last IFD is 0), or as a 
tree, using the SubIFDs field in the primary IFD [TTN1]. The SubIFDs 
field contains an array of pointers to child IFDs of the primary IFD. 
Child IFDs describe related images, such as reduced resolution versions 
of the primary IFD image. The same IFD can point both to a next IFD and 
to child IFDs, and child IFDs can themselves point to other IFDs. 

All fax modes represent a multi-page fax image as a linked list of IFDs, 
with a NewSubfileType field containing a bit that identifies the IFD as 
one page of a multi-page document. Each IFD has a PageNumber field, 
identifying the page number in ascending order, starting at 0 for the 
first page. While a Baseline TIFF reader is not required to read any 
IFDs beyond the first, an implementation that reads the files that 
comply with this specification SHALL read multiple IFDs.  Only the Mixed 
Raster Content fax mode, described in Section 7, requires the use of 
child IFDs. 





McIntyre, Zilles, et al.         Expires 5/17/98                [Page 7]

Internet Draft         File Format for Internet Fax    November 17, 1997

2.1.2 Image Structure

An IFD stores an image as one or more strips. A strip consists of 1 or 
more scanlines (rows) of raster image data in compressed form. An image 
may be stored in a single strip or may be divided into several strips, 
which would require less memory to buffer. (Baseline TIFF [TIFF] 
recommends about 8k bytes per strip, but existing fax usage is typically 
one strip per image.)

Each IFD requires three strip-related fields: StripOffsets, RowsPerStrip 
and StripByteCounts. The StripOffsets field is an array of pointers to 
the strip or strips that contain the actual image data. The 
StripByteCounts field gives the number of bytes in each strip after 
compression. TIFF requires that each strip, except the last, contain the 
same number of scanlines, which is given in the RowsPerStrip field. This 
document introduces the new StripRowCounts field that allows a variable 
number of scanlines per strip, which is required by the Mixed Raster 
Content fax mode (Section 8).

Image data is stored as uninterpreted, compressed data streams within a 
strip. The formats of these streams follow the ITU-T Recommendations. 
The Compression field in the IFD indicates the type of compression, and 
other TIFF fields in the IFD describe image attributes, such as color 
encoding and spatial resolution. Compression parameters are stored in 
the compressed data stream, rather than in TIFF fields. This makes the 
TIFF representation and compressed data format specification independent 
of each another. This approach, modeled on [TTN2], allows TIFF to 
gracefully add new compression schemes as they become available.

Some attributes can be specified both in the compressed data stream and 
within a TIFF field. It is possible that the two values will differ. 
When this happens for values required to interpret the data stream, then 
the values in the data stream take precedence. For informational values 
that are not required to interpret the data stream, such as author name, 
then the TIFF field value takes precedence.


2.1.3 TIFF File Structure for Fax Applications

The TIFF specification has a very flexible file structure, which does 
not specify the ordering of IFDs, fields values and image data in a 
file. It is up to individual applications to require or recommend an 
ordering. 

This section describes a file structure for the writing of TIFF files 
that is required in the minimal black-and-white mode (Section 3) and 
recommended in all other modes (Sections 4-8). This file structure 
orders data in a TIFF file in the same way it is ordered in a fax 
transmission. Although this file structure simplifies the implementation 
of TIFF writers and readers in fax applications, for interchange 
robustness, readers SHOULD be prepared to read TIFF files whose 
structure is consistent with [TIFF], which supports a more flexible file 
structure than is described in this section.

McIntyre, Zilles, et al.         Expires 5/17/98                [Page 8]

Internet Draft         File Format for Internet Fax    November 17, 1997

The writing of TIFF files for fax is based on a small number of ordering 
principles: (1) there SHOULD be an IFD for each page in a multi-page fax 
document; (2) the IFDs SHOULD occur in the same order in the file as the 
pages occur in the document; (3) the IFD SHOULD precede the image data 
to which it has offsets; (4) the image data SHOULD occur in the same 
order in the file as the pages occur in the document; and (5) the IFD, 
the value data and the image data it has offsets to SHOULD precede the 
next image IFD. 

For minimal black-and-white mode (Section 3.5), the SHOULDs become 
SHALLs. For the extended black-and-white mode (Section 4.4.6), SHOULD in 
the fifth principle becomes MAY. In effect, this document recommends for 
all modes what is required for the minimal mode and notes an exception 
based on past practice in the extended black-and-white mode (TIFF-F), 
which historically has not always placed the IFD, the value data and the 
image data it has offsets to before the next image IFD

An IFD entry in an IFD either contains the value associated with that 
entry or, if the value length is longer than four bytes, the IFD entry 
contains an offset to the value stored outside the IFD. Long values are 
needed for resolution and such (meta) data as dates, names and 
descriptions. The long values SHOULD be ordered to follow the IFD that 
contains an offset to them and before the image data for that IFD.

The effect of these ordering principles is that the IFD for the first 
page should come first, followed by the any data values (dates, 
descriptions, ...), followed by the image data for the first page, then 
the IFD for second page, etc. This is shown in the following figure. Each 
IFD is required to have a PageNumber field, which has value 0 for the 
first page, 1 for the second page, and so on. 

                   +-----------------------+
                   |         Header        |------------+
                   +-----------------------+            | First IFD
                   |      IFD (page 0)     | <----------+ Offset
               +---|                       |------------+
               |   |                       |--+         |
         Value |   +-----------------------+  |         |
        Offset +-->|      Long Values      |  |         |
                   +-----------------------|  | Strip   |
                   |  Image Data (page 0)  |<-+ Offset  |
                   +-----------------------+            | Next IFD
                   |      IFD (page 1)     | <----------+ Offset
               +---|                       |------------+
               |   |                       |--+         |
         Value |   +-----------------------+  |         |
        Offset +-->|      Long Values      |  |         |
                   +-----------------------|  | Strip   |
                   |  Image Data (page 1)  |<-+ Offset  |
                   +-----------------------+            | Next IFD
                   |      IFD (page 2)     | <----------+ Offset
                   +-----------------------+
                   |          :            |

McIntyre, Zilles, et al.         Expires 5/17/98                [Page 9]

Internet Draft         File Format for Internet Fax    November 17, 1997


In addition to the above ordering principles, minimal black-and-white 
mode (Section 3) requires that image data for each page SHALL be a 
single strip. For the extended black-and-white mode, the image data for 
each page SHOULD be contained within a single strip.

If the image data is stored in multiple strips, then the strips SHOULD 
occur in the file in the same order that the data they contain occurs in 
the facsimile transmission, starting at the top of the page.

This specification introduces an optional new GlobalParametersIFD field, 
defined in Section 2.2.4. This field has type IFD and indicates 
parameters describing the fax session. While it is often possible to 
obtain these parameters by scanning the file, it is convenient to make 
them available together in one place for fast and easy access. If the 
GlobalParametersIFD occurs in a TIFF file, it is recommended that it be 
located in the first IFD, immediately following the 8-byte image file 
header.


2.2 TIFF Fields for All Fax Applications

The TIFF specification [TIFF] is organized as a mandatory baseline and 
several extensions, including technical notes [TTN1, TTN2] that will be 
incorporated in the next release of TIFF. The baseline and extensions 
have required and optional fields. 

Facsimile applications require (and recommend) a mixture of baseline and 
extensions fields, as well as some new fields that are not part of the 
TIFF specification and that are defined in this document. Sections 3-8 
for each fax mode have sub-sections for required and recommended fields; 
each sub-section organizes the fields according to whether they are 
baseline, extension or new. 

The fields required for facsimile have only a few legal values, 
specified in the ITU-T Recommendations. Of these legal values, some are 
required and some are optional, just as they are required (mandatory) or 
optional in fax implementations that conform to the ITU-T 
Recommendations. The required and optional values are noted in the 
sections on the different fax modes. 

This section describes the fields required or recommended by all fax 
modes. The pattern for the description of TIFF fields in this draft is

FieldName(TagValueInDecimal) = values.                              TYPE
WhetherRequiredByTIFForTIFFforFAX
Count = (omitted if =1) = (if not in current spec but available)
    Explanation of the field, how it's used, and the values it can have.
    Default value, if any, as specified in [TIFF]

When a field's default value is the desired value, that field may be 
omitted from the relevant IFD unless specifically required by the text 
of this specification. 

McIntyre, Zilles, et al.         Expires 5/17/98               [Page 10]

Internet Draft         File Format for Internet Fax    November 17, 1997


2.2.1.  TIFF fields required for all fax modes

The TIFF fields listed in this section SHALL be used by all fax modes, 
but which have values that are not specified by the ITU standards, i.e. 
the fields do not have mode-specific values. The next sub-section lists 
the common fields that all fax modes SHALL use, and which do have ITU-
specified or mode-specific values. 


ImageLength(257)                                           SHORT or LONG
    RequiredByTIFFBaseline
    Total number of scanlines in image.
    No default, must be specified.

NewSubFileType(254) = (Bit 1=1).                                    LONG
    RequiredByTIFFforFAX, RequiredByTIFFBaseline
    Bit 1 is 1 if the image is a single page of a multi-page document.
    Default = 0 (no subfile bits on)

Orientation(274) = 1-8.                                            SHORT
    RequiredByTIFFBaseline
    1: 0th row represents the visual top of the image; the 0th column 
    represents the visual left side of the image. See the current TIFF 
    specification [TIFF] for further values. Baseline TIFF only requires 
    value = 1.
    Default = 1 (field may be omitted if this is the value)

PageNumber(285)                                                    SHORT
    RequiredByTIFFforFAX, TIFFExtension
    Count = 2
    The first number represents the page number (0 for the first page); 
    the second number is the total number of pages in the document. If 
    the second value is 0, then the total page count is not available.

ResolutionUnit(296) = 2, 3.                                        SHORT
    RequiredByTIFFBaseline
    The unit of measure for resolution. 2 = inch, 3 = centimeter; 
    Default = 2 (field may be omitted if this is the value)
    Note: TIFF-F (Section 4) has traditionally used inch-based measures.

RowsPerStrip(278)                                          SHORT or LONG
    RequiredByTIFFBaseline
    The number of scanlines per TIFF strip. For a single strip image, 
    this is the same as the value of the ImageLength field.
    Default = 2**32 - 1 (meaning all scanlines in one strip)

StripByteCounts(279)                                       SHORT or LONG
    RequiredByTIFFBaseline
    Count = number of strips
    For each strip, the number of bytes in that strip after compression.
    No default, must be specified.


McIntyre, Zilles, et al.         Expires 5/17/98               [Page 11]

Internet Draft         File Format for Internet Fax    November 17, 1997


StripOffsets(273)                                          SHORT or LONG
    RequiredByTIFFBaseline
    Count = number of strips
    For each strip, the byte offset from the beginning of the file to 
    that strip.
    No default, must be specified.


2.2.2 Additional TIFF fields required for all fax modes

The TIFF fields listed in this section SHALL be used by all fax modes, 
but the values associated with them depend on the mode being described 
and the associated ITU Recommendations. Therefore, only the fields are 
defined here; the values applicable to a particular fax mode are 
described in Sections 3-8. 

BitsPerSample(258)                                                 SHORT
    RequiredByTIFFBaseline
    Number of bits per image sample
    Default = 1 (field may be omitted if this is the value)

Compression(259)                                                   SHORT
    RequiredByTIFFBaseline
    Compression method used for strip data
    Default = 1 (no compression, so may not be omitted for FAX)

ImageWidth(256)                                            SHORT or LONG
    RequiredByTIFFBaseline
    The number of samples per scanline (row) of the image
    No default, must be specified.

PhotometricInterpretation(262)                                     SHORT
    RequiredByTIFFBaseline
    The color space of the image data
    No default, must be specified

SamplesPerPixel(277)                                               SHORT
    RequiredByTIFFBaseline
    The number of components per pixel
    Default =1 (field may be omitted if this is the value)

XResolution(282)                                                RATIONAL
RequiredByTIFFBaseline
    The horizontal resolution of the image is expressed in pixels per 
    resolution unit.
    No default, must be specified

YResolution(283)                                                RATIONAL
    RequiredByTIFFBaseline
    The vertical resolution of the image is expressed in pixels per 
    resolution unit.
    No default, must be specified

McIntyre, Zilles, et al.         Expires 5/17/98               [Page 12]

Internet Draft         File Format for Internet Fax    November 17, 1997



2.2.3 TIFF fields recommended for all fax modes

The TIFF fields listed in this section MAY be used by all fax modes. 
Recommended fields that are mode-specific are described in Section 3-8.

DateTime(306)                                                      ASCII
    OptionalInTIFFBaseline
    Date/time in the format "YYYY:MM:DD HH:MM:SS" in 24-hour format.
    No default.

DocumentName(269)                                                  ASCII
    OptionalInTIFFExtension(DocumentStorageAndRetrieval)
    The name of the scanned document. This is a TIFF extension field, 
    not a Baseline TIFF field.
    No default.

ImageDescription(270)                                              ASCII
    OptionalInTIFFBaseline
    A string describing the contents of the image.
    No default.

Software(305)                                                      ASCII
    OptionalInTIFFBaseline
    The optional name and release number of the software package that 
    created the image.
    No default.


2.2.4 New TIFF fields recommended for fax modes

The new TIFF fields listed in this section MAY be used by all fax modes, 
but their support is not expected for the minimal black-and-white fax 
mode described in Section 3. These fields describe "global" parameters 
of the fax session that created the image data. They are optional, not 
part of the current TIFF specification, and are defined in this 
document.  

The first new field, GlobalParametersIFD, is an IFD that contains global 
parameters and is located in a Primary IFD. 

GlobalParametersIFD.                                                 IFD
    An IFD containing global parameters. It is recommended that a TIFF 
    writer place this field in the first IFD, where a TIFF reader would 
    find it quickly.

Each field in the GlobalParametersIFD is a TIFF field that is legal in 
any IFD. Required baseline fields should not be located in the 
GlobalParametersIFD, but should be in each image IFD. If a conflict 
exists between fields in the GlobalParametersIFD and the image IFDs, 
then the data in the image IFD shall prevail.


McIntyre, Zilles, et al.         Expires 5/17/98               [Page 13]

Internet Draft         File Format for Internet Fax    November 17, 1997


Among the GlobalParametersIFD entries is a new ProfileType field which 
generally describes information in this IFD and in the TIFF file.

ProfileType(TagToBeAssigned)                                        LONG
    The type of image data stored in this IFD:
    0 = Unspecified
    1 = Group 3 fax
    other values for further study

The following new global fields are defined in this document as IFD 
entries for use with fax applications.

ITUFaxMode(TagToBeAssigned) = 0 - 5.                                BYTE
    The currently defined values are:
    0: does not conform to ITU-T Recommendations for facsimile,
    1: minimal black & white lossless (ITU-T Rec. T.4),
    2: extended black & white lossless (ITU-T Rec. T.4, T.6),
    3: lossless JBIG black & white (ITU-T Rec. T.85)
    4: lossy color and grayscale (ITU-T Rec. T.42),
    5: lossless color and grayscale (ITU-T Rec. T.43),
    6: Mixed Raster Content (ITU-T Rec. T.44).
Notes: A file can use an ITU encoding with non-ITU parameters, such as 
using JPEG to compress a CMYK image. In this case, ITUFaxMode is 0.

CodingMethods(TagToBeAssigned)                                      LONG
    This field indicates which coding methods are used in the file. A 
    bit value of 1 indicates:
    Bit 0: unspecified compression,
    Bit 1: 1-dimensional coding, ITU-T Rec. T.4 (MH - Modified Huffman),
    Bit 2: 2-dimensional coding, ITU-T Rec. T.4 (MR - Modified Read),
    Bit 3: 2-dimensional coding, ITU-T Rec. T.6 (MMR - Modified Modified 
    Read),
    Bit 4: ITU-T Rec. T.82 coding, applying ITU-T Rec. T.85 (JBIG),
    Bit 5: ITU-T Rec. T.81 (Baseline JPEG),
    Bits 6-31: reserved for future use
    Note: There is a limit of 32 compression types to identify standard 
    compression methods.

VersionYear(TagToBeAssigned)                                        BYTE
    Count: 4
    The year of the standard specified by the ITUFaxMode field, given as 
    4 characters, e.g. '1997'; used in lossy and lossless color modes.

ModeNumber (TagToBeAssigned)                                        BYTE
    The mode of the standard specified by the ITUFaxMode field. A 
    value of 0 indicates Mode 1.0; used in mixed raster content mode.







McIntyre, Zilles, et al.         Expires 5/17/98               [Page 14]

Internet Draft         File Format for Internet Fax    November 17, 1997


3. Minimal Black-and-White Fax Mode

This section defines Application W of MIME Media Type image/tiff, which 
is the minimal black-and-white mode. 

Black-and-white mode is the binary fax application most users are 
familiar with today. This mode is appropriate for black-and-white text 
and line art. Black-and-white mode is divided into two levels of 
capability. This section describes the minimal interchange set of TIFF 
fields that must be supported by all implementations in order to assure 
that some form of image, albeit black-and-white, can be interchanged. 
This minimum interchange set is a strict subset of the fields and values 
defined for application F of image/tiff(TIFF-F) in Section 4, which 
describes extensions to the minimal interchange set of fields that 
provide a richer set of black-and-white capabilities.


3.1. Overview

The minimal interchange portion of the black-and-white facsimile mode 
supports the original Group 3 fax resolutions, commonly called 
"standard" and "fine," and 1-dimensional Modified Huffman (MH) 
compression.

To assure interchange, this mode uses the minimal set of fields, with a 
minimal set of values. There are no recommended fields in this mode. 
Further, the TIFF file is required to be "little endian," which means 
that the byte order value in the TIFF header is "II". This mode is 
required to follow the guidelines laid out in Section 2.1.3 for TIFF 
file structure, with the added requirement that a single strip contain 
the image data for each page; see Section 3.5. The image data may 
contain RTC sequences, as specified in Section 3.4.


3.2. Required TIFF Fields

Besides the fields listed in Section 2.2.1, the minimal black-and-white 
fax mode requires the following fields. The fields listed in Section 
2.2.1 and the fields and fax-specific values specified in this sub-
section must be supported by all implementations.













McIntyre, Zilles, et al.         Expires 5/17/98               [Page 15]

Internet Draft         File Format for Internet Fax    November 17, 1997


3.2.1 Baseline fields

BitsPerSample(258) = 1.                                            SHORT
    RequiredByTIFFBaseline
    Binary data only.
    Default = 1 (field may be omitted if this is the value)

Compression(259) = 3.                                              SHORT
    RequiredByTIFFBaseline
    The value 3 is not a TIFF Baseline value [TIFF]; it is an extended 
    value. The T4Options field must be specified and its value specifies 
    that the data is encoded using the MH encoding of [T.4].

FillOrder(266) = 2.                                                SHORT
    RequiredByTIFFBaseline
    2 = Pixels are arranged within a byte such that pixels with lower 
    column values are stored in the lower-order bits of the bytes, i.e., 
    least significant bit first (LSB).
    The FillOrder field is used to describe how 1 bit pixels are stored 
    within a byte of compressed image data. There are two possible 
    FillOrders for each byte: 1) the pixels are stored with the lowest 
    numbered pixel in the byte in the Most Significant Bit (MSB) of the 
    byte, or 2) the pixels are stored with the lowest numbered pixel in
    the byte in the Least Significant Bit (LSB) of the byte.

NOTE: Baseline TIFF readers are only required to support FillOrder = 1, 
where the lowest numbered pixel is stored in the MSB of the byte. 
However, because many devices, such as modems, transmit the LSB first 
when converting the data to serial form, it is common for black-and-
white FAX products to use the second FillOrder =2, where the lowest 
numbered pixel is stored in the LSB. Therefore, this value is specified 
in the minimal black-and-white mode.

ImageWidth(256) = 1728.                                    SHORT or LONG
    RequiredByTIFFBaseline
    This mode only supports a page width of 1728 pixels. This width 
    corresponds to North American Letter and Legal and to ISO A4 size
    pages. No default, must be specified.

PhotometricInterpretation(262) = 0.                                SHORT
    RequiredByTIFFBaseline
    0 = pixel value 1 means black
    No default, must be specified

ResolutionUnit(296) = 2.                                           SHORT
    RequiredByTIFFBaseline
    The unit of measure for resolution. 2 = inch.
    Default = 2 (field may be omitted if this is the value)





McIntyre, Zilles, et al.         Expires 5/17/98               [Page 16]

Internet Draft         File Format for Internet Fax    November 17, 1997


SamplesPerPixel(277) = 1.                                          SHORT
    RequiredByTIFFBaseline
    The number of components per pixel; 1 for black-and-white
    Default =1 (field may be omitted if this is the value)

XResolution(282) = 204.                                         RATIONAL
    RequiredByTIFFBaseline
    The horizontal resolution of the image is expressed in pixels per 
    resolution unit. In pixels/inch, the allowed value is 204.
    No default, must be specified

YResolution(283) = 98. 196.                                     RATIONAL
    RequiredByTIFFBaseline
    The vertical resolution of the image is expressed in pixels per 
    resolution unit. In pixels/inch, the allowed values are 98 and 196.
    No default, must be specified


3.2.2 Extension fields

T4Options(292) = (Bit 0 = 0, Bit 1 = 0, Bit 2 = 0, 1) LONG
    RequiredTIFFExtension (when Compression = 3)
    Bit 0 = 0 indicates MH encoding.
    Bit 1 must be 0
    Bit 2 = 1 indicates that EOLs are byte aligned, = 0 EOLs not byte 
    aligned
    Default is all bits are 0 (applies when EOLs are not byte aligned)

Note: The T4Options field is required when the Compression field has a 
value of 3. Bit 0 of this field specifies the encoding used (MH only in 
this mode) and Bit 2 indicates whether the EOL codes are byte-aligned or 
not. If they are byte aligned, then fill bits have been added as 
necessary so that the End of Line (EOL) codes always end on byte 
boundaries. See Section 3.4 for details. 


3.2.3. New Fields

None.


3.3. Recommended TIFF Fields

None.









McIntyre, Zilles, et al.         Expires 5/17/98               [Page 17]

Internet Draft         File Format for Internet Fax    November 17, 1997


3.4. End of Line (EOL) and Return to Control (RTC)

The handling of End of Line (EOL) codes and Return to Control (RTC) 
sequences illustrate the differences between conventional fax, which is 
bit and stream oriented, and TIFF, which is byte and file oriented. 
Conventional fax, Baseline TIFF and TIFF extensions for fax all handle 
EOLs and RTCs differently. 

In conventional fax, an MH-compressed fax data stream for a page 
consists of the following sequence:

    EOL, compressed data (first line), EOL, compressed data, ... ,
    EOL, compressed data (last line), RTC (6 consecutive EOL codes)

Baseline TIFF does not use EOL codes or Return to Control (RTC) 
sequences for MH-compressed data, and does not use fill bits to byte 
align EOL codes. However, the TIFF extension field T4Options used in 
this specification for MH compression (Compression = 3) allows EOLs. 
Furthermore, Bit 2 in the T4Options field indicates whether or not the 
EOL codes are byte aligned. If Bit 2 = 1, indicating the EOL codes are 
byte aligned, then fill bits have been added as necessary before EOL 
codes so that an EOL code always ends on a byte boundary, and the first 
bit of data following an EOL begins on a byte boundary. Without fill 
bits, an EOL code may end in the middle of a byte. Byte alignment 
relieves application software of the burden of bit-shifting every byte 
while parsing scan lines for line-oriented image manipulation (such as 
writing a TIFF file). Not all TIFF readers historically used for fax are 
able to deal with non-byte aligned data. 

While TIFF extension allows EOL codes, TIFF in fax applications has 
traditionally excluded RTC sequences. Implementations that want common 
processing and interfaces for fax data streams and Internet fax files 
would prefer that the TIFF data include RTC sequences. 

To reconcile these differences, RTCs are allowed in cases where EOL 
codes are not byte aligned and no fill bits have been added to the data. 
This corresponds to situations where the fax data is simply inserted in 
a strip without being processed or interpreted. RTCs should not occur in 
the data when EOLs have been byte aligned. This is formally specified in 
the next sub-section. 

3.4.1. RTC Exclusion

Implementations which wish to maintain strict conformance with TIFF and 
compatibility with the historical use of TIFF for fax SHOULD NOT include 
the RTC sequence when writing TIFF files. However, implementations which 
need to support T.4-generated data transparently MAY include RTCs if Bit 
2 in the T4Options field is 0, indicating that no fill bits have been 
added and that EOL codes are not byte aligned. Implementors of TIFF 
readers should be aware that there are some existing TIFF 
implementations for fax that include the RTC sequence in MH image data. 


McIntyre, Zilles, et al.         Expires 5/17/98               [Page 18]

Internet Draft         File Format for Internet Fax    November 17, 1997


3.5. File Structure

The TIFF header, described in Section 2.1.1, contains two bytes which 
describe the byte order used within the file. For the minimal black-and-
white mode, these bytes SHALL have the value "II" (0x4949), denoting 
that the bytes in the TIFF file are in LSByte-first order (little-
endian). The first or 0th IFD immediately follows the header, so that offset to the first IFD is 8. The headers values are shown in the 
following table, based on [WIDE]

        +--------+-------------------+--------+-----------+
        | Offset |   Description     |     Value          |
        +--------+-------------------+--------+-----------+
        |   0    |   Byte Order      |  0x4949 (II)       |
        +--------+-------------------+--------+-----------+
        |   2    |   Identifier      |  0x0042            |
        +--------+-------------------+--------+-----------+
        |   4    | Offset of 0th IFD |  0x 0000 0008      |
        +--------+-------------------+--------+-----------+


The minimal black-and-white SHALL order IFDs and image data within a 
file according to the file structure described in Section 2.1.3. 
Furthermore, the image data for each page SHALL be contained within a 
single strip. This means that the StripOffsets field will contain the 
pointer to the image data. With two exceptions, the field entries in the 
IFD contain the field values instead of offsets to field values located 
outside the IFD. The two exceptions are the values for the XResolution 
and YResolution fields, both of which are type RATIONAL and require 2 4-
byte numbers. They are placed immediately after the IFD which contains 
the offsets to them, as shown in Section 2.1.3, and before the image 
data pointed to by that IFD.

Using the file structure in Section 2.1.3 can reduce the memory 
requirements in implementations. It is also provides some support for 
streaming, in which a file can be processed as it is received and before 
the entire file is received. 


3.6 Minimal Black-and-white Mode Summary

The table below summarizes the TIFF fields that comprise the minimal 
interchange set for black-and-white facsimile. The Baseline and 
Extension fields must be supported by all implementations. For 
convenience in the table, certain fields which have a value that is a 
sequence of flag bits are shown taking integer values that correspond to the flags that are set. An implementation should test the setting of the 
relevant flag bits individually, however, to allow extensions to the 
sequence of flag bits to be appropriately ignored. (See, for example, 
T4Options below.)



McIntyre, Zilles, et al.         Expires 5/17/98               [Page 19]

Internet Draft         File Format for Internet Fax    November 17, 1997



    +---------------------------+--------------------------------+
    | Baseline Fields           |  Values                        |
    +---------------------------+--------------------------------+
    | BitsPerSample             | 1                              |
    +---------------------------+--------------------------------+
    | Compression               | 3: 1D Modified Huffman coding  |
    |                           |     set T4Options = 0 or 4     |
    +---------------------------+--------------------------------+
    | FillOrder                 | 2: least significant bit first |
    +---------------------------+--------------------------------+
    | ImageWidth                | 1728                           |
    +---------------------------+--------------------------------+
    | ImageLength               | n: total number of scanlines   |
    |                           | in image                       |
    +---------------------------+--------------------------------+
    | NewSubFileType            | 2: Bit 1 identifies single     |
    |                           | page of a multi-page document  |
    +---------------------------+--------------------------------+
    | PageNumber                | n,m: page number n followed by |
    |                           | total page count m             |
    +---------------------------+--------------------------------+
    | PhotometricInterpretation | 0: pixel value 1 means black   |
    +---------------------------+--------------------------------+
    | ResolutionUnit            | 2: inch                        |
    +---------------------------+--------------------------------+
    | RowsPerStrip              | number of scanlines per strip  |
    |                           | = ImageLength, with one strip  |
    +---------------------------+--------------------------------+
    | SamplesPerPixel           | 1                              |
    +---------------------------+--------------------------------+
    | StripByteCounts           | number or bytes in TIFF strip  |
    +---------------------------+--------------------------------+
    | StripOffsets              | offset from beginning of       |
    |                           | file to single TIFF strip      |
    +---------------------------+--------------------------------+
    | XResolution               | 204 (pixels/inch)              |
    +---------------------------+--------------------------------+
    | YResolution               | 98, 196 (pixels/inch)          |
    +---------------------------+--------------------------------+
    | Extension Fields                                           |
    +---------------------------+--------------------------------+
    | T4Options                 | 0: MH coding, EOLs not byte    |
    |                           |               aligned          |
    |                           | 4: MH coding, EOLs byte aligned|
    +---------------------------+--------------------------------+







McIntyre, Zilles, et al.         Expires 5/17/98               [Page 20]

Internet Draft         File Format for Internet Fax    November 17, 1997


4. Extended Black-and-White fax mode

This section defines Application F of MIME Media Type image/tiff, which 
is the extended black-and-white mode. 

The previous section described the minimal interchange set of TIFF 
fields that must be supported by all implementations in order to assure 
that some form of image, albeit black-and-white, can be interchanged.

This section describes extensions to the minimal interchange set of 
fields that provide a richer set of black-and-white capabilities. The 
fields and values described in this section are a superset of the fields 
and values defined for the minimal interchange set in Section 3. In 
addition to the MH encoding, Modified READ (MR) and Modified Modified 
READ (MMR) encoding as described in [T.4] and [T.6] are supported. 

This section provides a standard definition of what has historically 
been known as TIFF Class F, now known as Application F of MIME Media 
Type image/tiff, or TIFF-F. In doing so, it aligns this mode with 
current ITU-T Recommendations and with current industry practice.

Section 4.1 gives an overview of TIFF-F. Section 4.2 describes the TIFF 
fields that SHALL be used in this mode. Section 4.3 describes the fields 
that MAY be used in this mode. In the spirit of the original TIFF-F 
specification, Sections 4.4 and 4.5 discuss technical implementation 
issues and warnings. Section 4.6 gives an example use of TIFF-F. Section 
4.7 gives a summary of the required and recommended fields and their 
values. 


4.1 TIFF-F Overview

Though it has been in common usage for many years, TIFF-F has previously 
never been documented in the form of a standard.  An informal TIFF-F 
document was originally created by a small group of fax experts led by 
Joe Campbell.  The existence of TIFF-F is noted in [TIFF] but it is not 
defined.  This document serves as the formal definition of the F 
application of [TIFF] for Internet applications. For ease of reference, 
the term TIFF-F will be used throughout this document as a shorthand for 
"Application F of TIFF".

Up until the TIFF 6.0 specification, TIFF supported various "Classes" 
which defined the use of TIFF for various applications. Classes were 
used to support specific applications. In this spirit, TIFF-F has been 
known historically as "TIFF Class F".  Previous informal TIFF-F 
documents [TIFF-F0] used the "Class F" terminology.  As of TIFF 6.0 
[TIFF], the TIFF Class concept has been eliminated in favor of the 
concept of Baseline TIFF.  Therefore, this document updates the 
definition of TIFF-F as the F application of TIFF, by using Baseline 
TIFF as defined in [TIFF] as the starting point and then adding the TIFF 
extensions to Baseline TIFF which apply for TIFF-F.  In almost all 


McIntyre, Zilles, et al.         Expires 5/17/98               [Page 21]

Internet Draft         File Format for Internet Fax    November 17, 1997


cases, the resulting definition of TIFF-F fields and values remains 
consistent with those used historically in earlier definitions of TIFF 
Class F.  Where some of the values for fields have been updated to 
provide more precise conformance with the ITU-T [T.4] and [T.30] fax 
recommendations, these differences are noted.


4.2. Required TIFF Fields

This section lists the required fields and the values they must have to 
be ITU-compatible. Besides the fields listed in Section 2.2.1, the 
extended black-and-white fax mode SHALL use the following fields. 

4.2.1. Baseline fields

BitsPerSample(258) = 1.                                            SHORT
    RequiredByTIFFBaseline
    Binary data only.
    Default = 1 (field may be omitted if this is the value)

Compression(259) = 3, 4.                                        SHORT
    RequiredByTIFFBaseline
    3 = 1- or 2- dimensional coding, must have T4Options field This is 
    a TIFF Extension value [TIFF].
    4 = 2-dimensional coding, ITU-T Rec. T.6 (MMR - Modified Modified 
    Read, must have T6Options field)) This is a TIFF Extension value.
    Default = 1 (and is not applicable; field must be specified)

NOTE: Baseline TIFF permits use of value 2 for Modified Huffman 
encoding, but the data is presented in a form which is not byte aligned 
and so this value is not specified for fax applications. 
See Sections 4.4.4, 4.5.1 and 4.5.2 for more information on compression 
and encoding.


FillOrder(266) = 1 , 2.                                            SHORT
    RequiredByTIFFBaseline
    1 = Pixels are arranged within a byte such that pixels with lower 
    column values are stored in the higher-order bits of the bytes, 
    i.e., most significant bit first (MSB).
    2 = Pixels are arranged within a byte such that pixels with lower 
    column values are stored in the lower-order bits of the bytes, i.e., 
    least significant bit first (LSB).
    The FillOrder field is used to describe how 1 bit pixels are stored 
    within a byte of compressed image data. There are two possible 
    FillOrders for each byte: 1) the pixels are stored with the lowest 
    numbered pixel in the byte in the Most Significant Bit (MSB) of the 
    byte, or 2) the pixels are stored with the lowest numbered pixel in 
    the byte in the Least Significant Bit (LSB) of the byte.




McIntyre, Zilles, et al.         Expires 5/17/98               [Page 22]

Internet Draft         File Format for Internet Fax    November 17, 1997


NOTE: Baseline TIFF readers are only required to support the first 
FillOrder (value = 1) where the lowest numbered pixel is stored in the 
MSB of the byte. However, because many devices, such as modems, transmit 
the LSB first when converting the data to serial form, it is common for 
black-and-white FAX products to use the second FillOrder (value =2) 
where the lowest numbered pixel is stored in the LSB. Therefore, this 
value is specified in the minimal black-and-white mode. However, TIFF-F 
is required to support both bit orders. 
See Section 4.4.2 for more information on bit order.

ImageWidth(256)= : 1728, 2048, 2432, 2592, 3072,           SHORT or LONG
                   3456, 3648, 4096, 4864
    RequiredByTIFFBaseline
    This mode supports the following fixed page widths: 1728, 2592, 3456 
    (corresponding to North American Letter and Legal, ISO A4 paper 
    sizes), 2048, 3072, 4096 (corresponding to ISO B4 paper size), and 
    2432, 3648, 4864 (corresponding to ISO A3 paper size).
    No default; must be specified

NOTE: Historical TIFF-F did not include support for the following widths 
related to higher resolutions: 2592, 3072, 3648, 3456, 4096 and 4864.   
Historical TIFF-F documents also included the following values related 
to A5 and A6 widths: 816 and 1216. Per the most recent version of [T.4], 
A5 and A6 documents are no longer supported in Group 3 facsimile, so the 
related width values are now obsolete.  See section 4.5.2 for more 
information on inch/metric equivalencies and other implementation 
details. 

NewSubFileType(254) = (Bit 1=1).                                    LONG
    RequiredByTIFFforFAX, RequiredByTIFFBaseline
    Bit 1 is 1 if the image is a single page of a multi-page document.
    Default = 0 (no subfile bits on)

NOTE: Bit 1 is always set to 1 for TIFF-F, indicating a single page of a 
multi-page image. The same bit settings are used when TIFF-F is used for 
a one page fax image.
See Section 4.4.3 for more details on multi-page files.

PhotometricInterpretation(262) = 0, 1.                             SHORT
    RequiredByTIFFBaseline 
    0 = pixel value 1 means black, 1 = pixel value 1 means white.
    This field allows notation of an inverted or negative image. 
    No default, must be specified

ResolutionUnit(296) = 2, 3.                                        SHORT
    RequiredByTIFFBaseline
    The unit of measure for resolution. 2 = inch, 3 = centimeter; TIFF-F 
    has traditionally used inch-based measures.
    Default = 2 (field may be omitted if this is the value)




McIntyre, Zilles, et al.         Expires 5/17/98               [Page 23]

Internet Draft         File Format for Internet Fax    November 17, 1997


SamplesPerPixel(277) = 1.                                          SHORT
    RequiredByTIFFBaseline
    1 = monochrome, bilevel in this case (see BitsPerSample)
    Default =1 (field may be omitted if this is the value)

XResolution(282) = 200, 204, 300, 400, 408                      RATIONAL
    RequiredByTIFFBaseline
    The horizontal resolution of the image is expressed in pixels per 
    resolution unit. In pixels/inch, the allowed values are: 200, 204, 
    300, 400, and 408.
    No default, must be specified

NOTE: The values of 200 and 408 have been added to the historical TIFF-F 
values, for consistency with [T.30].  Some existing TIFF-F 
implementations may also support values of 77 pixels/cm.  See section 
4.5.2 for more information on inch/metric equivalencies and other 
implementation details.

YResolution(283) = 98, 100, 196, 200, 300, 391, and 400       RATIONAL
    RequiredByTIFFBaseline
    The vertical resolution of the image is expressed in pixels per 
    resolution unit. In pixels/inch, the allowed values are: 98, 100, 
    196, 200, 300, 391, and 400 pixels/inch
    No default, must be specified

Note: The values of 100, 200, and 391 have been added to the historical 
TIFF-F values, for consistency with [T.30].  Some existing TIFF-F 
implementations may also support values of 77 and 38.5 (cm). See section 
4.5.2 for more information on inch/metric equivalencies and other 
implementation details.

Not all combinations of XResolution, YResolution and ImageWidth are 
legal. The following table gives the legal combinations and 
corresponding paper size [T.30].

    +--------------+-----------------+---------------------------+
    |   XResolution x YResolution    |         ImageWidth        |
    +--------------+-----------------+---------------------------+
    | 200x100,200x200,204x98,204x196 |  1728   |  2048  |  2432  |
    +--------------+-----------------+---------------------------+
    |          300 x 300             |  2592   |  3072  |  3648  |
    +--------------+-----------------+---------------------------+
    |     408 x 391, 400 x 400       |  3456   |  4096  |  4864  |
    +--------------+-----------------+---------------------------+
                                     |Letter,A4|   B4   |   A3   |
                                     |  Legal  |        |        |
                                     +---------+--------+--------+
                                     |         Paper Size        |
                                     +---------------------------+




McIntyre, Zilles, et al.         Expires 5/17/98               [Page 24]

Internet Draft         File Format for Internet Fax    November 17, 1997


4.2.2. Extension fields

T4Options(292) = (Bit 0 = 0 or 1, Bit 1 = 0, Bit 2 = 0 or 1)        LONG
    RequiredTIFFExtension (when Compression = 3)
    T4Options was also known as Group3Options in a prior version of 
    [TIFF].
    Bit 0 = 1 indicates MR encoding, = 0 indicates MH encoding.
    Bit 1 must be 0
    Bit 2 = 1 indicates that EOLs are byte aligned, = 0 EOLs not byte 
    aligned
    Default is all bits are 0 (applies when MH encoding is used and EOLs
    are not byte aligned EOLs) (See Section 3.2.2.)
    The T4Options field is required when the Compression field has a 
    value of 3. This field specifies the encoding used (MH or MR) and 
    whether the EOL codes are byte-aligned or not. If they are byte 
    aligned, then fill bits have been added as necessary so that the End 
    of Line (EOL) codes always end on byte boundaries See Sections 3.4, 
    4.5.3 and 4.5.4 for details. 


NOTE: The data in a TIFF-F image using a T.4 encoding is not terminated 
with an RTC; see Section 4.5.5. 

T6Options(293) = (Bit 0 = 0, Bit 1 = 0). LONG
    RequiredTIFFExtension (when Compression = 4)
    Used to indicate parameterization of 2D Modified Modified Read 
    compression. T6Options was also known as Group4Options in a prior 
    version of [TIFF].
    Bit 0 must be 0.
    Bit 1 = 0 indicates uncompressed data mode is not allowed; = 1 
    indicates uncompressed data is allowed (see [TIFF]).
    Default is all bits 0. For FAX, the field must be present and have 
    the value 0. The use of uncompressed data where compression would 
    expand the data size is not allowed for FAX.

NOTE: MMR compressed data is two-dimensional and does not use EOLs. Each 
MMR encoded image MUST include an "end-of-facsimile-block" (EOFB) code 
at the end of each coded strip; see Section 4.5.6.


4.2.3. New fields

None.


4.3. Recommended TIFF fields


4.3.1. Baseline fields

See Section 2.2.3.


McIntyre, Zilles, et al.         Expires 5/17/98               [Page 25]

Internet Draft         File Format for Internet Fax    November 17, 1997


4.3.2. Extension fields

See Section 2.2.3.


4.3.3. New fields

Three new, optional fields, used in the original TIFF-F description to 
describe page quality, are defined in this specification.  The 
information contained in these fields is usually obtained from receiving 
facsimile hardware (if applicable). They SHOULD NOT be used in writing 
TIFF-F files for facsimile image data that is error corrected or 
otherwise guaranteed not to have coding errors. Some applications need 
to understand exactly the error content of the data.  For example, a CAD 
program might wish to verify that a  file has a low error level before 
importing it into a high-accuracy document. Because Group 3 facsimile 
devices do not necessarily perform error correction on the image data, 
the quality of a received page must be inferred from the pixel count of 
decoded scan lines. A "good" scan line is defined as a line that, when 
decoded, contains the correct number of pixels. Conversely, a "bad" scan 
line is defined as a line that, when decoded, comprises an incorrect 
number of pixels.

BadFaxLines(326)                                           SHORT or LONG
    The number of "bad" scan lines encountered by the facsimile device 
    during reception. A "bad" scanline is defined as a scanline that, 
    when decoded, comprises an incorrect number of pixels. Note that 
    PercentBad = (BadFaxLines/ImageLength) * 100
    No default.

CleanFaxData(327) = 0, 1, 2.                                       SHORT
    Indicates if "bad" lines encountered during reception are stored in 
    the data, or if "bad" lines have been replaced by the receiver.
    0 = No "bad" lines
    1 = "bad" lines exist, but were regenerated by the receiver,
    2 = "bad" lines exist, but have not been regenerated.
    No default.

NOTE: Many facsimile devices do not actually output bad lines. Instead, 
the previous good line is repeated in place of a bad line. Although this 
substitution, known as line regeneration, results in a visual 
improvement to the image, the data is nevertheless corrupted.  The 
CleanFaxData field describes the error content of the data.  That is, 
when the BadFaxLines and ImageLength fields indicate that the facsimile 
device encountered lines with an incorrect number of pixels during 
reception, the CleanFaxData field indicates whether these bad lines are 
actually still in the data or if the receiving facsimile device replaced 
them with regenerated lines.





McIntyre, Zilles, et al.         Expires 5/17/98               [Page 26]

Internet Draft         File Format for Internet Fax    November 17, 1997


ConsecutiveBadFaxLines(328)                               LONG or SHORT
    Maximum number of consecutive "bad" scanlines received.  The
    BadFaxLines field indicates only the quantity of bad lines. The 
    consecutiveBadFaxLines field is an indicator of the distribution of 
    bad lines and may therefore be a better general indicator of 
    perceived image quality.
    No Default.

NOTE: The BadFaxLines and ImageLength data indicate only the quantity of 
such lines. The ConsecutiveBadFaxLines field is an indicator of their 
distribution and may therefore be a better general indicator of 
perceived image quality. See Section 4.4.5 for examples of the use of 
these fields. 

While the GlobalParameters IFD is recommended for use by all fax modes, 
except the minimal black-and-white mode, it use is optional in the extended black-and-white fax mode.


4.4. Technical Implementation Issues


4.4.1   Strips

In general, TIFF files divide an image into "strips," also known as 
"bands."  Each strip contains a few scanlines of the image. By using 
strips, a TIFF reader need not load the entire image into memory, thus 
enabling it to fetch and decompress small random portions of the image 
as necessary.

The number of scanlines in a strip is described by the RowsPerStrip 
value and the number of bytes in the strip after compression by the 
StripByteCount value.  The location in the TIFF file of each strip is 
given by the StripOffsets values.

Strip size is application dependent. The recommended approach for multi-
page TIFF-F images is to represent each page as a single strip. Existing 
TIFF-F usage is typically one strip per page in multi-page TIFF-F files. 
See Sections 2.1.2 and 2.1.3. 


4.4.2  Bit Order

The current TIFF specification [TIFF] does not require a Baseline TIFF 
reader to support FillOrder=2, i.e. lowest numbered 1-bit pixel in the 
least significant bit of a byte. It further recommends that FillOrder=2 
be used only in special purpose applications.






McIntyre, Zilles, et al.         Expires 5/17/98               [Page 27]

Internet Draft         File Format for Internet Fax    November 17, 1997


Facsimile data appears on the phone line in bit-reversed order relative 
to its description in ITU-T Recommendation T.4.  Therefore, a wide 
majority of facsimile applications choose this natural order for data in 
a file. Nevertheless, TIFF F readers must be able to read data in both 
bit orders and support FillOrder values of 1 and 2.


4.4.3. Multi-Page

Many existing applications already read TIFF-F-like files, but do not 
support the multi-page field.  Since a multi-page format greatly 
simplifies file management in fax application software, TIFF-F specifies 
multi-page documents (NewSubfileType = 2) as the standard case.

It is recommended that applications export multiple page TIFF-F files 
without manipulating fields and values.   Historically, some TIFF-F 
writers have attempted to produce individual single-page TIFF-F files 
with modified NewSubFileType and PageNumber (page one-of-one) values for 
export purposes.  However, there is no easy way to link such multiple 
single page files together into a logical multiple page document, so 
that this practice is not recommended.



4.4.4. Compression
   
In Group 3 facsimile, there are three compression methods which had been 
standardized as of 1994 and are in common use. The ITU-T T.4 
Recommendation [T.4] defines a one-dimensional compression method known 
as Modified Huffman (MH) and a two-dimensional method known as Modified 
READ (MR) (READ is short for Relative Element Address Designate). In 
1984, a somewhat more efficient compression method known as Modified 
Modified READ (MMR) was defined in the ITU-T T.6 Recommendation [T.6].  
MMR was originally defined for use with Group 4 facsimile, so that this 
compression method has been commonly called Group 4 compression.  In 
1991, the MMR method was approved for use in Group 3 facsimile and has 
since been widely utilized.  

TIFF-F supports these three compression methods. The most common 
practice is the one-dimensional Modified Huffman (MH) compression 
method.  This is specified by setting the Compression field value to 3 
and then setting bit 0 of the T4Options field to 0.  Alternatively, the 
two dimensional Modified READ (MR) method, which is much less frequently 
used in historical TIFF-F implementations, may be selected by setting 
bit 0 of the T4Options field to 1.  The value of Bit 2 in this field is 
determined by the use of fill bits.

Depending upon the application, the more efficient two-dimensional 
Modified Modified Read (MMR)compression method from T.6 may be selected 




McIntyre, Zilles, et al.         Expires 5/17/98               [Page 28]

Internet Draft         File Format for Internet Fax    November 17, 1997


by setting the Compression field value to 4 and then setting the first 
two bits (and all unused bits) of the T6Options field to 0. More 
information to aid the implementer in making a compression selection is 
contained in Section 4.5.2.

Baseline TIFF also permits use of Compression=2 to specify Modified 
Huffman compression, but the data is presented in a form that is not 
byte aligned.  As a result, TIFF-F uses Compression=3 instead of
Compression=2 to specify Modified Huffman compression.


4.4.5.  Example Use of Page-quality Fields

Here are examples for writing the CleanFaxData, BadFaxLines, and 
ConsecutiveBadFaxLines fields:

     1.  Facsimile hardware does not provide page quality
         information: MUST NOT write page-quality fields.
     2.  Facsimile hardware provides page quality information, but
         reports no bad lines.  Write only BadFaxLines = 0.
     3.  Facsimile hardware provides page quality information, and
         reports bad lines.  Write both BadFaxLines and
         ConsecutiveBadFaxLines.  Also write CleanFaxData = 1 or 2 if
         the hardware's regeneration capability is known.
     4.  Source image data stream is error-corrected or otherwise
         guaranteed to be error-free such as for a computer generated
         file:  SHOULD NOT write page-quality fields.

TIFF Writers SHOULD only generate these fields when the image has been 
generated from a fax image data stream where error correction, e.g. 
Group 3 Error Correction Mode, was not used.


4.4.6. Practical Guidelines for Writing and Reading Multi-Page TIFF-F Files

Traditionally, historical TIFF-F has required readers and writers
to be able to handle multi-page TIFF-F files.  Based on the
experience of various TIFF-F implementors, it has been seen that
the implementation of TIFF-F can be greatly simplified if certain
practical guidelines are followed when writing multi-page TIFF-F
files. These guidelines or simplifying assumptions are a subset of
the ordering principles in Section 2.1.3. 

The structure for a multi-page TIFF-F file will include one IFD per
page of the document; this corresponds to the first principle in 
Section 2.1.3.  In this case, this IFD will define the attributes for
a single page. A second simplifying assumption is that the writer 
of TIFF-F files SHOULD present IFDs in the same order as the actual
sequence of pages.  (The pages are numbered within TIFF-F beginning
with page 0 as the first page and then ascending (i.e. 0, 1, 2,
...).  However, as noted in 2.1.3, any field values over 4 bytes

McIntyre, Zilles, et al.         Expires 5/17/98               [Page 29]

Internet Draft         File Format for Internet Fax    November 17, 1997

will be stored separately from the IFD. TIFF-F readers SHOULD
expect IFDs to be presented in page order, but be able to handle
exceptions.

Per [TIFF], the exact placement of image data is not specified.
However, the strip offsets for each strip of image are defined from
within each IFD.   Where possible, another simplifying assumption
for the writing of TIFF-F files is to specify that the image data
for each page of a multi-page document SHOULD be contained within a
single strip (i.e. one image strip per fax page).   The use of a
single image strip per page is very useful for applications such as
store and forward messaging, where the file is usually prepared in
advance of the transmission, but other assumptions may apply for
the size of the image strip for applications which require the use
of "streaming" techniques (see section 4.4.7).  In the event a
different image strip size assumption has been used (e.g. constant
size for image strips that may be less than the page size), this
will immediately be evident from the values/offsets of the fields
that are related to strips.

A third simplifying assumption is that each IFD SHOULD be placed in
the TIFF-F file structure at a point which precedes the image which
the IFD describes.

In addition, a fourth simplifying assumption for TIFF-F writers and
readers is to place the actual image data in a physical order
within the TIFF file structure which is consistent with the logical
page order.  In practice, TIFF-F readers will need to use the strip
offsets to find the exact physical location of the image data,
whether or not it is presented in logical page order.

TIFF-F writers MAY make a fifth simplifying assumption, in which the
IFD, the value data and the image data to which the IFD has offsets 
precede the next image IFD. These elements SHALL precede the next image 
IFD in the minimal mode (Section 3) and SHOULD precede it in the other 
modes (Sections 5-8). However, this principle has been relaxed in the 
case of TIFF-F to reflect past practices. 

So, a TIFF-F file which is structured using the guidelines of this
section will essentially be composed of a linked list of IFDs,
presented in ascending page order, which in turn each point to a
single page of image data (one strip per page), where the pages of
image data are also placed in a logical page order within the TIFF-
F file structure.  (The pages of image data may themselves be
stored in a contiguous manner, at the option of the implementor).


4.4.7.   Use of TIFF-F for Streaming Applications

TIFF-F has historically been used for handling fax image files in
applications such as store and forward messaging where the entire
size of the file is known in advance.  While TIFF-F may also


McIntyre, Zilles, et al.         Expires 5/17/98               [Page 30]

Internet Draft         File Format for Internet Fax    November 17, 1997


possibly be used as a file format for cases such as streaming
applications, assumptions may be required that differ from those
provided in this section (e.g., the entire size and number of pages
within the image are not known in advance).  As a result, a
definition for the streaming application of TIFF-F is beyond the
scope of this document.


4.5. Implementation Warnings

4.5.1  Uncompressed data

TIFF-F requires the ability to read and write at least one-dimensional 
T.4 Huffman ("compressed") data.  Uncompressed data is not allowed.  
This means that the "Uncompressed" bit in T4Options or T6Options must be 
set to 0.


4.5.2. Encoding and Resolution

Since two-dimensional encoding is not required for Group 3 
compatibility, some historic TIFF-F readers have not been able to read 
such files.  The minimum subset of TIFF-F REQUIRES support for one 
dimensional (Modified Huffman) files, so this choice maximizes 
portability.  However, implementers seeking greater efficiency SHOULD 
use T.6 MMR compression when writing TIFF-F files.  Some TIFF-F readers 
will also support two-dimensional Modified READ files.  Implementers 
that wish to have the maximum flexibility in reading TIFF-F files SHOULD 
support all three of these compression methods (MH, MR and MMR).

For the case of resolution, almost all facsimile products support both 
standard (98 dpi) vertical resolution  and "fine" (196 dpi) resolution.  
Therefore, fine-resolution files are quite portable in the real world.

In 1993, the ITU-T added support for higher resolutions in the T.30 
recommendation including 200 x 200, 300 x 300, 400 x 400 in dots per 
inch based units.  At the same time, support was added for metric 
dimensions which are equivalent to the following inch based resolutions: 
391v x 204h and 391v x 408h.  Therefore, the full set of inch-based 
equivalents of the new resolutions are supported in the TIFF-F writer, 
since they may appear in some image data streams received from Group 3 
facsimile devices.  However, many facsimile terminals and older versions 
of  TIFF-F readers are likely to not support the use of these higher 
resolutions.  

Per [T.4], it is permissible for applications to treat the following 
XResolution values as being equivalent: <204,200> and <400,408>.  In a 
similar respect, the following YResolution values may also be treated as 
being equivalent: <98, 100>, <196, 200>, and <391, 400>.   These 
equivalencies were allowed by [T.4] to permit conversions between inch 
and metric based facsimile terminals.  


McIntyre, Zilles, et al.         Expires 5/17/98               [Page 31]

Internet Draft         File Format for Internet Fax    November 17, 1997


In a similar respect, the optional support of metric based resolutions 
in the TIFF-F reader (i.e. 77 x 38.5 cm) is included for completeness, 
since they are used in some legacy TIFF-F applications, but this use is 
not recommended for the creation of TIFF-F files by a writer.


4.5.3. EOL byte-aligned

The historical convention for TIFF-F has been that all EOLs in Modified 
Huffman or Modified READ data must be byte-aligned. However, Baseline 
TIFF has permitted use of non-byte-aligned EOLs by default, so that a 
large percentage of TIFF-F reader implementations support both 
conventions.   Therefore, the minimum subset of TIFF-F as defined in 
this document includes support for both byte-aligned and non-byte-
aligned EOLs; see Section 3.2.2.  

An EOL is said to be byte-aligned when Fill bits have been added as 
necessary before EOL codes such that EOL always ends on a byte boundary, 
thus ensuring an  EOL-sequence of a one byte preceded by a zero nibble: 
xxxx0000 00000001.  

Modified Huffman encoding encodes bits, not bytes. This means that the 
end-of-line token may end in the middle of a byte. In byte alignment, 
extra zero bits (Fill) are added so that the first bit of data following 
an EOL begins on a byte boundary. In effect, byte alignment relieves 
application software of the burden of bit- shifting every byte while 
parsing scan lines for line-oriented image manipulation (such as writing 
a TIFF file).  

For Modified READ encoding, each line is terminated by an EOL and a one 
bit tag bit.  Per [T.4], the value of the tag bit is 0 if the next line 
contains two dimensional data and 1 if the next line is a reference 
line.   To maintain byte alignment, fill bits are added before the 
EOL/tag bit sequence, so that the first bit of data following an MR tag 
bit begins on a byte boundary.


4.5.4. EOL

As illustrated in FIGURE 1/T.4 in [T.4], facsimile documents encoded 
with Modified Huffman begin with an EOL, which in TIFF-F is byte-
aligned. The last line of the image is not terminated by an EOL.  In a 
similar respect, images encoded with Modified READ two-dimensional 
encoding begin with an EOL, followed by a tag bit.


4.5.5. RTC Exclusion

Aside from EOLs, TIFF-F files have historically only contained image 
data. This means that applications which wish to maintain strict 
conformance with the rules in [TIFF] and compatibility with historical 


McIntyre, Zilles, et al.         Expires 5/17/98               [Page 32]

Internet Draft         File Format for Internet Fax    November 17, 1997


TIFF-F, SHOULD NOT include the Return To Control sequence (RTC) 
(consisting of 6 consecutive EOLs) when writing TIFF- F files.   
However, applications which need to support "transparency" of [T.4] 
image data MAY include RTCs if the flag settings of the T4Options field 
are set for non-byte aligned MH or MR image data.  Implementors of TIFF 
readers should also be aware that there are some existing TIFF-F 
implementations which include the RTC sequence in MH/MR image data.


4.5.6 Use of EOFB for T.6 Compressed Images

TIFF-F pages which are encoded with the T.6 Modified Modified READ 
compression method MUST include an "end-of-facsimile-block" (EOFB) code 
at the end of each coded strip. Per [TIFF], the EOFB code is followed by 
pad bits as needed to align on a byte boundary. TIFF readers SHOULD 
ignore any bits other than pad bits beyond the EOFB.





































McIntyre, Zilles, et al.         Expires 5/17/98               [Page 33]

Internet Draft         File Format for Internet Fax    November 17, 1997


4.6. Example Use of TIFF-F

The application F of TIFF (i.e. TIFF-F content) is a secondary component 
of the VPIM Message, as defined in [VPIM2].  Voice messaging systems can 
often handle fax store-and-forward capabilities in addition to 
traditional voice message store-and-forward functions.  As a result, 
TIFF-F fax messages can optionally be sent between compliant VPIM 
systems, and may be rejected if the recipient system cannot deal with 
fax.  

Refer to the VPIM Specification for proper usage of this content.


4.7. Extended Black-and-white Fax Mode Summary

Recommended fields are shown with an asterisk *.

Required fields or values are shown with a double asterisk **. If the 
double asterisk is on the field name, then all the listed values are 
required of implementations; if the double asterisks are in the Values 
column, then only the values suffixed with a double asterisk are 
required of implementations.

    +---------------------------+--------------------------------+
    | Baseline Fields           |  Values                        |
    +---------------------------+--------------------------------+
    | BitsPerSample             | 1**                            |
    +---------------------------+--------------------------------+
    | Compression               | 3**: 1D Modified Huffman and   |
    |                           |      2D Modified Read coding   |
    |                           | 4: 2D Modified Modified Read   |
    |                           |    coding                      |
    +---------------------------+--------------------------------+
    | DateTime*                 | {ASCII}: date/time in 24-hour  |
    |                           | format "YYYY:MM:DD HH:MM:SS"   |
    +---------------------------+--------------------------------+
    | FillOrder**               | 1: most significant bit first  |
    |                           | 2: least significant bit first |
    +---------------------------+--------------------------------+
    | ImageDescription*         | {ASCII}: A string describing   |
    |                           | the contents of the image.     |
    +---------------------------+--------------------------------+
    | ImageWidth                | 1728**, 2048, 2432, 2592,      |
    |                           | 3072, 3456, 3648, 4096, 4864   |
    +---------------------------+--------------------------------+
    | ImageLength**             | n: total number of scanlines   |
    |                           | in image                       |
    +---------------------------+--------------------------------+





McIntyre, Zilles, et al.         Expires 5/17/98               [Page 34]

Internet Draft         File Format for Internet Fax    November 17, 1997


    +---------------------------+--------------------------------+
    | NewSubFileType**          | 2: Bit 1 identifies single     |
    |                           | page of a multi-page document  |
    +---------------------------+--------------------------------+
    | Orientation               | 1**-8, Default 1               |
    +---------------------------+--------------------------------+
    | PhotometricInterpretation | 0: pixel value 1 means black   |
    |  **                       | 1: pixel value 1 means white   |
    +---------------------------+--------------------------------+
    | ResolutionUnit**          | 2: inch                        |
    |                           | 3: centimeter                  |
    +---------------------------+--------------------------------+
    | RowsPerStrip**            | n: number of scanlines per     |
    |                           | TIFF strip                     |
    +---------------------------+--------------------------------+
    | SamplesPerPixel**         | 1                              |
    +---------------------------+--------------------------------+
    | Software*                 | {ASCII}: name & release        |
    |                           | number of creator software     |
    +---------------------------+--------------------------------+
    | StripByteCounts**         | <n>: number or bytes in TIFF   |
    |                           | strip                          |
    +---------------------------+--------------------------------+
    | StripOffsets**            | <n>: offset from beginning of  |
    |                           | file to each TIFF strip        |
    +---------------------------+--------------------------------+
    | XResolution               | 200, 204**, 300, 400, 408      |
    |                           | (written in pixels/inch)       |
    +---------------------------+--------------------------------+
    | YResolution               | 98**, 196**, 100,              |
    |                           | 200, 300, 391, 400             |
    |                           | (written in pixels/inch)       |
    +---------------------------+--------------------------------+
    | Extension Fields                                           |
    +---------------------------+--------------------------------+
    | T4Options                 | 0**: required if Compression   |
    |                           | is Modified Huffman, EOLs are  |
    |                           | not byte aligned               |
    |                           | 1: required if Compression is  |
    |                           | 2D Modified Read, EOLs are     |
    |                           | byte aligned                   |
    |                           | 4**: required if Compression   |
    |                           | is Modified Huffman, EOLs are  |
    |                           | not byte aligned               |
    |                           | 5: required if Compression     |
    |                           | is 2D Modified Read, EOLs are  |
    |                           | byte aligned                   |
    +---------------------------+--------------------------------+





McIntyre, Zilles, et al.         Expires 5/17/98               [Page 35]

Internet Draft         File Format for Internet Fax    November 17, 1997


    +---------------------------+--------------------------------+
    | T6Options                 | 0: required if Compression is  |
    |                           | 2D Modified Modified Read      |
    +---------------------------+--------------------------------+
    | DocumentName*             | {ASCII}: name of scanned       |
    |                           | document                       |
    +---------------------------+--------------------------------+
    | PageNumber**              | n,m: page number followed by   |
    |                           | total page count               |
    +---------------------------+--------------------------------+
    | New Fields                                                 |
    +---------------------------+--------------------------------+
    | BadFaxLines*              | number of "bad" scanlines      |
    |                           | encountered during reception   |
    +---------------------------+--------------------------------+
    | CleanFaxData*             | 0: no "bad" lines              |
    |                           | 1: "bad" lines exist, but were |
    |                           | regenerated by receiver        |
    |                           | 2: "bad" lines exist, but have |
    |                           | not been regenerated           |
    +---------------------------+--------------------------------+
    | ConsecutiveBadFaxLines*   | Max number of consecutive      |
    |                           | "bad" lines received           |
    +---------------------------+--------------------------------+


5. Lossless JBIG Black-and-White Fax Mode

This section defines Application J of MIME Media Type image/tiff, which 
is the lossless JBIG black-and-white mode. 

The previous section described the extended interchange set of TIFF 
fields for black-and-white fax, which provided support for the MH, MR 
and MMR compression of black-and-white images. This section adds a mode 
with JBIG compression capability.

5.1. Overview 

This section describes a black-and-white mode that uses JBIG 
compression. The ITU-T has approved the single-progression sequential 
mode of JBIG [T.82] for Group 3 facsimile. JBIG coding offers improved 
compression for halftoned originals. JBIG compression is used in 
accordance with the application rules given in ITU-T Rec. T.85 [T.85]. 

This mode is essentially the extended black-and-white mode with JBIG 
compression used instead of MH, MR or MMR. 







McIntyre, Zilles, et al.         Expires 5/17/98               [Page 36]

Internet Draft         File Format for Internet Fax    November 17, 1997


5.2. Required TIFF Fields

This section lists the required fields and the values they must have to 
be ITU-compatible. Besides the fields listed in Section 2.2.1, the 
extended black-and-white fax mode requires the following fields. 

5.2.1. Baseline fields

The TIFF fields that SHALL be used in this mode are the same as those 
described in Section 4.2.1 for the extended black-and-white mode, with 
one exception: the following text is used for the Compression field in 
place of the Compression field text given in Section. 4.2.1.

Compression(259) = 9.                                              SHORT
    RequiredByTIFFBaseline
    9 = ITU-T Rec. T.82 coding, applying ITU-T Rec. T.85 (JBIG). This is 
    a TIFF extension value.
    Default = 1 (and is not applicable; field must be specified).

5.2.2. Extension fields

None beyond those listed in Section 2.2.1.

5.2.3. New fields

None.


5.3. Recommended TIFF Fields

See Section 2.2.3 and 2.2.4. 


5.4.  Lossless JBIG Black-and-white Fax Mode Summary

Recommended fields are shown with an asterisk *.

Required fields or values are shown with a double asterisk **. If the 
double asterisk is on the field name, then all the listed values are 
required of implementations; if the double asterisks are in the Values 
column, then only the values suffixed with a double asterisk are 
required of implementations.

    +---------------------------+--------------------------------+
    | Baseline Fields           |  Values                        |
    +---------------------------+--------------------------------+
    | BitsPerSample             | 1**                            |
    +---------------------------+--------------------------------+
    | Compression               | 9**: JBIG coding               |
    +---------------------------+--------------------------------+



McIntyre, Zilles, et al.         Expires 5/17/98               [Page 37]

Internet Draft         File Format for Internet Fax    November 17, 1997


    +---------------------------+--------------------------------+
    | DateTime*                 | {ASCII}: date/time in 24-hour  |
    |                           | format "YYYY:MM:DD HH:MM:SS"   |
    +---------------------------+--------------------------------+
    | FillOrder**               | 1: most significant bit first  |
    |                           | 2: least significant bit first |
    +---------------------------+--------------------------------+
    | ImageDescription*         | {ASCII}: A string describing   |
    |                           | the contents of the image.     |
    +---------------------------+--------------------------------+
    | ImageWidth**              | 1728, 2048, 2432, 2592,        |
    |                           | 3072, 3456, 3648, 4096, 4864   |
    +---------------------------+--------------------------------+
    | ImageLength**             | n: total number of scanlines   |
    |                           | in image                       |
    +---------------------------+--------------------------------+
    | NewSubFileType**          | 2: Bit 1 identifies single     |
    |                           | page of a multi-page document  |
    +---------------------------+--------------------------------+
    | Orientation               | 1**-8, Default 1               |
    +---------------------------+--------------------------------+
    | PhotometricInterpretation | 0: pixel value 1 means black   |
    |  **                       | 1: pixel value 1 means white   |
    +---------------------------+--------------------------------+
    | ResolutionUnit**          | 2: inch                        |
    |                           | 3: centimeter                  |
    +---------------------------+--------------------------------+
    | RowsPerStrip**            | n: number of scanlines per     |
    |                           | TIFF strip                     |
    +---------------------------+--------------------------------+
    | SamplesPerPixel**         | 1                              |
    +---------------------------+--------------------------------+
    | Software*                 | {ASCII}: name & release        |
    |                           | number of creator software     |
    +---------------------------+--------------------------------+
    | StripByteCounts**         | <n>: number or bytes in TIFF   |
    |                           | strip                          |
    +---------------------------+--------------------------------+
    | StripOffsets**            | <n>: offset from beginning of  |
    |                           | file to each TIFF strip        |
    +---------------------------+--------------------------------+
    | XResolution               | 200, 204**, 300, 400, 408      |
    |                           | (written in pixels/inch)       |
    +---------------------------+--------------------------------+
    | YResolution               | 98**, 196**, 100,              |
    |                           | 200, 300, 391, 400             |
    |                           | (written in pixels/inch)       |
    +---------------------------+--------------------------------+





McIntyre, Zilles, et al.         Expires 5/17/98               [Page 38]

Internet Draft         File Format for Internet Fax    November 17, 1997


    +---------------------------+--------------------------------+
    | Extension Fields                                           |
    +---------------------------+--------------------------------+
    | DocumentName*             | {ASCII}: name of scanned       |
    |                           | document                       |
    +---------------------------+--------------------------------+
    | PageNumber**              | n,m: page number followed by   |
    |                           | total page count               |
    +---------------------------+--------------------------------+
    | New Fields                                                 |
    +---------------------------+--------------------------------+
    | GlobalParametersIFD*      | <IFD>: global parameters IFD   |
    +---------------------------+--------------------------------+
    | ProfileType*              | n: type of data stored in      |
    |                           | TIFF file                      |
    +---------------------------+--------------------------------+
    | ITUFaxMode*               | n: ITU-compatible fax mode     |
    +---------------------------+--------------------------------+
    | CodingMethods*            | n: compression algorithms used |
    |                           | in file                        |
    +---------------------------+--------------------------------+


6. Base Color Fax Mode

6.1. Overview

This section defines Application C of MIME media type image/tiff.

This is the base mode for color and grayscale facsimile, which means 
that all applications that support color fax must support this mode. The 
basic approach is the lossy JPEG compression [T.81] of L*a*b* color data 
[T.42]. Grayscale applications use the L* lightness component; color 
applications use the L*, a* and b* components.

This mode uses a new PhotometricInterpretation field value to describe 
the L*a*b* encoding specified in [T.42]. This encoding differs in two 
ways from the other L*a*b* encodings used in TIFF [TIFF, TTN1]: it 
specifies a different default range for the a* and b* components, based 
on a comprehensive evaluation of existing hardcopy output, and it 
optionally allows selectable range for the L*, a* and b* components.

6.2. Required TIFF Fields

This section lists the required fields, in addition to those given in 
Section 2.2.1, and the values they must support to be compatible with 
ITU-T Rec. T.42 and Annex E in ITU-T Rec. T.4.






McIntyre, Zilles, et al.         Expires 5/17/98               [Page 39]

Internet Draft         File Format for Internet Fax    November 17, 1997


6.2.1. Baseline Fields

ImageWidth(256).                                           SHORT or LONG
    This mode supports the following fixed page widths: 864, 1024, 1216, 
    1728, 2048, 2432, 2592, 3072, 3456, 3648, 4096, 4864.

BitsPerSample(258) = 8, 12.                                        SHORT
    Count = SamplesPerPixel
    The base color fax mode requires 8 bits per sample, with 12 as an 
    option. 12 bits per sample is not baseline TIFF.

Compression(259) = 7.                                              SHORT
    Base color fax mode uses Baseline JPEG compression. Value 7
    represents JPEG compression as specified in [TTN2].

PhotometricInterpretation(262) = 10.                               SHORT
    Base color fax mode requires pixel values to be stored using the CIE
    L*a*b* encoding defined in ITU-T Rec. T.42. This encoding is 
    indicated by the PhotometricInterpretation value 10, referred to as 
    ITULAB. With this encoding, the minimum sample value is 
    mapped to 0 and the maximum sample value is mapped to (2^n - 1), 
    i.e. the maximum value, where n is the BitsPerSample value.
    The conversion from unsigned ITULAB-encoded samples values to signed 
    CIE L*a*b* values is determined by the Decode field; see Sec. 6.2.2

    Note: PhotometricInterpretation values 8 and 9 specify encodings for 
    CIE L*a*b* [TIFF] and ICC L*a*b* [TTN1], but they are fixed
    encodings, which use different minimum and maximum samples than the
    T.42 default encoding. As currently defined, they are not able to 
    represent fax-encoded L*a*b* data.

SamplesPerPixel(277) = 1, 3.                                       SHORT
    1: L* component only
    3: L*, a*, b* components
    Encoded according to PhotometricInterpretation field

XResolution(282) = 100, 200, 300, 400.                          RATIONAL
YResolution(283) = 100, 200, 300, 400.                          RATIONAL
    The resolution of the image is expressed in pixels per resolution 
    unit. In pixels per inch, allowed XResolution values are: 100, 200, 
    300, and 400. The base color fax mode requires the pixels to be 
    square, hence YResolution must equal XResolution. Base resolution is 
    200 pixels per inch and SHALL be supported by all implementations of 
    this mode. 

NOTE: Not all combinations of XResolution, YResolution and ImageWidth 
are legal. The following table gives the legal combinations for inch-
based resolutions and the corresponding paper sizes [T.30].





McIntyre, Zilles, et al.         Expires 5/17/98               [Page 40]

Internet Draft         File Format for Internet Fax    November 17, 1997


    +--------------------------------+---------------------------+
    |   XResolution x YResolution    |         ImageWidth        |
    +--------------------------------+---------------------------+
    |           100 x 100            |   864   |  1024  |  1216  |
    +--------------------------------+---------------------------+
    |           200 x 200            |  1728   |  2048  |  2432  |
    +--------------------------------+---------------------------+
    |           300 x 300            |  2592   |  3072  |  3648  |
    +--------------------------------+---------------------------+
    |           400 x 400            |  3456   |  4096  |  4864  |
    +--------------------------------+---------------------------+
                                     |Letter,A4|   B4   |   A3   |
                                     |  Legal  |        |        |
                                     +---------------------------+
                                     |         Paper Size        |
                                     +---------------------------+


6.2.2 Extension Fields

The JPEG compression standard allows for the a*b* chroma components of 
an image to be subsampled relative to the L* lightness component. The 
extension fields ChromaSubSampling and ChromaPositioning define the 
subsampling. They are the same as YCbCrSubSampling and YCbCrPositioning 
in [TIFF], but have been renamed to reflect their applicability to other 
color spaces.

ChromaSubSampling(530).                                            SHORT
    Count = 2
    Specifies the subsampling factors for the chroma components of a 
    L*a*b* image. The two subfields of this field, ChromaSubsampleHoriz 
    and ChromaSubsampleVert, specify the horizontal and vertical 
    subsampling factors respectively.

    SHORT 0: ChromaSubsampleHoriz = 1, 2, 4.
    1: equal numbers of lightness and chroma samples horizontally,
    2: twice as many lightness samples as chroma samples horizontally,
    4: four times as many lightness samples as chroma samples 
       horizontally.

    SHORT 1: ChromaSubsampleVert = 1, 2, 4.
    1: equal numbers of lightness and chroma samples vertically,
    2: twice as many lightness samples as chroma samples vertically,
    4: four times as many lightness samples as chroma samples 
       vertically.

    The default value for ChromaSubSampling is (2,2), which is the 
    default for chroma subsampling in color fax [T.42]. No chroma 
    subsampling, i.e. ChromaSubSampling = (1,1), is a T.42 option. 




McIntyre, Zilles, et al.         Expires 5/17/98               [Page 41]

Internet Draft         File Format for Internet Fax    November 17, 1997


ChromaPositioning(531) = 1, 2.                                     SHORT
    Specifies the spatial positioning of chroma components relative to 
    the lightness component. See the current TIFF specification under 
    YCbCrPositioning for further information.
    1: centered,
    2: cosited.
    Default = 1, which is what ITU-T T.4, Annex E specifies.

Decode(TagToBeAssigned).                                           SHORT
    Count = 2 * SamplesPerPixel
    Describes how to map image sample values into the range of values 
    appropriate for the current color space. In general, the values are 
    taken in pairs and specify the minimum and maximum output value for 
    each color component. For the base color fax mode, Decode maps the 
    ITULAB encoding to L*a*b* and has a count of 6 values. In this case,
    the input is an unsigned ITULAB-encoded value (Lsample, asample, 
    (bsample) and the output is a signed L*a*b* value.

        L* = Decode[0] + Lsample x (Decode[1]-Decode[0])/(2^n -1)
        a* = Decode[2] + asample x (Decode[3]-Decode[2])/(2^n -1)
        b* = Decode[4] + bsample x (Decode[5]-Decode[4])/(2^n -1)

    where Decode[0] is the minimum value for L*, Decode[1] is the 
    maximum value, etc. and n is the BitsPerSample field value, either 8 
    or 12. ITU-T Rec. T.42 specifies the ITULAB encoding in terms of a 
    range and offset for each component, which are related to the Decode 
    field values as follows:

    Decode[0] = - (Lrange x Loffset) / 2^n
    Decode[1] = Decode[0] + Lrange

NOTE: The following table gives the default range and offsets, as 
specified in ITU-T Rec. T.42, and the corresponding minimum and maximum 
L*a*b* component and ITULAB encoded values.

    +-----------------------------------------------------------+
    | Component |    Rec. T.42     |   L*a*b*   |    ITULAB     |
    |           |    defaults      |   values   |   encoding    |
    +-----------+------------------+------------+---------------+
    |           |  Range | Offset  |  Min | Max | Min |   Max   |
    +-----------+--------+---------+------+-----+-----+---------+
    |   L*      |   100  |    0    |    0 | 100 |  0  | 2^n - 1 |
    +-----------+--------+---------+------+-----+-----+---------+
    |   a*      |   170  |  128    |  -85 |  85 |  0  | 2^n - 1 |
    +-----------+--------+---------+------+-----+-----+---------+
    |   b*      |   200  |   96    |  -75 | 125 |  0  | 2^n - 1 |
    +-----------+--------+---------+------+-----+-----+---------+

The default value for Decode is (0, 100, -85, 85, -75, 125), which is 
based on the ITULAB encoding, with PhotometricInterpretation 10, 
SamplesPerPixel 3, and BitsPerSample 8.


McIntyre, Zilles, et al.         Expires 5/17/98               [Page 42]

Internet Draft         File Format for Internet Fax    November 17, 1997


6.2.3. New Fields

None.

6.3. Recommended TIFF Fields

See Sections 2.2.3. and 2.2.4.


6.4 Base Color Fax Mode Summary

Recommended fields are shown with an asterisk *

Required fields or values are shown with a double asterisk **. If the 
double asterisk is on the field name, then all the listed values are 
required of implementations; if the double asterisks are in the Values 
column, then only the values suffixed with a double asterisk are 
required of implementations.

    +---------------------------+--------------------------------+
    | Baseline Fields           | Values                         |
    +---------------------------+--------------------------------+
    | BitsPerSample             | 8**: 8 bits per color sample   |
    |                           | 12: optional 12 bits/sample    |
    +---------------------------+--------------------------------+
    | Compression**             | 7: JPEG                        |
    +---------------------------+--------------------------------+
    | DateTime*                 | {ASCII}: date/time in 24-hour  |
    |                           | format "YYYY:MM:DD HH:MM:SS"   |
    +---------------------------+--------------------------------+
    | ImageDescription*         | {ASCII}: A string describing   |
    |                           | the contents of the image.     |
    +---------------------------+--------------------------------+
    | ImageWidth                | 864, 1024, 1216, 1728**, 2048**|
    |                           | 2432**, 2592, 3072, 3456, 3648 |
    |                           | 4096, 4864                     |
    +---------------------------+--------------------------------+
    | ImageLength**             | n: total number of scanlines   |
    |                           | in image                       |
    +---------------------------+--------------------------------+
    | NewSubFileType**          | 2: Bit 1 identifies single page|
    |                           | of a multi-page document       |
    +---------------------------+--------------------------------+
    | Orientation               | 1**-8, Default 1               |
    +---------------------------+--------------------------------+
    | PhotometricInterpretation | 10**: ITULAB                   |
    +---------------------------+--------------------------------+
    | ResolutionUnit**          | 2: inch                        |
    |                           | 3: centimeter                  |
    +---------------------------+--------------------------------+



McIntyre, Zilles, et al.         Expires 5/17/98               [Page 43]

Internet Draft         File Format for Internet Fax    November 17, 1997


    +---------------------------+--------------------------------+
    | RowsPerStrip**            | n: number of scanlines per     |
    |                           | TIFF strip                     |
    +---------------------------+--------------------------------+
    | SamplesPerPixel**         | 1: L* (lightness)              |
    |                           | 3: LAB                         |
    +---------------------------+--------------------------------+
    | Software*                 | {ASCII}: name & release number |
    |                           | of creator software            |
    +---------------------------+--------------------------------+
    | StripByteCounts**         | <n>: number or bytes in        |
    |                           | TIFF strip                     |
    +---------------------------+--------------------------------+
    | StripOffsets**            | <n>: offset from beginning     |
    |                           | of file to each TIFF strip     |
    +---------------------------+--------------------------------+
    | XResolution               | 100, 200**, 300, 400 (written  |
    |                           | in pixels/inch)                |
    +---------------------------+--------------------------------+
    | YResolution               | 100, 200**, 300, 400           |
    |                           | (must equal XResolution)       |
    +---------------------------+--------------------------------+
    | Extension Fields                                           |
    +---------------------------+--------------------------------+
    | DocumentName*             | {ASCII}: name of scanned       |
    |                           | document                       |
    +---------------------------+--------------------------------+
    | PageNumber**              | n,m: page number followed by   |
    |                           | total page count               |
    +---------------------------+--------------------------------+
    | Decode**                  | minL, maxL, mina, maxa, minb,  |
    |                           | maxb: minimum and maximum      |
    |                           | values for L*a*b*              |
    +---------------------------+--------------------------------+
    | ChromaSubSampling         | ChromaSubsampleHoriz:          |
    |                           | 1: equal numbers of lightness  |
    |                           | and chroma samples             |
    |                           | 2**: twice as many lightness   |
    |                           | samples as chroma samples      |
    |                           | 4: four times as many          |
    |                           | lightness samples as chroma    |
    |                           | samples                        |
    |                           | ChromaSubsampleVert:           |
    |                           | 1: equal numbers of lightness  |
    |                           | and chroma samples             |
    |                           | 2**: twice as many lightness   |
    |                           | samples as chroma samples      |
    |                           | 4: four times as many lightness|
    |                           | samples as chroma samples      |
    +---------------------------+--------------------------------+



McIntyre, Zilles, et al.         Expires 5/17/98               [Page 44]

Internet Draft         File Format for Internet Fax    November 17, 1997


    +---------------------------+--------------------------------+
    | ChromaPositioning         | 1**: centered                  |
    |                           | 2: cosited                     |
    +---------------------------+--------------------------------+
    | New Fields                                                 |
    +---------------------------+--------------------------------+
    | GlobalParametersIFD*      | <IFD>: IFD containing          |
    |                           | global parameters              |
    +---------------------------+--------------------------------+
    | ProfileType*              | n: type of data stored in      |
    |                           | TIFF file                      |
    +---------------------------+--------------------------------+
    | ITUFaxMode*               | n: ITU-compatible fax mode     |
    +---------------------------+--------------------------------+
    | CodingMethods*            | n: compression algorithms      |
    |                           | used in file                   |
    +---------------------------+--------------------------------+
    | VersionYear*              | byte sequence: year of ITU std |
    +---------------------------+--------------------------------+


7. Lossless Color Mode

This section defines Application P of MIME media type image/tiff.


7.1. Overview

This mode, defined in [T.43], uses JBIG to losslessly code three types 
of color and grayscale images: one bit per color CMY, CMYK and RGB 
images; a palettized (i.e. mapped) color image; and continuous tone 
color and grayscale images. The last two are multi-level and use the 
L*a*b* encoding specified in [T.42].

7.1.1. Color Encoding

While under development, this mode was called T.Palette, as one of its 
major additions was palette or mapped color images. Baseline TIFF only 
allows RGB color maps, but ITU-T Rec. T.43 requires L*a*b* color maps, 
using the encoding specified in ITU-T Rec. T.42. Palette color images 
are expressed with indices (bits per sample) of 12 bits or less, or 
optionally 13 to 16 bits, per {T.43].

Enabling T.43 color maps in TIFF requires the extension field Indexed, 
defined in [TTN1], and the PhotometricInterpretation field value 10, 
defined in Section 6.2.1. The following table shows the corresponding 
PhotometricInterpretation, SamplesPerPixel, BitsPerSample and Indexed 
field values for the different T.43 image types. 





McIntyre, Zilles, et al.         Expires 5/17/98               [Page 45]

Internet Draft         File Format for Internet Fax    November 17, 1997


    +----------------------------------------------------------+
    | Image Type |PhotometricIn| Samples  | Bits Per | Indexed |
    |            |-terpretation| PerPixel |  Sample  |         |
    |------------+-------------+----------+----------+---------|
    |     RGB    |    2=RGB    |     3    |    1     |    0    |
    +----------------------------------------------------------+
    |     CMY    |    5=CMYK   |     3    |    1     |    0    |
    +------------+-------------+----------+----------+---------+
    |     CMYK   |    5=CMYK   |     4    |    1     |    0    |
    +------------+-------------+----------+----------+---------+
    |   Palette  |  10=ITULAB  |     1    |    n     |    1    |
    +------------+-------------+----------+----------+---------+
    |  Grayscale |  10=ITULAB  |     1    |   8, 12  |    0    |
    +------------+-------------+----------+----------+---------+
    |    Color   |  10=ITULAB  |     3    |   8, 12  |    0    |
    +------------+-------------+----------+----------+---------+


7.1.2. JBIG Encoding

T.43 uses the single-progression sequential mode of JBIG, defined in 
ITU-T Rec. T.82, in accordance with the application rules described in 
ITU-T Rec. T.85. To code multi-level images using JBIG, which is a 
bi-level compression method, an image is resolved into a set of 
bit-planes using Gray code conversion, and each bit-plane is then JBIG 
compressed. The Gray code conversion is part of the data stream 
encoding, and is therefore invisible to TIFF.

7.2. Required TIFF Fields

This section lists the required fields, in addition to those in Section 
2.2.1, and the values they must have to be compatible with ITU-T Rec. 
T.43.

7.2.1. Baseline Fields

ImageWidth(256).                                           SHORT or LONG
    Same page widths as the base color mode; see Section 6.2.1.

BitsPerSample(258) = 1, 8, 9-16.                                   SHORT
    Count = SamplesPerPixel
    RGB, CMY, CMYK: 1 bit per sample
    Continuous tone (L*a*b*): 8 bits per sample, 12 bits optional
    Palette color: 12 or fewer bits per sample, 13-16 bits optional
    Note: More than 8 bits per sample is not baseline TIFF.








McIntyre, Zilles, et al.         Expires 5/17/98               [Page 46]

Internet Draft         File Format for Internet Fax    November 17, 1997


ColorMap(320).                                                     SHORT
    Count = 3 * (2**BitsPerSample)
    Lossless color fax mode supports palette-color (indexed) images 
    where the single component value is used as an index into a full 
    color lookup table stored in the ColorMap field. With lossless color 
    fax mode, only the ITULAB encoding with 8 bits per sample is 
    supported for palette-color images. To utilize a color map, the TIFF 
    Indexed field must be present. TIFF orders the color map values so 
    that all the L* values come first, followed by all the a* values and 
    then all the b* values. Because ITU-T Rec. T.43 specifies a "chunky" 
    ordering with the L*a*b*components of the first value, followed by 
    those of the second value, and so on, transferring color map values 
    between a TIFF file and fax data stream requires reordering values.

Compression(259) = 9.                                              SHORT
    9: ITU-T Rec. T.82 coding, applying ITU-T Rec. T.85 (JBIG)

FillOrder(266) = 1, 2.                                             SHORT
    This field is only relevant for 1 bit per sample color (RGB, CMY, 
    CMYK); see Section 4.2.1 for further information.

PhotometricInterpretation(262) = 2, 5, 10.                         SHORT
    2: RGB
    5: CMYK, including CMY

    10: ITULAB
    Image data may also be stored as palette color images, where pixel 
    values are represented by a single component that is an index into a 
    color map using the ITULAB encoding. This color map is specified by 
    the ColorMap field. To use palette color images, set the 
    PhotometricInterpretation to 10,SamplesPerPixel to 1, and Indexed to 
    1. The color map is stored in the ColorMap field. See Section 7.1.1 
    for further discussion on the color encoding.

SamplesPerPixel(277) = 1, 3, 4.                                    SHORT
    1: Palette color image, or L*-only if Indexed = 0 and 
       PhotometricInterpretation is 10 (ITULAB).
    3: RGB, or L*a*b*, or CMY if PhotometricInterpretation is 5 (CMYK).
    4: CMYK.

XResolution(282) = 100, 200, 300, 400.                          RATIONAL
YResolution(283) = 100, 200, 300, 400.                          RATIONAL
    The resolution of the image is expressed in pixels per resolution 
    unit. In pixels per inch, allowed XResolution values are: 100, 200, 
    300, and 400. The lossless color fax mode requires the pixels to be 
    square, hence YResolution must equal XResolution. Base resolution is 
    200 pixels per inch. 






McIntyre, Zilles, et al.         Expires 5/17/98               [Page 47]

Internet Draft         File Format for Internet Fax    November 17, 1997


7.2.2. Extension Fields

Indexed(364) = 0, 1.                                               SHORT
    0: not a palette-color image
    1: palette-color image
    This field is used to indicate that the sample values are an index 
    into an array of color values specified in the ColorMap field. 
    Lossless color fax mode supports palette-color images with the 
    ITULAB encoding. The SamplesPerPixel value must be 1. 

Decode(TagToBeAssigned)                                            SHORT
    Decode is used in connection with the ITULAB encoding of image data; 
    see Section 6.2.2.

7.2.3. New Fields

None.

7.3. Recommended TIFF Fields

See Sections 2.2.3. and 2.2.4.

7.4. Lossless Color Fax Mode Summary

Recommended fields are shown with an asterisk *


     +--------------------|--------------------------------------+
     |   Baseline Fields  |             Values                   |
     +--------------------+--------------------------------------+
     | BitsPerSample      | 1: Binary RGB, CMY(K)                |
     |                    | 8: 8 bits per color sample           |
     |                    | 9-16: optional                       |
     +--------------------+--------------------------------------+
     | ColorMap           | n: LAB color map                     |
     +--------------------+--------------------------------------+
     | Compression        | 9: JBIG                              |
     +--------------------+--------------------------------------+
     | DateTime*          | {ASCII}:  date/time in the 24-hour   |
     |                    | format "YYYY:MM:DD HH:MM:SS"         |
     +--------------------+--------------------------------------+
     | FillOrder          | Applies only to 1 bit/sample         |
     |                    | encodings                            |
     |                    | 1: Most significant bit first        |
     |                    | 2: Least significant bit first       |
     +--------------------+--------------------------------------+
     | ImageDescription*  | {ASCII}: A string describing the     |
     |                    | contents of the image.               |
     +--------------------+--------------------------------------+




McIntyre, Zilles, et al.         Expires 5/17/98               [Page 48]

Internet Draft         File Format for Internet Fax    November 17, 1997


     +--------------------+--------------------------------------+
     | ImageWidth         | 864, 1024, 1216, 1728, 2048, 2432,   |
     |                    | 2592, 3072, 3456, 3648, 4096, 4864   |
     +--------------------+--------------------------------------+
     | ImageLength        | n: total number of scanlines in image|
     +--------------------+--------------------------------------+
     | NewSubFileType     | 2: Bit 1 identifies single page of a |
     |                    | multi-page document                  |
     +--------------------+--------------------------------------+
     | Orientation        | 1**-8, Default 1                     |
     +--------------------+--------------------------------------+
     | PhotometricInter-  | 2: RGB                               |
     | pretation          | 5: CMYK                              |
     |                    | 10: ITULAB                           |
     +--------------------+--------------------------------------+
     | ResolutionUnit     | 2: inch                              |
     |                    | 3: centimeter                        |
     +--------------------+--------------------------------------+
     | RowsPerStrip       | n: number of scanlines per TIFF strip|
     +--------------------+--------------------------------------+
     | SamplesPerPixel    | 1: L* (lightness)                    |
     |                    | 3: LAB, RGB, CMY                     |
     |                    | 4: CMYK                              |
     +--------------------+--------------------------------------+
     | Software*          | {ASCII}: name & release number of    |
     |                    | creator software                     |
     +--------------------+--------------------------------------+
     | StripByteCounts    | <n>: number or bytes in TIFF strip   |
     +--------------------+--------------------------------------+
     | StripOffsets       | <n>: offset from beginning of file to|
     |                    | each TIFF strip                      |
     +--------------------+--------------------------------------+
     | XResolution        | 100, 200, 300, 400 (written in       |
     |                    | pixels/inch)                         |
     | YResolution        | equal to XResolution (pixels must be |
     |                    | square)                              |
     +--------------------+--------------------------------------+
     | Extension Fields                                          |
     +--------------------+--------------------------------------+
     | Decode             | minL, maxL, mina, maxa, minb, maxb:  |
     |                    |minimum and maximum values for L*a*b* |
     +--------------------+--------------------------------------+
     | DocumentName*      | {ASCII}: name of scanned document    |
     +--------------------+--------------------------------------+
     | PageNumber         | n,m: page number followed by total   |
     |                    | page count                           |
     +--------------------+--------------------------------------+






McIntyre, Zilles, et al.         Expires 5/17/98               [Page 49]

Internet Draft         File Format for Internet Fax    November 17, 1997


     +--------------------+--------------------------------------+
     | Indexed            | 0: not a palette-color image         |
     |                    | 1: palette-color image               |
     +--------------------+--------------------------------------+
     | New Fields                                                |
     +--------------------+--------------------------------------|
     | GlobalParameters   | <IFD>: global parameters IFD         |
     | IFD*               |                                      |
     +--------------------+--------------------------------------+
     | ProfileType*       | n: type of data stored in TIFF file  |
     +--------------------+--------------------------------------+
     | ITUFaxMode*        | n: ITU-compatible fax mode           |
     +--------------------+--------------------------------------+
     | CodingMethods*     | n:compression algorithms used in     |
     |                    | file                                 |
     +--------------------+--------------------------------------+
     | VersionYear*       | byte sequence: year of ITU fax std   |
     +--------------------+--------------------------------------+


8. Mixed Raster Content Mode

This section defines Application M of MIME media type image/tiff.

8.1. Overview

Unlike previous fax modes, which use a single coding method and spatial 
resolution for an entire fax page, the Mixed Raster Content mode [T.44] 
enables different coding methods and resolutions within a single page. 
For example, consider a page that contains black-and-white text, which 
is best coded with MMR or JBIG, a color bar chart, best coded with JBIG, 
and a scanned color image, best coded with JPEG. Similarly, while 
spatial resolution of 400 pixels per inch may be best for the black-and-
white text, 200 pixel per inch is usually sufficient for a color image.

Rather than applying one coding method and resolution to all elements, 
MRC allows multiple coders and resolutions within a page. By itself, MRC 
does not define any new coding methods or resolutions. Instead it 
defines a 3-layer model for structuring and combining the scanned image 
data.


8.1.1. MRC 3-layer model

The 3 layers of the MRC model are Foreground and Background, which are 
both multi-level, and Mask, which is bi-level. Each layer may appear 
only once on a page and is coded independently of the other two. In our 






McIntyre, Zilles, et al.         Expires 5/17/98               [Page 50]

Internet Draft         File Format for Internet Fax    November 17, 1997


earlier example, the black-and-white text could be in the Mask layer, 
the color chart in the Foreground layer, and the color image in the 
Background layer. The distribution of content among layers is determined 
by the writer, as is the choice of compression method, color encoding 
and spatial resolution for a layer.

The final image is obtained by using the Mask layer to select pixels 
from the other two layers. When the Mask layer pixel value is 1, the 
corresponding pixel from the Foreground layer is selected; when it is 0, 
the corresponding pixel from the Background layer is selected. Details 
are given in the Introduction of [T.44].

Not all pages, and not all parts of a page, require 3 layers. If there 
is only one layer present, then that layer is the primary image and must 
be page size. If there is more than one layer, then the Mask must be one 
of the layers, in which case it is the primary image and must be page 
size.

MRC allows a page to be split into strips, with a variable number of 
scanlines in a strip. A strip can have 1, 2 or 3 layers. A single, 
stripped layer may be stored as a single, stripped image in an IFD, 
e.g., all strips associated with the Background layer may be treated as 
a single image. Alternatively, each strip associated with a layer may be 
stored as a separate image or IFD, e.g., the Background layer can be 
composed of several images that are offset vertically with respect to 
the page. In this case, there can be no overlap between images 
associated with a single layer.

Furthermore, color fax also requires the spatial resolutions of 
Background and Foreground images to be legal fax values that are also 
integer 
factors of the Mask image resolution. For example, if the Mask Layer 
resolution is 400 pixels per inch, then allowed resolutions for the 
Foreground and Background layers are 100, 200 or 400 pixels per inch; if 
the Mask is at 300 pixels per inch, then allowed values are 100 and 300. 
The Foregound and Background layer resolutions can be independently set. 


8.1.2. A TIFF Representation for the MRC 3-layer model

In the TIFF representation of the 3-layer MRC model, each page is 
represented by a single IFD, called the Primary IFD, that represents the 
Mask layer (unless the Foreground or Background is the single layer 
present), and a set of child IFDs that are referenced through the 
SubIFDs extension field [TTN1]. To distinguish MRC-specific SubIFDs from 
other SubIFDs, the NewSubFileType field will have Bit 4 ON, indicating 
an MRC-related IFD. A new ImageLayer field is also introduced that 
consists of two values which identify the layer (Foreground, Background, 
or Mask) and the order within the layer (first, second, ... image of the 
layer); see Section 8.2.3. 



McIntyre, Zilles, et al.         Expires 5/17/98               [Page 51]

Internet Draft         File Format for Internet Fax    November 17, 1997


Because MRC allows strips with variable numbers of scanlines, the 
StripRowCounts field is used in place of the RowsPerStrip field in 
this mode. The StripRowCounts field allows each layer, with a variable 
number of scanlines in each strip, to be represented by a single IFD. 
Alternatively, each strip in the Foreground and Background layers can be 
represented by a single IFD at the option of the writer. In all cases, 
the Mask layer is required to be represented by a single IFD.

The use of SubIFDs to store child IFDs is described in [TTN1]. An 
example is shown graphically below. The Primary IFD associated with page 
1 (PrimaryIFD 0) points to page 2 (PrimaryIFD 1) with the nextIFD 
offset. The Primary IFD, corresponding to the Mask layer 
(ImageLayer=[2,1]), contains a SubIFDs field that points to a list of 
child IFDs. The first child IFD represents one image of the Background 
layer, i.e., ImageLayer=[1,1]. This child IFD points to the second child 
IFD via the nextIFD offset. This child represents the second Background 
layer image, ImageLayer=[1,2]. Finally, the second child points to the 
third child, which corresponds to the single Foreground layer image, 
ImageLayer=[3,1]. The next IFD offset associated with this Foreground 
image is 0, indicating no more child IFDs exist. Each primary IFD has 
the NewSubFileType set to 18, indicating the IFD is MRC-specific (bit 4) 
and that it is a single page of a multi-page document (bit 1). Each 
child IFD has the NewSubFileType set to 16, indicating the IFD is 
MRC-specific. Note: the 'V' character should be read as a down-pointing 
arrow.

                    (nextIFD)
    PRIMARY IFD 0  ------------> PRIMARY IFD 1--> ...
        ImageLayer = [2,1]
        NewSubFileType = 18
        SubIFDs
             |
             V
          Child IFD
             ImageLayer = [1,1]
             NewSubFileType = 16
             |
             |(nextIFD)
             |
             V
          Child IFD
             ImageLayer = [1,2]
             NewSubFileType = 16
             |
             |(nextIFD)
             |
             V






McIntyre, Zilles, et al.         Expires 5/17/98               [Page 52]

Internet Draft         File Format for Internet Fax    November 17, 1997


          Child IFD
             ImageLayer = [3,1]
             NewSubFileType = 16
             |
             |(nextIFD)
             |
             V
             0

In the example above, the SubIFDs field of the Primary IFD points to the 
first IFD in a list of child IFDs. TIFF allows the SubIFDs field to 
point to an array of IFDs, each of which can be the first of a list of 
IFDs. An MRC-enabled TIFF reader must scan all available child IFDs to 
locate and identify IFDs associated with MRC layers.

In the case where the Background or Foreground layers are described with 
multiple IFDs, the XPosition and YPosition TIFF fields specify the 
offset to the upper-left corner of the IFD with respect to the Mask 
layer; see Section 8.2.2. When there is only a single layer (Mask, 
Foreground, or Background), it is stored as the Primary IFD.

8.2. Required TIFF Fields

This section describes the TIFF fields required, in addition to those in 
Section 2.2.1, to represent MRC mode fax images. Since MRC mode stores 
fax data as a collection of images corresponding to layers or parts of 
layers, the compression mechanisms, color encodings and spatial 
resolutions used by previous modes apply to MRC. Therefore, the 
descriptions here will typically reference the appropriate earlier 
section. Fields and values specific to MRC mode are pointed out.

8.2.1. Baseline Fields

ImageWidth(256).                                           SHORT or LONG
    Same page widths as the base color mode; see Section 6.2.1.

BitsPerSample(258) = 1, 8, 9-16                                    SHORT
Compression(259) = 3, 4, 7, 9.                                     SHORT
SamplesPerPixel(277) = 1, 3, 4.                                    SHORT
FillOrder(266) = 1, 2.                                             SHORT

PhotometricInterpretation(262) = 0, 1, 2, 5, 10.                   SHORT
    For Mask layer, see Section 4.2.1.
    For Foreground and Background layers, see Sections 6.2.1 and 7.2.1.

ColorMap(320).                                                     SHORT
Count = 3 * (2**BitsPerSample)
    Used when Foreground or Background layer is a palette-color image; 
    see Section 7.2.1.




McIntyre, Zilles, et al.         Expires 5/17/98               [Page 53]

Internet Draft         File Format for Internet Fax    November 17, 1997


NewSubFileType(254) = 16, 18.                                       LONG
    For MRC fax mode, the NewSubFileType field has two bits that are
    required.
    Bit 1 indicates a single page of a multi-page document and must be 
    set for the Primary IFDs;
    Bit 4 indicates MRC imaging model as described in ITU-T 
    Recommendation T.44 [T.44], and must be set for Primary IFDs 
    and all MRC-specific child IFDs.

StripRowCounts(559).                                                LONG
    Count = number of strips
    The number of scanlines stored in a strip. MRC allows each fax strip 
    to store a different number of scanlines, up to a specified maximum 
    strip size, which is either 256 scanlines or the page length in 
    scanlines, depending on the implementation. This field replaces 
    RowsPerStrip for IFDs with variable-sized strips. Only one of the 
    two fields, StripRowCounts and RowsPerStrip, may be used in an IFD.

XResolution(282) = 100, 200, 300, 400.                          RATIONAL
YResolution(283) = 100, 200, 300, 400.                          RATIONAL
    The resolution of the image is expressed in pixels per resolution 
    unit. In pixels per inch, allowed XResolution values are: 100, 200, 
    300, and 400. MRC color fax mode requires the pixels to be square, 
    hence YResolution must equal XResolution for all layers.

8.2.2. Extension Fields

ChromaSubSampling(530).                                            SHORT
ChromaPositioning(531).                                            SHORT
Decode(TagToBeAssigned).                                           SHORT
    For Foreground and Background layers, see Section 6.2.2.

Indexed(346) = 0, 1.                                               SHORT
    For Foreground and Background layers: 1 indicates a palette-color 
    image, see Section 7.2.2.

T4Options(292) = 0, 1, 4, 5.                                       SHORT
T6Options(293) = 0.                                                SHORT
    For Mask layer, see Section 4.2.2.

DefaultImageColor(TagToBeAssigned).                        SHORT or LONG
    Count = SamplesPerPixel
    In areas where no image data is available, a default color is needed 
    to specify the color value. If the StripByteCounts value for a strip 
    is 0, then the color for that strip must be defined by a default 
    image color.







McIntyre, Zilles, et al.         Expires 5/17/98               [Page 54]

Internet Draft         File Format for Internet Fax    November 17, 1997


The DefaultImageColor field uses the same encoding as the image 
    data, and its value is therefore interpreted using the 
    PhotometricInterpretation, SamplesPerPixel, BitsPerSample, and 
    Indexed fields. If the fax data stream requires a different 
    encoding, then transferring the default color value between a TIFF 
    file and fax data stream requires a color conversion.
    The default value for the DefaultImageColor field is white.

SubIFDs(330).                                                        IFD
    Count = number of child IFDs
    Each value is an offset from the beginning of the TIFF file to a 
    child IFD [TTN1]. 

XPosition(286).                                                 RATIONAL
YPosition(287).                                                 RATIONAL
    Specifies the horizontal and vertical offsets of the top-left of the 
    IFD from the top-left of the Primary IFD in page resolution units. 
    For example, if the Primary IFD is at 400 pixels per inch, and a 
    foreground layer IFD is at 200 pixels per inch and located at pixel 
    coordinate (345, 678) with respect to the Primary IFD, the XPosition 
    value is 345/400 and the YPosition value is 678/400.
    Color fax does not currently allow overlap of any component images 
    within a single layer.
    Default values for XPosition and YPosition are 0.

8.2.3. New Fields

The Mixed Raster Content mode requires one new field: ImageLayer.

ImageLayer (34732).                                       SHORT or LONG.
    Count = 2
    Image layers are defined such that layer 1 is the Background layer, 
    layer 3 is the Foreground layer, and layer 2 is the Mask layer that 
    selects pixels from the Background and Foreground layers. The 
    ImageLayer tag contains two values, describing the layer to which 
    the image belongs and the order in which it is imaged.

    ImageLayer[0]: 1, 2, 3.
    1: Image is a Background image, i.e., the image that will appear 
       whenever the Mask contains a value of 0. Background images 
       typically contain low-resolution, continuous-tone imagery.
    2: Image is the Mask layer. In MRC, if the Mask layer is present, it 
       must be the Primary IFD and be full page in extent (no gaps.)
    3: Image is a Foreground image, i.e., the image that will appear 
       whenever the Mask contains a value of 1. The Foreground image 
       generally defines the color of text or lines, but may also 
       contain high-resolution imagery.

    ImageLayer[1]:
    1: first image to be imaged in this layer (e.g., first fax strip),
    2: second image to be imaged in this layer (e.g., second fax strip),
    3: ...

McIntyre, Zilles, et al.         Expires 5/17/98               [Page 55]

Internet Draft         File Format for Internet Fax    November 17, 1997


Value describing the image order. In MRC, this may be considered the 
    strip number. Since MRC mode currently does not allow overlap 
    between images within a layer, the order value does not have any 
    visual effect.

In MRC fax mode, it is possible that only a single layer is transmitted. 
For example, if a page contains only a single continuous-tone 
photograph, then only the Background layer may be transmitted. In this 
case, the Background layer will be full page and stored as the Primary 
IFD. ImageLayer[0] will be 1 indicating Background; ImageLayer[1] will 
be 1 since the layer must be full page and there can be no other IFDs 
associated with that layer. No Mask layer will exist.

8.3. Recommended TIFF Fields

See Sections 2.2.3. and 2.2.4.

8.4. Rules and Requirements for Images

The MRC mode defines a fundamental set of rules for images in the 
3-layer representation.

1. If more than one layer exists, then the binary Mask layer must be 
   present and it is the primary image. If only one layer exists, then 
   the image corresponding to that layer is the primary image.

2. The Primary image defines and extends to the entire page boundary; 
   all attached model images cannot extend beyond the Primary image. 
   Resolution differences may cause some pixels to "hang over" the page 
   boundary, but no new pixels should exist completely beyond the page 
   extent

3. The Background and Foreground images may use any color encoding 
   defined in Sections 5 and 6, and may optionally cover only a portion 
   of the region defined by the Primary image, unless one of them is the 
   primary image.

4. Each Primary IFD and each MRC-specific SubIFD must have an ImageLayer 
   field to specify which layer the IFD belongs to, and the imaging 
   order of that IFD within the layer.

5. Each Primary IFD must have a NewSubFileType field value set to 18, 
   indicating a single page of a multi-page document (bit 1) and MRC 
   mode (bit 4).

6. Each MRC-specific child IFD must have a NewSubFileType field value 
   set to 16, indicating MRC mode (bit 4).






McIntyre, Zilles, et al.         Expires 5/17/98               [Page 56]

Internet Draft         File Format for Internet Fax    November 17, 1997


7. In MRC mode, each layer is transmitted as a sequence of strips. It is 
   possible that each strip of each layer can be stored as a separate 
   IFD. In this case, the SubIFDs structure pointed to by the Primary 
   IFD will contain several IFDs that have an ImageLayer field with the 
   layer identified as either Background (layer 1) or Foreground (layer 
   3). There may be no overlap in the vertical direction between IFDs 
   associated with a single layer, although there may be a gap from one 
   of these images to the next. The TIFF XPosition and YPosition fields 
   are used to indicate the placement of these images with respect to 
   the primary image.

8. The resolution of Background and Foreground images must each be an 
   integer factor of the Primary image. For example, if the Primary 
   image is 400 pixels/inch, then the model images may be at 400 
   pixels/inch (400 / 1), 200 pixels/inch (400 / 2), 100 pixels/inch  
   (400 / 4), etc.

8.5. MRC Fax Mode Summary

Recommended fields are shown with an asterisk *

    +------------------+-----------------------------------------+
    | Baseline Fields  |               Values                    |
    |------------------|-----------------------------------------|
    | BitsPerSample    | 1: binary mask                          |
    |                  | 8: 8 bits per color sample              |
    |                  | 9-16: optional 12 bits/sample           |
    +------------------+-----------------------------------------+
    | ColorMap         | n: LAB color map                        |
    +------------------+-----------------------------------------+
    | Compression      | 3: Modified Huffman and Modified Read   |
    |                  | 4: Modified Modified Read               |
    |                  | 7: JPEG                                 |
    |                  | 9: JBIG                                 |
    +------------------+-----------------------------------------+
    | DateTime*        | {ASCII): date/time in the 24-hour format|
    |                  | "YYYY:MM:DD HH:MM:SS"                   |
    +------------------+-----------------------------------------|
    | FillOrder        | Applies only to 1 bit/sample encodings  |
    |                  | 1: Most significant bit first           |
    |                  | 2: Least significant bit first          |
    +------------------+-----------------------------------------|
    | ImageDescription*| {ASCII}: A string describing the        |
    |                  | contents of the image.                  |
    +------------------+-----------------------------------------+
    | ImageWidth       | 864, 1024, 1216, 1728, 2048, 2432, 2592,|
    |                  | 3072, 3456, 3648, 4096, 4864            |
    +------------------+-----------------------------------------+





McIntyre, Zilles, et al.         Expires 5/17/98               [Page 57]

Internet Draft         File Format for Internet Fax    November 17, 1997


    +------------------+-----------------------------------------+
    | ImageLength      | n: total number of scanlines in image   |
    +------------------+-----------------------------------------|
    | NewSubFileType   | 16, 18:                                 |
    |                  | Bit 1 indicates single page of a multi- |
    |                  | page document on Primary IFD            |
    |                  | Bit 4 indicates MRC model               |
    +------------------+-----------------------------------------+
    | Orientation      | 1**-8, Default 1                        |
    +------------------+-----------------------------------------+
    | PhotometricInter | 0: WhiteIsZero                          |
    | pretation        | 1: BlackIsZero                          |
    |                  | 2: RGB                                  |
    |                  | 5: CMYK                                 |
    |                  | 10: ITULAB                              |
    +------------------+-----------------------------------------+
    | ResolutionUnit   | 2: inch                                 |
    |                  | 3: centimeter                           |
    +------------------+-----------------------------------------+
    | RowsPerStrip     | n: number of scanlines in each strip    |
    +------------------+-----------------------------------------+
    | SamplesPerPixel  | 1: L* (lightness)                       |
    |                  | 3: RGB, LAB, CMY                        |
    |                  | 4: CMYK                                 |
    +------------------+-----------------------------------------+
    | Software*        | {ASCII}: name & release number of       |
    |                  | creator software                        |
    +------------------+-----------------------------------------+
    | StripByteCounts  | <n>: number or bytes in TIFF strip      |
    +------------------+-----------------------------------------+
    | StripOffsets     | <n>: offset from beginning of file to   |
    |                  | each TIFF strip                         |
    +------------------+-----------------------------------------|
    | XResolution      | 100, 200, 300, 400 (written in          |
    |                  | pixels/inch)                            |
    +------------------+-----------------------------------------|
    | YResolution      | equal to XResolution (pixels must be    |
    |                  | square)                                 |
    +------------------+-----------------------------------------+
    | Extension Fields                                           |
    +------------------+-----------------------------------------+
    | T4Options        | 0: required if Compression is Modified  |
    |                  | Huffman, EOLs not byte aligned          |
    |                  | 1: required if Compression 2D Modified  |
    |                  | Read, EOLs are byte aligned             |
    |                  | 4: required if Compression Modified     |
    |                  | Huffman, EOLs not byte aligned          |
    |                  | 5: required if Compression 2D Modified  |
    |                  | Read, EOLs are byte aligned             |
    +------------------+-----------------------------------------+



McIntyre, Zilles, et al.         Expires 5/17/98               [Page 58]

Internet Draft         File Format for Internet Fax    November 17, 1997


    +------------------+-----------------------------------------+
    | T6Options        | 0: required if Compression is 2D        |
    |                  | Modified Modified Read                  |
    +------------------+-----------------------------------------+
    | DocumentName*    | {ASCII}: name of scanned document       |
    +------------------+-----------------------------------------+
    | PageNumber       | n,m: page number followed by total page |
    |                  | count                                   |
    +------------------+-----------------------------------------+
    | Decode           | minL, maxL, mina, maxa, minb, maxb:     |
    |                  | minimum and maximum values for L*a*b*   |
    +------------------+-----------------------------------------+
    | ChromaSubSampling| ChromaSubsampleHoriz:                   |
    |                  | 0: equal numbers of lightness and chroma|
    |                  | samples                                 |
    |                  | 1: twice as many lightness samples as   |
    |                  | chroma samples                          |
    |                  | 2: four times as many lightness samples |
    |                  | as chroma samples                       |
    |                  | ChromaSubsampleVert:                    |
    |                  | 0: equal numbers of lightness and chroma|
    |                  | samples                                 |
    |                  | 1: twice as many lightness samples as   |
    |                  | chroma samples                          |
    |                  | 2: four times as many lightness samples |
    |                  | as chroma samples                       |
    +------------------+-----------------------------------------+
    | ChromaPositioning| 1: centered                             |
    |                  | 2: cosited                              |
    +------------------+-----------------------------------------+
    | DefaultImageColor| <n>: background color                   |
    +------------------+-----------------------------------------+
    | Indexed          | 0: not a palette-color image            |
    |                  | 1: palette-color image                  |
    +------------------+-----------------------------------------+
    | SubIFDs          | <IFD>: byte offset to fg/bg IFDs        |
    +------------------+-----------------------------------------+
    | XPosition        | horizontal offset in primary IFD        |
    |                  | coordinates                             |
    +------------------+-----------------------------------------+
    | YPosition        | vertical offset in primary IFD          |
    |                  | coordinates                             |
    +------------------+-----------------------------------------+
    | New Fields                                                 |
    +------------------+-----------------------------------------+
    | ImageLayer       | n, m: layer number, imaging sequence    |
    |                  | (e.g., strip number)                    |
    +------------------+-----------------------------------------+





McIntyre, Zilles, et al.         Expires 5/17/98               [Page 59]

Internet Draft         File Format for Internet Fax    November 17, 1997


    +------------------+-----------------------------------------+
    | GlobalParameters | <IFD>: global parameters IFD            |
    | IFD*             |                                         |
    +------------------+-----------------------------------------+
    | ProfileType*     | n: type of data stored in TIFF file     |
    +------------------+-----------------------------------------+
    | ITUFaxMode*      | n: ITU-compatible fax mode              |
    +------------------+-----------------------------------------+
    | CodingMethods*   | n: compression algorithms used in file  |
    +------------------+-----------------------------------------+
    | ModeNumber*      | n: version of ITU fax standard          |
    +------------------+-----------------------------------------+
    | VersionYear*     | byte sequence with year of ITU fax      |
    |                  | standard                                |
    +------------------+-----------------------------------------+


9. Security Considerations

This document describes a file format for Internet fax, which is an 
application of the TIFF encoding.  As such, it does not create any 
security issues not already existing in TIFF (though, none have been 
identified).

Further, the encoding specified in this document does not in any way 
preclude the use of any Internet security protocol to encrypt, 
authenticate, or non-repudiate TIFF-encoded facsimile messages.


10. Copyright

(c) The Internet Society (1997). All Rights Reserved.

This document and translations of it may be copied and furnished to 
others, and derivative works that comment on or otherwise explain it or 
assist in its implementation may be prepared, copied, published and 
distributed, in whole or in part, without restriction of any kind, 
provided that the above copyright notice and this paragraph are included 
on all such copies and derivative works.  However, this document itself 
may not be modified in any way, such as by removing the copyright notice 
or references to the Internet Society or other Internet organizations, 
except as needed for the  purpose of developing Internet standards in 
which case the procedures for copyrights defined in the Internet 
Standards process must be followed, or as required to translate it into 
languages other than English.

The limited permissions granted above are perpetual and will not be revoked by the Internet Society or its successors or assigns.

This document and the information contained herein is provided on an "AS 
IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING TASK 
FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT 

McIntyre, Zilles, et al.         Expires 5/17/98               [Page 60]

Internet Draft         File Format for Internet Fax    November 17, 1997

LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT 
INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR 
FITNESS FOR A PARTICULAR PURPOSE."


11. References

[REQ] S. Bradner, Key words for use in RFCs to Indicate Requirement 
Levels, RFC 2119, March 1997.

[T.4] ITU-T Recommendation T.4, Standardization of group 3 facsimile 
apparatus for document transmission, July 1996

[T.6] ITU-T Recommendation T.6, Facsimile coding schemes and coding 
control functions for group 4 facsimile apparatus, November 1988

[T.30] ITU-T Recommendation T.30 - Procedures for Document Facsimile 
Transmission in the General Switched Telephone Network, June 1996

[T.42] ITU-T Recommendation T.42, Continuous-tone colour representation 
method for facsimile, February 1996

[T.43] ITU-T Recommendation T.43, Colour and gray-scale image 
representations using lossless coding scheme for facsimile, February 
1997

[T.44] ITU-T Recommendation T.44, Mixed Raster Content (MRC), October 1997.

[T.81] ITU-T Recommendation T.81, Information technology - Digital 
compression and coding of continuous-tone still images - Requirements 
and guidelines, September 1992

[T.82] ITU-T Recommendation T.82, Information technology - Coded 
representation of picture and audio information - Progressive bi-level 
image compression, March 1995

[T.85] ITU-T Recommendation T.85, Application profile for Recommendation 
T.82 - Progressive bi-level image compression (JBIG coding scheme) for 
facsimile apparatus, August 1995

[TIFF] Tag Image File Format, Revision 6.0, Adobe Developers 
Association, June 3, 1992, ftp://ftp.adobe.com/pub/adobe/devrelations/
devtechnotes/pdffiles/tiff6.pdf

     The TIFF 6.0 specification dated June 3, 1992 specification (c) 1986-
     1988, 1992 Adobe Systems Incorporated. All Rights Reserved.

[TIFF-F] G. Parsons and J. Rafferty, Tag Image File Format (TIFF) - 
Application F, Sept. 22, 1997, work in progress, 
ftp://ftp.ietf.org/internet-drafts/draft-ietf-fax-tiff-04.txt



McIntyre, Zilles, et al.         Expires 5/17/98               [Page 61]

Internet Draft         File Format for Internet Fax    November 17, 1997


[TIFF-F0] TIFF Class F specification, Apr 28, 1990, 
ftp://ftp.faximum.com/pub/documents/tiff_f.txt

[TIFF-REG] G. Parsons, J. Rafferty and S. Zilles, Tag Image File Format 
(TIFF) - image/tiff MIME Sub-type Registration, Sept. 22, 1997, work in 
progress, ftp://ftp.ietf.org/internet-drafts/draft-ietf-fax-reg-02.txt

[TTN1] Adobe PageMaker 6.0 TIFF Technical Notes, Sept. 14, 1995, 
http://www.adobe.com/supportservice/devrelations/PDFS/TN/TIFFPM6.pdf

[TTN2] Draft TIFF Technical Note 2, Replacement TIFF/JPEG specification, 
March 17, 1995, ftp://ftp.sgi.com/graphics/tiff/TTN2.draft.txt 

[VPIM2] G. Vaudreuil and G. Parsons, Voice Profile for Internet Mail - 
version 2, July 1997, work in progress, <draft-ema-vpim-06.txt>

[WIDE] K. Toyoda, H. Ohno and J. Murai, WDIE Message-based Fax over the 
Internet, July 29, 1997, work in progress, ftp://ftp.ietf.org/internet-
drafts/draft-ietf-fax-wide-00.txt

The ITU-T Recommendations are available at http://www.itu.ch.


12. Authors' Addresses 

Lloyd McIntyre                          Stephen Zilles
Xerox Corporation                       Adobe Systems Inc.
Mailstop PAHV-305                       Mailstop W14
3400 Hillview Ave.                      345 Park Avenue
Palo Alto, CA 94304 USA                 San Jose, CA 95110-2704, USA
Voice: +1-415-813-6762                  Voice: +1-408-536-4766
Fax: +1-415-845-2340                    Fax: +1-408-536-4042
Email: lmcintyre@adoc.xerox.com         Email: szilles@adobe.com 

Robert Buckley                          Dennis Venable
Xerox Corporation                       Xerox Corporation
Mailstop 0128-27E                       Mailstop 0128-27E
800 Phillips Road                       800 Phillips Road
Webster, NY 14580, USA                  Webster, NY 14580, USA
Voice: +1-716-422-1282                  Voice: +1-716-422-8009
Fax: +1-716-422-6117                    Fax: +1-716-422-6117
Email: Rob_Buckley@wb.xerox.com         Email: venable@wrc.xerox.com

Glenn W. Parsons                        James Rafferty
Northern Telecom                        Human Communications
P.O. Box 3511, Station C                12 Kevin Drive
Ottawa, ON  K1Y 4H7, Canada             Danbury, CT 06811-2901, USA
Phone: +1-613-763-7582                  Phone: +1-203-746-4367
Fax: +1-613-763-2697                    Fax: +1-203-746-4367
Email: Glenn.Parsons@Nortel.ca          Email: Jrafferty@worldnet.att.net



McIntyre, Zilles, et al.         Expires 5/17/98               [Page 62]

Internet Draft         File Format for Internet Fax    November 17, 1997


Annex A:  Summary of TIFF Fields for Internet Fax

This annex includes tables which list by mode the TIFF fields used in 
the proposed fax file format.  The fields are organized into 3 
categories:

    1)  TIFF Baseline Fields
    2)  TIFF Extension Fields
    3)  New Fields.


The tables include the allowed values for each fax mode.  
Entries other than explicit numbers are described by:

    n        - single number
    n, m     - 2 numbers
    a, b, c  - 3 numbers
    r        - rational number
    <n>      - array of numbers
    <b>      - byte sequence
    {ASCII}  - string
    <IFD>    - array of IFD byte offsets

A blank entry in the table indicates that the field is not used by that 
particular fax mode.


Table A.1  TIFF Baseline Fields

            +---------------------------------------------------------+
            |                  Fax Mode/Application                   |
            +---------------------------------------------------------|
            | Minimal | Extended |  JBIG  |  Lossy  |Lossless| Mixed  |
            |   B&W   |    B&W   |  B&W   |  Color  | Color  | Raster |
 +----------|         |          |        |         |        | Content|
 |  Field   |    W    |     F    |   J    |   C     |    P   |   M    |
 +----------+---------+----------+--------+---------+--------+--------+
 | BitsPer  | 1       | 1        | 1      | 8, 12   | 1, 8   | 1, 8   |
 | Sample   |         |          |        |         | 9-16   | 9-16   |
 +----------+---------+----------+--------+---------+--------+--------+
 | ColorMap |         |          |        |         | <n>    | <n>    |
 +----------+---------+----------+--------+---------+--------+--------+
 | Compres- | 3       | 3, 4     | 9      | 7       | 9      | 3, 4,  |
 | sion     |         |          |        |         |        | 7, 9   |
 +----------+---------+----------+--------+---------+--------+--------+
 | DateTime |         | {ASCII}  | {ASCII}| {ASCII} | {ASCII}| {ASCII}|
 +----------+---------+----------+--------+---------+--------+--------+
 | FillOrder| 2       | 1, 2     | 1, 2   |         | 1, 2   | 1,2    |
 +----------+---------+----------+--------+---------+--------+--------+




McIntyre, Zilles, et al.         Expires 5/17/98               [Page 63]

Internet Draft         File Format for Internet Fax    November 17, 1997


 +----------+---------+----------+--------+---------+--------+--------+
 | ImageDes-|         | {ASCII}  | {ASCII}| {ASCII} | {ASCII}| {ASCII}|
 | cription |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 |  Image-  | 1728    | 1728, 2048, 2432  |   864, 1024, 1216, 1728,  |
 |  Width   |         | 2592, 3072, 3456  |  2048, 2432, 2592, 3072,  |
 |          |         | 3648, 4096, 4864  |  3456, 3648, 4096, 4864   |
 +----------+---------+----------+--------+---------+--------+--------+
 | Image-   | n       | n        | n      | n       | n      | n      |
 | Length   |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | BitsPer  | 1       | 1        | 1      | 8, 12   | 1      | 1      |
 | Sample   |         |          |        |         | 8, 9-16| 8, 9-16|
 +----------+---------+----------+--------+---------+--------+--------+
 | ColorMap |         |          |        |         | <n>    | <n>    |
 +----------+---------+----------+--------+---------+--------+--------+
 | NewSub-  | 2       | 2        | 2      | 2       | 2      | 16, 18 |
 | FileType |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Orien-   | 1       | 1        | 1      | 1       | 1      | 1      |
 | tation   |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Photo-   | 0       | 0, 1     | 0, 1   | 10      | 2, 5,  | 0, 1,  |
 | metric-  |         |          |        |         |        | 2, 5,  |
 | Interp-  |         |          |        |         |        | 10     |
 | retation |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Resolu-  | 2       | 2, 3     | 2, 3   | 2, 3    | 2, 3   | 2, 3   |
 | tionUnit |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | RowsPer- | n       | n        | n      | n       | n      |        |
 | Strip    |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Samples- | 1       | 1        | 1      | 1, 3    | 1, 3, 4| 1, 3, 4|
 | PerPixel |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Software |         | {ASCII}  | {ASCII}| {ASCII} | {ASCII}| {ASCII}|
 +----------+---------+----------+--------+---------+--------+--------+
 | Strip-   | n       | <n>      | <n>    | <n>     | <n>    | <n>    |
 | Byte-    |         |          |        |         |        |        |
 | Counts   |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Strip-   | n       | <n>      | <n>    | <n>     | <n>    | <n>    |
 | Offsets  |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | XResolu- | 204     | 200, 204, 300     |    100, 200, 300, 400     |
 | tion     |         | 400, 408          |                           |
 +----------+---------+----------+--------+---------+--------+--------+
 | YResolu- | 98, 196 | 98, 196, 100, 200 |    100, 200, 300, 400     |
 | tion     |         | 300, 391, 400     |                           |
 +----------+---------+----------+--------+---------+--------+--------+


McIntyre, Zilles, et al.         Expires 5/17/98               [Page 64]

Internet Draft         File Format for Internet Fax    November 17, 1997


Table A.2  TIFF Extension Fields

            +---------------------------------------------------------+
            |                  Fax Mode/Application                   |
            +---------------------------------------------------------|
            | Minimal | Extended |  JBIG  |  Lossy  |Lossless| Mixed  |
            |   B&W   |    B&W   |  B&W   |  Color  | Color  | Raster |
 +----------|         |          |        |         |        | Content|
 |  Field   |    W    |     F    |   J    |   C     |    P   |   M    |
 +----------+---------+----------+--------+---------+--------+--------+
 | T4Options| 0, 4    | 0, 1,    |        |         |        | 0, 1,  |
 |          |         | 4, 5     |        |         |        | 4, 5   |
 +----------+---------+----------+--------+---------+--------+--------+
 | T6Options|         | 0        |        |         |        | 0      |
 +----------+---------+----------+--------+---------+--------+--------+
 | Document-|         | {ASCII}  | {ASCII}| {ASCII} | {ASCII}| {ASCII}|
 | Name     |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Page-    | n, m    | n, m     | n, m   | n, m    | n, m   | n, m   |
 | Number   |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | XPosition|         |          |        |         |        | r      |
 +----------+---------+----------+--------+---------+--------+--------+
 | YPosition|         |          |        |         |        | r      |
 +----------+---------+----------+--------+---------+--------+--------+
 | SubIFDs  |         |          |        |         |        | <IFD>  |
 +----------+---------+----------+--------+---------+--------+--------+
 | Indexed  |         |          |        |         | 0,1    | 0,1    |
 +----------+---------+----------+--------+---------+--------+--------+
 | Chroma-  |         |          |        | n, m    |        | n, m   |
 | SubSampl-|         |          |        |         |        |        |
 | ing      |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Chroma-  |         |          |        | 1, 2    |        | 1,2    |
 | Position-|         |          |        |         |        |        |
 | ing      |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Decode   |         |          |        | <n>     | <n>    | <n>    |
 +----------+---------+----------+--------+---------+--------+--------+
 | Default- |         |          |        |         |        | <n>    |
 |ImageColor|         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Strip-   |         |          |        |         |        | <n>    |
 | RowCounts|         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+








McIntyre, Zilles, et al.         Expires 5/17/98               [Page 65]

Internet Draft         File Format for Internet Fax    November 17, 1997


Table A.3   New Fields

            +---------------------------------------------------------+
            |                  Fax Mode/Application                   |
            +---------------------------------------------------------|
            | Minimal | Extended |  JBIG  |  Lossy  |Lossless| Mixed  |
            |   B&W   |    B&W   |  B&W   |  Color  | Color  | Raster |
 +----------|         |          |        |         |        | Content|
 |  Field   |    W    |     F    |   J    |   C     |    P   |   M    |
 +----------+---------+----------+--------+---------+--------+--------+
 | BadFax-  |         | n        |        |         |        |        |
 | Lines    |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | CleanFax-|         | 0, 1, 2  |        |         |        |        |
 | Data     |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Consecu- |         | n        |        |         |        |        |
 | tiveBad- |         |          |        |         |        |        |
 | FaxLines |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Image-   |         |          |        |         |        | n, m   |
 | Layer    |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Global-  |         |          | <IFD>  | <IFD>   | <IFD>  | <IFD>  |
 | Parame-  |         |          |        |         |        |        |
 | tersIFD  |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Profile- |         |          | n      | n       | n      | n      |
 | Type     |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | ITUFax-  |         |          | n      | n       | n      | n      |
 | Mode     |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Coding-  |         |          | n      | n       | n      | n      |
 | Method   |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+
 | Mode-    |         |          |        |         |        | n      |
 | Number   |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------|
 | Version- |         |          |        | <b>     |<b>     |        |
 | Year     |         |          |        |         |        |        |
 +----------+---------+----------+--------+---------+--------+--------+











McIntyre, Zilles, et al.         Expires 5/17/98               [Page 66]

Internet Draft         File Format for Internet Fax    November 17, 1997


Appendix 1:  Open Issues

This section is temporary until the draft turns into an RFC; it includes
an identification of the issues that have been identified with respect
to this document. The issues are numbered and contain a short
identification of the issue plus an optional discussion of the issues.

1. Synchronization with the TIFF-F.

Until the TIFF-F Informational RFC is published, there is always the possibility of technical changes being made to TIFF-F. The intent of the authors is that the description of TIFF-F in this document will be technically the same as the informational RFC; therefore, this item will remain open until the RFC is published. 

2. Having a separate label for the minimum subset of TIFF-F

The authors have taken the position that having a separate application
label for the minimum subset of TIFF-F is appropriate. This topic was,
unfortunately, not explicitly discussed at the Munich meeting. The
reasoning for a separate label is:

In revising the TIFF-FX draft to incorporate the Munich agreements, it
became clear that there was a difference between the labeling of TIFF
applications in TIFF-FX and in TIFF-F. The TIFF-F document defines only
one TIFF application, namely Application F of TIFF. This labeling seems
to be used both for the minimum subset of TIFF-F and for the complete
set of TIFF-F. On the other hand, TIFF-FX gives the minimum subset its 
own label, Application W of TIFF (in recognition of the WIDE group's
efforts) and uses Application F of TIFF to refer only to the full TIFF-F
specification.

This may seem to be unimportant, but not having a clear meaning to the
label, Application F of TIFF, can create interoperability problems. For
example, a writer that can generate either the minimum set of TIFF-F
functionality or the full set sends a document with Media Type
image/tiff; application F to a reader that only supports the minimum
set. How does the reader know whether it should try to read the document
or should reject it as not supported. For interchange to work, all
writers would have to limit themselves to the minimum set or all readers
would have to be able to read the full set. In either case, the
distinction between the two sets becomes academic as only one of the
meanings, full or minimum, will have a practical use.










McIntyre, Zilles, et al.         Expires 5/17/98               [Page 67]

