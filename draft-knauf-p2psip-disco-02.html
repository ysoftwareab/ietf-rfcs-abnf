<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>A RELOAD Usage for Distributed Conference Control (DisCo)</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 Overview of DisCo">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Reference Scenario">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Initiating a Distributed Conference">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Joining a Conference">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Conference State Synchronization">
<link href="#rfc.section.3.5" rel="Chapter" title="3.5 Call delegation">
<link href="#rfc.section.3.6" rel="Chapter" title="3.6 Resilience">
<link href="#rfc.section.3.7" rel="Chapter" title="3.7 Topology Awareness">
<link href="#rfc.section.4" rel="Chapter" title="4 RELOAD Usage for Distributed Conference Control">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Shared Resource DisCo-Registration">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Kind Data Structure">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Variable Conference Identifier">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Conference Creation">
<link href="#rfc.section.4.5" rel="Chapter" title="4.5 Advertising Focus Ability">
<link href="#rfc.section.4.6" rel="Chapter" title="4.6 Determining Coordinates">
<link href="#rfc.section.4.7" rel="Chapter" title="4.7 Proximity-aware Conference Participation">
<link href="#rfc.section.4.8" rel="Chapter" title="4.8 Configuration Document Extension">
<link href="#rfc.section.5" rel="Chapter" title="5 Conference State Synchronization">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Event Package Overview">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 &lt;distributed-conference&gt;">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 &lt;version-vector&gt;/&lt;version&gt;">
<link href="#rfc.section.5.4" rel="Chapter" title="5.4 &lt;conference-description&gt;">
<link href="#rfc.section.5.5" rel="Chapter" title="5.5 &lt;focus&gt;">
<link href="#rfc.section.5.5.1" rel="Chapter" title="5.5.1 &lt;focus-state&gt;">
<link href="#rfc.section.5.5.2" rel="Chapter" title="5.5.2 &lt;users&gt;/&lt;user&gt;">
<link href="#rfc.section.5.5.3" rel="Chapter" title="5.5.3 &lt;relations&gt;/&lt;relation&gt;">
<link href="#rfc.section.5.6" rel="Chapter" title="5.6 Distribution of Change Events">
<link href="#rfc.section.5.7" rel="Chapter" title="5.7 Translation to Conference-Info Event Package">
<link href="#rfc.section.5.7.1" rel="Chapter" title="5.7.1 &lt;conference-info&gt;">
<link href="#rfc.section.5.7.2" rel="Chapter" title="5.7.2 &lt;conference-description&gt;">
<link href="#rfc.section.5.7.3" rel="Chapter" title="5.7.3 &lt;host-info&gt;">
<link href="#rfc.section.5.7.4" rel="Chapter" title="5.7.4 &lt;conference-state&gt;">
<link href="#rfc.section.5.7.5" rel="Chapter" title="5.7.5 &lt;users&gt;/&lt;user&gt;">
<link href="#rfc.section.5.7.6" rel="Chapter" title="5.7.6 &lt;sidebars-by-ref&gt;/&lt;sidebars-by-value&gt;">
<link href="#rfc.section.6" rel="Chapter" title="6 Distributed Conference Control with SIP">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Call delegation">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Conference Access">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 Media Negotiation and Distribution">
<link href="#rfc.section.6.3.1" rel="Chapter" title="6.3.1 Offer/Answer">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 Restructuring a Conference">
<link href="#rfc.section.6.4.1" rel="Chapter" title="6.4.1 On Graceful Leave">
<link href="#rfc.section.6.4.2" rel="Chapter" title="6.4.2 On Unexpected Leave">
<link href="#rfc.section.7" rel="Chapter" title="7 DisCo Kind Definition">
<link href="#rfc.section.8" rel="Chapter" title="8 XML Schema">
<link href="#rfc.section.9" rel="Chapter" title="9 Relax NG Grammar">
<link href="#rfc.section.10" rel="Chapter" title="10 Security Considerations">
<link href="#rfc.section.10.1" rel="Chapter" title="10.1 Trust Aspects">
<link href="#rfc.section.11" rel="Chapter" title="11 IANA Considerations">
<link href="#rfc.section.12" rel="Chapter" title="12 Acknowledgments">
<link href="#rfc.references" rel="Chapter" title="13 References">
<link href="#rfc.references.1" rel="Chapter" title="13.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="13.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Change Log">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document defines a RELOAD Usage for Distributed Conference Control (DisCo) with SIP. DisCo preserves conference addressing through a single SIP URI by splitting its semantic of identifier and locator using a new Kind data structure. Conference members are enabled to select conference controllers based on proximity awareness and to recover from failures of individual resource instances. DisCo proposes call delegation to balance the load at focus peers." />
  <meta name="description" content="This document defines a RELOAD Usage for Distributed Conference Control (DisCo) with SIP. DisCo preserves conference addressing through a single SIP URI by splitting its semantic of identifier and locator using a new Kind data structure. Conference members are enabled to select conference controllers based on proximity awareness and to recover from failures of individual resource instances. DisCo proposes call delegation to balance the load at focus peers." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">A. Knauf</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">G. Hege</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">T C. Schmidt</td>
</tr>
<tr>
<td class="left">Expires: September 15, 2011</td>
<td class="right">HAW Hamburg</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">M. Waehlisch</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">link-lab &amp; FU Berlin</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">March 14, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">A RELOAD Usage for Distributed Conference Control (DisCo)<br />
  <span class="filename">draft-knauf-p2psip-disco-02</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document defines a RELOAD Usage for Distributed Conference Control (DisCo) with SIP. DisCo preserves conference addressing through a single SIP URI by splitting its semantic of identifier and locator using a new Kind data structure. Conference members are enabled to select conference controllers based on proximity awareness and to recover from failures of individual resource instances. DisCo proposes call delegation to balance the load at focus peers.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on September 15, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">Overview of DisCo</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Reference Scenario</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Initiating a Distributed Conference</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Joining a Conference</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Conference State Synchronization</a>
</li>
<li>3.5.   <a href="#rfc.section.3.5">Call delegation</a>
</li>
<li>3.6.   <a href="#rfc.section.3.6">Resilience</a>
</li>
<li>3.7.   <a href="#rfc.section.3.7">Topology Awareness</a>
</li>
<li>4.   <a href="#rfc.section.4">RELOAD Usage for Distributed Conference Control</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Shared Resource DisCo-Registration</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Kind Data Structure</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Variable Conference Identifier</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Conference Creation</a>
</li>
<li>4.5.   <a href="#rfc.section.4.5">Advertising Focus Ability</a>
</li>
<li>4.6.   <a href="#rfc.section.4.6">Determining Coordinates</a>
</li>
<li>4.7.   <a href="#rfc.section.4.7">Proximity-aware Conference Participation</a>
</li>
<li>4.8.   <a href="#rfc.section.4.8">Configuration Document Extension</a>
</li>
<li>5.   <a href="#rfc.section.5">Conference State Synchronization</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Event Package Overview</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">&lt;distributed-conference&gt;</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">&lt;version-vector&gt;/&lt;version&gt;</a>
</li>
<li>5.4.   <a href="#rfc.section.5.4">&lt;conference-description&gt;</a>
</li>
<li>5.5.   <a href="#rfc.section.5.5">&lt;focus&gt;</a>
</li>
<li>5.5.1.   <a href="#rfc.section.5.5.1">&lt;focus-state&gt;</a>
</li>
<li>5.5.2.   <a href="#rfc.section.5.5.2">&lt;users&gt;/&lt;user&gt;</a>
</li>
<li>5.5.3.   <a href="#rfc.section.5.5.3">&lt;relations&gt;/&lt;relation&gt;</a>
</li>
<li>5.6.   <a href="#rfc.section.5.6">Distribution of Change Events</a>
</li>
<li>5.7.   <a href="#rfc.section.5.7">Translation to Conference-Info Event Package</a>
</li>
<li>5.7.1.   <a href="#rfc.section.5.7.1">&lt;conference-info&gt;</a>
</li>
<li>5.7.2.   <a href="#rfc.section.5.7.2">&lt;conference-description&gt;</a>
</li>
<li>5.7.3.   <a href="#rfc.section.5.7.3">&lt;host-info&gt;</a>
</li>
<li>5.7.4.   <a href="#rfc.section.5.7.4">&lt;conference-state&gt;</a>
</li>
<li>5.7.5.   <a href="#rfc.section.5.7.5">&lt;users&gt;/&lt;user&gt;</a>
</li>
<li>5.7.6.   <a href="#rfc.section.5.7.6">&lt;sidebars-by-ref&gt;/&lt;sidebars-by-value&gt;</a>
</li>
<li>6.   <a href="#rfc.section.6">Distributed Conference Control with SIP</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Call delegation</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Conference Access</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">Media Negotiation and Distribution</a>
</li>
<li>6.3.1.   <a href="#rfc.section.6.3.1">Offer/Answer</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">Restructuring a Conference</a>
</li>
<li>6.4.1.   <a href="#rfc.section.6.4.1">On Graceful Leave</a>
</li>
<li>6.4.2.   <a href="#rfc.section.6.4.2">On Unexpected Leave</a>
</li>
<li>7.   <a href="#rfc.section.7">DisCo Kind Definition</a>
</li>
<li>8.   <a href="#rfc.section.8">XML Schema</a>
</li>
<li>9.   <a href="#rfc.section.9">Relax NG Grammar</a>
</li>
<li>10.   <a href="#rfc.section.10">Security Considerations</a>
</li>
<li>10.1.   <a href="#rfc.section.10.1">Trust Aspects</a>
</li>
<li>11.   <a href="#rfc.section.11">IANA Considerations</a>
</li>
<li>12.   <a href="#rfc.section.12">Acknowledgments</a>
</li>
<li>13.   <a href="#rfc.references">References</a>
</li>
<li>13.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>13.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Change Log</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">This document describes a RELOAD Usage for distributed conference control (DisCo) in a tightly coupled model with SIP <a href="#RFC3261">[RFC3261]</a>. The Usage provides self-organizing and scalable signaling that allows RELOAD peers, clients and plain SIP user agents to participate in a managed P2P conference. DisCo defines the following functions:</p>

<ul>
<li>A SIP protocol scheme for distributed conference control</li>
<li>RELOAD Usage and definition of conferencing Kind</li>
<li>Mechanisms for conference synchronization and call delegation</li>
<li>Mechanism for proximity-aware routing within a conference</li>
<li>An XML event package for distributed conferences</li>
</ul>
<p id="rfc.section.1.p.2">In this document, the term distributed conferencing refers to a multiparty conversation in a tightly coupled model in which the point of control (i.e., the focus) is identified by a unique URI, but the focus service is located at many independent entities. Multiple SIP <a href="#RFC3261">[RFC3261]</a> user agents uniformly control and manage a multiparty session. This document defines a new Usage for RELOAD, including an additional Kind code point with a corresponding data structure that complies with the demands for distributed conferences.  The 'DisCo' data structure stores the mapping of a single conference URI to multiple conference controllers and thereby separates the conference identifier from focus instantiations.</p>
<p id="rfc.section.1.p.3">Authorized controllers of a conference are permitted to register their mapping in the DisCo data structure autonomously. Thus, the DisCo data structure represents a co-managed Resource in RELOAD. To provide trusted and secure access to a co-managed Resource, this document uses the definitions for Shared Resources (ShaRe) <a href="#I-D.knauf-p2psip-share">[I-D.knauf-p2psip-share]</a>.</p>
<p id="rfc.section.1.p.4">Delay and jitter are critical issues in multimedia communications.  The proposed conferencing scheme supports mechanisms to build an optimized interconnecting graph between conference participants and their responsible conference controllers. Conference members will be enabled to select the closest focus with respect to delay or jitter.</p>
<p id="rfc.section.1.p.5">DisCo extends conference control mechanisms to provide a consistent and reliable conferencing environment. Controlling peers maintain a consistent view of the entire conference state. The multiparty system can be re-structured based on call delegation operations.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Terminology</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.<br><br></p>
<p id="rfc.section.2.p.2">We use the terminology and definitions from der RELOAD base draft<a href="#I-D.ietf-p2psip-base">[I-D.ietf-p2psip-base]</a>, the peer-to-peer SIP concepts draft <a href="#I-D.ietf-p2psip-concepts">[I-D.ietf-p2psip-concepts]</a>, the usage for shared resources draft <a href="#I-D.knauf-p2psip-share">[I-D.knauf-p2psip-share]</a>,and the terminology formed by the framework for conferencing with SIP <a href="#RFC4353">[RFC4353]</a>.  Additionally the following terms are used:</p>

<dl>
<dt>Coordinate Value:</dt>
<dd style="margin-left: 8">An opaque string that describes a host's relative position in the network topology.</dd>
<dt>Focus peer:</dt>
<dd style="margin-left: 8">A RELOAD peer that provides SIP conferencing functions and implements the Usage for distributed conferencing. It is called 'active' if already involved in signaling relation to conference participants. Otherwise, if only registered in a distributed conference data structure, it is referred to as a 'potential' focus peer.</dd>
</dl>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#sec-o" id="sec-o">Overview of DisCo</a>
</h1>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#subsec-a" id="subsec-a">Reference Scenario</a>
</h1>
<p id="rfc.section.3.1.p.1">The reference scenario for the Distributed Conference Control (DisCo) is shown in <a href="#fig-disco-arch">Figure 1</a>. Peers are connected via a RELOAD <a href="#I-D.ietf-p2psip-base">[I-D.ietf-p2psip-base]</a> instance, in which peers A and B are managing a single multiparty conference. The conference is identified by a unique conference URI, but located at peers A and B fulfilling the role of the focus. The mapping of the conference URI to one or more responsible focus peers is stored in a new RELOAD Resource for distributed conferencing within a data structure denoted as DisCo-Registration. The storing peer SP of the distributed conference resource holds this data.</p>
<p id="rfc.section.3.1.p.2">The focus peers A and B maintain SIP signaling relations to conference participants, which may have different conference protocol capabilities. In this example, peer A is the focus for the RELOAD peer C and the plain SIP user agent E whereas peer B serves as a focus for RELOAD peer D and the RELOAD client F.</p>
<p id="rfc.section.3.1.p.3">RELOAD peers and clients obtain the contact information for the conference from the storing peer. In contrast to this, the user agent E receives the conference URI not by RELOAD mechanisms, but resolves the ID and joins the conference by plain SIP negotiation.</p>
<p id="rfc.section.3.1.p.4">Focus peers maintain a SIP signaling relation among each other used for notification messages that synchronize the conference focus peers' knowledge about the entire conference state. Additionally, focus peers can transfer calls to each other by a call delegation mechanism.</p>
<div id="#rfc.figure.1"></div>
<div id="#fig-disco-arch"></div>
<pre>
                   +----------+     +------------------+                                 
                   |Acces List|     |DisCo-Registration|
                   +----------+     +------------------+
                               \   /
                             +-------+ 
                             |Storing|
         # # # # # # # # # # | Peer  | # # # # # # # # # #   
        #                    |  SP   |                    # 
       #                     +-------+                     #
      #                                                     #
     #                                                       #
    #                                                         #
 +----+                                                     +----+ 
 |Peer| \               RELOAD Instance                     |Peer|
 | C  |  \                                                  | D  |   
 +----+   \                                                 +----+
    #     SIP                                                 #
     #      \                                                #
      #      \                                              # 
       #     +-------+                       +-------+     #(       
        #    | Focus |                       | Focus |    #  )     
         # # | Peer  | # # # # # # # # # # # | Peer  | # #  (    
             |   A   | &lt;===Conf.Events/====&gt; |   B   |       )        
             +-------+    Call delegation    +-------+    Overlay 
            /                                        \     Comm.
           /                                          \     (
         SIP                                          SIP    )
         /                                              \   (
        /                                                \   )
   +----------+                                      +--------+
   |User Agent|                                      | Client |
   |    E     |                                      |   F    |
   +----------+                                      +--------+</pre>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#subsec-iadc" id="subsec-iadc">Initiating a Distributed Conference</a>
</h1>
<p id="rfc.section.3.2.p.1">To create a conference the initiating user agent announces itself as a focus for the conference. It stores its own contact information (Node-ID) as a DisCo-Registration Kind (cf. <a href="#fig-overview-cf">Figure 2</a>) in the RELOAD overlay. The hashed conference URI is used as the Resource-ID. This Resource will later contain the contact IDs of all potential focus peers including optional topological descriptors.</p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> <a href="#subsec-jac" id="subsec-jac">Joining a Conference</a>
</h1>
<p id="rfc.section.3.3.p.1">A RELOAD-aware node (cf. Bob in <a href="#fig-overview-cf">Figure 2</a>) intending to join an existing conference requests the list of potential focus peers stored in the DisCo-Registration under the conference's Resource-ID. The node selects any of the focus peers (e.g., Alice) and establishes a connection using AppAttach/ICE <a href="#RFC5245">[RFC5245]</a>. This transport is then used to send an INVITE to the conference applying the chosen focus as the contact. The selection of the focus peer can optionally be based on proximity information if available.</p>
<p id="rfc.section.3.3.p.2">A conference member proposes itself as a focus for subsequent participants by adding its Node-ID to the DisCo-Registration stored under the conference URI in the RELOAD overlay. The decision whether a peer announces as a focus incorporates bandwidth, power, and other constraints, but details are beyond the scope of this document.</p>
<div id="#rfc.figure.2"></div>
<div id="#fig-overview-cf"></div>
<pre>
Alice                          RELOAD                            Bob
(initiating peer)                                     (joining peer)
--------------------------------------------------------------------
  |                               |                               |
  |      Alice stores her mapping to register a conference        |
  | Store mapping(ConfURI, Alice) |                               |
  |------------------------------&gt;|                               |
  |      Bob requests the list of potential focus peers           |
  |                               |        Lookup ConfURI         |
  |                               |&lt;------------------------------|
  |                               |   Result list of conf. focus  |
  |                               |------------------------------&gt;|
  |                               |                               |
  |       Bob establishes transport connection to Alice           |
  |                           AppAttach                           |
  |&lt;--------------------------------------------------------------|
  |                           AppAttach                           |
  |--------------------------------------------------------------&gt;|
  |                            INVITE                             |
  |&lt;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~|
  |                              OK                               |
  |~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&gt;|
  |                              ACK                              |
  |&lt;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~|
  |                             Media                             |
  |&lt;=============================================================&gt;|
  |                               |                               |
  |       Bob stores his mapping to become a focus peer too       |
  |                               |  Store mapping(ConfURI, Bob)  |
  |                               |&lt;------------------------------|
  |                               |                               |
          </pre>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> <a href="#subsubsec-cs" id="subsubsec-cs">Conference State Synchronization</a>
</h1>
<p id="rfc.section.3.4.p.1">Each focus of a conference maintains signaling connections to its related participants independently from other conference controllers.  This distributed conference design effects that the entire SIP conference state is jointly held by all focus peers. In DisCo, state synchronization is based on a SIP specific event notifications mechanism <a href="#RFC3265">[RFC3265]</a>.</p>
<p id="rfc.section.3.4.p.2">Each focus peer maintains its view of the entire conference state by subscribing to the other focus peers' XML event package for distributed conferences. This is based on the event package for conference state (cf. <a href="#RFC4575">[RFC4575]</a>). Details are defined in this document in <a href="#sec-css">Section 5</a>. Receivers of event notifications update their local conference state document to represent a valid view of current total conference state.</p>
<p id="rfc.section.3.4.p.3">The event notification package for distributed conferences enables focus peers to synchronize the entire conference state. The event package defines additional XML elements and complex types (see <a href="#sec-xmls">Section 8</a> for more details), which describe the responsibilities of any focus peer in the conference. By providing a global view each focus peer is enabled to perform additional load balancing operations and enhances the robustness against departures of focus peers.</p>
<h1 id="rfc.section.3.5">
<a href="#rfc.section.3.5">3.5.</a> <a href="#subsubsec-cdar" id="subsubsec-cdar">Call delegation</a>
</h1>
<p id="rfc.section.3.5.p.1">Call delegation (see <a href="#subsec-cd">Section 6.1</a>) is a feature used to transfer an incoming participation request to another focus peer. It can be applied to prevent overloading of focus peers.  Call delegation is realized through SIP REFER requests, which carry signaling and session description information of the caller to be transferred. This feature is achieved transparently for the transferred user agent by using a source routing mechanism at SIP dialog establishment. Descriptions of overload detection are beyond the scope of this document.</p>
<h1 id="rfc.section.3.6">
<a href="#rfc.section.3.6">3.6.</a> <a href="#subsec-u" id="subsec-u">Resilience</a>
</h1>
<p id="rfc.section.3.6.p.1">A focus peer can decide to leave the conference or may ungracefully fail. In a traditional conferencing scenario, loss of the conference controller or the media distributor would cause a complete failure of the multiparty conversation. Distributed conferencing uses the redundancy provided by multiple focus peers to reconfigure a current multiparty conversation. Participants that loose their entry point to the conference re-invite themselves via the remaining focus peers or will be re-invited by the latter. This option is based on the conference state and call delegation functions.</p>
<h1 id="rfc.section.3.7">
<a href="#rfc.section.3.7">3.7.</a> <a href="#subsubsec-tatl" id="subsubsec-tatl">Topology Awareness</a>
</h1>
<p id="rfc.section.3.7.p.1">DisCo supports the optimization of the conference topology in respect of the underlying network using topological descriptors. An extension for the RELOAD XML configuration document is defined in <a href="#subsec-cde">Section 4.8</a> to support landmarking approaches.  Each peer intending to create or participate in a distributed conference MAY determine a topological descriptor that describes its relative position in the network. Focus peers store these coordinate values in an additional data field in the DisCo-Registration data structure. This enables peers joining the conference to select the closest focus with respect to its coordinate values.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> RELOAD Usage for Distributed Conference Control</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#subsec-srdr" id="subsec-srdr">Shared Resource DisCo-Registration</a>
</h1>
<p id="rfc.section.4.1.p.1">A distributed conference is a cooperative service of several individual devices that use a common identifier. To enable a mapping from one conference identifier to multiple focus peers, this document defines the new Kind data structure DisCo-Registration. The concept of Shared Resources <a href="#I-D.knauf-p2psip-share">[I-D.knauf-p2psip-share]</a> is applied the DisCo-Registration to allow joint maintenance thereof by multiple focus peers. Thus, write permission to the resource location of a distributed conference's registration is shared by the conference creator with all authorized focus peers.</p>
<p id="rfc.section.4.1.p.2">DisCo complies with the following requirements for Shared Resources: </p>

<dl>
<dt>Separated Data Storage:</dt>
<dd style="margin-left: 8">DisCo uses the dictionary data model. Each dictionary entry is associated with a single peer: a dictionary value MUST be written (or overwritten) if and only if the store request is signed with a private key associated with a certificate whose Node-ID is equal to the dictionary key.</dd>
<dt>Access Control Policy:</dt>
<dd style="margin-left: 8">Authorized focus peers are allowed to write the DisCo-Registration using the USER-CHAIN-ACL access policy. The conference creator (and resource owner) is the only exception: he is allowed to write based on the USER-MATCH or USER-PATTERN-MATCH policy.</dd>
<dt>User_name field:</dt>
<dd style="margin-left: 8">Each DisCo-Registration data provides a user_name field, which contains the user name of the originator of the stored data.</dd>
</dl>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#subsec-kds" id="subsec-kds">Kind Data Structure</a>
</h1>
<p id="rfc.section.4.2.p.1">Each DisCo-Registration data structure stores a mapping of a conference identifier to one or multiple focus peers that cooperatively control the conference. Additionally, each DisCo-Registration provides the coordinate value, which indicates the relative network position of the focus peers. </p>
<p id="rfc.section.4.2.p.2">The data structure uses the RELOAD dictionary type. The dictionary key MUST be the Node-ID of the focus peer that is associated with the dictionary entry. This allows a focus peer to update only its own mapping. The DisCo data structure of type DisCoRegistration is constructed as follows:</p>
<div id="#rfc.figure.3"></div>
<pre> 
  struct {
    opaque resource_name&lt;0..16^-1&gt;;
    opaque user_name&lt;0..16^-1&gt;;
    opaque coordinate&lt;0..2^16-1&gt;;
    NodeId node_id;
  } DisCoRegistrationData;

  struct {
    uint16 length;
    DisCoRegistrationData data;
  } DisCoRegistration;</pre>
<p id="rfc.section.4.2.p.3">The DisCoRegistration structure is composed of the following values: </p>

<dl>
<dt>length:</dt>
<dd style="margin-left: 8">This field denotes the length of the DisCoRegistrationData.</dd>
<dt>data:</dt>
<dd style="margin-left: 8">This field denotes the distributed conference registration data.</dd>
</dl>
<p id="rfc.section.4.2.p.4">The DisCoRegistrationData structure is composed of the following values: </p>

<dl>
<dt>resource_name:</dt>
<dd style="margin-left: 8">This field contains the conference URI and meets the requirement for the USER-PATTERN-MATCH access policy defined in <a href="#I-D.knauf-p2psip-share">[I-D.knauf-p2psip-share]</a>
</dd>
<dt>user_name:</dt>
<dd style="margin-left: 8">This field contains the user name of the focus peer that stores the DisCoRegistration data. It meets the requirements for USER-CHAIN-ACL access policy defined in <a href="#I-D.knauf-p2psip-share">[I-D.knauf-p2psip-share]</a>.</dd>
<dt>coordinate:</dt>
<dd style="margin-left: 8">This field contains a topological descriptor that indicates the relative position of the peer in the network. To support different algorithms the coordinate field is represented as an opaque string.</dd>
<dt>node_id:</dt>
<dd style="margin-left: 8">This field contains the NodeId of the peer storing the DisCoRegistration and is used to contact the peer when utilizing its service as a focus.</dd>
</dl>
<p></p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#subsec-vci" id="subsec-vci">Variable Conference Identifier</a>
</h1>
<p id="rfc.section.4.3.p.1">DisCo-Registrations can be stored based on a flexible Resource Name. The variable conference identifier follows the requirements for Kinds using variable Resource Names as defined in the ShaRe Usage <a href="#I-D.knauf-p2psip-share">[I-D.knauf-p2psip-share]</a>. The 'kind'-attribute of the &lt;pattern&gt;-element used for DisCo-Registrations contains the string "DISCO-REGISTRATION".</p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> <a href="#subsec-cc" id="subsec-cc">Conference Creation</a>
</h1>
<p id="rfc.section.4.4.p.1">The registration of a distributed conference includes the storage of the following two Kinds (see <a href="#fig-conf-create-cf">Figure 4</a>). </p>

<dl>
<dt>DisCo-Registration Kind:</dt>
<dd style="margin-left: 8">contains the conference identifier and the optional coordinate value. If used, the coordinate value MAY be determined previously to the conference registration. The Resource Name and hence the Resource-ID is defined by the hash over the desired conference identifier (using the hash algorithm of the overlay).</dd>
<dt>Access List Kind:</dt>
<dd style="margin-left: 8">contains the conference participants that are allowed to register as focus peers for a conference (see <a href="#I-D.knauf-p2psip-share">[I-D.knauf-p2psip-share]</a>).  Its Resource Name/ID is equal to those of the corresponding DisCo-Registration.</dd>
</dl>
<p id="rfc.section.4.4.p.2">Preliminary to storage of DisCo-Registration and Access List Kinds the conference creator SHOULD perform a RELOAD StatReq to verify that no former conference is present. If neither a DisCo-Registration nor an associated Access List exist, the conference creator stores a valid conference identifier (see <a href="#subsec-vci">Section 4.3</a>) and an Access List referring to the DisCo-Registration Kind-ID.</p>
<p id="rfc.section.4.4.p.3">Else, if the conference creator has cached the previous Access List Kind it refreshes the root item of the existing Access-List and stores its registration as focus peer into the DisCo-Registration Kind. If no cached Kind data is present, the conference creator fetches the Access List Kind to determine the index of its root item in the Access List.</p>
<div id="#rfc.figure.4"></div>
<div id="#fig-conf-create-cf"></div>
<pre>
            
 Alice        Peer1       Overlay       PeerN     Storing Peer
-------------------------------------------------------------
   |   StatReq Res:Conf-URI                |            |
   |------------&gt;|-----------&gt;|-----------&gt;|-----------&gt;|
   |             StatAns      |            |            |
   |&lt;------------|&lt;-----------|&lt;-----------|&lt;-----------|
   |   StoreReq Res:Conf-URI Kinds:DisCo, Access-List   |
   |------------&gt;|-----------&gt;|-----------&gt;|-----------&gt;|
   |           StoreAns       |            |            |
   |&lt;------------|&lt;-----------|&lt;-----------|&lt;-----------|
   |             |            |            |            |

            </pre>
<p id="rfc.section.4.4.p.4">Optionally the conference initiator (or any active focus) MAY store an additional RELOAD SIP-Registration in the overlay <a href="#I-D.ietf-p2psip-sip">[I-D.ietf-p2psip-sip]</a> or even at a standard SIP registrar <a href="#RFC3261">[RFC3261]</a> under a URI for which it has write permission. This allows DisCo-unaware or even legacy SIP user agents to participate in the conference. Those registrations SHOULD always point to a currently active focus, who is prepared to accept legacy user agents. The user agent who initially performed the registrations is responsible for updating them appropriately. How authorization has been obtained to perform those registration is out of scope of this document.</p>
<p id="rfc.section.4.4.p.5">The lifetime of a distributed conference is not necessarily limited by the participation time of its creator. As long as the root item of an Access List to a DisCo-Registration is not expired, Authorized Peers are allowed to further provide a conferencing service and even store new focus registrations.</p>
<h1 id="rfc.section.4.5">
<a href="#rfc.section.4.5">4.5.</a> <a href="#subsec-ada" id="subsec-ada">Advertising Focus Ability</a>
</h1>
<p id="rfc.section.4.5.p.1">All participants of a distributed conference MAY potentially become a focus peer for their conference. This depends on its capacities such as sufficient processing power (CPU, Memory) for the desired media type, the quality of the network connectivity, and the conference policy. Information about network connectivity with respect to NAT or restricted firewalls can be obtained via ICE <a href="#RFC5245">[RFC5245]</a> connectivity checks. If a peer is behind a NAT, it SHOULD allow for incoming connections via AppAttach/ICE. Peers that can only accept connections with the support of TURN should not act as a focus. Nevertheless, under special circumstances it might be reasonable to locate a focus peer behind such a NAT (e.g., within a companies network infrastructure).</p>
<p id="rfc.section.4.5.p.2">If a participant is a candidate to become a focus for the conference, it stores its Node-ID and optional coordinate value into the DisCo data structure. An entry in the corresponding ACL <a href="#I-D.knauf-p2psip-share">[I-D.knauf-p2psip-share]</a> must be present to allow this peer to write the DisCo-Registration resource. By storing the mapping into the data structure a participant becomes a potential focus.</p>
<h1 id="rfc.section.4.6">
<a href="#rfc.section.4.6">4.6.</a> <a href="#subsec-dc" id="subsec-dc">Determining Coordinates</a>
</h1>
<p id="rfc.section.4.6.p.1">Each RELOAD peer within the context of a distributed conference MAY be aware of its relative position in the network topology. To constuct a topology-aware conference, the DisCo Usage provides the coordinate value within the DisCo-Registration data structure. Focus peers store their relative network position together with the announcement as conference focus. Joining peers that are able to determine their coordinates may then select a focus peer whose relative position is in its vicinity (see <a href="#subsec-pcp">Section 4.7</a>).</p>
<p id="rfc.section.4.6.p.2">Some algorithms determine topology information by measuring Round-Trip Times (RTT) towards a set of hosts serving as landmarks (e.g., <a href="#landmarks-infocomm02">[landmarks-infocomm02]</a>). To support such algorithms this document describes an extension to the RELOAD XML configuration document that allows to configure the set of landmark hosts peer must use for position estimation (see <a href="#subsec-cde">Section 4.8</a>). Once a focus peer has registered its mapping in the DisCo data structure, it also stores the according coordinates in the same mapping. These &lt;Node-ID,coordinates&gt; vectors are used by peers joining the conference to select the focus peer that is relatively closest to itself.</p>
<p id="rfc.section.4.6.p.3">Because topology-awareness can be obtained by many different approaches a concrete algorithms is out of scope of this document.</p>
<h1 id="rfc.section.4.7">
<a href="#rfc.section.4.7">4.7.</a> <a href="#subsec-pcp" id="subsec-pcp">Proximity-aware Conference Participation</a>
</h1>
<p id="rfc.section.4.7.p.1">The participation procedure to a distributed conference is composed of three operation. </p>

<ol>
<li>Resolution of the conference identifier.</li>
<li>Establishment of of transport connection.</li>
<li>SIP signaling to join a conference.</li>
</ol>
<p><a href="#fig-conf-join-cf">Figure 5</a> and the following specifications give a more detailed view on the joining procedure.</p>
<div id="#rfc.figure.5"></div>
<div id="#fig-conf-join-cf"></div>
<pre>
  Bob      Peer1     Overlay     PeerN   Resource Owner Alice
--------------------------------------------------------------
   |   FetchReq Res:Conf-URI Kind:DisCo,AccessList        |
   |---------&gt;|---------&gt;|---------&gt;|---------&gt;|          |
   |          |FetchAns  |          |          |          |
   |&lt;---------|&lt;---------|&lt;---------|&lt;---------|          |
   |          |          |          |          |          |
   |  Bob calculates Alice as closest Focus    |          |
   |          |          |          |          |          |
   |          |AppAttach  application:5060     |          |
   |---------&gt;|---------&gt;|---------&gt;|---------&gt;|---------&gt;|
   |          |AppAttach  application:5060     |          |
   |&lt;---------|&lt;---------|&lt;---------|&lt;---------|&lt;---------|
   |          |          |          |          |          |
   |&lt;-------------------ICE Checks-----------------------&gt;|
   |          |          |          |          |          |
   |          |         INVITE sip:Alice       |          |
   |~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&gt;|
   |          |         200 OK      |          |          |
   |&lt;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~|
   |          |         ACK         |          |          |
   |~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&gt;|
   |          |          |          |          |          |</pre>
<p></p>

<ol>
<li>The joining peer MAY determine its own coordinate value (if used).</li>
<li>The joining peer sends a FetchReq message for the DisCo and Access List Kind to the Resource-ID that corresponds to the hash over the conference URI using the overlay's hash-function. The FetchReq SHOULD NOT include any specific dictionary keys or array ranges in order to receive all focus peers of the conference. With the Access List data, the joining peer is able to verify which DisCo-Registrations are stored by authorized focus peers (see <a href="#I-D.knauf-p2psip-share">[I-D.knauf-p2psip-share]</a>).</li>
<li>Using the retrieved coordinates values of the DisCo-Registrations, the joining peer MAY calculate which of the focus peers is the relatively closest to itself.</li>
<li>The joining peer then establishes a transport using RELOADs AppAttach, respectively, ICE procedures to create a transport to the chosen focus peer. </li>
<li>Finally, the established transport is used to create a SIP dialog from the joining peer to the focus peers.</li>
</ol>
<p id="rfc.section.4.7.p.4">The SIP INVITE request MAY contain the joining peer's topological descriptor as a URI-parameter called 'coord' in the contact-header in base64 encoded form <a href="#RFC4648">[RFC4648]</a>. An example contact URI is &#8220;sip:alice@example.com;coord=PEknbSBhIHRvcG9sb2dpY2FsIGRlc2NyaXB0b3I+&#8221;.  When the called focus is full and needs to delegate the call it uses the contents of the 'coord'-parameter. It determines the next available focus closest to the calling peer (<a href="#subsec-dc">Section 4.6</a>) using the received descriptor and the other focuses' descriptors from the conference state synchronization document and delegates the call accordingly (see <a href="#subsec-cd">Section 6.1</a>).</p>
<p id="rfc.section.4.7.p.5">A conference focus MAY allow the joining peer to also become a focus (depending on the conference policy see <a href="#subsec-ls">Section 6.2</a>). Therefore, it stores a new Access List item that delegates write permission for the DisCo-Registration to the new participant. It sets the 'from_user' field in the Access List Kind to its own user name and sets the 'to_user' field to the user name of the joining peer. If no other conference policy is defined, the focus peer MAY set the allow_delegation flag to true. For further details about the trust delegation using the Access List Kind see <a href="#I-D.knauf-p2psip-share">[I-D.knauf-p2psip-share]</a>.</p>
<h1 id="rfc.section.4.8">
<a href="#rfc.section.4.8">4.8.</a> <a href="#subsec-cde" id="subsec-cde">Configuration Document Extension</a>
</h1>
<p id="rfc.section.4.8.p.1">This section defines an additional parameter for the &lt;configuration&gt; element that extends the RELOAD XML configuration document. The proposed &lt;landmarks&gt; element allows RELOAD provider to publish a set of accessible and reliable hosts that SHOULD be used if RELOAD peers use landmarking algorithms to determine relative position in the network topology.</p>
<p id="rfc.section.4.8.p.2">The &lt;landmarks&gt; element serves as container for the &lt;landmark-host&gt; sub-elements, each representing a single host that serves as a landmark. The &lt;landmark-host&gt; uses the following attributes:</p>

<dl>
<dt>address:</dt>
<dd style="margin-left: 8">The IP address (IPv4 or IPv6) of the landmark host.</dd>
<dt>port:</dt>
<dd style="margin-left: 8">The port on which the landmark host responds for distance estimation.</dd>
</dl>

<p> More than one landmark hosts SHOULD be present in the configuration document.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#sec-css" id="sec-css">Conference State Synchronization</a>
</h1>
<p id="rfc.section.5.p.1">The global knowledge about signaling and media relations among the conference participants and focus peers defines the global state of a distributed conference. It is composed of the union of every local state at the focus peers. To enable focus peers to provide conference control operations that modify and/or require the global state of a conference, this document defines a mechanism for inter-focus state synchronization.  It is based on mutual subscriptions for an Event Package for Distributed Conferences and allows to preserve a coherent knowledge of the global conference state. This XML based event package named 'distributed-conference' MUST be supported by each RELOAD peer that is registered with a DisCo-Registration. Participants of a distributed conference MAY support it. To provide backward compatibility to conference members that do not support the distributed-conference event package, this document defines a translation to the Event Package for Conference State <a href="#RFC4575">[RFC4575]</a>.</p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#subsec-epo" id="subsec-epo">Event Package Overview</a>
</h1>
<p id="rfc.section.5.1.p.1">The 'distributed-conference' event package is designed to convey information about roles and relations of the conference participants.  Conference controllers obtain the global state of the conference and use this information for load balancing or conference restructuring mechanisms in case of a focus failure. Figure <a href="#fig-dcepo">Figure 6</a> gives a general overview of the document hierarchy.</p>
<div id="#rfc.figure.6"></div>
<div id="#fig-dcepo"></div>
<pre>
distributed-conference 
  |
  |-- version-vector
  |    |-- version
  |    |-- version
  |
  |-- conference-description 
  |
  |-- focus
  |    |-- focus-state    
  |    |    |-- user-count
  |    |    |-- coordinate
  |    |    |-- maximum-user-count
  |    |    |-- active
  |    |    |-- locked
  |    |    |-- conf-uris
  |    |    |-- available-media
  |    |
  |    |-- users
  |    |    |-- user
  |    |    |    |-- endpoint
  |    |    |    |    |-- media  
  |    |    |    |    |-- call-info 
  |    |
  |    |-- relations
  |    |    |-- relation  
  |-- focus
  |    |-- ...  
          </pre>
<p id="rfc.section.5.1.p.2">The document structure is designed to allow concurrent change events at several focus peers. To prevent race conditions each focus peer has exclusive writing permission to the 'focus' sub element that describes itself. It is achieved by a unique mapping from a focus peer to its XML element using the 'Element Keys' mechanisms for partial notification <a href="#RFC4575">[RFC4575]</a>(sections 4.4-5.). A focus peer is only allowed to update or change that &lt;focus&gt; sub element, whose 'entity' Element Key contains its RELOAD user name.  This restriction also applies to the child elements of the 'version-vector' element.  Each 'version' number belongs to a specific focus peer maintaining the version number.</p>
<p id="rfc.section.5.1.p.3">The local state of a focus peer is described within a 'focus' element. It provides general information about a focus peer and its signaling and media relations to participants and focus peers. The Conference participants are aggregated within 'users' elements, respectively, 'user' sub elements.</p>
<p id="rfc.section.5.1.p.4">General information about the conference as a whole, is provided within a 'conference-description' element. In contrast to the 'focus' and 'version-vector' elements, conference description is not meant for concurrent updating. Instead, it provides static conference descriptions that rarely change during a multiparty session.</p>
<p id="rfc.section.5.1.p.5">More detailed descriptions about the event package and its elements are provided in the following sections. The complete XML schema definition is given in <a href="#sec-xmls">Section 8</a>.</p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#subsec-xml-dc" id="subsec-xml-dc">&lt;distributed-conference&gt;</a>
</h1>
<p id="rfc.section.5.2.p.1">The &lt;distributed-conference&gt; element is the root of a distributed conference XML document. It uses the following attributes: </p>

<dl>
<dt>entity:</dt>
<dd style="margin-left: 8">This attribute contains the conference URI that identifies the distributed conference. A SIP SUBSCRIBE request addressed to this URI initiates an subscribe/notify relation between participants and their related focus peer.</dd>
<dt>state:</dt>
<dd style="margin-left: 8">This attribute indicates whether the content of a distributed conference document is a 'full', 'partial' or 'deleted' information. It is in accordance with <a href="#RFC4575">[RFC4575]</a> to enable the partial notification mechanism.</dd>
</dl>
<p id="rfc.section.5.2.p.2">The &lt;distributed-conference&gt; child elements are &lt;vector-version&gt;, &lt;conference-description&gt; and the &lt;focus&gt; elements. An event notification of state 'full' MUST include all these elements. An event notification of state 'partial' MUST contain at least &lt;version-vector&gt; and its sub elements.</p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> <a href="#subsec-xml-vvv" id="subsec-xml-vvv">&lt;version-vector&gt;/&lt;version&gt;</a>
</h1>
<p id="rfc.section.5.3.p.1">The Event Package for Distributed Conferences uses the &lt;version-vector&gt; and its &lt;version&gt; sub elements to enable a coherent versioning scheme. It is based on vector clocks as defined in <a href="#timestamps-acsc88">[timestamps-acsc88]</a>. Each &lt;version&gt; element contains a unsigned integer that describes the state of a specific focus peer and contains the following attributes: </p>

<dl>
<dt>entity:</dt>
<dd style="margin-left: 8">This attribute contains the user name of the focus peer whose local version number is described by this element.</dd>
<dt>node-id:</dt>
<dd style="margin-left: 8">This attribute contains the Node-ID of the focus peer.</dd>
</dl>
<p id="rfc.section.5.3.p.2">Whenever the local status of a focus peer changes (e.g. a new participant arrived) the version number of the corresponding &lt;version&gt; element MUST be incremented by one. Each change in the local state also triggers a new event notification containing the entire &lt;version-vector&gt; and the changes contained in a &lt;focus&gt; element.</p>
<p id="rfc.section.5.3.p.3">The recipient of a change event needs to update it local XML document. If a received &lt;version&gt; number is higher that the local, it updates the &lt;version&gt; element and its associated &lt;focus&gt; element with the retrieved elements. All other elements remain constant.</p>
<p id="rfc.section.5.3.p.4">If the length or contents of the retrieved &lt;version-vector&gt; is different to the local copy it indicates a incoherent knowledge about the entire conference state. If the retrieved &lt;version-vector&gt; contains any unknown focus peers and any local version numbers for the known focus peers is lower, the receiver SHOULD request a 'full' XML notification.</p>
<p id="rfc.section.5.3.p.5">If any local &lt;version&gt; number is retarded more than one, the receiver SHOULD request a 'full' event notification from the sender.  The full state notification updates all &lt;focus&gt; elements whose corresponding &lt;version&gt; element is out of date.</p>
<h1 id="rfc.section.5.4">
<a href="#rfc.section.5.4">5.4.</a> <a href="#subsec-xml-cd" id="subsec-xml-cd">&lt;conference-description&gt;</a>
</h1>
<p id="rfc.section.5.4.p.1">The &lt;conference-description&gt; element provides general information and links to auxiliary services for the conference. The following sub elements provide human-readable text descriptions about the conference: </p>

<dl>
<dt>&lt;display-text&gt;:</dt>
<dd style="margin-left: 8">Contains a short textual description about the conference</dd>
<dt>&lt;subject&gt;:</dt>
<dd style="margin-left: 8">Contains the subject of the conference</dd>
<dt>&lt;free-text&gt;:</dt>
<dd style="margin-left: 8">Contains a longer textual description about the conference</dd>
<dt>&lt;keywords&gt;:</dt>
<dd style="margin-left: 8">Contains a list of keywords that match the conference topic. The XML schema definition and semantic is imported from the 'conference-info' event package <a href="#RFC4575">[RFC4575]</a>.</dd>
</dl>
<p id="rfc.section.5.4.p.2">The &lt;service-uris&gt; sub element enables focus peers to advertise auxiliary services for the conference. The XML schema definition and semantic is imported from the 'conference-info' event package <a href="#RFC4575">[RFC4575]</a>.</p>
<p id="rfc.section.5.4.p.3">The &lt;conference-description&gt; element uses the 'state' Element Key to enable the partial notification mechanism.</p>
<h1 id="rfc.section.5.5">
<a href="#rfc.section.5.5">5.5.</a> <a href="#subsec-xml-f" id="subsec-xml-f">&lt;focus&gt;</a>
</h1>
<p id="rfc.section.5.5.p.1">Each &lt;focus&gt; element describes a focus peer actively controlling the conference.  It provides general information about a focus peer (e.g., display-text, languages, etc.), contains conference specific information about the state of a focus peer (user-count, available media types, etc.) and announces signaling and media information about the maintained participants. Additionally, it describes signaling or media relations to further focus peers.</p>
<p id="rfc.section.5.5.p.2">The &lt;focus&gt; element uses the following attributes: </p>

<dl>
<dt>entity:</dt>
<dd style="margin-left: 8">This attribute contains the user name of the RELOAD peer acting as focus peer. It uniquely identifies the focus peer that is allowed to update or change all sub elements of &lt;focus&gt;. All other focus peers SHOULD NOT update or change sub elements of this &lt;focus&gt; element. A SUBSCRIBE request addressed to the user name initiates a conference state synchronization with the focus peer.</dd>
<dt>Node-ID</dt>
<dd style="margin-left: 8">This attributed contains the Node-ID of the peer acting as conference focus</dd>
<dt>state:</dt>
<dd style="margin-left: 8">In accordance to <a href="#RFC4575">[RFC4575]</a>, this attribute indicates whether the content of the &lt;focus&gt; element is a 'full', 'partial' or 'deleted' information. A 'partial' notification contains at maximum a single &lt;focus&gt; element.</dd>
</dl>
<p id="rfc.section.5.5.p.3">The following sub elements of &lt;focus&gt; provide general information about a focus peer: <a href="#RFC4575">[RFC4575]</a> </p>

<dl>
<dt>&lt;display-text&gt;:</dt>
<dd style="margin-left: 8">Contains a short text description of the user acting as focus peer.</dd>
<dt>&lt;associated-aors&gt;:</dt>
<dd style="margin-left: 8">This element contains additional URIs that are associated with this user.</dd>
<dt>&lt;roles:&gt;</dt>
<dd style="margin-left: 8">This element MAY contain human-readable text descriptions about the roles of the user in the conference.</dd>
<dt>&lt;languages&gt;:</dt>
<dd style="margin-left: 8">This element contains a list of tokens, each describing a language understood by the user.</dd>
</dl>

<p> The XML schema definition and semantic for &lt;associated-aors&gt;, &lt;roles&gt; and &lt;languages&gt; are imported from the 'conference-info' event package </p>
<p id="rfc.section.5.5.p.4">Following, a detailed description of the remaining sub elements.</p>
<h1 id="rfc.section.5.5.1">
<a href="#rfc.section.5.5.1">5.5.1.</a> <a href="#subsubsec-xml-fs" id="subsubsec-xml-fs">&lt;focus-state&gt;</a>
</h1>
<p id="rfc.section.5.5.1.p.1">The &lt;focus-state&gt; element aggregates a set of conference specific information about the RELOAD user acting as focus peer. The following attribute is defined for the &lt;focus-state&gt; element: </p>

<dl>
<dt>status:</dt>
<dd style="margin-left: 8">This attribute indicates whether the content of the &lt;focus-state&gt; element is a 'full', 'partial' or 'deleted' information.</dd>
</dl>
<p id="rfc.section.5.5.1.p.2">The &lt;focus-state&gt; element has the following sub elements: </p>

<dl>
<dt>&lt;user-count&gt;:</dt>
<dd style="margin-left: 8">This element contains the number of participants that are connected to the conference via this focus peer at a certain moment.</dd>
<dt>&lt;coordinate&gt;</dt>
<dd style="margin-left: 8">This element contains the coordinate value <a href="#subsec-kds">Section 4.2</a> of the focus peer</dd>
<dt>&lt;maximum-user-count&gt;:</dt>
<dd style="margin-left: 8">This number indicates a threshold of participants a focus peer is able to serve. This value might change during a conference, depending on the focus peers current load.</dd>
<dt>&lt;conf-uris&gt;:</dt>
<dd style="margin-left: 8">This element MAY contain other conference URIs in order to access the conference via different signaling means. The XML schema definition and semantic is imported from <a href="#RFC4575">[RFC4575]</a>.</dd>
<dt>&lt;available-media&gt;:</dt>
<dd style="margin-left: 8">This element is imports the &lt;conference-media-type&gt; type XML scheme definitions from <a href="#RFC4575">[RFC4575]</a>. It allows a focus peer to list its available media streams.</dd>
<dt>&lt;active&gt;:</dt>
<dd style="margin-left: 8">This boolean element indicates whether a focus peer is currently active. Conference participation requests or a call delegation request SHOULD succeed.</dd>
<dt>&lt;locked&gt;:</dt>
<dd style="margin-left: 8">In contrast to &lt;active&gt;, this element indicates that a focus peer is not willing to accept anymore participation or call delegation request.</dd>
</dl>
<h1 id="rfc.section.5.5.2">
<a href="#rfc.section.5.5.2">5.5.2.</a> <a href="#subsubsec-xml-uu" id="subsubsec-xml-uu">&lt;users&gt;/&lt;user&gt;</a>
</h1>
<p id="rfc.section.5.5.2.p.1">The &lt;users&gt;, respectively, each &lt;user&gt; element describes a single participant that is maintained by the focus peer described by the parent &lt;focus&gt; element. The &lt;users&gt; element XML schema definition and its semantic is imported from the 'conference-info' event package <a href="#RFC4575">[RFC4575]</a>.</p>
<h1 id="rfc.section.5.5.3">
<a href="#rfc.section.5.5.3">5.5.3.</a> <a href="#subsubsec-xml-rr" id="subsubsec-xml-rr">&lt;relations&gt;/&lt;relation&gt;</a>
</h1>
<p id="rfc.section.5.5.3.p.1">The &lt;relations&gt; element serves as container for &lt;relation&gt; elements, each describing a specific connection to another focus peer. The parent element &lt;relations&gt; uses the 'state' attribute to enable the partial notification mechanism. For the &lt;relation&gt; element the following attributes are defined: </p>

<dl>
<dt>entity:</dt>
<dd style="margin-left: 8">This attribute contains the user name of the remote focus.</dd>
<dt>node-id</dt>
<dd style="margin-left: 8">This attribute contains the Node-ID of the remote focus peer.</dd>
</dl>
<p id="rfc.section.5.5.3.p.2">The content of each &lt;relation&gt; is a comma separated string that describes the tuple &lt;CONNECTION-TYPE:IDENTIFIER&gt;. The CONNECTION-TYPE is a string token describing the type of connection (e.g. media, signaling, etc.) and the IDENTIFIER contains a variable connection identifier. It is a generic method to announce any kind of connection to a remote focus. This specification defines following tuples: </p>

<dl>
<dt>media:&lt;label&gt;:</dt>
<dd style="margin-left: 8">This tuple identifies a single media stream. The 'label' variable contains the SDP "label" attribute. (see <a href="#RFC4574">[RFC4574]</a>).</dd>
<dt>sync:&lt;call-id&gt;:</dt>
<dd style="margin-left: 8">This tuple indicates a subscription for the Event Package for Distributed Conferences.  The 'call-id' variable contains the call-id of the SIP subscription dialog.</dd>
</dl>
<h1 id="rfc.section.5.6">
<a href="#rfc.section.5.6">5.6.</a> <a href="#subsec-dce" id="subsec-dce">Distribution of Change Events</a>
</h1>
<p id="rfc.section.5.6.p.1">Each focus peer in a distributed conference must be able to retrieve all change events from all other focus peers. A simple approach would be to inter-connect each focus with all other focus in a full meshed topology. To avoid a full mesh, this document describes a 'mutual' subscription scheme that constructs a spanning tree topology among the focus peers.</p>
<p id="rfc.section.5.6.p.2">A conference participant that becomes a focus peer MUST send a SIP SUBSCRIBE to request the Event Package for Distributed Conferences to its own focus peer. The subscription request is addressed to user name of the active focus peer. The latter interprets this subscription as a request for conference state synchronization. The corresponding NOTIFY message contains a 'full' distributed-conference state XML document (see section Section <a href="#subsec-epo">Section 5.1</a>).</p>
<p id="rfc.section.5.6.p.3">The subscribed focus peer in turn subscribes the upcoming focus peer for the distributed conference event package. The corresponding NOTIFY message carries a 'partial' conference state XML document. It contains the received &lt;version-vector&gt; including a new &lt;version&gt; element for itself and a new &lt;focus&gt; element that describes its local state (see <a href="#subsec-xml-f">Section 5.5</a>).</p>
<p id="rfc.section.5.6.p.4">Resulting by this subscription scheme, each focus peer has at least one subscription to obtain updates for the conference state and is a notifier for change events originated itself. In a incrementally increasing conference, the 1st and 2nd focus peer have a mutual subscription for conference change events. A 3rd focus could have a mutual subscription with the 1st focus, a 4th focus to the 2nd focus and so forth. The result is a spanning tree topology among the focus peers in which each focus peer is a possible root for distribution tree for conference change events.</p>
<p id="rfc.section.5.6.p.5">However, the fact that event notifications need to traverse one or more intermediate focus peers until conference-wide delivery, demands a forwarding mechanism for change events. On receiving a change event, a notified focus validates based on the &lt;version-vector&gt; whether the incoming state event is not a duplicate to previews notifications.  If its not a duplicate, the received change event triggers a new event notification at the receiver of the change event. It notifies all its subscribers with excepting the sender of the event notification. In this way, the change event will be 'flooded' among the focus peer of a conference.</p>
<h1 id="rfc.section.5.7">
<a href="#rfc.section.5.7">5.7.</a> <a href="#subsec-ttcep" id="subsec-ttcep">Translation to Conference-Info Event Package</a>
</h1>
<p id="rfc.section.5.7.p.1">The Event Package for Distributed Conferences imports several XML element definitions of the Event Package for Conference State <a href="#RFC4575">[RFC4575]</a>. This is caused by two reasons. First, the semantic of these elements are fitting the demands to describe the global state of a distributed conference and, second, it facilitates a re-translation to <a href="#RFC4575">[RFC4575]</a> to enable a backward compatibility to DisCo-unaware clients. Therefore, each focus peer MAY provide a separate <a href="#RFC4575">[RFC4575]</a> conform event notification service to its connected participants.</p>
<p id="rfc.section.5.7.p.2">The following sections describe the translation to the Event Package for Conference State <a href="#RFC4575">[RFC4575]</a> by defining translation rules for the root element and its direct sub elements. For a better understanding, the following sections use a notation ci.&lt;ELEMENT&gt; to refer to a sub element of the conference-info element, and disco.&lt;ELEMENT&gt; to refer to an element of the distributed-conference event package.</p>
<h1 id="rfc.section.5.7.1">
<a href="#rfc.section.5.7.1">5.7.1.</a> <a href="#subsubsec-xml-ci" id="subsubsec-xml-ci">&lt;conference-info&gt;</a>
</h1>
<p id="rfc.section.5.7.1.p.1">The root element of Event Package for Conference State uses the attributes 'entity', 'state' and 'version' and is the counterpart of the &lt;distributed-conference&gt; root element in the DisCo Event Package. The former two attributes 'entity' and 'state' are equal in both root elements and can be seamlessly translated.</p>
<p id="rfc.section.5.7.1.p.2">According to <a href="#RFC4575">[RFC4575]</a>, the 'version' attribute SHOULD be incremented by one at any time a new notification being sent to a subscriber. Hence, in DisCo the 'version' attributed increments with each change event that originated by focus peer and each reception of a change events of remote focus peer.</p>
<h1 id="rfc.section.5.7.2">
<a href="#rfc.section.5.7.2">5.7.2.</a> <a href="#subsubsec-xml-cicd" id="subsubsec-xml-cicd">&lt;conference-description&gt;</a>
</h1>
<p id="rfc.section.5.7.2.p.1">The &lt;conference-description&gt; element exists in both event packages, conference-info and distributed-conference. Thus, the following elements are seamlessly translatable: &lt;keywords&gt;, &lt;display-text&gt;, &lt;subject&gt;, &lt;free-text&gt; and &lt;service-uris&gt;.</p>
<p id="rfc.section.5.7.2.p.2">The sub elements &lt;conf-uris&gt;, &lt;maximum-user-count&gt; and &lt;available-media&gt; in conference-info have there counterparts below the \focus\focus-state element of the distributed-conference event package. Each describes a local state of a focus peer in the conference. Hence, the intersection of every disco.&lt;conf-uris&gt;, disco.&lt;available-media&gt; and the sum over each disco.&lt;maximum-user-count&gt; element of each disco.&lt;focus&gt; element in distributed-conference, specifies the content of the corresponding conference-info elements.</p>
<h1 id="rfc.section.5.7.3">
<a href="#rfc.section.5.7.3">5.7.3.</a> <a href="#subsubsec-xml-hi" id="subsubsec-xml-hi">&lt;host-info&gt;</a>
</h1>
<p id="rfc.section.5.7.3.p.1">According to <a href="#RFC4575">[RFC4575]</a> the ci.&lt;host-info&gt; element contains information about the entity hosting the conference. For participants in a distributed conference, the hosting entity is their focus peer. Thus, the ci.&lt;host-info&gt; element contains information about a focus peer.</p>
<h1 id="rfc.section.5.7.4">
<a href="#rfc.section.5.7.4">5.7.4.</a> <a href="#subsubsec-xml-cs" id="subsubsec-xml-cs">&lt;conference-state&gt;</a>
</h1>
<p id="rfc.section.5.7.4.p.1">The ci.&lt;conference-state&gt; element allows subscribers obtain information about overall state of a conference. Its sub elements ci.&lt;user-count&gt;, ci.&lt;active&gt; and ci.&lt;locked&gt; are reused as sub elements of \focus\focus-state to describe the local state of a focus peer in a distributed conference. The translation rules from the distributed-conference to the conference-info event package are the following: </p>

<dl>
<dt>&lt;user-count&gt;:</dt>
<dd style="margin-left: 8">The sum over each value of the disco.&lt;user-count&gt; element defines the corresponding ci.&lt;user-count&gt;.</dd>
<dt>&lt;active&gt;:</dt>
<dd style="margin-left: 8">The boolean ci.&lt;active&gt; element is the logical concatenation over all disco.&lt;active&gt; elements by an OR-operator.</dd>
<dt>&lt;locked&gt;</dt>
<dd style="margin-left: 8">The boolean ci.&lt;locked&gt; element is the logical concatenation over all disco.&lt;locked&gt; elements by an AND-operator.</dd>
</dl>
<h1 id="rfc.section.5.7.5">
<a href="#rfc.section.5.7.5">5.7.5.</a> <a href="#subsubsec-xml-ciuu" id="subsubsec-xml-ciuu">&lt;users&gt;/&lt;user&gt;</a>
</h1>
<p id="rfc.section.5.7.5.p.1">The distributed-conference event package imports the definitions of the ci.&lt;users&gt; and ci.&lt;user&gt; elements under a parent disco.&lt;focus&gt; element for each focus peer in a conference.  Thus, the aggregation over all disco.&lt;users&gt; elements specifies the content of the corresponding ci.&lt;users&gt; element.</p>
<h1 id="rfc.section.5.7.6">
<a href="#rfc.section.5.7.6">5.7.6.</a> <a href="#subsubsec-xml-sbrsbv" id="subsubsec-xml-sbrsbv">&lt;sidebars-by-ref&gt;/&lt;sidebars-by-value&gt;</a>
</h1>
<p id="rfc.section.5.7.6.p.1">In accordance to <a href="#RFC4575">[RFC4575]</a>, if a participant is connected to a sidebar, its responsible focus peer creates a new &lt;user&gt; by referencing to the corresponding sidebar conference.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#sec-dcco" id="sec-dcco">Distributed Conference Control with SIP</a>
</h1>
<p id="rfc.section.6.p.1">Distributed conference control with SIP defined in this document refers to multiparty conversation in a tightly coupled model that is controlled by several independent entities. It enables a resilient conferencing service for P2P scenarios and provides mechanisms for load-balancing among the focus peers. This section describes additional control operations for distributed conferences with SIP.</p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> <a href="#subsec-cd" id="subsec-cd">Call delegation</a>
</h1>
<p id="rfc.section.6.1.p.1">Distributed conference control enables load-balancing by a mechanism for call delegation. Call delegations are performed by focus peers that are running out of capacities to serve more participants.  Incoming participation requests are then transferred to other established focus peer or conference participants that are registered as potential focus peers in the overlay. Call delegations use SIP REFER requests <a href="#RFC3515">[RFC3515]</a> that contain additional session information and are achieved transparently to the transferred party.</p>
<p id="rfc.section.6.1.p.2">A focus peer initiates a call delegation by sending SIP REFER request containing the URI of the participant in the Refer-To header field. Additionally, the focus peer appends the following parameter to the URI of the participant: </p>

<dl>
<dt>call-id:</dt>
<dd style="margin-left: 8">Contains the call-ID of the initial SIP dialog between the referred participant and the referring focus peer.</dd>
<dt>sess-id:</dt>
<dd style="margin-left: 8">Contains the 'session identifier' value of the original SDP 'o=' field of the original offer/answer process between referred participant and referring focus peer.</dd>
</dl>

<p> If the recipient accepts the REFER request, it generates a re-INVITE towards the referred party and sets the SIP call-id header and the SDP 'session-identifier' field in the SDP offer, according to the URI parameter values of the initial REFER request. The From header field and contact header are set to the conference URI with setting the 'isfocus' tag to contact header. This identifies the peer as a focus to the conference and identifies this re-INVITE as a request of the SIP dialog between the party and the conference. To ensure that further signaling messages will be routed correctly, the new focus adds a Record-Route header field that contains its contact information (URI, IP-address,..).</p>
<p id="rfc.section.6.1.p.3">An example call flow for call delegation is shown in <a href="#fig-sip-refer-inv-cf">Figure 7</a>.</p>
<div id="#rfc.figure.7"></div>
<div id="#fig-sip-refer-inv-cf"></div>
<pre>
Participant    Referring Focus                         Remote Focus
--------------------------------------------------------------------
     |    Dialog    |                                     |
     |&lt;============&gt;|                                     |
     |              |                                     |
     |  Delegating a participant to remote focus          |
     |              |                                     |
     |              |(1) REFER refer-to:&lt;uri&gt;?call-id=123&amp;sess-id=456
     |              |------------------------------------&gt;|
     |              |(2) 200 OK                           |
     |              |&lt;------------------------------------|
     |              |(3) Notify: pending                  |
     |              |&lt;------------------------------------|
     |              |(4) 200 OK                           |
     |              |------------------------------------&gt;|
     |              |                                     |
     |  Remote focus adds RR-header that carries its URI  |
     |              |                                     |
     |  (5) INVITE sip:&lt;uri&gt; record-route:&lt;rem.focus&gt;     |
     |&lt;---------------------------------------------------|
     |  (6) 200 OK  |                                     |
     |---------------------------------------------------&gt;|
     |  (7) ACK     |                                     |
     |&lt;---------------------------------------------------|
     |              |(8) Notify: active                   |
     |              |&lt;------------------------------------|
     |              |(9) 200 OK                           |
     |              |------------------------------------&gt;|
</pre>
<p id="rfc.section.6.1.p.4">Note, subscriptions for the event packages 'distributed-conference' and 'conference-info' are in scope of a specific focus peer and its connected participants. Hence, after a successful call delegation, the referring focus peer SHOULD terminate any subscription to the referred participant. The notifier SHOULD include a reason parameter "deactivated" to indicate a migration of the subscription as defined in <a href="#RFC3265">[RFC3265]</a>. The new SUBSCRIBE request by the party MUST be sent via the SIP dialog to the conference.</p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> <a href="#subsec-ls" id="subsec-ls">Conference Access</a>
</h1>
<p id="rfc.section.6.2.p.1">A conference policy defines who is allowed to participate in a multimedia conference. In many cases, a group conversation can be an open discussion free to participate, while in other occasions a closed privacy of a multiparty session is demanded. In distributed conferences, it is also an issue which of the conference participants is allowed to become a controller of the multiparty session.</p>
<p id="rfc.section.6.2.p.2">Thus it must be decided whether: </p>

<ul>
<li>A peer is allowed to participate in a conference</li>
<li>A peer is allowed to become a focus of the conference</li>
</ul>

<p> Standard SIP authentication mechanisms can be used to authenticate and accordingly authorize joining participants.</p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> <a href="#subsec-mnad" id="subsec-mnad">Media Negotiation and Distribution</a>
</h1>
<p id="rfc.section.6.3.p.1">This section describes a basic scheme for media negotiation and distribution, which is done in an ad-hoc fashion. Each focus peer forwards all media streams it receives from the conference to all connected peers it is responsible for and similarly all streams from its peers to its responsible focus. This results in the media stream naturally following the SIP signalling paths. Implementations MAY choose to use a more sophisticated scheme, e.g. employing cross connections between different sub-trees of the conference, but MUST take measures to prevent loops in media routing.</p>
<p id="rfc.section.6.3.p.2">When a new peer has been attached to a focus, new media steams may be available to the focus, which need to be forwarded to the conference. To accomplish this, the new media streams need to be signalled to the other participants. This is usually done by sending a SIP re-INVITE and modifying the media sessions, adding the new streams to the SDP. This renegotiation can be costly since it needs to be propagated through the whole conference. Also, distributing all media streams separately to all participants can be quite bandwidth intensive. Both problems can partially be mitigated by focus peers performing mixing of media streams, thus trading bandwidth and signalling overheads for computational load on focus peers.</p>
<h1 id="rfc.section.6.3.1">
<a href="#rfc.section.6.3.1">6.3.1.</a> <a href="#subsec-oa" id="subsec-oa">Offer/Answer</a>
</h1>
<p id="rfc.section.6.3.1.p.1">A peer joining a conference negotiates media types and media parameters with its designated focus using the standard SDP offer/ answer protocol <a href="#RFC3264">[RFC3264]</a>. The focus SHOULD offer all existing media streams used in the conference.</p>
<p id="rfc.section.6.3.1.p.2">A new participant does not necessarily know about all media streams present in a conference beforehand, and thus some of the media streams might not be included in the initial SDP offer sent by the joining peer. An SDP answer sent by the corresponding focus MUST NOT contain any media streams not matching an offer (cf. <a href="#RFC3264">[RFC3264]</a> Section 6). A joining peer which is aware of the distributed nature of the conference, SHOULD NOT send an SDP offer in the initial INVITE message, but instead send an empty INVITE to which the focus replies with an OK, containing the offer.  This prevents the need for a second offer/answer-dialog to modify the session. But for compatibility the normal behavior with the INVITE containing the offer MUST be supported.</p>
<p id="rfc.section.6.3.1.p.3">For new media streams (e.g. those sent by the new participant) the focus SHOULD only offer media types and codecs which are already used in the conference and which will probably be accepted when forwarded to neighboring peers, unless the focus is prepared to do transcoding and/or mixing of the received streams.</p>
<p id="rfc.section.6.3.1.p.4">A focus has two options when distributing media streams from a new participant to the conference. The focus can either mix the new streams into his own, thus averting the need to modify the already established media sessions with neighboring peers or in case the focus is not willing or able to do mixing of the media streams, he SHOULD modify the media sessions with all attached peers by sending a re-INVITE, adding the new media streams coming from the newly joined participant to the SDP. This SHOULD subsequently be done by all other focus peers upon receiving the new stream, resulting in the stream being distributed across the conference.</p>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> <a href="#subsec-rac" id="subsec-rac">Restructuring a Conference</a>
</h1>
<p id="rfc.section.6.4.p.1">Distributed conference control provides the possibility to delegate calls to remote focus peers. This feature is used to restructure a conference in case of departure of a focus peer. Following, this section presents restructuring schemes for graceful and unexpected leaves of conference focus peers.</p>
<h1 id="rfc.section.6.4.1">
<a href="#rfc.section.6.4.1">6.4.1.</a> <a href="#subsubsec-ogl" id="subsubsec-ogl">On Graceful Leave</a>
</h1>
<p id="rfc.section.6.4.1.p.1">In a graceful case, the leaving focus peer (LP) accomplishes the following procedure: </p>

<ul>
<li>LP deletes its mapping in the DisCo-Registration by storing the "non-existing" value as described in the RELOAD base document <a href="#I-D.ietf-p2psip-base">[I-D.ietf-p2psip-base]</a>.  Afterwards, it fetches the lasted version of the DisCo-Registration to obtain all potential focus peers.</li>
<li>LP calculates for all its participants the closest focus among all active and potential focus peer using the algorithm described in <a href="#subsec-dc">Section 4.6</a>. LP then delegates all participants to those focus peers.</li>
<li>LP then announces its leave by sending a NOTIFY to all its subscribers for the extended conference event package, setting its &lt;focus&gt; state to 'deleted'. Thereafter, it ends its own SIP conference dialog by sending by to its related focus peer.</li>
</ul>
<p id="rfc.section.6.4.1.p.2">Since the state synchronization topology in a distributed conference is commonly arranged in a spanning tree, a leave of a focus peer effects a gab in the tree structure. Those focus peers which had the leaving focus peer as their parent, are supposed to reconnect to the synchronization graph by subscribing the parent focus of the leaving peer.</p>
<h1 id="rfc.section.6.4.2">
<a href="#rfc.section.6.4.2">6.4.2.</a> <a href="#subsubsec-oul" id="subsubsec-oul">On Unexpected Leave</a>
</h1>
<p id="rfc.section.6.4.2.p.1">If an unexpected leave is detected by a participant (e.g. missing signaling and/or media packets) it MUST repeat the joining procedure as described in <a href="#subsec-pcp">Section 4.7</a>.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> DisCo Kind Definition</h1>
<p id="rfc.section.7.p.1">This section formally defines the DisCo kind.</p>
<div id="#rfc.figure.8"></div>
<pre>
Name
    DISCO-REGISTRATION

Kind IDs
    The Resource name DISCO-REGISTRATION Kind-ID is the AoR of the
    conference. The data stored is the DisCoRegistrationData, that
    contains the Node-ID of a peer acting as a focus for the
    conference and optionally a coordinates value describing a
    peer's relative network position.

Data Model
    The data model for the DISCO-REGISTRATION Kind-ID is dictionary.
    The dictionary key is the Node-ID of the peer action as focus.

Access Control
    USER-MATCH: By the conference creator
      or
    USER-PATTERN-MATCH: By the conference creator
      or
    USER-CHAIN-ACL: By authorized focus peers</pre>
<p id="rfc.section.7.p.2">The data stored for the Kind-ID DISCO-REGISTRATION is of type DisCoRegistration. It contains a "coordinates" value, that describes the peers relative network position and the Node-ID of the registered focus peer.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#sec-xmls" id="sec-xmls">XML Schema</a>
</h1>
<p id="rfc.section.8.p.1">The XML schema for the event package for distributed conferences is:</p>
<div id="#rfc.figure.9"></div>
<div id="#fig-inet-ci-multifocus"></div>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
           xmlns:ci="urn:ietf:params:xml:ns:conference-info" 
     xmlns="urn:ietf:params:xml:ns:distributed-conference" 
     targetNamespace="urn:ietf:params:xml:ns:distributed-conference" 
     elementFormDefault="qualified" 
     attributeFormDefault="unqualified"&gt;
&lt;!--
    This imports the definitions in conference-info
--&gt;
&lt;xs:import namespace="urn:ietf:params:xml:ns:conference-info" 
        schemaLocation="http://www.iana.org/assignments/xml-registry/
                     schema/conference-info.xsd"/&gt;
&lt;xs:import namespace="http://www.w3.org/XML/1998/namespace" 
     schemaLocation="http://www.w3.org/2001/03/xml.xsd"/&gt;
  &lt;!--
   A DISTRIBUTED CONFERENCE ELEMENT
--&gt;
&lt;xs:element name="distributed-conference" 
            type="distributed-conference-type"/&gt;
  &lt;!--
    DISTRIBUTED CONFERENCE TYPE
--&gt;
  &lt;xs:complexType name="distributed-conference-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="version-vector" 
            type="version-vector-type" minOccurs="1"/&gt;
      &lt;xs:element name="conference-description" 
      type="conference-description-type" 
      minOccurs="0" maxOccurs="1"/&gt;
      &lt;xs:element name="focus" 
      type="focus-type"
      minOccurs="0" 
      maxOccurs="unbounded"/&gt;
       &lt;xs:any namespace="##other" processContents="lax"/&gt;
     &lt;/xs:sequence&gt;
     &lt;xs:attribute name="state" type="ci:state-type"/&gt;
     &lt;xs:attribute name="entity" type="xs:anyURI"/&gt;
     &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
&lt;!--
    VERSION VECTOR TYPE
--&gt;
  &lt;xs:complexType name="version-vector-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="version" 
                  type="version-type" 
                  minOccurs="1"
                  maxOccurs="unbounded"/&gt;
      &lt;xs:any namespace="##other" processContents="lax"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
&lt;!--
    CONFERENCE DESCRIPTION TYPE
--&gt;
  &lt;xs:complexType name="conference-description-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="display-text" 
                  type="xs:string" minOccurs="0"/&gt;
      &lt;xs:element name="subject" type="xs:string" minOccurs="0"/&gt;
      &lt;xs:element name="free" type="xs:string" minOccurs="0"/&gt;
      &lt;xs:element name="keywords" 
                  type="ci:keywords-type" minOccurs="0"/&gt;
      &lt;xs:element name="service-uris" 
                  type="ci:uris-type" minOccurs="0"/&gt;
      &lt;xs:any namespace="##other" processContents="lax"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="state" type="ci:state-type"/&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
&lt;!--
    FOCUS TYPE
--&gt;
  &lt;xs:complexType name="focus-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="display-text" 
                  type="xs:string" minOccurs="0"/&gt;
      &lt;xs:element name="associated-aors" 
                  type="ci:uris-type" minOccurs="0"/&gt;
      &lt;xs:element name="roles" 
                  type="ci:user-roles-type" minOccurs="0"/&gt;
      &lt;xs:element name="languages" 
                  type="ci:user-languages-type" minOccurs="0"/&gt;
      &lt;xs:element name="focus-state" 
                  type="focus-state-type" minOccurs="0"/&gt;
      &lt;xs:element name="users" 
                  type="ci:users-type" minOccurs="0"/&gt;
      &lt;xs:element name="relations" 
                  type="relations-type" minOccurs="0"/&gt;
      &lt;xs:any namespace="#other" processContents="lax"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="entity" type="xs:anyURI"/&gt;
    &lt;xs:attribute name="node-id" type="xs:string"/&gt;
    &lt;xs:attribute name="state" type="ci:state-type"/&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
&lt;!--
    VERSION TYPE
--&gt;
  &lt;xs:complexType name="version-type"&gt;
    &lt;xs:simpleContent&gt;
      &lt;xs:extension base="xs:unsignedInt"&gt;
        &lt;xs:attribute name="entity" type="xs:anyURI"/&gt;
        &lt;xs:attribute name="node-id" type="xs:string"/&gt;
        &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
      &lt;/xs:extension&gt;
    &lt;/xs:simpleContent&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
    FOCUS STATE TYPE
--&gt;
  &lt;xs:complexType name="focus-state-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="user-count" 
                  type="xs:unsignedInt" minOccurs="0"/&gt;
      &lt;xs:element name="coordinate"
                  type="xs:string" minOccurs="0"/&gt;
      &lt;xs:element name="maximal-user-count" 
                  type="xs:unsignedInt" minOccurs="0"/&gt;
      &lt;xs:element name="conf-uris" 
                  type="ci:uris-type" minOccurs="0"/&gt;
      &lt;xs:element name="available-media" 
                  type="ci:conference-media-type" minOccurs="0"/&gt;
      &lt;xs:element name="active" type="xs:boolean" minOccurs="0"/&gt;
      &lt;xs:element name="locked" type="xs:boolean" minOccurs="0"/&gt;
      &lt;xs:any namespace="##other" processContents="lax"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="state" type="ci:state-type"/&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
    RELATIONS TYPE
--&gt;
  &lt;xs:complexType name="relations-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="relation" 
                  type="relation-type" 
                  minOccurs="0" maxOccurs="unbounded"/&gt;
      &lt;xs:any namespace="##other" processContents="lax"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="state" type="ci:state-type"/&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
    RELATION TYPE
--&gt;
  &lt;xs:complexType name="relation-type"&gt;
    &lt;xs:simpleContent&gt;
      &lt;xs:extension base="xs:string"&gt;
        &lt;xs:attribute name="entity" type="xs:anyURI"/&gt;
        &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
      &lt;/xs:extension&gt;
    &lt;/xs:simpleContent&gt;
  &lt;/xs:complexType&gt;
&lt;/xs:schema&gt;</pre>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#sec-rngg" id="sec-rngg">Relax NG Grammar</a>
</h1>
<p id="rfc.section.9.p.1">The grammar for the Landmark configuration document extension is:</p>
<div id="#rfc.figure.10"></div>
<div id="#fig-le"></div>
<pre>
&lt;!--
    LANDMARKS ELEMENT
--&gt;
parameter &amp;= element landmarks {
    attribute version { xsd:int }
    &lt;!-- 
        LANDMARK-HOST ELEMENT
    --&gt;
    element landmark-host {
        attribute address { xsd:string },
        attribute port { xsd:int }
    }*
}?</pre>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> Security Considerations</h1>
<h1 id="rfc.section.10.1">
<a href="#rfc.section.10.1">10.1.</a> <a href="#subsec-ta" id="subsec-ta">Trust Aspects</a>
</h1>
<p id="rfc.section.10.1.p.1">TODO</p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> IANA Considerations</h1>
<p id="rfc.section.11.p.1">TODO: register Kind-ID code point at the IANA</p>
<h1 id="rfc.section.12">
<a href="#rfc.section.12">12.</a> Acknowledgments</h1>
<p id="rfc.section.12.p.1">This work was stimulated by fruitful discussions in the P2PSIP working group and SAM research group. We would like to thank all active members for constructive thoughts and feedback. In particular, the authors would like to thank (in alphabetical order) David Bryan, Toerless Eckert, Lothar Grimm, Cullen Jennings, Peter Musgrave, Joerg Ott, Peter Pogrzeba, Brian Rosen, and Jan Seedorf.</p>
<h1 id="rfc.references">
<a href="#rfc.references">13.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">13.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3261">[RFC3261]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, <a>Schulzrinne, H.</a>, <a>Camarillo, G.</a>, <a>Johnston, A.</a>, <a>Peterson, J.</a>, <a>Sparks, R.</a>, <a>Handley, M.</a> and <a>E. Schooler</a>, "<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>", RFC 3261, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3264">[RFC3264]</b></td>
<td class="top">
<a>Rosenberg, J.</a> and <a>H. Schulzrinne</a>, "<a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with Session Description Protocol (SDP)</a>", RFC 3264, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3265">[RFC3265]</b></td>
<td class="top">
<a>Roach, A.B.</a>, "<a href="http://tools.ietf.org/html/rfc3265">Session Initiation Protocol (SIP)-Specific Event Notification</a>", RFC 3265, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3515">[RFC3515]</b></td>
<td class="top">
<a>Sparks, R.</a>, "<a href="http://tools.ietf.org/html/rfc3515">The Session Initiation Protocol (SIP) Refer Method</a>", RFC 3515, April 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4574">[RFC4574]</b></td>
<td class="top">
<a>Levin, O.</a> and <a>G. Camarillo</a>, "<a href="http://tools.ietf.org/html/rfc4574">The Session Description Protocol (SDP) Label Attribute</a>", RFC 4574, August 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4648">[RFC4648]</b></td>
<td class="top">
<a>Josefsson, S.</a>, "<a href="http://tools.ietf.org/html/rfc4648">The Base16, Base32, and Base64 Data Encodings</a>", RFC 4648, October 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4575">[RFC4575]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, <a>Schulzrinne, H.</a> and <a>O. Levin</a>, "<a href="http://tools.ietf.org/html/rfc4575">A Session Initiation Protocol (SIP) Event Package for Conference State</a>", RFC 4575, August 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5245">[RFC5245]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, "<a href="http://tools.ietf.org/html/rfc5245">Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols</a>", RFC 5245, April 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-p2psip-base">[I-D.ietf-p2psip-base]</b></td>
<td class="top">
<a>Jennings, C</a>, <a>Lowekamp, B</a>, <a>Rescorla, E</a>, <a>Baset, S</a> and <a>H Schulzrinne</a>, "<a href="http://tools.ietf.org/html/draft-ietf-p2psip-base-19">REsource LOcation And Discovery (RELOAD) Base Protocol</a>", Internet-Draft draft-ietf-p2psip-base-19, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.knauf-p2psip-share">[I-D.knauf-p2psip-share]</b></td>
<td class="top">
<a>Knauf, A</a>, <a>Hege, G</a>, <a>Schmidt, T</a> and <a>M Waehlisch</a>, "<a href="http://tools.ietf.org/html/draft-knauf-p2psip-share-02">A Usage for Shared Resources in RELOAD (ShaRe)</a>", Internet-Draft draft-knauf-p2psip-share-02, October 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">13.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.ietf-p2psip-concepts">[I-D.ietf-p2psip-concepts]</b></td>
<td class="top">
<a>Bryan, D</a>, <a>Matthews, P</a>, <a>Shim, E</a>, <a>Willis, D</a> and <a>S Dawkins</a>, "<a href="http://tools.ietf.org/html/draft-ietf-p2psip-concepts-04">Concepts and Terminology for Peer to Peer SIP</a>", Internet-Draft draft-ietf-p2psip-concepts-04, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4353">[RFC4353]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, "<a href="http://tools.ietf.org/html/rfc4353">A Framework for Conferencing with the Session Initiation Protocol (SIP)</a>", RFC 4353, February 2006.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-p2psip-sip">[I-D.ietf-p2psip-sip]</b></td>
<td class="top">
<a>Jennings, C</a>, <a>Lowekamp, B</a>, <a>Rescorla, E</a>, <a>Baset, S</a> and <a>H Schulzrinne</a>, "<a href="http://tools.ietf.org/html/draft-ietf-p2psip-sip-06">A SIP Usage for RELOAD</a>", Internet-Draft draft-ietf-p2psip-sip-06, July 2011.</td>
</tr>
<tr>
<td class="reference"><b id="timestamps-acsc88">[timestamps-acsc88]</b></td>
<td class="top">
<a>Fidge, C.</a>, "<a>Timestamps in Message-Passing Systems that Preserve the Partial Ordering</a>", Proceedings of 11th Australian Computer Science Conference, pp. 56-66, February 1988.</td>
</tr>
<tr>
<td class="reference"><b id="landmarks-infocomm02">[landmarks-infocomm02]</b></td>
<td class="top">
<a>Ratnasamy, </a>, <a>Handley, </a>, <a>Karp, </a> and <a> Shenker</a>, "<a>Topologically-Aware Overlay Construction and Server Selection</a>", Proc. of 21st Annual Joint Conference of the IEEE Computer and Communications Societies (INFOCOM '02) pp. 1190-1199, 2002.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> Change Log</h1>
<p id="rfc.section.Appendix A.p.1">The following changes have been made from version draft-knauf-p2psip-disco-01.</p>

<ol>
<li>The conference registration is now based on the Shared Resources draft <a href="#I-D.knauf-p2psip-share">[I-D.knauf-p2psip-share]</a>: <ul>
<li>DisCo-Registration Kind now meets the requirements for ShaRe.</li>
<li>Conference creation procedure now uses the ShaRe Access List.</li>
<li>Replaced USER-CHAIN-MATCH access policy for DisCo-Registration.  Now uses USER-CHAIN-ACL or USER-PATTERN-MATCH.</li>
</ul>
</li>
<li>Allow focus peers behind NAT</li>
<li>Added a 'node-id' attribute to the event package XML &lt;version&gt; element.</li>
<li>Added a 'node-id' attribute to the event package XML &lt;focus&gt; element.</li>
<li>Added a 'coordinate' child element to the event package XML &lt;focus&gt; element.</li>
<li>Corrected typos/wording</li>
</ol>
<p id="rfc.section.Appendix A.p.2">The following changes have been made from version draft-knauf-p2psip-disco-00. </p>

<ol>
<li>Updated references.</li>
<li>Corrected typos.</li>
<li>New Section: Conference State Synchronization</li>
<li>XML Event Package for Distributed Conferences</li>
<li>New mechanism for generating chained conference certificates</li>
<li>Allow shared writing of resources using Access Control Policy USER-CHAIN-MATCH</li>
<li>Media Negotiation mechanism in a distributed conference</li>
<li>New Section: Distributed Conference Control with SIP</li>
</ol>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Alexander Knauf</span> 
	  <span class="n hidden">
		<span class="family-name">Knauf</span>
	  </span>
	</span>
	<span class="org vcardline">HAW Hamburg</span>
	<span class="adr">
	  <span>Berliner Tor 7</span>

	  <span class="vcardline">
		<span class="locality">Hamburg</span>,  
		<span class="region"></span>
		<span class="code">D-20099</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">Phone: +4940428758067</span>

<span class="vcardline">EMail: <a href="mailto:alexander.knauf@haw-hamburg.de">alexander.knauf@haw-hamburg.de</a></span>

<span class="vcardline">URI: <a href="http://inet.cpt.haw-hamburg.de/members/knauf">http://inet.cpt.haw-hamburg.de/members/knauf</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Gabriel Hege</span> 
	  <span class="n hidden">
		<span class="family-name">Hege</span>
	  </span>
	</span>
	<span class="org vcardline">HAW Hamburg</span>
	<span class="adr">
	  <span>Berliner Tor 7</span>

	  <span class="vcardline">
		<span class="locality">Hamburg</span>,  
		<span class="region"></span>
		<span class="code">D-20099</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">Phone: +4940428758067</span>

<span class="vcardline">EMail: <a href="mailto:hege@fhtw-berlin.de">hege@fhtw-berlin.de</a></span>

<span class="vcardline">URI: <a href="http://inet.cpt.haw-hamburg.de/members/hege">http://inet.cpt.haw-hamburg.de/members/hege</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Thomas C. Schmidt</span> 
	  <span class="n hidden">
		<span class="family-name">Schmidt</span>
	  </span>
	</span>
	<span class="org vcardline">HAW Hamburg</span>
	<span class="adr">
	  <span>Berliner Tor 7</span>

	  <span class="vcardline">
		<span class="locality">Hamburg</span>,  
		<span class="region"></span>
		<span class="code">D-20099</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:schmidt@informatik.haw-hamburg.de">schmidt@informatik.haw-hamburg.de</a></span>

<span class="vcardline">URI: <a href="http://inet.cpt.haw-hamburg.de/members/schmidt">http://inet.cpt.haw-hamburg.de/members/schmidt</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Matthias Waehlisch</span> 
	  <span class="n hidden">
		<span class="family-name">Waehlisch</span>
	  </span>
	</span>
	<span class="org vcardline">link-lab & FU Berlin</span>
	<span class="adr">
	  <span>Hoenower Str. 35</span>

	  <span class="vcardline">
		<span class="locality">Berlin</span>,  
		<span class="region"></span>
		<span class="code">D-10318</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:mw@link-lab.net">mw@link-lab.net</a></span>

<span class="vcardline">URI: <a href="http://www.inf.fu-berlin.de/~waehl">http://www.inf.fu-berlin.de/~waehl</a></span>

  </address>
</div>

</body>
</html>