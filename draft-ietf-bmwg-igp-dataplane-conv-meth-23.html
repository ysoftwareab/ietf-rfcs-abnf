<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Benchmarking Methodology for Link-State IGP Data Plane Route Convergence</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Motivation">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Factors for IGP Route Convergence Time">
<link href="#rfc.section.1.3" rel="Chapter" title="1.3 Use of Data Plane for IGP Route Convergence Benchmarking">
<link href="#rfc.section.1.4" rel="Chapter" title="1.4 Applicability and Scope">
<link href="#rfc.section.2" rel="Chapter" title="2 Existing Definitions">
<link href="#rfc.section.3" rel="Chapter" title="3 Test Topologies">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Test topology for local changes">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Test topology for remote changes">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Test topology for local ECMP changes">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Test topology for remote ECMP changes">
<link href="#rfc.section.3.5" rel="Chapter" title="3.5 Test topology for Parallel Link changes">
<link href="#rfc.section.4" rel="Chapter" title="4 Convergence Time and Loss of Connectivity Period">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Convergence Events without instant traffic loss">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Loss of Connectivity (LoC)">
<link href="#rfc.section.5" rel="Chapter" title="5 Test Considerations">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 IGP Selection">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Routing Protocol Configuration">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 IGP Topology">
<link href="#rfc.section.5.4" rel="Chapter" title="5.4 Timers">
<link href="#rfc.section.5.5" rel="Chapter" title="5.5 Interface Types">
<link href="#rfc.section.5.6" rel="Chapter" title="5.6 Offered Load">
<link href="#rfc.section.5.7" rel="Chapter" title="5.7 Measurement Accuracy">
<link href="#rfc.section.5.8" rel="Chapter" title="5.8 Measurement Statistics">
<link href="#rfc.section.5.9" rel="Chapter" title="5.9 Tester Capabilities">
<link href="#rfc.section.6" rel="Chapter" title="6 Selection of Convergence Time Benchmark Metrics and Methods">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Loss-Derived Method">
<link href="#rfc.section.6.1.1" rel="Chapter" title="6.1.1 Tester capabilities">
<link href="#rfc.section.6.1.2" rel="Chapter" title="6.1.2 Benchmark Metrics">
<link href="#rfc.section.6.1.3" rel="Chapter" title="6.1.3 Measurement Accuracy">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Rate-Derived Method">
<link href="#rfc.section.6.2.1" rel="Chapter" title="6.2.1 Tester Capabilities">
<link href="#rfc.section.6.2.2" rel="Chapter" title="6.2.2 Benchmark Metrics">
<link href="#rfc.section.6.2.3" rel="Chapter" title="6.2.3 Measurement Accuracy">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 Route-Specific Loss-Derived Method">
<link href="#rfc.section.6.3.1" rel="Chapter" title="6.3.1 Tester Capabilities">
<link href="#rfc.section.6.3.2" rel="Chapter" title="6.3.2 Benchmark Metrics">
<link href="#rfc.section.6.3.3" rel="Chapter" title="6.3.3 Measurement Accuracy">
<link href="#rfc.section.7" rel="Chapter" title="7 Reporting Format">
<link href="#rfc.section.8" rel="Chapter" title="8 Test Cases">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Interface Failure and Recovery">
<link href="#rfc.section.8.1.1" rel="Chapter" title="8.1.1 Convergence Due to Local Interface Failure and Recovery">
<link href="#rfc.section.8.1.2" rel="Chapter" title="8.1.2 Convergence Due to Remote Interface Failure and Recovery">
<link href="#rfc.section.8.1.3" rel="Chapter" title="8.1.3 Convergence Due to ECMP Member Local Interface Failure and Recovery">
<link href="#rfc.section.8.1.4" rel="Chapter" title="8.1.4 Convergence Due to ECMP Member Remote Interface Failure and Recovery">
<link href="#rfc.section.8.1.5" rel="Chapter" title="8.1.5 Convergence Due to Parallel Link Interface Failure and Recovery">
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 Other Failures and Recoveries">
<link href="#rfc.section.8.2.1" rel="Chapter" title="8.2.1 Convergence Due to Layer 2 Session Loss and Recovery">
<link href="#rfc.section.8.2.2" rel="Chapter" title="8.2.2 Convergence Due to Loss and Recovery of IGP Adjacency">
<link href="#rfc.section.8.2.3" rel="Chapter" title="8.2.3 Convergence Due to Route Withdrawal and Re-advertisement">
<link href="#rfc.section.8.3" rel="Chapter" title="8.3 Administrative changes">
<link href="#rfc.section.8.3.1" rel="Chapter" title="8.3.1 Convergence Due to Local Interface Adminstrative Changes">
<link href="#rfc.section.8.3.2" rel="Chapter" title="8.3.2 Convergence Due to Cost Change">
<link href="#rfc.section.9" rel="Chapter" title="9 Security Considerations">
<link href="#rfc.section.10" rel="Chapter" title="10 IANA Considerations">
<link href="#rfc.section.11" rel="Chapter" title="11 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="12 References">
<link href="#rfc.references.1" rel="Chapter" title="12.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="12.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document describes the methodology for benchmarking Link-State Interior Gateway Protocol (IGP) Route Convergence. The methodology is to be used for benchmarking IGP convergence time through externally observable (black box) data plane measurements. The methodology can be applied to any link-state IGP, such as IS-IS and OSPF." />
  <meta name="description" content="This document describes the methodology for benchmarking Link-State Interior Gateway Protocol (IGP) Route Convergence. The methodology is to be used for benchmarking IGP convergence time through externally observable (black box) data plane measurements. The methodology can be applied to any link-state IGP, such as IS-IS and OSPF." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">S. Poretsky</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Allot Communications</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">B. Imhoff</td>
</tr>
<tr>
<td class="left">Expires: August 20, 2011</td>
<td class="right">Juniper Networks</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">K. Michielsen</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Cisco Systems</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">February 16, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Benchmarking Methodology for Link-State IGP Data Plane Route Convergence<br />
  <span class="filename">draft-ietf-bmwg-igp-dataplane-conv-meth-23</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document describes the methodology for benchmarking Link-State Interior Gateway Protocol (IGP) Route Convergence. The methodology is to be used for benchmarking IGP convergence time through externally observable (black box) data plane measurements. The methodology can be applied to any link-state IGP, such as IS-IS and OSPF.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on August 20, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>
<p>This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008.  The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process. Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Motivation</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Factors for IGP Route Convergence Time</a>
</li>
<li>1.3.   <a href="#rfc.section.1.3">Use of Data Plane for IGP Route Convergence Benchmarking</a>
</li>
<li>1.4.   <a href="#rfc.section.1.4">Applicability and Scope</a>
</li>
<li>2.   <a href="#rfc.section.2">Existing Definitions</a>
</li>
<li>3.   <a href="#rfc.section.3">Test Topologies</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Test topology for local changes</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Test topology for remote changes</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Test topology for local ECMP changes</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Test topology for remote ECMP changes</a>
</li>
<li>3.5.   <a href="#rfc.section.3.5">Test topology for Parallel Link changes</a>
</li>
<li>4.   <a href="#rfc.section.4">Convergence Time and Loss of Connectivity Period</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Convergence Events without instant traffic loss</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Loss of Connectivity (LoC)</a>
</li>
<li>5.   <a href="#rfc.section.5">Test Considerations</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">IGP Selection</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Routing Protocol Configuration</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">IGP Topology</a>
</li>
<li>5.4.   <a href="#rfc.section.5.4">Timers</a>
</li>
<li>5.5.   <a href="#rfc.section.5.5">Interface Types</a>
</li>
<li>5.6.   <a href="#rfc.section.5.6">Offered Load</a>
</li>
<li>5.7.   <a href="#rfc.section.5.7">Measurement Accuracy</a>
</li>
<li>5.8.   <a href="#rfc.section.5.8">Measurement Statistics</a>
</li>
<li>5.9.   <a href="#rfc.section.5.9">Tester Capabilities</a>
</li>
<li>6.   <a href="#rfc.section.6">Selection of Convergence Time Benchmark Metrics and Methods</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Loss-Derived Method</a>
</li>
<li>6.1.1.   <a href="#rfc.section.6.1.1">Tester capabilities</a>
</li>
<li>6.1.2.   <a href="#rfc.section.6.1.2">Benchmark Metrics</a>
</li>
<li>6.1.3.   <a href="#rfc.section.6.1.3">Measurement Accuracy</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Rate-Derived Method</a>
</li>
<li>6.2.1.   <a href="#rfc.section.6.2.1">Tester Capabilities</a>
</li>
<li>6.2.2.   <a href="#rfc.section.6.2.2">Benchmark Metrics</a>
</li>
<li>6.2.3.   <a href="#rfc.section.6.2.3">Measurement Accuracy</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">Route-Specific Loss-Derived Method</a>
</li>
<li>6.3.1.   <a href="#rfc.section.6.3.1">Tester Capabilities</a>
</li>
<li>6.3.2.   <a href="#rfc.section.6.3.2">Benchmark Metrics</a>
</li>
<li>6.3.3.   <a href="#rfc.section.6.3.3">Measurement Accuracy</a>
</li>
<li>7.   <a href="#rfc.section.7">Reporting Format</a>
</li>
<li>8.   <a href="#rfc.section.8">Test Cases</a>
</li>
<li>8.1.   <a href="#rfc.section.8.1">Interface Failure and Recovery</a>
</li>
<li>8.1.1.   <a href="#rfc.section.8.1.1">Convergence Due to Local Interface Failure and Recovery</a>
</li>
<li>8.1.2.   <a href="#rfc.section.8.1.2">Convergence Due to Remote Interface Failure and Recovery</a>
</li>
<li>8.1.3.   <a href="#rfc.section.8.1.3">Convergence Due to ECMP Member Local Interface Failure and Recovery</a>
</li>
<li>8.1.4.   <a href="#rfc.section.8.1.4">Convergence Due to ECMP Member Remote Interface Failure and Recovery</a>
</li>
<li>8.1.5.   <a href="#rfc.section.8.1.5">Convergence Due to Parallel Link Interface Failure and Recovery</a>
</li>
<li>8.2.   <a href="#rfc.section.8.2">Other Failures and Recoveries</a>
</li>
<li>8.2.1.   <a href="#rfc.section.8.2.1">Convergence Due to Layer 2 Session Loss and Recovery</a>
</li>
<li>8.2.2.   <a href="#rfc.section.8.2.2">Convergence Due to Loss and Recovery of IGP Adjacency</a>
</li>
<li>8.2.3.   <a href="#rfc.section.8.2.3">Convergence Due to Route Withdrawal and Re-advertisement</a>
</li>
<li>8.3.   <a href="#rfc.section.8.3">Administrative changes</a>
</li>
<li>8.3.1.   <a href="#rfc.section.8.3.1">Convergence Due to Local Interface Adminstrative Changes</a>
</li>
<li>8.3.2.   <a href="#rfc.section.8.3.2">Convergence Due to Cost Change</a>
</li>
<li>9.   <a href="#rfc.section.9">Security Considerations</a>
</li>
<li>10.   <a href="#rfc.section.10">IANA Considerations</a>
</li>
<li>11.   <a href="#rfc.section.11">Acknowledgements</a>
</li>
<li>12.   <a href="#rfc.references">References</a>
</li>
<li>12.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>12.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Motivation</h1>
<p id="rfc.section.1.1.p.1">Convergence time is a critical performance parameter. Service Providers use IGP convergence time as a key metric of router design and architecture. Fast network convergence can be optimally achieved through deployment of fast converging routers. Customers of Service Providers use packet loss due to Interior Gateway Protocol (IGP) convergence as a key metric of their network service quality. IGP route convergence is a Direct Measure of Quality (DMOQ) when benchmarking the data plane. The fundamental basis by which network users and operators benchmark convergence is packet loss and other packet impairments, which are externally observable events having direct impact on their application performance. For this reason it is important to develop a standard methodology for benchmarking link-state IGP convergence time through externally observable (black-box) data plane measurements. All factors contributing to convergence time are accounted for by measuring on the data plane.</p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> Factors for IGP Route Convergence Time</h1>
<p id="rfc.section.1.2.p.1">There are four major categories of factors contributing to the measured IGP convergence time. As discussed in <a href="#Vi02">[Vi02]</a>, <a href="#Ka02">[Ka02]</a>, <a href="#Fi02">[Fi02]</a>, <a href="#Al00">[Al00]</a>, <a href="#Al02">[Al02]</a>, and <a href="#Fr05">[Fr05]</a>, these categories are Event Detection, Shortest Path First (SPF) Processing, Link State Advertisement (LSA) / Link State Packet (LSP) Advertisement, and Forwarding Information Base (FIB) Update. These have numerous components that influence the convergence time, including but not limited to the list below:</p>
<p></p>

<ul>
<li>Event Detection<ul>
<li>Physical Layer failure/recovery indication time</li>
<li>Layer 2 failure/recovery indication time</li>
<li>IGP Hello Dead Interval</li>
</ul>
</li>
<li>SPF Processing<ul>
<li>SPF Delay Time</li>
<li>SPF Hold time</li>
<li>SPF Execution time</li>
</ul>
</li>
<li>LSA/LSP Advertisement<ul>
<li>LSA/LSP Generation time</li>
<li>LSA/LSP Flood Packet Pacing</li>
<li>LSA/LSP Retransmission Packet Pacing</li>
</ul>
</li>
<li>FIB Update<ul>
<li>Tree Build time</li>
<li>Hardware Update time</li>
</ul>
</li>
<li>Increased Forwarding Delay due to Queueing</li>
</ul>
<p id="rfc.section.1.2.p.3">The contribution of each of these factors listed above will vary with each router vendors' architecture and IGP implementation. Routers may have a centralized forwarding architecture, in which one forwarding table is calculated and referenced for all arriving packets, or a distributed forwarding architecture, in which the central forwarding table is calculated and distributed to the interfaces for local look-up as packets arrive. The distributed forwarding tables are typically maintained in hardware.</p>
<p id="rfc.section.1.2.p.4">The variation in router architecture and implementation necessitates the design of a convergence test that considers all of these components contributing to convergence time and is independent of the Device Under Test (DUT) architecture and implementation. The benefit of designing a test for these considerations is that it enables black-box testing in which knowledge of the routers' internal implementation is not required. It is then possible to make valid use of the convergence benchmarking metrics when comparing routers from different vendors.</p>
<p id="rfc.section.1.2.p.5">Convergence performance is tightly linked to the number of tasks a router has to deal with. As the most impacting tasks are mainly related to the control plane and the data plane, the more the DUT is stressed as in a live production environment, the closer performance measurement results match the ones that would be observed in a live production environment.</p>
<h1 id="rfc.section.1.3">
<a href="#rfc.section.1.3">1.3.</a> Use of Data Plane for IGP Route Convergence Benchmarking</h1>
<p id="rfc.section.1.3.p.1">Customers of Service Providers use packet loss and other packet impairments as metrics to calculate convergence time. Packet loss and other packet impairments are externally observable events having direct impact on customers' application performance. For this reason it is important to develop a standard router benchmarking methodology that is a Direct Measure of Quality (DMOQ) for measuring IGP convergence. An additional benefit of using packet loss for calculation of IGP Route Convergence time is that it enables black-box tests to be designed. Data traffic can be offered to the Device Under Test (DUT), an emulated network event can be forced to occur, and packet loss and other impaired packets can be externally measured to calculate the convergence time. Knowledge of the DUT architecture and IGP implementation is not required. There is no need to rely on the DUT to produce the test results. There is no need to build intrusive test harnesses for the DUT. All factors contributing to convergence time are accounted for by measuring on the dataplane.</p>
<p id="rfc.section.1.3.p.2">Other work of the Benchmarking Methodology Working Group (BMWG) focuses on characterizing single router control plane convergence. See <a href="#Ma05">[Ma05]</a>, <a href="#Ma05t">[Ma05t]</a>, and <a href="#Ma05c">[Ma05c]</a>.</p>
<h1 id="rfc.section.1.4">
<a href="#rfc.section.1.4">1.4.</a> Applicability and Scope</h1>
<p id="rfc.section.1.4.p.1">The methodology described in this document can be applied to IPv4 and IPv6 traffic and link-state IGPs such as IS-IS <a href="#Ca90">[Ca90]</a><a href="#Ho08">[Ho08]</a>, OSPF <a href="#Mo98">[Mo98]</a><a href="#Co08">[Co08]</a>, and others. IGP adjacencies established over any kind of tunnel (such as Traffic Engineering tunnels) are outside the scope of this document.  Convergence time benchmarking in topologies with non point-to-point IGP adjacencies will be covered in a later document. Convergence from Bidirectional Forwarding Detection (BFD) is outside the scope of this document. Non-Stop Forwarding (NSF), Non-Stop Routing (NSR), Graceful Restart (GR), or any other High Availability mechanism are outside the scope of this document. Fast reroute mechanisms such as IP Fast-Reroute <a href="#Sh10i">[Sh10i]</a> or MPLS Fast-Reroute <a href="#Pa05">[Pa05]</a> are outside the scope of this document.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Existing Definitions</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14, RFC 2119 <a href="#Br97">[Br97]</a>. RFC 2119 defines the use of these key words to help make the intent of standards track documents as clear as possible.  While this document uses these keywords, this document is not a standards track document.</p>
<p id="rfc.section.2.p.2">This document uses much of the terminology defined in <a href="#Po11t">[Po11t]</a>. For any conflicting content, this document supersedes <a href="#Po11t">[Po11t]</a>. This document uses existing terminology defined in other documents issued by the Benchmarking Methodology Working Group (BMWG). Examples include, but are not limited to:</p>
<div id="#rfc.table.1"></div>
<div id="#table_terminology"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left"></th>
<th class="left"></th>
</tr></thead>
<tbody>
<tr>
<td class="left">Throughput</td>
<td class="left">[Ref.<a href="#Br91">[Br91]</a>, section 3.17]</td>
</tr>
<tr>
<td class="left">Device Under Test (DUT)</td>
<td class="left">[Ref.<a href="#Ma98">[Ma98]</a>, section 3.1.1]</td>
</tr>
<tr>
<td class="left">System Under Test (SUT)</td>
<td class="left">[Ref.<a href="#Ma98">[Ma98]</a>, section 3.1.2]</td>
</tr>
<tr>
<td class="left">Out-of-Order Packet</td>
<td class="left">[Ref.<a href="#Po06">[Po06]</a>, section 3.3.4]</td>
</tr>
<tr>
<td class="left">Duplicate Packet</td>
<td class="left">[Ref.<a href="#Po06">[Po06]</a>, section 3.3.5]</td>
</tr>
<tr>
<td class="left">Stream</td>
<td class="left">[Ref.<a href="#Po06">[Po06]</a>, section 3.3.2]</td>
</tr>
<tr>
<td class="left">Loss Period</td>
<td class="left">[Ref.<a href="#Ko02">[Ko02]</a>, section 4]</td>
</tr>
<tr>
<td class="left">Forwarding Delay</td>
<td class="left">[Ref.<a href="#Po06">[Po06]</a>, section 3.2.4]</td>
</tr>
<tr>
<td class="left">IP Packet Delay Variation (IPDV)</td>
<td class="left">[Ref.<a href="#De02">[De02]</a>, section 1.2]</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#test_topologies" id="test_topologies">Test Topologies</a>
</h1>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Test topology for local changes</h1>
<p id="rfc.section.3.1.p.1">Figure <a href="#local_nlb"></a> shows the test topology to measure IGP convergence time due to local Convergence Events such as Local Interface failure and recovery (<a href="#testcase_local_link_failure">Section 8.1.1</a>), layer 2 session failure and recovery (<a href="#testcase_layer2_session_failure">Section 8.2.1</a>), and IGP adjacency failure and recovery (<a href="#testcase_igp_adj_failure">Section 8.2.2</a>). This topology is also used to measure IGP convergence time due to route withdrawal and readvertisement (<a href="#testcase_route_withdrawal">Section 8.2.3</a>), and route cost change (<a href="#testcase_route_cost_change">Section 8.3.2</a>) Convergence Events. IGP adjacencies MUST be established between Tester and DUT: one on the Ingress Interface, one on the Preferred Egress Interface, and one on the Next-Best Egress Interface. For this purpose the Tester emulates three routers (RTa, RTb, and RTc), each establishing one adjacency with the DUT.</p>
<div id="#rfc.figure.1"></div>
<div id="#local_nlb"></div>
<pre>
                   -------
                   |     | Preferred        .......
                   |     |------------------. RTb .
.......    Ingress |     | Egress Interface .......
. RTa .------------| DUT |
.......  Interface |     | Next-Best        .......
                   |     |------------------. RTc .
                   |     | Egress Interface .......
                   -------
</pre>
<p id="rfc.section.3.1.p.2">Figure <a href="#local_lb_1toN"></a> shows the test topology to measure IGP convergence time due to local Convergence Events with a non-Equal Cost Multipath (ECMP) Preferred Egress Interface and Equal Cost Multipath (ECMP) Next-Best Egress Interfaces (<a href="#testcase_local_link_failure">Section 8.1.1</a>). In this topology, the DUT is configured with each Next-Best Egress interface as a member of a single ECMP set. The Preferred Egress Interface is not a member of an ECMP set. The Tester emulates N+2 neighbor routers (N&gt;0): one router for the Ingress Interface (RTa), one router for the Preferred Egress Interface (RTb), and N routers for the members of the ECMP set (RTc1...RTcN). IGP adjacencies MUST be established between Tester and DUT: one on the Ingress Interface, one on the Preferred Egress Interface, and one on each member of the ECMP set. When the test specifies to observe the Next-Best Egress Interface statistics, the combined statistics for all ECMP members should be observed.</p>
<div id="#rfc.figure.2"></div>
<div id="#local_lb_1toN"></div>
<pre>
                   -------
                   |     | Preferred        .......
                   |     |------------------. RTb .
                   |     | Egress Interface .......
                   |     |
                   |     | ECMP Set         ........
.......    Ingress |     |------------------. RTc1 .
. RTa .------------| DUT | Interface 1      ........
.......  Interface |     |       .
                   |     |       .
                   |     |       .
                   |     | ECMP Set         ........
                   |     |------------------. RTcN .
                   |     | Interface N      ........
                   -------
</pre>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> Test topology for remote changes</h1>
<p id="rfc.section.3.2.p.1">Figure <a href="#remote_nlb"></a> shows the test topology to measure IGP convergence time due to Remote Interface failure and recovery (<a href="#testcase_remote_link_failure">Section 8.1.2</a>). In this topology the two routers DUT1 and DUT2 are considered System Under Test (SUT) and SHOULD be identically configured devices of the same model. IGP adjacencies MUST be established between Tester and SUT, one on the Ingress Interface, one on the Preferred Egress Interface, and one on the Next-Best Egress Interface. For this purpose the Tester emulates three routers (RTa, RTb, and RTc). In this topology there is a possibility of a packet forwarding loop that may occur transiently between DUT1 and DUT2 during convergence (micro-loop, see <a href="#Sh10">[Sh10]</a>).</p>
<div id="#rfc.figure.3"></div>
<div id="#remote_nlb"></div>
<pre>
                   --------
                   |      |  -------- Preferred        .......
                   |      |--| DUT2 |------------------. RTb .
.......    Ingress |      |  -------- Egress Interface .......
. RTa .------------| DUT1 |
.......  Interface |      | Next-Best                  .......
                   |      |----------------------------. RTc .
                   |      | Egress Interface           .......
                   --------
</pre>
<p id="rfc.section.3.2.p.2">Figure <a href="#remote_lb_1toN"></a> shows the test topology to measure IGP convergence time due to remote Convergence Events with a non-ECMP Preferred Egress Interface and ECMP Next-Best Egress Interfaces (<a href="#testcase_remote_link_failure">Section 8.1.2</a>). In this topology the two routers DUT1 and DUT2 are considered System Under Test (SUT) and MUST be identically configured devices of the same model. Router DUT1 is configured with the Next-Best Egress Interface an ECMP set of interfaces. The Preferred Egress Interface of DUT1 is not a member of an ECMP set. The Tester emulates N+2 neighbor routers (N&gt;0), one for the Ingress Interface (RTa), one for DUT2 (RTb) and one for each member of the ECMP set (RTc1...RTcN). IGP adjacencies MUST be established between Tester and SUT, one on each interface of SUT. For this purpose each of the N+2 routers emulated by the Tester establishes one adjacency with the SUT. In this topology there is a possibility of a packet forwarding loop that may occur transiently between DUT1 and DUT2 during convergence (micro-loop, see <a href="#Sh10">[Sh10]</a>). When the test specifies to observe the Next-Best Egress Interface statistics, the combined statistics for all members of the ECMP set should be observed.</p>
<div id="#rfc.figure.4"></div>
<div id="#remote_lb_1toN"></div>
<pre>
                   --------
                   |      |  -------- Preferred        .......
                   |      |--| DUT2 |------------------. RTb .
                   |      |  -------- Egress Interface .......
                   |      |
                   |      | ECMP Set                   ........
.......    Ingress |      |----------------------------. RTc1 .
. RTa .------------| DUT1 | Interface 1                ........
.......  Interface |      |       .
                   |      |       .
                   |      |       .
                   |      | ECMP Set                   ........
                   |      |----------------------------. RTcN .
                   |      | Interface N                ........
                   --------
</pre>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> Test topology for local ECMP changes</h1>
<p id="rfc.section.3.3.p.1">Figure <a href="#local_lb"></a> shows the test topology to measure IGP convergence time due to local Convergence Events of a member of an Equal Cost Multipath (ECMP) set (<a href="#testcase_local_lb_link_failure">Section 8.1.3</a>). In this topology, the DUT is configured with each egress interface as a member of a single ECMP set and the Tester emulates N+1 next-hop routers, one for the Ingress Interface (RTa) and one for each member of the ECMP set (RTb1...RTbN). IGP adjacencies MUST be established between Tester and DUT, one on the Ingress Interface and one on each member of the ECMP set. For this purpose each of the N+1 routers emulated by the Tester establishes one adjacency with the DUT. When the test specifies to observe the Next-Best Egress Interface statistics, the combined statistics for all ECMP members except the one affected by the Convergence Event, should be observed.</p>
<div id="#rfc.figure.5"></div>
<div id="#local_lb"></div>
<pre>
                   -------
                   |     | ECMP Set    ........
                   |     |-------------. RTb1 .
                   |     | Interface 1 ........
.......    Ingress |     |       .
. RTa .------------| DUT |       .
.......  Interface |     |       .
                   |     | ECMP Set    ........
                   |     |-------------. RTbN .
                   |     | Interface N ........
                   -------
</pre>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> Test topology for remote ECMP changes</h1>
<p id="rfc.section.3.4.p.1">Figure <a href="#remote_lb"></a> shows the test topology to measure IGP convergence time due to remote Convergence Events of a member of an Equal Cost Multipath (ECMP) set (<a href="#testcase_remote_lb_link_failure">Section 8.1.4</a>). In this topology the two routers DUT1 and DUT2 are considered System Under Test (SUT) and MUST be identically configured devices of the same model. Router DUT1 is configured with each egress interface as a member of a single ECMP set and the Tester emulates N+1 neighbor routers (N&gt;0), one for the Ingress Interface (RTa) and one for each member of the ECMP set (RTb1...RTbN). IGP adjacencies MUST be established between Tester and SUT, one on each interface of SUT. For this purpose each of the N+1 routers emulated by the Tester establishes one adjacency with the SUT (N-1 emulated routers are adjacent to DUT1 egress interfaces, one emulated router is adjacent to DUT1 Ingress Interface, and one emulated router is adjacent to DUT2).  In this topology there is a possibility of a packet forwarding loop that may occur transiently between DUT1 and DUT2 during convergence (micro-loop, see <a href="#Sh10">[Sh10]</a>). When the test specifies to observe the Next-Best Egress Interface statistics, the combined statistics for all ECMP members except the one affected by the Convergence Event, should be observed.</p>
<div id="#rfc.figure.6"></div>
<div id="#remote_lb"></div>
<pre>
                   --------
                   |      | ECMP Set    --------   ........
                   |      |-------------| DUT2 |---. RTb1 .
                   |      | Interface 1 --------   ........
                   |      |
                   |      | ECMP Set               ........
.......    Ingress |      |------------------------. RTb2 .
. RTa .------------| DUT1 | Interface 2            ........
.......  Interface |      |       .
                   |      |       .
                   |      |       .
                   |      | ECMP Set               ........
                   |      |------------------------. RTbN .
                   |      | Interface N            ........
                   --------
</pre>
<h1 id="rfc.section.3.5">
<a href="#rfc.section.3.5">3.5.</a> Test topology for Parallel Link changes</h1>
<p id="rfc.section.3.5.p.1">Figure <a href="#local_parallel"></a> shows the test topology to measure IGP convergence time due to local Convergence Events with members of a Parallel Link (<a href="#testcase_parallel_link_failure">Section 8.1.5</a>). In this topology, the DUT is configured with each egress interface as a member of a Parallel Link and the Tester emulates two neighbor routers, one for the Ingress Interface (RTa) and one for the Parallel Link members (RTb). IGP adjacencies MUST be established on the Ingress Interface and on all N members of the Parallel Link between Tester and DUT (N&gt;0). For this purpose the routers emulated by the Tester establishes N+1 adjacencies with the DUT. When the test specifies to observe the Next-Best Egress Interface statistics, the combined statistics for all Parallel Link members except the one affected by the Convergence Event, should be observed.</p>
<div id="#rfc.figure.7"></div>
<div id="#local_parallel"></div>
<pre>
                   -------                .......
                   |     | Parallel Link  .     .
                   |     |----------------.     .
                   |     | Interface 1    .     .
.......    Ingress |     |       .        .     .
. RTa .------------| DUT |       .        . RTb .
.......  Interface |     |       .        .     .
                   |     | Parallel Link  .     .
                   |     |----------------.     .
                   |     | Interface N    .     .
                   -------                .......
</pre>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#section_conv_and_loc" id="section_conv_and_loc">Convergence Time and Loss of Connectivity Period</a>
</h1>
<p id="rfc.section.4.p.1">Two concepts will be highlighted in this section: convergence time and loss of connectivity period.</p>
<p id="rfc.section.4.p.2">The Route Convergence <a href="#Po11t">[Po11t]</a> time indicates the period in time between the Convergence Event Instant <a href="#Po11t">[Po11t]</a> and the instant in time the DUT is ready to forward traffic for a specific route on its Next-Best Egress Interface and maintains this state for the duration of the Sustained Convergence Validation Time <a href="#Po11t">[Po11t]</a>. To measure Route Convergence time, the Convergence Event Instant and the traffic received from the Next-Best Egress Interface need to be observed.</p>
<p id="rfc.section.4.p.3">The Route Loss of Connectivity Period <a href="#Po11t">[Po11t]</a> indicates the time during which traffic to a specific route is lost following a Convergence Event until Full Convergence <a href="#Po11t">[Po11t]</a> completes. This Route Loss of Connectivity Period can consist of one or more Loss Periods <a href="#Ko02">[Ko02]</a>. For the testcases described in this document it is expected to have a single Loss Period. To measure Route Loss of Connectivity Period, the traffic received from the Preferred Egress Interface and the traffic received from the Next-Best Egress Interface need to be observed.</p>
<p id="rfc.section.4.p.4">The Route Loss of Connectivity Period is most important since that has a direct impact on the network user's application performance.</p>
<p id="rfc.section.4.p.5">In general the Route Convergence time is larger than or equal to the Route Loss of Connectivity Period. Depending on which Convergence Event occurs and how this Convergence Event is applied, traffic for a route may still be forwarded over the Preferred Egress Interface after the Convergence Event Instant, before converging to the Next-Best Egress Interface. In that case the Route Loss of Connectivity Period is shorter than the Route Convergence time.</p>
<p id="rfc.section.4.p.6">At least one condition needs to be fulfilled for Route Convergence time to be equal to Route Loss of Connectivity Period. The condition is that the Convergence Event causes an instantaneous traffic loss for the measured route. A fiber cut on the Preferred Egress Interface is an example of such a Convergence Event.</p>
<p id="rfc.section.4.p.7">A second condition applies to Route Convergence time measurements based on Connectivity Packet Loss <a href="#Po11t">[Po11t]</a>. This second condition is that there is only a single Loss Period during Route Convergence. For the testcases described in this document this is expected to be the case.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#conv_time_no_instant_loss" id="conv_time_no_instant_loss">Convergence Events without instant traffic loss</a>
</h1>
<p id="rfc.section.4.1.p.1">To measure convergence time benchmarks for Convergence Events caused by a Tester, such as an IGP cost change, the Tester MAY start to discard all traffic received from the Preferred Egress Interface at the Convergence Event Instant, or MAY separately observe packets received from the Preferred Egress Interface prior to the Convergence Event Instant. This way these Convergence Events can be treated the same as Convergence Events that cause instantaneous traffic loss.</p>
<p id="rfc.section.4.1.p.2">To measure convergence time benchmarks without instantaneous traffic loss (either real or induced by the Tester) at the Convergence Event Instant, such as a reversion of a link failure Convergence Event, the Tester SHALL only observe packet statistics on the Next-Best Egress Interface. If using the Rate-Derived method to benchmark convergence times for such Convergence Events, the Tester MUST collect a timestamp at the Convergence Event Instant. If using a loss-derived method to benchmark convergence times for such Convergence Events, the Tester MUST measure the period in time between the Start Traffic Instant and the Convergence Event Instant. To measure this period in time the Tester can collect timestamps at the Start Traffic Instant and the Convergence Event Instant.</p>
<p id="rfc.section.4.1.p.3">The Convergence Event Instant together with the receive rate observations on the Next-Best Egress Interface allow to derive the convergence time benchmarks using the Rate-Derived Method <a href="#Po11t">[Po11t]</a>.</p>
<p id="rfc.section.4.1.p.4">By observing packets on the Next-Best Egress Interface only, the observed Impaired Packet count is the number of Impaired Packets between Traffic Start Instant and Convergence Recovery Instant. To measure convergence times using a loss-derived method, the Impaired Packet count between the Convergence Event Instant and the Convergence Recovery Instant is needed. The time between Traffic Start Instant and Convergence Event Instant must be accounted for. An example may clarify this.</p>
<p id="rfc.section.4.1.p.5">Figure <a href="#non_instant_loss_example"></a> illustrates a Convergence Event without instantaneous traffic loss for all routes. The top graph shows the Forwarding Rate over all routes, the bottom graph shows the Forwarding Rate for a single route Rta. Some time after the Convergence Event Instant, Forwarding Rate observed on the Preferred Egress Interface starts to decrease. In the example, route Rta is the first route to experience packet loss at time Ta. Some time later, the Forwarding Rate observed on the Next-Best Egress Interface starts to increase. In the example, route Rta is the first route to complete convergence at time Ta'.</p>
<div id="#rfc.figure.8"></div>
<div id="#non_instant_loss_example"></div>
<pre>
     ^        
Fwd  |
Rate |-------------                    ............
     |             \                  .
     |              \                .
     |               \              .
     |                \            .
     |.................-.-.-.-.-.-.----------------
     +----+-------+---------------+-----------------&gt;
     ^    ^       ^               ^             time
    T0   CEI      Ta              Ta'

     ^        
Fwd  |
Rate |-------------               .................
Rta  |            |               .
     |            |               .
     |.............-.-.-.-.-.-.-.-.----------------
     +----+-------+---------------+-----------------&gt;
     ^    ^       ^               ^             time
    T0   CEI      Ta              Ta'

     Preferred Egress Interface: ---
     Next-Best Egress Interface: ...
</pre>
<p>With T0 the Start Traffic Instant; CEI the Convergence Event Instant; Ta the time instant packet loss for route Rta starts; Ta' the time instant packet impairment for route Rta ends.</p>
<p id="rfc.section.4.1.p.6">If only packets received on the Next-Best Egress Interface are observed, the duration of the loss period for route Rta can be calculated from the received packets as in Equation 1. Since the Convergence Event Instant is the start time for convergence time measurement, the period in time between T0 and CEI needs to be subtracted from the calculated result to become the convergence time, as in Equation 2.</p>
<div id="#rfc.figure.9"></div>
<pre>
Next-Best Egress Interface loss period
    = (packets transmitted
        - packets received from Next-Best Egress Interface) / tx rate
    = Ta' - T0
</pre>
<p>Equation 1</p>
<div id="#rfc.figure.10"></div>
<pre>
convergence time
    = Next-Best Egress Interface loss period - (CEI - T0)
    = Ta' - CEI
</pre>
<p>Equation 2</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Loss of Connectivity (LoC)</h1>
<p id="rfc.section.4.2.p.1">Route Loss of Connectivity Period SHOULD be measured using the Route-Specific Loss-Derived Method. Since the start instant and end instant of the Route Loss of Connectivity Period can be different for each route, these can not be accurately derived by only observing global statistics over all routes. An example may clarify this.</p>
<p id="rfc.section.4.2.p.2">Following a Convergence Event, route Rta is the first route for which packet impairment starts, the Route Loss of Connectivity Period for route Rta starts at time Ta. Route Rtb is the last route for which packet impairment starts, the Route Loss of Connectivity Period for route Rtb starts at time Tb with Tb&gt;Ta.</p>
<div id="#rfc.figure.11"></div>
<div id="#Fig7"></div>
<pre>
     ^
Fwd  |
Rate |--------                       -----------
     |        \                     /
     |         \                   /
     |          \                 /
     |           \               /
     |            ---------------
     +------------------------------------------&gt;
              ^   ^             ^    ^      time
             Ta   Tb           Ta'   Tb'
                               Tb''  Ta''
</pre>
<p id="rfc.section.4.2.p.3">If the DUT implementation were such that route Rta would be the first route for which traffic loss ends at time Ta' (with Ta'&gt;Tb) and route Rtb would be the last route for which traffic loss ends at time Tb' (with Tb'&gt;Ta'). By only observing global traffic statistics over all routes, the minimum Route Loss of Connectivity Period would be measured as Ta'-Ta. The maximum calculated Route Loss of Connectivity Period would be Tb'-Ta. The real minimum and maximum Route Loss of Connectivity Periods are Ta'-Ta and Tb'-Tb. Illustrating this with the numbers Ta=0, Tb=1, Ta'=3, and Tb'=5, would give a Loss of Connectivity Period between 3 and 5 derived from the global traffic statistics, versus the real Loss of Connectivity Period between 3 and 4.</p>
<p id="rfc.section.4.2.p.4">If the DUT implementation were such that route Rtb would be the first for which packet loss ends at time Tb'' and route Rta would be the last for which packet impairment ends at time Ta'', then the minimum and maximum Route Loss of Connectivity Periods derived by observing only global traffic statistics would be Tb''-Ta, and Ta''-Ta. The real minimum and maximum Route Loss of Connectivity Periods are Tb''-Tb and Ta''-Ta. Illustrating this with the numbers Ta=0, Tb=1, Ta''=5, Tb''=3, would give a Loss of Connectivity Period between 3 and 5 derived from the global traffic statistics, versus the real Loss of Connectivity Period between 2 and 5.</p>
<p id="rfc.section.4.2.p.5">The two implementation variations in the above example would result in the same derived minimum and maximum Route Loss of Connectivity Periods when only observing the global packet statistics, while the real Route Loss of Connectivity Periods are different.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Test Considerations</h1>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> IGP Selection</h1>
<p id="rfc.section.5.1.p.1">The test cases described in Section <a href="#test_cases">8</a> can be used for link-state IGPs, such as IS-IS or OSPF. The IGP convergence time test methodology is identical.</p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> Routing Protocol Configuration</h1>
<p id="rfc.section.5.2.p.1">The obtained results for IGP convergence time may vary if other routing protocols are enabled and routes learned via those protocols are installed. IGP convergence times SHOULD be benchmarked without routes installed from other protocols. Any enabled IGP routing protocol extension (such as extensions for Traffic Engineering) and any enabled IGP routing protocol security mechanism must be reported with the results.</p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> IGP Topology</h1>
<p id="rfc.section.5.3.p.1">The Tester emulates a single IGP topology. The DUT establishes IGP adjacencies with one or more of the emulated routers in this single IGP topology emulated by the Tester. See test topology details in <a href="#test_topologies">Section 3</a>. The emulated topology SHOULD only be advertised on the DUT egress interfaces.</p>
<p id="rfc.section.5.3.p.2">The number of IGP routes and number of nodes in the topology, and the type of topology will impact the measured IGP convergence time. To obtain results similar to those that would be observed in an operational network, it is RECOMMENDED that the number of installed routes and nodes closely approximate that of the network (e.g.  thousands of routes with tens or hundreds of nodes).</p>
<p id="rfc.section.5.3.p.3">The number of areas (for OSPF) and levels (for IS-IS) can impact the benchmark results.</p>
<h1 id="rfc.section.5.4">
<a href="#rfc.section.5.4">5.4.</a> Timers</h1>
<p id="rfc.section.5.4.p.1">There are timers that may impact the measured IGP convergence times. The benchmark metrics MAY be measured at any fixed values for these timers. To obtain results similar to those that would be observed in an operational network, it is RECOMMENDED to configure the timers with the values as configured in the operational network.</p>
<p id="rfc.section.5.4.p.2">Examples of timers that may impact measured IGP convergence time include, but are not limited to:</p>
<p></p>

<ul class="empty">
<li>Interface failure indication</li>
<li>IGP hello timer</li>
<li>IGP dead-interval or hold-timer</li>
<li>Link State Advertisement (LSA) or Link State Packet (LSP) generation delay</li>
<li>LSA or LSP flood packet pacing</li>
<li>route calculation delay</li>
</ul>
<h1 id="rfc.section.5.5">
<a href="#rfc.section.5.5">5.5.</a> Interface Types</h1>
<p id="rfc.section.5.5.p.1">All test cases in this methodology document can be executed with any interface type. The type of media may dictate which test cases may be executed. Each interface type has a unique mechanism for detecting link failures and the speed at which that mechanism operates will influence the measurement results. All interfaces MUST be the same media and Throughput <a href="#Br91">[Br91]</a><a href="#Br99">[Br99]</a> for each test case. All interfaces SHOULD be configured as point-to-point.</p>
<h1 id="rfc.section.5.6">
<a href="#rfc.section.5.6">5.6.</a> <a href="#test_considerations_offered_load" id="test_considerations_offered_load">Offered Load</a>
</h1>
<p id="rfc.section.5.6.p.1">The Throughput of the device, as defined in <a href="#Br91">[Br91]</a> and benchmarked in <a href="#Br99">[Br99]</a> at a fixed packet size, needs to be determined over the preferred path and over the next-best path. The Offered Load SHOULD be the minimum of the measured Throughput of the device over the primary path and over the backup path. The packet size is selectable and MUST be recorded.  Packet size is measured in bytes and includes the IP header and payload.</p>
<p id="rfc.section.5.6.p.2">The destination addresses for the Offered Load MUST be distributed such that all routes or a statistically representative subset of all routes are matched and each of these routes is offered an equal share of the Offered Load. It is RECOMMENDED to send traffic matching all routes, but a statistically representative subset of all routes can be used if required.</p>
<p id="rfc.section.5.6.p.3">Splitting traffic flows across multiple paths (as with ECMP or Parallel Link sets) is in general done by hashing on various fields on the IP or contained headers. The hashing is typically based on the IP source and destination addresses, the protocol ID, and higher-layer flow-dependent fields such as TCP/UDP ports. In practice, within a network core, the hashing is based mainly or exclusively on the IP source and destination addresses. Knowledge of the hashing algorithm used by the DUT is not always possible beforehand, and would violate the black-box spirit of this document. Therefor it is RECOMMENDED to use a randomly distributed range of source and destination IP addresses, protocol IDs, and higher-layer flow-dependent fields for the packets of the Offered Load (see also <a href="#Ne07">[Ne07]</a>). The content of the Offered Load MUST remain the same during the test. It is RECOMMENDED to repeat a test multiple times with different random ranges of the header fields such that convergence time benchmarks are measured for different distributions of traffic over the available paths.</p>
<p id="rfc.section.5.6.p.4">In the Remote Interface failure testcases using topologies <a href="#remote_nlb"></a>, <a href="#remote_lb_1toN"></a>, and <a href="#remote_lb"></a> there is a possibility of a packet forwarding loop that may occur transiently between DUT1 and DUT2 during convergence (micro-loop, see <a href="#Sh10">[Sh10]</a>). The Time To Live (TTL) or Hop Limit value of the packets sent by the Tester may influence the benchmark measurements since it determines which device in the topology may send an ICMP Time Exceeded Message for looped packets.</p>
<p id="rfc.section.5.6.p.5">The duration of the Offered Load MUST be greater than the convergence time plus the Sustained Convergence Validation Time.</p>
<p id="rfc.section.5.6.p.6">Offered load should send a packet to each destination before sending another packet to the same destination. It is RECOMMENDED that the packets be transmitted in a round-robin fashion with a uniform interpacket delay.</p>
<h1 id="rfc.section.5.7">
<a href="#rfc.section.5.7">5.7.</a> Measurement Accuracy</h1>
<p id="rfc.section.5.7.p.1">Since Impaired Packet count is observed to measure the Route Convergence Time, the time between two successive packets offered to each individual route is the highest possible accuracy of any Impaired Packet based measurement. The higher the traffic rate offered to each route the higher the possible measurement accuracy.</p>
<p id="rfc.section.5.7.p.2">Also see Section <a href="#selection_metrics_methods">6</a> for method-specific measurement accuracy.</p>
<h1 id="rfc.section.5.8">
<a href="#rfc.section.5.8">5.8.</a> Measurement Statistics</h1>
<p id="rfc.section.5.8.p.1">The benchmark measurements may vary for each trial, due to the statistical nature of timer expirations, cpu scheduling, etc.  Evaluation of the test data must be done with an understanding of generally accepted testing practices regarding repeatability, variance and statistical significance of a small number of trials.</p>
<h1 id="rfc.section.5.9">
<a href="#rfc.section.5.9">5.9.</a> Tester Capabilities</h1>
<p id="rfc.section.5.9.p.1">It is RECOMMENDED that the Tester used to execute each test case have the following capabilities:</p>
<p></p>

<ol>
<li>Ability to establish IGP adjacencies and advertise a single IGP topology to one or more peers.</li>
<li>Ability to measure Forwarding Delay, Duplicate Packets and Out-of-Order Packets.</li>
<li>An internal time clock to control timestamping, time measurements, and time calculations.</li>
<li>Ability to distinguish traffic load received on the Preferred and Next-Best Interfaces <a href="#Po11t">[Po11t]</a>.</li>
<li>Ability to disable or tune specific Layer-2 and Layer-3 protocol functions on any interface(s).</li>
</ol>
<p id="rfc.section.5.9.p.3">The Tester MAY be capable to make non-data plane convergence observations and use those observations for measurements. The Tester MAY be capable to send and receive multiple traffic Streams <a href="#Po06">[Po06]</a>.</p>
<p id="rfc.section.5.9.p.4">Also see Section <a href="#selection_metrics_methods">6</a> for method-specific capabilities.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#selection_metrics_methods" id="selection_metrics_methods">Selection of Convergence Time Benchmark Metrics and Methods</a>
</h1>
<p id="rfc.section.6.p.1">Different convergence time benchmark methods MAY be used to measure convergence time benchmark metrics. The Tester capabilities are important criteria to select a specific convergence time benchmark method. The criteria to select a specific benchmark method include, but are not limited to:</p>
<div id="#rfc.table.2"></div>
<div id="#table_tester_capabilities"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left"></th>
<th class="left"></th>
</tr></thead>
<tbody>
<tr>
<td class="left">Tester capabilities:</td>
<td class="left">Sampling Interval, number of Stream statistics to collect</td>
</tr>
<tr>
<td class="left">Measurement accuracy:</td>
<td class="left">Sampling Interval, Offered Load, number of routes</td>
</tr>
<tr>
<td class="left">Test specification:</td>
<td class="left">number of routes</td>
</tr>
<tr>
<td class="left">DUT capabilities:</td>
<td class="left">Throughput, IP Packet Delay Variation</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> Loss-Derived Method</h1>
<h1 id="rfc.section.6.1.1">
<a href="#rfc.section.6.1.1">6.1.1.</a> Tester capabilities</h1>
<p id="rfc.section.6.1.1.p.1">To enable collecting statistics of Out-of-Order Packets per flow (See <a href="#Th00">[Th00]</a>, Section 3) the Offered Load SHOULD consist of multiple Streams <a href="#Po06">[Po06]</a> and each Stream SHOULD consist of a single flow . If sending multiple Streams, the measured traffic statistics for all Streams MUST be added together.</p>
<p id="rfc.section.6.1.1.p.2">In order to verify Full Convergence completion and the Sustained Convergence Validation Time, the Tester MUST measure Forwarding Rate each Packet Sampling Interval.</p>
<p id="rfc.section.6.1.1.p.3">The total number of Impaired Packets between the start of the traffic and the end of the Sustained Convergence Validation Time is used to calculate the Loss-Derived Convergence Time.</p>
<h1 id="rfc.section.6.1.2">
<a href="#rfc.section.6.1.2">6.1.2.</a> Benchmark Metrics</h1>
<p id="rfc.section.6.1.2.p.1">The Loss-Derived Method can be used to measure the Loss-Derived Convergence Time, which is the average convergence time over all routes, and to measure the Loss-Derived Loss of Connectivity Period, which is the average Route Loss of Connectivity Period over all routes.</p>
<h1 id="rfc.section.6.1.3">
<a href="#rfc.section.6.1.3">6.1.3.</a> Measurement Accuracy</h1>
<p id="rfc.section.6.1.3.p.1">The actual value falls within the accuracy interval [-(number of destinations/Offered Load), +(number of destinations/Offered Load)] around the value as measured using the Loss-Derived Method.</p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> Rate-Derived Method</h1>
<h1 id="rfc.section.6.2.1">
<a href="#rfc.section.6.2.1">6.2.1.</a> Tester Capabilities</h1>
<p id="rfc.section.6.2.1.p.1">To enable collecting statistics of Out-of-Order Packets per flow (See <a href="#Th00">[Th00]</a>, Section 3) the Offered Load SHOULD consist of multiple Streams <a href="#Po06">[Po06]</a> and each Stream SHOULD consist of a single flow . If sending multiple Streams, the measured traffic statistics for all Streams MUST be added together.</p>
<p id="rfc.section.6.2.1.p.2">The Tester measures Forwarding Rate each Sampling Interval. The Packet Sampling Interval influences the observation of the different convergence time instants. If the Packet Sampling Interval is large compared to the time between the convergence time instants, then the different time instants may not be easily identifiable from the Forwarding Rate observation. The presence of IP Packet Delay Variation (IPDV) <a href="#De02">[De02]</a> may cause fluctuations of the Forwarding Rate observation and can prevent correct observation of the different convergence time instants.</p>
<p id="rfc.section.6.2.1.p.3">The Packet Sampling Interval MUST be larger than or equal to the time between two consecutive packets to the same destination. For maximum accuracy the value for the Packet Sampling Interval SHOULD be as small as possible, but the presence of IPDV may enforce using a larger Packet Sampling Interval. The Packet Sampling Interval MUST be reported.</p>
<p id="rfc.section.6.2.1.p.4">IPDV causes fluctuations in the number of received packets during each Packet Sampling Interval. To account for the presence of IPDV in determining if a convergence instant has been reached, Forwarding Delay SHOULD be observed during each Packet Sampling Interval. The minimum and maximum number of packets expected in a Packet Sampling Interval in presence of IPDV can be calculated with Equation 3.</p>
<div id="#rfc.figure.12"></div>
<pre>
number of packets expected in a Packet Sampling Interval
  in presence of IP Packet Delay Variation
    = expected number of packets without IP Packet Delay Variation
      +/-( (maxDelay - minDelay) * Offered Load)
with minDelay and maxDelay the minimum resp. maximum Forwarding Delay
  of packets received during the Packet Sampling Interval
</pre>
<p>Equation 3</p>
<p id="rfc.section.6.2.1.p.5">To determine if a convergence instant has been reached the number of packets received in a Packet Sampling Interval is compared with the range of expected number of packets calculated in Equation 3.</p>
<h1 id="rfc.section.6.2.2">
<a href="#rfc.section.6.2.2">6.2.2.</a> Benchmark Metrics</h1>
<p id="rfc.section.6.2.2.p.1">The Rate-Derived Method SHOULD be used to measure First Route Convergence Time and Full Convergence Time. It SHOULD NOT be used to measure Loss of Connectivity Period (see Section <a href="#section_conv_and_loc">4</a>).</p>
<h1 id="rfc.section.6.2.3">
<a href="#rfc.section.6.2.3">6.2.3.</a> Measurement Accuracy</h1>
<p id="rfc.section.6.2.3.p.1">The measurement accuracy interval of the Rate-Derived Method depends on the metric being measured or calculated and the characteristics of the related transition. IP Packet Delay Variation (IPDV) <a href="#De02">[De02]</a> adds uncertainty to the amount of packets received in a Packet Sampling Interval and this uncertainty adds to the measurement error. The effect of IPDV is not accounted for in the calculation of the accuracy intervals below. IPDV is of importance for the convergence instants were a variation in Forwarding Rate needs to be observed (Convergence Recovery Instant and for topologies with ECMP also Convergence Event Instant and First Route Convergence Instant).</p>
<p id="rfc.section.6.2.3.p.2">If the Convergence Event Instant is observed on the dataplane using the Rate Derived Method, it needs to be instantaneous for all routes (see <a href="#conv_time_no_instant_loss">Section 4.1</a>). The actual value of the Convergence Event Instant falls within the accuracy interval [&#8211;(Packet Sampling Interval + 1/Offered Load), +0] around the value as measured using the Rate-Derived Method.</p>
<p id="rfc.section.6.2.3.p.3">If the Convergence Recovery Transition is non-instantaneous for all routes then the actual value of the First Route Convergence Instant falls within the accuracy interval [&#8211;(Packet Sampling Interval + time between two consecutive packets to the same destination), +0] around the value as measured using the Rate-Derived Method, and the actual value of the Convergence Recovery Instant falls within the accuracy interval [&#8211;(2 * Packet Sampling Interval), &#8211;(Packet Sampling Interval - time between two consecutive packets to the same destination)] around the value as measured using the Rate-Derived Method.</p>
<p id="rfc.section.6.2.3.p.4">The term &#8220;time between two consecutive packets to the same destination&#8221; is added in the above accuracy intervals since packets are sent in a particular order to all destinations in a stream and when part of the routes experience packet loss, it is unknown where in the transmit cycle packets to these routes are sent. This uncertainty adds to the error.</p>
<p id="rfc.section.6.2.3.p.5">The accuracy intervals of the derived metrics First Route Convergence Time and Rate-Derived Convergence Time are calculated from the above convergence instants accuracy intervals. The actual value of First Route Convergence Time falls within the accuracy interval [&#8211;(Packet Sampling Interval + time between two consecutive packets to the same destination), +(Packet Sampling Interval + 1/Offered Load)] around the calculated value. The actual value of Rate-Derived Convergence Time falls within the accuracy interval [&#8211;(2 * Packet Sampling Interval), +(time between two consecutive packets to the same destination + 1/Offered Load)] around the calculated value.</p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> Route-Specific Loss-Derived Method</h1>
<h1 id="rfc.section.6.3.1">
<a href="#rfc.section.6.3.1">6.3.1.</a> Tester Capabilities</h1>
<p id="rfc.section.6.3.1.p.1">The Offered Load consists of multiple Streams. The Tester MUST measure Impaired Packet count for each Stream separately.</p>
<p id="rfc.section.6.3.1.p.2">In order to verify Full Convergence completion and the Sustained Convergence Validation Time, the Tester MUST measure Forwarding Rate each Packet Sampling Interval. This measurement at each Packet Sampling Interval MAY be per Stream.</p>
<p id="rfc.section.6.3.1.p.3">Only the total number of Impaired Packets measured per Stream at the end of the Sustained Convergence Validation Time is used to calculate the benchmark metrics with this method.</p>
<h1 id="rfc.section.6.3.2">
<a href="#rfc.section.6.3.2">6.3.2.</a> Benchmark Metrics</h1>
<p id="rfc.section.6.3.2.p.1">The Route-Specific Loss-Derived Method SHOULD be used to measure Route-Specific Convergence Times. It is the RECOMMENDED method to measure Route Loss of Connectivity Period.</p>
<p id="rfc.section.6.3.2.p.2">Under the conditions explained in Section <a href="#section_conv_and_loc">4</a>, First Route Convergence Time and Full Convergence Time as benchmarked using Rate-Derived Method, may be equal to the minimum resp. maximum of the Route-Specific Convergence Times.</p>
<h1 id="rfc.section.6.3.3">
<a href="#rfc.section.6.3.3">6.3.3.</a> Measurement Accuracy</h1>
<p id="rfc.section.6.3.3.p.1">The actual value falls within the accuracy interval [-(number of destinations/Offered Load), +(number of destinations/Offered Load)] around the value as measured using the Route-Specific Loss-Derived Method.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Reporting Format</h1>
<p id="rfc.section.7.p.1">For each test case, it is RECOMMENDED that the reporting tables below be completed and all time values SHOULD be reported with a sufficiently high resolution.</p>
<div id="#rfc.table.3"></div>
<div id="#table_report_config"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Parameter</th>
<th class="left">Units</th>
</tr></thead>
<tbody>
<tr>
<td class="left">Test Case</td>
<td class="left">test case number</td>
</tr>
<tr>
<td class="left">Test Topology</td>
<td class="left">Test Topology Figure number</td>
</tr>
<tr>
<td class="left">IGP</td>
<td class="left">(IS-IS, OSPF, other)</td>
</tr>
<tr>
<td class="left">Interface Type</td>
<td class="left">(GigE, POS, ATM, other)</td>
</tr>
<tr>
<td class="left">Packet Size offered to DUT</td>
<td class="left">bytes</td>
</tr>
<tr>
<td class="left">Offered Load</td>
<td class="left">packets per second</td>
</tr>
<tr>
<td class="left">IGP Routes advertised to DUT</td>
<td class="left">number of IGP routes</td>
</tr>
<tr>
<td class="left">Nodes in emulated network</td>
<td class="left">number of nodes</td>
</tr>
<tr>
<td class="left">Number of Parallel or ECMP links</td>
<td class="left">number of links</td>
</tr>
<tr>
<td class="left">Number of Routes measured</td>
<td class="left">number of routes</td>
</tr>
<tr>
<td class="left">Packet Sampling Interval on Tester</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">Forwarding Delay Threshold</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left">Timer Values configured on DUT:</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">Interface failure indication delay</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">IGP Hello Timer</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">IGP Dead-Interval or hold-time</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">LSA/LSP Generation Delay</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">LSA/LSP Flood Packet Pacing</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">LSA/LSP Retransmission Packet Pacing</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">route calculation Delay</td>
<td class="left">seconds</td>
</tr>
</tbody>
</table>
<p id="rfc.section.7.p.2">Test Details:</p>

<ul class="empty">
<li>Describe the IGP extensions and IGP security mechanisms that are configured on the DUT.</li>
<li>Describe how the various fields on the IP and contained headers for the packets for the Offered Load are generated (<a href="#test_considerations_offered_load">Section 5.6</a>).</li>
<li>If the Offered Load matches a subset of routes, describe how this subset is selected.</li>
<li>Describe how the Convergence Event is applied; does it cause instantaneous traffic loss or not?</li>
</ul>
<p id="rfc.section.7.p.3">The table below should be completed for the initial Convergence Event and the reversion Convergence Event.</p>
<div id="#rfc.table.4"></div>
<div id="#table_report_measurements"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Parameter</th>
<th class="left">Units</th>
</tr></thead>
<tbody>
<tr>
<td class="left">Convergence Event</td>
<td class="left">(initial or reversion)</td>
</tr>
<tr>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left">Traffic Forwarding Metrics:</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">Total number of packets offered to DUT</td>
<td class="left">number of Packets</td>
</tr>
<tr>
<td class="left">Total number of packets forwarded by DUT</td>
<td class="left">number of Packets</td>
</tr>
<tr>
<td class="left">Connectivity Packet Loss</td>
<td class="left">number of Packets</td>
</tr>
<tr>
<td class="left">Convergence Packet Loss</td>
<td class="left">number of Packets</td>
</tr>
<tr>
<td class="left">Out-of-Order Packets</td>
<td class="left">number of Packets</td>
</tr>
<tr>
<td class="left">Duplicate Packets</td>
<td class="left">number of Packets</td>
</tr>
<tr>
<td class="left">excessive Forwarding Delay Packets</td>
<td class="left">number of Packets</td>
</tr>
<tr>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left">Convergence Benchmarks:</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">Rate-Derived Method:</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">First Route Convergence Time</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">Full Convergence Time</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">Loss-Derived Method:</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">Loss-Derived Convergence Time</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">Route-Specific Loss-Derived Method:</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">Route-Specific Convergence Time[n]</td>
<td class="left">array of seconds</td>
</tr>
<tr>
<td class="left">Minimum Route-Specific Convergence Time</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">Maximum Route-Specific Convergence Time</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">Median Route-Specific Convergence Time</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">Average Route-Specific Convergence Time</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left">Loss of Connectivity Benchmarks:</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">Loss-Derived Method:</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">Loss-Derived Loss of Connectivity Period</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">Route-Specific Loss-Derived Method:</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">Route Loss of Connectivity Period[n]</td>
<td class="left">array of seconds</td>
</tr>
<tr>
<td class="left">Minimum Route Loss of Connectivity Period</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">Maximum Route Loss of Connectivity Period</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">Median Route Loss of Connectivity Period</td>
<td class="left">seconds</td>
</tr>
<tr>
<td class="left">Average Route Loss of Connectivity Period</td>
<td class="left">seconds</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#test_cases" id="test_cases">Test Cases</a>
</h1>
<p id="rfc.section.8.p.1">It is RECOMMENDED that all applicable test cases be performed for best characterization of the DUT. The test cases follow a generic procedure tailored to the specific DUT configuration and Convergence Event <a href="#Po11t">[Po11t]</a>. This generic procedure is as follows:</p>
<p></p>

<ol>
<li>Establish DUT and Tester configurations and advertise an IGP topology from Tester to DUT.</li>
<li>Send Offered Load from Tester to DUT on ingress interface.</li>
<li>Verify traffic is routed correctly. Verify if traffic is forwarded without Impaired Packets <a href="#Po06">[Po06]</a>.</li>
<li>Introduce Convergence Event <a href="#Po11t">[Po11t]</a>.</li>
<li>Measure First Route Convergence Time <a href="#Po11t">[Po11t]</a>.</li>
<li>Measure Full Convergence Time <a href="#Po11t">[Po11t]</a>.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period <a href="#Po11t">[Po11t]</a>. At the same time measure number of Impaired Packets <a href="#Po11t">[Po11t]</a>.</li>
<li>Wait sufficient time for queues to drain. The duration of this time period MUST be larger than or equal to the Forwarding Delay Threshold.</li>
<li>Restart Offered Load.</li>
<li>Reverse Convergence Event.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets <a href="#Po11t">[Po11t]</a>.</li>
</ol>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> Interface Failure and Recovery</h1>
<h1 id="rfc.section.8.1.1">
<a href="#rfc.section.8.1.1">8.1.1.</a> <a href="#testcase_local_link_failure" id="testcase_local_link_failure">Convergence Due to Local Interface Failure and Recovery</a>
</h1>
<p id="rfc.section.8.1.1.p.1">Objective</p>
<p id="rfc.section.8.1.1.p.2">To obtain the IGP convergence measurements for Local Interface failure and recovery events. The Next-Best Egress Interface can be a single interface (Figure <a href="#local_nlb"></a>) or an ECMP set (Figure <a href="#local_lb_1toN"></a>). The test with ECMP topology (Figure <a href="#local_lb_1toN"></a>) is OPTIONAL.</p>
<p id="rfc.section.8.1.1.p.3">Procedure</p>
<p></p>

<ol>
<li>Advertise an IGP topology from Tester to DUT using the topology shown in Figure <a href="#local_nlb"></a> or <a href="#local_lb_1toN"></a>.</li>
<li>Send Offered Load from Tester to DUT on ingress interface.</li>
<li>Verify traffic is forwarded over Preferred Egress Interface.</li>
<li>Remove link on the Preferred Egress Interface of the DUT.  This is the Convergence Event.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times and Loss-Derived Convergence Time. At the same time measure number of Impaired Packets.</li>
<li>Wait sufficient time for queues to drain.</li>
<li>Restart Offered Load.</li>
<li>Restore link on the Preferred Egress Interface of the DUT.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period.At the same time measure number of Impaired Packets.</li>
</ol>
<h1 id="rfc.section.8.1.2">
<a href="#rfc.section.8.1.2">8.1.2.</a> <a href="#testcase_remote_link_failure" id="testcase_remote_link_failure">Convergence Due to Remote Interface Failure and Recovery</a>
</h1>
<p id="rfc.section.8.1.2.p.1">Objective</p>
<p id="rfc.section.8.1.2.p.2">To obtain the IGP convergence measurements for Remote Interface failure and recovery events. The Next-Best Egress Interface can be a single interface (Figure <a href="#remote_nlb"></a>) or an ECMP set (Figure <a href="#remote_lb_1toN"></a>). The test with ECMP topology (Figure <a href="#remote_lb_1toN"></a>) is OPTIONAL.</p>
<p id="rfc.section.8.1.2.p.3">Procedure</p>
<p></p>

<ol>
<li>Advertise an IGP topology from Tester to SUT using the topology shown in Figure <a href="#remote_nlb"></a> or <a href="#remote_lb_1toN"></a>.</li>
<li>Send Offered Load from Tester to SUT on ingress interface.</li>
<li>Verify traffic is forwarded over Preferred Egress Interface.</li>
<li>Remove link on the interface of the Tester connected to the Preferred Egress Interface of the SUT. This is the Convergence Event.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times and Loss-Derived Convergence Time. At the same time measure number of Impaired Packets.</li>
<li>Wait sufficient time for queues to drain.</li>
<li>Restart Offered Load.</li>
<li>Restore link on the interface of the Tester connected to the Preferred Egress Interface of the SUT.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets.</li>
</ol>
<p id="rfc.section.8.1.2.p.5">Discussion</p>
<p id="rfc.section.8.1.2.p.6">In this test case there is a possibility of a packet forwarding loop that may occur transiently between DUT1 and DUT2 during convergence (micro-loop, see <a href="#Sh10">[Sh10]</a>), which may increase the measured convergence times and loss of connectivity periods.</p>
<h1 id="rfc.section.8.1.3">
<a href="#rfc.section.8.1.3">8.1.3.</a> <a href="#testcase_local_lb_link_failure" id="testcase_local_lb_link_failure">Convergence Due to ECMP Member Local Interface Failure and Recovery</a>
</h1>
<p id="rfc.section.8.1.3.p.1">Objective</p>
<p id="rfc.section.8.1.3.p.2">To obtain the IGP convergence measurements for Local Interface link failure and recovery events of an ECMP Member.</p>
<p id="rfc.section.8.1.3.p.3">Procedure</p>
<p></p>

<ol>
<li>Advertise an IGP topology from Tester to DUT using the test setup shown in Figure <a href="#local_lb"></a>.</li>
<li>Send Offered Load from Tester to DUT on ingress interface.</li>
<li>Verify traffic is forwarded over the ECMP member interface of the DUT that will be failed in the next step.</li>
<li>Remove link on one of the ECMP member interfaces of the DUT.  This is the Convergence Event.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times and Loss-Derived Convergence Time. At the same time measure number of Impaired Packets.</li>
<li>Wait sufficient time for queues to drain.</li>
<li>Restart Offered Load.</li>
<li>Restore link on the ECMP member interface of the DUT.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets.</li>
</ol>
<h1 id="rfc.section.8.1.4">
<a href="#rfc.section.8.1.4">8.1.4.</a> <a href="#testcase_remote_lb_link_failure" id="testcase_remote_lb_link_failure">Convergence Due to ECMP Member Remote Interface Failure and Recovery</a>
</h1>
<p id="rfc.section.8.1.4.p.1">Objective</p>
<p id="rfc.section.8.1.4.p.2">To obtain the IGP convergence measurements for Remote Interface link failure and recovery events for an ECMP Member.</p>
<p id="rfc.section.8.1.4.p.3">Procedure</p>
<p></p>

<ol>
<li>Advertise an IGP topology from Tester to DUT using the test setup shown in Figure <a href="#remote_lb"></a>.</li>
<li>Send Offered Load from Tester to DUT on ingress interface.</li>
<li>Verify traffic is forwarded over the ECMP member interface of the DUT that will be failed in the next step.</li>
<li>Remove link on the interface of the Tester to R2. This is the Convergence Event Trigger.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times and Loss-Derived Convergence Time. At the same time measure number of Impaired Packets.</li>
<li>Wait sufficient time for queues to drain.</li>
<li>Restart Offered Load.</li>
<li>Restore link on the interface of the Tester to R2.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets.</li>
</ol>
<p id="rfc.section.8.1.4.p.5">Discussion</p>
<p id="rfc.section.8.1.4.p.6">In this test case there is a possibility of a packet forwarding loop that may occur temporarily between DUT1 and DUT2 during convergence (micro-loop, see <a href="#Sh10">[Sh10]</a>), which may increase the measured convergence times and loss of connectivity periods.</p>
<h1 id="rfc.section.8.1.5">
<a href="#rfc.section.8.1.5">8.1.5.</a> <a href="#testcase_parallel_link_failure" id="testcase_parallel_link_failure">Convergence Due to Parallel Link Interface Failure and Recovery</a>
</h1>
<p id="rfc.section.8.1.5.p.1">Objective</p>
<p id="rfc.section.8.1.5.p.2">To obtain the IGP convergence measurements for local link failure and recovery events for a member of a parallel link. The links can be used for data load balancing</p>
<p id="rfc.section.8.1.5.p.3">Procedure</p>
<p></p>

<ol>
<li>Advertise an IGP topology from Tester to DUT using the test setup shown in Figure <a href="#local_parallel"></a>.</li>
<li>Send Offered Load from Tester to DUT on ingress interface.</li>
<li>Verify traffic is forwarded over the parallel link member that will be failed in the next step.</li>
<li>Remove link on one of the parallel link member interfaces of the DUT. This is the Convergence Event.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times and Loss-Derived Convergence Time. At the same time measure number of Impaired Packets.</li>
<li>Wait sufficient time for queues to drain.</li>
<li>Restart Offered Load.</li>
<li>Restore link on the Parallel Link member interface of the DUT.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets.</li>
</ol>
<h1 id="rfc.section.8.2">
<a href="#rfc.section.8.2">8.2.</a> Other Failures and Recoveries</h1>
<h1 id="rfc.section.8.2.1">
<a href="#rfc.section.8.2.1">8.2.1.</a> <a href="#testcase_layer2_session_failure" id="testcase_layer2_session_failure">Convergence Due to Layer 2 Session Loss and Recovery</a>
</h1>
<p id="rfc.section.8.2.1.p.1">Objective</p>
<p id="rfc.section.8.2.1.p.2">To obtain the IGP convergence measurements for a local layer 2 loss and recovery.</p>
<p id="rfc.section.8.2.1.p.3">Procedure</p>
<p></p>

<ol>
<li>Advertise an IGP topology from Tester to DUT using the topology shown in Figure <a href="#local_nlb"></a>.</li>
<li>Send Offered Load from Tester to DUT on ingress interface.</li>
<li>Verify traffic is routed over Preferred Egress Interface.</li>
<li>Remove Layer 2 session from Preferred Egress Interface of the DUT. This is the Convergence Event.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets.</li>
<li>Wait sufficient time for queues to drain.</li>
<li>Restart Offered Load.</li>
<li>Restore Layer 2 session on Preferred Egress Interface of the DUT.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets.</li>
</ol>
<p id="rfc.section.8.2.1.p.5">Discussion</p>
<p id="rfc.section.8.2.1.p.6">When removing the layer 2 session, the physical layer must stay up. Configure IGP timers such that the IGP adjacency does not time out before layer 2 failure is detected.</p>
<p id="rfc.section.8.2.1.p.7">To measure convergence time, traffic SHOULD start dropping on the Preferred Egress Interface on the instant the layer 2 session is removed. Alternatively the Tester SHOULD record the time the instant layer 2 session is removed and traffic loss SHOULD only be measured on the Next-Best Egress Interface. For loss-derived benchmarks the time of the Start Traffic Instant SHOULD be recorded as well. See Section <a href="#conv_time_no_instant_loss">4.1</a>.</p>
<h1 id="rfc.section.8.2.2">
<a href="#rfc.section.8.2.2">8.2.2.</a> <a href="#testcase_igp_adj_failure" id="testcase_igp_adj_failure">Convergence Due to Loss and Recovery of IGP Adjacency</a>
</h1>
<p id="rfc.section.8.2.2.p.1">Objective</p>
<p id="rfc.section.8.2.2.p.2">To obtain the IGP convergence measurements for loss and recovery of an IGP Adjacency. The IGP adjacency is removed on the Tester by disabling processing of IGP routing protocol packets on the Tester.</p>
<p id="rfc.section.8.2.2.p.3">Procedure</p>
<p></p>

<ol>
<li>Advertise an IGP topology from Tester to DUT using the topology shown in Figure <a href="#local_nlb"></a>.</li>
<li>Send Offered Load from Tester to DUT on ingress interface.</li>
<li>Verify traffic is routed over Preferred Egress Interface.</li>
<li>Remove IGP adjacency from the Preferred Egress Interface while the layer 2 session MUST be maintained. This is the Convergence Event.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets.</li>
<li>Wait sufficient time for queues to drain.</li>
<li>Restart Offered Load.</li>
<li>Restore IGP session on Preferred Egress Interface of the DUT.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets.</li>
</ol>
<p id="rfc.section.8.2.2.p.5">Discussion</p>
<p id="rfc.section.8.2.2.p.6">Configure layer 2 such that layer 2 does not time out before IGP adjacency failure is detected.</p>
<p id="rfc.section.8.2.2.p.7">To measure convergence time, traffic SHOULD start dropping on the Preferred Egress Interface on the instant the IGP adjacency is removed. Alternatively the Tester SHOULD record the time the instant the IGP adjacency is removed and traffic loss SHOULD only be measured on the Next-Best Egress Interface. For loss-derived benchmarks the time of the Start Traffic Instant SHOULD be recorded as well. See Section <a href="#conv_time_no_instant_loss">4.1</a>.</p>
<h1 id="rfc.section.8.2.3">
<a href="#rfc.section.8.2.3">8.2.3.</a> <a href="#testcase_route_withdrawal" id="testcase_route_withdrawal">Convergence Due to Route Withdrawal and Re-advertisement</a>
</h1>
<p id="rfc.section.8.2.3.p.1">Objective</p>
<p id="rfc.section.8.2.3.p.2">To obtain the IGP convergence measurements for route withdrawal and re-advertisement.</p>
<p id="rfc.section.8.2.3.p.3">Procedure</p>
<p></p>

<ol>
<li>Advertise an IGP topology from Tester to DUT using the topology shown in Figure <a href="#local_nlb"></a>. The routes that will be withdrawn MUST be a set of leaf routes advertised by at least two nodes in the emulated topology. The topology SHOULD be such that before the withdrawal the DUT prefers the leaf routes advertised by a node "nodeA" via the Preferred Egress Interface, and after the withdrawal the DUT prefers the leaf routes advertised by a node "nodeB" via the Next-Best Egress Interface.</li>
<li>Send Offered Load from Tester to DUT on Ingress Interface.</li>
<li>Verify traffic is routed over Preferred Egress Interface.</li>
<li>The Tester withdraws the set of IGP leaf routes from nodeA.  This is the Convergence Event. The withdrawal update message SHOULD be a single unfragmented packet. If the routes cannot be withdrawn by a single packet, the messages SHOULD be sent using the same pacing characteristics as the DUT. The Tester MAY record the time it sends the withdrawal message(s).</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets.</li>
<li>Wait sufficient time for queues to drain.</li>
<li>Restart Offered Load.</li>
<li>Re-advertise the set of withdrawn IGP leaf routes from nodeA emulated by the Tester. The update message SHOULD be a single unfragmented packet. If the routes cannot be advertised by a single packet, the messages SHOULD be sent using the same pacing characteristics as the DUT. The Tester MAY record the time it sends the update message(s).</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets.</li>
</ol>
<p id="rfc.section.8.2.3.p.5">Discussion</p>
<p id="rfc.section.8.2.3.p.6">To measure convergence time, traffic SHOULD start dropping on the Preferred Egress Interface on the instant the routes are withdrawn by the Tester. Alternatively the Tester SHOULD record the time the instant the routes are withdrawn and traffic loss SHOULD only be measured on the Next-Best Egress Interface. For loss-derived benchmarks the time of the Start Traffic Instant SHOULD be recorded as well. See Section <a href="#conv_time_no_instant_loss">4.1</a>.</p>
<h1 id="rfc.section.8.3">
<a href="#rfc.section.8.3">8.3.</a> Administrative changes</h1>
<h1 id="rfc.section.8.3.1">
<a href="#rfc.section.8.3.1">8.3.1.</a> Convergence Due to Local Interface Adminstrative Changes</h1>
<p id="rfc.section.8.3.1.p.1">Objective</p>
<p id="rfc.section.8.3.1.p.2">To obtain the IGP convergence measurements for administratively disabling and enabling a Local Interface.</p>
<p id="rfc.section.8.3.1.p.3">Procedure</p>
<p></p>

<ol>
<li>Advertise an IGP topology from Tester to DUT using the topology shown in Figure <a href="#local_nlb"></a>.</li>
<li>Send Offered Load from Tester to DUT on ingress interface.</li>
<li>Verify traffic is routed over Preferred Egress Interface.</li>
<li>Administratively disable the Preferred Egress Interface of the DUT. This is the Convergence Event.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets.</li>
<li>Wait sufficient time for queues to drain.</li>
<li>Restart Offered Load.</li>
<li>Administratively enable the Preferred Egress Interface of the DUT..</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets.</li>
</ol>
<h1 id="rfc.section.8.3.2">
<a href="#rfc.section.8.3.2">8.3.2.</a> <a href="#testcase_route_cost_change" id="testcase_route_cost_change">Convergence Due to Cost Change</a>
</h1>
<p id="rfc.section.8.3.2.p.1">Objective</p>
<p id="rfc.section.8.3.2.p.2">To obtain the IGP convergence measurements for route cost change.</p>
<p id="rfc.section.8.3.2.p.3">Procedure</p>
<p></p>

<ol>
<li>Advertise an IGP topology from Tester to DUT using the topology shown in Figure <a href="#local_nlb"></a>.</li>
<li>Send Offered Load from Tester to DUT on ingress interface.</li>
<li>Verify traffic is routed over Preferred Egress Interface.</li>
<li>The Tester, emulating the neighbor node, increases the cost for all IGP routes at Preferred Egress Interface of the DUT so that the Next-Best Egress Interface becomes preferred path. The update message advertising the higher cost MUST be a single unfragmented packet. This is the Convergence Event. The Tester MAY record the time it sends the update message advertising the higher cost on the Preferred Egress Interface.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets.</li>
<li>Wait sufficient time for queues to drain.</li>
<li>Restart Offered Load.</li>
<li>The Tester, emulating the neighbor node, decreases the cost for all IGP routes at Preferred Egress Interface of the DUT so that the Preferred Egress Interface becomes preferred path. The update message advertising the lower cost MUST be a single unfragmented packet.</li>
<li>Measure First Route Convergence Time.</li>
<li>Measure Full Convergence Time.</li>
<li>Stop Offered Load.</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived Convergence Time, Route Loss of Connectivity Periods, and Loss-Derived Loss of Connectivity Period. At the same time measure number of Impaired Packets.</li>
</ol>
<p id="rfc.section.8.3.2.p.5">Discussion</p>
<p id="rfc.section.8.3.2.p.6">To measure convergence time, traffic SHOULD start dropping on the Preferred Egress Interface on the instant the cost is changed by the Tester. Alternatively the Tester SHOULD record the time the instant the cost is changed and traffic loss SHOULD only be measured on the Next-Best Egress Interface. For loss-derived benchmarks the time of the Start Traffic Instant SHOULD be recorded as well. See Section <a href="#conv_time_no_instant_loss">4.1</a>.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> Security Considerations</h1>
<p id="rfc.section.9.p.1">Benchmarking activities as described in this memo are limited to technology characterization using controlled stimuli in a laboratory environment, with dedicated address space and the constraints specified in the sections above.</p>
<p id="rfc.section.9.p.2">The benchmarking network topology will be an independent test setup and MUST NOT be connected to devices that may forward the test traffic into a production network, or misroute traffic to the test management network.</p>
<p id="rfc.section.9.p.3">Further, benchmarking is performed on a "black-box" basis, relying solely on measurements observable external to the DUT/SUT.</p>
<p id="rfc.section.9.p.4">Special capabilities SHOULD NOT exist in the DUT/SUT specifically for benchmarking purposes. Any implications for network security arising from the DUT/SUT SHOULD be identical in the lab and in production networks.</p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> IANA Considerations</h1>
<p id="rfc.section.10.p.1">This document requires no IANA considerations.</p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> Acknowledgements</h1>
<p id="rfc.section.11.p.1">Thanks to Sue Hares, Al Morton, Kevin Dubray, Ron Bonica, David Ward, Peter De Vriendt, Anuj Dewagan, Julien Meuric, Adrian Farrel, Stewart Bryant, and the Benchmarking Methodology Working Group for their contributions to this work.</p>
<h1 id="rfc.references">
<a href="#rfc.references">12.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">12.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="Br91">[Br91]</b></td>
<td class="top">
<a href="mailto:SOB@HARVARD.HARVARD.EDU" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc1242">Benchmarking terminology for network interconnection devices</a>", RFC 1242, July 1991.</td>
</tr>
<tr>
<td class="reference"><b id="Br97">[Br97]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="Br99">[Br99]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a> and <a href="mailto:mcquaidj@netscout.com" title="NetScout Systems">J. McQuaid</a>, "<a href="http://tools.ietf.org/html/rfc2544">Benchmarking Methodology for Network Interconnect Devices</a>", RFC 2544, March 1999.</td>
</tr>
<tr>
<td class="reference"><b id="Ca90">[Ca90]</b></td>
<td class="top">
<a title="Digital Equipment Corporation (DEC)">Callon, R.</a>, "<a href="http://tools.ietf.org/html/rfc1195">Use of OSI IS-IS for routing in TCP/IP and dual environments</a>", RFC 1195, December 1990.</td>
</tr>
<tr>
<td class="reference"><b id="Ma98">[Ma98]</b></td>
<td class="top">
<a href="mailto:bob.mandeville@eunet.fr" title="European Network Laboratories (ENL)">Mandeville, R.</a>, "<a href="http://tools.ietf.org/html/rfc2285">Benchmarking Terminology for LAN Switching Devices</a>", RFC 2285, February 1998.</td>
</tr>
<tr>
<td class="reference"><b id="Mo98">[Mo98]</b></td>
<td class="top">
<a href="mailto:jmoy@casc.com" title="Ascend Communications, Inc.">Moy, J.</a>, "<a href="http://tools.ietf.org/html/rfc2328">OSPF Version 2</a>", STD 54, RFC 2328, April 1998.</td>
</tr>
<tr>
<td class="reference"><b id="Po06">[Po06]</b></td>
<td class="top">
<a>Poretsky, S.</a>, <a>Perser, J.</a>, <a>Erramilli, S.</a> and <a>S. Khurana</a>, "<a href="http://tools.ietf.org/html/rfc4689">Terminology for Benchmarking Network-layer Traffic Control Mechanisms</a>", RFC 4689, October 2006.</td>
</tr>
<tr>
<td class="reference"><b id="Co08">[Co08]</b></td>
<td class="top">
<a>Coltun, R.</a>, <a>Ferguson, D.</a>, <a>Moy, J.</a> and <a>A. Lindem</a>, "<a href="http://tools.ietf.org/html/rfc5340">OSPF for IPv6</a>", RFC 5340, July 2008.</td>
</tr>
<tr>
<td class="reference"><b id="Ho08">[Ho08]</b></td>
<td class="top">
<a>Hopps, C.</a>, "<a href="http://tools.ietf.org/html/rfc5308">Routing IPv6 with IS-IS</a>", RFC 5308, October 2008.</td>
</tr>
<tr>
<td class="reference"><b id="Ko02">[Ko02]</b></td>
<td class="top">
<a>Koodli, R.</a> and <a>R. Ravikanth</a>, "<a href="http://tools.ietf.org/html/rfc3357">One-way Loss Pattern Sample Metrics</a>", RFC 3357, August 2002.</td>
</tr>
<tr>
<td class="reference"><b id="Po11t">[Po11t]</b></td>
<td class="top">
<a>Poretsky, S</a>, <a>Imhoff, B</a> and <a>K Michielsen</a>, "<a href="http://tools.ietf.org/html/draft-ietf-bmwg-igp-dataplane-conv-term-23">Terminology for Benchmarking Link-State IGP Data Plane Route Convergence</a>", Internet-Draft draft-ietf-bmwg-igp-dataplane-conv-term-23, January 2011.</td>
</tr>
<tr>
<td class="reference"><b id="De02">[De02]</b></td>
<td class="top">
<a>Demichelis, C.</a> and <a>P. Chimento</a>, "<a href="http://tools.ietf.org/html/rfc3393">IP Packet Delay Variation Metric for IP Performance Metrics (IPPM)</a>", RFC 3393, November 2002.</td>
</tr>
<tr>
<td class="reference"><b id="Sh10">[Sh10]</b></td>
<td class="top">
<a>Shand, M.</a> and <a>S. Bryant</a>, "<a href="http://tools.ietf.org/html/rfc5715">A Framework for Loop-Free Convergence</a>", RFC 5715, January 2010.</td>
</tr>
<tr>
<td class="reference"><b id="Ne07">[Ne07]</b></td>
<td class="top">
<a>Newman, D.</a> and <a>T. Player</a>, "<a href="http://tools.ietf.org/html/rfc4814">Hash and Stuffing: Overlooked Factors in Network Device Benchmarking</a>", RFC 4814, March 2007.</td>
</tr>
<tr>
<td class="reference"><b id="Ma05">[Ma05]</b></td>
<td class="top">
<a>Manral, V.</a>, <a>White, R.</a> and <a>A. Shaikh</a>, "<a href="http://tools.ietf.org/html/rfc4061">Benchmarking Basic OSPF Single Router Control Plane Convergence</a>", RFC 4061, April 2005.</td>
</tr>
<tr>
<td class="reference"><b id="Ma05t">[Ma05t]</b></td>
<td class="top">
<a>Manral, V.</a>, <a>White, R.</a> and <a>A. Shaikh</a>, "<a href="http://tools.ietf.org/html/rfc4062">OSPF Benchmarking Terminology and Concepts</a>", RFC 4062, April 2005.</td>
</tr>
<tr>
<td class="reference"><b id="Ma05c">[Ma05c]</b></td>
<td class="top">
<a>Manral, V.</a>, <a>White, R.</a> and <a>A. Shaikh</a>, "<a href="http://tools.ietf.org/html/rfc4063">Considerations When Using Basic OSPF Convergence Benchmarks</a>", RFC 4063, April 2005.</td>
</tr>
<tr>
<td class="reference"><b id="Sh10i">[Sh10i]</b></td>
<td class="top">
<a>Shand, M.</a> and <a>S. Bryant</a>, "<a href="http://tools.ietf.org/html/rfc5714">IP Fast Reroute Framework</a>", RFC 5714, January 2010.</td>
</tr>
<tr>
<td class="reference"><b id="Pa05">[Pa05]</b></td>
<td class="top">
<a>Pan, P.</a>, <a>Swallow, G.</a> and <a>A. Atlas</a>, "<a href="http://tools.ietf.org/html/rfc4090">Fast Reroute Extensions to RSVP-TE for LSP Tunnels</a>", RFC 4090, May 2005.</td>
</tr>
<tr>
<td class="reference"><b id="Th00">[Th00]</b></td>
<td class="top">
<a>Thaler, D.</a> and <a>C. Hopps</a>, "<a href="http://tools.ietf.org/html/rfc2991">Multipath Issues in Unicast and Multicast Next-Hop Selection</a>", RFC 2991, November 2000.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">12.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="Al00">[Al00]</b></td>
<td class="top">
<a>Alaettinoglu, C.</a>, <a>Jacobson, V.</a> and <a>H. Yu</a>, "<a>Towards Millisecond IGP Convergence</a>", NANOG 20, October 2000.</td>
</tr>
<tr>
<td class="reference"><b id="Al02">[Al02]</b></td>
<td class="top">
<a>Alaettinoglu, C.</a> and <a>S. Casner</a>, "<a>ISIS Routing on the Qwest Backbone: a Recipe for Subsecond ISIS Convergence</a>", NANOG 24, February 2002.</td>
</tr>
<tr>
<td class="reference"><b id="Fi02">[Fi02]</b></td>
<td class="top">
<a>Filsfils, C.</a>, "<a>Tutorial: Deploying Tight-SLA Services on an Internet Backbone: ISIS Fast Convergence and Differentiated Services Design</a>", NANOG 25, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="Ka02">[Ka02]</b></td>
<td class="top">
<a>Katz, D.</a>, "<a>Why are we scared of SPF? IGP Scaling and Stability</a>", NANOG 25, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="Vi02">[Vi02]</b></td>
<td class="top">
<a>Villamizar, C.</a>, "<a>Convergence and Restoration Techniques for ISP Interior Routing</a>", NANOG 25, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="Fr05">[Fr05]</b></td>
<td class="top">
<a>Francois, P.</a>, <a>Filsfils, C.</a>, <a>Evans, J.</a> and <a>O. Bonaventure</a>, "<a>Achieving SubSecond IGP Convergence in Large IP Networks</a>", ACM SIGCOMM Computer Communication Review v.35 n.3, July 2005.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Scott Poretsky</span> 
	  <span class="n hidden">
		<span class="family-name">Poretsky</span>
	  </span>
	</span>
	<span class="org vcardline">Allot Communications</span>
	<span class="adr">
	  <span>67 South Bedford Street, Suite 400</span>

	  <span class="vcardline">
		<span class="locality">Burlington</span>,  
		<span class="region">MA</span> 
		<span class="code">01803</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: + 1 508 309 2179</span>

<span class="vcardline">EMail: <a href="mailto:sporetsky@allot.com">sporetsky@allot.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Brent Imhoff</span> 
	  <span class="n hidden">
		<span class="family-name">Imhoff</span>
	  </span>
	</span>
	<span class="org vcardline">Juniper Networks</span>
	<span class="adr">
	  <span>1194 North Mathilda Ave</span>

	  <span class="vcardline">
		<span class="locality">Sunnyvale</span>,  
		<span class="region">CA</span> 
		<span class="code">94089</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: + 1 314 378 2571</span>

<span class="vcardline">EMail: <a href="mailto:bimhoff@planetspork.com">bimhoff@planetspork.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Kris Michielsen</span> 
	  <span class="n hidden">
		<span class="family-name">Michielsen</span>
	  </span>
	</span>
	<span class="org vcardline">Cisco Systems</span>
	<span class="adr">
	  <span>6A De Kleetlaan</span>

	  <span class="vcardline">
		<span class="locality">Diegem</span>,  
		<span class="region">BRABANT</span> 
		<span class="code">1831</span>
	  </span>
	  <span class="country-name vcardline">Belgium</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:kmichiel@cisco.com">kmichiel@cisco.com</a></span>

  </address>
</div>

</body>
</html>