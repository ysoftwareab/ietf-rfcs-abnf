<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>HyBi WebSocket Requirements and Features </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Requirements Language">
<link href="#rfc.section.3" rel="Chapter" title="3 WebSocket Requirements">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 WebSocket Client Requirements">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 WebSocket Server Requirements">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 WebSocket Proxies Requirements">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 WebSocket Security Requirements">
<link href="#rfc.section.4" rel="Chapter" title="4 Security Considerations">
<link href="#rfc.section.5" rel="Chapter" title="5 IANA Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 Acknowledgments">
<link href="#rfc.references" rel="Chapter" title="7 References">
<link href="#rfc.references.1" rel="Chapter" title="7.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="7.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document states the requirements of the WebSocket Protocol.  The goal of the document is to provide a stable base for protocol design and related discussion.  " />
  <meta name="description" content="This document states the requirements of the WebSocket Protocol.  The goal of the document is to provide a stable base for protocol design and related discussion.  " />
  <meta name="keywords" content="HTTP, WebSocket" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">HYBI Working Group</td>
<td class="right">G. Montenegro, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Microsoft Corporation</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">March 14, 2011</td>
</tr>
<tr>
<td class="left">Expires: September 15, 2011</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">HyBi WebSocket Requirements and Features <br />
  <span class="filename">draft-ietf-hybi-websocket-requirements-02</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document states the requirements of the WebSocket Protocol.  The goal of the document is to provide a stable base for protocol design and related discussion.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on September 15, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Requirements Language</a>
</li>
<li>3.   <a href="#rfc.section.3">WebSocket Requirements</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">WebSocket Client Requirements</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">WebSocket Server Requirements</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">WebSocket Proxies Requirements</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">WebSocket Security Requirements</a>
</li>
<li>4.   <a href="#rfc.section.4">Security Considerations</a>
</li>
<li>5.   <a href="#rfc.section.5">IANA Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">Acknowledgments</a>
</li>
<li>7.   <a href="#rfc.references">References</a>
</li>
<li>7.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>7.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">HTTP <a href="#RFC2616">[RFC2616]</a> is a client/server protocol, where the HTTP servers store the data and provide it when it is requested by clients.  When used to retrieve data from an HTTP server, the client sends HTTP requests to the server, and the server returns the requested data in HTTP responses. So the client has to poll the server continuously in order to receive new data.</p>
<p id="rfc.section.1.p.2">Recently, techniques that enable bidirectional communication over HTTP have become more pervasive. Those techniques reduce the need to poll continuously the server thanks to the usage of HTTP hanging requests and multiple connections between the client and the server <a href="#I-D.ietf-hybi-design-space">[I-D.ietf-hybi-design-space]</a>.</p>
<p id="rfc.section.1.p.3">The goal of HyBi is to provide an efficient and clean two-way communication channel between client and server.</p>
<p id="rfc.section.1.p.4">The communication channel will: </p>
<p></p>

<ul><li>Allow each side to, independently from the other, send data when it is willing and ready to do so.</li></ul>
<p></p>

<ul><li>Rely on a single TCP connection for traffic in both directions.</li></ul>
<p></p>

<ul><li>Reduce the high overhead produced by HTTP headers in each request/response.</li></ul>
<p id="rfc.section.1.p.8">The goal of this work is to provide the set of requirements for the WebSocket Protocol.</p>
<p id="rfc.section.1.p.9">In the following sections we list and analyse the requirements from the perspective of clients and servers.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Terminology</h1>
<p id="rfc.section.2.p.1">This document uses the following HyBi-related terms:</p>
<p></p>

<dl>
<dt>connection:</dt>
<dd style="margin-left: 8">A transport layer virtual circuit established between a client and a server for the purpose of communication.</dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>frame:</dt>
<dd style="margin-left: 8">The basic unit of WebSocket communication, consisting of a structured sequence of octets matching the syntax defined in the actual protocol and transmitted on the established communication channel.</dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>message:</dt>
<dd style="margin-left: 8">user message: a block of related data with identified boundaries.  A message may comprise multiple frames.</dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>origin server:</dt>
<dd style="margin-left: 8">The server on which a given resource resides or is to be created.</dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>WebSocket handshake:</dt>
<dd style="margin-left: 8">The process (and associated capability negotiation) that sets up the WebSocket communication channel.  </dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>WebSocket communication channel:</dt>
<dd style="margin-left: 8">After the WebSocket handshake is complete, the resultant bi-directional communication path between client and server over the transport (e.g., TCP, or SSL over TCP).  </dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>WebSocket sub-protocol:</dt>
<dd style="margin-left: 8">The negotiated sub-protocol for use on a WebSocket communication channel that dictates framing, encoding, etc.  </dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
</dl>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> Requirements Language</h1>
<p id="rfc.section.2.1.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> WebSocket Requirements</h1>
<p id="rfc.section.3.p.1">The following requirements for the WebSocket Protocol have been identified both in the HyBi wg input document <a href="#I-D.ietf-hybi-thewebsocketprotocol">[I-D.ietf-hybi-thewebsocketprotocol]</a> and in the HyBi mailing list dicussion.</p>
<p></p>

<dl>
<dt>REQ. 1:</dt>
<dd style="margin-left: 8">The WebSocket Protocol MUST run directly on top of the transport protocol (over which the communication was running up to and including the WebSocket handshake).  The transport protocol is limited to TCP.  </dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>REQ. 2:</dt>
<dd style="margin-left: 8">The WebSocket Protocol MUST be able to handle (send and receive) messages on the transport protocol (over which the communication was running up to and including the WebSocket handshake).</dd>
</dl>
<p id="rfc.section.3.p.3">Reason:  transfer data as message obviates the need for the receiver to parse/handle partial content.  </p>
<p></p>

<dl>
<dt>REQ. 3:</dt>
<dd style="margin-left: 8">The protocol MUST support the ability to fragment a message into frames of a given length.  </dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>REQ. 4:</dt>
<dd style="margin-left: 8">It MUST be possible to send a message when the total size is either unknown or exceeds a fixed buffer size.  </dd>
</dl>
<p id="rfc.section.3.p.5">Reason:  This will allow dynamic messages to be constructed  and sent without the need to buffer the entire message.</p>
<p></p>

<dl>
<dt>REQ. 5:</dt>
<dd style="margin-left: 8">Textual data MUST be encoded as UTF-8.  </dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>REQ. 6:</dt>
<dd style="margin-left: 8">The protocol MUST support and clearly distinguish between textual and binary data types (e.g. binary) via a common framing with explicit length indication.  </dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>REQ. 7:</dt>
<dd style="margin-left: 8">The WebSocket protocol MUST allow HTTP and WebSocket connections to be served from the same port. Consideration MUST be given: </dd>
<dt></dt>
<dd style="margin-left: 8"><ul class="empty">
<li>* to provide WebSocket services via  modules that plug in to existing web infrastructure.</li>
<li>
<li>* to making it possible and practical to implement standalone implementations of the protocol  without requiring a fully conforming HTTP  implementation.</li>
</ul></dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
</dl>
<p id="rfc.section.3.p.7">Reason: Some server developers would like to integrate WebSocket support into existing HTTP servers. In addition, the default HTTP and HTTPS ports are ofter favoured for traffic that has to go through a firewall, so service providers will likely want to be able to use WebSocket over ports 80 and 443, even when running a Web server on the same host. However there could be scenarios where it is not opportune or possible to setup a proxy on the same  HTTP server.  </p>
<p></p>

<dl>
<dt>REQ. 8:</dt>
<dd style="margin-left: 8">If using an HTTP Upgrade exchange in the WebSocket handshake, the protocol MUST be HTTP compatible up to and including the Upgrade exchange.  </dd>
</dl>
<p></p>

<dl>
<dt>REQ. 9:</dt>
<dd style="margin-left: 8">The protocol SHOULD make it possible and practical to reuse existing HTTP components where appropriate.</dd>
</dl>
<p id="rfc.section.3.p.10">Reason:  Reusing existing well-debugged software decreases the number of implementation errors as well as the possibility to introduce security holes, and increases development speed, especially when the WebSocket server is implemented as modules that plug in to existing popular Web servers.  </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> WebSocket Client Requirements</h1>
<p></p>

<dl>
<dt>REQ. 10:</dt>
<dd style="margin-left: 8">The WebSocket Client MUST be able to set up a communication channel with a WebSocket Server using a well-defined handshake.</dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>REQ. 11:</dt>
<dd style="margin-left: 8">The WebSocket Protocol MUST provide for graceful close of an active WebSocket connection on request from the user Application.</dd>
</dl>
<p id="rfc.section.3.1.p.2">Reason: a clean shutdown signals that the other endpoint has definitely received all the messages sent prior to the close, so there is no protocol uncertainty about what has been processed and what can be retried on another connection.</p>
<p></p>

<dl>
<dt>REQ. 12:</dt>
<dd style="margin-left: 8">WebSocket Protocol MUST also allow ungraceful close, either on request from the user application or as a result of a detected error condition.</dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>REQ. 13:</dt>
<dd style="margin-left: 8">The WebSocket Client MUST be able to request the server, during the handshake, to use a specific WebSocket sub-protocol.</dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>REQ. 14:</dt>
<dd style="margin-left: 8">The WebSocket Client MUST have the ability to send and clearly distinguish between arbitrary text or binary content to the server on the established communication channel.</dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
</dl>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> WebSocket Server Requirements</h1>
<p></p>

<dl>
<dt>REQ. 15:</dt>
<dd style="margin-left: 8">The WebSocket Server that accepts to set up a communication channel with a WebSocket Client MUST use a well-defined handshake.</dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>REQ. 16:</dt>
<dd style="margin-left: 8">The WebSocket Server MUST have the ability to send and clearly distinguish between arbitrary text or binary content to the client on the established communication channel.</dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
</dl>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> WebSocket Proxies Requirements</h1>
<p id="rfc.section.3.3.p.1">Todo</p>
<p></p>

<dl>
<dt>REQ. 17:</dt>
<dd style="margin-left: 8">The WebSocket protocol MUST work over existing proxies to the same extent as HTTP or HTTPS already does.  </dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
</dl>
<p id="rfc.section.3.3.p.3">Reason: This is in line with Req on HTTP compliance.  </p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> WebSocket Security Requirements</h1>
<p></p>

<dl>
<dt>REQ. 18:</dt>
<dd style="margin-left: 8">The WebSocket Protocol MUST use the Origin-based security model commonly used by Web browsers to restrict which Web pages can contact a WebSocket  sever when the WebSocket protocol is used from a Web page.</dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>REQ. 19:</dt>
<dd style="margin-left: 8">When used directly (not from a Web page), the WebSocket Protocol MUST use a security model equivalent to that of direct HTTP or HTTPS usage.</dd>
<dt></dt>
<dd style="margin-left: 8"></dd>
<dt>REQ. 20:</dt>
<dd style="margin-left: 8">WebSocket should be designed to be robust against cross-protocol attacks.  The protocol design should consider and mitigate the risk presented by WebSocket clients to existing servers (including HTTP servers). It should also consider and mitigate the risk to WebSocket servers presented by clients for other protocols (including HTTP). </dd>
</dl>
<p id="rfc.section.3.4.p.2">Reason: As the WebSocket protocol is expected to be often used in browsers, a careful design is necessary to mitigate the chances for hostile JavaScript to use WebSocket for a cross-protocol attack against vanilla HTTP resources or non-HTTP servers. More the design should prevent the possibility for cross-site XMLHttpRequest (using CORS or XDomainRequest) to be used for a cross-protocol attack against WebSocket resources, potentially violating integrity (though not confidentiality).  </p>
<p id="rfc.section.3.4.p.3">Subsequent discussion in the working group has determined consensus on the use of masking as one of the mechanisms to mitigate this concern.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Security Considerations</h1>
<p></p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> IANA Considerations</h1>
<p id="rfc.section.5.p.1">This requirements document does not mandate any immediate IANA actions. However, such IANA considerations may arise from future HyBi specification documents which try to meet the requirements given here.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Acknowledgments</h1>
<p id="rfc.section.6.p.1">The initial requirements were created by Salvatore Loreto.  Thanks to Greg Wilkins and Maciej Stachowiak for fulfilling previous editing duties.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">7.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">7.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2616">[RFC2616]</b></td>
<td class="top">
<a href="mailto:fielding@ics.uci.edu" title="Department of Information and Computer Science">Fielding, R.</a>, <a href="mailto:jg@w3.org" title="World Wide Web Consortium">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com" title="Compaq Computer Corporation">Mogul, J.</a>, <a href="mailto:frystyk@w3.org" title="World Wide Web Consortium">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com" title="Xerox Corporation">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com" title="Microsoft Corporation">Leach, P.</a> and <a href="mailto:timbl@w3.org" title="World Wide Web Consortium">T. Berners-Lee</a>, "<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>", RFC 2616, June 1999.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-hybi-thewebsocketprotocol">[I-D.ietf-hybi-thewebsocketprotocol]</b></td>
<td class="top">
<a>Fette, I</a> and <a>A Melnikov</a>, "<a href="http://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol-17">The WebSocket protocol</a>", Internet-Draft draft-ietf-hybi-thewebsocketprotocol-17, September 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">7.2.</a> Informative References</h1>
<table><tbody><tr>
<td class="reference"><b id="I-D.ietf-hybi-design-space">[I-D.ietf-hybi-design-space]</b></td>
<td class="top">
<a>Moffitt, J</a>, <a>Loreto, S</a>, <a>Saint-Andre, P</a> and <a>S Salsano</a>, "<a href="http://tools.ietf.org/html/draft-ietf-hybi-design-space-00">Design Space for Bidirectional Protocols</a>", Internet-Draft draft-ietf-hybi-design-space-00, June 2010.</td>
</tr></tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Gabriel Montenegro</span> editor
	  <span class="n hidden">
		<span class="family-name">Montenegro</span>
	  </span>
	</span>
	<span class="org vcardline">Microsoft Corporation</span>
	<span class="adr">
	  <span>One Microsoft Way</span>

	  <span class="vcardline">
		<span class="locality">Redmond</span>,  
		<span class="region"></span>
		<span class="code">98052</span>
	  </span>
	  <span class="country-name vcardline">USA </span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:gabriel.montenegro@microsoft.com">gabriel.montenegro@microsoft.com</a></span>

  </address>
</div>

</body>
</html>