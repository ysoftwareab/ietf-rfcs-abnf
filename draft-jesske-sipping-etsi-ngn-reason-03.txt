



Internet-Draft        Reason Header in Responses         February 2008 
 
 
   SIPPING                                                Roland Jesske 
   INTERNET-DRAFT                                      Deutsche Telekom 
   Intended Status: Informational                                        
   Document:                                                            
   draft-jesske-sipping-etsi-ngn-reason-03.txt 
   Expires: August 18, 2008                           February 19, 2008 
    
    
    
    Use of the Reason header filed in Session Initiation Protocol (SIP) 
                                 responses  
                draft-jesske-sipping-etsi-ngn-reason-03.txt  
     
  
Status of this Memo  
     
 
   By submitting this Internet-Draft, each author represents that any 
   applicable patent or other IPR claims of which he or she is aware 
   have been or will be disclosed, and any of which he or she becomes 
   aware will be disclosed, in accordance with Section 6 of BCP 79. 
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that 
   other groups may also distribute working documents as Internet-
   Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 
    
   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt. 
    
   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html. 
    
   This Internet-Draft will expire on August 18, 2008. 
    
   Copyright Notice 
    
   Copyright (C) The IETF Trust (2008). 
     
Abstract  
   This document proposes the use of the Reason header field in SIP 
   responses.  
    
    
 
 
Jesske                  Expires - August 2008                [Page 1] 
Internet-Draft        Reason Header in Responses         February 2008 
 
 
Table of Contents 
    
   1. Overview.......................................................2 
   2. Overall Applicability..........................................3 
   3. Terminology....................................................3 
   4. Procedures.....................................................3 
      4.1 Procedures at the UA.......................................4 
      4.2 Procedures at a SIP proxy..................................4 
      4.3 Procedures at an application server........................4 
   5. Procedures at an interworking point with ISUP..................4 
   6. Example........................................................4 
   7. Security Considerations........................................6 
   8. IANA Considerations............................................6 
   9. References.....................................................6 
    
    
1. 
   Overview  
     
   The European Telecommunication Standards Institute (ETSI) is defining 
   a Next Generation Network (NGN) where a substantial part of it is 
   based on the IP Multimedia Subsystem (IMS) defined by the Third-
   Generation Partnership Project (3GPP). IMS is largely based on the 
   Session Initiation Protocol [1].  
        
   ETSI has developed a number of requirements draft-jesske-sipping-
   tispan-requirements [5] to support the usage of SIP in Next 
   Generation Networks that interoperate, at the service level, with the 
   Public Switched Telephone Network (PSTN), the Integrated Services 
   Digital Network (ISDN), the 3GPP IP Multimedia Subsystem (IMS), and 
   SIP networks and terminals that implement the service logic.  
        
   In order to provide full support in SIP of existing services, 
   extensions to SIP are needed.    
   This document proposes the use of the Reason header field in 
   responses. This is needed for creating services that must be 
   interoperable with the PSTN/ISDN network and the interoperability of 
   traversing communications through SIP not using SIP-I. 
    
   RFC3398 and other Interworking specifications like 3GPP TS 29.163 
   [11] are describing the mapping of ISUP Cause Values to SIP and vice 
   versa. Looking on the specific mapping shows that information will be 
   lost when the call traverses ISUP without using SIP-T. 
    
   Example: 
   RFC 3398 [10] describes the mapping of following ISUP Causes to 503 
   and 408 like follows. 
    
      ISUP Cause value                        SIP response 
      ----------------                        ------------ 
 
 
Jesske                  Expires - August 2008                [Page 2] 
Internet-Draft        Reason Header in Responses         February 2008 
 
 
      34 no circuit available                 503 Service unavailable 
      38 network out of order                 503 Service unavailable 
      41 temporary failure                    503 Service unavailable 
      42 switching equipment congestion       503 Service unavailable 
      47 resource unavailable                 503 Service unavailable 
      58 bearer capability not presently      503 Service unavailable 
         Available 
      88 incompatible destination             503 Service unavailable 
    
      18 no user responding                   408 Request Timeout 
    
   The mapping back is shown as follows: 
    
      Response received                        Cause value in the REL 
      -----------------                        ---------------------- 
      503 Service unavailable                  41 Temporary failure 
       
      408 Request timeout                      102 Recovery on timer  
                                                   expiry 
    
    
   The Example with 503 shows that a couple of different ISUP Cause 
   values are interworked to only one SIP response. With 408 the meaning 
   of the release cause is changed when interworked back to ISUP. Also 
   Services built on Cause 18 (e.G. a 2nd call attempt on an other 
   number, this service is like a sequential forking) will not work. 
 
2. 
   Overall Applicability  
     
   The SIP procedures specified in this document are foreseen for 
   networks providing simulation services and/or interworking to the 
   PSTN/ISDN.   
   The document is describing the use of the Reason header in SIP 
   responses. These procedures are only valuable if the reason contained 
   in the element "protocol" is "Q.850". A inclusion of a SIP reason 
   (protocol="SIP") is not helpful due to the fact that the response 
   already provides the SIP reason. The Release Causes are described 
   within ETSI EN300 485 [5]  
        
3. 
   Terminology  
     
   The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, 
   SHOULD,SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL, when they appear 
   in this document, are to be interpreted as described in RFC 2119 
   [RFC2119].      
    
4. 
   Procedures  
     

 
 
Jesske                  Expires - August 2008                [Page 3] 
Internet-Draft        Reason Header in Responses         February 2008 
 
 
   For providing services and PSTN/ISDN interoperability it MUST be 
   possible to include Reason header fields with Q.850 Cause values. 
     
4.1 
    Procedures at the UA  
     
   A UA that supports the Reason header field can process the Q.850 
   Cause Value and display it or an equivalent text. The inclusion of a 
   Reason header field by UA is only for 2B2 UA interworking with the 
   PSTN/ISDN or providing services foreseen.  
     
4.2 
    Procedures at a SIP proxy  
     
   SIP proxies that receive a response containing a Reason header field 
   is forwarding the response without changing the reason.   
        
   A SIP proxy receiving a request that includes a Reason header field 
   can route the request to an application server for further analysis 
   and base services on it.   
        
   Based on network policy a Proxy can remove a Reason header field send 
   from a UAC.  
     
4.3P
    rocedures at an application server  
     
   An application server that receives a SIP request that contains a 
   response including a Reason header MAY analyze the SIP Reason and 
   base further procedures on this analyses.  
   For Example the application server could use the reason for sending a 
   announcement towards the originating entity of the Session.   
        
   As an example the Anonymous Communication Rejection (ACR) service 
   defined by ETSI Telecommunications and Internet converged Services 
   and Protocols for Advanced Networking (TISPAN)      
    
5. 
   Procedures at an interworking point with ISUP 
   For interoperability reasons the Q.850 Cause Value of a Release shall 
   be mapped to the Reason Header.  
    
 
6. 
   Example  
  
   Figure 1 shows the example of SIP interworking with the PSTN/ISDN. 
   Cause #87 is sent when the connecting user is not member of a Closed 
   User Group. 
        
            A                Gateway             Proxy               AS  
            |        IAM        |                  |                  |  
            |------------------>|     INVITE       |                  |  
            |                   |----------------->|      INVITE      |  
 
 
Jesske                  Expires - August 2008                [Page 4] 
Internet-Draft        Reason Header in Responses         February 2008 
 
 
            |                   |     100 Trying   |----------------->|  
            |                   |<-----------------|    100 Trying    |  
            |                   |                  |<-----------------|  
            |   ACK  SDP held   |                  |                  |  
            |<------------------|                  |  603 Decline     |  
            |                   |  603 Decline     | Reason Q850 #87  |  
            |                   |  Reason Q850 #87 |                  |  
            |   REL Cause #87   |                  |<-----------------|  
            |                   |<-----------------|                  |  
            |<----------------- |                  |                  |  
            |                   |                  |                  |  
            |                   |                  |                  |  
            |                   |                  |                  |  
        
               Figure 1: ISUP-SIP Call  
   Figure 2 shows the example where the SIP network is used as transit 
   between PSTN/ISDN networks. This avoids that the Mapping back to the 
   Q.850 cause within ISUP change the meaning of the reason for release 
   of the call. 
        
            A                Gateway             Gateway              B  
            |        IAM        |                  |                  |  
            |------------------>|     INVITE       |                  |  
            |                   |----------------->|      IAM         |  
            |                   |     100 Trying   |----------------->|  
            |                   |<-----------------|    100 Trying    |  
            |                   |   603 Decline    |                  | 
            |                   |  Reason Q850 #87 |  REL Cause #87   | 
            |   REL Cause #87   |                  |<-----------------|  
            |                   |<-----------------|                  |  
            |<----------------- |                  |                  |  
            |                   |                  |                  |  
            |                   |                  |                  |  
            |                   |                  |                  |  
        
               Figure 2: Transit case  
 
  
   Figure 3 shows the example where the SIP network puts an announcement 
   towards the UAB. The AS sends an announcement with a specific text 
   back. After some Time the Response will be sent back to the UA A and 
   closes all open transactions. With this possibility the SIP user can 
   informed with more specific information than only the Response code.  
        
            A                   AS              Gateway               B  
            |        INVITE     |                  |                  |  
            |------------------>|     INVITE       |                  |  
            |                   |----------------->|      IAM         |  
            |                   |     100 Trying   |----------------->|  
 
 
Jesske                  Expires - August 2008                [Page 5] 
Internet-Draft        Reason Header in Responses         February 2008 
 
 
            |                   |<-----------------|                  |  
            |                   |   503 Decline    |                  | 
            |                   |  Reason Q850 #41 |  REL Cause #41   | 
            |                   |                  |<-----------------|  
            |  Announcement     |<-----------------|                  |  
            |< ================ |                  |                  |  
            |                   |                  |                  |  
            |  503 after Timeout|                  |                  |  
            |<----------------- |                  |                  |  
        
   Figure 3: Call Release within the PSTN with an announce played within 
   the SIP network  
 
 
7. 
   Security Considerations  
  
   The presence of the Reason header in a response does not affect the  
   treatment of the response.  
   Including such a header by an untrusted entity could adulterate the  
   reactions of the originating entities. E.G. sending back a cause 
   value  
   "87" can cause an announcement within the PSTN/ISDN saying that the  
   call was rejected due to the Closed User Group service.   
   Therefore it is RECOMMENDED to include the Reason header information 
   in Responses only by trusted entities as it is described within 
   RFC3325 [7]  
  
 
8. 
   IANA Considerations  
 
   This document describes the use of the Reason header field described 
   within RFC 3326 [2]. No additional SIP elements are defined within 
   this document. Therefore, this document does not provide any action 
   to IANA. 
 
9. 
   References  
     
   [1] Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, 
      A.,Peterson, J., Sparks, R., Handley, M. and E. Schooler, 
      "SIP:Session Initiation Protocol", RFC 3261, June 2002.  
        
   [2] H. Schulzrinne, D. Oran, G. Camarillo, "The Reason Header for the 
      Session Initiation Protocol (SIP)", RFC 3326.  
    
   [3] Jesske, R., Alexeitsev, D., Garcia-Martin, M. "Input Requirements 
      for the Session Initiation Protocol (SIP) in support for the 
      European Telecommunications Standards Institute (ETSI) Next 


 
 
Jesske                  Expires - August 2008                [Page 6] 
