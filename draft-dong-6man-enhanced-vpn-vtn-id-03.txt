



Network Working Group                                            J. Dong
Internet-Draft                                                     Z. Li
Intended status: Standards Track                     Huawei Technologies
Expires: August 26, 2021                                          C. Xie
                                                                   C. Ma
                                                           China Telecom
                                                       February 22, 2021


 Carrying Virtual Transport Network Identifier in IPv6 Extension Header
                 draft-dong-6man-enhanced-vpn-vtn-id-03

Abstract

   A Virtual Transport Network (VTN) is a virtual network which has a
   customized network topology and a set of dedicated or shared network
   resources allocated from the network infrastructure.  A VTN can be
   used as the underlay for one or a group of VPNs to provide enhanced
   VPN (VPN+) services.  In packet forwarding, some fields in data
   packet needs to be used to identify the VTN the packet belongs to, so
   that the VTN-specific processing can be performed.

   This document proposes a new option type to carry VTN ID in an IPv6
   extension header to identify the Virtual Transport Network (VTN) the
   packet belongs to.  The procedure for processing of the VTN option is
   also specified.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on August 26, 2021.








Dong, et al.             Expires August 26, 2021                [Page 1]

Internet-Draft               IPv6 VTN Option               February 2021


Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   3
   2.  New IPv6 Extension Header Option for VTN  . . . . . . . . . .   3
   3.  Procedures  . . . . . . . . . . . . . . . . . . . . . . . . .   4
     3.1.  VTN Option Insertion  . . . . . . . . . . . . . . . . . .   4
     3.2.  VTN based Packet Forwarding . . . . . . . . . . . . . . .   4
   4.  Operational Considerations  . . . . . . . . . . . . . . . . .   5
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   6
   7.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .   6
   8.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   6
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   6
     9.1.  Normative References  . . . . . . . . . . . . . . . . . .   6
     9.2.  Informative References  . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   Virtual Private Networks (VPNs) provide different groups of users
   with logically isolated connectivity over a common shared network
   infrastructure.  With the introduction of 5G, new service types may
   require connectivity services with advanced characteristics comparing
   to traditional VPNs, such as strict isolation from other services or
   guaranteed performance.  These services are refered to as "enhanced
   VPNs" (VPN+).  [I-D.ietf-teas-enhanced-vpn] describes a framework and
   candidate component technologies for providing VPN+ services.

   The enhanced properties of VPN+ require tighter coordination and
   integration between the underlay network resources and the overlay
   network.  VPN+ service can be built on a Virtual Transport Network
   (VTN) which has a customized network topology and a set of dedicated



Dong, et al.             Expires August 26, 2021                [Page 2]

Internet-Draft               IPv6 VTN Option               February 2021


   or shared network resources allocated from the physical network.  The
   overlay VPN together with the corresponding VTN in the underlay
   constitute the VPN+ service.  In the network, traffic of different
   VPN+ services need to be processed separately based on the topology
   and the network resources associated with the corresponding VTN.

   [I-D.dong-teas-enhanced-vpn-vtn-scalability] describes the
   scalability considerations for VPN+, one approach to improve the data
   plane scalability is by introducing a dedicated VTN Identifier (VTN
   ID) in data packets to identify the VTN the packets belong to, so
   that VTN-specific packet processing can be performed.  This is called
   Resource Independent (RI) VTN.

   This document proposes a mechanism to carry the VTN ID in an IPv6
   extension header [RFC8200] of a packet, so that the packet will be
   processed by network nodes using the network resources allocated to
   the corresponding VTN.  The procedure for processing the VTN ID is
   also specified.  This provides a scalable solution for enhanced VPN
   data plane, so that it may be used to support a large number of VTNs
   in an IPv6 network.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP14 RFC 2119 [RFC2119] RFC 8174 [RFC8174] when, and only when, they
   appear in all capitals, as shown here.

2.  New IPv6 Extension Header Option for VTN

   A new option type "VTN" is defined to carry the Virtual Transport
   Network Identifier (VTN ID) in an IPv6 packet header.  Its format is
   shown as below:

                         Option   Option       Option
                          Type   Data Len       Data
                       +--------+--------+--------+--------+
                       |BBCTTTTT|00000100|  4-octet VTN ID |
                       +--------+--------+--------+--------+
                        Figure 1. The format of VTN Option

   Option Type: 8-bit identifier of the type of option.  The type of VTN
   option is to be assigned by IANA.  The highest-order bits of the type
   field are defined as below:






Dong, et al.             Expires August 26, 2021                [Page 3]

Internet-Draft               IPv6 VTN Option               February 2021


   o  BB 00 The highest-order 2 bits are set to 00 to indicate that a
      node which does not recognize this type will skip over it and
      continue processing the header.

   o  C 0 The third highest-order bit are set to 0 to indicate this
      option does not change en route.

   Opt Data Len: 8-bit unsigned integer indicates the length of the
   option Data field of this option, in octets.  The value of Opt Data
   Len of VTN option SHOULD be set to 4.

   Option Data: 4-octet identifier which uniquely identifies a VTN.

   Editor's note: The length of the VTN ID is defined as 4-octet for the
   matching with the 4-octet Single Network Slice Selection Assistance
   Information (S-NSSAI) defined in 3GPP [TS23501].

                          8-bit              24-bit
                     +------------+-------------------------+
                     |    SST     |   Slice Differentiator  |
                     +------------+-------------------------+
                         Figure 2. The format of S-NSSAI

3.  Procedures

   As the VTN option needs to be processed by each node along the path
   for VTN-specific forwarding, it SHOULD be carried in IPv6 Hop-by-Hop
   options header when the Hop-by-Hop options header can be processed in
   forwarding plane by all the nodes along the path.

3.1.  VTN Option Insertion

   When an ingress node of an IPv6 domain receives a packet, according
   to traffic classification or mapping policy, the packet is steered
   into one of the VTNs in the network, then the packet SHOULD be
   encapsulated in an outer IPv6 header, and the VTN-ID of the VTN which
   the packet is mapped to SHOULD be carried in the Hop-by-Hop options
   header associated with the outer IPv6 header.

3.2.  VTN based Packet Forwarding

   On receipt of a packet with the VTN option, each network node which
   can parse the VTN option SHOULD use the VTN ID to identify the VTN
   the packet belongs to, so that the set of local resources allocated
   to the VTN could be determined.  The packet forwarding behavior is
   based on both the destination IP address and the VTN option.  The
   destination IP address is used for the lookup of the next-hop and the
   outgoing interface, and VTN-ID is used to determine the set of



Dong, et al.             Expires August 26, 2021                [Page 4]

Internet-Draft               IPv6 VTN Option               February 2021


   network resources reserved for processing and sending the packet to
   the next-hop node via the outgoing interface.  The egress node of the
   IPv6 domain SHOULD decapsulate the outer IPv6 header which includes
   the VTN option.

   In the forwarding plane, there can be different instantiations of
   local network resources allocated to the VTNs.  For example, on one
   interface, a subset of forwarding plane resources (e.g. the bandwidth
   and the associated buffer/queuing/scheduling resources) allocated to
   a particular VTN can be considered as a virtual sub-interface with
   dedicated resources.  In packet forwarding, the IPv6 destination
   address of the received packet is used to identify the next-hop and
   the outgoing interface, and the VTN ID is used to further identify
   the virtual sub-interface which is associated with the VTN on the
   outgoing interface.

   Routers which do not support Hop-by-Hop options header SHOULD ignore
   the Hop-by-Hop options header and forward the packet only based on
   the destination IP address.  Routers which support Hop-by-Hop Options
   header, but do not support the VTN option SHOULD ignore the Hop-by-
   Hop option and continue to forward the packet only based on the
   destination IP address.

4.  Operational Considerations

   As described in [RFC8200], nodes may be configured to ignore the Hop-
   by-Hop Options header, and in some implementations a packet
   containing a Hop-by-Hop Options header may be dropped or assigned to
   a slow processing path.  This needs to be taken into consideration
   when VTN option is introduced to a network.  The operator needs to
   make sure that all the network nodes in a VTN can either process Hop-
   by-Hop Options header in packet forwarding, or ignore the Hop-by-Hop
   Option header.  In other word, packets steered into a VTN MUST NOT be
   dropped due to the existence of the Hop-by-Hop Options header.  It is
   RECOMMENDED to configure all the nodes in a VTN to process the Hop-
   by-Hop Options header if there is a nob for this.

5.  IANA Considerations

   This document requests IANA to assign a new option type from
   "Destination Options and Hop-by-Hop Options" registry.

      Value   Description     Reference
      --------------------------------------
      TBD     VTN Option      this document






Dong, et al.             Expires August 26, 2021                [Page 5]

Internet-Draft               IPv6 VTN Option               February 2021


6.  Security Considerations

   TBD

7.  Contributors

      Zhibo Hu
      Email: huzhibo@huawei.com

      Lei Bao
      Email: baolei7@huawei.com

8.  Acknowledgements

   The authors would like to thank Juhua Xu and James Guichard for their
   review and valuable comments.

9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8200]  Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", STD 86, RFC 8200,
              DOI 10.17487/RFC8200, July 2017,
              <https://www.rfc-editor.org/info/rfc8200>.

9.2.  Informative References

   [I-D.dong-teas-enhanced-vpn-vtn-scalability]
              Dong, J., Li, Z., Qin, F., and G. Yang, "Scalability
              Considerations for Enhanced VPN (VPN+)", draft-dong-teas-
              enhanced-vpn-vtn-scalability-01 (work in progress),
              November 2020.

   [I-D.ietf-teas-enhanced-vpn]
              Dong, J., Bryant, S., Li, Z., Miyasaka, T., and Y. Lee, "A
              Framework for Enhanced Virtual Private Networks (VPN+)
              Service", draft-ietf-teas-enhanced-vpn-06 (work in
              progress), July 2020.



Dong, et al.             Expires August 26, 2021                [Page 6]

Internet-Draft               IPv6 VTN Option               February 2021


   [TS23501]  "3GPP TS23.501", 2016,
              <https://portal.3gpp.org/desktopmodules/Specifications/
              SpecificationDetails.aspx?specificationId=3144>.

Authors' Addresses

   Jie Dong
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Road
   Beijing  100095
   China

   Email: jie.dong@huawei.com


   Zhenbin Li
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Road
   Beijing  100095
   China

   Email: lizhenbin@huawei.com


   Chongfeng Xie
   China Telecom
   China Telecom Beijing Information Science & Technology, Beiqijia
   Beijing  102209
   China

   Email: xiechf@chinatelecom.cn


   Chenhao Ma
   China Telecom
   China Telecom Beijing Information Science & Technology, Beiqijia
   Beijing  102209
   China

   Email: machh@chinatelecom.cn











Dong, et al.             Expires August 26, 2021                [Page 7]
