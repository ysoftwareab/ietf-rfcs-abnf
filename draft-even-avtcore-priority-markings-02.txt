



AVTCore                                                          R. Even
Internet-Draft                                                   O. Idan
Intended status: Standards Track                     Huawei Technologies
Expires: December 26, 2018                                 June 24, 2018


              Frame Priority Marking RTP Header Extension
              draft-even-avtcore-priority-markings-02.txt

Abstract

   This document updates the Frame Marking RTP header extension in
   draft-ietf-avtext-framemarking-06 used to convey information about
   video frames that is critical for error recovery and packet
   forwarding in RTP middle-boxes or network nodes.  The flags for frame
   marking for non-scalable streams include the D bit to mark a frame
   that can be discarded, and still provide a decodable media stream.
   There is also the I bit for frames that can be decoded independent of
   prior frames, e.g. intra-frame.

   This memo adds priority values for the non-scalable streams
   discardable frames

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on December 26, 2018.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of



Even & Idan             Expires December 26, 2018               [Page 1]

Internet-Draft           Frame priority marking                June 2018


   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Requirements Notation . . . . . . . . . . . . . . . . . . . .   3
   3.  Frame Priority  . . . . . . . . . . . . . . . . . . . . . . .   3
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
   5.  Security considerations . . . . . . . . . . . . . . . . . . .   4
   6.  Normative References  . . . . . . . . . . . . . . . . . . . .   4
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   4

1.  Introduction

   Frame Marking RTP Header Extension [I-D.ietf-avtext-framemarking]
   provides a single bit for marking frames that may be discarded by a
   middle box for non-scalable streams.  Having one bit for marking a
   discardable frame provides the same information to a middle box that
   need to drop few frames or many frames.  An encoder may want to mark
   multiple frames as discardable but with different drop priority,
   allowing the middle box to discard part or all the discardable
   frames.  The middle box can use the priority information for deciding
   which frames to drop.  By monitoring the RTP stream and the frame
   marking a middle box can estimate how many RTP packets are in each
   priority and use this information for the dropping decision.

   A video stream is composed of Group of Pictures (GOP) where the GOP
   includes I,P and B frames.  A GOP is typically bound by I frames and
   is 15-30,60 frames long but can vary with frame rate, content
   complexity and encoder implementation.  There are a couple of use
   cases that can benefit if discard priority is available.

   o  When there are contiguous non referenced B frames dropping all of
      them will reduce the actual frame rate.  By providing different
      priority to each of these B frames the middle box can affect the
      actual frame rate.  This information can be also deducted based on
      the number of contiguous frames but having priority will make it
      easier for the middle box for example when the frames are
      interleaved.

   o  When there are referenced B frames, for example a non referenced B
      frame (B1) followed by a B frame (B2) referenced by B1 only.  If




Even & Idan             Expires December 26, 2018               [Page 2]

Internet-Draft           Frame priority marking                June 2018


      B1 is dropped then B2 can be dropped too.  By using priority B1
      can have lower priority than B2.

   o  Dropping a P frame that is close to the end of the GOP is also
      possible comparing to a P frame in the beginning of the GOP.  The
      encoder can know when such P frame exist and mark is as
      discardable with lowest priority.

2.  Requirements Notation

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

3.  Frame Priority

   This memo adds two P bits to the RTP header extension defined in
   [I-D.ietf-avtext-framemarking] section 3.1.

   RTP Header Extension for non-scalable streams:

      0                   1
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |  ID=? |  L=0  |S|E|I|D|P P 0 0|
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   P: Priority bits (2 bits).  If the D bit is set to zero these bits
   MUST be zero.  If the D bit is set to 1 the values 00 is the highest
   drop priority (this will be the case when priority is not specified)
   and 11 is the lowest drop priority.

   The priority bits apply to a single RTP stream and a middle box MUST
   NOT use this information to compare discardable frames from different
   RTP streams.

   Based on the use cases from the introduction, the priority of the non
   referenced B frame will be 00, the priority of the referenced B
   frames will be 01 and the priority of the discardable P frame will be
   10.  If the middle box drops the frames marked with priority 00 it
   can now drop the frames marked with priority 01 since they are not
   needed for decoding the stream.








Even & Idan             Expires December 26, 2018               [Page 3]

Internet-Draft           Frame priority marking                June 2018


4.  IANA Considerations

   There are no IANA actions

5.  Security considerations

   This memo does not add any security information to the ones in
   [I-D.ietf-avtext-framemarking]

6.  Normative References

   [I-D.ietf-avtext-framemarking]
              Berger, E., Nandakumar, S., and M. Zanaty, "Frame Marking
              RTP Header Extension", draft-ietf-avtext-framemarking-06
              (work in progress), October 2017.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

Authors' Addresses

   Roni Even
   Huawei Technologies
   Tel Aviv
   Israel

   Email: Roni.even@huawei.com


   Ofer Idan
   Huawei Technologies
   Hod Hasharon
   Israel

   Email: ofer.idan@huawei.com














Even & Idan             Expires December 26, 2018               [Page 4]
