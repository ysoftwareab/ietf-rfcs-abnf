INTERNET-DRAFT                                                 Yuko Onoe
                                                       Norihiro Ishikawa
                                                            Megumi Kondo
                                                        Shinji Kobayashi
                                  NTT Mobile Communications Network Inc.
                                                         January 4, 2000
draft-onoe-proxy-server-option-00.txt
                                                     
         
              Proxy Server Configuration Option for PPP IPCP


Status of this Memo

    This document is an Internet-Draft and is in full conformance with
    all provisions of Section 10 of RFC2026. Internet-Drafts are working
    documents of the Internet Engineering Task Force (IETF), its areas,
    and its working groups.  Note that other groups may also distribute
    working documents as Internet-Drafts.

    Internet-Drafts are draft documents valid for a maximum of six
    months and may be updated, replaced, or obsoleted by other documents
    at any time.  It is inappropriate to use Internet- Drafts as
    reference material or to cite them other than as "work in progress."

     The list of current Internet-Drafts can be accessed at
     http://www.ietf.org/ietf/1id-abstracts.txt

     The list of Internet-Draft Shadow Directories can be accessed at
     http://www.ietf.org/shadow.html.

Abstract

    Point-to-Point Protocol(PPP) provides a standard method for
    transporting multi-protocol datagrams over point-to-point links and
    is generally used to connect personal computers at home or portable
    terminals to the Internet using TCP/IPs over phone lines.
    This document extends the Proxy Server Configuration Option for PPP 
    IPCP (Internet Protocol Control Protocol) and defines negotiation of
    primary and secondary proxy server addresses for Web browsing
    applications.
    With this option, redundant communications for notification of proxy
    server addresses can be avoided. Moreover, automatic and easy
    configuration of proxy servers can be realized for Internet 
    beginners.
















Expires July 4, 2000         Onoe                               [Page 1]

INTERNET-DRAFT     Proxy Server Configuration Option     January 4, 2000


 Table of Contents
     1.      Introduction ..........................................   2
     2.      Proxy Server Configuration Option .....................   3
        2.1    Primary Proxy Server Configuration Option Format ....   3
        2.2    Secondary Proxy Server Configuration Option Format ..   4
        2.3    Technical overviews .................................   5
        2.4    Procedure of notification of Proxy Server Addresses .   6
           2.4.1    Using notifications of Proxy Server Addresses ..   6
           2.4.2    Without using notifications of Proxy Server 
                    Addresses ......................................   7
     REFRENCES ....................................................    8
     SECURITY CONSIDERATIONS ......................................    8
     AUTHOR'S ADDRESS .............................................    8

1. Introduction

    These days, PPP(Point-to-Point Protocol)[1] is generally used
    to connect personal computers at home or portable terminals to the
    Internet or the office LANs using TCP/IPs over phone lines.
    The use of PPP is one of the standard methods to transmit various 
    kinds of protocol packets over point-to-point links. It enables 
    users, for example, to connect to the Internet through phone lines, 
    use Web applications over HTTP protocols and refer to Home Pages. In 
    this case, proxy servers are generally located between Web clients 
    and servers and requests for accesses to the servers are relayed and
    intermediated.
    At the same time, proxy servers provide some additional functions 
    such as caching and translation of contents to attain communication 
    efficiency and ensure security. The functions of proxy servers can 
    be categorized as follows: (1) firewall functions for filtering out 
    illegal accesses from outside, (2) prefetching, autopiloting and 
    caching by processing requests in advance and (3) filtering of 
    contents, i.e. adding to and changing contents and adjusting or 
    deleting their formats.
    With the various functions proxy servers have, they play important 
    roles and become indispensable functionality subjects.

    To use proxy servers over a PPP, the procedure is as follows:

    (1) LCP(Link Control Protocol)[5] negotiations and authentication 
    of CHAP or PAP are processed.
    (2) By Configuration-Request/Ack/Nack clients aquire their IP
    addresses and DNS server addresses[4].
    (3) Clients inquire IP addresses of proxy servers to the DNS 
    servers.
    (4) Clients request connections to proxy servers.





Expires July 4, 2000         Onoe                               [Page 2]

INTERNET-DRAFT     Proxy Server Configuration Option     January 4, 2000


    At this time, if local peers acquire the IP addresses of proxy 
    servers at the time of configuration such as (2), the address 
    inquiry step of (3) becomes unnecessary, and it becomes possible to 
    connect proxy servers after the communications of (2) have been 
    made. Moreover, since configuring the host names of proxy servers is
    done automatically, beginners can connect to the Internet easily. 
    Furthermore, even if the addresses of proxy servers change, users
    can continue to use Web applications without being aware of the 
    change. 
    Therefore, we propose to define Proxy Server Configuration Options 
    as Internet Protocol Control Protocol(IPCP)[2]. By using these 
    options, communications become more efficient and utilization of 
    proxy servers becomes easier.

2. Proxy Server Configuration Option

    In this section, Proxy Server Configuration Option and its usages 
    are described.

2.1. Primary Proxy Server Configuration Option Format

    Description

        This Configuration Option defines processes of negotiation of 
        primary proxy servers with remote sides to be used by local 
        sides of PPP links. If local sides specify invalid addresses 
        of proxy servers, remote sides return NAK for this option and 
        respond with valid addresses of proxy servers.

        By defaults, addresses of primary proxy servers are not 
        specified.

    Primary Proxy Server Configuration Option for IPCP is defined as
    follows;

     0               1               2               3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Type      |   Length      | Primary-Proxy-Server-Address
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      Primary-Proxy-Addr(cont)      |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+









Expires July 4, 2000         Onoe                               [Page 3]

INTERNET-DRAFT     Proxy Server Configuration Option     January 4, 2000


    Type

        133

    Length

        6

    Primary-Proxy-Server-Address

        IP addresses of primary proxy servers used by local sides are 
        specified in 4 octets Primary-Proxy-Server-Address.
        If 0 is specified to all 4 octets, it indicates that 
        Configure-Nak packets include address information at local 
        sides.

    Default

        No address is specified.

2.2. Secondary Proxy Server Configuration Option Format

    Description

        This Configuration Option defines processes of negotiation of 
        secondary proxy servers with remote sides to be used by local 
        sides of PPP links. If local sides specify invalid addresses of 
        proxy servers, remote sides return NAK for this option and 
        respond with valid addresses of proxy servers.

        By defaults, addresses of secondary proxy servers are not 
        specified.

    Secondary Proxy Server Configuration Option for IPCP is defined as
    follows;

     0               1               2               3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Type      |   Length      | Secondary-Proxy-Server-Address
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      Secondary-Proxy-Addr(cont)    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+








Expires July 4, 2000         Onoe                               [Page 4]

INTERNET-DRAFT     Proxy Server Configuration Option     January 4, 2000


    Type

        134

    Length

        6

    Secondary-Proxy-Server-Address

        IP addresses of secondary proxy servers used by local
        sides are specified in 4 octets Secondary-Proxy-Server-Address.
        If 0 is specified to all 4 octets, it indicates that
        Configure-Nak packets include address information at
        local sides.

    Default

        No address is specified.

2.3. Technical overviews

    The general procedure of IPCP negotiation is as follows;

    (1) LCP negotiation and CHAP[6] or PAP authentication is achieved 
    between clients and servers.
    (2) IPCP Configuration-Request is issued from clients to servers and
    IP addresses of the clients and DNS servers are returned from 
    servers as Configuration-Nak packets.
    (3) The clients inquire IP addresses of proxy servers to DNS 
    servers.
    (4) The DNS servers respond with IP addresses of proxy servers.
    (5) Clients request connections to proxy servers.

    In this way, in the existing methods IP addresses of DNS servers 
    and proxy servers are notified twice. PPP configuration takes much 
    time, especially for narrow band and high delay physical links such
    as communications over phone links. Therefore, we propose to 
    introduce Proxy-Server-Configuration-Option into IPCP. The 
    procedure for using this Proxy-Server-Configuration-Option is as 
    follows;










Expires July 4, 2000         Onoe                               [Page 5]

INTERNET-DRAFT     Proxy Server Configuration Option     January 4, 2000


    (1) LCP negotiation and CHAP or PAP authentication is achieved 
    between clients and servers.
    (2) IPCP Configuration-Request is issued from the clients to the 
    servers and IP addresses of the clients and proxy servers are 
    returned from the servers as Configuration-Nak packets.
    (3) Clients request connections to the proxy servers.

    In this way, on PPP connections over narrow band and high speed
    physical links such as phone links, redundant communications for
    notification of server addresses can be avoided and communication
    overhead for PPP configuration can be reduced. Moreover, proxy 
    server hostname configuration is done automatically and configuring
    Internet connectivity becomes easy.

2.4. Procedure of notification of Proxy Server Addresses

2.4.1. Using notifications of Proxy Server Addresses

    As configuration conditions, addresses are not configured at PPP 
    clients and Primary-Proxy-Server-Address and 
    Secondary-Proxy-Server-Address are specified at servers.


    PPP clients                                         PPP servers
        |                                                   |
        |<--------------LCP negotiation-------------------->|
        |                                                   |
        |<--------------CHAP or PAP authentication--------->|
        |                                                   |
        |  Configure-Request(IP[0.0.0.0],PDNS[0.0.0.0],     |
        |       PNBNS[0.0.0.0],PPS[0.0.0.0],SDNS[0.0.0.0],  |
        |-------SNBNS[0.0.0.0],SPS[0.0.0.0])--------------->|
        |                                                   |
        |<-Configure-Reject(PNBNS[0.0.0.0],SNBNS[0.0.0.0])--|
        |                                                   |
        |  Configure-Request(IP[0.0.0.0],PDNS[0.0.0.0],     |
        |-------PPS[0.0.0.0],SDNS[0.0.0.0],SPS[0.0.0.0])--->|
        |                                                   |
        |  Configure-Nak(IP[config-addr],PDNS[config-addr], |
        |       PPS[config-addr],SDNS[config-addr],         |
        |<------SPS[config-addr])---------------------------|
        |                                                   |
        |  Configure-Request(IP[config-addr],               |
        |       PDNS[config-addr],PPS[config-addr],         |
        |-------SDNS[config-addr],SPS[config-addr])-------->|
        |                                                   |
        |  Configure-Ack(IP[config-addr],PDNS[config-addr], |
        |       PPS[config-addr],SDNS[config-addr],         |
        |<------SPS[config-addr])---------------------------|

               
Expires July 4, 2000         Onoe                               [Page 6]

INTERNET-DRAFT     Proxy Server Configuration Option     January 4, 2000


           IP:IP address
           PDNS:Primary-DNS-Address
           PNBNS:Primary-NBNS-Address
           PPS:Primary-Proxy-Server-Address
           SDNS:Secondary-DNS-Address
           SNBNS:Secondary-NBNS-Address
           SPS:Secondary-Proxy-Server-Address
           config-addr:configured IP address

2.4.2. Without using notification of Proxy Server Addresses

    As configuration conditions, addresses are not configured at PPP 
    clients and configuration of notifying functions of
    Primary-Proxy-Server-Address and Secondary-Proxy-Server-Address
    are set at servers.

    PPP clients                                         PPP servers
        |                                                   |
        |<--------------LCP negotiation-------------------->|
        |                                                   |
        |<--------------CHAP or PAP authentication--------->|
        |                                                   |
        |  Configure-Request(IP[0.0.0.0],PDNS[0.0.0.0],     |
        |       PNBNS[0.0.0.0],PPS[0.0.0.0],SDNS[0.0.0.0],  |
        |-------SNBNS[0.0.0.0],SPS[0.0.0.0])--------------->|
        |                                                   |
        |  Configure-Reject(PNBNS[0.0.0.0],PPS[0.0.0.0],    |
        |<------SNBNS[0.0.0.0],SPS[0.0.0.0])----------------|
        |                                                   |
        |  Configure-Request(IP[0.0.0.0],PDNS[0.0.0.0],     |
        |-------SDNS[0.0.0.0])----------------------------->|
        |                                                   |
        |  Configure-Nak(IP[config-addr],PDNS[config-addr], |
        |<------SDNS[config-addr])--------------------------|
        |                                                   |
        |  Configure-Request(IP[config-addr],               |
        |-------PDNS[config-addr],SDNS[config-addr])------->|
        |                                                   |
        |  Configure-Ack(IP[config-addr],PDNS[config-addr], |
        |<------SDNS[config-addr])--------------------------|











Expires July 4, 2000         Onoe                               [Page 7]

INTERNET-DRAFT     Proxy Server Configuration Option     January 4, 2000


References

    [1] Simpson,W.,``The Point-to-Point Protocol'', RFC1331, May 1992.

    [2] McGregor,G., ``The PPP Internet Protocol Control Protocol'',
        RFC1332, Merit, May 1992.

    [3] Simpson,W., ``The Point-to-Point Protocol(PPP) for the 
        Transmission of Multi-protocol Datagrams over Point-to-Point 
        Links'', STD 51, RFC1661, July 1994.

    [4] Cobb,S., ``PPP Internet Protocol Control Protocol Extensions or
        Name Server Addresses'', RFC1877, December 1995.

    [5] Simpson,W., ``PPP LCP Extensions'', RFC1570, January 1994.

    [6] Simpson,W., ``PPP Challenge Handshake Authentication
        Protocol(CHAP)'', RFC1994, August 1996.

Security Considerations
   
   Security issues are not discussed in this memo.

Author's Address        
    
   Questions about this memo can also be directed to:
   
      Yuko Onoe
      NTT Mobile Communications Network Inc.
      3-5, Hikarinooka, Yokosuka, 
      Kanagawa, 239-8536, Japan

      Phone: +81 468 40 3327

      EMail: yuko@mml.yrp.nttdocomo.co.jp

      Norihiro Ishikawa
      NTT Mobile Communications Network Inc.
      3-5, Hikarinooka, Yokosuka, 
      Kanagawa, 239-8536, Japan

      Phone: +81 468 40 3819

      EMail: ishikawa@mml.yrp.nttdocomo.co.jp







Expires July 4, 2000         Onoe                               [Page 8]

INTERNET-DRAFT     Proxy Server Configuration Option     January 4, 2000


      Megumi Kondo
      NTT Mobile Communications Network Inc.
      Shin-nikko Bldg.,
      10-1, Toranomon 2-chome, Minato-ku 
      Tokyo, 105-8436, Japan

      Phone: +81 3 5563 7204

      EMail: megumi@serdev.nttdocomo.co.jp

      Shinji Kobayashi
      NTT Mobile Communications Network Inc.
      Shin-nikko Bldg.,
      10-1, Toranomon 2-chome, Minato-ku 
      Tokyo, 105-8436, Japan

      Phone: +81 3 5563 7204

      EMail: kobayash@serdev.nttdocomo.co.jp




















Expires July 4, 2000         Onoe                               [Page 9]


