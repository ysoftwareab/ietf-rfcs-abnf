<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Dual-stack lite broadband deployments post IPv4 exhaustion</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Dual-stack lite broadband deployments post IPv4 exhaustion">
<meta name="keywords" content="NAT">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Internet Engineering Task Force</td><td class="header">A. Durand</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Comcast</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">R. Droms</td></tr>
<tr><td class="header">Expires: September 5, 2009</td><td class="header">Cisco</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">B. Haberman</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">JHU APL</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">J. Woodyatt</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Apple</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">March 04, 2009</td></tr>
</table></td></tr></table>
<h1><br />Dual-stack lite broadband deployments post IPv4 exhaustion<br />draft-ietf-softwire-dual-stack-lite-00</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 5, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>      The common thinking for more than 10 years has been that the transition to IPv6 will be based on the dual stack model and that most things would be converted this way before we ran out of IPv4.
</p>
<p>It has not happened. The IANA free pool of IPv4 addresses will be depleted soon, well before any significant IPv6 deployment will have occurred.
</p>
<p>
This document revisits the dual-stack model and introduces the dual-stack lite technology aimed at better aligning the costs and benefits of deploying IPv6. Dual-stack lite will provide the necessary bridge between the two protocols, offering an evolution path of the Internet post IANA IPv4 depletion.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Requirements language<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Terminology<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">1.3.</a>&nbsp;
IPv4 exhaustion coming sooner than expected<br />
<a href="#anchor5">2.</a>&nbsp;
Handling the legacy<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.1.</a>&nbsp;
Legacy edges of the Internet for broadband customers<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.2.</a>&nbsp;
Content and Services available on the Internet<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">2.3.</a>&nbsp;
Additional impact on new broadband deployment<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">2.4.</a>&nbsp;
Burden on service providers<br />
<a href="#anchor10">3.</a>&nbsp;
Expectations for dual-stack lite deployment<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.1.</a>&nbsp;
Expectations for home gateway based scenarios<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">3.2.</a>&nbsp;
Expectations for devices directly connected to the broadband service provider network<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.3.</a>&nbsp;
Application expectations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">3.4.</a>&nbsp;
Service provider network expectations<br />
<a href="#anchor15">4.</a>&nbsp;
Dual-stack lite<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">4.1.</a>&nbsp;
Domain of application<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">4.2.</a>&nbsp;
Dual-stack lite interface<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">4.3.</a>&nbsp;
Dual-stack lite device<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">4.4.</a>&nbsp;
Dual-stack lite home router<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">4.5.</a>&nbsp;
Dual-stack lite router<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">4.6.</a>&nbsp;
Discovery of the dual-stack lite carrier-grade NAT device<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">4.7.</a>&nbsp;
Dual-stack lite carrier-grade NAT<br />
<a href="#anchor23">5.</a>&nbsp;
Example architectures<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor24">5.1.</a>&nbsp;
Router-based architecture<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor25">5.1.1.</a>&nbsp;
Example message flow<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor26">5.1.2.</a>&nbsp;
Translation details<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#host-based-arch">5.2.</a>&nbsp;
Host based architecture<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor27">5.2.1.</a>&nbsp;
Example message flow<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor28">5.2.2.</a>&nbsp;
Translation details<br />
<a href="#anchor29">6.</a>&nbsp;
Encapsulations<br />
<a href="#anchor30">7.</a>&nbsp;
Carrier-grade NAT considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor31">7.1.</a>&nbsp;
Per customer port allocation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor32">7.2.</a>&nbsp;
ALG<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor33">7.3.</a>&nbsp;
UPnP<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor34">7.4.</a>&nbsp;
MTU<br />
<a href="#anchor35">8.</a>&nbsp;
Future work<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor36">8.1.</a>&nbsp;
Multicast considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor37">8.2.</a>&nbsp;
3rd party carrier-grade NAT<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor38">8.3.</a>&nbsp;
Interface initialization<br />
<a href="#anchor39">9.</a>&nbsp;
Comparison with an architecture with multiple-layers of NAT<br />
<a href="#anchor40">10.</a>&nbsp;
Comparison with NAT-PT (or its potential replacements)<br />
<a href="#anchor41">11.</a>&nbsp;
Comparison with DSTM<br />
<a href="#Acknowledgements">12.</a>&nbsp;
Acknowledgements<br />
<a href="#IANA">13.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">14.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">15.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">15.1.</a>&nbsp;
Normative references<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">15.2.</a>&nbsp;
Informative references<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>This document presents views on IP deployments after the exhaustion of IPv4 addresses and some of the necessary technologies to 
      achieve it. The views expressed are the authors' personal opinions and in no way imply that Comcast plans to deploy or that Cisco will implement the technologies described here.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Requirements language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Terminology</h3>

<p>
    This document makes a distinction between a dual-stack capable and a dual-stack provisioned device. The former is a device that has code that implements both IPv4 and IPv6, from the network layer to the applications. The later is a similar device that has been provisioned with both an IPv4 and an IPv6 address on its interface(s). This document will also further refine this notion by distinguishing between interfaces provisioned directly by the service provider from those provisioned by the customer.
    
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
IPv4 exhaustion coming sooner than expected</h3>

<p>
Global public IPv4 addresses coming from the IANA free pool are running out faster than many predicted a few years ago. The current model shows that exhaustion could happen as early as 2010 or 2011. See http://ipv4.potaroo.net for more details.
Those projection are based on the assumption that tomorrow is going to be very similar to today, i.e., looking at recent address consumption figures is a good indicator of future consumption patterns. This of course, does not take into account any new large scale deployment of IP technology or any human reaction when facing an upcoming shortage. 
</p>
<p>
The prediction of the exact date of exhaustion of the IANA free pool is outside the scope of this document, however one conclusion must be drawn from that study: there will be in the near future a point where new global public IPv4 addresses will not be available in large enough quantity thus any new broadband deployment may have to consider the option of not provisioning any (global) IPv4 addresses to the WAN facing interface of edge devices. However, the classic IPv6 deployment model known as "dual stack provisioning" can be a non starter in such environments. 
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Handling the legacy</h3>

<p>The dual-stack lite technology is intended for maintaining
     connectivity to legacy IPv4 devices and networks after the
     exhaustion of the IPv4 address space while service
     provider networks make a transition to IPv6-only deployments.
     This section describes some of the specific legacy scenarios
     addressed by dual-stack lite.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Legacy edges of the Internet for broadband customers</h3>

<p>
Broadband home customers have a mix and match of IP enabled devices. 
The most recent operating systems (e.g., Windows Vista, Mac OS X and
various versions of Linux) can operate in an IPv6-only environment;
however most of the legacy devices can't. Windows XP, for example, cannot process DNS requests over IPv6 transport. Expecting broadband customers to massively upgrade their software (and in most cases the corresponding hardware) to deploy IPv6 is a very tall order. 
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Content and Services available on the Internet</h3>

<p>
IPv6 deployment has taken a very long time to take off, so the current
situation is that almost none of the content and services available on
the Internet are accessible over IPv6. This situation will probably change in the future, but for now, one has to make the assumption that most of the traffic generated by (and to) broadband customers will be sent to (and originated by) IPv4 nodes.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Additional impact on new broadband deployment</h3>

<p>
Even when considering new, green field, broadband deployments, such as always-on 4G, service providers have to face the same situation as described above, that is, content and services available on the Internet are, today, generally accessible only over IPv4 and not IPv6. This makes adoption of IPv6 for green field deployment difficult. Solutions like NAT-PT, now deprecated, do not provide, as of today, a satisfying and scalable answer.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Burden on service providers</h3>

<p>
As a conclusion, broadband service providers may be faced with the
situation where they have IPv4 customers who need to communicate with
IPv4 servers on the Internet but may not have any IPv4 addresses left
to assign to those customers.  A service providers may also be in a
situation where it wants to deploy IPv6 in its core network, avoiding
the use of scarce IPv4 addresses.  However, without some form of
backward compatibility with IPv4, the cost and the benefits of
deploying IPv6 are not aligned, making incremental IPv6 deployment
very difficult.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Expectations for dual-stack lite deployment</h3>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Expectations for home gateway based scenarios</h3>

<p>
This section mainly address home style networks characterized by the presence of a home gateway.
</p>
<p>
Legacy, unmodified, IPv4-only devices inside the home network are expected to keep using RFC1918 address space, a-la 192.168.0.0/16 and should be able to access the IPv4 Internet in a similar way they do it today through a home gateway IPv4 NAT.
</p>
<p>Unmodified IPv6 capable devices are expected to be able to reach directly the IPv6 Internet, without going through any translation. It is expected that most IPv6 capable devices will also be IPv4 capable and will simply be configured with an IPv4 RFC1918 style address within the home network and access the IPv4 Internet the same way as the legacy IPv4-only devices within the home.
</p>
<p>IPv6-only devices that do not include code for an IPv4 stack are outside of the scope of this document.
</p>
<p>It is expected that the home gateway is either software upgradable, replaceable or provided by the service provider as part of a new contract. Outside of early IPv6 deployments done prior to IPv4 exhaustion using some form of tunnel, this is pretty much a requirement to deploy any IPv6 service to the home. It is expected that this home gateway will be a dual stack capable device that would only be provisioned with IPv6 on its WAN side. IPv4 and IPv6 are expected to be locally provisioned on any LAN interfaces of such devices. IPv4 addresses on such interfaces are expected to be RFC1918. The key point here is that the service provider will not provision any IPv4 addresses for those home gateway devices.

</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Expectations for devices directly connected to the broadband service provider network</h3>

<p>
Under this deployment model, devices directly connected to the broadband service provider network without the presence of a home gateway will have to be dual stack capable devices. The service provider facing interface(s) of such device will only be provisioned with IPv6. IPv4 may or may not be provisioned locally on other interfaces of such devices. Similarly to the above section, the key point here is that the service provider will not provision any IPv4 addresses for those directly connected devices.

</p>
<p>It is expected that directly connected devices will implement code to support the dual-stack lite functionality. The minimum support required is an IPv4 over IPv6 tunnel.
</p>
<p>IPv4-only devices and IPv6-only devices are specifically left out of scope for this document. It is expected that most modern device directly connected to the service provider network would not have memory constraints to implement both stack. 
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Application expectations</h3>

<p>
Most applications that today work transparently through an IPv4 home gateway NAT should keep working the same way. However, it is not expected that applications that requires specific port assignment or port mapping from the NAT box will keep working. Details and recommendations for application behavior are outside the scope of this document and should be discussed in the behave working group.

</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Service provider network expectations</h3>

<p>
The dual-stack lite deployment model is based on the notion that IPv4 addresses will be shared by several customers. This implies that the NAT functionality will move from the home gateway to a device hosted within the service provider network. It is important to observe that this functionality does not have to be performed deep in the core of the network and that it might be better implemented close to the aggregation point of customer traffic.

</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Dual-stack lite</h3>

<p>
The core ideas behind dual-stack lite are:

  </p>
<ul class="text">
<li>Move from a deployment model where a globally unique IPv4
    address is provisioned per customer and shared among several
    devices within that customer premise to a deployment model where
    that globally unique IPv4 address is shared among many customers
</li>
<li>Provide transport of IPv4 traffic to customers over a core
    network that uses only IPv6
    
</li>
</ul><p>
Instead of relying on a cascade of NATs or NAT-PT, the dual-stack lite
model is built on IPv4 over IPv6 tunnels to cross the network to reach
a carrier-grade IPv4-IPv4 NAT. As such, it simplifies the management of
the service provider network by using only IPv6 and provides the
customer the benefit of having only one layer of NAT. The additional
benefit of this model is to gradually introduce IPv6 in the Internet
by making it virtually backward compatible with IPv4.

</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Domain of application</h3>

<p>
The dual-stack lite deployment model has been designed with broadband
networks in mind. It is certainly applicable to other domains although
the authors do not make any specific claim of suitability.

</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Dual-stack lite interface</h3>

<p>
A dual-stack lite interface on a dual-stack capable device is modeled as a point to point IPv4 over IPv6 tunnel. Its configuration requires that the device is provisioned with IPv6 but does not require it to be provisioned with a global IPv4 by the service provider.

</p>
<p>
Any locally unique IPv4 address can be configured on the subscriber
network end of the dual-stack lite tunnel. In the case of dual-stack
lite in which the tunnel endpoint is in a host <a class='info' href='#host-based-arch'>Section&nbsp;5.2<span> (</span><span class='info'>Host based architecture</span><span>)</span></a>, it is recommended that dual-stack lite
implementations use any address a.b.c.d in the well known range e.f.g.h/p (to be defined by
IANA) but the first one (all-zero address in the reserved subnet) as the IPv4 host side of the tunnel and the last one of the same range as the address of the IPv4 default gateway, with a netmask to cover a /p network.

</p>
<p>
Note 1: on a multi-home node, several dual-stack like interfaces could end-up being configured. Each of those interfaces should be configured with a different IPv4 address taken out of the reserved range.

</p>
<p>Note 2: because of this static configuration using well known values, there is no need to run a DHCPv4 client on a Dual-stack lite interface.
</p>
<p>
The service provider network end point of a dual-stack lite interface
is the IPv6 address of a dual-stack lite carrier-grade NAT within the
service provider network.

</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Dual-stack lite device</h3>

<p>
A dual-stack lite device is a dual-stack capable device implementing a dual-stack lite interface. In the absence of better routing information, a dual-stack lite device will configure a static IPv4 default route over the dual-stack lite interface.
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Dual-stack lite home router</h3>

<p>
A dual-stack lite home router is a dual-stack capable home router implementing a dual-stack lite interface layered on top of its WAN interface. In the absence of better routing information, a dual-stack lite home router will configure a static IPv4 default route over the dual-stack lite interface. The dual-stack lite home router can use any IPv4 address a.b.c.d out of the e.f.g.h/p prefix (TBD by IANA) to source its own IPv4 packets, embedded into the IPv6 tunnel. If the dual-stack lite home router need to configure a router pointing to an IPv4 default router, it can use the last address in the e.f.g.h/p (TBD by IANA) range for that purpose, with a netmask to cover a /p (TBD by IANA) network.

</p>
<p>
Note: a dual-stack lite home router SHOULD NOT perform any IPv4 address translation. It should simply act as a router and pass packets from the LAN to the dual-stack lite interface and back without changing any address. The dual-stack lite router will have to take into account the lowered MTU of the tunnel and possibly perform IPv4 fragmentation.

</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Dual-stack lite router</h3>

<p>
The concept of a dual-stack lite home router can be extended to any IPv4 router serving as a gateway between a leaf IP domain and the rest of the Internet.

</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6"></a><h3>4.6.&nbsp;
Discovery of the dual-stack lite carrier-grade NAT device</h3>

<p>
The IPv6 address of a dual-stack lite carrier-grade NAT device can be
configured on a dual-stack lite interface using a variety of methods,
ranging from an out-of-band mechanism, manual configuration, a
to-be-defined DHCPv6 option <a class='info' href='#I-D.dhankins-softwire-tunnel-option'>[I&#8209;D.dhankins&#8209;softwire&#8209;tunnel&#8209;option]<span> (</span><span class='info'>Hankins, D. and T. Mrugalski, &ldquo;Dynamic Host Configuration Protocol (DHCPv6) Option for Dual-Stack Lite,&rdquo; November&nbsp;2009.</span><span>)</span></a> or a to-be-defined IPv6 router
advertisement. It is expected that over time some or all the above
methods, as well as others, will be defined. The requirements and specifications of such methods are out of scope for this document.

</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7"></a><h3>4.7.&nbsp;
Dual-stack lite carrier-grade NAT</h3>

<p>
A dual-stack lite carrier grade NAT is a special IPv4 to IPv4 NAT deployed within the service provider network. It is reachable by customers via a series of point to point IPv4 over IPv6 tunnels.

</p>
<p>
A dual-stack lite carrier-grade NAT uses a combination of the IPv6 source address of the tunnel and the inner IPv4 source address to establish and maintain the IPv4 NAT mapping table.

</p>
<p>
A dual-stack lite carrier-grade NAT does not have to perform any IPv6-IPv6, IPv6-IPv4 or IPv4-IPv6 NAT.

</p>
<p>A dual-stack lite carrier-grade NAT can use the last IPv4 address of the range e.f.g.h/p (TBD by IANA) in the IPv4 ICMP packets it will originate toward a dual-stack lite client to enable meaningful ping and traceroute results.
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Example architectures</h3>

<p>The underlying technology behind dual-stack lite is the combination of two
     well-known technologies: NAT and tunneling. This combination can be best described using the
     terminology developed in the softwire working group as Softwire NAT, or SNAT.
</p>
<p>Two architectures can be deployed for dual-stack lite. One is
     targeting the legacy installed base of IPv4 only hosts (and dual-stack capable hosts) sitting behind a gateway. The second is targeting dual-stack capable hosts initiating the tunnel themselves. 
</p>
<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Router-based architecture</h3>

<p>This architecture is targeted at residential broadband deployments but can be adapted easily to other types of deployment where the installed base of IPv4-only device is important.
</p>
<p>As illustrated in <a class='info' href='#gnat-arch'>Figure&nbsp;1<span> (</span><span class='info'>SNAT gateway-based architecture</span><span>)</span></a>, this dual-stack
     lite deployment model consists of three components: the
     dual-stack lite home router, the dual-stack lite carrier-grade
     NAT and a softwire between the softwire initiator (SI) in the
     dual-stack lite home router and the softwire concentrator (SC) in
     the dual-stack lite carrier-grade NAT.  The dual-stack lite
     carrier-grade NAT performs IPv4-IPv4 NAT translations to
     multiplex multiple subscribers through a single global IPv4
     address.  Overlapping address spaces used by subscribers are
     disambiguated through the identification of tunnel endpoints.
</p><br /><hr class="insert" />
<a name="gnat-arch"></a>

<p style='text-align: center'>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                +-----------+
                |    Host   |
                +-----+-----+
                      |10.0.0.1
                      |
                      |
                      |10.0.0.2
            +---------|---------+
            |         |         |
            |dual-stack lite home router
            |+--------+--------+|
            ||     SNAT SI     ||
            |+--------+--------+|
            +--------|||--------+
                     |||2001:0:0:1::1
                     |||
                     |||&lt;-IPv4-in-IPv6 softwire
                     |||
              -------|||-------
            /        |||        \
           |   ISP core network  |
            \        |||        /
              -------|||-------
                     |||
                     |||2001:0:0:2::1
            +--------|||--------+
            |dual-stack lite carrier-grade NAT
            |+--------+--------+|
            ||     SNAT SC     ||
            |+--------+--------+|
            |       |NAT|       |
            |       +-+-+       |
            +---------|---------+
                      |129.0.0.1
                      |
              --------|--------
            /         |         \
           |       Internet      |
            \         |         /
              --------|--------
                      |
                      |128.0.0.1
                +-----+-----+
                | IPv4 Host |
                +-----------+
</pre></div>
<p style='text-align: center'>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: SNAT gateway-based architecture&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Notes:
  </p>
<ul class="text">
<li>The dual-stack lite home router is not required to be on the
    same link as the host
</li>
<li>The dual-stack lite home router could be replaced by a
    dual-stack lite router in the service provider network
</li>
</ul><p>
  
</p>
<p>The resulting solution accepts an IPv4 datagram that is
     translated into an IPv4-in-IPv6 softwire datagram for
     transmission across the softwire.  At the corresponding
     endpoint, the IPv4 datagram is decapsulated, and the translated
     IPv4 address is inserted based on a translation from the
     softwire.
</p>
<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1"></a><h3>5.1.1.&nbsp;
Example message flow</h3>

<p>In the example shown in <a class='info' href='#outbound-dg'>Figure&nbsp;2<span> (</span><span class='info'>Outbound Datagram</span><span>)</span></a>, the
     translation tables in the dual-stack lite carrier-grade NAT is
     configured to forward between IP/TCP (10.0.0.1/10000) and IP/TCP
     (129.0.0.1/5000).  That is, a datagram received by the dual-stack
     lite home router from the host at address 10.0.0.1, using TCP DST
     port 10000 will be translated a datagram with IP SRC address
     129.0.0.1 and TCP SRC port 5000 in the Internet.
</p><br /><hr class="insert" />
<a name="outbound-dg"></a>

<p style='text-align: center'>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                +-----------+
                |    Host   |
                +-----+-----+
                   |  |10.0.0.1
   IPv4 datagram 1 |  |
                   |  |
                   v  |10.0.0.2
            +---------|---------+
            |         |         |
            |dual-stack lite home router
            |+--------+--------+|
            ||     SNAT SI     ||
            |+--------+--------+|
            +--------|||--------+
                   | |||2001:0:0:1::1
    IPv6 datagram 2| |||
                   | |||&lt;-IPv4-in-IPv6 softwire
                   | |||
              -----|-|||-------
            /      | |||        \
           |   ISP core network  |
            \      | |||        /
              -----|-|||-------
                   | |||
                   | |||2001:0:0:2::1
            +------|-|||--------+
            |dual-stack lite carrier-grade NAT
            |      v |||        |
            |+--------+--------+|
            ||     SNAT SC     ||
            |+--------+--------+|
            |       |NAT|       |
            |       +-+-+       |
            +---------|---------+
                   |  |129.0.0.1
   IPv4 datagram 3 |  |
              -----|--|--------
            /      |  |         \
           |       Internet      |
            \      |  |         /
              -----|--|--------
                   |  |
                   v  |128.0.0.1
                +-----+-----+
                | IPv4 Host |
                +-----------+
</pre></div>
<p style='text-align: center'>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Outbound Datagram&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="right"><col align="right"><col align="left">
<tr><th align="right">Datagram</th><th align="right">Header field</th><th align="left">Contents</th></tr>
<tr>
<td align="right">IPv4 datagram 1</td>
<td align="right">IPv4 Dst</td>
<td align="left">128.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv4 Src</td>
<td align="left">10.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Dst</td>
<td align="left">80</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Src</td>
<td align="left">10000</td>
</tr>
<tr>
<td align="right">---------------</td>
<td align="right">------------</td>
<td align="left">-------------</td>
</tr>
<tr>
<td align="right">IPv6 Datagram 2</td>
<td align="right">IPv6 Dst</td>
<td align="left">2001:0:0:2::1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv6 Src</td>
<td align="left">2001:0:0:1::1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv4 Dst</td>
<td align="left">128.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv4 Src</td>
<td align="left">10.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Dst</td>
<td align="left">80</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Src</td>
<td align="left">10000</td>
</tr>
<tr>
<td align="right">---------------</td>
<td align="right">------------</td>
<td align="left">-------------</td>
</tr>
<tr>
<td align="right">IPv4 datagram 3</td>
<td align="right">IPv4 Dst</td>
<td align="left">128.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv4 Src</td>
<td align="left">129.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Dst</td>
<td align="left">80</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Src</td>
<td align="left">5000</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Datagram header contents&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>When datagram 1 is received by the dual-stack lite home router, the SI function
     encapsulates the datagram in datagram 2 and forwards it to
     the dual-stack lite carrier-grade NAT over the softwire.
</p>
<p>When it receives datagram 2, the SC in the dual-stack lite carrier-grade NAT hands the
     IPv4 datagram to the NAT, which determines from its translation
     table that the datagram received on Softwire_1 with TCP SRC port
     10000 should be translated to datagram 3 with IP SRC address
     129.0.0.1 and TCP SRC port 5000.
</p>
<p><a class='info' href='#inbound-dg'>Figure&nbsp;3<span> (</span><span class='info'>Inbound Datagram</span><span>)</span></a> shows an inbound message received
     at the dual-stack lite carrier-grade NAT.  When the NAT function
     in the dual-stack lite carrier-grade NAT receives datagram 1, it
     looks up the IP/TCP DST in its translation table.  In the example
     in Figure 3, the NAT translates the TCP DST port to 10000, sets
     the IP DST address to 10.0.0.1 and hands the datagram to the SC
     for transmission over Softwire_1.  The SI in the dual-stack lite
     home router decapsulates IPv4 datagram from the inbound softwire
     datagram, and forwards it to the host.
</p><br /><hr class="insert" />
<a name="inbound-dg"></a>

<p style='text-align: center'>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                +-----------+
                |    Host   |
                +-----+-----+
                   ^  |10.0.0.1
   IPv4 datagram 3 |  |
                   |  |
                   |  |10.0.0.2
            +---------|---------+
            |       +-+-+       |
            |dual-stack lite home router
            |+--------+--------+|
            ||     SNAT SI     ||
            |+--------+--------+|
            +--------|||--------+
                   ^ |||2001:0:0:1::1
   IPv6 datagram 2 | |||
                   | |||&lt;-IPv4-in-IPv6 softwire
                   | |||
              -----|-|||-------
            /      | |||        \
           |   ISP core network  |
            \      | |||        /
              -----|-|||-------
                   | |||
                   | |||2001:0:0:2::1
            +------|-|||--------+
            |dual-stack lite carrier-grade NAT
            |+--------+--------+|
            ||     SNAT SC     ||
            |+--------+--------+|
            |       |NAT|       |
            |       +-+-+       |
            +---------|---------+
                   ^  |129.0.0.1
   IPv4 datagram 1 |  |
              -----|--|--------
            /      |  |         \
           |       Internet      |
            \      |  |         /
              -----|--|--------
                   |  |
                   |  |128.0.0.1
                +-----+-----+
                | IPv4 Host |
                +-----------+
</pre></div>
<p style='text-align: center'>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Inbound Datagram&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="right"><col align="right"><col align="left">
<tr><th align="right">Datagram</th><th align="right">Header field</th><th align="left">Contents</th></tr>
<tr>
<td align="right">IPv4 datagram 1</td>
<td align="right">IPv4 Dst</td>
<td align="left">129.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv4 Src</td>
<td align="left">128.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Dst</td>
<td align="left">5000</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Src</td>
<td align="left">80</td>
</tr>
<tr>
<td align="right">---------------</td>
<td align="right">------------</td>
<td align="left">-------------</td>
</tr>
<tr>
<td align="right">IPv6 Datagram 2</td>
<td align="right">IPv6 Dst</td>
<td align="left">2001:0:0:1::1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv6 Src</td>
<td align="left">2001:0:0:2::1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv4 Dst</td>
<td align="left">10.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IP Src</td>
<td align="left">128.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Dst</td>
<td align="left">10000</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Src</td>
<td align="left">80</td>
</tr>
<tr>
<td align="right">---------------</td>
<td align="right">------------</td>
<td align="left">-------------</td>
</tr>
<tr>
<td align="right">IPv4 datagram 3</td>
<td align="right">IPv4 Dst</td>
<td align="left">10.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv4 Src</td>
<td align="left">128.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Dst</td>
<td align="left">10000</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Src</td>
<td align="left">80</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Datagram header contents&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.2"></a><h3>5.1.2.&nbsp;
Translation details</h3>

<p>The dual-stack lite carrier-grade NAT has a NAT that
     translates between softwire/port pairs and IPv4-address/port
     pairs.  The same translation is applied to IPv4 datagrams
     received on the device's external interface and from the softwire
     endpoint in the device.
</p>
<p>In <a class='info' href='#outbound-dg'>Figure&nbsp;2<span> (</span><span class='info'>Outbound Datagram</span><span>)</span></a>, the translator network
     interface in the dual-stack lite carrier-grade NAT is on the
     Internet, and the softwire interface connects to the dual-stack
     lite home router.  The dual-stack lite carrier-grade NAT
     translator is configured as follows:

     </p>
<blockquote class="text"><dl>
<dt>Network interface:</dt>
<dd>Translate IPv4 destination
	address and TCP destination port to the softwire identifier
	and TCP destination port
</dd>
<dt>Softwire interface:</dt>
<dd>Translate softwire
	identifier and TCP source port to IPv4 source address and TCP
	source port
</dd>
</dl></blockquote><p>
     
</p>
<p>Here is how the translation in <a class='info' href='#inbound-dg'>Figure&nbsp;3<span> (</span><span class='info'>Inbound Datagram</span><span>)</span></a>
     works:

     </p>
<ul class="text">
<li>Datagram 1 is received on the dual-stack lite carrier-grade NAT translator network
	interface.  The translator looks up the IPv4-address/port
	pair in its translator table, rewrites the IPv4 destination address
	to 10.0.0.1 and the TCP source port to 10000, and hands the
	datagram to the SE to be forwarded over the softwire.
</li>
<li>The IPv4 datagram is received on the dual-stack lite home router SI.  The SI
	function extracts the IPv4 datagram and the dual-stack lite home router forwards
	datagram 3 to the host.
</li>
</ul><p>
     
</p><br /><hr class="insert" />
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="right"><col align="left">
<tr><th align="right">Softwire/IPv4/Port</th><th align="left">IPv4/Port</th></tr>
<tr>
<td align="right">Softwire_1/10.0.0.1/TCP 10000</td>
<td align="left">129.0.0.1/TCP 5000</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;dual-stack lite carrier-grade NAT translation table&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="host-based-arch"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Host based architecture</h3>

<p>
This architecture is targeted at new, large scale deployments of dual-stack capable devices implementing a dual-stack lite interface.

</p>
<p>As illustrated in <a class='info' href='#gnat-arch2'>Figure&nbsp;4<span> (</span><span class='info'>SNAT host-based architecture</span><span>)</span></a>, this dual-stack
     lite deployment model consists of three components: the
     dual-stack lite host, the dual-stack lite carrier-grade NAT and a
     softwire between the softwire initiator (SI) in the host and the
     softwire concentrator (SC) in the dual-stack lite carrier-grade
     NAT. The dual-stack lite host is assumed to have IPv6 service and
     can exchange IPv6 traffic with the dual-stack lite carrier-grade
     NAT.
</p>
<p>The dual-stack lite carrier-grade NAT performs IPv4-IPv4 NAT
     translations to multiplex multiple subscribers through a single
     global IPv4 address.  Overlapping IPv4 address spaces used by the
     dual-stack lite hosts are disambiguated through the
     identification of tunnel endpoints.
</p>
<p>In this situation, the dual-stack lite host configures the
     IPv4 address a.b.c.d out of the well-known range e.f.g.h/p (TBD by IANA) on it dual-stack
     lite interface acting as the SI. It also configure the last IPv4 address of the
     reserved range as the address of its default gateway, with a netmask to
     cover a /p (TBD by IANA) network.
</p><br /><hr class="insert" />
<a name="gnat-arch2"></a>

<p style='text-align: center'>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


            +-------------------+
            |                   |
            |Host  a.b.c.d      |
            |+--------+--------+|
            ||     SNAT SI     ||
            |+--------+--------+|
            +--------|||--------+
                     |||2001:0:0:1::1
                     |||
                     |||&lt;-IPv4-in-IPv6 softwire
                     |||
              -------|||-------
            /        |||        \
           |   ISP core network  |
            \        |||        /
              -------|||-------
                     |||
                     |||2001:0:0:2::1
            +--------|||--------+
            |dual-stack lite carrier-grade NAT
            |+--------+--------+|
            ||     SNAT SC     ||
            |+--------+--------+|
            |       |NAT|       |
            |       +-+-+       |
            +---------|---------+
                      |129.0.0.1
                      |
              --------|--------
            /         |         \
           |       Internet      |
            \         |         /
              --------|--------
                      |
                      |128.0.0.1
                +-----+-----+
                | IPv4 Host |
                +-----------+
</pre></div>
<p style='text-align: center'>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: SNAT host-based architecture&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The resulting solution accepts an IPv4 datagram that is
     translated into an IPv4-in-IPv6 softwire datagram for
     transmission across the softwire.  At the corresponding
     endpoint, the IPv4 datagram is decapsulated, and the translated
     IPv4 address is inserted based on a translation from the
     softwire.
</p>
<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1"></a><h3>5.2.1.&nbsp;
Example message flow</h3>

<p>In the example shown in <a class='info' href='#outbound-dg2'>Figure&nbsp;5<span> (</span><span class='info'>Outbound Datagram</span><span>)</span></a>, the
     translation tables in the dual-stack lite carrier-grade NAT is
     configured to forward between IP/TCP (a.b.c.d/10000) and IP/TCP
     (129.0.0.1/5000).  That is, a datagram received from the host at
     address a.b.c.d, using TCP DST port 10000 will be translated a
     datagram with IP SRC address 129.0.0.1 and TCP SRC port 5000 in
     the Internet.
</p><br /><hr class="insert" />
<a name="outbound-dg2"></a>

<p style='text-align: center'>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

            +-------------------+
            |                   |
            |Host a.b.c.d       |
            |+--------+--------+|
            ||     SNAT SI     ||
            |+--------+--------+|
            +--------|||--------+
                   | |||2001:0:0:1::1
    IPv6 datagram 1| |||
                   | |||&lt;-IPv4-in-IPv6 softwire
                   | |||
              -----|-|||-------
            /      | |||        \
           |   ISP core network  |
            \      | |||        /
              -----|-|||-------
                   | |||
                   | |||2001:0:0:2::1
            +------|-|||--------+
            |dual-stack lite carrier-grade NAT
            |      v |||        |
            |+--------+--------+|
            ||     SNAT SC     ||
            |+--------+--------+|
            |       |NAT|       |
            |       +-+-+       |
            +---------|---------+
                   |  |129.0.0.1
   IPv4 datagram 2 |  |
              -----|--|--------
            /      |  |         \
           |       Internet      |
            \      |  |         /
              -----|--|--------
                   |  |
                   v  |128.0.0.1
                +-----+-----+
                | IPv4 Host |
                +-----------+
</pre></div>
<p style='text-align: center'>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Outbound Datagram&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="right"><col align="right"><col align="left">
<tr><th align="right">Datagram</th><th align="right">Header field</th><th align="left">Contents</th></tr>
<tr>
<td align="right">IPv6 Datagram 1</td>
<td align="right">IPv6 Dst</td>
<td align="left">2001:0:0:2::1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv6 Src</td>
<td align="left">2001:0:0:1::1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv4 Dst</td>
<td align="left">128.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv4 Src</td>
<td align="left">a.b.c.d</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Dst</td>
<td align="left">80</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Src</td>
<td align="left">10000</td>
</tr>
<tr>
<td align="right">---------------</td>
<td align="right">------------</td>
<td align="left">-------------</td>
</tr>
<tr>
<td align="right">IPv4 datagram 2</td>
<td align="right">IPv4 Dst</td>
<td align="left">128.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv4 Src</td>
<td align="left">129.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Dst</td>
<td align="left">80</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Src</td>
<td align="left">5000</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Datagram header contents&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>When sending an IPv4 packet, the dual-stack lite host
     encapsulates it in datagram 1 and forwards it to
     the dual-stack lite carrier-grade NAT over the softwire.
</p>
<p>When it receives datagram 1, the SC in the dual-stack lite
     carrier-grade NAT hands the IPv4 datagram to the NAT, which
     determines from its translation table that the datagram received
     on Softwire_1 with TCP SRC port 10000 should be translated to
     datagram 3 with IP SRC address 129.0.0.1 and TCP SRC port
     5000.
</p>
<p><a class='info' href='#inbound-dg2'>Figure&nbsp;6<span> (</span><span class='info'>Inbound Datagram</span><span>)</span></a> shows an inbound message
     received at the dual-stack lite carrier-grade NAT.  When the NAT
     function in the dual-stack lite carrier-grade NAT receives
     datagram 1, it looks up the IP/TCP DST in its translation table.
     In the example in Figure 3, the NAT translates the TCP DST port
     to 10000, sets the IP DST address to a.b.c.d and hands the
     datagram to the SC for transmission over Softwire_1.  The SI in
     the dual-stack lite home router decapsulates IPv4 datagram from
     the inbound softwire datagram, and forwards it to the host.
</p><br /><hr class="insert" />
<a name="inbound-dg2"></a>

<p style='text-align: center'>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

            +-------------------+
            |                   |
            |Host a.b.c.d       |
            |+--------+--------+|
            ||     SNAT SI     ||
            |+--------+--------+|
            +--------|||--------+
                   ^ |||2001:0:0:1::1
   IPv6 datagram 2 | |||
                   | |||&lt;-IPv4-in-IPv6 softwire
                   | |||
              -----|-|||-------
            /      | |||        \
           |   ISP core network  |
            \      | |||        /
              -----|-|||-------
                   | |||
                   | |||2001:0:0:2::1
            +------|-|||--------+
            |dual-stack lite carrier-grade NAT
            |      | |||        |
            |+--------+--------+|
            ||     SNAT SC     ||
            |+--------+--------+|
            |       |NAT|       |
            |       +-+-+       |
            +---------|---------+
                   ^  |129.0.0.1
   IPv4 datagram 1 |  |
              -----|--|--------
            /      |  |         \
           |       Internet      |
            \      |  |         /
              -----|--|--------
                   |  |
                   |  |128.0.0.1
                +-----+-----+
                | IPv4 Host |
                +-----------+
</pre></div>
<p style='text-align: center'>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Inbound Datagram&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="right"><col align="right"><col align="left">
<tr><th align="right">Datagram</th><th align="right">Header field</th><th align="left">Contents</th></tr>
<tr>
<td align="right">IPv4 datagram 1</td>
<td align="right">IPv4 Dst</td>
<td align="left">129.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv4 Src</td>
<td align="left">128.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Dst</td>
<td align="left">5000</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Src</td>
<td align="left">80</td>
</tr>
<tr>
<td align="right">---------------</td>
<td align="right">------------</td>
<td align="left">-------------</td>
</tr>
<tr>
<td align="right">IPv6 Datagram 2</td>
<td align="right">IPv6 Dst</td>
<td align="left">2001:0:0:1::1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv6 Src</td>
<td align="left">2001:0:0:2::1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IPv4 Dst</td>
<td align="left">a.b.c.d</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">IP Src</td>
<td align="left">128.0.0.1</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Dst</td>
<td align="left">10000</td>
</tr>
<tr>
<td align="right">&nbsp;</td>
<td align="right">TCP Src</td>
<td align="left">80</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Datagram header contents&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2"></a><h3>5.2.2.&nbsp;
Translation details</h3>

<p>The translations happening in the dual-stack lite
     carrier-grade NAT are the same as in the previous examples. The
     well known IPv4 address a.b.c.d out of the e.f.g.h/p (TBD by IANA) range used by all the hosts are
     disambiguated by the IPv6 source address of the softwire.
</p>
<a name="anchor29"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Encapsulations</h3>

<p>In its simplest deployment model, dual-stack lite only requires IPv4 in IPv6 encapsulation. In more complex scenario where a site gateway would play the role of the softwire initiator, more complex encapsulation might be desired. Thus dual-stack lite hosts, dual-stack lite home gateway and dual-stack lite NAT devices MUST at minimum implement IPv4 in IPv6 encapsulation. On top of that, dual-stack lite NAT devices MAY also support other encapsulation, like L2TPv2/v3, GRE, MPLS,... If they do, they SHOULD support L2TPv2 as defined in the IETF softwire hub & spoke framework.

</p>
<a name="anchor30"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Carrier-grade NAT considerations</h3>

<p>
A dual-stack lite carrier-grade NAT SHOULD implement behavior conforming to the best current practice, currently documented in <a class='info' href='#RFC4787'>[RFC4787]<span> (</span><span class='info'>Audet, F. and C. Jennings, &ldquo;Network Address Translation (NAT) Behavioral Requirements for Unicast UDP,&rdquo; January&nbsp;2007.</span><span>)</span></a>, <a class='info' href='#I-D.ietf-behave-tcp'>[I&#8209;D.ietf&#8209;behave&#8209;tcp]<span> (</span><span class='info'>Guha, S., Biswas, K., Ford, B., Sivakumar, S., and P. Srisuresh, &ldquo;NAT Behavioral Requirements for TCP,&rdquo; September&nbsp;2008.</span><span>)</span></a> and <a class='info' href='#I-D.ietf-behave-nat-icmp'>[I&#8209;D.ietf&#8209;behave&#8209;nat&#8209;icmp]<span> (</span><span class='info'>Srisuresh, P., Ford, B., Sivakumar, S., and S. Guha, &ldquo;NAT Behavioral Requirements for ICMP protocol,&rdquo; January&nbsp;2009.</span><span>)</span></a>. Other requirements for carrier-grade NATs can be found in <a class='info' href='#I-D.nishitani-cgn'>[I&#8209;D.nishitani&#8209;cgn]<span> (</span><span class='info'>Yamagata, I., Nishitani, T., Miyakawa, S., Nakagawa, A., and H. Ashida, &ldquo;Common requirements for IP address sharing schemes,&rdquo; March&nbsp;2010.</span><span>)</span></a>. DISCUSSION: those requirements need to be harmonized.
</p>
<a name="anchor31"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Per customer port allocation</h3>

<p>Because IPv4 addresses will be shared among customers and potentially a large address space reduction factor may be applied, in average, only a limited number N of TCP or UDP port numbers will be available per customer. This means that applications opening a very large number of TCP ports may have a harder time to work. For example, it has been reported that a very well know web site was using AJAX techniques and was opening up to 69 TCP ports per web page. If we make the hypothesis of an address space reduction of a factor 100 (one IPv4 address per 100 customers), and 65k ports per IPv4 addresses available, that makes a total of N=650 ports available simultaneously to be shared among the various devices behind the dual-stack lite tunnel end-point.

</p>
<p>
There is an important operational difference if those N ports are pre-allocated in a cookie-cutter fashion versus allocated on demand by incoming connections. This is a difference between an average of N ports and a maximum of N ports. Several service providers have reported an average number of connections per customer in the single digit. At the opposite end, thousands or tens of thousands of ports could be use in a peak by any single customer browsing a number of AJAX/Web 2.0 sites. With that average number of connections per customers in mind, having an address space reduction of a factor 100 or more is realistic.

</p>
<p>
Application expecting incoming connections, such a peer-to-peer ones, have become popular. Those applications use a very limited number of ports, usually a single one. Making sure those applications keep working in a dual-stack lite environment is important. Similarly, there is a growing list of applications that require some king of ALG to work through a NAT. Service provider carrier-grade NATs should not to be in the way of the deployment of such applications. As such, there is a legitimate need to leave certain ports under the control of the end user. This argue for an hybrid environment, where most ports are dynamically managed by the carrier-grade NAT in a shared pool and a limited number are dedicated per users and controlled by them.

</p>
<p>
A service provider can reserve a static number of ports per user. Note: those could be TCP and UDP ports. The simplest way to allow users to control the associated NAT bindings is to offer a web interface (for example as part of the service provider portal) where, once authenticated, a user can configure each dedicated external IPv4 address/port binding on the carrier-grade NAT in one of the following way:
</p>
<ul class="text">
<li>
either direct the carrier-grade NAT to forward incoming traffic on this address/port to the dual-stack lite home gateway, and let this device deal with it. This required support for <a class='info' href='#I-D.ymbk-aplusp'>A+P<span> (</span><span class='info'>Bush, R., &ldquo;The A+P Approach to the IPv4 Address Shortage,&rdquo; October&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ymbk&#8209;aplusp] semantic on the home gateway.

</li>
<li>
or direct the carrier-grade NAT to rewrite the destination address in those incoming packets to a private IPv4 address within the home network. For obvious security reasons, redirection to global IPv4 address should not be authorized. Note: this behavior is very similar to the port forwarding function found in most home gateways.

</li>
</ul><p>

</p>
<p>
The exact number of ports reserved per user is left at the discretion of the service provider. If more ports need to be reserved outside of that static dedicated range, more ports can be dynamically reserved. <a class='info' href='#I-D.cheshire-nat-pmp'>NAT-PMP<span> (</span><span class='info'>Cheshire, S., &ldquo;NAT Port Mapping Protocol (NAT-PMP),&rdquo; April&nbsp;2008.</span><span>)</span></a> [I&#8209;D.cheshire&#8209;nat&#8209;pmp] is a good solution for that. A DHCPv6 option such as <a class='info' href='#I-D.bajko-v6ops-port-restricted-ipaddr-assign'>[I&#8209;D.bajko&#8209;v6ops&#8209;port&#8209;restricted&#8209;ipaddr&#8209;assign]<span> (</span><span class='info'>Bajko, G. and T. Savolainen, &ldquo;Port Restricted IP Address Assignment,&rdquo; November&nbsp;2008.</span><span>)</span></a> may also be an interesting solution to reserve further ports, although this may be limited to the A+P semantic mentioned above, as there might not be a way to explicitly control the port forwarding semantic.

</p>
<p>
More considerations on sharing IPv4 addresses can be found in "I-D.ford-shared-addressing-issues".

</p>
<a name="anchor32"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
ALG</h3>

<p>
The carrier-grade NAT should only perform a minimum number of ALG for the classic applications such as FTP, RTSP/RTP, IPsec and PPTP VPN pass-through and enable the users to use their own ALG on statically or dynamically reserved port instead.

</p>
<p>
In particular, the carrier-grade NAT SHOULD NOT perform any ALG on the ports reserved either statically or dynamically for a user.

</p>
<a name="anchor33"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
UPnP</h3>

<p>
One could be tempted to have the home gateway relaying UPnP messages over the tunnel to the carrier-grade NAT. Unfortunately, this would not work.
Some applications insist on running on a well-known port number (or port range) using UPnP to request the NAT to reserve that port. Those ports may or may not be available; they could be used by another customer. Using UPnP, a NAT box does not have any way to redirect such applications to use another port, the only option is to deny the request. Those applications typically then cycle through a small range of ports (typically 10 or so) until they abort. The likelihood of those ports being all already in use by other users is very high. As such, UPnP cannot be supported as-is in a dual-stack lite environment.

</p>
<p>
NAT-PMP offers a better semantic, by enabling the NAT to redirect the application to use another unallocated port.

</p>
<a name="anchor34"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.4"></a><h3>7.4.&nbsp;
MTU</h3>

<p>
Using an encapsulation (IP in IP or L2TP) to carry IPv4 traffic over IPv6 will reduce the effective MTU of the datagrams. Unfortunately, path MTU discovery is not a reliable method to deal with this. As such a combination of solutions is suggested:
</p>
<ul class="text">
<li>
For TCP traffic, let the carrier-grade NAT rewrite the MSS in the first SYN packet to a lower value.

</li>
<li>
For non-TCP traffic, perform fragmentation and reassembly over the tunnel between the home gateway and the carrier grade NAT. In practice, this means put the IPv4 packet into a large IPv6 packet and fragment/reassemble the IPv6 packet at each endpoint of the tunnel. There is a performance price to pay for this. Fragmentation is not very expensive, but reassembly can be, especially on the carrier-grade NAT that would have to keep track of a lot of flows. However, such a carrier-grade NAT would only have to perform reassembly for large UDP packets sourced by customers, not for large UDP packets received by customers. In other words, streaming video to a customer would not have a significant impact on the performance of the carrier-grade NAT, but will require more work on the home gateway side.

</li>
</ul><p>

</p>
<a name="anchor35"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Future work</h3>

<p>The items described bellow could be included in a future version of this document or be the object of a separate document.
</p>
<a name="anchor36"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
Multicast considerations</h3>

<p>
This document only describes unicast IPv4 as IPv4 Multicast is not widely deployed in broadband networks. Some multicast IPv4 considerations might to be discussed as well in a future revision of this document.

</p>
<a name="anchor37"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
3rd party carrier-grade NAT</h3>

<p>The dual-stack lite architecture can be easily extended to support 3rd party carrier-grade NATs. The dual-stack lite interface just need to be pointed to the IPv6 address of that 3rd party carrier-grade NAT instead of the IPv6 address of the service provider carrier-grade NAT. Implementation of dual-stack lite should enable users to override the mechanism used for automatic discovery of the carrier grade NAT and, for example, manually enter the DNS name of the selected carrier-grade NAT.
</p>
<a name="anchor38"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3"></a><h3>8.3.&nbsp;
Interface initialization</h3>

<p>The initialization sequence of each interface of a dual-stack lite node need to be analyzed and heuristics need to be defined to determined if each interface operates in IPv4 mode, IPv6 mode, dual-stack mode or dual-stack lite mode. The absence/presence of the DHCPv6 option discussed above in requests/responses could be a trigger to decide in which mode to operate.
</p>
<a name="anchor39"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Comparison with an architecture with multiple-layers of NAT</h3>

<p>
An alternative architecture could consist on layering multiple levels of IPv4-IPv4 NAT toward the edges of the service provider network. Such architecture has a key advantage: it would work with any existing IPv4 home gateway. However, it would have a number of drawbacks:

</p>
<p>
</p>
<ul class="text">
<li>Each NAT device in the path will have its own application level gateways, increasing the odds of failure or miss-configuration.
</li>
<li>The larger private IPv4 address space available today is Net 10.0.0.0/8. It can in theory accommodate for about 16 million addresses, in practice, with an 80% allocation efficiency, it can address about 13 million devices. This may not be  enough for existing and future large scale deployments, thus multiple overlapping copies of Net 10 might have to be used simultaneously. This in itself create more complexity:

<ul class="text">
<li>If multiple copies of Net 10 are in use, network troubleshooting gets more difficult. One first need to figure out in which Net 10 realm the customer is before sending a ping to a home gateway to test it. This means that provisioning systems need to be modified to include this information.
</li>
<li>Multiple overlapping copies of Net 10 often intersect in some places with routers and firewalls. The configuration of such devices need to carefully take into accounts the overlapping address space. Debugging problems created by miss-configuration can be time consuming.
</li>
</ul>
</li>
<li>Both legacy customers with global IPv4 addresses and new customers with private IPv4 addresses may be connected to the same aggregation router. That router will have to make the decision to send packets directly to the Internet or via a translator based on the source address of those packets, which is known as source-based routing. Although not impossible to implement, this adds complexity to the management of the network.
</li>
</ul><p>

</p>
<p>None of the issues described above are show stoppers, but put together, they seriously increase the complexity of the management of the network.
</p>
<a name="anchor40"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Comparison with NAT-PT (or its potential replacements)</h3>

<p>
NAT-PT <a class='info' href='#RFC2766'>[RFC2766]<span> (</span><span class='info'>Tsirtsis, G. and P. Srisuresh, &ldquo;Network Address Translation - Protocol Translation (NAT-PT),&rdquo; February&nbsp;2000.</span><span>)</span></a> deals with the translation from IPv6 to IPv4 and vice versa. As such, it would not help solving the problem of offering IPv4 service to legacy IPv4 hosts. NAT-PT is targeted at green field IPv6 deployments, allowing them to access services and content on the IPv4 Internet. In that sense, NAT-PT could be in competition with dual-stack lite for green field deployment of new devices directly connected to the broadband service provider network.

</p>
<p>In this situation, NAT-PT has the advantage of enabling to remove entirely the IPv4 stack on edge devices. This may be critical on sensor type devices with a very small memory footprint. However, it is unclear if such devices really need to have access to the whole global IPv4 Internet in the first place or if they only need to communicate with servers that can be made IPv6 enable.
</p>
<p>In the more general case, dual-stack lite has several advantages over NAT-PT:

</p>
<p>
</p>
<ul class="text">
<li>Dual-stack lite does not require any hack to the DNS. In other words, there is no need to synthesize fake AAAA records to represent IPv4 addresses. This make DNSsec works more reliably.
</li>
<li>Because of the DNS ALG hack, NAT-PT places restriction on the topology, in most cases requiring that all exiting traffic go through a single point of contention. Because there is no DNS ALG with dual-stack lite and because each dual-stack lite device can be directed independently to a different dual-stack lite NAT, the dual-stack lite architecture can scale better.
</li>
<li>ALG sometimes need to manipulate literal IP address in the payload of packets. In the case of an IPv4-IPv4 NAT, this is a simple 32 bit field replacement. In the case of IPv6-IPv4 (or IPv4-IPv6) NAT, a 128 bit field need to be substituted by a 32 bit field (or vice versa). This makes NAT-PT ALG more complex than dual-stack lite NAT ALG.
</li>
</ul><p>

</p>
<p>For more detail on NAT-PT related issues, see <a class='info' href='#RFC4966'>[RFC4966]<span> (</span><span class='info'>Aoun, C. and E. Davies, &ldquo;Reasons to Move the Network Address Translator - Protocol Translator (NAT-PT) to Historic Status,&rdquo; July&nbsp;2007.</span><span>)</span></a>.
</p>
<a name="anchor41"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Comparison with DSTM</h3>

<p>
DSTM <a class='info' href='#I-D.bound-dstm-exp'>[I&#8209;D.bound&#8209;dstm&#8209;exp]<span> (</span><span class='info'>Bound, J., &ldquo;Dual Stack IPv6 Dominant Transition Mechanism (DSTM),&rdquo; October&nbsp;2005.</span><span>)</span></a> was addressing IPv6 backward compatibility with IPv4 by providing a temporary IPv4 address to dual-stack nodes. Connectivity was also provided by the way of IPv4 over IPv6 tunnels. However, DSTM was relying on nodes acquiring and  releasing IPv4 addresses on a need to have basis. It is the authors' opinion that such mechanism may not provide the necessary savings in address space for large scale broadband deployments.

</p>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
Acknowledgements</h3>

<p>The authors would like to acknowledge the role of Mark
      Townsley for his input on the overall architecture of this
      technology by pointing this work in the direction of <a class='info' href='#I-D.droms-softwires-snat'>[I&#8209;D.droms&#8209;softwires&#8209;snat]<span> (</span><span class='info'>Droms, R. and B. Haberman, &ldquo;Softwires Network Address Translation (SNAT),&rdquo; July&nbsp;2008.</span><span>)</span></a>.  Note that this
      document results from a merging of <a class='info' href='#I-D.durand-dual-stack-lite'>[I&#8209;D.durand&#8209;dual&#8209;stack&#8209;lite]<span> (</span><span class='info'>Durand, A., &ldquo;Dual-stack lite broadband deployments post IPv4 exhaustion,&rdquo; July&nbsp;2008.</span><span>)</span></a> and <a class='info' href='#I-D.droms-softwires-snat'>[I&#8209;D.droms&#8209;softwires&#8209;snat]<span> (</span><span class='info'>Droms, R. and B. Haberman, &ldquo;Softwires Network Address Translation (SNAT),&rdquo; July&nbsp;2008.</span><span>)</span></a>.Also to be
      acknowledged are the many discussions with a number of people
      including Shin Miyakawa, Katsuyasu Toyama, Akihide Hiura,
      Takashi Uematsu, Tetsutaro Hara, Yasunori Matsubayashi, Ichiro
      Mizukoshi. The author would also like to thank David Ward, Jari
      Arkko, Thomas Narten and Geoff Huston for their constructive
      feedback. A special thank you goes to Dave Thaler for his review and comments.
      
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
IANA Considerations</h3>

<p>This draft request IANA to allocate a well know IPv4 e.f.g.h/29 network prefix. That range is used to number the dual-stack lite interfaces. Reserving a /29 allows for 6 possible interfaces on a multi-home node. The last IPv4 address of this range is reserved as the IPv4 address of the default router for such dual-stack lite hosts.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.14"></a><h3>14.&nbsp;
Security Considerations</h3>

<p>Security issues associated with NAT have long been documented. See <a class='info' href='#RFC2663'>[RFC2663]<span> (</span><span class='info'>Srisuresh, P. and M. Holdrege, &ldquo;IP Network Address Translator (NAT) Terminology and Considerations,&rdquo; August&nbsp;1999.</span><span>)</span></a> and <a class='info' href='#RFC2993'>[RFC2993]<span> (</span><span class='info'>Hain, T., &ldquo;Architectural Implications of NAT,&rdquo; November&nbsp;2000.</span><span>)</span></a>.
</p>
<p>However, moving the NAT functionality from the home gateway to the core of the service provider network and sharing IPv4 addresses among customers create additional requirements when logging data for abuse treatment. With any architecture where an IPv4 address does not uniquely represent an end host, IPv4 addresses and a timestamps are no longer sufficient to identify a particular broadband customer. Additional information like TCP port numbers will be required for that purpose.
      
</p>
<p>
Similarly, some attack mitigation techniques put an IPv4 address in a "penalty box" for a period of time if an abnormal behavior is observed. Such techniques may need to be revisited as they would impact more than just one user (presumably the offender) at a time.

</p>
<p>
With IPv4 addresses shared by multiple users, ports become a critical resource. As such, some mechanisms need to be put in place by a carrier-grade NAT to limit port usage, either by rate-limiting new connections or putting a hard limit on the maximum number of port usable by a single user. If this number is high enough, it should not interfere with normal usage and still provide reasonable protection of the shared pool.

</p>
<p>
More considerations on sharing IPv4 addresses can be found in "I-D.ford-shared-addressing-issues".

</p>
<p>
If some form of IPv6 ingress filtering is deployed in the broadband network and dual-stack lite service is restricted to those customers, then tunnels terminating at the carrier-grade NAT and coming from registered customer IPv6 addresses cannot be spoofed. Thus a simple access control list on the tunnel transport source address is all what is required to accept traffic on the southbound interface of a carrier-grade NAT.

</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.15"></a><h3>15.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>15.1.&nbsp;Normative references</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>15.2.&nbsp;Informative references</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.bajko-v6ops-port-restricted-ipaddr-assign">[I-D.bajko-v6ops-port-restricted-ipaddr-assign]</a></td>
<td class="author-text">Bajko, G. and T. Savolainen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-bajko-v6ops-port-restricted-ipaddr-assign-02.txt">Port Restricted IP Address Assignment</a>,&rdquo; draft-bajko-v6ops-port-restricted-ipaddr-assign-02 (work in progress), November&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-bajko-v6ops-port-restricted-ipaddr-assign-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.bound-dstm-exp">[I-D.bound-dstm-exp]</a></td>
<td class="author-text">Bound, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-bound-dstm-exp-04.txt">Dual Stack IPv6 Dominant Transition Mechanism (DSTM)</a>,&rdquo; draft-bound-dstm-exp-04 (work in progress), October&nbsp;2005 (<a href="http://www.ietf.org/internet-drafts/draft-bound-dstm-exp-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.cheshire-nat-pmp">[I-D.cheshire-nat-pmp]</a></td>
<td class="author-text">Cheshire, S., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-cheshire-nat-pmp-03.txt">NAT Port Mapping Protocol (NAT-PMP)</a>,&rdquo; draft-cheshire-nat-pmp-03 (work in progress), April&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-cheshire-nat-pmp-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.despres-sam">[I-D.despres-sam]</a></td>
<td class="author-text">Despres, R., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-despres-sam-03.txt">Scalable Multihoming across IPv6 Local-Address Routing Zones Global-Prefix/Local-Address Stateless Address Mapping (SAM)</a>,&rdquo; draft-despres-sam-03 (work in progress), July&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-despres-sam-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.dhankins-softwire-tunnel-option">[I-D.dhankins-softwire-tunnel-option]</a></td>
<td class="author-text">Hankins, D. and T. Mrugalski, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-dhankins-softwire-tunnel-option-05.txt">Dynamic Host Configuration Protocol (DHCPv6) Option for Dual-Stack Lite</a>,&rdquo; draft-dhankins-softwire-tunnel-option-05 (work in progress), November&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-dhankins-softwire-tunnel-option-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.droms-softwires-snat">[I-D.droms-softwires-snat]</a></td>
<td class="author-text">Droms, R. and B. Haberman, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-droms-softwires-snat-01.txt">Softwires Network Address Translation (SNAT)</a>,&rdquo; draft-droms-softwires-snat-01 (work in progress), July&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-droms-softwires-snat-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.durand-dual-stack-lite">[I-D.durand-dual-stack-lite]</a></td>
<td class="author-text">Durand, A., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-durand-dual-stack-lite-00.txt">Dual-stack lite broadband deployments post IPv4 exhaustion</a>,&rdquo; draft-durand-dual-stack-lite-00 (work in progress), July&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-durand-dual-stack-lite-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-behave-nat-icmp">[I-D.ietf-behave-nat-icmp]</a></td>
<td class="author-text">Srisuresh, P., Ford, B., Sivakumar, S., and S. Guha, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-nat-icmp-12.txt">NAT Behavioral Requirements for ICMP protocol</a>,&rdquo; draft-ietf-behave-nat-icmp-12 (work in progress), January&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-nat-icmp-12.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-behave-tcp">[I-D.ietf-behave-tcp]</a></td>
<td class="author-text">Guha, S., Biswas, K., Ford, B., Sivakumar, S., and P. Srisuresh, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-tcp-08.txt">NAT Behavioral Requirements for TCP</a>,&rdquo; draft-ietf-behave-tcp-08 (work in progress), September&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-tcp-08.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.nishitani-cgn">[I-D.nishitani-cgn]</a></td>
<td class="author-text">Yamagata, I., Nishitani, T., Miyakawa, S., Nakagawa, A., and H. Ashida, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-nishitani-cgn-04.txt">Common requirements for IP address sharing schemes</a>,&rdquo; draft-nishitani-cgn-04 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-nishitani-cgn-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ymbk-aplusp">[I-D.ymbk-aplusp]</a></td>
<td class="author-text">Bush, R., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ymbk-aplusp-05.txt">The A+P Approach to the IPv4 Address Shortage</a>,&rdquo; draft-ymbk-aplusp-05 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ymbk-aplusp-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2663">[RFC2663]</a></td>
<td class="author-text"><a href="mailto:srisuresh@lucent.com">Srisuresh, P.</a> and <a href="mailto:holdrege@lucent.com">M. Holdrege</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2663">IP Network Address Translator (NAT) Terminology and Considerations</a>,&rdquo; RFC&nbsp;2663, August&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2663.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2766">[RFC2766]</a></td>
<td class="author-text"><a href="mailto:george.tsirtsis@bt.com">Tsirtsis, G.</a> and <a href="mailto:srisuresh@yahoo.com">P. Srisuresh</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2766">Network Address Translation - Protocol Translation (NAT-PT)</a>,&rdquo; RFC&nbsp;2766, February&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2766.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2993">[RFC2993]</a></td>
<td class="author-text">Hain, T., &ldquo;<a href="http://tools.ietf.org/html/rfc2993">Architectural Implications of NAT</a>,&rdquo; RFC&nbsp;2993, November&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2993.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4787">[RFC4787]</a></td>
<td class="author-text">Audet, F. and C. Jennings, &ldquo;<a href="http://tools.ietf.org/html/rfc4787">Network Address Translation (NAT) Behavioral Requirements for Unicast UDP</a>,&rdquo; BCP&nbsp;127, RFC&nbsp;4787, January&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4787.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4966">[RFC4966]</a></td>
<td class="author-text">Aoun, C. and E. Davies, &ldquo;<a href="http://tools.ietf.org/html/rfc4966">Reasons to Move the Network Address Translator - Protocol Translator (NAT-PT) to Historic Status</a>,&rdquo; RFC&nbsp;4966, July&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4966.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="UPnP-IGD">[UPnP-IGD]</a></td>
<td class="author-text">UPnP Forum, &ldquo;<a href="http://www.upnp.org/standardizeddcps/igd.asp">Universal Plug and Play Internet Gateway Device Standardized
        	  Gateway Device Protocol</a>,&rdquo; September&nbsp;2006.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alain Durand</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Comcast</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1500 Market st</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Philadelphia, PA  19102</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alain_durand@cable.comcast.com">alain_durand@cable.comcast.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ralph Droms</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1414 Massachusetts Avenue</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Boxborough, MA  01714</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 978.936.1674</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:rdroms@cisco.com">rdroms@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Brian Haberman</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Johns Hopkins University Applied Physics Lab</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">11100 Johns Hopkins Road</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Laurel, MD  20723-6099</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 443 778 1319</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:brian@innovationslab.net">brian@innovationslab.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">James Woodyatt</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Apple Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1 Infinite Loop</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cupertino, CA  95014</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jhw@apple.com">jhw@apple.com</a></td></tr>
</table>
</body></html>
