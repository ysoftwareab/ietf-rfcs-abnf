 



INTERNET-DRAFT                                       Federico Santandrea
Intended Status: Experimental                                    Diennea
Expires: May 17, 2018                                  November 13, 2017

              Automated Management of Mail Sending Limits
                    draft-santandrea-mail-limits-00


Abstract

   This memo describes a protocol designed to allow automatic, dynamic
   mail sending limit configuration on a voluntary basis.

   It aims to minimize the amount of manual work required to achieve
   limit compliance.

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/1id-abstracts.html

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html


Copyright and License Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors. All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document. Please review these documents
   carefully, as they describe your rights and restrictions with respect
 


Santandrea                Expires May 17, 2018                  [Page 1]

INTERNET DRAFT                mail-limits              November 13, 2017


   to this document. Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.



Table of Contents

   1  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . .  3
     1.1  Terminology . . . . . . . . . . . . . . . . . . . . . . . .  3
     1.2  Temporary protocol name . . . . . . . . . . . . . . . . . .  3
   2  Policy definition . . . . . . . . . . . . . . . . . . . . . . .  3
   3  Policy record . . . . . . . . . . . . . . . . . . . . . . . . .  4
   4  Limits  . . . . . . . . . . . . . . . . . . . . . . . . . . . .  4
   5  Policy caching and changes  . . . . . . . . . . . . . . . . . .  5
   6  Security Considerations . . . . . . . . . . . . . . . . . . . .  5
   7  IANA Considerations . . . . . . . . . . . . . . . . . . . . . .  6
   8  References  . . . . . . . . . . . . . . . . . . . . . . . . . .  6
     8.1  Normative References  . . . . . . . . . . . . . . . . . . .  6
     8.2  Informative References  . . . . . . . . . . . . . . . . . .  6
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . .  6


























 


Santandrea                Expires May 17, 2018                  [Page 2]

INTERNET DRAFT                mail-limits              November 13, 2017


1  Introduction

   Some mailbox providers choose to publicly declare fixed limits that
   legitimate, well-behaved mass mailing services are expected to
   observe in order to avoid deliverability issues.

   The usual way of doing this is publishing these limits in human-
   readable form on postmaster web sites, FAQs and error messages, or
   disclosing them when asked. Mail operators that would like to follow
   the rules must then gather this knowledge from a variety of diverse
   sources and translate it into software configuration.

   Providing a standard way of communicating these limits to MTA
   software would benefit both receivers and legitimate senders, by
   removing the need for trial-and-error or manual information hunting.

1.1  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

1.2  Temporary protocol name

   The protocol does not yet have a name and for the sake of discussion
   in this memo it will just be referred to as AMMSL, an acronym
   composed of the capitalized letters in the draft title. If there is
   sufficient interest in pursuing its development, a more descriptive
   name would be desirable.

2  Policy definition 

   Declared limits are specified in an AMMSL policy. Policies are merely
   hints and senders can always choose whether or not to conform to
   them. Their scope is the single MX (SMTP server) identified by
   hostname, as various MX's for the same domain can be running
   different software and need different limits. It is possible to have
   a domain scoped default that applies to all MX's unless overridden.
   The receiving side is not required to enforce policies, nor to accept
   mail that abides by them. They are only used as a guide for senders
   who voluntarily wish to behave well.

   A DNS record is the typical delivery method for this kind of
   information so it's already widely understood and doesn't require new
   client libraries or server setups that mail authentication
   technologies wouldn't.


 


Santandrea                Expires May 17, 2018                  [Page 3]

INTERNET DRAFT                mail-limits              November 13, 2017


3  Policy record

   An AMMSL policy is specified by creating a TXT record for the MTA
   hostname. For example, if example.com has a MX named
   mail.example.com, the policy would be specified as:

      mail.example.com. IN TXT "v=AMMSL1; ..."

   where '...' means a string of DKIM-style tag=value pairs as defined
   in [RFC6376], Section 3.2.

   Domain scoped default policies are specified in an _ammsl TXT record:

      _ammsl.example.com. IN TXT "v=AMMSL1; ..."

   (TODO: turn this into formal language; develop an ABNF grammar.)

4  Limits

   Following is a preliminary list of considered limits that can be
   specified in a policy. Its purpose is to demonstrate intended
   protocol functionality and to guide further discussion.

      - connection-ttl: maximum lifetime of a SMTP session, in seconds

      - read-timeout: maximum time a SMTP session can be idle (no data
      transmitted), in seconds

      - max-simultaneous-connections: maximum connections that can
      simultaneously be in established state

      - max-messages-per-time-unit: maximum number of messages that can
      be submitted in a time unit

      - max-messages-per-connection: maximum number of messages that can
      be submitted in the lifetime of a single connection

      - time-unit-duration: duration of a time unit, in seconds

      - retry-interval: minimum wait interval between retries on
      temporary failure, in seconds

      - x-...: custom parameters (which could also be meant to be human
      readable)

   (TODO: consider usefulness of suggesting an IP warmup volume curve,
   could be too much complexity for too little value.)

 


Santandrea                Expires May 17, 2018                  [Page 4]

INTERNET DRAFT                mail-limits              November 13, 2017


   (TODO: consider usefulness of indicating adoption of values in
   another policy for unspecified parameters - "include-like" mechanism)

   All limits are optional. Every limit designation, excluding the
   custom ones, SHOULD be abbreviated by the initials of every word in
   it when composing a DNS record (example-parameter-name = epn) so that
   the record doesn't become unwieldy.

   Parameters that are not understood can be ignored. Therefore an
   extension mechanism is probably not needed.

5  Policy caching and changes

   Given that the receiving side has no reason to expect senders will
   honor (or even see) their AMMSL policy, it is probably not useful to
   include an explicit time-to-live or expiration date for it. Senders
   SHOULD cache policies in order to reduce load on the DNS. They MAY
   expire and refresh cached policies on a schedule or when they detect
   problems which they consider to be avoidable by conforming to
   prescribed limits.

6  Security Considerations

   Policies could be spoofed, leading to denial of service or sender
   reputation issues. Since policies are advisory and not normative,
   this is less of a problem. Nonetheless it is a possibility to keep in
   mind while considering how to use information contained therein.





















 


Santandrea                Expires May 17, 2018                  [Page 5]

INTERNET DRAFT                mail-limits              November 13, 2017


7  IANA Considerations

   This document has no IANA actions.

8  References

8.1  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, DOI
              10.17487/RFC2119, March 1997, <https://www.rfc-
              editor.org/info/rfc2119>.


8.2  Informative References

   [RFC6376]  Crocker, D., Ed., Hansen, T., Ed., and M. Kucherawy, Ed.,
              "DomainKeys Identified Mail (DKIM) Signatures", STD 76,
              RFC 6376, DOI 10.17487/RFC6376, September 2011,
              <https://www.rfc-editor.org/info/rfc6376>.



Authors' Addresses


   Federico Santandrea
   c/o Diennea S.r.l.
   Viale Marconi 30/14
   48018 Faenza (RA)
   Italy

   Email: federico.santandrea@diennea.com


















Santandrea                Expires May 17, 2018                  [Page 6]
