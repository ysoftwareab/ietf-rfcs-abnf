

Internet Draft                  RSTP MIB                      April 2005


Internet Draft                                                   V. Ngai
Expires October 2005                                  Enterasys Networks
draft-ietf-bridge-rstpmib-06.txt                                 E. Bell
                                                              3Com Corp.
                                                              April 2005

               Definitions of Managed Objects for Bridges
                   with Rapid Spanning Tree Protocol

Status of this Memo

   By submitting this Internet-Draft, I certify that any applicable
   patent or other IPR claims of which I am aware have been disclosed,
   or will be disclosed, and any of which I become aware will be
   disclosed, in accordance with RFC 3668.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on January 21, 2005.

Copyright Notice

   Copyright (C) The Internet Society (2004).  All Rights Reserved.

Abstract

   This memo defines an SMIv2 MIB module for managing the Rapid Spanning
   Tree capability defined by the IEEE P802.1t and P802.1w amendments to
   IEEE Std 802.1D-1998 for bridging between Local Area Network (LAN)
   segments.  The objects in this MIB are defined to apply both to
   transparent bridging and to bridges connected by subnetworks other
   than LAN segments.





Ngai et. al               Expires October 2005                  [Page 1]

Internet Draft                  RSTP MIB                      April 2005


Table of Contents


   1 The Internet-Standard Management Framework ...................    3
   2 Overview .....................................................    3
   3 Relationship to IEEE 802.1t and 802.1w amendments ............    3
   4 Relation to the BRIDGE-MIB ...................................    4
   5 Definitions for RSTP-MIB .....................................    5
   6 Acknowledgments ..............................................   11
   7 IANA Considerations ..........................................   11
   8 Security Considerations ......................................   11
   9 Normative References .........................................   13
   10 Informative References ......................................   14
   11 Authors' Addresses ..........................................   15
    Intellectual Property Statement ...............................   16
    Disclaimer of Validity ........................................   16
    Copyright Statement ...........................................   16


































Ngai et. al               Expires October 2005                  [Page 2]

Internet Draft                  RSTP MIB                      April 2005


1.  The Internet-Standard Management Framework

   For a detailed overview of the documents that describe the current
   Internet-Standard Management Framework, please refer to section 7 of
   RFC 3410 [RFC3410].

   Managed objects are accessed via a virtual information store, termed
   the Management Information Base or MIB.  MIB objects are generally
   accessed through the Simple Network Management Protocol (SNMP).
   Objects in the MIB are defined using the mechanisms defined in the
   Structure of Management Information (SMI).  This memo specifies a MIB
   module that is compliant to the SMIv2, which is described in STD 58,
   RFC 2578 [RFC2578], STD 58, RFC 2579 [RFC2579] and STD 58, RFC 2580
   [RFC2580].


2.  Overview

   This memo defines an SMIv2 MIB module for managing the Rapid Spanning
   Tree (RSTP) capability defined by the IEEE P802.1t [802.1t] and
   P802.1w [802.1w] amendments to IEEE Std 802.1D-1998 [802.1D-1998] for
   bridging between Local Area Network (LAN) segments.  The objects in
   this MIB are defined to apply both to transparent bridging and to
   bridges connected by subnetworks other than LAN segments.


3.  Relationship to IEEE 802.1t and 802.1w amendments

   This document defines managed object for the Rapid Spanning Tree
   Protocol defined by the IEEE P802.1t and IEEE P802.1w amendments to
   802.1d-1998.

   RSTP-MIB Name                       IEEE 802.1 Reference

   dot1dStp
     dot1dStpVersion                   (w) 17.16.1  ForceVersion
     dot1dStpTxHoldCount               (w) 17.16.6  TxHoldCount
     dot1dStpExtPortTable
       dot1dStpPortProtocolMigration   (w) 17.18.10 mcheck
       dot1dStpPortAdminEdgePort       (t) 18.3.3   adminEdgePort
       dot1dStpPortOperEdgePort        (t) 18.3.4   operEdgePort
       dot1dStpPortAdminPointToPoint   (w) 6.4.3    adminPointToPointMAC
       dot1dStpPortOperPointToPoint    (w) 6.4.3    operPointToPointMAC
       dot1dStpPortAdminPathCost       (D) 8.5.5.3  Path Cost

   Following are the references for the above objects in 802.1D-2004.





Ngai et. al               Expires October 2005                  [Page 3]

Internet Draft                  RSTP MIB                      April 2005


   RSTP-MIB Name                       IEEE 802.1D-2004 Reference

   dot1dStp
     dot1dStpVersion                   17.13.4  ForceVersion
     dot1dStpTxHoldCount               17.13.12 TxHoldCount
     dot1dStpExtPortTable
       dot1dStpPortProtocolMigration   17.19.13 mcheck
       dot1dStpPortAdminEdgePort       17.13.1  adminEdgePort
       dot1dStpPortOperEdgePort        17.19.17 operEdgePort
       dot1dStpPortAdminPointToPoint   6.4.3    adminPointToPointMAC
       dot1dStpPortOperPointToPoint    6.4.3    operPointToPointMAC
       dot1dStpPortAdminPathCost       17.13.11 Path Cost



4.  Relation to the BRIDGE-MIB

   The Original BRIDGE-MIB [RFC1493] has been updated in an
   SMIv2-compliant version [RFC1493bis]. Conformance statements have
   been added and some description and reference clauses have been
   updated. The interpretations of some objects were changed to
   accommodate IEEE 802.1t and 802.1w amendments.

   The object dot1dStpPortPathCost32 was added to support IEEE 802.1t,
   and the permissible values of dot1dStpPriority and
   dot1dStpPortPriority have been clarified for bridges supporting IEEE
   802.1t or IEEE 802.1w. The interpretation of
   dot1dStpTimeSinceTopologyChange has been clarified for bridges
   supporting the RSTP.

   See the updated BRIDGE-MIB [RFC1493bis] for details.

   The objects in the RSTP-MIB supplement those defined in the Bridge
   MIB [RFC1493bis].

















Ngai et. al               Expires October 2005                  [Page 4]

Internet Draft                  RSTP MIB                      April 2005


5.  Definitions for RSTP-MIB

RSTP-MIB DEFINITIONS ::= BEGIN

-- -------------------------------------------------------------
-- MIB for IEEE 802.1w Rapid Spanning Tree Protocol
-- -------------------------------------------------------------

IMPORTS
    MODULE-IDENTITY, OBJECT-TYPE, Integer32
        FROM SNMPv2-SMI
    TruthValue
        FROM SNMPv2-TC
    MODULE-COMPLIANCE, OBJECT-GROUP
        FROM SNMPv2-CONF
    dot1dBridge, dot1dStp, dot1dStpPortEntry
        FROM BRIDGE-MIB;

rstpMIB MODULE-IDENTITY
    LAST-UPDATED "200503190000Z"
    ORGANIZATION "IETF Bridge MIB Working Group"
    CONTACT-INFO
        "Email: Bridge-mib@ietf.org"
    DESCRIPTION
        "The Bridge MIB Extension module for managing devices
         that support the Rapid Spanning Tree Protocol defined
         by IEEE 802.1w."
    REVISION     "200503190000Z"
-- RFC Ed.: replace XXXX with RFC number and remove this note
    DESCRIPTION
         "Initial revision, published as part of RFC XXXX"
-- RFC Ed.: replace xxxx with IANA-assigned number and
--          remove this note
    ::= { mib-2 xxxx }

-- ---------------------------------------------------------- --
-- subtrees in the RSTP-MIB
-- ---------------------------------------------------------- --

rstpNotifications OBJECT IDENTIFIER ::= { rstpMIB 0 }
rstpObjects       OBJECT IDENTIFIER ::= { rstpMIB 1 }
rstpConformance   OBJECT IDENTIFIER ::= { rstpMIB 2 }

-- -------------------------------------------------------------
-- Addition to the dot1dStp group
-- -------------------------------------------------------------





Ngai et. al               Expires October 2005                  [Page 5]

Internet Draft                  RSTP MIB                      April 2005


dot1dStpVersion OBJECT-TYPE
    SYNTAX      INTEGER {
                    stpCompatible(0),
                    rstp(2)
                }
    MAX-ACCESS  read-write
    STATUS      current
    DESCRIPTION
        "The version of Spanning Tree Protocol the bridge is
         currently running.  The value 'stpCompatible(0)'
         indicates the Spanning Tree Protocol specified in
         IEEE 802.1D-1998 and 'rstp(2)' indicates the Rapid
         Spanning Tree Protocol specified in IEEE 802.1w and
         clause 17 of 802.1D-2004.  New values may be defined
         as future versions of the protocol become available."
    REFERENCE
        "IEEE 802.1w clause 14.8.1, 17.12, 17.16.1"
    DEFVAL      { rstp }
    ::= { dot1dStp 16 }

dot1dStpTxHoldCount OBJECT-TYPE
    SYNTAX      Integer32 (1..10)
    MAX-ACCESS  read-write
    STATUS      current
    DESCRIPTION
        "The value used by the Port Transmit state machine to limit
         the maximum transmission rate."
    REFERENCE
        "IEEE 802.1w clause 17.16.6"
    DEFVAL      { 3 }
    ::= { dot1dStp 17 }

--
-- { dot1dStp 18 } was used to represent dot1dStpPathCostDefault
-- in an internet-draft version of this MIB.  It has since been
-- obsoleted, and should not be used.
--

dot1dStpExtPortTable OBJECT-TYPE
    SYNTAX      SEQUENCE OF Dot1dStpExtPortEntry
    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
        "A table that contains port-specific Rapid Spanning Tree
         information."
    ::= { dot1dStp 19 }





Ngai et. al               Expires October 2005                  [Page 6]

Internet Draft                  RSTP MIB                      April 2005


dot1dStpExtPortEntry OBJECT-TYPE
    SYNTAX      Dot1dStpExtPortEntry
    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
        "A list of Rapid Spanning Tree information maintained by
         each port."
    AUGMENTS    { dot1dStpPortEntry }
    ::= { dot1dStpExtPortTable 1 }

Dot1dStpExtPortEntry ::=
    SEQUENCE {
        dot1dStpPortProtocolMigration
            TruthValue,
        dot1dStpPortAdminEdgePort
            TruthValue,
        dot1dStpPortOperEdgePort
            TruthValue,
        dot1dStpPortAdminPointToPoint
            INTEGER,
        dot1dStpPortOperPointToPoint
            TruthValue,
        dot1dStpPortAdminPathCost
            Integer32
    }

dot1dStpPortProtocolMigration OBJECT-TYPE
    SYNTAX      TruthValue
    MAX-ACCESS  read-write
    STATUS      current
    DESCRIPTION
        "When operating in RSTP (version 2) mode, writing TRUE(1)
         to this object forces this port to transmit RSTP BPDUs.
         Any other operation on this object has no effect and
         it always returns FALSE(2) when read."
    REFERENCE
        "IEEE 802.1w clause 14.8.2.4, 17.18.10, 17.26"
    ::= { dot1dStpExtPortEntry 1 }

dot1dStpPortAdminEdgePort OBJECT-TYPE
    SYNTAX      TruthValue
    MAX-ACCESS  read-write
    STATUS      current
    DESCRIPTION
        "The administrative value of the Edge Port parameter. A
         value of TRUE(1) indicates that this port should be





Ngai et. al               Expires October 2005                  [Page 7]

Internet Draft                  RSTP MIB                      April 2005


         assumed as an edge-port and a value of FALSE(2) indicates
         that this port should be assumed as a non-edge-port.
         Setting this object will also cause the corresponding
         instance of dot1dStpPortOperEdgePort to change to the
         same value. Note that even when this object's value
         is true, the value of the corresponding instance of
         dot1dStpPortOperEdgePort can be false if a BPDU has
         been received."
    REFERENCE
        "IEEE 802.1t clause 14.8.2, 18.3.3"
    ::= { dot1dStpExtPortEntry 2 }

dot1dStpPortOperEdgePort OBJECT-TYPE
    SYNTAX      TruthValue
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
        "The operational value of the Edge Port parameter. The
         object is initialized to the value of the corresponding
         instance of dot1dStpPortAdminEdgePort. When the
         corresponding instance of dot1dStpPortAdminEdgePort is
         set, this object will be changed as well. This object
         will also be changed to FALSE on reception of a BPDU."
    REFERENCE
        "IEEE 802.1t clause 14.8.2, 18.3.4"
    ::= { dot1dStpExtPortEntry 3 }

dot1dStpPortAdminPointToPoint OBJECT-TYPE
    SYNTAX      INTEGER {
                    forceTrue(0),
                    forceFalse(1),
                    auto(2)
                }
    MAX-ACCESS  read-write
    STATUS      current
    DESCRIPTION
        "The administrative point-to-point status of the LAN segment
         attached to this port.  A value of forceTrue(0) indicates that
         this port should always be treated as if it is connected to
         a point-to-point link.  A value of forceFalse(1) indicates
         that this port should be treated as having a shared media
         connection.  A value of auto(2) indicates that this port is
         considered to have a point-to-point link if it is an Aggregator
         and all of its members are aggregatable, or if the MAC entity
         is configured for full duplex operation, either through
         auto-negotiation or by management means."





Ngai et. al               Expires October 2005                  [Page 8]

Internet Draft                  RSTP MIB                      April 2005


   REFERENCE
       "IEEE 802.1w clause 6.4.3, 6.5, 14.8.2"
   ::= { dot1dStpExtPortEntry 4 }

dot1dStpPortOperPointToPoint OBJECT-TYPE
    SYNTAX      TruthValue
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
        "The operational point-to-point status of the LAN segment
         attached to this port.  It indicates whether a port is
         considered to have a point-to-point connection or not.
         The value is determined by management or by auto-detection,
         as described in the dot1dStpPortAdminPointToPoint object."
    REFERENCE
        "IEEE 802.1w clause 6.4.3, 6.5, 14.8.2"
    ::= { dot1dStpExtPortEntry 5 }

dot1dStpPortAdminPathCost OBJECT-TYPE
    SYNTAX      Integer32 (0..200000000)
    MAX-ACCESS  read-write
    STATUS      current
    DESCRIPTION
        "The administratively assigned value for the contribution
         of this port to the path cost of paths towards the spanning
         tree root.

         Writing a value of '0' assigns the automatically calculated
         default Path Cost value to the port.  If the default Path
         Cost is being used, this object returns '0' when read.

         This complements the object dot1dStpPortPathCost or
         dot1dStpPortPathCost32, which returns the operational value
         of the path cost."
    REFERENCE
        "IEEE 802.1D-1998: Section 8.5.5.3"
    ::= { dot1dStpExtPortEntry 6 }

-- -------------------------------------------------------------
-- rstpMIB - Conformance Information
-- -------------------------------------------------------------

rstpGroups OBJECT IDENTIFIER ::= { rstpConformance 1 }

rstpCompliances OBJECT IDENTIFIER ::= { rstpConformance 2 }






Ngai et. al               Expires October 2005                  [Page 9]

Internet Draft                  RSTP MIB                      April 2005


-- -------------------------------------------------------------
-- Units of conformance
-- -------------------------------------------------------------

rstpBridgeGroup OBJECT-GROUP
    OBJECTS {
        dot1dStpVersion,
        dot1dStpTxHoldCount
    }
    STATUS      current
    DESCRIPTION
        "Rapid Spanning Tree information for the bridge."
    ::= { rstpGroups 1 }

rstpPortGroup OBJECT-GROUP
    OBJECTS {
        dot1dStpPortProtocolMigration,
        dot1dStpPortAdminEdgePort,
        dot1dStpPortOperEdgePort,
        dot1dStpPortAdminPointToPoint,
        dot1dStpPortOperPointToPoint,
        dot1dStpPortAdminPathCost
    }
    STATUS      current
    DESCRIPTION
        "Rapid Spanning Tree information for individual ports."
    ::= { rstpGroups 2 }

-- -------------------------------------------------------------
-- Compliance statements
-- -------------------------------------------------------------

rstpCompliance MODULE-COMPLIANCE
    STATUS      current
    DESCRIPTION
        "The compliance statement for device support of Rapid
         Spanning Tree Protocol (RSTP) bridging services."
    MODULE
        MANDATORY-GROUPS {
            rstpBridgeGroup,
            rstpPortGroup
        }
    ::= { rstpCompliances 1 }

END






Ngai et. al               Expires October 2005                 [Page 10]

Internet Draft                  RSTP MIB                      April 2005


6.  Acknowledgments

   This document was produced on behalf of the Bridge MIB Working Group
   in the Operations and Management area of the Internet Engineering
   Task Force.

   The authors wish to thank the members of the Bridge MIB Working
   Group, especially Alex Ruzin, for their comments and suggestions
   which improved this effort.



7.  IANA Considerations

   This document requires an OID assignment to be made by IANA:

            Descriptor        OBJECT IDENTIFIER value
            ----------        -----------------------
            rstpMIB           { mib-2 xxxx }



8.  Security Considerations

   There are a number of management objects defined in this MIB that
   have a MAX-ACCESS clause of read-write and/or read-create.  Such
   objects may be considered sensitive or vulnerable in some network
   environments.  The support for SET operations in a non-secure
   environment without proper protection can have a negative effect on
   network operations.

   Writable objects that could be misused to cause network delays and
   spanning tree instabilities include dot1dStpVersion,
   dot1dStpTxHoldCount, dot1dStpPortProtocolMigration,
   dot1dStpPortAdminEdgePort, and dot1dStpPortAdminPathCost.

   The object dot1dStpVersion could be read by an attacker to identify
   environments containing applications or protocols which are
   potentially sensitive to RSTP mode.

   The object dot1dStpPortAdminPointToPoint could be used to mislead an
   access control protocol, such as 802.1x, to believe that only one
   other system is attached to a LAN segment and to enable network
   access based on that assumption.  This situation could permit
   potential man-in-the-middle attacks.






Ngai et. al               Expires October 2005                 [Page 11]

Internet Draft                  RSTP MIB                      April 2005


   SNMPv1 by itself is not a secure environment.  Even if the network
   itself is secure (for example by using IPSec), even then, there is no
   control as to who on the secure network is allowed to access and
   GET/SET (read/change/create/delete) the objects in this MIB.

   It is recommended that the implementers consider the security
   features as provided by the SNMPv3 framework.  Specifically, the use
   of the User-based Security Model [USM] and the View-based Access
   Control Model [VACM] is recommended.










































Ngai et. al               Expires October 2005                 [Page 12]

Internet Draft                  RSTP MIB                      April 2005


9.  Normative References

[RFC2578]    McCloghrie, K., Perkins, D., Schoenwaelder, J., Case, J.,
             Rose, M., and S. Waldbusser, "Structure of Management
             Information Version 2 (SMIv2)", STD 58, RFC 2578, April
             1999.

[RFC2579]    McCloghrie, K., Perkins, D., Schoenwaelder, J., Case, J.,
             Rose, M., and S. Waldbusser, "Textual Conventions for
             SMIv2", STD 58, RFC 2579, April 1999.

[RFC2580]    McCloghrie, K., Perkins, D., Schoenwaelder, J., Case, J.,
             Rose, M., and S. Waldbusser, "Conformance Statements for
             SMIv2", STD 58, RFC 2580, April 1999.

[RFC2674]    Bell, E., Smith, A., Langille, P., Rijhsinghani, A. and
             McCloghrie, "Definitions of Managed Objects for Bridges
             with Traffic Classes, Multicast Filtering and Virtual LAN
             Extensions", RFC 2674, August 1999.

[802.1D-1998]     "Information technology - Telecommunications and
             information exchange between systems - Local and
             metropolitan area networks - Common specifications - Part
             3: Media Access Control (MAC) Bridges:  Revision.  This is
             a revision of ISO/IEC 10038: 1993, 802.1j-1992 and
             802.6k-1992.  It incorporates P802.11c, P802.1p and
             P802.12e."  ISO/IEC 15802-3: 1998.

[802.1D-2004]     IEEE Project 802 Local and Metropolitan  Area
             Networks, "IEEE Standard 802.1D-2004 MAC Bridges", 2004.

[RFC1493]  Decker, E., Langille, P., Rijsinghani, A. and K.  McCloghrie,
             "Definitions of Managed Objects for Bridges", RFC 1493,
             July 1993.

[RFC1493bis]  Bell, E. and Norseth, K., "Definitions of Managed Objects
             for Bridges", draft-ietf-bridge-bridgemib-smiv2-10.txt,
             February 2005.  NOTE TO RFC EDITOR:  Replace the above ID
             reference with the appropriate RFC.

[802.1t]     IEEE 802.1t-2001, "(Amendment to IEEE Standard 802.1D) IEEE
             Standard for Information technology - Telecommunications
             and information exchange between systems - Local and
             metropolitan area networks - Common specifications - Part
             3: Media Access Control (MAC) Bridges: Technical and
             Editorial Corrections".





Ngai et. al               Expires October 2005                 [Page 13]

Internet Draft                  RSTP MIB                      April 2005


[802.1w]     IEEE 802.1w-2001, "(Amendment to IEEE Standard 802.1D) IEEE
             Standard for Information technology--Telecommunications and
             information exchange between systems--Local and
             metropolitan area networks--Common Specifications--Part 3:
             Media Access Control (MAC) Bridges: Rapid Reconfiguation".


10.  Informative References

[RFC3410]    Case, J., Mundy, R., Partain, D. and B. Stewart,
             "Introduction and Applicability Statements for Internet
             Standard Management Framework", RFC 3410, December 2002.







































Ngai et. al               Expires October 2005                 [Page 14]

Internet Draft                  RSTP MIB                      April 2005


11.  Authors' Addresses

   Les Bell
   3Com Europe Limited
   eCom Centre, Boundary Way
   Hemel Hempstead
   Herts.  HP2 7YU
   UK

   Phone:  +44 1442 438025
   Email:  Les_Bell@3Com.com


   Vivian Ngai
   Enterasys Networks
   2691 South Decker Lake Lane
   Salt Lake City, UT 84119
   USA

   Phone: +1 801 556 5652
   Email: vivian_ngai@acm.org






























Ngai et. al               Expires October 2005                 [Page 15]

Internet Draft                  RSTP MIB                      April 2005


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

   Copyright (C) The Internet Society (2004).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.










Ngai et. al               Expires October 2005                 [Page 16]


