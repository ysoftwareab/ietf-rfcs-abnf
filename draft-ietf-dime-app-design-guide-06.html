<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Diameter Applications Design Guidelines</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Diameter Applications Design Guidelines">
<meta name="keywords" content="Internet-Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Diameter Maintanence and</td><td class="header">V. Fajardo, Ed.</td></tr>
<tr><td class="header">Extensions (DIME)</td><td class="header">Toshiba America Research Inc.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">T. Asveren</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">Sonus Network</td></tr>
<tr><td class="header">Expires: July 26, 2008</td><td class="header">H. Tschofenig</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">G. McGregor</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Alcatel-Lucent</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">J. Loughney</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Nokia Research Center</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">January 23, 2008</td></tr>
</table></td></tr></table>
<h1><br />Diameter Applications Design Guidelines<br />draft-ietf-dime-app-design-guide-06.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on July 26, 2008.</p>

<h3>Abstract</h3>

<p> The Diameter Base protocol provides updated rules on how to extend Diameter by
        modifying and/or deriving from existing applications or creating entirely new applications.
        This is a companion document to the Diameter Base protocol which further explains and/or
        clarify these rules. It is meant as a guidelines document and therefore it does not
        add, remove or change existing rules. 
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#anchor1">2.</a>&nbsp;
Terminology<br />
<a href="#model">3.</a>&nbsp;
Brief Overview of the Diameter Application Model<br />
<a href="#reuse-rules">4.</a>&nbsp;
Rules on Extending Diameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reuse-application">4.1.</a>&nbsp;
Reusing Existing Applications<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reuse-app-new-cmd">4.1.1.</a>&nbsp;
Adding a new command<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reuse-app-del-cmd">4.1.2.</a>&nbsp;
Deleting a command<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reuse-commands">4.2.</a>&nbsp;
Reusing Existing Commands<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reuse-cmd-add-avp">4.2.1.</a>&nbsp;
Adding AVPs to a command<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reuse-cmd-del-avp">4.2.2.</a>&nbsp;
Deleting AVPs from a command<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reuse-avps">4.3.</a>&nbsp;
Reusing Existing AVPs<br />
<a href="#new-element-rules">5.</a>&nbsp;
Rules for new Applications<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#new-element-rules-cmd-alloc">5.1.</a>&nbsp;
Rules in Allocating new Command Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#new-element-rules-justify">5.2.</a>&nbsp;
Justifying the Allocation of Application-Id<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#new-element-rules-app-id">5.3.</a>&nbsp;
Use of Application-Id in a Message<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#new-element-rules-fsm">5.4.</a>&nbsp;
Application Specific Session Statemachine<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#new-element-rules-e2e-cap">5.5.</a>&nbsp;
End-to-End Applications Capabilities Exchange<br />
<a href="#other">6.</a>&nbsp;
Other Design Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#other-accounting">6.1.</a>&nbsp;
Diameter Accounting Support<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#other-generic">6.2.</a>&nbsp;
Generic Diameter Extensions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#other-app-updates">6.3.</a>&nbsp;
Updating an existing Application<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#other-mandatory-flag">6.4.</a>&nbsp;
Use of Mandatory (M-bit) flags<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#other-app-network">6.5.</a>&nbsp;
System Architecture and Deployment<br />
<a href="#anchor2">7.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor3">8.</a>&nbsp;
Security Considerations<br />
<a href="#acks">9.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">10.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">10.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p> The Diameter Base protocol document defines rules on how one would extend Diameter
        (see Section 1.2 of <a class='info' href='#I-D.ietf-dime-rfc3588bis'>[1]<span> (</span><span class='info'>Fajardo, V., Arkko, J., Loughney, J., and G. Zorn, &ldquo;Diameter Base Protocol,&rdquo; April&nbsp;2010.</span><span>)</span></a>). In the context of this document,
        extending Diameter means one of the following:<br />
<br />

        </p>
<ol class="text">
<li>A new functionality is being added to an existing Diameter
             application without defining a new application.<br />
<br />

</li>
<li>A new Diameter application is being defined by reusing an existing application.
            <br />
<br />

</li>
<li>A completely new application is being defined that has no dependencies to
            any existing applications.<br />
<br />

</li>
<li>A new generic functionality is being defined that can be reused across
            different applications.<br />
<br />

</li>
</ol><p>
        All of these choices are design decisions that can done by any combination of
        reusing existing or defining new commands, AVPs or AVP values. The objective
        of this document is the following:<br />
<br />

        </p>
<ul class="text">
<li>Clarify updated Diameter extensibility rules in the Diameter Base Protocol.
            <br />
<br />

</li>
<li>Clarify usage of certain Diameter functionality which are not explicitly
            described in the Diameter Base specification.<br />
<br />

</li>
<li>Discuss design choices and provide guidelines when defining applications.
            <br />
<br />

</li>
<li>Present tradeoffs of design choices.<br />
<br />

</li>
</ul><p>
        These guidelines are necessary since the existing rules do not cover the
        ambiguity that exists when some of the design choices overlap. A typical example
        would be deciding between item one(1) and two(2) above when an application designer
        requires a new application functionality which has many things in common with an
        existing application. Certain ambiguous aspects of such cases were not foreseen in the
        existing extensibility rules; e.g., use of optional AVPs to differentiate new
        functionality in the old application versus defining a new application and importing
        the existing set of commands. In this example, it was only based on collective
        experiences of application designers that the decision to create a new application
        (item two(2)) is now seen as the cleanest approach.
</p>
<p>Along with the gained experience however, additional bad practices have developed
        as well. Continuing the example above, the decision to create a new application would
        result in the allocation of a new application ID which often times is foreseen as
        cumbersome by application designers because of the lengthy process. Designers therefore
        tend to circumvent the better approach leading to many compromises in the design that
        eventually lead to interoperability issues (See
        <a class='info' href='#new-element-rules-cmd-alloc'>Section&nbsp;5.1<span> (</span><span class='info'>Rules in Allocating new Command Codes</span><span>)</span></a>).
</p>
<p>The basic issue is that the rules defined in the Diameter Base protocol are not
        comprehensive enough that one can easily derive good design decisions from them.
        The effect of this can be seen in various attempts to extend Diameter applications
        where designers have no clear answer on whether to even define a new application or not.
        At worst, some existing Diameter applications that had been purposely derived from
        another existing application resulted in some in-appropriate design decision where
        both the existing application and the derived applications are no longer interoperable
        under certain conditions. Note that it is not always possible to offer a complete and
        concise answer to certain design choices, but at the least, this document can be used
        as a guide to Diameter extensibility. 
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p> This document reuses the terminology used in <a class='info' href='#I-D.ietf-dime-rfc3588bis'>[1]<span> (</span><span class='info'>Fajardo, V., Arkko, J., Loughney, J., and G. Zorn, &ldquo;Diameter Base Protocol,&rdquo; April&nbsp;2010.</span><span>)</span></a>. 
</p>
<a name="model"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Brief Overview of the Diameter Application Model</h3>

<p> As it is currently interpreted and practiced, the Diameter Base protocol is a two-layer
        protocol. The lower layer is mainly responsible for managing connections between neighboring
        peers and for message routing. The upper layer is where the Diameter applications reside.
        This model is in line with a Diameter node having an application layer and a
        peer-to-peer delivery layer. The Diameter Base protocol document completely defines the
        architecture and behavior of the message delivery layer and then provides the framework
        for designing Diameter applications on the application layer. This framework includes
        definitions of application sessions and accounting support (see Section 8 and 9 of <a class='info' href='#I-D.ietf-dime-rfc3588bis'>[1]<span> (</span><span class='info'>Fajardo, V., Arkko, J., Loughney, J., and G. Zorn, &ldquo;Diameter Base Protocol,&rdquo; April&nbsp;2010.</span><span>)</span></a>). The remainder of this document also treats a Diameter
        node as a single instance of a Diameter message delivery layer and one or more Diameter
        applications using it. 
</p>
<a name="reuse-rules"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Rules on Extending Diameter</h3>

<p>Extending Diameter can mean the reuse of commands, AVPs and AVP values
        in any combination for the purpose of inheriting the features of an existing
        Diameter applications. This section discusses the rules on how such reuse
        can be done.
</p>
<p>When reusing existing applications, the requirements of the new applications
          are typically not completely unique and there are existing applications that can
          be reused to solve some or all of the new application requirements. Therefore, there
          is a greater likelihood of ambiguity on how much of the existing application can be
          reused and what would be the implications for both the new and existing application.
          To broadly categorize, the rules for reusing existing applications
          can be either:<br />
<br />

          </p>
<ol class="text">
<li>Minimal - which typically means adding optional AVPs to existing commands.
              <br />
<br />

</li>
<li>Invasive - where addition or deletion of commands and/or AVPs, and/or
              AVP values (in the case where the AVP is of type Enumerated).<br />
<br />

</li>
</ol><p>
        
</p>
<p>Because it can fundamentally change the application, the latter approach has strict
          repercussions. Specifically, it would result in the definition of a new application
          and therefore allocation of a new application ID is required. Discussion about the specific
          Diameter Base protocol rules associated with this approach are covered subsequent sections.
</p>
<p>The former approach, although simple, has pitfalls. The problems arise when there
          is a tendency by applications designers to keep adding optional AVPs to existing
          command so they can circumvent the rules associated with the latter approach. Specifically,
          some designers want to circumvent the standardization process associated with these rules and
          not necessarily the rules themselves. The pitfalls associated with this approach are
          described further in <a class='info' href='#reuse-cmd-add-avp'>Section&nbsp;4.2.1<span> (</span><span class='info'>Adding AVPs to a command</span><span>)</span></a>. Additionally, if designers choose
          this approach, all of the functionality of the existing application will be inherited, even
          if the new usage has no intent of using some of the existing features.
</p>
<a name="reuse-application"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Reusing Existing Applications</h3>

<p>This section discusses the reuse of existing applications by adding and/or deleting
            commands from the application. This scenario is categorize as "Invasive" in
            <a class='info' href='#reuse-rules'>Section&nbsp;4<span> (</span><span class='info'>Rules on Extending Diameter</span><span>)</span></a> and would always result in the creation of a new
            application when the rules are applied.
</p>
<a name="reuse-app-new-cmd"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
Adding a new command</h3>

<p>The rules are strict in this case. Adding a command to an application
              is not allowed and doing so will force a definition of a new application.
              However, if this is the intent, then the new application can be created by
              defining a new command for an existing application or importing an existing
              command from another application so as to inherit some or all of the
              functionality of that application. In the former case, the decision is straightforward
              since this is typically a result of adding new functionality
              that does not yet exist. See <a class='info' href='#new-element-rules-cmd-alloc'>Section&nbsp;5.1<span> (</span><span class='info'>Rules in Allocating new Command Codes</span><span>)</span></a>
              for rules on how to allocate new command codes for new applications.
              The latter case would result in a new application but it has a more
              subtle issue such as deciding whether importing of commands and functionality
              is really better than simply using the existing application as it is in
              conjunction with any new application.<br />
<br />

              A typical example would be the Diameter MIPv6 split scenario (see
              <a class='info' href='#I-D.ietf-dime-mip6-split'>[2]<span> (</span><span class='info'>Korhonen, J., Tschofenig, H., Bournelle, J., Giaretta, G., and M. Nakhjiri, &ldquo;Diameter Mobile IPv6: Support for Home Agent to Diameter Server Interaction,&rdquo; April&nbsp;2009.</span><span>)</span></a>) in which several application models
              would have been possible during the design phase; one model would reuse existing
              Diameter EAP application combined with a new Diameter MIPv6 application to
              form a complete authentication and authorization scheme and another would
              be to reuse Diameter EAP like commands within the new Diameter MIPv6 application
              to accomplish the same result. In this case, the latter model was
              chosen which would permit the reuse of commands and/or AVPs from one
              application to another. Other applications such as Diameter QoS
              (see <a class='info' href='#I-D.ietf-dime-diameter-qos'>[3]<span> (</span><span class='info'>Sun, D., McCann, P., Tschofenig, H., ZOU), T., Doria, A., and G. Zorn, &ldquo;Diameter Quality of Service Application,&rdquo; March&nbsp;2010.</span><span>)</span></a>) would likely face
              similar decisions.<br />
<br />

              In general, it is difficult to come to a hard and fast guideline, and
              so a case by case study of each application requirement should be
              applied. Before adding or importing a command, application designers
              should consider the following:<br />
<br />

              </p>
<ul class="text">
<li>Can the new functionality be fulfilled by creating a new application
                  independent from the existing applications? In this case, a deployment
                  architecture could be designed such that both old and new application
                  can work independent of, but cooperating with each other.<br />
<br />

</li>
<li>Can the existing application be reused as is without fundamental
                  changes; e.g., a non-mandatory optional AVP is sufficient to indicate
                  support for new optional functionality, if any. There are pitfalls to
                  this approach as well. See <a class='info' href='#reuse-cmd-add-avp'>Section&nbsp;4.2.1<span> (</span><span class='info'>Adding AVPs to a command</span><span>)</span></a><br />
<br />

</li>
<li>Care should be taken to avoid a liberal method of importing many commands
                  that results in a monolithic and hard to manage application which supports
                  many different functionalities.<br />
<br />

</li>
<li>Will the new feature or functionality refer only to semantic or statemachine
                  changes in the application requiring extra message round-trips? In such
                  cases, definition of new commands may not be necessary and use of existing
                  commands maybe sufficient.<br />
<br />

</li>
<li>Reuse of existing applications would result in a distributed
                  environment which may not be conducive to certain requirements of
                  the applications; i.e. security and or deployment difficulties -
                  because of Diameter routing, messages for different applications
                  providing service to the same user may end up in different servers
                  would then need to be co-related. This could mean extra signaling between
                  application servers. A typical example would be the initial
                  proposal for Diameter MIPv6 split scenario (see <a class='info' href='#I-D.ietf-dime-mip6-split'>[2]<span> (</span><span class='info'>Korhonen, J., Tschofenig, H., Bournelle, J., Giaretta, G., and M. Nakhjiri, &ldquo;Diameter Mobile IPv6: Support for Home Agent to Diameter Server Interaction,&rdquo; April&nbsp;2009.</span><span>)</span></a>)
                  where authorization and authentication is separated.
</li>
</ul><br />
<br />
<p>
              Note that accounting commands normally require special treatment and would not
              necessarily fall into this category. See <a class='info' href='#other-accounting'>Section&nbsp;6.1<span> (</span><span class='info'>Diameter Accounting Support</span><span>)</span></a>.
            
</p>
<a name="reuse-app-del-cmd"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.2"></a><h3>4.1.2.&nbsp;
Deleting a command</h3>

<p>Although this is not typical, deleting an command from an existing application
              is fundamentally changing the application. In general, the implications
              of this approach are the same as <a class='info' href='#reuse-app-new-cmd'>Section&nbsp;4.1.1<span> (</span><span class='info'>Adding a new command</span><span>)</span></a> regardless
              of whether new commands will also be added to the resulting application. In general,
              it is unusual to delete an existing command from an existing application for the sake
              of deleting it or the functionality it represents. This design decision would normally be an
              indication of a flawed design. An exception might be if the intent of the deletion
              is to create a newer version of the same application which is somehow simpler than
              the previous version. In that case, the considerations in <a class='info' href='#other-app-updates'>Section&nbsp;6.3<span> (</span><span class='info'>Updating an existing Application</span><span>)</span></a>
              should apply instead.
</p>
<a name="reuse-commands"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Reusing Existing Commands</h3>

<p>This section deals with a little more granularity than <a class='info' href='#reuse-application'>Section&nbsp;4.1<span> (</span><span class='info'>Reusing Existing Applications</span><span>)</span></a>.
           Specifically, it discusses rules in adding and/or deleting AVPs from an existing command
           of an existing application. Unlike <a class='info' href='#reuse-application'>Section&nbsp;4.1<span> (</span><span class='info'>Reusing Existing Applications</span><span>)</span></a>, the cases in this
           section may not necessarily result in the creation of new application(s). In some cases,
           there are a lot of ambiguity. So design considerations have been outlined to ease the decision
           making process.
</p>
<a name="reuse-cmd-add-avp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.1"></a><h3>4.2.1.&nbsp;
Adding AVPs to a command</h3>

<p>Based on the rules in <a class='info' href='#I-D.ietf-dime-rfc3588bis'>[1]<span> (</span><span class='info'>Fajardo, V., Arkko, J., Loughney, J., and G. Zorn, &ldquo;Diameter Base Protocol,&rdquo; April&nbsp;2010.</span><span>)</span></a>, AVPs that are added to
              an existing command can be categorized into:<br />
<br />

              </p>
<ul class="text">
<li>Mandatory to understand AVPs. As defined in <a class='info' href='#I-D.ietf-dime-rfc3588bis'>[1]<span> (</span><span class='info'>Fajardo, V., Arkko, J., Loughney, J., and G. Zorn, &ldquo;Diameter Base Protocol,&rdquo; April&nbsp;2010.</span><span>)</span></a>,
                  these are AVPs which has their M-bit flag set which means Diameter nodes that receives
                  these AVPs have to understand not only their values but their semantics and usage
                  as well. This is regardless of whether these AVPs are required or optional to
                  appear in the command; as specified by the commands ABNF. See <a class='info' href='#other-mandatory-flag'>Section&nbsp;6.4<span> (</span><span class='info'>Use of Mandatory (M-bit) flags</span><span>)</span></a>
                  for details on the use of the M-bit.<br />
<br />

</li>
<li>Non-mandatory AVPs that are also optional in the commands ABNF.
</li>
</ul>

<p>The rules are strict in the case where the AVPs to be added are mandatory. A mandatory AVP cannot
              be added to or deleted from an existing command. <a class='info' href='#I-D.ietf-dime-rfc3588bis'>[1]<span> (</span><span class='info'>Fajardo, V., Arkko, J., Loughney, J., and G. Zorn, &ldquo;Diameter Base Protocol,&rdquo; April&nbsp;2010.</span><span>)</span></a>
              states that doing so would require the definition of a new application. This falls into
              the "Invasive" category described in <a class='info' href='#reuse-rules'>Section&nbsp;4<span> (</span><span class='info'>Rules on Extending Diameter</span><span>)</span></a>. Despite the clarity of the
              rule, ambiguity still arises when trying to decide whether a new AVP being added should be
              mandatory to begin with. There are several questions that application designers should
              contemplate when trying to decide:
              <br />
<br />

              </p>
<ul class="text">
<li>Do the AVPs change the state machine of the application ?<br />
<br />

</li>
<li>Would the presence of the AVPs cause additional message round-trips; effectively
                  changing the state machine of the application ?<br />
<br />

</li>
<li>Will the AVP be used to fulfill new required functionality ?<br />
<br />

</li>
<li>Would the AVP be used to differentiate between old and new versions
                  of the same application ?<br />
<br />

</li>
<li>Will it have duality in meaning; i.e., be used to carry application related
                  information as well as be used to indicate that the message is for a new
                  application ?
</li>
</ul>

<p>If one or more of the above conditions are true, the AVP is considered mandatory. These
              questions are not comprehensive in any way, but in all cases the semantics of
              the application must change to justify the use of mandatory AVPs.
</p>
<p>The rules are less restrictive when adding non-mandatory, optional AVPs. This falls into
              the "Minimal" category described in <a class='info' href='#reuse-rules'>Section&nbsp;4<span> (</span><span class='info'>Rules on Extending Diameter</span><span>)</span></a>. However, care should also
              be taken when opting for optional AVPs instead of mandatory AVPs simply to avoid the process
              of creating a new applications. Optional AVPs that answers any of the questions above also
              have consequences. Some of the issues associated with using optional AVPs are:<br />
<br />

              </p>
<ul class="text">
<li>Use of optional AVPs with intersecting meaning; one AVP has partially the same
                  usage and/or meaning as another AVP. The presence of both can lead to confusion.
                  <br />
<br />

</li>
<li>An optional AVPs with dual purpose; i.e.; to carry applications data as well as
                  to indicate support for one or more features. This has a tendency to introduce
                  interpretation issues.<br />
<br />

</li>
<li>Use of optional AVPs with a minimum occurrence of one(1) in the command ABNF.
                  This is generally contradictory. Application designers should not use this
                  scheme to circumvent definition of mandatory AVPs.<br />
<br />

</li>
<li>Adding one or more optional AVPs and indicating (usually within
                  descriptive text for the command) that at least one of them has to be
                  present in the command. This essentially circumventing the ABNF and
                  is equivalent to adding a mandatory AVPs to the command.<br />
<br />

</li>
</ul><p>
              All of these practices generally result in interoperability problems so they
              should be avoided as much as possible.
</p>
<a name="reuse-cmd-del-avp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2"></a><h3>4.2.2.&nbsp;
Deleting AVPs from a command</h3>

<p>Although this scenario is not as common, the deletion of AVPs from a
              command ABNF is significant when trying to extend an existing application.
              Deletion can again be categorized between mandatory and non-mandatory optional
              AVPs described in <a class='info' href='#reuse-cmd-add-avp'>Section&nbsp;4.2.1<span> (</span><span class='info'>Adding AVPs to a command</span><span>)</span></a>.
</p>
<p>In the unlikely event that an application designer would require that
              mandatory AVPs must be deleted then it constitutes a fundamental change to
              an existing application. Though not specified in <a class='info' href='#I-D.ietf-dime-rfc3588bis'>[1]<span> (</span><span class='info'>Fajardo, V., Arkko, J., Loughney, J., and G. Zorn, &ldquo;Diameter Base Protocol,&rdquo; April&nbsp;2010.</span><span>)</span></a>,
              deletion of mandatory AVP would require the definition of a new application
              since it dictates changes in the behavior and semantics of an application.
</p>
<p>Instead of deleting AVPs, a better alternative would be to define a new command
              that would represent the new behavior. Reusing the same command code for different
              use cases can lead to more confusion, since the command will have different semantics
              depending on usage. This is especially true to base protocol commands
              (session related commands, ASR/ASA, STR/STA, RAR/RAA defined in
              <a class='info' href='#I-D.ietf-dime-rfc3588bis'>[1]<span> (</span><span class='info'>Fajardo, V., Arkko, J., Loughney, J., and G. Zorn, &ldquo;Diameter Base Protocol,&rdquo; April&nbsp;2010.</span><span>)</span></a>) where they are being used by many different
              applications.
</p>
<p>The deletion of an optional AVP may not necessarily require the allocation
              of a new application. Deletion of non-mandatory optional AVPs with a zero(0)
              minimum occurrence in the commands ABNF would not require a new application.
              The case where an optional AVP has a minimum occurrence of at least one(1)
              is unusual and not allowed in <a class='info' href='#I-D.ietf-dime-rfc3588bis'>[1]<span> (</span><span class='info'>Fajardo, V., Arkko, J., Loughney, J., and G. Zorn, &ldquo;Diameter Base Protocol,&rdquo; April&nbsp;2010.</span><span>)</span></a>. However,
              there may be existing applications that do not follow the new restrictions in
              <a class='info' href='#I-D.ietf-dime-rfc3588bis'>[1]<span> (</span><span class='info'>Fajardo, V., Arkko, J., Loughney, J., and G. Zorn, &ldquo;Diameter Base Protocol,&rdquo; April&nbsp;2010.</span><span>)</span></a>. These applications may have defined
              optional AVPs with a minimum occurrence of at least one(1) in their command ABNFs.
              In this case, the deletion of the AVP would effectively change the behavior of
              the application. It would be similar to the deletion of mandatory AVPs. Such
              cases are highly dubious to begin with since those AVPs already exhibits properties
              of mandatory AVPs. Extra consideration should be given as to why it was not
              defined as mandatory in the first place and that decision may have to be
              corrected as well.
</p>
<p>In other cases, it is recommended that application designers reuse the
              command ABNF without modification and simply ignore (but not delete) any
              optional AVP that will not be used. This is to maintain compatibility with
              existing applications that will not know about the new functionality as well
              as maintain the integrity of existing dictionaries.
            
</p>
<a name="reuse-avps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Reusing Existing AVPs</h3>

<p>This section deals with even more granularity than <a class='info' href='#reuse-application'>Section&nbsp;4.1<span> (</span><span class='info'>Reusing Existing Applications</span><span>)</span></a>
           and <a class='info' href='#reuse-commands'>Section&nbsp;4.2<span> (</span><span class='info'>Reusing Existing Commands</span><span>)</span></a>. Specifically, it discusses rules in adding, deleting
           or modifying the specified values and/or flags of an AVP. The rules state that modifying the value of an
           AVP is allowed only if it does not change the semantics of the AVP and the application using
           it. Otherwise, the change can be consider "Invasive" as described in <a class='info' href='#reuse-rules'>Section&nbsp;4<span> (</span><span class='info'>Rules on Extending Diameter</span><span>)</span></a>
           and require definition of a new application. Note that designers should consider
           <a class='info' href='#new-element-rules-justify'>Section&nbsp;5.2<span> (</span><span class='info'>Justifying the Allocation of Application-Id</span><span>)</span></a> when contemplating on these types of changes.
</p>
<p>Typically, the data types of the AVPs in question are scalar in nature and each ordinal
           value represent a specific semantic behavior of the application. An example is the CC-Request-Type AVP
           of <a class='info' href='#RFC4006'>[4]<span> (</span><span class='info'>Hakala, H., Mattila, L., Koskinen, J-P., Stura, M., and J. Loughney, &ldquo;Diameter Credit-Control Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. Adding, deleting or modifying known values of this AVP can
           modify the behavior of the application itself, and additionally, the mandatory and optional AVPs
           rules are inherited from <a class='info' href='#reuse-commands'>Section&nbsp;4.2<span> (</span><span class='info'>Reusing Existing Commands</span><span>)</span></a>. So this affects the decision for
           defining new applications as well.
</p>
<p>When reusing AVPs in a new application, the AVP flags such as the mandatory flag ('M'-bit)
           can be modified (turned on or off) within the application. In general, for AVPs defined outside
           of the base protocol, its mandatory characteristics is tied to its role within an application.
           Allowing the mandatory flag to be set or un-set by the application(s) makes the AVP more
           reusable. Further details on the mandatory flag ('M'-bit) can be found in
           <a class='info' href='#other-mandatory-flag'>Section&nbsp;6.4<span> (</span><span class='info'>Use of Mandatory (M-bit) flags</span><span>)</span></a>.
</p>
<a name="new-element-rules"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Rules for new Applications</h3>

<p>The general theme of Diameter extensibility is to reuse commands, AVPs and AVP
        values as much as possible. However, some of the extensibility rules described in the
        previous section also apply to scenarios where a designer is trying to define a
        completely new Diameter application.
</p>
<p>This section discusses the case where new applications have requirements that
        cannot be filled by existing applications and would require definition of completely
        new commands, AVPs and/or AVP values. Typically, there is little ambiguity about
        the decision to create these types of applications. Some examples are the interfaces
        defined for the IP Multimedia Subsystem of 3GPP, i.e.; Cx/Dx (<a class='info' href='#TS29.228'>[5]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a> and
        <a class='info' href='#TS29.229'>[6]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces based on the Diameter protocol; Protocol details,&rdquo; .</span><span>)</span></a>), Sh (<a class='info' href='#TS29.328'>[7]<span> (</span><span class='info'>3GPP, &ldquo;IMS Sh interface : signalling flows and message content,&rdquo; .</span><span>)</span></a> and <a class='info' href='#TS29.329'>[8]<span> (</span><span class='info'>3GPP, &ldquo;IMS Sh interface based on the Diameter protocol; Protocol details,&rdquo; .</span><span>)</span></a>)
        etc.
</p>
<p>Application design should also follow the theme of Diameter extensibility which
        in this case may mean the importing of existing AVPs and AVP values for any newly defined
        commands. In certain cases where accounting will be used, the models described in
        <a class='info' href='#other-accounting'>Section&nbsp;6.1<span> (</span><span class='info'>Diameter Accounting Support</span><span>)</span></a> should also be considered. Though some decisions
        may be clear, designers should also consider certain aspects of defining a new
        application. Some of these are described in following sections.
</p>
<a name="new-element-rules-cmd-alloc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Rules in Allocating new Command Codes</h3>

<p>If the protocol design justifies the allocation of a new command code then
           a new application as well as a new application ID is required. One of the drawbacks
           of <a class='info' href='#RFC3588'>[9]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a> was that it required application designers to go through
           a lengthy expert review process in order to be allocated with a new command code(s).
           This restricts designers who has to follow strict deadlines for delivering their applications.
           Some designers eventually reverted to sub-optimal application design to circumvent this restriction.
           To fix this issue, revisions introduced in <a class='info' href='#I-D.ietf-dime-rfc3588bis'>[1]<span> (</span><span class='info'>Fajardo, V., Arkko, J., Loughney, J., and G. Zorn, &ldquo;Diameter Base Protocol,&rdquo; April&nbsp;2010.</span><span>)</span></a> has
           relaxed the process and introduced a vendor specific command code space that can be allocated
           on a first-come first-serve basis.
          
</p>
<a name="new-element-rules-justify"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Justifying the Allocation of Application-Id</h3>

<p>Application designers should avoid justifying the allocation of an application ID
            for every new functionality or every minor change that is made to an existing application.
            Proliferation of applications that are very similar can lead to confusion. Application
            designers should always use <a class='info' href='#reuse-rules'>Section&nbsp;4<span> (</span><span class='info'>Rules on Extending Diameter</span><span>)</span></a> as a basis for justifying allocation
            of a new application ID.
          
</p>
<a name="new-element-rules-app-id"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Use of Application-Id in a Message</h3>

<p>When designing new applications, designers should specify that the
            application ID carried in all session level messages must be the application
            ID of the application using those messages. This includes the session level
            messages defined in base protocol, i.e., RAR/RAA, STR/STA, ASR/ASA and
            possibly ACR/ACA in the coupled accounting model, see <a class='info' href='#other-accounting'>Section&nbsp;6.1<span> (</span><span class='info'>Diameter Accounting Support</span><span>)</span></a>.
            Existing specifications may not adhere to this rule for historical or other
            reasons. However, this scheme should be followed to avoid possible routing problems
            for these messages. 
</p>
<p>In general, when a new application has been allocated with a new application id
            and it also reuses existing commands with or without modifications (Sec 4.1), it must
            use the newly allocated application id in the header and in all relevant application id AVPs
            (Auth-Application-Id or Acct-Application-Id) present in the commands message body.
</p>
<p>Additionally, application designs using Vendor-Specific-Application-Id AVP
            should not use the Vendor-Id AVP to further dissect or differentiate the
            vendor-specification application id. The Vendor-Id should also not be used as
            an additional input for routing or delivery of messages. In general, the Vendor-Id
            AVP is an informational AVP only and kept for backward compatibility reasons.
</p>
<a name="new-element-rules-fsm"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Application Specific Session Statemachine</h3>

<p>Section 8 of <a class='info' href='#I-D.ietf-dime-rfc3588bis'>[1]<span> (</span><span class='info'>Fajardo, V., Arkko, J., Loughney, J., and G. Zorn, &ldquo;Diameter Base Protocol,&rdquo; April&nbsp;2010.</span><span>)</span></a> provides session statemachines for
            authentication, authorization and accounting (AAA) services. When a new application
            is being defined that cannot clearly be categorized into any of these services
            it is recommended that the application itself define its own session statemachine.
            The existing session statemachines defined by <a class='info' href='#I-D.ietf-dime-rfc3588bis'>[1]<span> (</span><span class='info'>Fajardo, V., Arkko, J., Loughney, J., and G. Zorn, &ldquo;Diameter Base Protocol,&rdquo; April&nbsp;2010.</span><span>)</span></a> is not
            intended for general use beyond AAA services, therefore any behavior not covered by
            that category would not fit well. Support for server initiated request is a clear example
            where an application specific session statemachine would be needed; i.e. Rw interface
            for ITU-T push model.
</p>
<a name="new-element-rules-e2e-cap"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
End-to-End Applications Capabilities Exchange</h3>

<p>It is also possible that applications can use optional AVPs to exchange application
            specific capabilities and features. These AVPs are exchanged on an end-to-end basis and
            understood only by the application supporting them.  The use of such AVPs must be limited
            to convey application functionality. Examples of this can be found in
            <a class='info' href='#I-D.ietf-dime-mip6-split'>[2]<span> (</span><span class='info'>Korhonen, J., Tschofenig, H., Bournelle, J., Giaretta, G., and M. Nakhjiri, &ldquo;Diameter Mobile IPv6: Support for Home Agent to Diameter Server Interaction,&rdquo; April&nbsp;2009.</span><span>)</span></a> and <a class='info' href='#I-D.ietf-dime-diameter-qos'>[3]<span> (</span><span class='info'>Sun, D., McCann, P., Tschofenig, H., ZOU), T., Doria, A., and G. Zorn, &ldquo;Diameter Quality of Service Application,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</p>
<p>This method can be used to resolve some of the problems described in
            <a class='info' href='#other-app-updates'>Section&nbsp;6.3<span> (</span><span class='info'>Updating an existing Application</span><span>)</span></a> and <a class='info' href='#other-generic'>Section&nbsp;6.2<span> (</span><span class='info'>Generic Diameter Extensions</span><span>)</span></a>. It is also
            useful in providing some restrictions and/or guidelines on the how the other
            functionality related AVPs can be include in a command to avoid issues
            described in <a class='info' href='#reuse-cmd-add-avp'>Section&nbsp;4.2.1<span> (</span><span class='info'>Adding AVPs to a command</span><span>)</span></a>. Such end-to-end capabilities
            AVPs can aid in the following cases:<br />
<br />

            </p>
<ul class="text">
<li>Formalizing the way new functionality is added to existing applications
                by announcing support for it. This makes determining support for one or
                more specific functionality less ambiguous.
                <br />
<br />

</li>
<li>Provide a way to further negotiate capabilities if allowed by the applications.
              <br />
<br />

</li>
<li>Applications that do not understand these AVP can discard it
                upon receipt. In such case, senders of the AVP can also safely assume the receiving
                end-point does not support any functionality carried by the AVP if it is
                not present in subsequent responses.<br />
<br />

</li>
</ul><p>
            Note that this list is not meant to be comprehensive.
          
</p>
<a name="other"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Other Design Considerations</h3>

<p>The following are some of the design considerations that apply
        to a Diameter application.
      
</p>
<a name="other-accounting"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Diameter Accounting Support</h3>

<p>
          Accounting can be treated as an auxiliary application which is used
          in support of other applications. In most cases, accounting support
          is required when defining new applications. However, the lack of clarity
          in the base protocol document has prevented easy use the base accounting
          messages (ACR/ACA). This document provides two(2) possible models for
          using accounting:<br />
<br />

          </p>
<blockquote class="text"><dl>
<dt>Split Accounting Model</dt>
<dd><br />

              In this model, the accounting messages will use the Diameter base
              accounting application ID (value of 3). The design implication for this
              is that the accounting is treated as an independent application, especially
              during diameter routing. This means that accounting commands emanating from an
              application may be routed separately from the rest of the other application
              messages. This also implies that the messages generally end up in a central
              accounting server. A split accounting model is a good design choice when:
              <br />
<br />

              
<ul class="text">
<li>The application itself will not define its own unique accounting
                  commands.<br />
<br />

</li>
<li>The overall system architecture permits the use of centralized
                  accounting for one or more Diameter applications.
</li>
</ul><br />
<br />

              Centralizing accounting may have advantages but there are also drawbacks.
              The model assumes that the accounting server can somehow differentiate
              received accounting messages. Since the received accounting messages can
              be for any application and/or service, the accounting server has to be
              have a method to uniquely match accounting messages with applications
              and/or services being accounted for. This may mean defining new AVPs, checking
              the presence, absence or contents of existing AVPs or checking the contents
              of the accounting records itself. But in general, there is no clean and generic
              scheme for sorting these messages. Therefore, the use of this model is
              recommended only when all received accounting messages can be clearly
              identified and sorted. For most cases, the use of Coupled Accounting Model
              is recommended.
              <br />
<br />

            
</dd>
<dt>Coupled Accounting Model</dt>
<dd><br />

              In this model, the accounting messages will use the application ID of
              the application using the accounting service. The design implication
              for this is that the accounting messages are tightly coupled with the
              application itself; meaning that accounting messages will be routed
              like any other application messages. It would then be the responsibility
              of the application server (application entity receiving the ACR message)
              to send the accounting records carried by the accounting messages to
              the proper accounting server. The application server is also responsible
              for formulating a proper response (ACA). A coupled accounting model is
              a good design choice when:<br />
<br />

              
<ul class="text">
<li>The system architecture or deployment will not provide an
                  accounting server that supports Diameter.<br />
<br />

</li>
<li>The system architecture or deployment requires that the
                  accounting service for the specific application should be
                  handled by the application itself.<br />
<br />

</li>
<li>The application server is provisioned to use a different
                  protocol to access the accounting server; i.e., via LDAP, XML etc.
                  This includes attempting to support older accounting systems
                  that are not Diameter aware.<br />
<br />

</li>
</ul>
              In all cases above, there will generally be no direct Diameter access
              to the accounting server.<br />
<br />

</dd>
</dl></blockquote><p>
          These models provide a basis for using accounting messages. Application
          designers may obviously deviate from these models provided that the factors
          being addressed here have also been taken into account. Though it is not
          recommended, examples of other methods might be defining a new set of
          commands to carry application specific accounting records.
        
</p>
<a name="other-generic"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Generic Diameter Extensions</h3>

<p>Generic Diameter extensions are AVPs, commands or applications that
          are designed to support other Diameter applications.  They are auxiliary
          applications meant to improve or enhance the Diameter protocol itself
          or Diameter applications/functionality. Some examples include the extensions
          to support auditing and redundancy (see <a class='info' href='#I-D.calhoun-diameter-res-mgmt'>[12]<span> (</span><span class='info'>Calhoun, P., &ldquo;Diameter Resource Management Extensions,&rdquo; March&nbsp;2001.</span><span>)</span></a>),
          improvements in duplicate detection scheme (see <a class='info' href='#I-D.asveren-dime-dupcons'>[13]<span> (</span><span class='info'>Asveren, T., &ldquo;Diameter Duplicate Detection Cons.,&rdquo; August&nbsp;2006.</span><span>)</span></a>),
          and piggybacking of QoS attributes (see <a class='info' href='#I-D.ietf-dime-qos-attributes'>[10]<span> (</span><span class='info'>Korhonen, J., Tschofenig, H., Arumaithurai, M., Jones, M., and A. Lior, &ldquo;Traffic Classification and Quality of Service Attributes for Diameter,&rdquo; December&nbsp;2009.</span><span>)</span></a>).
</p>
<p>Since generic extensions can cover many aspects of Diameter and Diameter
          applications, it is not possible to enumerate all the probable scenarios
          in this document. However, some of the most common considerations are
          as follows:<br />
<br />

          </p>
<ul class="text">
<li>Backward compatibility: Dealing with existing applications that
              do not understand the new extension. Designers also have to
              make sure that new extensions do not break expected message
              delivery layer behavior.<br />
<br />

</li>
<li>Forward compatibility: Making sure that the design will not
              introduce undue restrictions for future applications. Future
              applications attempting to support this feature should not have
              to go through great lengths to implement any new extensions.
              <br />
<br />

</li>
<li>Tradeoffs in signaling: Designers may have to choose between the use
              of optional AVPs piggybacked onto existing commands versus
              defining new commands and applications. Optional AVPs are simpler
              to implement and may not need changes to existing applications; i.e.,
              use of proxy agents. However, the drawback is that the timing of
              sending extension data will be tied to when the application would be
              sending a message. This has consequences if the application and the
              extensions have different timing requirements. The use of commands and
              applications solves this issue but the tradeoff is the additional
              complexity of defining and deploying a new application. It is left
              up to the designer to find a good balance among these tradeoffs based
              on the requirements of the extension.<br />
<br />

</li>
</ul><p>
        
</p>
<p>In practice, it is often the case that the generic extensions use optional
        AVPs because it's simple and not intrusive to the application that would carry
        it. Peers that do not support the generic extensions need not understand nor recognize
        these optional AVPs. However, it is recommended that the authors of the extension
        specify the context or usage of the optional AVPs. As an example, in the case that
        the AVP can be used only by a specific set of applications then the specification
        must enumerate these applications and the scenarios when the optional AVPs
        will be used. In the case where the optional AVPs can be carried by any application,
        it is should be sufficient to specify such a use case and perhaps provide specific
        examples of applications using them.
        
</p>
<p>In most cases, these optional AVPs piggybacked by applications would be defined
        as a Grouped AVP and it would encapsulate all the functionality of the generic extension.
        In practice, it is not uncommon that the Grouped AVP will encapsulate an existing AVP
        that has previously been defined as mandatory ('M'-bit set); i.e. 3GPP IMS Cx / Dx
        interfaces (<a class='info' href='#TS29.228'>[5]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a> and <a class='info' href='#TS29.229'>[6]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces based on the Diameter protocol; Protocol details,&rdquo; .</span><span>)</span></a>). In previous
        revisions of the Diameter base protocol, the Grouped AVP itself would also have to
        be mandatory ('M'-bit set) which defeats the purpose of a non intrusive optional
        AVP. This restriction has been lifted in the latest revision of the Diameter base
        protocol. This gives more flexibility to authors of generic extensions with regards
        to the use of optional Grouped AVPs.
        
</p>
<a name="other-app-updates"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Updating an existing Application</h3>

<p> An application that is being upgraded must follow the same rules mentioned
          <a class='info' href='#reuse-rules'>Section&nbsp;4<span> (</span><span class='info'>Rules on Extending Diameter</span><span>)</span></a>. Even if the new version is fundamentally
          the same application, allocation of a new application ID is possible
          if it meets those criteria.
</p>
<p>Optional AVPs can also be used to indicate version differences. If
          this approach is chosen, it is recommended that the optional AVP is used
          specifically to indicate version information only and nothing else. Additionally,
          the use of too many optional AVPs to carry application enhancements should
          be avoided since such approach has a tendency to become unmanageable and
          introduce interoperability issues. These pitfalls are discussed in
          <a class='info' href='#reuse-cmd-add-avp'>Section&nbsp;4.2.1<span> (</span><span class='info'>Adding AVPs to a command</span><span>)</span></a>
</p>
<p>For the same reason, care should be taken in attempting to justify
          allocation of new application ID for every change. The pitfalls of this
          approach is discussed in <a class='info' href='#new-element-rules-app-id'>Section&nbsp;5.3<span> (</span><span class='info'>Use of Application-Id in a Message</span><span>)</span></a>.
</p>
<p>Acceptable techniques can be used to provide feature upgrades to existing
          applications. One of these is described in <a class='info' href='#new-element-rules-e2e-cap'>Section&nbsp;5.5<span> (</span><span class='info'>End-to-End Applications Capabilities Exchange</span><span>)</span></a>.
</p>
<a name="other-mandatory-flag"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
Use of Mandatory (M-bit) flags</h3>

<p>
          There has always been some confusion on the usage of an AVPs mandatory
          flag, M-bit, especially when it relates to the optional or required
          settings of the AVP within an ABNF. As a rule, the M-bit specifies whether
          the receiver of the AVP is required to understand and interpret the AVP
          and its content. This is regardless of whether the AVP is optional to appear
          in a message or not. However, there is some redundancy and overlap in this
          rule mainly because if the AVP is non-optional in the ABNF then it is obvious
          that the application must understands it. And even if the AVP is optional,
          i.e. it is defined with "[AVP-Name]", it is reasonable to imply that the
          application would have to understand this AVP since it is explicit about its
          presence in the ABNF and even perhaps its usage. Given this, it is reasonable
          to assume that the M-bit is set only for AVPs explicitly appearing in an
          applications ABNF. The following practices can be applied when deciding whether
          to set the mandatory (M-bit) flag on an AVP:<br />
<br />

          </p>
<ul class="text">
<li>AVPs appearing explicitly in an applications ABNF must have it's
              M-bit set. These application must have been allocated its own
              application-Id.
              <br />
<br />

</li>
<li>AVPs designed to be added to existing applications and not
              explicitly appearing on those applications must not have its
              M-bit set. These are AVPs defined outside of the applications
              that can carry it. Examples can be found in
              <a class='info' href='#I-D.ietf-dime-mip6-split'>[2]<span> (</span><span class='info'>Korhonen, J., Tschofenig, H., Bournelle, J., Giaretta, G., and M. Nakhjiri, &ldquo;Diameter Mobile IPv6: Support for Home Agent to Diameter Server Interaction,&rdquo; April&nbsp;2009.</span><span>)</span></a>,
              <a class='info' href='#I-D.ietf-dime-mip6-integrated'>[11]<span> (</span><span class='info'>Korhonen, J., Bournelle, J., Tschofenig, H., Perkins, C., and K. Chowdhury, &ldquo;Diameter Mobile IPv6: Support for Network Access Server to Diameter Server  Interaction,&rdquo; January&nbsp;2009.</span><span>)</span></a> and
              <a class='info' href='#I-D.ietf-dime-qos-attributes'>[10]<span> (</span><span class='info'>Korhonen, J., Tschofenig, H., Arumaithurai, M., Jones, M., and A. Lior, &ldquo;Traffic Classification and Quality of Service Attributes for Diameter,&rdquo; December&nbsp;2009.</span><span>)</span></a>.<br />
<br />

</li>
</ul><p>
          This practice somewhat degrades the usefulness of the mandatory AVP concept which
          may have flaws to begin with. However, it greatly simplifies how to define which
          AVPs are required to be understood and which are not.
        
</p>
<a name="other-app-network"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.5"></a><h3>6.5.&nbsp;
System Architecture and Deployment</h3>

<p>The following are some of the architecture considerations that applications
          designers should contemplate when defining new applications:<br />
<br />

          </p>
<ul class="text">
<li>For general AAA applications, Diameter requires more message exchanges for
              the same set of services compared to RADIUS. Therefore, application designers
              should consider scalability issues during the design process.<br />
<br />

</li>
<li>Application design should be agnostic to any Diameter topology. Application
              designers should not always assume a particular Diameter topology; i.e.,
              assume that there will always be application proxies in the path or assume
              that only intra-domain routing is applicable.<br />
<br />

</li>
<li>Security Considerations. Application designers should take into
              account that there is no end-to-end authentication built into
              Diameter.<br />
<br />

</li>
<li>Application design should consider some form of redundancy. Session state
              information is the primary data necessary for backup/recovering endpoints
              to continue processing for an previously existing session. Carrying enough
              information in the messages to reconstruct session state facilitates redundant
              implementations and is highly recommended.<br />
<br />

</li>
<li>Application design should segregate message delivery layer processing from
              application level processing. An example is the use of timers to detect lack
              of a response for a previously sent requests. Although the Diameter base protocol
              defines a watchdog timer Tw, its use on application level is discouraged
              since Tw is a hop-by-hop timer and it would not be relevant for end-to-end
              message delivery error detection. In such a case, it is recommended that
              applications should define their own set of timers for such purpose.
              <br />
<br />

</li>
<li>Applications should specify AVPs which could be used to further aid in
              duplication detection. In some cases, when extending an application,
              existing AVPs can be reused to provide additional duplication detection indicators;
              i.e., combination of Session-Id and CC-Request-Number AVPs in the Diameter Credit
              Control application <a class='info' href='#RFC4006'>[4]<span> (</span><span class='info'>Hakala, H., Mattila, L., Koskinen, J-P., Stura, M., and J. Loughney, &ldquo;Diameter Credit-Control Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. In cases where the extensions needs
              to define new AVPs, it is recommended that the new AVPs be used only for this
              purpose.
</li>
</ul><p>
        
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p> This document does not require actions by IANA. 
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p> This document does provides guidelines and considerations for extending Diameter and
        Diameter applications. It does not define nor address security related protocols or schemes.
      
</p>
<a name="acks"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Acknowledgments</h3>

<p> We greatly appreciate the insight provided by Diameter implementers who have highlighted
        the issues and concerns being addressed by this document. 
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-dime-rfc3588bis">[1]</a></td>
<td class="author-text">Fajardo, V., Arkko, J., Loughney, J., and G. Zorn, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-rfc3588bis-20.txt">Diameter Base Protocol</a>,&rdquo; draft-ietf-dime-rfc3588bis-20 (work in progress), April&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-rfc3588bis-20.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-dime-mip6-split">[2]</a></td>
<td class="author-text">Korhonen, J., Tschofenig, H., Bournelle, J., Giaretta, G., and M. Nakhjiri, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-mip6-split-17.txt">Diameter Mobile IPv6: Support for Home Agent to Diameter Server Interaction</a>,&rdquo; draft-ietf-dime-mip6-split-17 (work in progress), April&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-mip6-split-17.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-dime-diameter-qos">[3]</a></td>
<td class="author-text">Sun, D., McCann, P., Tschofenig, H., ZOU), T., Doria, A., and G. Zorn, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-diameter-qos-15.txt">Diameter Quality of Service Application</a>,&rdquo; draft-ietf-dime-diameter-qos-15 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-diameter-qos-15.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4006">[4]</a></td>
<td class="author-text">Hakala, H., Mattila, L., Koskinen, J-P., Stura, M., and J. Loughney, &ldquo;<a href="http://tools.ietf.org/html/rfc4006">Diameter Credit-Control Application</a>,&rdquo; RFC&nbsp;4006, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4006.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="TS29.228">[5]</a></td>
<td class="author-text">3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; 3GPP TS 29.228 Version 7.0.0&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="TS29.229">[6]</a></td>
<td class="author-text">3GPP, &ldquo;IMS Cx and Dx interfaces based on the Diameter protocol; Protocol details,&rdquo; 3GPP TS 29.229 Version 7.0.0&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="TS29.328">[7]</a></td>
<td class="author-text">3GPP, &ldquo;IMS Sh interface : signalling flows and message content,&rdquo; 3GPP TS 29.328 Version 6.8.0&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="TS29.329">[8]</a></td>
<td class="author-text">3GPP, &ldquo;IMS Sh interface based on the Diameter protocol; Protocol details,&rdquo; 3GPP TS 29.329 Version 6.6.0&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3588">[9]</a></td>
<td class="author-text">Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;<a href="http://tools.ietf.org/html/rfc3588">Diameter Base Protocol</a>,&rdquo; RFC&nbsp;3588, September&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3588.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-dime-qos-attributes">[10]</a></td>
<td class="author-text">Korhonen, J., Tschofenig, H., Arumaithurai, M., Jones, M., and A. Lior, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-qos-attributes-15.txt">Traffic Classification and Quality of Service Attributes for Diameter</a>,&rdquo; draft-ietf-dime-qos-attributes-15 (work in progress), December&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-qos-attributes-15.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-dime-mip6-integrated">[11]</a></td>
<td class="author-text">Korhonen, J., Bournelle, J., Tschofenig, H., Perkins, C., and K. Chowdhury, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-mip6-integrated-12.txt">Diameter Mobile IPv6: Support for Network Access Server to Diameter Server  Interaction</a>,&rdquo; draft-ietf-dime-mip6-integrated-12 (work in progress), January&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-mip6-integrated-12.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.calhoun-diameter-res-mgmt">[12]</a></td>
<td class="author-text">Calhoun, P., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-calhoun-diameter-res-mgmt-08.txt.txt">Diameter Resource Management Extensions</a>,&rdquo; draft-calhoun-diameter-res-mgmt-08.txt (work in progress), March&nbsp;2001 (<a href="http://tools.ietf.org/id/draft-calhoun-diameter-res-mgmt-08.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.asveren-dime-dupcons">[13]</a></td>
<td class="author-text">Asveren, T., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-asveren-dime-dupcons-00.txt">Diameter Duplicate Detection Cons.</a>,&rdquo; draft-asveren-dime-dupcons-00 (work in progress), August&nbsp;2006 (<a href="http://www.ietf.org/internet-drafts/draft-asveren-dime-dupcons-00.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Victor Fajardo (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Toshiba America Research Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">One Telcordia Drive, #1S222</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Piscataway, NJ  08854</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:vfajardo@tari.toshiba.com">vfajardo@tari.toshiba.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tolga Asveren</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sonus Network</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">4400 Route 9 South</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Freehold, NJ  07728</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:tasveren@sonusnet.com">tasveren@sonusnet.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hannes Tschofenig</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Otto-Hahn-Ring 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Munich, Bavaria  81739</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+49 89 636 40390</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Hannes.Tschofenig@nsn.com">Hannes.Tschofenig@nsn.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.tschofenig.com">http://www.tschofenig.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Glenn McGregor</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alcatel-Lucent</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">3461 Robin Ln Ste 1</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cameron Park, CA  95682</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:glenn@aaa.lucent.com">glenn@aaa.lucent.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">John Loughney</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Research Center</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">955 Page Mill Road</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Palo Alto, CA  94304</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">1-650-283-8068</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:john.loughney@nokia.com">john.loughney@nokia.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
