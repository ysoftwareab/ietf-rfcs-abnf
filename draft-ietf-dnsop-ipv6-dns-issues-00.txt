Internet Engineering Task Force                     Alain Durand
INTERNET-DRAFT                             SUN Microsystems,inc.
Oct, 28, 2002
Expires April, 29, 2003



                       IPv6 DNS transition issues
               <draft-ietf-dnsop-ipv6-dns-issues-00.txt.



                          Status of this memo

   This memo provides information to the Internet community. It does not
   specify an Internet standard of any kind. This memo is in full
   conformance with all provisions of Section 10 of RFC2026

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/1id-abstracts.html

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html



Abstract

   This memo summarizes DNS related issues when transitioning a network
   to IPv6. Consensus and open issues are presented.



1. Representing IPv6 addresses in DNS records

   In the direct zones, according to [RFC3363], IPv6 addresses are
   represented using AAAA records [RFC1886].  In the reverse zone, IPv6
   addresses are represented using PTR records in nibble format under
   the ip6.arpa. tree [RFC3152].



2. IPv4/IPv6 name space

   Keeping the Internet name space unfragmented is a critical thing for
   the operation of the Internet. This covers IPv4 and IPv6. It means
   that any record in the public Internet should be available unmodified
   to any nodes, IPv4 or IPv6, regardless of the transport being used.
   See [FRAGMENTATION] and [DNS-OPS-REQ] for details.

   The RECOMMENDED approach to maintain name space continuity is to use
   administrative procedures:
      - every recursive DNS server SHOULD be either IPv4-only or dual
      stack,
      - every single DNS zone SHOULD be served by at least an IPv4
      reachable DNS server.

   This rules out IPv6-only recursive DNS servers and DNS zones served
   by IPv6-only DNS servers. This approach could be revisited if/when
   translation techniques between IPv4 and IPv6 were to be widely
   deployed.




3. Local Scope addresses.

   [IPv6ADDRARCH] define three scopes of addresses, link local, site
   local and global.

3.1 Link local addresses

   Local addresses SHOULD NOT be published in the DNS, neither in the
   forward tree nor in the reverse tree.


3.2 Site local addresses

   Note: There is an ongoing discussion in the IPv6 wg on the usefulness
   of site local addresses that may end up deprecating or limiting the
   use of Site Local addresses.

   Site local addresses are an evolution of private addresses [RFC1918]
   in IPv4.  The main difference is that, within a site, nodes are
   expected to have several addresses with different scopes. [ADDRSELEC]
   recommends to use the lowest possible scope possible for
   communications. That is, if both site local & global addresses are
   published in the DNS for node B, and node A is configured also with
   both site local & global addresses, the communication between node A
   and B has to use site local addresses.

   For reasons illustrated in [DontPublish], site local addresses SHOULD
   NOT be published in the public DNS.  They MAY be published in a site
   view of the DNS if two-face DNS is deployed.


3.3 Reverse path DNS for site local addresses.

   The main issue is that the view of a site may be different on a stub
   resolver and on a fully recursive resolver it points to.  A simple
   scenario to illustrate the issue is a home network deploying site
   local addresses. Reverse DNS resolution for site local addresses has
   to be done within the home network and the stub resolver cannot
   simply point to the ISP DNS resolver.

   Site local addresses SHOULD NOT be populated in the public reverse
   tree.  If two-face DNS is deployed, site local addresses MAY be
   populated in the local view of reverse tree.



4. Automatic population of the Reverse path DNS

   Getting the reverse tree DNS populated correctly in IPv4 is not an
   easy exercise and very often the records are not really up to date or
   simply are just not there. As IPv6 addresses are much longer than
   IPv4 addresses, the situation of the reverse tree DNS will probably
   be even worse.

   A fairly common practice from IPv4 ISP is to generate PTR records for
   home customers automatically from the IPv4 address itself. Something
   like:
      1.2.3.4.in-addr.arpa. IN PTR 4.3.2.1.local-ISP.net
   It is not clear today if something similar need to be done in IPv6.
   As the number of possible PTR records would be huge (2^80) for a /48
   prefix, a possible solution would be to use wildcards entries like:
      *.0.1.2.3.4.5.6.7.8.9.a.b.c.ip6.arpa. IN PTR customer-42.local-ISP.net

   There is no consensus on using wildcards on this topic.  Other
   solutions like dynamic generation of PTR records or allowing Dynamic
   DNS updates have been suggested. A more radical approach would be not
   to pre-populate the reverse tree at all.



5. Privacy extension addresses

   [RFC3041] defines privacy extensions for IPv6 stateless
   autoconfiguration where the interface ID is a random number. As those
   addresses are designed to provide privacy by making it more difficult
   to log and trace back to the user, it makes no sense to populate the
   reverse tree DNS with them.

   [RFC3041] type addresses SHOULD NOT be published in the reverse tree
   DNS.



6. 6to4

   6to4 addresses can be published in the forward DNS, however special
   care is needed in the reverse tree. See [6to4ReverseDNS] for details.
   Delegations in the reverse zone under 2.0.0.2.ip6.arpa are the core
   of the problem. Delegating the next 32 bits of the IPv4 address used
   in the 6to4 domain won't scale and delegating on less may require
   cooperation from the upstream IPSs.

   Another problem with reverse DNS for 6to4 addresses is that the 6to4
   prefix may be transient. One of the usage scenario of 6to4 is to have
   PCs connected via dial-up use 6to4 to connect to the IPv6 Internet.
   In such a scenario, the lifetime of the 6to4 prefix is the same as
   the DHCP lease of the IPv4 address it is derived from. It means that
   the reverse DNS delegation is only valid for the same duration.

   A possible approach is not to populate the reverse tree DNS for 6to4
   addresses.


7. recursive DNS server discovery

   [DNSdiscovery] has been proposed to reserved a well known site local
   unicast address to configure the DNS resolver as a last resort
   mechanism, when no other information is available. Another approach
   is to use DHCPv6 extensions.



8.  DNSsec

   There is nothing specific to IPv6 or IPv4 in DNSsec.



9. Security considerations

   Using wildcard DNS records in the reverse path tree may have some
   implication when used in conjunction with DNSsec.



10. Author addresses

   Alain Durand
   SUN Microsystems, Inc
   25 Network circle UMPK17-202
   Menlo Park, CA, 94025
   USA
   Mail: Alain.Durand@sun.com



11. References

   [RFC1918] Address Allocation for Private Internets. Y. Rekhter, B.
   Moskowitz, D. Karrenberg, G. J. de Groot, E. Lear. February 1996.

   [RFC2766] Network Address Translation - Protocol Translation (NAT-
   PT). G.  Tsirtsis, P. Srisuresh. February 2000.

   [RFC3041] Privacy Extensions for Stateless Address Autoconfiguration in IPv6,
   T. Narten, R. Draves, January 2001.

   [RFC3152] Delegation of ip6.arpa, R. Bush, August 2001.

   [RFC3363] Representing Internet Protocol version 6 (IPv6) Addresses
   in the Domain Name System (DNS), R. Bush, A. Durand, B. Fink, O.
   Gudmundsson, T. Hain. August 2002.

   [NAT-PTissues] Issues with NAT-PT DNS ALG in RFC2766, A. Durand,
   draft-durand-natpt-dns-alg-issues-00.txt, work in progress.

   [NAT64] NAT64 - NAT46, A. Durand, draft-durand-ngtrans-
   nat64-nat46-00.txt, work in progress.

   [FRAGMENTATION] IPv4-to-IPv6 migration and DNS namespace
   fragmentation, J. Ihren, draft-ietf-dnsop-v6-name-space-
   fragmentation-01.txt, work in progress.

   [DNS-OPS-REQ] NGtrans IPv6 DNS operational requirements and roadmap,
   A. Durand, J. Ihren, draft-ietf-ngtrans-dns-ops-req-04.txt, work in
   progress.

   [IPv6ADDRARCH] IP Version 6 Addressing Architecture, R. Hinden,
   draft-ipngwg-addr-arch-v3-09.txt, work in progress.

   [6to4ReverseDNS] 6to4 and DNS, K. Moore, draft-moore-6to4-dns-03.txt,
   work in progress.

   [DNSdiscovery] Well known site local unicast addresses for DNS
   resolver, A. Durand, J. hagano, D. Thaler, draft-ietf-ipv6-dns-
   discovery-07.txt, work in progress.

12. Full Copyright Statement

   "Copyright (C) The Internet Society (2001).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


























