<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Stream Control Transmission Protocol (SCTP) Network Address Translation Support</title>
<meta content="Claudio Porfiri" name="author">
<meta content="
       The Stream Control Transmission Protocol (SCTP) provides a reliable
communications channel between two end-hosts in many ways similar to the
Transmission Control Protocol (TCP).
With the widespread deployment of Network Address Translators (NAT),
specialized code has been added to NAT functions for TCP that allows multiple
hosts to reside behind a NAT function and yet share a single IPv4 address,
even when two hosts (behind a NAT function) choose the same port numbers for
their connection.
This additional code is sometimes classified as Network Address and Port
Translation (NAPT). 
       This document describes the protocol extensions needed for the SCTP
endpoints and the mechanisms for NAT functions necessary to provide similar
features of NAPT in the single point and multipoint traversal scenario. 
    " name="description">
<meta content="xml2rfc 3.10.0" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-porfiri-tsvwg-sctp-natsupp-01" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.10.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 58.2.0
    six 1.16.0
-->
<link href="/tmp/draft-porfiri-tsvwg-sctp-natsupp-98m87mvp.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">SCTP NAT Support</td>
<td class="right">November 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Porfiri</td>
<td class="center">Expires 20 May 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-porfiri-tsvwg-sctp-natsupp-01</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-11-16" class="published">16 November 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-05-20">20 May 2022</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">C. Porfiri</div>
<div class="org">Ericsson AB</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Stream Control Transmission Protocol (SCTP) Network Address Translation Support</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">The Stream Control Transmission Protocol (SCTP) provides a reliable
communications channel between two end-hosts in many ways similar to the
Transmission Control Protocol (TCP).
With the widespread deployment of Network Address Translators (NAT),
specialized code has been added to NAT functions for TCP that allows multiple
hosts to reside behind a NAT function and yet share a single IPv4 address,
even when two hosts (behind a NAT function) choose the same port numbers for
their connection.
This additional code is sometimes classified as Network Address and Port
Translation (NAPT).<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">This document describes the protocol extensions needed for the SCTP
endpoints and the mechanisms for NAT functions necessary to provide similar
features of NAPT in the single point and multipoint traversal scenario.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo-2">
<a href="#name-status-of-this-memo-2" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 20 May 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice-2">
<a href="#name-copyright-notice-2" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents-2">
<a href="#name-table-of-contents-2" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction-2" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-conventions" class="xref">Conventions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="xref">3</a>.  <a href="#name-terminology-2" class="xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-motivation-and-overview" class="xref">Motivation and Overview</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-sctp-nat-traversal-scenario" class="xref">SCTP NAT Traversal Scenarios</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a href="#section-4.1.1" class="xref">4.1.1</a>.  <a href="#name-single-point-traversal" class="xref">Single Point Traversal</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.2">
                    <p id="section-toc.1-1.4.2.1.2.2.1"><a href="#section-4.1.2" class="xref">4.1.2</a>.  <a href="#name-multipoint-traversal" class="xref">Multipoint Traversal</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-limitations-of-classical-na" class="xref">Limitations of Classical NAPT for SCTP</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-the-sctp-specific-variant-o" class="xref">The SCTP-Specific Variant of NAT</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="xref">4.4</a>.  <a href="#name-differences-with-current-na" class="xref">Differences with Current NAT Support Draft</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-data-formats" class="xref">Data Formats</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-modified-chunks" class="xref">Modified Chunks</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.1">
                    <p id="section-toc.1-1.5.2.1.2.1.1"><a href="#section-5.1.1" class="xref">5.1.1</a>.  <a href="#name-extended-abort-chunk" class="xref">Extended ABORT Chunk</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.2">
                    <p id="section-toc.1-1.5.2.1.2.2.1"><a href="#section-5.1.2" class="xref">5.1.2</a>.  <a href="#name-extended-error-chunk" class="xref">Extended ERROR Chunk</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.3">
                    <p id="section-toc.1-1.5.2.1.2.3.1"><a href="#section-5.1.3" class="xref">5.1.3</a>.  <a href="#name-extended-init-ack-chunk" class="xref">Extended INIT-ACK Chunk</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-new-error-causes" class="xref">New Error Causes</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.1">
                    <p id="section-toc.1-1.5.2.2.2.1.1"><a href="#section-5.2.1" class="xref">5.2.1</a>.  <a href="#name-port-number-collision-error" class="xref">Port Number Collision Error Cause</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-new-parameters" class="xref">New Parameters</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.1">
                    <p id="section-toc.1-1.5.2.3.2.1.1"><a href="#section-5.3.1" class="xref">5.3.1</a>.  <a href="#name-repetita-juvant-parameter" class="xref">Repetita Juvant Parameter</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-procedures-for-sctp-endpoin" class="xref">Procedures for SCTP Endpoints and NAT Functions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-association-setup-considera" class="xref">Association Setup Considerations for Endpoints</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-association-setup-considerat" class="xref">Association Setup Considerations for NAT</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="xref">6.3</a>.  <a href="#name-handling-of-internal-port-n" class="xref">Handling of Internal Port Number Collisions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.1">
                    <p id="section-toc.1-1.6.2.3.2.1.1"><a href="#section-6.3.1" class="xref">6.3.1</a>.  <a href="#name-nat-function-considerations" class="xref">NAT Function Considerations</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.2">
                    <p id="section-toc.1-1.6.2.3.2.2.1"><a href="#section-6.3.2" class="xref">6.3.2</a>.  <a href="#name-endpoint-considerations" class="xref">Endpoint Considerations</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="xref">6.4</a>.  <a href="#name-handling-of-missing-state" class="xref">Handling of Missing State</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.1">
                    <p id="section-toc.1-1.6.2.4.2.1.1"><a href="#section-6.4.1" class="xref">6.4.1</a>.  <a href="#name-nat-function-considerations-2" class="xref">NAT Function Considerations</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.2">
                    <p id="section-toc.1-1.6.2.4.2.2.1"><a href="#section-6.4.2" class="xref">6.4.2</a>.  <a href="#name-endpoint-considerations-2" class="xref">Endpoint Considerations</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5">
                <p id="section-toc.1-1.6.2.5.1"><a href="#section-6.5" class="xref">6.5</a>.  <a href="#name-handling-of-fragmented-sctp" class="xref">Handling of Fragmented SCTP Packets by NAT Functions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.6">
                <p id="section-toc.1-1.6.2.6.1"><a href="#section-6.6" class="xref">6.6</a>.  <a href="#name-multipoint-traversal-consid" class="xref">Multipoint Traversal Considerations for Endpoints</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.6.2.1">
                    <p id="section-toc.1-1.6.2.6.2.1.1"><a href="#section-6.6.1" class="xref">6.6.1</a>.  <a href="#name-nat-function-considerations-3" class="xref">NAT Function Considerations</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.6.2.2">
                    <p id="section-toc.1-1.6.2.6.2.2.1"><a href="#section-6.6.2" class="xref">6.6.2</a>.  <a href="#name-endpoint-considerations-3" class="xref">Endpoint Considerations</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-examples-of-operation" class="xref">Examples of Operation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-single-homed-association-se" class="xref">Single Homed Association Setup</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-single-homed-association-set" class="xref">Single Homed Association Setup with Collision</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="xref">7.3</a>.  <a href="#name-multi-homed-association-set" class="xref">Multi Homed Association Setup</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="xref">7.4</a>.  <a href="#name-multi-homed-association-setu" class="xref">Multi Homed Association Setup</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations-2" class="xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-new-chunk-flags-for-two-exi" class="xref">New Chunk Flags for Two Existing Chunk Types</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-four-new-error-causes" class="xref">Four New Error Causes</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="xref">8.3</a>.  <a href="#name-two-new-chunk-parameter-typ" class="xref">Two New Chunk Parameter Types</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-security-considerations-2" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-normative-references-2" class="xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-informative-references-2" class="xref">Informative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-A" class="xref"></a><a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-B" class="xref"></a><a href="#name-authors-address" class="xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction-2">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction-2" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">
                Stream Control Transmission Protocol (SCTP)
                <span>[<a href="#RFC4960" class="xref">RFC4960</a>]</span>
                provides a reliable communications channel between two end-hosts in many
ways similar to TCP
                <span>[<a href="#RFC0793" class="xref">RFC0793</a>]</span>
                . With the widespread
deployment of Network Address Translators (NAT), specialized code has been
added to NAT functions for TCP that allows multiple hosts to reside behind a NAT
function using private-use addresses (see
                <span>[<a href="#RFC6890" class="xref">RFC6890</a>]</span>
                ) and yet share
a single IPv4 address, even when two hosts (behind a NAT function) choose the
same port numbers for their connection.
This additional code is sometimes classified as Network Address and Port
Translation (NAPT).
Please note that this document focuses on the case where the NAT function maps a
single or multiple internal addresses to a single external address and vice versa.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">
                To date, specialized code for SCTP has not yet been
added to most NAT functions so that only a translation of IP addresses is
supported.
The end result of this is that only one SCTP-capable host can successfully
operate behind such a NAT function and this host can only be single-homed.
The only alternative for supporting legacy NAT functions is to use
UDP encapsulation as specified in
                <span>[<a href="#RFC6951" class="xref">RFC6951</a>]</span>
                .<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">
                The NAT function in the document refers to NAPT functions described in
Section 2.2 of
                <span>[<a href="#RFC3022" class="xref">RFC3022</a>]</span>
                , NAT64
                <span>[<a href="#RFC6146" class="xref">RFC6146</a>]</span>
                ,
or DS-Lite AFTR
                <span>[<a href="#RFC6333" class="xref">RFC6333</a>]</span>
                .<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">
                This document specifies procedures allowing a NAT function to support SCTP
by providing similar features to those provided by a NAPT for
TCP (see
                <span>[<a href="#RFC5382" class="xref">RFC5382</a>]</span>
                and
                <span>[<a href="#RFC7857" class="xref">RFC7857</a>]</span>
                ),
UDP (see
                <span>[<a href="#RFC4787" class="xref">RFC4787</a>]</span>
                and
                <span>[<a href="#RFC7857" class="xref">RFC7857</a>]</span>
                ),
and ICMP (see
                <span>[<a href="#RFC5508" class="xref">RFC5508</a>]</span>
                and
                <span>[<a href="#RFC7857" class="xref">RFC7857</a>]</span>
                ).
This document also specifies a set of data formats for SCTP packets and a set
of SCTP endpoint procedures to support NAT traversal.
An SCTP implementation supporting these procedures can assure that in both
single-homed and multi-homed cases a NAT function will maintain the appropriate
state without the NAT function needing to change port numbers.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">It is possible and desirable to make these changes for a number of
reasons:<a href="#section-1-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-6.1">It is desirable for SCTP internal end-hosts on multiple platforms to be able
to share a NAT function's external IP address in the same way that a TCP session
can use a NAT function.<a href="#section-1-6.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-6.2">
          <p id="section-1-6.2.1">If a NAT function does not need to change any data within an SCTP packet,
it will reduce the processing burden of NAT'ing SCTP by not needing to execute
the CRC32c checksum used by SCTP.<a href="#section-1-6.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-6.3">
          <p id="section-1-6.3.1">Not having to touch the IP payload makes the processing of ICMP
messages by NAT functions easier.<a href="#section-1-6.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-1-7">An SCTP-aware NAT function will need to follow these procedures for generating
appropriate SCTP packet formats, this is needed under circumstances detailed in this document
and only triggered by the detection of an SCTP packet containing an INIT chunk.<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">When considering SCTP-aware NAT it is possible to have
multiple levels of support. At each level, the Internal
Host, Remote Host, and NAT function does or does not support the
procedures described in this document. The following table
illustrates the results of the various combinations of
support and if communications can occur between two endpoints.<a href="#section-1-8" class="pilcrow">¶</a></p>
<span id="name-communication-possibilities"></span><div id="communication_table">
<table class="center" id="table-1">
        <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-communication-possibilities" class="selfRef">Communication possibilities</a>
        </caption>
<thead>
          <tr>
            <th class="text-center" rowspan="1" colspan="1">Internal Host</th>
            <th class="text-center" rowspan="1" colspan="1">NAT Function</th>
            <th class="text-center" rowspan="1" colspan="1">Remote Host</th>
            <th class="text-center" rowspan="1" colspan="1">Communication</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-center" rowspan="1" colspan="1">Support      </td>
            <td class="text-center" rowspan="1" colspan="1">Support   </td>
            <td class="text-center" rowspan="1" colspan="1">Support      </td>
            <td class="text-center" rowspan="1" colspan="1">Yes          </td>
          </tr>
          <tr>
            <td class="text-center" rowspan="1" colspan="1">Support      </td>
            <td class="text-center" rowspan="1" colspan="1">Support   </td>
            <td class="text-center" rowspan="1" colspan="1">No Support   </td>
            <td class="text-center" rowspan="1" colspan="1">Limited      </td>
          </tr>
          <tr>
            <td class="text-center" rowspan="1" colspan="1">Support      </td>
            <td class="text-center" rowspan="1" colspan="1">No Support</td>
            <td class="text-center" rowspan="1" colspan="1">Support      </td>
            <td class="text-center" rowspan="1" colspan="1">None         </td>
          </tr>
          <tr>
            <td class="text-center" rowspan="1" colspan="1">Support      </td>
            <td class="text-center" rowspan="1" colspan="1">No Support</td>
            <td class="text-center" rowspan="1" colspan="1">No Support   </td>
            <td class="text-center" rowspan="1" colspan="1">None         </td>
          </tr>
          <tr>
            <td class="text-center" rowspan="1" colspan="1">No Support   </td>
            <td class="text-center" rowspan="1" colspan="1">Support   </td>
            <td class="text-center" rowspan="1" colspan="1">Support      </td>
            <td class="text-center" rowspan="1" colspan="1">Limited      </td>
          </tr>
          <tr>
            <td class="text-center" rowspan="1" colspan="1">No Support   </td>
            <td class="text-center" rowspan="1" colspan="1">Support   </td>
            <td class="text-center" rowspan="1" colspan="1">No Support   </td>
            <td class="text-center" rowspan="1" colspan="1">Limited      </td>
          </tr>
          <tr>
            <td class="text-center" rowspan="1" colspan="1">No Support   </td>
            <td class="text-center" rowspan="1" colspan="1">No Support</td>
            <td class="text-center" rowspan="1" colspan="1">Support      </td>
            <td class="text-center" rowspan="1" colspan="1">None         </td>
          </tr>
          <tr>
            <td class="text-center" rowspan="1" colspan="1">No Support   </td>
            <td class="text-center" rowspan="1" colspan="1">No Support</td>
            <td class="text-center" rowspan="1" colspan="1">No Support   </td>
            <td class="text-center" rowspan="1" colspan="1">None         </td>
          </tr>
        </tbody>
      </table>
</div>
<p id="section-1-10">From the table it can be seen that no communication can occur when a
NAT function does not support SCTP-aware NAT.
This assumes that the NAT function does not handle SCTP packets at all and
all SCTP packets sent from behind a NAT function are discarded by
the NAT function.
In some cases, where the NAT function supports SCTP-aware NAT, but one of the
two hosts does not support the feature, communication can possibly occur in a
limited way.
For example, only one host can have a connection when a collision case occurs.<a href="#section-1-10" class="pilcrow">¶</a></p>
</section>
<div id="conventions">
<section id="section-2">
      <h2 id="name-conventions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions" class="section-name selfRef">Conventions</a>
      </h2>
<p id="section-2-1">
                The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
"OPTIONAL" in this document are to be interpreted as described in
BCP 14
                <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>
        <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span>
                when,
and only when, they appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-3">
      <h2 id="name-terminology-2">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-terminology-2" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-3-1">
                This document uses the following terms, which are depicted in
                <a href="#terminology_fig" class="xref">Figure 1</a>
                . Familiarity with the terminology used in
                <span>[<a href="#RFC4960" class="xref">RFC4960</a>]</span>
                and
                <span>[<a href="#RFC5061" class="xref">RFC5061</a>]</span>
                is assumed.<a href="#section-3-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-3-2">
        <dt id="section-3-2.1">Internal-Address (Int-Addr)</dt>
        <dd style="margin-left: 1.5em" id="section-3-2.2">
          <p id="section-3-2.2.1">An internal address that is known to the internal host.<a href="#section-3-2.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-2.3">Internal-Port (Int-Port)</dt>
        <dd style="margin-left: 1.5em" id="section-3-2.4">
          <p id="section-3-2.4.1">The port number that is in use by the host holding the
Internal-Address.<a href="#section-3-2.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-2.5">Internal-VTag (Int-VTag)</dt>
        <dd style="margin-left: 1.5em" id="section-3-2.6">
          <p id="section-3-2.6.1">
                        The SCTP Verification Tag (VTag) (see Section 3.1 of
                        <span>[<a href="#RFC4960" class="xref">RFC4960</a>]</span>
                        ) that the internal host has chosen for an
association.
The VTag is a unique 32-bit tag that accompanies any incoming SCTP packet
for this association to the Internal-Address.<a href="#section-3-2.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-2.7">Remote-Address (Rem-Addr)</dt>
        <dd style="margin-left: 1.5em" id="section-3-2.8">
          <p id="section-3-2.8.1">The address that an internal host is attempting to contact.<a href="#section-3-2.8.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-2.9">Remote-Port (Rem-Port)</dt>
        <dd style="margin-left: 1.5em" id="section-3-2.10">
          <p id="section-3-2.10.1">The port number used by the host holding the Remote-Address.<a href="#section-3-2.10.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-2.11">Remote-VTag (Rem-VTag)</dt>
        <dd style="margin-left: 1.5em" id="section-3-2.12">
          <p id="section-3-2.12.1">
                        The Verification Tag (VTag) (see Section 3.1 of
                        <span>[<a href="#RFC4960" class="xref">RFC4960</a>]</span>
                        )
that the host holding the Remote-Address has chosen for an association.
The VTag is a unique 32-bit tag that accompanies any outgoing
SCTP packet for this association to the Remote-Address.<a href="#section-3-2.12.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-2.13">External-Address (Ext-Addr)</dt>
        <dd style="margin-left: 1.5em" id="section-3-2.14">
          <p id="section-3-2.14.1">An external address assigned to the NAT function, that it uses as a source
address when sending packets towards a Remote-Address.<a href="#section-3-2.14.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<span id="name-basic-network-setup"></span><div id="terminology_fig">
<figure id="figure-1">
        <div class="alignCenter art-text artwork" id="section-3-3.1">
<pre>
  Internal Network    |         External Network
                      |
           Internal   |   External              Remote
           Address    |   Address  /--\/--\    Address
+--------+         +-----+        /        \           +--------+
| Host A |=========| NAT |=======| Network  |==========| Host B |
+--------+         +-----+        \        /           +--------+
           Internal   |            \--/\--/     Remote
 Internal    Port     |                           Port   Remote
   VTag               |                                   VTag
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-basic-network-setup" class="selfRef">Basic Network Setup</a>
        </figcaption></figure>
</div>
</section>
</div>
<section id="section-4">
      <h2 id="name-motivation-and-overview">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-motivation-and-overview" class="section-name selfRef">Motivation and Overview</a>
      </h2>
<section id="section-4.1">
        <h3 id="name-sctp-nat-traversal-scenario">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-sctp-nat-traversal-scenario" class="section-name selfRef">SCTP NAT Traversal Scenarios</a>
        </h3>
<p id="section-4.1-1">This section defines the notion of single and
multipoint NAT traversal.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<div id="single_point_traversal">
<section id="section-4.1.1">
          <h4 id="name-single-point-traversal">
<a href="#section-4.1.1" class="section-number selfRef">4.1.1. </a><a href="#name-single-point-traversal" class="section-name selfRef">Single Point Traversal</a>
          </h4>
<p id="section-4.1.1-1">
                        In this case, all packets in the SCTP association go through a
single NAT function, as shown in
                        <a href="#single_nat_scenario_fig" class="xref">Figure 2</a>
                        .<a href="#section-4.1.1-1" class="pilcrow">¶</a></p>
<span id="name-single-nat-function-scenari"></span><div id="single_nat_scenario_fig">
<figure id="figure-2">
            <div class="alignCenter art-text artwork" id="section-4.1.1-2.1">
<pre>
  Internal Network    |       External Network
                      |
                      |               /--\/--\
+--------+         +-----+           /        \          +--------+
| Host A |=========| NAT |========= | Network  | ========| Host B |
+--------+         +-----+           \        /          +--------+
                      |               \--/\--/
                      |
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-single-nat-function-scenari" class="selfRef">Single NAT Function Scenario</a>
            </figcaption></figure>
</div>
<p id="section-4.1.1-3">
                        A variation of this case is shown in
                        <a href="#serial_nat_szenario_fig" class="xref">Figure 3</a>
                        ,
i.e., multiple NAT functions in the forwarding path between two endpoints.<a href="#section-4.1.1-3" class="pilcrow">¶</a></p>
<span id="name-serial-nat-functions-scenar"></span><div id="serial_nat_szenario_fig">
<figure id="figure-3">
            <div class="alignCenter art-text artwork" id="section-4.1.1-4.1">
<pre>
      Internal | External : Internal | External
               |          :          |
               |          :          |       /--\/--\
+--------+  +-----+       :       +-----+   /        \   +--------+
| Host A |==| NAT |=======:=======| NAT |==| Network  |==| Host B |
+--------+  +-----+       :       +-----+   \        /   +--------+
               |          :          |       \--/\--/
               |          :          |
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-serial-nat-functions-scenar" class="selfRef">Serial NAT Functions Scenario</a>
            </figcaption></figure>
</div>
<p id="section-4.1.1-5">
                        Another case where the Endpoint is ditributed among SCTP Hosts is shown in
                        <a href="#distributed_endpoint_scenario_fig" class="xref">Figure 4</a> where multiple Hosts
                        behave as Server and share the same Internal Port. A Load Balancer
                        node supports NAT when a new Association request comes.
                        The description of the Load Balancer function and its interwork 
                        with NAT function is out of the scope of this document.<a href="#section-4.1.1-5" class="pilcrow">¶</a></p>
<span id="name-distributed-endpoint-scenar"></span><div id="distributed_endpoint_scenario_fig">
<figure id="figure-4">
            <div class="alignCenter art-text artwork" id="section-4.1.1-6.1">
<pre>
  Internal Network    |       External Network
                      |
                      |               /--\/--\
+--------+         +-----+           /        \          +--------+
| Host A |====+====| NAT |========= | Network  | ========| Host B |
+--------+    |    +-----+           \        /          +--------+
              |       | \             \--/\--/
+--------+    |       |  \
| Host B |====+       |   \
+--------+    |       |    \
              |       |     +----------+
+--------+    |       |     | Load     |
| Host C |====+       |     | Balancer |
+--------+            |     +----------+

</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-distributed-endpoint-scenar" class="selfRef">Distributed Endpoint Scenario</a>
            </figcaption></figure>
</div>
<p id="section-4.1.1-7">Although one of the main benefits of SCTP multi-homing is redundant
paths, in the single point traversal scenario the NAT function represents
a single point of failure in the path of the SCTP multi-homed association.
However, the rest of the path can still benefit from path diversity provided
by SCTP multi-homing.<a href="#section-4.1.1-7" class="pilcrow">¶</a></p>
<p id="section-4.1.1-8">The two SCTP endpoints in this case can be either single-homed or
multi-homed. However, the important thing is that the NAT function
in this case sees all the packets of the SCTP association.<a href="#section-4.1.1-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="multi_point_traversal">
<section id="section-4.1.2">
          <h4 id="name-multipoint-traversal">
<a href="#section-4.1.2" class="section-number selfRef">4.1.2. </a><a href="#name-multipoint-traversal" class="section-name selfRef">Multipoint Traversal</a>
          </h4>
<p id="section-4.1.2-1">
                        This case involves multiple NAT functions and each NAT function only sees some
of the packets in the SCTP association.
An example is shown in
                        <a href="#parallel_nat_scenario_fig" class="xref">Figure 5</a>
                        .<a href="#section-4.1.2-1" class="pilcrow">¶</a></p>
<span id="name-parallel-nat-functions-scen"></span><div id="parallel_nat_scenario_fig">
<figure id="figure-5">
            <div class="alignCenter art-text artwork" id="section-4.1.2-2.1">
<pre>
         Internal      |      External
                    +------+             /---\/---\
            /=======|NAT A |=========\  /          \
+--------+ /        +------+          \/            \    +--------+
| Host A |/            |              |    Network   |===| Host B |
+--------+\            |              /\            /    +--------+
           \        +------+         /  \          /
            \=======|NAT B |========/    \---\/---/
                    +------+
                       |
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-parallel-nat-functions-scen" class="selfRef">Parallel NAT Functions Scenario</a>
            </figcaption></figure>
</div>
<p id="section-4.1.2-3">This case does not apply to a single-homed SCTP association (i.e.,
both endpoints in the association use only one IP address). The
advantage here is that the existence of multiple NAT traversal points
can preserve the path diversity of a multi-homed association for the
entire path. This in turn can improve the robustness of the
communication.<a href="#section-4.1.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
<section id="section-4.2">
        <h3 id="name-limitations-of-classical-na">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-limitations-of-classical-na" class="section-name selfRef">Limitations of Classical NAPT for SCTP</a>
        </h3>
<p id="section-4.2-1">
                    Using classical NAPT possibly results in changing one of the SCTP port numbers
during the processing, which requires the recomputation of the transport layer
checksum by the NAPT function.
Whereas for UDP and TCP this can be done very efficiently, for SCTP
the checksum (CRC32c) over the entire packet needs to be recomputed
(see Appendix B of
                    <span>[<a href="#RFC4960" class="xref">RFC4960</a>]</span>
                    for details of the CRC32c
computation).
This would considerably add to the NAT computational burden, even though hardware
support can mitigate this in some implementations.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">
                    An SCTP endpoint can have multiple addresses but only has a single port
number to use.
To make multipoint traversal work, all the NAT functions involved need to
recognize the packets they see as belonging to the same SCTP association and
perform port number translation in a consistent way.
One possible way of doing this is to use a pre-defined table of port numbers
and addresses configured within each NAT function.
Other mechanisms could make use of NAT to NAT communication.
Such mechanisms have not been deployed on a wide scale base and thus are not
a preferred solution.
Therefore an SCTP variant of NAT function has been developed and is described in
draft-ietf-tsvwg-natsupp-23 that is the version at the current time.
This document describes an alternative to that function exploiting most of the
same principles. Rather than being radically different, it can be seen as a 
subset with some limitations but less complex and requiring minor computational
effort at the SCTP Endpoints and at the NAT functions 
(see
                    <a href="#SCTP_aware_NAT" class="xref">Section 4.3</a>
                    ).<a href="#section-4.2-2" class="pilcrow">¶</a></p>
</section>
<div id="SCTP_aware_NAT">
<section id="section-4.3">
        <h3 id="name-the-sctp-specific-variant-o">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-the-sctp-specific-variant-o" class="section-name selfRef">The SCTP-Specific Variant of NAT</a>
        </h3>
<p id="section-4.3-1">
                    In this section it is allowed that there are multiple SCTP capable hosts
behind a NAT function that share one External-Address.
This section focuses on the single point traversal scenario
(see
                    <a href="#single_point_traversal" class="xref">Section 4.1.1</a>
                    ) as well as on the multipoint
trasversal NAT (see
                    <a href="#multi_point_traversal" class="xref">Section 4.1.2</a>
                    ).<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">The modification of outgoing SCTP packets sent from an internal host is
simple: the source address of the packets has to be replaced with the
External-Address. It might also be necessary to establish some
state in the NAT function to later handle incoming packets.<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.3-3">
                    Typically, the NAT function has to maintain a NAT binding table
of Internal-Port, Remote-Port, Internal-Address, Remote-Address.
An entry in that NAT binding table is called a NAT-State control block.
The function Create() obtains the just mentioned parameters and returns
a NAT-State control block. Create() instantiates a supervision timer on
the NAT-State control block that has duration greather than 2 * HB.interval
and lower than 4 * HB.interval (see section 15 of
                    <span>[<a href="#RFC4960" class="xref">RFC4960</a>]</span>
                    ).
A NAT function MAY allow creating NAT-State control blocks via a management
interface.<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<p id="section-4.3-4">For SCTP packets coming from the external realm of the NAT function the
destination address of the packets has to be replaced with the Internal-Address
of the host to which the packet has to be delivered, if a NAT state entry is
found.
The lookup of the Internal-Address is based on the Remote-Address,
Remote-Port and the Internal-Port. The lookup function retarts the Nat-State control block
supervision timer.<a href="#section-4.3-4" class="pilcrow">¶</a></p>
<p id="section-4.3-5">The entries in the NAT binding table need to fulfill some uniqueness
conditions.
There can not be more than one entry NAT binding table with the same 4-tuple of
Internal-Address, Remote-Address, Internal-Port and Remote-Port.<a href="#section-4.3-5" class="pilcrow">¶</a></p>
<p id="section-4.3-6">
                    NAT is able understanding that the SCTP packet transports an INIT chunk because
the SCTP common header will have VTAG=0 (see section 3.1 of
                    <span>[<a href="#RFC4960" class="xref">RFC4960</a>]</span>
                )<a href="#section-4.3-6" class="pilcrow">¶</a></p>
<p id="section-4.3-7">The processing of outgoing SCTP packets containing an INIT chunk
is illustrated in the following figure. This scenario is valid for all
message flows in this section.<a href="#section-4.3-7" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="section-4.3-8">
<pre>

                                       /--\/--\
+--------+          +-----+           /        \           +--------+
| Host A | &lt;------&gt; | NAT | &lt;------&gt; | Network  | &lt;------&gt; | Host B |
+--------+          +-----+           \         /          +--------+
                                       \--/\---/


             INIT[Initiate-Tag]
 Int-Addr:Int-Port ------&gt; Rem-Addr:Rem-Port
                  Rem-VTag=0

         if lookup(Int-Port, Rem-Port, Rem-Addr) == true
                sendAbort(Rem-Addr, Rem-Port, Int-Addr, Int-Port, M-bit)
         else
                Create(Int-Port, Rem-Port, Int-Addr, Rem-Addr)
                Returns(control block)
                forwardPkt(Ext-Addr, Int-Port, Rem-Addr, Rem-Port)


           Translates To:

                        INIT[Initiate-Tag]
           Ext-Addr:Int-Port ------&gt; Rem-Addr:Rem-Port
                            Rem-VTag=0


</pre><a href="#section-4.3-8" class="pilcrow">¶</a>
</div>
<p id="section-4.3-9">In the normal case a NAT binding table entry will be created.<a href="#section-4.3-9" class="pilcrow">¶</a></p>
<p id="section-4.3-10">
                    However, it is possible that there is already a NAT binding table entry with
the same Remote-Address, Internal-Port and Remote-Port but different Internal-Address.
In this case the packet containing the INIT chunk MUST be dropped by the NAT
and a packet containing an ABORT chunk SHOULD be sent to the SCTP host that
originated the packet with the M bit set and 'Port Number Collision'
error cause (see
                    <a href="#mbitabort" class="xref">Section 5.1.1</a>
                    for the format).
The source address of the packet containing the ABORT chunk MUST be the
destination address of the packet containing the INIT chunk.<a href="#section-4.3-10" class="pilcrow">¶</a></p>
<p id="section-4.3-11">The processing of outgoing SCTP packets containing chunks other than INIT
is described in the following figure.<a href="#section-4.3-11" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="section-4.3-12">
<pre>

                                       /--\/--\
+--------+          +-----+           /        \           +--------+
| Host A | &lt;------&gt; | NAT | &lt;------&gt; | Network  | &lt;------&gt; | Host B |
+--------+          +-----+           \         /          +--------+
                                       \--/\---/

Int-Addr:Int-Port ------&gt; Rem-Addr:Rem-Port
                  Rem-VTag

              if lookup(Int-Port, Rem-Port, Rem-Addr) == false
                     Create(Int-Port, Rem-Port, Int-Addr, Rem-Addr)
                     Returns(control block)
              forwardPkt(Ext-Addr, Int-Port, Rem-Addr, Rem-Port)

              Translates To:

                         Ext-Addr:Int-Port ------&gt; Rem-Addr:Rem-Port
                                           Rem-VTag

</pre><a href="#section-4.3-12" class="pilcrow">¶</a>
</div>
<p id="section-4.3-13">The processing of incoming SCTP packets containing an INIT chunk
is illustrated in the following figure. This scenario is valid for all
message flows in this section.<a href="#section-4.3-13" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="section-4.3-14">
<pre>

                                       /--\/--\
+--------+          +-----+           /        \           +--------+
| Host A | &lt;------&gt; | NAT | &lt;------&gt; | Network  | &lt;------&gt; | Host B |
+--------+          +-----+           \         /          +--------+
                                       \--/\---/


                                         INIT [Initiate-Tag]
                            Ext-Addr:Int-Port &lt;---- Rem-Addr:Rem-Port
                                             Int-VTag=0


            if lookup(Int-Port, Rem-Port, Rem-Addr) == true
                sendAbort(Ext-Addr, Int-Port, Rem-Addr, Rem-Port, M-bit)
            else
                if INIT contains RJ option
                    send INIT-ACK to the INIT source
                else
                    Create(Int-Port, Rem-Port, Int-Addr, Rem-Addr)
                    Returns(control block)
                    forwardPkt(Rem-Addr, Rem-Port, Int-Addr, Int-Port)


           Translates To:

                        INIT[Initiate-Tag]
           Int-Addr:Int-Port &lt;------ Rem-Addr:Rem-Port
                            Int-VTag=0


</pre><a href="#section-4.3-14" class="pilcrow">¶</a>
</div>
<p id="section-4.3-15">
When INIT chunk contains the RJ option set, it's a duplicate of the INIT used
for establishing the association. In such case the reason for RJ option is to
be recognized by the NAT function that will reply to the sender instead of the SCTP Host.
This allows the SCTP Endpoint to be distributed among hosts, and since the NAT
function cannot arbitraly choose among hosts, it takes the role of the unknown
host in answering to the INIT issuer so that it can proceed with the ASCONF
handshake and extend the association. The final step of setting the path between
the NAT function and the unknown host will be completed by the host receiving
ASCONF and sending an INIT with RJ option towards the remote peer.<a href="#section-4.3-15" class="pilcrow">¶</a></p>
<p id="section-4.3-16">The processing of incoming SCTP packets containing chunk different
than INIT is illustrated in the following figure.
The Lookup() function has as input the Remote-Address,
Remote-Port and the Internal-Port.
It returns the corresponding entry of the NAT binding table.<a href="#section-4.3-16" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="section-4.3-17">
<pre>

                                       /--\/--\
+--------+          +-----+           /        \           +--------+
| Host A | &lt;------&gt; | NAT | &lt;------&gt; | Network  | &lt;------&gt; | Host B |
+--------+          +-----+           \         /          +--------+
                                       \--/\---/

                            Ext-Addr:Int-Port &lt;---- Rem-Addr:Rem-Port
                                             Int-VTag

              if lookup(Int-Port, Rem-Port, Rem-Addr) == true
                 Returns(NAT-State control block containing Int-Addr)
                 forwardPkt(Ext-Addr, Int-Port, Rem-Addr, Rem-Port)

                Translates To:

 Int-Addr:Int-Port &lt;------ Rem-Addr:Rem-Port
                   Int-VTag

</pre><a href="#section-4.3-17" class="pilcrow">¶</a>
</div>
<p id="section-4.3-18">In the case where the Lookup function fails because it does not find an
entry, the SCTP packet is dropped.<a href="#section-4.3-18" class="pilcrow">¶</a></p>
</section>
</div>
<div id="diff_with_existing_natsupp">
<section id="section-4.4">
        <h3 id="name-differences-with-current-na">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-differences-with-current-na" class="section-name selfRef">Differences with Current NAT Support Draft</a>
        </h3>
<p id="section-4.4-1">
    This section describes the differences with the existing draft-ietf-tsvwg-natsupp.<a href="#section-4.4-1" class="pilcrow">¶</a></p>
<p id="section-4.4-2">
    The main difference is that the NAT function is simpler and doesn't require
    explicit handling of NAT missing states. 
    Actually in this proposal NAT doesn't need to parse all the SCTP
    payloads. NAT only parses INIT chunks, filtering of SCTP packets containing
    INIT chunks is based on checking the SCTP Common Header and discriminate the
    behavior based on Verification Tag = 0, that indicates the SCTP packet contains
    an INIT chunk. The NAT supervises the association by means of a timer, if no
    SCTP packets are seen within a certain time, NAT assumes that the association is 
    closed and will remove the related NAT-entry.<a href="#section-4.4-2" class="pilcrow">¶</a></p>
<p id="section-4.4-3">
    The other difference is in the role of the SCTP User. In the current proposal it's
    up to the SCTP User to change the originating Endpoint (i.e. choose a different port number)
    if collision is detected. The current proposal guarantees that at each node being
    in a path belonging to an association, there will be only one 4-uple describing
    that association, that means the NAT doesn't need to take care of VTAG.<a href="#section-4.4-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
<div id="SCTP_data_format">
<section id="section-5">
      <h2 id="name-data-formats">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-data-formats" class="section-name selfRef">Data Formats</a>
      </h2>
<p id="section-5-1">
                This section defines the formats used to support NAT traversal.
                <a href="#chunks" class="xref">Section 5.1</a>
                and
                <a href="#errcause" class="xref">Section 5.2</a>
                describe chunks
and error causes sent by NAT functions and received by SCTP endpoints.
                <a href="#newparam" class="xref">Section 5.3</a>
                describes parameters sent by SCTP endpoints and
used by NAT functions and SCTP endpoints.<a href="#section-5-1" class="pilcrow">¶</a></p>
<div id="chunks">
<section id="section-5.1">
        <h3 id="name-modified-chunks">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-modified-chunks" class="section-name selfRef">Modified Chunks</a>
        </h3>
<p id="section-5.1-1">
                    This section presents existing chunks defined in
                    <span>[<a href="#RFC4960" class="xref">RFC4960</a>]</span>
                    for which additional flags are specified by this document.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<div id="mbitabort">
<section id="section-5.1.1">
          <h4 id="name-extended-abort-chunk">
<a href="#section-5.1.1" class="section-number selfRef">5.1.1. </a><a href="#name-extended-abort-chunk" class="section-name selfRef">Extended ABORT Chunk</a>
          </h4>
<div class="alignLeft art-text artwork" id="section-5.1.1-1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Type = 6    | Reserved  |M|T|           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\                                                               \
/                   zero or more Error Causes                   /
\                                                               \
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-5.1.1-1" class="pilcrow">¶</a>
</div>
<p id="section-5.1.1-2">
                        The ABORT chunk is extended to add the new 'M bit'. The M bit
                        indicates to the receiver of the ABORT chunk that the chunk was not
                        generated by the peer SCTP endpoint, but instead by a middle box (e.g., NAT).<a href="#section-5.1.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1.1-3">[NOTE to RFC-Editor: Assignment of M bit to be confirmed by IANA.]<a href="#section-5.1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mbiterr">
<section id="section-5.1.2">
          <h4 id="name-extended-error-chunk">
<a href="#section-5.1.2" class="section-number selfRef">5.1.2. </a><a href="#name-extended-error-chunk" class="section-name selfRef">Extended ERROR Chunk</a>
          </h4>
<div class="alignLeft art-text artwork" id="section-5.1.2-1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Type = 9    | Reserved  |M|T|           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\                                                               \
/                   zero or more Error Causes                   /
\                                                               \
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-5.1.2-1" class="pilcrow">¶</a>
</div>
<p id="section-5.1.2-2">
                        The ERROR chunk defined in
                        <span>[<a href="#RFC4960" class="xref">RFC4960</a>]</span>
                        is extended to
                        add the new 'M bit'. The M bit indicates to the receiver of the ERROR chunk
                        that the chunk was not generated by the peer SCTP endpoint, but instead
                        by a middle box.<a href="#section-5.1.2-2" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3">[NOTE to RFC-Editor: Assignment of M bit to be confirmed by IANA.]<a href="#section-5.1.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mbitinitack">
<section id="section-5.1.3">
          <h4 id="name-extended-init-ack-chunk">
<a href="#section-5.1.3" class="section-number selfRef">5.1.3. </a><a href="#name-extended-init-ack-chunk" class="section-name selfRef">Extended INIT-ACK Chunk</a>
          </h4>
<div class="alignLeft art-text artwork" id="section-5.1.3-1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Type = 2    | Reserved  |M|T|           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\                                                               \
/                   zero or more Error Causes                   /
\                                                               \
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-5.1.3-1" class="pilcrow">¶</a>
</div>
<p id="section-5.1.3-2">
                    The INIT ACK chunk defined in
                    <span>[<a href="#RFC4960" class="xref">RFC4960</a>]</span>
                    is extended to
                        add the new 'M bit'. The M bit indicates to the receiver of the INIT-ACK chunk
                        that the chunk was not generated by the peer SCTP endpoint, but instead
                        by a middle box.<a href="#section-5.1.3-2" class="pilcrow">¶</a></p>
<p id="section-5.1.3-3">[NOTE to RFC-Editor: Assignment of M bit to be confirmed by IANA.]<a href="#section-5.1.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="errcause">
<section id="section-5.2">
        <h3 id="name-new-error-causes">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-new-error-causes" class="section-name selfRef">New Error Causes</a>
        </h3>
<p id="section-5.2-1">This section defines the new error causes added by this document.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<div id="portcollide">
<section id="section-5.2.1">
          <h4 id="name-port-number-collision-error">
<a href="#section-5.2.1" class="section-number selfRef">5.2.1. </a><a href="#name-port-number-collision-error" class="section-name selfRef">Port Number Collision Error Cause</a>
          </h4>
<div class="alignLeft art-text artwork" id="section-5.2.1-1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Cause Code = 0x00B2        |     Cause Length = Variable   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\                             Chunk                            /
/                                                              \
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-5.2.1-1" class="pilcrow">¶</a>
</div>
<span class="break"></span><dl class="dlNewline" id="section-5.2.1-2">
            <dt id="section-5.2.1-2.1">Cause Code: 2 bytes (unsigned integer)</dt>
            <dd style="margin-left: 1.5em" id="section-5.2.1-2.2">
              <p id="section-5.2.1-2.2.1">
                            This field holds the IANA defined cause code for the
                            'Port Number Collision' Error Cause.
                            IANA is requested to assign the value 0x00B2 for this cause code.<a href="#section-5.2.1-2.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-5.2.1-2.3">Cause Length: 2 bytes (unsigned integer)</dt>
            <dd style="margin-left: 1.5em" id="section-5.2.1-2.4">
              <p id="section-5.2.1-2.4.1">
                            This field holds the length in bytes of the error cause.
                            The value MUST be the length of the Cause-Specific Information plus 4.<a href="#section-5.2.1-2.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-5.2.1-2.5">Chunk: variable length</dt>
            <dd style="margin-left: 1.5em" id="section-5.2.1-2.6">
              <p id="section-5.2.1-2.6.1">
                            The Cause-Specific Information is filled with the chunk that caused this
                            error.
                            This can be an INIT, INIT ACK, or ASCONF chunk.
                            Note that if the entire chunk will not fit in the ERROR chunk or ABORT chunk
                            being sent then the bytes that do not fit are truncated.<a href="#section-5.2.1-2.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-5.2.1-3">[NOTE to RFC-Editor: Assignment of cause code to be confirmed by IANA.]<a href="#section-5.2.1-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="newparam">
<section id="section-5.3">
        <h3 id="name-new-parameters">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-new-parameters" class="section-name selfRef">New Parameters</a>
        </h3>
<p id="section-5.3-1">
                This section defines new parameters and their valid appearance
                defined by this document.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<div id="repetita_juvant">
<section id="section-5.3.1">
          <h4 id="name-repetita-juvant-parameter">
<a href="#section-5.3.1" class="section-number selfRef">5.3.1. </a><a href="#name-repetita-juvant-parameter" class="section-name selfRef">Repetita Juvant Parameter</a>
          </h4>
<p id="section-5.3.1-1">
                    Repetita Juvant is a latin phase standing for "repeating does good". 
                    It's sually said as a jocular remark to defend the speaker's (or writer's) 
                    choice to repeat some important piece of information to ensure reception by the audience.<a href="#section-5.3.1-1" class="pilcrow">¶</a></p>
<p id="section-5.3.1-2">
                    The RJ Parameter is used as Optional Parameter in the INIT chunk.
                    The RJ parameter is used to indicate that INIT chunk is the repetition
                    of an already sent one even if it comes from a different source address.
                    It's used from either peers before sending ASCONF in order to setup the
                    NATs in the path.<a href="#section-5.3.1-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.3.1-3">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Type = 0xXXXX         |         Length = 8            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre><a href="#section-5.3.1-3" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<section id="section-6">
      <h2 id="name-procedures-for-sctp-endpoin">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-procedures-for-sctp-endpoin" class="section-name selfRef">Procedures for SCTP Endpoints and NAT Functions</a>
      </h2>
<p id="section-6-1">If an SCTP endpoint is behind an SCTP-aware NAT, a
                number of problems can arise as it tries to communicate with its peers:<a href="#section-6-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-2.1">
          <p id="section-6-2.1.1">
                        IP addresses can not be included in the SCTP packet. This is
                        discussed in
                        <a href="#setup" class="xref">Section 6.1</a>
                        .<a href="#section-6-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-2.2">
          <p id="section-6-2.2.1">
                        More than one host behind a NAT function could select the same source
                        port number when initiating an association with the same peer server.
                        This creates a situation where the NAT function will not be able to forward 
                        the INIT chunk.
                        This situation is discussed in
                        <a href="#mbitport" class="xref">Section 6.3</a>
                        .<a href="#section-6-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-2.3">
          <p id="section-6-2.3.1">
                        A restart of a NAT function during a conversation could cause a loss of its state.
                        This problem and its solution is discussed in
                        <a href="#restart" class="xref">Section 6.4</a>
                        .<a href="#section-6-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-2.4">
          <p id="section-6-2.4.1">
                        NAT functions need to deal with SCTP packets being fragmented at the IP layer.
                        This is discussed in
                        <a href="#fragmentation" class="xref">Section 6.5</a>
                        .<a href="#section-6-2.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-2.5">
          <p id="section-6-2.5.1">
                        An SCTP endpoint can be behind two NAT functions in parallel providing
                        redundancy.
                        The method to set up this scenario is discussed in
                        <a href="#multihomed" class="xref">Section 6.6</a>
                        .<a href="#section-6-2.5.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-6-3">
                The mechanisms to solve these problems require additional chunks and
                parameters, defined in this document, and modified handling procedures
                from those specified in
                <span>[<a href="#RFC4960" class="xref">RFC4960</a>]</span>
                as described below.<a href="#section-6-3" class="pilcrow">¶</a></p>
<div id="setup">
<section id="section-6.1">
        <h3 id="name-association-setup-considera">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-association-setup-considera" class="section-name selfRef">Association Setup Considerations for Endpoints</a>
        </h3>
<p id="section-6.1-1">
                    The association setup procedure defined in
                    <span>[<a href="#RFC4960" class="xref">RFC4960</a>]</span>
                    allows multi-homed SCTP endpoints to exchange its IP-addresses by using
                    IPv4 or IPv6 address parameters in the INIT and INIT ACK chunks.
                    However, this does not work when NAT functions are present.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">Every association setup from a host behind a NAT function MUST NOT use multiple
                    internal addresses.
                    The INIT chunk MUST NOT contain an IPv4 Address parameter,
                    IPv6 Address parameter, or Supported Address Types parameter.
                    The INIT ACK chunk MUST NOT contain any IPv4 Address parameter or
                    IPv6 Address parameter using non-global addresses.
                    The INIT chunk and the INIT ACK chunk MUST NOT contain any Host Name
                    parameters.<a href="#section-6.1-2" class="pilcrow">¶</a></p>
<p id="section-6.1-3">
                    If the association is intended to be finally multi-homed, the procedure in
                    <a href="#multihomed" class="xref">Section 6.6</a>
                    MUST be used.<a href="#section-6.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="setup_nat">
<section id="section-6.2">
        <h3 id="name-association-setup-considerat">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-association-setup-considerat" class="section-name selfRef">Association Setup Considerations for NAT</a>
        </h3>
<p id="section-6.2-1">
                    When Endpoint is Distributed, NAT needs the cooperation of a Load Balancer
                    function for handling incoming and outgoing Association Requests.
                    It's up to the Load Balancer internal design the strategy for permitting
                    a Distributed Endpoint to handle the traffic.
                    Functionally, it's important that Load Balancer provides NAT a way
                    for assigning Associations to multiple SCTP Hosts.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mbitport">
<section id="section-6.3">
        <h3 id="name-handling-of-internal-port-n">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-handling-of-internal-port-n" class="section-name selfRef">Handling of Internal Port Number Collisions</a>
        </h3>
<p id="section-6.3-1">
                    Consider the case where two hosts in the Internal-Address space want to
                    set up an SCTP association with the same service provided by some remote host.
                    This means that the Remote-Port is the same.
                    If they both choose the same Internal-Port the NAT function will experience 
                    collision when receiving the INIT and trying to create an Entry in the NAT Tables.
                    In such case NAT will send an ABORT chunk with M-bit set to the SCTP Client.
                    Since it's up to the SCTP User Application to choose the Internal Port, it may
                    be that an Association chooses the Internal Port from the ephemeral port range at 
                    random (see
                    <span>[<a href="#RFC6056" class="xref">RFC6056</a>]</span>
                    ), this would make the probability for Port Number
                    Collision low.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<p id="section-6.3-2">
                    At the Association initialization, the Client will experience one out of three
                    alternative answers from the network:<a href="#section-6.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.3-3.1">
            <p id="section-6.3-3.1.1"> INIT-ACK from the peer, this means a viable path exists between peers, all 
                            the involved NATs have NAT tables properly configured and the Association can be established.<a href="#section-6.3-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.3-3.2">
            <p id="section-6.3-3.2.1">
                     ABORT with M-bit set from one of the NATs within the path, this means 
                     that the Association cannot be established. The SCTP User application
                     SHOULD decide whether to retry with a different Internal Port or to give up.
                     The way SCTP and the SCTP User interact in this case is implementation dependent.<a href="#section-6.3-3.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.3-3.3">
            <p id="section-6.3-3.3.1">
                     ABORT from the remote peer.<a href="#section-6.3-3.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-6.3-4">
                    The way SCTP and SCTP User Application interact can be either:<a href="#section-6.3-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.3-5.1">
            <p id="section-6.3-5.1.1">An application can request a specific local port number (in the socket API, using bind() with 
                     a non-zero port number) and in case of a local port number collision, the connection 
                     setup has to fail. It is up to the application to close() the socket and restart from the beginning.<a href="#section-6.3-5.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.3-5.2">
            <p id="section-6.3-5.2.1">An application leaves the local port number selection up to the SCTP stack 
                     (in the socket socket API by either calling bind() with a zero port number 
                     or not calling bind() at all before calling connect() or sendto()). However, 
                     once the port number is chosen, it can not be changed. So in case of a local port number collision, 
                     the association setup has to fail. It is up to the application to close() the socket and restart 
                     from the beginning.<a href="#section-6.3-5.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.3-5.3">
            <p id="section-6.3-5.3.1">An application leaves the local port number selection up to the SCTP stack 
                     (in the socket socket API by either calling bind() with a zero port number 
                     or not calling bind() at all before calling connect() or sendto()). In addition, 
                     it indicates that the SCTP can change the local port number over time 
                     (in the socket API this would be calling an IPPROTO_SCTP level new socket option). 
                     In this case, the SCTP stack can automatically retry a connection setup 
                     in case of an local port number collision.<a href="#section-6.3-5.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<section id="section-6.3.1">
          <h4 id="name-nat-function-considerations">
<a href="#section-6.3.1" class="section-number selfRef">6.3.1. </a><a href="#name-nat-function-considerations" class="section-name selfRef">NAT Function Considerations</a>
          </h4>
<p id="section-6.3.1-1">
                        NAT function checks for collision only on packets containing INIT chunk.
                        If the NAT function detects a collision of internal port numbers, 
                        it SHOULD send a packet containing an ABORT chunk with the
                        M bit set.
                        The M bit is a new bit defined by this document to express to
                        SCTP that the source of this packet is a "middle" box, not the
                        peer SCTP endpoint (see
                        <a href="#mbitabort" class="xref">Section 5.1.1</a>
                        ).
                        the source and destination address and port numbers MUST be swapped.<a href="#section-6.3.1-1" class="pilcrow">¶</a></p>
<p id="section-6.3.1-2">
                        The sender of the packet containing an ERROR or ABORT chunk MUST include
                        the error cause with cause code 'Port Number Collision'
                        (see
                        <a href="#portcollide" class="xref">Section 5.2.1</a>
                        ).<a href="#section-6.3.1-2" class="pilcrow">¶</a></p>
<p id="section-6.3.1-3">
                        If the INIT chunk contains the RJ option the NAT function MUST NOT forward
                        the INIT chunk to the SCTP Host but it MUST reply to the remote peer with INIT-ACK
                        chunk with the M bit set. The M bit is a new bit defined by this document to express 
                        to SCTP that the source of this packet is a "middle" box (see                       
                        <a href="#mbitinitack" class="xref">Section 5.1.3</a>
                        ).
                        The information contained in INIT-ACK chunk SHOULD be copied from the INIT chunk.
                        The value for Initiate Tag and Initial TSN MAY be chosen random.<a href="#section-6.3.1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-6.3.2">
          <h4 id="name-endpoint-considerations">
<a href="#section-6.3.2" class="section-number selfRef">6.3.2. </a><a href="#name-endpoint-considerations" class="section-name selfRef">Endpoint Considerations</a>
          </h4>
<p id="section-6.3.2-1">The sender of the packet containing the INIT chunk upon reception of a packet containing
                    an ABORT chunk with M bit set and the appropriate error cause code for
                    colliding NAT binding table state is included, SHOULD evaluate the reason for ABORT.
                    If the reason is "Port Number Collision" it SHOULD reinitiate the
                    association setup procedure after choosing a new Internal Port.<a href="#section-6.3.2-1" class="pilcrow">¶</a></p>
</section>
</section>
</div>
<div id="restart">
<section id="section-6.4">
        <h3 id="name-handling-of-missing-state">
<a href="#section-6.4" class="section-number selfRef">6.4. </a><a href="#name-handling-of-missing-state" class="section-name selfRef">Handling of Missing State</a>
        </h3>
<section id="section-6.4.1">
          <h4 id="name-nat-function-considerations-2">
<a href="#section-6.4.1" class="section-number selfRef">6.4.1. </a><a href="#name-nat-function-considerations-2" class="section-name selfRef">NAT Function Considerations</a>
          </h4>
<p id="section-6.4.1-1">
                        When experiencing a restart, the NAT function will start handling SCTP
                        packets with time difference between the ones containing INIT chunks
                        and all the other ones.
                        Handling of SCTP packets containing INIT chunks will start at least
                        4 * HB.interval after handling other SCTP packets (see section 15 
                        of
                        <span>[<a href="#RFC4960" class="xref">RFC4960</a>]</span>
                        ). This avoids race condition between
                        the recreation of existing Entries in the NAT Table and the creation
                        of new ones from new Association requests.<a href="#section-6.4.1-1" class="pilcrow">¶</a></p>
<p id="section-6.4.1-2">If the NAT function receives a packet not containing an INIT chunk from the internal network
                    for which the lookup procedure does not find an entry in the NAT binding table,
                    it must create an Entry for that packet and forward it.
                    If the NAT function receives a packet not containing an INIT chunk from the external network
                    for which the lookup procedure does not find an entry in the NAT binding table,
                    it must silently drop it.<a href="#section-6.4.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-6.4.2">
          <h4 id="name-endpoint-considerations-2">
<a href="#section-6.4.2" class="section-number selfRef">6.4.2. </a><a href="#name-endpoint-considerations-2" class="section-name selfRef">Endpoint Considerations</a>
          </h4>
<p id="section-6.4.2-1">Upon restart of a NAT function, the endpoint will experience connectivity
                    interruption, depending on the Association state it will keep on retrying
                    sending SCTP packets containint DATA chunks or HB chunks.
                    Since the longest interval between SCTP packets is HB.interval, it will be able
                    restoring the connectivity at most 2 * HB.interval after NAT function is back at work.<a href="#section-6.4.2-1" class="pilcrow">¶</a></p>
<p id="section-6.4.2-2">If the Endpoint is trying to establish an Association, it will experience a longer
                    connectivity unavalilability of more than 4 * HB.interval as NAT needs to rebuild
                    the NAT Table with the existing Associations first.<a href="#section-6.4.2-2" class="pilcrow">¶</a></p>
</section>
</section>
</div>
<div id="fragmentation">
<section id="section-6.5">
        <h3 id="name-handling-of-fragmented-sctp">
<a href="#section-6.5" class="section-number selfRef">6.5. </a><a href="#name-handling-of-fragmented-sctp" class="section-name selfRef">Handling of Fragmented SCTP Packets by NAT Functions</a>
        </h3>
<p id="section-6.5-1">
                    SCTP minimizes the use of IP-level fragmentation. However, it
                    can happen that using IP-level fragmentation is needed to continue
                    an SCTP association. For example, if the path MTU is reduced and there
                    are still some DATA chunk in flight, which require packets larger than
                    the new path MTU. If IP-level fragmentation can not be used, the SCTP
                    association will be terminated in a non-graceful way.
                    See
                    <span>[<a href="#RFC8900" class="xref">RFC8900</a>]</span>
                    for more information about IP fragmentation.<a href="#section-6.5-1" class="pilcrow">¶</a></p>
<p id="section-6.5-2">Therefore, a NAT function MUST be able to handle IP-level fragmented
                SCTP packets. The fragments MAY arrive in any order.<a href="#section-6.5-2" class="pilcrow">¶</a></p>
<p id="section-6.5-3">When an SCTP packet can not be forwarded by the NAT function due to
                MTU issues and the IP header forbids fragmentation, the NAT MUST send back a
                "Fragmentation needed and DF set" ICMPv4 or PTB ICMPv6 message to the
                internal host.
                This allows for a faster recovery from this packet drop.<a href="#section-6.5-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="multihomed">
<section id="section-6.6">
        <h3 id="name-multipoint-traversal-consid">
<a href="#section-6.6" class="section-number selfRef">6.6. </a><a href="#name-multipoint-traversal-consid" class="section-name selfRef">Multipoint Traversal Considerations for Endpoints</a>
        </h3>
<p id="section-6.6-1">If a multi-homed SCTP endpoint behind a NAT function connects to a peer,
                it MUST first set up the association single-homed with only one destination
                address causing the first NAT function to populate its state.<a href="#section-6.6-1" class="pilcrow">¶</a></p>
<p id="section-6.6-2">
                    Once an Association has been created, it's possible to add
                    further external IP addresses for the peer to use, but
                    before adding each IP address it must be created the
                    needed set of Entries in all NAT functions towards all the
                    peer's IP addresses. An INIT chunk containing a RJ option
                    (see
                    <a href="#repetita_juvant" class="xref">Section 5.3.1</a>
                    ) SHOULD be sent towards all peers IP addresses using a path
                    selector that is expected to result in another external
                    addres than association creation. The reason why an INIT chunk
                    with RJ option set is to be used is for permitting the remote
                    to be able discriminating between a request for a new Association
                    in case of Distributed Endpoint. 
                    The result from that INIT
                    is according to the given rules for Association setup (see
                    <a href="#setup" class="xref">Section 6.1</a>
                    ) and can cause collision.
                    The reception of INIT ACK confirms that the path from the new IP address 
                    and the remote one is available and that all the NATs involved are properly 
                    configured. In case INIT ACK has M-bit set, the remote Endpoint is distributed.<a href="#section-6.6-2" class="pilcrow">¶</a></p>
<p id="section-6.6-3">After succefull confirmation, the Endpoint SHOULD add each IP address 
                    using packets containing ASCONF chunks sent via their respective NAT functions.
                    The address used in the Add IP address parameter is the wildcard address
                    (0.0.0.0 or ::0) and the address parameter in the ASCONF chunk SHOULD also
                    contain the VTags parameter.<a href="#section-6.6-3" class="pilcrow">¶</a></p>
<p id="section-6.6-4">
                    When an Endpoint gets a new Remote IP Address added to an Association, it SHOULD
                    send INIT chunks with RJ option towards from all its own IP Addresses towards
                    that address in order to properly set all the NATs in the path.<a href="#section-6.6-4" class="pilcrow">¶</a></p>
<section id="section-6.6.1">
          <h4 id="name-nat-function-considerations-3">
<a href="#section-6.6.1" class="section-number selfRef">6.6.1. </a><a href="#name-nat-function-considerations-3" class="section-name selfRef">NAT Function Considerations</a>
          </h4>
<p id="section-6.6.1-1">
                        NAT function differentiates the behavior towards INIT chunk depending on
                        the RJ option. If the RJ option exists and the packet contains an incoming
                        INIT chunk, the NAT function SHOULD NOT forward the INIT chunk towards
                        the SCTP Host, it shall reply instead with an INIT ACK chunk with the M-bit set.
                        <a href="#mbitinitack" class="xref">Section 5.1.3</a>
                        ). NAT function SHOULD create INIT ACK data by using the parameters from
                        the received INIT chunk.<a href="#section-6.6.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-6.6.2">
          <h4 id="name-endpoint-considerations-3">
<a href="#section-6.6.2" class="section-number selfRef">6.6.2. </a><a href="#name-endpoint-considerations-3" class="section-name selfRef">Endpoint Considerations</a>
          </h4>
<p id="section-6.6.2-1">
                        When the Endpoint receives an INIT chunk with RJ option set, it will ignore
                        the RJ option and handle INIT as in the legacy case.<a href="#section-6.6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.6.2-2">
                        The Endpoint originating INIT chunk with RJ option set can receive different
                        answers:<a href="#section-6.6.2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.6.2-3.1">
              <p id="section-6.6.2-3.1.1">
                                When receiving INIT ACK, it will assume the NATs on the path are
                                properly set and the Endpoint can continue with the ASCONF procedure.<a href="#section-6.6.2-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-6.6.2-3.2">
              <p id="section-6.6.2-3.2.1">
                                When receiving as ABORT with M-bit set, it shall assume that a path
                                is not possible to be established. The Endpoint SHOULD retry after
                                a time greather than 4 * HB.interval.<a href="#section-6.6.2-3.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-6.6.2-3.3">
              <p id="section-6.6.2-3.3.1">
                                When receiving an ABORT without M-bit set, it shall assume that some
                                temporary NAT configuration has led the INIT towards the wrong SCTP Host.
                                The Endpoint SHOULD retry after a time greather than 4 * HB.interval.<a href="#section-6.6.2-3.3.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</section>
</div>
</section>
<section id="section-7">
      <h2 id="name-examples-of-operation">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-examples-of-operation" class="section-name selfRef">Examples of Operation</a>
      </h2>
<p id="section-7-1">
        This section describes examples of Association Establishements using
        the reference scenario depicted in
        <a href="#example_operation_fig" class="xref">Figure 6</a>.
        Hosts A1 and A2 implement a distributed client towards the same remote Host. 
        Hosts B1 and B2 implement a distributed Endpoint 'B' acting as Server. 
        The Load Balancer functionality is not shown as it doesn't affect SCTP protocol.<a href="#section-7-1" class="pilcrow">¶</a></p>
<span id="name-parallel-nat-with-distribut"></span><div id="example_operation_fig">
<figure id="figure-6">
        <div class="alignCenter art-text artwork" id="section-7-2.1">
<pre>
      Internal     |           External          |      Internal
                +------+                      +------+
             +==|NAT A |==\    /--\/--\    /==|NAT C |==+
+--------+   |  +------+   \  /        \  /   +------+  |     +--------+
|Host A1 +---+     |        \/          \/       |      +-----|Host B1 |
|        +-+ |     |        |  Network  |        |      |  +--+        |
+--------+ | |     |        /\          /\       |      |  |  +--------+
           | |  +------+   /  \        /  \   +------+  |  |
           +====|NAT B |==/    \--\/--/    \==|NAT D |=====+
           | |  +------+                      +------+  |  |
+--------+ | |     |                             |      |  |  +--------+
|Host A2 +-|-+     |                             |      +--|--+Host B2 |
|        +-+       |                             |         +--+        |
+--------+         |                             |            +--------+
</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-parallel-nat-with-distribut" class="selfRef">Parallel NAT with distributed endpoints Scenario</a>
        </figcaption></figure>
</div>
<div id="sh_success_section">
<section id="section-7.1">
        <h3 id="name-single-homed-association-se">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-single-homed-association-se" class="section-name selfRef">Single Homed Association Setup</a>
        </h3>
<p id="section-7.1-1">
            This section describes a successfull Association Establishment from A1 towards
            the distributed endpoint B.
            The sequence chart is shown in <a href="#sh_success_fig" class="xref">Figure 7</a>.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<span id="name-single-homed-successfull-as"></span><div id="sh_success_fig">
<figure id="figure-7">
          <div class="alignCenter art-text artwork" id="section-7.1-2.1">
<pre>

A1      A2      NAT A       NAT B       NAT C       NAT D       B1    B2
|       |       |           |           |           |           |     |
+--------------}| INIT      |           |           |           |     |
|       |       +----------------------}|           |           |     |
|       |       |           |           +----------------------}|     |
|       |       |           |           |           |           |     |
|       |       |           |           |{----------------------+     |
|       |       |{----------------------+           |           |     |
|{--------------+ INIT ACK  |           |           |           |     |
|       |       |           |           |           |           |     |
</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-single-homed-successfull-as" class="selfRef">Single Homed successfull Association Setup</a>
          </figcaption></figure>
</div>
</section>
</div>
<section id="section-7.2">
        <h3 id="name-single-homed-association-set">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-single-homed-association-set" class="section-name selfRef">Single Homed Association Setup with Collision</a>
        </h3>
<p id="section-7.2-1">
            This section describes a successfull Association Establishment from A2 towards
            the distributed endpoint B. The collision happens at NAT A. 
            The sequence chart is shown in
            <a href="#sh_congest1_fig" class="xref">Figure 8</a>
            .<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<span id="name-single-homed-successfull-ass"></span><div id="sh_congest1_fig">
<figure id="figure-8">
          <div class="alignCenter art-text artwork" id="section-7.2-2.1">
<pre>

A1      A2      NAT A       NAT B       NAT C       NAT D       B1    B2
|       |       |           |           |           |           |     |
|       +------}| INIT      |           |           |           |     |
|       |{------+ ABORT     |           |           |           |     |
|       |       |           |           |           |           |     |
|       +------}| INIT      |           |           |           |     |
|       |       +----------------------}|           |           |     |
|       |       |           |           +----------------------------}|
|       |       |           |           |           |           |     |
|       |       |           |           |{----------------------------+
|       |       |{----------------------+           |           |     |
|       {-------+ INIT ACK  |           |           |           |     |
|       |       |           |           |           |           |     |
</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-single-homed-successfull-ass" class="selfRef">Single Homed successfull Association Setup after congestion</a>
          </figcaption></figure>
</div>
</section>
<div id="mh_success_section">
<section id="section-7.3">
        <h3 id="name-multi-homed-association-set">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-multi-homed-association-set" class="section-name selfRef">Multi Homed Association Setup</a>
        </h3>
<p id="section-7.3-1">
            This section describes how the single homed established at <a href="#sh_success_section" class="xref">Section 7.1</a>
            becomes multihomed. Note that the decision for what peer has to handle the INIT message requires
            support of Load Balancer. It's assumed that a Load Balancer exists and provides NAT with the
            right information.
            Success happens at all steps.
            <a href="#mh_success_fig" class="xref">Figure 9</a>
            .<a href="#section-7.3-1" class="pilcrow">¶</a></p>
<span id="name-multi-homed-successfull-ass"></span><div id="mh_success_fig">
<figure id="figure-9">
          <div class="alignCenter art-text artwork" id="section-7.3-2.1">
<pre>

A1      A2      NAT A       NAT B       NAT C       NAT D       B1    B2
|       |       |           |           |           |           |     |
+--------------------------}| INIT RJ   |           |           |     |
|       |       |           +----------}|           |           |     |
|       |       |           |{----------+           |           |     |
|{--------------------------+ INIT ACK  |           |           |     |
|       |       |           |           |           |           |     |
+--------------------------}| ASCONF    |           |           |     |
|       |       |           +----------}|           |           |     |
|       |       |           |           +----------------------}|     |
|       |       |           |           |{----------------------+     |
|       |       |           |{----------+           |           |     |
|{--------------------------+ ASCONF ACK|           |           |     |
|       |       |           |           |           |           |     |
|       |       |           | INIT RJ   |{----------------------+     |
|       |       |           |{----------+           |           |     |
|       |       |           +----------}|           |           |     |
|       |       |           | INIT ACK  +----------------------}|     |
|       |       |           |           |           |           |     |

</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-multi-homed-successfull-ass" class="selfRef">Multi Homed successfull Association Setup</a>
          </figcaption></figure>
</div>
</section>
</div>
<section id="section-7.4">
        <h3 id="name-multi-homed-association-setu">
<a href="#section-7.4" class="section-number selfRef">7.4. </a><a href="#name-multi-homed-association-setu" class="section-name selfRef">Multi Homed Association Setup</a>
        </h3>
<p id="section-7.4-1">
            This section describes how the multihome homed established at
            <a href="#mh_success_section" class="xref">Section 7.3</a>
            becomes multihomed from the other peer. Success happens at all steps.
            <a href="#mhmh_success_fig" class="xref">Figure 10</a>
            .<a href="#section-7.4-1" class="pilcrow">¶</a></p>
<span id="name-multi-homed-successfull-asso"></span><div id="mhmh_success_fig">
<figure id="figure-10">
          <div class="alignCenter art-text artwork" id="section-7.4-2.1">
<pre>

A1      A2      NAT A       NAT B       NAT C       NAT D       B1    B2
|       |       |           |           |           |           |     |
|       |       |           | INIT RJ   |           |{----------+     |
|       |       |{----------------------------------+           |     |
|       |       +----------------------------------}|           |     |
|       |       |           | INIT ACK  |           +----------}|     |
|       |       |           | INIT RJ   |           |{----------+     |
|       |       |           |{----------------------+           |     |
|       |       |           +----------------------}|           |     |
|       |       |           | INIT ACK  |           +----------}|     |
|       |       |           |           |           |           |     |
|       |       |           | ASCONF    |           |{----------+     |
|       |       |{----------------------------------+           |     |
|{--------------+           |           |           |           |     |
+--------------}|           | ASCONF ACK|           |           |     |
|       |       +----------------------------------}|           |     |
|       |       |           |           |           +----------}|     |
|       |       |           |           |           |           |     |
+--------------}|           | INIT RJ   |           |           |     |
|       |       +----------------------------------}|           |     |
|       |       |{----------------------------------+           |     |
|{--------------+           | INIT ACK  |           |           |     |
|       |       |           |           |           |           |     |
+--------------------------}| INIT RJ   |           |           |     |
|       |       |           +----------------------}|           |     |
|       |       |           |{----------------------+           |     |
|{--------------------------+ INIT ACK  |           |           |     |
|       |       |           |           |           |           |     |

</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-multi-homed-successfull-asso" class="selfRef">Multi Homed successfull Association Setup</a>
          </figcaption></figure>
</div>
</section>
</section>
<section id="section-8">
      <h2 id="name-iana-considerations-2">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations-2" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-8-1">[NOTE to RFC-Editor: "RFCXXXX" is to be replaced by the RFC number you
assign this document.]<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">[NOTE to RFC-Editor: The requested values for the chunk type and the chunk
parameter types are tentative and to be confirmed by IANA.]<a href="#section-8-2" class="pilcrow">¶</a></p>
<p id="section-8-3">This document (RFCXXXX) is the reference for all registrations
described in this section.
The requested changes are described below.<a href="#section-8-3" class="pilcrow">¶</a></p>
<section id="section-8.1">
        <h3 id="name-new-chunk-flags-for-two-exi">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-new-chunk-flags-for-two-exi" class="section-name selfRef">New Chunk Flags for Two Existing Chunk Types</a>
        </h3>
<p id="section-8.1-1">
                    As defined in
                    <span>[<a href="#RFC6096" class="xref">RFC6096</a>]</span>
                    two chunk flags have to be assigned
by IANA for the ERROR chunk. The requested value for the T bit is 0x01 and
for the M bit is 0x02.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1-2">This requires an update of the "ERROR Chunk Flags" registry for SCTP:<a href="#section-8.1-2" class="pilcrow">¶</a></p>
<p id="section-8.1-3">ERROR Chunk Flags<a href="#section-8.1-3" class="pilcrow">¶</a></p>
<table class="center" id="table-2">
          <caption><a href="#table-2" class="selfRef">Table 2</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Chunk Flag Value</th>
              <th class="text-left" rowspan="1" colspan="1">Chunk Flag Name</th>
              <th class="text-left" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x01</td>
              <td class="text-left" rowspan="1" colspan="1">T bit     </td>
              <td class="text-left" rowspan="1" colspan="1">[RFCXXXX]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x02</td>
              <td class="text-left" rowspan="1" colspan="1">M bit     </td>
              <td class="text-left" rowspan="1" colspan="1">[RFCXXXX]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x04</td>
              <td class="text-left" rowspan="1" colspan="1">Unassigned</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x08</td>
              <td class="text-left" rowspan="1" colspan="1">Unassigned</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x10</td>
              <td class="text-left" rowspan="1" colspan="1">Unassigned</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x20</td>
              <td class="text-left" rowspan="1" colspan="1">Unassigned</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x40</td>
              <td class="text-left" rowspan="1" colspan="1">Unassigned</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x80</td>
              <td class="text-left" rowspan="1" colspan="1">Unassigned</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
          </tbody>
        </table>
<p id="section-8.1-5">
                    As defined in
                    <span>[<a href="#RFC6096" class="xref">RFC6096</a>]</span>
                    one chunk flag has to be assigned
by IANA for the ABORT chunk. The requested value of the M bit is 0x02.<a href="#section-8.1-5" class="pilcrow">¶</a></p>
<p id="section-8.1-6">This requires an update of the "ABORT Chunk Flags" registry for SCTP:<a href="#section-8.1-6" class="pilcrow">¶</a></p>
<p id="section-8.1-7">ABORT Chunk Flags<a href="#section-8.1-7" class="pilcrow">¶</a></p>
<table class="center" id="table-3">
          <caption><a href="#table-3" class="selfRef">Table 3</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Chunk Flag Value</th>
              <th class="text-left" rowspan="1" colspan="1">Chunk Flag Name</th>
              <th class="text-left" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x01</td>
              <td class="text-left" rowspan="1" colspan="1">T bit     </td>
              <td class="text-left" rowspan="1" colspan="1">[RFC4960]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x02</td>
              <td class="text-left" rowspan="1" colspan="1">M bit     </td>
              <td class="text-left" rowspan="1" colspan="1">[RFCXXXX]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x04</td>
              <td class="text-left" rowspan="1" colspan="1">Unassigned</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x08</td>
              <td class="text-left" rowspan="1" colspan="1">Unassigned</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x10</td>
              <td class="text-left" rowspan="1" colspan="1">Unassigned</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x20</td>
              <td class="text-left" rowspan="1" colspan="1">Unassigned</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x40</td>
              <td class="text-left" rowspan="1" colspan="1">Unassigned</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x80</td>
              <td class="text-left" rowspan="1" colspan="1">Unassigned</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
            </tr>
          </tbody>
        </table>
</section>
<section id="section-8.2">
        <h3 id="name-four-new-error-causes">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-four-new-error-causes" class="section-name selfRef">Four New Error Causes</a>
        </h3>
<p id="section-8.2-1">Four error causes have to be assigned by IANA.
It is requested to use the values given below.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<p id="section-8.2-2">This requires Four additional lines in the "Error Cause Codes"
registry for SCTP:<a href="#section-8.2-2" class="pilcrow">¶</a></p>
<p id="section-8.2-3">Error Cause Codes<a href="#section-8.2-3" class="pilcrow">¶</a></p>
<table class="center" id="table-4">
          <caption><a href="#table-4" class="selfRef">Table 4</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Value</th>
              <th class="text-left" rowspan="1" colspan="1">Cause Code                    </th>
              <th class="text-left" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">176  </td>
              <td class="text-left" rowspan="1" colspan="1">VTag and Port Number Collision</td>
              <td class="text-left" rowspan="1" colspan="1">[RFCXXXX]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">177  </td>
              <td class="text-left" rowspan="1" colspan="1">Missing State                 </td>
              <td class="text-left" rowspan="1" colspan="1">[RFCXXXX]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">178  </td>
              <td class="text-left" rowspan="1" colspan="1">Port Number Collision         </td>
              <td class="text-left" rowspan="1" colspan="1">[RFCXXXX]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">179  </td>
              <td class="text-left" rowspan="1" colspan="1">VTag Not Found                </td>
              <td class="text-left" rowspan="1" colspan="1">[RFCXXXX]</td>
            </tr>
          </tbody>
        </table>
</section>
<section id="section-8.3">
        <h3 id="name-two-new-chunk-parameter-typ">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-two-new-chunk-parameter-typ" class="section-name selfRef">Two New Chunk Parameter Types</a>
        </h3>
<p id="section-8.3-1">Two chunk parameter types have to be assigned by IANA.
IANA is requested to assign these values from the pool of parameters with the
upper two bits set to '11' and to use the values given below.<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<p id="section-8.3-2">This requires two additional lines in the "Chunk Parameter Types"
registry for SCTP:<a href="#section-8.3-2" class="pilcrow">¶</a></p>
<p id="section-8.3-3">Chunk Parameter Types<a href="#section-8.3-3" class="pilcrow">¶</a></p>
<table class="center" id="table-5">
          <caption><a href="#table-5" class="selfRef">Table 5</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">ID Value</th>
              <th class="text-left" rowspan="1" colspan="1">Chunk Parameter Type    </th>
              <th class="text-left" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">49159   </td>
              <td class="text-left" rowspan="1" colspan="1">Disable Restart (0xC007)</td>
              <td class="text-left" rowspan="1" colspan="1">[RFCXXXX]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">49160   </td>
              <td class="text-left" rowspan="1" colspan="1">VTags (0xC008)          </td>
              <td class="text-left" rowspan="1" colspan="1">[RFCXXXX]</td>
            </tr>
          </tbody>
        </table>
</section>
</section>
<section id="section-9">
      <h2 id="name-security-considerations-2">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-security-considerations-2" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-9-1">State maintenance within a NAT function is always a subject of possible
Denial Of Service attacks. This document recommends that at
a minimum a NAT function runs a timer on any SCTP state so that old
association state can be cleaned up.<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">
                Generic issues related to address sharing are discussed in
                <span>[<a href="#RFC6269" class="xref">RFC6269</a>]</span>
                and apply to SCTP as well.<a href="#section-9-2" class="pilcrow">¶</a></p>
<p id="section-9-3">
                For SCTP endpoints not disabling the restart procedure, this document does
not add any additional security considerations to the ones given in
                <span>[<a href="#RFC4960" class="xref">RFC4960</a>]</span>
                ,
                <span>[<a href="#RFC4895" class="xref">RFC4895</a>]</span>
                , and
                <span>[<a href="#RFC5061" class="xref">RFC5061</a>]</span>
                .<a href="#section-9-3" class="pilcrow">¶</a></p>
<p id="section-9-4">SCTP endpoints disabling the restart procedure, need to monitor the status
of all associations to mitigate resource exhaustion attacks by establishing
a lot of associations sharing the same IP addresses and port numbers.<a href="#section-9-4" class="pilcrow">¶</a></p>
<p id="section-9-5">
                In any case, SCTP is protected by the verification tags and the usage of
                <span>[<a href="#RFC4895" class="xref">RFC4895</a>]</span>
                against off-path attackers.<a href="#section-9-5" class="pilcrow">¶</a></p>
<p id="section-9-6">
                For IP-level fragmentation and reassembly related issues see
                <span>[<a href="#RFC4963" class="xref">RFC4963</a>]</span>
                .<a href="#section-9-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9-7.1">
          <p id="section-9-7.1.1">Setting a low timeout for SCTP mapping entries to cause failures to deliver
incoming SCTP packets.<a href="#section-9-7.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-9-7.2">
          <p id="section-9-7.2.1">Instantiating mapping entries to cause NAT collision.<a href="#section-9-7.2.1" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
<section id="section-10">
      <h2 id="name-normative-references-2">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-normative-references-2" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4895">[RFC4895]</dt>
      <dd>
<span class="refAuthor">Tuexen, M.</span>, <span class="refAuthor">Stewart, R.</span>, <span class="refAuthor">Lei, P.</span>, and <span class="refAuthor">E. Rescorla</span>, <span class="refTitle">"Authenticated Chunks for the Stream Control Transmission Protocol (SCTP)"</span>, <span class="seriesInfo">RFC 4895</span>, <span class="seriesInfo">DOI 10.17487/RFC4895</span>, <time datetime="2007-08" class="refDate">August 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4895">https://www.rfc-editor.org/info/rfc4895</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4960">[RFC4960]</dt>
      <dd>
<span class="refAuthor">Stewart, R., Ed.</span>, <span class="refTitle">"Stream Control Transmission Protocol"</span>, <span class="seriesInfo">RFC 4960</span>, <span class="seriesInfo">DOI 10.17487/RFC4960</span>, <time datetime="2007-09" class="refDate">September 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4960">https://www.rfc-editor.org/info/rfc4960</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5061">[RFC5061]</dt>
      <dd>
<span class="refAuthor">Stewart, R.</span>, <span class="refAuthor">Xie, Q.</span>, <span class="refAuthor">Tuexen, M.</span>, <span class="refAuthor">Maruyama, S.</span>, and <span class="refAuthor">M. Kozuka</span>, <span class="refTitle">"Stream Control Transmission Protocol (SCTP) Dynamic Address Reconfiguration"</span>, <span class="seriesInfo">RFC 5061</span>, <span class="seriesInfo">DOI 10.17487/RFC5061</span>, <time datetime="2007-09" class="refDate">September 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5061">https://www.rfc-editor.org/info/rfc5061</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6096">[RFC6096]</dt>
      <dd>
<span class="refAuthor">Tuexen, M.</span> and <span class="refAuthor">R. Stewart</span>, <span class="refTitle">"Stream Control Transmission Protocol (SCTP) Chunk Flags Registration"</span>, <span class="seriesInfo">RFC 6096</span>, <span class="seriesInfo">DOI 10.17487/RFC6096</span>, <time datetime="2011-01" class="refDate">January 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6096">https://www.rfc-editor.org/info/rfc6096</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
    <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-11">
      <h2 id="name-informative-references-2">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-informative-references-2" class="section-name selfRef">Informative References</a>
      </h2>
<dl class="references">
<dt id="RFC0793">[RFC0793]</dt>
      <dd>
<span class="refAuthor">Postel, J.</span>, <span class="refTitle">"Transmission Control Protocol"</span>, <span class="seriesInfo">STD 7</span>, <span class="seriesInfo">RFC 793</span>, <span class="seriesInfo">DOI 10.17487/RFC0793</span>, <time datetime="1981-09" class="refDate">September 1981</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc793">https://www.rfc-editor.org/info/rfc793</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3022">[RFC3022]</dt>
      <dd>
<span class="refAuthor">Srisuresh, P.</span> and <span class="refAuthor">K. Egevang</span>, <span class="refTitle">"Traditional IP Network Address Translator (Traditional NAT)"</span>, <span class="seriesInfo">RFC 3022</span>, <span class="seriesInfo">DOI 10.17487/RFC3022</span>, <time datetime="2001-01" class="refDate">January 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3022">https://www.rfc-editor.org/info/rfc3022</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4787">[RFC4787]</dt>
      <dd>
<span class="refAuthor">Audet, F., Ed.</span> and <span class="refAuthor">C. Jennings</span>, <span class="refTitle">"Network Address Translation (NAT) Behavioral Requirements for Unicast UDP"</span>, <span class="seriesInfo">BCP 127</span>, <span class="seriesInfo">RFC 4787</span>, <span class="seriesInfo">DOI 10.17487/RFC4787</span>, <time datetime="2007-01" class="refDate">January 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4787">https://www.rfc-editor.org/info/rfc4787</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4963">[RFC4963]</dt>
      <dd>
<span class="refAuthor">Heffner, J.</span>, <span class="refAuthor">Mathis, M.</span>, and <span class="refAuthor">B. Chandler</span>, <span class="refTitle">"IPv4 Reassembly Errors at High Data Rates"</span>, <span class="seriesInfo">RFC 4963</span>, <span class="seriesInfo">DOI 10.17487/RFC4963</span>, <time datetime="2007-07" class="refDate">July 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4963">https://www.rfc-editor.org/info/rfc4963</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5382">[RFC5382]</dt>
      <dd>
<span class="refAuthor">Guha, S., Ed.</span>, <span class="refAuthor">Biswas, K.</span>, <span class="refAuthor">Ford, B.</span>, <span class="refAuthor">Sivakumar, S.</span>, and <span class="refAuthor">P. Srisuresh</span>, <span class="refTitle">"NAT Behavioral Requirements for TCP"</span>, <span class="seriesInfo">BCP 142</span>, <span class="seriesInfo">RFC 5382</span>, <span class="seriesInfo">DOI 10.17487/RFC5382</span>, <time datetime="2008-10" class="refDate">October 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5382">https://www.rfc-editor.org/info/rfc5382</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5508">[RFC5508]</dt>
      <dd>
<span class="refAuthor">Srisuresh, P.</span>, <span class="refAuthor">Ford, B.</span>, <span class="refAuthor">Sivakumar, S.</span>, and <span class="refAuthor">S. Guha</span>, <span class="refTitle">"NAT Behavioral Requirements for ICMP"</span>, <span class="seriesInfo">BCP 148</span>, <span class="seriesInfo">RFC 5508</span>, <span class="seriesInfo">DOI 10.17487/RFC5508</span>, <time datetime="2009-04" class="refDate">April 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5508">https://www.rfc-editor.org/info/rfc5508</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6056">[RFC6056]</dt>
      <dd>
<span class="refAuthor">Larsen, M.</span> and <span class="refAuthor">F. Gont</span>, <span class="refTitle">"Recommendations for Transport-Protocol Port Randomization"</span>, <span class="seriesInfo">BCP 156</span>, <span class="seriesInfo">RFC 6056</span>, <span class="seriesInfo">DOI 10.17487/RFC6056</span>, <time datetime="2011-01" class="refDate">January 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6056">https://www.rfc-editor.org/info/rfc6056</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6146">[RFC6146]</dt>
      <dd>
<span class="refAuthor">Bagnulo, M.</span>, <span class="refAuthor">Matthews, P.</span>, and <span class="refAuthor">I. van Beijnum</span>, <span class="refTitle">"Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers"</span>, <span class="seriesInfo">RFC 6146</span>, <span class="seriesInfo">DOI 10.17487/RFC6146</span>, <time datetime="2011-04" class="refDate">April 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6146">https://www.rfc-editor.org/info/rfc6146</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6269">[RFC6269]</dt>
      <dd>
<span class="refAuthor">Ford, M., Ed.</span>, <span class="refAuthor">Boucadair, M.</span>, <span class="refAuthor">Durand, A.</span>, <span class="refAuthor">Levis, P.</span>, and <span class="refAuthor">P. Roberts</span>, <span class="refTitle">"Issues with IP Address Sharing"</span>, <span class="seriesInfo">RFC 6269</span>, <span class="seriesInfo">DOI 10.17487/RFC6269</span>, <time datetime="2011-06" class="refDate">June 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6269">https://www.rfc-editor.org/info/rfc6269</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6333">[RFC6333]</dt>
      <dd>
<span class="refAuthor">Durand, A.</span>, <span class="refAuthor">Droms, R.</span>, <span class="refAuthor">Woodyatt, J.</span>, and <span class="refAuthor">Y. Lee</span>, <span class="refTitle">"Dual-Stack Lite Broadband Deployments Following IPv4 Exhaustion"</span>, <span class="seriesInfo">RFC 6333</span>, <span class="seriesInfo">DOI 10.17487/RFC6333</span>, <time datetime="2011-08" class="refDate">August 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6333">https://www.rfc-editor.org/info/rfc6333</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6890">[RFC6890]</dt>
      <dd>
<span class="refAuthor">Cotton, M.</span>, <span class="refAuthor">Vegoda, L.</span>, <span class="refAuthor">Bonica, R., Ed.</span>, and <span class="refAuthor">B. Haberman</span>, <span class="refTitle">"Special-Purpose IP Address Registries"</span>, <span class="seriesInfo">BCP 153</span>, <span class="seriesInfo">RFC 6890</span>, <span class="seriesInfo">DOI 10.17487/RFC6890</span>, <time datetime="2013-04" class="refDate">April 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6890">https://www.rfc-editor.org/info/rfc6890</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6951">[RFC6951]</dt>
      <dd>
<span class="refAuthor">Tuexen, M.</span> and <span class="refAuthor">R. Stewart</span>, <span class="refTitle">"UDP Encapsulation of Stream Control Transmission Protocol (SCTP) Packets for End-Host to End-Host Communication"</span>, <span class="seriesInfo">RFC 6951</span>, <span class="seriesInfo">DOI 10.17487/RFC6951</span>, <time datetime="2013-05" class="refDate">May 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6951">https://www.rfc-editor.org/info/rfc6951</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7857">[RFC7857]</dt>
      <dd>
<span class="refAuthor">Penno, R.</span>, <span class="refAuthor">Perreault, S.</span>, <span class="refAuthor">Boucadair, M., Ed.</span>, <span class="refAuthor">Sivakumar, S.</span>, and <span class="refAuthor">K. Naito</span>, <span class="refTitle">"Updates to Network Address Translation (NAT) Behavioral Requirements"</span>, <span class="seriesInfo">BCP 127</span>, <span class="seriesInfo">RFC 7857</span>, <span class="seriesInfo">DOI 10.17487/RFC7857</span>, <time datetime="2016-04" class="refDate">April 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7857">https://www.rfc-editor.org/info/rfc7857</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8900">[RFC8900]</dt>
    <dd>
<span class="refAuthor">Bonica, R.</span>, <span class="refAuthor">Baker, F.</span>, <span class="refAuthor">Huston, G.</span>, <span class="refAuthor">Hinden, R.</span>, <span class="refAuthor">Troan, O.</span>, and <span class="refAuthor">F. Gont</span>, <span class="refTitle">"IP Fragmentation Considered Fragile"</span>, <span class="seriesInfo">BCP 230</span>, <span class="seriesInfo">RFC 8900</span>, <span class="seriesInfo">DOI 10.17487/RFC8900</span>, <time datetime="2020-09" class="refDate">September 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8900">https://www.rfc-editor.org/info/rfc8900</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="appendix-A">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-A-1">
                The author wishes to thank
                <span class="contact-name">Michael Tuxen</span>
                ,
and
                <span class="contact-name">Magnus Westerlund</span>
                for their invaluable comments.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">
                In addition, the author wishes to thank
                , for their suggestions.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
<p id="appendix-A-3">
                The author also wishes to thank
                the authors of draft-ietf-tsvwg-natsupp-22
                which this document is based.<a href="#appendix-A-3" class="pilcrow">¶</a></p>
</section>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Claudio Porfiri</span></div>
<div dir="auto" class="left"><span class="org">Ericsson AB</span></div>
<div dir="auto" class="left"><span class="street-address">Torshamnsgatan 21</span></div>
<div dir="auto" class="left"><span class="locality">16440 Stockholm</span></div>
<div dir="auto" class="left"><span class="country-name">Sweden</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:claudio.porfiri@ericsson.com" class="email">claudio.porfiri@ericsson.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
