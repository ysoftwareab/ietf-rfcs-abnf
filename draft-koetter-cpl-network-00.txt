Internet Engineering Task Force
Internet Draft                                 Koetter
draft-koetter-cpl-network-00.txt 
February 17, 2002
Expires: August 16, 2002


                      CPL Extensions for Network Operators

1. STATUS OF THIS MEMO

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that 
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of 
   six months and may be updated, replaced, or obsoleted by other 
   documents at anytime.  It is inappropriate to use Internet-Drafts 
   as reference material or to cite them other than as "work in 
   progress".

   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt

   To view the list Internet-Draft Shadow Directories, see
   http://www.ietf.org/shadow.html.


2. Abstract

   The Call Processing Language (CPL) can be used to describe and 
   control Internet telephony services.  The original CPL 
   specification focuses on call handling on network servers.  The 
   extensions of CPL in this document are designed to add 
   capabilities to describe network-operator-related services.  These 
   services are essential for providing services on a network.  

   Further networks features have to be definded before network 
   operators have got a sufficient toolset.  Here two features will be 
   introduced.  These are televote and lawful interception.  


3.  Introduction

   The current CPL [1] specification focuses on the server side call 
   handling.  It does not support network-operator related services. 
   We can either create a new language or extend CPL to provide such 
   support.  Extending CPL is a better choice for two reasons.  First, 
   many existing CPL components can be re-used.  Second, the 
   network-operator features can influence call handling which has 
   been defined in the current CPL specification.


Koetter                              [Page 1]
 



Internet Draft             CPL-Network                  February 17, 2002



   The CPL extensions for network-operators are not tied to any 
   particular protocol.  

4. Conventions of This Document

   In this document, the key words "MUST", "MUST NOT", "REQUIRED",
   "SHALL", "SHALLNOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
   and "OPTIONAL" are to be interpreted as described in RFC 2119 [2] 
   and indicate requirement levels for compliant CPL implementations.

   In examples, non-XML strings such as -action1- and so forth, are 
   sometimes used.  These represent further parts of the script which 
   are not relevant to the example in question.


        Some paragraphs are indented, like this; they give
        motivations of design choices, or questions for future
        discussion in the development of the CPL extensions, and
        are not essential to the specification of the language.

5. Overview of the Extensions

   We define two kinds of extensions.  These are all sub-level actions.  
   The actions provide benefit for network operators.  The actions are 
   namely "televote" and "lawful interception".

   In the case the owner of an IP network can interconnect with other 
   networks as well as not doing so and offering gateways to traditional 
   telephony networks.  For these different infrastructures the network 
   provider needs tools in order to offer different services to 
   different users.

   Network operators need more features in order to offer telephony over 
   IP networks and being able to do billing, restrictions or new 
   services.  It should also be assured that the user MUST NOT be able 
   to overcome restrictions of the network operators.  

   Further features for network operators can be CLIP (Call 
   Line Identification Restriction) and CLIR (Call Line 
   Identification Presentation) as well as the limitation of 
   numbers and services.  Completely new services may also be 
   the authentification by password at the server when calling 
   or called, location based services, and message services to 
   other networks like SMS (short message service).

6. Namespace of CPL extensions for network-operators

   The namespace of the CPL extensions for network-operators 
   will be "http://www.rfc-editor.org/rfc/rfcxxxx.txt" and will 
   be declared as xmlns:network.  Figure 1 shows the example of 


Koetter                              [Page 2]
 



Internet Draft             CPL-Network                  February 17, 2002


   using namespace declaration of CPL extensions for network-
   operators.


7. New sub-level actions

   We still keep 'incoming' and 'outgoing' as the top-level 
   actions.  We create a new kind of actions named sub-level 
   actions to hold the CPL extensions.  The sub-level action 
   defines a lower-level tag of the top-level action.  We add 
   two sub-level actions for CPL extensions for network-
   operators.

   <?xml version="1.0" ?>
   <!DOCTYPE cpl PUBLIC "-//IETF//DTD RFCxxxx CPL 1.0//EN" "cpl.dtd">

   <cpl xmlns="http://www.ietf.org/rfc/rfcxxxx.txt"
        xmlns:network="http://www.ietf.org/rfc/rfcxxxx.txt">
     <incoming>
       <network:lawfulintercept
         method="ip"
         destination="100.101.102.103">
       </network:lawfulintercept>
     </incoming>
   </cpl>

   Figure 1: Namespace declaration of CPL extensions for 
   network-operators 



          Tag:  cpl
   Parameters:  None

     Sub-tags:  ancillary  See CPL Section 10
                subaction  See CPL Section 9

                network:lawfulintercept    sub level action for lawful 
                                           call interception.
                network:televote           sub level action for televote

                outgoing   Top-level actions to take on outgoing calls
                incoming   Top-level actions to take on incoming calls

   Figure 2: Syntax of the extended CPL node


8. New network operator features

   Here only two new features are introduces.  As mentioned for a 
   complete network tool set more features are needed.  They should be 
   defined in later version of this

Koetter                              [Page 3]
 



Internet Draft             CPL-Network                  February 17, 2002


8.1 Lawful interception

   The feature network:lawfulintercept, the action performed when the 
   network operator wants to intercept the conversation.  The operator 
   may define how he wants the interception to happen and what device 
   will be used.  

            Node:  lawfulintercept
         Outputs:  None
      Parameters:  method              method to intercept the call
                   destination         address of intercepting device

   Figure 3: Syntax of lawful interception node


8.2    Syntax of the extended CPL node Televote

   The second subaction is network:televote, the action performed when a 
   network operator wants to do a televoting.  Televoting contains a 
   number of parameters that specify the usage.  In the CPL engine the 
   televote action should be realised with as little use of resources as 
   possible.  Televoting processes in traditional telephony may cause an 
   avalanche of calls in a short period of time.  The CPL server should 
   be enabled to be able to cope with those.  The network:televote 
   subaction has got the parameter endmode that specifies when the 
   current cpl script should be read again.  

            Node:  televote 
         Outputs:  None
      Parameters:  starttime           start time of televote process
                   stoptime            stop time of televote process 
                   duration            duration of televote process
                   endmode             defines the end mode 
                   mode                defines the selection mode
                   n                   defines probability or nth
                   submissionmode      defines mode of submission
                   submissionaddress   address for result submission
                   winnermode          direction mode for successful
                   winneraddress       address if successful

   Figure 4: Syntax of the televote node


9. Examples

   The examples should show how the features could be used. 

9.1 Lawful interception

   The script in Figure 5 is a script that provides a lawful call 
   interception for all incoming calls.  


Koetter                              [Page 4]
 



Internet Draft             CPL-Network                  February 17, 2002


   <?xml version="1.0" ?>
   <!DOCTYPE cpl PUBLIC "-//IETF//DTD RFCxxxx CPL 1.0//EN" "cpl.dtd">

   <cpl xmlns="http://www.ietf.org/rfc/rfcxxxx.txt"
        xmlns:network="http://www.ietf.org/rfc/rfcxxxx.txt">
       <incoming>
         <network:lawfulintercept> 
            method="IP" 
            destination= "129.130.131.132">
            <action1>

            </action1>
         <network:lawfulintercept>
       </incoming>
   </cpl>

   Figure 5: Example script: Lawful interception


9.2 Televote

   The script in Figure 6 is a script that does a televoting 
   session.  The session starts on the 31st of October 2002 at 13:30 and 
   has the duration of one hour.  The calls should be counted and the 
   1000th caller will be redirected to sip:winnerphone@destination.com.  
   The result of televote will be submitted by electronic mail to 
   customer@destinastion.com.  The result should contain at least the 
   number of incoming calls but could include more depending on CPL 
   engine realisation.


   <?xml version="1.0" ?>
   <!DOCTYPE cpl PUBLIC "-//IETF//DTD RFCxxxx CPL 1.0//EN" "cpl.dtd">

   <cpl xmlns="http://www.ietf.org/rfc/rfcxxxx.txt"
        xmlns:network="http://www.ietf.org/rfc/rfcxxxx.txt">
     <incoming>
       <network:televote
         starttime="20021031T133000"
         endmode="duration"
         duration="P1H"
         mode="random"
         n="1000"
         submissionmode="mail"
         submissionaddress="mail:customer@destinastion.com"
         winnermode="redirect"
         winneraddress="sip:winnerphone@destination.com"/>
     </incoming>
   </cpl>

   Figure 6: Example script: Televote


Koetter                              [Page 5]
 



Internet Draft             CPL-Network                  February 17, 2002


10. The XML DTD of the CPL extensions for network oprators

   The XML DTD of the CPL extensions for network-operators follows the 
   XML DTD of CPL with some modifications on the sub-level actions.

   We avoid repeating the parts that are the same as those in XML DTD
   for CPL in this document.  Only the new added definitions are listed 
   here.

      <!--  intercepts the incoming or outgoing calls  -->
      <!ELEMENT lawfulintercept ( %Node; )  >
      <!ATTLIST lawfulintercept
         method        CDATA   #REQUIRED
         destination   CDATA   #REQUIRED
      >

   Figure 7: DTD lawful interception


      <!--  televoting for incoming calls  -->
      <!ELEMENT televote >
      <!ATTLIST televote 
       mode              CDATA   #REQUIRED (count|selectnth|random)
       endmode           CDATA   #REQUIRED (timeout|duration|refresh)
       submissionmode    CDATA   #REQUIRED 
       submissionaddress CDATA   #REQUIRED
       starttime         CDATA   #REQUIRED
       winnermode        CDATA   #REQUIRED (sipdefault|redirect)
       winneraddress     CDATA   #REQUIRED
       stoptime          CDATA   #IMPLIED
       duration          CDATA   #IMPLIED
       n                 CDATA   #IMPLIED  "-1"
      >

   Figure 8: DTD televote

11. ESSENTIAL REMARK FOR FURTHER USE

   This paper was written during in the circumstances of a final degree 
   thesis at the University of Stuttgart in the IND. It means that I 
   will most probably not be working on this subject in the future. Due 
   to this the paper is open for modifications. If changed please submit
   one copy to my mentioned email address. 
   If parts of this document are kept in further versions please keep 
   the names in the authors list.

   An implementation of the features televote and lawful interception 
   does exist at 
   Siemens AG, ICN WN CC NA A 19, Hofmannstr. 51, 81559 Munich, Germany.


Koetter                              [Page 6]
 



Internet Draft             CPL-Network                  February 17, 2002

12. Authors' Addresses

   Stephan Koetter
   electronic mail: stephan.koetter@web.de

13. Bibliography

   [1] J.  Lennox and H.  Schulzrinne, "CPL: a language for user control
   of internet telephony services," Internet Draft, Internet Engineering
   Task Force, July 2000.  Work in progress.

   [2] S.  Bradner, "Key words for use in RFCs to indicate requirement
   levels," Request for Comments 2119, Internet Engineering Task Force,
   Mar.  1997.

   [3] M.  Handley, H.  Schulzrinne, E.  Schooler, and J.  Rosenberg, 
   "SIP: session initiation protocol," Request for Comments 2543, 
   Internet Engineering Task Force, Mar.  1999.

   [4] R.  Sparks, "SIP call control," Internet Draft, Internet
   Engineering Task Force, Feb.  2001.  Work in progress.


   Full Copyright Statement

   Copyright (c) The Internet Society (2001).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.



Koetter                              [Page 7]
 





Internet Draft             CPL-Network                  February 17, 2002


                           Table of Contents
    
   1.    STATUS OF THIS MEMO                                           1
   2.    ABSTRACT                                                      1
   3.    INTRODUCTION                                                  1
   4.    CONVENTIONS OF THIS DOCUMENT                                  2
   5.    OVERVIEW OF THE EXTENSIONS                                    2
   6.    NAMESPACE OF CPL EXTENSIONS FOR NETWORK-OPERATORS             2
   7.    NEW SUB-LEVEL ACTIONS                                         3
   8.    NEW NETWORK OPERATOR FEATURES                                 3
   8.1   LAWFUL INTERCEPTION                                           4
   8.2   SYNTAX OF THE EXTENDED CPL NODE TELEVOTE                      4
   9.    EXAMPLES                                                      4
   9.1   LAWFUL INTERCEPTION                                           4
   9.2   TELEVOTE                                                      5
   10.   THE XML DTD OF THE CPL EXTENSIONS FOR NETWORK OPRATORS        6
   11.   ESSENTIAL REMARK FOR FURTHER USE                              6
   12.   AUTHORS' ADDRESSES                                            7
   13.   BIBLIOGRAPHY                                                  7



Koetter                              [Page 8]
