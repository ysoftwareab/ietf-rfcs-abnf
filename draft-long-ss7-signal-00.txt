Internet Engineering Task Force                                     
INTERNET-DRAFT                                              Authors
Transport Working Group                                 J. Matousek
Category: Informational                                      L. Ong
June 1998                                              Bay Networks
Expires: January 1999                                               

           Bay Networks SS7-Internet Access Signaling Protocol
                    <draft-long-ss7-signal-00.txt>


Status of this Memo

This document is an Internet-Draft.  Internet-Drafts are working 
documents of the Internet Engineering Task Force (IETF), its areas, 
and its working groups.  Note that other groups may also distribute 
working documents as Internet-Drafts.

Internet-Drafts are draft documents valid for a maximum of six 
months and may be updated, replaced, or obsoleted by other 
documents 
at any time.  It is inappropriate to use Internet-Drafts as 
reference material or to cite them other than as ``work in 
progress.''

To view the entire list of current Internet-Drafts, please check
the "1id-abstracts.txt" listing contained in the Internet-Drafts
Shadow Directories on ftp.is.co.za (Africa), ftp.nordu.net
(Northern Europe), ftp.nis.garr.it (Southern Europe), munnari.oz.au
(Pacific Rim), ftp.ietf.org (US East Coast), or ftp.isi.edu
(US West Coast).

Distribution of this document is unlimited.




Abstract

This memo describes the Bay Networks SS7 Access Signaling Protocol 
(ASP).  This protocol is used between an SS7-Internet Gateway and a 
Remote Access Server/Network Access Server (NAS).  The protocol 
supports call setup and termination by both Gateway and Access 
Server, and includes circuit management functions such as circuit 
blocking and procedures for registration of the Access Server.










Matousek, et al           Informational                   [Page 1]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt         June 1998


Table of Contents

1. Introduction.................................................2
2. References...................................................2
3. Basic Principles.............................................3
4. Layer 3 Protocol Messages....................................5
5. Call Establishment Messages..................................8
6. Call Clearing Messages......................................10 
7. Miscellaneous Q.931 Control Messages........................12
8. Q.931 Messages with Global Call Reference...................12
9. Maintenance Messages........................................14
10.Information Elements........................................20
11.Example Message Sequences...................................36
12.Error Handling..............................................42
13.Timers......................................................42
14.State Diagrams..............................................42
15.Acknowledgements............................................42
16.Contact Information.........................................42


1. Introduction

This document specifies a protocol that is used between an SS7-
Internet Gateway device and a NAS in the Bay Networks' SS7-Internet 
Gateway Architecture.  The Gateway terminates standard Signaling 
System 7 (SS7) protocol from a PSTN switch or Signal Transfer Point 
(STP), and uses the Access Signaling Protocol (ASP) to communicate 
with the NAS.  


2. References

[1] ITU-T Recommendation Q.931 (1993), ISDN user-network interface 
layer 3 specification for basic control

[2] ITU-T Recommendation Q.932 (1993), Generic procedures for the 
control of ISDN supplementary services.

[3] Ulysses Black: ISDN and SS7 (Architecture for Digital Signaling 
Networks)

[4] ITU-T Recommendation H.225.0 Media stream packetization and 
synchronization on non-guaranteed quality of service LANs.

[5] ANSI T1.609-1990: Interworking between the ISDN User-Network 
Interface Protocol and the SS7 ISUP

[6] CCITT Recommendation Q.699: Interworking between Digital 
Subscriber Signaling System No. 1 and Signaling System No. 7

[7] TR 41459: ATT Network ISDN Primary Rate Interface 

Matousek, et al           Informational                   [Page 2]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt         June 1998


3. Basic Principles

The following diagram shows the use of the SS7 Gateway and the ASP 
for interworking of SS7 and Internet.

         ........................      ......                        
         .                      .      .          
         .             +------+ .      .   +-------+
         .    SS7      |    / | .  SS7 .   |  SS7  |    
         .    Network  | STP  |------------|Gateway|
         .            /| /    | .      .   +-------+     
         .           / +------+ .      .       | 
         .........../.../........      .       | 
                   /   /               .      A|           I  
       __________ /   / A-link         .      S|           n         
      /              /                 .      P|           t
     /              /                  .       |           e
 +------+     +------+                 .     +-----+       r   
 | PSTN |     | PSTN |-----TDM---------------| NAS |-------n  
 | SCP  |     |Switch|-----------------------|     |Data   e
 +------+     +------+   Circuits      .     +-----+       t
                                       .            
                                       .      

       Figure 2: SS7-Internet Interworking for Call Setup

The transport of ASP between the Gateway and the NAS uses IP.  The 
messaging defined in this document assumes reliable message 
delivery between the Gateway and the NAS.

The ASP is modeled on the Digital Subscriber Signaling system 1 
(DSS1) protocol that is defined in ITU-T specification Q.931, with 
extensions to support additional functions required for the Gateway 
interface.  

- Q.931 is well understood and widely used
- the mapping from SS7 ISUP to Q.931 is documented in standards
- this allows easier standardization for interoperability

The protocol is extended using the Protocol Discriminator function 
in Q.931 to define new messages and information elements, and can 
be further extended using the same mechanism.

Some functions of Q.931, such as the overlap addressing function, 
are not supported.

The ASP supports several maintenance procedures defined in SS7, 
including:

- busying of trunks and channels
- graceful and abrupt shutdown of trunks

Matousek, et al           Informational                   [Page 3]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt         June 1998

- execution of circuit continuity check requested by either the 
far-end switch or the SS7 gateway, during call establishment and 
due to operator request.  
(NOTE: In the case where an incoming IAM indicates continuity check 
required on a previous circuit, i.e., previous hop, the SS7 Gateway 
will delay the SETUP message to the NAS until it receives the COT 
indicating continuity check successful.)

3.1  Mapping of the Circuit Identification Code (CIC)

The Access Server will be configured to identify each interface by 
a number, typically in the range 1-n where n is the number of 
interfaces supported by the Access Server.  The Access Server 

registers with the Gateway, specifying the number of interfaces it 
supports, and the Gateway uses internal configuration tables to 
allow it to translate an interface number specified within the ASP 
protocol into a Circuit Identification Code (CIC) as defined in 
SS7.  

For calls initiated by the NAS, the Gateway is responsible for 
channel selection.  If a Circuit Reservation Message (CRM) is 
received from the SS7 network reserving a specific circuit, the 
Gateway will generate the Circuit Reservation Acknowledgement (CRA) 
and mark that circuit reserved so that it is not selected for 
outgoing calls until released by the SS7 network.

3.2  Security

The SS7 gateway acts as a fire-wall between the SS7 networks and 
the IP signaling network. Access Servers on the IP signaling 
network do not have direct access to the SS7 network - the gateway 
must proxy for all the required functionality. 

Both incoming and outgoing calls (from the NAS perspective) will be 
supported by the protocol. However, configuration option in the 
gateway and in the NAS must be provided, which will allow the 
system administrator to inhibit the placement of outgoing calls 
(from the NAS into the PSTN network). 

It is also assumed that the IP signaling network will be physically 
separate from the NAS user traffic. The NAS needs to support two 
Ethernet interfaces and must ensure that the IP traffic from the 
user traffic Ethernet cannot be forwarded to the IP signaling 
traffic Ethernet and vice versa.


3.3 Redundancy

The SS7 Gateway will be implemented either using high availability 
fault tolerant hardware or using standby fully redundant gateways.  
In the case of hot standby gateways, the gateways must continuously 

Matousek, et al           Informational                   [Page 4]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt         June 1998

synchronize their internal states on a call by call basis.  The 
NAS, during the registration process, provides information that 
allows the current active gateway to consolidate its internal 
states.


4. Layer 3 Protocol Messages

With reference to the Q.931 specification, the SS7 Gateway will 
implement the network side and the NAS will implement the user side 
of the Q.931 protocol. This document specifies when specific 
messages are used in one direction only, or both directions and 
when specific information elements are used. Only the Q.931 
information elements which are applicable to PRI (not BRI), have 
been specified. Information elements specific to ASP have also been 
defined.

The following notation has been used in the tables below:
- Mandatory: the message must be supported by both the gateway and 
the NAS
- Optional: the message must be supported by both gateway and NAS, 
but the protocol allows that the message not be sent during 
particular protocol exchange
- Not supported: neither the gateway nor the NAS will support the 
message.

The following table shows the Q.931 connection control Call 
Establishment messages and indicates whether ASP supports them.

+---------------------+--------------------+---------+---------+
|                     |  Support by the    |  Q.931  | Section |
|                     |  Gateway and NAS   |  Ref.   |         |
+---------------------+--------------------+---------+---------+
| ALERTING            |  Not supported (1) |  3.1.1  |   N/A   |
+---------------------+--------------------+---------+---------+
| CALL PROCEEDING     |  Not supported     |  3.1.2  |   N/A   |
+---------------------+--------------------+---------+---------+
| CONNECT             |  Mandatory         |  3.1.3  |   3.1   |
+---------------------+--------------------+---------+---------+
| CONNECT ACKNOWLEDGE |  Not supported     |  3.1.4  |   N/A   |
+---------------------+--------------------+---------+---------+
| PROGRESS            |  Not supported     |  3.1.8  |   N/A   |
+---------------------+--------------------+---------+---------+
| SETUP               |  Mandatory         |  3.1.14 |   3.2   |
+---------------------+--------------------+---------+---------+
| SETUP   ACKNOWLEDGE |  Not supported     |  3.1.15 |   N/A   |
+---------------------+--------------------+---------+---------+

Note: (1) It is superfluous because it is assumed that the gateway 
automatically generates ACM in response to IAM and at the same time 
forwards SETUP to the NAS. It then only needs CONNECT from the NAS 
to generate ANM to the SS7 network.


Matousek, et al           Informational                  [Page  5]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


The following table shows the Q.931 Call information phase messages 
and indicates whether ASP supports them.

+---------------------+--------------------+---------+---------+
|                     |  Support by the    |  Q.931  | Section |
|                     |  Gateway and NAS   |  Ref    |         |
+---------------------+--------------------+---------+---------+
| RESUME              |  Not supported     |  3.1.11 |   N/A   |
+---------------------+--------------------+---------+---------+
| RESUME ACKNOWLEDGE  |  Not supported     |  3.1.12 |   N/A   |
+---------------------+--------------------+---------+---------+
| RESUME REJECT       |  Not supported     |  3.1.13 |   N/A   |
+---------------------+--------------------+---------+---------+
| SUSPEND             |  Not supported     |  3.1.18 |   N/A   |
+---------------------+--------------------+---------+---------+
| SUSPEND ACKNOWLEDGE |  Not supported     |  3.1.19 |   N/A   |
+---------------------+--------------------+---------+---------+
| SUSPEND REJECT      |  Not supported     |  3.1.20 |   N/A   |
+---------------------+--------------------+---------+---------+


The following table shows the Q.931 Call Clearing messages and 
indicates whether ASP supports them.

+---------------------+--------------------+---------+---------+
|                     |  Support by the    |  Q.931  | Section |
|                     |  Gateway and NAS   |  Ref    |         |
+---------------------+--------------------+---------+---------+
| DISCONNECT (Note 1) |  Optional          |  3.1.5  |   6.1   |
+---------------------+--------------------+---------+---------+
| RELEASE             |  Mandatory         |  3.1.9  |   6.2   |
+---------------------+--------------------+---------+---------+
| RELEASE COMPLETE    |  Mandatory         |  3.1.10 |   6.2   |
+---------------------+--------------------+---------+---------+

Note:  1. Both the NAS and the gateway should allow the other side 
to start the call clearing sequence by using the RELEASE message, 
and respond with RELEASE COMPLETE. 














Matousek, et al           Informational                  [Page  6]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


The following table shows Miscellaneous Q.931 Connection control 
messages and indicates whether ASP supports them.

+---------------------+--------------------+---------+---------+
|                     |  Support by the    |  Q.931  | Section |
|                     |  Gateway and NAS   |  Ref    |         |
+---------------------+--------------------+---------+---------+
| INFORMATION         |  Not supported     |  3.1.6  |   N/A   |
+---------------------+--------------------+---------+---------+
| NOTIFY              |  Not supported     |  3.1.7  |   N/A   |
+---------------------+--------------------+---------+---------+
| STATUS              |  Mandatory         |  3.1.16 |   7.1   |
+---------------------+--------------------+---------+---------+
| STATUS INQUIRY      |  Mandatory         |  3.1.17 |   7.2   |
+---------------------+--------------------+---------+---------+


The following table shows the Q.931 messages with global call 
reference and indicate whether ASP supports them

+---------------------+--------------------+---------+---------+
|                     |  Support by the    |  Q.931  | Section |
|                     |  Gateway and NAS   |  Ref    |         |
+---------------------+--------------------+---------+---------+
| RESTART             |  Mandatory         |  3.4.1  |   8.1   |
+---------------------+--------------------+---------+---------+
| RESTART ACKNOWLEDGE |  Mandatory         |  3.4.2  |   8.2   |
+---------------------+--------------------+---------+---------+
| STATUS              |  Mandatory         |  3.4.3  |   8.3   |
+---------------------+--------------------+---------+---------+




The following messages are extensions to the standard Q.931 message 
set. They are sent with a different protocol discriminator (see 
8.1). They are used to by the NAS to register its capability, its 
interfaces and the state of each channel after an IP connection 
between the NAS and the gateway is established. They are also used 
by the NAS to report on state changes to an interface or a channel, 
or by the gateway to request a state change of an interface or a 
channel.










Matousek, et al           Informational                  [Page  7]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


+---------------------+--------------------+---------+---------+
|                     |  Support by the    |  Q.931  | Section |
|                     |  Gateway and NAS   |  Ref    |         |
+---------------------+--------------------+---------+---------+
| NAS STATUS          |  Mandatory         |  N/A    |   9.1   |
+---------------------+--------------------+---------+---------+
| NAS STATUS ACK      |  Mandatory         |  N/A    |   9.2   |
+---------------------+--------------------+---------+---------+
| INTERFACE STATUS    |  Mandatory         |  N/A    |   9.3   |
+---------------------+--------------------+---------+---------+
| INTERFACE STATUS ACK|  Mandatory         |  N/A    |   9.4   |
+---------------------+--------------------+---------+---------+
| RESOURCE UPDATE     |  Mandatory         |  N/A    |   9.5   |
+---------------------+--------------------+---------+---------+
| RESOURCE UPDATE ACK |  Mandatory         |  N/A    |   9.6   |
+---------------------+--------------------+---------+---------+
| SERVICE             |  Mandatory         |  N/A    |   9.7   |
+---------------------+--------------------+---------+---------+
| SERVICE ACK         |  Mandatory         |  N/A    |   9.8   |
+---------------------+--------------------+---------+---------+
| CONT CHECK RESULT   |  Mandatory         |  N/A    |   9.9   |
+---------------------+--------------------+---------+---------+


5. Call Establishment Messages

The following messages are used to establish a call.

5.1 CONNECT

This message is sent by the gateway to the NAS and by the NAS to 
the gateway, in response to SETUP to indicate the acceptance of the 
call.
   +-----------------+----------+--------+-------+--------+
   | Information     |  Refer-  |  Type  | Direc | Length |
   | element         |  ence    |        | tion  |        |
   +-----------------+----------+--------+-------+--------+
   | Protocol        |  10.1    |   M    | both  |   1    |
   | discriminator   |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Call Reference  |  10.2    |   M    | both  |   3    |
   +-----------------+----------+--------+-------+--------+
   | Message type    |  10.3    |   M    | both  |   1    |
   +-----------------+----------+--------+-------+--------+
   | Channel ID      |  10.6    |   M    | both  |   2-*  |
   +-----------------+----------+--------+-------+--------+






Matousek, et al           Informational                  [Page  8]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


3.2 SETUP

This message is sent by the gateway to the NAS and by the NAS to 
the gateway to initiate a call.
   +-----------------+----------+--------+-------+--------+
   | Information     |  Ref.    |  Type  | Direc | Length |
   | element         |          |        | tion  |        |
   +-----------------+----------+--------+-------+--------+
   | Protocol        |  10.1    |   M    | both  |   1    |
   | discriminator   |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Call Reference  |  10.2    |   M    | both  |   3    |
   +-----------------+----------+--------+-------+--------+
   | Message type    |  10.3    |   M    | both  |   1    |
   +-----------------+----------+--------+-------+--------+
   | Bearer          |  10.7    |   M    | both  | 4-12   |
   | Capability      |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Channel ID      |  10.6    |   O    | both  |   3-*  |
   |                 |          |(note 1)|       |        |
   +-----------------+----------+--------+-------+--------+
   | Calling party   |  10.8    |   O    | both  |   2-*  |
   | number          |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Calling party   |  10.9    |   O    | both  |   2-23 |
   | subaddress      |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Called party    |  10.10   |   M    | both  |   2-*  |
   | number          |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Called party    |  10.11   |   O    | both  |   2-23 |
   | subaddress      |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Transit network |  10.12   |   O    | NAS-> |   2-*  |
   | selection       |          |(note 3)| G/W   |        |
   +-----------------+----------+--------+-------+--------+
   | Low layer       |  10.13   |   O    | both  |   2-18 |
   | compatibility   |          |(note 4)|       |        |
   +-----------------+----------+--------+-------+--------+
   | Shift to        |  10.4    |   O    | G/W-> |   2-*  |
   | codeset 7       |          |(note 2)| NAS   |        |
   +-----------------+----------+--------+-------+--------+
   | Original dialed |  10.18   |   O    | G/W-> |   2-*  |
   | number          |          |(note 2)| NAS   |        |
   +-----------------+----------+--------+-------+--------+

NOTES

1) Mandatory in the gateway-NAS direction. Not included in the NAS 
to gateway direction - the gateway will select a specific 
channel and indicate that in the CONNECT message.

Matousek, et al           Informational                  [Page  9]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


2) Including by the gateway if this information was provided in the 
IAM message, if number translation occurred due to Local Number 
Portability requirements.

3) Included by the NAS to select a particular transit network (see 
Annex C of Q.931). This Information Element will not be used in 
the first release.

4) Included in the NAS to gateway direction when the NAS wants to 
pass low layer compatibility information to the called user. 
Included in the gateway to NAS direction if the calling user 
included a Low layer compatibility information element in the 
SETUP message


6. Call Clearing Messages

The following messages are used to tear down calls either in the 
process of being established or already established.

6.1 DISCONNECT

The NAS or the gateway sends this message to indicate that the 
equipment sending the message (the gateway or the NAS) wishes to 
disconnect a particular call.
   +-----------------+----------+--------+-------+--------+
   | Information     |  Refer-  |  Type  | Direc | Length |
   | element         |  ence    |        | tion  |        |
   +-----------------+----------+--------+-------+--------+
   | Protocol        |  10.1    |   M    | both  |   1    |
   | discriminator   |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Call Reference  |  10.2    |   M    | both  |   3    |
   +-----------------+----------+--------+-------+--------+
   | Message type    |  10.3    |   M    | both  |   1    |
   +-----------------+----------+--------+-------+--------+
   | Cause           |  10.14   |   M    | both  |  2-32  |
   +-----------------+----------+--------+-------+--------+














Matousek, et al           Informational                  [Page  10]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


6.2 RELEASE

The NAS or the gateway sends this message to indicate the receipt 
of the DISCONNECT, has disconnected the channel (if any) and 
intends to release the call reference when it receives RELEASE 
COMPLETE.

   +-----------------+----------+--------+-------+--------+
   | Information     |  Refer-  |  Type  | Direc | Length |
   | element         |  ence    |        | tion  |        |
   +-----------------+----------+--------+-------+--------+
   | Protocol        |  10.1    |   M    | both  |   1    |
   | discriminator   |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Call Reference  |  10.2    |   M    | both  |   3    |
   +-----------------+----------+--------+-------+--------+
   | Message type    |  10.3    |   M    | both  |   1    |
   +-----------------+----------+--------+-------+--------+
   | Cause           |  10.14   |   O    | both  |  2-32  |
   |                 |          |(note 1)|       |        |
   +-----------------+----------+--------+-------+--------+

Note 1: Mandatory if this is the first message when call clearing. 

6.3 RELEASE COMPLETE

The NAS or the gateway sends this message to indicate that the 
equipment sending the message (the gateway or the NAS) has released 
the channel (if any) and call reference. The channel becomes 
available for reuse and the receiving equipment shall release the 
reference number.
   +-----------------+----------+--------+-------+--------+
   | Information     |  Refer-  |  Type  | Direc | Length |
   | element         |  ence    |        | tion  |        |
   +-----------------+----------+--------+-------+--------+
   | Protocol        |  10.1    |   M    | both  |   1    |
   | discriminator   |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Call Reference  |  10.2    |   M    | both  |   3    |
   +-----------------+----------+--------+-------+--------+
   | Message type    |  10.3    |   M    | both  |   1    |
   +-----------------+----------+--------+-------+--------+
   | Cause           |  10.14   |   O    | both  |  2-32  |
   |                 |          |(note 1)|       |        |
   +-----------------+----------+--------+-------+--------+

Note 1: Mandatory if this is the first message when call clearing. 





Matousek, et al           Informational                  [Page  11]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


7. Miscellaneous Q.931 Connection Control Messages

7.1 STATUS

The gateway or the NAS sends this message in response to the STATUS 
ENQUIRY. This message is sent with the Call Reference specific to 
the call.
   +-----------------+----------+--------+-------+--------+
   | Information     |  Refer-  |  Type  | Direc | Length |
   | element         |  ence    |        | tion  |        |
   +-----------------+----------+--------+-------+--------+
   | Protocol        |  10.1    |   M    | both  |   1    |
   | discriminator   |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Call Reference  |  10.2    |   M    | both  |   3    |
   +-----------------+----------+--------+-------+--------+
   | Message type    |  10.3    |   M    | both  |   1    |
   +-----------------+----------+--------+-------+--------+
   | Cause           |  10.14   |   M    | both  |  4-32  |
   +-----------------+----------+--------+-------+--------+
   | Call state      |  10.15   |   M    | both  |   3    |
   +-----------------+----------+--------+-------+--------+


7.2 STATUS ENQUIRY

In order to determine the state of a specific call the STATUS 
ENQUIRY message may be sent at any time. It will solicit a STATUS 
message from the peer. It is mandatory to respond to STATUS 
ENQUIRY with STATUS.  This message is sent with the Call Reference 
specific to the call.
   +-----------------+----------+--------+-------+--------+
   | Information     |  Refer-  |  Type  | Direc | Length |
   | element         |  ence    |        | tion  |        |
   +-----------------+----------+--------+-------+--------+
   | Protocol        |  10.1    |   M    | both  |   1    |
   | discriminator   |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Call Reference  |  10.2    |   M    | both  |   3    |
   +-----------------+----------+--------+-------+--------+
   | Message type    |  10.3    |   M    | both  |   1    |
   +-----------------+----------+--------+-------+--------+
 
8. Q.931 Messages with Global Call Reference

The following messages with global call reference will be 
supported.

8.1 RESTART

This message is sent by the NAS or by the gateway to request the 

Matousek, et al           Informational                  [Page 12]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


recipient to restart (i.e. return to an idle condition) the 
indicated channel(s) or interface. Any calls established on this 
channel or interface will be disconnected.

   +-------------------+----------+--------+-------+--------+
   | Information       |  Refer-  |  Type  | Direc | Length |
   | element           |  ence    |        | tion  |        |
   +-------------------+----------+--------+-------+--------+
   | Protocol          |  10.1    |   M    | both  |   1    |
   | discriminator     |          |        |       |        |
   +-------------------+----------+--------+-------+--------+
   | Call Reference    |  10.2    |   M    | both  |   3    |
   +-------------------+----------+--------+-------+--------+
   | Message type      |  10.3    |   M    | both  |   1    |
   +-------------------+----------+--------+-------+--------+
   | Channel ID        |  10.6    |   M    | both  |  2-*   |
   +-------------------+----------+--------+-------+--------+
   | Restart Indicator |  10.16   |   M    | both  |   3    |
   +-------------------+----------+--------+-------+--------+


8.2 RESTART ACKNOWLEDGE

This message is sent to acknowledge the receipt of the RESTART 
message and to indicate that the requested restart is complete. 

   +-------------------+----------+--------+-------+--------+
   | Information       |  Refer-  |  Type  | Direc | Length |
   | element           |  ence    |        | tion  |        |
   +-------------------+----------+--------+-------+--------+
   | Protocol          |  10.1    |   M    | both  |   1    |
   | discriminator     |          |        |       |        |
   +-------------------+----------+--------+-------+--------+
   | Call Reference    |  10.2    |   M    | both  |   3    |
   +-------------------+----------+--------+-------+--------+
   | Message type      |  10.3    |   M    | both  |   1    |
   +-------------------+----------+--------+-------+--------+
   | Channel ID        |  10.6    |   M    | both  |  2-*   |
   +-------------------+----------+--------+-------+--------+
   | Restart Indicator |  10.16   |   M    | both  |   3    |
   +-------------------+----------+--------+-------+--------+











Matousek, et al           Informational                  [Page 13]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


8.3 STATUS

The NAS or the gateway sends this message at any time to
report certain error conditions listed in 10.14. In particular, 
this message will be sent if the NAS or the gateway receives an
incorrectly formatted message, or a message which is not permitted 
in a given state.

   +-----------------+----------+--------+-------+--------+
   | Information     |  Refer-  |  Type  | Direc | Length |
   | element         |  ence    |        | tion  |        |
   +-----------------+----------+--------+-------+--------+
   | Protocol        |  10.1    |   M    | both  |   1    |
   | discriminator   |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Call Reference  |  10.2    |   M    | both  |   3    |
   +-----------------+----------+--------+-------+--------+
   | Message type    |  10.3    |   M    | both  |   1    |
   +-----------------+----------+--------+-------+--------+
   | Cause           |  10.14   |   M    | both  |  4-32  |
   +-----------------+----------+--------+-------+--------+
   | Call state      |  10.15   |   M    | both  |   3    |
   +-----------------+----------+--------+-------+--------+


9. Maintenance Messages

The following messages were defined as an extension to the standard 
Q.931 based messages. The protocol discriminator is used to 
distinguish them from the standard set.





















Matousek, et al           Informational                  [Page 14]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998

9.1 NAS STATUS

This message is sent by the NAS to register the fact that it is 
operational and whether it is coming out of a cold or warm start. 
It can also be used to indicate by the NAS that it wishes to close 
the connection with the gateway. 
The message will be sent using non-global Call Reference.

   +-------------------+----------+--------+-------+--------+
   | Information       |  Refer-  |  Type  | Direc | Length |
   | element           |  ence    |        | tion  |        |
   +-------------------+----------+--------+-------+--------+
   | Protocol          |  10.1    |   M    | NAS-> |   1    |
   | discriminator     |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+
   | Call Reference    |  10.2    |   M    | NAS-> |   3    |
   |                   |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+
   | Message type      |  10.3    |   M    | NAS-> |   1    |
   |                   |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+
   | Shift to Codeset 7|  10.4    |   M    | NAS-> |   1    |
   |                   |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+
   | NAS status info   |  10.19   |   M    | NAS-> |   3    |
   |                   |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+

9.2 NAS STATUS ACK

This message is sent by the gateway to NAS in response to NAS 
STATUS. It will also indicate whether the gateway will allow the 
NAS to receive only or also generate calls using the Cause 
Information Element.

This message will be sent using non-global Call Reference.

   +-----------------+----------+--------+-------+--------+
   | Information     |  Refer-  |  Type  | Direc | Length |
   | element         |  ence    |        | tion  |        |
   +-----------------+----------+--------+-------+--------+
   | Protocol        |  10.1    |   M    | G/W-> |   1    |
   | discriminator   |          |        | NAS   |        |
   +-----------------+----------+--------+-------+--------+
   | Call Reference  |  10.2    |   M    | G/W-> |   3    |
   |                 |          |        | NAS   |        |
   +-----------------+----------+--------+-------+--------+
   | Message type    |  10.3    |   M    | G/W-> |   1    |
   |                 |          |        | NAS   |        |
   +-----------------+----------+--------+-------+--------+
   | Cause           |  10.14   |   M    | G/W-> |  2-32  |
   |                 |          |        | NAS   |        |
   +-----------------+----------+--------+-------+--------+

Matousek, et al           Informational                  [Page 15]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


9.3 INTERFACE STATUS

This message is sent by the NAS to the gateway to register the 
available interfaces and to indicate the status of each channel on 
that interface. Changes in the state of any interface or any 
channel must be reported to the gateway using the SERVICE message. 
Also, any call tear-down originated by NAS must be reported to the 
gateway.  

The gateway must process and respond to the INTERFACE STATUS 
message before requesting any interface or channel state changes 
using the SERVICE message. Once it responds to the INTERFACE STATUS 
message, the gateway can also start originating and terminating 
calls.  

This message will use non-global Call Reference.

   +-------------------+----------+--------+-------+--------+
   | Information       |  Refer-  |  Type  | Direc | Length |
   | element           |  ence    |        | tion  |        |
   +-------------------+----------+--------+-------+--------+
   | Protocol          |  10.1    |   M    | NAS-> |   1    |
   | discriminator     |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+
   | Call Reference    |  10.2    |   M    | NAS-> |   3    |
   |                   |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+
   | Message type      |  10.3    |   M    | NAS-> |   1    |
   |                   |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+
   | Shift to Codeset 7|  10.4    |   M    | NAS-> |   1    |
   |                   |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+
   | Interface status  |  10.21   |   M    | NAS-> |  17-21 |
   | info              |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+

9.4 INTERFACE STATUS ACK

This message is sent by the Gateway in response to INTERFACE STATUS 
message. The Cause Information Element indicates the 
success/failure of the interface registration operation.

This response will use non-global Call Reference.







Matousek, et al           Informational                  [Page 16]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


   +-----------------+----------+--------+-------+--------+
   | Information     |  Refer-  |  Type  | Direc | Length |
   | element         |  ence    |        | tion  |        |
   +-----------------+----------+--------+-------+--------+
   | Protocol        |  10.1    |   M    | G/W-> |   1    |
   | discriminator   |          |        | NAS   |        |
   +-----------------+----------+--------+-------+--------+
   | Call Reference  |  10.2    |   M    | G/W-> |   3    |
   |                 |          |        | NAS   |        |
   +-----------------+----------+--------+-------+--------+
   | Message type    |  10.3    |   M    | G/W-> |   1    |
   |                 |          |        | NAS   |        |
   +-----------------+----------+--------+-------+--------+
   | Cause           |  10.14   |   M    | G/W-> |  2-32  |
   |                 |          |        | NAS   |        |
   +-----------------+----------+--------+-------+--------+


9.5 RESOURCE UPDATE

This message is sent by the NAS to register the resources it 
controls. The NAS will also send this message whenever the number 
of resources has changed as a result of failure or administrator 
action (e.g. modem failure). 

The message will be sent using non-global Call Reference.
   +-------------------+----------+--------+-------+--------+
   | Information       |  Refer-  |  Type  | Direc | Length |
   | element           |  ence    |        | tion  |        |
   +-------------------+----------+--------+-------+--------+
   | Protocol          |  10.1    |   M    | NAS-> |   1    |
   | discriminator     |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+
   | Call Reference    |  10.2    |   M    | NAS-> |   3    |
   |                   |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+
   | Message type      |  10.3    |   M    | NAS-> |   1    |
   |                   |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+
   | Shift to Codeset 7|  10.4    |   M    | NAS-> |   1    |
   |                   |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+
   | NAS resource 1    |  10.20   |   M    | NAS-> |        |
   | (note 1)          |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+
   | ...               |          |        |       |        |
   +-------------------+----------+--------+-------+--------+
   | NAS resource n    |  10.20   |   O    | NAS-> |        |
   |                   |          |        | G/W   |        |
   +-------------------+----------+--------+-------+--------+

(1)  This information element can be repeated 1 to n times.

Matousek, et al           Informational                  [Page 17]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


9.6 RESOURCE UPDATE ACK

This message is sent by the gateway to NAS in response to RESOURCE 
UPDATE.  This message will be sent using non-global Call Reference.

   +-----------------+----------+--------+-------+--------+
   | Information     |  Refer-  |  Type  | Direc | Length |
   | element         |  ence    |        | tion  |        |
   +-----------------+----------+--------+-------+--------+
   | Protocol        |  10.1    |   M    | G/W-> |   1    |
   | discriminator   |          |        | NAS   |        |
   +-----------------+----------+--------+-------+--------+
   | Call Reference  |  10.2    |   M    | G/W-> |   3    |
   |                 |          |        | NAS   |        |
   +-----------------+----------+--------+-------+--------+
   | Message type    |  10.3    |   M    | G/W-> |   1    |
   |                 |          |        | NAS   |        |
   +-----------------+----------+--------+-------+--------+
   | Cause           |  10.14   |   M    | G/W-> |  2-32  |
   |                 |          |        | NAS   |        |
   +-----------------+----------+--------+-------+--------+

9.7 SERVICE

The gateway sends this message to request a change of the current 
status of an interface or channel. The NAS sends this message to 
report to the gateway the change in status of a particular 
interface or channel.

This message might result in SS7 Blocking or Unblocking messages 
to be sent to the switch.

   +-----------------+----------+--------+-------+--------+
   | Information     |  Refer-  |  Type  | Direc | Length |
   | element         |  ence    |        | tion  |        |
   +-----------------+----------+--------+-------+--------+
   | Protocol        |  10.1    |   M    | both  |   1    |
   | discriminator   |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Call Reference  |  10.2    |   M    | both  |   3    |
   +-----------------+----------+--------+-------+--------+
   | Message type    |  10.3    |   M    | both  |   1    |
   +-----------------+----------+--------+-------+--------+
   | Channel ID      |  10.6    |   M    | both  |  3-6   |
   +-----------------+----------+--------+-------+--------+
   | Shift to        |  10.4    |   M    | both  |   1    |
   | Codeset 7       |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Change status   |  10.17   |   M    | both  |   3    |
   +-----------------+----------+--------+-------+--------+


Matousek, et al           Informational                  [Page 18]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


9.8 SERVICE ACK

This message is sent as an acknowledgment to the SERVICE message. 
If sent be the NAS, it indicates that the NAS is processing the 
SERVICE request. If sent by the gateway, it indicates that the 
gateway has recorded the change in status.

   +-----------------+----------+--------+-------+--------+
   | Information     |  Refer-  |  Type  | Direc | Length |
   | element         |  ence    |        | tion  |        |
   +-----------------+----------+--------+-------+--------+
   | Protocol        |  10.1    |   M    | both  |   1    |
   | discriminator   |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Call Reference  |  10.2    |   M    | both  |   3    |
   +-----------------+----------+--------+-------+--------+
   | Message type    |  10.3    |   M    | both  |   1    |
   +-----------------+----------+--------+-------+--------+
   | Channel ID      |  10.6    |   M    | both  |  3-6   |
   +-----------------+----------+--------+-------+--------+
   | Shift to        |  10.4    |   M    | both  |   1    |
   | Codeset 7       |          |        |       |        |
   +-----------------+----------+--------+-------+--------+
   | Change status   |  10.17   |   M    | both  |   3    |
   +-----------------+----------+--------+-------+--------+


9.9 CONTINUITY CHECK RESULT

The NAS sends this message to report to the gateway the result of 
continuity check for a particular channel.

   +-------------------+----------+--------+----------+--------+
   | Information       |  Refer-  |  Type  | Direc    | Length |
   | element           |  ence    |        | tion     |        |
   +-------------------+----------+--------+----------+--------+
   | Protocol          |  10.1    |   M    | NAS->G/W |   1    |
   | discriminator     |          |        |          |        |
   +-------------------+----------+--------+----------+--------+
   | Call Reference    |  10.2    |   M    | NAS->G/W |   3    |
   +-------------------+----------+--------+----------+--------+
   | Message type      |  10.3    |   M    | NAS->G/W |   1    |
   +-------------------+----------+--------+----------+--------+
   | Channel ID        |  10.6    |   M    | NAS->G/W |  3-6   |
   +-------------------+----------+--------+----------+--------+
   | Shift to Codeset 7|  10.4    |   M    | NAS->G/W |   1    |
   +-------------------+----------+--------+----------+--------+
   | Continuity result |  10.22   |   M    | NAS->G/W |   3    |
   +-------------------+----------+--------+----------+--------+


Matousek, et al           Informational                  [Page 19]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


10. Information Elements

10.1 Protocol Discriminator

The protocol discriminator is the first field (1 byte) of every 
message. Two protocol discriminator values will be supported:
- Q.931 user-network call control messages. The value used will 
be hex 08. 
- Maintenance messages defined in section 7. The value used will 
be hex 03.

10.2 Call Reference

Call reference is always the second field of every message.
The purpose of the call reference is to identify the call or 
facility registration/cancellation request at the local gateway to 
NAS interface to which the particular message applies. A sequence 
of Call reference values will be allocated for each TCP/IP 
connection. For the detail format of the information element refer 
to Q.931 specification

Global Call Reference values will be supported.

The protocol between the gateway and NAS will always use Call 
reference with length of 2. 

10.3 Message Type

The message type is the third field. For the individual values of 
Q.931 defined fields refer to section 4.4 of the Q.931 
specification. 

In the case when the protocol discriminator indicates Maintenance 
message, the value of the message type will be:


















Matousek, et al           Informational                  [Page 20]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


   +------------------------------+--------+
   |    Message                   |  Hex   |
   |                              | Value  |
   +------------------------------+--------+
   |  NAS STATUS                  |   01   |
   +------------------------------+--------+
   |  NAS STATUS ACK              |   02   |
   +------------------------------+--------+
   |  INTERFACE STATUS            |   03   |
   +------------------------------+--------+
   |  INTERFACE STATUS ACK        |   04   |
   +------------------------------+--------+
   |  RESOURCE UPDATE             |   05   |
   +------------------------------+--------+
   |  RESOURCE UPDATE ACK         |   06   |
   +------------------------------+--------+
   |  SERVICE                     |   0F   |
   +------------------------------+--------+
   |  SERVICE ACK                 |   07   |
   +------------------------------+--------+
   |  CONTINUITY CHECK RESULT     |   08   |
   +------------------------------+--------+

10.4 Extension to Codesets

Refer to section 4.5.2 of the Q.931 for the definition of codeset 
change procedures. The ASP will use the locking procedure to 
codeset 7 (user defined) to define the Information Elements 
specific to the 
ASP. 

10.5 Coding of Other Information Elements

All other Information Elements will be coded using the coding 
rules for variable length information elements defined in section 
4.5.1 of the Q.931 specification.  The Information Element 
Identifier values for standard Q.931 elements are defined in 
section 4 of the Q.931 specification. 

The values of Information Elements identifiers defined specifically 
in this document will be specified using locking shift into codeset 
7. They are:











Matousek, et al           Informational                  [Page 21]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


   +------------------------------+--------+
   |    Information Element       |  Hex   |
   |                              | Value  |
   +------------------------------+--------+
   |  Original Dialed Number      |   01   |
   +------------------------------+--------+
   |  NAS Status Info             |   02   |
   +------------------------------+--------+
   |  NAS Resources               |   03   |
   +------------------------------+--------+
   |  Interface Status Info       |   04   |
   +------------------------------+--------+
   |  Change Status               |   05   |
   +------------------------------+--------+
   |  Continuity Result           |   07   |
   +------------------------------+--------+


10.6 Channel Identification

This information element will be coded according to the general 
coding rules defined in section 4.5.1 of the Q.931 specification.  
The specific definition of the coding of this element is in section 
4.5.13 of the Q.931 specification.  The information element will be 
coded as follows:



























Matousek, et al           Informational                  [Page 22]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


+-----+----------+----+---------+-------------------------+
|Octet| Field    |Bits| Value   |  Explanation            |
+-----+----------+----+---------+-------------------------+
|  1  |Extension | 8  |  0      | Multiple octets in      |
|     |          |    |         | element                 |
|     +----------+----+---------+-------------------------+
|     |IE Iden-  |7-1 | 0011000 | Channel Identification  |
+-----+----------+----+---------+-------------------------+
|  2  |Length    |8-1 | Binary  | Length of IE            |
+-----+----------+----+---------+-------------------------+
|  3  |Extension | 8  |   1     |Last octet of description|
|     +----------+----+---------+-------------------------+
|     |Interface | 7  |   1     |Interface explicitly     |
|     |ID present|    |         |defined by this IE       |
|     +----------+----+---------+-------------------------+
|     |Interface | 6  |   1     |Primary rate             |
|     |type      |    |         |                         |
|     +----------+----+---------+-------------------------+
|     |Spare     | 5  |   0     |Spare                    |
|     +----------+----+---------+-------------------------+
|     |Preferred/| 4  |   1     |Exclusive; only the      |
|     |exclusive |    |         |indicated channel is     |
|     |          |    |         |acceptable               |
|     +----------+----+---------+-------------------------+
|     |D-channel | 3  |   0     |This is not D-channel    |
|     +----------+----+---------+-------------------------+
|     |Info      |2-1 |   00    |No channel specified -   |
|     |channel   |    |         |the message applies to   |
|     |selection |    |         | whole interface (1)     |
|     |          |    +---------+-------------------------+
|     |          |    |   01    |Channel defined in the   |
|     |          |    |         |following octets         |
+-----+----------+----+---------+-------------------------+
|  4  |Extension | 8  |   1     |Last octet of description|
|     +----------+----+---------+-------------------------+
|     |Interface |7-1 | Binary  |Number assigned to       |
|     |          |    |         |interface (note 2)       |
+-----+----------+----+---------+-------------------------+
|  5  |Extension | 8  |   1     |Last octet of description|
|     +----------+----+---------+-------------------------+
|     |Coding std|7-6 |   00    |ITU standardized         |
|     +----------+----+---------+-------------------------+
|     |Number/map| 5  |   0     |Channel is indicated     |
|     |          |    |         |by number                |
|     |          |    +---------+-------------------------+
|     |          |    |   1     |Channel is indicated by  |
|     |          |    |         |by slot map              |
|     +----------+----+---------+-------------------------+
|     |Channel   |4-1 |  0011   |B channel units          |
|     |type      |    |         |                         |
                     continued

Matousek, et al           Informational                  [Page 23]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


+-----+----------+----+---------+-------------------------+
| 6-n |Channel   |8-1 | Binary  |Binary number assigned to| 
|     |number/   |    |         |the channel (note 3)     |
|     |slot map  |    |         |                         |
|     |          |    +---------+-------------------------+
|     |          |    | Binary  |Bit position in slot map |
|     |          |    |         |corresponding to the time|
|     |          |    |         |slots used by the channels| 
|     |          |    |         |are set to 1 (note 4)    |
+-----+----------+----+---------+-------------------------+

Note: 
(1) If the Info Channel Selection field is set to 00 (no channel 
specified), the information element will end with octet 4. If 
the field is set to 01, octets 5 onwards will be present.
(2) Interface identifier will be agreed between the gateway and 
the NAS and configured on both. The gateway will be configured 
to map interface numbers (with local meaning) to CICs.
(3) If the channel is indicated by number, the bit 8 will be used 
as an extension bit and will be set to 1 to indicate that this 
is the last octet of description. 
(4) Refer to the Q.931 time-slot map definition for T1 and E1. 
Bit map will not be implemented in the first release.


10.7 Bearer Capability

This information element will be coded according to the coding 
rules defined in section 4.5.1 of the Q.931 specification.  The 
specific definition of the coding of this element is in section 
4.5.5 of the Q.931 specification. 

This information element will be coded as follows. 



















Matousek, et al           Informational                  [Page 24]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


+-----+----------+----+---------+-------------------------+
|Octet| Field    |Bits| Value   |  Explanation            |
+-----+----------+----+---------+-------------------------+
|  1  |Extension | 8  |  0      | Multiple octets in      |
|     |          |    |         | element                 |
|     +----------+----+---------+-------------------------+
|     |IE Iden-  |7-1 | 0000100 | Bearer Capability       |
|     |tifier    |    |         |                         |
+-----+----------+----+---------+-------------------------+
|  2  |Length    |8-1 | Binary  | Length of IE            |
+-----+----------+----+---------+-------------------------+
|  3  |Extension | 8  |   1     |Last octet               |
|     +----------+----+---------+-------------------------+
|     |Coding    |7-6 |   00    |ITU-T standardized       |
|     |standard  |    |         |                         |
|     +----------+----+---------+-------------------------+
|     |Inform.   |5-1 | 00000   |Speech                   |
|     |transfer  |    +---------+-------------------------+
|     |capability|    | 01000   |Unrestricted digital info|
|     |          |    +---------+-------------------------+
|     |          |    | 01001   |Restricted digital info  |
|     |          |    +---------+-------------------------+
|     |          |    | 10000   |3.1 khz audio            |
+-----+----------+----+---------+-------------------------+
|  4  |Extension | 8  |   1     |Last octet               |
|     +----------+----+---------+-------------------------+
|     |Transfer  |7-6 |   00    |Circuit mode             |
|     |mode      |    |         |                         |
|     +----------+----+---------+-------------------------+
|     |Info      |5-1 | 10000   |64 kbit/s - circuit mode |
|     |transfer  |    |         |                         |
|     |rate      |    |         |                         |
+-----+----------+----+---------+-------------------------+
|  5  |Extension | 8  |   1     |Last octet               |
|     +----------+----+---------+-------------------------+
|     |Layer 1   |7-6 |   01    |Layer 1 identification   |
|     |identif.  |    |         |coding                   |
|     +----------+----+---------+-------------------------+
|     |Layer 1   |5-1 |  00001  |rate adaption            |
|     |protocol  |    +---------+-------------------------+
|     |          |    |  00010  |u-law encoding           |
|     |          |    +---------+-------------------------+
|     |          |    |  00011  |a-law encoding           |
+-----+----------+----+---------+-------------------------+

Note:

(1) additional octets will be required to support V.110 rate 
adaption, including the 56 K rate. For details refer to the 
Q.931 specification. 


Matousek, et al           Informational                  [Page 25]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


10.8 Calling Party Number

This information element will be coded according to the coding 
rules defined in section 4.5.1 of the Q.931 specification.  The 
specific definition of the coding of this element is in section 
4.5.10 of the Q.931 specification. 


10.9 Calling Party Subaddress

This information element will be coded according to the coding 
rules defined in section 4.5.1 of the Q.931 specification.  The 
specific definition of the coding of this element is in section 
4.5.11 of the Q.931 specification. 


10.10 Called Party Number

This information element will be coded according to the coding 
rules defined in section 4.5.1 of the Q.931 specification.  The 
specific definition of the coding of this element is in section 
4.5.8 of the Q.931 specification. 


10.11 Called Party Subaddress

This information element will be coded according to the coding 
rules defined in section 4.5.1 of the Q.931 specification.  The 
specific definition of the coding of this element is in section 
4.5.9 of the Q.931 specification. 


10.12 Transit Network Selection

This information element will be coded according to the coding 
rules defined in section 4.5.1 of the Q.931 specification.  The 
specific definition of the coding of this element is in section 
4.5.29 of the Q.931 specification. 


10.13 Low Layer Compatibility

This information element will be coded according to the coding 
rules defined in section 4.5.1 of the Q.931 specification.  The 
specific definition of the coding of this element is in section 
4.5.19 of the Q.931 specification. 






Matousek, et al           Informational                  [Page 26]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


10.14 Cause

This information element will be coded as follows:

+-----+----------+----+---------+-------------------------+
|Octet| Field    |Bits| Value   |  Explanation            |
+-----+----------+----+---------+-------------------------+
|  1  |Extension | 8  |  0      | Multiple octets in      |
|     |          |    |         | element                 |
|     +----------+----+---------+-------------------------+
|     |IE Iden-  |7-1 | 0001000 | Cause                   |
|     |tifier    |    |         |                         |
+-----+----------+----+---------+-------------------------+
|  2  |Length    |8-1 | Binary  | Length of IE            |
+-----+----------+----+---------+-------------------------+
|  3  |Extension | 8  |   1     |Last octet               |
|     +----------+----+---------+-------------------------+
|     |Coding    |7-6 |   11    |Standard specific to     |
|     |standard  |    |         |location                 |
|     +----------+----+---------+-------------------------+
|     |Spare     | 5  |    0    |Spare                    |
|     |----------+----+---------+-------------------------+
|     |Location  |4-1 |  0001   |Private network serving  |
|     |          |    |         |local user               |
+-----+----------+----+---------+-------------------------+
|  4  |Extension | 8  |   1     |Last octet of description|
|     +----------+----+---------+-------------------------+
|     |Cause     |7-1 |  Binary |See table below          |
|     |value     |    |         |                         |
+-----+----------+----+---------+-------------------------+
|  5  |Diagnostic|8-1 | Binary  |See table below          |
| etc |          |    |         |                         |
+-----+----------+----+---------+-------------------------+



















Matousek, et al           Informational                  [Page 27]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998

The following cause values will be used:
+--------+--------------------------------+--------------+
| Number |  Explanation                   | Diagnostics  |
+--------+--------------------------------+--------------+
|  01    | Unallocated (unassigned) number| None         |
+--------+--------------------------------+--------------+
|  06    | Channel unacceptable           | None         |
+--------+--------------------------------+--------------+
|  16    | Normal Call clearing           | None         |
+--------+--------------------------------+--------------+
|  17    | User busy                      | None         |
+--------+--------------------------------+--------------+
|  18    | No user responding             | None         |
+--------+--------------------------------+--------------+
|  21    | Call rejected                  | None         |
+--------+--------------------------------+--------------+
|  28    | Invalid number format          | Number IE    |
+--------+--------------------------------+--------------+
|  44    | Requested circuit/channel      | None         |
|        |  not available                 |              |
+--------+--------------------------------+--------------+
|  52    | Outgoing call barred           | None         |
+--------+--------------------------------+--------------+
|  54    | Incoming call barred           | None         |
+--------+--------------------------------+--------------+
|  65    | Bearer capability not implem.  | None         |
+--------+--------------------------------+--------------+
|  69    | Channel type not implemented   | None         |
+--------+--------------------------------+--------------+
|  81    | Invalid call reference         | None         |
+--------+--------------------------------+--------------+
|  96    | Mandatory Info Element missing | IE identifier|
+--------+--------------------------------+--------------+
|  97    | Message type non-existent or   | Message type |
|        |  not implemented               |              |
+--------+--------------------------------+--------------+
|  98    | Message not compatible with the| Message type |
|        | call state or message type not |              |
|        | existent or not implemented    |              |
+--------+--------------------------------+--------------+
|  99    | Information element non-       | IE identifier|
|        |  existent or not implemented   |              |
+--------+--------------------------------+--------------+
|  100   | Invalid IE Contents            | IE identifier|
+--------+--------------------------------+--------------+
|  125   | NAS registered for incoming    | None         |
|        |calls only                      |              |
+--------+--------------------------------+--------------+
|  126   | NAS registered for incoming    | None         |
|        |  and outgoing calls            |              |
+--------+--------------------------------+--------------+
|  127   | NAS registration rejected      | None         |
+--------+--------------------------------+--------------+

Matousek, et al           Informational                  [Page 28]
INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998

10.15 Call State

This information element will be coded according to the coding 
rules defined in section 4.5.1 of the Q.931 specification.  The 
specific definition of the coding of this element is in section 
4.5.7 of the Q.931 specification.

10.16 Restart Indicator

This information element will be coded according to the coding 
rules defined in section 4.5.1 of the Q.931 specification.  The 
specific definition of the coding of this element is in section 
4.5.25 of the Q.931 specification. 

All the specified values (indicated channel, single interface, all 
interfaces) will be supported.

10.17 Change Status

This information element will be coded as follows. 

+-----+----------+----+---------+-------------------------+
|Octet| Field    |Bits| Value   |  Explanation            |
+-----+----------+----+---------+-------------------------+
|  1  |Extension | 8  |  0      | Multiple octets in      |
|     |          |    |         | element                 |
|     +----------+----+---------+-------------------------+
|     |IE Iden-  |7-1 |         | Change Status           |
|     |tifier    |    |         |                         |
+-----+----------+----+---------+-------------------------+
|  2  |Length    |8-1 | Binary  | Length of IE            |
+-----+----------+----+---------+-------------------------+
|  3  |Extension | 8  |   1     |Last octet               |
|     +----------+----+---------+-------------------------+
|     |Preference| 7  |   0     |Interface specified by   |
|     |          |    |         |Channel Identification IE|
|     |          |    +---------+-------------------------+
|     |          |    |  1      |Specific Channel speci-  |
|     |          |    |         |fied by                  |
|     |          |    |         |Channel Identification IE|
|     +----------+----+---------+-------------------------+
|     |Spare     |6-4 |  0000   |Spare                    |
|     +----------+----+---------+-------------------------+
|     |New Status|3-1 |   000   |In service               |
|     |          |    +---------+-------------------------+
|     |          |    |   001   |Loop back                |
|     |          |    +---------+-------------------------+
|     |          |    |   010   |Out of service           |
|     |          |    +---------+-------------------------+
|     |          |    |   011   |Request continuity check |
|     |          |    +---------+-------------------------+
|     |          |    |   100   |Graceful shutdown        |
+-----+----------+----+---------+-------------------------+

Matousek, et al           Informational                  [Page 29]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998

The following table shows the relationship between the 'Preference" 
field and the 'New Status' field when the request is originated by 
the SS7 Gateway.

+------------+--------------------------+-------------------------+
|            | Interface Specified      | Channel Specified       |
+------------+--------------------------+-------------------------+
| In Service | The NAS will attempt to  | The NAS will mark the   |
|            | bring the T1/E1 into ser-| channel as available.   |
|            | vice.  The NAS will      | Established calls will  |
|            | respond with 'Out of     | not be affected.        |
|            | Service' if the T1/E1 is |                         |
|            | down (not framing).      |                         |
+------------+--------------------------+-------------------------+
| Loop Back  | The T1/E1 will be placed | The NAS will place the  |
|            | into loopback.  All esta-| DS0 into loopback state |
|            | blished calls will be    | if there is no esta-    |
|            | torn down.               | blished call.  The NAS  |
|            |                          | will respond with 'In   |
|            |                          | Service' if a call is   |
|            |                          | in progress.            |
+------------+--------------------------+-------------------------+
| Out of     | The NAS will place the   | The NAS will mark the   |
| Service    | T1/E1 into this state.   | DS0 and tear down any   |
|            | All established calls    | if there is no esta-    |
|            | will be torn down.       | established calls.      |
+------------+--------------------------+-------------------------+
| Request    | The NAS will reject this | The NAS will execute the|
| Continuity | message and send STATUS  | continuity check if     |
| Check      | message.                 | there is no established |
|            |                          | call.  The NAS will res-|
|            |                          | pond with 'In Service'  |
|            |                          | if a call is in progress|
+------------+--------------------------+-------------------------+
| Graceful   | The NAS will mark the    | The NAS will mark the   |
| Shutdown   | T1/E1.  It will not tear | DS0, but will not tear  |
|            | down any established     | down any established    |
|            | calls.                   | calls.                  |
+------------+--------------------------+-------------------------+













Matousek, et al           Informational                  [Page 30]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


The following shows the relationship between the "Preference" field 
and "New Status" field when the request is originated by the NAS.

+------------+--------------------------+-------------------------+
|            | Interface Specified      | Channel Specified       |
+------------+--------------------------+-------------------------+
| In Service | The NAS will send this   | The NAS can send this   |
|            | message when the T1/E1   | request for Channels it |
|            | framing is achieved. The | previously took "Out of |
|            | Gateway should not change| Service".  The Gateway  |
|            | the state of any esta-   | should not change the   |
|            | blished call.            | state of any            |
|            |                          | established call.       |
+------------+--------------------------+-------------------------+
| Loop Back  | The NAS will not generate| The NAS will not gene-  |
|            | this request.  The Gate- | rate this request.  The |
|            | way should respond with  | Gateway should respond  |
|            | STATUS.                  | with STATUS.            |
+------------+--------------------------+-------------------------+
| Out of     | The NAS will place the   | The NAS will send this  |
| Service    | T1/E1 into this state if | message in the case of  |
|            | T1/E1 framing is lost or | modem failure.  Any     |
|            | if requested by the      | established call will   |
|            | operator.  All esta-     | be torn down.           |
|            | blished calls will be    |                         |
|            | torn down.               |                         |
+------------+--------------------------+-------------------------+
| Request    | The NAS will not send    | The NAS will use this   |
| Continuity | this message.  The Gate- | request as a result of  |
| Check      | way should respond with  | an operator request.    |
|            | STATUS.                  |                         |
+------------+--------------------------+-------------------------+
| Graceful   | The NAS will issue this  | The NAS will not issue  |
| Shutdown   | request as a result of an| this message.  The Gate-|
|            | operator request. Any    | way should reject this  |
|            | call in progress should  | message using the       |
|            | not be affected.         | STATUS message.         |
+------------+--------------------------+-------------------------+



10.18 Original Dialed Number

The format of this Information Element will be the same as for the 
Called Party Number Information Element specified in section 4.5.8 
of the Q.931. 






Matousek, et al           Informational                  [Page 31]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998

10.19 NAS Status Info

The format of this information element will be as follows:

+-----+----------+----+---------+-----------------------+
|Octet| Field    |Bits| Value   |  Explanation          |
+-----+----------+----+---------+-----------------------+
|  1  |Extension | 8  |  0      | Multiple octets in    |
|     |          |    |         | element               |
|     +----------+----+---------+-----------------------+
|     |IE Iden-  |7-1 |         | NAS Status Info       |
|     |tifier    |    |         |                       |
+-----+----------+----+---------+-----------------------+
|  2  |Length    |8-1 |   1     | Length of IE          |
+-----+----------+----+---------+-----------------------+
|  3  |Extension | 8  |   1     |Last octet             |
|     +----------+----+---------+-----------------------+
|     |Spare     |7-3 |  00000  |Spare                  |
|     +----------+----+---------+-----------------------+
|     |Status    |2-1 |   00    |Cold start: NAS coming |
|     |          |    |         | up after booting      |
|     |          |    +---------+-----------------------+
|     |          |    |   01    |Warm start: NAS is     |
|     |          |    |         | reestablishing gateway|
|     |          |    |         | connectivity          |
|     |          |    +---------+-----------------------+
|     |          |    |   10    |Hot shutdown: NAS will |
|     |          |    |         | disconnect abruptly.  |
|     |          |    |         | All calls should be   |
|     |          |    |         | terminated.           |
|     |          |    +---------+-----------------------+
|     |          |    |   11    |Soft shutdown: NAS will|
|     |          |    |         |shutdown when all calls|
|     |          |    |         | have terminated.      |
+-----+----------+----+---------+-----------------------+


















Matousek, et al           Informational                  [Page 32]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998

10.20 NAS Resource

This information provides information regarding the NAS available 
resources.

+-----+----------+----+---------+----------------------+
|Octet| Field    |Bits| Value   |  Explanation         |
+-----+----------+----+---------+----------------------+
|  1  |Extension | 8  |  0      | Multiple octets in   |
|     |          |    |         | element              |
|     +----------+----+---------+----------------------+
|     |IE Iden-  |7-1 |         | NAS Resources        |
|     |tifier    |    |         |                      |
+-----+----------+----+---------+----------------------+
|  2  |Length    |8-1 |   2     | Length of IE         |
+-----+----------+----+---------+----------------------+
|  3  |Extension | 8  |   1     |Last octet            |
|     +----------+----+---------+----------------------+
|     |Category  |7-5 |   001   |Modems                |
|     |          |    +---------+----------------------+
|     |          |    |   010   | HDLC channels        |
|     +----------+----+---------+----------------------+
|     |State     |4-1 |  0001   |Available             |
+-----+----------+----+---------+----------------------+
|  4  |Extension | 8  |   1     |Last octet            |
|     +----------+----+---------+----------------------+
|     |Capacity  |7-1 | Binary  |Count of resources in |
|     |          |    |         | that category        |
+-----+----------+----+---------+----------------------+























Matousek, et al           Informational                  [Page 33]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998

10.21 Interface Status Info

This information element is used to specify the status of a given 
interface and the status of all the associated channels.
+-----+----------+----+---------+-------------------------+
|Octet| Field    |Bits| Value   |  Explanation            |
+-----+----------+----+---------+-------------------------+
|  1  |Extension | 8  |  0      | Multiple octets in      |
|     |          |    |         | element                 |
|     +----------+----+---------+-------------------------+
|     |IE Iden-  |7-1 |         | Interface Status Info   |
|     |tifier    |    |         |                         |
+-----+----------+----+---------+-------------------------+
|  2  |Length    |8-1 | Binary  | Length of IE            |
+-----+----------+----+---------+-------------------------+
|  3  |Extension | 8  |   1     |Last octet of description|
|     +----------+----+---------+-------------------------+
|     |Interface |7-1 |  Binary |Interface number         |
+-----+----------+----+---------+-------------------------+
|  4  |Extension | 8  |   1     |Last octet of description|
|     +----------+----+---------+-------------------------+
|     |Spare     |7-3 | 00000   |Spare                    |
|     +----------+----+---------+-------------------------+
|     |Interface |2-1 |   00    |In Service (up)          |
|     | status   |    +---------+-------------------------+
|     |          |    |   01    |Maintenance (loopback)(1)|
|     |          |    +---------+-------------------------+
|     |          |    |   10    |Out of Service (down)(1) |
+-----+----------+----+---------+-------------------------+
|  5  |Extension | 8  |   1     |Last octet               |
|     +----------+----+---------+-------------------------+
|     |Chan Count|7-1 | Binary  |Count of channels sup-   |
|     |          |    |         |ported by interface      |
+-----+----------+----+---------+-------------------------+
|  6  |Chan 1    |8-5 |  0000   |Idle - no existing calls |
|     |Status    |    +---------+-------------------------+
|     |          |    |  0001   |Unavailable/blocked      |
|     |          |    +---------+-------------------------+
|     |          |    |  0010   |Call in progress         |
|     +----------+----+---------+-------------------------+
|     |Chan 2    |4-1 |  0000   |Idle - no existing calls |
|     |Status    |    +---------+-------------------------+
|     |          |    |  0001   |Unavailable/blocked      |
|     |          |    +---------+-------------------------+
|     |          |    |  0010   |Call in progress         |
+-----+----------+----+---------+-------------------------+

Octet 6 is repeated until all channels defined by octet 5 are 
specified.

Note 1:If the interface status is either Maintenance or Out of 
Service, octets 6 onwards are not provided. Their state is implied 
from the state of the interface. 

Matousek, et al           Informational                  [Page 34]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


10.22 Continuity Result

This Information element is used to report the result of continuity 
check performed by the NAS. The format will be as follows:

+-----+----------+----+---------+-----------------------+
|Octet| Field    |Bits| Value   |  Explanation          |
+-----+----------+----+---------+-----------------------+
|  1  |Extension | 8  |  0      | Multiple octets in    |
|     |          |    |         | element               |
|     +----------+----+---------+-----------------------+
|     |IE Iden-  |7-1 |         | Continuity Result     |
|     |tifier    |    |         |                       |
+-----+----------+----+---------+-----------------------+
|  2  |Length    |8-1 |   1     | Length of IE          |
+-----+----------+----+---------+-----------------------+
|  3  |Extension | 8  |   1     |Last octet             |
|     +----------+----+---------+-----------------------+
|     |Spare     |7-2 | 0000000 |Spare                  |
|     +----------+----+---------+-----------------------+
|     |Result    | 1  | 0       |Continuity Check failed|
|     |          |    +---------+-----------------------+
|     |          |    | 1       |Continuity Check suc-  |
|     |          |    |         |ceeded                 |
+-----+----------+----+---------+-----------------------+


























Matousek, et al           Informational                  [Page 35]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


11. Examples of Timing Diagrams

11.1 NAS Registers with Gateway for Service

The following timing diagram shows that the NAS is responsible for 
the registration of the interfaces under its control.

NAS                            Gateway
|                               |
| NAS STATUS (cold start)       |
|------------------------------>|
| NAS STATUS ACK                |
|<------------------------------|
|                               |
| INTERFACE STATUS (i/f 1 up)   |
|------------------------------>|
| INTERFACE STATUS ACK          |
|<------------------------------|
|                               |
| INTERFACE STATUS (i/f 2 down) |
|------------------------------>|
| INTERFACE STATUS ACK          |
|<------------------------------|
|                               |
| RESOURCE UPDATE               |
|------------------------------>|
| RESOURCE UPDATE ACK           |
|<------------------------------|


11.2 Gateway Originated Normal Call Setup and Release

The following diagram shows successful Call establishment 
for gateway originated calls. 

NAS                            Gateway
|                               |
| SETUP  (Channel ID = n)       |
|<------------------------------|
| CONNECT                       |
|------------------------------>|
|                               |
| DISCONNECT                    |
|------------------------------>|
| RELEASE                       |
|<------------------------------|
| RELEASE COMPLETE              |
|------------------------------>|

Note: The disconnect sequence can be initiated by either the NAS or 
by the gateway to hang-up the call.

Matousek, et al           Informational                  [Page 36]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998



11.3 Call Setup with Alternative Call Clearing

The following diagram shows successful Call establishment 
for gateway originated calls, using an alternative call clearing 
sequence that is also allowed in the protocol. 

NAS                            Gateway
|                               |
| SETUP (Channel ID = n)        |
|<------------------------------|
| CONNECT                       |
|------------------------------>|
|                               |
| RELEASE                       |
|<------------------------------|
| RELEASE COMPLETE              |
|------------------------------>|



11.4 NAS Originated Normal Call Setup

The following diagram shows successful Call establishment 
for NAS originated calls.  For NAS originated calls, the Gateway 
selects the channel to be used in the call.

NAS                            Gateway
|                               |
| SETUP(channel not specified)  |
|------------------------------>|
| CONNECT ( Channel ID = n )    |
|<------------------------------|
|                               |
| DISCONNECT                    |
|------------------------------>|
| RELEASE                       |
|<------------------------------|
| RELEASE COMPLETE              |
|------------------------------>|

Note: The disconnect sequence can be initiated by either the NAS or 
by the gateway to hang-up the call.  Disconnection can be initiated 
by either the DISCONNECT or RELEASE message.








Matousek, et al           Informational                  [Page 37]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


11.5 Unsuccessful Call Establishment Sequence

The following sequence illustrates when a call is rejected by the 
NAS. 

NAS                            Gateway
|                               |
| SETUP                         |
|<------------------------------|
| RELEASE COMPLETE              |
|------------------------------>|



11.6 Continuity check test as part of Incoming Call Setup - Success

The following sequence illustrates when the gateway receives an IAM 
message indicating that a continuity test should be performed on 
the circuit prior to the call establishment. 

NAS                            Gateway
|                               |
| SERVICE (chan n loop back)    |
|<------------------------------|
| SERVICE ACK                   |
|------------------------------>|
|                               |
| SETUP                         |
|<------------------------------|
| CONNECT                       |
|------------------------------>|

Per Q.699 (3.1.18) continuity checking should be performed before 
the SETUP is sent to the terminating end-point. SERVICE message 
from the gateway to the NAS is used to initiate the loopback. If 
the remote end-point indicates to the gateway that the continuity 
check succeeded, the gateway proceeds with SETUP.















Matousek, et al           Informational                  [Page 38]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


11.6 Continuity check test as part of Incoming Call Setup - Failure

If the remote end indicates failure, the gateway will send SERVICE 
message to the NAS requesting that the channel be placed into the 
in service state. 

NAS                            Gateway
|                               |
| SERVICE (chan n loop back)    |
|<------------------------------|
| SERVICE ACK                   |
|------------------------------>|
|                               |
| SERVICE (chan n in service)   |
|<------------------------------|
| SERVICE ACK                   |
|------------------------------>|



11.7 Continuity check test as part of Outgoing Call Setup - Success

The following sequence illustrates when the NAS initiates call 
setup and the SS7 Gateway determines that continuity test should be 
performed on the circuit prior to the call establishment. 

NAS                            Gateway
|                               |
| SETUP (channel not specified) |
|------------------------------>|
|                               |
| SERVICE (chan n request       |
|             continuity check) |
|<------------------------------|
| SERVICE ACK                   |
|------------------------------>|
| CONTINUITY CHECK RESULT       |
|------------------------------>|
|                               |
| CONNECT (Channel ID = n)      |
|<------------------------------|











Matousek, et al           Informational                  [Page 39]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


11.8 Continuity check test initiated by the SS7 gateway operator

The gateway sends a SERVICE message to initiate the continuity 
check. The NAS performs continuity check and reports the result 
using the CONTINUITY CHECK RESULT.

NAS                            Gateway
|                               |
| SERVICE (chan n request       |
|             continuity check) |
|<------------------------------|
| SERVICE ACK                   |
|------------------------------>|
|                               |
| CONTINUITY CHECK RESULT       |
|------------------------------>|


11.7 NAS detects bearer T1/E1 line down (LOS, Red Alarm)


If the NAS detects that a particular T1/E1 line failed, it sends a
SERVICE message to the gateway. Established calls will be torn down 
as part of normal processing - i.e the NAS modems will detect loss 
of connection and the NAS will disconnect the call. The gateway 
will request blocking of CICs associated with the particular T1/E1 
using an SS7 Blocking or Circuit Group Blocking Message. 

NAS                            Gateway
|                               |
| SERVICE (i/f 1 out-of-service)|
|------------------------------>|
| SERVICE ACK                   |
|<------------------------------|


11.8 Individual bearer channel taken out-of-service by NAS

NAS                            Gateway
|                               |
| SERVICE(chan n out-of-service)|
|------------------------------>|
| SERVICE ACK                   |
|<------------------------------|








Matousek, et al           Informational                  [Page 40]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998

11.9 Individual bearer channel taken out-of-service by Gateway 
operator

NAS                            Gateway
|                               |
| SERVICE(chan n out-of-service)|
|<------------------------------|
| SERVICE ACK                   |
|------------------------------>|


11.10 Bearer T1/E1 trunk abrupt shutdown initiated by Gateway 
operator

NAS                            Gateway
|                               |
| SERVICE (i/f n out-of-service)|
|<------------------------------|
| SERVICE ACK                   |
|------------------------------>|


11.11 Bearer T1/E1 trunk abrupt shutdown initiated by NAS 

NAS                            Gateway
|                               |
| SERVICE (i/f n out-of-service)|
|------------------------------>|

| SERVICE ACK                   |
|<------------------------------|


11.12 Bearer T1/E1 trunk graceful shutdown initiated by Gateway 
operator

NAS                               Gateway
|                                   |
| SERVICE (i/f n graceful shutdown) |
|<----------------------------------|
| SERVICE ACK                       |
|---------------------------------->|


11.13 Bearer T1/E1 trunk graceful shutdown initiated by NAS 

NAS                               Gateway
|                                   |

| SERVICE (i/f n graceful shutdown) |
|---------------------------------->|
| SERVICE ACK                       |
|<----------------------------------|

Matousek, et al           Informational                  [Page 41]

INTERNET-DRAFT        draft-long-ss7-signal-00.txt       June 1998


10. Error Handling


Refer to section 3.7.8 of TR 41459 ATT Network ISDN Primary Rate 
Interface. This section defines how to handle error conditions such 
as Call reference errors, message type errors , etc. The ASP will 
use the error procedures.


11. Timers

To be provided.


12. State Diagrams

To be provided.


13. Acknowledgements

The authors would like to acknowledge Mehdi Ghasem, Wan Man and Ki 
Suh of Stratus Computer, as well as Miguel Sasson of Bay Networks
for their helpful review and comments on this protocol specification.


14. Contact Information

Jiri Matousek          Lyndon Ong
Bay Networks, Inc.     Bay Networks, Inc.
5 Federal Street       4401 Gt America Pkwy
Billerica, MA 01821    Santa Clara, CA 95052

jiri@baynetworks.com   long@baynetworks.com




           EXPIRES JANUARY 1999













Matousek, et al           Informational                  [Page 42]
