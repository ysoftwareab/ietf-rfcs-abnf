
Network Working Group                                           K. Leung
Internet-Draft                                                  A. Patel
Expires: August 5, 2005                                    Cisco Systems
                                                              G. Tsirtsis
                                                     Flarion Technologies
                                                              E. Klovning
                                                  Birdstep Technology ASA
                                                            February 2005


             Cisco Mobile IPv4 Host Configuration Extensions
                draft-leung-cisco-mip4-host-config-00.txt

Status of this Memo

    This document is an Internet-Draft and is subject to all provisions
    of Section 3 of RFC 3667.  By submitting this Internet-Draft, each
    author represents that any applicable patent or other IPR claims of
    which he or she is aware have been or will be disclosed, and any of
    which he or she become aware will be disclosed, in accordance with
    RFC 3668.

    Internet-Drafts are working documents of the Internet Engineering
    Task Force (IETF), its areas, and its working groups.  Note that
    other groups may also distribute working documents as
    Internet-Drafts.

    Internet-Drafts are draft documents valid for a maximum of six months
    and may be updated, replaced, or obsoleted by other documents at any
    time.  It is inappropriate to use Internet-Drafts as reference
    material or to cite them other than as "work in progress."

    The list of current Internet-Drafts can be accessed at
    http://www.ietf.org/ietf/1id-abstracts.txt.

    The list of Internet-Draft Shadow Directories can be accessed at
    http://www.ietf.org/shadow.html.

    This Internet-Draft will expire on August 5, 2005.

Copyright Notice

    Copyright (C) The Internet Society (2005).

Abstract

    An IP device requires basic host configuration to be able to
    communicate.  For example, the IP address on the interface and the



Leung, et al.            Expires August 5, 2005                 [Page 1]

Internet-Draft                 Host Config                 February 2005


    DNS server for a hostname to IP address lookup.  This information is
    configured statically or obtained dynamically using Dynamic Host
    Configuration Protocol (DHCP) or Point-to- Point Protocol/IP Control
    Protocol (PPP/IPCP).  However, both DHCP and PPP/IPCP provides host
    configuration based on the access network.  In Mobile IPv4, the
    registration process boots up a Mobile Node at an access network,
    also known as foreign network.  The information to configure the host
    needs to be based on the home network.  This document describes the
    Mobile IPv4 extensions used to provide the base host configuration in
    the Registration Request and Reply messages.

    The content is provided for informational purpose only.

Table of Contents

    1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
    2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  4
    3.  Host Configuration Extensions Summary  . . . . . . . . . . . .  5
    4.  Host Configuration Extensions  . . . . . . . . . . . . . . . .  6
      4.1   Host Configuration Request Extension . . . . . . . . . . .  6
      4.2   Home Network Prefix Extension  . . . . . . . . . . . . . .  7
      4.3   DNS Server Extension . . . . . . . . . . . . . . . . . . .  7
      4.4   DHCP Server Extension  . . . . . . . . . . . . . . . . . .  8
      4.5   DHCP Client ID Extension . . . . . . . . . . . . . . . . .  9
      4.6   Default Gateway Extension  . . . . . . . . . . . . . . . .  9
      4.7   DNS Suffix Extension . . . . . . . . . . . . . . . . . . . 10
      4.8   Configuration URL Extension  . . . . . . . . . . . . . . . 10
    5.  Security Considerations  . . . . . . . . . . . . . . . . . . . 11
    6.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 12
    7.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 13
    8.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 13
        Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 13
        Intellectual Property and Copyright Statements . . . . . . . . 15


















Leung, et al.            Expires August 5, 2005                 [Page 2]

Internet-Draft                 Host Config                 February 2005


1.  Introduction

    An IPv4 device requires some basic configuration to communicate with
    other nodes.  Typically, it has an IP address for an interface and
    DNS server's IP address to resolve the peer's hostname to an IP
    address.  DHCP [RFC2131] and PPP/IPCP [RFC1332] provides host
    configuration information on the access network interface, but this
    is inadequate.  However, in Mobile IPv4 [RFC3344], a Mobile Node has
    a virtual network interface on the home network, anchored by the Home
    Agent.  The IP address, home subnet prefix, default gateway, and home
    network's DNS servers are essential in the boot up of a network
    interface.  In some cases, these are the only information needed by
    the Mobile Node.

    The Mobile IPv4 registration process provides the mechanism for a
    Mobile Node to boot up on a foreign network.  Upon the successful
    registration, the Mobile Node can communicate with the Correspondent
    Node.  The need to provide an efficient method to obtain the host
    configuration exists.  If the Mobile Node is a DHCP client, it can
    obtain configuration parameters from the DHCP server in the home
    network after the initial registration.

    This document introduces the Cisco vendor specific extensions
    [RFC3115] to provide the means for a Mobile Node to download some
    fundamental configuration associated with the home network via the
    Home Agent.  These extensions provide information for home subnet
    prefix, DNS server, DHCP server, DHCP client identifier, default
    gateway, DNS suffix, and configuration URL.

    The home subnet prefix allows the Mobile Node to set up the subnet
    mask on the virtual interface properly.  The default gateway may be
    the Home Agent's address, but at times, that address is the tunnel
    endpoint on a virtual  interface and not on the home subnet.  In this
    case, the extension provides the Home Agent's address or another
    appropriate address to satisfy the network interface configuration on
    the Mobile Node.

    The DNS server's IP address and DNS suffix are based on the home
    administrative domain.

    The DHCP client ID and DHCP server's IP address provides information
    for the Mobile Node to renew its home address with the DHCP server
    when the Mobile Node returns home and the Home Agent is no longer
    maintaining the home address of the Mobile Node

    The configuration URL provides a convenient mechanism to download
    additional configuration parameters of the Mobile Nodes from a
    centralized repository.



Leung, et al.            Expires August 5, 2005                 [Page 3]

Internet-Draft                 Host Config                 February 2005


2.  Terminology

    The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
    "SHOULD",  "SHOULD  NOT",  "RECOMMENDED",  "MAY",  and "OPTIONAL" in
    this document are to be interpreted as described in RFC 2119.














































Leung, et al.            Expires August 5, 2005                 [Page 4]

Internet-Draft                 Host Config                 February 2005


3.  Host Configuration Extensions Summary

    The following Cisco vendor specific extensions provide the host
    configuration for a Mobile Node.

    o  Host Configuration Request
       *  Request for host configuration information from the Mobile Node
          to the Home Agent.

    o  Home Network Prefix
       *  The subnet prefix on the home network.

    o  Default Gateway
       *  The default gateway's IP address on the home network.

    o  DNS Server
       *  The DNS server's IP address in the home network.

    o  DNS Suffix
       *  The DNS suffix for hostname resolution in the home network.

    o  DHCP Client ID
       *  The DHCP Client-ID used to obtain the IP address.  When the
          Mobile Node returns home and is responsible for managing its
          own address, if the home address was assigned using DHCP
          server, this options maps to the client identifier option as
          defined in section 9.14 of [RFC2132] and referenced in
          [RFC2131].

    o  DHCP Server
       *  The DHCP server's IP address in the home network.

    o  Configuration URL
       *  The URL for the Moible Node to download configuration
          parameters from a server.


    When the Mobile Node needs to obtain its host configuration, the Host
    Configuration Request VSE is appended to the Registration Request.
    This VSE indicates to the Home Agent that either all or selected host
    configuration VSEs need to be appended to the Registration Reply.

    The VSEs are authenticated as part of the registration message using
    any of the authentication mechanism defined for Mobile IP ([RFC3344],
    [RFC3012]).

    This message MAY contain extensions defined in Mobile IP, including
    vendor specific extensions [RFC3115].



Leung, et al.            Expires August 5, 2005                 [Page 5]

Internet-Draft                 Host Config                 February 2005


4.  Host Configuration Extensions

    The host configuration extensions are based on normal vendor specific
    extension type which is skippable during registration processing.
    The format is shown below.  The Vendor-NVSE-Value contains the
    subtype fields.


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |   Length      |          Reserved             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                          Vendor/Org-ID                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       Vendor-NVSE-Type        |     Vendor-NVSE-Value ...
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


       Type:	134



       Length:

          Indicates the length (in bytes) of the data field within this
          extension, excluding the Type and Length fields.

       Reserved:

          Reserved for future use.  To be set to 0 while sending, ignored
          on reception.

       Vendor-NVSE-Type:

          9 (cisco)

       Vendor-NVSE-Value:

          Format is shown below for each subtype.


4.1  Host Configuration Request Extension

    This format of the Host Configuration Request extension is shown
    below.





Leung, et al.            Expires August 5, 2005                 [Page 6]

Internet-Draft                 Host Config                 February 2005


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           Sub-Type            |           Selector            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+



       Sub-Type:

          0

       Selector:

          0 indicates all host configuration available to the HA is
          requested by the Mobile Node.


4.2  Home Network Prefix Extension

    This format of the Home Network Prefix extension is shown below.

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           Sub-Type            |        Prefix Length          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


       Sub-Type:

          1

       Prefix Length:

          The number of bits in the home subnet prefix.


4.3  DNS Server Extension

    This format of the DNS Server extension is shown below.










Leung, et al.            Expires August 5, 2005                 [Page 7]

Internet-Draft                 Host Config                 February 2005


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           Sub-Type            |        Primary DNS Server
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    	       . . .              |        Secondary DNS Server
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    	       . . .              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


       Sub Type:

          2

       Primary DNS Server:

          The IP address of the primary DNS server.

       Secondary DNS Server:

          The IP address of the secondary DNS server.


4.4  DHCP Server Extension

    This format of the DHCP Server extension is shown below.

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           Sub-Type            |          DHCP Server
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    	       . . .              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


       Sub-Type:

          3

       DHCP Server:

          The IP address of the DHCP server.







Leung, et al.            Expires August 5, 2005                 [Page 8]

Internet-Draft                 Host Config                 February 2005


4.5  DHCP Client ID Extension

    This format of the DHCP client id extension is shown below.

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           Sub-Type            |          Client ID . . .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


       Sub-Type:

          4

       Client ID:

          DHCP servers use this value to index their database of address
          bindings.  This value is expected to be unique for all clients
          in an administrative domain.  The size of field is between 2
          and 255 octets.


4.6  Default Gateway Extension

    This format of the Default Gateway extension is shown below.


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           Sub-Type            |          Default Gateway
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    	       . . .              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


       Sub-Type:

          5

       Default Gateway:

          The IP address of the default gateway for the Mobile Node on
          the home network.






Leung, et al.            Expires August 5, 2005                 [Page 9]

Internet-Draft                 Host Config                 February 2005


4.7  DNS Suffix Extension

    This format of the DNS Suffix extension is shown below.


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           Sub-Type            |         DNS Suffix . . .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


       Sub-Type:

          6

       DNS Suffix:

          The DNS suffix to be appended to the name of Mobile Node when
          completing its fully qualified domain name (FQDN).  The size of
          field is between 1 and 246 octets.


4.8  Configuration URL Extension

    This format of the Configuration URL extension is shown below.


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           Sub-Type            |         URL String . . .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


       Sub-Type:

          7

       URL String:

          The Mobile Node can retrieve configuration parameters via the
          URL.  The URL is atmost 246 bytes in length.








Leung, et al.            Expires August 5, 2005                [Page 10]

Internet-Draft                 Host Config                 February 2005


5.  Security Considerations

    The host configuration extensions follow the same rules for Mobile IP
    extensions in registration messages.  See the Security Considerations
    section in RFC 3344.

    The Configuration URL extension may trigger the Mobile Node to
    download the configuration parameters from a server.  The protection
    of the data transfer is outside the scope of this document.  Possible
    options include encryption of data before transfer or using HTTPS.









































Leung, et al.            Expires August 5, 2005                [Page 11]

Internet-Draft                 Host Config                 February 2005


6.  IANA Considerations

    This is an information draft.  No IANA actions required.
















































Leung, et al.            Expires August 5, 2005                [Page 12]

Internet-Draft                 Host Config                 February 2005


7.  Acknowledgements

    The authors would like to acknowledge Jayshree Bharatia, Kuntal
    Chowdhury, Avi Lior, and Lila Madour for their contributions to
    Mobile IPv4 Extension for Configuration Options Exchange draft,
    draft-bharatia-mobileip-gen-mipv4-ext-02.txt.

8.  References

    [RFC1332]  McGregor, G., "The PPP Internet Protocol Control Protocol
               (IPCP)", RFC 1332, May 1992.

    [RFC2131]  Droms, R., "Dynamic Host Configuration Protocol",
               RFC 2131, March 1997.

    [RFC2132]  Alexander, S. and R. Droms, "DHCP Options and BOOTP Vendor
               Extensions", RFC 2132, March 1997.

    [RFC3012]  Perkins, C. and P. Calhoun, "Mobile IPv4
               Challenge/Response Extensions", RFC 3012, November 2000.

    [RFC3115]  Dommety, G. and K. Leung, "Mobile IP
               Vendor/Organization-Specific Extensions", RFC 3115, April
               2001.

    [RFC3344]  Perkins, C., "IP Mobility Support for IPv4", RFC 3344,
               August 2002.


Authors' Addresses

    Kent Leung
    Cisco Systems
    170 W. Tasman Drive
    San Jose, CA  95134
    US

    Phone: +1 408-526-5030
    Email: kleung@cisco.com












Leung, et al.            Expires August 5, 2005                [Page 13]

Internet-Draft                 Host Config                 February 2005


    Alpesh Patel
    Cisco Systems
    170 W. Tasman Drive
    San Jose, CA  95134
    US

    Phone: +1 408-853-9580
    Email: alpesh@cisco.com


    George Tsirtsis
    Flarion Technologies
    Bedminster One
    135 Route 202/206 South
    Bedminster, NJ  07921
    US

    Phone: +1 908-947-7059
    Email: g.tsirtsis@flarion.com


    Espen Klovning
    Birdstep Technology ASA
    Bryggegata 7
    Oslo,   0250
    Norway

    Phone: +47 95 20 26 29
    Email: espen@birdstep.com






















Leung, et al.            Expires August 5, 2005                [Page 14]

Internet-Draft                 Host Config                 February 2005


Intellectual Property Statement

    The IETF takes no position regarding the validity or scope of any
    Intellectual Property Rights or other rights that might be claimed to
    pertain to the implementation or use of the technology described in
    this document or the extent to which any license under such rights
    might or might not be available; nor does it represent that it has
    made any independent effort to identify any such rights.  Information
    on the procedures with respect to rights in RFC documents can be
    found in BCP 78 and BCP 79.

    Copies of IPR disclosures made to the IETF Secretariat and any
    assurances of licenses to be made available, or the result of an
    attempt made to obtain a general license or permission for the use of
    such proprietary rights by implementers or users of this
    specification can be obtained from the IETF on-line IPR repository at
    http://www.ietf.org/ipr.

    The IETF invites any interested party to bring to its attention any
    copyrights, patents or patent applications, or other proprietary
    rights that may cover technology that may be required to implement
    this standard.  Please address the information to the IETF at
    ietf-ipr@ietf.org.


Disclaimer of Validity

    This document and the information contained herein are provided on an
    "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
    OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
    ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
    INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
    INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
    WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

    Copyright (C) The Internet Society (2005).  This document is subject
    to the rights, licenses and restrictions contained in BCP 78, and
    except as set forth therein, the authors retain all their rights.


Acknowledgment

    Funding for the RFC Editor function is currently provided by the
    Internet Society.




Leung, et al.            Expires August 5, 2005                [Page 15]