
Network Working Group                                           Ted Lemon
Internet Draft						    Nominum, Inc.
Obsoletes: draft-ietf-dhc-csr-00.txt			    January, 2000
                                                        Expires July 2000


	      The Classless Static Route Option for DHCP
		     <draft-ietf-dhc-csr-00.txt>

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   This document is an Internet-Draft.  Internet-Drafts are working
   documents of the Internet Engineering Task Force (IETF), its areas,
   and its working groups.  Note that other groups may also distribute
   working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress".

     The list of current Internet-Drafts can be accessed at
     http://www.ietf.org/ietf/1id-abstracts.txt

     The list of Internet-Draft Shadow Directories can be accessed at
     http://www.ietf.org/shadow.html.

Abstract

   This document defines a new DHCP option which is passed from the
   DHCP Server to the DHCP Client to configure a list of static routes
   in the client.   This option supersedes the Static Route option
   (option 33) defined in [2].

Introduction

   The IP protocol [4] uses routers to transmit packets from hosts
   connected to one IP subnet to hosts connected to a different IP
   subnet.   When an IP host (the source host) wishes to transmit a
   packet to another IP host (the destination), it first checks to see
   if the IP address of the destination host to see if it is on a
   subnet to which the source host is connected.    If the destination
   host's IP address is not on a subnet to which the source host is
   connected, then the source host consults its routing table to
   determine the IP address of the router that should be used to
   forward the packet to the destination host.

   The routing table on an IP host can be maintained in a variety of
   ways - using a routing information protocol such as RIP [5], ICMP
   router discovery [6,7] or using the DHCP Router option, defined in
   [2].

   In a network that already provides DHCP service, using DHCP to
   update the routing table on a DHCP client has several virtues.  It
   is efficient, since it makes use of messages that would have been
   sent anyway.    It is convenient - the DHCP server configuration
   is already being maintained, so maintaining routing information, at
   least on a relatively stable network, requires little extra work.
   If DHCP service is already in use, no additional infrastructure
   need be deployed.

   The DHCP protocol as defined in [1] and the options defined in [2]
   only provide a mechanism for installing a default route or
   installing a table of classed routes.   Classed routes are routes
   whose subnet mask is implicit in the subnet number - see section
   3.2 of [4] for details on classed routing.

   Classed routing is no longer in common use, so the DHCP Static
   Route option is no longer useful.  Currently, classless routing,
   described in [8] and [9], is the most commonly-deployed form of
   routing on the Internet.  In classless routing, IP addresses
   consist of a network number (the combination of the network number
   and subnet number described in [8]) and a host number.

   In classed IP, the network number and host number are derived from
   the IP address using a bitmask whose value is determined by the first
   few bits of the IP address.  In classless IP, the network number
   and host number are derived from the IP address using a seperate
   quantity, the subnet mask.   In order to determine the network to
   which a given route applies, an IP host must know both the network
   number AND the subnet mask for that network.

   The Static Routes option does not provide a subnet mask for each
   route - it is assumed that the subnet mask is implicit in whatever
   network number is specified in each route entry.   The Classless
   Static Routes option does provide a subnet mask for each entry, so
   that the subnet mask can be other than what would be determined
   using the algorithm specified in [4] and [8].

Definitions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY" and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [3].

   This document also uses the following terms:

      "DHCP client"

           DHCP client or "client" is an Internet host using DHCP to
           obtain configuration parameters such as a network address.

      "DHCP server"

           A DHCP server or "server" is an Internet host that returns
           configuration parameters to DHCP clients.

Classless Route Option Format

   The code for this option is TBD, and its minimum length is 12 bytes.
   This option can contain one or more static routes, each of which
   consists of a destination network number, a destination subnet mask
   and the IP address of the router that should be used to reach that
   destination.

    Code Len Destination 1       Subnet Mask 1       Router 1
   +----+---+----+----+----+----+----+----+----+----+----+----+----+----+
   | 33 | n | d1 | d2 | d3 | d4 | m1 | m2 | m3 | m4 | r1 | r2 | r3 | r4 |
   +----+---+----+----+----+----+----+----+----+----+----+----+----+----+

    Destination 2       Subnet Mask 2       Router 2
   +----+----+----+----+----+----+----+----+----+----+----+----+
   | d1 | d2 | d3 | d4 | m1 | m2 | m3 | m4 | r1 | r2 | r3 | r4 |
   +----+----+----+----+----+----+----+----+----+----+----+----+

   In the above example, two static routes are specified.

DHCP Client Behavior

   The DHCP client MAY use this option to install a set of static
   routes in its routing table.   A DHCP client that implements this
   option SHOULD use this option in preference to the Static routes
   option if both are present in a reply from the DHCP server.

Security Considerations

   DHCP currently provides no authentication or security mechanisms.
   Potential exposures to attack are discussed in section 7 of the DHCP
   protocol specification [1]. The Classless Static Routes option can
   be used to misdirect network traffic by providing incorrect IP
   addresses for routers.

References

   [1] Droms, R., "Dynamic Host Configuration Protocol", RFC 2131,
       Bucknell University, March 1997.
   [2] Alexander, S. and Droms, R., "DHCP Options and BOOTP Vendor
       Extensions", RFC 2132, Silicon Graphics, Inc., Bucknell
       University, March 1997.
   [3] Bradner, S., "Key words for use in RFCs to indicate requirement
       levels", RFC 2119, Harvard University, March 1997.
   [4] Postel, J., "Internet Protocol", RFC 791, USC/Information
       Sciences Institute, September 1981.
   [5] Hedrick, C.L., "Routing Information Protocol", RFC 1058,
       Rutgers University, June 1, 1988.
   [6] Deering, S., "ICMP Router Discovery Messages", RFC 1256,
       Xerox PARC, September 1991.
   [7] Postel, J., "Internet Control Message Protocol", RFC 792,
       USC/Information Sciences Institute, September 1981.
   [8] Mogul, J., Postel, J., "Internet Standard Subnetting
       Procedure", RFC950, Stanford University, USC/Information
       Sciences Institute, August 1985.
   [9] Pummill, T., Manning, B., "Variable Length Subnet Table For
       IPv4", RFC1878, Alantec, USC/Information Sciences Institute,
       December, 1995

Author Information

Ted Lemon
Nominum, Inc.
950 Charter Street
Redwood City, CA 94043
email: Ted.Lemon@nominum.com

Expiration

   This document will expire on July 31, 2000.

Full Copyright Statement

   Copyright (C) The Internet Society (2000).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
