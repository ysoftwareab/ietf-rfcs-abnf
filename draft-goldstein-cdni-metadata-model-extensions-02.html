<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>CDNI Metadata Model Extensions</title>
<meta content="Glenn Goldstein" name="author">
<meta content="Will Power" name="author">
<meta content="Guillaume Bichot" name="author">
<meta content="Alfonso Siloniz" name="author">
<meta content='
       
            The Content Delivery Network Interconnection (CDNI) Metadata interface enables interconnected Content Delivery Networks (CDNs) to exchange content distribution metadata in order to enable content acquisition and delivery. To facilitate a wider set of use cases such as Open Caching, this document describes extensions to the CDNI Metadata object model and its associated Capabilities model as documented in "CDNI Metadata" RFC8006 and "CDNI Request Routing: Footprint and Capabilities Semantics" RFC8008
            .
       
       
           This document is a reflection of the content in the Streaming Video Alliance specification titled "SVA Configuration Interface: Part 2 Extensions to CDNI Metadata Object Model".
       
    ' name="description">
<meta content="xml2rfc 3.12.3" name="generator">
<meta content="draft-goldstein-cdni-metadata-model-extensions-02" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.12.3
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.8.0
    MarkupSafe 2.0.1
    pycountry 22.1.10
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.6.0
    six 1.16.0
    WeasyPrint 52.5
-->
<link href="/tmp/draft-goldstein-cdni-metadata-model-extensions-02-wm6tg7dz.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">CDNI Metadata Model Extensions</td>
<td class="right">March 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Goldstein, et al.</td>
<td class="center">Expires 8 September 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-goldstein-cdni-metadata-model-extensions-02</dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a href="https://www.rfc-editor.org/rfc/rfc8006" class="eref">8006</a>, <a href="https://www.rfc-editor.org/rfc/rfc8008" class="eref">8008</a> (if approved)</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-03-07" class="published">7 March 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-09-08">8 September 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">G. Goldstein</div>
<div class="org">Lumen Technologies</div>
</div>
<div class="author">
      <div class="author-name">W. Power</div>
<div class="org">Lumen Technologies</div>
</div>
<div class="author">
      <div class="author-name">G. Bichot</div>
<div class="org">Broadpeak</div>
</div>
<div class="author">
      <div class="author-name">A. Siloniz</div>
<div class="org">Telefonica</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">CDNI Metadata Model Extensions</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">
            The Content Delivery Network Interconnection (CDNI) Metadata interface enables interconnected Content Delivery Networks (CDNs) to exchange content distribution metadata in order to enable content acquisition and delivery. To facilitate a wider set of use cases such as Open Caching, this document describes extensions to the CDNI Metadata object model and its associated Capabilities model as documented in "CDNI Metadata" RFC8006 and "CDNI Request Routing: Footprint and Capabilities Semantics" RFC8008
            .<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">
           This document is a reflection of the content in the Streaming Video Alliance specification titled "SVA Configuration Interface: Part 2 Extensions to CDNI Metadata Object Model".<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo-10">
<a href="#name-status-of-this-memo-10" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 8 September 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice-10">
<a href="#name-copyright-notice-10" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents-10">
<a href="#name-table-of-contents-10" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction-and-scope" class="xref">Introduction and Scope</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-terminology-5" class="xref">Terminology</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-requirements-language-5" class="xref">Requirements Language</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-cdni-metadata-model-extensi" class="xref">CDNI Metadata Model Extensions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-cache-control-metadata" class="xref">Cache Control Metadata</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.1">
                    <p id="section-toc.1-1.2.2.1.2.1.1"><a href="#section-2.1.1" class="xref">2.1.1</a>.  <a href="#name-micachepolicy" class="xref">MI.CachePolicy</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.2">
                    <p id="section-toc.1-1.2.2.1.2.2.1"><a href="#section-2.1.2" class="xref">2.1.2</a>.  <a href="#name-minegativecachepolicy" class="xref">MI.NegativeCachePolicy</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.3">
                    <p id="section-toc.1-1.2.2.1.2.3.1"><a href="#section-2.1.3" class="xref">2.1.3</a>.  <a href="#name-mistalecontentcachepolicy" class="xref">MI.StaleContentCachePolicy</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.4">
                    <p id="section-toc.1-1.2.2.1.2.4.1"><a href="#section-2.1.4" class="xref">2.1.4</a>.  <a href="#name-micachebypasspolicy" class="xref">MI.CacheBypassPolicy</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.5">
                    <p id="section-toc.1-1.2.2.1.2.5.1"><a href="#section-2.1.5" class="xref">2.1.5</a>.  <a href="#name-micomputedcachekey" class="xref">MI.ComputedCacheKey</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-origin-access-metadata" class="xref">Origin Access Metadata</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.1">
                    <p id="section-toc.1-1.2.2.2.2.1.1"><a href="#section-2.2.1" class="xref">2.2.1</a>.  <a href="#name-misourcemetadataextended" class="xref">MI.SourceMetadataExtended</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.1.2.1">
                        <p id="section-toc.1-1.2.2.2.2.1.2.1.1"><a href="#section-2.2.1.1" class="xref">2.2.1.1</a>.  <a href="#name-misourceextended" class="xref">MI.SourceExtended</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.1.2.2">
                        <p id="section-toc.1-1.2.2.2.2.1.2.2.1"><a href="#section-2.2.1.2" class="xref">2.2.1.2</a>.  <a href="#name-miloadbalancemetadata" class="xref">MI.LoadBalanceMetadata</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.2">
                    <p id="section-toc.1-1.2.2.2.2.2.1"><a href="#section-2.2.2" class="xref">2.2.2</a>.  <a href="#name-miauth" class="xref">MI.Auth</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.2.2.1">
                        <p id="section-toc.1-1.2.2.2.2.2.2.1.1"><a href="#section-2.2.2.1" class="xref">2.2.2.1</a>.  <a href="#name-miheaderauth" class="xref">MI.HeaderAuth</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.2.2.2">
                        <p id="section-toc.1-1.2.2.2.2.2.2.2.1"><a href="#section-2.2.2.2" class="xref">2.2.2.2</a>.  <a href="#name-miawsv4auth" class="xref">MI.AWSv4Auth</a></p>
</li>
                    </ul>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-edge-control-metadata" class="xref">Edge Control Metadata</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.1">
                    <p id="section-toc.1-1.2.2.3.2.1.1"><a href="#section-2.3.1" class="xref">2.3.1</a>.  <a href="#name-microssoriginpolicy" class="xref">MI.CrossOriginPolicy</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.1.2.1">
                        <p id="section-toc.1-1.2.2.3.2.1.2.1.1"><a href="#section-2.3.1.1" class="xref">2.3.1.1</a>.  <a href="#name-miaccesscontrolalloworigin" class="xref">MI.AccessControlAllowOrigin</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.2">
                    <p id="section-toc.1-1.2.2.3.2.2.1"><a href="#section-2.3.2" class="xref">2.3.2</a>.  <a href="#name-miallowcompress" class="xref">MI.AllowCompress</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.3">
                    <p id="section-toc.1-1.2.2.3.2.3.1"><a href="#section-2.3.3" class="xref">2.3.3</a>.  <a href="#name-mitraffictype" class="xref">MI.TrafficType</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.4">
                    <p id="section-toc.1-1.2.2.3.2.4.1"><a href="#section-2.3.4" class="xref">2.3.4</a>.  <a href="#name-miocnselection" class="xref">MI.OcnSelection</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.4.2.1">
                        <p id="section-toc.1-1.2.2.3.2.4.2.1.1"><a href="#section-2.3.4.1" class="xref">2.3.4.1</a>.  <a href="#name-miocndelivery" class="xref">MI.OcnDelivery</a></p>
</li>
                    </ul>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="xref">2.4</a>.  <a href="#name-processing-stage-metadata" class="xref">Processing Stage Metadata</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.1">
                    <p id="section-toc.1-1.2.2.4.2.1.1"><a href="#section-2.4.1" class="xref">2.4.1</a>.  <a href="#name-miprocessingstages" class="xref">MI.ProcessingStages</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.2">
                    <p id="section-toc.1-1.2.2.4.2.2.1"><a href="#section-2.4.2" class="xref">2.4.2</a>.  <a href="#name-mistagerules" class="xref">MI.StageRules</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.3">
                    <p id="section-toc.1-1.2.2.4.2.3.1"><a href="#section-2.4.3" class="xref">2.4.3</a>.  <a href="#name-miexpressionmatch" class="xref">MI.ExpressionMatch</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.4">
                    <p id="section-toc.1-1.2.2.4.2.4.1"><a href="#section-2.4.4" class="xref">2.4.4</a>.  <a href="#name-mistagemetadata" class="xref">MI.StageMetadata</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.5">
                    <p id="section-toc.1-1.2.2.4.2.5.1"><a href="#section-2.4.5" class="xref">2.4.5</a>.  <a href="#name-mirequesttransform" class="xref">MI.RequestTransform</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.6">
                    <p id="section-toc.1-1.2.2.4.2.6.1"><a href="#section-2.4.6" class="xref">2.4.6</a>.  <a href="#name-miresponsetransform" class="xref">MI.ResponseTransform</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.7">
                    <p id="section-toc.1-1.2.2.4.2.7.1"><a href="#section-2.4.7" class="xref">2.4.7</a>.  <a href="#name-misyntheticresponse" class="xref">MI.SyntheticResponse</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.8">
                    <p id="section-toc.1-1.2.2.4.2.8.1"><a href="#section-2.4.8" class="xref">2.4.8</a>.  <a href="#name-miheadertransform" class="xref">MI.HeaderTransform</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.9">
                    <p id="section-toc.1-1.2.2.4.2.9.1"><a href="#section-2.4.9" class="xref">2.4.9</a>.  <a href="#name-mihttpheader" class="xref">MI.HTTPHeader</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a href="#section-2.5" class="xref">2.5</a>.  <a href="#name-general-metadata" class="xref">General Metadata</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5.2.1">
                    <p id="section-toc.1-1.2.2.5.2.1.1"><a href="#section-2.5.1" class="xref">2.5.1</a>.  <a href="#name-miserviceids" class="xref">MI.ServiceIDs</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5.2.2">
                    <p id="section-toc.1-1.2.2.5.2.2.1"><a href="#section-2.5.2" class="xref">2.5.2</a>.  <a href="#name-miprivatefeaturelist" class="xref">MI.PrivateFeatureList</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5.2.2.2.1">
                        <p id="section-toc.1-1.2.2.5.2.2.2.1.1"><a href="#section-2.5.2.1" class="xref">2.5.2.1</a>.  <a href="#name-miprivatefeature" class="xref">MI.PrivateFeature</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5.2.3">
                    <p id="section-toc.1-1.2.2.5.2.3.1"><a href="#section-2.5.3" class="xref">2.5.3</a>.  <a href="#name-mirequestrouting" class="xref">MI.RequestRouting</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-metadata-expression-languag" class="xref">Metadata Expression Language</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-expression-variables" class="xref">Expression Variables</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-expression-operators-and-ke" class="xref">Expression Operators and keywords</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-expression-built-in-functio" class="xref">Expression Built-in Functions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.1">
                    <p id="section-toc.1-1.3.2.3.2.1.1"><a href="#section-3.3.1" class="xref">3.3.1</a>.  <a href="#name-basic-functions-type-conver" class="xref">Basic Functions: Type Conversions</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.2">
                    <p id="section-toc.1-1.3.2.3.2.2.1"><a href="#section-3.3.2" class="xref">3.3.2</a>.  <a href="#name-basic-functions-string-conv" class="xref">Basic Functions: String Conversions</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.3">
                    <p id="section-toc.1-1.3.2.3.2.3.1"><a href="#section-3.3.3" class="xref">3.3.3</a>.  <a href="#name-convenience-functions" class="xref">Convenience Functions</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="xref">3.4</a>.  <a href="#name-error-handling" class="xref">Error Handling</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.1">
                    <p id="section-toc.1-1.3.2.4.2.1.1"><a href="#section-3.4.1" class="xref">3.4.1</a>.  <a href="#name-compile-time-errors" class="xref">Compile Time Errors</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.2">
                    <p id="section-toc.1-1.3.2.4.2.2.1"><a href="#section-3.4.2" class="xref">3.4.2</a>.  <a href="#name-runtime-errors" class="xref">Runtime Errors</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="xref">3.5</a>.  <a href="#name-expression-examples" class="xref">Expression Examples</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5.2.1">
                    <p id="section-toc.1-1.3.2.5.2.1.1"><a href="#section-3.5.1" class="xref">3.5.1</a>.  <a href="#name-computedcachekey" class="xref">ComputedCacheKey</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5.2.2">
                    <p id="section-toc.1-1.3.2.5.2.2.1"><a href="#section-3.5.2" class="xref">3.5.2</a>.  <a href="#name-expressionmatch" class="xref">ExpressionMatch</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5.2.3">
                    <p id="section-toc.1-1.3.2.5.2.3.1"><a href="#section-3.5.3" class="xref">3.5.3</a>.  <a href="#name-responsetransform" class="xref">ResponseTransform</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5.2.4">
                    <p id="section-toc.1-1.3.2.5.2.4.1"><a href="#section-3.5.4" class="xref">3.5.4</a>.  <a href="#name-miserviceids-2" class="xref">MI.ServiceIDs</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-cdni-capabilities-extension" class="xref">CDNI Capabilities Extensions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-fci-metadata-object" class="xref">FCI Metadata Object</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-fci-model-extensions" class="xref">FCI Model Extensions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a href="#section-4.2.1" class="xref">4.2.1</a>.  <a href="#name-fciauthtypes" class="xref">FCI.AuthTypes</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a href="#section-4.2.2" class="xref">4.2.2</a>.  <a href="#name-fciprocessingstages" class="xref">FCI.ProcessingStages</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.3">
                    <p id="section-toc.1-1.4.2.2.2.3.1"><a href="#section-4.2.3" class="xref">4.2.3</a>.  <a href="#name-fcisourcemetadataextended" class="xref">FCI.SourceMetadataExtended</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4">
                    <p id="section-toc.1-1.4.2.2.2.4.1"><a href="#section-4.2.4" class="xref">4.2.4</a>.  <a href="#name-fcirequestrouting" class="xref">FCI.RequestRouting</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.5">
                    <p id="section-toc.1-1.4.2.2.2.5.1"><a href="#section-4.2.5" class="xref">4.2.5</a>.  <a href="#name-fciprivatefeatures" class="xref">FCI.PrivateFeatures</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.5.2.1">
                        <p id="section-toc.1-1.4.2.2.2.5.2.1.1"><a href="#section-4.2.5.1" class="xref">4.2.5.1</a>.  <a href="#name-fciprivatefeature" class="xref">FCI.PrivateFeature</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.6">
                    <p id="section-toc.1-1.4.2.2.2.6.1"><a href="#section-4.2.6" class="xref">4.2.6</a>.  <a href="#name-fciocnselection" class="xref">FCI.OcnSelection</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-iana-considerations-10" class="xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-cdni-payload-types" class="xref">CDNI Payload Types</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-security-considerations-9" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-conclusion" class="xref">Conclusion</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-references-8" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-normative-references-10" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-informative-references-8" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses-10" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="Introduction-and-Scope">
<section id="section-1">
      <h2 id="name-introduction-and-scope">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction-and-scope" class="section-name selfRef">Introduction and Scope</a>
      </h2>
<p id="section-1-1">The Content Delivery Network Interconnection (CDNI) Metadata interface enables interconnected Content Delivery Networks (CDNs) to exchange content distribution metadata in order to enable content acquisition and delivery. To facilitate a wider set of use cases encountered in the commercial CDN and Open Caching ecosystems, this document describes extensions to the CDNI Metadata object model and its associated Capabilities model.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">The objectives of this document are:<a href="#section-1-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-1-3">
<li id="section-1-3.1">Identify the requirements for extending <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span> and <span>[<a href="#RFC8008" class="xref">RFC8008</a>]</span> and specify a set of extensions that realize these requirements.<a href="#section-1-3.1" class="pilcrow">¶</a>
</li>
        <li id="section-1-3.2">Maintain backward compatibility with <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span> and <span>[<a href="#RFC8008" class="xref">RFC8008</a>]</span> by not altering the definitions or semantics of the original object model. All extensions are defined as new GenericMetadata Objects.<a href="#section-1-3.2" class="pilcrow">¶</a>
</li>
        <li id="section-1-3.3">Define the metadata object model independently of the APIs used to publish and retrieve metadata.<a href="#section-1-3.3" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-1-4">Scope this document ADDRESSES:<a href="#section-1-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-1-5">
<li id="section-1-5.1">Define and register CDNI GenericMetadata objects, as defined in section 4 of <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>.<a href="#section-1-5.1" class="pilcrow">¶</a>
</li>
        <li id="section-1-5.2">Define and register CDNI Payload Types, as defined in section 7.1 of <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>.<a href="#section-1-5.2" class="pilcrow">¶</a>
</li>
        <li id="section-1-5.3">Define Capabilities Objects that facilitate advertisement of a dCDN's support of these new metadata features, extending definitions in section 5 of <span>[<a href="#RFC8008" class="xref">RFC8008</a>]</span>.<a href="#section-1-5.3" class="pilcrow">¶</a>
</li>
        <li id="section-1-5.4">Specification of a Metadata Expression Language <a href="#cdni-mel" class="xref">Section 3</a> used within the metadata object model extensions.<a href="#section-1-5.4" class="pilcrow">¶</a>
</li>
        <li id="section-1-5.5">Provide JSON examples illustrating real-world CDN and Open Caching use cases.<a href="#section-1-5.5" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-1-6">Scope this document DOES NOT ADDRESS:<a href="#section-1-6" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-1-7">
<li id="section-1-7.1">Metadata object model definitions already specified in <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>.<a href="#section-1-7.1" class="pilcrow">¶</a>
</li>
        <li id="section-1-7.2">Interface API definitions for publishing and retrieving configuration metadata. The Metadata Interface (MI) as defined in <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span> can be used to retrieve metadata. To enable more sophisticated metadata configuration publishing workflows, the Streaming Video Alliance (SVA) Open Caching API <span>[<a href="#OC-CI" class="xref">OC-CI</a>]</span>, as documented in the SVA Configuration Interface Part 3 (Simple API) and Part 4 (Advanced API) specifications can be used.<a href="#section-1-7.2" class="pilcrow">¶</a>
</li>
      </ol>
<div id="terminology">
<section id="section-1.1">
        <h3 id="name-terminology-5">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-terminology-5" class="section-name selfRef">Terminology</a>
        </h3>
<p id="section-1.1-1">For consistency with other CDNI documents this document follows the CDNI convention of uCDN (upstream CDN) and dCDN (downstream CDN). It should be noted, however, that uCDN and dCDN are roles that can be played by a variety of entities in the distribution ecosystem. A Content Provider, for example, can play the roles of a uCDN, while a commercial CDN or Open Caching system can play either the roles of a uCDN or dCDN. Additionally, this document reuses the terminology defined in <span>[<a href="#RFC6707" class="xref">RFC6707</a>]</span>,<span>[<a href="#RFC7336" class="xref">RFC7336</a>]</span>, <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>, <span>[<a href="#RFC8007" class="xref">RFC8007</a>]</span> and <span>[<a href="#RFC8804" class="xref">RFC8804</a>]</span>.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">
        The following terms are used throughout this document:<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-3.1">
    API - Application Programming Interface<a href="#section-1.1-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.2">
    AWS - Amazon Web Services<a href="#section-1.1-3.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.3">
    CDN - Content Delivery Network<a href="#section-1.1-3.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.4">
    CDNi - CDN Interconnect<a href="#section-1.1-3.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.5">
    CORS - Cross-Origin Resource Sharing<a href="#section-1.1-3.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.6">
    CP - Content Provider<a href="#section-1.1-3.6" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.7">
    dCDN - Downstream CDN<a href="#section-1.1-3.7" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.8">
    DNS - Domain Name System<a href="#section-1.1-3.8" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.9">
    FCI - Footprint and Capabilities Advertising Interface<a href="#section-1.1-3.9" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.10">
    HREF - Hypertext Reference (link)<a href="#section-1.1-3.10" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.11">
    HTTP - Hypertext Transfer Protocol<a href="#section-1.1-3.11" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.12">
    IETF - Internet Engineering Task Force<a href="#section-1.1-3.12" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.13">
    ISP - Internet Service Provider<a href="#section-1.1-3.13" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.14">
    JSON - JavaScript Object Notation<a href="#section-1.1-3.14" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.15">
    MEL - Metadata Expression Language<a href="#section-1.1-3.15" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.16">
    Object - A collection of properties.<a href="#section-1.1-3.16" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.17">
    OC - Open Caching<a href="#section-1.1-3.17" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.18">
    OCN - Open Caching Node<a href="#section-1.1-3.18" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.19">
    PatternMatch - An object which matches a string pattern<a href="#section-1.1-3.19" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.20">
    UA - User Agent<a href="#section-1.1-3.20" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.21">
    uCDN - Upstream CDN<a href="#section-1.1-3.21" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.22">
    URI - Uniform Resource Identifier<a href="#section-1.1-3.22" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.23">
    URN - Uniform Resource Name<a href="#section-1.1-3.23" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.24">
    VOD - Video-on-Demand<a href="#section-1.1-3.24" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.25">
  W3C - World Wide Web Consortium<a href="#section-1.1-3.25" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<section id="section-1.2">
        <h3 id="name-requirements-language-5">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-requirements-language-5" class="section-name selfRef">Requirements Language</a>
        </h3>
<p id="section-1.2-1">
        The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
        "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in BCP 14
        <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>
          <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span>
        when, and only when, they appear in all capitals, as shown here.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
</section>
</section>
</div>
<div id="CDNI-Metadata-Model-Extensions">
<section id="section-2">
      <h2 id="name-cdni-metadata-model-extensi">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-cdni-metadata-model-extensi" class="section-name selfRef">CDNI Metadata Model Extensions</a>
      </h2>
<p id="section-2-1">This section details extensions to the CDNI Metadata model as defined in Section 4 of <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>, expressed as a set of new GenericMetadata objects. To preserve backward compatibility with <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>, no changes are proposed to the original set of GenericMetadata.<a href="#section-2-1" class="pilcrow">¶</a></p>
<span id="name-cdni-metadata-model-with-ex"></span><figure id="figure-1">
        <div class="alignLeft art-ascii-art art-text artwork" id="section-2-2.1">
<pre>
   +---------+      +---------+      +------------+
   |HostIndex++(*)+&gt;+HostMatch++(1)+&gt;+HostMetadata+------+(*)+-----+
   +---------+      +---------+      +------+-----+                |
                                            +                      |
                                           (*)                     +
                                            +                      V
   +-&gt; Contains or references               V         *****************
   (1) One and only one                +---------+    *GenericMetadata*
   (*) Zero or more               +---&gt;+PathMatch|    *     Objects   *&lt;+
                                  |    +----+---++    ***************** |
                                  +         +   +                  ^    |
                                 (*)       (1) (1) +------------+  |    |
                                  +         +   +-&gt;+PatternMatch|  |    |
                                  |         V      +------------+  |    |
                                  |  +------------+                |    |
                                  +--+PathMetadata+------+(*)+-----+    |
                                     +------------+                     |
                                                                        |
                                                                        |
                                                                        |
                                +---------------------------------------+
                                |
                                +
          New GenericMetadata Object by Categories (SVA)
+-------------------+   +-------------------+  +---------------------+
|   Cache Control   |   |   Origin Access   |  |Client Access Control|
+-------------------+   +-------------------+  +---------------------+

+-------------------+   +-------------------+  +---------------------+
|   Edge  Control   |   | Processing Stages |  |   General Metadata  |
+-------------------+   +-------------------+  +---------------------+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-cdni-metadata-model-with-ex" class="selfRef">CDNI Metadata Model with Extensions</a>
        </figcaption></figure>
<p id="section-2-3">The remainder of this section presents the extended set of GenericMetadata objects organized by the categories in the above diagram.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">Note: In the following sections, the term "mandatory-to-specify" is used to convey which properties MUST be included when serializing a given capability object.  When mandatory-to-specify is defined as "Yes" for an individual property, it means that if the object containing that property is included in a message, then the mandatory-to-specify property MUST also be included.<a href="#section-2-4" class="pilcrow">¶</a></p>
<div id="Cache-Control-Metadata">
<section id="section-2.1">
        <h3 id="name-cache-control-metadata">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-cache-control-metadata" class="section-name selfRef">Cache Control Metadata</a>
        </h3>
<p id="section-2.1-1">In addition to the cache control policies currently specified by CDNI metadata, content providers often need more fine-grained control over CDN caching, including scenarios where it is desirable to override or adjust cache-control headers from the origin.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">The following additional capabilities are needed for general CDN and open caching use cases:<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.1-3">
<li id="section-2.1-3.1">Positive Cache Control - Allows the uCDN to specify internal caching policies for the dCDN and external caching policies advertised to clients of the dCDN, overriding any cache control policy set in the response from the uCDN.<a href="#section-2.1-3.1" class="pilcrow">¶</a>
</li>
          <li id="section-2.1-3.2">Negative Cache Control - Allows the specification of caching policies based on error response codes received from the origin, allowing for fine-grained control of the downstream caching of error responses. For example, it may be desirable to cache error responses at the dCDN for a short period of time to prevent an overwhelmed origin service or uCDN from being flooded with requests.<a href="#section-2.1-3.2" class="pilcrow">¶</a>
</li>
          <li id="section-2.1-3.3">Cache Bypass Control - Allows content providers to bypass CDN caching when needed (typically for testing or performance benchmarking purposes).<a href="#section-2.1-3.3" class="pilcrow">¶</a>
</li>
          <li id="section-2.1-3.4">Stale Content Policies - Allows control over how the dCDN should process requests for stale content. For example, this policy allows the content provider to specify that stale content be served from cache for a specified time period while refreshes from the origin occur asynchronously.<a href="#section-2.1-3.4" class="pilcrow">¶</a>
</li>
          <li id="section-2.1-3.5">Dynamically Constructed Cache Keys - While the properties provided by the standard CDNI metadata Cache object provide some simple control over the construction of the cache key, it is typical in advanced CDN configurations to generate cache keys that are dynamically constructed via lightweight processing of various properties of the HTTP request and/or response. As an example, an origin may specify a cache key as a value returned in a specific HTTP response header. A rich expression language is provided to allow for such advanced cache key construction.<a href="#section-2.1-3.5" class="pilcrow">¶</a>
</li>
        </ol>
<div id="MI.CachePolicy">
<section id="section-2.1.1">
          <h4 id="name-micachepolicy">
<a href="#section-2.1.1" class="section-number selfRef">2.1.1. </a><a href="#name-micachepolicy" class="section-name selfRef">MI.CachePolicy</a>
          </h4>
<p id="section-2.1.1-1">CachePolicy is a new GenericMetadata object that allows for the uCDN to specify internal caching policies for the dCDN, as well as external caching policies advertised to clients of the dCDN (overriding any cache control policy set in the response from the uCDN).<a href="#section-2.1.1-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.1.1-2.1">
              <p id="section-2.1.1-2.1.1">Property: internal<a href="#section-2.1.1-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1.1-2.1.2.1">Description: Specifies the internal cache control policy to be used by the dCDN.<a href="#section-2.1.1-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.1-2.1.2.2">Type: Number in seconds encoded as string (e.g. 5 is a five second cache ) and/or a list of Enumeration [as-is|no-cache|no-store]<a href="#section-2.1.1-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.1-2.1.2.3">Mandatory-to-Specify: No. The default is to use the cache control policy specified in the response from the uCDN.<a href="#section-2.1.1-2.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.1.1-2.2">
              <p id="section-2.1.1-2.2.1">Property: external<a href="#section-2.1.1-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1.1-2.2.2.1">Description: Specifies the external cache control policy to be used by clients of this dCDN.<a href="#section-2.1.1-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.1-2.2.2.2">Type: Number in seconds encoded as string (e.g. 5 is a five second cache ) and/or a list of Enumeration [as-is|no-cache|no-store]<a href="#section-2.1.1-2.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.1-2.2.2.3">Mandatory-to-Specify: No. The default is to use the cache control policy specified in the response from the uCDN.<a href="#section-2.1.1-2.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.1.1-2.3">
              <p id="section-2.1.1-2.3.1">Property: force<a href="#section-2.1.1-2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1.1-2.3.2.1">Description: If set to True, the metadata interface cache policy defined in the MI.CachePolicy will override any cache control policy set in the response from the uCDN. If set to False, the MI.CachePolicy is only used if there is no cache control policy provided in the response from the uCDN.<a href="#section-2.1.1-2.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.1-2.3.2.2">Type: Boolean<a href="#section-2.1.1-2.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.1-2.3.2.3">Mandatory-to-Specify: No. The default is "False", which will apply the MI.CachePolicy only if no policy is provided in the response from the uCDN.<a href="#section-2.1.1-2.3.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.1.1-3">Example 1: An MI.CachePolicy that sets the internal cache control policy to five seconds. The external cache policy is set to 'no-cache':<a href="#section-2.1.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1.1-4">
<pre>{
  "generic-metadata-type": "MI.CachePolicy",
  "generic-metadata-value": {
    "internal": "5",
    "external": "no-cache",
    "force": "true"
  }
}
</pre><a href="#section-2.1.1-4" class="pilcrow">¶</a>
</div>
<p id="section-2.1.1-5"></p>
<p id="section-2.1.1-6">Example 2: An MI.CachePolicy that sets the internal cache control policy to "as-is" (keep the policy set in the response from the uCDN). The external cache policy is set to 'no-cache:<a href="#section-2.1.1-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1.1-7">
<pre>{
  "generic-metadata-type": "MI.CachePolicy",
  "generic-metadata-value": {
    "internal": "as-is",
    "external": "no-cache",
    "force": "true"
  }
}
</pre><a href="#section-2.1.1-7" class="pilcrow">¶</a>
</div>
<p id="section-2.1.1-8">Example 3: An MI.CachePolicy in the context of the processing stages model that sets a caching policy only if the HTTP status code received from the origin is a 200. In this example, the internal cache control policy is set to five seconds. The external cache policy is set to 'no-cache'. Force is set to 'False', indicating that the MI.CachePolicy only applies if there is no cache policy in the response from the uCDN.<a href="#section-2.1.1-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1.1-9">
<pre>{
  "generic-metadata-type": "MI.ProcessingStages",
  "generic-metadata-value": {
    "origin-response": [
      {
        "match": {
          "expression": "resp.status == 200"
      },
      "stage-metadata": {
          "generic-metadata": [
            {
              "generic-metadata-type": "MI.CachePolicy",
              "generic-metadata-value": {
                "internal": "5",
                "external": "no-cache",
                "force": "false"
              }
            }
          ]
        }
      }
    ]
  }
}
</pre><a href="#section-2.1.1-9" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.NegativeCachePolicy">
<section id="section-2.1.2">
          <h4 id="name-minegativecachepolicy">
<a href="#section-2.1.2" class="section-number selfRef">2.1.2. </a><a href="#name-minegativecachepolicy" class="section-name selfRef">MI.NegativeCachePolicy</a>
          </h4>
<p id="section-2.1.2-1">NegativeCachePolicy is a new GenericMetadata object that allows for the specification of caching policies based on error response codes received from the origin.<a href="#section-2.1.2-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.1.2-2.1">
              <p id="section-2.1.2-2.1.1">Property: error-codes<a href="#section-2.1.2-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1.2-2.1.2.1">Description: Array of HTTP response error status codes (See Sections 6.5 and 6.6 of <span>[<a href="#RFC7231" class="xref">RFC7231</a>]</span> , that if returned from the uCDN, will be cached using the cache policy defined by the cache-policy property.<a href="#section-2.1.2-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.2-2.1.2.2">Type: Array of HTTP response error status codes<a href="#section-2.1.2-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.2-2.1.2.3">Values: ["404", "503", "504"]<a href="#section-2.1.2-2.1.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.2-2.1.2.4">Mandatory-to-Specify: No. The default is to revert to <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span> behavior.<a href="#section-2.1.2-2.1.2.4" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.1.2-3.1">
              <p id="section-2.1.2-3.1.1">Property: cache-policy<a href="#section-2.1.2-3.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1.2-3.1.2.1">Description: MI.CachePolicy to apply to the HTTP response error status codes returned by the uCDN.<a href="#section-2.1.2-3.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.2-3.1.2.2">Mandatory-to-Specify: Yes<a href="#section-2.1.2-3.1.2.2" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.1.2-4">Example: A MI.NegativeCachePolicy that applies to HTTP error codes: "404", "503", "504" and sets the internal cache control policy to five seconds and external to 'no-cache'.<a href="#section-2.1.2-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1.2-5">
<pre>{
  "generic-metadata-type": "MI.NegativeCachePolicy",
  "generic-metadata-value": {
    "error-codes": [ "404", "503", "504" ],
    "cache-policy": {
      "internal": "5",
      "external": "no-cache",
      "force": "true"
    }
  }
}
</pre><a href="#section-2.1.2-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.StaleContentCachePolicy">
<section id="section-2.1.3">
          <h4 id="name-mistalecontentcachepolicy">
<a href="#section-2.1.3" class="section-number selfRef">2.1.3. </a><a href="#name-mistalecontentcachepolicy" class="section-name selfRef">MI.StaleContentCachePolicy</a>
          </h4>
<p id="section-2.1.3-1">MI.StaleContentCachePolicy is a new GenericMetadata object that allows the uCDN to specify the policy to use by a dCDN when responding with stale content.  For example, this policy allows the content provider to specify that stale content be served from cache for a specified time period while refreshes from the origin occur asynchronously.<a href="#section-2.1.3-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.1.3-2.1">
              <p id="section-2.1.3-2.1.1">Property: stale-while-revalidating<a href="#section-2.1.3-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1.3-2.1.2.1">Description: Instructs the dCDN to serve a stale version of a resource while refreshing the resource with the uCDN. When set to "True", the dCDN will return a previously cached version of a resource while the resource is refreshed with the uCDN in the background.<a href="#section-2.1.3-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.3-2.1.2.2">Type: Boolean<a href="#section-2.1.3-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.3-2.1.2.3">Mandatory-to-Specify: No. The default is False, which waits for the uCDN to refresh a resource before responding to the client.<a href="#section-2.1.3-2.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.1.3-2.2">
              <p id="section-2.1.3-2.2.1">Property: stale-if-error<a href="#section-2.1.3-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1.3-2.2.2.1">Description: Instructs the dCDN to serve a stale version of a resource if an error was received when trying to refresh the resource with the uCDN.  When set, the dCDN will return a previously cached version of a resource instead of caching the error response.  Per Section 4 of <span>[<a href="#RFC5861" class="xref">RFC5861</a>]</span>, an error is any situation that would result in a 500, 502, 503, or 504 HTTP response status code being returned<a href="#section-2.1.3-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.3-2.2.2.2">Type: Array of HTTP response error status codes. Example: [ "503", "504"]<a href="#section-2.1.3-2.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.3-2.2.2.3">Mandatory-to-Specify: No. The default is to cache the error response received from the uCDN.<a href="#section-2.1.3-2.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.1.3-2.3">
              <p id="section-2.1.3-2.3.1">Property: failed-refresh-ttl<a href="#section-2.1.3-2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1.3-2.3.2.1">Description: Instructs the dCDN to serve a stale version of a resource for the number of seconds specified in failed-refresh-ttl before trying to revalidate the resource with the uCDN.  Use of failed-refresh-ttl allows the load to be reduced on the uCDN during times of system stress.<a href="#section-2.1.3-2.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.3-2.3.2.2">Type: Integer<a href="#section-2.1.3-2.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.3-2.3.2.3">Mandatory-to-Specify: No<a href="#section-2.1.3-2.3.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.1.3-3">Example 1: A MI.StaleContentCachePolicy where stale-while-revalidating is true, instructing the dCDN to respond with a stale cached version of the resource while it refreshes the resource with the uCDN in the background:<a href="#section-2.1.3-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1.3-4">
<pre>{
  "generic-metadata-type": "MI.StaleContentCachePolicy",
  "generic-metadata-value": {
    "stale-while-revalidating": true
  }
}
</pre><a href="#section-2.1.3-4" class="pilcrow">¶</a>
</div>
<p id="section-2.1.3-5">Example 2: A MI.StaleContentCachePolicy where stale-if-error instructs the dCDN to use the stale cached resource if it receives an error of type 503 or 504 when trying to refresh the resource with the uCDN.<a href="#section-2.1.3-5" class="pilcrow">¶</a></p>
<p id="section-2.1.3-6">failed-refresh-ttl instructs the dCDN to use a five second cache TTL on the resource that receives an error when refreshing from the uCDN. That is, after five seconds, the dCDN will attempt to refresh the resource with the uCDN.<a href="#section-2.1.3-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1.3-7">
<pre>{
  "generic-metadata-type": "MI.StaleContentCachePolicy",
  "generic-metadata-value": {
    "stale-if-error": [ "503", "504" ],
    "failed-refresh-ttl": "5"
  }
}
</pre><a href="#section-2.1.3-7" class="pilcrow">¶</a>
</div>
<p id="section-2.1.3-8">Example 3: A MI.StaleContentCachePolicy where stale-while-revalidating is true, instructing the dCDN to respond with a stale cached version of the resource while it refreshes the resource with the uCDN in the background.<a href="#section-2.1.3-8" class="pilcrow">¶</a></p>
<p id="section-2.1.3-9">stale-if-error instructs the dCDN to use the stale cached resource if it receives an error of type 404, 503, or 504 when trying to refresh the resource with the uCDN.<a href="#section-2.1.3-9" class="pilcrow">¶</a></p>
<p id="section-2.1.3-10">failed-refresh-ttl instructs the dCDN to use a five second cache TTL on the resource that receives an error when refreshing from the uCDN. That is, after five seconds, the dCDN will attempt to refresh the resource with the uCDN.<a href="#section-2.1.3-10" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1.3-11">
<pre>{
  "generic-metadata-type": "MI.StaleContentCachePolicy",
  "generic-metadata-value": {
    "stale-while-revalidating": "true",
      "stale-if-error": [ "404", "503", "504" ],
      "failed-refresh-ttl": "5"
  }
}
</pre><a href="#section-2.1.3-11" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.CacheBypassPolicy">
<section id="section-2.1.4">
          <h4 id="name-micachebypasspolicy">
<a href="#section-2.1.4" class="section-number selfRef">2.1.4. </a><a href="#name-micachebypasspolicy" class="section-name selfRef">MI.CacheBypassPolicy</a>
          </h4>
<p id="section-2.1.4-1">CacheBypassPolicy is a new GenericMetadata object that allows a client request to be set as non-cacheable. It is expected that this feature will be used to allow clients to bypass cache when testing the uCDN fill path. Note: CacheBypassPolicy is typically used in conjunction with a path match or match expression on a header value or query parameter. Any content previously cached (by client requests that do not set CacheBypassPolicy) is not evicted.<a href="#section-2.1.4-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.1.4-2.1">
              <p id="section-2.1.4-2.1.1">Property:  bypass-cache<a href="#section-2.1.4-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1.4-2.1.2.1">Description: A Boolean value that can activate the feature for a given client request.  It is expected that this feature will be used within ProcessingStages to allow a client request to be marked to bypass cache.<a href="#section-2.1.4-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.4-2.1.2.2">Type: Boolean<a href="#section-2.1.4-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.4-2.1.2.3">Mandatory-to-Specify: No. The default is False.<a href="#section-2.1.4-2.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.1.4-3">Example 1: A MI.CacheBypassPolicy with the client HTTP header of: CDN-BYPASS:  "True":<a href="#section-2.1.4-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1.4-4">
<pre>{
  "generic-metadata-type": "MI.ProcessingStages",
  "generic-metadata-value": {
    "client-request": [
      {
        "match": {
          "expression": "req.h.cdn-bypass == 'true'"
        },
        "stage-metadata": {
          "generic-metadata": [
            {
              "generic-metadata-type": "MI.CacheBypassPolicy",
              "generic-metadata-value": {
                "bypass-cache": "true"
              }
            }
          ]
        }
      }
    ]
  }
}
</pre><a href="#section-2.1.4-4" class="pilcrow">¶</a>
</div>
<p id="section-2.1.4-5">Example 2: A MI.CacheBypassPolicy that applies to all requests where the host header is bypass.example.com:<a href="#section-2.1.4-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1.4-6">
<pre>{
  "generic-metadata-type": "MI.ProcessingStages",
  "generic-metadata-value": {
    "client-request": [
      {
        "match": {
          "expression": "req.h.host == 'bypass.example.com'"
      },
      "stage-metadata": {
          "generic-metadata": [
            {
              "generic-metadata-type": "MI.CacheBypassPolicy",
              "generic-metadata-value": {
                "bypass-cache": "true"
              }
            }
          ]
        }
      }
    ]
  }
}
</pre><a href="#section-2.1.4-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.ComputedCacheKey">
<section id="section-2.1.5">
          <h4 id="name-micomputedcachekey">
<a href="#section-2.1.5" class="section-number selfRef">2.1.5. </a><a href="#name-micomputedcachekey" class="section-name selfRef">MI.ComputedCacheKey</a>
          </h4>
<p id="section-2.1.5-1">While the properties provided by the standard CDNi metadata Cache object (See Section 4.2.6 of <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>) provide some simple control over the construction of the cache key, it is typical in advanced CDN configurations to generate cache keys that are dynamically constructed via lightweight processing of various properties of the HTTP request and/or response. As an example, an origin may specify a cache key as a value returned in a specific HTTP response header.<a href="#section-2.1.5-1" class="pilcrow">¶</a></p>
<p id="section-2.1.5-2">ComputedCacheKey is a new GenericMetadata object that allows for the specification of a cache key using the metadata expression language. Typical use cases would involve the construction of a cache key from one or more elements of the HTTP request. In cases where both the ComputedCacheKey and the Cache object are applied, the ComputedCacheKey will take precedence.<a href="#section-2.1.5-2" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.1.5-3.1">
              <p id="section-2.1.5-3.1.1">Property: expression<a href="#section-2.1.5-3.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1.5-3.1.2.1">Description: The expression that specifies how the cache key shall be constructed.<a href="#section-2.1.5-3.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.5-3.1.2.2">Type: String. An expression using [CDNI-MEL] to dynamically construct the cache key from elements of the HTTP request and/or response.<a href="#section-2.1.5-3.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.1.5-3.1.2.3">Mandatory-to-Specify: Yes<a href="#section-2.1.5-3.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.1.5-4">Example, using a custom request header as the cache key instead of the URI path:<a href="#section-2.1.5-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1.5-5">
<pre>{
  "generic-metadata-type": "MI.ComputedCacheKey",
  "generic-metadata-value": {
    "expression": "req.h.X-Cache-Key"
  }
}
</pre><a href="#section-2.1.5-5" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="Origin-Access-Metadata">
<section id="section-2.2">
        <h3 id="name-origin-access-metadata">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-origin-access-metadata" class="section-name selfRef">Origin Access Metadata</a>
        </h3>
<p id="section-2.2-1">The CDNI metadata definitions for sources (also known as origins in the CDN industry), are extended to provide the following capabilities required:<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.2-2">
<li id="section-2.2-2.1">Designation as to whether a source requires HTTPS access.<a href="#section-2.2-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-2.2-2.2">Specification of the source's TCP port number.<a href="#section-2.2-2.2" class="pilcrow">¶</a>
</li>
          <li id="section-2.2-2.3">Web root path specification for the source.<a href="#section-2.2-2.3" class="pilcrow">¶</a>
</li>
          <li id="section-2.2-2.4">Indication as to whether redirects should be followed.<a href="#section-2.2-2.4" class="pilcrow">¶</a>
</li>
          <li id="section-2.2-2.5">Support for additional forms of origin authentication.<a href="#section-2.2-2.5" class="pilcrow">¶</a>
</li>
          <li id="section-2.2-2.6">Multi-origin failover - The ability to specify a list of origins that can act as fallbacks to the primary origin. Failure rules can specify types of errors and timeout values that trigger failover.<a href="#section-2.2-2.6" class="pilcrow">¶</a>
</li>
          <li id="section-2.2-2.7">Multi-origin load balancing - The ability to specify a list of origins that can be selected by one of several balancing rules (round robin, content hash, IP hash).<a href="#section-2.2-2.7" class="pilcrow">¶</a>
</li>
          <li id="section-2.2-2.8">Specification of SNI configurations required for origin access.<a href="#section-2.2-2.8" class="pilcrow">¶</a>
</li>
          <li id="section-2.2-2.9">Specification of connection control parameters for origin access.<a href="#section-2.2-2.9" class="pilcrow">¶</a>
</li>
        </ol>
<div id="MI.SourceMetadataExtended">
<section id="section-2.2.1">
          <h4 id="name-misourcemetadataextended">
<a href="#section-2.2.1" class="section-number selfRef">2.2.1. </a><a href="#name-misourcemetadataextended" class="section-name selfRef">MI.SourceMetadataExtended</a>
          </h4>
<p id="section-2.2.1-1">SourceMetadataExtended is an alternative to the CDNI standard SourceMetadata object, which adds a property to specify load balancing across multiple sources, as well as a SourceExtended sub-object with additional attributes to the CDNI standard Source object. While both SourceMetadataExtended and SourceMetadata can be provided for backward compatibility, a dCDN that advertises capability for SourceMetadataExtended will ignore SourceMetadata if both are provided for a given host or path match.<a href="#section-2.2.1-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.2.1-2.1">
              <p id="section-2.2.1-2.1.1">Property: sources<a href="#section-2.2.1-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1-2.1.2.1">Description: Sources from which the dCDN can acquire content, listed in order of preference.<a href="#section-2.2.1-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.2.1-2.1.2.2">Type: Array of SourceExtended objects<a href="#section-2.2.1-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.2.1-2.1.2.3">Mandatory-to-Specify: No. Default is to use static configuration, out-of-band from the CDNI metadata interface.<a href="#section-2.2.1-2.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.2.1-2.2">
              <p id="section-2.2.1-2.2.1">Property:  load-balance<a href="#section-2.2.1-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1-2.2.2.1">Description: Specifies load balancing rules for the set of sources.<a href="#section-2.2.1-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.2.1-2.2.2.2">Type: LoadBalanceMetadata object<a href="#section-2.2.1-2.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.2.1-2.2.2.3">Mandatory-to-Specify: No<a href="#section-2.2.1-2.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.2.1-3">Example of a SourceMetadataExtended object with the associated LoadBalanceMetadata configuration object:<a href="#section-2.2.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.2.1-4">
<pre>{
  "generic-metadata-type": "MI.SourceMetadataExtended",
  "generic-metadata-value": {
    "sources": [
      {
        "endpoints": [
          "a.service123.ucdn.example",
          "b.service123.ucdn.example"
        ],
        "protocol": "http/1.1"
      },
      {
        "endpoints": [
          "origin.service123.example"
        ],
        "protocol": "http/1.1"
      }
    ],
    "load-balance": {
      "balance-algorithm": "content-hash",
      "balance-path-pattern": "^/prod/(.*)/.*\\.ts$"
    }
  }
}
</pre><a href="#section-2.2.1-4" class="pilcrow">¶</a>
</div>
<div id="MI.SourceExtended">
<section id="section-2.2.1.1">
            <h5 id="name-misourceextended">
<a href="#section-2.2.1.1" class="section-number selfRef">2.2.1.1. </a><a href="#name-misourceextended" class="section-name selfRef">MI.SourceExtended</a>
            </h5>
<p id="section-2.2.1.1-1">SourceExtended is an alternative to the CDNI standard Source object with additional metadata. It contains all the attributes of the <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span> Source object (acquisition-auth, endpoints, and protocol), with additions specified below.<a href="#section-2.2.1.1-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.2.1.1-2.1">
                <p id="section-2.2.1.1-2.1.1">Property: acquisition-auth<a href="#section-2.2.1.1-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1.1-2.1.2.1">Description: Authentication method to use when requesting content from this source. Same as <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>.<a href="#section-2.2.1.1-2.1.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.1.2.2">Type: Auth (see <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span> Section 4.2.7 and the new MI.Auth types in this specification)<a href="#section-2.2.1.1-2.1.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.1.2.3">Mandatory-to-Specify: No. Default is no authentication required.<a href="#section-2.2.1.1-2.1.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.2.1.1-2.2">
                <p id="section-2.2.1.1-2.2.1">Property: endpoints<a href="#section-2.2.1.1-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1.1-2.2.2.1">Description: Origins from which the dCDN can acquire content. If multiple endpoints are specified, they are all equal, i.e., the list is not ordered by preference. Same as <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>.<a href="#section-2.2.1.1-2.2.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.2.2.2">Type: Array of Endpoint objects (see <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span> Section 4.3.3)<a href="#section-2.2.1.1-2.2.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.2.2.3">Mandatory-to-Specify: Yes..<a href="#section-2.2.1.1-2.2.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.2.1.1-2.3">
                <p id="section-2.2.1.1-2.3.1">Property: protocol<a href="#section-2.2.1.1-2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1.1-2.3.2.1">Description: Network retrieval protocol to use when requesting content from this source. Same as <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>.<a href="#section-2.2.1.1-2.3.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.3.2.2">Type: Protocol (see <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span> Section 4.3.2)<a href="#section-2.2.1.1-2.3.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.3.2.3">Mandatory-to-Specify: Yes..<a href="#section-2.2.1.1-2.3.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.2.1.1-2.4">
                <p id="section-2.2.1.1-2.4.1">Property: origin-host<a href="#section-2.2.1.1-2.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1.1-2.4.2.1">Description: HTTP host header to pass to the endpoints when retrieving content from a uCDN. The host MUST conform to the Domain Name System (DNS) syntax defined in <span>[<a href="#RFC1034" class="xref">RFC1034</a>]</span> and <span>[<a href="#RFC1123" class="xref">RFC1123</a>]</span><a href="#section-2.2.1.1-2.4.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.4.2.2">Type: String<a href="#section-2.2.1.1-2.4.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.4.2.3">Mandatory-to-Specify: No. The default is to use the host name passed by the dCDN.<a href="#section-2.2.1.1-2.4.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.2.1.1-2.5">
                <p id="section-2.2.1.1-2.5.1">Property: webroot<a href="#section-2.2.1.1-2.5.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1.1-2.5.2.1">Description: The path element that is prepended to a resource's URI before retrieving content from a uCDN.<a href="#section-2.2.1.1-2.5.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.5.2.2">Type: String<a href="#section-2.2.1.1-2.5.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.5.2.3">Mandatory-to-Specify: No. The default is to use the original URI.<a href="#section-2.2.1.1-2.5.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.2.1.1-2.6">
                <p id="section-2.2.1.1-2.6.1">Property: follow-redirects<a href="#section-2.2.1.1-2.6.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1.1-2.6.2.1">Description: If the follow-redirects property is set to "True", HTTP redirect responses returned from a uCDN will be followed when retrieving content.  Otherwise, the HTTP redirect response is returned to the client.<a href="#section-2.2.1.1-2.6.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.6.2.2">Type: Boolean<a href="#section-2.2.1.1-2.6.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.6.2.3">Mandatory-to-Specify: No. The default is "True" (i.e., follow redirect responses from the uCDN).<a href="#section-2.2.1.1-2.6.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.2.1.1-2.7">
                <p id="section-2.2.1.1-2.7.1">Property: timeout-ms<a href="#section-2.2.1.1-2.7.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1.1-2.7.2.1">Description: A timeout (in milliseconds) to apply when connecting to a uCDN.  If the connection is not established within timeout-ms, this source is abandoned and the next source in the MI.SourceMetadataExtended sources array is tried.  Once a connection is established, timeout-ms is used on subsequent reads of data from the uCDN.<a href="#section-2.2.1.1-2.7.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.7.2.2">Type: Integer<a href="#section-2.2.1.1-2.7.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.7.2.3">Mandatory-to-Specify: No. The default is to revert to <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span> behavior.<a href="#section-2.2.1.1-2.7.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.2.1.1-2.8">
                <p id="section-2.2.1.1-2.8.1">Property: failover-errors<a href="#section-2.2.1.1-2.8.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1.1-2.8.2.1">Description: Array of HTTP response error status codes  (Section 6 of <span>[<a href="#RFC7231" class="xref">RFC7231</a>]</span>), that if returned from the uCDN, will trigger a failover to the next source in the MI.SourceMetadataExtended sources array.  If the uCDN returns an HTTP error code that is not in the failover-errors array, that error code is returned to the client of the dCDN.<a href="#section-2.2.1.1-2.8.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.8.2.2">Type: Array of HTTP response error status codes.<a href="#section-2.2.1.1-2.8.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.1-2.8.2.3">Mandatory-to-Specify: No. The default is to revert to <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span> behavior.<a href="#section-2.2.1.1-2.8.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
<p id="section-2.2.1.1-3"></p>
<p id="section-2.2.1.1-4">Example of a SourceExtended object that describes a pair of endpoints (servers) that the dCDN can use to acquire content for the applicable host and/or URI path:<a href="#section-2.2.1.1-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.2.1.1-5">
<pre>{
  "generic-metadata-type": "MI.SourceMetadataExtended",
  "generic-metadata-value": {
    "sources": [
      {
        "endpoints": [
          "a.service123.ucdn.example",
          "b.service123.ucdn.example:8443"
        ],
        "protocol": "https/1.1",
        "origin-host": "internal.example.com",
        "webroot": "/prod",
        "follow-redirects": false,
        "timeout-ms": 4000,
        "failover-errors": [ "502", "503", "504" ]
      },
      {
        "endpoints": [ "origin.service123.example" ],
        "protocol": "http/1.1",
        "webroot": "/prod",
        "follow-redirects": true,
        "timeout-ms": 8000
      }
    ]
  }
}
</pre><a href="#section-2.2.1.1-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.LoadBalanceMetadata">
<section id="section-2.2.1.2">
            <h5 id="name-miloadbalancemetadata">
<a href="#section-2.2.1.2" class="section-number selfRef">2.2.1.2. </a><a href="#name-miloadbalancemetadata" class="section-name selfRef">MI.LoadBalanceMetadata</a>
            </h5>
<p id="section-2.2.1.2-1">The LoadBalanceMetadata object defines how content acquisition requests are distributed over the SourceExtended objects listed in the SourceMetadataExtended object.<a href="#section-2.2.1.2-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.2.1.2-2.1">
                <p id="section-2.2.1.2-2.1.1">Property: balance-algorithm<a href="#section-2.2.1.2-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1.2-2.1.2.1">Description: Specifies the algorithm to be used when distributing content acquisition requests over the sources in a SourceMetadataExtended object. The available algorithms are random, content-hash, and ip-hash.<a href="#section-2.2.1.2-2.1.2.1" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
<p id="section-2.2.1.2-3">o   random: Requests are distributed over the sources in proportion to their associated weights.<a href="#section-2.2.1.2-3" class="pilcrow">¶</a></p>
<p id="section-2.2.1.2-4">o   content-hash: Requests are distributed over the sources in a consistent fashion, based on the balance-path-pattern property.<a href="#section-2.2.1.2-4" class="pilcrow">¶</a></p>
<p id="section-2.2.1.2-5">o   ip-hash: Requests are distributed over the sources in a consistent fashion based on the IP address of the client requestor.<a href="#section-2.2.1.2-5" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.2.1.2-6">
<li id="section-2.2.1.2-6.1">Type: Enumeration [random|content-hash|ip-hash] encoded as a lowercase string.<a href="#section-2.2.1.2-6.1" class="pilcrow">¶</a>
</li>
              <li id="section-2.2.1.2-6.2">Mandatory-to-Specify: No. The default is to use sources in preference order as defined in the SourceMetadataExtended object.<a href="#section-2.2.1.2-6.2" class="pilcrow">¶</a>
</li>
            </ol>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.2.1.2-7.1">
                <p id="section-2.2.1.2-7.1.1">Property:  balance-weights<a href="#section-2.2.1.2-7.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1.2-7.1.2.1">Description:  This property specifies the relative frequency that a source is used when distributing requests. For example, if there are three SourceExtended objects in a SourceMetadataExtended object with balance-weights [1, 2, 1], source 1 will receive 1/4 of the requests; source 2 will receive 2/4 of the requests; source 3 will receive 1/4 of the requests.<a href="#section-2.2.1.2-7.1.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.2-7.1.2.2">Type: Array of integers<a href="#section-2.2.1.2-7.1.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.2-7.1.2.3">Mandatory-to-Specify: No. The default is to use sources in preference order as defined in the SourceMetadataExtended object.<a href="#section-2.2.1.2-7.1.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.2.1.2-7.2">
                <p id="section-2.2.1.2-7.2.1">Property:  balance-path-pattern<a href="#section-2.2.1.2-7.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1.2-7.2.2.1">Description: This property specifies a regular expression pattern to apply to the URI when calculating the content hash used by the balance-algorithm. For example, "balance-path-pattern": "^/prod/(.*)/.*\.ts$" would distribute requests based on the URI but excluding the /prod prefix and the .ts segment file.<a href="#section-2.2.1.2-7.2.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.2-7.2.2.2">Type: String (regular expression)<a href="#section-2.2.1.2-7.2.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.1.2-7.2.2.3">Mandatory-to-Specify: No. The default is to use the original URI.<a href="#section-2.2.1.2-7.2.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
<p id="section-2.2.1.2-8">Example 1: The LoadBalanceMetadata object distributes content acquisition requests over sources using a content-hash algorithm:<a href="#section-2.2.1.2-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.2.1.2-9">
<pre>{
  "generic-metadata-type": "MI.LoadBalanceMetadata",
  "generic-metadata-value": {
    "balance-algorithm": "content-hash",
    "balance-path-pattern": "^/prod/(.*)/.*\\.ts$"
  }
}
</pre><a href="#section-2.2.1.2-9" class="pilcrow">¶</a>
</div>
<p id="section-2.2.1.2-10">Example 2: The LoadBalanceMetadata object distributes content acquisition requests over sources using the random algorithm:<a href="#section-2.2.1.2-10" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.2.1.2-11">
<pre>{
  "generic-metadata-type": "MI.LoadBalanceMetadata",
  "generic-metadata-value": {
    "balance-algorithm": "random",
    "balance-weights": [ 1, 2, 1 ]
  }
}
</pre><a href="#section-2.2.1.2-11" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="MI.Auth">
<section id="section-2.2.2">
          <h4 id="name-miauth">
<a href="#section-2.2.2" class="section-number selfRef">2.2.2. </a><a href="#name-miauth" class="section-name selfRef">MI.Auth</a>
          </h4>
<p id="section-2.2.2-1">To meet the typical industry requirements for authenticating CDNs to external origins, two new authentication types are defined.<a href="#section-2.2.2-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.2.2-2.1">
              <p id="section-2.2.2-2.1.1">auth-type: MI.HeaderAuth<a href="#section-2.2.2-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.2-2.1.2.1">Description: Header based authentication is used to pass an HTTP header (secret-name) and value (secret-value) to a uCDN when requesting content. The header name and value are agreed upon between parties out of band.<a href="#section-2.2.2-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.2.2-2.1.2.2">Note: We may want to add a way to encrypt or separately communicate the secret; this could be a general capability for CDNI.<a href="#section-2.2.2-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.2.2-2.1.2.3">auth-value: MI.HeaderAuth object specifying the header name and value (secret name, secret key) required for authenticated access to an origin. For more information, refer to the MI.HeaderAuth section below.<a href="#section-2.2.2-2.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.2.2-2.2">
              <p id="section-2.2.2-2.2.1">auth-type:  MI.AWSv4Auth<a href="#section-2.2.2-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.2-2.2.2.1">Description: Allows for the specification of a set of headers to be added to requests that are forwarded to an origin to enable Amazon Web Services (AWS) authentication, as documented by AWS (See Specifications &amp; Standards References).<a href="#section-2.2.2-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.2.2-2.2.2.2">auth-value: MI.AWSv4Auth object specifying the access parameters. For more information, refer to the MI.AWSv4Auth section below.<a href="#section-2.2.2-2.2.2.2" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<div id="MI.HeaderAuth">
<section id="section-2.2.2.1">
            <h5 id="name-miheaderauth">
<a href="#section-2.2.2.1" class="section-number selfRef">2.2.2.1. </a><a href="#name-miheaderauth" class="section-name selfRef">MI.HeaderAuth</a>
            </h5>
<p id="section-2.2.2.1-1">The HeaderAuth metadata object is used in the auth-value property of the<a href="#section-2.2.2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.2.2.1-2">Auth object, as defined in <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span> section 4.2.7, and may be applied to any<a href="#section-2.2.2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.2.2.1-3">source by including or referencing it under its authentication property. This method of authentication provides a simple capability for a mutually agreed upon header to be added by the CDN to all requests sent to a specific origin. Note that if a dynamically generated header value is required, the RequestTransform capabilities within StageProcessing can be used.<a href="#section-2.2.2.1-3" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.2.2.1-4.1">
                <p id="section-2.2.2.1-4.1.1">Property: header-name<a href="#section-2.2.2.1-4.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.2.1-4.1.2.1">Description: Name of the authentication header.<a href="#section-2.2.2.1-4.1.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.2.1-4.1.2.2">Type: String<a href="#section-2.2.2.1-4.1.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.2.1-4.1.2.3">Mandatory-to-Specify: Yes<a href="#section-2.2.2.1-4.1.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.2.2.1-4.2">
                <p id="section-2.2.2.1-4.2.1">Property: header-value<a href="#section-2.2.2.1-4.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.2.1-4.2.2.1">Description: Value of the authentication header (typically a pre-shared key). Note that this value SHOULD NOT be disclosed; it SHOULD be protected by some mechanism such as a secret-sharing API, which is outside the scope of this specification.<a href="#section-2.2.2.1-4.2.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.2.1-4.2.2.2">Type: String<a href="#section-2.2.2.1-4.2.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.2.1-4.2.2.3">Mandatory-to-Specify: Yes<a href="#section-2.2.2.1-4.2.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
<p id="section-2.2.2.1-5">Example Auth object for header authentication:<a href="#section-2.2.2.1-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.2.2.1-6">
<pre>{
  "generic-metadata-type": "MI.SourceMetadataExtended",
  "generic-metadata-value": {
    "sources": [
      {
        "endpoints": [ "origin.example.com" ],
        "protocol": "http/1.1",
        "acquisition-auth": {
          "generic-metadata-type": "MI.Auth",
          "generic-metadata-value": {
            "auth-type": "MI.HeaderAuth",
            "auth-value": {
              "header-name": "X-Origin-Auth",
              "header-value": "SECRETKEYJKSDHFSIFUI4UFH78HW4NF7"
            }
          }
        }
      }
    ]
  }
}
</pre><a href="#section-2.2.2.1-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.AWSv4Auth">
<section id="section-2.2.2.2">
            <h5 id="name-miawsv4auth">
<a href="#section-2.2.2.2" class="section-number selfRef">2.2.2.2. </a><a href="#name-miawsv4auth" class="section-name selfRef">MI.AWSv4Auth</a>
            </h5>
<p id="section-2.2.2.2-1">The AWSv4Auth metadata object is used in the auth-value property of the Auth object as defined in <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span> section 4.2.7, and may be applied to any source by including or referencing it under its authentication property.<a href="#section-2.2.2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2.2.2-2"></p>
<p id="section-2.2.2.2-3">AWSv4 authentication causes upstream requests to have a signature applied, following the method described in <span>[<a href="#AWSv4Method" class="xref">AWSv4Method</a>]</span>. A hash-based signature is calculated over the request URI and specified headers, and provided in an Authorization: header on the upstream request. The signature is tied to a pre-shared secret key specific to an AWS service, region, and key ID.<a href="#section-2.2.2.2-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.2.2.2-4">
<li id="section-2.2.2.2-4.1">We may want to add a way to encrypt or separately communicate the secret; this could be a general capability for CDNI.<a href="#section-2.2.2.2-4.1" class="pilcrow">¶</a>
</li>
              <li id="section-2.2.2.2-4.2">We may want to add optional properties that allow overriding the default headers to sign.<a href="#section-2.2.2.2-4.2" class="pilcrow">¶</a>
</li>
              <li id="section-2.2.2.2-4.3">We may want to add optional properties that allow the signature to be sent in a way other than with the Authorization: header (e.g., query strings are also supported).<a href="#section-2.2.2.2-4.3" class="pilcrow">¶</a>
</li>
            </ol>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.2.2.2-5.1">
                <p id="section-2.2.2.2-5.1.1">Property: access-key-id<a href="#section-2.2.2.2-5.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.2.2-5.1.2.1">Description: The preconfigured ID of the pre-shared authorization secret.<a href="#section-2.2.2.2-5.1.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.2.2-5.1.2.2">Type: String<a href="#section-2.2.2.2-5.1.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.2.2-5.1.2.3">Mandatory-to-Specify: Yes<a href="#section-2.2.2.2-5.1.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.2.2.2-5.2">
                <p id="section-2.2.2.2-5.2.1">Property: secret-access-key<a href="#section-2.2.2.2-5.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.2.2-5.2.2.1">Description: The pre-shared authorization secret, which is the basis of building the signature. This is a secret key that SHOULD NOT be disclosed; it SHOULD be protected by some mechanism such as a secret-sharing API, which is outside the scope of this specification.<a href="#section-2.2.2.2-5.2.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.2.2-5.2.2.2">Type: String<a href="#section-2.2.2.2-5.2.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.2.2-5.2.2.3">Mandatory-to-Specify: Yes<a href="#section-2.2.2.2-5.2.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.2.2.2-5.3">
                <p id="section-2.2.2.2-5.3.1">Property: aws-region<a href="#section-2.2.2.2-5.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.2.2-5.3.2.1">Description: The AWS region name that is hosting the service and shares the key ID and corresponding pre-shared secret.<a href="#section-2.2.2.2-5.3.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.2.2-5.3.2.2">Type: String<a href="#section-2.2.2.2-5.3.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.2.2-5.3.2.3">Mandatory-to-Specify: Yes<a href="#section-2.2.2.2-5.3.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.2.2.2-5.4">
                <p id="section-2.2.2.2-5.4.1">Property: aws-service<a href="#section-2.2.2.2-5.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.2.2-5.4.2.1">Description: The AWS service name that is serving the upstream requests.<a href="#section-2.2.2.2-5.4.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.2.2-5.4.2.2">Type: String<a href="#section-2.2.2.2-5.4.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.2.2-5.4.2.3">Mandatory-to-Specify: No.  It defaults to "s3" if not specified.<a href="#section-2.2.2.2-5.4.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.2.2.2-5.5">
                <p id="section-2.2.2.2-5.5.1">Property: host-name<a href="#section-2.2.2.2-5.5.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.2.2-5.5.2.1">Description: The host name to use as part of the signature calculation.<a href="#section-2.2.2.2-5.5.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.2.2-5.5.2.2">Type: String<a href="#section-2.2.2.2-5.5.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.2.2.2-5.5.2.3">Mandatory-to-Specify: No.  It defaults to using the value of the Host: header of the upstream request. This property is available in case the application needs to override that behavior.<a href="#section-2.2.2.2-5.5.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
<p id="section-2.2.2.2-6">Example Auth object for AWSv4 authentication:<a href="#section-2.2.2.2-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.2.2.2-7">
<pre>{
  "generic-metadata-type": "MI.SourceMetadataExtended",
  "generic-metadata-value": {
    "sources": [
      {
        "endpoints": [ "origin.example.com" ],
        "protocol": "http/1.1",
        "acquisition-auth": {
          "generic-metadata-type": "MI.Auth",
          "generic-metadata-value": {
            "auth-type": "MI.AWSv4Auth",
            "auth-value": {
              "access-key-id": "MYACCESSKEYID",
              "secret-access-key": "SECRETKEYJKSDHFSIUHKWRGHHF",
              "aws-region": "us-west-1"
            }
          }
        }
      }
    ]
  }
}
</pre><a href="#section-2.2.2.2-7" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="Edge-Control-Metadata">
<section id="section-2.3">
        <h3 id="name-edge-control-metadata">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-edge-control-metadata" class="section-name selfRef">Edge Control Metadata</a>
        </h3>
<p id="section-2.3-1">CDNs typically require a set of configuration metadata to inform processing of responses downstream (at the edge and in the user agent). This section specifies GenericMetadata objects to meet those requirements.<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<div id="MI.CrossOriginPolicy">
<section id="section-2.3.1">
          <h4 id="name-microssoriginpolicy">
<a href="#section-2.3.1" class="section-number selfRef">2.3.1. </a><a href="#name-microssoriginpolicy" class="section-name selfRef">MI.CrossOriginPolicy</a>
          </h4>
<p id="section-2.3.1-1">Delegation of traffic between a CDN over an open caching node based on HTTP redirection does change the domain name in the client requests. This represents a cross-origin request that must be managed appropriately using Cross-Origin Resource Sharing (CORS) headers in the responses.<a href="#section-2.3.1-1" class="pilcrow">¶</a></p>
<p id="section-2.3.1-2">The dynamic generation of CORS headers is typical in modern HTTP request processing and avoids CORS validation forwarded to the CDN origin servers, particularly with the preflight OPTIONS requests. The CDNI metadata model requires extensions to specify how a CDN or open caching node should generate and evaluate these headers.<a href="#section-2.3.1-2" class="pilcrow">¶</a></p>
<p id="section-2.3.1-3">Required capabilities:<a href="#section-2.3.1-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.3.1-4">
<li id="section-2.3.1-4.1">Set a default value for CORS response headers independent of the origin request header value.<a href="#section-2.3.1-4.1" class="pilcrow">¶</a>
</li>
            <li id="section-2.3.1-4.2">Match the origin request header with a list of valid values, including PatternMatch, to return or not return the CORS response headers.<a href="#section-2.3.1-4.2" class="pilcrow">¶</a>
</li>
            <li id="section-2.3.1-4.3">Set a list of custom headers that can be exposed to the client (expose headers).<a href="#section-2.3.1-4.3" class="pilcrow">¶</a>
</li>
            <li id="section-2.3.1-4.4">Support for preflight requests using the OPTIONS method, including custom header validation, expose headers, and methods.<a href="#section-2.3.1-4.4" class="pilcrow">¶</a>
</li>
            <li id="section-2.3.1-4.5">Support for credentials validation within CORS.<a href="#section-2.3.1-4.5" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-2.3.1-5">Simple CORS requests are those where both HTTP method and headers in the request are included in the safe list defined by the World Wide Web Consortium <span>[<a href="#W3C" class="xref">W3C</a>]</span>. The user agent (UA) request can include an origin header set to the URL domain of the webpage that the player runs. Depending on the metadata configuration, the logic to apply by the open caching node (OCN) is:<a href="#section-2.3.1-5" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.3.1-6">
<li id="section-2.3.1-6.1">Validation of the origin header - Metadata can include a list of valid domains to validate the request origin header. If it does not match, the CORS header must not be included in the response.<a href="#section-2.3.1-6.1" class="pilcrow">¶</a>
</li>
            <li id="section-2.3.1-6.2">WIldcard usage - Depending on the configuration, the resultant CORS header to include in the response will be the same as the request origin header, or a wildcard.<a href="#section-2.3.1-6.2" class="pilcrow">¶</a>
</li>
            <li id="section-2.3.1-6.3">If no validation of request is included in the origin header, set a default value for CORS response headers independent of the origin request header value.<a href="#section-2.3.1-6.3" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-2.3.1-7">When a UA makes a request that includes a method or headers that are not included in the safe-list, the client will make a CORS preflight request using the OPTIONS method to the resource including the origin header. If CORS is enabled and the requests passes the origin validation, the OCN SHOULD respond with the set of headers that indicate what is permitted for that resource, including one or more of the following:<a href="#section-2.3.1-7" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.3.1-8">
<li id="section-2.3.1-8.1">Allowed methods<a href="#section-2.3.1-8.1" class="pilcrow">¶</a>
</li>
            <li id="section-2.3.1-8.2">Allowed credentials<a href="#section-2.3.1-8.2" class="pilcrow">¶</a>
</li>
            <li id="section-2.3.1-8.3">Allowed request headers<a href="#section-2.3.1-8.3" class="pilcrow">¶</a>
</li>
            <li id="section-2.3.1-8.4">Max age that the OPTIONS request is valid<a href="#section-2.3.1-8.4" class="pilcrow">¶</a>
</li>
            <li id="section-2.3.1-8.5">Headers that can be exposed to the client<a href="#section-2.3.1-8.5" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-2.3.1-9">CrossoriginPolicy is a GenericMetadata object that allows for the specification of dynamically generated CORS headers.<a href="#section-2.3.1-9" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.3.1-10.1">
              <p id="section-2.3.1-10.1.1">Property: allow-origin<a href="#section-2.3.1-10.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.1-10.1.2.1">Description: Validation of simple CORS requests.<a href="#section-2.3.1-10.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.1-10.1.2.2">Type: Object MI.AccessControlAllowOrigin<a href="#section-2.3.1-10.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.1-10.1.2.3">Values: One element for each of the following properties.<a href="#section-2.3.1-10.1.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.1-10.1.2.4">Mandatory-to-Specify: Yes<a href="#section-2.3.1-10.1.2.4" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.3.1-10.2">
              <p id="section-2.3.1-10.2.1">Property: expose-headers<a href="#section-2.3.1-10.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.1-10.2.2.1">Description: A list of values the OCN will include in the Access-Control-Expose-Headers response header to a preflight request.<a href="#section-2.3.1-10.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.1-10.2.2.2">Type: Array of strings<a href="#section-2.3.1-10.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.1-10.2.2.3">Mandatory-to-Specify: No<a href="#section-2.3.1-10.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.3.1-10.3">
              <p id="section-2.3.1-10.3.1">Property: allow-methods<a href="#section-2.3.1-10.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.1-10.3.2.1">Description: A list of values the OCN will include in the Access-Control-Allow-Methods response header to a preflight request.<a href="#section-2.3.1-10.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.1-10.3.2.2">Type: Array of strings<a href="#section-2.3.1-10.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.1-10.3.2.3">Mandatory-to-Specify: No<a href="#section-2.3.1-10.3.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.3.1-10.4">
              <p id="section-2.3.1-10.4.1">Property: allow-headers<a href="#section-2.3.1-10.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.1-10.4.2.1">Description: A list of values the OCN will include in the Access-Control-Allow-Headers response header to a preflight request.<a href="#section-2.3.1-10.4.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.1-10.4.2.2">Type: Array of strings<a href="#section-2.3.1-10.4.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.1-10.4.2.3">Mandatory-to-Specify: No<a href="#section-2.3.1-10.4.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.3.1-10.5">
              <p id="section-2.3.1-10.5.1">Property: allow-credentials<a href="#section-2.3.1-10.5.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.1-10.5.2.1">Description: The value the OCN will include in the Access-Control-Allow-Credentials response header to a preflight request.<a href="#section-2.3.1-10.5.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.1-10.5.2.2">Type: Boolean<a href="#section-2.3.1-10.5.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.1-10.5.2.3">Mandatory-to-Specify: No<a href="#section-2.3.1-10.5.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.3.1-10.6">
              <p id="section-2.3.1-10.6.1">Property: max-age<a href="#section-2.3.1-10.6.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.1-10.6.2.1">Description: The value the OCN will include in the Access-Control-Max-Age response header to a preflight request.<a href="#section-2.3.1-10.6.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.1-10.6.2.2">Type: Integer<a href="#section-2.3.1-10.6.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.1-10.6.2.3">Mandatory-to-Specify: No<a href="#section-2.3.1-10.6.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<div id="MI.AccessControlAllowOrigin">
<section id="section-2.3.1.1">
            <h5 id="name-miaccesscontrolalloworigin">
<a href="#section-2.3.1.1" class="section-number selfRef">2.3.1.1. </a><a href="#name-miaccesscontrolalloworigin" class="section-name selfRef">MI.AccessControlAllowOrigin</a>
            </h5>
<p id="section-2.3.1.1-1">The MI.AccessControlAllowOrigin object has the following properties:<a href="#section-2.3.1.1-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.3.1.1-2.1">
                <p id="section-2.3.1.1-2.1.1">Property: allow-list<a href="#section-2.3.1.1-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.1.1-2.1.2.1">Description: List of valid URLs that will be used to match the request origin header. The Origin header is a HTTP extension. Its value is a version of the Referer header in some specific requests, and used for Cross Origin requests. . Permitted values are schema://hostname[:port]<a href="#section-2.3.1.1-2.1.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.3.1.1-2.1.2.2">Type: Array of PatternMatch objects<a href="#section-2.3.1.1-2.1.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.3.1.1-2.1.2.3">Mandatory-to-Specify: Yes<a href="#section-2.3.1.1-2.1.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.3.1.1-2.2">
                <p id="section-2.3.1.1-2.2.1">Property: wildcard-return<a href="#section-2.3.1.1-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.1.1-2.2.2.1">Description: If "True", the OCN will include a wildcard (*) in the Access-Control-Allow-Origin response header. If "False", the OCN will reflect the request origin header in the Access-Control-Allow-Origin response header.<a href="#section-2.3.1.1-2.2.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.3.1.1-2.2.2.2">Type: Boolean<a href="#section-2.3.1.1-2.2.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.3.1.1-2.2.2.3">Mandatory-to-Specify: Yes<a href="#section-2.3.1.1-2.2.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
<p id="section-2.3.1.1-3">The examples below demonstrate how to configure response headers dynamically for CORS validation.<a href="#section-2.3.1.1-3" class="pilcrow">¶</a></p>
<p id="section-2.3.1.1-4">Example 1: A simple CORS validation configuration:<a href="#section-2.3.1.1-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.3.1.1-5">
<pre>{
  "generic-metadata-type": "MI.CrossoriginPolicy",
  "generic-metadata-value": {
    "allow-origin": {
      "allow-list": [
        {
          "pattern": "*"
        }
      ],
      "wildcard-return": true
    }
  }
}
</pre><a href="#section-2.3.1.1-5" class="pilcrow">¶</a>
</div>
<p id="section-2.3.1.1-6"></p>
<p id="section-2.3.1.1-7">Example 2: Validation of a preflight request when some of the headers included in the subsequent object request are not included in the CORS specification safelist:<a href="#section-2.3.1.1-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.3.1.1-8">
<pre>{
  "generic-metadata-type": "MI.CrossoriginPolicy",
  "generic-metadata-value": {
    "allow-origin": {
      "allow-list": [
        {
          "pattern": "*://sourcepage.example.com"
        },
        "wildcard-return": false
      },
      "allow-methods": [ "GET", "POST" ],
      "allow-credentials": true,
      "allow-headers": [ "X-PINGOTHER", "Content-Type" ],
      "expose-headers": [ "X-User", "Authorization" ],
      "max-age": 3600
    }
  }
}
</pre><a href="#section-2.3.1.1-8" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="MI.AllowCompress">
<section id="section-2.3.2">
          <h4 id="name-miallowcompress">
<a href="#section-2.3.2" class="section-number selfRef">2.3.2. </a><a href="#name-miallowcompress" class="section-name selfRef">MI.AllowCompress</a>
          </h4>
<p id="section-2.3.2-1">Downstream CDNs often have the ability to compress HTTP response bodies in cases where the client has declared that it can accept compressed responses (via an Accept-Encoding header), but the source/origin has returned an uncompressed response.<a href="#section-2.3.2-1" class="pilcrow">¶</a></p>
<p id="section-2.3.2-2">The specific compression algorithm used by the dCDN is negotiated by the client's Accept-Encoding header according to <span>[<a href="#RFC7694" class="xref">RFC7694</a>]</span> (including q= preferences) and the compression capabilities available on the dCDN.<a href="#section-2.3.2-2" class="pilcrow">¶</a></p>
<p id="section-2.3.2-3">In addition, HeaderTransform allows the uCDN to normalize, or modify, the Accept-Encoding header to allow for fine-grain control over the selection of the compression algorithm (e.g., gzip, compress, deflate, br, etc.).<a href="#section-2.3.2-3" class="pilcrow">¶</a></p>
<p id="section-2.3.2-4">AllowCompress is a new GenericMetadata object that allows the dCDN to compress content before sending to the client.<a href="#section-2.3.2-4" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.3.2-5.1">
              <p id="section-2.3.2-5.1.1">Property: allow-compress<a href="#section-2.3.2-5.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.2-5.1.2.1">Description:  If set to "True", then the dCDN will try to compress the response to the client based on the Accept-Encoding request header.<a href="#section-2.3.2-5.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.2-5.1.2.2">Type: Boolean<a href="#section-2.3.2-5.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.2-5.1.2.3">Values: True or False<a href="#section-2.3.2-5.1.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.2-5.1.2.4">Mandatory-to-Specify: No. The default is "False".<a href="#section-2.3.2-5.1.2.4" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.3.2-6">Example 1: An MI.AllowCompress that allows manifests (*.m3u8) to be compressed by the dCDN:<a href="#section-2.3.2-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.3.2-7">
<pre>{
  "match": {
    "expression": "req.h.uri *= '*.m3u8'"
  },
  "stage-metadata": {
    "generic-metadata": [
      {
        "generic-metadata-type": "MI.AllowCompress",
        "generic-metadata-value": {
          "allow-compress": "true"
        }
      }
    ]
  }
}
</pre><a href="#section-2.3.2-7" class="pilcrow">¶</a>
</div>
<p id="section-2.3.2-8">Example 2: An MI.AllowCompress that allows manifests (*.m3u8) to be compressed by the dCDN but normalizing the client's Accept-Encoding header:<a href="#section-2.3.2-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.3.2-9">
<pre>{
  "match": {
    "expression": "req.h.accept-encoding *= '*gzip*'"
  },
  "stage-metadata": {
    "generic-metadata": [
      {
        "generic-metadata-type": "MI.AllowCompress",
        "generic-metadata-value": {
          "allow-compress": "true"
        }
      }
    ]
  }
}
</pre><a href="#section-2.3.2-9" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.TrafficType">
<section id="section-2.3.3">
          <h4 id="name-mitraffictype">
<a href="#section-2.3.3" class="section-number selfRef">2.3.3. </a><a href="#name-mitraffictype" class="section-name selfRef">MI.TrafficType</a>
          </h4>
<p id="section-2.3.3-1">Content delivery networks often apply different infrastructure, network routes, and internal metadata for different types of traffic. Delivery of large static objects (such as software downloads), may, for example, use different network routes than video stream delivery. In an HTTP adaptive bitrate video service, every video title corresponds to a set of video files and descriptors according to different video protocols, and this is independent of the type of service (Video-on-Demand, Live, Catch-up, etc.).<a href="#section-2.3.3-1" class="pilcrow">¶</a></p>
<p id="section-2.3.3-2">The way the video service is consumed by the user agents can vary. For instance, a segment that belongs to a Video-on-Demand (VoD) title can be requested for every moment the content is available for the user agents to consume, while a segment of live content will be only requested as long as the time-shift duration is configured for that service. Knowing those differences, a CDN or OCN provider can implement specific strategies that will maximize performance and thereby provide more available capacity to the upstream provider. It should be noted that the dCDNs handling of the traffic types is implementation-specific and not prescribed here.<a href="#section-2.3.3-2" class="pilcrow">¶</a></p>
<p id="section-2.3.3-3">TrafficType metadata defines a set of descriptors that characterize either the type or usage of the traffic, enabling CDNs and OCNs to apply any internal configuration rules without exposing an unnecessary number of internal details. Note that the interpretation of these traffic types and application of rules such as rate limiting or delivery pacing are implementation specific.<a href="#section-2.3.3-3" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.3.3-4.1">
              <p id="section-2.3.3-4.1.1">Property: traffic-type<a href="#section-2.3.3-4.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.3-4.1.2.1">Description: A literal that defines the traffic type. uCDN will use the literal that is most representative of the traffic being delegated.<a href="#section-2.3.3-4.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.3-4.1.2.2">Type: Enumeration [vod, live, object-download] encoded as lowercase string<a href="#section-2.3.3-4.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.3-4.1.2.3">Mandatory-to-Specify: Yes<a href="#section-2.3.3-4.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.3.3-4.2">
              <p id="section-2.3.3-4.2.1">Property: hints<a href="#section-2.3.3-4.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.3-4.2.2.1">Description: Other traffic characteristics that the uCDN can indicate to the dCDN as suggestions for service optimization. Accepts free-form unconstrained values.<a href="#section-2.3.3-4.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.3-4.2.2.2">Type: Array of strings<a href="#section-2.3.3-4.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.3-4.2.2.3">Mandatory-to-Specify: No<a href="#section-2.3.3-4.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.3.3-5">A TrafficType definition example for HostMetadata:<a href="#section-2.3.3-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.3.3-6">
<pre>{
  "generic-metadata-type": "MI.TrafficType",
  "generic-metadata-value": {
    "traffic-type": "vod",
    "hints": [ "low-latency", "catch-up" ]
  }
}
</pre><a href="#section-2.3.3-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.OcnSelection">
<section id="section-2.3.4">
          <h4 id="name-miocnselection">
<a href="#section-2.3.4" class="section-number selfRef">2.3.4. </a><a href="#name-miocnselection" class="section-name selfRef">MI.OcnSelection</a>
          </h4>
<p id="section-2.3.4-1">Configuration metadata is required to permit several levels of OCN selection policies. For example, in a mobile network, several physical locations are possible (i.e., candidates) for hosting the OCN that will take charge in the delegation for the uCDN. This is the case when the cache is virtualized and deployed dynamically. Depending on the OCN selection policy (which may be a cost driver), the dCDN may attempt to favor certain types of caches at the edge, for example. The default OCN selection policy might be "best-effort". Another one might be linked to the network characteristics like "Edge" or ("average latency&lt; 10ms").<a href="#section-2.3.4-1" class="pilcrow">¶</a></p>
<p id="section-2.3.4-2">OcnSelection is a new GenericMetadata object that allows the uCDN to indicate to the dCDN a preference in terms of OCN selection.<a href="#section-2.3.4-2" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.3.4-3.1">
              <p id="section-2.3.4-3.1.1">Property: ocn-delivery<a href="#section-2.3.4-3.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.4-3.1.2.1">Description: Instructs the dCDN to perform delegation operating a particular medium and/or a transport arrangement.<a href="#section-2.3.4-3.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.4-3.1.2.2">Type: Object MI.OcnDelivery<a href="#section-2.3.4-3.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.4-3.1.2.3">Mandatory-to-Specify: No. At least one of the two properties, ocn-type or ocn-delivery, must be present.<a href="#section-2.3.4-3.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.3.4-3.2">
              <p id="section-2.3.4-3.2.1">Property: ocn-type<a href="#section-2.3.4-3.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.4-3.2.2.1">Description: Instructs the dCDN to perform delegation operating the type of open caching nodes.<a href="#section-2.3.4-3.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.4-3.2.2.2">Type: A string corresponding to one of the open caching node types announced by the dCDN through the FCI interface.<a href="#section-2.3.4-3.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.4-3.2.2.3">Mandatory-to-Specify: No. At least one of the two properties, ocn-type or ocn-delivery, must be present.<a href="#section-2.3.4-3.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.3.4-3.3">
              <p id="section-2.3.4-3.3.1">Property: ocn-selection<a href="#section-2.3.4-3.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.4-3.3.2.1">Description: This property enforces the selection of OCNs, considering the ocn-type and/or the ocn-delivery properties. "False" means best-effort.<a href="#section-2.3.4-3.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.4-3.3.2.2">Type: string. "attempt-or-failed" and "attempt-or-besteffort" mean that the delegation must be attempted considering the ocn-type and/or the ocn-delivery properties. If not possible, it is considered as an error and either fails (configuration failure) or the dCDN continues with a best-effort procedure. Last, "best effort" means the dCDN tries its best to fulfil the requested ocn-selection policy.<a href="#section-2.3.4-3.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.3.4-3.3.2.3">Mandatory-to-Specify: No. Best-effort is the default OCN selection policy.<a href="#section-2.3.4-3.3.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<div id="MI.OcnDelivery">
<section id="section-2.3.4.1">
            <h5 id="name-miocndelivery">
<a href="#section-2.3.4.1" class="section-number selfRef">2.3.4.1. </a><a href="#name-miocndelivery" class="section-name selfRef">MI.OcnDelivery</a>
            </h5>
<p id="section-2.3.4.1-1">An ocn-delivery object contains the following properties:<a href="#section-2.3.4.1-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.3.4.1-2.1">
                <p id="section-2.3.4.1-2.1.1">Property: ocn-medium<a href="#section-2.3.4.1-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.4.1-2.1.2.1">Description: Instructs the dCDN to perform delegation operating a particular medium. The following values are specified: "SATELLITE".<a href="#section-2.3.4.1-2.1.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.3.4.1-2.1.2.2">Type: String<a href="#section-2.3.4.1-2.1.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.3.4.1-2.1.2.3">Mandatory-to-Specify: No. Either the ocn-medium property or the ocn-transport property must be present.<a href="#section-2.3.4.1-2.1.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.3.4.1-2.2">
                <p id="section-2.3.4.1-2.2.1">Property: ocn-transport<a href="#section-2.3.4.1-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.4.1-2.2.2.1">Description: Instructs the dCDN to perform delegation operating a particular transport arrangement. The following values are specified: "MABR".<a href="#section-2.3.4.1-2.2.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.3.4.1-2.2.2.2">Type: String<a href="#section-2.3.4.1-2.2.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.3.4.1-2.2.2.3">Mandatory-to-Specify: No. At least one of the two properties (ocn-medium or ocn-transport) must be present.<a href="#section-2.3.4.1-2.2.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="Processing-Stage-Metadata">
<section id="section-2.4">
        <h3 id="name-processing-stage-metadata">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-processing-stage-metadata" class="section-name selfRef">Processing Stage Metadata</a>
        </h3>
<p id="section-2.4-1">It is typical in CDN configurations to define matching rules and metadata that are to be applied at specific stages in the request processing pipeline. For example, it may be required to append a host header prior to forwarding a request to an origin, or modify the response returned from an origin prior to storing in the cache.<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<span id="name-processing-stages"></span><figure id="figure-2">
          <div class="alignLeft art-ascii-art art-text artwork" id="section-2.4-2.1">
<pre>
        +-------+    +---------------+    +--------+
        |       +---&gt;|A             B+---&gt;|        |
        |       |    |               |    |  uCDN  |
        |  UA   |    |     dCDN      |    |        |
        |       |    |               |    | Source |
        |       |&lt;---+D             C|&lt;---+        |
        +-------+    +---------------+    +--------+
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-processing-stages" class="selfRef">Processing stages</a>
          </figcaption></figure>
<p id="section-2.4-3">Processing stages:<a href="#section-2.4-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.4-4">
<li id="section-2.4-4.1">clientRequest - Rules run on the client request prior to further processing.<a href="#section-2.4-4.1" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-4.2">originRequest - Rules run prior to making a request to the origin.<a href="#section-2.4-4.2" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-4.3">originResponse - Rules run after a response is received from the origin and before being placed in the cache.<a href="#section-2.4-4.3" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-4.4">clientResponse - Rules run prior to sending the response to the client. If the response is from the cache, rules are applied to the response retrieved from the cache prior to sending to the client.<a href="#section-2.4-4.4" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-2.4-5">Requirements:<a href="#section-2.4-5" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.4-6">
<li id="section-2.4-6.1">Header Matching - While CDNI metadata defines some basic matching rules for host names and pattern patching on paths, CDN and open caching use cases often require matching on specific fields in Hypertext Transfer Protocol (HTTP) request and response headers to set metadata. A typical example may be matching on a user agent string to set access controls or matching on a mime-type header to set caching rules. A rich expression matching syntax that allows matching on any combination of host, path, and header values covers most typical use cases.<a href="#section-2.4-6.1" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-6.2">Expression  Matching - Header matching alone is not always sufficient for identifying a set of requests or responses that require specific metadata. CDN and open caching systems often require a rich set of matching rules, with full regular expressions and Boolean combinations of matching parameters for host, path, and header elements of a request. In typical CDN implementations, this capability is provided by a rich expression language that can be embedded in the metadata configurations.<a href="#section-2.4-6.2" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-6.3">URI Modifications - In processing HTTP requests, modifications to the request Uniform Resource Identifier (URI) are often required for uses such as collapsing multiple paths to a common cache key or normalizing file extension naming conventions before making a request to the origin. In cases where the modified URI needs to be constructed dynamically, an expression language is provided that allows elements of requests and responses to be concatenated with string literals.<a href="#section-2.4-6.3" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-6.4">Header Modifications - In processing HTTP requests, it is often required to modify HTTP request or response headers at one of the processing stages, requiring CDNI metadata to have the capability to update any field in an HTTP request or response header. It should be noted that certain HTTP headers (such as Set-Cookie) have multiple occurrences in a request or response, thereby requiring that we allow for add and replace designations for header modification. In cases where a header value needs to be constructed dynamically, an expression language is provided that allows elements of requests and responses to be concatenated with string literals. All of the following capabilities are required at each processing stage:<a href="#section-2.4-6.4" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-6.5">Add Request Header Field - Add a header name/value to the request, along with any headers of the same name that may already be present.<a href="#section-2.4-6.5" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-6.6">Replace Request Header Field - Add a header name/value to the request, replacing any headers of the same name that may already be present.<a href="#section-2.4-6.6" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-6.7">Delete Request Header Field - Delete all occurrences of the named header from the request.<a href="#section-2.4-6.7" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-6.8">Add Response Header Field - Add a header name/value to the response, along with any headers of the same name that may already be present.<a href="#section-2.4-6.8" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-6.9">Replace Response Header Field - Add a header name/value to the response, replacing any headers of the same name that may already be present.<a href="#section-2.4-6.9" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-6.10">Delete Response Header Field - Delete all occurrences of the named header from the response.<a href="#section-2.4-6.10" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-6.11">Synthetic Responses - It is quite common in CDN configurations to specify a synthetic response be generated based on inspection of aspects of the original request or the origin response. The synthetic response capability allows for the specification of a set of response headers, a status code, and a response body. In cases where a header value or the synthetic response body needs to be constructed dynamically, an expression language is provided that allows elements of requests and responses to be concatenated with string literals.<a href="#section-2.4-6.11" class="pilcrow">¶</a>
</li>
        </ol>
<div id="MI.ProcessingStages">
<section id="section-2.4.1">
          <h4 id="name-miprocessingstages">
<a href="#section-2.4.1" class="section-number selfRef">2.4.1. </a><a href="#name-miprocessingstages" class="section-name selfRef">MI.ProcessingStages</a>
          </h4>
<p id="section-2.4.1-1">A ProcessingStages object is a new GenericMetadata which describes the matching rules, metadata, and transformations to be applied at specific stages in the request processing pipeline. The processing rules and transformations are defined as a child data model referenced within a ProcessingStages object, as defined below.<a href="#section-2.4.1-1" class="pilcrow">¶</a></p>
<span id="name-cdni-processingstages-metad"></span><figure id="figure-3">
            <div class="alignLeft art-ascii-art art-text artwork" id="section-2.4.1-2.1">
<pre>
                        +----------------+
                        |ProcessingStages|
                        +----------------+
                               (*)
                                |
       +----------------+-------+---------+----------------+
       |                |                 |                |
       v                v                 v                v
+-------------+ +-------------+ +--------------+ +--------------+
|ClientRequest| |OriginRequest| |OriginResponse| |ClientResponse|
+-------------+ +-------------+ +--------------+ +--------------+
      (*)             (*)              (*)              (*)
       |               |                |                |
       +---------------+----------------+----------------+
       |
       |                    +---------------+
       |          +--------&gt;|ExpressionMatch|
       |          |         +---------------+
       |          |
       |          |                                 *****************
       |         (*)                           +---&gt;*GenericMetadata*
       |    +----------+    +-------------+    |    *     Objects   *
       +---&gt;+StageRules+---&gt;|StageMetadata+(*)-+    *****************
            +----------+    +-------------+
                             (*)      (*)
                              |        |
                      +-------+        +-----------+
                      |                            |
                      v                            v
            +----------------+              +-----------------+
            |RequestTransform|(*)-+    +-(*)|ResponseTransform|
            +----------------+    |    |    +-----------------+
                    (*)           |    |
                     |            |    |
                     |            v    v
                     |       +---------------+
                     |       |HeaderTransform|(*)-+
                     |       +---------------+    |
                     |                            |
                     v                            |
             +-----------------+                  |
             |SyntheticResponse|(*)--+            v
             +-----------------+     |      +----------+
                                     +-----&gt;|HTTPHeader|
                                            +----------+
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-cdni-processingstages-metad" class="selfRef">CDNi ProcessingStages metadata model with contained objects</a>
            </figcaption></figure>
<p id="section-2.4.1-3">Each of the four processing stages is represented by an array of StageRules objects, with each StageRules object defining criteria along with metadata that MUST be applied if the match applies to "True". It should be noted that the StageRules objects in the array are evaluated and processed in order. A possible future extension to this processing model could allow for an if-else structure, where processing for a stage is halted upon the first match of a StageRules expression.<a href="#section-2.4.1-3" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.4.1-4.1">
              <p id="section-2.4.1-4.1.1">Property: client-request<a href="#section-2.4.1-4.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.1-4.1.2.1">Description: Allows for the specification of conditional metadata to be applied at the client request processing stages, as defined in the Rule Processing Stages section. The StageRules in the array are evaluated in order.<a href="#section-2.4.1-4.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.1-4.1.2.2">Type: Array of StageRules objects<a href="#section-2.4.1-4.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.1-4.1.2.3">Mandatory-to-Specify: No<a href="#section-2.4.1-4.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.1-4.2">
              <p id="section-2.4.1-4.2.1">Property: origin-request<a href="#section-2.4.1-4.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.1-4.2.2.1">Description: Allows for the specification of conditional metadata to be applied at origin request processing stages, as defined in the Rule Processing Stages section. The StageRules in the array are evaluated in order.<a href="#section-2.4.1-4.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.1-4.2.2.2">Type: Array of StageRules objects<a href="#section-2.4.1-4.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.1-4.2.2.3">Mandatory-to-Specify: No<a href="#section-2.4.1-4.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.1-4.3">
              <p id="section-2.4.1-4.3.1">Property: origin-response<a href="#section-2.4.1-4.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.1-4.3.2.1">Description: Allows for the specification of conditional metadata to be applied at origin response processing stages, as defined in the Rule Processing Stages section. The StageRules in the array are evaluated in order.<a href="#section-2.4.1-4.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.1-4.3.2.2">Type: Array of StageRules objects<a href="#section-2.4.1-4.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.1-4.3.2.3">Mandatory-to-Specify: No<a href="#section-2.4.1-4.3.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.1-4.4">
              <p id="section-2.4.1-4.4.1">Property: client-response<a href="#section-2.4.1-4.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.1-4.4.2.1">Description: Allows for the specification of conditional metadata to be applied at client response processing stages, as defined in the Rule Processing Stages section. The StageRules in the array are evaluated in order.<a href="#section-2.4.1-4.4.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.1-4.4.2.2">Type: Array of StageRules objects<a href="#section-2.4.1-4.4.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.1-4.4.2.3">Mandatory-to-Specify: No<a href="#section-2.4.1-4.4.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.4.1-5">Example specifying all four processing stages. In this example, the client-request stage has two StageRules, appling one set of metadata if "ExpressionMatch1" evaluates to "True" and applying another set of metadata if "ExpressionMatch2" evaluates to "True".<a href="#section-2.4.1-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.4.1-6">
<pre>{
  "generic-metadata-type": "MI.ProcessingStages",
  "generic-metadata-value": {
    "client-request" : [
      {
        "match" : &lt; ExpressionMatch1 for conditional metadata &gt;
        "stage-metadata" : &lt;StageMetadata1 for clientRequest stage&gt;,
      },
      {
        "match" : &lt;Additional ExpressionMatch2 for conditional metadata &gt;
        "stage-metadata" : &lt;StageMetadata2 for clientRequest stage&gt;,
      }
    ],
    "origin-request" : [{
      "match" : &lt;Optional ExpressionMatch for conditional metadata &gt;
      "stage-metadata" : &lt;StageMetadata for originRequest stage&gt;,
    }],
    "origin-response" : [{
      "match" : &lt;Optional ExpressionMatch for conditional metadata &gt;
      "stage-metadata" : &lt;StageMetadata for originResponse stage&gt;,
    }],
    "client-response" : [{
      "match" : &lt;Optional ExpressionMatch for conditional metadata &gt;
      "stage-metadata" : &lt;StageMetadata for clientResponse stage&gt;,
    }]
  }
}
</pre><a href="#section-2.4.1-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.StageRules">
<section id="section-2.4.2">
          <h4 id="name-mistagerules">
<a href="#section-2.4.2" class="section-number selfRef">2.4.2. </a><a href="#name-mistagerules" class="section-name selfRef">MI.StageRules</a>
          </h4>
<p id="section-2.4.2-1">A StageRules object is used within the context of ProcessingStages to define elements in a list of match rules and stage-specific metadata and transformations that MUST be applied conditionally on a rich expression match.<a href="#section-2.4.2-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.4.2-2.1">
              <p id="section-2.4.2-2.1.1">Property: match<a href="#section-2.4.2-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.2-2.1.2.1">Description: An ExpressionMatch object encapsulating a rich expression using the CDNI Metadata Expression Language [CDNI-MEL] to evaluate aspects of the HTTP request and/or response. The stage-metadata rules are only applied if the match evaluates to "True" or if no match expression is provided<a href="#section-2.4.2-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.2-2.1.2.2">Type: ExpressionMatch object<a href="#section-2.4.2-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.2-2.1.2.3">Mandatory-to-Specify: No. The stage-metadata rules are always applied if no match expression is provided. This would be the case when stage-metadata should be applied unconditionally within the context of the higher-level host and path matches.<a href="#section-2.4.2-2.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.2-2.2">
              <p id="section-2.4.2-2.2.1">Property: stage-metadata<a href="#section-2.4.2-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.2-2.2.2.1">Description: Specifies the set of StageMetadata to be applied at the processing stage if the match expression evaluates to "True" or is not present.<a href="#section-2.4.2-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.2-2.2.2.2">Type: Array of StageMetadata objects, applied in order.<a href="#section-2.4.2-2.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.2-2.2.2.3">Mandatory-to-Specify: Yes<a href="#section-2.4.2-2.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.4.2-3">An example of StageRules that are applied just after responses are received from the origin. In this example, receipt of a response status code of 304 from the origin indicates that CachePolicy metadata SHOULD be applied (as specified via an external HREF), and that response headers SHOULD be modified (X-custom-response-header added and ETag deleted).<a href="#section-2.4.2-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.4.2-4">
<pre>{
  "match": {
    "expression": "resp.status == 304"
  },
  "stage-metadata": {
    "generic-metadata": [
      {
        "type": "MI.CachePolicy",
        "href": "https://metadata.ucdn.example/origin_response_cache"
      }
    ],
    "response-transform": {
      "headers": {
        "add": [
          {
            "name": "X-custom-response-header",
            "value": "header-value"
          }
        ],
        "delete": [ "ETag" ]
      }
    }
  }
}
</pre><a href="#section-2.4.2-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.ExpressionMatch">
<section id="section-2.4.3">
          <h4 id="name-miexpressionmatch">
<a href="#section-2.4.3" class="section-number selfRef">2.4.3. </a><a href="#name-miexpressionmatch" class="section-name selfRef">MI.ExpressionMatch</a>
          </h4>
<p id="section-2.4.3-1">The ExpressionMatch object contains the rich expression that must evaluate to "True" for the StageMetadata to be applied for the specific StageRules. Defining expressions as stand-alone objects allows for sets of reusable match expressions to be reused via metadata reference linking.<a href="#section-2.4.3-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.4.3-2.1">
              <p id="section-2.4.3-2.1.1">Property: expression<a href="#section-2.4.3-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.3-2.1.2.1">Description: A rich expression using CDNI-MEL to evaluate aspects of the HTTP request and/or response. See documentation on the Metadata Expression Language for details on the expression of matching variables and syntax.<a href="#section-2.4.3-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.3-2.1.2.2">Type: String, using CDNI-MEL syntax. See the METADATA EXPRESSION LANGUAGE (CDNI-MEL) section.<a href="#section-2.4.3-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.3-2.1.2.3">Mandatory-to-Specify: Yes<a href="#section-2.4.3-2.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.4.3-3">Example of ExpressionMatch on the referrer and user agent request headers:<a href="#section-2.4.3-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.4.3-4">
<pre>{
  "expression" : "req.h.user-agent *= '*Safari*' and req.h.referrer == 'www.myhost.com'"
}</pre><a href="#section-2.4.3-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.StageMetadata">
<section id="section-2.4.4">
          <h4 id="name-mistagemetadata">
<a href="#section-2.4.4" class="section-number selfRef">2.4.4. </a><a href="#name-mistagemetadata" class="section-name selfRef">MI.StageMetadata</a>
          </h4>
<p id="section-2.4.4-1">The StageMetadata object contains GenericMetadata and HTTP request/response transformations that MUST be applied for a StageRules match. The following table defines the processing stages where request and response transformations are possible:<a href="#section-2.4.4-1" class="pilcrow">¶</a></p>
<span id="name-stagemetadata-stages"></span><table class="left" id="table-1">
            <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-stagemetadata-stages" class="selfRef">StageMetadata stages</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Stage</th>
                <th class="text-left" rowspan="1" colspan="1">request-transform</th>
                <th class="text-left" rowspan="1" colspan="1">response-transform</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">clientRequest</td>
                <td class="text-left" rowspan="1" colspan="1">yes</td>
                <td class="text-left" rowspan="1" colspan="1">yes</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">originRequest</td>
                <td class="text-left" rowspan="1" colspan="1">yes</td>
                <td class="text-left" rowspan="1" colspan="1">yes</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">originResponse</td>
                <td class="text-left" rowspan="1" colspan="1">no</td>
                <td class="text-left" rowspan="1" colspan="1">yes</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">clientResponse</td>
                <td class="text-left" rowspan="1" colspan="1">no</td>
                <td class="text-left" rowspan="1" colspan="1">yes</td>
              </tr>
            </tbody>
          </table>
<p id="section-2.4.4-3">Note that for the stages where both request and response transformations are allowed, it is possible to specify both. This may be the case if, for example, the request URI needs alteration for cache-key generation and the response headers need to be manipulated.<a href="#section-2.4.4-3" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.4.4-4.1">
              <p id="section-2.4.4-4.1.1">Property: generic-metadata<a href="#section-2.4.4-4.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.4-4.1.2.1">Description: Specifies the set of GenericMetadata to be applied for a StageRules match. A typical use case would be the application of a CachePolicy or TimeWindowACL conditionally on matching HTTP headers. Support for this capability is optional and can be advertised via feature-flags in the FCI interface.<a href="#section-2.4.4-4.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.4-4.1.2.2">Type: Array of GenericMetadata, applied in order. Note that not all GenericMetadata object types may be applicable at all processing stages.<a href="#section-2.4.4-4.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.4-4.1.2.3">Mandatory-to-Specify: No. The generic-metadata property would not be needed when StageMetadata is used to only specify request or response transformations, such as modifications of HTTP headers.<a href="#section-2.4.4-4.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.4-4.2">
              <p id="section-2.4.4-4.2.1">Property: request-transform<a href="#section-2.4.4-4.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.4-4.2.2.1">Description: Specifies a transformation to be applied to the HTTP request for a StageRules match. The transformation can be the modification of any request header and/or the modification of the URI. Modifications are applied such that downstream processing stages receive the modified HTTP request as their input. Support for this capability is optional and can be advertised via feature-flags in the FCI interface.<a href="#section-2.4.4-4.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.4-4.2.2.2">Type: RequestTransform object<a href="#section-2.4.4-4.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.4-4.2.2.3">Mandatory-to-Specify: No<a href="#section-2.4.4-4.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.4-4.3">
              <p id="section-2.4.4-4.3.1">Property: response-transform<a href="#section-2.4.4-4.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.4-4.3.2.1">Description: Specifies a transformation to be applied to the HTTP response for a StageRules match. The transformation can be the modification of any response header, HTTP response status code, or the generation of a synthetic response. Modifications are applied such that downstream processing stages receive the modified HTTP response as their input. Support for this capability is optional and can be advertised via feature-flags in the FCI interface.<a href="#section-2.4.4-4.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.4-4.3.2.2">Type: ResponseTransform object<a href="#section-2.4.4-4.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.4-4.3.2.3">Mandatory-to-Specify: No<a href="#section-2.4.4-4.3.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.4.4-5">Example of a StageMetadata object:<a href="#section-2.4.4-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.4.4-6">
<pre>{
  "generic-metadata" :  [{
    &lt; Optional list of generic metadata to apply at this stage &gt;
  }],
  "request-transform" : {
    "headers" : { &lt;list of request headers to add/replace/delete&gt; },
    "uri" : &lt; URI rewrite, either static or dynamically constructed&gt;
  }
  "response-transform" : {
    "headers" : { &lt;list of response headers to add/replace/delete&gt; },
    "response-status" : &lt;Status either static or dynamically constructed &gt;
  }
}
</pre><a href="#section-2.4.4-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.RequestTransform">
<section id="section-2.4.5">
          <h4 id="name-mirequesttransform">
<a href="#section-2.4.5" class="section-number selfRef">2.4.5. </a><a href="#name-mirequesttransform" class="section-name selfRef">MI.RequestTransform</a>
          </h4>
<p id="section-2.4.5-1">The RequestTransform object contains metadata for transforming the HTTP request for a specific StageRules object. The transformation can be the modification of any request header and/or the modification of the URI. Modifications are applied such that downstream processing stages receive the modified HTTP request as their input.<a href="#section-2.4.5-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.4.5-2.1">
              <p id="section-2.4.5-2.1.1">Property: headers<a href="#section-2.4.5-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.5-2.1.2.1">Description: A HeaderTransform object specifying HTTP request headers to add, replace, or delete.<a href="#section-2.4.5-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.5-2.1.2.2">Type: HeaderTransform object<a href="#section-2.4.5-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.5-2.1.2.3">Mandatory-to-Specify: No<a href="#section-2.4.5-2.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.5-2.2">
              <p id="section-2.4.5-2.2.1">Property: uri<a href="#section-2.4.5-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.5-2.2.2.1">Description: Replacement value for the HTTP request.<a href="#section-2.4.5-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.5-2.2.2.2">Type: String. Either a literal (static string) or an expression using CDNI-MEL to dynamically construct a URI value from elements of the HTTP request and/or response.<a href="#section-2.4.5-2.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.5-2.2.2.3">Mandatory-to-Specify: No<a href="#section-2.4.5-2.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.5-2.3">
              <p id="section-2.4.5-2.3.1">Property: uri-is-expression<a href="#section-2.4.5-2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.5-2.3.2.1">Description: Flag to signal whether the URI is a static string literal or a CDNI-MEL expression that needs to be dynamically evaluated.<a href="#section-2.4.5-2.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.5-2.3.2.2">Type: Boolean<a href="#section-2.4.5-2.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.5-2.3.2.3">Mandatory-to-Specify: No. The default is "False", indicating that the URI is a string literal and does not need to be evaluated.<a href="#section-2.4.5-2.3.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.4.5-3">Example of a RequestTransform object illustrating a dynamically constructed URI rewrite:<a href="#section-2.4.5-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.4.5-4">
<pre>{
  "request-transform" : {
    "headers" : { &lt;Optional list of request headers to add/replace/delete&gt; },
    "uri" :    "req.uri.path",
    "uri-is-expression" : true
 }
</pre><a href="#section-2.4.5-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.ResponseTransform">
<section id="section-2.4.6">
          <h4 id="name-miresponsetransform">
<a href="#section-2.4.6" class="section-number selfRef">2.4.6. </a><a href="#name-miresponsetransform" class="section-name selfRef">MI.ResponseTransform</a>
          </h4>
<p id="section-2.4.6-1">The ResponseTransform object contains metadata for transforming the HTTP response for a StageRules match. The transformation can be the modification of any response header, HTTP response status code, or the generation of a synthetic response. Modifications are applied such that downstream processing stages receive the modified HTTP response as their input.<a href="#section-2.4.6-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.4.6-2.1">
              <p id="section-2.4.6-2.1.1">Property: headers<a href="#section-2.4.6-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.6-2.1.2.1">Description: A HeaderTransform object specifying HTTP response headers to add, replace, or delete.<a href="#section-2.4.6-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.6-2.1.2.2">Type: HeaderTransform object<a href="#section-2.4.6-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.6-2.1.2.3">Mandatory-to-Specify: No<a href="#section-2.4.6-2.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.6-2.2">
              <p id="section-2.4.6-2.2.1">Property: response-status<a href="#section-2.4.6-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.6-2.2.2.1">Description: Replacement value for the HTTP response status code.<a href="#section-2.4.6-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.6-2.2.2.2">Type: Integer. Either a static integer or an expression using CDNI-MEL that evaluates to an integer to dynamically generate an HTTP status code based on elements of the HTTP request and/or response. Expressions that do not evaluate to an integer shall be considered invalid and result in no override of origin-provided response status.<a href="#section-2.4.6-2.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.6-2.2.2.3">Mandatory-to-Specify: No<a href="#section-2.4.6-2.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.6-2.3">
              <p id="section-2.4.6-2.3.1">Property: status-is-expression<a href="#section-2.4.6-2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.6-2.3.2.1">Description: Flag to signal whether the response-status is a static integer or a CDNI-MEL expression that needs to be dynamically evaluated to generate an HTTP response status code.<a href="#section-2.4.6-2.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.6-2.3.2.2">Type: Boolean<a href="#section-2.4.6-2.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.6-2.3.2.3">Mandatory-to-Specify: No. The default is "False", indicating that the response-status is a static integer and does not need to be evaluated.<a href="#section-2.4.6-2.3.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.6-2.4">
              <p id="section-2.4.6-2.4.1">Property: synthetic<a href="#section-2.4.6-2.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.6-2.4.2.1">Description: Specification of a complete replacement of any HTTP response that may have been generated in an earlier processing stage with a synthetic response. Use of this property to specify a synthetic response would override any response transformations or status codes specified by other properties.<a href="#section-2.4.6-2.4.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.6-2.4.2.2">Type: SyntheticResponse object<a href="#section-2.4.6-2.4.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.6-2.4.2.3">Mandatory-to-Specify: No<a href="#section-2.4.6-2.4.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.4.6-3">Example of a ResponseTransform object, illustrating a dynamically constructed header value that uses the expression language to concatenate the user agent and host header, and forces a 403 HTTP response status code:<a href="#section-2.4.6-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.4.6-4">
<pre>{
  "response-transform": {
    "headers": {
      "add": [
        {
          "name": "X-custom-response-header",
          "value": "req.h.user-agent . &amp;#8216;-&amp;#8216; . req.h.host",
          "value-is-expressions": true
        }
      ]
    },
    "response-status": "403"
  }
}
</pre><a href="#section-2.4.6-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.SyntheticResponse">
<section id="section-2.4.7">
          <h4 id="name-misyntheticresponse">
<a href="#section-2.4.7" class="section-number selfRef">2.4.7. </a><a href="#name-misyntheticresponse" class="section-name selfRef">MI.SyntheticResponse</a>
          </h4>
<p id="section-2.4.7-1">The SyntheticResponse object allows for the specification of a synthetic response to be generated in response to the HTTP request being processed. The synthetic response can contain a set of response headers, a status code, and a response body, and is a complete replacement for any HTTP response elements generated in an earlier processing stage.<a href="#section-2.4.7-1" class="pilcrow">¶</a></p>
<p id="section-2.4.7-2"></p>
<p id="section-2.4.7-3">A dynamically generated Content-Length HTTP response header is generated based on the length of the generated response body.<a href="#section-2.4.7-3" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.4.7-4.1">
              <p id="section-2.4.7-4.1.1">Property: headers<a href="#section-2.4.7-4.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.7-4.1.2.1">Description: An array of HTTP header objects that specify the full set of headers to be applied to the synthetic response.<a href="#section-2.4.7-4.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.7-4.1.2.2">Type: Array of HTTP header objects<a href="#section-2.4.7-4.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.7-4.1.2.3">Mandatory-to-Specify: No, although it would be unusual to not specify minimal standard response headers, such as Content-Type.<a href="#section-2.4.7-4.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.7-4.2">
              <p id="section-2.4.7-4.2.1">Property: response-status<a href="#section-2.4.7-4.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.7-4.2.2.1">Description: HTTP response status code.<a href="#section-2.4.7-4.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.7-4.2.2.2">Type: Integer. Either a static integer or an expression using CDNI-MEL that evaluates to an integer to dynamically generate an HTTP status code based on elements of the upstream HTTP request and/or response. Expressions that do not evaluate to an integer shall be considered invalid and result in a 500 status for the synthetic response.<a href="#section-2.4.7-4.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.7-4.2.2.3">Mandatory-to-Specify: Yes<a href="#section-2.4.7-4.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.7-4.3">
              <p id="section-2.4.7-4.3.1">Property: status-is-expression<a href="#section-2.4.7-4.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.7-4.3.2.1">Description: Flag to signal whether the response-status is a static integer or a CDNI-MEL expression that needs to be dynamically evaluated to generate an HTTP response status code.<a href="#section-2.4.7-4.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.7-4.3.2.2">Type: Boolean<a href="#section-2.4.7-4.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.7-4.3.2.3">Mandatory-to-Specify: No. The default is "False", indicating that the response-status is a static integer and does not need to be evaluated.<a href="#section-2.4.7-4.3.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.7-4.4">
              <p id="section-2.4.7-4.4.1">Property: body<a href="#section-2.4.7-4.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.7-4.4.2.1">Description: Body for the synthetic HTTP response. The response body can either be static or dynamically constructed from a rich expression.<a href="#section-2.4.7-4.4.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.7-4.4.2.2">Type: String. Either a literal (static string) or an expression using CDNI-MEL to dynamically construct a response body from elements of the HTTP request and/or response.<a href="#section-2.4.7-4.4.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.7-4.4.2.3">Mandatory-to-Specify: No. If absent, an empty HTTP response with a zero-value Content-Length header is generated.<a href="#section-2.4.7-4.4.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.7-4.5">
              <p id="section-2.4.7-4.5.1">Property: body-is-expression<a href="#section-2.4.7-4.5.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.7-4.5.2.1">Description: Flag to signal whether the synthetic response body is a static string literal or a CDNI-MEL expression that needs to be dynamically evaluated.<a href="#section-2.4.7-4.5.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.7-4.5.2.2">Type: Boolean<a href="#section-2.4.7-4.5.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.7-4.5.2.3">Mandatory-to-Specify: No. The default is "False", indicating that the body is a string literal and does not need to be evaluated.<a href="#section-2.4.7-4.5.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.4.7-5">Example of a SyntheticResponse object illustrating a dynamically constructed response body that uses the expression language to combine the request URI with static text and forces a 405 HTTP response status code:<a href="#section-2.4.7-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.4.7-6">
<pre>{
  "headers": [
    {
      "name": "content-type",
      "value": "text/plain"
    },
    {
      "name": "X-custom-response-header",
      "value": "some static value"
    }
  ],
  "response-status": "405",
  "response-body": "'Sorry, Access to resource '.req.uri.' not allowed'",
  "body-is-expression": false
}
</pre><a href="#section-2.4.7-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.HeaderTransform">
<section id="section-2.4.8">
          <h4 id="name-miheadertransform">
<a href="#section-2.4.8" class="section-number selfRef">2.4.8. </a><a href="#name-miheadertransform" class="section-name selfRef">MI.HeaderTransform</a>
          </h4>
<p id="section-2.4.8-1">The HeaderTransform object specifies how HTTP headers MUST be added, replaced, or deleted from HTTP requests and responses.<a href="#section-2.4.8-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.4.8-2.1">
              <p id="section-2.4.8-2.1.1">Property: add<a href="#section-2.4.8-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.8-2.1.2.1">Description: List of HTTP headers (name/value pairs) that MUST be added to the HTTP request or response. Note that any existing headers in the request or response with the same names of those added are not affected, resulting in multiple headers with the same name.<a href="#section-2.4.8-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.8-2.1.2.2">Type: Array of HTTPHeader objects containing header name/value pairs<a href="#section-2.4.8-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.8-2.1.2.3">Mandatory-to-Specify: No<a href="#section-2.4.8-2.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.8-2.2">
              <p id="section-2.4.8-2.2.1">Property: replace<a href="#section-2.4.8-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.8-2.2.2.1">Description: List of HTTP headers (name/value pairs) that MUST be added to the HTTP request or response, replacing any previous headers with the same name.<a href="#section-2.4.8-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.8-2.2.2.2">Type: Array of HTTPHeader objects containing header name/value pairs<a href="#section-2.4.8-2.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.8-2.2.2.3">Mandatory-to-Specify: No<a href="#section-2.4.8-2.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.8-2.3">
              <p id="section-2.4.8-2.3.1">Property: delete<a href="#section-2.4.8-2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.8-2.3.2.1">Description: List of names of HTTP headers that MUST be deleted from the<a href="#section-2.4.8-2.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.8-2.3.2.2">HTTP request or response. If a named header appears multiple times, all occurrences are deleted.<a href="#section-2.4.8-2.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.8-2.3.2.3">Type: Array of strings, with each string naming an HTTP header to delete<a href="#section-2.4.8-2.3.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.8-2.3.2.4">Mandatory-to-Specify: No<a href="#section-2.4.8-2.3.2.4" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.4.8-3"></p>
<p id="section-2.4.8-4">Example of a HeaderTransform object illustrating the addition of two customer headers, the replacement of any previously provided Accept-Encoding header, and the removal of any previously provided Authorization or Accept-Language headers:<a href="#section-2.4.8-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.4.8-5">
<pre>{
  "add": [
    {
      "name": "X-custom-header1",
      "value": "header-value 1"
    },
    {
      "name": "X-custom-header2",
      "value": "header-value 2"
    }
  ],
  "replace": [
    {
      "name": "Accept-Encoding",
      "value": "gzip,deflate,br"
    }
  ],
  "delete": [
    "Authorization",
    "Accept-Language"
  ]
}
</pre><a href="#section-2.4.8-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.HTTPHeader">
<section id="section-2.4.9">
          <h4 id="name-mihttpheader">
<a href="#section-2.4.9" class="section-number selfRef">2.4.9. </a><a href="#name-mihttpheader" class="section-name selfRef">MI.HTTPHeader</a>
          </h4>
<p id="section-2.4.9-1">The HTTPHeader object contains a name/value pair for an HTTP header to add or replace in a request or response. The CDNI-MEL expression language can be used to dynamically generate response values.<a href="#section-2.4.9-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.4.9-2.1">
              <p id="section-2.4.9-2.1.1">Property: name<a href="#section-2.4.9-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.9-2.1.2.1">Description: Name of the HTTP header.<a href="#section-2.4.9-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.9-2.1.2.2">Type: String<a href="#section-2.4.9-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.9-2.1.2.3">Mandatory-to-Specify: Yes<a href="#section-2.4.9-2.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.9-2.2">
              <p id="section-2.4.9-2.2.1"> Property: value<a href="#section-2.4.9-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.9-2.2.2.1">Description: New value of the named HTTP header.<a href="#section-2.4.9-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.9-2.2.2.2">Type: String. Either a static string or an expression using [CDNI-MEL] to dynamically construct a header value from elements of the HTTP request and/or response.<a href="#section-2.4.9-2.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.9-2.2.2.3">Mandatory-to-Specify: Yes<a href="#section-2.4.9-2.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.4.9-2.3">
              <p id="section-2.4.9-2.3.1">Property: value-is-expression<a href="#section-2.4.9-2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4.9-2.3.2.1">Description: Flag to signal whether the value is a static string literal or a [CDNI-MEL] expression that needs to be dynamically evaluated.<a href="#section-2.4.9-2.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.9-2.3.2.2">Type: Boolean<a href="#section-2.4.9-2.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.4.9-2.3.2.3">Mandatory-to-Specify: No. The default is "False", indicating that the value is a string literal and does not need to be evaluated.<a href="#section-2.4.9-2.3.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.4.9-3">Example of an HTTPHeader illustrating a dynamically constructed header value that equals the session parameter from the query string:<a href="#section-2.4.9-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.4.9-4">
<pre>{
  "name": "X-custom-response-header",
  "value": "req.uri.query.session",
  "value-is-expression": true
}
</pre><a href="#section-2.4.9-4" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="General-Metadata">
<section id="section-2.5">
        <h3 id="name-general-metadata">
<a href="#section-2.5" class="section-number selfRef">2.5. </a><a href="#name-general-metadata" class="section-name selfRef">General Metadata</a>
        </h3>
<p id="section-2.5-1">This section documents a set of general purpose GenericMetadata objects whose use and interpretation may be specific to a CDN or Open Caching system's implementation, enabling extensibility and service differentiation for providers.<a href="#section-2.5-1" class="pilcrow">¶</a></p>
<div id="MI.ServiceIDs">
<section id="section-2.5.1">
          <h4 id="name-miserviceids">
<a href="#section-2.5.1" class="section-number selfRef">2.5.1. </a><a href="#name-miserviceids" class="section-name selfRef">MI.ServiceIDs</a>
          </h4>
<p id="section-2.5.1-1">CDN configurations typically have multiple tiers of identifiers that group configurations by customer account to facilitate logging, billing, and support operations. This structure supports two tiers of identifiers (a serviceID which typically identifies a high level customer's service, and a propertyID which typically represents a logical grouping of a set of hosts within a customers' service.  It should be noted, however, that the interpretation of ServiceID and PropertyID are implementation-specific, and may not be used by all CDNs and Open Caching systems.<a href="#section-2.5.1-1" class="pilcrow">¶</a></p>
<p id="section-2.5.1-2">This metadata model extension allows for the association service identifier metadata to a host or path match and to allow for these IDs to be dynamically generated via an expression language. For example, it may be necessary to extract a portion of the Request URI path to derive a service identifier (e.g.: /news/* maps to one propertyID and /movies/* maps to a different propertyID). When processing the MI.ServiceIDs metadata for a request, implementations SHOULD override any previously assigned service identifiers with those specified by this metadata.<a href="#section-2.5.1-2" class="pilcrow">¶</a></p>
<p id="section-2.5.1-3">MI.ServiceIDs is a new GenericMetadata object that allows for the specification of the two tiers of CDN-specific service identifiers and service names.<a href="#section-2.5.1-3" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.5.1-4.1">
              <p id="section-2.5.1-4.1.1">Property: service-id<a href="#section-2.5.1-4.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5.1-4.1.2.1">Description: A provider-specific identifier for the service (typically a customer account identifier).<a href="#section-2.5.1-4.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.1-4.1.2.2">Type: String. Either a literal (static string) or an expression using CDNI-MEL to dynamically construct the ID from elements of the HTTP request and/or response.<a href="#section-2.5.1-4.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.1-4.1.2.3">Mandatory-to-Specify: No<a href="#section-2.5.1-4.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.5.1-4.2">
              <p id="section-2.5.1-4.2.1">Property: service-id-is-expression<a href="#section-2.5.1-4.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5.1-4.2.2.1">Description: Flag to signal whether the service-id is a static string literal or a CDNI-MEL expression that needs to be dynamically evaluated.<a href="#section-2.5.1-4.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.1-4.2.2.2">Type: Boolean<a href="#section-2.5.1-4.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.1-4.2.2.3">Mandatory-to-Specify: No. The default is "False", indicating that the service-id is a string literal and does not need to be evaluated.<a href="#section-2.5.1-4.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.5.1-4.3">
              <p id="section-2.5.1-4.3.1">Property: service-name<a href="#section-2.5.1-4.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5.1-4.3.2.1">Description: Human-readable name for the service-id.<a href="#section-2.5.1-4.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.1-4.3.2.2">Type: String<a href="#section-2.5.1-4.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.1-4.3.2.3">Mandatory-to-Specify: No<a href="#section-2.5.1-4.3.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.5.1-4.4">
              <p id="section-2.5.1-4.4.1">Property: property-id<a href="#section-2.5.1-4.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5.1-4.4.2.1">Description: A provider-specific identifier for the property (typically identifies a child configuration within the parent service-id).<a href="#section-2.5.1-4.4.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.1-4.4.2.2">Type: String. Either a literal (static string) or an expression using CDNI-MEL to dynamically construct the ID from elements of the HTTP request and/or response.<a href="#section-2.5.1-4.4.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.1-4.4.2.3">Mandatory-to-Specify: No<a href="#section-2.5.1-4.4.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.5.1-4.5">
              <p id="section-2.5.1-4.5.1">Property: property-id-is-expression<a href="#section-2.5.1-4.5.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5.1-4.5.2.1">Description: Flag to signal whether the property-id is a static string literal or a CDNI-MEL expression that needs to be dynamically evaluated.<a href="#section-2.5.1-4.5.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.1-4.5.2.2">Type: Boolean<a href="#section-2.5.1-4.5.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.1-4.5.2.3">Mandatory-to-Specify: No. The default is "False", indicating that the property-id is a string literal and does not need to be evaluated.<a href="#section-2.5.1-4.5.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-2.5.1-4.6">
              <p id="section-2.5.1-4.6.1">Property: property-name<a href="#section-2.5.1-4.6.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5.1-4.6.2.1">Description: Human-readable name for the property-id.<a href="#section-2.5.1-4.6.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.1-4.6.2.2">Type: String<a href="#section-2.5.1-4.6.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.1-4.6.2.3">Mandatory-to-Specify: No<a href="#section-2.5.1-4.6.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.5.1-5">Example illustrating the assignment of a literal service-id along with a dynamically computed property-id that is extracted from the root element of the request URI path.<a href="#section-2.5.1-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.5.1-6">
<pre>{
  "generic-metadata-type": "MI.ServiceIDs",
  "generic-metadata-value": {
    "service-id": "12345",
    "service-name": "My Streaming Service",
    "property-id": "path_element(req.uri, 1)",
    "property-id-is-expression": true
  }
}
</pre><a href="#section-2.5.1-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MI.PrivateFeatureList">
<section id="section-2.5.2">
          <h4 id="name-miprivatefeaturelist">
<a href="#section-2.5.2" class="section-number selfRef">2.5.2. </a><a href="#name-miprivatefeaturelist" class="section-name selfRef">MI.PrivateFeatureList</a>
          </h4>
<p id="section-2.5.2-1">The dCDN may gather a certain number of private features (i.e., not [yet] adopted by SVA or considered marginal) that it may want to expose to the content provider and/or the uCDN. Although private, the announcement, selection, and configuration of this private feature could be done through the OC API.<a href="#section-2.5.2-1" class="pilcrow">¶</a></p>
<p id="section-2.5.2-2">One example could be the support in OCNs of a new protocol that allows the ability to get additional insight about the user agent status (e.g., CTA Wave CMCD).<a href="#section-2.5.2-2" class="pilcrow">¶</a></p>
<p id="section-2.5.2-3">As another example, Broadpeak has developed a feature called S4Streaming, and would like to give the opportunity to control that feature to the uCDN.<a href="#section-2.5.2-3" class="pilcrow">¶</a></p>
<p id="section-2.5.2-4">PrivateFeatureListis a GenericMetadata configuration object as a base generic object that permits the control of private features.<a href="#section-2.5.2-4" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.5.2-5.1">
              <p id="section-2.5.2-5.1.1">Property: features<a href="#section-2.5.2-5.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5.2-5.1.2.1">Description: The list of feature configuration objects.<a href="#section-2.5.2-5.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.2-5.1.2.2">Type: List (array) of MI.PrivateFeature objects .<a href="#section-2.5.2-5.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.2-5.1.2.3">Mandatory-to-Specify: Yes<a href="#section-2.5.2-5.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<div id="MI.PrivateFeature">
<section id="section-2.5.2.1">
            <h5 id="name-miprivatefeature">
<a href="#section-2.5.2.1" class="section-number selfRef">2.5.2.1. </a><a href="#name-miprivatefeature" class="section-name selfRef">MI.PrivateFeature</a>
            </h5>
<p id="section-2.5.2.1-1">MI.PrivateFeature object contains the following properties:<a href="#section-2.5.2.1-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.5.2.1-2.1">
                <p id="section-2.5.2.1-2.1.1">Property: feature-oid<a href="#section-2.5.2.1-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5.2.1-2.1.2.1">Description: The owner/organization that has specified that feature.<a href="#section-2.5.2.1-2.1.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.5.2.1-2.1.2.2">Type:  String<a href="#section-2.5.2.1-2.1.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.5.2.1-2.1.2.3">Mandatory-to-Specify: Yes<a href="#section-2.5.2.1-2.1.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.5.2.1-2.2">
                <p id="section-2.5.2.1-2.2.1">Property: feature-type<a href="#section-2.5.2.1-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5.2.1-2.2.2.1">Description: Indicates the type/name of the private feature configuration object.<a href="#section-2.5.2.1-2.2.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.5.2.1-2.2.2.2">Type: String<a href="#section-2.5.2.1-2.2.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.5.2.1-2.2.2.3">Mandatory-to-Specify: Yes<a href="#section-2.5.2.1-2.2.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-2.5.2.1-2.3">
                <p id="section-2.5.2.1-2.3.1">Property: feature-value<a href="#section-2.5.2.1-2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5.2.1-2.3.2.1">Description: Feature configuration object.<a href="#section-2.5.2.1-2.3.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.5.2.1-2.3.2.2">Type: Format/type is defined by the value of the feature-type property above.<a href="#section-2.5.2.1-2.3.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-2.5.2.1-2.3.2.3">Mandatory-to-Specify: Yes<a href="#section-2.5.2.1-2.3.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
<p id="section-2.5.2.1-3">Note that the private features exposed by the dCDN can be advertised through a dedicated FCI object.<a href="#section-2.5.2.1-3" class="pilcrow">¶</a></p>
<p id="section-2.5.2.1-4">Example, illustrating the Broadpeak S4 Streaming feature:<a href="#section-2.5.2.1-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.5.2.1-5">
<pre>{
  "generic-metadata-type": "MI.PrivateFeatureList",
  "generic-metadata-value": {
    "feature": {
      "feature-oid": "Broadpeak",
      "feature-type": "S4Streaming",
      "feature-value": {
        "footprint": {
          "footprint-type": "ipv4cidr",
          "footprint-value": [
            "192.0.2.0/24",
            "198.51.100.0/24"
          ]
        },
        "activation": "ON",
        "mode": "transparent",
        "policy": "bandwidth-max"
      }
    }
  }
}
</pre><a href="#section-2.5.2.1-5" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="MI.RequestRouting">
<section id="section-2.5.3">
          <h4 id="name-mirequestrouting">
<a href="#section-2.5.3" class="section-number selfRef">2.5.3. </a><a href="#name-mirequestrouting" class="section-name selfRef">MI.RequestRouting</a>
          </h4>
<p id="section-2.5.3-1">The uCDN requires the ability to indicate whether HTTP redirect, DNS redirect, and manifest rewrite are allowed, and indicate which is preferable.  This is required in cases where the uCDN would like to delegate the traffic relying on the iterative method but knows the client will not support HTTP redirect. In that case, the uCDN needs a means to force the dCDN to perform request routing based on DNS redirect (or manifest rewrite).<a href="#section-2.5.3-1" class="pilcrow">¶</a></p>
<p id="section-2.5.3-2">This configuration possibility is useful only if the dCDN can advertise the mode of redirection it supports. There is an ongoing discussion in the IETF CDNI group to understand the semantics behind the redirection modes currently in Footprint &amp; Capabilities Advertising Interface (I-DNS and I-HTTP). It is not clear whether this indicates that the dCDN supports one or both delegation modes (the request routing performed by the uCDN can only be based on DNS redirect or HTTP redirect or both), or whether it indicates that the dCDN supports, as its own request routing mode, DNS redirect and/or HTTP redirect. The latter is required for this new configuration object to be valid.<a href="#section-2.5.3-2" class="pilcrow">¶</a></p>
<p id="section-2.5.3-3">MI.RequestRouting is a new GenericMetadata object that allows the uCDN to force the dCDN request routing mode(s) to be applied when working in iterative redirection mode. The list of redirection modes supported by the dCDN is advertised through the  FCI.RedirectionMode object. The list of request routing modes supported by the dCDN is advertised through the  FCI.RequestRoutingMode object.<a href="#section-2.5.3-3" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2.5.3-4.1">
              <p id="section-2.5.3-4.1.1">Property: request-routing-modes<a href="#section-2.5.3-4.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5.3-4.1.2.1">Description: Instructs the dCDN to perform request routing according to one or more preferred modes among those supported and advertised by the dCDN through the FCI.RequestRouting object. One must understand that forcing (instead of letting the dCDN request router select) one particular request routing mode may trigger some inefficiency in the request routing process.<a href="#section-2.5.3-4.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.3-4.1.2.2">Type: List (array) of iterative request routing modes<a href="#section-2.5.3-4.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.3-4.1.2.3">Values: "DNS", "HTTP", "MANIFEST_REWRITE"<a href="#section-2.5.3-4.1.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-2.5.3-4.1.2.4">Mandatory-to-Specify: No. By default, all request routing modes supported by the dCDN can be used by the dCDN as part of its request routing process.<a href="#section-2.5.3-4.1.2.4" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-2.5.3-5">Example, illustrating the uCDN forcing the dCDN to use DNS or HTTP as the method for request routing in case the uCDN performs an iterative delegation (i.e., iterative redirection mode):<a href="#section-2.5.3-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.5.3-6">
<pre>{
  "generic-metadata-type": "MI.RequestRouting",
  "generic-metadata-value": {
    "request-routing-modes": [ "DNS", "HTTP" ]
  }
}
</pre><a href="#section-2.5.3-6" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="cdni-mel">
<section id="section-3">
      <h2 id="name-metadata-expression-languag">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-metadata-expression-languag" class="section-name selfRef">Metadata Expression Language</a>
      </h2>
<p id="section-3-1">
  The CDNI Metadata Expression Language provides a syntax with a rich set of variables, operators, and built-in functions to facilitate use cases within the extended CDNi metadata model.<a href="#section-3-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-3-2.1">
  Enables expression matching to dynamically determine if <span><a href="#Processing-Stage-Metadata" class="xref">StageMetadata</a> (<a href="#Processing-Stage-Metadata" class="xref">Section 2.4</a>)</span> should be applied at a StageRules match.<a href="#section-3-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal ulEmpty" id="section-3-2.2">
  Enables the dynamic construction of a value to be used in scenarios such as constructing a service identifier or cache key, setting an HTTP header, rewriting a request URI, setting a response status code, or dynamically generating a response body for a SyntheticResponse.<a href="#section-3-2.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-3-3">
Expressions can evaluate to a Boolean, string, or integer, depending on the use case:<a href="#section-3-3" class="pilcrow">¶</a></p>
<span id="name-cdni-mel-expressions"></span><table class="left" id="table-2">
        <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-cdni-mel-expressions" class="selfRef">CDNI MEL expressions</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Usage</th>
            <th class="text-left" rowspan="1" colspan="1">Description</th>
            <th class="text-left" rowspan="1" colspan="1">Evaluation Results</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">ExpressionMatch.expression</td>
            <td class="text-left" rowspan="1" colspan="1">Dynamically determines if StageMetadata should be applied at a specific StageRules.</td>
            <td class="text-left" rowspan="1" colspan="1">Boolean. Expressions that do not evaluate to True or False shall be considered as False.</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">RequestTransform.uri</td>
            <td class="text-left" rowspan="1" colspan="1">Rewrites request URI that will be presented to all downstream stages.</td>
            <td class="text-left" rowspan="1" colspan="1">String</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">ResponseTransform.response-status</td>
            <td class="text-left" rowspan="1" colspan="1">Dynamically sets a response status code to replace the status-code returned by the origin.</td>
            <td class="text-left" rowspan="1" colspan="1">Integer (HTTP status code)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SyntheticResponse.response-status</td>
            <td class="text-left" rowspan="1" colspan="1">Dynamically sets a response status code for a synthetically constructed response.</td>
            <td class="text-left" rowspan="1" colspan="1">Integer (HTTP status code)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SyntheticResponse.body</td>
            <td class="text-left" rowspan="1" colspan="1">Dynamically constructs a response body.</td>
            <td class="text-left" rowspan="1" colspan="1">String</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">HTTPHeader.value</td>
            <td class="text-left" rowspan="1" colspan="1">Dynamically constructs a header value.</td>
            <td class="text-left" rowspan="1" colspan="1">String</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">ComputedCacheKey.expression</td>
            <td class="text-left" rowspan="1" colspan="1">Dynamically constructs a cache key.</td>
            <td class="text-left" rowspan="1" colspan="1">String</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">ServiceIDs.properry-id,ServiceIDs.service-id</td>
            <td class="text-left" rowspan="1" colspan="1">Dynamically constructs service and property identifiers.</td>
            <td class="text-left" rowspan="1" colspan="1">String</td>
          </tr>
        </tbody>
      </table>
<div id="expression-variables">
<section id="section-3.1">
        <h3 id="name-expression-variables">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-expression-variables" class="section-name selfRef">Expression Variables</a>
        </h3>
<span id="name-cdni-mel-variables"></span><table class="left" id="table-3">
          <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-cdni-mel-variables" class="selfRef">CDNI MEL variables</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Variable</th>
              <th class="text-left" rowspan="1" colspan="1">Meaning</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">req.h.&lt;name&gt;</td>
              <td class="text-left" rowspan="1" colspan="1">Request header &lt;name&gt;</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">req.uri</td>
              <td class="text-left" rowspan="1" colspan="1">Request URI (includes query string and fragment identifier, if any)</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">req.uri.path</td>
              <td class="text-left" rowspan="1" colspan="1">Request URI path</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">req.uri.pathquery</td>
              <td class="text-left" rowspan="1" colspan="1">Request path and query string</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">req.uri.query</td>
              <td class="text-left" rowspan="1" colspan="1">Request query string</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">req.uri.query.&lt;key&gt;</td>
              <td class="text-left" rowspan="1" colspan="1">Request query string value associated with &lt;key&gt;</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">req.method</td>
              <td class="text-left" rowspan="1" colspan="1">Request HTTP method (GET, POST, others)</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">resp.h.&lt;name&gt;</td>
              <td class="text-left" rowspan="1" colspan="1">Response header &lt;name&gt;</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">resp.status</td>
              <td class="text-left" rowspan="1" colspan="1">Response status code</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="expression-operators">
<section id="section-3.2">
        <h3 id="name-expression-operators-and-ke">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-expression-operators-and-ke" class="section-name selfRef">Expression Operators and keywords</a>
        </h3>
<span id="name-cdni-mel-expression-operato"></span><table class="left" id="table-4">
          <caption>
<a href="#table-4" class="selfRef">Table 4</a>:
<a href="#name-cdni-mel-expression-operato" class="selfRef">CDNI MEL expression operators</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Operator</th>
              <th class="text-left" rowspan="1" colspan="1">Type</th>
              <th class="text-left" rowspan="1" colspan="1">Result Type</th>
              <th class="text-left" rowspan="1" colspan="1">Meaning</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">==</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Boolean</td>
              <td class="text-left" rowspan="1" colspan="1">Equality test</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">!=</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Boolean</td>
              <td class="text-left" rowspan="1" colspan="1">Inequality test</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">!</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Boolean</td>
              <td class="text-left" rowspan="1" colspan="1">Logical NOT operator</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">&gt;</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Boolean</td>
              <td class="text-left" rowspan="1" colspan="1">Greater than test</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">&lt;</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Boolean</td>
              <td class="text-left" rowspan="1" colspan="1">Less than test</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">&gt;=</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Boolean</td>
              <td class="text-left" rowspan="1" colspan="1">Greater than or equal test</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">&lt;=</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Boolean</td>
              <td class="text-left" rowspan="1" colspan="1">Less than or equal</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">*=</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Boolean</td>
              <td class="text-left" rowspan="1" colspan="1">Glob style match</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">~=</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Boolean</td>
              <td class="text-left" rowspan="1" colspan="1">Regular expression match (see https://www.pcre.org/ for details on PCRE RegEx matching)</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">ipmatch</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Boolean</td>
              <td class="text-left" rowspan="1" colspan="1">Match against IP address or CIDR (IPv4 and IPv6)</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">+</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Numeric</td>
              <td class="text-left" rowspan="1" colspan="1">Addition</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">-</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Numeric</td>
              <td class="text-left" rowspan="1" colspan="1">Subtraction</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">*</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Numeric</td>
              <td class="text-left" rowspan="1" colspan="1">Multiplication</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">/</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Numeric</td>
              <td class="text-left" rowspan="1" colspan="1">Division</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">%</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">Unsigned or Integer</td>
              <td class="text-left" rowspan="1" colspan="1">Modulus</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">.</td>
              <td class="text-left" rowspan="1" colspan="1">infix</td>
              <td class="text-left" rowspan="1" colspan="1">String</td>
              <td class="text-left" rowspan="1" colspan="1">Concatenation</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">? :</td>
              <td class="text-left" rowspan="1" colspan="1">ternary</td>
              <td class="text-left" rowspan="1" colspan="1">*</td>
              <td class="text-left" rowspan="1" colspan="1">Conditional operator: &lt;e&gt; ? &lt;v1&gt; : &lt;v2&gt;
  Evaluates &lt;v1&gt; if &lt;e&gt; is true, &lt;v2&gt; otherwise.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">( )</td>
              <td class="text-left" rowspan="1" colspan="1">grouping</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">Used to override precedence and for function calls.</td>
            </tr>
          </tbody>
        </table>
<span id="name-cdni-mel-expression-keyword"></span><table class="left" id="table-5">
          <caption>
<a href="#table-5" class="selfRef">Table 5</a>:
<a href="#name-cdni-mel-expression-keyword" class="selfRef">CDNI MEL expression keywords</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Keyword</th>
              <th class="text-left" rowspan="1" colspan="1">Meaning</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">and</td>
              <td class="text-left" rowspan="1" colspan="1">Logical AND</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">or</td>
              <td class="text-left" rowspan="1" colspan="1">Logical OR</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">not</td>
              <td class="text-left" rowspan="1" colspan="1">Logical NOT (see also the ! operator)</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">nil</td>
              <td class="text-left" rowspan="1" colspan="1">No value (distinct from empty value)</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">true</td>
              <td class="text-left" rowspan="1" colspan="1">Boolean constant: true</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">false</td>
              <td class="text-left" rowspan="1" colspan="1">Boolean constant: false</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="expression-builtin-functions">
<section id="section-3.3">
        <h3 id="name-expression-built-in-functio">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-expression-built-in-functio" class="section-name selfRef">Expression Built-in Functions</a>
        </h3>
<div id="functions-type-conversion">
<section id="section-3.3.1">
          <h4 id="name-basic-functions-type-conver">
<a href="#section-3.3.1" class="section-number selfRef">3.3.1. </a><a href="#name-basic-functions-type-conver" class="section-name selfRef">Basic Functions: Type Conversions</a>
          </h4>
<span id="name-cdni-mel-type-conversions"></span><table class="left" id="table-6">
            <caption>
<a href="#table-6" class="selfRef">Table 6</a>:
<a href="#name-cdni-mel-type-conversions" class="selfRef">CDNI MEL type conversions</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Function</th>
                <th class="text-left" rowspan="1" colspan="1">Action</th>
                <th class="text-left" rowspan="1" colspan="1">Argument(s)</th>
                <th class="text-left" rowspan="1" colspan="1">Returns</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">integer(e)</td>
                <td class="text-left" rowspan="1" colspan="1">Converts expression to integer.</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">integer</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">real(e)</td>
                <td class="text-left" rowspan="1" colspan="1">Converts expression to real.</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">real</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">string(e)</td>
                <td class="text-left" rowspan="1" colspan="1">Converts expression to string.</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">boolean(e)</td>
                <td class="text-left" rowspan="1" colspan="1">Converts expression to Boolean.</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">Boolean</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="functions-string-conversion">
<section id="section-3.3.2">
          <h4 id="name-basic-functions-string-conv">
<a href="#section-3.3.2" class="section-number selfRef">3.3.2. </a><a href="#name-basic-functions-string-conv" class="section-name selfRef">Basic Functions: String Conversions</a>
          </h4>
<span id="name-cdni-mel-string-conversions"></span><table class="left" id="table-7">
            <caption>
<a href="#table-7" class="selfRef">Table 7</a>:
<a href="#name-cdni-mel-string-conversions" class="selfRef">CDNI MEL string conversions</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Function</th>
                <th class="text-left" rowspan="1" colspan="1">Action</th>
                <th class="text-left" rowspan="1" colspan="1">Argument(s)</th>
                <th class="text-left" rowspan="1" colspan="1">Returns</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">upper(e)</td>
                <td class="text-left" rowspan="1" colspan="1">Converts a string to uppercase. Useful for case-insensitive comparisons.</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">lower(e)</td>
                <td class="text-left" rowspan="1" colspan="1">Converts a string to lowercase. Useful for case-insensitive comparisons.</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">string</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="functions-convenience">
<section id="section-3.3.3">
          <h4 id="name-convenience-functions">
<a href="#section-3.3.3" class="section-number selfRef">3.3.3. </a><a href="#name-convenience-functions" class="section-name selfRef">Convenience Functions</a>
          </h4>
<span id="name-cdni-mel-convenience-functi"></span><table class="left" id="table-8">
            <caption>
<a href="#table-8" class="selfRef">Table 8</a>:
<a href="#name-cdni-mel-convenience-functi" class="selfRef">CDNI MEL convenience functions</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Function</th>
                <th class="text-left" rowspan="1" colspan="1">Action</th>
                <th class="text-left" rowspan="1" colspan="1">Argument(s)</th>
                <th class="text-left" rowspan="1" colspan="1">Returns</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">match(string Input, string Match)</td>
                <td class="text-left" rowspan="1" colspan="1">Regular expression Match is applied to Input and the matching element (if any) is returned. Empty string is returned if there is no match.
  See https://www.pcre.org/ for details on PCRE RegEx matching.</td>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">match_replace(string Input, string Match, string Replace)</td>
                <td class="text-left" rowspan="1" colspan="1">Regular expression Match is applied to Input arg and replaced with the Replace arg upon successful match. Returns updated (replaced) version of Input.</td>
                <td class="text-left" rowspan="1" colspan="1">3</td>
                <td class="text-left" rowspan="1" colspan="1">string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">add_query(string Input, string q, string v)</td>
                <td class="text-left" rowspan="1" colspan="1">Add query string element q with value v to the Input string. If v is nil, then just add the query string element q.
  The query element q and value v must conform to the format defined in:  https://datatracker.ietf.org/doc/html/rfc3986</td>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">remove_query(string Input, string q)</td>
                <td class="text-left" rowspan="1" colspan="1">Remove (all occurrences of) query string element q from the Input string.</td>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">path_element(string Input, integer n)</td>
                <td class="text-left" rowspan="1" colspan="1">Return the path element n from Input. -1 returns the last element.</td>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">path_element(string Input, integer n, integer m)</td>
                <td class="text-left" rowspan="1" colspan="1">Return the path elements from position n to m.</td>
                <td class="text-left" rowspan="1" colspan="1">3</td>
                <td class="text-left" rowspan="1" colspan="1">string</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
</section>
</div>
<div id="error-handling">
<section id="section-3.4">
        <h3 id="name-error-handling">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-error-handling" class="section-name selfRef">Error Handling</a>
        </h3>
<div id="compile-error">
<section id="section-3.4.1">
          <h4 id="name-compile-time-errors">
<a href="#section-3.4.1" class="section-number selfRef">3.4.1. </a><a href="#name-compile-time-errors" class="section-name selfRef">Compile Time Errors</a>
          </h4>
<p id="section-3.4.1-1">
  To ensure reliable service, all CDNI Metadata configurations MUST be validated for syntax errors before they are ingested into a dCDN.  That is, existing configurations should be kept as the live running configuration until the new configuration has passed validation.  If errors are detected in a new configuration, the configuration MUST be rejected.  A HTTP 500 Internal Server Error should be returned with a message that indicates the source of the error (line number, and configuration element that caused the error).<a href="#section-3.4.1-1" class="pilcrow">¶</a></p>
<p id="section-3.4.1-2">
  Examples of compile-time errors:<a href="#section-3.4.1-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3.4.1-3">
<li id="section-3.4.1-3.1">
  Configuration does not parse relative to the CDNI Metadata JSON schema<a href="#section-3.4.1-3.1" class="pilcrow">¶</a>
</li>
            <li id="section-3.4.1-3.2">
  Unknown CDNI Metadata object referenced in the configuration<a href="#section-3.4.1-3.2" class="pilcrow">¶</a>
</li>
            <li id="section-3.4.1-3.3">
              <p id="section-3.4.1-3.3.1">
  CDNI Metadata object parse error<a href="#section-3.4.1-3.3.1" class="pilcrow">¶</a></p>
<ol start="1" type="a" class="normal type-a" id="section-3.4.1-3.3.2">
<li id="section-3.4.1-3.3.2.1">
  Missing mandatory CDNI Metadata property<a href="#section-3.4.1-3.3.2.1" class="pilcrow">¶</a>
</li>
                <li id="section-3.4.1-3.3.2.2">
  Unknown CDNI Metadata property<a href="#section-3.4.1-3.3.2.2" class="pilcrow">¶</a>
</li>
                <li id="section-3.4.1-3.3.2.3">
  Incorrect type for a CDNI Metadata property value<a href="#section-3.4.1-3.3.2.3" class="pilcrow">¶</a>
</li>
              </ol>
</li>
            <li id="section-3.4.1-3.4">
              <p id="section-3.4.1-3.4.1">
  CDNI-MEL<a href="#section-3.4.1-3.4.1" class="pilcrow">¶</a></p>
<ol start="1" type="a" class="normal type-a" id="section-3.4.1-3.4.2">
<li id="section-3.4.1-3.4.2.1">
  Unknown CDNI-MEL variable name referenced in an expression<a href="#section-3.4.1-3.4.2.1" class="pilcrow">¶</a>
</li>
                <li id="section-3.4.1-3.4.2.2">
  Unknown CDNI-MEL operator, key-word, or functions referenced in an expression<a href="#section-3.4.1-3.4.2.2" class="pilcrow">¶</a>
</li>
                <li id="section-3.4.1-3.4.2.3">
  Incorrect number of arguments used in a CDNI-MEL expression operator or function<a href="#section-3.4.1-3.4.2.3" class="pilcrow">¶</a>
</li>
                <li id="section-3.4.1-3.4.2.4">
  Incorrect type of argument used in a CDNI-MEL expression operator or function<a href="#section-3.4.1-3.4.2.4" class="pilcrow">¶</a>
</li>
              </ol>
</li>
          </ol>
</section>
</div>
<div id="runtime-error">
<section id="section-3.4.2">
          <h4 id="name-runtime-errors">
<a href="#section-3.4.2" class="section-number selfRef">3.4.2. </a><a href="#name-runtime-errors" class="section-name selfRef">Runtime Errors</a>
          </h4>
<p id="section-3.4.2-1">
  If a runtime error is detected when processing a request, the request should be terminated, and a HTTP 500 'Internal Server Error' returned to the caller.  To avoid security leaks, sensitive information MUST be removed from the error message before it is returned to an external client.  In addition to returning the HTTP 500 error, the dCDN SHOULD log additional diagnostics information to assist in troubleshooting.<a href="#section-3.4.2-1" class="pilcrow">¶</a></p>
<p id="section-3.4.2-2">
  Examples of runtime errors:<a href="#section-3.4.2-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3.4.2-3">
<li id="section-3.4.2-3.1">
  Failure to allocate memory (or other server resources) when evaluating a CDNI-MEL expression<a href="#section-3.4.2-3.1" class="pilcrow">¶</a>
</li>
            <li id="section-3.4.2-3.2">
  Incorrect runtime argument type in a CDNI-MEL expression.  E.g., trying to convert a non-numeric string to a number<a href="#section-3.4.2-3.2" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</div>
</section>
</div>
<div id="expression-examples">
<section id="section-3.5">
        <h3 id="name-expression-examples">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-expression-examples" class="section-name selfRef">Expression Examples</a>
        </h3>
<section id="section-3.5.1">
          <h4 id="name-computedcachekey">
<a href="#section-3.5.1" class="section-number selfRef">3.5.1. </a><a href="#name-computedcachekey" class="section-name selfRef">ComputedCacheKey</a>
          </h4>
<p id="section-3.5.1-1">Sets the MI.ComputedCacheKey to the value of the X-Cache-Key header from the client request.<a href="#section-3.5.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.5.1-2">
<pre>
{
  "generic-metadata-type": "MI.ComputedCacheKey",
  "generic-metadata-value": {
    "expression": "req.h.x-cache-key"
  }
}
</pre><a href="#section-3.5.1-2" class="pilcrow">¶</a>
</div>
<p id="section-3.5.1-3">Sets the MI.ComputedCacheKey to the lowercase version of the URI.<a href="#section-3.5.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.5.1-4">
<pre>
{
  "generic-metadata-type":  "MI.ComputedCacheKey",
  "generic-metadata-value": {
    "expression": "lower(req.uri)"
  }
}
</pre><a href="#section-3.5.1-4" class="pilcrow">¶</a>
</div>
</section>
<section id="section-3.5.2">
          <h4 id="name-expressionmatch">
<a href="#section-3.5.2" class="section-number selfRef">3.5.2. </a><a href="#name-expressionmatch" class="section-name selfRef">ExpressionMatch</a>
          </h4>
<p id="section-3.5.2-1">
  ExpressionMatch where the expression is true if the user-agent (glob) matches *Safari* and the referrer equals www.example.com.<a href="#section-3.5.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.5.2-2">
<pre>
{
  "expression": "req.h.user-agent *= '*Safari*'
    and req.h.referrer == 'www.example.com'"
}
</pre><a href="#section-3.5.2-2" class="pilcrow">¶</a>
</div>
</section>
<section id="section-3.5.3">
          <h4 id="name-responsetransform">
<a href="#section-3.5.3" class="section-number selfRef">3.5.3. </a><a href="#name-responsetransform" class="section-name selfRef">ResponseTransform</a>
          </h4>
<p id="section-3.5.3-1">
  Adds X-custom-response-header with a value equal to the value of user-agent - host header.<a href="#section-3.5.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.5.3-2">
<pre>
{
  "response-transform": {
    "headers": {
      "add": [
        {
          "name": "X-custom-response-header",
          "value": "req.h.user-agent . ' - ' . req.h.host",
          "value-is-expression": true
        }
      ],
      "response-status": "403"
  }
  }
}
</pre><a href="#section-3.5.3-2" class="pilcrow">¶</a>
</div>
<p id="section-3.5.3-3">
  Adds a Set-Cookie header with a dynamically computed cookie value (concatenating user agent and host name) and forces a 403 response.<a href="#section-3.5.3-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.5.3-4">
<pre>
{
  "response-transform":{
    "headers":{
      "add":[
      {
      "name":"Set-Cookie",
      "value":"req.h.user-agent . ' - ' . req.h.host",
      "value-is-expression":true
      }
      ]
    }
  }
}
</pre><a href="#section-3.5.3-4" class="pilcrow">¶</a>
</div>
</section>
<section id="section-3.5.4">
          <h4 id="name-miserviceids-2">
<a href="#section-3.5.4" class="section-number selfRef">3.5.4. </a><a href="#name-miserviceids-2" class="section-name selfRef">MI.ServiceIDs</a>
          </h4>
<p id="section-3.5.4-1">
  Extracts the first path element from the URI. For example, if the URI = /789/second/third/test.txt, property-id is set to the first-path (789).<a href="#section-3.5.4-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.5.4-2">
<pre>
{
  "generic-metadata-type":"MI.ServiceIDs",
  "generic-metadata-value":{
    "service-id":"12345",
    "service-name":"My Streaming Service",
    "property-id":"path_element(req.uri, 1)",
    "property-id-is-expression":true
  }
}
</pre><a href="#section-3.5.4-2" class="pilcrow">¶</a>
</div>
</section>
</section>
</div>
</section>
</div>
<div id="CDNI-Capabilities-Extensions">
<section id="section-4">
      <h2 id="name-cdni-capabilities-extension">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-cdni-capabilities-extension" class="section-name selfRef">CDNI Capabilities Extensions</a>
      </h2>
<p id="section-4-1">Since not all dCDNs will be capable of supporting all the extensions proposed in this document, they need the ability to inform uCDNs about their capabilities. <span>[<a href="#RFC8008" class="xref">RFC8008</a>]</span> (the CDNI Footprint &amp; Capabilities Interface) was designed for this purpose and is extended here to express these new capabilities.<a href="#section-4-1" class="pilcrow">¶</a></p>
<div id="FCI-Metadata-Object">
<section id="section-4.1">
        <h3 id="name-fci-metadata-object">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-fci-metadata-object" class="section-name selfRef">FCI Metadata Object</a>
        </h3>
<p id="section-4.1-1">Whenever a capability is represented as a top-level GenericMetadata object, a dCDN will be able to declare its support simply by including that object name in the capability-value list of the standard FCI.Metadata object.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">For each of the new GenericMetadata objects documented within the SVA Configuration Interface, the default assumption should be that the capability is not supported by the dCDN unless named within the FCI metadata object.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1-3">Example: A capabilities object declaring support for several of the newly defined GenericMetadata types:<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.1-4">
<pre>{
  "capabilities": [
    {
      "capability-type": "FCI.Metadata",
      "capability-value": {
        "metadata": [
          "MI.SourceMetadataExtended",
          "MI.ProcessingStages",
          "MI.CrossoriginPolicy",
          "MI.CachePolicy",
          "MI.NegativeCachePolicy",
          "MI.PrivateFeatureList",
          "MI.RequestRouting"
        ]
      },
      "footprints": [
         &lt; Footprint Objects &gt;
      ]
    }
  ]
}
</pre><a href="#section-4.1-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="FCI-Model-Extensions">
<section id="section-4.2">
        <h3 id="name-fci-model-extensions">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-fci-model-extensions" class="section-name selfRef">FCI Model Extensions</a>
        </h3>
<p id="section-4.2-1">In most cases, the presence or absence of a GenericMetadata object name in FCI.Metadata (as described above), is sufficient to convey support for a capability. There are cases, however, where more fine-grained capabilities declarations are required. Specifically, a dCDN may support some, but not all, of the capabilities specified by one of the new GenericMetadata objects. In these cases, new FCI objects will be created to allow a dCDN to express these fine-grained capabilities.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<div id="FCI.AuthTypes">
<section id="section-4.2.1">
          <h4 id="name-fciauthtypes">
<a href="#section-4.2.1" class="section-number selfRef">4.2.1. </a><a href="#name-fciauthtypes" class="section-name selfRef">FCI.AuthTypes</a>
          </h4>
<p id="section-4.2.1-1">The AuthTypes object is used to indicate the support of authentication methods to be used for content acquisition (while interacting with an origin server) and authorization methods to be used for content delivery.<a href="#section-4.2.1-1" class="pilcrow">¶</a></p>
<p id="section-4.2.1-2">This specification document defines two new authentication methods (see MI.Auth) while there is one authorization method currently under specification in CDNI called <span>[<a href="#URI.signing" class="xref">URI.signing</a>]</span><a href="#section-4.2.1-2" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-4.2.1-3.1">
              <p id="section-4.2.1-3.1.1">Property: stage-metadata<a href="#section-4.2.1-3.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.1-3.1.2.1">Description: Specifies the set of StageMetadata to be applied at the processing stage if the match expression evaluates to "True" or is not present.<a href="#section-4.2.1-3.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.1-3.1.2.2">Type: Array of StageMetadata objects, applied in order.<a href="#section-4.2.1-3.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.1-3.1.2.3">Mandatory-to-Specify: Yes<a href="#section-4.2.1-3.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-4.2.1-3.2">
              <p id="section-4.2.1-3.2.1">Property: authe-types<a href="#section-4.2.1-3.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.1-3.2.2.1">Description: List of supported authentication methods (possibly required for content acquisition)<a href="#section-4.2.1-3.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.1-3.2.2.2">Type: Array of strings<a href="#section-4.2.1-3.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.1-3.2.2.3">Values: "AWSv4Auth", "HeaderAuth"<a href="#section-4.2.1-3.2.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.1-3.2.2.4">Mandatory-to-Specify: No.  No authentication method is supported in this case.<a href="#section-4.2.1-3.2.2.4" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-4.2.1-3.3">
              <p id="section-4.2.1-3.3.1">Property: autho-types<a href="#section-4.2.1-3.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.1-3.3.2.1">Description: List of supported authorization methods (possibly required for content delivery)<a href="#section-4.2.1-3.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.1-3.3.2.2">Type: Array of strings<a href="#section-4.2.1-3.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.1-3.3.2.3">Values: "UriSigning"<a href="#section-4.2.1-3.3.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.1-3.3.2.4">Mandatory-to-Specify: No.  No authorization method is supported in this case.<a href="#section-4.2.1-3.3.2.4" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-4.2.1-4">FCI.AuthTypes example:<a href="#section-4.2.1-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.2.1-5">
<pre>{
  "capabilities": [
    {
      "capability-type": "FCI.AuthTypes",
      "capability-value": {
        "authe-types": [
          "AWSv4Auth",
          "HeaderAuth"
        ],
        "autho-types": [
          "UriSigning"
        ]
      }
    }
  ]
}
</pre><a href="#section-4.2.1-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="FCI.ProcessingStages">
<section id="section-4.2.2">
          <h4 id="name-fciprocessingstages">
<a href="#section-4.2.2" class="section-number selfRef">4.2.2. </a><a href="#name-fciprocessingstages" class="section-name selfRef">FCI.ProcessingStages</a>
          </h4>
<p id="section-4.2.2-1">This object is used to signal the set of features that are supported in relation to the ProcessingStages configuration object (see MI.ProcessingStages). Those optional features depend on the CDNI-MEL language support.<a href="#section-4.2.2-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-4.2.2-2.1">
              <p id="section-4.2.2-2.1.1">Property: features<a href="#section-4.2.2-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.2-2.1.2.1">Description: List of supported optional processing stages features. Note that these features all have some dependencies on support of the CDNI MEL expression language.<a href="#section-4.2.2-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.2-2.1.2.2">Type: Array of strings<a href="#section-4.2.2-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.2-2.1.2.3">Values: "ExpressionMatch", "RequestTransform",  "ResponseTransform"<a href="#section-4.2.2-2.1.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.2-2.1.2.4">Mandatory-to-Specify: No. None of these optional features are supported in this case.<a href="#section-4.2.2-2.1.2.4" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-4.2.2-3">Example:<a href="#section-4.2.2-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.2.2-4">
<pre>{
  "capabilities": [
    {
       "capability-type": "FCI.ProcessingStages",
       "capability-value": {
         "features": [
           "ExpressionMatch",
           "RequestTransform",
           "ResponseTransform"
         ]
       }
     }
  ]
}
</pre><a href="#section-4.2.2-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="FCI.SourceMetadataExtended">
<section id="section-4.2.3">
          <h4 id="name-fcisourcemetadataextended">
<a href="#section-4.2.3" class="section-number selfRef">4.2.3. </a><a href="#name-fcisourcemetadataextended" class="section-name selfRef">FCI.SourceMetadataExtended</a>
          </h4>
<p id="section-4.2.3-1">This object is used to signal the supported features related to the SourceMetadataExtended configuration object.<a href="#section-4.2.3-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-4.2.3-2.1">
              <p id="section-4.2.3-2.1.1">Property: load-balance<a href="#section-4.2.3-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.3-2.1.2.1">Description: List of supported load balancing algorithms in relation to the SourceMetadataExtended configuration object (see MI.SourceMetadataExtended)<a href="#section-4.2.3-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.3-2.1.2.2">Type: Array of strings<a href="#section-4.2.3-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.3-2.1.2.3">Values: "random", "content-hash", "ip-hash<a href="#section-4.2.3-2.1.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.3-2.1.2.4">Mandatory-to-Specify: No. load balancing is not supported among sources.<a href="#section-4.2.3-2.1.2.4" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-4.2.3-3">If the FCI.SourceMetadtaExtended object is not exposed/advertised or if the "load-balance" array is empty, the dCDN does not support the usage of the load-balance property attached to the SourceMetadataExtended configuration object (see MI.SourceMetadataExtended).<a href="#section-4.2.3-3" class="pilcrow">¶</a></p>
<p id="section-4.2.3-4">Example:<a href="#section-4.2.3-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.2.3-5">
<pre>{
  "capabilities": [
    {
      "capability-type": "FCI.SourceMetadataExtended",
      "capability-value": {
        "load-balance": [
          "random",
          "content-hash",
          "ip-hash"
        ]
      }
    }
  ]
}
</pre><a href="#section-4.2.3-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="FCI.RequestRouting">
<section id="section-4.2.4">
          <h4 id="name-fcirequestrouting">
<a href="#section-4.2.4" class="section-number selfRef">4.2.4. </a><a href="#name-fcirequestrouting" class="section-name selfRef">FCI.RequestRouting</a>
          </h4>
<p id="section-4.2.4-1">This object is used by the dCDN to signal/announce the supported request routing modes. This can be optionally used by the uCDN to further select a subset of those modes when operating one of the iterative delegation modes. See the section on the GenericMetadata RequestRouting object..<a href="#section-4.2.4-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-4.2.4-2.1">
              <p id="section-4.2.4-2.1.1">Property: request-routing-modes<a href="#section-4.2.4-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.4-2.1.2.1">Description: List of supported request routing modes by the dCDN. This information is useful when the uCDN decides to perform a delegation in iterative mode.<a href="#section-4.2.4-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.4-2.1.2.2">Type: Array of strings<a href="#section-4.2.4-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.4-2.1.2.3">Values: "DNS", "HTTP-R", "MANIFEST_REWRITE"<a href="#section-4.2.4-2.1.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.4-2.1.2.4">Mandatory-to-Specify: No. If the dCDN does not advertise the supported request routing modes, they are all supported by default.<a href="#section-4.2.4-2.1.2.4" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-4.2.4-3">Example:<a href="#section-4.2.4-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.2.4-4">
<pre>{
  "capabilities": [
    {
      "capability-type": "FCI.RequestRouting",
      "capability-value": {
        "request-routing-modes": [
          "DNS",
          "HTTP",
          "MANIFEST_REWRITE"
        ]
      }
    }
  ]
}
</pre><a href="#section-4.2.4-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="FCI.PrivateFeatures">
<section id="section-4.2.5">
          <h4 id="name-fciprivatefeatures">
<a href="#section-4.2.5" class="section-number selfRef">4.2.5. </a><a href="#name-fciprivatefeatures" class="section-name selfRef">FCI.PrivateFeatures</a>
          </h4>
<p id="section-4.2.5-1">This object is used by the dCDN to signal/announce the list of supported private features. See the section on the GenericMetadata PrivateFeatureList object.<a href="#section-4.2.5-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-4.2.5-2.1">
              <p id="section-4.2.5-2.1.1">Property: features<a href="#section-4.2.5-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.5-2.1.2.1">Description: The list of supported private feature<a href="#section-4.2.5-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.5-2.1.2.2">Type: List nested objects of FCI.PrivateFeature<a href="#section-4.2.5-2.1.2.2" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-4.2.5-3"></p>
<p id="section-4.2.5-4">Example:<a href="#section-4.2.5-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.2.5-5">
<pre>{
  "capabilities": [
    {
      "capability-type": "FCI.PrivateFeatures",
      "capability-value": {
        "features": [
          {
            "feature-oid": "Broadpeak",
            "feature-type": "S4Streaming"
         }
        ]
      }
    }
  ]
}
</pre><a href="#section-4.2.5-5" class="pilcrow">¶</a>
</div>
<div id="FCI.PrivateFeature">
<section id="section-4.2.5.1">
            <h5 id="name-fciprivatefeature">
<a href="#section-4.2.5.1" class="section-number selfRef">4.2.5.1. </a><a href="#name-fciprivatefeature" class="section-name selfRef">FCI.PrivateFeature</a>
            </h5>
<p id="section-4.2.5.1-1">This object contains the following properties:<a href="#section-4.2.5.1-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-4.2.5.1-2.1">
                <p id="section-4.2.5.1-2.1.1">Property: feature-oid<a href="#section-4.2.5.1-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.5.1-2.1.2.1">Description: The owner/organization that has specified the feature.<a href="#section-4.2.5.1-2.1.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-4.2.5.1-2.1.2.2">Type:  String<a href="#section-4.2.5.1-2.1.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-4.2.5.1-2.1.2.3">Mandatory-to-Specify: Yes<a href="#section-4.2.5.1-2.1.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal ulEmpty" id="section-4.2.5.1-2.2">
                <p id="section-4.2.5.1-2.2.1">Property: feature-type<a href="#section-4.2.5.1-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.5.1-2.2.2.1">Description: Indicates the type/name of the private feature configuration object.<a href="#section-4.2.5.1-2.2.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-4.2.5.1-2.2.2.2">Type: String<a href="#section-4.2.5.1-2.2.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-4.2.5.1-2.2.2.3">Mandatory-to-Specify: Yes<a href="#section-4.2.5.1-2.2.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
</section>
</div>
</section>
</div>
<div id="FCI.OcnSelection">
<section id="section-4.2.6">
          <h4 id="name-fciocnselection">
<a href="#section-4.2.6" class="section-number selfRef">4.2.6. </a><a href="#name-fciocnselection" class="section-name selfRef">FCI.OcnSelection</a>
          </h4>
<p id="section-4.2.6-1">This object is used by the dCDN to signal/announce the supported OCN types and/or  their transport arrangement and/or medium supported by OCNs.<a href="#section-4.2.6-1" class="pilcrow">¶</a></p>
<p id="section-4.2.6-2">Property ocn-delivery-list<a href="#section-4.2.6-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.2.6-3">
<li id="section-4.2.6-3.1">Description: List of supported medium and/or transport arrangements.<a href="#section-4.2.6-3.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.2.6-3.2">Type: Array of nested objects, each containing the following properties:<a href="#section-4.2.6-3.2" class="pilcrow">¶</a>
</li>
          </ol>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-4.2.6-4.1">
              <p id="section-4.2.6-4.1.1">o   Property: ocn-medium<a href="#section-4.2.6-4.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.6-4.1.2.1">Description: This property lists the supported mediums.<a href="#section-4.2.6-4.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.6-4.1.2.2">Type: Array of strings. The following values are specified: "SATELLITE"<a href="#section-4.2.6-4.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.6-4.1.2.3">Mandatory-to-Specify: No<a href="#section-4.2.6-4.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-4.2.6-4.2">
              <p id="section-4.2.6-4.2.1">o   Property: ocn-transport<a href="#section-4.2.6-4.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.6-4.2.2.1">Description: Instructs the dCDN to perform delegation operating a particular transport arrangement. The following values are specified: "MABR".<a href="#section-4.2.6-4.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.6-4.2.2.2">Type: Array of strings<a href="#section-4.2.6-4.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.2.6-4.2.2.3">Mandatory-to-Specify: No<a href="#section-4.2.6-4.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal ulEmpty" id="section-4.2.6-4.3">.....Property: ocn-type-list<a href="#section-4.2.6-4.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-4.2.6-5">o   Description: List of supported OCN types. Examples include: "HOME" or "EDGE".<a href="#section-4.2.6-5" class="pilcrow">¶</a></p>
<p id="section-4.2.6-6">o   Type: Array of strings<a href="#section-4.2.6-6" class="pilcrow">¶</a></p>
<p id="section-4.2.6-7">o   Mandatory-to-Specify: No<a href="#section-4.2.6-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="IANA">
<section id="section-5">
      <h2 id="name-iana-considerations-10">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-iana-considerations-10" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="IANA.cdni.payload.types">
<section id="section-5.1">
        <h3 id="name-cdni-payload-types">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-cdni-payload-types" class="section-name selfRef">CDNI Payload Types</a>
        </h3>
<p id="section-5.1-1">
          This document requests the registration of the following entries under the "CDNI Payload Types" registry hosted by IANA<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<span id="name-payload-types"></span><table class="left" id="table-9">
          <caption>
<a href="#table-9" class="selfRef">Table 9</a>:
<a href="#name-payload-types" class="selfRef">Payload Types</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Payload type</th>
              <th class="text-left" rowspan="1" colspan="1">Specification</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.CachePolicy</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.NegativeCachePolicy</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.StaleContentCachePolicy</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.CacheBypassPolicy</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.ComputedCacheKey</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.AllowCompress</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.SourceMetadataExtended</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.SourceExtended</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.LoadBalanceMetadata</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.HeaderAuth</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.AWSv4Auth</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.CrossOriginPolicy</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.AuthTokenMetadata (TBD)</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.CertificateMetadata (TBD)</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.OcnSelection</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.RequestRouting</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.ProcessingStages</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.StageRules</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.ExpressionMatch</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.StageMetadata</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.RequestTransform</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.ResponseTransform</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.SyntheticResponse</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.HeaderTransform</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.HTTPHeader</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.ServiceIDs</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.TrafficType</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.LoggingMetadata (TBD)</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MI.PrivateFeatureList</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">FCI.AuthTypes</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">FCI.ProcessingStages</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">FCI.SourceMetadataExtended</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">FCI.RequestRouting</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">FCI.PrivateFeatures</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">FCI.OcnSelection</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
</section>
</div>
<div id="Security">
<section id="section-6">
      <h2 id="name-security-considerations-9">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations-9" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-6-1">
        This specification is in accordance with the CDNI Request Routing:
        Footprint and Capabilities Semantics. As such, it is subject to the security and privacy considerations as
        defined in Section 8 of
        <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>
        and in Section 7 of
        <span>[<a href="#RFC8008" class="xref">RFC8008</a>]</span>
        respectively.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Conclusion">
<section id="section-7">
      <h2 id="name-conclusion">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-conclusion" class="section-name selfRef">Conclusion</a>
      </h2>
<p id="section-7-1">This document presents requirements and extensions to the CDNI metadata model to cover typical use cases found in the commercial CDN and Open Caching ecosystems. By limiting the scope of these extensions to new GenericMetadata objects, backward compatibility can be maintained with any existing CDNI Metadata Interface implementations.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-8">
      <h2 id="name-references-8">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-references-8" class="section-name selfRef">References</a>
      </h2>
<section id="section-8.1">
        <h3 id="name-normative-references-10">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-normative-references-10" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC1034">[RFC1034]</dt>
        <dd>
<span class="refAuthor">Mockapetris, P.</span>, <span class="refTitle">"Domain names - concepts and facilities"</span>, <span class="seriesInfo">STD 13</span>, <span class="seriesInfo">RFC 1034</span>, <span class="seriesInfo">DOI 10.17487/RFC1034</span>, <time datetime="1987-11" class="refDate">November 1987</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1034">https://www.rfc-editor.org/info/rfc1034</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1123">[RFC1123]</dt>
        <dd>
<span class="refAuthor">Braden, R., Ed.</span>, <span class="refTitle">"Requirements for Internet Hosts - Application and Support"</span>, <span class="seriesInfo">STD 3</span>, <span class="seriesInfo">RFC 1123</span>, <span class="seriesInfo">DOI 10.17487/RFC1123</span>, <time datetime="1989-10" class="refDate">October 1989</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1123">https://www.rfc-editor.org/info/rfc1123</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7231">[RFC7231]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span> and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"</span>, <span class="seriesInfo">RFC 7231</span>, <span class="seriesInfo">DOI 10.17487/RFC7231</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7231">https://www.rfc-editor.org/info/rfc7231</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8006">[RFC8006]</dt>
        <dd>
<span class="refAuthor">Niven-Jenkins, B.</span>, <span class="refAuthor">Murray, R.</span>, <span class="refAuthor">Caulfield, M.</span>, and <span class="refAuthor">K. Ma</span>, <span class="refTitle">"Content Delivery Network Interconnection (CDNI) Metadata"</span>, <span class="seriesInfo">RFC 8006</span>, <span class="seriesInfo">DOI 10.17487/RFC8006</span>, <time datetime="2016-12" class="refDate">December 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8006">https://www.rfc-editor.org/info/rfc8006</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8007">[RFC8007]</dt>
        <dd>
<span class="refAuthor">Murray, R.</span> and <span class="refAuthor">B. Niven-Jenkins</span>, <span class="refTitle">"Content Delivery Network Interconnection (CDNI) Control Interface / Triggers"</span>, <span class="seriesInfo">RFC 8007</span>, <span class="seriesInfo">DOI 10.17487/RFC8007</span>, <time datetime="2016-12" class="refDate">December 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8007">https://www.rfc-editor.org/info/rfc8007</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8008">[RFC8008]</dt>
        <dd>
<span class="refAuthor">Seedorf, J.</span>, <span class="refAuthor">Peterson, J.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">van Brandenburg, R.</span>, and <span class="refAuthor">K. Ma</span>, <span class="refTitle">"Content Delivery Network Interconnection (CDNI) Request Routing: Footprint and Capabilities Semantics"</span>, <span class="seriesInfo">RFC 8008</span>, <span class="seriesInfo">DOI 10.17487/RFC8008</span>, <time datetime="2016-12" class="refDate">December 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8008">https://www.rfc-editor.org/info/rfc8008</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8804">[RFC8804]</dt>
        <dd>
<span class="refAuthor">Finkelman, O.</span> and <span class="refAuthor">S. Mishra</span>, <span class="refTitle">"Content Delivery Network Interconnection (CDNI) Request Routing Extensions"</span>, <span class="seriesInfo">RFC 8804</span>, <span class="seriesInfo">DOI 10.17487/RFC8804</span>, <time datetime="2020-09" class="refDate">September 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8804">https://www.rfc-editor.org/info/rfc8804</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="URI.signing">[URI.signing]</dt>
        <dd>
<span class="refAuthor">van Brandenburg, R.</span>, <span class="refAuthor">Leung, K.</span>, and <span class="refAuthor">P. Sorber</span>, <span class="refTitle">"URI Signing for CDN Interconnection (CDNI)"</span>, <time datetime="2019-10-08" class="refDate">8 October 2019</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-cdni-uri-signing-19.txt">http://www.ietf.org/internet-drafts/draft-ietf-cdni-uri-signing-19.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="W3C">[W3C]</dt>
      <dd>
<span class="refTitle">"Cross-Origin Resource Sharing"</span>, <span>&lt;<a href="https://www.w3.org/TR/2020/SPSD-cors-20200602/">https://www.w3.org/TR/2020/SPSD-cors-20200602/</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-8.2">
        <h3 id="name-informative-references-8">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-informative-references-8" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="AWSv4Method">[AWSv4Method]</dt>
        <dd>
<span class="refTitle">"Authenticating Requests (AWS Signature Version 4)"</span>, <span>&lt;<a href="https://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-authenticating-requests.html">https://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-authenticating-requests.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OC-CI">[OC-CI]</dt>
        <dd>
<span class="refAuthor">Goldstein, G., Ed.</span>, <span class="refAuthor">Power, W.</span>, <span class="refAuthor">Bichot, G.</span>, and <span class="refAuthor">A. Siloniz</span>, <span class="refTitle">"Open Caching - Configuration Interface Functional Specification (Parts 1,2,3)"</span>, <span class="seriesInfo">Version 0.1</span>, <time datetime="2021-07-02" class="refDate">2 July 2021</time>. </dd>
<dd class="break"></dd>
<dt id="RFC5861">[RFC5861]</dt>
        <dd>
<span class="refAuthor">Nottingham, M.</span>, <span class="refTitle">"HTTP Cache-Control Extensions for Stale Content"</span>, <span class="seriesInfo">RFC 5861</span>, <span class="seriesInfo">DOI 10.17487/RFC5861</span>, <time datetime="2010-05" class="refDate">May 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5861">https://www.rfc-editor.org/info/rfc5861</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6707">[RFC6707]</dt>
        <dd>
<span class="refAuthor">Niven-Jenkins, B.</span>, <span class="refAuthor">Le Faucheur, F.</span>, and <span class="refAuthor">N. Bitar</span>, <span class="refTitle">"Content Distribution Network Interconnection (CDNI) Problem Statement"</span>, <span class="seriesInfo">RFC 6707</span>, <span class="seriesInfo">DOI 10.17487/RFC6707</span>, <time datetime="2012-09" class="refDate">September 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6707">https://www.rfc-editor.org/info/rfc6707</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7336">[RFC7336]</dt>
        <dd>
<span class="refAuthor">Peterson, L.</span>, <span class="refAuthor">Davie, B.</span>, and <span class="refAuthor">R. van Brandenburg, Ed.</span>, <span class="refTitle">"Framework for Content Distribution Network Interconnection (CDNI)"</span>, <span class="seriesInfo">RFC 7336</span>, <span class="seriesInfo">DOI 10.17487/RFC7336</span>, <time datetime="2014-08" class="refDate">August 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7336">https://www.rfc-editor.org/info/rfc7336</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7694">[RFC7694]</dt>
        <dd>
<span class="refAuthor">Reschke, J.</span>, <span class="refTitle">"Hypertext Transfer Protocol (HTTP) Client-Initiated Content-Encoding"</span>, <span class="seriesInfo">RFC 7694</span>, <span class="seriesInfo">DOI 10.17487/RFC7694</span>, <time datetime="2015-11" class="refDate">November 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7694">https://www.rfc-editor.org/info/rfc7694</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SVA">[SVA]</dt>
      <dd>
<span class="refTitle">"Streaming Video Alliance Home Page"</span>, <span>&lt;<a href="https://www.streamingvideoalliance.org">https://www.streamingvideoalliance.org</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses-10">
<a href="#name-authors-addresses-10" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Glenn Goldstein</span></div>
<div dir="auto" class="left"><span class="org">Lumen Technologies</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:glenng1215@gmail.com" class="email">glenng1215@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Will Power</span></div>
<div dir="auto" class="left"><span class="org">Lumen Technologies</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:wrpower@gmail.com" class="email">wrpower@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Guillaume Bichot</span></div>
<div dir="auto" class="left"><span class="org">Broadpeak</span></div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:guillaume.bichot@gmail.com" class="email">guillaume.bichot@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Alfonso Siloniz</span></div>
<div dir="auto" class="left"><span class="org">Telefonica</span></div>
<div dir="auto" class="left"><span class="country-name">Spain</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:alfonsosiloniz@gmail.com" class="email">alfonsosiloniz@gmail.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
