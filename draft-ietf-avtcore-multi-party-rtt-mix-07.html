<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>RTP-mixer formatting of multi-party Real-time text</title>
<meta content="Gunnar Hellstrom" name="author">
<meta content='
       
Real-time text mixers for multi-party sessions need to identify the source of each transmitted group of text so that the text can be presented by endpoints in suitable grouping with other text from the same source.
 
       
Regional regulatory requirements specify provision of real-time text in multi-party calls. RFC 4103 mixer implementations can use traditional RTP functions for source identification, but the mixer source switching performance is limited when using the default transmission with redundancy.
 
       
Enhancements for RFC 4103 real-time text mixing is provided in this document, suitable for a centralized conference model that enables source identification and source switching. The intended use is for real-time text mixers and multi-party-aware participant endpoints. Two mechanisms are provided. The mechanisms builds on use of the CSRC list in the RTP packet for source identification. One method makes use of the same "text/red" format as for two-party sessions, while the other makes use of an extended packet format "text/rex" for more efficient transmission.
 
       
 A capability exchange is specified so that it can be verified that a participant can handle the multi-party coded real-time text stream.  The capability for one method is by use of a media attribute a=rtt-mix-rtp-mixer. The other method is indicated by the media subtype "text/rex".
       
       
The document updates RFC 4102  and RFC 4103 
       
       
 A brief description about how a mixer can format text for the case when the endpoint is not multi-party aware is also provided.
       
    ' name="description">
<meta content="xml2rfc 2.46.0" name="generator">
<meta content="draft-ietf-avtcore-multi-party-rtt-mix-07" name="ietf.draft">
<link href="/tmp/draft-ietf-avtcore-multi-party-rtt-mix-07-qnfb0onm.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code {
  background-color: #f9f9f9;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">RTP-mixer format for multi-party RTT</td>
<td class="right">July 2020</td>
</tr></thead>
<tfoot><tr>
<td class="left">Hellstrom</td>
<td class="center">Expires 13 January 2021</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">AVTCore</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-avtcore-multi-party-rtt-mix-07</dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a href="https://www.rfc-editor.org/rfc/rfcRFC%204102" class="eref">RFC 4102</a>, <a href="https://www.rfc-editor.org/rfc/rfcRFC%204103" class="eref">RFC 4103</a> (if approved)</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2020-07-12" class="published">12 July 2020</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2021-01-13">13 January 2021</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">G. Hellstrom</div>
<div class="org">Gunnar Hellstrom Accessible Communication</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">RTP-mixer formatting of multi-party Real-time text</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">
Real-time text mixers for multi-party sessions need to identify the source of each transmitted group of text so that the text can be presented by endpoints in suitable grouping with other text from the same source.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">
Regional regulatory requirements specify provision of real-time text in multi-party calls. RFC 4103 mixer implementations can use traditional RTP functions for source identification, but the mixer source switching performance is limited when using the default transmission with redundancy.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
<p id="section-abstract-3">
Enhancements for RFC 4103 real-time text mixing is provided in this document, suitable for a centralized conference model that enables source identification and source switching. The intended use is for real-time text mixers and multi-party-aware participant endpoints. Two mechanisms are provided. The mechanisms builds on use of the CSRC list in the RTP packet for source identification. One method makes use of the same "text/red" format as for two-party sessions, while the other makes use of an extended packet format "text/rex" for more efficient transmission.<a href="#section-abstract-3" class="pilcrow">¶</a></p>
<p id="section-abstract-4">
 A capability exchange is specified so that it can be verified that a participant can handle the multi-party coded real-time text stream.  The capability for one method is by use of a media attribute a=rtt-mix-rtp-mixer. The other method is indicated by the media subtype "text/rex".<a href="#section-abstract-4" class="pilcrow">¶</a></p>
<p id="section-abstract-5">
The document updates RFC 4102<span>[<a href="#RFC4102" class="xref">RFC4102</a>]</span> and RFC 4103<span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span><a href="#section-abstract-5" class="pilcrow">¶</a></p>
<p id="section-abstract-6">
 A brief description about how a mixer can format text for the case when the endpoint is not multi-party aware is also provided.<a href="#section-abstract-6" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 13 January 2021.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2020 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-selected-solution-and-consi" class="xref">Selected solution and considered alternative</a><a href="#section-toc.1-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-nomenclature" class="xref">Nomenclature</a><a href="#section-toc.1-1.1.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1" class="keepWithNext"><a href="#section-1.3" class="xref">1.3</a>.  <a href="#name-intended-application" class="xref">Intended application</a><a href="#section-toc.1-1.1.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-specified-solutions" class="xref">Specified solutions</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-negotiated-use-of-the-rfc-4" class="xref">Negotiated use of the RFC 4103 format for multi-party in a single RTP stream</a><a href="#section-toc.1-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-use-of-an-extended-packet-f" class="xref">Use of an extended packet format "text/rex" with text from multiple sources</a><a href="#section-toc.1-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-mixing-for-multi-party-unaw" class="xref">Mixing for multi-party unaware endpoints</a><a href="#section-toc.1-1.2.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-presentation-level-consider" class="xref">Presentation level considerations</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-presentation-by-multi-party" class="xref">Presentation by multi-party aware endpoints</a><a href="#section-toc.1-1.3.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-multi-party-mixing-for-mult" class="xref">Multi-party mixing for multi-party unaware endpoints</a><a href="#section-toc.1-1.3.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-gateway-considerations" class="xref">Gateway Considerations</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-gateway-considerations-with" class="xref">Gateway considerations with Textphones (e.g. TTYs).</a><a href="#section-toc.1-1.4.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-gateway-considerations-with-" class="xref">Gateway considerations with WebRTC.</a><a href="#section-toc.1-1.4.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-updates-to-rfc-4102-and-rfc" class="xref">Updates to RFC 4102 and RFC 4103</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-congestion-considerations" class="xref">Congestion considerations</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-acknowledgements" class="xref">Acknowledgements</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-registration-of-the-rtt-mix" class="xref">Registration of the "rtt-mix-rtp-mixer" sdp media attribute</a><a href="#section-toc.1-1.8.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-registration-of-text-rex-me" class="xref">Registration of "text/rex" media subtype</a><a href="#section-toc.1-1.8.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-change-history" class="xref">Change history</a><a href="#section-toc.1-1.10.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-changes-included-in-draft-i" class="xref">Changes included in draft-ietf-avtcore-multi-party-rtt-mix-07</a><a href="#section-toc.1-1.10.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-changes-included-in-draft-ie" class="xref">Changes included in draft-ietf-avtcore-multi-party-rtt-mix-06</a><a href="#section-toc.1-1.10.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="xref">10.3</a>.  <a href="#name-changes-included-in-draft-iet" class="xref">Changes included in draft-ietf-avtcore-multi-party-rtt-mix-05</a><a href="#section-toc.1-1.10.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.10.2.4">
                <p id="section-toc.1-1.10.2.4.1"><a href="#section-10.4" class="xref">10.4</a>.  <a href="#name-changes-included-in-draft-ietf" class="xref">Changes included in draft-ietf-avtcore-multi-party-rtt-mix-04</a><a href="#section-toc.1-1.10.2.4.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.10.2.5">
                <p id="section-toc.1-1.10.2.5.1"><a href="#section-10.5" class="xref">10.5</a>.  <a href="#name-changes-included-in-draft-ietf-" class="xref">Changes included in draft-ietf-avtcore-multi-party-rtt-mix-03</a><a href="#section-toc.1-1.10.2.5.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.10.2.6">
                <p id="section-toc.1-1.10.2.6.1"><a href="#section-10.6" class="xref">10.6</a>.  <a href="#name-changes-included-in-draft-ietf-a" class="xref">Changes included in draft-ietf-avtcore-multi-party-rtt-mix-02</a><a href="#section-toc.1-1.10.2.6.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.10.2.7">
                <p id="section-toc.1-1.10.2.7.1"><a href="#section-10.7" class="xref">10.7</a>.  <a href="#name-changes-to-draft-ietf-avtco" class="xref">Changes to draft-ietf-avtcore-multi-party-rtt-mix-01</a><a href="#section-toc.1-1.10.2.7.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.10.2.8">
                <p id="section-toc.1-1.10.2.8.1"><a href="#section-10.8" class="xref">10.8</a>.  <a href="#name-changes-from-draft-hellstro" class="xref">Changes from draft-hellstrom-avtcore-multi-party-rtt-source-03 to draft-ietf-avtcore-multi-party-rtt-mix-00</a><a href="#section-toc.1-1.10.2.8.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.10.2.9">
                <p id="section-toc.1-1.10.2.9.1"><a href="#section-10.9" class="xref">10.9</a>.  <a href="#name-changes-from-draft-hellstrom" class="xref">Changes from draft-hellstrom-avtcore-multi-party-rtt-source-02 to -03</a><a href="#section-toc.1-1.10.2.9.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.10.2.10">
                <p id="section-toc.1-1.10.2.10.1"><a href="#section-10.10" class="xref">10.10</a>. <a href="#name-changes-from-draft-hellstrom-" class="xref">Changes from draft-hellstrom-avtcore-multi-party-rtt-source-01 to -02</a><a href="#section-toc.1-1.10.2.10.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.10.2.11">
                <p id="section-toc.1-1.10.2.11.1"><a href="#section-10.11" class="xref">10.11</a>. <a href="#name-changes-from-draft-hellstrom-a" class="xref">Changes from draft-hellstrom-avtcore-multi-party-rtt-source-00 to -01</a><a href="#section-toc.1-1.10.2.11.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-references" class="xref">References</a><a href="#section-toc.1-1.11.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="xref">11.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.11.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="xref">11.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-toc.1-1.11.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-appendix.a" class="xref"></a><a href="#name-authors-address" class="xref">Author's Address</a><a href="#section-toc.1-1.12.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">
RFC 4103<span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> specifies use of RFC 3550 RTP <span>[<a href="#RFC3550" class="xref">RFC3550</a>]</span> for transmission of real-time text (RTT) and the "text/t140" format. It also specifies a redundancy format "text/red" for increased robustness. RFC 4102 <span>[<a href="#RFC4102" class="xref">RFC4102</a>]</span> registers the "text/red" format. Regional regulatory requirements specify provision of real-time text in multi-party calls.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">
  Real-time text is usually provided together with audio and sometimes with video in conversational sessions.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">
The redundancy scheme of RFC 4103 <span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> enables efficient transmission of redundant text in packets together with new text. However the redundancy header format has no source indicators for the redundant transmissions. An assumption has had to be made that the redundant parts in a packet are from the same source as the new text. The recommended transmission is one new and two redundant generations of text (T140blocks) in each packet and the recommended transmission interval is 300 ms.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">
 A mixer, selecting between text input from different sources and transmitting it in a common stream needs to make sure that the receiver can assign the received text to the proper sources for presentation. Therefore, using RFC 4103 without any extra rule for source identification, the mixer needs to stop sending new text from one source and then make sure that all text so far has been sent with all intended redundancy levels (usually two) before switching to another source. That causes the long time of one second to switch between transmission of text from one source to text from another source when using the default transmission interval 300 ms. Both the total throughput and the switching performance in the mixer would be too low for most applications. However by shorting the transmission interval to 100 ms, good performance is achieved for up to 3 simultaneously sending sources and usable performance for up to 5 simultaneously sending sources. This method is negotiated through an sdp media attribute "rtt-mix-rtp-mixer".<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">
A more efficient source identification scheme requires that each redundant T140block has its source individually preserved. This document introduces a source indicator by specific rules for populating the CSRC-list and the data header in the RTP-packet.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">
 An extended packet format "text/rex" is specified for this purpose, providing the possibility to include text from up to 15 sources in each packet in order to enhance mixer source switching performance. By these extensions, the performance requirements on multi-party mixing for real-time text are exceeded by the "text/rex" solution in this document.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">
 A negotiation mechanism can therefore be based on selection of the "text/red" with media attribute "rtt-mix-rtp-mixer"  or the "text/rex" media format for verification that the parties are able to handle a multi-party coded stream and agreeing on which method to use.<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">
 A fall-back mixing procedure is specified for cases when the negotiation results in "text/red" without the "rtt-mix attribute" being the only common submedia format.<a href="#section-1-8" class="pilcrow">¶</a></p>
<p id="section-1-9">
     The document updates RFC 4102<span>[<a href="#RFC4102" class="xref">RFC4102</a>]</span> and RFC 4103<span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> by introducing an attribute for indicating multi-party capability, and an extended packet format for the multi-party mixing case and more strict rules for the source indications.<a href="#section-1-9" class="pilcrow">¶</a></p>
<section id="section-1.1">
        <h3 id="name-selected-solution-and-consi">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-selected-solution-and-consi" class="section-name selfRef">Selected solution and considered alternative</a>
        </h3>
<p id="section-1.1-1">
    A number of alternatives were considered when searching an efficient multi-party method for real-time text. This section explains a few of them briefly.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.1-2">
          <dt id="section-1.1-2.1">One RTP stream per source, sent in the same RTP session with "text/red" format.</dt>
          <dd id="section-1.1-2.2">
   From some points of view, use of multiple RTP streams, one for each source, sent in the same RTP session, called the RTP translator model in RFC 3550 <span>[<a href="#RFC3550" class="xref">RFC3550</a>]</span>, would be efficient, and use exactly the same packet format as RFC 4103, the same payload type and a simple SDP declaration. However, there is currently lack of support for multi-stream RTP in certain implementation technologies. The multi-stream solution would also cause more overhead than a single RTP stream solution "text/rex" specified in this document and more the more simultaneous sending participants there are.<a href="#section-1.1-2.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.3">
   The "text/red" format in RFC 4103 with shorter transmission interval, and indicating source in CSRC.
          </dt>
          <dd id="section-1.1-2.4">
   The "text/red" format with "text/t140" payload in a single RTP stream can be sent with 100 ms packet intervals instead of the regular 300 ms. The source is indicated in the CSRC field. Source switching can then be done every 300 ms while simultaneous transmission occurs. With two participants sending text simultaneously, the switching and transmission performance is good. With three or more simultaneously sending participants, there will be a noticable jerkiness in text presentation, more the more participants who send text simultaneously. With three sending participants, the jerkiness will be about 450 ms, and with five, about 1350 ms. Text sent from a source at the end of the period its text is sent by the mixer will have close to zero extra delay. Recent text will be presented with no or low delay. The 1350 ms jerkiness will be noticable and slightly unpleasant, but corresponds in time to what typing humans often cause by hesitation or changing position while typing. A benefit of this method is that no new packet format needs to be introduced and implemented. Since simultaneous typing by more than two parties is rare, and in many applications also more than three parties in a call is rare, this method can be used successfully without its limitations becoming annoying. Negotiation is based on a new sdp media attribute "rtt-mix-rtp-mixer".<a href="#section-1.1-2.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.5">The "text/rex" packet format with up to 15 sources in one packet.</dt>
          <dd id="section-1.1-2.6">
   The mechanism called "text/rex" specified in this document  makes use of the RTP
   mixer model specified in RFC3550<span>[<a href="#RFC3550" class="xref">RFC3550</a>]</span>. Text from up to 15 sources can be included in each packet. Packets are normally sent every 300 ms. The mean delay will be 150 ms. The sources are indicated in the CSRC list of the RTP packets. A new redundancy packet format is specified, named "text/rex".<a href="#section-1.1-2.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.7">The presentation planned by the mixer for multi-party unaware endpoints.</dt>
          <dd id="section-1.1-2.8">
  It is desirable to have a method that does not require any modifications in existing user devices implementing RFC 4103 for RTT without explicit support of multi-party sessions. This is possible by having the mixer insert a new line and a text formatted source label before each switch of text source in the stream. Switch of source can only be done in places in the text where it does not disturb the perception of the contents. Text from only one source can be presented in real time at a time. The delay will therefore be varying. The method has also other limitations, but is included in this document as a fallback method. In calls where parties take turns properly by ending their entries with a new line, the limitations will have limited influence on the user experience. while only two parties send text, these two will see the text in real time with no delay.<a href="#section-1.1-2.8" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
<section id="section-1.2">
        <h3 id="name-nomenclature">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-nomenclature" class="section-name selfRef">Nomenclature</a>
        </h3>
<p id="section-1.2-1">
        The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in
        this document are to be interpreted as described in
        <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<p id="section-1.2-2">
  The terms SDES, CNAME, NAME, SSRC, CSRC, CSRC list, CC, RTCP, RTP-mixer, RTP-translator are explained in <span>[<a href="#RFC3550" class="xref">RFC3550</a>]</span><a href="#section-1.2-2" class="pilcrow">¶</a></p>
<p id="section-1.2-3">
  The term "T140block" is defined in RFC 4103 <span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span>  to contain one or more T.140 code elements.<a href="#section-1.2-3" class="pilcrow">¶</a></p>
<p id="section-1.2-4">
        "TTY" stands for a text telephone type used in North America.<a href="#section-1.2-4" class="pilcrow">¶</a></p>
<p id="section-1.2-5">
        "WebRTC" stands for web based communication specified by W3C and IETF.<a href="#section-1.2-5" class="pilcrow">¶</a></p>
<p id="section-1.2-6">
        "DTLS-SRTP" stnds for security specified in RFC 5764 <span>[<a href="#RFC5764" class="xref">RFC5764</a>]</span>.<a href="#section-1.2-6" class="pilcrow">¶</a></p>
</section>
<section id="section-1.3">
        <h3 id="name-intended-application">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-intended-application" class="section-name selfRef">Intended application</a>
        </h3>
<p id="section-1.3-1">
        The methods for multi-party real-time text are primarily intended for use in transmission between mixers and endpoints in centralised mixing configurations. It is also applicable between endpoints as well as between mixers. An often mentioned application is for emergency service calls with real-time text and voice, where a calltaker want to make an attended handover of a call to another agent, and stay observing in the session. Multimedia conference sessions with support for participants to contribute in text is another application. Conferences with central support for speech-to-text conversion is yet another mentioned application.<a href="#section-1.3-1" class="pilcrow">¶</a></p>
<p id="section-1.3-2">
          In all these applications, normally only one participant at a time will send long text utterances. In some cases, one other participant will occasionally contribute with a longer comment simultaneously. That may also happen in some rare cases when text is interpreted to text in another language in a conference. Apart from these cases, other participants are only expected to contribute with very brief utterings while others are sending text.<a href="#section-1.3-2" class="pilcrow">¶</a></p>
<p id="section-1.3-3">
          Text is supposed to be human generated, by some text input means, such as typing on a keyboard or using speech-to-text technology. Occasional small cut-and-paste operations may appear even if that is not the initial purpose of real-time text.<a href="#section-1.3-3" class="pilcrow">¶</a></p>
<p id="section-1.3-4">
          The real-time characteristics of real-time text is essential for the participants to be able to contribute to a conversation. If the text is too much delayed from typing a letter to its presentation, then, in some conference situations, the opportunity to comment will be gone and someone else will grab the turn. A delay of more than one second in such situations is an obstacle for good conversation.<a href="#section-1.3-4" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2">
      <h2 id="name-specified-solutions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-specified-solutions" class="section-name selfRef">Specified solutions</a>
      </h2>
<section id="section-2.1">
        <h3 id="name-negotiated-use-of-the-rfc-4">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-negotiated-use-of-the-rfc-4" class="section-name selfRef">Negotiated use of the RFC 4103 format for multi-party in a single RTP stream</a>
        </h3>
<p id="section-2.1-1">
This section specifies use of the current format specified in <span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> for true multi-party real-time text. It is an update of RFC 4103 by a clarification on one way to use it in the multi-party situation. It is done by completing a negotiation for this kind of multi-party capability and by indicating source in the CSRC element in the RTP packets. Please use <span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> as reference when reading the following description.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<div id="nego1">
<section id="section-2.1.1">
          <h4 id="name-negotiation-for-use-of-this">
<a href="#section-2.1.1" class="section-number selfRef">2.1.1. </a><a href="#name-negotiation-for-use-of-this" class="section-name selfRef">Negotiation for use of this method</a>
          </h4>
<p id="section-2.1.1-1">
RFC 4103<span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> specifies use of RFC 3550 RTP<span>[<a href="#RFC3550" class="xref">RFC3550</a>]</span>, and a redundancy format "text/red" for increased robustness of real-time text transmission.
This document updates RFC 4102<span>[<a href="#RFC4102" class="xref">RFC4102</a>]</span> and RFC 4103<span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> by introducing a capability negotiation for handling multi-party real-time text. The capability negotiation is based on use of the sdp media attribute "rtt-mix-rtp-mixer".<a href="#section-2.1.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-2.1.1-2">
            <dt id="section-2.1.1-2.1">The syntax is as follows:</dt>
            <dd id="section-2.1.1-2.2">a=rtt-mix-rtp-mixer<a href="#section-2.1.1-2.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-2.1.1-3">
  A transmitting party SHALL send text according to the multi-party format only when the negotiation for this method was successful and when the CC field in the RTP packet is 1. In all other cases, the packets SHALL be populated as for a two-party session.<a href="#section-2.1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-2.1.2">
          <h4 id="name-use-of-fields-in-the-rtp-pa">
<a href="#section-2.1.2" class="section-number selfRef">2.1.2. </a><a href="#name-use-of-fields-in-the-rtp-pa" class="section-name selfRef">Use of fields in the RTP packets</a>
          </h4>
<p id="section-2.1.2-1">
The CC field SHALL show the number of members in the CSRC list, which is one (1) in transmissions from a mixer involved in a multi-party session, and otherwise 0.<a href="#section-2.1.2-1" class="pilcrow">¶</a></p>
<p id="section-2.1.2-2">
When transmitted from a mixer during a multi-party session, a CSRC list is included in the packet. The single member in the CSRC-list SHALL contain the SSRC of the source of the T140blocks in the packet. When redundancy is used, the recommended level of redundancy is to use one primary and two redundant generations of T140blocks. In some cases, a primary or redundant T140block is empty, but is still represented by a member in the redundancy header.<a href="#section-2.1.2-2" class="pilcrow">¶</a></p>
<p id="section-2.1.2-3">
  From other aspects, the contents of the RTP packts are equal to what is specified in RFC 4103.<a href="#section-2.1.2-3" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.3">
          <h4 id="name-transmission-of-multi-party">
<a href="#section-2.1.3" class="section-number selfRef">2.1.3. </a><a href="#name-transmission-of-multi-party" class="section-name selfRef">Transmission of multi-party contents</a>
          </h4>
<p id="section-2.1.3-1">
      As soon as a participant is known to participate in a session and being available for text reception, a Unicode BOM character SHALL be sent to it according to the procedures in this section. If the transmitter is a mixer, then the source of this character SHALL be indicated to be the mixer itself.<a href="#section-2.1.3-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.4">
          <h4 id="name-keep-alive">
<a href="#section-2.1.4" class="section-number selfRef">2.1.4. </a><a href="#name-keep-alive" class="section-name selfRef">Keep-alive</a>
          </h4>
<p id="section-2.1.4-1">
      After that, the transmitter SHALL send keep-alive traffic to the receivers at regular intervals when no other traffic has occurred during that interval if that is decided for the actual connection. Recommendations for keep-alive can be found in RFC 6263<span>[<a href="#RFC6263" class="xref">RFC6263</a>]</span>.<a href="#section-2.1.4-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.5">
          <h4 id="name-transmission-interval">
<a href="#section-2.1.5" class="section-number selfRef">2.1.5. </a><a href="#name-transmission-interval" class="section-name selfRef">Transmission interval</a>
          </h4>
<p id="section-2.1.5-1">
      A "text/red" transmitter SHOULD send packets distributed in time as long as there is something (new or  redundant T140blocks) to transmit.  The maximum transmission interval SHOULD then be 300 ms. It is RECOMMENDED to send next packet to a receiver as soon as new text to that receiver is available, as long as the time after the latest sent packet to the same receiver is more than or equal to 100 ms, and also the maximum character rate to the receiver is not exceeded. The intention is to keep the latency low while keeping a good protection against text loss in bursty packet loss conditions. New and redundant text from one source MAY be transmitted in the same packet. Text from different sources MUST NOT be transmitted in the same packet.<a href="#section-2.1.5-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.6">
          <h4 id="name-do-not-send-received-text-t">
<a href="#section-2.1.6" class="section-number selfRef">2.1.6. </a><a href="#name-do-not-send-received-text-t" class="section-name selfRef">Do not send received text to the originating source</a>
          </h4>
<p id="section-2.1.6-1">
              Text received from a participant SHOULD NOT be included in transmission to that participant.<a href="#section-2.1.6-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.7">
          <h4 id="name-clean-incoming-text">
<a href="#section-2.1.7" class="section-number selfRef">2.1.7. </a><a href="#name-clean-incoming-text" class="section-name selfRef">Clean incoming text</a>
          </h4>
<p id="section-2.1.7-1">
              A mixer SHALL handle reception and recovery of packet loss, marking of possible text loss and deletion of 'BOM' characters from each participant before queueing received text for transmission to receiving participants.<a href="#section-2.1.7-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.8">
          <h4 id="name-redundancy">
<a href="#section-2.1.8" class="section-number selfRef">2.1.8. </a><a href="#name-redundancy" class="section-name selfRef">Redundancy</a>
          </h4>
<p id="section-2.1.8-1">
      The transmitting party using redundancy SHALL send redundant repetitions of T140blocks aleady transmitted in earlier packets. The number of redundant generations of T140blocks to include in transmitted packets SHALL be deducted from the SDP negotiation. It SHOULD be set to the minimum of the number declared by the two parties negotiating a connection.<a href="#section-2.1.8-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.9">
          <h4 id="name-text-placement-in-packets">
<a href="#section-2.1.9" class="section-number selfRef">2.1.9. </a><a href="#name-text-placement-in-packets" class="section-name selfRef">Text placement in packets</a>
          </h4>
<p id="section-2.1.9-1">
             At time of transmission, the mixer SHALL populate the RTP packet with all T140blocks queued for transmission originating from the source in turn for transmission as long as this is not in conflict with the allowed number of characters per second or the maximum packet size. The SSRC of the source shall be placed as the member in the CSRC-list.<a href="#section-2.1.9-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.10">
          <h4 id="name-maximum-number-of-sources-p">
<a href="#section-2.1.10" class="section-number selfRef">2.1.10. </a><a href="#name-maximum-number-of-sources-p" class="section-name selfRef">Maximum number of sources per packet</a>
          </h4>
<p id="section-2.1.10-1">
           When text from more than one source is available for transmission, the mixer SHALL let the sources take turns in having their text transmitted. When switching from transmission of one source to allow another source to have its text sent, all intended redundant generations of the last text from the current source MUST be transmitted before text from another source can be transmitted. Actively transmitting sources SHOULD be allowed to take turns as frequently as possible to have their text transmitted. That implies that with the recommended redundancy, the mixer SHALL send primary text and two packets with redundant text from the current source before text from another source is transmitted. The source with the oldest received text in the mixer SHOULD be next in turn to get all its available text transmitted.<a href="#section-2.1.10-1" class="pilcrow">¶</a></p>
<p id="section-2.1.10-2">
      Note: The CSRC-list in an RTP packet only includes the participant who's text is included in text blocks. It is not the same as the total list of participants in a conference. With audio and video media, the CSRC-list would often contain all participants who are not muted whereas text participants that don't type are completely silent and thus are not represented in RTP packet CSRC-lists once their text have been transmitted as primary and the intended number of redundant generations.<a href="#section-2.1.10-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.11">
          <h4 id="name-empty-t140blocks">
<a href="#section-2.1.11" class="section-number selfRef">2.1.11. </a><a href="#name-empty-t140blocks" class="section-name selfRef">Empty T140blocks</a>
          </h4>
<p id="section-2.1.11-1">
      If no unsent T140blocks were available for a source at the time of populating a packet, but T140blocks are available which have not yet been sent the full intended number of redundant transmissions, then the primary T140block for that source is composed of an empty T140block, and populated (without taking up any length) in a packet for transmission. The corresponding SSRC SHALL be placed as usual in its place in the CSRC-list.<a href="#section-2.1.11-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.12">
          <h4 id="name-creation-of-the-redundancy">
<a href="#section-2.1.12" class="section-number selfRef">2.1.12. </a><a href="#name-creation-of-the-redundancy" class="section-name selfRef">Creation of the redundancy</a>
          </h4>
<p id="section-2.1.12-1">
      The primary T140block from a source in the latest transmitted packet is used to populate the first redundant T140block for that source. The first redundant T140block for that source from the latest transmission is placed as the second redundant T140block.<a href="#section-2.1.12-1" class="pilcrow">¶</a></p>
<p id="section-2.1.12-2">
      Usually this is the level of redundancy used. If a higher number of redundancy is negotiated, then the procedure SHALL be maintained until all available redundant levels of T140blocks are placed in the packet. If a receiver has negotiated a lower number of "text/red" generations, then that level shall be the maximum used by the transmitter.<a href="#section-2.1.12-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.13">
          <h4 id="name-timer-offset-fields">
<a href="#section-2.1.13" class="section-number selfRef">2.1.13. </a><a href="#name-timer-offset-fields" class="section-name selfRef">Timer offset fields</a>
          </h4>
<p id="section-2.1.13-1">
      The timestamp offset values are inserted in the data header, with the time offset from the RTP timestamp in the packet when the corresponding T140block was sent from its original source as primary.<a href="#section-2.1.13-1" class="pilcrow">¶</a></p>
<p id="section-2.1.13-2">
        The timestamp offsets are expressed in the same clock tick units as the RTP timestamp.<a href="#section-2.1.13-2" class="pilcrow">¶</a></p>
<p id="section-2.1.13-3">
        The timestamp offset values for empty T140blocks have no relevance but SHOULD be assigned realistic values.<a href="#section-2.1.13-3" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.14">
          <h4 id="name-other-rtp-header-fields">
<a href="#section-2.1.14" class="section-number selfRef">2.1.14. </a><a href="#name-other-rtp-header-fields" class="section-name selfRef">Other RTP header fields</a>
          </h4>
<p id="section-2.1.14-1">
      The number of members in the CSRC list ( 0 or 1) shall be placed in the "CC" header field. Only mixers place value 1 in the "CC" field.<a href="#section-2.1.14-1" class="pilcrow">¶</a></p>
<p id="section-2.1.14-2">
                The current time SHALL be inserted in the timestamp.<a href="#section-2.1.14-2" class="pilcrow">¶</a></p>
<p id="section-2.1.14-3">
        The SSRC of the mixer for the RTT session SHALL be inserted in the SSRC field of the RTP header.<a href="#section-2.1.14-3" class="pilcrow">¶</a></p>
<p id="section-2.1.14-4">
        The M-bit shall be handled as specified in <span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span>.<a href="#section-2.1.14-4" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.15">
          <h4 id="name-pause-in-transmission">
<a href="#section-2.1.15" class="section-number selfRef">2.1.15. </a><a href="#name-pause-in-transmission" class="section-name selfRef">Pause in transmission</a>
          </h4>
<p id="section-2.1.15-1">
      When there is no new T140block to transmit, and no redundant T140block that has not been retransmitted the intended number of times from any source, the transmission process can stop until either new T140blocks arrive, or a keep-alive method calls for transmission of keep-alive packets.<a href="#section-2.1.15-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.16">
          <h4 id="name-rtcp-considerations">
<a href="#section-2.1.16" class="section-number selfRef">2.1.16. </a><a href="#name-rtcp-considerations" class="section-name selfRef">RTCP considerations</a>
          </h4>
<p id="section-2.1.16-1">
      A mixer SHALL send RTCP reports with SDES, CNAME and NAME information about the sources in the multi-party call. This makes it possible for participants to compose a suitable label for text from each source.<a href="#section-2.1.16-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.17">
          <h4 id="name-reception-of-multi-party-co">
<a href="#section-2.1.17" class="section-number selfRef">2.1.17. </a><a href="#name-reception-of-multi-party-co" class="section-name selfRef">Reception of multi-party contents</a>
          </h4>
<p id="section-2.1.17-1">

The "text/red" receiver included in an endpoint with presentation functions will receive RTP packets in the single stream from the mixer, and SHALL distribute the T140blocks for presentation in presentation areas for each source. Other receiver roles, such as gateways or chained mixers are also feasible, and requires consideration if the stream shall just be forwarded, or distributed based on the different sources.<a href="#section-2.1.17-1" class="pilcrow">¶</a></p>
<section id="section-2.1.17.1">
            <h5 id="name-multi-party-vs-two-party-us">
<a href="#section-2.1.17.1" class="section-number selfRef">2.1.17.1. </a><a href="#name-multi-party-vs-two-party-us" class="section-name selfRef">Multi-party vs two-party use</a>
            </h5>
<p id="section-2.1.17.1-1">

If the "CC" field value of a received packet is 1, it indicates that multi-party transmission is active, and the receiver MUST be prepared to act on the source according to its role. If the CC value is 0, the connection is point-to-point.<a href="#section-2.1.17.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.17.2">
            <h5 id="name-level-of-redundancy">
<a href="#section-2.1.17.2" class="section-number selfRef">2.1.17.2. </a><a href="#name-level-of-redundancy" class="section-name selfRef">Level of redundancy</a>
            </h5>
<p id="section-2.1.17.2-1">
The used level of redundancy generations SHALL be evaluated from the received packet contents. The number of generations (including the primary) is equal to the number of members in the redundancy header.<a href="#section-2.1.17.2-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.17.3">
            <h5 id="name-extracting-text-and-handlin">
<a href="#section-2.1.17.3" class="section-number selfRef">2.1.17.3. </a><a href="#name-extracting-text-and-handlin" class="section-name selfRef">Extracting text and handling recovery and loss</a>
            </h5>
<p id="section-2.1.17.3-1">
The RTP sequence numbers of the received packets SHALL be monitored for gaps and packets out of order.<a href="#section-2.1.17.3-1" class="pilcrow">¶</a></p>
<p id="section-2.1.17.3-2">
As long as the sequence is correct, each packet SHALL be unpacked in order. The T140blocks SHALL be extracted from the primary area, and the corresponding SSRC SHALL be extracted from the CSRC list and used for assigning the new T140block to the correct presentation areas (or correspondingly for other receiver roles).<a href="#section-2.1.17.3-2" class="pilcrow">¶</a></p>
<p id="section-2.1.17.3-3">
If a sequence number gap appears and is still there after some defined time for jitter resolution, T140data SHALL be recovered from redundant data. If the gap is wider than the number of generations of redundant T140blocks in the packet, then a t140block SHALL be created with a marker for possible text loss <span>[<a href="#T140ad1" class="xref">T140ad1</a>]</span> and assigned to the SSRC of the transmitter as a general input from the mixer because in general it is not possible to deduct from which source(s) text was lost. It is in some cases possible to deduct that no text was lost even for a gap wider than the redundancy generations, and in some cases it can be concluded which source that likely had loss. Therefore, the receiver MAY insert the marker for possible text loss <span>[<a href="#T140ad1" class="xref">T140ad1</a>]</span> in the presentation area corresponding to the source which may have had loss.<a href="#section-2.1.17.3-3" class="pilcrow">¶</a></p>
<p id="section-2.1.17.3-4">
Then, the T140block in the received packet SHALL be retrieved beginning with the highest redundant generation, and assigning it to the presentation area of that source. Finally the primary T140block SHALL be retrieved from the packet and similarly assigned to the corresponding presentation area for the source.<a href="#section-2.1.17.3-4" class="pilcrow">¶</a></p>
<p id="section-2.1.17.3-5">
If the sequence number gap was equal to or less than the number of redundancy generations in the received packet, a missing text marker SHALL NOT be inserted, and instead the T140block and the SSRC fully recovered from the redundancy information and the CSRC-list in the way indicated above.<a href="#section-2.1.17.3-5" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.17.4">
            <h5 id="name-delete-bom">
<a href="#section-2.1.17.4" class="section-number selfRef">2.1.17.4. </a><a href="#name-delete-bom" class="section-name selfRef">Delete BOM</a>
            </h5>
<p id="section-2.1.17.4-1">
Unicode character "BOM" is used as a start indication and sometimes used as a filler or keep alive by transmission implementations. These SHALL be deleted on reception.<a href="#section-2.1.17.4-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.17.5">
            <h5 id="name-empty-t140blocks-2">
<a href="#section-2.1.17.5" class="section-number selfRef">2.1.17.5. </a><a href="#name-empty-t140blocks-2" class="section-name selfRef">Empty T140blocks</a>
            </h5>
<p id="section-2.1.17.5-1">
Empty T140blocks are included as fillers for unused redundancy levels in the packets. They just do not provide any contents and do not contribute to the received streams.<a href="#section-2.1.17.5-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2.1.18">
          <h4 id="name-performance-considerations">
<a href="#section-2.1.18" class="section-number selfRef">2.1.18. </a><a href="#name-performance-considerations" class="section-name selfRef">Performance considerations</a>
          </h4>
<p id="section-2.1.18-1">
        This solution has good performance up to three participants simultaneously sending text. At higher numbers of participants simultaneously sending text, a jerkiness is visible in the presentation of text. With five participants simultaneously transmitting text, the jerkiness is about 1400 ms. Evenso, the transmission of text catches up, so there is no resulting delay introduced. The solution is therefore suitable for emergency service use, relay service use, and small or well-managed larger multimedia conferences. It is only less suitable for large conferences with a high number of participants sending text simultaneously. It should be noted that it is only the number of users sending text within the same moment that causes jerkiness, not the total number of users with RTT capability.<a href="#section-2.1.18-1" class="pilcrow">¶</a></p>
</section>
<div id="SDP-1">
<section id="section-2.1.19">
          <h4 id="name-offer-answer-considerations">
<a href="#section-2.1.19" class="section-number selfRef">2.1.19. </a><a href="#name-offer-answer-considerations" class="section-name selfRef">Offer/answer considerations</a>
          </h4>
<p id="section-2.1.19-1">
A party which has negotiated the "rtt-mix-rtp-mixer" sdp media attribute MUST populate the CSRC-list and format the packets according to this section if it acts as an rtp-mixer and sends multi-party text.<a href="#section-2.1.19-1" class="pilcrow">¶</a></p>
<p id="section-2.1.19-2">
A party which has negotiated the the "rtt-mix-rtp-mixer" sdp media attribute MUST interpret the contents of the CSRC-list and the packets according to this section in received rtp packets in the corresponding RTP stream.<a href="#section-2.1.19-2" class="pilcrow">¶</a></p>
<p id="section-2.1.19-3">
 A party performing as a mixer, which has not negotiated the "rtt-mix-rtp-mixer" sdp media attribute, but negotiated a "text/red" or "text/t140" format in a session with a participant SHOULD, if nothing else is specified for the application, format transmitted text to that participant to be suitable to present on a multi-party unaware endpoint as further specified in section <a href="#UnawareFormat" class="xref">Section 3.2</a>.<a href="#section-2.1.19-3" class="pilcrow">¶</a></p>
<p id="section-2.1.19-4">
A party not performing as a mixer MUST not include the CSRC list.<a href="#section-2.1.19-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security2">
<section id="section-2.1.20">
          <h4 id="name-security-for-session-contro">
<a href="#section-2.1.20" class="section-number selfRef">2.1.20. </a><a href="#name-security-for-session-contro" class="section-name selfRef">Security for session control and media</a>
          </h4>
<p id="section-2.1.20-1">

  Security SHOULD be applied on both session control and media. In applications where legacy endpoints without security may exist, a negotiation between security and no security SHOULD be applied. If no other security solution is mandated by the application, then RFC 8643 OSRTP<span>[<a href="#RFC8643" class="xref">RFC8643</a>]</span> SHOULD be applied to negotiate SRTP media security with DTLS. Most SDP examples below are for simplicity expressed without the security additions. The principles (but not all details) for applying DTLS-SRTP security is shown in a couple of the following examples.<a href="#section-2.1.20-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="SDP-examples2">
<section id="section-2.1.21">
          <h4 id="name-sdp-offer-answer-examples">
<a href="#section-2.1.21" class="section-number selfRef">2.1.21. </a><a href="#name-sdp-offer-answer-examples" class="section-name selfRef">SDP offer/answer examples</a>
          </h4>
<p id="section-2.1.21-1">
      This sections shows some examples of SDP for session negotiation of the real-time text media in SIP sessions. Audio is usually provided in the same session, and sometimes also video. The examples only show the part of importance for the real-time text media.<a href="#section-2.1.21-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.1.21-2">
<pre>

  Offer example for "text/red" format and multi-party support:

        m=text 11000 RTP/AVP 100 98
        a=rtpmap:98 t140/1000
        a=rtpmap:100 red/1000
        a=fmtp:100 98/98/98
        a=rtt-mix-rtp-mixer
</pre><a href="#section-2.1.21-2" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-2.1.21-3">
<pre>
   Answer example  from a multi-party capable device
        m=text 11000 RTP/AVP 100 98
        a=rtpmap:98 t140/1000
        a=rtpmap:100 red/1000
        a=fmtp:100 98/98/98
        a=rtt-mix-rtp-mixer
</pre><a href="#section-2.1.21-3" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-2.1.21-4">
<pre>

   Offer example for "text/red" format including multi-party
   and security:
         a=fingerprint: SHA-1 \
         4A:AD:B9:B1:3F:82:18:3B:54:02:12:DF:3E:5D:49:6B:19:E5:7C:AB
         m=text 11000 RTP/AVP 100 98
         a=rtpmap:98 t140/1000
         a=rtpmap:100 red/1000
         a=fmtp:100 98/98/98
         a=rtt-mix-rtp-mixer
</pre><a href="#section-2.1.21-4" class="pilcrow">¶</a>
</div>
<p id="section-2.1.21-5">The "Fingerprint" is sufficient to offer DTLS-SRTP, with the media line still indicating RTP/AVP.<a href="#section-2.1.21-5" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.1.21-6">
<pre>
    Answer example from multi-party capable device with security
         a=fingerprint: SHA-1 \
         FF:FF:FF:B1:3F:82:18:3B:54:02:12:DF:3E:5D:49:6B:19:E5:7C:AB
         m=text 11000 RTP/AVP 100 98
         a=rtpmap:98 t140/1000
         a=rtpmap:100 red/1000
         a=fmtp:100 98/98/98
         a=rtt-mix-rtp-mixer
</pre><a href="#section-2.1.21-6" class="pilcrow">¶</a>
</div>
<p id="section-2.1.21-7">
    With the "fingerprint" the device acknowledges use of SRTP/DTLS.<a href="#section-2.1.21-7" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.1.21-8">
<pre>

  Answer example from a multi-party unaware device that also
  does not support security:

        m=text 12000 RTP/AVP 100 98
        a=rtpmap:98 t140/1000
        a=rtpmap:100 red/1000
        a=fmtp:100 98/98/98
</pre><a href="#section-2.1.21-8" class="pilcrow">¶</a>
</div>
</section>
</div>
<section id="section-2.1.22">
          <h4 id="name-packet-sequence-example">
<a href="#section-2.1.22" class="section-number selfRef">2.1.22. </a><a href="#name-packet-sequence-example" class="section-name selfRef">Packet sequence example</a>
          </h4>
<p id="section-2.1.22-1">

  This example shows a symbolic flow of packets from a mixer with loss and recovery. A and B are sources of RTT.
  P indicates primary data. R1 is first redundant generation data and R2 is second redundant generation data. A1, B1, A2 etc are text chunks (T140blocks) received from the respective sources. X indicates dropped packet between the mixer and a receiver.<a href="#section-2.1.22-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.1.22-2">
<pre>
  |----------------|
  |Seq no 1        |
  |CC=1            |
  |CSRC list A     |
  |R2: A1          |
  |R1: A2          |
  |P:  A3          |
  |----------------|
</pre><a href="#section-2.1.22-2" class="pilcrow">¶</a>
</div>
<p id="section-2.1.22-3">
  Assuming that earlier packets ( with text A1 and A2) were received in sequence, text A3 is received from packet 1 and assigned to reception area A. The mixer is now assumed to have received text from source B and need to prepare for sending that text. First it must send the redundant generations of text A1.<a href="#section-2.1.22-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.1.22-4">
<pre>
  |----------------|
  |Seq no 2        |
  |CC=1            |
  |CSRC list A     |
  |R2  A2          |
  |R1: A3          |
  |P: Empty        |
  |----------------|
  Nothing needs to be retrieved from this packet.
</pre><a href="#section-2.1.22-4" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-2.1.22-5">
<pre>
  X----------------|
  X Seq no 3       |
  X CC=1           |
  X CSRC list A    |
  X R2: A3         |
  X R1: Empty      |
  X P:  Empty      |
  X----------------|
  Packet 3 is assumed to be dropped in network problems
</pre><a href="#section-2.1.22-5" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-2.1.22-6">
<pre>
  X----------------|
  X Seq no 4       |
  X CC=1           |
  X CSRC list B    |
  X R2: Empty      |
  X R1: Empty      |
  X P2: B1         |
  X----------------|
  Packet 4 contains text from B, assumed dropped in network problems.
  The mixer is assumed to have received text from A on turn to send.
  Sending of text from B must therefore be temporarily ended by
  sending redundancy twice.
</pre><a href="#section-2.1.22-6" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-2.1.22-7">
<pre>
  X----------------|
  X Seq no 5       |
  X CC=1           |
  X CSRC list B    |
  X R2: Empty      |
  X R1: B1         |
  X P:  Empty      |
  X----------------|
  Packet 5 is assumed to be dropped in network problems
</pre><a href="#section-2.1.22-7" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-2.1.22-8">
<pre>
  |----------------|
  |Seq no 6        |
  |CC=1            |
  |CSRC list B     |
  | R2: B1         |
  | R1: Empty      |
  | P:  Empty      |
  |----------------|
</pre><a href="#section-2.1.22-8" class="pilcrow">¶</a>
</div>
<p id="section-2.1.22-9">
  Packet 6 is received. The latest received sequence number was 2.
  Recovery is therefore tried for 3,4,5. There is no coverage
  for seq no 3. But knowing that A1 must have been sent as R2 in packet 3, it can be concluded that nothing was lost.<a href="#section-2.1.22-9" class="pilcrow">¶</a></p>
<p id="section-2.1.22-10">
  For seqno 4, text B1 is recovered from the second generation redundancy and appended to
  the reception area of B.
  For seqno 5, nothing needs to be recovered.
  No primary text is available in packet 6.<a href="#section-2.1.22-10" class="pilcrow">¶</a></p>
<p id="section-2.1.22-11">
    After this sequence, A3 and B1 have been received. In this case no text was lost. Even if also packet 2 was lost, it can be concluded that no text was lost.<a href="#section-2.1.22-11" class="pilcrow">¶</a></p>
<p id="section-2.1.22-12">
  If also packets 1 and 2 were lost, there would be a need to create a marker for possibly lost text  (U'FFFD) <span>[<a href="#T140ad1" class="xref">T140ad1</a>]</span>, inserted generally and possibly also in text sequences A and B.<a href="#section-2.1.22-12" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2.2">
        <h3 id="name-use-of-an-extended-packet-f">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-use-of-an-extended-packet-f" class="section-name selfRef">Use of an extended packet format "text/rex" with text from multiple sources</a>
        </h3>
<p id="section-2.2-1">
        The method specified in this section called "text/rex" has higher performance than the previous method. Text from up to 15 sources can be included in each packet. This may be of value in large non-managed conferences.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<section id="section-2.2.1">
          <h4 id="name-use-of-fields-in-the-rtp-pac">
<a href="#section-2.2.1" class="section-number selfRef">2.2.1. </a><a href="#name-use-of-fields-in-the-rtp-pac" class="section-name selfRef">Use of fields in the RTP packets</a>
          </h4>
<p id="section-2.2.1-1">
RFC 4103<span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> specifies use of RFC 3550 RTP<span>[<a href="#RFC3550" class="xref">RFC3550</a>]</span>, and a redundancy format "text/red" for increased robustness of real-time text transmission.
This document updates RFC 4102<span>[<a href="#RFC4102" class="xref">RFC4102</a>]</span> and RFC 4103<span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> by introducing a format "text/rex" with a rule for populating and using the CSRC-list in the RTP packet and extending the redundancy header to be called a data header. This is done in order to enhance the performance in multi-party RTT sessions.<a href="#section-2.2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.2.1-2">
  The "text/rex" format can be seen as an "n-tuple" variant of the "text/red" format intended to carry text information from up to 15 sources per packet.<a href="#section-2.2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.2.1-3">
The CC field SHALL show the number of members in the CSRC list, which is one per source represented in the packet.<a href="#section-2.2.1-3" class="pilcrow">¶</a></p>
<p id="section-2.2.1-4">
When transmitted from a mixer, a CSRC list is included in the packet. The members in the CSRC-list SHALL contain the SSRCs of the sources of the T140blocks in the packet. The order of the CSRC members MUST be the same as the order of the sources of the data header fields and the T140blocks. When redundancy is used, text from all included sources MUST have the same number of redundant generations. The primary, first redundant, second redundant and possible further redundant generations of T140blocks MUST be grouped per source in the packet in "source groups". The recommended level of redundancy is to use one primary and two redundant generations of T140blocks. In some cases, a primary or redundant T140block is empty, but is still represented by a member in the data header.<a href="#section-2.2.1-4" class="pilcrow">¶</a></p>
<p id="section-2.2.1-5">
  The RTP header is followed by one or more source groups of data  headers: one header for each text block to be included. Each of these data headers provides the timestamp offset and length of the corresponding data block, in addition to the payload type number corresponding to the payload format "text/t140". The data headers are followed by the data fields carrying T140blocks from the sources.<a href="#section-2.2.1-5" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.2.1-6">
<pre>
  0                   1                    2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3  4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|F|   block PT  |  timestamp offset         |   block length    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-2.2.1-6" class="pilcrow">¶</a>
</div>
<p id="section-2.2.1-7">
Figure 1: The bits in the data header.<a href="#section-2.2.1-7" class="pilcrow">¶</a></p>
<p id="section-2.2.1-8">
  The bits in the data header are specified as follows:<a href="#section-2.2.1-8" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.2.1-9">
            <dt id="section-2.2.1-9.1">F:</dt>
            <dd id="section-2.2.1-9.2">
1 bit First bit in header indicates whether another header block
   follows.  It has value 1 if further header blocks follow, and value 0 if this is the last header block.<a href="#section-2.2.1-9.2" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.1-9.3">block PT:</dt>
            <dd id="section-2.2.1-9.4"> 7 bits RTP payload type number for this block, corresponding to the t140 payload type from the RTPMAP SDP attribute.<a href="#section-2.2.1-9.4" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.1-9.5">timestamp offset:</dt>
            <dd id="section-2.2.1-9.6">  14 bits Unsigned offset of timestamp of this block
   relative to the timestamp given in the RTP header. The offset is a time to be subtracted from the current
   timestamp to determine the timestamp of the data when the latest part of this block was sent from the original source. If the timestamp offset would be &gt;15 000, it SHALL be set to 15 000. For redundant data, the resulting time is the time when the data was sent as primary from the original source. If the value would be &gt;15 000, then it SHALL be set to 15 000 plus 300 times the redundancy level of the data. The high values appear only in exceptional cases, e.g. when some data has been held in order to keep the text flow under the Characters Per Second (CPS) limit.<a href="#section-2.2.1-9.6" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.1-9.7">block length:</dt>
            <dd id="section-2.2.1-9.8">  10 bits Length in bytes of the corresponding data
   block excluding the header.<a href="#section-2.2.1-9.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-2.2.1-10">
   The header for the final block has a zero F bit, and apart from that the same fields as other data headers.<a href="#section-2.2.1-10" class="pilcrow">¶</a></p>
<p id="section-2.2.1-11">
Note: The "text/rex" packet format is similar to that of RFC 2198 <span>[<a href="#RFC2198" class="xref">RFC2198</a>]</span> but is different from some aspects. RFC 2198 associates the whole of the CSRC-list with the primary data and assumes that the same list applies to reconstructed redundant data. In this section a T140block is associated with exactly one CSRC list member as described above. Also RFC 2198 <span>[<a href="#RFC2198" class="xref">RFC2198</a>]</span> anticipates infrequent change to CSRCs; implementers should be aware that the order of the CSRC-list according to this section will vary during transitions between transmission from the mixer of text originated by different participants. Another difference is that the last member in the data header area in RFC 2198 <span>[<a href="#RFC2198" class="xref">RFC2198</a>]</span> only contains the payload type number while in this section it has the same format as all other entries in the data header.<a href="#section-2.2.1-11" class="pilcrow">¶</a></p>
<p id="section-2.2.1-12">
The picture below shows a typical "text/rex" RTP packet with multi-party RTT contents from three sources and coding according to this section.<a href="#section-2.2.1-12" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.2.1-13">
<pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |V=2|P|X| CC=3  |M|  "REX" PT   |   RTP sequence number         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |               timestamp of packet creation                    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           synchronization source (SSRC) identifier            |
   +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
   |  CSRC list member 1 = SSRC of source of "A"                   |
   |  CSRC list member 2 = SSRC of source of "B"                   |
   |  CSRC list member 3 = SSRC of source of "C"                   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |1|   T140 PT   |timestmp offset of "A-R2"  |"A-R2" block length|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |1|   T140 PT   |timestamp offset of "A-R1" |"A-R1" block length|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |1|   T140 PT   | timestamp offset of "A-P" |"A-P" block length |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |1|   T140 PT   |timestamp offset of "B-R2" |"B-R2" block length|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |1|   T140 PT   |timestamp offset of "B-R1" |"B-R1" block length|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |1|   T140 PT   | timestamp offset of "B-P" | "B-P" block length|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |1|   T140 PT   |timestamp offset of "C-R2" |"C-R2" block length|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |1|   T140 PT   |timestamp offset of "C-R1" |"C-R1" block length|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |0|   T140 PT   |timestamp offset of "C-P"  |"C-P" block length |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | "A-R2" T.140 encoded redundant data                           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |               |"A-R1" T.140 encoded redundant data            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |"A-P" T.140 encoded primary    |                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     "B-R2" T.140 encoded redundant data       |               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      "B-R1" T.140 encoded redundant data                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | "B-P" T.140 encoded primary data              |               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     "C-R2" T.140 encoded redundant data       |               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      "C-R1" T.140 encoded redundant data                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      "C-P" T.140 encoded primary data         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   Figure 2:A "text/rex" packet with text from three sources A, B, C.
</pre><a href="#section-2.2.1-13" class="pilcrow">¶</a>
</div>
<p id="section-2.2.1-14">
     A-P, B-P, C-P are primary data from A, B and C.<a href="#section-2.2.1-14" class="pilcrow">¶</a></p>
<p id="section-2.2.1-15">
     A-R1, B-R1, C-R1 are first redundant generation data from A, B and C.<a href="#section-2.2.1-15" class="pilcrow">¶</a></p>
<p id="section-2.2.1-16">
     A-R2, B-R2, C-R2 are first redundant generation data from A, B and C.<a href="#section-2.2.1-16" class="pilcrow">¶</a></p>
<p id="section-2.2.1-17">
     In a real case, some of the data headers will likely indicate a zero block length, and no corresponding T.140 data.<a href="#section-2.2.1-17" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2">
          <h4 id="name-actions-at-transmission-by-">
<a href="#section-2.2.2" class="section-number selfRef">2.2.2. </a><a href="#name-actions-at-transmission-by-" class="section-name selfRef">Actions at transmission by a mixer</a>
          </h4>
<section id="section-2.2.2.1">
            <h5 id="name-initial-bom-transmission">
<a href="#section-2.2.2.1" class="section-number selfRef">2.2.2.1. </a><a href="#name-initial-bom-transmission" class="section-name selfRef">Initial BOM transmission</a>
            </h5>
<p id="section-2.2.2.1-1">
As soon as a participant is known to participate in a session and being available for text reception, a Unicode "BOM" character SHALL be sent to it according to the procedures in this section. If the transmitter is a mixer, then the source of this character SHALL be indicated to be the mixer itself.<a href="#section-2.2.2.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2.2">
            <h5 id="name-keep-alive-2">
<a href="#section-2.2.2.2" class="section-number selfRef">2.2.2.2. </a><a href="#name-keep-alive-2" class="section-name selfRef">Keep-alive</a>
            </h5>
<p id="section-2.2.2.2-1">
After that, the transmitter SHALL send keep-alive traffic to the receivers at regular intervals when no other traffic has occurred during that interval if that is decided for the actual connection. Recommendations for keep-alive can be found in RFC 6263<span>[<a href="#RFC6263" class="xref">RFC6263</a>]</span>.<a href="#section-2.2.2.2-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2.3">
            <h5 id="name-transmission-interval-2">
<a href="#section-2.2.2.3" class="section-number selfRef">2.2.2.3. </a><a href="#name-transmission-interval-2" class="section-name selfRef">Transmission interval</a>
            </h5>
<p id="section-2.2.2.3-1">
A "text/rex" transmitter SHOULD send packets distributed in time as long as there is something (new or  redundant T140blocks) to transmit.  The maximum transmission interval SHOULD then be 300 ms. It is RECOMMENDED to send a packet to a receiver as soon as new text  to that receiver is available, as long as the time after the latest sent packet to the same receiver is more than 150 ms, and also the maximum character rate to the receiver is not exceeded. The intention is to keep the latency low while keeping a good protection against text loss in bursty packet loss conditions.<a href="#section-2.2.2.3-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2.4">
            <h5 id="name-do-not-send-received-text-to">
<a href="#section-2.2.2.4" class="section-number selfRef">2.2.2.4. </a><a href="#name-do-not-send-received-text-to" class="section-name selfRef">Do not send received text to the originating source</a>
            </h5>
<p id="section-2.2.2.4-1">
        Text received from a participant SHOULD NOT be included in transmission to that participant.<a href="#section-2.2.2.4-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2.5">
            <h5 id="name-clean-incoming-text-2">
<a href="#section-2.2.2.5" class="section-number selfRef">2.2.2.5. </a><a href="#name-clean-incoming-text-2" class="section-name selfRef">Clean incoming text</a>
            </h5>
<p id="section-2.2.2.5-1">
        A mixer SHALL handle reception and recovery of packet loss, marking of possible text loss and deletion of 'BOM' characters from each participant before queueing received text for transmission to receiving participants.<a href="#section-2.2.2.5-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2.6">
            <h5 id="name-redundancy-2">
<a href="#section-2.2.2.6" class="section-number selfRef">2.2.2.6. </a><a href="#name-redundancy-2" class="section-name selfRef">Redundancy</a>
            </h5>
<p id="section-2.2.2.6-1">
The transmitting party using redundancy SHALL send redundant repetitions of T140blocks aleady transmitted in earlier packets. The number of redundant generations of T140blocks to include in transmitted packets SHALL be deducted from the SDP negotiation. It SHOULD be set to the minimum of the number declared by the two parties negotiating a connection. The same number of redundant generations MUST be used for text from all sources when it is transmitted to a receiver. The number of generations sent to a receiver SHALL be the same during the whole session unless it is modified by session renegotiation.<a href="#section-2.2.2.6-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2.7">
            <h5 id="name-text-placement-in-packets-2">
<a href="#section-2.2.2.7" class="section-number selfRef">2.2.2.7. </a><a href="#name-text-placement-in-packets-2" class="section-name selfRef">Text placement in packets</a>
            </h5>
<p id="section-2.2.2.7-1">
       At time of transmission, the mixer SHALL populate the RTP packet with T140blocks combined from all T140blocks queued for transmission originating from each source as long as this is not in conflict with the allowed number of characters per second or the maximum packet size. These T140blocks SHALL be placed in the packet interleaved with redundant T140blocks and new T140blocks from other sources. The SSRC of each source shall be placed as a member in the CSRC-list at a place corresponding to the place of its T140blocks in the packet.<a href="#section-2.2.2.7-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2.8">
            <h5 id="name-maximum-number-of-sources-pe">
<a href="#section-2.2.2.8" class="section-number selfRef">2.2.2.8. </a><a href="#name-maximum-number-of-sources-pe" class="section-name selfRef">Maximum number of sources per packet</a>
            </h5>
<p id="section-2.2.2.8-1">
     Text from a maximum of 15 sources MAY be included in a packet. The reason for this limitation is the maximum number of CSRC list members allowed in a packet. If text from more sources need to be transmitted, the mixer MAY let the sources take turns in having their text transmitted. When stopping transmission of one source to allow another source to have its text sent, all intended redundant generations of the last text from the source to be stopped MUST be transmitted before text from another source can be transmitted. Actively transmitting sources SHOULD be allowed to take turns with short intervals to have their text transmitted.<a href="#section-2.2.2.8-1" class="pilcrow">¶</a></p>
<p id="section-2.2.2.8-2">
Note: The CSRC-list in an RTP packet only includes participants who's text is included in text blocks. It is not the same as the total list of participants in a conference. With audio and video media, the CSRC-list would often contain all participants who are not muted whereas text participants that don't type are completely silent and thus are not represented in RTP packet CSRC-lists once their text have been transmitted as primary and the intended number of redundant generations.<a href="#section-2.2.2.8-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2.9">
            <h5 id="name-empty-t140blocks-3">
<a href="#section-2.2.2.9" class="section-number selfRef">2.2.2.9. </a><a href="#name-empty-t140blocks-3" class="section-name selfRef">Empty T140blocks</a>
            </h5>
<p id="section-2.2.2.9-1">
If no unsent T140blocks were available for a source at the time of populating a packet, but T140blocks are available which have not yet been sent the full intended number of redundant transmissions, then the primary T140block for that source is composed of an empty T140block, and populated (without taking up any length) in a packet for transmission. The corresponding SSRC SHALL be placed in its place in the CSRC-list.<a href="#section-2.2.2.9-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2.10">
            <h5 id="name-creation-of-the-redundancy-2">
<a href="#section-2.2.2.10" class="section-number selfRef">2.2.2.10. </a><a href="#name-creation-of-the-redundancy-2" class="section-name selfRef">Creation of the redundancy</a>
            </h5>
<p id="section-2.2.2.10-1">
The primary T140block from each source in the latest transmitted packet is used to populate the first redundant T140block for that source. The first redundant T140block for that source from the latest transmission is placed as the second redundant T140block.<a href="#section-2.2.2.10-1" class="pilcrow">¶</a></p>
<p id="section-2.2.2.10-2">
Usually this is the level of redundancy used. If a higher number of redundancy is negotiated, then the procedure SHALL be maintained until all available redundant levels of T140blocks and their sources are placed in the packet. If a receiver has negotiated a lower number of "text/rex" generations, then that level shall be the maximum used by the transmitter.<a href="#section-2.2.2.10-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2.11">
            <h5 id="name-timer-offset-fields-2">
<a href="#section-2.2.2.11" class="section-number selfRef">2.2.2.11. </a><a href="#name-timer-offset-fields-2" class="section-name selfRef">Timer offset fields</a>
            </h5>
<p id="section-2.2.2.11-1">
The timer offset values are inserted in the data header, with the time offset from the RTP timestamp in the packet when the corresponding T140block was sent from its original source as primary.<a href="#section-2.2.2.11-1" class="pilcrow">¶</a></p>
<p id="section-2.2.2.11-2">
  The timer offsets are expressed in the same clock tick units as the RTP timestamp.<a href="#section-2.2.2.11-2" class="pilcrow">¶</a></p>
<p id="section-2.2.2.11-3">
  The timestamp offset values for empty T140blocks have no relevance but SHOULD be assigned realistic values.<a href="#section-2.2.2.11-3" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2.12">
            <h5 id="name-other-rtp-header-fields-2">
<a href="#section-2.2.2.12" class="section-number selfRef">2.2.2.12. </a><a href="#name-other-rtp-header-fields-2" class="section-name selfRef">Other RTP header fields</a>
            </h5>
<p id="section-2.2.2.12-1">
The number of members in the CSRC list shall be placed in the "CC" header field. Only mixers place values &gt;0 in the "CC" field.<a href="#section-2.2.2.12-1" class="pilcrow">¶</a></p>
<p id="section-2.2.2.12-2">
          The current time SHALL be inserted in the timestamp.<a href="#section-2.2.2.12-2" class="pilcrow">¶</a></p>
<p id="section-2.2.2.12-3">
  The SSRC of the mixer for the RTT session SHALL be inserted in the SSRC field of the RTP header.<a href="#section-2.2.2.12-3" class="pilcrow">¶</a></p>
<p id="section-2.2.2.12-4">
  The M-bit SHALL be set to 1 first in the session and after a pause.<a href="#section-2.2.2.12-4" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2.13">
            <h5 id="name-pause-in-transmission-2">
<a href="#section-2.2.2.13" class="section-number selfRef">2.2.2.13. </a><a href="#name-pause-in-transmission-2" class="section-name selfRef">Pause in transmission</a>
            </h5>
<p id="section-2.2.2.13-1">
When there is no new T140block to transmit, and no redundant T140block that has not been retransmitted the intended number of times, the transmission process can stop until either new T140blocks arrive, or a keep-alive method calls for transmission of keep-alive packets.<a href="#section-2.2.2.13-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2.2.3">
          <h4 id="name-actions-at-reception">
<a href="#section-2.2.3" class="section-number selfRef">2.2.3. </a><a href="#name-actions-at-reception" class="section-name selfRef">Actions at reception</a>
          </h4>
<p id="section-2.2.3-1">

The "text/rex" receiver included in an endpoint with presentation functions will receive RTP packets in the single stream from the mixer, and SHALL distribute the T140blocks for presentation in presentation areas for each source. Other receiver roles, such as gateways or chained mixers are also feasible, and requires consideration if the stream shall just be forwarded, or distributed based on the different sources.<a href="#section-2.2.3-1" class="pilcrow">¶</a></p>
<section id="section-2.2.3.1">
            <h5 id="name-multi-party-vs-two-party-use">
<a href="#section-2.2.3.1" class="section-number selfRef">2.2.3.1. </a><a href="#name-multi-party-vs-two-party-use" class="section-name selfRef">Multi-party vs two-party use</a>
            </h5>
<p id="section-2.2.3.1-1">

If the "CC" field value of a received packet is &gt;0, it indicates that multi-party transmission is active, and the receiver MUST be prepared to act on the different sources according to its role. If the CC value is 0, the transmission is point-to-point.<a href="#section-2.2.3.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.3.2">
            <h5 id="name-level-of-redundancy-2">
<a href="#section-2.2.3.2" class="section-number selfRef">2.2.3.2. </a><a href="#name-level-of-redundancy-2" class="section-name selfRef">Level of redundancy</a>
            </h5>
<p id="section-2.2.3.2-1">
The used level of redundancy generations SHALL be evaluated from the received packet contents. If the CC value is 0, the number of generations (including the primary) is equal to the number of members in the data header. If the CC value is &gt;0, the number of generations (including the primary) is equal to the number of members in the data header divided by the CC value. If the remainder from the division is &gt;0, then the packet is malformed and SHALL cause an error indication in the receiver.<a href="#section-2.2.3.2-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.3.3">
            <h5 id="name-extracting-text-and-handling">
<a href="#section-2.2.3.3" class="section-number selfRef">2.2.3.3. </a><a href="#name-extracting-text-and-handling" class="section-name selfRef">Extracting text and handling recovery and loss</a>
            </h5>
<p id="section-2.2.3.3-1">
The RTP sequence numbers of the received packets SHALL be monitored for gaps and packets out of order.<a href="#section-2.2.3.3-1" class="pilcrow">¶</a></p>
<p id="section-2.2.3.3-2">
As long as the sequence is correct, each packet SHALL be unpacked in order. The T140blocks SHALL be extracted from the primary areas, and the corresponding SSRCs SHALL be extracted from the corresponding positions in the CSRC list and used for assigning the new T140block to the correct presentation areas (or correspondingly).<a href="#section-2.2.3.3-2" class="pilcrow">¶</a></p>
<p id="section-2.2.3.3-3">
If a sequence number gap appears and is still there after some defined time for jitter resolution, T140data SHALL be recovered from redundant data. If the gap is wider than the number of generations of redundant T140blocks in the packet, then a t140block SHALL be created with a marker for possible text loss <span>[<a href="#T140ad1" class="xref">T140ad1</a>]</span> and assigned to the SSRC of the transmitter as a general input from the mixer because in general it is not possible to deduct from which sources text was lost. It is however likely that the sources which had loss were active in transmission just before or after the sequence number gap. Therefore, the receiver MAY insert the marker for possible text loss <span>[<a href="#T140ad1" class="xref">T140ad1</a>]</span> in the presentation areas corresponding to the sources which had text in the packets just before and after the gap.<a href="#section-2.2.3.3-3" class="pilcrow">¶</a></p>
<p id="section-2.2.3.3-4">
Then, the T140blocks in the received packet SHALL be retrieved beginning with the highest redundant generation, grouping them with the corresponding SSRC from the CSRC-list and assigning them to the presentation areas per source. Finally the primary T140blocks SHALL be retrieved from the packet and similarly their sources retrieved from the corresponding positions in the CSRC-list, and then assigned to the corresponding presentation areas for the sources.<a href="#section-2.2.3.3-4" class="pilcrow">¶</a></p>
<p id="section-2.2.3.3-5">
If the sequence number gap was equal to or less than the number of redundancy generations in the received packet, a missing text marker SHALL NOT be inserted, and instead the T140blocks and their SSRCs fully recovered from the redundancy information and the CSRC-list in the way indicated above.<a href="#section-2.2.3.3-5" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.3.4">
            <h5 id="name-delete-bom-2">
<a href="#section-2.2.3.4" class="section-number selfRef">2.2.3.4. </a><a href="#name-delete-bom-2" class="section-name selfRef">Delete BOM</a>
            </h5>
<p id="section-2.2.3.4-1">
Unicode character "BOM" is used as a start indication and sometimes used as a filler or keep alive by transmission implementations. These SHALL be deleted on reception.<a href="#section-2.2.3.4-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.3.5">
            <h5 id="name-empty-t140blocks-4">
<a href="#section-2.2.3.5" class="section-number selfRef">2.2.3.5. </a><a href="#name-empty-t140blocks-4" class="section-name selfRef">Empty T140blocks</a>
            </h5>
<p id="section-2.2.3.5-1">
Empty T140blocks are included as fillers for unused redundancy levels in the packets. They just do not provide any contents and do not contribute to the received streams.<a href="#section-2.2.3.5-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2.2.4">
          <h4 id="name-rtcp-considerations-2">
<a href="#section-2.2.4" class="section-number selfRef">2.2.4. </a><a href="#name-rtcp-considerations-2" class="section-name selfRef">RTCP considerations</a>
          </h4>
<p id="section-2.2.4-1">
A mixer SHALL send RTCP reports with SDES, CNAME and NAME information about the sources in the multi-party call. This makes it possible for participants to compose a suitable label for text from each source.<a href="#section-2.2.4-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.5">
          <h4 id="name-chained-operation">
<a href="#section-2.2.5" class="section-number selfRef">2.2.5. </a><a href="#name-chained-operation" class="section-name selfRef">Chained operation</a>
          </h4>
<p id="section-2.2.5-1">
By strictly applying the rules for "text/rex" packet format by all conforming devices, mixers MAY be arranged in chains.<a href="#section-2.2.5-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.6">
          <h4 id="name-usage-without-redundancy">
<a href="#section-2.2.6" class="section-number selfRef">2.2.6. </a><a href="#name-usage-without-redundancy" class="section-name selfRef">Usage without redundancy</a>
          </h4>
<p id="section-2.2.6-1">

The "text/rex" format SHALL be used also for multi-party communication when the redundancy mechanism is not used. That MAY be the case when robustness in transmission is provided by some other means than by redundancy. All aspects of this section SHALL be applied except the redundant generations in transmission.<a href="#section-2.2.6-1" class="pilcrow">¶</a></p>
<p id="section-2.2.6-2">
The "text/rex" format SHOULD thus be used for multi-party operation, also when some other protection against packet loss is utilized, for example a reliable network or transport. The format is also suitable to be used for point-to-point operation.<a href="#section-2.2.6-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.7">
          <h4 id="name-use-with-sip-centralized-co">
<a href="#section-2.2.7" class="section-number selfRef">2.2.7. </a><a href="#name-use-with-sip-centralized-co" class="section-name selfRef">Use with SIP centralized conferencing framework</a>
          </h4>
<p id="section-2.2.7-1">
The SIP conferencing framework, mainly specified in RFC 4353<span>[<a href="#RFC4353" class="xref">RFC4353</a>]</span>, RFC 4579<span>[<a href="#RFC4579" class="xref">RFC4579</a>]</span> and RFC 4575<span>[<a href="#RFC4575" class="xref">RFC4575</a>]</span> is suitable for coordinating sessions including multi-party RTT. The RTT stream between the mixer and a participant is one and the same during the conference. Participants get announced by notifications when participants are joining or leaving, and further user information may be provided. The SSRC of the text to expect from joined users MAY be included in a notification. The notifications MAY be used both for security purposes and for translation to a label for presentation to other users.<a href="#section-2.2.7-1" class="pilcrow">¶</a></p>
</section>
<div id="confcontrol">
<section id="section-2.2.8">
          <h4 id="name-conference-control">
<a href="#section-2.2.8" class="section-number selfRef">2.2.8. </a><a href="#name-conference-control" class="section-name selfRef">Conference control</a>
          </h4>
<p id="section-2.2.8-1">
        In managed conferences, control of the real-time text media SHOULD be provided in the same way as other for media, e.g. for muting and unmuting by the direction attributes in SDP <span>[<a href="#RFC4566" class="xref">RFC4566</a>]</span>.<a href="#section-2.2.8-1" class="pilcrow">¶</a></p>
<p id="section-2.2.8-2">
        Note that floor control functions may be of value for RTT users as well as for users of other media in a conference.<a href="#section-2.2.8-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mediaTypeRegistration">
<section id="section-2.2.9">
          <h4 id="name-media-subtype-registration">
<a href="#section-2.2.9" class="section-number selfRef">2.2.9. </a><a href="#name-media-subtype-registration" class="section-name selfRef">Media Subtype Registration</a>
          </h4>
<p id="section-2.2.9-1">This registration is done using the template defined in <span>[<a href="#RFC6838" class="xref">RFC6838</a>]</span> and following
 <span>[<a href="#RFC4855" class="xref">RFC4855</a>]</span>.<a href="#section-2.2.9-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-2.2.9-2">
            <dt id="section-2.2.9-2.1">Type name:</dt>
            <dd id="section-2.2.9-2.2">text<a href="#section-2.2.9-2.2" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.9-2.3">Subtype name:</dt>
            <dd id="section-2.2.9-2.4">rex<a href="#section-2.2.9-2.4" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.9-2.5">Required parameters:</dt>
            <dd id="section-2.2.9-2.6">
              <span class="break"></span><dl class="dlNewline" id="section-2.2.9-2.6.1">
                <dt id="section-2.2.9-2.6.1.1">rate:</dt>
                <dd id="section-2.2.9-2.6.1.2">The RTP timestamp (clock) rate. The only valid value is 1000.<a href="#section-2.2.9-2.6.1.2" class="pilcrow">¶</a>
</dd>
                <dd class="break"></dd>
<dt id="section-2.2.9-2.6.1.3">pt:</dt>
                <dd id="section-2.2.9-2.6.1.4">
                  <p id="section-2.2.9-2.6.1.4.1">a comma-separated list of RTP payload types.  Because
     comma is a special character, the list must be a quoted-string
     (enclosed in double quotes).  Each list element is a mapping of the dynamic payload
     type number to an embedded Content-type specification for
     the payload format corresponding to the payload type.
     The format of the mapping is:<a href="#section-2.2.9-2.6.1.4.1" class="pilcrow">¶</a></p>
<p id="section-2.2.9-2.6.1.4.2">
        payload-type-number "=" content-type<a href="#section-2.2.9-2.6.1.4.2" class="pilcrow">¶</a></p>
<p id="section-2.2.9-2.6.1.4.3">
     If the content-type string includes a comma, then the
     content-type string MUST be a quoted-string.  If the content-
     type string does not include a comma, it MAY still be quoted.
     Since it is part of the list which must itself be a quoted-
     string, that means the quotation marks MUST be quoted with
     backslash quoting as specified in RFC 2045.  If the content-
     type string itself contains a quoted-string, then the
     requirement for backslash quoting is recursively applied.  To
     specify the text/rex payload format in SDP, the pt parameter
     is mapped to an a=fmtp attribute by eliminating the parameter
     name (pt) and changing the commas to slashes.  For example:<a href="#section-2.2.9-2.6.1.4.3" class="pilcrow">¶</a></p>
<p id="section-2.2.9-2.6.1.4.4">

        pt = " = \"text/t140;cps=200,text/t140,text/t140\" "<a href="#section-2.2.9-2.6.1.4.4" class="pilcrow">¶</a></p>
<p id="section-2.2.9-2.6.1.4.5">
        Implies the following sdp<a href="#section-2.2.9-2.6.1.4.5" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.2.9-2.6.1.4.6">
<pre>


        m=text 49170 RTP/AVP 98 100
        a=rtpmap:98 rex/1000
        a=fmtp:98 100/100/100
        a=rtpmap:100 t140/1000
        a=fmtp:100 cps=200
</pre><a href="#section-2.2.9-2.6.1.4.6" class="pilcrow">¶</a>
</div>
</dd>
              <dd class="break"></dd>
</dl>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.9-2.7">Encoding considerations:</dt>
            <dd id="section-2.2.9-2.8">binary; see Section 4.8 of <span>[<a href="#RFC6838" class="xref">RFC6838</a>]</span>.<a href="#section-2.2.9-2.8" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.9-2.9">Security considerations:</dt>
            <dd id="section-2.2.9-2.10">See <a href="#Security" class="xref">Section 9</a> of RFC xxxx. [RFC Editor: Upon publication as an RFC, please
            replace "XXXX" with the number assigned to this document and
            remove this note.]<a href="#section-2.2.9-2.10" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.9-2.11">Interoperability considerations:</dt>
            <dd id="section-2.2.9-2.12">None.<a href="#section-2.2.9-2.12" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.9-2.13">Published specification:</dt>
            <dd id="section-2.2.9-2.14">RFC XXXX. [RFC
            Editor: Upon publication as an RFC, please replace "XXXX" with the
            number assigned to this document and remove this note.]<a href="#section-2.2.9-2.14" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.9-2.15">Applications which use this media type:</dt>
            <dd id="section-2.2.9-2.16"> For example: Text conferencing tools, multimedia conferencing tools.Real-time conversational tools.<a href="#section-2.2.9-2.16" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.9-2.17">Fragment identifier considerations:</dt>
            <dd id="section-2.2.9-2.18">N/A.<a href="#section-2.2.9-2.18" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.9-2.19">Additional information:</dt>
            <dd id="section-2.2.9-2.20">None.<a href="#section-2.2.9-2.20" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.9-2.21">Person &amp; email address to contact for further information:</dt>
            <dd id="section-2.2.9-2.22"> Gunnar Hellstrom &lt;gunnar.hellstrom@ghaccess.se&gt;<a href="#section-2.2.9-2.22" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.9-2.23">Intended usage:</dt>
            <dd id="section-2.2.9-2.24">COMMON<a href="#section-2.2.9-2.24" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.9-2.25">Restrictions on usage:</dt>
            <dd id="section-2.2.9-2.26"> This
            media type depends on RTP framing, and hence is only defined for
            transfer via RTP <span>[<a href="#RFC3550" class="xref">RFC3550</a>]</span>.<a href="#section-2.2.9-2.26" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.9-2.27">Author:</dt>
            <dd id="section-2.2.9-2.28">Gunnar Hellstrom &lt;gunnar.hellstrom@ghaccess.se&gt;<a href="#section-2.2.9-2.28" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.9-2.29">Change controller:</dt>
            <dd id="section-2.2.9-2.30"> IETF
            AVTCore Working Group delegated from the IESG.<a href="#section-2.2.9-2.30" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
</div>
<div id="nego">
<section id="section-2.2.10">
          <h4 id="name-sdp-considerations">
<a href="#section-2.2.10" class="section-number selfRef">2.2.10. </a><a href="#name-sdp-considerations" class="section-name selfRef">SDP considerations</a>
          </h4>
<p id="section-2.2.10-1">
There are receiving RTT implementations which implement RFC 4103 <span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> but not the source separation by the CSRC. Sending mixed text according to the usual CSRC convention from RFC 2198 <span>[<a href="#RFC2198" class="xref">RFC2198</a>]</span> to a device implementing only RFC 4103 <span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> and no multi-party mechanism would risk to lead to unreadable presented text. Therefore, in order to negotiate RTT mixing capability according to the "text/rtx" method, all devices supporting "text/rex"" for multi-party aware participants SHALL include an SDP media format "text/rex" in the SDP <span>[<a href="#RFC4566" class="xref">RFC4566</a>]</span>, indicating this format in offers and answers. Multi-party streams using the coding of this section intended for multi-party aware endpoints MUST NOT be sent to devices which have not indicated the "text/rex" format.<a href="#section-2.2.10-1" class="pilcrow">¶</a></p>
<p id="section-2.2.10-2">
Implementations not understanding the "text/rex" format MUST ignore it according to common SDP rules.<a href="#section-2.2.10-2" class="pilcrow">¶</a></p>
<p id="section-2.2.10-3">

The SDP media format defined here, is named "rex", for extended "red".
It is intended to be used in "text" media descriptions with "text/rex" and "text/t140"  formats. Both formats MUST be declared for the "text/rex" format to be used.
It indicates capability to use source indications in the CSRC list and the packet format according to this section. It also indicates ability to receive 150 real-time text characters per second by default.<a href="#section-2.2.10-3" class="pilcrow">¶</a></p>
<div id="sdpmapping">
<section id="section-2.2.10.1">
            <h5 id="name-mapping-of-media-parameters">
<a href="#section-2.2.10.1" class="section-number selfRef">2.2.10.1. </a><a href="#name-mapping-of-media-parameters" class="section-name selfRef">Mapping of media parameters to sdp</a>
            </h5>
<p id="section-2.2.10.1-1">
   The information carried in the media type registration has a
   specific mapping to fields in the Session Description Protocol (SDP)
   , which is commonly used to describe RTP sessions.  When SDP RFC 4566 <span>[<a href="#RFC4566" class="xref">RFC4566</a>]</span>is
   used to specify sessions employing the "text/rex" format, the mapping
   is as follows:<a href="#section-2.2.10.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.10.1-2.1">
   The media type ("text") goes in SDP "m=" as the media name.<a href="#section-2.2.10.1-2.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-2.2.10.1-2.2">

   The media subtype (payload format name) goes in SDP "a=rtpmap" as
     the encoding name.  The RTP clock rate in "a=rtpmap" MUST be 1000
     for "text/rex".<a href="#section-2.2.10.1-2.2" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-2.2.10.1-2.3">

   When the payload type is used with redundancy, the level of redundancy is shown by the number of elements in
     the slash-separated payload type list in the "fmtp" parameter of
     the "text/rex" media format.<a href="#section-2.2.10.1-2.3" class="pilcrow">¶</a>
</li>
            </ul>
</section>
</div>
<div id="security">
<section id="section-2.2.10.2">
            <h5 id="name-security-for-session-control">
<a href="#section-2.2.10.2" class="section-number selfRef">2.2.10.2. </a><a href="#name-security-for-session-control" class="section-name selfRef">Security for session control and media</a>
            </h5>
<p id="section-2.2.10.2-1">

Security SHOULD be applied on both session control and media. In applications where legacy endpoints without security may exist, a negotiation between security and no security SHOULD be applied. If no other security solution is mandated by the application, then RFC 8643 OSRTP<span>[<a href="#RFC8643" class="xref">RFC8643</a>]</span> SHOULD be applied to negotiate SRTP media security with DTLS. Most SDP examples below are for simplicity expressed without the security additions. The principles (but not all details) for applying DTLS-SRTP security is shown in a couple of the following examples.<a href="#section-2.2.10.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="SDP-examples">
<section id="section-2.2.10.3">
            <h5 id="name-sdp-offer-answer-examples-2">
<a href="#section-2.2.10.3" class="section-number selfRef">2.2.10.3. </a><a href="#name-sdp-offer-answer-examples-2" class="section-name selfRef">SDP offer/answer examples</a>
            </h5>
<p id="section-2.2.10.3-1">
    This sections shows some examples of SDP for session negotiation of the real-time text media in SIP sessions. Audio is usually provided in the same session, and sometimes also video. The examples only show the part of importance for the real-time text media.<a href="#section-2.2.10.3-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.2.10.3-2">
<pre>
 Offer example for just "text/rex" multi-party capability :

      m=text 11000 RTP/AVP 101 98
      a=rtpmap:98 t140/1000
      a=rtpmap:101 rex/1000
      a=fmtp:101 98/98/98
</pre><a href="#section-2.2.10.3-2" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-2.2.10.3-3">
<pre>

 Answer example  from a multi-party capable device
      m=text 12000 RTP/AVP 101 98
      a=rtpmap:98 t140/1000
      a=rtpmap:101 rex/1000
      a=fmtp:101 98/98/98
</pre><a href="#section-2.2.10.3-3" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-2.2.10.3-4">
<pre>

Offer example for "text/red" and "text/rex" multi-party support:

      m=text 11000 RTP/AVP 101 100 98
      a=rtpmap:98 t140/1000
      a=rtpmap:100 red/1000
      a=rtpmap:101 rex/1000
      a=fmtp:100 98/98/98
      a=fmtp:101 98/98/98
      a=rtt-mix-rtp-mixer
</pre><a href="#section-2.2.10.3-4" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-2.2.10.3-5">
<pre>
 Answer example from multi-party capable device using "text/rex".
      m=text 11000 RTP/AVP 101 98
      a=rtpmap:98 t140/1000
      a=rtpmap:101 rex/1000
      a=fmtp:101 98/98/98
</pre><a href="#section-2.2.10.3-5" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-2.2.10.3-6">
<pre>

 Offer example for both traditional "text/red" and multi-party format
 including security:
       a=fingerprint: SHA-1 \
       4A:AD:B9:B1:3F:82:18:3B:54:02:12:DF:3E:5D:49:6B:19:E5:7C:AB
       m=text 11000 RTP/AVP 101 100 98
       a=rtpmap:98 t140/1000
       a=rtpmap:100 red/1000
       a=rtpmap:101 rex/1000
       a=fmtp:100 98/98/98
       a=fmtp:101 98/98/98
       a=rtt-mix-rtp-mixer
</pre><a href="#section-2.2.10.3-6" class="pilcrow">¶</a>
</div>
<p id="section-2.2.10.3-7">The "Fingerprint" is sufficient to offer DTLS-SRTP, with the media line still indicating RTP/AVP.<a href="#section-2.2.10.3-7" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.2.10.3-8">
<pre>
  Answer example from a multi-party capable device including security
       a=fingerprint: SHA-1 \
       FF:FF:FF:B1:3F:82:18:3B:54:02:12:DF:3E:5D:49:6B:19:E5:7C:AB
       m=text 11000 RTP/AVP 101 98
       a=rtpmap:98 t140/1000
       a=rtpmap:101 rex/1000
       a=fmtp:101 98/98/98
</pre><a href="#section-2.2.10.3-8" class="pilcrow">¶</a>
</div>
<p id="section-2.2.10.3-9">
  With the "fingerprint" the device acknowledges use of SRTP/DTLS.<a href="#section-2.2.10.3-9" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.2.10.3-10">
<pre>

Answer example from a multi-party unaware device that also
does not support security:

      m=text 12000 RTP/AVP 100 98
      a=rtpmap:98 t140/1000
      a=rtpmap:100 red/1000
      a=fmtp:100 98/98/98
</pre><a href="#section-2.2.10.3-10" class="pilcrow">¶</a>
</div>
<p id="section-2.2.10.3-11">
A party which has negotiated the "text/rex" format MUST populate the CSRC-list and format the packets according to this section if it acts as an rtp-mixer and sends multi-party text.<a href="#section-2.2.10.3-11" class="pilcrow">¶</a></p>
<p id="section-2.2.10.3-12">
  A party which has negotiated the "text/rex" capability MUST interpret the contents of the CSRC-list and the packets according to this section in received rtp packets using the corresponding payload type.<a href="#section-2.2.10.3-12" class="pilcrow">¶</a></p>
<p id="section-2.2.10.3-13">
   A party performing as a mixer, which has not negotiated the "text/rex" format, but negotiated a "text/red" or "text/t140" format in a session with a participant SHOULD, if nothing else is specified for the application, format transmitted text to that participant to be suitable to present on a multi-party unaware endpoint as further specified in section <a href="#UnawareFormat" class="xref">Section 3.2</a>.<a href="#section-2.2.10.3-13" class="pilcrow">¶</a></p>
<p id="section-2.2.10.3-14">
  A party not performing as a mixer MUST not include the CSRC list if it has a single source of text.<a href="#section-2.2.10.3-14" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-2.2.10.4">
            <h5 id="name-packet-examples">
<a href="#section-2.2.10.4" class="section-number selfRef">2.2.10.4. </a><a href="#name-packet-examples" class="section-name selfRef">Packet examples</a>
            </h5>
<p id="section-2.2.10.4-1">

This example shows a symbolic flow of packets from a mixer with loss and recovery. A, B and C are sources of RTT. M is the mixer.
Pn indicates primary data in source group "n". Rn1 is first redundant generation data and Rn2 is second redundant generation data in source group "n". A1, B1, A2 etc are text chunks (T140blocks) received from the respective sources. X indicates dropped packet between the mixer and a receiver.<a href="#section-2.2.10.4-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.2.10.4-2">
<pre>
|----------------|
|Seq no 1        |
|CC=1            |
|CSRC list A     |
|R12: Empty      |
|R11: Empty      |
|P1: A1          |
|----------------|
</pre><a href="#section-2.2.10.4-2" class="pilcrow">¶</a>
</div>
<p id="section-2.2.10.4-3">
Assuming that earlier packets were received in sequence, text A1 is received from packet 1 and assigned to reception area A.<a href="#section-2.2.10.4-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.2.10.4-4">
<pre>
|----------------|
|Seq no 2        |
|CC=3            |
|CSRC list C,A   |
|R12 Empty       |
|R11:Empty       |
|P1: C1          |
|R22 Empty       |
|R21: A1         |
|P2: Empty       |
|----------------|
Text C1 is received from packet 2 and assigned to reception area C.
</pre><a href="#section-2.2.10.4-4" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-2.2.10.4-5">
<pre>
X----------------|
X Seq no 3       |
X CC=2           |
X CSRC list C,A  |
X R12: Empty     |
X R11: C1        |
X P1:  Empty     |
X R22: A1        |
X R21: Empty     |
X P2:  A2        |
X----------------|
Packet 3 is assumed to be dropped in network problems
</pre><a href="#section-2.2.10.4-5" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-2.2.10.4-6">
<pre>
X----------------|
X Seq no 4       |
X CC=3           |
X CSRC list C,B,A|
X R12: Empty     |
X R11: Empty     |
X P1: C2         |
X R22: Empty     |
X R21: Empty     |
X P2: B1         |
X R32: Empty     |
X R31: A2        |
X P3:  A3        |
X----------------|
Packet 4 is assumed to be dropped in network problems
</pre><a href="#section-2.2.10.4-6" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-2.2.10.4-7">
<pre>
X----------------|
X Seq no 5       |
X CC=3           |
X CSRC list C,B,A|
X R12: Empty     |
X R11: C2        |
X P1: Empty      |
X R22: Empty     |
X R21: B1        |
X P2: B2         |
X R32: A2        |
X R31: A3        |
X P3:  A4        |
X----------------|
Packet 5 is assumed to be dropped in network problems
</pre><a href="#section-2.2.10.4-7" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-2.2.10.4-8">
<pre>
|----------------|
|Seq no 6        |
|CC=3            |
|CSRC list C,B,A |
| R12: C2        |
| R11: Empty     |
| P1: Empty      |
| R22: B1        |
| R21: B2        |
| P2:  B3        |
| R32: A3        |
| R31: A4        |
| P3:  A5        |
|----------------|
</pre><a href="#section-2.2.10.4-8" class="pilcrow">¶</a>
</div>
<p id="section-2.2.10.4-9">
Packet 6 is received. The latest received sequence number was 2.
Recovery is therefore tried for 3,4,5. But there is no coverage
for seq no 3. A missing text mark (U'FFFD) <span>[<a href="#T140ad1" class="xref">T140ad1</a>]</span>  is created and
appended to the common mixer reception area. A missing text mark (U'FFFD) MAY also be appended in all streams which had text in the packets before and after the gap. That is in this case after A1, and C1, and before B1.<a href="#section-2.2.10.4-9" class="pilcrow">¶</a></p>
<p id="section-2.2.10.4-10">
For seqno 4, texts C2, B1 and A3 are recovered from the second generation redundancy and appended to
their respective reception areas.
For seqno 5, texts B2 and A4 are recovered from the first generation redundancy and appended to their
respective reception areas.
Primary text B3 and A5 are received and appended to their
respective reception areas.<a href="#section-2.2.10.4-10" class="pilcrow">¶</a></p>
<p id="section-2.2.10.4-11">
  After this sequence, the following has been received: A1,A3, A4, A5; B1, B2, B3; C1, C2. A possible loss is indicated by the general missing text mark in time between A1 and A3, and in the streams after A1 and C1 and before B1.<a href="#section-2.2.10.4-11" class="pilcrow">¶</a></p>
<p id="section-2.2.10.4-12">
With only one or two packets lost, there would not be any need to create a missing text marker, and all text would be recovered.<a href="#section-2.2.10.4-12" class="pilcrow">¶</a></p>
<p id="section-2.2.10.4-13">
It will be a design decision how to present the missing text markers assigned to the mixer as a source.<a href="#section-2.2.10.4-13" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.10.5">
            <h5 id="name-performance-considerations-2">
<a href="#section-2.2.10.5" class="section-number selfRef">2.2.10.5. </a><a href="#name-performance-considerations-2" class="section-name selfRef">Performance considerations</a>
            </h5>
<p id="section-2.2.10.5-1">
This method allows new text from up to 15 sources per packet. A mixer implementing the specification will normally cause a latency of 0 to 150 milliseconds in text from up to 15 simultaneous sources. This performance meets well the realistic requirements for conference and conversational applications for which up to 5 simultaneous sources should not be delayed more than 500 milliseconds by a mixer. In order to achieve good performance, a receiver for multi-party calls SHOULD declare a sufficient CPS value for the "text/t140" format in SDP for the number of allowable characters per second.<a href="#section-2.2.10.5-1" class="pilcrow">¶</a></p>
<p id="section-2.2.10.5-2">
        As comparison, if the "text/red" format would be used for multi-party communication with its default timing and redundancy, 5 simultaneously sending parties would cause jerky presentation of the text from them in text spurts with 5 seconds intervals. With a reduction of the transmission interval to 150 ms, the time between text spurts for 5 simultaneous sending parties would be 2.5 seconds.<a href="#section-2.2.10.5-2" class="pilcrow">¶</a></p>
<p id="section-2.2.10.5-3">
        Five simultaneous sending parties may occasionally occur in a conference with one or two main sending parties and three parties giving very brief comments.<a href="#section-2.2.10.5-3" class="pilcrow">¶</a></p>
<p id="section-2.2.10.5-4">
   The default maximum rate of reception of "text/t140" real-time text is in RFC 4103 <span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> specified to be 30 characters per second. The value MAY be modified in the CPS parameter of the FMTP attribute in the media section for the "text/t140" media. A mixer combining real-time text from a number of sources may have a higher combined flow of text coming from the sources. Endpoints SHOULD therefore specify a suitable higher value for the CPS parameter, corresponding to its real reception capability. A value for CPS of 150 is the default for the "text/t140" stream in the "text/rex" format. See RFC 4103 <span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> for the format and use of the CPS parameter. The same rules apply for the "text/rex" format except for the default value.<a href="#section-2.2.10.5-4" class="pilcrow">¶</a></p>
</section>
</section>
</div>
</section>
<section id="section-2.3">
        <h3 id="name-mixing-for-multi-party-unaw">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-mixing-for-multi-party-unaw" class="section-name selfRef">Mixing for multi-party unaware endpoints</a>
        </h3>
<p id="section-2.3-1">
  A method is specified in this section for cases when the participating endpoint does not implement any solution for multi-party presentation of real-time text. The solution requires the mixer to insert text dividers and readable labels and only send text from one source at a time until a suitable point appears for source change. This solution is a fallback method with functional limitations that acts on the presentation level and is further specified in <a href="#UnawareFormat" class="xref">Section 3.2</a>.<a href="#section-2.3-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-3">
      <h2 id="name-presentation-level-consider">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-presentation-level-consider" class="section-name selfRef">Presentation level considerations</a>
      </h2>
<p id="section-3-1">
ITU-T T.140 <span>[<a href="#T140" class="xref">T140</a>]</span> provides the presentation level requirements for the RFC 4103 <span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> transport. T.140 <span>[<a href="#T140" class="xref">T140</a>]</span> has functions for erasure and other formatting functions and has the following general statement for the presentation:<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">
"The display of text from the members of the conversation should be arranged so that the text from
each participant is clearly readable, and its source and the relative timing of entered text is visualized
in the display. Mechanisms for looking back in the contents from the current session should be
provided. The text should be displayed as soon as it is received."<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">
Strict application of T.140 <span>[<a href="#T140" class="xref">T140</a>]</span> is of essence for the interoperability of real-time text implementations and to fulfill the intention that the session participants have the same information of the text contents of the conversation without necessarily having the exact same layout of the conversation.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">
 T.140 <span>[<a href="#T140" class="xref">T140</a>]</span> specifies a set of presentation control codes to include in the stream. Some of them are optional. Implementations MUST be able to ignore optional control codes that they do not support.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">
There is no strict "message" concept in real-time text. Line Separator SHALL be used as a separator allowing a part of received text to be grouped in presentation. The characters "CRLF" may be used by other implementations as replacement for Line Separator. The "CRLF" combination SHALL be erased by just one erasing action, just as the Line Separator. Presentation functions are allowed to group text for presentation in smaller groups than the line separators imply and present such groups with source indication together with text groups from other sources (see the following presentation examples). Erasure has no specific limit by any delimiter in the text stream.<a href="#section-3-5" class="pilcrow">¶</a></p>
<section id="section-3.1">
        <h3 id="name-presentation-by-multi-party">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-presentation-by-multi-party" class="section-name selfRef">Presentation by multi-party aware endpoints</a>
        </h3>
<p id="section-3.1-1">
A multi-party aware receiving party, presenting real-time text MUST separate text from different sources and present them in separate presentation fields.
The receiving party MAY separate presentation of parts of text from a source in readable groups based on other criteria than line separator and merge these groups in the presentation area when it benefits the user to most easily find and read text from the different participants. The criteria MAY e.g. be a received comma, full stop, or other phrase delimiters, or a long pause.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">
When text is received from multiple original sources simultaneously, the presentation SHOULD provide a view where text is added in multiple places simultaneously.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1-3">
If the presentation presents text from different sources in one common area, the presenting endpoint SHOULD insert text from the local user ended at suitable points merged with received text to indicate the relative timing for when the text groups were completed. In this presentation mode, the receiving endpoint SHALL present the source of the different groups of text.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1-4">A view of a three-party RTT call in chat style is shown in this example .<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-3.1-5">
<pre>
              _________________________________________________
             |                                              |^|
             |[Alice] Hi, Alice here.                       |-|
             |                                              | |
             |[Bob] Bob as well.                            | |
             |                                              | |
             |[Eve] Hi, this is Eve, calling from Paris.    | |
             |      I thought you should be here.           | |
             |                                              | |
             |[Alice] I am coming on Thursday, my           | |
             |      performance is not until Friday morning.| |
             |                                              | |
             |[Bob] And I on Wednesday evening.             | |
             |                                              | |
             |[Alice] Can we meet on Thursday evening?      | |
             |                                              | |
             |[Eve] Yes, definitely. How about 7pm.         | |
             |     at the entrance of the restaurant        | |
             |     Le Lion Blanc?                           | |
             |[Eve] we can have dinner and then take a walk |-|
             |______________________________________________|v|
             | &lt;Eve-typing&gt; But I need to be back to        |^|
             |    the hotel by 11 because I need            |-|
             |                                              | |
             | &lt;Bob-typing&gt; I wou                           |-|
             |______________________________________________|v|
             | of course, I underst                           |
             |________________________________________________|
</pre><a href="#section-3.1-5" class="pilcrow">¶</a>
</div>
<p id="section-3.1-6"> Figure 3: Example of a three-party RTT call presented in chat style seen at participant 'Alice's endpoint.<a href="#section-3.1-6" class="pilcrow">¶</a></p>
<p id="section-3.1-7">Other presentation styles than the chat style may be arranged.<a href="#section-3.1-7" class="pilcrow">¶</a></p>
<p id="section-3.1-8">This figure shows how a coordinated column view
        MAY be presented.<a href="#section-3.1-8" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-3.1-9">
<pre>_____________________________________________________________________
|       Bob          |       Eve            |       Alice           |
|____________________|______________________|_______________________|
|                    |                      |I will arrive by TGV.  |
|My flight is to Orly|                      |Convenient to the main |
|                    |Hi all, can we plan   |station.               |
|                    |for the seminar?      |                       |
|Eve, will you do    |                      |                       |
|your presentation on|                      |                       |
|Friday?             |Yes, Friday at 10.    |                       |
|Fine, wo            |                      |We need to meet befo   |
|___________________________________________________________________|
</pre><a href="#section-3.1-9" class="pilcrow">¶</a>
</div>
<p id="section-3.1-10">Figure 4: An example of a coordinated column-view of a three-party
        session with entries ordered vertically in approximate time-order.<a href="#section-3.1-10" class="pilcrow">¶</a></p>
</section>
<div id="UnawareFormat">
<section id="section-3.2">
        <h3 id="name-multi-party-mixing-for-mult">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-multi-party-mixing-for-mult" class="section-name selfRef">Multi-party mixing for multi-party unaware endpoints</a>
        </h3>
<p id="section-3.2-1">
    When the mixer has indicated multi-party capability by the "rtt-mix-rtp-mixer" sdp attribute or the "text/rex" format in an SDP negotiation, but the multi-party capability negotiation fails with an endpoint, then the agreed "text/red" or "text/t140" format SHALL be used and the mixer SHOULD compose a best-effort presentation of multi-party real-time text in one stream intended to be presented by an endpoint with no multi-party awareness.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">
 This presentation format has functional limitations and SHOULD be used only to enable participation in multi-party calls by legacy deployed endpoints implementing only RFC 4103 without any multi-party extensions specified in this document.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">
 The principles and procedures below do not specify any new protocol elements. They are instead composed from the information in ITU-T T.140 <span>[<a href="#T140" class="xref">T140</a>]</span> and an ambition to provide a best effort presentation on an endpoint which has functions only for two-party calls.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">
The mixer mixing for multi-party unaware endpoints SHALL compose a simulated limited multi-party RTT view suitable for presentation in one presentation area. The mixer SHALL group text in suitable groups and prepare for presentation of them by inserting a new line between them if the transmitted text did not already end with a new line. A presentable label SHOULD be composed and sent for the source initially in the session and after each source switch. With this procedure the time for source switching is depending on the actions of the users. In order to expedite source switch, a user can for example end its turn with a new line.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<section id="section-3.2.1">
          <h4 id="name-actions-by-the-mixer-at-rec">
<a href="#section-3.2.1" class="section-number selfRef">3.2.1. </a><a href="#name-actions-by-the-mixer-at-rec" class="section-name selfRef">Actions by the mixer at reception from the call participants</a>
          </h4>
<p id="section-3.2.1-1">
When text is received by the mixer from the different participants, the mixer SHALL recover text from redundancy if any packets are lost. The mark for lost text <span>[<a href="#T140ad1" class="xref">T140ad1</a>]</span> SHOULD be inserted in the stream if unrecoverable loss appears. Any Unicode "BOM" characters, possibly used for keep-alive shall be deleted.
The time of creation of text (retrieved from the RTP timestamp) SHALL be stored together with the received text from each source in queues for transmission to the recipients.<a href="#section-3.2.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2.2">
          <h4 id="name-actions-by-the-mixer-for-tr">
<a href="#section-3.2.2" class="section-number selfRef">3.2.2. </a><a href="#name-actions-by-the-mixer-for-tr" class="section-name selfRef">Actions by the mixer for transmission to the recipients</a>
          </h4>
<p id="section-3.2.2-1">
The following procedure SHOULD be applied for each recipient of multi-part text from the mixer.<a href="#section-3.2.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2.2-2">
The text for transmission SHOULD be formatted by the mixer for each receiving user for presentation in one single presentation area. Text received from a participant SHOULD NOT be included in transmission to that participant. When there is text available for transmission from the mixer to a receiving party from more than one participant, the mixer SHOULD switch between transmission of text from the different sources at suitable points in the transmitted stream.<a href="#section-3.2.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2.2-3">
When switching source, the mixer SHOULD insert a line separator if the already transmitted text did not end with a new line (line separator or CRLF). A label SHOULD be composed from information in the CNAME and NAME fields in RTCP reports from the participant to have its text transmitted, or from other session information for that user. The label SHOULD be delimited by suitable characters (e.g. '[ ]') and transmitted. The CSRC SHOULD indicate the selected source. Then text from that selected participant SHOULD be transmitted until a new suitable point for switching source is reached.<a href="#section-3.2.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2.2-4">
Seeking a suitable point for switching source SHOULD be done when there is older text waiting for transmission from any party than the age of the last transmitted text.
Suitable points for switching are:<a href="#section-3.2.2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.2-5.1">A completed phrase ended by comma<a href="#section-3.2.2-5.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.2-5.2">A completed sentence<a href="#section-3.2.2-5.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.2-5.3">A new line (line separator or CRLF)<a href="#section-3.2.2-5.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.2-5.4">A long pause (e.g. &gt; 10 seconds) in received text from the currently transmitted source<a href="#section-3.2.2-5.4" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.2-5.5">If text from one participant has been transmitted with text from other sources waiting for transmission for a long time (e.g. &gt; 1 minute) and none of the other suitable points for switching has occurred, a source switch MAY be forced by the mixer at next word delimiter, and also if even a word delimiter does not occur within a time (e.g. 15 seconds) after the scan for word delimiter started.<a href="#section-3.2.2-5.5" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-3.2.2-6">
When switching source, the source which has the oldest text in queue SHOULD be selected to be transmitted.
A character display count SHOULD be maintained for the currently transmitted source, starting at zero after the label is transmitted for the currently transmitted source.<a href="#section-3.2.2-6" class="pilcrow">¶</a></p>
<p id="section-3.2.2-7">
The status SHOULD be maintained for the latest control code for Select Graphic Rendition (SGR) from each source.
If there is an SGR code stored as the status for the current source before the source switch is done, a reset of SGR shall be sent by the sequence SGR 0 [009B 0000 006D] after the new line and before the new label during a source switch. See SGR below for an explanation. This transmission does not influence the display count.<a href="#section-3.2.2-7" class="pilcrow">¶</a></p>
<p id="section-3.2.2-8">
If there is an SGR code stored for the new source after the source switch, that SGR code SHOULD be transmitted to the recipient before the label. This transmission does not influence the display count.<a href="#section-3.2.2-8" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2.3">
          <h4 id="name-actions-on-transmission-of-">
<a href="#section-3.2.3" class="section-number selfRef">3.2.3. </a><a href="#name-actions-on-transmission-of-" class="section-name selfRef">Actions on transmission of text</a>
          </h4>
<p id="section-3.2.3-1">
Text from a source sent to the recipient SHOULD increase the display count by one per transmitted character.<a href="#section-3.2.3-1" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2.4">
          <h4 id="name-actions-on-transmission-of-c">
<a href="#section-3.2.4" class="section-number selfRef">3.2.4. </a><a href="#name-actions-on-transmission-of-c" class="section-name selfRef">Actions on transmission of control codes</a>
          </h4>
<p id="section-3.2.4-1">
The following control codes specified by T.140 require specific actions. They SHOULD cause specific considerations in the mixer. Note that the codes presented here are expressed in UCS-16, while transmission is made in UTF-8 transform of these codes.<a href="#section-3.2.4-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3.2.4-2">
            <dt id="section-3.2.4-2.1">BEL 0007 Bell</dt>
            <dd id="section-3.2.4-2.2"> Alert in session, provides for alerting during an active session. The display count SHOULD not be altered.<a href="#section-3.2.4-2.2" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.2.4-2.3">NEW LINE 2028</dt>
            <dd id="section-3.2.4-2.4"> Line separator. Check and perform a source switch if appropriate. Increase display count by 1.<a href="#section-3.2.4-2.4" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.2.4-2.5">CR LF 000D 000A</dt>
            <dd id="section-3.2.4-2.6"> A supported, but not preferred way of requesting a new line. Check and perform a source switch if appropriate. Increase display count by 1.<a href="#section-3.2.4-2.6" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.2.4-2.7">INT ESC 0061</dt>
            <dd id="section-3.2.4-2.8"> Interrupt (used to initiate mode negotiation procedure). The display count SHOULD not be altered.<a href="#section-3.2.4-2.8" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.2.4-2.9">SGR 009B Ps 006D </dt>
            <dd id="section-3.2.4-2.10">Select graphic rendition.  Ps is rendition parameters specified in ISO 6429. The display count SHOULD not be altered. The SGR code SHOULD be stored for the current source.<a href="#section-3.2.4-2.10" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.2.4-2.11">SOS 0098</dt>
            <dd id="section-3.2.4-2.12"> Start of string, used as a general protocol element introducer, followed by a maximum 256 bytes string and the ST. The display count SHOULD not be altered.<a href="#section-3.2.4-2.12" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.2.4-2.13">ST 009C</dt>
            <dd id="section-3.2.4-2.14"> String terminator, end of SOS string. The display count SHOULD not be altered.<a href="#section-3.2.4-2.14" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.2.4-2.15">ESC 001B</dt>
            <dd id="section-3.2.4-2.16"> Escape - used in control strings. The display count SHOULD not be altered for the complete escape code.<a href="#section-3.2.4-2.16" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.2.4-2.17">Byte order mark "BOM" (U+FEFF)</dt>
            <dd id="section-3.2.4-2.18">"Zero width, no break space", used for synchronization and keep-alive. SHOULD be deleted from incoming streams. Shall be sent first after session establishment to the recipient. The display count shall not be altered.<a href="#section-3.2.4-2.18" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.2.4-2.19">Missing text mark (U+FFFD)</dt>
            <dd id="section-3.2.4-2.20"> "Replacement character", represented as a question mark in a rhombus, or if that is not feasible, replaced by an apostrophe ', marks place in stream of possible text loss. SHOULD be inserted by the reception procedure in case of unrecoverable loss of packets. The display count SHOULD be increased by one when sent as for any other character.<a href="#section-3.2.4-2.20" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.2.4-2.21">SGR</dt>
            <dd id="section-3.2.4-2.22"> If a control code for selecting graphic rendition (SGR), other than reset of the graphic rendition (SGR 0) is sent to a recipient, that control code shall also be stored as status for the source in the storage for SGR status. If a reset graphic rendition (SGR 0) originated from a source is sent, then the SGR status storage for that source shall be cleared.  The display count shall not be increased.<a href="#section-3.2.4-2.22" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.2.4-2.23">BS (U+0008)</dt>
            <dd id="section-3.2.4-2.24"> Back Space, intended to erase the last entered character by a source. Erasure by backspace cannot always be performed as the erasing party intended.  If an erasing action erases all text up to the end of the leading label after a source switch, then the mixer must not transmit more backspaces. Instead it is RECOMMENDED that a letter "X" is inserted in the text stream for each backspace as an indication of the intent to erase more. A new line is usually coded by a Line Separator, but the character combination "CRLF" MAY be used instead.  Erasure of a new line is in both cases done by just one erasing action (Backspace). If the display count has a positive value it is decreased by one when the BS is sent. If the display count is at zero, it is not altered.<a href="#section-3.2.4-2.24" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
<section id="section-3.2.5">
          <h4 id="name-packet-transmission">
<a href="#section-3.2.5" class="section-number selfRef">3.2.5. </a><a href="#name-packet-transmission" class="section-name selfRef">Packet transmission</a>
          </h4>
<p id="section-3.2.5-1">
    A mixer transmitting to a multi-party unaware terminal SHOULD send primary data only from one source per packet. The SSRC SHOULD be the SSRC of the mixer. The CSRC list SHOULD contain one member and be the SSRC of the source of the primary data.<a href="#section-3.2.5-1" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2.6">
          <h4 id="name-functional-limitations">
<a href="#section-3.2.6" class="section-number selfRef">3.2.6. </a><a href="#name-functional-limitations" class="section-name selfRef">Functional limitations</a>
          </h4>
<p id="section-3.2.6-1">
    When a multi-party unaware endpoint presents a conversation in one display area in a chat style, it inserts source indications for remote text and local user text as they are merged in completed text groups. When an endpoint using this layout receives and presents text mixed for multi-party unaware endpoints, there will be two levels of source indicators for the received text; one generated by the mixer and inserted in a label after each source switch, and another generated by the receiving endpoint and inserted after each switch between local and remote source in the presentation area. This will waste display space and look inconsistent to the reader.<a href="#section-3.2.6-1" class="pilcrow">¶</a></p>
<p id="section-3.2.6-2">
    New text can be presented only from one source at a time. Switch of source to be presented takes place at suitable places in the text, such as end of phrase, end of sentence, line separator and inactivity. Therefore the time to switch to present waiting text from other sources may become long and will vary and depend on the actions of the currently presented source.<a href="#section-3.2.6-2" class="pilcrow">¶</a></p>
<p id="section-3.2.6-3">
    Erasure can only be done up to the latest source switch. If a user tries to erase more text, the erasing actions will be presented as letter X after the label.<a href="#section-3.2.6-3" class="pilcrow">¶</a></p>
<p id="section-3.2.6-4">
      Text loss because of network errors may hit the label between entries from different parties, causing risk for misunderstanding from which source a piece of text is.<a href="#section-3.2.6-4" class="pilcrow">¶</a></p>
<p id="section-3.2.6-5">
 These facts makes it strongly RECOMMENDED to implement multi-party awareness in RTT endpoints. The use of the mixing method for multi-party-unaware endpoints should be left for use with endpoints which are impossible to upgrade to become multi-party aware.<a href="#section-3.2.6-5" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2.7">
          <h4 id="name-example-views-of-presentati">
<a href="#section-3.2.7" class="section-number selfRef">3.2.7. </a><a href="#name-example-views-of-presentati" class="section-name selfRef">Example views of presentation on multi-party unaware endpoints</a>
          </h4>
<p id="section-3.2.7-1">
The following pictures are examples of the view on a participant's display for the multi-party-unaware case.<a href="#section-3.2.7-1" class="pilcrow">¶</a></p>
<p id="section-3.2.7-2"></p>
<div class="artwork art-text alignLeft" id="section-3.2.7-3">
<pre>


  _________________________________________________
 |       Conference       |          Alice          |
 |________________________|_________________________|
 |                        |I will arrive by TGV.    |
 |[Bob]:My flight is to   |Convenient to the main   |
 |Orly.                   |station.                 |
 |[Eve]:Hi all, can we    |                         |
 |plan for the seminar.   |                         |
 |                        |                         |
 |[Bob]:Eve, will you do  |                         |
 |your presentation on    |                         |
 |Friday?                 |                         |
 |[Eve]:Yes, Friday at 10.|                         |
 |[Bob]: Fine, wo         |We need to meet befo     |
 |________________________|_________________________|
</pre><a href="#section-3.2.7-3" class="pilcrow">¶</a>
</div>
<p id="section-3.2.7-4">Figure 5: Alice who has a conference-unaware client is receiving the multi-party real-time text in a single-stream. This figure shows how a coordinated column view MAY be presented on Alice's device.<a href="#section-3.2.7-4" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-3.2.7-5">
<pre>
  _________________________________________________
 |                                              |^|
 |[Alice] Hi, Alice here.                       |-|
 |                                              | |
 |[mix][Bob] Bob as well.                       | |
 |                                              | |
 |[Eve] Hi, this is Eve, calling from Paris     | |
 |      I thought you should be here.           | |
 |                                              | |
 |[Alice] I am coming on Thursday, my           | |
 |      performance is not until Friday morning.| |
 |                                              | |
 |[mix][Bob] And I on Wednesday evening.        | |
 |                                              | |
 |[Eve] we can have dinner and then walk        | |
 |                                              | |
 |[Eve] But I need to be back to                | |
 |    the hotel by 11 because I need            | |
 |                                              |-|
 |______________________________________________|v|
 | of course, I underst                           |
 |________________________________________________|
</pre><a href="#section-3.2.7-5" class="pilcrow">¶</a>
</div>
<p id="section-3.2.7-6">Figure 6: An example of a view of the multi-party unaware presentation in chat style. Alice is the local user.<a href="#section-3.2.7-6" class="pilcrow">¶</a></p>
</section>
</section>
</div>
</section>
<section id="section-4">
      <h2 id="name-gateway-considerations">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-gateway-considerations" class="section-name selfRef">Gateway Considerations</a>
      </h2>
<section id="section-4.1">
        <h3 id="name-gateway-considerations-with">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-gateway-considerations-with" class="section-name selfRef">Gateway considerations with Textphones (e.g. TTYs).</a>
        </h3>
<p id="section-4.1-1">
   Multi-party RTT sessions may involve gateways of different kinds. Gateways involved in setting up sessions SHALL correctly reflect the multi-party capability or unawareness of the combination of the gateway and the remote endpoint beyond the gateway.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">
   One case that may occur is a gateway to PSTN for communication with textphones (e.g. TTYs). Textphones are limited devices with no multi-party awareness, and it SHOULD therefore be suitable for the gateway to not indicate multi-party awareness for that case. Another solution is that the gateway indicates multi-party capability towards the mixer, and includes the multi-party mixer function for multi-party unaware endpoints itself. This solution makes it possible to make adaptations for the functional limitations of the textphone (TTY).<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1-3">
   More information on gateways to textphones (TTYs) is found in RFC 5194<span>[<a href="#RFC5194" class="xref">RFC5194</a>]</span><a href="#section-4.1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2">
        <h3 id="name-gateway-considerations-with-">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-gateway-considerations-with-" class="section-name selfRef">Gateway considerations with WebRTC.</a>
        </h3>
<p id="section-4.2-1">
   Gateway operation to real-time text in WebRTC may also be required. In WebRTC, RTT is specified in draft-ietf-mmusic-t140-usage-data-channel<span>[<a href="#I-D.ietf-mmusic-t140-usage-data-channel" class="xref">I-D.ietf-mmusic-t140-usage-data-channel</a>]</span>.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">
    A multi-party bridge may have functionality for communicating by RTT both in RTP streams with RTT and WebRTC t140 data channels. Other configurations may consist of a multi-party bridge with either technology for RTT transport and a separate gateway for conversion of the text communication streams between RTP and t140 data channel.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">
In WebRTC, it is assumed that for a multi-party session, one t140 data channel is established for each source from a gateway or bridge to each participant. Each participant also has a data channel with two-way connection with the gateway or bridge.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2-4">
  The t140 channel used both ways is for text from the WebRTC user and from the bridge or gateway itself to the WebRTC user. The label parameter of this t140 channel is used as NAME field in RTCP to participants on the RTP side. The other t140 channels are only for text from other participants to the WebRTC user.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
<p id="section-4.2-5">
  When a new participant has entered the session with RTP transport of rtt, a new t140 channel SHOULD be established to WebRTC users with the label parameter composed from the NAME field in RTCP on the RTP side.<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<p id="section-4.2-6">
  When a new participant has entered the multi-party session with RTT transport in a WebRTC t140 data channel, the new participant SHOULD be announced by a notification to RTP users. The label parameter from the WebRTC side SHOULD be used as the NAME RTCP field on the RTP side, or other available session information.<a href="#section-4.2-6" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-5">
      <h2 id="name-updates-to-rfc-4102-and-rfc">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-updates-to-rfc-4102-and-rfc" class="section-name selfRef">Updates to RFC 4102 and RFC 4103</a>
      </h2>
<p id="section-5-1">
  This document updates RFC 4102<span>[<a href="#RFC4102" class="xref">RFC4102</a>]</span> and RFC 4103<span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> by introducing an sdp media attribute "rtt-mix-rtp-mixer" for negotiation of multi-party mixing capability with the <span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> format and an extended packet format "text/rex" for the enhanced performance multi-party mixing case and more strict rules for the use of redundancy, and population of the CSRC list in the packets. Implications for the CSRC list use from RFC 2198<span>[<a href="#RFC2198" class="xref">RFC2198</a>]</span> is not in effect for the "text/rex" format.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">
    The update is in line with the statement in RFC 4103 section 4, saying
  that  "Forward Error Correction mechanisms, ..., or any
   other mechanism with the purpose of increasing the reliability of
   text transmission, MAY be used as an alternative or complement to
   redundancy."<a href="#section-5-2" class="pilcrow">¶</a></p>
</section>
<section id="section-6">
      <h2 id="name-congestion-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-congestion-considerations" class="section-name selfRef">Congestion considerations</a>
      </h2>
<p id="section-6-1">
The congestion considerations and recommended actions from RFC 4103 <span>[<a href="#RFC4103" class="xref">RFC4103</a>]</span> are valid also in multi-party situations.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">
        The first action in case of congestion SHOULD be to temporarily increase the transmission interval up to two seconds.<a href="#section-6-2" class="pilcrow">¶</a></p>
</section>
<div id="Acknowledgements">
<section id="section-7">
      <h2 id="name-acknowledgements">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-7-1">James Hamlin for format input.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="IANAConsiderations">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="reg-rtt-mix">
<section id="section-8.1">
        <h3 id="name-registration-of-the-rtt-mix">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-registration-of-the-rtt-mix" class="section-name selfRef">Registration of the "rtt-mix-rtp-mixer" sdp media attribute</a>
        </h3>
<p id="section-8.1-1">

[RFC EDITOR NOTE: Please replace all instances of RFCXXXX with the
RFC number of this document.]<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1-2">
IANA is asked to register the new sdp attribute "rtt-mix-rtp-mixer".<a href="#section-8.1-2" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-8.1-3">
          <dt id="section-8.1-3.1">Contact name:
</dt>
          <dd id="section-8.1-3.2">IESG<a href="#section-8.1-3.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-3.3">Contact email:
</dt>
          <dd id="section-8.1-3.4">iesg@ietf.org<a href="#section-8.1-3.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-3.5">Attribute name:
</dt>
          <dd id="section-8.1-3.6">rtt-mix-rtp-mixer<a href="#section-8.1-3.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-3.7">Attribute syntax:
</dt>
          <dd id="section-8.1-3.8">a=rtt-mix-rtp-mixer<a href="#section-8.1-3.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-3.9">Attribute semantics:
</dt>
          <dd id="section-8.1-3.10">See RFCXXXX <a href="#nego1" class="xref">Section 2.1.1</a><a href="#section-8.1-3.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-3.11">Attribute value:
</dt>
          <dd id="section-8.1-3.12">none<a href="#section-8.1-3.12" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-3.13">Usage level:
</dt>
          <dd id="section-8.1-3.14">media<a href="#section-8.1-3.14" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-3.15">Purpose:
</dt>
          <dd id="section-8.1-3.16">Indicate support by mixer or endpoint of multi-party mixing for real-time text transmission, using a common RTP-stream for transmission of text from a number of sources mixed with one source at a time and the source indicated in a single CSRC-list member.<a href="#section-8.1-3.16" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-3.17">Charset Dependent:
</dt>
          <dd id="section-8.1-3.18">no<a href="#section-8.1-3.18" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-3.19">O/A procedure:
</dt>
          <dd id="section-8.1-3.20">See RFCXXXX <a href="#SDP-1" class="xref">Section 2.1.19</a><a href="#section-8.1-3.20" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-3.21">Mux Category:
</dt>
          <dd id="section-8.1-3.22">normal<a href="#section-8.1-3.22" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-3.23">Reference:
</dt>
          <dd id="section-8.1-3.24">RFCXXXX<a href="#section-8.1-3.24" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<section id="section-8.2">
        <h3 id="name-registration-of-text-rex-me">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-registration-of-text-rex-me" class="section-name selfRef">Registration of "text/rex" media subtype</a>
        </h3>
<p id="section-8.2-1">The IANA is requested to register the media type
      "text/rex" as specified in <a href="#mediaTypeRegistration" class="xref">Section 2.2.9</a>.  The media type is also
      requested to be added to the IANA registry for "RTP Payload Format Media Types"
   &lt;http://www.iana.org/assignments/rtp-parameters&gt;.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
</section>
</section>
</div>
<div id="Security">
<section id="section-9">
      <h2 id="name-security-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-9-1">

The RTP-mixer model requires the mixer to be allowed to decrypt, pack and encrypt secured text from the conference participants. Therefore the mixer  needs to be trusted. This is similar to the situation for central mixers of audio and video.<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">
The requirement to transfer information about the user in RTCP reports in SDES, CNAME and NAME fields, and in conference notifications, for creation of labels may have privacy concerns as already stated in RFC 3550 <span>[<a href="#RFC3550" class="xref">RFC3550</a>]</span>, and may be restricted of privacy reasons. The receiving user will then get a more symbolic label for the source.<a href="#section-9-2" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-change-history">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-change-history" class="section-name selfRef">Change history</a>
      </h2>
<section id="section-10.1">
        <h3 id="name-changes-included-in-draft-i">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-changes-included-in-draft-i" class="section-name selfRef">Changes included in draft-ietf-avtcore-multi-party-rtt-mix-07</a>
        </h3>
<p id="section-10.1-1">
            Added a method based on the "text/red" format and single source per packet, negotiated by the "rtt-mix-rtp-mixer" sdp attribute.<a href="#section-10.1-1" class="pilcrow">¶</a></p>
<p id="section-10.1-2">
            Added reasoning and recommendation about indication of loss.<a href="#section-10.1-2" class="pilcrow">¶</a></p>
<p id="section-10.1-3">
            The highest number of sources in one packet is 15, not 16. Changed.<a href="#section-10.1-3" class="pilcrow">¶</a></p>
<p id="section-10.1-4">
          Added in information on update to RFC 4103 that RFC 4103 explicitly allows addition of FEC method. The redundancy is a kind of forward error correction..<a href="#section-10.1-4" class="pilcrow">¶</a></p>
</section>
<section id="section-10.2">
        <h3 id="name-changes-included-in-draft-ie">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-changes-included-in-draft-ie" class="section-name selfRef">Changes included in draft-ietf-avtcore-multi-party-rtt-mix-06</a>
        </h3>
<p id="section-10.2-1">
          Improved definitions list format.<a href="#section-10.2-1" class="pilcrow">¶</a></p>
<p id="section-10.2-2">
            The format of the media subtype parameters is made to match the requirements.<a href="#section-10.2-2" class="pilcrow">¶</a></p>
<p id="section-10.2-3">
            The mapping of media subtype parameters to sdp is included.<a href="#section-10.2-3" class="pilcrow">¶</a></p>
<p id="section-10.2-4">
            The CPS parameter belongs to the t140 subtype and does not need to be registered here.<a href="#section-10.2-4" class="pilcrow">¶</a></p>
</section>
<section id="section-10.3">
        <h3 id="name-changes-included-in-draft-iet">
<a href="#section-10.3" class="section-number selfRef">10.3. </a><a href="#name-changes-included-in-draft-iet" class="section-name selfRef">Changes included in draft-ietf-avtcore-multi-party-rtt-mix-05</a>
        </h3>
<p id="section-10.3-1">
            nomenclature and editorial improvements<a href="#section-10.3-1" class="pilcrow">¶</a></p>
<p id="section-10.3-2">
            "this document" used consistently to refer to this document.<a href="#section-10.3-2" class="pilcrow">¶</a></p>
</section>
<section id="section-10.4">
        <h3 id="name-changes-included-in-draft-ietf">
<a href="#section-10.4" class="section-number selfRef">10.4. </a><a href="#name-changes-included-in-draft-ietf" class="section-name selfRef">Changes included in draft-ietf-avtcore-multi-party-rtt-mix-04</a>
        </h3>
<p id="section-10.4-1">
'Redundancy header' renamed to 'data header'.<a href="#section-10.4-1" class="pilcrow">¶</a></p>
<p id="section-10.4-2">
  More clarifications added.<a href="#section-10.4-2" class="pilcrow">¶</a></p>
<p id="section-10.4-3">
  Language and figure number corrections.<a href="#section-10.4-3" class="pilcrow">¶</a></p>
</section>
<section id="section-10.5">
        <h3 id="name-changes-included-in-draft-ietf-">
<a href="#section-10.5" class="section-number selfRef">10.5. </a><a href="#name-changes-included-in-draft-ietf-" class="section-name selfRef">Changes included in draft-ietf-avtcore-multi-party-rtt-mix-03</a>
        </h3>
<p id="section-10.5-1">
Mention possible need to mute and raise hands as for other media.   ---done ----<a href="#section-10.5-1" class="pilcrow">¶</a></p>
<p id="section-10.5-2">
  Make sure that use in two-party calls is also possible and explained. - may need more wording -<a href="#section-10.5-2" class="pilcrow">¶</a></p>
<p id="section-10.5-3">
  Clarify the RTT is often used together with other media. --done--<a href="#section-10.5-3" class="pilcrow">¶</a></p>
<p id="section-10.5-4">
  Tell that text mixing is N-1. A users own text is not received in the mix. -done-<a href="#section-10.5-4" class="pilcrow">¶</a></p>
<p id="section-10.5-5">
  In 3. correct the interval to:
  A "text/rex" transmitter SHOULD send packets distributed in time as long as there is something (new or  redundant T140blocks) to transmit.  The maximum transmission interval SHOULD then be 300 ms. It is RECOMMENDED to send a packet to a receiver as soon as new text  to that receiver is available, as long as the time after the latest sent packet to the same receiver is more than 150 ms, and also the maximum character rate to the receiver is not exceeded. The intention is to keep the latency low while keeping a good protection against text loss in bursty packet loss conditions.  -done-<a href="#section-10.5-5" class="pilcrow">¶</a></p>
<p id="section-10.5-6">
  In 1.3 say that the format is used both ways. -done-<a href="#section-10.5-6" class="pilcrow">¶</a></p>
<p id="section-10.5-7">
  In 13.1 change presentation area to presentation field so that reader does not think it shall be totally separated. -done-<a href="#section-10.5-7" class="pilcrow">¶</a></p>
<p id="section-10.5-8">
  In Performance and intro, tell the performance in number of simultaneous sending users and introduced delay 16, 150 vs requirements 5 vs 500. -done --<a href="#section-10.5-8" class="pilcrow">¶</a></p>
<p id="section-10.5-9">
  Clarify redundancy level per connection.  -done-<a href="#section-10.5-9" class="pilcrow">¶</a></p>
<p id="section-10.5-10">
  Timestamp also for the last data header. To make it possible for all text to have time offset as for transmission from the source. Make that header equal to the others. -done-<a href="#section-10.5-10" class="pilcrow">¶</a></p>
<p id="section-10.5-11">
  Mixer always use the CSRC list, even for its own BOM. -done-<a href="#section-10.5-11" class="pilcrow">¶</a></p>
<p id="section-10.5-12">
  Combine all talk about transmission interval (300 ms vs when text has arrived) in section 3 in one paragraph or close to each other. -done-<a href="#section-10.5-12" class="pilcrow">¶</a></p>
<p id="section-10.5-13">
  Documents the goal of good performance with low delay for 5 simultaneous typers in the introduction. -done-<a href="#section-10.5-13" class="pilcrow">¶</a></p>
<p id="section-10.5-14">
  Describe better that only primary text shall be sent on to receivers. Redundancy and loss must be resolved by the mixer. -done-<a href="#section-10.5-14" class="pilcrow">¶</a></p>
</section>
<section id="section-10.6">
        <h3 id="name-changes-included-in-draft-ietf-a">
<a href="#section-10.6" class="section-number selfRef">10.6. </a><a href="#name-changes-included-in-draft-ietf-a" class="section-name selfRef">Changes included in draft-ietf-avtcore-multi-party-rtt-mix-02</a>
        </h3>
<p id="section-10.6-1">
SDP and better description and visibility of security by OSRTP RFC 8634 needed.<a href="#section-10.6-1" class="pilcrow">¶</a></p>
<p id="section-10.6-2">
The description of gatewaying to WebRTC extended.<a href="#section-10.6-2" class="pilcrow">¶</a></p>
<p id="section-10.6-3">
The description of the data header in the packet is improved.<a href="#section-10.6-3" class="pilcrow">¶</a></p>
</section>
<section id="section-10.7">
        <h3 id="name-changes-to-draft-ietf-avtco">
<a href="#section-10.7" class="section-number selfRef">10.7. </a><a href="#name-changes-to-draft-ietf-avtco" class="section-name selfRef">Changes to draft-ietf-avtcore-multi-party-rtt-mix-01</a>
        </h3>
<p id="section-10.7-1">
 2,5,6 More efficient format "text/rex" introduced and attribute a=rtt-mix deleted.<a href="#section-10.7-1" class="pilcrow">¶</a></p>
<p id="section-10.7-2">
 3. Brief about use of OSRTP for security included- More needed.<a href="#section-10.7-2" class="pilcrow">¶</a></p>
<p id="section-10.7-3">
     4. Brief motivation for the solution and why not rtp-translator is used added to intro.<a href="#section-10.7-3" class="pilcrow">¶</a></p>
<p id="section-10.7-4">
     7. More limitations for the multi-party unaware mixing method inserted.<a href="#section-10.7-4" class="pilcrow">¶</a></p>
<p id="section-10.7-5">
 8. Updates to RFC 4102 and 4103 more clearly expressed.<a href="#section-10.7-5" class="pilcrow">¶</a></p>
<p id="section-10.7-6">
 9. Gateway to WebRTC started. More needed.<a href="#section-10.7-6" class="pilcrow">¶</a></p>
</section>
<section id="section-10.8">
        <h3 id="name-changes-from-draft-hellstro">
<a href="#section-10.8" class="section-number selfRef">10.8. </a><a href="#name-changes-from-draft-hellstro" class="section-name selfRef">Changes from draft-hellstrom-avtcore-multi-party-rtt-source-03 to draft-ietf-avtcore-multi-party-rtt-mix-00</a>
        </h3>
<p id="section-10.8-1">
 Changed file name to draft-ietf-avtcore-multi-party-rtt-mix-00<a href="#section-10.8-1" class="pilcrow">¶</a></p>
<p id="section-10.8-2">
 Replaced CDATA in IANA registration table with better coding.<a href="#section-10.8-2" class="pilcrow">¶</a></p>
<p id="section-10.8-3">
 Converted to xml2rfc version 3.<a href="#section-10.8-3" class="pilcrow">¶</a></p>
</section>
<section id="section-10.9">
        <h3 id="name-changes-from-draft-hellstrom">
<a href="#section-10.9" class="section-number selfRef">10.9. </a><a href="#name-changes-from-draft-hellstrom" class="section-name selfRef">Changes from draft-hellstrom-avtcore-multi-party-rtt-source-02 to -03</a>
        </h3>
<p id="section-10.9-1">
 Changed company and e-mail of the author.<a href="#section-10.9-1" class="pilcrow">¶</a></p>
<p id="section-10.9-2">
 Changed title to "RTP-mixer formatting of multi-party Real-time text"
 to better match contents.<a href="#section-10.9-2" class="pilcrow">¶</a></p>
<p id="section-10.9-3">
 Check and modification where needed of use of RFC 2119 words SHALL etc.<a href="#section-10.9-3" class="pilcrow">¶</a></p>
<p id="section-10.9-4">
 More about the CC value in sections on transmitters and receivers so that 1-to-1 sessions do not use the mixer format.<a href="#section-10.9-4" class="pilcrow">¶</a></p>
<p id="section-10.9-5">
 Enhanced section on presentation for multi-party-unaware endpoints<a href="#section-10.9-5" class="pilcrow">¶</a></p>
<p id="section-10.9-6">
 A paragraph recommending CPS=150 inserted in the performance section.<a href="#section-10.9-6" class="pilcrow">¶</a></p>
</section>
<section id="section-10.10">
        <h3 id="name-changes-from-draft-hellstrom-">
<a href="#section-10.10" class="section-number selfRef">10.10. </a><a href="#name-changes-from-draft-hellstrom-" class="section-name selfRef">Changes from draft-hellstrom-avtcore-multi-party-rtt-source-01 to -02</a>
        </h3>
<p id="section-10.10-1">
In Abstract and 1. Introduction: Introduced wording about regulatory requirements.<a href="#section-10.10-1" class="pilcrow">¶</a></p>
<p id="section-10.10-2">
In section 5: The transmission interval is decreased to 100 ms when there is text from more than one source to transmit.<a href="#section-10.10-2" class="pilcrow">¶</a></p>
<p id="section-10.10-3">
In section 11 about SDP negotiation, a SHOULD-requirement is introduced that the mixer should make a mix for multi-party unaware endpoints if the negotiation is not successful. And a reference to a later chapter about it.<a href="#section-10.10-3" class="pilcrow">¶</a></p>
<p id="section-10.10-4">
The presentation considerations chapter 14 is extended with more information about presentation on multi-party aware endpoints, and a new section on the multi-party unaware mixing with low functionality but SHOULD a be implemented in mixers. Presentation examples are added.<a href="#section-10.10-4" class="pilcrow">¶</a></p>
<p id="section-10.10-5">
A short chapter 15 on gateway considerations is introduced.<a href="#section-10.10-5" class="pilcrow">¶</a></p>
<p id="section-10.10-6">
Clarification about the text/t140 format included in chapter 10.<a href="#section-10.10-6" class="pilcrow">¶</a></p>
<p id="section-10.10-7">
This sentence added to the chapter 10 about use without redundancy. "The text/red format SHOULD be used unless some other protection against packet loss is utilized, for example a reliable network or transport."<a href="#section-10.10-7" class="pilcrow">¶</a></p>
<p id="section-10.10-8">
Note about deviation from RFC 2198 added in chapter 4.<a href="#section-10.10-8" class="pilcrow">¶</a></p>
<p id="section-10.10-9">
In chapter 9.  "Use with SIP centralized conferencing framework" the following note is inserted:
Note: The CSRC-list in an RTP packet only includes participants who's text is included in one or more text blocks. It is not the same as the list of participants in a conference. With audio and video media, the CSRC-list would often contain all participants who are not muted whereas text participants that don't type are completely silent and so don't show up in RTP packet CSRC-lists.<a href="#section-10.10-9" class="pilcrow">¶</a></p>
<p id="section-10.10-10"></p>
</section>
<section id="section-10.11">
        <h3 id="name-changes-from-draft-hellstrom-a">
<a href="#section-10.11" class="section-number selfRef">10.11. </a><a href="#name-changes-from-draft-hellstrom-a" class="section-name selfRef">Changes from draft-hellstrom-avtcore-multi-party-rtt-source-00 to -01</a>
        </h3>
<p id="section-10.11-1">
          Editorial cleanup.<a href="#section-10.11-1" class="pilcrow">¶</a></p>
<p id="section-10.11-2">
          Changed capability indication from fmtp-parameter to SDP attribute "rtt-mix".<a href="#section-10.11-2" class="pilcrow">¶</a></p>
<p id="section-10.11-3">
          Swapped order of redundancy elements in the example to match reality.<a href="#section-10.11-3" class="pilcrow">¶</a></p>
<p id="section-10.11-4">
          Increased the SDP negotiation section<a href="#section-10.11-4" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-11">
      <h2 id="name-references">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-11.1">
        <h3 id="name-normative-references">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-mmusic-t140-usage-data-channel">[I-D.ietf-mmusic-t140-usage-data-channel]</dt>
        <dd>
<span class="refAuthor">Holmberg, C.</span><span class="refAuthor"> and G. Hellstrom</span>, <span class="refTitle">"T.140 Real-time Text Conversation over WebRTC Data Channels"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-mmusic-t140-usage-data-channel-14</span>, <time datetime="2020-04-10" class="refDate">10 April 2020</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-mmusic-t140-usage-data-channel-14">https://tools.ietf.org/html/draft-ietf-mmusic-t140-usage-data-channel-14</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2198">[RFC2198]</dt>
        <dd>
<span class="refAuthor">Perkins, C.</span><span class="refAuthor">, Kouvelas, I.</span><span class="refAuthor">, Hodson, O.</span><span class="refAuthor">, Hardman, V.</span><span class="refAuthor">, Handley, M.</span><span class="refAuthor">, Bolot, J.C.</span><span class="refAuthor">, Vega-Garcia, A.</span><span class="refAuthor">, and S. Fosse-Parisis</span>, <span class="refTitle">"RTP Payload for Redundant Audio Data"</span>, <span class="seriesInfo">RFC 2198</span>, <span class="seriesInfo">DOI 10.17487/RFC2198</span>, <time datetime="1997-09" class="refDate">September 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2198">https://www.rfc-editor.org/info/rfc2198</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3550">[RFC3550]</dt>
        <dd>
<span class="refAuthor">Schulzrinne, H.</span><span class="refAuthor">, Casner, S.</span><span class="refAuthor">, Frederick, R.</span><span class="refAuthor">, and V. Jacobson</span>, <span class="refTitle">"RTP: A Transport Protocol for Real-Time Applications"</span>, <span class="seriesInfo">STD 64</span>, <span class="seriesInfo">RFC 3550</span>, <span class="seriesInfo">DOI 10.17487/RFC3550</span>, <time datetime="2003-07" class="refDate">July 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3550">https://www.rfc-editor.org/info/rfc3550</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4102">[RFC4102]</dt>
        <dd>
<span class="refAuthor">Jones, P.</span>, <span class="refTitle">"Registration of the text/red MIME Sub-Type"</span>, <span class="seriesInfo">RFC 4102</span>, <span class="seriesInfo">DOI 10.17487/RFC4102</span>, <time datetime="2005-06" class="refDate">June 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4102">https://www.rfc-editor.org/info/rfc4102</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4103">[RFC4103]</dt>
        <dd>
<span class="refAuthor">Hellstrom, G.</span><span class="refAuthor"> and P. Jones</span>, <span class="refTitle">"RTP Payload for Text Conversation"</span>, <span class="seriesInfo">RFC 4103</span>, <span class="seriesInfo">DOI 10.17487/RFC4103</span>, <time datetime="2005-06" class="refDate">June 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4103">https://www.rfc-editor.org/info/rfc4103</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4566">[RFC4566]</dt>
        <dd>
<span class="refAuthor">Handley, M.</span><span class="refAuthor">, Jacobson, V.</span><span class="refAuthor">, and C. Perkins</span>, <span class="refTitle">"SDP: Session Description Protocol"</span>, <span class="seriesInfo">RFC 4566</span>, <span class="seriesInfo">DOI 10.17487/RFC4566</span>, <time datetime="2006-07" class="refDate">July 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4566">https://www.rfc-editor.org/info/rfc4566</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4855">[RFC4855]</dt>
        <dd>
<span class="refAuthor">Casner, S.</span>, <span class="refTitle">"Media Type Registration of RTP Payload Formats"</span>, <span class="seriesInfo">RFC 4855</span>, <span class="seriesInfo">DOI 10.17487/RFC4855</span>, <time datetime="2007-02" class="refDate">February 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4855">https://www.rfc-editor.org/info/rfc4855</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5764">[RFC5764]</dt>
        <dd>
<span class="refAuthor">McGrew, D.</span><span class="refAuthor"> and E. Rescorla</span>, <span class="refTitle">"Datagram Transport Layer Security (DTLS) Extension to Establish Keys for the Secure Real-time Transport Protocol (SRTP)"</span>, <span class="seriesInfo">RFC 5764</span>, <span class="seriesInfo">DOI 10.17487/RFC5764</span>, <time datetime="2010-05" class="refDate">May 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5764">https://www.rfc-editor.org/info/rfc5764</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6263">[RFC6263]</dt>
        <dd>
<span class="refAuthor">Marjou, X.</span><span class="refAuthor"> and A. Sollaud</span>, <span class="refTitle">"Application Mechanism for Keeping Alive the NAT Mappings Associated with RTP / RTP Control Protocol (RTCP) Flows"</span>, <span class="seriesInfo">RFC 6263</span>, <span class="seriesInfo">DOI 10.17487/RFC6263</span>, <time datetime="2011-06" class="refDate">June 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6263">https://www.rfc-editor.org/info/rfc6263</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6838">[RFC6838]</dt>
        <dd>
<span class="refAuthor">Freed, N.</span><span class="refAuthor">, Klensin, J.</span><span class="refAuthor">, and T. Hansen</span>, <span class="refTitle">"Media Type Specifications and Registration Procedures"</span>, <span class="seriesInfo">BCP 13</span>, <span class="seriesInfo">RFC 6838</span>, <span class="seriesInfo">DOI 10.17487/RFC6838</span>, <time datetime="2013-01" class="refDate">January 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6838">https://www.rfc-editor.org/info/rfc6838</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8643">[RFC8643]</dt>
        <dd>
<span class="refAuthor">Johnston, A.</span><span class="refAuthor">, Aboba, B.</span><span class="refAuthor">, Hutton, A.</span><span class="refAuthor">, Jesske, R.</span><span class="refAuthor">, and T. Stach</span>, <span class="refTitle">"An Opportunistic Approach for Secure Real-time Transport Protocol (OSRTP)"</span>, <span class="seriesInfo">RFC 8643</span>, <span class="seriesInfo">DOI 10.17487/RFC8643</span>, <time datetime="2019-08" class="refDate">August 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8643">https://www.rfc-editor.org/info/rfc8643</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="T140">[T140]</dt>
        <dd>
<span class="refAuthor">ITU-T</span>, <span class="refTitle">"Recommendation ITU-T T.140 (02/1998), Protocol for multimedia application text conversation"</span>, <time datetime="1998-02" class="refDate">February 1998</time>, <span>&lt;<a href="https://www.itu.int/rec/T-REC-T.140-199802-I/en">https://www.itu.int/rec/T-REC-T.140-199802-I/en</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="T140ad1">[T140ad1]</dt>
      <dd>
<span class="refAuthor">ITU-T</span>, <span class="refTitle">"Recommendation ITU-T.140 Addendum 1 - (02/2000), Protocol for multimedia application text conversation"</span>, <time datetime="2000-02" class="refDate">February 2000</time>, <span>&lt;<a href="https://www.itu.int/rec/T-REC-T.140-200002-I!Add1/en">https://www.itu.int/rec/T-REC-T.140-200002-I!Add1/en</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-11.2">
        <h3 id="name-informative-references">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC4353">[RFC4353]</dt>
        <dd>
<span class="refAuthor">Rosenberg, J.</span>, <span class="refTitle">"A Framework for Conferencing with the Session Initiation Protocol (SIP)"</span>, <span class="seriesInfo">RFC 4353</span>, <span class="seriesInfo">DOI 10.17487/RFC4353</span>, <time datetime="2006-02" class="refDate">February 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4353">https://www.rfc-editor.org/info/rfc4353</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4575">[RFC4575]</dt>
        <dd>
<span class="refAuthor">Rosenberg, J.</span><span class="refAuthor">, Schulzrinne, H.</span><span class="refAuthor">, and O. Levin, Ed.</span>, <span class="refTitle">"A Session Initiation Protocol (SIP) Event Package for Conference State"</span>, <span class="seriesInfo">RFC 4575</span>, <span class="seriesInfo">DOI 10.17487/RFC4575</span>, <time datetime="2006-08" class="refDate">August 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4575">https://www.rfc-editor.org/info/rfc4575</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4579">[RFC4579]</dt>
        <dd>
<span class="refAuthor">Johnston, A.</span><span class="refAuthor"> and O. Levin</span>, <span class="refTitle">"Session Initiation Protocol (SIP) Call Control - Conferencing for User Agents"</span>, <span class="seriesInfo">BCP 119</span>, <span class="seriesInfo">RFC 4579</span>, <span class="seriesInfo">DOI 10.17487/RFC4579</span>, <time datetime="2006-08" class="refDate">August 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4579">https://www.rfc-editor.org/info/rfc4579</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5194">[RFC5194]</dt>
      <dd>
<span class="refAuthor">van Wijk, A., Ed.</span><span class="refAuthor"> and G. Gybels, Ed.</span>, <span class="refTitle">"Framework for Real-Time Text over IP Using the Session Initiation Protocol (SIP)"</span>, <span class="seriesInfo">RFC 5194</span>, <span class="seriesInfo">DOI 10.17487/RFC5194</span>, <time datetime="2008-06" class="refDate">June 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5194">https://www.rfc-editor.org/info/rfc5194</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="section-appendix.a">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Gunnar Hellstrom</span></div>
<div dir="auto" class="left"><span class="org">Gunnar Hellstrom Accessible Communication</span></div>
<div dir="auto" class="left"><span class="street-address">Esplanaden 30</span></div>
<div dir="auto" class="left">SE-<span class="postal-code">13670</span> <span class="locality">Vendelso</span>
</div>
<div dir="auto" class="left"><span class="country-name">Sweden</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:gunnar.hellstrom@ghaccess.se" class="email">gunnar.hellstrom@ghaccess.se</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
