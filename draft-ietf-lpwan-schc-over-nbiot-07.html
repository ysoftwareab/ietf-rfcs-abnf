<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>SCHC over NB-IoT</title>
<meta content="Edgar Ramos" name="author">
<meta content="Ana Minaburo" name="author">
<meta content="
       
   The Static Context Header Compression (SCHC) specification describes
   header compression and fragmentation functionalities for LPWAN (Low
   Power Wide Area Networks) technologies.
   The Narrow Band Internet of Things (NB-IoT) architecture may adapt
   SCHC to improve its capacities. 
       
   This document describes the use of SCHC over the NB-IoT wireless
   access and provides elements for efficient parameterization. 
    " name="description">
<meta content="xml2rfc 3.12.2" name="generator">
<meta content="draft-ietf-lpwan-schc-over-nbiot-07" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.12.2
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.7.1
    pycountry 22.1.10
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.6.0
    six 1.16.0
    WeasyPrint 52.5
-->
<link href="/tmp/draft-ietf-lpwan-schc-over-nbiot-07-d78xnvth.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">SCHC NB-IoT</td>
<td class="right">February 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Ramos &amp; Minaburo</td>
<td class="center">Expires 26 August 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">lpwan Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-lpwan-schc-over-nbiot-07</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-02-22" class="published">22 February 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-08-26">26 August 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">E. Ramos</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">A. Minaburo</div>
<div class="org">Acklio</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">SCHC over NB-IoT</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">
   The Static Context Header Compression (SCHC) specification describes
   header compression and fragmentation functionalities for LPWAN (Low
   Power Wide Area Networks) technologies.
   The Narrow Band Internet of Things (NB-IoT) architecture may adapt
   SCHC to improve its capacities.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">
   This document describes the use of SCHC over the NB-IoT wireless
   access and provides elements for efficient parameterization.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 26 August 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="xref">3</a>.  <a href="#name-architecture" class="xref">Architecture</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-data-transmission" class="xref">Data Transmission</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-ip-based-data-transmission" class="xref">IP based Data Transmission</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-schc-over-the-radio-link" class="xref">SCHC over the Radio link</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.1">
                    <p id="section-toc.1-1.5.2.1.2.1.1"><a href="#section-5.1.1" class="xref">5.1.1</a>.  <a href="#name-schc-entities-placing" class="xref">SCHC Entities Placing</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-schc-over-no-access-stratum" class="xref">SCHC over No-Access Stratum (NAS)</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.1">
                    <p id="section-toc.1-1.5.2.2.2.1.1"><a href="#section-5.2.1" class="xref">5.2.1</a>.  <a href="#name-schc-entities-placing-2" class="xref">SCHC Entities Placing</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-parameters-for-static-conte" class="xref">Parameters for Static Context Header Compression (SCHC)</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.1">
                    <p id="section-toc.1-1.5.2.3.2.1.1"><a href="#section-5.3.1" class="xref">5.3.1</a>.  <a href="#name-schc-context-initialization" class="xref">SCHC Context initialization</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.2">
                    <p id="section-toc.1-1.5.2.3.2.2.1"><a href="#section-5.3.2" class="xref">5.3.2</a>.  <a href="#name-schc-rules" class="xref">SCHC Rules</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.3">
                    <p id="section-toc.1-1.5.2.3.2.3.1"><a href="#section-5.3.3" class="xref">5.3.3</a>.  <a href="#name-rule-id" class="xref">Rule ID</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.4">
                    <p id="section-toc.1-1.5.2.3.2.4.1"><a href="#section-5.3.4" class="xref">5.3.4</a>.  <a href="#name-schc-max_packet_size" class="xref">SCHC MAX_PACKET_SIZE</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.5">
                    <p id="section-toc.1-1.5.2.3.2.5.1"><a href="#section-5.3.5" class="xref">5.3.5</a>.  <a href="#name-fragmentation" class="xref">Fragmentation</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-end-to-end-compression" class="xref">End-to-End Compression</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-schc-entities-placing-3" class="xref">SCHC Entities Placing</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-parameters-for-static-contex" class="xref">Parameters for Static Context Header Compression</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.1">
                    <p id="section-toc.1-1.6.2.2.2.1.1"><a href="#section-6.2.1" class="xref">6.2.1</a>.  <a href="#name-schc-context-initialization-2" class="xref">SCHC Context initialization</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.2">
                    <p id="section-toc.1-1.6.2.2.2.2.1"><a href="#section-6.2.2" class="xref">6.2.2</a>.  <a href="#name-schc-rules-2" class="xref">SCHC Rules</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.3">
                    <p id="section-toc.1-1.6.2.2.2.3.1"><a href="#section-6.2.3" class="xref">6.2.3</a>.  <a href="#name-rule-id-2" class="xref">Rule ID</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.4">
                    <p id="section-toc.1-1.6.2.2.2.4.1"><a href="#section-6.2.4" class="xref">6.2.4</a>.  <a href="#name-schc-max_packet_size-2" class="xref">SCHC MAX_PACKET_SIZE</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="xref">6.3</a>.  <a href="#name-fragmentation-2" class="xref">Fragmentation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.1">
                    <p id="section-toc.1-1.6.2.3.2.1.1"><a href="#section-6.3.1" class="xref">6.3.1</a>.  <a href="#name-fragmentation-modes" class="xref">Fragmentation modes</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.2">
                    <p id="section-toc.1-1.6.2.3.2.2.1"><a href="#section-6.3.2" class="xref">6.3.2</a>.  <a href="#name-fragmentation-parameters" class="xref">Fragmentation Parameters</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-padding" class="xref">Padding</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-security-considerations" class="xref">Security considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-3gpp-references" class="xref">3GPP References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-appendix" class="xref">Appendix</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-nb-iot-user-plane-protocol-" class="xref">NB-IoT User Plane protocol architecture</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1.2.1">
                    <p id="section-toc.1-1.10.2.1.2.1.1"><a href="#section-10.1.1" class="xref">10.1.1</a>.  <a href="#name-packet-data-convergence-pro" class="xref">Packet Data Convergence Protocol (PDCP)</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1.2.2">
                    <p id="section-toc.1-1.10.2.1.2.2.1"><a href="#section-10.1.2" class="xref">10.1.2</a>.  <a href="#name-radio-link-protocol-rlc" class="xref">Radio Link Protocol (RLC)</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1.2.3">
                    <p id="section-toc.1-1.10.2.1.2.3.1"><a href="#section-10.1.3" class="xref">10.1.3</a>.  <a href="#name-medium-access-control-mac" class="xref">Medium Access Control (MAC)</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-nb-iot-data-over-nas-donas" class="xref">NB-IoT Data over NAS (DoNAS)</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="sect-1">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">
   The Static Context Header Compression (SCHC) <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> defines a
   header compression scheme, and fragmentation functionality suitable
   for the Low Power Wide Area Networks (LPWAN) networks defined in
   <span>[<a href="#RFC8376" class="xref">RFC8376</a>]</span>.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">
   In an NB-IoT network, header compression efficiently brings Internet
   connectivity to the node.  This document describes the SCHC
   parameters used to performs the static context header compression
   into the NB-IoT wireless access.  This document assumes functionality
   for NB-IoT of 3GPP release 15.  Otherwise, the text explicitly
   mentions other versions' functionality.<a href="#section-1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-2">
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">
   This document will follow the terms defined in <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>, in
   <span>[<a href="#RFC8376" class="xref">RFC8376</a>]</span>, and the TGPP23720.<a href="#section-2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.1">CIoT.  Cellular IoT<a href="#section-2-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.2">NGW-C-SGN.  Network Gateway - CIoT Serving Gateway Node<a href="#section-2-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.3">Dev-UE.  Device - User Equipment<a href="#section-2-2.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.4">RGW-eNB.  Radio Gateway - Node B.  Base Station that controls the
      UE<a href="#section-2-2.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.5">EPC.  Evolved Packet Connectivity.  Core network of 3GPP LTE
      systems.<a href="#section-2-2.5" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.6">EUTRAN.  Evolved Universal Terrestrial Radio Access Network.
      Radio network from LTE based systems.<a href="#section-2-2.6" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.7">NGW-MME.  Network Gateway - Mobility Management Entity.  Handle
      mobility of the UE<a href="#section-2-2.7" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.8">NB-IoT.  Narrow Band IoT.  Referring to 3GPP LPWAN technology
      based in LTE architecture but with additional optimization for IoT
      and using a Narrow Band spectrum frequency.<a href="#section-2-2.8" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.9">NGW-SGW.  Network Gateway - Serving Gateway.  Routes and forwards
      the user data packets through the access network<a href="#section-2-2.9" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.10">HSS.  Home Subscriber Server.  It is a database that performs
      mobility management<a href="#section-2-2.10" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.11">NGW-PGW.  Network Gateway - Packet Data Node Gateway.  An
      interface between the internal with the external network<a href="#section-2-2.11" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.12">PDU.  Protocol Data Unit.  Data packets including headers that are
      transmitted between entities through a protocol.<a href="#section-2-2.12" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.13">SDU.  Service Data Unit.  Data packets (PDUs) from higher layers
      protocols used by lower layer protocols as a payload of their own
      PDUs that has not yet been encapsulated.<a href="#section-2-2.13" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.14">IWK-SCEF.  InterWorking Service Capabilities Exposure Function.
      Used in roaming scenarios and serves for interconnection with the
      SCEF of the Home PLMN and is located in the Visited PLMN<a href="#section-2-2.14" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.15">NGW-SCEF.  Network Gateway - Service Capability Exposure Function.
      EPC node for exposure of 3GPP network service capabilities to 3rd
      party applications.<a href="#section-2-2.15" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="sect-3">
<section id="section-3">
      <h2 id="name-architecture">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-architecture" class="section-name selfRef">Architecture</a>
      </h2>
<span id="name-3gpp-network-architecture"></span><div id="ure-3gpp-network-architecture">
<figure id="figure-1">
        <div class="alignLeft art-text artwork" id="section-3-1.1">
<pre>
  +---+                            +------+
  |Dev| \              +-----+ ----| HSS  |
  +---+  \             | NGW |     +------+
         |             |-MME |\__
          \          / +-----+   \
  +---+    \+-----+ /    |       +------+
  |Dev| ----| RGW |-     |       | NGW- |
  +---+     |-eNB |      |       | SCEF |---------+
           /+-----+ \    |       +------+         |
          /          \ +------+                   |
         /            \| NGW- |  +-----+   +-----------+
  +---+ /              | CSGW |--| NGW-|---|Application|
  |Dev|                |      |  | PGW |   |   Server  |
  +---+                +------+  +-----+   +-----------+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-3gpp-network-architecture" class="selfRef">3GPP network architecture</a>
        </figcaption></figure>
</div>
<p id="section-3-2">
   The Narrow Band Internet of Things (NB-IoT) architecture has a more
   complex structure.  It relies on different NGWs from different
   providers and can send data by different paths, each path with
   different characteristics such as bandwidths, acknowledgments, and
   layer two reliability and segmentation.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">
   Figure 1 shows this architecture where the Network Gateway Cellular
   Internet of Things Serving Gateway Node (NGW-CSGN) optimizes co-
   locating entities in different paths.  For example, a Dev using the
   path form by the Network Gateway Mobility Management Entity (NGW-
   MME), the NGW-CSGW, and Network Gateway Packet Data Node Gateway
   (NGW-PGW) may get a limited bandwidth transmission from few bytes/s
   to one thousand bytes/s only.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">
   Another node introduced in the NBIoT architecture is the Network
   Gateway Service Capability Exposure Function (NGW-SCEF), which
   securely exposes service and network capabilities to entities
   external to the network operator.  OMA and OneM2M define the
   northbound APIS [TGPP33203].  In this case, the path is small for
   data transmission.  The main functions of the NGW-SCEF are:<a href="#section-3-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-5.1">Connectivity path<a href="#section-3-5.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-5.2">Device Monitoring<a href="#section-3-5.2" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="sect-4">
<section id="section-4">
      <h2 id="name-data-transmission">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-data-transmission" class="section-name selfRef">Data Transmission</a>
      </h2>
<p id="section-4-1">
   NB-IoT networks deal with end-to-end user data and in-band signaling
   between the nodes and functions to configure, control, and monitor
   the system functions and behaviors.  The signaling data uses a
   different path with specific protocols, handling processes, and
   entities but can transport end-to-end user data for IoT services.  In
   contrast, the end-to-end application only transports end-to-end data.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">
   The maximum recommended MTU size is 1358 Bytes.  The radio network
   protocols limit the packet sizes over the air, including radio
   protocol overhead to 1600 Bytes.  However, the MTU is smaller to
   avoid fragmentation in the network backbone due to the payload
   encryption size (multiple of 16) and the additional core transport
   overhead handling.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">
   3GPP standardizes NB-IoT and, in general, the cellular technologies
   interfaces and functions.  Therefore the introduction of SCHC
   entities to Dev, RGW-eNB, and NGW-CSGN needs to be specified in the
   NB-IoT standard, which implies that standard specifying SCHC support
   would not be backward compatible.  A terminal or a network supporting
   a version of the standard without SCHC or without capability
   implementation (in case of not being standardized as mandatory
   capability) cannot utilize the compression services with this
   approach.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">
   SCHC could be deployed differently depending on where the header
   compression and the fragmentation are applied.  The SCHC
   functionalities can be used over the radio transmission only, between
   the Dev and the RGW-eNB.  Alternatively, the packets transmitted over
   the end-to-end link can use SCHC.  Else, when the transmissions over
   the NGW-MME or NGW-SCEF, the NGW-CSGN uses SCHC entity.  For these
   two cases, the functions are to be standardized by 3GPP.<a href="#section-4-4" class="pilcrow">¶</a></p>
<p id="section-4-5">
   Another possibility is to apply SCHC functionalities to the end-to-
   end connection or at least up to the operator network edge.  SCHC
   functionalities are available in the application layer of the Dev and
   the Application Servers or a broker function at the edge of the
   operator network.  The radio network transmits the packets as non-IP
   traffic using IP tunneling or SCEF services.  Since this option does
   not necessarily require 3GPP standardization, it is possible to also
   benefit legacy devices with SCHC by using the non-IP transmission
   features of the operator network.<a href="#section-4-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-5">
<section id="section-5">
      <h2 id="name-ip-based-data-transmission">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-ip-based-data-transmission" class="section-name selfRef">IP based Data Transmission</a>
      </h2>
<div id="sect-5.1">
<section id="section-5.1">
        <h3 id="name-schc-over-the-radio-link">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-schc-over-the-radio-link" class="section-name selfRef">SCHC over the Radio link</a>
        </h3>
<p id="section-5.1-1">
   Deploying SCHC only over the radio link would require placing it as
   part of the protocol stack for data transfer between the Dev and the
   RGW-eNB.  This stack is the functional layer responsible for
   transporting data over the wireless connection and managing radio
   resources.  There is support for features such as reliability,
   segmentation, and concatenation.  The transmissions use link
   adaptation, meaning that the system will optimize the transport
   format used according to the radio conditions, the number of bits to
   transmit, and the power and interference constraints.  That means
   that the number of bits transmitted over the air depends on the
   Modulation and Coding Schemes (MCS) selected.  A Transport Block (TB)
   transmissions happen in the physical layer at network synchronized
   intervals called Transmission Time Interval (TTI).  Each Transport
   Block has a different MCS and number of bits available to transmit.
   The MAC layer [TGPP36321] defines the Transport Blocks
   characteristics.  The Radio link Figure 2 stack comprises the Packet
   Data Convergence Protocol (PDCP) [TGPP36323], Radio Link Protocol
   (RLC) [TGPP36322], Medium Access Control protocol (MAC) [TGPP36321],
   and the Physical Layer [TGPP36201].  The Appendix gives more details
   of these protocols.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<div id="sect-5.1.1">
<section id="section-5.1.1">
          <h4 id="name-schc-entities-placing">
<a href="#section-5.1.1" class="section-number selfRef">5.1.1. </a><a href="#name-schc-entities-placing" class="section-name selfRef">SCHC Entities Placing</a>
          </h4>
<p id="section-5.1.1-1">
   The current architecture provides support for header compression in
   PDCP with RoHC <span>[<a href="#RFC5795" class="xref">RFC5795</a>]</span>.  Therefore SCHC entities can be deployed
   similarly without the need for significant changes in the 3GPP
   specifications.<a href="#section-5.1.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1.1-2">
   In this scenario, RLC takes care of fragmentation unless for the
   transparent mode.  When packets exceed the transport block size at
   the time of transmission, SCHC fragmentation is unnecessary and
   should not be used to avoid the additional protocol overhead.  It is
   not common to configure RLC in Transparent Mode for IP-based data.
   However, given the case in the future, SCHC fragmentation may be
   used.  In that case, a SCHC tile would match the minimum transport
   block size minus the PDCP and MAC headers.<a href="#section-5.1.1-2" class="pilcrow">¶</a></p>
<span id="name-schc-over-the-radio-link-2"></span><div id="ure-schc-over-the-radio-link">
<figure id="figure-2">
            <div class="alignLeft art-text artwork" id="section-5.1.1-3.1">
<pre>
  +---------+                              +---------+  |
  |IP/non-IP+------------------------------+IP/non-IP+-&gt;+
  +---------+   |   +---------------+   |  +---------+  |
  | PDCP    +-------+ PDCP  | GTP|U +------+ GTP-U   |-&gt;+
  | (SCHC)  +       + (SCHC)|       +      +         |  |
  +---------+   |   +---------------+   |  +---------+  |
  | RLC     +-------+ RLC   |UDP/IP +------+ UDP/IP  +-&gt;+
  +---------+   |   +---------------+   |  +---------+  |
  | MAC     +-------+ MAC   | L2    +------+ L2      +-&gt;+
  +---------+   |   +---------------+   |  +---------+  |
  | PHY     +-------+ PHY   | PHY   +------+ PHY     +-&gt;+
  +---------+       +---------------+      +---------+  |
             C-Uu/                    S1-U             SGi
     Dev                RGW-eNB             NGW-CSGN
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-schc-over-the-radio-link-2" class="selfRef">SCHC over the Radio link</a>
            </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="sect-5.2">
<section id="section-5.2">
        <h3 id="name-schc-over-no-access-stratum">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-schc-over-no-access-stratum" class="section-name selfRef">SCHC over No-Access Stratum (NAS)</a>
        </h3>
<p id="section-5.2-1">
   The NGW-MME conveys mainly control signaling between the Dev and the
   cellular network [TGPP24301].  The network transports this traffic on
   top of the radio link.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">
   This kind of flow supports data transmissions to reduce the overhead
   when transmitting infrequent small quantities of data.  This
   transmission is known as Data over No-Access Stratum (DoNAS) or
   Control Plane CIoT EPS optimization.  In DoNAS, the Dev uses the pre-
   established security and piggyback small uplink data into the initial
   uplink message and uses an additional message to receive downlink
   small data response.<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<p id="section-5.2-3">
   The NGW-MME performs the data encryption from the network side in a
   DoNAS PDU.  Depending on the data type signaled indication (IP or
   non-IP data), the network allocates an IP address or establishes a
   direct forwarding path.  DoNAS is regulated under rate control upon
   previous agreement, meaning that a maximum number of bits per unit of
   time is agreed upon per device subscription beforehand and configured
   in the device.<a href="#section-5.2-3" class="pilcrow">¶</a></p>
<p id="section-5.2-4">
   The system will use DoNAS when a terminal in a power-saving state
   requires a short transmission and receives an acknowledgment or short
   feedback from the network.  Depending on the size of buffered data to
   transmit, the Dev might deploy the connected mode transmissions
   instead, limiting and controlling the DoNAS transmissions to
   predefined thresholds and a good resource optimization balance for
   the terminal and the network.  The support for mobility of DoNAS is
   present but produces additional overhead.  The Appendix gives
   additional details of DoNAS.<a href="#section-5.2-4" class="pilcrow">¶</a></p>
<div id="sect-5.2.1">
<section id="section-5.2.1">
          <h4 id="name-schc-entities-placing-2">
<a href="#section-5.2.1" class="section-number selfRef">5.2.1. </a><a href="#name-schc-entities-placing-2" class="section-name selfRef">SCHC Entities Placing</a>
          </h4>
<p id="section-5.2.1-1">
   SCHC may reside in the Non-Access Stratum (NAS) protocol layer in
   this scenario.  The same principles as for Radio link transmissions
   apply here as well.  The main difference is the physical placing of
   the SCHC entities on the network side as the NGW-MME resides in the
   core network and is the terminating node for NAS instead of the eNB.<a href="#section-5.2.1-1" class="pilcrow">¶</a></p>
<div id="ure-3">
<figure id="figure-3">
            <div class="alignLeft art-text artwork" id="section-5.2.1-2.1">
<pre>
+--------+                       +--------+--------+  +  +--------+
| IP/    +--+-----------------+--+  IP/   |   IP/  +-----+   IP/  |
| Non-IP |  |                 |  | Non-IP | Non-IP |  |  | Non-IP |
+--------+  |                 |  +-----------------+  |  +--------+
| NAS    +-----------------------+   NAS  |GTP-C/U +-----+GTP-C/U |
|(SCHC)  |  |                 |  | (SCHC) |        |  |  |        |
+--------+  |  +-----------+  |  +-----------------+  |  +--------+
| RRC    +-----+RRC  |S1|AP+-----+ S1|AP  |        |  |  |        |
+--------+  |  +-----------+  |  +--------+  UDP   +-----+  UDP   |
| PDCP*  +-----+PDCP*|SCTP +-----+ SCTP   |        |  |  |        |
+--------+  |  +-----------+  |  +-----------------+  |  +--------+
| RLC    +-----+ RLC | IP  +-----+ IP     | IP     +-----+ IP     |
+--------+  |  +-----------+  |  +-----------------+  |  +--------+
| MAC    +-----+ MAC | L2  +-----+ L2     | L2     +-----+ L2     |
+--------+  |  +-----------+  |  +-----------------+  |  +--------+
| PHY    +--+--+ PHY | PHY +--+--+ PHY    | PHY    +-----+ PHY    |
+--------+     +-----+-----+     +--------+--------+  |  +--------+
           C-Uu/           S1-lite                   SGi
   Dev           RGW-eNB               NGW-MME             NGW-PGW

    *PDCP is bypassed until AS security is activated TGPP36300.
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a></figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="sect-5.3">
<section id="section-5.3">
        <h3 id="name-parameters-for-static-conte">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-parameters-for-static-conte" class="section-name selfRef">Parameters for Static Context Header Compression (SCHC)</a>
        </h3>
<div id="sect-5.3.1">
<section id="section-5.3.1">
          <h4 id="name-schc-context-initialization">
<a href="#section-5.3.1" class="section-number selfRef">5.3.1. </a><a href="#name-schc-context-initialization" class="section-name selfRef">SCHC Context initialization</a>
          </h4>
<p id="section-5.3.1-1">
   RRC (Radio Resource Control) protocol is the main tool used to
   configure the parameters of the Radio link.  It will configure SCHC
   and the static context distribution as it has made for RoHC operation
   [TGPP36323].<a href="#section-5.3.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-5.3.2">
<section id="section-5.3.2">
          <h4 id="name-schc-rules">
<a href="#section-5.3.2" class="section-number selfRef">5.3.2. </a><a href="#name-schc-rules" class="section-name selfRef">SCHC Rules</a>
          </h4>
<p id="section-5.3.2-1">
   The network operator in these scenarios defines the number of rules
   in a context.  The operator must be aware of the type of IP traffic
   that the device will carry out.  Implying that the operator might use
   provision sets of rules compatible with the use case of the device.
   For devices acting as gateways of other devices, several rules may
   match the diversity of devices and protocols used by the devices
   associated with the gateway.  Meanwhile, simpler devices (for
   example, an electricity meter) may have a predetermined set of fixed
   protocols and parameters.  Additionally, the deployment of IPv4
   addresses and IPv6 may force different rules to deal with each case.<a href="#section-5.3.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-5.3.3">
<section id="section-5.3.3">
          <h4 id="name-rule-id">
<a href="#section-5.3.3" class="section-number selfRef">5.3.3. </a><a href="#name-rule-id" class="section-name selfRef">Rule ID</a>
          </h4>
<p id="section-5.3.3-1">
   There is a reasonable assumption of 9 bytes of radio protocol
   overhead for these transmission scenarios in NB-IoT, where PDCP uses
   5 bytes due to header and integrity protection, and RLC and MAC use 4
   bytes.  The minimum physical Transport Blocks (TB) that can withhold
   this overhead value according to 3GPP Release 15 specifications are
   88, 104, 120, and 144 bits.  A transmission optimization may require
   only one physical layer transmission.  SCHC overhead should not
   exceed the available number of effective bits of the smallest
   physical TB available.  The packets handled by 3GPP networks are
   byte-aligned, and therefore the minimum payload possible (including
   padding) is 8 bits.  Therefore in order to use the smallest TB, the
   maximum SCHC header is 12 bits.  These 12 bits must include the
   Compression Residue in addition to the Rule ID.  On the other hand,
   more complex NB-IoT devices (such as a capillarity gateway) might
   require additional bits to handle the variety and multiple parameters
   of higher-layer protocols deployed.  In that sense, the operator may
   want to have flexibility on the number and type of rules supported by
   each device independently, and consequently, these scenarios require
   a configurable value.  The configuration may be part of the operation
   profile agreed together with the content distribution.  The Rule ID
   field size may range from 2 bits, resulting in 4 rules to an 8 bits
   value that would yield up to 256 rules that can be used together with
   the operators and seems quite a reasonable maximum limit even for a
   device acting as a NAT.  More bits could be configured, but it should
   consider the byte-alignment of the expected Compression Residue.  In
   the minimum TB size case, 2 bits of Rule Id leave only 6 bits
   available for Compression Residue.<a href="#section-5.3.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-5.3.4">
<section id="section-5.3.4">
          <h4 id="name-schc-max_packet_size">
<a href="#section-5.3.4" class="section-number selfRef">5.3.4. </a><a href="#name-schc-max_packet_size" class="section-name selfRef">SCHC MAX_PACKET_SIZE</a>
          </h4>
<p id="section-5.3.4-1">
   The Radio Link can handle the fragmentation of SCHC packets if
   needed, including reliability.  Hence the packet size is limited by
   the MTU handled by the radio protocols that correspond to 1600 bytes
   for 3GPP Release 15.<a href="#section-5.3.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-5.3.5">
<section id="section-5.3.5">
          <h4 id="name-fragmentation">
<a href="#section-5.3.5" class="section-number selfRef">5.3.5. </a><a href="#name-fragmentation" class="section-name selfRef">Fragmentation</a>
          </h4>
<p id="section-5.3.5-1">
   For these scenarios, the SCHC fragmentation functions are disabled.
   The RLC layer of NB-IoT can segment packets in suitable units that
   fit the selected transport blocks for transmissions of the physical
   layer.  The blocks selection is made according to the link adaptation
   input function in the MAC layer and the quantity of data in the
   buffer.  The link adaptation layer may produce different results at
   each Time Transmission Interval (TTI), resulting in varying physical
   transport blocks that depend on the network load, interference,
   number of bits transmitted, and QoS.  Even if setting a value that
   allows the construction of data units following the SCHC tiles
   principle, the protocol overhead may be greater or equal than
   allowing the Radio link protocols to take care of the fragmentation
   natively.<a href="#section-5.3.5-1" class="pilcrow">¶</a></p>
<div id="sect-5.3.5.1">
<section id="section-5.3.5.1">
            <h5 id="name-fragmentation-in-transparen">
<a href="#section-5.3.5.1" class="section-number selfRef">5.3.5.1. </a><a href="#name-fragmentation-in-transparen" class="section-name selfRef">Fragmentation in Transparent Mode</a>
            </h5>
<p id="section-5.3.5.1-1">
   If RLC operates in Transparent Mode, there could be a case to
   activate a fragmentation function together with a light reliability
   function such as the ACK-Always mode.  In practice, it is uncommon to
   transmit radio link data using this configuration.  It mainly targets
   signaling transmissions.  In those cases, the MAC layer mechanisms
   ensure reliability, such as repetitions or automatic retransmissions,
   and additional reliability might only generate protocol overhead.<a href="#section-5.3.5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.3.5.1-2">
   SCHC may reduce radio network protocols overhead in future
   operations, support reliable transmissions, and transmit small data
   with fewer possible transmissions by using fixed or limited transport
   blocks compatible with the tiling SCHC fragmentation handling.<a href="#section-5.3.5.1-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="sect-6">
<section id="section-6">
      <h2 id="name-end-to-end-compression">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-end-to-end-compression" class="section-name selfRef">End-to-End Compression</a>
      </h2>
<p id="section-6-1">
   The Non-IP Data Delivery (NIDD) services of 3GPP enable the
   transmission of SCHC packets compressed by the application layer.
   The packets can be delivered using IP-tunnels to the 3GPP network or
   NGW-SCEF functions (i.e., API calls).  In both cases, as compression
   occurs before transmission, the network will not understand the
   packet, and the network does not have context information of this
   compression.  Therefore the network will treat the packet as Non-IP
   traffic and deliver it to the Dev without any other stack element,
   directly under the L2.<a href="#section-6-1" class="pilcrow">¶</a></p>
<div id="sect-6.1">
<section id="section-6.1">
        <h3 id="name-schc-entities-placing-3">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-schc-entities-placing-3" class="section-name selfRef">SCHC Entities Placing</a>
        </h3>
<p id="section-6.1-1">
   In the two scenarios using End-to-End compression, SCHC entities are
   located almost on top of the stack.  In the Dev, an application using
   the NB-IoT connectivity services may implement SCHC and the
   Application Server.  The IP tunneling scenario requires that the
   Application Server send the compressed packet over an IP connection
   terminated by the 3GPP core network.  If the transmission uses the
   NGW-SCEF services, it is possible to utilize an API call to transfer
   the SCHC packets between the core network and the Application Server.
   Also, an IP tunnel could be established by the Application Server if
   negotiated with the NGW-SCEF.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<span id="name-schc-entities-placed-when-u"></span><div id="ure-schc-entities-placed-when-using-non-ip-delivery-nidd-3gpp-sevices">
<figure id="figure-4">
          <div class="alignLeft art-text artwork" id="section-6.1-2.1">
<pre>
+---------+       XXXXXXXXXXXXXXXXXXXXXXXX             +--------+
| SCHC    |      XXX                    XXX            | SCHC   |
|(Non-IP) +-----XX........................XX....+--*---+(Non-IP)|
+---------+    XX                  +----+  XX   |  |   +--------+
|         |    XX                  |SCEF+-------+  |   |        |
|         |   XXX     3GPP RAN &amp;   +----+  XXX     +---+  UDP   |
|         |   XXX    CORE NETWORK          XXX     |   |        |
|  L2     +---+XX                  +------------+  |   +--------+
|         |     XX                 |IP TUNNELING+--+   |        |
|         |      XXX               +------------+  +---+  IP    |
+---------+       XXXX                 XXXX        |   +--------+
| PHY     +------+ XXXXXXXXXXXXXXXXXXXXXXX         +---+  PHY   |
+---------+                                            +--------+
   UE                                                       AS
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-schc-entities-placed-when-u" class="selfRef">SCHC entities placed when using Non-IP Delivery (NIDD) 3GPP Sevices</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="sect-6.2">
<section id="section-6.2">
        <h3 id="name-parameters-for-static-contex">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-parameters-for-static-contex" class="section-name selfRef">Parameters for Static Context Header Compression</a>
        </h3>
<div id="sect-6.2.1">
<section id="section-6.2.1">
          <h4 id="name-schc-context-initialization-2">
<a href="#section-6.2.1" class="section-number selfRef">6.2.1. </a><a href="#name-schc-context-initialization-2" class="section-name selfRef">SCHC Context initialization</a>
          </h4>
<p id="section-6.2.1-1">
   The application layer handles the static context; consequently, the
   context distribution must be according to the application's
   capabilities, perhaps utilizing IP data transmissions up to context
   initialization.  Also, the static contexts delivery may use the same
   IP tunneling or NGW-SCEF services used later for the SCHC packets
   transport.<a href="#section-6.2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-6.2.2">
<section id="section-6.2.2">
          <h4 id="name-schc-rules-2">
<a href="#section-6.2.2" class="section-number selfRef">6.2.2. </a><a href="#name-schc-rules-2" class="section-name selfRef">SCHC Rules</a>
          </h4>
<p id="section-6.2.2-1">
   Even when the transmission content is not visible for the 3GPP
   network, the same limitations as for IP-based data transmissions
   applies in these scenarios in terms of aiming to use the minimum
   number of transmission and minimize the protocol overhead.<a href="#section-6.2.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-6.2.3">
<section id="section-6.2.3">
          <h4 id="name-rule-id-2">
<a href="#section-6.2.3" class="section-number selfRef">6.2.3. </a><a href="#name-rule-id-2" class="section-name selfRef">Rule ID</a>
          </h4>
<p id="section-6.2.3-1">
   Similar to the case of IP transmissions, the Rule ID size can be
   dynamically set before the context delivery.  For example, negotiated
   between the applications when choosing a profile according to the
   type of traffic and application deployed.  The same considerations
   related to the transport block size and performance mentioned for the
   IP type of traffic must be followed when choosing a size value for
   the Rule ID field.<a href="#section-6.2.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-6.2.4">
<section id="section-6.2.4">
          <h4 id="name-schc-max_packet_size-2">
<a href="#section-6.2.4" class="section-number selfRef">6.2.4. </a><a href="#name-schc-max_packet_size-2" class="section-name selfRef">SCHC MAX_PACKET_SIZE</a>
          </h4>
<p id="section-6.2.4-1">
   In these scenarios, the maximum recommended MTU size that applies is
   1358 Bytes since the SCHC packets (and fragments) are traversing the
   whole 3GPP network infrastructure (core and radio), not only the
   radio as the IP transmissions case.<a href="#section-6.2.4-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-6.3">
<section id="section-6.3">
        <h3 id="name-fragmentation-2">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-fragmentation-2" class="section-name selfRef">Fragmentation</a>
        </h3>
<p id="section-6.3-1">
   In principle, packets larger than 1358 bytes need the fragmentation
   function.  Since the 3GPP uses reliability functions, the No-ACK
   fragmentation mode may be enough in point-to-point connections.
   Nevertheless, additional considerations are described below for more
   complex cases.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<div id="sect-6.3.1">
<section id="section-6.3.1">
          <h4 id="name-fragmentation-modes">
<a href="#section-6.3.1" class="section-number selfRef">6.3.1. </a><a href="#name-fragmentation-modes" class="section-name selfRef">Fragmentation modes</a>
          </h4>
<p id="section-6.3.1-1">
   A global service assigns a QoS to the packets depending on the
   billing.  Packets with very low QoS may get lost before they arrive
   in the 3GPP radio network transmission, for example, in between the
   links of a capillarity gateway or due to buffer overflow handling in
   a backhaul connection.  The use of SCHC fragmentation with the ACK-
   on-Error mode is recommended to secure additional reliability on the
   packets transmitted with a small trade-off on additional
   transmissions to signal the end-to-end arrival of the packets if no
   transport protocol takes care of retransmission.
   Also, the ACK-on-Error mode is even desirable to keep track of all
   the SCHC packets delivered.  In that case, the fragmentation function
   could be active for all packets transmitted by the applications.
   SCHC ACK-on-Error fragmentation may be active for the transmission of
   non-IP packets on the NGW-MME.  If these packets are considering to
   use SCHC with the RuleID for non-compressing packets as {RFC8724}
   allows it.<a href="#section-6.3.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-6.3.2">
<section id="section-6.3.2">
          <h4 id="name-fragmentation-parameters">
<a href="#section-6.3.2" class="section-number selfRef">6.3.2. </a><a href="#name-fragmentation-parameters" class="section-name selfRef">Fragmentation Parameters</a>
          </h4>
<p id="section-6.3.2-1">
   SCHC profile with the fragmentation mode will have specific Rules.
   The Rule ID will identify the fragmentation mode used, and it is
   defined in section <a href="#sect-5.3.3" class="xref">Section 5.3.3</a>.<a href="#section-6.3.2-1" class="pilcrow">¶</a></p>
<p id="section-6.3.2-2">
   SCHC parametrization considers that NBIoT aligns the bit and uses
   padding and the size of the Transfer Block.  SCHC will try to reduce
   padding to optimize the compression of the information.  The Header
   size needs to be multiple of 4, and the Tiles may keep a fixed value
   of 4 or 8 bits to avoid padding except for transfer block equals 16
   bits where Tiles may be of 2 bits.  For the other parameters, the
   transfer block size has a wide range that needs two configurations.<a href="#section-6.3.2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.3.2-3.1">For Transfer Blocks smaller than 300bits: 8 bits-Header_size
      configuration, with the size of the header fields as follows: Rule
      ID from 1 - 3 bits, DTag 1 bit, FCN 3 bits, W 1 bits.<a href="#section-6.3.2-3.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.3.2-3.2">For Transfer Blocks bigger than 300 bits: 16 bits-Header_size
      configuration, with the size of the header fields as follows:
      Rules ID from 1 to 8 or 10 bits, DTag 1 or 2 bits, FCN 3 bits, W 2
      or 3 bits.<a href="#section-6.3.2-3.2" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-6.3.2-4">
   The IoT devices communicate with small data transfer and have a
   battery life of 10 years.  These devices use the Power Save Mode and
   the Idle Mode DRX, which govern how often the device wakes up, stays
   up, and is reachable.  Table 10.5.163a in {3GPP-TS_24.088} specifies
   a range for the radio timers as N to 3N in increments of one where
   the units of N can be 1 hour or 10 hours.  To adapt SCHC to the NB-
   IoT activities, the Inactivity Timer and the Retransmission Timer may
   use these limits.<a href="#section-6.3.2-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="sect-7">
<section id="section-7">
      <h2 id="name-padding">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-padding" class="section-name selfRef">Padding</a>
      </h2>
<p id="section-7-1">
   NB-IoT and 3GPP wireless access, in general, assumes byte-aligned
   payload.  Therefore the L2 word for NB-IoT MUST be considered 8 bits,
   and the padding treatment should use this value accordingly.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-8">
<section id="section-8">
      <h2 id="name-security-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-security-considerations" class="section-name selfRef">Security considerations</a>
      </h2>
<p id="section-8-1">
   This document does not add any security considerations and follows
   the 3GPP access security document specified in [TGPP33203].<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-9">
<section id="section-9">
      <h2 id="name-3gpp-references">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-3gpp-references" class="section-name selfRef">3GPP References</a>
      </h2>
<ul class="normal">
<li class="normal" id="section-9-1.1">TGPP23720 3GPP, "TR 23.720 v13.0.0 - Study on architecture enhancements for Cellular Internet of Things", 2016.<a href="#section-9-1.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-9-1.2">TGPP33203 3GPP, "TS 33.203 v13.1.0 - 3G security; Access security for IP-based services", 2016.<a href="#section-9-1.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-9-1.3">TGPP36321 3GPP, "TS 36.321 v13.2.0 - Evolved Universal Terrestrial Radio Access (E-UTRA); Medium Access Control (MAC) protocol specification", 2016<a href="#section-9-1.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-9-1.4">TGPP36323 3GPP, "TS 36.323 v13.2.0 - Evolved Universal Terrestrial Radio Access (E-UTRA); Packet Data Convergence Protocol (PDCP) specification", 2016.<a href="#section-9-1.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-9-1.5">TGPP36331 3GPP, "TS 36.331 v13.2.0 - Evolved Universal Terrestrial Radio Access (E-UTRA); Radio Resource Control (RRC); Protocol specification", 2016.<a href="#section-9-1.5" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-9-1.6">TGPP36300 3GPP, "TS 36.300 v15.1.0 - Evolved Universal Terrestrial Radio Access (E-UTRA) and Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall description; Stage 2", 2018<a href="#section-9-1.6" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-9-1.7">TGPP24301 3GPP "TS 24.301 v15.2.0 - Non-Access-Stratum (NAS) protocol for Evolved Packet System (EPS); Stage 3", 2018<a href="#section-9-1.7" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-9-1.8">TGPP24088 3GPP, "TS 24.088 v12.9.0 - Mobile radio interface Layer 3 specification;Core network protocols; Stage 3", 2015.<a href="#section-9-1.8" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="sect-10">
<section id="section-10">
      <h2 id="name-appendix">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-appendix" class="section-name selfRef">Appendix</a>
      </h2>
<div id="sect-10.1">
<section id="section-10.1">
        <h3 id="name-nb-iot-user-plane-protocol-">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-nb-iot-user-plane-protocol-" class="section-name selfRef">NB-IoT User Plane protocol architecture</a>
        </h3>
<div id="sect-10.1.1">
<section id="section-10.1.1">
          <h4 id="name-packet-data-convergence-pro">
<a href="#section-10.1.1" class="section-number selfRef">10.1.1. </a><a href="#name-packet-data-convergence-pro" class="section-name selfRef">Packet Data Convergence Protocol (PDCP)</a>
          </h4>
<p id="section-10.1.1-1">
   Each of the Radio Bearers (RB) is associated with one PDCP entity.
   Moreover, a PDCP entity is associated with one or two RLC entities
   depending on the unidirectional or bi-directional characteristics of
   the RB and RLC mode used.  A PDCP entity is associated with either a
   control plane or a user plane with independent configuration and
   functions.  The maximum supported size for NB-IoT of a PDCP SDU is
   1600 octets.  The primary services and functions of the PDCP sublayer
   for NB-IoT for the user plane include:<a href="#section-10.1.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-10.1.1-2.1">Header compression and decompression using ROHC (Robust Header
      Compression)<a href="#section-10.1.1-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-10.1.1-2.2">Transfer of user and control data to higher and lower layers<a href="#section-10.1.1-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-10.1.1-2.3">Duplicate detection of lower layer SDUs when re-establishing
      connection (when RLC with Acknowledge Mode in use for User Plane
      only)<a href="#section-10.1.1-2.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-10.1.1-2.4">Ciphering and deciphering<a href="#section-10.1.1-2.4" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-10.1.1-2.5">Timer-based SDU discard in uplink<a href="#section-10.1.1-2.5" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="sect-10.1.2">
<section id="section-10.1.2">
          <h4 id="name-radio-link-protocol-rlc">
<a href="#section-10.1.2" class="section-number selfRef">10.1.2. </a><a href="#name-radio-link-protocol-rlc" class="section-name selfRef">Radio Link Protocol (RLC)</a>
          </h4>
<p id="section-10.1.2-1">
   RLC is a layer-2 protocol that operates between the UE and the base
   station (eNB).  It supports the packet delivery from higher layers to
   MAC, creating packets transmitted over the air, optimizing the
   Transport Block utilization.  RLC flow of data packets is
   unidirectional, and it is composed of a transmitter located in the
   transmission device and a receiver located in the destination device.
   Therefore to configure bi-directional flows, two sets of entities,
   one in each direction (downlink and uplink), must be configured and
   effectively peered to each other.  The peering allows the
   transmission of control packets (ex., status reports) between
   entities.  RLC can be configured for data transfer in one of the
   following modes:<a href="#section-10.1.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-10.1.2-2.1">Transparent Mode (TM).  RLC does not segment or concatenate SDUs
      from higher layers in this mode and does not include any header to
      the payload.  RLC receives SDUs from upper layers when acting as a
      transmitter and transmits directly to its flow RLC receiver via
      lower layers.  Similarly, a TM RLC receiver would only deliver
      without processing the packets to higher layers upon reception.<a href="#section-10.1.2-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-10.1.2-2.2">Unacknowledged Mode (UM).  This mode provides support for
      segmentation and concatenation of payload.  The RLC packet's size
      depends on the indication given at a particular transmission
      opportunity by the lower layer (MAC) and is octets aligned.  The
      packet delivery to the receiver does not include reliability
      support, and the loss of a segment from a packet means a complete
      packet loss.  Also, in the case of lower layer retransmissions,
      there is no support for re-segmentation in case of change of the
      radio conditions triggering the selection of a smaller transport
      block.  Additionally, it provides PDU duplication detection and
      discards, reordering of out-of-sequence, and loss detection.<a href="#section-10.1.2-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-10.1.2-2.3">Acknowledged Mode (AM).  In addition to the same functions
      supported by UM, this mode also adds a moving windows-based
      reliability service on top of the lower layer services.  It also
      supports re-segmentation, and it requires bidirectional
      communication to exchange acknowledgment reports called RLC Status
      Report and trigger retransmissions.  This model also supports
      protocol error detection.  The mode used depends on the operator
      configuration for the type of data to be transmitted.  For
      example, data transmissions supporting mobility or requiring high
      reliability would be most likely configured using AM.  Meanwhile,
      streaming and real-time data would be mapped to a UM
      configuration.<a href="#section-10.1.2-2.3" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="sect-10.1.3">
<section id="section-10.1.3">
          <h4 id="name-medium-access-control-mac">
<a href="#section-10.1.3" class="section-number selfRef">10.1.3. </a><a href="#name-medium-access-control-mac" class="section-name selfRef">Medium Access Control (MAC)</a>
          </h4>
<p id="section-10.1.3-1">
   MAC provides a mapping between the higher layers abstraction called
   Logical Channels comprised by the previously described protocols to
   the Physical layer channels (transport channels).  Additionally, MAC
   may multiplex packets from different Logical Channels and prioritize
   what to fit into one Transport Block if there is data and space
   available to maximize data transmission efficiency.  MAC also
   provides error correction and reliability support through HARQ,
   transport format selection, and scheduling information reporting from
   the terminal to the network.  MAC also adds the necessary padding and
   piggyback control elements when possible and the higher layers data.<a href="#section-10.1.3-1" class="pilcrow">¶</a></p>
<span id="name-example-of-user-plane-packe"></span><div id="ure-example-of-user-plane-packet-encapsulation-for-two-transport-blocks">
<figure id="figure-5">
            <div class="alignLeft art-text artwork" id="section-10.1.3-2.1">
<pre>
                                            &lt;Max. 1600 bytes&gt;
                    +---+         +---+           +------+
Application         |AP1|         |AP1|           |  AP2 |
(IP/non-IP)         |PDU|         |PDU|           |  PDU |
                    +---+         +---+           +------+
                    |   |         |   |           |      |
PDCP           +--------+    +--------+      +-----------+
               |PDCP|AP1|    |PDCP|AP1|      |PDCP|  AP2 |
               |Head|PDU|    |Head|PDU|      |Head|  PDU |
               +--------+    +--------+      +--------+--\
               |    |   |    |     |  |      |    |   |\  `----\
         +---------------------------+      |    |(1)| `-----\(2)'-\
RLC      |RLC |PDCP|AP1|RLC |PDCP|AP1| +-------------+    +----|---+
         |Head|Head|PDU|Head|Head|PDU| |RLC |PDCP|AP2|    |RLC |AP2|
         +-------------|-------------+ |Head|Head|PDU|    |Head|PDU|
         |         |   |         |   | +---------|---+    +--------+
         |         |   | LCID1   |   | /         /   /   /         /
        /         /   /        _/  _//        _/  _/    / LCID2   /
        |        |   |        |   | /       _/  _/     /      ___/
        |        |   |        |   ||       |   |      /      /
    +------------------------------------------+ +-----------+---+
MAC |MAC|RLC|PDCP|AP1|RLC|PDCP|AP1|RLC|PDCP|AP2| |MAC|RLC|AP2|Pad|
    |Hea|Hea|Hea |PDU|Hea|Hea |PDU|Hea|Hea |PDU| |Hea|Hea|PDU|din|
    |der|der|der |   |der|der |   |der|der |   | |der|der|   |g  |
    +------------------------------------------+ +-----------+---+
                      TB1                               TB2
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-example-of-user-plane-packe" class="selfRef">Example of User Plane packet encapsulation for two transport blocks</a>
            </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="sect-10.2">
<section id="section-10.2">
        <h3 id="name-nb-iot-data-over-nas-donas">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-nb-iot-data-over-nas-donas" class="section-name selfRef">NB-IoT Data over NAS (DoNAS)</a>
        </h3>
<p id="section-10.2-1">
   The Access Stratum (AS) protocol stack used by DoNAS is somehow
   particular.  Since the security associations are not established yet
   in the radio network, to reduce the protocol overhead, PDCP (Packet
   Data Convergence Protocol) is bypassed until AS security is
   activated.  RLC (Radio Link Control protocol) uses by default the AM
   mode, but depending on the network's features and the terminal, it
   may change to other modes by the network operator.  For example, the
   transparent mode does not add any header or process the payload to
   reduce the overhead, but the MTU would be limited by the transport
   block used to transmit the data, which is a couple of thousand bits
   maximum.  If UM (only Release 15 compatible terminals) is used, the
   RLC mechanisms of reliability are disabled, and only the reliability
   provided by the MAC layer by Hybrid Automatic Repeat reQuest (HARQ)
   is available.  In this case, the protocol overhead might be smaller
   than the AM case because of the lack of status reporting but with the
   same support for segmentation up to 16000 Bytes.  NAS packets are
   encapsulated within an RRC (Radio Resource Control) TGPP36331
   message.<a href="#section-10.2-1" class="pilcrow">¶</a></p>
<p id="section-10.2-2">
   Depending on the data type indication signaled (IP or non-IP data),
   the network allocates an IP address or establishes a direct
   forwarding path.  DoNAS is regulated under rate control upon previous
   agreement, meaning that a maximum number of bits per unit of time is
   agreed upon per device subscription beforehand and configured in the
   device.  The use of DoNAS is typically expected when a terminal in a
   power-saving state requires a short transmission and receiving an
   acknowledgment or short feedback from the network.  Depending on the
   size of buffered data to transmit, the UE might be instructed to
   deploy the connected mode transmissions instead, limiting and
   controlling the DoNAS transmissions to predefined thresholds and a
   good resource optimization balance for the terminal the network.  The
   support for mobility of DoNAS is present but produces additional
   overhead.<a href="#section-10.2-2" class="pilcrow">¶</a></p>
<span id="name-donas-transmission-sequence"></span><div id="ure-donas-transmission-sequence-from-an-uplink-initiated-access">
<figure id="figure-6">
          <div class="alignLeft art-text artwork" id="section-10.2-3.1">
<pre>
    +--------+   +--------+   +--------+
    |        |   |        |   |        |       +-----------------+
    |   UE   |   |  C-BS  |   |  C-SGN |       |Roaming Scenarios|
    +----|---+   +--------+   +--------+       |  +--------+     |
         |            |            |           |  |        |     |
     +----------------|------------|+          |  |  P-GW  |     |
     |        Attach                |          |  +--------+     |
     +------------------------------+          |       |         |
         |            |            |           |       |         |
  +------|------------|--------+   |           |       |         |
  |RRC Connection Establishment|   |           |       |         |
  |with NAS PDU transmission   |   |           |       |         |
  |&amp; Ack Rsp                   |   |           |       |         |
  +----------------------------+   |           |       |         |
         |            |            |           |       |         |
         |            |Initial UE  |           |       |         |
         |            |message     |           |       |         |
         |            |-----------&gt;|           |       |         |
         |            |            |           |       |         |
         |            | +---------------------+|       |         |
         |            | |Checks Integrity     ||       |         |
         |            | |protection, decrypts ||       |         |
         |            | |data                 ||       |         |
         |            | +---------------------+|       |         |
         |            |            |       Small data packet     |
         |            |            |-------------------------------&gt;
         |            |            |       Small data packet     |
         |            |            |&lt;-------------------------------
         |            | +----------|---------+ |       |         |
         |            | Integrity protection,| |       |         |
         |            | encrypts data        | |       |         |
         |            | +--------------------+ |       |         |
         |            |            |           |       |         |
         |            |Downlink NAS|           |       |         |
         |            |message     |           |       |         |
         |            |&lt;-----------|           |       |         |
 +-----------------------+         |           |       |         |
 |Small Data Delivery,   |         |           |       |         |
 |RRC connection release |         |           |       |         |
 +-----------------------+         |           |       |         |
                                               |                 |
                                               |                 |
                                               +-----------------+
</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-donas-transmission-sequence" class="selfRef">DoNAS transmission sequence from an Uplink initiated access</a>
          </figcaption></figure>
</div>
<span id="name-example-of-user-plane-packet"></span><div id="ure-example-of-user-plane-packet-encapsulation-for-data-over-nas">
<figure id="figure-7">
          <div class="alignLeft art-text artwork" id="section-10.2-4.1">
<pre>
                   +---+ +---+ +---+                  +----+
 Application       |AP1| |AP1| |AP2|                  |AP2 |
(IP/non-IP)        |PDU| |PDU| |PDU|  ............... |PDU |
                   +---+ +---+ +---+                  +----+
                   |   |/   /  |    \                 |    |
NAS /RRC      +--------+---|---+----+            +---------+
              |NAS/|AP1|AP1|AP2|NAS/|            |NAS/|AP2 |
              |RRC |PDU|PDU|PDU|RRC |            |RRC |PDU |
              +--------+-|-+---+----+            +---------|
              |          |\         |            |         |
              |&lt;--Max. 1600 bytes--&gt;|__          |_        |
              |          |  \__        \___        \_       \_
              |          |     \           \         \__      \_
         +---------------|+-----|----------+             \      \
RLC      |RLC | NAS/RRC  ||RLC  | NAS/RRC  |       +----|-------+
         |Head|  PDU(1/2)||Head | PDU (2/2)|       |RLC |NAS/RRC|
         +---------------++----------------+       |Head|PDU    |
         |    |          | \               |       +------------+
         |    |    LCID1 |  \              |       |           /
         |    |          |   \              \      |           |
         |    |          |    \              \     |           |
         |    |          |     \              \     \          |
    +----+----+----------++-----|----+---------++----+---------|---+
MAC |MAC |RLC |    RLC   ||MAC  |RLC |  RLC    ||MAC |  RLC    |Pad|
    |Head|Head|  PAYLOAD ||Head |Head| PAYLOAD ||Head|  PDU    |   |
    +----+----+----------++-----+----+---------++----+---------+---+
             TB1                   TB2                     TB3
</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-example-of-user-plane-packet" class="selfRef">Example of User Plane packet encapsulation for Data over NAS</a>
          </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<section id="section-11">
      <h2 id="name-normative-references">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="RFC5795">[RFC5795]</dt>
      <dd>
<span class="refAuthor">Sandlund, K.</span>, <span class="refAuthor">Pelletier, G.</span>, and <span class="refAuthor">L-E. Jonsson</span>, <span class="refTitle">"The RObust Header Compression (ROHC) Framework"</span>, <span class="seriesInfo">RFC 5795</span>, <span class="seriesInfo">DOI 10.17487/RFC5795</span>, <time datetime="2010-03" class="refDate">March 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5795">https://www.rfc-editor.org/info/rfc5795</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8376">[RFC8376]</dt>
      <dd>
<span class="refAuthor">Farrell, S., Ed.</span>, <span class="refTitle">"Low-Power Wide Area Network (LPWAN) Overview"</span>, <span class="seriesInfo">RFC 8376</span>, <span class="seriesInfo">DOI 10.17487/RFC8376</span>, <time datetime="2018-05" class="refDate">May 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8376">https://www.rfc-editor.org/info/rfc8376</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8724">[RFC8724]</dt>
    <dd>
<span class="refAuthor">Minaburo, A.</span>, <span class="refAuthor">Toutain, L.</span>, <span class="refAuthor">Gomez, C.</span>, <span class="refAuthor">Barthel, D.</span>, and <span class="refAuthor">JC. Zuniga</span>, <span class="refTitle">"SCHC: Generic Framework for Static Context Header Compression and Fragmentation"</span>, <span class="seriesInfo">RFC 8724</span>, <span class="seriesInfo">DOI 10.17487/RFC8724</span>, <time datetime="2020-04" class="refDate">April 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8724">https://www.rfc-editor.org/info/rfc8724</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Edgar Ramos</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div dir="auto" class="left"><span class="street-address">Hirsalantie 11<br>02420 Jorvas, Kirkkonummi<br>Finland</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:edgar.ramos@ericsson.com" class="email">edgar.ramos@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ana Minaburo</span></div>
<div dir="auto" class="left"><span class="org">Acklio</span></div>
<div dir="auto" class="left"><span class="street-address">1137A Avenue des Champs Blancs<br>35510 Cesson-Sevigne Cedex<br>France</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ana@ackl.io" class="email">ana@ackl.io</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
