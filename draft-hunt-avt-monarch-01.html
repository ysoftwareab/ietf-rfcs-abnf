<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Monitoring Architectures for RTP</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Monitoring Architectures for RTP">
<meta name="keywords" content="RFC, Request for Comments, I-D, Internet-Draft, Real Time Control Protocol">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Audio/Video Transport Working</td><td class="header">G. Hunt</td></tr>
<tr><td class="header">Group</td><td class="header">P. Arden</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">BT</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">May 18, 2010</td></tr>
<tr><td class="header">Expires: November 19, 2010</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Monitoring Architectures for RTP<br />draft-hunt-avt-monarch-01.txt</h1>

<h3>Abstract</h3>

<p>
This memo proposes an architecture for extending RTCP with a new RTCP XR (RFC3611) block type to report new metrics 
regarding media transmission or reception quality, as proposed in draft-ietf-avt-rtcp-guidelines 
(work in progress [replace with RFC number]). This memo suggests that a new block should contain a single metric or a 
small number of metrics 
relevant to a single parameter of interest or concern, rather than containing a number of metrics which attempt to 
provide full coverage of all those parameters of concern to a specific application. Applications may then 
"mix and match" to create a set of blocks which covers their set of concerns. Where possible, a specific block should 
be designed to be re-usable across more than one application, for example, for all of voice, streaming audio and video.
	
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on November 19, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#anchor1">2.</a>&nbsp;
Requirements notation<br />
<a href="#smallblock">3.</a>&nbsp;
Using small blocks<br />
<a href="#identity">4.</a>&nbsp;
The identity block<br />
<a href="#example">5.</a>&nbsp;
An example of a metric block<br />
<a href="#txlat">6.</a>&nbsp;
Application to translators<br />
<a href="#topologies">7.</a>&nbsp;
Application to RFC 5117 topologies<br />
<a href="#expansion">8.</a>&nbsp;
Expanding the RTCP XR block namespace<br />
<a href="#anchor2">9.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor3">10.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">11.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
Any proliferation of metrics for transport and application quality 
monitoring has been identified as a potential problem for RTP/RTCP interoperability. 
Different applications layered on RTP may have some monitoring 
requirements in common, which should be satisfied by a common design. The objective 
here is to define an extensible framework and a small number of re-usable 
metrics to reduce implementation costs and to maximise 
inter-operability. Work-in-progress on <a class='info' href='#GUIDELINES'>[GUIDELINES]<span> (</span><span class='info'>Ott, J., &ldquo;Guidelines for Extending the RTP Control Protocol (RTCP),&rdquo; February&nbsp;2010.</span><span>)</span></a> has stated 
that, where RTCP is to be extended with a new metric, the preferred mechanism is by the
addition of a new RTCP XR <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a> block. This memo assumes that any 
requirement for a new metric to be transported in RTCP will use a new RTCP XR block.

</p>
<p>
<a class='info' href='#GUIDELINES'>[GUIDELINES]<span> (</span><span class='info'>Ott, J., &ldquo;Guidelines for Extending the RTP Control Protocol (RTCP),&rdquo; February&nbsp;2010.</span><span>)</span></a> provides advice on when and how new metrics should be introduced, 
including recommending that 
metrics are based on existing standards whenever possible.

</p>
<p>
<a class='info' href='#smallblock'>Section&nbsp;3<span> (</span><span class='info'>Using small blocks</span><span>)</span></a> describes the key proposal of this memo, the use of small metrics 
blocks each of which addresses a single parameter of interest which may be "mixed and matched", rather 
than providing a large block to address all the parameters which might be of interest to a broad class
of applications (for example, all VoIP applications).

</p>
<p>
<a class='info' href='#identity'>Section&nbsp;4<span> (</span><span class='info'>The identity block</span><span>)</span></a> describes an optimisation to avoid repetition of identification information, 
which becomes desirable when small blocks are used.

</p>
<p>
<a class='info' href='#example'>Section&nbsp;5<span> (</span><span class='info'>An example of a metric block</span><span>)</span></a> provides an example of the application of these principles to a specific case, 
that of a metric block to report packet delay variation.

</p>
<p>
<a class='info' href='#txlat'>Section&nbsp;6<span> (</span><span class='info'>Application to translators</span><span>)</span></a> draws attention to the guidance in <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> concerning RTCP and 
translators.

</p>
<p>
<a class='info' href='#topologies'>Section&nbsp;7<span> (</span><span class='info'>Application to RFC 5117 topologies</span><span>)</span></a> discusses the potential application of RTCP XR metrics blocks to the 
conferencing topologies discussed in <a class='info' href='#RFC5117'>[RFC5117]<span> (</span><span class='info'>Westerlund, M., &ldquo;RTP Topologies,&rdquo; January&nbsp;2008.</span><span>)</span></a>.

</p>
<p>
<a class='info' href='#expansion'>Section&nbsp;8<span> (</span><span class='info'>Expanding the RTCP XR block namespace</span><span>)</span></a> consists (in this draft) only of an "Editor's note" asking whether the limited 
namespace available for RTCP XR blocks is a concern, and if so whether it would be desirable to work on a 
standardised means to expand it.

</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Requirements notation</h3>

<p>
This memo is informative and as such contains no normative requirements.

</p>
<a name="smallblock"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Using small blocks</h3>

<p>
Different applications using RTP for media transport certainly have differing requirements for metrics transported in RTCP 
to support their operation. For many applications, the basic metrics for transport impairments provided in RTCP SR and RR 
packets <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> (together with source identification provided in RTCP SDES packets) are sufficient. For 
other applications additional metrics may be required or at least sufficiently useful to justify the overheads, both of 
processing in endpoints and of increased session bandwidth. For example an IPTV application using Forward 
Error Correction (FEC) might use either a metric of post-repair loss or a metric giving detailed information about 
pre-repair loss bursts to optimise payload bandwidth and the strength of FEC required for 
changing network conditions. However there are many metrics available. It is likely that different applications or classes 
of applications will wish to use different metrics. Any one application is likely to require metrics for more than one 
parameter but if this is the case, different applications will almost certainly require different combinations of metrics. 
If larger blocks are defined containing multiple metrics to address the needs of each 
application, it becomes likely that many different such larger blocks are defined, which becomes a danger to interoperability.

</p>
<p>
To avoid this pitfall, this memo proposes the use of small RTCP XR metrics blocks each containing a very small number of 
individual metrics characterising only one parameter of interest to an application running over RTP. For example, at the RTP 
transport layer, the parameter of interest might be packet delay variation, and specifically the metric "IPDV" defined by 
<a class='info' href='#Y1540'>[Y1540]<span> (</span><span class='info'>ITU-T, &ldquo;ITU-T Rec. Y.1540, IP packet transfer and availability performance parameters,&rdquo; November&nbsp;2007.</span><span>)</span></a>. See <a class='info' href='#example'>Section&nbsp;5<span> (</span><span class='info'>An example of a metric block</span><span>)</span></a> for architectural considerations for a metrics block, using as an example a metrics 
block to report packet delay variation.

</p>
<a name="identity"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
The identity block</h3>

<p>
Any measurement must be identified. However if metrics are delivered in small blocks
there is a danger of inefficiency arising from repeating this information in a number of metrics blocks within the same RTCP 
packet, in cases where the same identification information applies to multiple metrics blocks.

</p>
<p>
An instance of a metric must be identified using information which is likely to include most of the following:

</p>
<p>
</p>
<ul class="text">
<li>
the node at which it was measured,

</li>
<li>
the source of the measured stream (for example, its CNAME),

</li>
<li>
the SSRC of the measured stream, 

</li>
<li>
   the sequence number of the first packet of the RTP session,

</li>
<li>
   the extended sequence numbers of the first packet of the current
measurement interval, and the last packet included in the
   measurement,

</li>
<li>
the duration of the most recent measurement interval and 

</li>
<li>
   the duration of the interval applicable to cumulative measurements
   (which may be the duration of the RTP session to date).

</li>
</ul><p>

</p>
<p>
[Editor's note: this set of information overlaps with, but is more extensive than, that in the union of similar 
information in RTCP RR packets. Should we assume that RR information is always present if XR is sent, and that 
measurement 
intervals are exactly coincident? If so, state assumption and remove overlaps. What were the design considerations
which led to the additional information *not* being present in RRs? The reason for the additional information here is 
the perceived difficulty of "locating" the *start* of the RTP session (sequence number of 1st packet, duration of 
interval applicable to cumulative measurements) using only RR. Is this a misconception? It leads to redundant 
information in this design because equivalent information is provided multiple times, once in *every* identification 
packet. Though this ensures immunity to packet loss, the design is ugly and the overhead is not completely trivial.]

</p>
<p>
This section proposes an approach to minimise 
the inefficiency of providing this identification information, assuming that an architecture based on small blocks means
that a typical RTCP packet will contain more 
than one metrics
block needing the same identification. The choice of identification information to be provided 
is discussed in <a class='info' href='#IDENTITY'>[IDENTITY]<span> (</span><span class='info'>Hunt, G., &ldquo;RTCP XR Report Block for Measurement Identity,&rdquo; May&nbsp;2009.</span><span>)</span></a> (work in progress).

</p>
<p>
The approach is to define a stand-alone block containing only identification 
information, and to tag this identification block with a number which is unique within the scope of the containing RTCP 
XR packet. The "containing RTCP XR packet" is defined here as the RTCP XR header with PT=XR=207 defined in Section 2 of 
<a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a> and the associated payload defined by the length field of this RTCP XR header. The RTCP XR 
header itself 
includes the SSRC of the node at which all of the contained metrics were measured, hence this SSRC need not be repeated
in the stand-alone identification block. A single containing RTCP XR packet may contain multiple identification blocks 
limited by the range of the tag field. Typically there will be one identification block per monitored source SSRC, but 
the use of more than one identification block for a single monitored source SSRC within a single containing RTCP XR 
packet is not ruled out.

</p>
<p>
There will be zero or more metrics blocks dependent on each identification block. The dependence of an instance of a 
metrics block on an identification block is established by the metrics block's having the same numeric value of the 
tag field as its identification block (in the same containing RTCP XR packet). 

</p>
<p>
<a class='info' href='#identfigure'>Figure&nbsp;1<span> (</span><span class='info'>RTCP XR block with identity blocks</span><span>)</span></a> below illustrates this principle using as an example an RTCP XR packet containing four 
metrics blocks, reporting on streams from two sources. The measurement identity information is provided in two blocks with 
Block Type NMI, and tag values 0 and 1 respectively. 

</p>
<p>
Note: in this example, RTCP XR block type values for four proposed new block types (work in progress) are given 
as NMI, NPDV, NBGL and NDEL. These represent numeric block type codepoints to be allocated by IANA at the conclusion of the work.

</p>
<p>
Each of these two identity blocks will specify the SSRC of one of the 
monitored streams, as well as information about the span of the measurement. There are two metrics blocks with tag=0 
indicating their association with the measurement identity block which also has tag=0. These are the two blocks following 
the identity block with tag=0, though this positioning is not mandatory. There are also two metrics blocks with tag=1 
indicating their association with the measurement identity block which also has tag=1, and these are the two blocks following 
the identity block with tag=1.

</p>
<p>
[Editor's note: if we mandated that metrics blocks associated with an identity block must always follow the identity
block we could save the tag field and possibly simplify processing. Is this preferable to cross-referencing with a
numeric tag?]

</p>
<p>
In the example, the block types of the metrics blocks associated with tag=0 are BT=NPDV (a PDV metrics block) and BT=NBGL
(a burst and gap loss metrics block). The block types of the metrics blocks associated with tag=1 are BT=NPDV 
(a second PDV metrics block) and BT=NDEL (a delay metrics block). This illustrates that:

</p>
<p>
</p>
<ul class="text">
<li>
multiple instances of the 
same metrics block may occur within a containing RTCP XR packet, associated with different identification information, 
and

</li>
<li>
differing measurements may be made, and reported, for the different streams arriving at an RTP system.

</li>
</ul><p>

</p><br /><hr class="insert" />
<a name="identfigure"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |V=2|P|reserved |   PT=XR=207   |             length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  SSRC of RTCP XR packet sender                |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     BT=NMI    |0|tag=0| resv  |        block length           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  SSRC of stream source 1                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .      ...measurement identity information, source 1...         .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     BT=NPDV   |I|tag=0|pdvtyp |        block length           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .               ...PDV information for source 1...              .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    BT=NBGL    |I|tag=0| resv  |        block length           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .            ...burst-gap-loss information for source 1...      .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     BT=NMI    |0|tag=1| resv  |        block length           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  SSRC of stream source 2                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .      ...measurement identity information, source 2...         .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     BT=NPDV   |I|tag=1|pdvtyp |        block length           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .              ...PDV information for source 2...               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    BT=NDEL    |I|tag=1| resv  |        block length           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .             ...delay information for source 2...              .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: RTCP XR block with identity blocks&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
This approach of separating the identification information is more costly than providing identification in each metrics 
block if only a single metrics block is sent 
in an RTCP packet, but becomes beneficial as soon as more than one metrics block shares common identification.

</p>
<a name="example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
An example of a metric block</h3>

<p>
This section uses the example of an existing proposed metrics block to illustrate the application of the principles set out in 
<a class='info' href='#smallblock'>Section&nbsp;3<span> (</span><span class='info'>Using small blocks</span><span>)</span></a>.

</p>
<p>
The example <a class='info' href='#PDV'>[PDV]<span> (</span><span class='info'>Hunt, G., &ldquo;RTCP XR Report Block for Packet Delay Variation Metric Reporting,&rdquo; May&nbsp;2009.</span><span>)</span></a> (work in progress) is a block to convey information about packet delay variation (PDV) only, consistent with the principle that a 
metrics block should address only one parameter of interest. One simple metric of PDV is available in the 
RTCP RR packet as the "jit" field. There are other PDV metrics which may be more useful to certain applications. Two such 
metrics are the IPDV metric (<a class='info' href='#Y1540'>[Y1540]<span> (</span><span class='info'>ITU-T, &ldquo;ITU-T Rec. Y.1540, IP packet transfer and availability performance parameters,&rdquo; November&nbsp;2007.</span><span>)</span></a>, <a class='info' href='#RFC3393'>[RFC3393]<span> (</span><span class='info'>Demichelis, C., &ldquo;IP Packet Delay Variation Metric for IP Performance Metrics (IPPM),&rdquo; November&nbsp;2002.</span><span>)</span></a>) and the MAPDV2 metric 
<a class='info' href='#G1020'>[G1020]<span> (</span><span class='info'>ITU-T, &ldquo;ITU-T Rec. G.1020, Performance parameter definitions for quality of speech and         other voiceband applications utilizing IP networks,&rdquo; July&nbsp;2006.</span><span>)</span></a>. Use of these metrics is consistent with the principle in 
Section 5 of <a class='info' href='#GUIDELINES'>[GUIDELINES]<span> (</span><span class='info'>Ott, J., &ldquo;Guidelines for Extending the RTP Control Protocol (RTCP),&rdquo; February&nbsp;2010.</span><span>)</span></a> that metrics should usually be defined elsewhere, so that RTCP standards define 
only the transport of the metric rather than its nature. The purpose of this section is to illustrate the architecure using the example of 
<a class='info' href='#PDV'>[PDV]<span> (</span><span class='info'>Hunt, G., &ldquo;RTCP XR Report Block for Packet Delay Variation Metric Reporting,&rdquo; May&nbsp;2009.</span><span>)</span></a> (work in progress) rather than to document 
the design of the PDV metrics block or to provide a tutorial on PDV in general.

</p>
<p>
Given the availability of at least three metrics for PDV, there are design options for the allocation of metrics to RTCP XR blocks:

</p>
<p>
</p>
<ul class="text">
<li>
provide an RTCP XR block per metric

</li>
<li>
provide a single RTCP XR block which contains all three metrics

</li>
<li>
provide a single RTCP block to convey any one of the three metrics, together with a identifier to inform the receiving RTP system 
of the specific metric being conveyed

</li>
</ul><p>

</p>
<p>
In choosing between these options, extensibility is important, because additional metrics of PDV may well be 
standardised and require inclusion in this framework. 
The first option is extensible but only by use of 
additional RTCP XR blocks, which may consume the limited namespace for RTCP XR blocks at an unacceptable rate. The second option is 
not extensible, so could be rejected on that basis, but in any case a single application is quite unlikely to require transport of 
more than one metric for PDV. Hence the third option was chosen. This implies the creation of a subsidiary namespace to 
enumerate the PDV metrics which may be transported by this block, as discussed further in <a class='info' href='#PDV'>[PDV]<span> (</span><span class='info'>Hunt, G., &ldquo;RTCP XR Report Block for Packet Delay Variation Metric Reporting,&rdquo; May&nbsp;2009.</span><span>)</span></a> (work in progress).

</p>
<a name="txlat"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Application to translators</h3>

<p>
Section 7.2 of <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> describes processing of RTCP by translators. RTCP XR is within the scope of the recommendations of 
<a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>. Some RTCP XR metrics blocks may usefully be measured at, and reported by, translators. As described in 
<a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> 
this creates a requirement for the translator to allocate an SSRC for itself so that it may populate the SSRC in the RTCP XR 
packet header (although the translator is not a Synchronisation Source in the sense of originating RTP media packets). It must also supply 
this SSRC and the corresponding CNAME in RTCP SDES packets.

</p>
<p>
In RTP sessions where one or more translators generate any RTCP traffic towards their next-neighbour RTP system, other translators 
in the session have a choice as to whether 
they forward a translator's RTCP packets. Forwarding may provide additional information to other RTP systems in the connection but 
increases RTCP bandwidth and may in some cases present a security risk. RTP translators may have forwarding behaviour based on local 
policy, which might differ between different interfaces of the same translator.

</p>
<p>
[Editor's note: for bidirectional unicast, an RTP system may usually detect RTCP from a translator by noting that the sending 
SSRC is not present in any RTP media packet. However even for bidirectional unicast there is a possibility of a source sending 
RTCP before it has sent any RTP media (leading to transient mis-categorisation of an RTP end system or RTP mixer as a translator), 
and for multicast sessions - or unidirectional/streaming unicast - there is a possibility of a receive-only end system being 
permanently mis-categorised as a translator. Is there a need for a translator to declare itself explicitly? Needs further 
thought.]

</p>
<a name="topologies"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Application to RFC 5117 topologies</h3>

<p>
An RTP system (end system, mixer or translator) which originates, terminates or forwards RTCP XR blocks is expected to handle 
RTCP, including RTCP XR, as specified in <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> for that class of RTP systems. Provided this expectation is met, an RTP 
system using RTCP XR is architecturally no different from an RTP system of the same class (end system, mixer, or translator) 
which does not use RTCP XR. This statement applies to the topologies investigated in <a class='info' href='#RFC5117'>[RFC5117]<span> (</span><span class='info'>Westerlund, M., &ldquo;RTP Topologies,&rdquo; January&nbsp;2008.</span><span>)</span></a>, where they use RTP end systems, 
RTP mixers and RTP translators as these classes are defined in <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>.

</p>
<p>
These topologies are specifically Topo-Point-to-Point, Topo-Multicast, Topo-Translator (both variants, Topo-Trn-Translator and 
Topo-Media-Translator, and combinations of the two), and Topo-Mixer.

</p>
<p>
The topologies based on systems which do not behave according to <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>, that is Topo-Video-Switch-MCU and 
Topo-RTCP-terminating-MCU, suffer from the difficulties described in [RFC5117]. These difficulties apply to systems sending, 
and expecting to receive, RTCP XR blocks as much as to systems using other RTCP packet types. 
For example, a participant RTP end system may send media to a video switch MCU. If the media stream 
is not selected for forwarding by the switch, neither RTCP RR packets nor RTCP XR blocks referring to the end system's generated 
stream will be received at the RTP end system. Strictly the RTP end system can only conclude that its RTP has been lost in the 
network, though an RTP end system complying with the robustness principle of [RFC1122] should survive with essential functions 
unimpaired.

</p>
<a name="expansion"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Expanding the RTCP XR block namespace</h3>

<p>
[Editor's note: the RTCP XR block namespace is limited by the 8-bit block type field in the RTCP XR header 
(Section 3 of <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a>). IESG have noted that this is potentially restrictive. It would be 
possible to standardise an expansion mechanism, probably based on use of a new field near the start of the 
variable-length "type-specific block contents" field. Clearly this could apply only to new block types, so 
might be standardised to apply to some subrange of the current 8-bit range, for example the range 128 through 191 
might be used. At time of writing, block types 
12 to 254 are unassigned and 255 is reserved for future expansion. Is there a consensus for, or against, work 
to allow expansion? One potential use is through hierarchical control, where one or a few codepoints at the top 
level are given to other SDOs who may then define a number of metrics distinguished by values in the (so far 
hypothetical) new field.]

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
IANA Considerations</h3>

<p>None.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Security Considerations</h3>

<p>
This document itself contains no normative text and hence should not give rise
to any new security considerations, to be confirmed.

</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="G1020">[G1020]</a></td>
<td class="author-text">ITU-T, &ldquo;ITU-T Rec. G.1020, Performance parameter definitions for quality of speech and
        other voiceband applications utilizing IP networks,&rdquo; July&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="GUIDELINES">[GUIDELINES]</a></td>
<td class="author-text">Ott, J., &ldquo;Guidelines for Extending the RTP Control Protocol (RTCP),&rdquo; ID&nbsp;draft-ott-avt-rtcp-guidelines-03, February&nbsp;2010.</td></tr>
<tr><td class="author-text" valign="top"><a name="IDENTITY">[IDENTITY]</a></td>
<td class="author-text">Hunt, G., &ldquo;RTCP XR Report Block for Measurement Identity,&rdquo; ID&nbsp;draft-ietf-avt-rtcp-xr-meas-identity-02, May&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="PDV">[PDV]</a></td>
<td class="author-text">Hunt, G., &ldquo;RTCP XR Report Block for Packet Delay Variation Metric Reporting,&rdquo; ID&nbsp;draft-ietf-avt-rtcp-xr-pdv-03, May&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1122">[RFC1122]</a></td>
<td class="author-text">Braden, R., &ldquo;<a href="http://tools.ietf.org/html/rfc1122">Requirements for Internet Hosts -- Communication Layers</a>,&rdquo; RFC&nbsp;1122, October&nbsp;1989.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3393">[RFC3393]</a></td>
<td class="author-text">Demichelis, C., &ldquo;<a href="http://tools.ietf.org/html/rfc3393">IP Packet Delay Variation Metric for IP Performance Metrics (IPPM)</a>,&rdquo; RFC&nbsp;3393, November&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3550">[RFC3550]</a></td>
<td class="author-text">Schulzrinne, H., &ldquo;<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>,&rdquo; RFC&nbsp;3550, July&nbsp;2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3611">[RFC3611]</a></td>
<td class="author-text">Friedman, T., &ldquo;<a href="http://tools.ietf.org/html/rfc3611">RTP Control Protocol Extended Reports (RTCP XR)</a>,&rdquo; RFC&nbsp;3611, November&nbsp;2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5117">[RFC5117]</a></td>
<td class="author-text">Westerlund, M., &ldquo;<a href="http://tools.ietf.org/html/rfc5117">RTP Topologies</a>,&rdquo; RFC&nbsp;5117, January&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Y1540">[Y1540]</a></td>
<td class="author-text">ITU-T, &ldquo;ITU-T Rec. Y.1540, IP packet transfer and availability performance parameters,&rdquo; November&nbsp;2007.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Geoff Hunt</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">BT</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Orion 1 PP2</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Adastral Park</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martlesham Heath</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ipswich, Suffolk  IP5 3RE</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">United Kingdom</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+44 1473 651704</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:geoff.hunt@bt.com">geoff.hunt@bt.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Philip Arden</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">BT</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Orion 3/7 PP4</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Adastral Park</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martlesham Heath</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ipswich, Suffolk  IP5 3RE</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">United Kingdom</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+44 1473 644192</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:philip.arden@bt.com">philip.arden@bt.com</a></td></tr>
</table>
</body></html>
