



LSR Working Group                                                 X. Min
Internet-Draft                                                  Z. Zhang
Intended status: Standards Track                               ZTE Corp.
Expires: 19 August 2022                                         W. Cheng
                                                            China Mobile
                                                        15 February 2022


  Signaling Flow-ID Label Capability and Flow-ID Readable Label Depth
                     draft-xzc-lsr-mpls-flc-frld-00

Abstract

   Flow-ID Label (FL) is used for MPLS flow identification and flow-
   based performance measurement with alternate marking method.  The
   ability to process Flow-ID labels is called Flow-ID Label Capability
   (FLC), and the capability of reading the maximum label stack depth
   and performing FL-based performance measurement is called Flow-ID
   Readable Label Depth (FRLD).  This document defines a mechanism to
   signal the FLC and the FRLD using IGP and BGP-LS.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 19 August 2022.

Copyright Notice

   Copyright (c) 2022 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components



Min, et al.              Expires 19 August 2022                 [Page 1]

Internet-Draft           Signaling FLC and FRLD            February 2022


   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Advertising FLC Using IGP . . . . . . . . . . . . . . . . . .   3
     2.1.  Advertising FLC Using IS-IS . . . . . . . . . . . . . . .   3
     2.2.  Advertising FLC Using OSPF  . . . . . . . . . . . . . . .   3
   3.  Advertising FRLD Using IGP  . . . . . . . . . . . . . . . . .   4
   4.  Signaling FLC and FRLD in BGP-LS  . . . . . . . . . . . . . .   4
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   4
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   7.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   5
   8.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   5
     8.1.  Normative References  . . . . . . . . . . . . . . . . . .   5
     8.2.  Informative References  . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   As specified in [I-D.ietf-mpls-inband-pm-encapsulation], Flow-ID
   Label (FL) is used for MPLS flow identification and flow-based
   performance measurement with alternate marking method.

   Flow-ID Label may appear multiple times in a label stack with
   variable depth, so both the Flow-ID Label Capability (FLC) and the
   Flow-ID Readable Label Depth (FRLD) are defined in
   [I-D.ietf-mpls-inband-pm-encapsulation].

   Analogous to [RFC9088] and [RFC9089], this document defines a
   mechanism to signal the FLC and the FRLD using IGP and BGP-LS,
   specifically, IGP includes IS-IS, OSPFv2 and OSPFv3.

1.1.  Terminology

   This memo makes use of the terms defined in
   [I-D.ietf-mpls-inband-pm-encapsulation] and [RFC8491].

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.





Min, et al.              Expires 19 August 2022                 [Page 2]

Internet-Draft           Signaling FLC and FRLD            February 2022


2.  Advertising FLC Using IGP

   FLC is a property of the node, so FLC is advertised with a node in
   this document.

   If a router has multiple interfaces, the router MUST NOT announce FLC
   unless all of its interfaces are capable of processing FLs.

2.1.  Advertising FLC Using IS-IS

   [RFC8667] defines SR-Capabilities sub-TLV of the IS-IS Router
   Capability TLV (defined in [RFC7981]).  Bit 2 in the Flags field of
   SR-Capabilities sub-TLV is used as the FLC Flag (F-Flag), as shown in
   Figure 1.


                              0 1 2 3 4 5 6 7
                             +-+-+-+-+-+-+-+-+
                             |I|V|F|         |
                             +-+-+-+-+-+-+-+-+

              Figure 1: Flags field of SR-Capabilities sub-TLV

   F-Flag:

      FLC Flag (Bit 2) - Set for the originating node if it supports FLC
      on all interfaces.

2.2.  Advertising FLC Using OSPF

   [RFC8665] defines some SR Capabilities TLVs as top-level TLVs of the
   Router Information Opaque LSA (defined in [RFC7770]).  The SR
   Capabilities TLVs are applicable to both OSPFv2 and OSPFv3 (see also
   [RFC8666]).  Within the SR Capabilities TLVs, the SID/Label Range TLV
   has a 1-octet Reserved field.  Bit 0 in the Reserved field of SID/
   Label Range TLV is used as the FLC Flag (F-Flag), as shown in
   Figure 2.


                              0 1 2 3 4 5 6 7
                             +-+-+-+-+-+-+-+-+
                             |F|             |
                             +-+-+-+-+-+-+-+-+

              Figure 2: Reserved field of SID/Label Range TLV

   F-Flag:




Min, et al.              Expires 19 August 2022                 [Page 3]

Internet-Draft           Signaling FLC and FRLD            February 2022


      FLC Flag (Bit 0) - Set for the originating node if it supports FLC
      on all interfaces.

3.  Advertising FRLD Using IGP

   As requested by [RFC8491], IANA has created an IANA-managed registry
   titled "IGP MSD-Types" to identify MSD-Types.  A new MSD-Type, called
   FRLD-MSD, is defined to advertise the FRLD of a given router.  The
   MSD-Type code 3 is requested to be assigned by IANA for FRLD-MSD.
   The MSD-Value field is set to the FRLD in the range between 0 to 255.

   If a router has multiple interfaces with different capabilities of
   reading the maximum label stack depth, the router MUST advertise the
   smallest value found across all of its interfaces.

   For IS-IS, the FRLD is advertised in a Node MSD Sub-TLV [RFC8491]
   using the FRLD-MSD type.

   For OSPF including both OSPFv2 and OSPFv3, the FRLD is advertised in
   a Node MSD TLV [RFC8476] using the FRLD-MSD type.

   The absence of FRLD-MSD advertisements indicates only that the
   advertising node does not support advertisement of this capability.

4.  Signaling FLC and FRLD in BGP-LS

   The IGP extensions defined in this document can be advertised via
   BGP-LS (Distribution of Link-State and Traffic Engineering
   Information Using BGP) [I-D.ietf-idr-rfc7752bis] using existing BGP-
   LS TLVs.

   The FLC is advertised using the SR Capabilities TLV as defined in
   [RFC9085].

   The FRLD-MSD is advertised using the Node MSD TLV as defined in
   [RFC8814].

5.  Security Considerations

   This document specifies the ability to advertise additional node
   capabilities using IS-IS, OSPF and BGP-LS.  As such, the security
   considerations as described in the referenced specifications are
   applicable to this document.

   Incorrectly setting the F-Flag during origination, propagation, or
   redistribution may lead to poor or no performance measurement of the
   MPLS traffic or to the MPLS traffic being discarded on the egress
   node.



Min, et al.              Expires 19 August 2022                 [Page 4]

Internet-Draft           Signaling FLC and FRLD            February 2022


   Incorrectly setting the FRLD value may lead to poor or no performance
   measurement of the MPLS traffic.

6.  IANA Considerations

   This document requests the following allocation from IANA:

   *  Type 3 in the IGP MSD-Types registry is requested to be assigned
      to the FRLD-MSD.

7.  Acknowledgements

   The authors would like to acknowledge Acee Lindem and Les Ginsberg
   for their very helpful comments.

8.  References

8.1.  Normative References

   [I-D.ietf-idr-rfc7752bis]
              Talaulikar, K., "Distribution of Link-State and Traffic
              Engineering Information Using BGP", Work in Progress,
              Internet-Draft, draft-ietf-idr-rfc7752bis-10, 10 November
              2021, <https://www.ietf.org/archive/id/draft-ietf-idr-
              rfc7752bis-10.txt>.

   [I-D.ietf-mpls-inband-pm-encapsulation]
              Cheng, W., Min, X., Zhou, T., Dong, X., and Y. Peleg,
              "Encapsulation For MPLS Performance Measurement with
              Alternate Marking Method", Work in Progress, Internet-
              Draft, draft-ietf-mpls-inband-pm-encapsulation-02, 25
              October 2021, <https://www.ietf.org/archive/id/draft-ietf-
              mpls-inband-pm-encapsulation-02.txt>.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC7770]  Lindem, A., Ed., Shen, N., Vasseur, JP., Aggarwal, R., and
              S. Shaffer, "Extensions to OSPF for Advertising Optional
              Router Capabilities", RFC 7770, DOI 10.17487/RFC7770,
              February 2016, <https://www.rfc-editor.org/info/rfc7770>.

   [RFC7981]  Ginsberg, L., Previdi, S., and M. Chen, "IS-IS Extensions
              for Advertising Router Information", RFC 7981,
              DOI 10.17487/RFC7981, October 2016,
              <https://www.rfc-editor.org/info/rfc7981>.



Min, et al.              Expires 19 August 2022                 [Page 5]

Internet-Draft           Signaling FLC and FRLD            February 2022


   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8476]  Tantsura, J., Chunduri, U., Aldrin, S., and P. Psenak,
              "Signaling Maximum SID Depth (MSD) Using OSPF", RFC 8476,
              DOI 10.17487/RFC8476, December 2018,
              <https://www.rfc-editor.org/info/rfc8476>.

   [RFC8491]  Tantsura, J., Chunduri, U., Aldrin, S., and L. Ginsberg,
              "Signaling Maximum SID Depth (MSD) Using IS-IS", RFC 8491,
              DOI 10.17487/RFC8491, November 2018,
              <https://www.rfc-editor.org/info/rfc8491>.

   [RFC8665]  Psenak, P., Ed., Previdi, S., Ed., Filsfils, C., Gredler,
              H., Shakir, R., Henderickx, W., and J. Tantsura, "OSPF
              Extensions for Segment Routing", RFC 8665,
              DOI 10.17487/RFC8665, December 2019,
              <https://www.rfc-editor.org/info/rfc8665>.

   [RFC8666]  Psenak, P., Ed. and S. Previdi, Ed., "OSPFv3 Extensions
              for Segment Routing", RFC 8666, DOI 10.17487/RFC8666,
              December 2019, <https://www.rfc-editor.org/info/rfc8666>.

   [RFC8667]  Previdi, S., Ed., Ginsberg, L., Ed., Filsfils, C.,
              Bashandy, A., Gredler, H., and B. Decraene, "IS-IS
              Extensions for Segment Routing", RFC 8667,
              DOI 10.17487/RFC8667, December 2019,
              <https://www.rfc-editor.org/info/rfc8667>.

   [RFC8814]  Tantsura, J., Chunduri, U., Talaulikar, K., Mirsky, G.,
              and N. Triantafillis, "Signaling Maximum SID Depth (MSD)
              Using the Border Gateway Protocol - Link State", RFC 8814,
              DOI 10.17487/RFC8814, August 2020,
              <https://www.rfc-editor.org/info/rfc8814>.

   [RFC9085]  Previdi, S., Talaulikar, K., Ed., Filsfils, C., Gredler,
              H., and M. Chen, "Border Gateway Protocol - Link State
              (BGP-LS) Extensions for Segment Routing", RFC 9085,
              DOI 10.17487/RFC9085, August 2021,
              <https://www.rfc-editor.org/info/rfc9085>.

8.2.  Informative References








Min, et al.              Expires 19 August 2022                 [Page 6]

Internet-Draft           Signaling FLC and FRLD            February 2022


   [RFC9088]  Xu, X., Kini, S., Psenak, P., Filsfils, C., Litkowski, S.,
              and M. Bocci, "Signaling Entropy Label Capability and
              Entropy Readable Label Depth Using IS-IS", RFC 9088,
              DOI 10.17487/RFC9088, August 2021,
              <https://www.rfc-editor.org/info/rfc9088>.

   [RFC9089]  Xu, X., Kini, S., Psenak, P., Filsfils, C., Litkowski, S.,
              and M. Bocci, "Signaling Entropy Label Capability and
              Entropy Readable Label Depth Using OSPF", RFC 9089,
              DOI 10.17487/RFC9089, August 2021,
              <https://www.rfc-editor.org/info/rfc9089>.

Authors' Addresses

   Xiao Min
   ZTE Corp.
   Nanjing
   China

   Phone: +86 25 88013062
   Email: xiao.min2@zte.com.cn


   Zheng(Sandy) Zhang
   ZTE Corp.
   Nanjing
   China

   Email: zhang.zheng@zte.com.cn


   Weiqiang Cheng
   China Mobile
   Beijing
   China

   Email: chengweiqiang@chinamobile.com














Min, et al.              Expires 19 August 2022                 [Page 7]
