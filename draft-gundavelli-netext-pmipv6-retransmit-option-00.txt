


NETEXT WG                                                  S. Gundavelli
Internet-Draft                                                  K. Leung
Intended status: Standards Track                                   Cisco
Expires: December 4, 2009                                      R. Koodli
                                                        Starent Networks
                                                           June 02, 2009


   Retransmitted Message Identification Option for Proxy Mobile IPv6
        draft-gundavelli-netext-pmipv6-retransmit-option-00.txt

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on December 4, 2009.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.

Abstract

   The Proxy Mobile IPv6 base protocol does not provide any mechanism



Gundavelli, et al.      Expires December 4, 2009                [Page 1]

Internet-Draft    Retransmitted Message Identification         June 2009


   for the receiver of a mobility signaling message to determine if the
   received message is the original message or a retransmitted message
   of an earlier sent message.  The absence of such a semantic in some
   cases results in inefficient processing of the signaling messages and
   will lead to additional processing load and network traffic.

   This document defines a new mobility option, Retransmitted Message
   Identification option for use in Proxy Binding Update and Proxy
   Binding Acknowledgement messages.  This option enables the mobility
   entities to use proper message identifiers and retransmit markings on
   the signaling messages.


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 3
   2.  Conventions . . . . . . . . . . . . . . . . . . . . . . . . . . 3
   3.  Signaling and other Considerations  . . . . . . . . . . . . . . 3
   4.  Retransmitted Message Identification (RMI) Option . . . . . . . 5
   5.  Protocol Configuration Variables  . . . . . . . . . . . . . . . 6
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . . . 7
   7.  Security Considerations . . . . . . . . . . . . . . . . . . . . 7
   8.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . 7
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . . . 7
     9.1.  Normative References  . . . . . . . . . . . . . . . . . . . 8
     9.2.  Informative References  . . . . . . . . . . . . . . . . . . 8
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . . . 8
























Gundavelli, et al.      Expires December 4, 2009                [Page 2]

Internet-Draft    Retransmitted Message Identification         June 2009


1.  Introduction

   The Proxy Mobile IPv6 protocol [RFC-5213] does not provide the
   ability for the sender of a signaling message to mark retransmitted
   messages with a proper tag, so the receiver can differentiate between
   the original message to a retransmitted message.  This semantic is
   important for the receiver to determine when to ignore processing a
   retransmitted packet, or for various other reasons.

   This document defines a new mobility option, Retransmitted Message
   Identification (RMI) option, that can be used by a local mobility
   anchor and a mobile access gateway for exchanging message and
   retransmit identifiers.  Following explains how the option helps in
   detecting retransmitted messages.



     MAG                                             LMA
      |            PBU RMI(MesgId: 1, RetransId: 0)   |
      |---------------------------------------------->| * New message
      |            PBA RMI(MesgId: 1, RetransId: 0)   |
      |<----------------------------------------------|
      |                                               |
      |                                               |
      |            PBU RMI(MesgId: 2, RetransId: 0)   |
      |---------------------------------------------->| * Lost message
      |            No Response from MAG               |
      |                                               |
      |            PBU RMI(MesgId: 2, RetransId: 1)   |
      |---------------------------------------------->| * Retransmitted
      |                                               |   message
      |            PBA RMI(MesgId: 2, RetransId: 1)   |
      |<----------------------------------------------|


                        Figure 1: RMI Option Usage


2.  Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC-2119].


3.  Signaling and other Considerations

   The following are the signaling considerations with respect to



Gundavelli, et al.      Expires December 4, 2009                [Page 3]

Internet-Draft    Retransmitted Message Identification         June 2009


   supporting the retransmitted message identification capability.

   o  The mobile access gateway can choose to enable the retransmitted
      message identification feature by including the Retransmitted
      Message Identification (RMI) option (Section 4.0) in the Proxy
      Binding Update that it sends to the local mobility anchor.  The
      configuration variable, EnableRetransmittedMessageIdentification,
      can be used for controlling this aspect.

   o  For constructing the RMI option, each newly generated message MUST
      have a unique message identifier (mid).  This identifier is
      specified in the mid field of the RMI option.  The retransmit
      identifier (rid) for the initial message will be set to value of
      zero, this is specified in the rid field of the RMI option.  The
      mobile access gateway can maintain this message identifier as a
      monotonically increasing counter maintained on a per packet basis
      for each mobile node's session.

   o  The mobile access gateway may retransmit a Proxy Binding Update
      message if it did not get a response to the previously transmitted
      request.  When retransmitting a message, the message identifier in
      the RMI option MUST remain fixed and the retransmit identifier
      MUST be increased by one.  All other content in the message
      including the options MUST be identical, except the sequence
      number and the value in the Time Stamp option which can be
      different.

   o  The conceptual Binding Update List entry data structure maintained
      by the mobile access gateway, described in Section 6.1 of [RFC-
      5213], MUST be extended to store the last sent message identifier
      and the retransmit identifier.

   o  The local mobility anchor MUST include the RMI option in the Proxy
      Binding Acknowledgement message, if the same option was present in
      the received Proxy Binding Update.  Otherwise, it MUST NOT include
      the option.  When this option is included in the message, the
      message identifier and the retransmit identifier MUST be set to
      the option values present in the request.

   o  If the local mobility anchor does not support the RMI option, it
      SHOULD ignore the option and continue processing the rest of the
      Proxy Binding Update message.  The absence of the RMI option in
      the Proxy Binding Acknowledgement indicates that the sender does
      not support the Retransmitted Message Identification capability
      and in such case the mobile access gateway MUST NOT include the
      RMI option in the subsequent Proxy Binding Update messages that it
      sends to that local mobility anchor.




Gundavelli, et al.      Expires December 4, 2009                [Page 4]

Internet-Draft    Retransmitted Message Identification         June 2009


   o  If the local mobility anchor receives a Proxy Binding Update
      message while in the middle of processing a request (such as
      waiting for response from AAA) with the same message identifier,
      but with a different retransmit identifier, the message MUST be
      silently ignored.

   o  The conceptual Binding Cache entry data structure maintained by
      the local mobility anchor, described in Section 5.1 of [RFC-5213],
      MUST be extended to store the last received message identifier and
      the retransmit identifier.


4.  Retransmitted Message Identification (RMI) Option

   A new option, Retransmitted Message Identification (RMI) option is
   defined for using it in Proxy Binding Update and Proxy Binding
   Acknowledgement messages exchanged between a local mobility anchor
   and a mobile access gateway.  This option is used for carrying
   message and retransmission identifiers.

   The alignment requirement for this option is 4n.






























Gundavelli, et al.      Expires December 4, 2009                [Page 5]

Internet-Draft    Retransmitted Message Identification         June 2009


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |      Type     |   Length      |   Reserved    | Retransmit-Id |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                       Message Identifier (mid)                |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      Type

          <IANA>

      Length

          8-bit unsigned integer indicating the length in octets of
          the option, excluding the type and length fields.  The value
          for this field MUST be set to 6.

      Retransmission Identifier (rid)

          A 8-bit field for carrying the retransmission identifier. This
          value will be set to zero for the first transmission of any
          newly generated signaling message and the value will be
          monotonically increased in each of the subsequent
          retransmissions of the same message uniquely identified by the
          message identifier.

      Message Identifier (mid)

          A 32-bit field for identifying the message. Each newly
          generated Proxy Binding Update message will have a unique
          identifier, however the Proxy Binding Acknowledgement will
          always carry the identifier that was present in the request.
          Any retransmitted messages will carry the same identifier that
          was present in the initial message.


        Figure 2: Retransmitted Message Identification (RMI) Option


5.  Protocol Configuration Variables

   The mobile access gateway MUST allow the following variables to be
   configured by the system management.  The configured values for these
   protocol variables MUST survive server reboots and service restarts.

   EnableRetransmittedMessageIdentification




Gundavelli, et al.      Expires December 4, 2009                [Page 6]

Internet-Draft    Retransmitted Message Identification         June 2009


      This flag indicates whether or not the mobile access gateway
      should include the retransmitted message identification option in
      the mobility signaling messages that it sends to the local
      mobility anchor.

      The default value for this flag is set to FALSE, indicating that
      the mobile access gateway MUST NOT include this option in any of
      the Proxy Binding Update messages.

      When the value for this flag is set to TRUE, the mobile access
      gateway MUST include this option in all the Proxy Binding Update
      messages.


6.  IANA Considerations

   This specification defines a new Mobility Header option, the
   Retransmitted Message Identification option.  This option can be
   carried in mobility header messages.  This option is described in
   Section 4.0.  The Type value for this option needs to be assigned
   from the same numbering space as allocated for the other mobility
   options, as defined in [RFC-3775].


7.  Security Considerations

   The Retransmitted Message Identification option defined in this
   specification is for use in mobility signaling messages, Proxy
   Binding Update and Proxy Binding Acknowledgement messages.  This
   option is carried like any other mobility header option as specified
   in [RFC-3775] and does not require any special security
   considerations.  The required security mechanisms specified in the
   base Proxy Mobile IPv6 protocol [RFC-5213] for protecting these
   signaling messages are sufficient when carrying these mobility
   options.


8.  Acknowledgements

   The authors would like to thank Venkatesh Gota, Ashwin Kabadi and
   Vojislav Vucetic on the discussions related to the similar semantics
   present in GTP and making the motivation for this work stronger.


9.  References






Gundavelli, et al.      Expires December 4, 2009                [Page 7]

Internet-Draft    Retransmitted Message Identification         June 2009


9.1.  Normative References

   [RFC-2119] Bradner, S., "Key words for use in RFCs to Indicate
   Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC-3775] Johnson, D., Perkins, C., Arkko, J., "Mobility Support in
   IPv6", RFC 3775, June 2003.

   [RFC-5213] Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K.,
   and B. Patil, "Proxy Mobile IPv6", RFC 5213, August 2008.

9.2.  Informative References

   [ID-PMIP6-IPv4] R. Wakikawa and S. Gundavelli, "IPv4 Support for
   Proxy Mobile IPv6", draft-ietf-netlmm-pmip6-ipv4-support-12, April
   2009.


Authors' Addresses

   Sri Gundavelli
   Cisco
   170 West Tasman Drive
   San Jose, CA  95134
   USA

   Email: sgundave@cisco.com


   Kent Leung
   Cisco
   170 West Tasman Drive
   San Jose, CA  95134
   USA

   Email: kleung@cisco.com


   Rajeev Koodli
   Starent Networks
   30 International Place
   Tewksbury, MA


   Email: rkoodli@starentnetworks.com






Gundavelli, et al.      Expires December 4, 2009                [Page 8]

