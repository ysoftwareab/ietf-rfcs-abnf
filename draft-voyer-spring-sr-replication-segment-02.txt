



Network Working Group                                      D. Voyer, Ed.
Internet-Draft                                               Bell Canada
Intended status: Standards Track                             C. Filsfils
Expires: May 29, 2020                                          R. Parekh
                                                     Cisco Systems, Inc.
                                                              H. Bidgoli
                                                                   Nokia
                                                                Z. Zhang
                                                        Juniper Networks
                                                       November 26, 2019


        SR Replication Segment for Multi-point Service Delivery
              draft-voyer-spring-sr-replication-segment-02

Abstract

   This document describes the SR Replication segment for multi-point
   service delivery.  A SR Replication segment allows a packet to be
   replicated from a replication node to downstream nodes.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on May 29, 2020.








Voyer, Ed., et al.        Expires May 29, 2020                  [Page 1]

Internet-Draft           SR Replication Segment            November 2019


Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Replication Segment . . . . . . . . . . . . . . . . . . . . .   2
   3.  Use Cases . . . . . . . . . . . . . . . . . . . . . . . . . .   4
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   5
   7.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .   5
   8.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   6
     8.1.  Normative References  . . . . . . . . . . . . . . . . . .   6
     8.2.  Informative References  . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   We define a new type of segment for Segment Routing [RFC8402], called
   Replication segment, which allows a node (henceforth called as
   Replication Node) to replicate packets to a set of other nodes
   (called Downstream Nodes) in a Segment Routing Domain.  Replication
   segments provide building blocks for Point-to-Multi-point Service
   delivery.  A Replication segment at ingress node of multi-point
   service could replicates packets directly to each egress node of the
   service (without need for any state on the internal routers), or it
   could be stitched to other Replication segments to build a tree in SR
   domain for multi-point service.  The latter is outside the scope of
   this document but specified in [I-D.voyer-pim-sr-p2mp-policy].

2.  Replication Segment

   In a Segment Routing Domain, a Replication segment is a logical
   segment which connects a Replication Node to a set of Downstream
   Nodes.  A Replication segment can be either provisioned locally on a



Voyer, Ed., et al.        Expires May 29, 2020                  [Page 2]

Internet-Draft           SR Replication Segment            November 2019


   node or programmed by a PCE.  Replication segments apply equally to
   both SR-MPLS and SRv6 instantiations of Segment Routing.

   A Replication segment is identified by the tuple <Replication-ID,
   Node-ID>, where:

   o  Replication-ID: An identifier for a Replication segment that is
      unique in context of the Replication Node.

   o  Node-ID: The address of the Replication Node that the Replication
      segment is for.  Note that the root of a multi-point service is
      also a replication node.

   In simplest case, Replication-ID can be a 32-bit number, but it can
   be extended or modified as required based on specific use of a
   Replication segment.  When the PCE signals a Replication segment to
   its node, the <Replication-ID, Node-ID> tuple identifies the segment.
   Examples of such signaling and extension are described in
   [I-D.voyer-pim-sr-p2mp-policy].

   A Replication segment includes the following elements:

   o  Replication SID: The Segment Identifier of a Replication segment.
      This is a SR-MPLS label or a SRv6 SID [RFC8402].

   o  Downstream Nodes: Set of nodes in Segment Routing domain to which
      a packet is replicated by the Replication segment.

   o  Replication State: See below.

   The Downstream Nodes and Replication State of a Replication segment
   can change over time, depending on the network state and leaf nodes
   of a multi-point service that the segment is part of.

   Replication State is a list of replication branches to the Downstream
   Nodes.  In this document, each branch is abstracted to a <Downstream
   Node, Downstream Replication SID> tuple.  A Downstream Node could be
   represented by the node's Node SID (i.e. it does not matter how
   traffic gets to the Downstream Node, whether it's directly connected
   or not), or in case of a directly connected node it could be
   represented by the Adjacency SID (for the interface connecting to the
   directly connected Leaf Node).  Alternatively, a Downstream Node
   could be represented by a SID-list or a Segment Routing Policy
   [I-D.ietf-spring-segment-routing-policy] that partially/fully
   specifies the explicit path from the Replication Node to the
   Downstream Node, or even represented by another Replication segment.





Voyer, Ed., et al.        Expires May 29, 2020                  [Page 3]

Internet-Draft           SR Replication Segment            November 2019


   Replication SID identifies the Replication segment in the forwarding
   plane.  For the root of a multi-point service, the Replication SID
   SHOULD be considered to be the equivalent of Binding SID
   [I-D.ietf-spring-segment-routing-policy] of a Segment Routing Policy.
   At a downstream node of the multi-point service, the Replication SID
   MAY be used to identify that portion of the multi-point service.

   A packet steered into a Replication segment at a node is replicated
   to each Downstream Node with the Downstream Replication SID that is
   relevant at that node.  A packet is steered into a Replication
   Segment in two ways:

   o  When the Active Segment [RFC8402] is the Replication SID.  In this
      case, the operation for a replicated copy is CONTINUE.

   o  On the root of a multi-point service, based on local policy-based
      routing.  In this case, the operation for a replicated copy is
      PUSH.

   If a Downstream Node is an egress (aka leaf) of the multi-point
   service, i.e. no further replication is needed, then that leaf node's
   Replication segment will not have any Replication State and the
   operation is NEXT.  Notice that the segment on the leaf node is still
   referred to as a Replication segment for the purpose of
   generalization.

   A node can be a bud node, i.e. it is a replication node and a leaf
   node of a multi-point service at the same time
   [I-D.voyer-pim-sr-p2mp-policy].  In this case, the Replication
   segment's Replication State includes a branch with the Downstream
   Node being itself and the operation for the replicated copy is NEXT.

3.  Use Cases

   In the simplest use case, a single Replication segment includes the
   root node of a multi-point service and the egress/leaf nodes of the
   the service as all the Downstream Nodes.  This achieves Ingress
   Replication [RFC7988] that has been widely used for MVPN [RFC6513]
   and EVPN [RFC7432] BUM (Broadcast, Unknown and Multicast) traffic.

   Replication segments can also be used as building blocks for
   replication trees when Replication segments on the root, intermediate
   replication nodes and leaf nodes are stitched together to achieve
   efficient replciation.  That is specified in
   [I-D.voyer-pim-sr-p2mp-policy].






Voyer, Ed., et al.        Expires May 29, 2020                  [Page 4]

Internet-Draft           SR Replication Segment            November 2019


4.  IANA Considerations

   This document makes no request of IANA.

5.  Security Considerations

   There are no additional security risks introduced by this design.

6.  Acknowledgements

   The authors would like to acknowledge Siva Sivabalan, Mike Koldychev,
   Vishnu Pavan Beeram and Alexander Vainshtein for their valuable
   inputs.

7.  Contributors

   Clayton Hassen
   Bell Canada
   Vancouver
   Canada

   Email: clayton.hassen@bell.ca

   Kurtis Gillis
   Bell Canada
   Halifax
   Canada

   Email: kurtis.gillis@bell.ca

   Arvind Venkateswaran
   Cisco Systems, Inc.
   San Jose
   US

   Email: arvvenka@cisco.com

   Zafar Ali
   Cisco Systems, Inc.
   US

   Email: zali@cisco.com

   Swadesh Agrawal
   Cisco Systems, Inc.
   San Jose
   US




Voyer, Ed., et al.        Expires May 29, 2020                  [Page 5]

Internet-Draft           SR Replication Segment            November 2019


   Email: swaagraw@cisco.com

   Jayant Kotalwar
   Nokia
   Mountain View
   US

   Email: jayant.kotalwar@nokia.com

   Tanmoy Kundu
   Nokia
   Mountain View
   US

   Email: tanmoy.kundu@nokia.com

   Tarek Saad
   Juniper Networks
   Canada

   Email:tsaad@juniper.net

8.  References

8.1.  Normative References

   [I-D.ietf-spring-segment-routing-policy]
              Filsfils, C., Sivabalan, S., Voyer, D., Bogdanov, A., and
              P. Mattes, "Segment Routing Policy Architecture", draft-
              ietf-spring-segment-routing-policy-03 (work in progress),
              May 2019.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

8.2.  Informative References








Voyer, Ed., et al.        Expires May 29, 2020                  [Page 6]

Internet-Draft           SR Replication Segment            November 2019


   [I-D.voyer-pim-sr-p2mp-policy]
              Voyer, D., Filsfils, C., Parekh, R., Bidgoli, H., and Z.
              Zhang, "Segment Routing Point-to-Multipoint Policy",
              draft-voyer-pim-sr-p2mp-policy-00 (work in progress),
              October 2019.

   [RFC6513]  Rosen, E., Ed. and R. Aggarwal, Ed., "Multicast in MPLS/
              BGP IP VPNs", RFC 6513, DOI 10.17487/RFC6513, February
              2012, <https://www.rfc-editor.org/info/rfc6513>.

   [RFC7432]  Sajassi, A., Ed., Aggarwal, R., Bitar, N., Isaac, A.,
              Uttaro, J., Drake, J., and W. Henderickx, "BGP MPLS-Based
              Ethernet VPN", RFC 7432, DOI 10.17487/RFC7432, February
              2015, <https://www.rfc-editor.org/info/rfc7432>.

   [RFC7988]  Rosen, E., Ed., Subramanian, K., and Z. Zhang, "Ingress
              Replication Tunnels in Multicast VPN", RFC 7988,
              DOI 10.17487/RFC7988, October 2016,
              <https://www.rfc-editor.org/info/rfc7988>.

Authors' Addresses

   Daniel Voyer (editor)
   Bell Canada
   Montreal
   CA

   Email: daniel.voyer@bell.ca


   Clarence Filsfils
   Cisco Systems, Inc.
   Brussels
   BE

   Email: cfilsfil@cisco.com


   Rishabh Parekh
   Cisco Systems, Inc.
   San Jose
   US

   Email: riparekh@cisco.com







Voyer, Ed., et al.        Expires May 29, 2020                  [Page 7]

Internet-Draft           SR Replication Segment            November 2019


   Hooman Bidgoli
   Nokia
   Ottawa
   CA

   Email: hooman.bidgoli@nokia.com


   Zhaohui Zhang
   Juniper Networks

   Email: zzhang@juniper.net







































Voyer, Ed., et al.        Expires May 29, 2020                  [Page 8]
