



BIER WG                                                     Zheng. Zhang
Internet-Draft                                              Greg. Mirsky
Intended status: Informational                               Quan. Xiong
Expires: January 8, 2020                                 ZTE Corporation
                                                            July 7, 2019


                         BIER Source Protection
                 draft-zhang-bier-source-protection-00

Abstract

   This document describes the multicast source protection functions in
   Bit Index Explicit Replication BIER domain.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 8, 2020.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.





Zhang, et al.            Expires January 8, 2020                [Page 1]

Internet-Draft           BIER Source Protection                July 2019


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Multicast Source Protection . . . . . . . . . . . . . . . . .   2
     2.1.  BIER Ping . . . . . . . . . . . . . . . . . . . . . . . .   3
     2.2.  BIER BFD  . . . . . . . . . . . . . . . . . . . . . . . .   4
   3.  Security Considerations . . . . . . . . . . . . . . . . . . .   4
   4.  Normative References  . . . . . . . . . . . . . . . . . . . .   4
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Introduction

   Bit Index Explicit Replication (BIER) [RFC8279] is an architecture
   that provides multicast forwarding through a "BIER domain" without
   requiring intermediate routers to maintain any multicast related per-
   flow state.  BIER also does not require any explicit tree-building
   protocol for its operation.  A multicast data packet enters a BIER
   domain at a "Bit-Forwarding Ingress Router" (BFIR), and leaves the
   BIER domain at one or more "Bit-Forwarding Egress Routers" (BFERs).

   To protect the source node it may be transmitting to two or more
   BFIRs.  Based on local policies, BFERs may elect to use the same BFIR
   or different BFIRs as the source of the multicast flow.  The BFIR and
   the path in use are referred to as working while all alternative
   available BFIRs and paths that can be used to receive the same
   multicast flow are referred to as protection.  For a BFER, when
   either the working BFIR or the working path fail, the BFER can select
   one of protection BFIRs to get the multicast flow.  The shorter the
   detection time is, the faster the flow recovers.

   This document discusses the functions that can be used in failure
   detection for multicast source protection.

2.  Multicast Source Protection

   Two BFIRs independently advertise the source of the multicast flow to
   BFERs.  The precise type of advertisement depends on the overlay
   protocol being used, e.g., MLD, MVPN, EVPN.  BFER selects one BFIR as
   the UMH (Upstream Multicast Hop).  Different BFERs may select the
   same BFIR or different BFIRs according to the local policy.











Zhang, et al.            Expires January 8, 2020                [Page 2]

Internet-Draft           BIER Source Protection                July 2019


                            +--------+S1+-------+
                            |                   |
                         +--v----+          +---v---+
                  +------+ BFIR1 |          | BFIR2 +-------+
                  |      +-------+          +-------+       |
                  |                                         |
                  |                                         |
                  |                                         |
                  | +-------+      +-------+      +-------+ |
                  +--|BFER1|--------|BFER2|---- ---|BFER3|--+
                    +--+----+      +---+---+      +--+----+
                       |               |             |
                       v               v             v
                       R1              R2            R3
                                  Figure 1

   For example, a multicast source S1 is connected to BFIR1 and BFIR2.
   BFIR1 and BFIR2 advertise the source information to BFERs.  It is
   assumed that BFER1, BFER2, and BFER3 all choose BFIR1 as the UMH.
   BFERs signal to BFIR1 to get the multicast flow from S1.

   In case BFIR1 fails, or the path from BFIR1 to BFER1 is broken, BFER1
   should select BFIR2 as the UMH.  But if the timeout period is too
   long, the multicast flow will be significantly affected.

2.1.  BIER Ping

   [I-D.ietf-bier-ping] describes the mechanism and basic BIER OAM
   packet format that can be used to perform failure detection and
   isolation on BIER data plane without any dependency on other layers
   like the IP layer.

   In the example of Figure 1, BFER can monitor the status of BFIR and
   the path status between BFER and BFIR.  BFER1 sends the BIER Ping
   packet to BFIR1.  If BFER1 does not receive responses from BFIR1 in a
   period of time, BFER1 will treat BFIR1 as a failed UMH, and BFER1
   will select BFIR2 as the UMH and signal to BFIR2 to get multicast
   flow.

   In this example, BFER1, BFER2, and BFER3 send BIER ping packet to
   BFIR1 separately.  The timeout period MAY be set to a different
   values depending on the local performance requirement on each BFER.

   In general case of more complex BIER topology, it cannot be
   guaranteed that the path used from BFIR1 to BFER1 is the same as in
   the reverse direction, i.e., from BFER1 to BFIR1.  If that is not
   guaranteed and the paths are not co-routed, then this method may
   produce false results, both false negative and false positive.  The



Zhang, et al.            Expires January 8, 2020                [Page 3]

Internet-Draft           BIER Source Protection                July 2019


   former is when ping fails while the multicast path and flow are OK.
   The latter is when the multicast path has defect but ping works.
   Thus, to improve consistency of this method of detecting a failure in
   multicast flow transport, the path that the echo request from BFER1
   traverses to BFIR1 must be co-routed with the path that the monitored
   multicast flow traverses through the BIER domain from BFIR1 to BFER1.

2.2.  BIER BFD

   [I-D.hu-bier-bfd] describes the application of P2MP BFD in BIER
   network.  And it describes the procedures for using such mode of BFD
   protocol to verify multipoint or multicast connectivity between a
   sender (BFIR) and one or more receivers (BFERs).

   In the same example, BFIR1 sends the BIER Echo request packet to
   BFERs to bootstrap a p2mp BFD session.  After BFER1, BFER2 and BFER3
   receive the Echo request packet with BFD Discriminator and the Target
   SI-Bitstring TLVs, BFERs creates the BFD session of type
   MultipointTail [RFC8562] to monitor the status of BFIR1 and the
   working path.  If BFERs have not received BFD packet from BFER1 for
   the Detection Time [RFC8562], BFER1 will treat BFIR1 as a failed UMH,
   and signal to BFIR2 to get the multicast flow.

   The timeout period on each BFER MAY be set to different value
   depending on the local performance requirement on each BFER.  BFER
   monitors BFIR separately and selects its UMH independently from
   selections reached by other BFERs.

3.  Security Considerations

   Security considerations discussed in [RFC8279], [RFC8562],
   [I-D.ietf-bier-ping] and [I-D.hu-bier-bfd] apply to this document.

4.  Normative References

   [I-D.hu-bier-bfd]
              Xiong, Q., Mirsky, G., hu, f., and C. Liu, "BIER BFD",
              draft-hu-bier-bfd-04 (work in progress), July 2019.

   [I-D.ietf-bier-ping]
              Kumar, N., Pignataro, C., Akiya, N., Zheng, L., Chen, M.,
              and G. Mirsky, "BIER Ping and Trace", draft-ietf-bier-
              ping-05 (work in progress), April 2019.








Zhang, et al.            Expires January 8, 2020                [Page 4]

Internet-Draft           BIER Source Protection                July 2019


   [RFC8279]  Wijnands, IJ., Ed., Rosen, E., Ed., Dolganow, A.,
              Przygienda, T., and S. Aldrin, "Multicast Using Bit Index
              Explicit Replication (BIER)", RFC 8279,
              DOI 10.17487/RFC8279, November 2017,
              <https://www.rfc-editor.org/info/rfc8279>.

   [RFC8562]  Katz, D., Ward, D., Pallagatti, S., Ed., and G. Mirsky,
              Ed., "Bidirectional Forwarding Detection (BFD) for
              Multipoint Networks", RFC 8562, DOI 10.17487/RFC8562,
              April 2019, <https://www.rfc-editor.org/info/rfc8562>.

Authors' Addresses

   Zheng Zhang
   ZTE Corporation

   Email: zzhang_ietf@hotmail.com


   Greg Mirsky
   ZTE Corporation

   Email: gregimirsky@gmail.com


   Quan Xiong
   ZTE Corporation

   Email: xiong.quan@zte.com.cn






















Zhang, et al.            Expires January 8, 2020                [Page 5]
