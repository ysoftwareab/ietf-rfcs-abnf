ISIS Working Group                             Dave Allan, Uma Chunduri 
Internet Draft                                                 Ericsson 
Intended status: Standards Track                                        
Expires: December 2016 
                                                                                 
                                                             June 2016 
                                    

       IS-IS extensions for Computed Multicast applied to MPLS based 
                              Segment Routing 
                   draft-allan-isis-spring-multicast-00 


Abstract 
   This document describes the IS-IS extensions required to support 
   multicast for MPLS based Segment Routing. In this approach IS-IS 
   speakers compute their role in multicast tree construction based on 
   the information in the IS-IS routing information base. 
    
Status of this Memo 

   This Internet-Draft is submitted to IETF in full conformance 
   with the provisions of BCP 78 and BCP 79. 

   Internet-Drafts are working documents of the Internet 
   Engineering Task Force (IETF), its areas, and its working 
   groups.  Note that other groups may also distribute working 
   documents as Internet-Drafts. 

   Internet-Drafts are draft documents valid for a maximum of six 
   months and may be updated, replaced, or obsoleted by other 
   documents at any time.  It is inappropriate to use Internet-
   Drafts as reference material or to cite them other than as "work 
   in progress". 

   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt. 

   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html. 

   This Internet-Draft will expire on December 2016. 

Copyright and License Notice 

   Copyright (c) 2016 IETF Trust and the persons identified as the 
   document authors.  All rights reserved. 

   This document is subject to BCP 78 and the IETF Trust's Legal 
   Provisions Relating to IETF Documents 

 
Allan et al.,           Expires December 2016                  [Page 1] 
 
Internet-Draft   draft-allan-isis-spring-multicast-00         June 2016 
 

   (http://trustee.ietf.org/license-info) in effect on the date of 
   publication of this document. Please review these documents 
   carefully, as they describe your rights and restrictions with 
   respect to this document. Code Components extracted from this 
   document must include Simplified BSD License text as described 
   in Section 4.e of the Trust Legal Provisions and are provided 
   without warranty as described in the Simplified BSD License. 

Table of Contents 

   1. Introduction...................................................2 
   1.1. Authors......................................................2 
   1.2. Requirements Language........................................3 
   2. Conventions used in this document..............................3 
   2.1. Terminology..................................................3 
   3. Overview.......................................................3 
   4. New TLVs.......................................................4 
   4.1. Compute Capability TLV.......................................4 
   4.2. SRM SID Multicast Group Binding sub-TLV......................4 
   4.3. SRM Pinned Tree Descriptor sub-TLV...........................5 
   5. Acknowledgements...............................................7 
   6. Security Considerations........................................7 
   7. IANA Considerations............................................7 
   8. References.....................................................7 
   8.1. Normative References.........................................7 
   8.2. Informative References.......................................8 
   9. Authors' Addresses.............................................8 
    

1. Introduction 

   [ALLAN-1] describes a solution for multicast for Segment Routing with 
   MPLS data plane in which source specific multicast distribution trees 
   (MDTs) are computed from information distributed via an IGP. Using 
   this approach, both any-source multicast (ASM) and engineered p2mp 
   trees can be supported.  
 
   This memo describes TLVs for IS-IS to support the segment routing 
   multicast approach as described in [ALLAN-1].  
    
1.1. Authors 

   David Allan, Uma Chunduri 



 
Allan et al.,           Expires December 2016                  [Page 2] 
 
Internet-Draft   draft-allan-isis-spring-multicast-00         June 2016 
 

1.2. Requirements Language 

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in RFC2119 [RFC2119]. 

2. Conventions used in this document 

2.1. Terminology 

   Candidate replication point - is a node will potentially need to 
   install state as determined at some intermediate step in MDT 
   computation. It will either resolve to having no role or a role as a 
   replication point once multicast has converged. 

   Candidate role - refers to any potential combination of roles on a 
   given MDT as determined at some intermediate step in MDT computation. 
   For example, a node with a candidate role may be a leaf and may be a 
   candidate replication point. 

   Downstream - refers to the direction along the shortest path to one 
   or more leaves for a given multicast distribution tree 

   Multicast convergence - is when all computation and state 
   installation to ensure the FIB reflects the multicast information in 
   the IGP is complete. 

   Pinned path - Is a unique shortest path extending from a leaf 
   upstream towards the root for a given MDT. Therefore is a component 
   of an MDT that must be there. It will not necessarily extend from the 
   leaf all the way to the root during intermediate computation steps. A 
   pinned path can result from pruning operations. 

   Role - refers specifically to a node that is either a root, a leaf or 
   a replication node for a given multicast distribution tree 

   Unicast convergence- is when all computation and state installation 
   to ensure the FIB reflects the unicast information in the IGP is 
   complete. 

   Upstream - refers to the direction along the shortest path to the 
   root of a given multicast distribution tree 

3. Overview 

   [ALLAN-1] adds the concept of the multicast segment to the Segment 
   Routing architecture [IDSR]. 

 
Allan et al.,           Expires December 2016                  [Page 3] 
 
Internet-Draft   draft-allan-isis-spring-multicast-00         June 2016 
 

   Extending the IS-IS to support multicast segments adds 
   synchronization of knowledge of: multicast SIDs, multicast group 
   membership and agreement on the algorithm to use for computation of 
   multicast distribution trees(MDTs) across the set of IS-IS speakers 
   in an area/domain. This document specifies the TLVs necessary for IS-
   IS to support multicast segments in the Segment Routing architecture. 

4. New TLVs 

4.1. Compute Capability TLV 

   The presence of this sub-TLV in an LSP (TLV 144 defined in [RFC6329]) 
   indicates both that the originating node supports computed spring 
   multicast, and the algorithm that is configured to be used for a 
   particular topology. All nodes supporting computed multicast are 
   required to agree on the algorithm for correct operation of the 
   network for that topology. 

   The format of the sub-TLV is: 

    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+ 
   |Type= SRM-CAP  | = TBD IANA 
   +-+-+-+-+-+-+-+-+ 
   |   Length      |    (1 byte) 
   +-+-+-+-+-+-+-+-+-------------------------------+---------------+ 
   |        Algorithm OUI  (24 bits)               | Algorithm ID  | 
   +-----------------------------------------------+---------------+ 
    

   Where: 

   The upper 24 bits contains an organizationally unique identifier (as 
   per [RFC7042]) and the lower 8 bits contains an algorithm identifier. 

   The default algorithm supported as per [ALLAN-1] is identified by 
   Algorithm OUI =  0x008037 (Ericsson), Algorithm ID = 0x01 (default). 

4.2. SRM SID Multicast Group Binding sub-TLV 

   The SID Multicast Group Binding sub-TLV communicates the binding 
   between the SID specific to the MDT for the multicast group 
   originating at the advertising node and the multicast group address 
   as well as transmit and receive interest for the advertising node. 
   Note that if the TLV does not have the T bit set, the SID TLV is not 
   included in the message. The encoding is as a sub-TLV from the 135, 

 
Allan et al.,           Expires December 2016                  [Page 4] 
 
Internet-Draft   draft-allan-isis-spring-multicast-00         June 2016 
 

   235, 236 and 237 registry. This sub-TLV SHOULD be advertised when N 
   bit set in the IPv4/IPv6 Extended Reachability Attribute Flags for 
   the corresponding prefix as defined in [RFC7794].  The encoding of 
   the SID sub-TLV is as per section 2.3 of [SPRING-ISIS]. 

    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |   Type        |    Length     |T|R| Reserved  |               | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               + 
   |                            Group Address                      | 
                                  . . . .   
   |                                                               | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |                     SID sub-TLV (when T Bit is set)           | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    

   Where: 

      Type = TBD (IANA assignment from TLV 135, 235, 236 and 237   
      registry) 
      
      Length = 8 octet Variable which includes size of the T/R, reserved 
      fields, multicast group address and the SID TLV 

      T-bit indicates that this node is a source for the multicast group 
      specified in the sub-tlv. 

      R-bit indicates that this node is a receiver for the multicast 
      group specified in the sub-tlv. 

      Group address = 4 octet IPv4 multicast group address (when used 
      with TLV 135 or 235), 16 octet IPv6 multicast group address (when 
      used with TLV 236 or 237). 

      SID sub-TLV contains the segment ID to use for this multicast 
      segment. 

4.3. SRM Pinned Tree Descriptor sub-TLV 

   The pinned tree descriptor defines all nodes that have a role in a 
   multicast distribution tree, and their relationship to the individual 
   multicast segments that define the tree. The encoding is an 
   unstructured list, where if the tree description exceeds 252 bytes, 
   it may simply use more than one sub-TLV. This sub-TLV SHOULD be 


 
Allan et al.,           Expires December 2016                  [Page 5] 
 
Internet-Draft   draft-allan-isis-spring-multicast-00         June 2016 
 

   advertised when N bit set in the IPv4/IPv6 Extended Reachability 
   Attribute Flags for the corresponding prefix as defined in [RFC7794].   

   The encoding of a role descriptor is in the form of 
   upstream_SID/unicast_SID/downstream _SID, where each of the SIDs is 
   encoded as a sub-TLV as per [SPRING-ISIS]. 

   The root of the MDT (and originator of the TLV) will have a NULL 
   upstream SID, transit waypoints will have both a defined upstream and 
   downstream multicast segment SID, and a leaf will have a NULL 
   downstream SID. The unicast SID corresponds to the node for which the 
   entry defines its role. 

      +-+-+-+-+-+-+-+-+ 
      | Type=SRM-PTD  | = TBD IANA 
      +-+-+-+-+-+-+-+-+ 
      |    Length     |   (1 byte) 
      +-+-+-+-+-+-+-+-+-------------------------------------+ 
      |                   role descriptor 1                 | 
      +-----------------------------------------------------+ 
      |                   role descriptor 2                 | 
      +-----------------------------------------------------+ 
      |                   role descriptor 3                 | 
      +-----------------------------------------------------+ 
                              . . . . 
      +-----------------------------------------------------+ 
      |                   role descriptor n                 | 
      +-----------------------------------------------------+ 
    

   Where: 

     Type = TBD (IANA assignment from TLV 135, 235, 236 and 237 
     registry) 

     Length = Variable and represents size of the role descriptors 

      The encoding of a role descriptor is in the form: 

      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
      |         Upstream Multicast SID sub-TLV        | 
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
      |              Unicast SID sub-TLV              | 
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
      |        Downstream Multicast SID sub-TLV       | 
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    

 
Allan et al.,           Expires December 2016                  [Page 6] 
 
Internet-Draft   draft-allan-isis-spring-multicast-00         June 2016 
 

5. Acknowledgements 

6. Security Considerations 

   For a future version of this document. 

7. IANA Considerations 

   This memo requires the allocation of: 

   1) a value for each of the SRM SID Multicast Group Binding sub-TLV, 
      and the SRM Pinned Tree Descriptor sub-TLV from the "Sub-TLVs for 
      TLVs 135, 235, 236, and 237" registry. 

   2) A value for the SRM Capability sub-TLV from the "Sub-TLVs for TLV 
      144" registry. 

8. References  

8.1. Normative References  

   [IS-IS]     ISO/IEC 10589:2002, Second Edition, "Intermediate System          
              to Intermediate System Intra-Domain Routing Exchange              
              Protocol for use in Conjunction with the Protocol for             
              Providing the Connectionless-mode Network Service (ISO            
              8473)", 2002. 

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate              
              Requirement Levels", BCP 14, RFC 2119, March 1997. 

   [RFC6329]  Fedyk et.al. "IS-IS Extensions Supporting IEEE 802.1aq 
              Shortest Path Bridging", IETF RFC 6329, April 2012 

   [RFC7042]  Eastlake, D. et. al.,"IANA Considerations and IETF 
              Protocol and Documentation Usage for IEEE 802 
              Parameters", IETF RFC 7042, October 2013 

   [RFC7794]  Ginsberg et. al., "IS-IS Prefix Attributes for Extended 
              IPv4 and IPv6 Reachability", IETF RFC 7794, March 2016 

   [SPRING-ISIS] Previdi el.al. "IS-IS Extensions for Segment Routing", 
              IETF work in progress, draft-ietf-isis-segment-routing-
              extensions-06, December 2015  





 
Allan et al.,           Expires December 2016                  [Page 7] 
 
Internet-Draft   draft-allan-isis-spring-multicast-00         June 2016 
 

8.2. Informative References 

   [IDSR]     Filsfils et.al., "Segment Routing Architecture", IETF 
              work in progress, draft-ietf-spring-segment-routing-08, 
              May 2016 

   [ALLAN-1]  Allan et.al., "A Framework for Computed Multicast applied 
              to MPLS based Segment Routing", draft-allan-spring-mpls-
              mcast-framework-01, July 2016 

9. Authors' Addresses 

   Dave Allan (editor) 
   Ericsson 
   300 Holger Way 
   San Jose, CA  95134 
   USA 
   Email: david.i.allan@ericsson.com  
    
   Uma Chunduri 
   Ericsson 
   300 Holger Way 
   San Jose, CA  95134 
   USA 
   Email: uma.chunduri@ericsson.com  
    
    





















 
Allan et al.,           Expires December 2016                  [Page 8] 
 