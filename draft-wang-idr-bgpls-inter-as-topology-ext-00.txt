TEAS Working Group                                             A.Wang
Internet Draft                                           China Telecom

Intended status: Standard Track                           March 5, 2018
Expires: September 4, 2018


               BGP-LS extend for inter-AS topology retrieval
             draft-wang-idr-bgpls-inter-as-topology-ext-00.txt


Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six
   months and may be updated, replaced, or obsoleted by other documents
   at any time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on August 31, 2018.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors. All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document. Please review these documents
   carefully, as they describe your rights and restrictions with
   respect to this document.

Abstract

   This document describes new TLVs extended for BGP-LS to transfer the
   originator of redistributed routes and other inter-AS TE related
   TLVs to let the SDN controller to retrieve the network topology
   automatically under the multi-domain environments.

   This extension can expand the usage of BGP-LS protocol to multi-
   domain; enable the network operator to collect the connection
   relationship between different domains and then calculate the
   overall network topology automatically based on the information
   provided by BGP-LS protocol.

<A.Wang et al.>       Expires September 4, 2018               [Page 1]

Internet-Draft BGP-LS extend for inter-AS topology retrieval   March 5,
2018
Table of Contents


   1. Introduction ................................................ 2
   2. Conventions used in this document............................ 3
   3. Multi-Domain Scenarios....................................... 3
      3.1. IS-IS/OSPF Native IP Scenario............................ 4
      3.2. IS-IS/OSPF inter-AS TE Scenario ......................... 4
      3.3. Proposed Solution........................................ 5
         3.3.1. Redistributed Routes Originator TLV ................ 5
         3.3.2. Inter-AS TE related TLVs............................ 6
         3.3.3. Topology Reconstruction............................. 6
   4. Security Considerations....................................... 6
   5. IANA Considerations .......................................... 6
   6. Conclusions .................................................. 7
   7. References ................................................... 7
      7.1. Normative References..................................... 7
      7.2. Informative References .................................. 7
   8. Acknowledgments ............................................. 8

1. Introduction

   BGP-LS [RFC 7752] describes the methodology that using BGP protocol
   to transfer the Link-State information. Such method can enable SDN
   controller to collect the underlay network topology automatically,
   but normally it can only get the information within one IGP domain.
   If the operator has more than one IGP domain, and these domains
   interconnect each other, there is no general TLV within current BGP-
   LS to transfer the interconnect information.

   Draft[I-D.ietf-idr-bgpls-segment-routing-epe]defines some extensions
   for exporting BGP peering node topology information (including its
   peers, interfaces and peering ASs) in a way that is exploitable in
   order to compute efficient BGP Peering Engineering policies and
   strategies. Such information can also be used to calculate the
   interconnection topology among different IGP domains, but it requires
   the border routers to run BGP-LS protocol to collect this information
   and report them to the PCE/SDN controller, which restricts the
   deployment flexibility of BGP-LS protocol.

   Draft[I-D.ietf-idr-bgpls-segment-routing-ext]defines some extensions
   for exporting segment routing related information. It proposes one
   "Source Router Identifier" TLV which is defined in [RFC7794] to
   transfer the originator information of redistributed prefixes. But



<A.Wang et al.>       Expires September 4, 2018               [Page 2]

Internet-Draft BGP-LS extend for inter-AS topology retrieval   March 5,
2018
   the definition of such TLV focuses mainly on the IS-IS domain, and it
   will only be reported when the network deploys segment routing
   technology.

   But beyond the segment routing scenario, draft [I-D.ietf-teas-native-
   ip-scenarios] defines other non segment routing scenarios that the
   PCE/SDN controller needs to get the topology information among
   different domains automatically, and the IGP protocol in these
   domains is not limited to IS-IS. Then we need to broader and reshape
   the definition of "Source Router Identifier" TLV to include and cover
   more general situations.

   This draft analysis the situations that the PCE/SDN controller needs
   to get the originator information of the prefixes between different
   domains, define new TLVs to extend the BGP-LS protocol to transfer
   the key information related to the interconnect topology. After that,
   the  SDN  controller  can  then  deduce  the  multi-domain  topology
   automatically based on the information from BGP-LS protocol.

2. Conventions used in this document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

3. Multi-Domain Scenarios.

   Fig.1  illustrates  the  multi-domain  scenarios  that  this  draft
   discussed. Normally, SDN Controller can get the topology of IGP A and
   IGP B individually via the BGP-LS protocol, but it can't get the
   topology connection information between these two IGP domains because
   there is normally no IGP protocol run on the connected links.

                             +--------------+
                          ---|SDN Controller----
                          |  +--------------+  |
                          |                    |
                        BGP-LS              BGP-LS
                          |                    |
                          |                    |
                        ------                 ---
                    ///-     -\\\          //--   --\\
                   /             \        /           \
                  |  R3-------R1--|------|-T1-------T3 |


<A.Wang et al.>       Expires September 4, 2018               [Page 3]

Internet-Draft BGP-LS extend for inter-AS topology retrieval   March 5,
2018
                 |                 |    |               |
                 |       IGP A     |    |     IGP B     |
                 |                 |    |               |
                  |  R4 ------R2--|------|-T2-------T4 |
                   \             /        \           /
                    \\\-     -///          \\--   --//
                        -----                  ---

                       Fig.1 Multi-Domain Scenarios



3.1. IS-IS/OSPF Native IP Scenario

   When the IGP A or IGP B runs IS-IS/OSPF protocol, normally the
   operator will redistribute the prefixes of interconnect links into
   IS-IS/OSPF protocol to ensure the inter-domain connectivity.

   [RFC7794] defines the "IPv4/IPv6 Source Router ID" to indicate this
   information and it will flood within the IGP domain. If BGP-LS
   protocol that runs on one of the interior router can carry such
   information, the PCE/SDN controller will know the anchor router of
   the inter-domain links. Such information is needed within not only
   for segment routing scenario as described in [I-D.ietf-idr-bgpls-
   segment-routing-ext], but also in non segment routing scenario as
   described in [I-D.ietf-teas-native-ip-scenarios].

   [RFC2328] defines the type 5 external LSA to transfer the external
   routes; [draft-ietf-ospf-ospfv3-lsa-extend] defines the "External-
   Prefix TLV" to transfer the external routes; these LSAs have also
   the advertising router information that initiates the redistribute
   activity. If such information can be reported also via the
   "IPv4/IPv6 Source Router ID", then the PCE/SDN controller can
   construct the underlay inter-domain topology according to procedure
   described in section 3.5.

3.2. IS-IS/OSPF inter-AS TE Scenario

   [RFC5316] and [RFC5392] define the IS-IS and OSPF extensions
   respectively to deal with the requirements for inter-AS traffic
   engineering. They define some new sub-TLVs(Remote AS Number IPv4
   Remote ASBR ID IPv6 Remote ASBR ID) which are associated with the
   inter-AS TE link TLVs to report the TE topology between different
   domains. These TLVs are also flooding within the IGP domain. If the


<A.Wang et al.>       Expires September 4, 2018               [Page 4]

Internet-Draft BGP-LS extend for inter-AS topology retrieval   March 5,
2018
   PCE/SDN controller can know these information via one of the
   interior router that runs BGP-LS protocol, the PCE/SDN controller
   can rebuild the inter-AS TE topology correctly.

3.3.  Proposed Solution

3.3.1. Redistributed Routes Originator TLV

   This draft proposes to define one new TLV to transfer such key
   information; we call it "Redistributed Routes Originator" TLV. The
   format of this TLV is illustrated below:

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              Type             |             Length            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     //                Redistributed Routes Originator               //
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   Type: should be allocated by IANA.

   Length: 4 or 16 Bytes.

   Redistributed Routes Originator: Router ID of the redistributed
   routes.

   For IGP that runs IS-IS protocol, the "Redistributed Routes
   Originator" should contain the IPv4/IPv6 address of the
   redistributed router which is defined in [RFC7794];

   For IGP that runs OSPF v2/v3 protocol, the "Redistributed Routes
   Originator" should contain the IPv4/IPv6 address of the
   redistributed router which is included in the External LSA that
   defined in [RFC2328] or "External-Prefix TLV" that defined in
   [draft-ietf-ospf-ospfv3-lsa-extend];

   This TLV should be coincided with the IGP Route Tag TLV or OSPF
   Route Type TLV, because these two TLVs indicate the associated
   prefixes redistributed via other protocols. They are all under the
   associated Prefix NLRI.





<A.Wang et al.>       Expires September 4, 2018               [Page 5]

Internet-Draft BGP-LS extend for inter-AS topology retrieval   March 5,
2018
3.3.2. Inter-AS TE related TLVs

   This draft proposes to add three new TLVs that is associated with
   the inter-AS TE link NLRI to transfer the information via BGP-LS,
   which are required to build the inter-AS related topology by the
   PCE/SDN controller.

   The following Link Attribute TLVs are added in the BGP-LS attribute

   with a Link NLRI:

   +-----------+---------------------+--------------+----------------+
   |  TLV Code | Description         |IS-IS/OSPF TLV| Reference      |
   |   Point   |                     |   /Sub-TLV   | (RFC/Section)  |
   +-----------+---------------------+--------------+----------------+
   |    TBD    |Remote AS Number     |   24/21      | [RFC5316]/3.3.1|
   |           |                     |              | [RFC5392]/3.3.1|
   |    TBD    |IPv4 Remote ASBR ID  |   25/22      | [RFC5316]/3.3.2|
   |           |                     |              | [RFC5392]/3.3.2|
   |    TBD    |IPv6 Remote ASBR ID  |   26/24      | [RFC5316]/3.3.3|
   |           |                     |              | [RFC5392]/3.3.3|
   +-----------+---------------------+--------------+----------------+


3.3.3. Topology Reconstruction.

   When SDN Controller gets such information from BGP-LS protocol, it
   should compares the proximity of the redistributed prefixes. If they
   are under the same scope, then it should find the corresponding
   associated "redistributed route originator" TLV, build the link
   between these two originators.

   After iterating the above procedures for all of the redistributed
   prefixes, the SDN controller can then draw the connection topology
   between different domains automatically.



4. Security Considerations

   TBD



5. IANA Considerations

   TBD



<A.Wang et al.>       Expires September 4, 2018               [Page 6]

Internet-Draft BGP-LS extend for inter-AS topology retrieval   March 5,
2018
6. Conclusions

   TBD



7. References

7.1. Normative References

   [RFC2328] J. Moy, "OSPF Version 2",RFC2328, April 1998
   http://www.rfc-editor.org/info/rfc2328

   [RFC 5316] M. Chen, R. Zhang, X. Duan, "ISIS Extensions in Support
   of Inter-Autonomous System (AS) MPLS and GMPLS Traffic Engineering",
   RFC5316, December 2008, http://www.rfc-editor.org/info/rfc5316

   [RFC5392] M. Chen, R. Zhang, X. Duan, "OSPF Extensions in Support of
   Inter-Autonomous System (AS) MPLS and GMPLS Traffic Engineering",
   RFC5392, January 2009, http://www.rfc-editor.org/info/rfc5392

   [RFC7752] H. Gredler, Ed., J. Medved, S. Previdi, A. Farrel, S. Ray,
   "North-Bound Distribution of Link-State and Traffic Engineering (TE)
   Information Using BGP ", RFC7752, March 2016,
   https://tools.ietf.org/html/rfc7752

   [RFC7794] L. Ginsberg, Ed., B. Decraene, S. Previdi, X. Xu, U.
   Chunduri, "IS-IS Prefix Attributes for Extended IPv4 and IPv6
   Reachability", RFC7794, March 2016

7.2. Informative References

   [I-D.ietf-idr-bgpls-segment-routing-epe]

     S. Previdi, C. Filsfils, K. Patel, S. Ray, J. Dong, "BGP-LS
       extensions for Segment Routing BGP Egress Peer Engineering",



<A.Wang et al.>       Expires September 4, 2018               [Page 7]

Internet-Draft BGP-LS extend for inter-AS topology retrieval   March 5,
2018
       draft-ietf-idr-bgpls-segment-routing-epe(work in progress),
       December, 2017

   [I-D.ietf-idr-bgpls-segment-routing-ext]

       S.Previdi, K.Talaulikar, C.Filsfils, H.Gredler, M.Chen, "BGP
       Link-State extensions for Segment Routing", [draft-ietf-idr-bgp-
       ls-segment-routing-ext](work in progress), January, 2018

   [I-D.ietf-teas-native-ip-scenarios]

       A. Wang, Xiaohong Huang, Caixia Kou, Lu Huang, Penghui Mi, "CCDR
          Scenario, Simulation and Suggestion", [draft-ietf-teas-native-
          ip-scenarios](work in progress), February, 2018

   [draft-ietf-ospf-ospfv3-lsa-extend]

       A.Lindem, A.Roy, D.Goethals, V.Reddy Vallem, "OSPFv3 LSA
       Extendibility", https://datatracker.ietf.org/doc/draft-ietf-ospf-
       ospfv3-lsa-extend/ (work in progess), January 2018







8. Acknowledgments

   TBD.



Authors' Addresses

   Aijun Wang
   China Telecom
   Beiqijia Town, Changping District
   Beijing,China

   Email: wangaj.bri@chinatelecom.cn









<A.Wang et al.>       Expires September 4, 2018               [Page 8]

