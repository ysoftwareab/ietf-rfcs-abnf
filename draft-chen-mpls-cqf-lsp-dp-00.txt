



Network Working Group                                            Z. Chen
Internet-Draft                                                  L. Qiang
Intended status: Informational                                    Huawei
Expires: September 10, 2019                                March 9, 2019


         MPLS-LSP Data Plane for Cyclic Queuing and Forwarding
                     draft-chen-mpls-cqf-lsp-dp-00

Abstract

   Large-scale Deterministic Network (LDN) [ldn] aims to achieve bounded
   latency forwarding on layer-3 networks that contain long-distance
   links, large number of nodes and flows.  LDN requires a data plane
   mechanism to indicate different forwarding cycles in the upstream
   node.  This document proposes to use multiple MPLS labels to indicate
   this kind of information, for MPLS-LSP data plane.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on September 10, 2019.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents



Chen & Qiang           Expires September 10, 2019               [Page 1]

Internet-Draft              Abbreviated-Title                 March 2019


   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction (LDN Background) . . . . . . . . . . . . . . . .   2
   2.  MPLS-LSP Data Plane for CQF . . . . . . . . . . . . . . . . .   3
   3.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .   4
   5.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   4
   6.  Normative References  . . . . . . . . . . . . . . . . . . . .   4
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Introduction (LDN Background)

   Large-scale Deterministic Network (LDN) [ldn] aims to achieve bounded
   latency forwarding on layer-3 networks that contain long-distance
   links, large number of nodes and flows.  Figure 1 illustrates the
   basic mechanism of LDN, where an upstream Node A and a downstream
   Node B are considered.  Each interface of a LDN router has three
   cyclic scheduled queues, i.e., at any given time (or cycle), one of
   the queues is sending packets and the others are receiving.


           |  cycle x  | cycle x+1 |
    Node A +-----------+-----------+
                       \
                        \packet
                         \receiving
                          \
                  |        V  |  cycle y+1|
       Node B     +-----------+-----------+
                     cycle y      \packets
                                   \sending
                                    \
                                     \
                                      V

                   Figure 1

   In order to achieve end-to-end bounded latency, LDN requires that all
   packets sent from the upstream router in a specific cycle MUST be
   sent by the downstream router within another (one) specific cycle.



Chen & Qiang           Expires September 10, 2019               [Page 2]

Internet-Draft              Abbreviated-Title                 March 2019


   For example, as shown in Figure 1, the packets sent by Node A within
   cycle x MUST be put into single receiving queue in Node B, and then
   be sent out within cycle y+1.  The mapping relationship between x and
   y+1 could be configured by a centralized controller, or be self-
   learned by each peer of neighbors at the data plane.

   Therefore, LDN requires a data plane mechanism to indicate which
   upstream node's cycle a packet belongs to, so that the downstream
   node could use this indication to put the packet into the right
   receiving queue.  This document proposes to use multiple MPLS labels
   to indicate this kind of information, for MPLS-LSP data plane.

2.  MPLS-LSP Data Plane for CQF


            Allocate labels 1001,1002,1003 for LSP1
          <-----------------------------------------

   +----------------+                  +----------------+
   |   Label:1003   |                  |   Label:3007   |
   |   ----------+  |                  |   ----------+  |
   |    Queue 1  |  |                  |    Queue 1  |  |
   |   ----------+  |                  |   ----------+  |
   |                |                  |                |
   |   Label:1001   |                  |   Label:3008   |
   |   ----------+  |                  |   ----------+  |
   |    Queue 2  |  +------------------+    Queue 2  |  |
   |   ----------+  |                  |   ----------+  |
   |                |                  |                |
   |   Label:1002   |                  |   Label:3009   |
   |   ----------+  |                  |   ----------+  |
   |    Queue 3  |  |                  |    Queue 3  |  |
   |   ----------+  |                  |   ----------+  |
   +----------------+                  +----------------+
     Upstream Node                      Downstream Node
                          Figure 2


   Figure 2 shows the overall mechanism of MPLS-LSP data plane for CQF,
   where the downstream node allocates three different MPLS labels
   (i.e., 1000, 1002, and 1003) for LSP1, and advertises this
   information to the upstream node by using signaling protocols such as
   RSVP-TE.  Each of these labels is associated with a specific queue in
   the upstream node.

   Assume that packets sent from the upstream node's queue 1, queue 2,
   and queue 3 SHOULD be put into the downstream node's queue 3, queue1,
   and queue 2, respectively.  Note that how to establish such mapping



Chen & Qiang           Expires September 10, 2019               [Page 3]

Internet-Draft              Abbreviated-Title                 March 2019


   relationships is out of the scope of this document.  Based on these
   mapping relationships, the downstream node SHOULD install its FIB
   like the one shown in Figure 3.


                  Downstream Node's FIB
    +------------+----------+---------+--------------+
    |  In-label  |  OutIF   |  OutQ   |   Out-label  |
    +------------+----------+---------+--------------+
    |    1003    |    3     |    3    |     3009     |
    +------------+----------+---------+--------------+
    |    1001    |    3     |    1    |     3007     |
    +------------+----------+---------+--------------+
    |    1002    |    3     |    2    |     3008     |
    +------------+----------+---------+--------------+

                       Figure 3


   Therefore, the packets sent from the upstream node's queue 1 will be
   put into the downstream node's queue 3, the packets sent from the
   upstream node's queue 2 will be put into the downstream node's queue
   1, and the packets sent from the upstream node's queue 3 will be put
   into the downstream node's queue 2.  In this way, end-to-end latency
   could be bounded, as per [ldn].

3.  IANA Considerations

   TBD.

4.  Security Considerations

   TBD.

5.  Acknowledgements

   TBD.

6.  Normative References

   [ldn]      Qiang, L., Liu, B., Eckert, T., and L. Geng, "Large-Scale
              Deterministic Network", March 2019.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.




Chen & Qiang           Expires September 10, 2019               [Page 4]

Internet-Draft              Abbreviated-Title                 March 2019


Authors' Addresses

   Zhe Chen
   Huawei

   Email: chenzhe17@huawei.com


   Li Qiang
   Huawei

   Email: qiangli3@huawei.com







































Chen & Qiang           Expires September 10, 2019               [Page 5]
