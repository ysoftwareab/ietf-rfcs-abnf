<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>RTP Payload Format for SMPTE 336M Encoded Data</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Conventions, Definitions and Acronyms">
<link href="#rfc.section.3" rel="Chapter" title="3 Media Format Background">
<link href="#rfc.section.4" rel="Chapter" title="4 Payload Format">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 RTP Header Usage">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Payload Data">
<link href="#rfc.section.4.2.1" rel="Chapter" title="4.2.1 The KLVunit">
<link href="#rfc.section.4.2.2" rel="Chapter" title="4.2.2 KLVunit Mapping to RTP Packet Payload">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Implementation Considerations">
<link href="#rfc.section.4.3.1" rel="Chapter" title="4.3.1 Loss of Data">
<link href="#rfc.section.4.3.1.1" rel="Chapter" title="4.3.1.1 Damaged KLVunits">
<link href="#rfc.section.4.3.1.2" rel="Chapter" title="4.3.1.2 Treatment of Damaged KLVunits">
<link href="#rfc.section.5" rel="Chapter" title="5 Congestion Control">
<link href="#rfc.section.6" rel="Chapter" title="6 Payload Format Parameters">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Media Type Definition">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Mapping to SDP">
<link href="#rfc.section.6.2.1" rel="Chapter" title="6.2.1 Offer/Answer Model and Declarative Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 IANA Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Security Considerations">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.references.1" rel="Chapter" title="9.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="9.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document specifies the payload format for packetization of KLV (Key-Length-Value) Encoded Data, as defined by the Society of Motion Picture and Television Engineers (SMPTE) in SMPTE 336M, into the Real-time Transport Protocol (RTP).  " />
  <meta name="description" content="This document specifies the payload format for packetization of KLV (Key-Length-Value) Encoded Data, as defined by the Society of Motion Picture and Television Engineers (SMPTE) in SMPTE 336M, into the Real-time Transport Protocol (RTP).  " />
  <meta name="keywords" content="RTP, KLV, SMPTE, 336M" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Payload Working Group</td>
<td class="right">J.D. Downs, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">PAR Government Systems Corp.</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">J.A. Arbeiter, Ed.</td>
</tr>
<tr>
<td class="left">Expires: December 17, 2011</td>
<td class="right">June 15, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">RTP Payload Format for SMPTE 336M Encoded Data<br />
  <span class="filename">draft-ietf-payload-rtp-klv-01</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document specifies the payload format for packetization of KLV (Key-Length-Value) Encoded Data, as defined by the Society of Motion Picture and Television Engineers (SMPTE) in SMPTE 336M, into the Real-time Transport Protocol (RTP).  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on December 17, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Conventions, Definitions and Acronyms</a>
</li>
<li>3.   <a href="#rfc.section.3">Media Format Background</a>
</li>
<li>4.   <a href="#rfc.section.4">Payload Format</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">RTP Header Usage</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Payload Data</a>
</li>
<li>4.2.1.   <a href="#rfc.section.4.2.1">The KLVunit</a>
</li>
<li>4.2.2.   <a href="#rfc.section.4.2.2">KLVunit Mapping to RTP Packet Payload</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Implementation Considerations</a>
</li>
<li>4.3.1.   <a href="#rfc.section.4.3.1">Loss of Data</a>
</li>
<li>4.3.1.1.   <a href="#rfc.section.4.3.1.1">Damaged KLVunits</a>
</li>
<li>4.3.1.2.   <a href="#rfc.section.4.3.1.2">Treatment of Damaged KLVunits</a>
</li>
<li>5.   <a href="#rfc.section.5">Congestion Control</a>
</li>
<li>6.   <a href="#rfc.section.6">Payload Format Parameters</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Media Type Definition</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Mapping to SDP</a>
</li>
<li>6.2.1.   <a href="#rfc.section.6.2.1">Offer/Answer Model and Declarative Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">IANA Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Security Considerations</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li>9.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>9.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">This document specifies the payload format for packetization of KLV (Key-Length-Value) Encoded Data, as defined by the Society of Motion Picture and Television Engineers (SMPTE) in <a href="#SMPTE336M">[SMPTE336M]</a>, into the Real-time Transport Protocol (RTP) <a href="#RFC3550">[RFC3550]</a>.  </p>
<p id="rfc.section.1.p.2">The payload format is defined in such a way that arbitrary KLV data can be carried.  No restrictions are placed on which KLV data keys can be used.  </p>
<p id="rfc.section.1.p.3">A brief description of SMPTE 336M, KLV Encoded Data, is given.  The payload format itself, including use of the RTP header fields, is specified in <a href="#payloadfmt">Section 4</a>.  The media type and IANA considerations are also described.  This document concludes with security considerations relevant to this payload format.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Conventions, Definitions and Acronyms</h1>
<p id="rfc.section.2.p.1">The term "KLV item" is used in this document to refer to one single universal key, length, and value triplet, or one single SMPTE Universal Label, encoded as described in <a href="#SMPTE336M">[SMPTE336M]</a>.  </p>
<p id="rfc.section.2.p.2">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Media Format Background</h1>
<p><a href="#SMPTE336M">[SMPTE336M]</a>, Data Encoding Protocol Using Key-Length-Value, defines a byte-level data encoding protocol for representing data items and data groups.  This encoding protocol definition is independent of the application or transportation method used.  </p>
<p id="rfc.section.3.p.2">SMPTE 336M data encoding can be applied to a wide variety of binary data.  This encoding has been used to provide diverse and rich metadata sets that describe or enhance associated video presentations.  Use of SMPTE 336M encoded metadata in conjunction with video has enabled improvements in multimedia presentations, content management and distribution, archival and retrieval, and production workflow.  </p>
<p id="rfc.section.3.p.3">The SMPTE 336M standard defines a Key-Length-Value (KLV) triplet as a data interchange protocol for data items or data groups where the Key identifies the data, the Length specifies the length of the data and the Value is the data itself.  The KLV protocol provides a common interchange point for all compliant applications irrespective of the method of implementation or transport.  </p>
<p id="rfc.section.3.p.4">The standard also provides methods for combining associated KLV triplets in data sets where the set of KLV triplets is itself coded with KLV data coding protocol.  Such sets can be coded in either full form (Universal Sets) or in one of four increasingly bit-efficient forms (Global Sets, Local Sets, Variable Length Packs and Defined Length Packs).  The standard provides a definition of each of these data constructs.  </p>
<p id="rfc.section.3.p.5">The standard also describes implications of KLV coding including the use of a SMPTE Universal Label (UL) as a value within a KLV coding triplet or whose meaning is entirely conveyed by the SMPTE UL itself.  The two kinds of usage for such standalone SMPTE ULs are a) as a value in a KLV construct and b) as a Key that has no Length and no Value.  </p>
<p id="rfc.section.3.p.6">The standard also defines the use of KLV coding to provide a means to carry information that is registered with a non-SMPTE external agency.  </p>
<p id="rfc.section.3.p.7">The encoding byte range (length of the payload) can accommodate unusually large volumes of data.  Consequently, a specific application of KLV encoding might require only a limited operating data range and those details shall be defined in a relevant application document.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#payloadfmt" id="payloadfmt">Payload Format</a>
</h1>
<p id="rfc.section.4.p.1">The main goal of the payload format design for SMPTE 336M data is to provide carriage of SMPTE 336M data over RTP in a simple, yet robust manner.  All forms of SMPTE 336M data can be carried by the payload format.  The payload format maintains simplicity by using only the standard RTP headers and not defining any payload headers.  </p>
<p id="rfc.section.4.p.2">SMPTE 336M KLV data is broken into KLVunits (see <a href="#klvunit">Section 4.2.1</a>) based on source data timing.  Each KLVunit is then placed into one or more RTP packet payloads.  The RTP header marker bit is used to assist receivers in locating the boundaries of KLVunits.  </p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#rtpheader" id="rtpheader">RTP Header Usage</a>
</h1>
<p id="rfc.section.4.1.p.1">This payload format uses the RTP packet header fields as described in the table below: </p>
<div id="#rfc.table.1"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Field</th>
<th class="left">Usage</th>
</tr></thead>
<tbody>
<tr>
<td class="left">Timestamp </td>
<td class="left">The RTP Timestamp encodes the instant along a presentation timeline that the entire KLVunit encoded in the packet payload is to be presented.  When one KLVunit is placed in multiple RTP packets, the RTP timestamp of all packets comprising that KLVunit MUST be the same.  The timestamp clock frequency SHALL be defined as a parameter to the <a href="#payloadformat">payload format</a> <cite title="NONE">[payloadformat]</cite>.  </td>
</tr>
<tr>
<td class="left">M-bit </td>
<td class="left">The RTP header marker bit (M) SHALL be set to '1' for any RTP packet which contains the final byte of a KLVunit.  For all other packets, the RTP header marker bit SHALL be set to '0'.  This allows receivers to pass a KLVunit for parsing/decoding immediately upon receipt of the last RTP packet comprising the KLVunit.  Without this, a receiver would need to wait for the next RTP packet with a different timestamp to arrive, thus signaling the end of one KLVunit and the start of another.  </td>
</tr>
</tbody>
</table>
<p id="rfc.section.4.1.p.2">The remaining RTP header fields are used as specified in <a href="#RFC3550">[RFC3550]</a>.  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Payload Data</h1>
<h1 id="rfc.section.4.2.1">
<a href="#rfc.section.4.2.1">4.2.1.</a> <a href="#klvunit" id="klvunit">The KLVunit</a>
</h1>
<p id="rfc.section.4.2.1.p.1">A KLVunit is a logical collection of all KLV items that are to be presented at a specific time.  A KLVunit is comprised of one or more KLV items.  Compound items (sets, packs) are allowed as per <a href="#SMPTE336M">[SMPTE336M]</a>, but the contents of a compound item MUST NOT be split across two KLVunits.  Multiple KLV items in a KLVunit occur one after another with no padding or stuffing between items.  </p>
<h1 id="rfc.section.4.2.2">
<a href="#rfc.section.4.2.2">4.2.2.</a> <a href="#klvunit_mapping" id="klvunit_mapping">KLVunit Mapping to RTP Packet Payload</a>
</h1>
<p id="rfc.section.4.2.2.p.1">An RTP packet payload SHALL contain one, and only one, KLVunit or a fragment thereof.  KLVunits small enough to fit into a single RTP packet (RTP packet size is up to implementation but should consider underlying transport/network factors such as MTU limitations) are placed directly into the payload of the RTP packet, with the first byte of the KLVunit (which is the first byte of a KLV universal key) being the first byte of the RTP packet payload.  </p>
<p id="rfc.section.4.2.2.p.2">KLVunits too large to fit into a single RTP packet payload MAY span multiple RTP packet payloads.  When this is done, the KLVunit data MUST be sent in sequential byte order, such that when all RTP packets comprising the KLVunit are arranged in sequence number order, concatenating the payload data together exactly reproduces the original KLVunit.  </p>
<p id="rfc.section.4.2.2.p.3">Additionally, when a KLVunit is fragmented across multiple RTP packets, all RTP packets transporting the fragments a KLVunit MUST have the same timestamp.  </p>
<p id="rfc.section.4.2.2.p.4">KLVunits are bounded with changes in RTP packet timestamps. The marker (M) bit in the RTP packet headers marks the last RTP packet comprising a KLVunit (see <a href="#rtpheader">Section 4.1</a>).  </p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> Implementation Considerations</h1>
<h1 id="rfc.section.4.3.1">
<a href="#rfc.section.4.3.1">4.3.1.</a> <a href="#loss_of_data" id="loss_of_data">Loss of Data</a>
</h1>
<p id="rfc.section.4.3.1.p.1">RTP is generally deployed in network environments where packet loss might occur.  RTP header fields enable detection of lost packets, as described in <a href="#RFC3550">[RFC3550]</a>.  When transmitting payload data described by this payload format, packet loss can cause the loss of whole KLVunits or portions thereof.  </p>
<h1 id="rfc.section.4.3.1.1">
<a href="#rfc.section.4.3.1.1">4.3.1.1.</a> Damaged KLVunits</h1>
<p id="rfc.section.4.3.1.1.p.1">A damaged KLVunit is any KLVunit that was carried in one or more RTP packets that have been lost.  When a lost packet is detected (through use of the sequence number header field), the receiver: </p>

<ul>
<li>MUST consider any KLVunit presently being received as damaged.  The damaged KLVunit includes all packets prior to the lost one (in sequence number order) back to, but not including, the most recent packet in which the M bit in the RTP header was set to '1'.  </li>
<li>MUST consider all subsequent packets (in sequence number order) up to and including the next one with the M-bit in the RTP header set to '1' as part of a damaged KLVunit.  </li>
</ul>

<p> </p>
<div id="#rfc.figure.1"></div>
<pre>

       +---------+-------------+    +--------------+
       | RTP Hdr | Data        |    |              |
       +---------+-------------+    +--------------+
  .... | ts = 30 | KLV KLV ... |    |              |  &gt;---+
       | M = 1   |             |    |              |      |
       | seq = 5 | ... KLV KLV |    |              |      |
       +---------+-------------+    +--------------+      |
        Last RTP pkt for time 30      Lost RTP Pkt        |
                                        (seq = 6)         |
                                                          |
 +--------------------------------------------------------+
 |
 |     +---------+-------------+    +---------+-------------+
 |     | RTP Hdr |     Data    |    | RTP Hdr |     Data    |
 |     +---------+-------------+    +---------+-------------+
 +--&gt;  | ts = 45 | KLV KLV ... |    | ts = 45 | ... KLV ... | &gt;---+
       | M = 0   |             |    | M = 1   |             |     |
       | seq = 7 | ... KLV ... |    | seq = 8 | ... KLV KLV |     |
       +---------+-------------+    +---------+-------------+     |
          RTP pkt for time 45        Last RTP pkt for time 45     |
           KLVunit carried in these two packets is "damaged"      |
                                                                  |
 +----------------------------------------------------------------+
 |
 |     +---------+-------------+
 |     | RTP Hdr |     Data    |
 |     +---------+-------------+
 +--&gt;  | ts = 55 | KLV KLV ... |   ....
       | M = 1   |             |
       | seq = 9 | ... KLV ... |
       +---------+-------------+
        Last and only RTP pkt
            for time 55

               </pre>
<p id="rfc.section.4.3.1.1.p.2">The example below illustrates how a receiver would handle a lost packet in one possible packet sequence: </p>
<h1 id="rfc.section.4.3.1.2">
<a href="#rfc.section.4.3.1.2">4.3.1.2.</a> Treatment of Damaged KLVunits</h1>
<p id="rfc.section.4.3.1.2.p.1">SMPTE 336M KLV data streams are built in such a way that it is possible to partially recover from errors or missing data in a stream.  Exact specifics of how damaged KLVunits are handled are left to each implementation, as different implementations can have differing capabilities and robustness in their downstream KLV payload processing.  Because some implementations can be particularly limited in their capacity to handle damaged KLVunits, receivers MAY drop damaged KLVunits entirely.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Congestion Control</h1>
<p id="rfc.section.5.p.1">The general congestion control considerations for transporting RTP data apply; see RTP <a href="#RFC3550">[RFC3550]</a> and any applicable RTP profile like AVP <a href="#RFC3551">[RFC3551]</a>.  </p>
<p id="rfc.section.5.p.2">Further, SMPTE 336M data can be encoded in different schemes which reduce the overhead associated with individual data items within the overall stream.  SMPTE 336M grouping constructs, such as local sets and data packs, provide a mechanism to reduce bandwidth requirements.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#payloadformat" id="payloadformat">Payload Format Parameters</a>
</h1>
<p id="rfc.section.6.p.1">This RTP payload format is identified using the application/smpte336m media type which is registered in accordance with <a href="#RFC4855">[RFC4855]</a> and using the template of <a href="#RFC4288">[RFC4288]</a>.  </p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> <a href="#mediatype" id="mediatype">Media Type Definition</a>
</h1>
<p></p>

<ul class="empty">
<li>Type name: application</li>
<li>Subtype name: smpte336m</li>
<li>Required parameters: <ul class="empty"><li>rate: RTP timestamp clock rate. Typically chosen based on sampling rate of metadata being transmitted, but other rates can be specified.  </li></ul>
<p> </p>
</li>
<li>Optional parameters: None</li>
<li>Encoding considerations: This media type is framed and binary; see Section 4.8 of <a href="#RFC4288">[RFC4288]</a>.  </li>
<li>Security considerations: See <a href="#security">Section 8</a> of RFCXXXX (note to RFC editor: please replace XXXX with the number assigned to this RFC).  </li>
<li>Interoperability considerations: Data items in smpte336m can be very diverse. Receivers might only be capable of interpreting a subset of the possible data items; unrecognized items are skipped. Agreement on data items to be used out of band, via application profile or similar, is typical.  </li>
<li>Published specification: RFCXXXX</li>
<li>Applications that use this media type: Streaming of metadata associated with simultaneously streamed video and transmission of <a href="#SMPTE336M">[SMPTE336M]</a> based media formats (e.g. MXF <a href="#SMPTE377M">[SMPTE377M]</a>).  </li>
<li>Additional Information: none</li>
<li>Person &amp; email address to contact for further information: J. Downs &lt;jeff_downs@partech.com&gt;; IETF Payload Working Group &lt;payload@ietf.org&gt;</li>
<li>Intended usage: COMMON</li>
<li>Restrictions on usage: This media type depends on RTP framing, and hence is only defined for transfer via RTP (<a href="#RFC3550">[RFC3550]</a>). Transport within other framing protocols is not defined at this time.  </li>
<li>Author: <ul class="empty">
<li>J. Downs &lt;jeff_downs@partech.com&gt;</li>
<li>J. Arbeiter &lt;jimsgti@gmail.com&gt;</li>
</ul>
<p> </p>
</li>
<li>Change controller: IETF Payload working group delegated from the IESG.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> Mapping to SDP</h1>
<p id="rfc.section.6.2.p.1">The mapping of the above defined payload format media type and its parameters SHALL be done according to Section 3 of <a href="#RFC4855">[RFC4855]</a>.  </p>
<h1 id="rfc.section.6.2.1">
<a href="#rfc.section.6.2.1">6.2.1.</a> Offer/Answer Model and Declarative Considerations</h1>
<p id="rfc.section.6.2.1.p.1">This payload format has no configuration or optional format parameters.  Thus, when offering SMPTE 336M Encoded Data over RTP using SDP in an Offer/Answer model <a href="#RFC3264">[RFC3264]</a> or in a declarative manner (e.g., SDP in the Real-time Streaming Protocol (RTSP) <a href="#RFC2326">[RFC2326]</a> or the Session Announcement Protocol (SAP) <a href="#RFC2974">[RFC2974]</a>), there are no specific considerations.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> IANA Considerations</h1>
<p id="rfc.section.7.p.1">This memo requests that IANA registers application/smpte336m as specified in <a href="#mediatype">Section 6.1</a>.  The media type is also requested to be added to the IANA registry for "RTP Payload Format MIME types" (http://www.iana.org/assignments/rtp-parameters).  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<p id="rfc.section.8.p.1">RTP packets using the payload format defined in this specification are subject to the security considerations discussed in the RTP specification <a href="#RFC3550">[RFC3550]</a>, and in any applicable RTP profile.  The main security considerations for the RTP packet carrying the RTP payload format defined within this memo are confidentiality, integrity and source authenticity.  Confidentiality is achieved by encryption of the RTP payload.  Integrity of the RTP packets through suitable cryptographic integrity protection mechanism.  Cryptographic system may also allow the authentication of the source of the payload.  A suitable security mechanism for this RTP payload format should provide confidentiality, integrity protection and at least source authentication capable of determining if an RTP packet is from a member of the RTP session or not.  </p>
<p id="rfc.section.8.p.2">Note that the appropriate mechanism to provide security to RTP and payloads following this memo may vary.  It is dependent on the application, the transport, and the signalling protocol employed.  Therefore a single mechanism is not sufficient, although if suitable the usage of SRTP <a href="#RFC3711">[RFC3711]</a> is recommended.  Other mechanism that may be used are IPsec <a href="#RFC4301">[RFC4301]</a> and TLS <a href="#RFC5246">[RFC5246]</a> (RTP over TCP), but also other alternatives may exist.  </p>
<p id="rfc.section.8.p.3">This RTP payload format presents the possibility for significant non-uniformity in the receiver-side computational complexity during processing of SMPTE 336M payload data.  Because the length of SMPTE 336M encoded data items is essentially unbounded, receivers must take care when allocating resources used in processing.  It is trivial to construct pathological data that would cause a naive decoder to allocate large amounts of resources, resulting in denial-of-service threats.  Receivers are encouraged to place limits on resource allocation that are within the bounds set forth by any application profile in use.  </p>
<p id="rfc.section.8.p.4">This RTP payload format does not contain any inheritly active content.  However, individual SMPTE 336M KLV items could be defined to convey active content in a particular application.  Therefore, receivers capable of decoding and interpreting such data items should use appropriate caution and security practices.  Receivers not capable of decoding such data items are not at risk; unknown data items are skipped over and discarded according to SMPTE 336M processing rules.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">9.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="SMPTE336M">[SMPTE336M]</b></td>
<td class="top">
<a>Society of Motion Picture and Television Engineers </a>, "<a>SMPTE336M-2007: Data Encoding Protocol Using Key-Length-Value</a>", 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3550">[RFC3550]</b></td>
<td class="top">
<a>Schulzrinne, H.</a>, <a>Casner, S.</a>, <a>Frederick, R.</a> and <a>V. Jacobson</a>, "<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>", STD 64, RFC 3550, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3551">[RFC3551]</b></td>
<td class="top">
<a>Schulzrinne, H.</a> and <a>S. Casner</a>, "<a href="http://tools.ietf.org/html/rfc3551">RTP Profile for Audio and Video Conferences with Minimal Control</a>", STD 65, RFC 3551, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4288">[RFC4288]</b></td>
<td class="top">
<a>Freed, N.</a> and <a>J. Klensin</a>, "<a href="http://tools.ietf.org/html/rfc4288">Media Type Specifications and Registration Procedures</a>", BCP 13, RFC 4288, December 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4855">[RFC4855]</b></td>
<td class="top">
<a>Casner, S.</a>, "<a href="http://tools.ietf.org/html/rfc4855">Media Type Registration of RTP Payload Formats</a>", RFC 4855, February 2007.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">9.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="SMPTE377M">[SMPTE377M]</b></td>
<td class="top">
<a>Society of Motion Picture and Television Engineers </a>, "<a>SMPTE377M-2004: Material Exchange Format (MXF) File Format Specification</a>", 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2326">[RFC2326]</b></td>
<td class="top">
<a href="mailto:schulzrinne@cs.columbia.edu" title="Columbia University, Dept. of Computer Science">Schulzrinne, H.</a>, <a href="mailto:anup@netscape.com" title="Netscape Communications Corp.">Rao, A.</a> and <a href="mailto:robla@real.com" title="RealNetworks">R. Lanphier</a>, "<a href="http://tools.ietf.org/html/rfc2326">Real Time Streaming Protocol (RTSP)</a>", RFC 2326, April 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2974">[RFC2974]</b></td>
<td class="top">
<a>Handley, M.</a>, <a>Perkins, C.</a> and <a>E. Whelan</a>, "<a href="http://tools.ietf.org/html/rfc2974">Session Announcement Protocol</a>", RFC 2974, October 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3264">[RFC3264]</b></td>
<td class="top">
<a>Rosenberg, J.</a> and <a>H. Schulzrinne</a>, "<a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with Session Description Protocol (SDP)</a>", RFC 3264, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3711">[RFC3711]</b></td>
<td class="top">
<a>Baugher, M.</a>, <a>McGrew, D.</a>, <a>Naslund, M.</a>, <a>Carrara, E.</a> and <a>K. Norrman</a>, "<a href="http://tools.ietf.org/html/rfc3711">The Secure Real-time Transport Protocol (SRTP)</a>", RFC 3711, March 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4301">[RFC4301]</b></td>
<td class="top">
<a>Kent, S.</a> and <a>K. Seo</a>, "<a href="http://tools.ietf.org/html/rfc4301">Security Architecture for the Internet Protocol</a>", RFC 4301, December 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5246">[RFC5246]</b></td>
<td class="top">
<a>Dierks, T.</a> and <a>E. Rescorla</a>, "<a href="http://tools.ietf.org/html/rfc5246">The Transport Layer Security (TLS) Protocol Version 1.2</a>", RFC 5246, August 2008.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">J. Downs</span> editor
	  <span class="n hidden">
		<span class="family-name">Downs</span>
	  </span>
	</span>
	<span class="org vcardline">PAR Government Systems Corp.</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">US</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jeff_downs@partech.com">jeff_downs@partech.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">J. Arbeiter</span> editor
	  <span class="n hidden">
		<span class="family-name">Arbeiter</span>
	  </span>
	</span>
	<span class="org vcardline"></span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">US</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jimsgti@gmail.com">jimsgti@gmail.com</a></span>

  </address>
</div>

</body>
</html>