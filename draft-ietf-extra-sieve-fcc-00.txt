



EXTRA                                                       K. Murchison
Internet-Draft                                               B. Gondwana
Updates: 5230, 5429 (if approved)                               FastMail
Intended status: Standards Track                      September 21, 2017
Expires: March 25, 2018


                Sieve Extension: File Carbon Copy (Fcc)
                     draft-ietf-extra-sieve-fcc-00

Abstract

   The Sieve Email Filtering Language consists of action commands that
   can reply to the sender of an incoming message with a generated
   message.  This document defines an extension to such commands to
   allow a copy of the generated reply message to be filed into a target
   mailbox.

Open Issues

   o  Should :fcc be allowed with reject/ereject?

   o  Should there be a separate capability string for each action that
      uses :fcc (e.g. "vacation-fcc")?

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on March 25, 2018.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.





Murchison & Gondwana     Expires March 25, 2018                 [Page 1]

Internet-Draft                  Sieve Fcc                 September 2017


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Conventions Used in This Document . . . . . . . . . . . . . .   2
   3.  The ":fcc" Argument . . . . . . . . . . . . . . . . . . . . .   3
     3.1.  Interaction with Fileinto Extensions  . . . . . . . . . .   3
       3.1.1.  Imap4flags Extension  . . . . . . . . . . . . . . . .   3
       3.1.2.  Mailbox Extension . . . . . . . . . . . . . . . . . .   4
       3.1.3.  Special-Use Extension . . . . . . . . . . . . . . . .   4
       3.1.4.  Extended Example  . . . . . . . . . . . . . . . . . .   4
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .   4
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   6.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   5
     6.1.  Normative References  . . . . . . . . . . . . . . . . . .   5
     6.2.  Informative References  . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Introduction

   The Sieve Email Filtering Language [RFC5228] consists of action
   commands that can reply to the sender of an incoming message with a
   generated message.  Three such commands are defined by the Vacation
   Extension [RFC5230] and the Reject and Extended Reject Extensions
   [RFC5429].  It is sometimes desirable to have an archive of these
   auto-generated reply messages.

   This extension defines a ":fcc" argument to action commands which
   generate reply messages to allow a copy of the reply message to be
   filed into a target mailbox.

   The capability string associated with this extension is "fcc".

2.  Conventions Used in This Document

   Conventions for notations are as in Section 1.1 of [RFC5228],
   including use of the "Usage:" label for the definition of action and
   tagged arguments syntax.




Murchison & Gondwana     Expires March 25, 2018                 [Page 2]

Internet-Draft                  Sieve Fcc                 September 2017


   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   [RFC2119].

3.  The ":fcc" Argument

   Usage:   ":fcc" FCC-OPTIONS <mailbox: string>

   The positional FCC-OPTIONS argument is defined here in ABNF [RFC4234]
   syntax so that it can be modified by other extensions.

   FCC-OPTIONS = ""  ; empty string

   If the optional ":fcc" argument is specified with an action that
   generates a reply message, it instructs the Sieve interpreter to file
   a copy of the message into the target mailbox.  If the specified
   mailbox doesn't exist, the implementation MAY treat it as an error,
   create the mailbox, or file the message into an implementation-
   defined mailbox.

   Example:

   require ["reject", "fcc"];

   if header :contains "Subject" "Make Money Fast" {
       reject :fcc "Junk" "Your message is considered junk email.";
   }

3.1.  Interaction with Fileinto Extensions

   The "fcc" extension can be used with some tagged arguments defined in
   extensions to the "fileinto" action.  The sections below describe its
   interaction with currently defined extensions.  Tagged arguments in
   future extensions to the "fileinto" command should describe their use
   with ":fcc", if any.

3.1.1.  Imap4flags Extension

   This document extends the definition of the ":flags" [RFC5232] tagged
   argument so that it can be used as an FCC-OPTIONS to the ":fcc"
   argument.

   FCC-OPTIONS =/ [":flags" <list-of-flags: string-list>]

   If the optional ":flags" argument is specified with ":fcc", it
   instructs the Sieve interpreter to set the IMAP4 flags provided in




Murchison & Gondwana     Expires March 25, 2018                 [Page 3]

Internet-Draft                  Sieve Fcc                 September 2017


   the subsequent argument when the the reply message is filed into the
   target mailbox.

3.1.2.  Mailbox Extension

   This document extends the definition of the ":create" [RFC5490]
   tagged argument so that it can be used as an FCC-OPTIONS to the
   ":fcc" argument.

   FCC-OPTIONS =/ [":create"]

   If the optional ":create" argument is specified with ":fcc", it
   instructs the Sieve interpreter to create the target mailbox, if
   needed, before attempting to file the reply message into the target
   mailbox.

3.1.3.  Special-Use Extension

   This document extends the definition of the ":specialuse"
   [I-D.ietf-extra-sieve-special-use] tagged argument so that it can be
   used as an FCC-OPTIONS to the ":fcc" argument.

   FCC-OPTIONS =/ [":specialuse <special-use-flag: string>"]

   If the optional ":specialuse" argument is specified with ":fcc", it
   instructs the Sieve interpreter to check whether a mailbox exists
   with the specific special-use flag assigned to it.  If such a mailbox
   exists, the reply message is filed into the special-use mailbox.
   Otherwise, the reply message is filed into the target mailbox.

   If both the optional ":specialuse" and ":create" arguments are
   specified with ":fcc", the Sieve interpreter is instructed to create
   the target mailbox per Section 4.1 of
   [I-D.ietf-extra-sieve-special-use], if needed.

3.1.4.  Extended Example

require ["vacation", "fcc", "mailbox", "special-use", "imap4flags"];

vacation :days 7
         :fcc :specialuse "\\Sent" :create :flags ["\\Seen"] "INBOX.Sent"
         :from "hemingway@example.com" "Gone Fishin';

4.  Security Considerations

   The "fcc" extension does not raise any other security considerations
   that are not already present in [RFC5228], [RFC5429], [RFC5230], and
   [RFC6131].



Murchison & Gondwana     Expires March 25, 2018                 [Page 4]

Internet-Draft                  Sieve Fcc                 September 2017


5.  IANA Considerations

6.  References

6.1.  Normative References

   [I-D.ietf-extra-sieve-special-use]
              Bosch, S., "Sieve Email Filtering: Delivering to Special-
              Use Mailboxes", draft-ietf-extra-sieve-special-use-00
              (work in progress), September 2017.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC4234]  Crocker, D., Ed. and P. Overell, "Augmented BNF for Syntax
              Specifications: ABNF", RFC 4234, DOI 10.17487/RFC4234,
              October 2005, <https://www.rfc-editor.org/info/rfc4234>.

   [RFC5228]  Guenther, P., Ed. and T. Showalter, Ed., "Sieve: An Email
              Filtering Language", RFC 5228, DOI 10.17487/RFC5228,
              January 2008, <https://www.rfc-editor.org/info/rfc5228>.

   [RFC5230]  Showalter, T. and N. Freed, Ed., "Sieve Email Filtering:
              Vacation Extension", RFC 5230, DOI 10.17487/RFC5230,
              January 2008, <https://www.rfc-editor.org/info/rfc5230>.

   [RFC5232]  Melnikov, A., "Sieve Email Filtering: Imap4flags
              Extension", RFC 5232, DOI 10.17487/RFC5232, January 2008,
              <https://www.rfc-editor.org/info/rfc5232>.

   [RFC5429]  Stone, A., Ed., "Sieve Email Filtering: Reject and
              Extended Reject Extensions", RFC 5429,
              DOI 10.17487/RFC5429, March 2009,
              <https://www.rfc-editor.org/info/rfc5429>.

   [RFC5490]  Melnikov, A., "The Sieve Mail-Filtering Language --
              Extensions for Checking Mailbox Status and Accessing
              Mailbox Metadata", RFC 5490, DOI 10.17487/RFC5490, March
              2009, <https://www.rfc-editor.org/info/rfc5490>.

6.2.  Informative References

   [RFC6131]  George, R. and B. Leiba, "Sieve Vacation Extension:
              "Seconds" Parameter", RFC 6131, DOI 10.17487/RFC6131, July
              2011, <https://www.rfc-editor.org/info/rfc6131>.




Murchison & Gondwana     Expires March 25, 2018                 [Page 5]

Internet-Draft                  Sieve Fcc                 September 2017


Authors' Addresses

   Kenneth Murchison
   FastMail Pty Ltd
   Level 2, 114 William Street
   Melbourne, VIC  3000
   Australia

   Email: murch@fastmailteam.com


   Bron Gondwana
   FastMail Pty Ltd
   Level 2, 114 William Street
   Melbourne, VIC  3000
   Australia

   Email: brong@fastmailteam.com

































Murchison & Gondwana     Expires March 25, 2018                 [Page 6]
