<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Traversal Using Relays around NAT (TURN) Uniform Resource Identifiers</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Traversal Using Relays around NAT (TURN) Uniform Resource Identifiers">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">M. Petit-Huguenin</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">(Unaffiliated)</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">August 20, 2009</td></tr>
<tr><td class="header">Expires: February 21, 2010</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Traversal Using Relays around NAT (TURN) Uniform Resource Identifiers<br />draft-ietf-behave-turn-uri-03</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on February 21, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>This document defines two URI schemes and the resolution mechanism to generate a list of server transport addresses that can be tried to create a Traversal Using Relays around NAT (TURN) allocation.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Terminology<br />
<a href="#syntax">3.</a>&nbsp;
Syntax of a TURN or TURNS URI<br />
<a href="#resolution">4.</a>&nbsp;
TURN or TURNS URI Resolution<br />
<a href="#anchor3">5.</a>&nbsp;
Example<br />
<a href="#security">6.</a>&nbsp;
Security Considerations<br />
<a href="#anchor4">7.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">7.1.</a>&nbsp;
TURN URI Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">7.2.</a>&nbsp;
TURNS URI Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">7.3.</a>&nbsp;
RELAY Application Service Tag Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">7.4.</a>&nbsp;
turn.udp Application Protocol Tag Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">7.5.</a>&nbsp;
turn.tcp Application Protocol Tag Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">7.6.</a>&nbsp;
turn.tls Application Protocol Tag Registration<br />
<a href="#anchor11">8.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#anchor14">Appendix&nbsp;A.</a>&nbsp;
Release notes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">A.1.</a>&nbsp;
Modifications between ietf-03 and ietf-02<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">A.2.</a>&nbsp;
Modifications between ietf-02 and ietf-01<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">A.3.</a>&nbsp;
Modifications between ietf-01 and ietf-00<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">A.4.</a>&nbsp;
Modifications between petithuguenin-03 and ietf-00<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">A.5.</a>&nbsp;
Modifications between petithuguenin-03 and petithuguenin-02<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">A.6.</a>&nbsp;
Modifications between petithuguenin-02 and petithuguenin-01<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">A.7.</a>&nbsp;
Modifications between petithuguenin-01 and petithuguenin-00<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">A.8.</a>&nbsp;
Design Notes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">A.9.</a>&nbsp;
Running Code Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor24">A.10.</a>&nbsp;
TODO List<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
				The <a class='info' href='#I-D.ietf-behave-turn'>TURN specification<span> (</span><span class='info'>Rosenberg, J., Mahy, R., and P. Matthews, &ldquo;Traversal Using Relays around NAT (TURN): Relay Extensions to Session  Traversal Utilities for NAT (STUN),&rdquo; July&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;behave&#8209;turn] defines a process for a TURN client to find TURN servers by using DNS SRV resource records, but this process does not let the TURN server administrators provision the preferred TURN transport protocol between the client and the server and for the TURN client to discover this preference.
				This document defines a <a class='info' href='#RFC3958'>S-NAPTR application<span> (</span><span class='info'>Daigle, L. and A. Newton, &ldquo;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS),&rdquo; January&nbsp;2005.</span><span>)</span></a> [RFC3958] for this purpose.
				This application defines "RELAY" as an application service tag and "turn.udp", "turn.tcp", and "turn.tls" as application protocol tags.
			
</p>
<p>To simplify the provisioning of TURN clients, this document also defines a TURN and a TURNS URI scheme and a resolution mechanism to convert these URIs into a list of IP addresses, ports and TURN transport protocols.
</p>
<p>
				Another usage of the resolution mechanism described in this document would be Remote Hosting as described in <a class='info' href='#RFC3958'>[RFC3958]<span> (</span><span class='info'>Daigle, L. and A. Newton, &ldquo;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS),&rdquo; January&nbsp;2005.</span><span>)</span></a> section 4.4.
				For example a VoIP provider who does not want to deploy TURN servers could use the servers deployed by another company but could still want to provide configuration parameters to its customers without explicitly showing this relationship.
				The mechanism permits one to implement this indirection, without preventing the company hosting the TURN servers from managing them as it see fit.
			
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="syntax"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Syntax of a TURN or TURNS URI</h3>

<p>A TURN/TURNS URI has the following ABNF syntax <a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a>:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
<dfn>turnURI</dfn>   = <cite class='id'>scheme</cite> "<span class='str'>:</span>" <cite class='id'>host</cite> [ "<span class='str'>:</span>" <cite class='id'>port</cite> ] [ "<span class='str'>?transport=</span>" <cite class='id'>transport</cite> ]
<dfn>scheme</dfn>    = "<span class='str'>turn</span>" / "<span class='str'>turns</span>"
<dfn>transport</dfn> = "<span class='str'>udp</span>" / "<span class='str'>tcp</span>" / <cite class='id'>transport-ext</cite>
<dfn>transport-ext</dfn> = <span class='rep'>1*</span><cite class='id'>unreserved</cite>
</pre></div>
<p>&lt;host&gt;, &lt;port&gt; and &lt;unreserved&gt; are specified in <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>.
</p>
<a name="resolution"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
TURN or TURNS URI Resolution</h3>

<p>
				The URI resolution mechanism is used only to create an allocation.
				All other transactions use the IP address, transport and port used for a successful allocation creation.
			
</p>
<p>
				The URI resolution algorithm uses &lt;scheme&gt;, &lt;host&gt;, &lt;port&gt; and &lt;transport&gt; as input.
				It also uses as input a list ordered by preference of TURN transports (UDP, TCP, TLS) supported by the application using the TURN client.
				The output of the algorithm is a list of {IP address, transport, port} tuples that a TURN client can try in order to create an allocation on a TURN server.
			
</p>
<p>
				An Allocate error response as specified in section 6.4 of <a class='info' href='#I-D.ietf-behave-turn'>[I&#8209;D.ietf&#8209;behave&#8209;turn]<span> (</span><span class='info'>Rosenberg, J., Mahy, R., and P. Matthews, &ldquo;Traversal Using Relays around NAT (TURN): Relay Extensions to Session  Traversal Utilities for NAT (STUN),&rdquo; July&nbsp;2009.</span><span>)</span></a> is processed as a failure as specified by <a class='info' href='#RFC3958'>[RFC3958]<span> (</span><span class='info'>Daigle, L. and A. Newton, &ldquo;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS),&rdquo; January&nbsp;2005.</span><span>)</span></a> section 2.2.4.
				The resolution stops when a TURN client gets a successful Allocate response from a TURN server.
				After an allocation succeeds or all the allocations fail, the resolution context MUST be discarded and the URI resolution algorithm MUST be restarted from the beginning for any subsequent allocation.
				Servers blacklisted as described in section 6.4 of <a class='info' href='#I-D.ietf-behave-turn'>[I&#8209;D.ietf&#8209;behave&#8209;turn]<span> (</span><span class='info'>Rosenberg, J., Mahy, R., and P. Matthews, &ldquo;Traversal Using Relays around NAT (TURN): Relay Extensions to Session  Traversal Utilities for NAT (STUN),&rdquo; July&nbsp;2009.</span><span>)</span></a> should not be used for the specified duration even if returned by a subsequent resolution.
			
</p>
<p>First the resolution algorithm checks that the URI can be resolved with the list of TURN transports supported by the application:
</p>
<p>
				</p>
<ul class="text">
<li>If &lt;scheme&gt; is defined as "turn" and &lt;transport&gt; is defined as "udp" but the list of TURN transports supported by the application does not contain UDP then the resolution MUST stop with an error.
</li>
<li>If &lt;scheme&gt; is defined as "turn" and &lt;transport&gt; is defined as "tcp" but the list of TURN transports supported by the application does not contain TCP then the resolution MUST stop with an error.
</li>
<li>If &lt;scheme&gt; is defined as "turns" and &lt;transport&gt; is defined as "udp" then the algorithm MUST stop with an error.
</li>
<li>If &lt;scheme&gt; is defined as "turns" and &lt;transport&gt; is defined as "tcp" but the list of TURN transports supported by the application does not contain TLS then the resolution MUST stop with an error.
</li>
<li>If &lt;scheme&gt; is defined as "turns" and &lt;transport&gt; is not defined but the list of TURN transports supported by the application does not contain TLS then the resolution MUST stop with an error.
</li>
<li>If &lt;transport&gt; is defined but unknown then the resolution MUST stop with an error.
</li>
</ul><p>
			
</p>
<p>
				After verifying the validity of the URI elements, the algorithm applies the steps described below.
				Note that in some steps, &lt;scheme&gt; and &lt;transport&gt; have to be converted to a TURN transport.
				If &lt;scheme&gt; is defined as "turn" and &lt;transport&gt; is defined as "udp" then the TURN UDP transport is used.
				If &lt;scheme&gt; is defined as "turn" and &lt;transport&gt; is defined as "tcp" then the TURN TCP transport is used.
				If &lt;scheme&gt; is defined as "turns" and &lt;transport&gt; is defined as "tcp" then the TURN TLS transport is used.
				This is summarized in <a class='info' href='#conversion'>Table&nbsp;1</a>.
			
</p><br /><hr class="insert" />
<a name="conversion"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">&lt;scheme&gt;</th><th align="left">&lt;transport&gt;</th><th align="left">TURN Transport</th></tr>
<tr>
<td align="left">"turn"</td>
<td align="left">"udp"</td>
<td align="left">UDP</td>
</tr>
<tr>
<td align="left">"turn"</td>
<td align="left">"tcp"</td>
<td align="left">TCP</td>
</tr>
<tr>
<td align="left">"turns"</td>
<td align="left">"tcp"</td>
<td align="left">TLS</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
				</p>
<ol class="text">
<li>
						If &lt;host&gt; is an IP address then it indicates the specific IP address to be used.
						If &lt;port&gt; is not defined, the default port declared in <a class='info' href='#I-D.ietf-behave-turn'>[I&#8209;D.ietf&#8209;behave&#8209;turn]<span> (</span><span class='info'>Rosenberg, J., Mahy, R., and P. Matthews, &ldquo;Traversal Using Relays around NAT (TURN): Relay Extensions to Session  Traversal Utilities for NAT (STUN),&rdquo; July&nbsp;2009.</span><span>)</span></a> for the SRV service name defined in &lt;scheme&gt; is used.
						If &lt;transport&gt; is defined then &lt;scheme&gt; and &lt;transport&gt; are converted to a TURN transport as specified in <a class='info' href='#conversion'>Table&nbsp;1</a>.
						If &lt;transport&gt; is not defined, the TURN transports supported by the application are tried by preference order.
						If the TURN client cannot contact a TURN server with this IP address and port on any of the transports supported by the application then the resolution MUST stop with an error.
						<br />
<br />

					
</li>
<li>
						If &lt;host&gt; is a domain name and &lt;port&gt; is defined, then &lt;host&gt; is resolved to a list of IP addresses via DNS A and AAAA queries.
						If &lt;transport&gt; is defined, then &lt;scheme&gt; and &lt;transport&gt; are converted to a TURN transport as specified in <a class='info' href='#conversion'>Table&nbsp;1</a>.
						If &lt;transport&gt; is not defined, the TURN transports supported by the application are tried in preference order.
						If the TURN client cannot contact a TURN server with this port and any combination of transports supported by the application and resolved IP addresses then the resolution MUST stop with an error.
						The TURN client can choose the order to contact the resolved IP addresses in any implementation-specific way.
						<br />
<br />

					
</li>
<li>
						If &lt;host&gt; is a domain name and &lt;port&gt; is not defined but &lt;transport&gt; is defined, then &lt;host&gt; is converted to a list of IP address and port tuples via a DNS SRV query as defined in <a class='info' href='#I-D.ietf-behave-turn'>[I&#8209;D.ietf&#8209;behave&#8209;turn]<span> (</span><span class='info'>Rosenberg, J., Mahy, R., and P. Matthews, &ldquo;Traversal Using Relays around NAT (TURN): Relay Extensions to Session  Traversal Utilities for NAT (STUN),&rdquo; July&nbsp;2009.</span><span>)</span></a> section 6.1.
						&lt;scheme&gt; is used for the service name and &lt;transport&gt; is used for the protocol name in the <a class='info' href='#RFC2782'>SRV algorithm<span> (</span><span class='info'>Gulbrandsen, A., Vixie, P., and L. Esibov, &ldquo;A DNS RR for specifying the location of services (DNS SRV),&rdquo; February&nbsp;2000.</span><span>)</span></a> [RFC2782].
						If the TURN client cannot contact a TURN server at any of the IP address, port and transport tuples returned by the SRV algorithm then the resolution MUST stop with an error.
						The SRV algorithm recommends doing an A query if the SRV query returns an error or no SRV RR.
						In this case the default port declared in <a class='info' href='#I-D.ietf-behave-turn'>[I&#8209;D.ietf&#8209;behave&#8209;turn]<span> (</span><span class='info'>Rosenberg, J., Mahy, R., and P. Matthews, &ldquo;Traversal Using Relays around NAT (TURN): Relay Extensions to Session  Traversal Utilities for NAT (STUN),&rdquo; July&nbsp;2009.</span><span>)</span></a> for the SRV service name defined in &lt;scheme&gt; must be used for contacting the TURN server.
						Also in this case, this specification modifies the SRV algorithm by recommending an A and AAAA query.
						<br />
<br />

					
</li>
<li>
						If &lt;host&gt; is a domain name and &lt;port&gt; and &lt;transport&gt; are not defined, then &lt;host&gt; is converted to an ordered list of IP address, port and transport tuples via the S-NAPTR algorithm defined in <a class='info' href='#RFC3958'>[RFC3958]<span> (</span><span class='info'>Daigle, L. and A. Newton, &ldquo;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS),&rdquo; January&nbsp;2005.</span><span>)</span></a> with a "RELAY" Application Service Tag.
						The TURN transports supported by the application are converted in Application Protocol Tags by using "turn.udp" if the TURN transport is UDP, "turn.tcp" if the TURN transport is TCP and "turn.tls" if the TURN transport is TLS.
						The order to try the protocol tags is provided by the ranking of the first set of NAPTR records.
						If multiple protocol tags have the same ranking, the preferred order set by the application is used.
						If the TURN client cannot contact a TURN server with any of the IP address, port and transport tuples returned by the S-NAPTR algorithm, then the resolution MUST stop with an error.
						If the first NAPTR SRV query does not return any result then &lt;host&gt; is converted to a list of IP address and port tuples by using the algorithm specified in step 3 for each of the TURN transports supported by the application in order of preference.
					
</li>
</ol><p>
			
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Example</h3>

<p>With the DNS RRs in <a class='info' href='#dns-rr'>Figure&nbsp;1</a> and an ordered TURN transport list of {TLS, TCP, UDP}, the resolution algorithm will convert the "turn:example.com" URI to the list of IP addresses, port and protocol tuples in <a class='info' href='#result'>Table&nbsp;2</a>.
</p><br /><hr class="insert" />
<a name="dns-rr"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

example.com.
IN NAPTR 100 10 "" "RELAY:turn.udp" "" datagram.example.com.
IN NAPTR 200 10 "" "RELAY:turn.tcp:turn.tls" "" stream.example.com.

datagram.example.com.
IN NAPTR 100 10 "S" "RELAY:turn.udp" "" _udp._turn.example.com.

stream.example.com.
IN NAPTR 100 10 "S" "RELAY:turn.tcp" "" _turn._tcp.example.com.
IN NAPTR 200 10 "A" "RELAY:turn.tls" "" a.example.com.

_turn._udp.example.com.
IN SRV   0   0  3478 a.example.com.

_turn._tcp.example.com.
IN SRV   0   0  5000 a.example.com.

a.example.com.
IN A     192.0.2.1

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="result"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="left">Order</th><th align="left">Protocol</th><th align="left">IP address</th><th align="left">Port</th></tr>
<tr>
<td align="left">1</td>
<td align="left">UDP</td>
<td align="left">192.0.2.1</td>
<td align="left">3478</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">TLS</td>
<td align="left">192.0.2.1</td>
<td align="left">5349</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">TCP</td>
<td align="left">192.0.2.1</td>
<td align="left">5000</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 2&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>Security considerations for TURN are discussed in <a class='info' href='#I-D.ietf-behave-turn'>[I&#8209;D.ietf&#8209;behave&#8209;turn]<span> (</span><span class='info'>Rosenberg, J., Mahy, R., and P. Matthews, &ldquo;Traversal Using Relays around NAT (TURN): Relay Extensions to Session  Traversal Utilities for NAT (STUN),&rdquo; July&nbsp;2009.</span><span>)</span></a>.
</p>
<p>The Application Service Tag and Application Protocol Tags defined in this document do not introduce any specific security issues beyond the security considerations discussed in  <a class='info' href='#RFC3958'>[RFC3958]<span> (</span><span class='info'>Daigle, L. and A. Newton, &ldquo;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS),&rdquo; January&nbsp;2005.</span><span>)</span></a>.
</p>
<p>The "turn" and "turns" URI schemes do not introduce any specific security issues beyond the security considerations discussed in  <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>This section contains the registration information for the "turn" and "turns" URI Schemes (in accordance with <a class='info' href='#RFC4395'>[RFC4395]<span> (</span><span class='info'>Hansen, T., Hardie, T., and L. Masinter, &ldquo;Guidelines and Registration Procedures for New URI Schemes,&rdquo; February&nbsp;2006.</span><span>)</span></a>), one S-NAPTR Application Service Tag, and three S-NAPTR Application Protocol Tags (in accordance with <a class='info' href='#RFC3958'>[RFC3958]<span> (</span><span class='info'>Daigle, L. and A. Newton, &ldquo;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS),&rdquo; January&nbsp;2005.</span><span>)</span></a>).
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
TURN URI Registration</h3>

<p>URI scheme name: turn
</p>
<p>Status: permanent
</p>
<p>URI scheme syntax: See <a class='info' href='#syntax'>Section&nbsp;3<span> (</span><span class='info'>Syntax of a TURN or TURNS URI</span><span>)</span></a>.
</p>
<p>URI scheme semantics: See <a class='info' href='#resolution'>Section&nbsp;4<span> (</span><span class='info'>TURN or TURNS URI Resolution</span><span>)</span></a>.
</p>
<p>Encoding considerations: There are no encoding considerations beyond those in <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>.
</p>
<p>Applications/protocols that use this URI scheme name:
</p>
<p>
					</p>
<blockquote class="text">
<p>The "turn" URI scheme is intended to be used by applications that might need access to a TURN server.
</p>
</blockquote><p>
				
</p>
<p>Interoperability considerations: N/A
</p>
<p>Security considerations: See <a class='info' href='#security'>Section&nbsp;6<span> (</span><span class='info'>Security Considerations</span><span>)</span></a>.
</p>
<p>Contact: Marc Petit-Huguenin &lt;petithug@acm.org&gt;
</p>
<p>Author/Change controller: The IESG
</p>
<p>References: This document.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
TURNS URI Registration</h3>

<p>URI scheme name: turns
</p>
<p>Status: permanent
</p>
<p>URI scheme syntax: See <a class='info' href='#syntax'>Section&nbsp;3<span> (</span><span class='info'>Syntax of a TURN or TURNS URI</span><span>)</span></a>.
</p>
<p>URI scheme semantics: See <a class='info' href='#resolution'>Section&nbsp;4<span> (</span><span class='info'>TURN or TURNS URI Resolution</span><span>)</span></a>.
</p>
<p>Encoding considerations: There are no encoding considerations beyond those in <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>.
</p>
<p>Applications/protocols that use this URI scheme name:
</p>
<p>
					</p>
<blockquote class="text">
<p>The "turns" URI scheme is intended to be used by applications that might need access to a TURN server.
</p>
</blockquote><p>
				
</p>
<p>Interoperability considerations: N/A
</p>
<p>Security considerations: See <a class='info' href='#security'>Section&nbsp;6<span> (</span><span class='info'>Security Considerations</span><span>)</span></a>.
</p>
<p>Contact: Marc Petit-Huguenin &lt;petithug@acm.org&gt;
</p>
<p>Author/Change controller: The IESG
</p>
<p>References: This document.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
RELAY Application Service Tag Registration</h3>

<p>Application Protocol Tag: RELAY
</p>
<p>Intended usage: See <a class='info' href='#resolution'>Section&nbsp;4<span> (</span><span class='info'>TURN or TURNS URI Resolution</span><span>)</span></a>.
</p>
<p>Interoperability considerations: N/A
</p>
<p>Security considerations: See <a class='info' href='#security'>Section&nbsp;6<span> (</span><span class='info'>Security Considerations</span><span>)</span></a>.
</p>
<p>Relevant publications: This document.
</p>
<p>Contact information: Marc Petit-Huguenin &lt;petithug@acm.org&gt;
</p>
<p>Author/Change controller: The IESG
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.4"></a><h3>7.4.&nbsp;
turn.udp Application Protocol Tag Registration</h3>

<p>Application Protocol Tag: turn.udp
</p>
<p>Intended usage: See <a class='info' href='#resolution'>Section&nbsp;4<span> (</span><span class='info'>TURN or TURNS URI Resolution</span><span>)</span></a>.
</p>
<p>Interoperability considerations: N/A
</p>
<p>Security considerations: See <a class='info' href='#security'>Section&nbsp;6<span> (</span><span class='info'>Security Considerations</span><span>)</span></a>.
</p>
<p>Relevant publications: This document.
</p>
<p>Contact information: Marc Petit-Huguenin &lt;petithug@acm.org&gt;
</p>
<p>Author/Change controller: The IESG
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.5"></a><h3>7.5.&nbsp;
turn.tcp Application Protocol Tag Registration</h3>

<p>Application Protocol Tag: turn.tcp
</p>
<p>Intended usage: See <a class='info' href='#resolution'>Section&nbsp;4<span> (</span><span class='info'>TURN or TURNS URI Resolution</span><span>)</span></a>.
</p>
<p>Interoperability considerations: 
</p>
<p>Security considerations: See <a class='info' href='#security'>Section&nbsp;6<span> (</span><span class='info'>Security Considerations</span><span>)</span></a>.
</p>
<p>Relevant publications: This document.
</p>
<p>Contact information: Marc Petit-Huguenin &lt;petithug@acm.org&gt;
</p>
<p>Author/Change controller: The IESG
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.6"></a><h3>7.6.&nbsp;
turn.tls Application Protocol Tag Registration</h3>

<p>Application Protocol Tag: turn.tls
</p>
<p>Intended usage: See <a class='info' href='#resolution'>Section&nbsp;4<span> (</span><span class='info'>TURN or TURNS URI Resolution</span><span>)</span></a>.
</p>
<p>Interoperability considerations: N/A
</p>
<p>Security considerations: See <a class='info' href='#security'>Section&nbsp;6<span> (</span><span class='info'>Security Considerations</span><span>)</span></a>.
</p>
<p>Relevant publications: This document.
</p>
<p>Contact information: Marc Petit-Huguenin &lt;petithug@acm.org&gt;
</p>
<p>Author/Change controller: The IESG
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Acknowledgements</h3>

<p>Thanks to Dave Thaler, Alfred E. Heggestad, Eilon Yardeni, Dan Wing, Alfred Hoenes and Jim Kleck for their comments, suggestions and questions that helped to improve this document.
</p>
<p>This document was written with the xml2rfc tool described in <a class='info' href='#RFC2629'>[RFC2629]<span> (</span><span class='info'>Rose, M., &ldquo;Writing I-Ds and RFCs using XML,&rdquo; June&nbsp;1999.</span><span>)</span></a>.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="ftp://ftp.isi.edu/in-notes/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2782">[RFC2782]</a></td>
<td class="author-text"><a href="mailto:arnt@troll.no">Gulbrandsen, A.</a>, Vixie, P., and <a href="mailto:levone@microsoft.com">L. Esibov</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2782">A DNS RR for specifying the location of services (DNS SRV)</a>,&rdquo; RFC&nbsp;2782, February&nbsp;2000 (<a href="ftp://ftp.isi.edu/in-notes/rfc2782.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3958">[RFC3958]</a></td>
<td class="author-text">Daigle, L. and A. Newton, &ldquo;<a href="http://tools.ietf.org/html/rfc3958">Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS)</a>,&rdquo; RFC&nbsp;3958, January&nbsp;2005 (<a href="ftp://ftp.isi.edu/in-notes/rfc3958.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="ftp://ftp.isi.edu/in-notes/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="ftp://ftp.isi.edu/in-notes/rfc5234.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-behave-turn">[I-D.ietf-behave-turn]</a></td>
<td class="author-text">Rosenberg, J., Mahy, R., and P. Matthews, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-turn-16.txt">Traversal Using Relays around NAT (TURN): Relay Extensions to Session  Traversal Utilities for NAT (STUN)</a>,&rdquo; draft-ietf-behave-turn-16 (work in progress), July&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-turn-16.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2629">[RFC2629]</a></td>
<td class="author-text"><a href="mailto:mrose@not.invisible.net">Rose, M.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2629">Writing I-Ds and RFCs using XML</a>,&rdquo; RFC&nbsp;2629, June&nbsp;1999 (<a href="ftp://ftp.isi.edu/in-notes/rfc2629.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2629.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2629.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4395">[RFC4395]</a></td>
<td class="author-text">Hansen, T., Hardie, T., and L. Masinter, &ldquo;<a href="http://tools.ietf.org/html/rfc4395">Guidelines and Registration Procedures for New URI Schemes</a>,&rdquo; BCP&nbsp;35, RFC&nbsp;4395, February&nbsp;2006 (<a href="ftp://ftp.isi.edu/in-notes/rfc4395.txt">TXT</a>).</td></tr>
</table>

<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Release notes</h3>

<p>This section must be removed before publication as an RFC.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>A.1.&nbsp;
Modifications between ietf-03 and ietf-02</h3>

<p>
					</p>
<ul class="text">
<li>
							A turn:&lt;host&gt;?transport=TCP URI fails if the list of supported transports contains only TLS.
							Using a TLS transport in this case was underspecified.
						
</li>
<li>Reordered paragraphes in section 4.
</li>
<li>Added table for conversion of &lt;scheme&gt; and &lt;transport&gt; to TURN transport.
</li>
<li>Various editorial modifications.
</li>
<li>SRV algorithm changed to "...recommending an A and AAAA query."
</li>
<li>Put back the changelog for the versions before been accepted as WG item.
</li>
</ul><p>
				
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2"></a><h3>A.2.&nbsp;
Modifications between ietf-02 and ietf-01</h3>

<p>
					</p>
<ul class="text">
<li>Shorten the abstract so it does not overflow on the second page.
</li>
<li>Added text to explicitly say that the resolution is only to create an allocation.
</li>
<li>Added text about failures.
</li>
<li>Fixed the default port for TLS in the example.
</li>
<li>Changed some priority in the example for RFC3958 section 2.2.5.
</li>
<li>Fixed the service/protocol order for the SRV RR in the example.
</li>
<li>Removed reference to draft-wood-tae-specifying-uri-transports as it has an experimental status.
</li>
</ul><p>
				
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.3"></a><h3>A.3.&nbsp;
Modifications between ietf-01 and ietf-00</h3>

<p>
					</p>
<ul class="text">
<li>Fixed the contact email.
</li>
<li>Changed the IPR to trust200902.
</li>
<li>Added case for transport defined but unknown.
</li>
<li>Moved RFC 3958 to Normative References.
</li>
<li>Added study of draft-wood-tae-specifying-uri-transports in TODO list.
</li>
</ul><p>
				
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.4"></a><h3>A.4.&nbsp;
Modifications between petithuguenin-03 and ietf-00</h3>

<p>
					</p>
<ul class="text">
<li>Renamed the document to "draft-ietf-behave-turn-uri".
</li>
<li>Changed author affiliation.
</li>
<li>Fixed the text in the IANA considerations.
</li>
</ul><p>
				
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.5"></a><h3>A.5.&nbsp;
Modifications between petithuguenin-03 and petithuguenin-02</h3>

<p>
					</p>
<ul class="text">
<li>Added Running Code Consideration section.
</li>
<li>Added Remote Hosting example in introduction.
</li>
<li>
							Changed back to opaque URIs because of <a class='info' href='#RFC4395'>[RFC4395]<span> (</span><span class='info'>Hansen, T., Hardie, T., and L. Masinter, &ldquo;Guidelines and Registration Procedures for New URI Schemes,&rdquo; February&nbsp;2006.</span><span>)</span></a> Section 2.2.
							Now use "?" as separator.
						
</li>
<li>Added IANA considerations section.
</li>
<li>Added security considerations section.
</li>
</ul><p>
				
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.6"></a><h3>A.6.&nbsp;
Modifications between petithuguenin-02 and petithuguenin-01</h3>

<p>
					</p>
<ul class="text">
<li>Receiving a successful Allocate response stops the resolution mechanism and the resolution context must be discarded after this.
</li>
<li>Changed from opaque to hierarchical URIs because the ";" character is used in &lt;reg-name&gt;.
</li>
<li>Various nits.
</li>
</ul><p>
				
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.7"></a><h3>A.7.&nbsp;
Modifications between petithuguenin-01 and petithuguenin-00</h3>

<p>
					</p>
<ul class="text">
<li>Added &lt;transport-ext&gt; in the ABNF.
</li>
<li>Use the &lt;rulename&gt; and "literal" usages for free-form text defined by <a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a>.
</li>
<li>Fixed various typos.
</li>
<li>Put the rule to convert &lt;scheme&gt; and &lt;transport&gt; to a TURN transport in a separate paragraph.
</li>
<li>Modified the SRV usage to be in line with RFC 2782.
</li>
<li>Clarified that the NAPTR protocol ranking must be used before the application ranking.
</li>
<li>Added an example.
</li>
<li>Added release notes.
</li>
</ul><p>
				
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.8"></a><h3>A.8.&nbsp;
Design Notes</h3>

<p>
					</p>
<ul class="text">
<li>The Application Service Tag is "RELAY" so other relaying mechanisms than TURN (e.g., TWIST) can be registered as Application Protocol Tags.
</li>
<li>S-NAPTR was preferred to U-NAPTR because there is no use case for U-NAPTR.
</li>
<li>
							&lt;password&gt; is not used in the URIs because it is deprecated.
							&lt;username&gt; is not used in the URIs because it is not used to guide the resolution mechanism.
						
</li>
<li>As discussed in Dublin, there is no generic parameters in the URI to prevent compatibity issues.
</li>
<li>Adding optional capabilities (IPv6 allocation, preserve bit, etc...) in the resolution process was rejected at the Dublin meeting.
</li>
</ul><p>
				
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.9"></a><h3>A.9.&nbsp;
Running Code Considerations</h3>

<p>
					</p>
<ul class="text">
<li>
							<a href='http://www.croczilla.com/zap'>Zap</a>.
							Eilon Yardeni, 8x8 Inc.
							Implements version -00
						
</li>
<li>
							<a href='http://ietf.implementers.org/turn-uri-0.1.zip'>Reference Implementation of TURN URI parser and resolver.</a>.
							Marc Petit-Huguenin.
							Implements version -00 to -02
						
</li>
</ul><p>
				
</p>
<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.10"></a><h3>A.10.&nbsp;
TODO List</h3>

<p>(Empty)
					
				
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Marc Petit-Huguenin</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">(Unaffiliated)</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:petithug@acm.org">petithug@acm.org</a></td></tr>
</table>
</body></html>
