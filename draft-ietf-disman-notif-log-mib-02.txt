Internet Draft            Notification Log MIB             13 March 1998
Expires in 6 months

                          Notification Log MIB

                             13 March 1998

                 draft-ietf-disman-notif-log-mib-02.txt

                              Bob Stewart
                          Cisco Systems, Inc.
                           bstewart@cisco.com


                          Status of this Memo

This document is an Internet-Draft.  Internet-Drafts are working
documents of the Internet Engineering Task Force (IETF), its areas, and
its working groups.  Note that other groups may also distribute working
documents as Internet-Drafts.

Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any
time.  It is inappropriate to use Internet- Drafts as reference material
or to cite them other than as ``work in progress.''

To learn the current status of any Internet-Draft, please check the
``1id-abstracts.txt'' listing contained in the Internet- Drafts Shadow
Directories on ds.internic.net (US East Coast), nic.nordu.net (Europe),
ftp.isi.edu (US West Coast), or munnari.oz.au (Pacific Rim).




















Expires 13 March 1998+6 months                                  [Page 1]





Internet Draft            Notification Log MIB             13 March 1998


1.  Abstract

This memo defines an experimental portion of the Management Information
Base (MIB) for use with network management protocols in the Internet
community.  In particular, it describes managed objects used for logging
SNMP notifications.












































Expires 13 March 1998+6 months                                  [Page 2]





Internet Draft            Notification Log MIB             13 March 1998


2.  The SNMP Network Management Framework

{The following boilerplate is out of date and will be replaced when
SNMPv3 boilerplate is available.}

The SNMP Network Management Framework presently consists of three major
components.  They are:

  the SMI, described in RFC 1902 [1] - the mechanisms used for
  describing and naming objects for the purpose of management.

  the MIB-II, STD 17, RFC 1213 [2] - the core set of managed objects for
  the Internet suite of protocols.

  the protocol, RFC 1157 [3] and/or RFC 1905 [4], - the protocol for
  accessing managed objects.

The Framework permits new objects to be defined for the purpose of
experimentation and evaluation.


2.1.  Object Definitions

Managed objects are accessed via a virtual information store, termed the
Management Information Base or MIB.  Objects in the MIB are defined
using the subset of Abstract Syntax Notation One (ASN.1) defined in the
SMI.  In particular, each object type is named by an OBJECT IDENTIFIER,
an administratively assigned name.  The object type together with an
object instance serves to uniquely identify a specific instantiation of
the object.  For human convenience, we often use a textual string,
termed the descriptor, to refer to the object type.



















Expires 13 March 1998+6 months                                  [Page 3]





Internet Draft            Notification Log MIB             13 March 1998


3.  Overview

Systems that support SNMP need a common mechanism for recording
notification information as a hedge against lost Traps.

This MIB provides infrastructure for other MIBs in the form of  a local
logging function.  It is intended strictly for senders of notifications.











































Expires 13 March 1998+6 months                                  [Page 4]





Internet Draft            Notification Log MIB             13 March 1998


4.  Definitions

NOTIFICATION-LOG-MIB DEFINITIONS ::= BEGIN

IMPORTS
    MODULE-IDENTITY, OBJECT-TYPE,
    experimental, Integer32, Unsigned32
    Counter32, Counter64                FROM SNMPv2-SMI
    TimeStamp, TruthValue               FROM SNMPv2-TC
    snmpNotifyTable                     FROM SNMP-NOTIFICATION-MIB
    MODULE-COMPLIANCE, OBJECT-GROUP     FROM SNMPv2-CONF;

notificationLogMIB MODULE-IDENTITY
    LAST-UPDATED "9703131700Z"
    ORGANIZATION "IETF Distributed Management Working Group"
    CONTACT-INFO "Bob Stewart
                  Cisco Systems, Inc.
                  170 West Tasman Drive,
                  San Jose CA 95134-1706.
                  Phone: +1 408 526 4527
                  Email: bstewart@cisco.com"
    DESCRIPTION
        "The MIB module for logging SNMP notifications, that is, Traps
        and Informs."
    ::= { experimental xx }


notificationLogMIBObjects OBJECT IDENTIFIER ::= { notificationLogMIB 1 }

nlmConfig               OBJECT IDENTIFIER ::= { notificationLogMIBObjects 1 }
nlmStats                OBJECT IDENTIFIER ::= { notificationLogMIBObjects 2 }
nlmLog          OBJECT IDENTIFIER ::= { notificationLogMIBObjects 3 }

- --
- -- Configuration Section
- --

nlmConfigEntryLimit OBJECT-TYPE
    SYNTAX      Integer32 {-1..2147483647)
    UNITS       "entries"
    MAX-ACCESS  read-write
    STATUS      current
    DESCRIPTION
        "The maximum number of entries that can be held in nlmLogTable.
        A value of -1 indicates no limit."





Expires 13 March 1998+6 months                                  [Page 5]





Internet Draft            Notification Log MIB             13 March 1998


    ::= { nlmConfig 1 }

- --
- -- Notify Table Logging Control Column
- --

nlmConfigNotifyTable OBJECT-TYPE
    SYNTAX      SEQUENCE OF nlmConfigNotifyEntry
    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
        "A column of logging control entries."
    ::= { nlmLog 1 }

nlmConfigNotifyEntry OBJECT-TYPE
    SYNTAX      NlmConfigNotifyEntry
    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
        "A logging control entry."
    AUGMENTS    { snmpNotifyTable }
    ::= { nlmLogTable 1 }

NlmConfigNotifyEntry ::= SEQUENCE {
    nlmConfigNotifyLog          TruthValue
}

nlmConfigNotifyLog OBJECT-TYPE
    SYNTAX     TruthValue
    MAX-ACCESS read-create
    STATUS     current
    DESCRIPTION
        "Control for whether this notification is logged in nlmLogTable."
    DEFVAL { false }
    ::= { nlmConfigNotifyEntry 1 }


- --
- -- Statisitics Section
- --

nlmStatsNotificationsLogged OBJECT-TYPE
    SYNTAX      Counter32
    UNITS       "entries"
    MAX-ACCESS  read-only





Expires 13 March 1998+6 months                                  [Page 6]





Internet Draft            Notification Log MIB             13 March 1998


    STATUS      current
    DESCRIPTION
        "The number of notifications put in the log."
    ::= { nlmStats 1 }

nlmStatsEntriesDiscarded OBJECT-TYPE
    SYNTAX      Counter32
    UNITS       "entries"
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
        "The number of times the oldest log entry was discarded to
        make room for a new entry."
    ::= { nlmStats 2 }

- --
- -- Log Section
- --

- --
- -- Log Table
- --

nlmLogTable OBJECT-TYPE
    SYNTAX      SEQUENCE OF nlmLogEntry
    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
        "A table of notification log entries."
    ::= { nlmLog 1 }

nlmLogEntry OBJECT-TYPE
    SYNTAX      NlmLogEntry
    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
        "A notification log entry.

        Entries appear in this table when notifications occur."
    INDEX       { nlmLogIndex }
    ::= { nlmLogTable 1 }

NlmLogEntry ::= SEQUENCE {
    nlmLogIndex                 Unsigned32,
    nlmLogTime                  TimeStamp,





Expires 13 March 1998+6 months                                  [Page 7]





Internet Draft            Notification Log MIB             13 March 1998


    nlmLogNotificationID        OBJECT IDENTIFIER
}

nlmLogIndex OBJECT-TYPE
    SYNTAX     Unsigned32 (1..4294967295)
    MAX-ACCESS not-accessible
    STATUS     current
    DESCRIPTION
        "A monotonically increasing integer for the sole purpose of
        indexing entries.  When it reaches the maximum value, an
        extremely unlikely event, the agent wraps the value back
        to 1 and may flush existing entries."
    ::= { nlmLogEntry 1 }

nlmLogTime OBJECT-TYPE
    SYNTAX      TimeTicks
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
        "The value of sysUpTime when the entry occurred."
    ::= { nlmLogEntry 2 }

nlmNotificationID OBJECT-TYPE
    SYNTAX      OCTET STRING
    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
        "The NOTIFICATION-TYPE object identifer of the notification that
        occurred."
    ::= { nlmLogEntry 3 }

- --
- -- Log Variable Table
- --

nlmLogVariableTable OBJECT-TYPE
    SYNTAX      SEQUENCE OF nlmLogVariableEntry
    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
        "A table of variables to go with notification log entries."
    ::= { nlmLog 2 }

nlmLogVariableEntry OBJECT-TYPE
    SYNTAX      NlmLogVariableEntry





Expires 13 March 1998+6 months                                  [Page 8]





Internet Draft            Notification Log MIB             13 March 1998


    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
        "A notification log entry variable.

        Entries appear in this table when there are variables in
        the varbind list of a notification in nlmLogTable."
    INDEX       { nlmLogIndex, nlmLogVariableIndex }
    ::= { nlmLogVariableTable 1 }

NlmLogVariableEntry ::= SEQUENCE {
    nlmLogVariableIndex                 Unsigned32,
    nlmLogVariableID                    OBJECT IDENTIFIER,
    nlmLogVariableType                  INTEGER,
    nlmLogVariableCounter32Val  Counter32,
    nlmLogVariableUnsigned32Val Unsigned32,
    nlmLogVariableInteger32Val  Integer32,
    nlmLogVariableOctetStringVal        OCTET STRING,
    nlmLogVariableOidVal                OBJECT IDENTIFIER,
    nlmLogVariableCounter64Val  Counter64
}

nlmLogVariableIndex OBJECT-TYPE
    SYNTAX     Unsigned32 (1..4294967295)
    MAX-ACCESS not-accessible
    STATUS     current
    DESCRIPTION
        "A arbitrary integer for the sole purpose of indexing entries."
    ::= { nlmLogVariableEntry 1 }

nlmLogVariableID OBJECT-TYPE
        SYNTAX     OBJECT IDENTIFIER
        MAX-ACCESS read-only
        STATUS     current
        DESCRIPTION
                "The variable's object identifier."
        ::= { nlmLogVariableEntry 2 }

nlmLogVariableValueType OBJECT-TYPE
    SYNTAX      INTEGER { counter32(1), unsignedOrGauge32(2),
                          timeTicks(3), integer32(4), ipAddress(5),
                          octetString(6), objectId(7), counter64(8) }
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION





Expires 13 March 1998+6 months                                  [Page 9]





Internet Draft            Notification Log MIB             13 March 1998


        "The type of the value. One and only one of the value
        objects that follow will be valid based on this type."
    ::= { nlmLogVariableEntry 3 }

nlmLogVariableCounter32Val OBJECT-TYPE
    SYNTAX      Counter32
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
        "The value when nlmLogVariableType is of 'counter32'."
    ::= { nlmLogVariableEntry 4 }

nlmLogVariableUnsigned32Val OBJECT-TYPE
    SYNTAX      Unsigned32
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
        "The value when nlmLogVariableType is one of 'unsignedOrGauge32'
        or 'timeTicks'."
    ::= { nlmLogVariableEntry 5 }

nlmLogVariableInteger32Val OBJECT-TYPE
    SYNTAX      Integer32
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
        "The value when nlmLogVariableType is 'integer32'."
    ::= { nlmLogVariableEntry 6 }

nlmLogVariableOctetStringVal OBJECT-TYPE
    SYNTAX      OCTET STRING
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
        "The value when nlmLogVariableType is 'ipAddress' or
        'octetString'."
    ::= { nlmLogVariableEntry 7 }

nlmLogVariableOidVal OBJECT-TYPE
    SYNTAX      OBJECT IDENTIFIER
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
        "The value when nlmLogVariableType is 'objectId'."
    ::= { nlmLogVariableEntry 8 }





Expires 13 March 1998+6 months                                 [Page 10]





Internet Draft            Notification Log MIB             13 March 1998


nlmLogVariableCounter64Val OBJECT-TYPE
    SYNTAX      Counter64
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
        "The value when nlmLogVariableType is 'counter64'."
    ::= { nlmLogVariableEntry 9 }


- --
- -- Conformance
- --

notificationLogMIBConformance OBJECT IDENTIFIER ::= { notificationLogMIB 3 }
notificationLogMIBCompliances OBJECT IDENTIFIER ::= {
notificationLogMIBConformance 1 }
notificationLogMIBGroups      OBJECT IDENTIFIER ::= {
notificationLogMIBConformance 2 }

- -- Compliance

notificationLogMIBCompliance MODULE-COMPLIANCE
        STATUS current
        DESCRIPTION
                "The compliance statement for entities which implement
                the Expression MIB."
        MODULE  -- this module
                MANDATORY-GROUPS {
                        notificationLogConfigGroup,
                        notificationLogStatsGroup,
                        notificationLogLogGroup
                }
        ::= { notificationLogMIBCompliances 1 }

- -- Units of Conformance

notificationLogConfigGroup OBJECT-GROUP
        OBJECTS {
                nlmConfigEntryLimit,
                nlmConfigNotifyLog
        }
        STATUS current
        DESCRIPTION
                "Nofication log configuration management."
        ::= { notificationLogMIBGroups 1 }

notificationLogStatsGroup OBJECT-GROUP





Expires 13 March 1998+6 months                                 [Page 11]





Internet Draft            Notification Log MIB             13 March 1998


        OBJECTS {
                nlmStatsNotificationsLogged,
                nlmStatsEntriesDiscarded
        }
        STATUS current
        DESCRIPTION
                "Nofication log statistics."
        ::= { notificationLogMIBGroups 2 }

notificationLogLogGroup OBJECT-GROUP
        OBJECTS {
                nlmLogTime,
                nlmLogNotificationID,

                nlmLogVariableID,
                nlmLogVariableType,
                nlmLogVariableCounter32Val,
                nlmLogVariableUnsigned32Val,
                nlmLogVariableInteger32Val,
                nlmLogVariableOctetStringVal,
                nlmLogVariableOidVal,
                nlmLogVariableCounter64Val
        }
        STATUS current
        DESCRIPTION
                "Nofication log data."
        ::= { notificationLogMIBGroups 3 }

END





















Expires 13 March 1998+6 months                                 [Page 12]





Internet Draft            Notification Log MIB             13 March 1998


5.  References

[1]  SNMPv2 Working Group, Case, J., McCloghrie, K., Rose, M., and
     S. Waldbusser, "Structure of Management Information for version 2
     of the Simple Network Management Protocol (SNMPv2)", RFC 1902,
     January 1996.

[2]  McCloghrie, K., and M. Rose, Editors, "Management Information Base
     for Network Management of TCP/IP-based internets: MIB-II", STD 17,
     RFC 1213, March 1991.

[3]  Case, J., Fedor, M., Schoffstall, M., and J. Davin, "Simple Network
     Management Protocol", RFC 1157, May 1990.

[4]  SNMPv2 Working Group, Case, J., McCloghrie, K., Rose, M., and
     S. Waldbusser, "Protocol Operations for version 2 of the Simple
     Network Management Protocol (SNMPv2)", RFC 1905, January 1996.

































Expires 13 March 1998+6 months                                 [Page 13]





Internet Draft            Notification Log MIB             13 March 1998


6.  Security Considerations

Security issues are not discussed in this memo.


7.  Author's Address

     Bob Stewart
     Cisco Systems, Inc.
     170 West Tasman Drive
     San Jose, CA 95134-1706

     Phone: 408-526-4527
     Email: bstewart@cisco.com




































Expires 13 March 1998+6 months                                 [Page 14]





Internet Draft            Notification Log MIB             13 March 1998


Table of Contents


1 Abstract ........................................................    2
2 The SNMP Network Management Framework ...........................    3
2.1 Object Definitions ............................................    3
3 Overview ........................................................    4
4 Definitions .....................................................    5
5 References ......................................................   13
6 Security Considerations .........................................   14
7 Author's Address ................................................   14







































Expires 13 March 1998+6 months                                 [Page 15]



