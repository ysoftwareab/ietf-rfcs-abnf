
Internet Engineering Task Force                           Stephen Thomas
INTERNET DRAFT                                               AT&T Tridom
<draft-ietf-ipngwg-token-ring-00.txt>                    August 24, 1995


 A Method for the Transmission of IPv6 Packets over Token Ring Networks



Status of this Memo

   This document is an Internet Draft. Internet Drafts are working
   documents of the Internet Engineering Task Force (IETF), its Areas,
   and its Working Groups. Note that other groups may also distribute
   working documents as Internet Drafts.

   Internet Drafts are draft documents valid for a maximum of six
   months. Internet Drafts may be updated, replaced, or obsoleted by
   other documents at any time. It is not appropriate to use Internet
   Drafts as reference material or to cite them other than as a
   "working draft" or "work in progress."

   To learn the current status of any Internet-Draft, please check the
   ``1id-abstracts.txt'' listing contained in the Internet Drafts
   Shadow Directories on ds.internic.net (US East Coast), nic.nordu.net
   (Europe), ftp.isi.edu (US  West  Coast), or munnari.oz.au (Pacific
   Rim).

   Distribution of this memo is unlimited.


Introduction

   This memo specifies the frame format for transmission of IPv6 [IPV6]
   packets and the method of forming IPv6 link-local addresses on Token
   Ring networks [8025]. It also specifies the content of the
   Source/Target Link-layer Address option used the the Router
   Solicitation, Router Advertisement, Neighbor Solicitation, and
   Neighbor Advertisement messages described in [DISC], when those
   messages are transmitted on a Token Ring.


IPv6 Encapsulation

   IPv6 packets are transmitted in LLC/SNAP frames, using long-format
   (48 bit) addresses.  The data field contains the IPv6 header and
   payload. The following figure shows a complete IPv6 frame.










Thomas                   Expires February 1996                  [Page 1]



INTERNET-DRAFT            IPv6 over Token Ring           August 24, 1995


                   +-------+-------+-------+-------+
                   |  SD   |  AC   |  FC   |       |
                   +-----------------------+       |
                   |      Destination Address      |
                   |       +-----------------------+
                   |       |     Source            |
                   +-------+    Address    +-------+
                   |                       | DSAP  |
                   +-------+-------+-------+-------+
                   | SSAP  |  CTL  |      OUI      |
                   +-------+-------+-------+-------+
                   |  OUI  |   EtherType   |       |
                   +-------+---------------+       |
                   |                               |
                   ~  IPv6 header and payload...   ~
                   |                               |
                   +-------------------------------+
                   |              FCS              |
                   +-------+-------+---------------+
                   |  ED   |  FS   |
                   +-------+-------+

   In the presence of source route bridges, a routing information field
   (RIF) may appear immediately after the source address. A RIF is
   present in frames when the most signficant bit of the source address
   is set to one.


Token Ring Header Fields

   SD - Starting Delimiter

   AC - Access Control

   FC - Frame Control

   Destination Address - 48-bit IEEE address of destination station

   Source Address - 48-bit IEEE address of source station

   DSAP - Destination Service Access Point (for LLC/SNAP format, shall
          always contain the value 0xAA)

   SSAP - Source Service Access Point (for LLC/SNAP format, shall
          always contain the value 0xAA)

   CTL - Control Field (for Unnumbered Information, shall always
         contain the value 0x03)





Thomas                    Expires February 1996                 [Page 2]



INTERNET-DRAFT            IPv6 over Token Ring           August 24, 1995


   OUI - Organizationally Unique Identifier (for EtherType encoding,
         shall always contain the value 0x000000)

   EtherType - Protocol type of encapsulated payload (for IPv6, shall
               always contain the value 0x86DD)

   FCS - Frame Check Sequence

   ED - Ending Delimiter

   FS - Frame Status


Maximum Transmission Unit

   IEEE 802.5 networks have a maximum packet size based on the maximum
   time a node may hold the token. This time depends on many factors
   including the data signalling rate and the number of nodes on the
   ring. The determination of maximum packet size becomes even more
   complex when multi-ring networks with bridges are considered.

   The possible ranges for MTU sizes are 256-4472 octets (for 4 Mbit/s
   rings) and 256-17800 octets (for 16 Mbit/s rings). This variation
   suggests that implementations must rely on static configuration or
   router advertisements [DISC] to determine actual MTU sizes. Common
   default values include 2002 octets (4 Mbit/s rings) and 8188 octets
   (16 Mbit/s rings).

   In a environment using source route bridging, the process of
   discovering the MAC-level route to a neighbor can yield the MTU for
   the path to that neighbor. The information is contained in the
   largest frame subfield of the routing information field. The
   following table lists the possible values of that subfield, and the
   IPv6 MTU size that results. If an implementation uses this
   information to determine MTU sizes, it must maintain separate MTU
   values for each neighbor.

                 LF (binary)   MAC MTU      IP MTU

                     000          552         508
                     001         1064        1020
                     010         2088        2044
                     011         4136        4092
                     100         8232        8188









Thomas                    Expires February 1996                 [Page 3]



INTERNET-DRAFT            IPv6 over Token Ring           August 24, 1995


Stateless Autoconfiguration and Link-local Addresses

   The address token [CONF] for a Token Ring interface is the
   interface's built-in 48-bit IEEE 802 address, in canonical bit
   order. A different MAC address set manually or by software should
   not be used as the address token.

   An IPv6 address prefix used for stateless autoconfiguration of a
   Token Ring interface must be 80 bits in length.

   The IPv6 Link-local address [AARCH] for a Token Ring interface is
   formed by appending the interface's IEEE 802 address to the 80-bit
   prefix FE80::.

                   +-------+-------+-------+-------+
                   |  FE      80      00      00   |
                   +-------+-------+-------+-------+
                   |  00      00      00      00   |
                   +-------+-------+-------+-------+
                   |  00      00   |               |
                   +-------+-------+               |
                   |      Token Ring Address       |
                   +-------+-------+-------+-------+


Address Mapping - Unicast

   The procedure for mapping IPv6 addresses into Token Ring link layer
   addresses is described in [DISC]. The Source/Target Link Layer
   Address option has the following form when the link layer is Token
   Ring.

                   +-------+-------+-------+-------+
                   | Type  |Length |               |
                   +-------+-------+               |
                   |      Token Ring Address       |
                   +-------+-------+-------+-------+

   Option Fields:

   Type    1 for Source Link Layer Address
           2 for Target Link Layer Address

   Length  1 (in units of 8 octets)

   Token Ring Address
           The 48-bit IEEE 802 address, in canonical bit order.






Thomas                    Expires February 1996                 [Page 4]



INTERNET-DRAFT            IPv6 over Token Ring           August 24, 1995


Address Mapping - Multicast

   All IPv6 packets with multicast destination addresses are
   transmitted to the Token Ring functional address 03-00-00-20-00-00
   (in canonical form). Note that protocols other than IPv6 may use
   this same functional address, so all frames destined to this address
   are not guaranteed to be IPv6 packets.


Security Considerations

   Security considerations are not addressed in this memo.


References

   [8025] IEEE Standards for Local Area Networks: Token Ring Access
        Method and Physical Layer Specifications. IEEE Std 802.5-1989.

   [AARCH] R. Hinden, S. Deering, IP Version 6 Addressing Architecture.
        Currently draft-ietf-ipngwg-addr-arch-03.txt.

   [CONF]  S. Thomson, IPv6 Stateless Address Autoconfiguration.
        Currently draft-ietf-addrconf-ipv6-03.txt.

   [DISC]  T. Narten, E. Nordmark, W. A. Simpson, Neighbor Discovery
        for IP Version 6 (IPv6).  Currently draft-ietf-ipngwg-
        discovery-01.txt.

   [IPV6]  S. Deering, R. Hinden, Internet Protocol, Version 6 (IPv6)
        Specification.  Currently draft-ietf-ipngwg-ipv6-spec-02.txt.


Author's Address

   Stephen Thomas
   AT&T Tridom                 Phone: (770) 514-3522
   840 Franklin Court          Fax:   (770) 514-3491
   Marietta, GA 30067  USA     Email: stephen.thomas@tridom.com














Thomas                    Expires February 1996                 [Page 5]


