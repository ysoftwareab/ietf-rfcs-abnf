





Internet Engineering Task Force
Internet Draft                                            H. Schulzrinne
                                                             Columbia U.
draft-schulzrinne-simple-iscomposing-00.txt
February 24, 2003
Expires: August 2003


    is-composing Indication for Instant Messaging Using the Session
                       Initiation Protocol (SIP)

STATUS OF THIS MEMO

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress".

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   To view the list Internet-Draft Shadow Directories, see
   http://www.ietf.org/shadow.html.

Abstract

   In instant messaging systems, it is useful to know that the other
   party is composing a message, e.g., typing. This document defines a
   new content type and XML namespace that conveys information about a
   message being composed. The message could be of any type, including
   text, voice or video.












H. Schulzrinne                                                [Page 1]

Internet Draft                is-composing             February 24, 2003


1 Introduction

   By definition, instant messaging is message-based, i.e., a user
   composes a message by typing, speaking or recording a video clip.
   This message is then sent. Unlike email, instant messaging is often
   conversational, so that the other party is waiting for a response. If
   no response is forthcoming, an IM participant side may erroneously
   assume that either the communication partner has left or that it is
   her turn to type again, leading to messaging "crossing on the wire".
   A number of commercial instant messaging systems feature an "is
   typing" indication that is set as soon as one party starts typing a
   message. In this document, we describe a generalized version of this
   indication. It applies to the composition of any media type, not just
   text. For example, it might be used if somebody is recording an audio
   or video clip.

   This indication can be considered somewhat analogous to the comfort
   noise packets that are transmitted in silence-suppressed interactive
   voice conversations.

   The mechanism described here aims to satisfy the requirements in [3].

2 Terminology and Conventions

   This memo makes use of the vocabulary defined in the IMPP Model
   document [1]. Terms such as CLOSED, INSTANT MESSAGE, OPEN, PRESENCE
   SERVICE, PRESENTITY, WATCHER, and WATCHER USER AGENT in the memo are
   used in the same meaning as defined therein. The key words MUST,
   MUSTNOT, REQUIRED, SHOULD, SHOULDNOT, RECOMMENDED, MAY, and OPTIONAL
   in this document are to be interpreted as described in BCP XX, RFC
   2119 [2].

3 Description

   There are two modes of operation, a keep-alive and two-state mode. In
   keep-alive mode, an IM terminal where the user is actively composing
   a message sends an update every few seconds if there has been
   activity such as typing. The messages cease if there is no sign of
   activity during the last interval. This mode has the advantage that
   the rate of is-composing indications is constant, but it adds
   unnecessary overhead for the common case that a message is composed
   in one uninterrupted activity. The keep-alive mode would be useful if
   the is-composing indication can convey additional information, such
   as the amount of content that has been produced. Such fine-grained
   information seems of little practical use, however.

   We choose a two-state mode with the states "idle" and "active". As
   long as the user produces message content, the state remains active.



H. Schulzrinne                                                [Page 2]

Internet Draft                is-composing             February 24, 2003


   If the user stops composing for more than a configured time interval,
   the idle threshold, the state transitions to idle. If a message is
   sent before the idle threshold expires, no idle state indication is
   needed.  Thus, in most cases, only one message is needed. The message
   rate is limited to one message per idle threshold interval.

   The <contenttype> can contain either just a MIME media type or a
   media type and subtype.

   The idle threshold SHOULD be ten seconds.

   The XML schema can be extended in the future.


        We chose XML since this also makes it possible to easily
        turn this into event notification. This is likely only
        useful for third-party notifications, i.e., notifying event
        recipients other than the recipient of the MESSAGE.


        Events were also considered, but have a number of
        disadvantages. They add more overhead, since an explicit
        and periodic subscription is required. For page-mode
        delivery, subscribing to the right user agent and set of
        messages may not be easy. An in-band, message-based
        mechanism is also easier to gateway into non-SIP systems.

4 Using the Indicator

   The is-composing indicator can be used with either SIP page mode or
   session mode, although it is a more natural fit with session mode. In
   session mode, the indicator is sent as part of the messaging stream.
   Its usage is negotiated just like support for any other media type in
   a stream is negotiated, i.e., through SDP. Sending the indicators
   within the messaging stream has many benefits. First, it ensures
   proper sequencing and synchronization with the actual messages being
   composed.  Secondly, end-to-end security can be applied to the
   messages. Thirdly, SDP negotiation mechanisms can be used to turn it
   on and off at any time, and even negotiate its use in a single
   direction at a time.

   Usage with the page mode is also straightforward. The indicator would
   be carried as the body of a page mode message. Unfortunately, there
   is no way to negotiate its usage, turn it on or off, or even be sure
   that the indicator gets delivered before the actual content being
   composed.

5 Example



H. Schulzrinne                                                [Page 3]

Internet Draft                is-composing             February 24, 2003


   <?xml version="1.0" encoding="UTF-8"?>
     <isComposing xmlns="urn:ietf:params:xml:ns:sip-iscomposing"
       <state>active</active>
       <contenttype>text/plain</contenttype>
       <lastactivity>2003-01-27T10:43:00Z</lastactivity>
     </isComposing>




   <?xml version="1.0" encoding="UTF-8"?>
     <isComposing xmlns="urn:ietf:params:xml:ns:sip-iscomposing"
       <state>idle</active>
       <contenttype>audio</contenttype>
       <lastactivity>2003-01-27T10:43:00Z</lastactivity>
     </isComposing>



6 XML Schema Definitions


     <?xml version="1.0" encoding="UTF-8"?>
     <xs:schema targetNamespace="urn:ietf:params:xml:ns:sip-iscomposing"
        xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns:tns="urn:ietf:params:xml:ns:sip-iscomposing"
        elementFormDefault="qualified"
        attributeFormDefault="unqualified">

        <!-- This import brings in the XML language attribute xml:lang-->
        <xs:import namespace="http://www.w3.org/XML/1998/namespace"
        schemaLocation="http://www.w3.org/2001/xml.xsd"/>

       <xs:element name="isComposing">
         <xs:sequence>
           <xs:element name="status" type="tns:status"
             minOccurs="1"/>
           <xs:element name="lastactive" type="xs:dateTime"
             minOccurs="0"/>
           <xs:element name="contenttype" type="xs:string" minOccurs="0"
             maxOccurs="1"/>
           <xs:any namespace="##other" processContents="lax" minOccurs="0"
             maxOccurs="unbounded"/>
         </xs:sequence>
       </xs:element>

       <xs:simpleType name="status">
         <xs:restriction base="xs:string">



H. Schulzrinne                                                [Page 4]

Internet Draft                is-composing             February 24, 2003


           <xs:enumeration value="active"/>
           <xs:enumeration value="idle"/>
         </xs:restriction>
       </xs:simpleType>
     </xs:schema>



7 Security Considerations

   The is-composing indication provides a fine-grained view of the
   activity of the entity composing and thus deserves particularly
   careful confidentiality protection so that only the intended
   destination of the message will receive the is-composing indication.

8 IANA Considerations

8.1 Content-Type Registration for

        To: ietf-types@iana.org

        Subject: Registration of MIME media type application/sip-
             iscomposing+xml

        MIME media type name: application

        MIME subtype name: sip-iscomposing+xml

        Required parameters: (none)

        Optional parameters: charset; Indicates the character encoding
             of enclosed XML. Default is UTF-8.

        Encoding considerations: Uses XML, which can employ 8-bit
             characters, depending on the character encoding used. See
             RFC 3023 [RFC 3023], section 3.2.

        Security considerations: This content type is designed to carry
             information about current user activity, which may be
             considered private information. Appropriate precautions
             should be adopted to limit disclosure of this information.

        Interoperability considerations: This content type provides a
             common format for exchange of composition activity
             information.

        Published specification: RFCXXXX (this document)




H. Schulzrinne                                                [Page 5]

Internet Draft                is-composing             February 24, 2003


        Applications which use this media type:  Instant messaging
             systems.

        Additional information: none

        Person & email address to contact for further information:
             Henning Schulzrinne
             E-mail: hgs@cs.columbia.edu

        Intended usage: LIMITED USE

        Author/Change controller: This specification is a work item of
             the IETF SIMPLE working group, with mailing list address
             <simple@ietf.org>.

        Other information: This media type is a specialization of
             application/xml [RFC 3023], and many of the considerations
             described there also apply to application/sip-
             iscomposing+xml.

8.2 URN Sub-Namespace Registration for

        URI: urn:ietf:params:xml:ns:sip-iscomposing

        Description: This is the XML namespace for XML elements defined
             by RFCXXXX to describe composition activity by SIP-based
             instant message client using the

        application/sip-iscomposing+xml

        content type.

        Registrant Contact:  IETF, SIMPLE working group,
             <simple@ietf.org>,
             Henning Schulzrinne, <hgs@cs.columbia.edu>

        XML:

              BEGIN
                <?xml version="1.0"?>
                <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.0//EN"
                "http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd">
                <html xmlns="http://www.w3.org/1999/xhtml
                <head>
                     <meta http-equiv="content-type"
                     content="text/html;charset=iso-8859-1"/>
                     <title>Is-composing Indication for Instant Messaging Using the
                     Session Initiation Protocol (SIP)</title>



H. Schulzrinne                                                [Page 6]

Internet Draft                is-composing             February 24, 2003


                </head>
                <body>
                    <h1>Namespace for SIMPLE iscomposing extension</h1>
                    <h2>application/sip-iscomposing+xml</h2>
                    <p>See <a href="[[[URL of published RFC]]]">RFCXXXX</a>.</p>
                 </body>
                 </html>
                END



9 Acknowledgements

   Jonathan Rosenberg and Xiaotao Wu provided helpful comments.

10 References

11 Normative References

   [1] M. Day, J. Rosenberg, and H. Sugano, "A model for presence and
   instant messaging," RFC 2778, Internet Engineering Task Force, Feb.
   2000.

   [2] S. Bradner, "Key words for use in rfcs to indicate requirement
   levels," RFC 2119, Internet Engineering Task Force, Mar. 1997.

12 Informative References

   [3] J. Rosenberg, "Advanced instant messaging requirements for the
   session initiation protocol (SIP)," internet draft, Internet
   Engineering Task Force, Dec.  2002.  Work in progress.

13 Authors' and Editor's Addresses

   Henning Schulzrinne
   Dept. of Computer Science
   Columbia University
   1214 Amsterdam Avenue
   New York, NY 10027
   USA
   Email: schulzrinne@cs.columbia.edu

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights.  Information on the



H. Schulzrinne                                                [Page 7]

Internet Draft                is-composing             February 24, 2003


   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11.  Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard.  Please address the information to the IETF Executive
   Director.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implmentation may be prepared, copied, published and
   distributed, in whole or in part, without restriction of any kind,
   provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.














H. Schulzrinne                                                [Page 8]







                           Table of Contents



   1          Introduction ........................................    2
   2          Terminology and Conventions .........................    2
   3          Description .........................................    2
   4          Using the Indicator .................................    3
   5          Example .............................................    3
   6          XML Schema Definitions ..............................    4
   7          Security Considerations .............................    5
   8          IANA Considerations .................................    5
   8.1        Content-Type Registration for .......................    5
   8.2        URN Sub-Namespace Registration for ..................    6
   9          Acknowledgements ....................................    7
   10         References ..........................................    7
   11         Normative References ................................    7
   12         Informative References ..............................    7
   13         Authors' and Editor's Addresses .....................    7





























H. Schulzrinne                                                [Page 1]

