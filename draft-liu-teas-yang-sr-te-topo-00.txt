Network Working Group                                            X. Liu
Internet-Draft                                                 Ericsson
Intended status: Standards Track                             I. Bryskin
Expires: January 7, 2017                            Huawei Technologies
                                                              V. Beeram
                                                       Juniper Networks
                                                                T. Saad
                                                      Cisco Systems Inc
                                                                H. Shah
                                                                  Ciena
                                                           S. Litkowski
                                                Orange Business Service
                                                           July 7, 2016



                YANG Data Model for SR and SR TE Topologies
                     draft-liu-teas-yang-sr-te-topo-00


Abstract

   This document defines a YANG data model for Segment Routing (SR)
   topology and Segment Routing (SR) traffic engineering (TE) topology.

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html

   This Internet-Draft will expire on January 7, 2017.




Liu, et al.            Expires January 7, 2017                 [Page 1]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016


Copyright Notice

   Copyright (c) 2016 IETF Trust and the persons identified as the
   document authors. All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document. Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document. Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents


   1. Introduction...................................................2
      1.1. Terminology...............................................2
   2. Modeling Considerations........................................3
      2.1. Segment Routing (SR) topology.............................3
      2.2. Segment Routing (SR) TE topology..........................3
      2.3. Relations to ietf-segment-routing.........................5
      2.4. Open Items................................................5
   3. Model Structure................................................5
   4. YANG Module....................................................8
   5. Security Considerations.......................................16
   6. References....................................................16
      6.1. Normative References.....................................16
      6.2. Informative References...................................17

1. Introduction

   This document defines a YANG [RFC6020] data model for describing the
   presentations of Segment Routing (SR) topology and Segment Routing
   (SR) traffic engineering (TE) topology.

1.1. Terminology

   The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14, [RFC2119].

   The following terms are defined in [RFC6020] and are not redefined
   here:


Liu, et al.            Expires January 7, 2016                 [Page 2]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016


      o  augment

      o  data model

      o  data node

2. Modeling Considerations

2.1. Segment Routing (SR) topology

   The Layer 3 network topology model is discussed in [YANG-L3-TOPO].
   The Segment Routing (SR) topology model proposed in this document
   augments and uses the ietf-l3-unicast-igp-topology module defined in
   [YANG-L3-TOPO]. SR related attributes are covered in the ietf-sr-
   topology model.

               +------------------------------+
               |   Layer 3 Network Topology   |
               | ietf-l3-unicast-igp-topology |
               +------------------------------+
                               |
                               |
                               |
                               V
                  +------------------------+
                  |       SR Topology      |
                  |     ietf-sr-topology   |
                  +------------------------+


2.2. Segment Routing (SR) TE topology

   When traffic engineering is enabled on an SR topology, there will be
   associations between objects in SR topologies and objects in TE
   topologies. An SR TE topology is both an SR topology and a layer 3 TE
   topology. Multiple inheritance is used to achieve such relations.













Liu, et al.            Expires January 7, 2016                 [Page 3]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016


          +------------------+  +---------------------+
          | SR Topology      |  | L3 TE Topology      |
          | ietf-sr-topology |  | ietf-l3-te-topology |
          +------------------+  +---------------------+
                   \                    /
                    \                  /
                     \                /
                      v              v
                  +------------------------+
                  |      SR TE Topology    |
                  |                        |
                  +------------------------+


   Each type of topologies is indicated by "network-types" defined in
   [YANG-NET-TOPO]. For the three types of topologies above, the data
   representations are:

   L3 Topology:

   /nw:networks/nw:network/nw:network-types/l3-unicast-igp-topology



   L3 TE Topology:

   /nw:networks/nw:network/nw:network-types/l3-unicast-igp-topology/l3-
   te



   SR Topology:

   /nw:networks/nw:network/nw:network-types/l3-unicast-igp-topology/sr



   SR TE Topology: (multiple inheritance)

   /nw:networks/nw:network/nw:network-types/l3-unicast-igp-topology/l3-
   te

   /nw:networks/nw:network/nw:network-types/l3-unicast-igp-topology/sr






Liu, et al.            Expires January 7, 2016                 [Page 4]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016


2.3. Relations to ietf-segment-routing

   [YANG-SR] defines ietf-segment-routing that is a model intended to be
   used on network elements to configure or operate segment routing;
   ietf-sr-topology defined in this document is intended to be used on a
   controller for the network-wide operations such as path computation.

   SR topology model shares many modeling constructs defined in ietf-
   segment-routing. The module ietf-sr-topology uses the types and
   groupings defined in ietf-segment-routing.

2.4. Open Items

   a) Coordinating changes to [YANG-SR]: Currently some of the SR
     constructs defined in [YANG-SR] cannot be shared as is.
     Coordination with the authors of [YANG-SR] is in progress to
     define the sharable groupings and types, which will also need to
     be not depending on other device models.
   b) Protection on link: The feature of link protection will be modeled
     in the next revision.
   c) Link bundle: The feature of link bundle will be modeled in the
     next revision.

3. Model Structure

   The model tree structure of the Segment Routing (SR) topology module
   is as shown below:

   module: ietf-sr-topology
   augment /nw:networks/nw:network/nw:network-types/l3t:l3-unicast-igp-
   topology:
      +--rw sr!
   augment /nw:networks/nw:network/l3t:igp-topology-attributes:
      +--rw sr
         +--rw config
            +--rw srgb* [lower-bound upper-bound]
               +--rw lower-bound    uint32
               +--rw upper-bound    uint32
   augment /nw:networks/nw:network/nw:node/l3t:igp-node-attributes:
      +--rw sr
         +--rw config
         |  +--rw srgb* [lower-bound upper-bound]
         |  |  +--rw lower-bound    uint32
         |  |  +--rw upper-bound    uint32



Liu, et al.            Expires January 7, 2016                 [Page 5]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016


         |  +--rw capabilities
         |     +--rw transport-planes* [transport-plane]
         |     |  +--rw transport-plane    identityref
         |     +--rw segment-stack-push-limit?     uint8
         |     +--rw readable-label-stack-depth?   uint8
         +--ro state
            +--ro information-source?         enumeration
            +--ro information-source-state
            |  +--ro credibility-preference?   uint16
            +--ro capabilities
               +--ro transport-planes* [transport-plane]
               |  +--ro transport-plane    identityref
               +--ro segment-stack-push-limit?     uint8
               +--ro readable-label-stack-depth?   uint8
   augment /nw:networks/nw:network/nw:node/l3t:igp-node-
   attributes/l3t:prefix:
      +--rw sr!
         +--rw value-type?          enumeration
         +--rw start-sid            uint32
         +--rw range?               uint32
         +--rw last-hop-behavior?   enumeration {sid-last-hop-behavior}?
         +--rw is-local?            boolean
         +--rw algorithm?           sr-algorithm
   augment /nw:networks/nw:network/nw:node/nt:termination-point/l3t:igp-
   termination-point-attributes:
   augment /nw:networks/nw:network/nt:link/l3t:igp-link-attributes:
      +--rw sr
         +--rw config
         |  +--rw sid?              uint32
         |  +--rw value-type?       enumeration
         |  +--rw is-local?         boolean
         |  +--ro is-part-of-set?   boolean
         |  +--ro is-on-lan?        boolean
         +--ro state
            +--ro information-source?         enumeration
            +--ro information-source-state
               +--ro credibility-preference?   uint16

   SR topology module is an augmentation to L3 IGP unicast topology
   module. When these two modules are put together, the following trees
   provider better high level pictures:



Liu, et al.            Expires January 7, 2016                 [Page 6]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016


   modules: ietf-l3-unicast-igp-topology, ietf-sr-topology:
   augment /nw:networks/nw:network:
      +--rw igp-topology-attributes
         +--rw name?     string
         +--rw flag*     flag-type
         +--rw srt:sr
            +--rw srt:config
               +--rw srt:srgb* [lower-bound upper-bound]
                  +--rw srt:lower-bound    uint32
                  +--rw srt:upper-bound    uint32
   augment /nw:networks/nw:network/nw:node:
      +--rw igp-node-attributes
         +--rw name?        inet:domain-name
         +--rw flag*        flag-type
         +--rw router-id*   inet:ip-address
         +--rw prefix* [prefix]
         |  +--rw prefix    inet:ip-prefix
         |  +--rw metric?   uint32
         |  +--rw flag*     flag-type
         |  +--rw srt:sr!
         |     +--rw srt:value-type?          enumeration
         |     +--rw srt:start-sid            uint32
         |     +--rw srt:range?               uint32
         |     +--rw srt:last-hop-behavior?   enumeration {sid-last-hop-
   behavior}?
         |     +--rw srt:is-local?            boolean
         |     +--rw srt:algorithm?           sr-algorithm
         +--rw srt:sr
            +--rw srt:config
            |  +--rw srt:srgb* [lower-bound upper-bound]
            |  |  +--rw srt:lower-bound    uint32
            |  |  +--rw srt:upper-bound    uint32
            |  +--rw srt:capabilities
            |     +--rw srt:transport-planes* [transport-plane]
            |     |  +--rw srt:transport-plane    identityref
            |     +--rw srt:segment-stack-push-limit?     uint8
            |     +--rw srt:readable-label-stack-depth?   uint8
            +--ro srt:state
               +--ro srt:information-source?         enumeration
               +--ro srt:information-source-state
               |  +--ro srt:credibility-preference?   uint16


Liu, et al.            Expires January 7, 2016                 [Page 7]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016


               +--ro srt:capabilities
                  +--ro srt:transport-planes* [transport-plane]
                  |  +--ro srt:transport-plane    identityref
                  +--ro srt:segment-stack-push-limit?     uint8
                  +--ro srt:readable-label-stack-depth?   uint8
   augment /nw:networks/nw:network/nt:link:
      +--rw igp-link-attributes
         +--rw name?     string
         +--rw flag*     flag-type
         +--rw metric?   uint32
         +--rw srt:sr
            +--rw srt:config
            |  +--rw srt:sid?              uint32
            |  +--rw srt:value-type?       enumeration
            |  +--rw srt:is-local?         boolean
            |  +--ro srt:is-part-of-set?   boolean
            |  +--ro srt:is-on-lan?        boolean
            +--ro srt:state
               +--ro srt:information-source?         enumeration
               +--ro srt:information-source-state
                  +--ro srt:credibility-preference?   uint16
   augment /nw:networks/nw:network/nw:node/nt:termination-point:
      +--rw igp-termination-point-attributes
         +--rw (termination-point-type)?
            +--:(ip)
            |  +--rw ip-address*      inet:ip-address
            +--:(unnumbered)
               +--rw unnumbered-id?   uint32

4. YANG Module

   <CODE BEGINS> file "ietf-sr-topology@2016-06-24.yang"
   module ietf-sr-topology {
     yang-version 1.1;
     namespace "urn:ietf:params:xml:ns:yang:ietf-sr-topology";
     prefix "srt";

     import ietf-network {
       prefix "nw";
     }
     import ietf-network-topology {



Liu, et al.            Expires January 7, 2016                 [Page 8]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016


       prefix "nt";
     }
     import ietf-l3-unicast-igp-topology {
       prefix "l3t";
     }
     import ietf-segment-routing {
       prefix "sr";
     }

     organization "TBD";
     contact "TBD";
     description "L3 TE Topology model";

     revision "2016-06-24" {

       description "Initial revision";
       reference "TBD";
     }

     typedef sr-algorithm {
       type enumeration {
         enum "spf" {
           description "Shortest Path First.";
         }
         enum "strict-spf" {
           description "Strict Shortest Path First.";
         }
       }
       description
         "Algorithm to be used for the prefix SID.";
     }

     grouping sr-topology-type {
       description
         "Identifies the SR topology type.";
       container sr {
         presence "Indiates SR Topology";
         description
           "Its presence identifies the SR topology type.";
       }
     }


Liu, et al.            Expires January 7, 2016                 [Page 9]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016



     augment "/nw:networks/nw:network/nw:network-types/"
       + "l3t:l3-unicast-igp-topology" {
       description
         "Defines the SR topology type.";
       uses sr-topology-type;
     }

     augment "/nw:networks/nw:network/l3t:igp-topology-attributes" {
       when "../nw:network-types/l3t:l3-unicast-igp-topology/sr" {
         description "Augment only for SR topology.";
       }
       description "Augment topology configuration";
       uses sr-topology-attributes;
     }

     augment "/nw:networks/nw:network/nw:node/l3t:igp-node-attributes" {
       when "../../nw:network-types/l3t:l3-unicast-igp-topology/sr" {
         description "Augment only for SR topology.";
       }
       description "Augment node configuration.";
       uses sr-node-attributes;
     }

     augment "/nw:networks/nw:network/nw:node/l3t:igp-node-attributes"
       + "/l3t:prefix" {
       when "../../../nw:network-types/l3t:l3-unicast-igp-topology/sr" {
         description "Augment only for SR topology.";
       }
       description "Augment node prefix.";
       uses sr-node-prefix-attributes;
     }

     augment "/nw:networks/nw:network/nw:node/nt:termination-point/"
       + "l3t:igp-termination-point-attributes" {
       when "../../../nw:network-types/l3t:l3-unicast-igp-topology/"
         + "sr" {
         description "Augment only for SR topology.";
       }
       description "Augment termination point configuration";
       uses sr-tp-attributes;


Liu, et al.            Expires January 7, 2016                [Page 10]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016


     }

     augment "/nw:networks/nw:network/nt:link/l3t:igp-link-attributes" {
       when "../../nw:network-types/l3t:l3-unicast-igp-topology/sr" {
         description "Augment only for SR topology.";
       }
       description "Augment link configuration.";
       uses sr-link-attributes;
     }

     grouping sr-topology-attributes {
       description "SR topology scope attributes.";
       container sr {
         description
           "Containing SR attributes.";
         container config {
           description
             "Configuraiton attributes.";
           uses sr:srgb-cfg;
         }
       } // sr
     } // sr-topology-attributes

     grouping information-source-attributes {
       description
         "The attributes identifying source that has provided the
          related information, and the source credibility.";
       leaf information-source {
         type enumeration {
           enum "unknown" {
             description "The source is unknown.";
           }
           enum "locally-configured" {
             description "Configured entity.";
           }
           enum "ospfv2" {
             description "OSPFv2.";
           }
           enum "ospfv3" {
             description "OSPFv3.";
           }


Liu, et al.            Expires January 7, 2016                [Page 11]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016


           enum "isis" {
             description "ISIS.";
           }
           enum "system-processed" {
             description "System processed entity.";
           }
           enum "other" {
             description "Other source.";
           }
         }
         description
           "Indicates the source of the information.";
       }
       container information-source-state {
         description
           "The container contains state attributes related to
            the information source.";
         leaf credibility-preference {
           type uint16;
           description
             "The preference value to calculate the traffic
              engineering database credibility value used for
              tie-break selection between different
              information-source values.
              Higher value is more preferable.";
         }
       }
     } // information-source-attributes

     grouping sr-node-attributes {
       description "SR node scope attributes.";
       container sr {
         description
           "Containing SR attributes.";
         container config {
           description
             "Configuraiton attributes.";
           uses sr:srgb-cfg;
           uses sr-node-capabilities;
         } // config
         container state {


Liu, et al.            Expires January 7, 2016                [Page 12]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016


           config false;
           description
             "Operational state data.";
           uses information-source-attributes;
           uses sr-node-capabilities;
         }
       } // sr
     } // sr-node-attributes

     grouping sr-node-capabilities {
       description "Containing SR node capabilities.";
       container capabilities {
         list transport-planes {
           key transport-plane;
           leaf transport-plane {
             type identityref {
               base sr:segment-routing-transport;
             }
             description
               "Transport plane supported";
           }
           description
             "List of supported transport planes.";
         }
         leaf segment-stack-push-limit {
           type uint8;
           description
             "Describes the number of segments
              that can be pushed by the node.";
         }
         leaf readable-label-stack-depth {
           type uint8;
           description
             "Number of MPLS labels that
              can be read in the stack.";
         }
         description
           "Shows the SR capability of the node.";
       } // capabilities
     } // sr-node-capabilitie



Liu, et al.            Expires January 7, 2016                [Page 13]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016


     grouping sr-node-prefix-attributes {
       description "Containing SR attributes for a prefix.";
       container sr {
         presence "Presence indicates SR is enabled.";
         description
           "Containing SR attributes for a prefix.";
         uses sr:sid-value-type;
         leaf start-sid {
           type uint32;
           mandatory true;
           description
             "Value associated with
              prefix. The value must
              be interpreted in the
              context of value-type.";
         }

         leaf range {
           type uint32;
           description
             "Describes how many SIDs could be
              allocated.";
         }

         uses sr:last-hop-behavior;
         leaf is-local {
           type boolean;
           description
             "'true' if the SID is local.";
         }
         leaf algorithm {
           type sr-algorithm;
           description
             "Algorithm used.";
         }
       } // sr
     } // sr-node-prefix-attributes

     grouping sr-tp-attributes {
       description "SR termination point scope attributes";
     } // sr-tp-attributes


Liu, et al.            Expires January 7, 2016                [Page 14]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016



     grouping sr-link-attributes {
       description "SR link scope attributes";
       container sr {
         description
           "Containing SR attributes.";
         container config {
           description
             "Configuraiton attributes.";
           leaf sid {
             type uint32;
             description
               "SID.";
           }
           uses sr:sid-value-type;
           leaf is-local {
             type boolean;
             description
               "'true' if the SID is local.";
           }
           leaf is-part-of-set {
             type boolean;
             config false;
             description
               "'true' if the SID is part of a set.";
           }
           leaf is-on-lan {
             type boolean;
             config false;
             description
               "'true' if on a lan.";
           }
         }
         container state {
           config false;
           description
             "Operational state data.";
           uses information-source-attributes;
         }
       } // sr
     } // sr-link-attributes


Liu, et al.            Expires January 7, 2016                [Page 15]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016


   }
   <CODE ENDS>

5. Security Considerations

   The configuration, state, action and notification data defined in
   this document are designed to be accessed via the NETCONF protocol
   [RFC6241]. The data-model by itself does not create any security
   implications. The security considerations for the NETCONF protocol
   are applicable. The NETCONF protocol used for sending the data
   supports authentication and encryption.

6. References

6.1. Normative References

   [RFC6020] Bjorklund, M., "YANG - A Data Modeling Language for the
             Network Configuration Protocol (NETCONF)", RFC 6020,
             October 2010.

   [RFC6021] Schoenwaelder, J., "Common YANG Data Types", RFC 6021,
             October 2010.

   [RFC6241] Enns, R., Bjorklund, M., Schoenwaelder, J., and A. Bierman,
             "Network Configuration Protocol (NETCONF)", RFC 6241, June
             2011.

   [RFC2234] Crocker, D. and Overell, P.(Editors), "Augmented BNF for
             Syntax Specifications: ABNF", RFC 2234, Internet Mail
             Consortium and Demon Internet Ltd., November 1997.

   [YANG-NET-TOPO]Clemm, A., "A Data Model for Network Topologies",
               draft-ietf-i2rs-yang-network-topo (Work in Progress).

    [YANG-L3-TOPO] Clemm, A., et al., "A YANG Data Model for Layer 3
             Topologies", draft-ietf-i2rs-yang-l3-topology, (Work in
             Progress).

   [YANG-TE-TOPO] Liu, X., et al., "YANG Data Model for TE Topologies",
             draft-ietf-teas-yang-te-topo, Work in Progress).

   [YANG-SR] Litkowski, S., et al., "YANG Data Model for Segment
             Routing", draft-ietf-spring-sr-yang, Work in Progress).






Liu, et al.            Expires January 7, 2016                [Page 16]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016




6.2. Informative References

   [RFC6087] Bierman, A., "Guidelines for Authors and Reviewers of YANG
             Data Model Documents", RFC 6087, January 2011.











































Liu, et al.            Expires January 7, 2016                [Page 17]

Internet-Draft     draft-liu-teas-yang-sr-te-topo-00          July 2016


Authors' Addresses

   Xufeng Liu
   Ericsson / Kuatro Technologies Inc.
   8281 Greensboro Drive, Suite 200
   McLean, VA 22102
   USA

   Email: xliu@kuatrotech.com


   Igor Bryskin
   Huawei Technologies
   Email: Igor.Bryskin@huawei.com


   Vishnu Pavan Beeram
   Juniper Networks
   Email: vbeeram@juniper.net


   Tarek Saad
   Cisco Systems Inc
   Email: tsaad@cisco.com


   Himanshu Shah
   Ciena
   Email: hshah@ciena.com


   Stephane Litkowski
   Orange Business Service
   Email: stephane.litkowski@orange.com















Liu, et al.            Expires January 7, 2016                [Page 18]

