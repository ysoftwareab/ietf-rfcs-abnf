



Networking Working Group                                     L. Ginsberg
Internet-Draft                                                 P. Psenak
Intended status: Standards Track                              S. Previdi
Expires: August 31, 2017                                   Cisco Systems
                                                           W. Henderickx
                                                                   Nokia
                                                       February 27, 2017


                  IS-IS TE Attributes per application
                   draft-ginsberg-isis-te-app-00.txt

Abstract

   Existing traffic engineering related link attribute advertisements
   have been defined and are used in RSVP-TE deployments.  In cases
   where multiple applications wish to make use of these link attributes
   the current advertisements do not support application specific values
   for a given attribute nor do they support indication of which
   applications are using the advertised value for a given link.

   This draft introduces new link attribute advertisements which address
   both of these shortcomings.  It also discusses backwards
   compatibility issues and how to minimize duplicate advertisements in
   the presence of routers which do not support the extensions defined
   in this document.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."




Ginsberg, et al.         Expires August 31, 2017                [Page 1]

Internet-Draft         draft-ginsberg-isis-te-app          February 2017


   This Internet-Draft will expire on August 31, 2017.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Requirements Discussion . . . . . . . . . . . . . . . . . . .   3
   3.  Legacy Advertisements . . . . . . . . . . . . . . . . . . . .   4
     3.1.  Legacy sub-TLVs . . . . . . . . . . . . . . . . . . . . .   4
     3.2.  Legacy SRLG Advertisements  . . . . . . . . . . . . . . .   5
   4.  Advertising Application Specific Link Attributes  . . . . . .   5
     4.1.  Application Bit Mask  . . . . . . . . . . . . . . . . . .   6
     4.2.  Application Specific Link Attributes sub-TLV  . . . . . .   6
     4.3.  Application Specific SRLG TLV . . . . . . . . . . . . . .   7
   5.  Interoperability, Backwards Compatibility and Migration
       Concerns  . . . . . . . . . . . . . . . . . . . . . . . . . .   8
     5.1.  RSVP-TE only deployments  . . . . . . . . . . . . . . . .   9
     5.2.  Multiple Applications: Common Attributes with  RSVP-TE  .   9
     5.3.  Multiple Applications: All Attributes Not Shared w RSVP-
           TE  . . . . . . . . . . . . . . . . . . . . . . . . . . .   9
     5.4.  Deprecating legacy advertisements . . . . . . . . . . . .   9
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  10
   7.  Security Considerations . . . . . . . . . . . . . . . . . . .  11
   8.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  11
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  11
     9.1.  Normative References  . . . . . . . . . . . . . . . . . .  11
     9.2.  Informative References  . . . . . . . . . . . . . . . . .  12
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  12

1.  Introduction

   Advertisement of link attributes by the Intermediate-System-to-
   Intermediate-System (IS-IS) protocol in support of traffic
   engineering (TE) was introduced by [RFC5305] and extended by



Ginsberg, et al.         Expires August 31, 2017                [Page 2]

Internet-Draft         draft-ginsberg-isis-te-app          February 2017


   [RFC5307], [RFC6119], and [RFC7810].  Use of these extensions has
   been associated with deployments supporting Traffic Engineering over
   Multiprotocol Label Switching (MPLS) in the presence of Resource
   Reservation Protocol (RSVP) - more succinctly referred to as RSVP-TE.
   Although implementations vary in their exact interpretation, it is
   fair to say that the presence of any of the link attribute
   advertisements currently defined (excluding link identifier
   advertisements) are used by many implementations to imply the use of
   that link by RSVP-TE.

   In recent years new applications have been introduced which have use
   cases for many of the link attributes historically used by RSVP-TE.
   Such applications include Segment Routing Traffic Engineering (SR-TE)
   and Loop Free Alternates (LFA).  This has introduced ambiguity in
   that if a deployment includes a mix of RSVP-TE support and SR-TE
   support (for example) it is not possible to unambiguously indicate
   which advertisements indicate support for/use by RSVP-TE and which
   advertisements indicate support for/use by SR-TE.  If the topologies
   are fully congruent this may not be an issue, but any incongruence
   leads to ambiguity.

   An additional issue arises in cases where both applications are
   supported on a link but the link attribute values associated with
   each application differ.  Current advertisements do not support
   advertising application specific values for the same attribute on a
   specific link.

   This document defines extensions which address these issues.  Also,
   as evolution of use cases for link attributes can be expected to
   continue in the years to come, this document defines a solution which
   is easily extensible to the introduction of new applications and new
   use cases.

2.  Requirements Discussion

   As stated previously, evolution of use cases for link attributes can
   be expected to continue - so any discussion of existing use cases is
   limited to requirements which are known at the time of this writing.
   However, in order to determine the functionality required beyond what
   already exists in IS-IS, it is only necessary to discuss use cases
   which justify the key points identified in the introduction - which
   are:

   1.  Support for indicating which applications are using the link
       attribute advertisements on a link

   2.  Support for advertising application specific values for the same
       attribute on a link



Ginsberg, et al.         Expires August 31, 2017                [Page 3]

Internet-Draft         draft-ginsberg-isis-te-app          February 2017


   [RFC7855] discusses use cases/requirements for SR.  Included among
   these use cases is SR-TE.  If both RSVP-TE and SR-TE are deployed in
   a network, links can be used by one or both of these applications.
   As there is no requirement for the topology supported for SR-TE to be
   congruent to the topology supported for RSVP-TE there is a clear
   requirement to indicate independently which applications are
   associated with a given link.

   If both RSVP-TE and SR-TE are enabled on a given link it is also
   possible that an attribute value such as Maximum Bandwidth to be
   utilized by SR-TE may be different than/disjoint from the Maximum
   Bandwidth to be utilized by RSVP-TE.  This leads to the requirement
   that the solution support the advertisement of unique values for a
   given link/attribute/application.

   As the number of applications which may wish to utilize link
   attributes may grow in the future an additional requirement is that
   the extensions defined allow the association of additional
   applications to link attributes without altering the format of the
   advertisements or introducing new backwards compatibility issues.

   Finally, there may still be many cases where a single attribute value
   can be shared among multiple applications, so the solution must
   minimize advertising duplicate link/attribute pairs whenever
   possible.

3.  Legacy Advertisements

   There are existing advertisements used in support of RSVP-TE.  These
   advertisements include sub-TLVs for TLVs 22, 23, 141, 222, and 223
   and TLVs for SRLG advertisement.

3.1.  Legacy sub-TLVs


















Ginsberg, et al.         Expires August 31, 2017                [Page 4]

Internet-Draft         draft-ginsberg-isis-te-app          February 2017


   Sub-TLVs for TLVs 22, 23, 141, 222, and 223

   Code Point/Attribute Name
   --------------------------
    3 Administrative group (color)
    9 Maximum link bandwidth
   10 Maximum reservable link bandwidth
   11 Unreserved bandwidth
   14 Extended Administrative Group
   33 Unidirectional Link Delay
   34 Min/Max Unidirectional Link Delay
   35 Unidirectional Delay Variation
   36 Unidirectional Link Loss
   37 Unidirectional Residual Bandwidth
   38 Unidirectional Available Bandwidth
   39 Unidirectional Utilized Bandwidth


3.2.  Legacy SRLG Advertisements

   TLV 138 GMPLS-SRLG
     Supports links identified by IPv4 addresses and
     unnumbered links

   TLV 139 IPv6 SRLG
     Supports links identified by IPv6 addresses


   Note that [RFC6119] prohibits the use of TLV 139 when it is possible
   to use TLV 138.

4.  Advertising Application Specific Link Attributes

   Two new code points are defined in support of Application Specific
   Link Attribute Advertisements:

   1) Application Specific Link Attributes sub-TLV for TLVs 22, 23, 141,
   222, and 223

   2)Application Specific Shared Risk Link Group (SRLG) TLV

   In support of these new advertisements, an application bit mask is
   defined which identifies the application(s) associated with a given
   advertisement.

   The following sections define the format of these new advertisements.





Ginsberg, et al.         Expires August 31, 2017                [Page 5]

Internet-Draft         draft-ginsberg-isis-te-app          February 2017


4.1.  Application Bit Mask

   Identification of the set of applications associated with the link
   attribute advertisements utilizes a bit mask where the definition of
   each bit is defined in a new IANA controlled registry.  This encoding
   is used by both the Application Specific Link Attributes sub-TLV and
   the Application Specific SRLG TLV.

        Bit Mask Length: Non-zero (1 octet)
        Application Bit Mask: Size is (Bit Mask Length+7)/8
        The following bits are assigned:

             0 1 2 3 4 5 6 7
            +-+-+-+-+-+-+-+-+
            |L|R|S|F|       |
            +-+-+-+-+-+-+-+-+

       L-bit: Applications listed MUST use the legacy
          advertisements for the corresponding link
          found in TLVs 22, 23, 141, 222, and 223 or
          TLV 138 or TLV 139 as appropriate.

       R-bit: RSVP-TE

       S-bit: Segment Routing Traffic Engineering

       F-bit: Loop Free Alternate

   Bits are defined/sent starting with Bit 0.  Additional bit
   definitions that may be defined in the future SHOULD be assigned in
   ascending bit order so as to minimize the number of bits that will
   need to be transmitted.  Undefined bits MUST be transmitted as 0 and
   MUST be ignored on receipt.  Bits that are NOT transmitted MUST be
   treated as if they are set to 0 on receipt.

4.2.  Application Specific Link Attributes sub-TLV

   A new sub-TLV for TLVs 22, 23, 141, 222, and 223 is defined which
   supports specification of the applications and application specific
   attribute values.











Ginsberg, et al.         Expires August 31, 2017                [Page 6]

Internet-Draft         draft-ginsberg-isis-te-app          February 2017


      Type: 15 (suggested value - to be assigned by IANA)
      Length: Variable (1 octet)
      Value:

        Application Bit Mask (as defined in Section 3.1)

        Link Attribute sub-sub-TLVs - format matches the
        existing formats defined in [RFC5305] and [RFC7810]

   When the L-bit is set in the Application Bit Mask all of the
   applications specified in the bit mask MUST use the link attribute
   sub-TLV advertisements listed in Section 3.1 for the corresponding
   link.  Application specific link attribute sub-sub-TLVs for the
   corresponding link attributes MUST NOT be advertised for the set of
   applications specified in the Application Bit Mask and all such
   advertisements MUST be ignored on receipt.

   Multiple sub-TLVs for the same link MAY be advertised.  When multiple
   sub-TLVs for the same link are advertised they SHOULD advertise non-
   conflicting application/attribute pairs.  In cases where there are
   multiple sub-TLVs for the same link and there is a conflict in the
   attribute information advertised the behavior of the receiver is
   undefined.

   For a given application, the setting of the L-bit MUST be the same in
   all sub-TLVs for a given link.  In cases where this constraint is
   violated the L-bit MUST be considered set for this application.

   A new registry of sub-sub-TLVs is to be created by IANA which defines
   the link attribute sub-sub-TLV code points.  A sub-sub-TLV is defined
   for each of the existing sub-TLVs listed in Section 3.1.  Format of
   the sub-sub-TLVs matches the format of the corresponding legacy sub-
   TLV and IANA is requested to assign the legacy sub-TLV identifer to
   the corresponding sub-sub-TLV.

4.3.  Application Specific SRLG TLV

   A new TLV is defined to advertise application specific SRLGs for a
   given link.  Although similar in functionality to TLV 138 (defined by
   [RFC5307]) and TLV 139 (defined by [RFC6119] a single TLV provides
   support for IPv4, IPv6, and unnumbered identifiers for a link.
   Unlike TLVs 138/139 it utilizes sub-TLVs to encode the link
   identifiers in order to provide the flexible formatting required to
   support multiple link identifier types.







Ginsberg, et al.         Expires August 31, 2017                [Page 7]

Internet-Draft         draft-ginsberg-isis-te-app          February 2017


       Type: 238 (Suggested value - to be assigned by IANA)
       Length: Number of octets in the value field (1 octet)
       Value:
         Neighbor System-ID + pseudo-node ID (7 octets)
         Application Bit Mask (as defined in Section 3.1)
         Length of sub-TLVs (1 octet)
         Link Identifier sub-TLVs (variable)
         0 or more SRLG Values (Each value is 4 octets)

       The following Link Identifier sub-TLVs are defined. The type
       values are suggested and will be assigned by IANA - but as
       the formats are identical to existing sub-TLVs defined for
       TLVs 22, 23, 141, 222, and 223 the use of the suggested sub-TLV
       types is strongly encouraged.

       Type    Description
        4      Link Local/Remote Identifiers (see [RFC5307])
        6      IPv4 interface address (see [RFC5305])
        8      IPv4 neighbor address (see [RFC5305])
       12      IPv6 Interface Address (see [RFC6119])
       13      IPv6 Neighbor Address (see [RFC6119])

   At least one set of link identifiers (IPv4, IPv6, or unnumbered) MUST
   be present.  TLVs which do not meet this requirement MUST be ignored.

   Multiple TLVs for the same link MAY be advertised.

   When the L-bit is set in the Application Bit Mask SRLG values MUST
   NOT be included in the TLV.  Any SRLG values which are advertised
   MUST be ignored.  Based on the link identifiers advertised the
   corresponding legacy TLV (see Section 3.2) can be identified and the
   SRLG values advertised in the legacy TLV MUST be used by the set of
   applications specified in the Application Bit Mask.

   For a given application, the setting of the L-bit MUST be the same in
   all TLVs for a given link.  In cases where this constraint is
   violated the L-bit MUST be considered set for this application.

5.  Interoperability, Backwards Compatibility and Migration Concerns

   Existing deployments of RSVP-TE utilize the legacy advertisements
   listed in Section 3.  Routers which do not support the extensions
   defined in this document will only process legacy advertisements and
   are likely to infer that RSVP-TE is enabled on the links for which
   legacy advertisements exist.  It is expected that deployments using
   the legacy advertisements will persist for a significant period of
   time - therefore deployments using the extensions defined in this
   document must be able to co-exist with use of the legacy



Ginsberg, et al.         Expires August 31, 2017                [Page 8]

Internet-Draft         draft-ginsberg-isis-te-app          February 2017


   advertisements by routers which do not support the extensions defined
   in this document.  The following sub-sections discuss
   interoperability and backwards compatibility concerns for a number of
   deployment scenarios.

   Note that in all cases the defined strategy can be employed on a per
   link basis.

5.1.  RSVP-TE only deployments

   In deployments where RSVP-TE is the only application utilizing link
   attribute advertisements use of the the legacy advertisements can
   continue without change.

5.2.  Multiple Applications: Common Attributes with RSVP-TE

   In cases where multiple applications are utilizing a given link, one
   of the applications is RSVP-TE, and all link attributes for a given
   link are common to the set of applications utilizing that link,
   interoperability is achieved by using legacy advertisements and
   sending application specific advertisements with L-bit set and no
   link attribute values.  This avoids duplication of link attribute
   advertisements.

5.3.  Multiple Applications: All Attributes Not Shared w RSVP-TE

   In cases where one or more applications other than RSVP-TE are
   utilizing a given link and one or more link attribute values are NOT
   shared with RSVP-TE, it is necessary to use application specific
   advertisements as defined in this document.  Attributes for
   applications other than RSVP-TE MUST be advertised using application
   specific advertisements which have the L-bit clear.  In cases where
   some link attributes are shared with RSVP-TE this requires duplicate
   advertisements for those attributes.

   The discussion in this section applies to cases where RSVP-TE is NOT
   enabled on a link and to cases where RSVP-TE is enabled on the link
   but some link attributes cannot be shared with RSVP-TE.

5.4.  Deprecating legacy advertisements

   The extensions defined in this document support RSVP-TE as one of the
   supported applications - so a long term goal for deployments would be
   to deprecate use of the legacy advertisements in support of RSVP-TE.
   This can be done in the following step-wise manner:

   1)Upgrade all routers to support extensions in this document




Ginsberg, et al.         Expires August 31, 2017                [Page 9]

Internet-Draft         draft-ginsberg-isis-te-app          February 2017


   2)Readvertise all legacy link attributes using application specific
   advertisements with L-bit clear and R-bit set.

   3)Remove legacy advertisements

6.  IANA Considerations

   This document defines a new sub-TLV for TLVs 22, 23, 141, 222, and
   223.

    Type  Description            22 23 141 222 223
    ----  ---------------------  -- -- --- --- ---
     15   Application Specific   y  y   y   y   y
           Link Attributes

   This document defines one new TLV:

    Type  Description            IIH SNP LSP Purge
    ----  ---------------------  --- --- --- -----
     238  Application Specific    n   n   y    n
           SRLG

   This document requests a new IANA registry be created to control the
   assignment of sub-sub-TLV codepoints for the Application Specific
   Link Attributes sub-TLV.  The suggested name of the new registry is
   "sub-sub-TLV code points for application link attributes".  The
   registration procedure is "Expert Review" as defined in [RFC5226].
   The following assignments are made by this document:

    Type   Description
   ---------------------------------------------------------
    3 Administrative group (color)
    9 Maximum link bandwidth
   10 Maximum reservable link bandwidth
   11 Unreserved bandwidth
   14 Extended Administrative Group
   33 Unidirectional Link Delay
   34 Min/Max Unidirectional Link Delay
   35 Unidirectional Delay Variation
   36 Unidirectional Link Loss
   37 Unidirectional Residual Bandwidth
   38 Unidirectional Available Bandwidth
   39 Unidirectional Utilized Bandwidth

   This document requests a new IANA registry be created to control the
   assignment of application bit identifiers.  The suggested name of the
   new registry is "Link Attribute Applications".  The registration




Ginsberg, et al.         Expires August 31, 2017               [Page 10]

Internet-Draft         draft-ginsberg-isis-te-app          February 2017


   procedure is "Expert Review" as defined in [RFC5226].  The following
   assignments are made by this document:

    Bit #   Name
   ---------------------------------------------------------
     0      Legacy Attributes (L-bit)
     1      RSVP-TE (R-bit)
     2      Segment Routing Traffic Engineering (S-bit)
     3      Loop Free Alternate (F-bit)

   This document requests a new IANA registry be created to control the
   assignment of sub-TLV types for the application specific SRLG TLV.
   The suggested name of the new registry is "Sub-TLVs for TLV 238".
   The registration procedure is "Expert Review" as defined in
   [RFC5226].  The following assignments are made by this document:

    Value    Description
    ---------------------------------------------------------
      4      Link Local/Remote Identifiers (see [RFC5307])
      6      IPv4 interface address (see [RFC5305])
      8      IPv4 neighbor address (see [RFC5305])
     12      IPv6 Interface Address (see [RFC6119])
     13      IPv6 Neighbor Address (see [RFC6119])

7.  Security Considerations

   Security concerns for IS-IS are addressed in [ISO10589, [RFC5304],
   and [RFC5310].

8.  Acknowledgements

   TBD

9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <http://www.rfc-editor.org/info/rfc2119>.

   [RFC5226]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", BCP 26, RFC 5226,
              DOI 10.17487/RFC5226, May 2008,
              <http://www.rfc-editor.org/info/rfc5226>.





Ginsberg, et al.         Expires August 31, 2017               [Page 11]

Internet-Draft         draft-ginsberg-isis-te-app          February 2017


   [RFC5304]  Li, T. and R. Atkinson, "IS-IS Cryptographic
              Authentication", RFC 5304, DOI 10.17487/RFC5304, October
              2008, <http://www.rfc-editor.org/info/rfc5304>.

   [RFC5305]  Li, T. and H. Smit, "IS-IS Extensions for Traffic
              Engineering", RFC 5305, DOI 10.17487/RFC5305, October
              2008, <http://www.rfc-editor.org/info/rfc5305>.

   [RFC5307]  Kompella, K., Ed. and Y. Rekhter, Ed., "IS-IS Extensions
              in Support of Generalized Multi-Protocol Label Switching
              (GMPLS)", RFC 5307, DOI 10.17487/RFC5307, October 2008,
              <http://www.rfc-editor.org/info/rfc5307>.

   [RFC5310]  Bhatia, M., Manral, V., Li, T., Atkinson, R., White, R.,
              and M. Fanto, "IS-IS Generic Cryptographic
              Authentication", RFC 5310, DOI 10.17487/RFC5310, February
              2009, <http://www.rfc-editor.org/info/rfc5310>.

   [RFC6119]  Harrison, J., Berger, J., and M. Bartlett, "IPv6 Traffic
              Engineering in IS-IS", RFC 6119, DOI 10.17487/RFC6119,
              February 2011, <http://www.rfc-editor.org/info/rfc6119>.

   [RFC7810]  Previdi, S., Ed., Giacalone, S., Ward, D., Drake, J., and
              Q. Wu, "IS-IS Traffic Engineering (TE) Metric Extensions",
              RFC 7810, DOI 10.17487/RFC7810, May 2016,
              <http://www.rfc-editor.org/info/rfc7810>.

9.2.  Informative References

   [RFC7855]  Previdi, S., Ed., Filsfils, C., Ed., Decraene, B.,
              Litkowski, S., Horneffer, M., and R. Shakir, "Source
              Packet Routing in Networking (SPRING) Problem Statement
              and Requirements", RFC 7855, DOI 10.17487/RFC7855, May
              2016, <http://www.rfc-editor.org/info/rfc7855>.

Authors' Addresses

   Les Ginsberg
   Cisco Systems
   821 Alder Drive
   Milpitas, CA  95035
   USA

   Email: ginsberg@cisco.com







Ginsberg, et al.         Expires August 31, 2017               [Page 12]

Internet-Draft         draft-ginsberg-isis-te-app          February 2017


   Peter Psenak
   Cisco Systems
   Apollo Business Center Mlynske nivy 43
   Bratislava  821 09
   Slovakia

   Email: ppsenak@cisco.com


   Stefano Previdi
   Cisco Systems
   Via Del Serafico 200
   Rome  0144
   Italy

   Email: sprevidi@cisco.com


   Wim Henderickx
   Nokia
   Copernicuslaan 50
   Antwerp  2018 94089
   Belgium

   Email: wim.henderickx@nokia.com


























Ginsberg, et al.         Expires August 31, 2017               [Page 13]
