host-escaped   = U+0000-U+002A / U+002C / U+002F / U+003B-U+0040 / U+005C /
                 U+005E / U+0060 / U+007B-U+007F

   Process each character of the host in sequence:

      If the current character is "%":

         -> TODO: Handle percent-unescaping.

      If the current character matches host-escaped:

         -> Output the utf8-percent-escaping of the current character.

      Otherwise, if the current character matches ALPHA:

         -> Output the current character converted to lower case.

      Otherwise:

         -> Output the current character.
path-escaped   = U+0000-U+0020 / U+0022-U+0023 / U+0025 / U+003C / U+003E /
                 U+003F / U+005C / U+005E / U+0060 / U+007B-U+007D / U+007F
path-unescaped = "-" / DIGIT / ALPHA / "_" / "~"

   Process each character of the path in sequence:

      If the current character matches path-escaped or is greater than
      or equal to U+0080:

         -> Output the utf8-percent-escaping of the current character.

      Otherwise, if the current character is ".":

         -> TODO: Handle "." collapsing.

      Otherwise, if the current character is "\":

         -> Output "/".

      Otherwise, if the current character is "%":

         -> TODO: Handle percent-unescaping.

      Otherwise:

         -> Output the current character.

