<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Scaling Requirements for Presence in SIP/SIMPLE</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Scaling Requirements for Presence in SIP/SIMPLE">
<meta name="keywords" content="I-D, Internet-
Draft, SIMPLE, problem statement">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">SIPPING WG</td><td class="header">A. Houri</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">IBM</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">S. Parameswar</td></tr>
<tr><td class="header">Expires: May 6, 2009</td><td class="header">Microsoft Corporation</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">E. Aoki</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">AOL  LLC</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">V. Singh</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">H. Schulzrinne</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Columbia U.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">November 02, 2008</td></tr>
</table></td></tr></table>
<h1><br />Scaling Requirements for Presence in SIP/SIMPLE<br />draft-ietf-sipping-presence-scaling-requirements-02.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on May 6, 2009.</p>

<h3>Abstract</h3>

<p>The document provides a set of requirements for enabling interdomain scaling 
in presence for SIP/SIMPLE.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Requirements notation<br />
<a href="#anchor2">2.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.1.</a>&nbsp;
Very large network peering<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.2.</a>&nbsp;
State Management<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.2.1.</a>&nbsp;
State Size Calculations<br />
<a href="#anchor6">3.</a>&nbsp;
Requirements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.1.</a>&nbsp;
Backward Compatibility Requirements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.2.</a>&nbsp;
Policy, Privacy, Permissions Requirements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.3.</a>&nbsp;
Scalability Requirements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.4.</a>&nbsp;
Topology Requirements<br />
<a href="#anchor11">4.</a>&nbsp;
Considerations for Possible Optimizations <br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">4.1.</a>&nbsp;
Very Optimized SIP<br />
<a href="#anchor13">5.</a>&nbsp;
Security Considerations<br />
<a href="#anchor14">6.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor15">7.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informational References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Requirements notation</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document 
are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Introduction</h3>

<p>The document lists requirements for optimizations of the SIP/SIMPLE protocol. 
See <a class='info' href='#I-D.ietf-simple-simple'>[I&#8209;D.ietf&#8209;simple&#8209;simple]<span> (</span><span class='info'>Rosenberg, J., &ldquo;SIMPLE made Simple: An Overview of the IETF Specifications for Instant  Messaging and Presence using the Session Initiation Protocol (SIP),&rdquo; March&nbsp;2009.</span><span>)</span></a> for the list of RFCs and drafts that 
are considered as part of the SIP/SIMPLE protocol. These optimizations should 
reduce the load on the network and the presence servers in interdomain presence 
subscriptions. The requirements are based on a separate scaling analysis 
document <a class='info' href='#I-D.ietf-simple-interdomain-scaling-analysis'>[I&#8209;D.ietf&#8209;simple&#8209;interdomain&#8209;scaling&#8209;analysis]<span> (</span><span class='info'>Houri, A., Aoki, E., Parameswar, S., Rang, T., Singh, V., and H. Schulzrinne, &ldquo;Presence Interdomain Scaling Analysis for SIP/SIMPLE,&rdquo; August&nbsp;2009.</span><span>)</span></a>.
</p>
<p>The scaling analysis document have shown that there is much room for 
optimizations in the SIP/SIMPLE protocol. The need for optimizations is in the 
number of by teds that are sent between two federating domains, the number of 
messages that need to be processed and the amount of state that needs to be 
managed by the presence servers. The following is a snaphot of various numbers from the 
scaling analysis document. This snapshot is in clouded here for completeness, 
please refer to the scaling analysis document for the full details including the 
description of the calculations and the various SIP optimizations 
investigated.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Very large network peering</h3>

<p>In this environment, two or more very large networks create a peering 
    relationship allowing their users to subscribe to presence in the other 
    domains.  Where as the number of users in other deployment types ranges 
    from hundreds to several hundred thousand, these large networks host up 
    to hundreds of millions of users.  Examples of these networks are large 
    wireless carriers and consumer IM networks.
</p>
<p>Common characteristics of this deployment are:
</p>
<p></p>
<ul class="text">
<li>As users become accustomed to network 
    boundaries disappearing, federated subscriptions become as common as 
    subscriptions within the same domain
</li>
<li>Individual users are highly 
    likely to want to see presence of multiple presentities in the peer 
    network
</li>
<li>The intersection of users in the deployment watching the 
    same presentities is very high (i.e., two or more users in network A are 
    extremely likely to be watching a same user in network B)
</li>
<li>Status 
    changes increase greatly due to typical observed consumer behavior
</li>
</ul>

<p>The first table below provides the calculations without optimizations 
    the second table provides the calculations with optimizations. Even 
    though the optimizations help a lot (almost cut the number of messages by 
    half), the numbers are still very high. Note also that the bandwidth required is very high.
</p><br /><hr class="insert" />
<a name="fig07"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
** Constants
(C01) Subscription lifetime (hours)...........................8
(C02) Presence state changes / hour...........................6
(C03) Subscription refresh interval / hour....................1
(C04) Total federated presentities per watcher...............10
(C05) Number of dialogs to maintain per watcher..............10
(C06) Total number of watchers in domains............20,000,000
(C07) SUBSCRIBE message size in bytes.......................450
(C08) 200 OK for SUBSCRIBE message size in bytes............370
(C09) NOTIFY message size not including presence doc........500
(C10) 200 OK for NOTIFY message size in bytes...............370
(C11) Size of an average presence document..................350

** Initial Messages
(I01) Initial SUBSCRIBE msgs per watcher.....................10
(I02) Initial 200 OK msgs (SUBSCRIBE) per watcher............10
(I03) Initial NOTIFY msgs per watcher........................10
(I04) Initial 200 OK msgs (NOTIFY) per watcher...............10
(I05) Total number &amp; bytes of initial SUBSCRIBE msgs
          Number of msgs for all watchers...........200,000,000
          Bytes for all watchers.................90,000,000,000
(I06) Total number &amp; bytes of initial 200 OK (SUBSCRIBE) msgs
          Number of msgs for all watchers...........200,000,000
          Bytes for all watchers.................74,000,000,000
(I07) Total number &amp; bytes of initial NOTIFY msgs
          Number of msgs for all watchers...........200,000,000
          Bytes for all watchers................170,000,000,000
(I08) Total number &amp; bytes of initial 200 OK (NOTIFY) msgs
          Number of msgs for all watchers...........200,000,000
          Bytes for all watchers.................74,000,000,000
(I09) Total number &amp; bytes of initial messages per day
          Number of msgs for all watchers...........800,000,000
          Bytes for all watchers................408,000,000,000

** Steady State Messages
(S01) NOTIFY msgs due to state change
          per watched presentity per day.....................46
(S02) 200 (for NOTIFY due to state change) msgs
          per watched presentity per day.....................46
(S03) Total number and size of msgs due to state change per day
          Number of msgs for all watchers........18,400,000,000
          Bytes for all watchers.............11,224,000,000,000
(S04) Number of SUBSCRIBE msgs for refreshes
          per watcher per day................................70
(S05) Number of 200 OK msgs for SUBSCRIBE msgs for refreshes
          per watcher per day................................70
(S06) Number of NOTIFY msgs for refreshes
          per watcher per day................................70
(S07) Number of 200 OK msgs for NOTIFY msgs for refreshes
          per watcher per day................................70
(S08) Total number and size of msgs due to SUBSCRIBE refreshes
          Number of msgs for all watchers per day.5,600,000,000
          Bytes for all watchers per day......2,856,000,000,000
(S09) Total number &amp; bytes of steady messages per day
          Number of msgs for all watchers........24,000,000,000
          Bytes for all watchers.............14,080,000,000,000

** Termination Messages
(T01) Terminating SUBSCRIBE msgs per watcher.................10
(T02) Terminating 200 OK msgs (SUBSCRIBE) per watcher........10
(T03) Terminating NOTIFY msgs per watcher....................10
(T04) Terminating 200 OK msgs (NOTIFY) per watcher...........10
(T05) Total number &amp; bytes of Terminating SUBSCRIBE msgs
          Number of msgs for all watchers...........200,000,000
          Bytes for all watchers.................90,000,000,000
(T06) Total number &amp; bytes of terminating 200 OK (SUBSCRIBE) msgs
          Number of msgs for all watchers...........200,000,000
          Bytes for all watchers.................74,000,000,000
(T07) Total number &amp; bytes of terminating NOTIFY msgs
          Number of msgs for all watchers...........200,000,000
          Bytes for all watchers................170,000,000,000
(T08) Total number &amp; bytes of terminating 200 OK (NOTIFY) msgs
          Number of msgs for all watchers...........200,000,000
          Bytes for all watchers.................74,000,000,000
(T09) Total number &amp; bytes of terminating messages per day
          Number of msgs for all watchers...........800,000,000
          Bytes for all watchers................408,000,000,000

** Bottom Line
(B01) Total of messages between domains..........25,600,000,000
      Total of bytes bet. domains (PD=350)...14,896,000,000,000
      Total of bytes bet. domains (PD=3000)..44,046,000,000,000
(B02) Total number of messages / second.................888,889
      Total of bytes per second (PD=350)............517,222,222
      Total of bytes per second (PD=3000).........1,529,375,000
(B03) Total number of by msgs per user/day................1,280
      Total number of bytes per user/day (PD=350).......744,800
      Total number of bytes per user/day (PD=3000)....2,202,300
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Very large network peering with no optimizations&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="fig08"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
** Constants
(C01) Subscription lifetime (hours)...........................8
(C02) Presence state changes / hour...........................6
(C03) Subscription refresh interval / hour....................1
(C04) Total federated presentities per watcher...............10
(C05) Number of dialogs to maintain per watcher...............1
(C06) Total number of watchers in domains............20,000,000
(C07) SUBSCRIBE message size in bytes.......................450
(C08) 200 OK for SUBSCRIBE message size in bytes............370
(C09) NOTIFY message size not including presence doc........500
(C10) 200 OK for NOTIFY message size in bytes...............370
(C11) Size of an average presence document..................350
(C13) Additional data per document in RLMI..................160
(C14) Multiparty boundary in RLMI document..................144
(C15) XML root node in RLMI document........................144

** Initial Messages
(I01) Initial SUBSCRIBE msgs per watcher......................1
(I02) Initial 200 OK msgs (SUBSCRIBE) per watcher.............1
(I03) Initial NOTIFY msgs per watcher.........................1
(I04) Initial 200 OK msgs (NOTIFY) per watcher................1
(I05) Total number &amp; bytes of initial SUBSCRIBE msgs
          Number of msgs for all watchers............20,000,000
          Bytes for all watchers..................9,000,000,000
(I06) Total number &amp; bytes of initial 200 OK (SUBSCRIBE) msgs
          Number of msgs for all watchers............20,000,000
          Bytes for all watchers..................7,400,000,000
(I07) Total number &amp; bytes of initial NOTIFY msgs
          Number of msgs for all watchers............20,000,000
          Bytes for all watchers................146,560,000,000
(I08) Total number &amp; bytes of initial 200 OK (NOTIFY) msgs
          Number of msgs for all watchers............20,000,000
          Bytes for all watchers..................7,400,000,000
(I09) Total number &amp; bytes of initial messages per day
          Number of msgs for all watchers............80,000,000
          Bytes for all watchers................170,360,000,000

** Steady State Messages
(S01) NOTIFY msgs due to state change
          per watched presentity per day.....................46
(S02) 200 (for NOTIFY due to state change) msgs
          per watched presentity per day.....................46
(S03) Total number and size of msgs due to state change per day
          Number of msgs for all watchers........18,400,000,000
          Bytes for all watchers.............16,670,400,000,000
(S04) Number of SUBSCRIBE msgs for refreshes
          per watcher per day.................................7
(S05) Number of 200 OK msgs for SUBSCRIBE msgs for refreshes
          per watcher per day.................................7
(S06) Number of NOTIFY msgs for refreshes
          per watcher per day.................................0
(S07) Number of 200 OK msgs for NOTIFY msgs for refreshes
          per watcher per day.................................0
(S08) Total number and size of msgs due to SUBSCRIBE refreshes
          Number of msgs for all watchers per day...280,000,000
          Bytes for all watchers per day........114,800,000,000
(S09) Total number &amp; bytes of steady messages per day
          Number of msgs for all watchers........18,680,000,000
          Bytes for all watchers.............16,785,200,000,000

** Termination Messages
(T01) Terminating SUBSCRIBE msgs per watcher..................1
(T02) Terminating 200 OK msgs (SUBSCRIBE) per watcher.........1
(T03) Terminating NOTIFY msgs per watcher.....................0
(T04) Terminating 200 OK msgs (NOTIFY) per watcher............0
(T05) Total number &amp; bytes of Terminating SUBSCRIBE msgs
          Number of msgs for all watchers............20,000,000
          Bytes for all watchers..................9,000,000,000
(T06) Total number &amp; bytes of terminating 200 OK (SUBSCRIBE) msgs
          Number of msgs for all watchers............20,000,000
          Bytes for all watchers..................7,400,000,000
(T07) Total number &amp; bytes of terminating NOTIFY msgs
          Number of msgs for all watchers.....................0
          Bytes for all watchers..............................0
(T08) Total number &amp; bytes of terminating 200 OK (NOTIFY) msgs
          Number of msgs for all watchers.....................0
          Bytes for all watchers..............................0
(T09) Total number &amp; bytes of terminating messages per day
          Number of msgs for all watchers............40,000,000
          Bytes for all watchers.................16,400,000,000

** Bottom Line
(B01) Total of messages between domains..........18,800,000,000
      Total of bytes bet. domains (PD=350)...16,971,960,000,000
      Total of bytes bet. domains (PD=3000)..41,881,960,000,000
(B02) Total number of messages / second.................652,778
      Total of bytes per second (PD=350)............589,304,167
      Total of bytes per second (PD=3000).........1,454,234,722
(B03) Total number of by msgs per user/day..................940
      Total number of bytes per user/day (PD=350).......848,598
      Total number of bytes per user/day (PD=3000)....2,094,098

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Very large network peering with optimizations&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
State Management</h3>

<p>In previous sections we have demonstrated the large amount of messages that need to 
be sent to/from a presence server In this section the state that needs to be 
maintained by a presence server will be analyzed and shown to be far from 
trivial.
</p>
<p>The presence server has two parallel tasks.
</p>
<p></p>
<ol class="text">
<li>Maintain the state of the presentities to which watchers subscribe.
</li>
<li>Maintain the state of the subscriptions of watchers and provide timely 
updates to the watchers.
</li>
</ol>

<p>For a single subscription from a single watcher on a presentity, the presence 
server has to maintain the following state:
</p>
<p></p>
<ul class="text">
<li>Subscription state including all the parameters that are needed in order to 
maintain the subscription as timers.
</li>
<li>Optional filtering information that was requested by the watcher. This 
includes enough information that is needed for doing the filtering. In addition 
additional information has to be maintained if partial notification is being 
supported for the subscription
</li>
<li>Optional rate management information as throttling
</li>
<li>Watcher information <a class='info' href='#RFC3857'>[RFC3857]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Watcher Information Event Template-Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a>, <a class='info' href='#RFC3858'>[RFC3858]<span> (</span><span class='info'>Rosenberg, J., &ldquo;An Extensible Markup Language (XML) Based Format for Watcher Information,&rdquo; August&nbsp;2004.</span><span>)</span></a> that 
is the result of the subscription in order to enable watched presentities to see 
who is watching them.
</li>
</ul>

<p>For each presentity that has been subscribed to in the presence server, the 
presence server has to maintain the following state:
</p>
<p></p>
<ul class="text">
<li>A list of the subscriptions for the presentity. Note that this is already 
taken care of from the size calculation point of view by the subscription state 
above.
</li>
<li>Authorization information for the presentity.
</li>
</ul>

<p>For each presentity for which there was any publication and the presentity 
has a state other then a default value, the presence server has to maintain the 
current value of the presentity.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1"></a><h3>2.2.1.&nbsp;
State Size Calculations</h3>

<p>Assuming the following sizes, the state size is calculated for various systems:
</p>
<p></p>
<ul class="text">
<li>Subscription size - 2K bytes. This includes watcher information that 
need to be created by the presence server for each subscription. This is 
for each subscription that is done by each watcher to each presentity that 
the watcher is watching. So if we have 10K watchers we should have 10K of 
these.
</li>
<li>Subscribed to resource - 1K bytes (for privacy information and other 
management info). This is for each presentity that is being watched. No 
matter how many watchers are watching it. The subscriptions themselves are 
already calculated in the previous bullet.
</li>
<li>Resource with a state - 6K bytes. This is a moderate assumption if we 
take into account the amount of data that is being put in a presence 
document as multiple devices, calendar and geographical information. This 
is for each presentity that has state other then the default empty state. 
It does not matter if it is being watched or not.
</li>
</ul>

<p>Tiny System:
</p>
<p></p>
<ul class="text">
<li>10K subscriptions = 19M bytes.
</li>
<li>5K subscribed to presentities = 5M bytes.
</li>
<li>10K presentities with state = 58M bytes.
</li>
</ul>

<p>The total for tiny system is 82M bytes.
</p>
<p>Medium System:
</p>
<p></p>
<ul class="text">
<li>100K subscriptions = 195M bytes.
</li>
<li>50K subscribed to presentities = 49M bytes.
</li>
<li>100K presentities with state = 586M bytes.
</li>
</ul>

<p>The total for medium system is 830M bytes.
</p>
<p>Large System:
</p>
<p></p>
<ul class="text">
<li>6M subscriptions = 11,718M bytes.
</li>
<li>3M subscribed to presentities = 2,929M bytes.
</li>
<li>4M presentities with state = 23437M bytes.
</li>
</ul>

<p>The total for large system is 38G bytes.
</p>
<p>Very Large System:
</p>
<p></p>
<ul class="text">
<li>150M subscriptions = 292,969M bytes.
</li>
<li>75M subscribed to presentities = 73,242M bytes.
</li>
<li>100M presentities with state = 585,937M bytes.
</li>
</ul>

<p>The total for very large system is 952G bytes which is a very big number for 
a very dynamic storage as needed by the presence server.
</p>
<p>Although the numbers above may seem moderate enough for the sizes that the presence server is
handling we should consider the following:
</p>
<p></p>
<ul class="text">
<li>Dynamic state - Although the state may seem not so big for databases even for 
the very large system, we need to remember that this state is a very dynamic 
state. Subscriptions come and go all the time, the status of presentities is being 
updated and so forth. This means that the presence server has to manage its 
state in a medium that is very dynamic and for such large sizes this task is not 
trivial.
</li>
<li>Interlinked state - The subscriptions and the subscribed to presentities are 
dependent on each other. There needs to be a link from the presentity to the 
subscriptions and vice versa. There is a need to be a linkage between the 
Resource List Server (RLS <a class='info' href='#RFC4662'>[RFC4662]<span> (</span><span class='info'>Roach, A., Campbell, B., and J. Rosenberg, &ldquo;A Session Initiation Protocol (SIP) Event Notification Extension for Resource Lists,&rdquo; August&nbsp;2006.</span><span>)</span></a>) and the various presence 
servers that hold the presence data. See section 4.5 in the presence scaling 
document for more details.
</li>
<li>Moderate assumptions - The size assumptions that were made above are quite 
moderate. As presence is becoming more a core middleware functionality that holds 
a lot of data on the user. In real-life the numbers above may be even higher and 
the presence server can have additional overhead as managing the SIP sessions, 
networking and more.
</li>
</ul>

<p>Although the calculations above do not show that there is a real issue with 
state management of presence in medium systems or even in big systems since it 
should be possible to divide the state between different machines, the state 
size is still very big. A bigger issue with the state is more when resource 
lists are involved and create an interlinked state between many servers. In that 
case the division of very big state to multiple servers becomes less 
trivial...
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Requirements</h3>

<p>This section lists requirements for a solution that will optimize the 
interdomain presence loads. The requirements are based on the presence scaling 
draft <a class='info' href='#I-D.ietf-simple-interdomain-scaling-analysis'>[I&#8209;D.ietf&#8209;simple&#8209;interdomain&#8209;scaling&#8209;analysis]<span> (</span><span class='info'>Houri, A., Aoki, E., Parameswar, S., Rang, T., Singh, V., and H. Schulzrinne, &ldquo;Presence Interdomain Scaling Analysis for SIP/SIMPLE,&rdquo; August&nbsp;2009.</span><span>)</span></a>.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Backward Compatibility Requirements</h3>

<p></p>
<ul class="text">
<li>REQ-001: The solution SHOULD NOT deprecate existing protocol mechanisms 
defined in SIP/SIMPLE. The ability of existing SIP/SIMPLE clients and/or servers from 
peering with a domain or a client implementing the solution SHOULD be retained 
with no changes required of existing servers to interoperate.<br />
<br />

</li>
<li>REQ-002-A: The solution SHOULD NOT constrain any existing RFC functional 
requirements for presence.<br />
<br />

</li>
<li>REQ-002-B: The solution MUST NOT constrain any existing RFC security 
requirements for presence.<br />
<br />

</li>
<li>REQ-003: Systems that are not using the new additions to the protocol SHOULD 
operate at the same level as they do today.<br />
<br />

</li>
</ul>

<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Policy, Privacy, Permissions Requirements</h3>

<p></p>
<ul class="text">
<li>REQ-004: The solution SHOULD NOT limit the ability for presentities to present 
    different views of presence to different watchers.<br />
<br />

</li>
<li>REQ-005: The solution SHOULD NOT restrict the ability of a presentity to obtain 
    its list of watchers.<br />
<br />

</li>
<li>REQ-006: The solution MUST NOT create any new or make worse any existing 
privacy holes.<br />
<br />

</li>
</ul>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Scalability Requirements</h3>

<p></p>
<ul class="text">
<li>REQ-007: Presence systems (intra or inter-domain) SHOULD scale in 
    linear proportion to the number of watchers and presentities in the system.<br />
<br />

</li>
<li>REQ-008: The solution SHOULD NOT require significantly more state then 
    solutions based on current protocol in order to implement the 
    optimizations.<br />
<br />

</li>
<li>REQ-009: The solution MUST allow presence systems to scale. Note: we view scalability on the order of 
    tens of millions of users in each peer domain.<br />
<br />

</li>
<li>REQ-010: There may be various usage patterns when users of one domain 
    subscribe to users from another domain. It may be that only small 
    percentage of users from each domain will subscribe to users from the other 
    domain, it may be that most watchers will be from the other domain while 
    there will be few watchers from the same domain. The solution MUST support 
    high percentage of watcher/presentity intersections between the domains and 
    it MUST support various intersection models.<br />
<br />

</li>
<li>REQ-011: Protocol changes MUST NOT prohibit optimizations in different 
    deployment models especially where there is a high level of cross subscriptions 
    between the domains.<br />
<br />

</li>
<li>REQ-012: New functionalities and extensions to the presence protocol 
    SHOULD take into account scalability with respect to the number of messages, 
    state size and management and processing load.<br />
<br />

</li>
</ul>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Topology Requirements</h3>

<p></p>
<ul class="text">
<li>REQ-013: The solution SHOULD allow for arbitrary federation topologies 
    including direct and indirect peering.<br />
<br />

</li>
</ul>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Considerations for Possible Optimizations </h3>

<p>The document provides an initial list of requirements for a solution of 
scalability of interdomain presence systems using the SIP/SIMPLE protocol. The 
issue of scalability was shown in a separate document <a class='info' href='#I-D.ietf-simple-interdomain-scaling-analysis'>[I&#8209;D.ietf&#8209;simple&#8209;interdomain&#8209;scaling&#8209;analysis]<span> (</span><span class='info'>Houri, A., Aoki, E., Parameswar, S., Rang, T., Singh, V., and H. Schulzrinne, &ldquo;Presence Interdomain Scaling Analysis for SIP/SIMPLE,&rdquo; August&nbsp;2009.</span><span>)</span></a>.

</p>
<p>The following is a discussion of the various possible paths for optimizations. 
One of the most important considerations is whether there is a need to adapt SIP 
that was designed more as an end to end protocol to be much more optimized when 
presence server interacts directly with another presence server.
</p>
<p>It is very possible that the issues that are described in this document are 
inherent to presence systems in general and not specific to the SIP/SIMPLE protocol. 
Organizations need to be prepared to invest substantial resources in the form of 
networks and hardware in order to create sizable systems. However, it is 
apparent that additional protocol optimizations are possible and further work is 
needed in the IETF in order to provide better scalability of large presence 
systems.
</p>
<p>We should remember that SIP was originally designed for end to 
end session creation and number and size of messages are of secondary importance 
for an end to end session negotiation protocol. For large scale and especially for very 
large scale presence the number of messages that are needed and the size of each 
message are of extreme importance. Adequate care must be taken in addressing 
scalability as part of the initial protocol design phase; Trying to to 
shoehorn scalability at a later phase will be doomed to failure.
</p>
<p>We should also consider whether using the same protocol between clients and 
servers and between servers is a good choice. It may be that in interdomain or 
even between servers in the same domain (as between RLSs  <a class='info' href='#RFC4662'>[RFC4662]<span> (</span><span class='info'>Roach, A., Campbell, B., and J. Rosenberg, &ldquo;A Session Initiation Protocol (SIP) Event Notification Extension for Resource Lists,&rdquo; August&nbsp;2006.</span><span>)</span></a>, and presence servers) there is a need to have a different protocol that will 
be very optimized for the load and can assume some assumptions about the network 
(for example do not use unreliable protocol as UDP but only TCP, see the section 
that calculates the number of bytes and messages for imaginary very optimized 
SIP).
</p>
<p>When a presence server connects to another server using the current 
SIP/SIMPLE protocol, there will be an extreme number of redundant messages 
due to the overhead in the SIP protocol of supporting both TCP and UDP and due 
to the need to send multiple presence documents for the same watched user 
because of privacy issues. A server to server protocol will have to address 
these issues. Some initial work to address these issues can be found in: <a class='info' href='#I-D.ietf-simple-view-sharing'>[I&#8209;D.ietf&#8209;simple&#8209;view&#8209;sharing]<span> (</span><span class='info'>Rosenberg, J., Donovan, S., and K. McMurry, &ldquo;Optimizing Federated Presence with View Sharing,&rdquo; November&nbsp;2008.</span><span>)</span></a>
and <a class='info' href='#I-D.ietf-simple-intradomain-federation'>[I&#8209;D.ietf&#8209;simple&#8209;intradomain&#8209;federation]<span> (</span><span class='info'>Rosenberg, J., Houri, A., Smyth, C., and F. Audet, &ldquo;Models for Intra-Domain Presence and Instant Messaging (IM) Bridging,&rdquo; July&nbsp;2009.</span><span>)</span></a>
and in other (still individual) drafts.
</p>
<p>Another issue that is more related to protocol design is whether NOTIFY 
messages should not be considered as media just like audio, video and even text 
messaging. The SUBSCRIBE method may be extended to negotiate the route and other 
parameters of the NOTIFY messages, in a similar way that the INVITE method  
negotiates media parameters. This way the load can be offloaded to a 
specialized NOTIFY "relays" thus not loading the control path of SIP. One of the 
possible ideas (Marc Willekens) is to use the SIP protocol for client/server 
NOTIFY but make use of a more optimized and controllable protocol for the 
server-to-server interface. Another possibility is to use the MSRP <a class='info' href='#RFC4975'>[RFC4975]<span> (</span><span class='info'>Campbell, B., Mahy, R., and C. Jennings, &ldquo;The Message Session Relay Protocol (MSRP),&rdquo; September&nbsp;2007.</span><span>)</span></a>, <a class='info' href='#RFC4976'>[RFC4976]<span> (</span><span class='info'>Jennings, C., Mahy, R., and A. Roach, &ldquo;Relay Extensions for the Message Sessions Relay Protocol (MSRP),&rdquo; September&nbsp;2007.</span><span>)</span></a> protocol for the notifications.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Very Optimized SIP</h3>

<p>SIP is network agnostic protocol, therefore, the protocol carries 
additional messages like 200 OK that would have been redundant in a 
protocol that is  TCP based only.
</p>
<p>The following calculation assumes an imaginary TCP only based version of SIP 
that optimizes the following:
</p>
<p></p>
<ul class="text">
<li>There is no 200 OK for each message. Since only TCP has to be supported, 
there is not need to compensate for network issues.
</li>
<li>There is no refresh for subscriptions.
</li>
<li>There is no NOTIFY upon termination of SUBSCRIPTION
</li>
<li>The size of each message is smaller since there is no need for the various 
headers that SIP uses for routing etc. So we need to assume smaller message 
sizes while we will keep the size of the presence document the same.
</li>
</ul>

<p>As notes above the calculations in this document do not assume offline 
means of getting parts of the presence information. Therefore, in addition 
to the above optimizations, the other optimizations that were assumed in 
the document will be assumed here also. These includes partial 
notifications and the dialog optimizations. The NOTIFY optimization is not 
relevant here since there are no refreshes of subscriptions.
</p>
<p>The following is a calculation for the very large networks peering scenario
assuming the imaginary TCP only SIP. It is very interesting to note that 
the dialog optimization does not reduce the number of bytes when partial 
notification optimization is applied (on the contrary) due to the RLMI overhead.
</p><br /><hr class="insert" />
<a name="fig12"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
** Constants
(C01) Subscription lifetime (hours)...........................8
(C02) Presence state changes / hour...........................6
(C03) Subscription refresh interval / hour....................0
(C04) Total federated presentities per watcher...............10
(C05) Number of dialogs to maintain per watcher...............1
(C06) Total number of watchers in domains............20,000,000
(C07) SUBSCRIBE message size in bytes.......................150
(C08) 200 OK for SUBSCRIBE message size in bytes..............0
(C09) NOTIFY message size not including presence doc........150
(C10) 200 OK for NOTIFY message size in bytes.................0
(C11) Size of an average presence document..................350
(C12) Size of an average partial presence document..........200

** Initial Messages
(I01) Initial SUBSCRIBE msgs per watcher......................1
(I02) Initial 200 OK msgs (SUBSCRIBE) per watcher.............0
(I03) Initial NOTIFY msgs per watcher.........................1
(I04) Initial 200 OK msgs (NOTIFY) per watcher................0
(I05) Total number &amp; bytes of initial SUBSCRIBE msgs
          Number of msgs for all watchers............20,000,000
          Bytes for all watchers..................3,000,000,000
(I06) Total number &amp; bytes of initial 200 OK (SUBSCRIBE) msgs
          Number of msgs for all watchers.....................0
          Bytes for all watchers..............................0
(I07) Total number &amp; bytes of initial NOTIFY msgs
          Number of msgs for all watchers............20,000,000
          Bytes for all watchers................136,680,000,000
(I08) Total number &amp; bytes of initial 200 OK (NOTIFY) msgs
          Number of msgs for all watchers.....................0
          Bytes for all watchers..............................0
(I09) Total number &amp; bytes of initial messages per day
          Number of msgs for all watchers............40,000,000
          Bytes for all watchers................139,680,000,000

** Steady State Messages
(S01) NOTIFY msgs due to state change
          per watched presentity per day.....................46
(S02) 200 (for NOTIFY due to state change) msgs
          per watched presentity per day......................0
(S03) Total number and size of msgs due to state change per day
          Number of msgs for all watchers.........9,200,000,000
          Bytes for all watchers..............8,666,400,000,000
(S04) Number of SUBSCRIBE msgs for refreshes
          per watcher per day.................................0
(S05) Number of 200 OK msgs for SUBSCRIBE msgs for refreshes
          per watcher per day.................................0
(S06) Number of NOTIFY msgs for refreshes
          per watcher per day.................................0
(S07) Number of 200 OK msgs for NOTIFY msgs for refreshes
          per watcher per day.................................0
(S08) Total number and size of msgs due to SUBSCRIBE refreshes
          Number of msgs for all watchers per day.............0
          Bytes for all watchers per day......................0
(S09) Total number &amp; bytes of steady messages per day
          Number of msgs for all watchers.........9,200,000,000
          Bytes for all watchers..............8,666,400,000,000

** Termination Messages
(T01) Terminating SUBSCRIBE msgs per watcher..................1
(T02) Terminating 200 OK msgs (SUBSCRIBE) per watcher.........0
(T03) Terminating NOTIFY msgs per watcher.....................0
(T04) Terminating 200 OK msgs (NOTIFY) per watcher............0
(T05) Total number &amp; bytes of Terminating SUBSCRIBE msgs
          Number of msgs for all watchers............20,000,000
          Bytes for all watchers..................3,000,000,000
(T06) Total number &amp; bytes of terminating 200 OK (SUBSCRIBE) msgs
          Number of msgs for all watchers.....................0
          Bytes for all watchers..............................0
(T07) Total number &amp; bytes of terminating NOTIFY msgs
          Number of msgs for all watchers.....................0
          Bytes for all watchers..............................0
(T08) Total number &amp; bytes of terminating 200 OK (NOTIFY) msgs
          Number of msgs for all watchers.....................0
          Bytes for all watchers..............................0
(T09) Total number &amp; bytes of terminating messages per day
          Number of msgs for all watchers............20,000,000
          Bytes for all watchers..................3,000,000,000

** Bottom Line
(B01) Total of messages between domains...........9,260,000,000
      Total of bytes between domains (PD=350).8,809,080,000,000
      Total of bytes bet. domains (PD=3000)...9,339,080,000,000
(B02) Total number of messages / second.................321,528
      Total of bytes per second (PD=350)............305,870,833
      Total of bytes per second (PD=3000)...........324,273,611
(B03) Total number of by msgs per user/day..................463
      Total number of bytes per user/day (PD=350).......440,454
      Total number of bytes per user/day (PD=3000)......466,954
&lt;artwork&gt;&lt;![CDATA[

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Very large networks peering, TCP only SIP+Partial+Dialog optimizations&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="fig18"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
** Constants
(C01) Subscription lifetime (hours)...........................8
(C02) Presence state changes / hour...........................6
(C03) Subscription refresh interval / hour....................0
(C04) Total federated presentities per watcher...............10
(C05) Number of dialogs to maintain per watcher..............10
(C06) Total number of watchers in domains............20,000,000
(C07) SUBSCRIBE message size in bytes.......................150
(C08) 200 OK for SUBSCRIBE message size in bytes..............0
(C09) NOTIFY message size not including presence doc........150
(C10) 200 OK for NOTIFY message size in bytes.................0
(C11) Size of an average presence document..................350
(C12) Size of an average partial presence document..........200

** Initial Messages
(I01) Initial SUBSCRIBE msgs per watcher.....................10
(I02) Initial 200 OK msgs (SUBSCRIBE) per watcher.............0
(I03) Initial NOTIFY msgs per watcher........................10
(I04) Initial 200 OK msgs (NOTIFY) per watcher................0
(I05) Total number &amp; bytes of initial SUBSCRIBE msgs
          Number of msgs for all watchers...........200,000,000
          Bytes for all watchers.................30,000,000,000
(I06) Total number &amp; bytes of initial 200 OK (SUBSCRIBE) msgs
          Number of msgs for all watchers.....................0
          Bytes for all watchers..............................0
(I07) Total number &amp; bytes of initial NOTIFY msgs
          Number of msgs for all watchers...........200,000,000
          Bytes for all watchers................100,000,000,000
(I08) Total number &amp; bytes of initial 200 OK (NOTIFY) msgs
          Number of msgs for all watchers.....................0
          Bytes for all watchers..............................0
(I09) Total number &amp; bytes of initial messages per day
          Number of msgs for all watchers...........400,000,000
          Bytes for all watchers................130,000,000,000

** Steady State Messages
(S01) NOTIFY msgs due to state change
          per watched presentity per day.....................46
(S02) 200 (for NOTIFY due to state change) msgs
          per watched presentity per day......................0
(S03) Total number and size of msgs due to state change per day
          Number of msgs for all watchers.........9,200,000,000
          Bytes for all watchers..............3,220,000,000,000
(S04) Number of SUBSCRIBE msgs for refreshes
          per watcher per day.................................0
(S05) Number of 200 OK msgs for SUBSCRIBE msgs for refreshes
          per watcher per day.................................0
(S06) Number of NOTIFY msgs for refreshes
          per watcher per day.................................0
(S07) Number of 200 OK msgs for NOTIFY msgs for refreshes
          per watcher per day.................................0
(S08) Total number and size of msgs due to SUBSCRIBE refreshes
          Number of msgs for all watchers per day.............0
          Bytes for all watchers per day......................0
(S09) Total number &amp; bytes of steady messages per day
          Number of msgs for all watchers.........9,200,000,000
          Bytes for all watchers..............3,220,000,000,000

** Termination Messages
(T01) Terminating SUBSCRIBE msgs per watcher.................10
(T02) Terminating 200 OK msgs (SUBSCRIBE) per watcher.........0
(T03) Terminating NOTIFY msgs per watcher.....................0
(T04) Terminating 200 OK msgs (NOTIFY) per watcher............0
(T05) Total number &amp; bytes of Terminating SUBSCRIBE msgs
          Number of msgs for all watchers...........200,000,000
          Bytes for all watchers.................30,000,000,000
(T06) Total number &amp; bytes of terminating 200 OK (SUBSCRIBE) msgs
          Number of msgs for all watchers.....................0
          Bytes for all watchers..............................0
(T07) Total number &amp; bytes of terminating NOTIFY msgs
          Number of msgs for all watchers.....................0
          Bytes for all watchers..............................0
(T08) Total number &amp; bytes of terminating 200 OK (NOTIFY) msgs
          Number of msgs for all watchers.....................0
          Bytes for all watchers..............................0
(T09) Total number &amp; bytes of terminating messages per day
          Number of msgs for all watchers...........200,000,000
          Bytes for all watchers.................30,000,000,000

** Bottom Line
(B01) Total of messages between domains...........9,800,000,000
      Total of bytes between domains (PD=350).3,380,000,000,000
      Total of bytes bet. domains (PD=3000)...3,910,280,000,000
(B02) Total number of messages / second.................340,278
      Total of bytes per second (PD=350)............117,361,111
      Total of bytes per second (PD=3000)...........135,763,889
(B03) Total number of by msgs per user/day..................490
      Total number of bytes per user/day (PD=350).......169,000
      Total number of bytes per user/day (PD=3000)......195,500

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Very large networks peering, TCP only SIP+Partial optimizations&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>This document discusses scalability requirements for the existing 
    SIP/SIMPLE protocol and model. Many of the changes to the protocol 
    will have security implications as mentioned in some of the requirements 
    above.
</p>
<p>One example of possible protocol changes that may have security 
    implications is sending a presence document only once between domains in 
    order to optimize the number of messages and network load. This possible 
    optimization will delegate privacy protection from one domain to another 
    domain and should be addressed when designing protocol optimizations
</p>
<p>Important part of work on the requirements and optimizations will be to make 
    sure that all the security aspects are covered.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>This document has no IANA actions.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgments</h3>

<p>We would like to thank Jonathan Rosenberg, Ben Campbell, Markus Isomaki 
    Piotr Boni, David Viamonte, Aki Niemi, Marc Willekens Gonzalo Camarillo for 
    their ideas and input. Special thanks to Jean-Francois Mule, Vijay K. 
    Gurbani and Hisham Khartabil for their a detailed review.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informational References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-simple-interdomain-scaling-analysis">[I-D.ietf-simple-interdomain-scaling-analysis]</a></td>
<td class="author-text">Houri, A., Aoki, E., Parameswar, S., Rang, T., Singh, V., and H. Schulzrinne, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-interdomain-scaling-analysis-08.txt">Presence Interdomain Scaling Analysis for SIP/SIMPLE</a>,&rdquo; draft-ietf-simple-interdomain-scaling-analysis-08 (work in progress), August&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-interdomain-scaling-analysis-08.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-simple-intradomain-federation">[I-D.ietf-simple-intradomain-federation]</a></td>
<td class="author-text">Rosenberg, J., Houri, A., Smyth, C., and F. Audet, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-intradomain-federation-04.txt">Models for Intra-Domain Presence and Instant Messaging (IM) Bridging</a>,&rdquo; draft-ietf-simple-intradomain-federation-04 (work in progress), July&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-intradomain-federation-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-simple-simple">[I-D.ietf-simple-simple]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-simple-05.txt">SIMPLE made Simple: An Overview of the IETF Specifications for Instant  Messaging and Presence using the Session Initiation Protocol (SIP)</a>,&rdquo; draft-ietf-simple-simple-05 (work in progress), March&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-simple-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-simple-view-sharing">[I-D.ietf-simple-view-sharing]</a></td>
<td class="author-text">Rosenberg, J., Donovan, S., and K. McMurry, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-view-sharing-02.txt">Optimizing Federated Presence with View Sharing</a>,&rdquo; draft-ietf-simple-view-sharing-02 (work in progress), November&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-view-sharing-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3857">[RFC3857]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3857">A Watcher Information Event Template-Package for the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;3857, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3857.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3858">[RFC3858]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3858">An Extensible Markup Language (XML) Based Format for Watcher Information</a>,&rdquo; RFC&nbsp;3858, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3858.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4662">[RFC4662]</a></td>
<td class="author-text">Roach, A., Campbell, B., and J. Rosenberg, &ldquo;<a href="http://tools.ietf.org/html/rfc4662">A Session Initiation Protocol (SIP) Event Notification Extension for Resource Lists</a>,&rdquo; RFC&nbsp;4662, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4662.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4975">[RFC4975]</a></td>
<td class="author-text">Campbell, B., Mahy, R., and C. Jennings, &ldquo;<a href="http://tools.ietf.org/html/rfc4975">The Message Session Relay Protocol (MSRP)</a>,&rdquo; RFC&nbsp;4975, September&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4975.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4976">[RFC4976]</a></td>
<td class="author-text">Jennings, C., Mahy, R., and A. Roach, &ldquo;<a href="http://tools.ietf.org/html/rfc4976">Relay Extensions for the Message Sessions Relay Protocol (MSRP)</a>,&rdquo; RFC&nbsp;4976, September&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4976.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Avshalom Houri</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">IBM</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">3 Pekris Street, Science Park</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Rehovot,   </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Israel</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:avshalom@il.ibm.com">avshalom@il.ibm.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sriram Parameswar</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Microsoft Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">One Microsoft Way</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Redmond, WA  98052</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Sriram.Parameswar@microsoft.com">Sriram.Parameswar@microsoft.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Edwin Aoki</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AOL  LLC</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">401 Ellis St.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mountain View, CA  94043</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:aoki@aol.net">aoki@aol.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vishal Singh</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Columbia University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Department of Computer Science</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">450 Computer 
Science Building</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">New York, NY  10027</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:vs2140@cs.columbia.edu">vs2140@cs.columbia.edu</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.cs.columbia.edu/~vs2140">http://www.cs.columbia.edu/~vs2140</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Henning Schulzrinne</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Columbia University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Department of Computer Science</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">450 Computer 
Science Building</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">New York, NY  10027</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 212 939 
7004</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:hgs+ecrit@cs.columbia.edu">hgs+ecrit@cs.columbia.edu</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.cs.columbia.edu/~hgs">http://www.cs.columbia.edu/~hgs</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
