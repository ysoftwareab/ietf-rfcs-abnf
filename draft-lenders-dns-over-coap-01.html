<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>DNS Queries over CoAP (DoC)</title>
<meta content="Martine Sophie Lenders" name="author">
<meta content="Christian Amsüss" name="author">
<meta content="Cenk Gündoğan" name="author">
<meta content="Thomas C. Schmidt" name="author">
<meta content="Matthias Wählisch" name="author">
<meta content="
       This document defines a protocol for sending DNS messages over the
Constrained Application Protocol (CoAP). These CoAP messages are protected
by DTLS-Secured CoAP (CoAPS) or Object Security for Constrained RESTful
Environments (OSCORE) to provide encrypted DNS message exchange for
constrained devices in the Internet of Things (IoT). 
    " name="description">
<meta content="xml2rfc 3.9.1" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-lenders-dns-over-coap-01" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.9.1
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.1
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.3.1
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 57.4.0
    six 1.16.0
-->
<link href="/tmp/draft-lenders-dns-over-coap-01-o38qqu4o.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">DoC</td>
<td class="right">September 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Lenders, et al.</td>
<td class="center">Expires 5 March 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">CoRE</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-lenders-dns-over-coap-01</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-09-01" class="published">1 September 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-03-05">5 March 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M.S. Lenders</div>
<div class="org">FU Berlin</div>
</div>
<div class="author">
      <div class="author-name">C. Amsüss</div>
</div>
<div class="author">
      <div class="author-name">C. Gündoğan</div>
<div class="org">HAW Hamburg</div>
</div>
<div class="author">
      <div class="author-name">T.C. Schmidt</div>
<div class="org">HAW Hamburg</div>
</div>
<div class="author">
      <div class="author-name">M. Wählisch</div>
<div class="org">FU Berlin</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">DNS Queries over CoAP (DoC)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines a protocol for sending DNS messages over the
Constrained Application Protocol (CoAP). These CoAP messages are protected
by DTLS-Secured CoAP (CoAPS) or Object Security for Constrained RESTful
Environments (OSCORE) to provide encrypted DNS message exchange for
constrained devices in the Internet of Things (IoT).<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-discussion-venues">
<a href="#name-discussion-venues" class="section-name selfRef">Discussion Venues</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Discussion of this document takes place on TODO<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">Source for this draft and an issue tracker can be found at
    <span><a href="https://github.com/anr-bmbf-pivot/draft-dns-over-coap">https://github.com/anr-bmbf-pivot/draft-dns-over-coap</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 5 March 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact ulBare toc ulEmpty">
<li class="compact ulBare toc ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact ulBare toc ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
</li>
          <li class="compact ulBare toc ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-selection-of-a-doc-server" class="xref">Selection of a DoC Server</a></p>
<ul class="toc ulEmpty ulBare compact">
<li class="toc ulEmpty ulBare compact" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-uri-template-alternatives" class="xref">URI Template Alternatives</a></p>
</li>
            </ul>
</li>
          <li class="compact ulBare toc ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-basic-message-exchange" class="xref">Basic Message Exchange</a></p>
<ul class="toc ulEmpty ulBare compact">
<li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-the-application-dns-message" class="xref">The "application/dns-message" Content-Format</a></p>
</li>
              <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-dns-queries-in-coap-request" class="xref">DNS Queries in CoAP Requests</a></p>
<ul class="toc ulEmpty ulBare compact">
<li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a href="#section-4.2.1" class="xref">4.2.1</a>.  <a href="#name-coap-methods" class="xref">CoAP Methods</a></p>
</li>
                  <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a href="#section-4.2.2" class="xref">4.2.2</a>.  <a href="#name-support-of-coap-caching" class="xref">Support of CoAP Caching</a></p>
</li>
                  <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.2.2.3">
                    <p id="section-toc.1-1.4.2.2.2.3.1"><a href="#section-4.2.3" class="xref">4.2.3</a>.  <a href="#name-examples" class="xref">Examples</a></p>
</li>
                </ul>
</li>
              <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-dns-responses-in-coap-respo" class="xref">DNS Responses in CoAP Responses</a></p>
<ul class="toc ulEmpty ulBare compact">
<li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.3.2.1">
                    <p id="section-toc.1-1.4.2.3.2.1.1"><a href="#section-4.3.1" class="xref">4.3.1</a>.  <a href="#name-response-codes-and-handling" class="xref">Response Codes and Handling DNS and CoAP errors</a></p>
</li>
                  <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.3.2.2">
                    <p id="section-toc.1-1.4.2.3.2.2.1"><a href="#section-4.3.2" class="xref">4.3.2</a>.  <a href="#name-support-of-coap-caching-2" class="xref">Support of CoAP Caching</a></p>
</li>
                  <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.4.2.3.2.3">
                    <p id="section-toc.1-1.4.2.3.2.3.1"><a href="#section-4.3.3" class="xref">4.3.3</a>.  <a href="#name-examples-2" class="xref">Examples</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact ulBare toc ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-coap-core-integration" class="xref">CoAP/CoRE Integration</a></p>
<ul class="toc ulEmpty ulBare compact">
<li class="toc ulEmpty ulBare compact" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-proxies-and-caching" class="xref">Proxies and caching</a></p>
</li>
              <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-observe-modifications" class="xref">OBSERVE (modifications)?</a></p>
</li>
              <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-oscore" class="xref">OSCORE</a></p>
</li>
            </ul>
</li>
          <li class="compact ulBare toc ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-uri-template-configuration" class="xref">URI template configuration</a></p>
</li>
          <li class="compact ulBare toc ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-considerations-for-unencryp" class="xref">Considerations for Unencrypted Use</a></p>
</li>
          <li class="compact ulBare toc ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact ulBare toc ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact ulBare toc ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-references" class="xref">References</a></p>
<ul class="toc ulEmpty ulBare compact">
<li class="toc ulEmpty ulBare compact" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact ulBare toc ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="xref">Appendix A</a>.  <a href="#name-change-log" class="xref">Change Log</a></p>
<ul class="toc ulEmpty ulBare compact">
<li class="toc ulEmpty ulBare compact" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#appendix-A.1" class="xref">A.1</a>.  <a href="#name-since-draft-lenders-dns-ove" class="xref">Since draft-lenders-dns-over-coap-00</a></p>
</li>
              <li class="toc ulEmpty ulBare compact" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#appendix-A.2" class="xref">A.2</a>.  <a href="#name-since-draft-lenders-dns-over" class="xref">Since draft-lenders-dns-over-coaps-00</a></p>
</li>
            </ul>
</li>
          <li class="compact ulBare toc ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-B" class="xref"></a><a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="compact ulBare toc ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-C" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">This document defines DNS over CoAP (DoC), a protocol to send DNS
<span>[<a href="#RFC1035" class="xref">RFC1035</a>]</span> queries and get DNS responses over the Constrained Application
Protocol (CoAP) <span>[<a href="#RFC7252" class="xref">RFC7252</a>]</span>. Each DNS query-response pair is mapped into a
CoAP message exchange. Each CoAP message is secured by DTLS <span>[<a href="#RFC6347" class="xref">RFC6347</a>]</span> or
Object Security for Constrained RESTful Environments (OSCORE) <span>[<a href="#RFC8613" class="xref">RFC8613</a>]</span>
to ensure message integrity and confidentiality.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">The application use case of DoC is inspired by DNS over HTTPS <span>[<a href="#RFC8484" class="xref">RFC8484</a>]</span>
(DoH). DoC, however, aims for the deployment in the constrained Internet of
Things (IoT), which usually conflicts with the requirements introduced by
HTTPS.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">To prevent TCP and HTTPS resource requirements, constrained IoT devices
could use DNS over DTLS <span>[<a href="#RFC8094" class="xref">RFC8094</a>]</span>. In contrast to DNS over DTLS, DoC
utilizes CoAP features to mitigate drawbacks of datagram-based
communication. These features include: block-wise transfer, which solves
the Path MTU problem of DNS over DTLS (see <span>[<a href="#RFC8094" class="xref">RFC8094</a>]</span>, section 5); CoAP
proxies, which provide an additional level of caching; re-use of data
structures for application traffic and DNS information, which saves memory
on constrained devices.<a href="#section-1-3" class="pilcrow">¶</a></p>
<span id="name-basic-doc-architecture"></span><div id="fig-overview-arch">
<figure id="figure-1">
        <div id="section-1-4.1">
<pre class="sourcecode lang-drawing">
                - GET coaps://[2001:db8::1]/?dns=example.org
               /- POST/FETCH coaps://[2001:db8::1]/
              /
             CoAP request
+--------+   [DNS query]   +--------+   DNS query    +--------+
|  DoC   |----------------&gt;|  DoC   |...............&gt;|  DNS   |
| Client |&lt;----------------| Server |&lt;...............| Server |
+--------+  CoAP response  +--------+  DNS response  +--------+
            [DNS response]

</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-basic-doc-architecture" class="selfRef">Basic DoC architecture</a>
        </figcaption></figure>
</div>
<p id="section-1-5">The most important components of DoC can be seen in <a href="#fig-overview-arch" class="xref">Figure 1</a>: A DoC
client tries to resolve DNS information by sending DNS queries carried within
CoAP requests to a DoC server. That DoC server may or may not resolve that DNS
information itself by using other DNS transports with an upstream DNS server.
The DoC server then replies to the DNS queries with DNS responses carried within
CoAP responses.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">TBD: additional feature sets of CoAP/CoRE<a href="#section-1-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-7.1">resource directory for DoC service discovery,<a href="#section-1-7.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-7.2">...<a href="#section-1-7.2" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="terminology">
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">A server that provides the service specified in this document is called a "DoC
server" to differentiate it from a classic "DNS server". Correspondingly, a
client using this protocol to retrieve the DNS information is called a "DoC
client".<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">The term "constrained nodes" is used as defined in <span>[<a href="#RFC7228" class="xref">RFC7228</a>]</span>.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">The terms "CoAP payload" and "CoAP body" are used as defined in <span>[<a href="#RFC7959" class="xref">RFC7959</a>]</span>.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL</span>
NOT", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="selection-of-a-doc-server">
<section id="section-3">
      <h2 id="name-selection-of-a-doc-server">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-selection-of-a-doc-server" class="section-name selfRef">Selection of a DoC Server</a>
      </h2>
<p id="section-3-1">A DoC client is configured with a URI Template <span>[<a href="#RFC6570" class="xref">RFC6570</a>]</span>. This allows us to
reuse configuration mechanisms provided for DoH.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">The URI Template <span class="bcp14">SHOULD</span> provide a variable "dns" so that GET requests can be
used to retrieve the DNS information. If the "dns" variable is not provided in
the URI Template, GET requests can not be used for DoC exchanges.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">TBD:<a href="#section-3-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-4.1">Support for more than one URI Template by DoC server.<a href="#section-3-4.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-4.2">DoC server identity, key exchange, ...<a href="#section-3-4.2" class="pilcrow">¶</a>
</li>
      </ul>
<div id="uri-template-alternatives">
<section id="section-3.1">
        <h3 id="name-uri-template-alternatives">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-uri-template-alternatives" class="section-name selfRef">URI Template Alternatives</a>
        </h3>
<p id="section-3.1-1">TBD:<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-2.1">CRI <span>[<a href="#I-D.ietf-core-href" class="xref">I-D.ietf-core-href</a>]</span> or CoRAL <span>[<a href="#I-D.ietf-core-coral" class="xref">I-D.ietf-core-coral</a>]</span><a href="#section-3.1-2.1" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="basic-message-exchange">
<section id="section-4">
      <h2 id="name-basic-message-exchange">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-basic-message-exchange" class="section-name selfRef">Basic Message Exchange</a>
      </h2>
<div id="sec_content-format">
<section id="section-4.1">
        <h3 id="name-the-application-dns-message">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-the-application-dns-message" class="section-name selfRef">The "application/dns-message" Content-Format</a>
        </h3>
<p id="section-4.1-1">This document defines the Internet media type "application/dns-message" for
the CoAP Content-Format. This media type is defined as in <span>[<a href="#RFC8484" class="xref">RFC8484</a>]</span>
Section 6, i.e., a single DNS message encoded in the DNS on-the-wire format
<span>[<a href="#RFC1035" class="xref">RFC1035</a>]</span>.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="dns-queries-in-coap-requests">
<section id="section-4.2">
        <h3 id="name-dns-queries-in-coap-request">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-dns-queries-in-coap-request" class="section-name selfRef">DNS Queries in CoAP Requests</a>
        </h3>
<p id="section-4.2-1">A DoC client encodes a single DNS query in one or more CoAP request
messages using either the CoAP GET <span>[<a href="#RFC7252" class="xref">RFC7252</a>]</span>, POST <span>[<a href="#RFC7252" class="xref">RFC7252</a>]</span>, or
FETCH <span>[<a href="#RFC8132" class="xref">RFC8132</a>]</span> methods. Requests of either method type <span class="bcp14">SHOULD</span> include
an Accept option to indicate the type of content that can be parsed in the
response. A client <span class="bcp14">MUST</span> be able to parse messages of Content-Format
"application/dns-message" regardless of the provided Accept option.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">To enable reliable message exchange, the CoAP request <span class="bcp14">SHOULD</span> be carried in a Confirmable (CON) message.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<div id="coap-methods">
<section id="section-4.2.1">
          <h4 id="name-coap-methods">
<a href="#section-4.2.1" class="section-number selfRef">4.2.1. </a><a href="#name-coap-methods" class="section-name selfRef">CoAP Methods</a>
          </h4>
<p id="section-4.2.1-1">When sending a CoAP request using the POST or FETCH method, a DoC client
<span class="bcp14">MUST</span> include the DNS query in the body (i.e. the payload, or the concatenated
payloads) of the CoAP request. The type of content of the body <span class="bcp14">MUST</span> be indicated
using the Content-Format option. This document specifies the usage of
Content-Format "application/dns-message" (details see <a href="#sec_content-format" class="xref">Section 4.1</a>).<a href="#section-4.2.1-1" class="pilcrow">¶</a></p>
<p id="section-4.2.1-2">If the FETCH or POST method are used and block-wise transfer <span>[<a href="#RFC7959" class="xref">RFC7959</a>]</span>
is supported by the client, more than one CoAP request message <span class="bcp14">MAY</span> be used.
If more than one CoAP request message is used to encode the DNS query, it
must be chained together using the Block1 option in those CoAP requests.<a href="#section-4.2.1-2" class="pilcrow">¶</a></p>
<p id="section-4.2.1-3">For a POST or FETCH request the URI Template specified in
<a href="#selection-of-a-doc-server" class="xref">Section 3</a> is processed without any variables set.<a href="#section-4.2.1-3" class="pilcrow">¶</a></p>
<p id="section-4.2.1-4">When sending a CoAP request using the GET method, the URI Template
specified in <a href="#selection-of-a-doc-server" class="xref">Section 3</a> is extended by the variable
"dns". A DoC client <span class="bcp14">MUST</span> use the "dns" variable in the URI-Query followed
by the DNS query encoded with "base64url" (details see <span>[<a href="#RFC8484" class="xref">RFC8484</a>]</span> Section
6). If new Content-Formats are specified in the future, the specification
<span class="bcp14">MUST</span> define the variable used in the URI Template with that new format.<a href="#section-4.2.1-4" class="pilcrow">¶</a></p>
<p id="section-4.2.1-5">A DoC client must implement the GET, POST, or FETCH method.  Due to the
lack of "base64url" encoding requirements, both FETCH and POST methods are
generally smaller than GET requests. Using the FETCH method is <span class="bcp14">RECOMMENDED</span>
because this method provides caching and block-wise transfer without
introducing the overhead of URI templates (see <a href="#tab_comp-methods" class="xref">Table 1</a>).<a href="#section-4.2.1-5" class="pilcrow">¶</a></p>
<span id="name-comparison-of-coap-method-f"></span><div id="tab_comp-methods">
<table class="center" id="table-1">
            <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-comparison-of-coap-method-f" class="selfRef">Comparison of CoAP method features (Y: Yes, N: No)</a>
            </caption>
<thead>
              <tr>
                <th class="text-right" rowspan="1" colspan="1">Method</th>
                <th class="text-center" rowspan="1" colspan="1">Cacheable</th>
                <th class="text-center" rowspan="1" colspan="1">Block-wise transferable</th>
                <th class="text-center" rowspan="1" colspan="1">No URI Template variable needed</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">GET</td>
                <td class="text-center" rowspan="1" colspan="1">Y</td>
                <td class="text-center" rowspan="1" colspan="1">N</td>
                <td class="text-center" rowspan="1" colspan="1">N</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">POST</td>
                <td class="text-center" rowspan="1" colspan="1">N</td>
                <td class="text-center" rowspan="1" colspan="1">Y</td>
                <td class="text-center" rowspan="1" colspan="1">Y</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">FETCH</td>
                <td class="text-center" rowspan="1" colspan="1">Y</td>
                <td class="text-center" rowspan="1" colspan="1">Y</td>
                <td class="text-center" rowspan="1" colspan="1">Y</td>
              </tr>
            </tbody>
          </table>
</div>
<p id="section-4.2.1-7">A DoC server <span class="bcp14">MUST</span> implement the GET, POST, and FETCH method.
A DoC server <span class="bcp14">MUST</span> be able to parse requests of Content-Format
"application/dns-message".<a href="#section-4.2.1-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_req-caching">
<section id="section-4.2.2">
          <h4 id="name-support-of-coap-caching">
<a href="#section-4.2.2" class="section-number selfRef">4.2.2. </a><a href="#name-support-of-coap-caching" class="section-name selfRef">Support of CoAP Caching</a>
          </h4>
<p id="section-4.2.2-1">The DoC client <span class="bcp14">SHOULD</span> set the ID field of the DNS header always to 0 to
enable a CoAP cache (e.g., a CoAP proxy en-route) to respond to the same
DNS queries with a cache entry. This ensures that the CoAP Cache-Key (for
GET see <span>[<a href="#RFC7252" class="xref">RFC7252</a>]</span> Section 5.6, for FETCH see <span>[<a href="#RFC8132" class="xref">RFC8132</a>]</span> Section 2)
does not change when multiple DNS queries for the same DNS data, carried in
CoAP requests, are issued. Technically, using the POST method does not
require the DNS ID set to 0 because the payload of a POST message is not
part of the Cache-Key. For consistency reasons, however, it is <span class="bcp14">RECOMMENDED</span>
to use the same constant DNS ID.<a href="#section-4.2.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="examples">
<section id="section-4.2.3">
          <h4 id="name-examples">
<a href="#section-4.2.3" class="section-number selfRef">4.2.3. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
          </h4>
<p id="section-4.2.3-1">The following examples illustrate the usage of different CoAP messages to
resolve "example.org. IN AAAA" based on the URI template
"coaps://[2001:db8::1]/{?dns}". The CoAP body is encoded in
"application/dns-message" Content-Format.<a href="#section-4.2.3-1" class="pilcrow">¶</a></p>
<p id="section-4.2.3-2">GET request:<a href="#section-4.2.3-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.2.3-3">
<pre>
GET coaps://[2001:db8::1]/
URI-Query: dns=AAABIAABAAAAAAAAB2V4YW1wbGUDb3JnAAAcAAE
Accept: application/dns-message
</pre><a href="#section-4.2.3-3" class="pilcrow">¶</a>
</div>
<p id="section-4.2.3-4">POST request:<a href="#section-4.2.3-4" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.2.3-5">
<pre>
POST coaps://[2001:db8::1]/
Content-Format: application/dns-message
Accept: application/dns-message
Payload: 00 00 01 20 00 02 00 00 00 00 00 00 07 65 78 61 [binary]
         6d 70 6c 65 03 6f 72 67 00 00 1c 00 01 c0 0c 00 [binary]
         01 00 01                                        [binary]
</pre><a href="#section-4.2.3-5" class="pilcrow">¶</a>
</div>
<p id="section-4.2.3-6">FETCH request:<a href="#section-4.2.3-6" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.2.3-7">
<pre>
FETCH coaps://[2001:db8::1]/
Content-Format: application/dns-message
Accept: application/dns-message
Payload: 00 00 01 20 00 02 00 00 00 00 00 00 07 65 78 61 [binary]
         6d 70 6c 65 03 6f 72 67 00 00 1c 00 01 c0 0c 00 [binary]
         01 00 01                                        [binary]
</pre><a href="#section-4.2.3-7" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="dns-responses-in-coap-responses">
<section id="section-4.3">
        <h3 id="name-dns-responses-in-coap-respo">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-dns-responses-in-coap-respo" class="section-name selfRef">DNS Responses in CoAP Responses</a>
        </h3>
<p id="section-4.3-1">Each DNS query-response pair is mapped to a CoAP REST request-response
operation, which may consist of several CoAP request-response pairs if
block-wise transfer is involved.  DNS responses are provided in the body (i.e. the
payload, or the concatenated payloads) of the CoAP response. A DoC server <span class="bcp14">MUST</span>
indicate the type of content of the body using the Content-Format option. This
document specifies the usage of Content-Format "application/dns-message"
(details see <a href="#sec_content-format" class="xref">Section 4.1</a>).<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">If supported, a DoC server <span class="bcp14">MAY</span> transfer the DNS response in more than one
CoAP responses using the Block2 option <span>[<a href="#RFC7959" class="xref">RFC7959</a>]</span>.<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<div id="response-codes-and-handling-dns-and-coap-errors">
<section id="section-4.3.1">
          <h4 id="name-response-codes-and-handling">
<a href="#section-4.3.1" class="section-number selfRef">4.3.1. </a><a href="#name-response-codes-and-handling" class="section-name selfRef">Response Codes and Handling DNS and CoAP errors</a>
          </h4>
<p id="section-4.3.1-1">A DNS response indicates either success or failure in the Response code of
the DNS header (see <span>[<a href="#RFC1035" class="xref">RFC1035</a>]</span> Section 4.1.1). It is <span class="bcp14">RECOMMENDED</span> that
CoAP responses that carry any valid DNS response use a "2.xx Success"
response code. A response to a GET or FETCH request <span class="bcp14">SHOULD</span> use the "2.05
Content" code. A response to a POST request <span class="bcp14">SHOULD</span> use the "2.01 Created"
code.<a href="#section-4.3.1-1" class="pilcrow">¶</a></p>
<p id="section-4.3.1-2">CoAP responses use non-successful response codes <span class="bcp14">MUST NOT</span> contain any payload
and may only be used on errors in the CoAP layer or when a request does not
fulfill the requirements of the DoC protocol.<a href="#section-4.3.1-2" class="pilcrow">¶</a></p>
<p id="section-4.3.1-3">Communication errors with a DNS server (e.g., timeouts) <span class="bcp14">SHOULD</span> be indicated
by including a SERVFAIL DNS response in a successful CoAP response.<a href="#section-4.3.1-3" class="pilcrow">¶</a></p>
<p id="section-4.3.1-4">A DoC client might try to repeat a non-successful exchange unless otherwise
prohibited. For instance, a FETCH request <span class="bcp14">MUST NOT</span> be repeated with a URI
Template for which the DoC server already responded with "4.05 Method Not
Allowed" since the server might only implement legacy CoAP and does not
support the FETCH method. The DoC client might also decide to repeat a
non-successful exchange with a different URI Template, for instance, when
the response indicates an unsupported Content-Format.<a href="#section-4.3.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_resp-caching">
<section id="section-4.3.2">
          <h4 id="name-support-of-coap-caching-2">
<a href="#section-4.3.2" class="section-number selfRef">4.3.2. </a><a href="#name-support-of-coap-caching-2" class="section-name selfRef">Support of CoAP Caching</a>
          </h4>
<p id="section-4.3.2-1">It is <span class="bcp14">RECOMMENDED</span> to set the Max-Age option of a response to the minimum TTL in the Answer section of a DNS response. This prevents expired records unintentionally being served from a CoAP cache.<a href="#section-4.3.2-1" class="pilcrow">¶</a></p>
<p id="section-4.3.2-2">It is <span class="bcp14">RECOMMENDED</span> that DoC servers set an ETag option on large responses (TBD: more concrete guidance) that have a short Max-Age relative to the expected clients' caching time.
Thus, clients that need to revalidate a response can do so using the established ETag mechanism.

With responses large enough to be fragmented,
it's best practice for servers to set an ETag anyway.<a href="#section-4.3.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="examples-1">
<section id="section-4.3.3">
          <h4 id="name-examples-2">
<a href="#section-4.3.3" class="section-number selfRef">4.3.3. </a><a href="#name-examples-2" class="section-name selfRef">Examples</a>
          </h4>
<p id="section-4.3.3-1">The following examples illustrate the replies to the query "example.org. IN
AAAA record", recursion turned on. Successful responses carry one answer
record including address 2001:db8:1::1:2:3:4 and TTL 58719.<a href="#section-4.3.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3.3-2">A successful response to a GET or FETCH request:<a href="#section-4.3.3-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.3.3-3">
<pre>
2.05 Content
Content-Format: application/dns-message
Max-Age: 58719
Payload: 00 00 81 a0 00 01 00 01 00 00 00 00 07 65 78 61 [binary]
         6d 70 6c 65 03 6f 72 67 00 00 1c 00 01 c0 0c 00 [binary]
         1c 00 01 00 01 37 49 00 10 20 01 0d b8 00 01 00 [binary]
         00 00 01 00 02 00 03 00 04                      [binary]
</pre><a href="#section-4.3.3-3" class="pilcrow">¶</a>
</div>
<p id="section-4.3.3-4">A successful response to a POST request uses a different response code:<a href="#section-4.3.3-4" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.3.3-5">
<pre>
2.03 Created
Content-Format: application/dns-message
Max-Age: 58719
Payload: 00 00 81 a0 00 01 00 01 00 00 00 00 07 65 78 61 [binary]
         6d 70 6c 65 03 6f 72 67 00 00 1c 00 01 c0 0c 00 [binary]
         1c 00 01 00 01 37 49 00 10 20 01 0d b8 00 01 00 [binary]
         00 00 01 00 02 00 03 00 04                      [binary]
</pre><a href="#section-4.3.3-5" class="pilcrow">¶</a>
</div>
<p id="section-4.3.3-6">When a DNS error (SERVFAIL in this case) is noted in the DNS response, the CoAP
request still indicates success:<a href="#section-4.3.3-6" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.3.3-7">
<pre>
2.05 Content
Content-Format: application/dns-message
Payload: 00 00 81 a2 00 01 00 00 00 00 00 00 07 65 78 61 [binary]
         6d 70 6c 65 03 6f 72 67 00 00 1c 00 01          [binary]
</pre><a href="#section-4.3.3-7" class="pilcrow">¶</a>
</div>
<p id="section-4.3.3-8">When an error occurs on the CoAP layer, the DoC server <span class="bcp14">SHOULD</span> respond with
an appropriate CoAP error, for instance "4.15 Unsupported Content-Format"
if the Content-Format option in the request was not set to
"application/dns-message" and the Content-Format is not otherwise supported by
the server.<a href="#section-4.3.3-8" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="coapcore-integration">
<section id="section-5">
      <h2 id="name-coap-core-integration">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-coap-core-integration" class="section-name selfRef">CoAP/CoRE Integration</a>
      </h2>
<div id="proxies-and-caching">
<section id="section-5.1">
        <h3 id="name-proxies-and-caching">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-proxies-and-caching" class="section-name selfRef">Proxies and caching</a>
        </h3>
<p id="section-5.1-1">TBD:<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.1">
            <a href="https://github.com/anr-bmbf-pivot/draft-dns-over-coap/issues/5">TTL vs. Max-Age</a><a href="#section-5.1-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.1-2.2">Responses that are not globally valid<a href="#section-5.1-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.1-2.3">
            <p id="section-5.1-2.3.1">General CoAP proxy problem, but what to do when DoC server is a DNS proxy,
response came not yet in but retransmission by DoC client was received (see
<a href="#rt-problem" class="xref">Figure 2</a>)<a href="#section-5.1-2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.3.2.1">
                <p id="section-5.1-2.3.2.1.1">send empty ACK (<a href="https://github.com/anr-bmbf-pivot/draft-dns-over-coap/issues/6#issuecomment-895880206">maybe move to best practices appendix</a>)<a href="#section-5.1-2.3.2.1.1" class="pilcrow">¶</a></p>
<span id="name-coap-retransmission-rt-is-r"></span><div id="rt-problem">
<figure id="figure-2">
                  <div id="section-5.1-2.3.2.1.2.1">
<pre class="sourcecode lang-drawing">
DoC client           DoC proxy           DNS server
     |  CoAP req [rt 1]  |                    |
     |------------------&gt;|  DNS query [rt 1]  |
     |                   |-------------------&gt;|
     |  CoAP req [rt 2]  |                    |
     |------------------&gt;|      DNS resp      |
     |     CoAP resp     |&lt;-------------------|
     |&lt;------------------|                    |
     |                   |                    |
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-coap-retransmission-rt-is-r" class="selfRef">CoAP retransmission (rt) is received before DNS query could have been fulfilled.</a>
                  </figcaption></figure>
</div>
</li>
            </ul>
</li>
        </ul>
</section>
</div>
<div id="observe-modifications">
<section id="section-5.2">
        <h3 id="name-observe-modifications">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-observe-modifications" class="section-name selfRef">OBSERVE (modifications)?</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-5.2-1.1">TBD<a href="#section-5.2-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-1.2">DoH has considerations on Server Push to deliver additional, potentially
outstanding requests + response to the DoC client for caching<a href="#section-5.2-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-1.3">OBSERVE does not include the request it would have been generated from ==&gt;
cannot be cached without corresponding request having been send over the wire.<a href="#section-5.2-1.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-1.4">If use case exists: extend OBSERVE with option that contains "promised" request
(see <span>[<a href="#RFC7540" class="xref">RFC7540</a>]</span>, section 8.2)?<a href="#section-5.2-1.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-1.5">Other caveat: clients can't cache, only proxys so value needs to be evaluated<a href="#section-5.2-1.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-1.6">Potential use case: <span>[<a href="#RFC8490" class="xref">RFC8490</a>]</span> Section 4.1.2<a href="#section-5.2-1.6" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="oscore">
<section id="section-5.3">
        <h3 id="name-oscore">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-oscore" class="section-name selfRef">OSCORE</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-5.3-1.1">TBD<a href="#section-5.3-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.3-1.2">With OSCORE DTLS might not be required<a href="#section-5.3-1.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="uri-template-configuration">
<section id="section-6">
      <h2 id="name-uri-template-configuration">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-uri-template-configuration" class="section-name selfRef">URI template configuration</a>
      </h2>
<ul class="normal">
<li class="normal" id="section-6-1.1">TBD<a href="#section-6-1.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-6-1.2">Maybe out-of-scope?<a href="#section-6-1.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-6-1.3">DHCP and RA options to deliver? <span>[<a href="#I-D.peterson-doh-dhcp" class="xref">I-D.peterson-doh-dhcp</a>]</span><a href="#section-6-1.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-6-1.4">CoRE-RD <span>[<a href="#I-D.ietf-core-resource-directory" class="xref">I-D.ietf-core-resource-directory</a>]</span> (...; can not express URI templates)<a href="#section-6-1.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-6-1.5">When no actual templating is involved: regular resource discovery ("rt=core.dns"?) through .well-known/core<a href="#section-6-1.5" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="considerations-for-unencrypted-use">
<section id="section-7">
      <h2 id="name-considerations-for-unencryp">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-considerations-for-unencryp" class="section-name selfRef">Considerations for Unencrypted Use</a>
      </h2>
<ul class="normal">
<li class="normal" id="section-7-1.1">TBD<a href="#section-7-1.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-7-1.2">DTLS-transport should be used<a href="#section-7-1.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-7-1.3">Non-DTLS can have benefits: Blockwise-transfer for IEEE 802.15.4, additional
layer of caching, ...<a href="#section-7-1.3" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="security-considerations">
<section id="section-8">
      <h2 id="name-security-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-8-1">TODO Security<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-9">
      <h2 id="name-iana-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-9-1">IANA is requested to assign CoAP Content-Format ID for the DNS message media
type in the "CoAP Content-Formats" sub-registry, within the "CoRE Parameters"
registry <span>[<a href="#RFC7252" class="xref">RFC7252</a>]</span>, corresponding the "application/dns-message" media
type from the "Media Types" registry:<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">Media-Type: application/dns-message<a href="#section-9-2" class="pilcrow">¶</a></p>
<p id="section-9-3">Encoding: -<a href="#section-9-3" class="pilcrow">¶</a></p>
<p id="section-9-4">Id: TBD<a href="#section-9-4" class="pilcrow">¶</a></p>
<p id="section-9-5">Reference: [TBD-this-spec]<a href="#section-9-5" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-10.1">
        <h3 id="name-normative-references">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC1035">[RFC1035]</dt>
        <dd>
<span class="refAuthor">Mockapetris, P.</span>, <span class="refTitle">"Domain names - implementation and specification"</span>, <span class="seriesInfo">STD 13</span>, <span class="seriesInfo">RFC 1035</span>, <span class="seriesInfo">DOI 10.17487/RFC1035</span>, <time datetime="1987-11" class="refDate">November 1987</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc1035">https://www.rfc-editor.org/rfc/rfc1035</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6347">[RFC6347]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span> and <span class="refAuthor">N. Modadugu</span>, <span class="refTitle">"Datagram Transport Layer Security Version 1.2"</span>, <span class="seriesInfo">RFC 6347</span>, <span class="seriesInfo">DOI 10.17487/RFC6347</span>, <time datetime="2012-01" class="refDate">January 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6347">https://www.rfc-editor.org/rfc/rfc6347</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6570">[RFC6570]</dt>
        <dd>
<span class="refAuthor">Gregorio, J.</span>, <span class="refAuthor">Fielding, R.</span>, <span class="refAuthor">Hadley, M.</span>, <span class="refAuthor">Nottingham, M.</span>, and <span class="refAuthor">D. Orchard</span>, <span class="refTitle">"URI Template"</span>, <span class="seriesInfo">RFC 6570</span>, <span class="seriesInfo">DOI 10.17487/RFC6570</span>, <time datetime="2012-03" class="refDate">March 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6570">https://www.rfc-editor.org/rfc/rfc6570</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7252">[RFC7252]</dt>
        <dd>
<span class="refAuthor">Shelby, Z.</span>, <span class="refAuthor">Hartke, K.</span>, and <span class="refAuthor">C. Bormann</span>, <span class="refTitle">"The Constrained Application Protocol (CoAP)"</span>, <span class="seriesInfo">RFC 7252</span>, <span class="seriesInfo">DOI 10.17487/RFC7252</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7252">https://www.rfc-editor.org/rfc/rfc7252</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7959">[RFC7959]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span> and <span class="refAuthor">Z. Shelby, Ed.</span>, <span class="refTitle">"Block-Wise Transfers in the Constrained Application Protocol (CoAP)"</span>, <span class="seriesInfo">RFC 7959</span>, <span class="seriesInfo">DOI 10.17487/RFC7959</span>, <time datetime="2016-08" class="refDate">August 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7959">https://www.rfc-editor.org/rfc/rfc7959</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8132">[RFC8132]</dt>
        <dd>
<span class="refAuthor">van der Stok, P.</span>, <span class="refAuthor">Bormann, C.</span>, and <span class="refAuthor">A. Sehgal</span>, <span class="refTitle">"PATCH and FETCH Methods for the Constrained Application Protocol (CoAP)"</span>, <span class="seriesInfo">RFC 8132</span>, <span class="seriesInfo">DOI 10.17487/RFC8132</span>, <time datetime="2017-04" class="refDate">April 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8132">https://www.rfc-editor.org/rfc/rfc8132</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8484">[RFC8484]</dt>
        <dd>
<span class="refAuthor">Hoffman, P.</span> and <span class="refAuthor">P. McManus</span>, <span class="refTitle">"DNS Queries over HTTPS (DoH)"</span>, <span class="seriesInfo">RFC 8484</span>, <span class="seriesInfo">DOI 10.17487/RFC8484</span>, <time datetime="2018-10" class="refDate">October 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8484">https://www.rfc-editor.org/rfc/rfc8484</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8613">[RFC8613]</dt>
      <dd>
<span class="refAuthor">Selander, G.</span>, <span class="refAuthor">Mattsson, J.</span>, <span class="refAuthor">Palombini, F.</span>, and <span class="refAuthor">L. Seitz</span>, <span class="refTitle">"Object Security for Constrained RESTful Environments (OSCORE)"</span>, <span class="seriesInfo">RFC 8613</span>, <span class="seriesInfo">DOI 10.17487/RFC8613</span>, <time datetime="2019-07" class="refDate">July 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8613">https://www.rfc-editor.org/rfc/rfc8613</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-10.2">
        <h3 id="name-informative-references">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-core-coral">[I-D.ietf-core-coral]</dt>
        <dd>
<span class="refAuthor">Hartke, K.</span>, <span class="refTitle">"The Constrained RESTful Application Language (CoRAL)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-core-coral-03</span>, <time datetime="2020-03-09" class="refDate">9 March 2020</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-coral-03">https://datatracker.ietf.org/doc/html/draft-ietf-core-coral-03</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-core-href">[I-D.ietf-core-href]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span> and <span class="refAuthor">H. Birkholz</span>, <span class="refTitle">"Constrained Resource Identifiers"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-core-href-06</span>, <time datetime="2021-07-25" class="refDate">25 July 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-href-06">https://datatracker.ietf.org/doc/html/draft-ietf-core-href-06</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-core-resource-directory">[I-D.ietf-core-resource-directory]</dt>
        <dd>
<span class="refAuthor">Amsüss, C.</span>, <span class="refAuthor">Shelby, Z.</span>, <span class="refAuthor">Koster, M.</span>, <span class="refAuthor">Bormann, C.</span>, and <span class="refAuthor">P. V. D. Stok</span>, <span class="refTitle">"CoRE Resource Directory"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-core-resource-directory-28</span>, <time datetime="2021-03-07" class="refDate">7 March 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-resource-directory-28">https://datatracker.ietf.org/doc/html/draft-ietf-core-resource-directory-28</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.peterson-doh-dhcp">[I-D.peterson-doh-dhcp]</dt>
        <dd>
<span class="refAuthor">Peterson, T.</span>, <span class="refTitle">"DNS over HTTP resolver announcement Using DHCP or Router Advertisements"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-peterson-doh-dhcp-01</span>, <time datetime="2019-10-21" class="refDate">21 October 2019</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-peterson-doh-dhcp-01">https://datatracker.ietf.org/doc/html/draft-peterson-doh-dhcp-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7228">[RFC7228]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span>, <span class="refAuthor">Ersue, M.</span>, and <span class="refAuthor">A. Keranen</span>, <span class="refTitle">"Terminology for Constrained-Node Networks"</span>, <span class="seriesInfo">RFC 7228</span>, <span class="seriesInfo">DOI 10.17487/RFC7228</span>, <time datetime="2014-05" class="refDate">May 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7228">https://www.rfc-editor.org/rfc/rfc7228</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7540">[RFC7540]</dt>
        <dd>
<span class="refAuthor">Belshe, M.</span>, <span class="refAuthor">Peon, R.</span>, and <span class="refAuthor">M. Thomson, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol Version 2 (HTTP/2)"</span>, <span class="seriesInfo">RFC 7540</span>, <span class="seriesInfo">DOI 10.17487/RFC7540</span>, <time datetime="2015-05" class="refDate">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7540">https://www.rfc-editor.org/rfc/rfc7540</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8094">[RFC8094]</dt>
        <dd>
<span class="refAuthor">Reddy, T.</span>, <span class="refAuthor">Wing, D.</span>, and <span class="refAuthor">P. Patil</span>, <span class="refTitle">"DNS over Datagram Transport Layer Security (DTLS)"</span>, <span class="seriesInfo">RFC 8094</span>, <span class="seriesInfo">DOI 10.17487/RFC8094</span>, <time datetime="2017-02" class="refDate">February 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8094">https://www.rfc-editor.org/rfc/rfc8094</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8490">[RFC8490]</dt>
      <dd>
<span class="refAuthor">Bellis, R.</span>, <span class="refAuthor">Cheshire, S.</span>, <span class="refAuthor">Dickinson, J.</span>, <span class="refAuthor">Dickinson, S.</span>, <span class="refAuthor">Lemon, T.</span>, and <span class="refAuthor">T. Pusateri</span>, <span class="refTitle">"DNS Stateful Operations"</span>, <span class="seriesInfo">RFC 8490</span>, <span class="seriesInfo">DOI 10.17487/RFC8490</span>, <time datetime="2019-03" class="refDate">March 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8490">https://www.rfc-editor.org/rfc/rfc8490</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="change-log">
<section id="appendix-A">
      <h2 id="name-change-log">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-change-log" class="section-name selfRef">Change Log</a>
      </h2>
<p id="appendix-A-1">TBD:<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-2.1">
          <a href="https://github.com/anr-bmbf-pivot/draft-dns-over-coap/issues/2">Reconsider usage of GET/POST</a>?<a href="#appendix-A-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-2.2">
          <a href="https://github.com/anr-bmbf-pivot/draft-dns-over-coap/issues/4">Request text duplication</a><a href="#appendix-A-2.2" class="pilcrow">¶</a>
</li>
      </ul>
<div id="since-draft-lenders-dns-over-coap-00httpsdatatrackerietforgdochtmldraft-lenders-dns-over-coap-00">
<section id="appendix-A.1">
        <h3 id="name-since-draft-lenders-dns-ove">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-since-draft-lenders-dns-ove" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-lenders-dns-over-coap-00">draft-lenders-dns-over-coap-00</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-A.1-1.1">Soften Content-Format requirements in <a href="#coap-methods" class="xref">Section 4.2.1</a> and <a href="#dns-responses-in-coap-responses" class="xref">Section 4.3</a><a href="#appendix-A.1-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-A.1-1.2">Clarify "CoAP payload"/"CoAP body" terminology<a href="#appendix-A.1-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-A.1-1.3">Fix nits and typos<a href="#appendix-A.1-1.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-lenders-dns-over-coaps-00httpsdatatrackerietforgdochtmldraft-lenders-dns-over-coaps-00">
<section id="appendix-A.2">
        <h3 id="name-since-draft-lenders-dns-over">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-since-draft-lenders-dns-over" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-lenders-dns-over-coaps-00">draft-lenders-dns-over-coaps-00</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-A.2-1.1">Clarification in abstract that both DTLS and OSCORE can be used as secure transport<a href="#appendix-A.2-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-A.2-1.2">
            <p id="appendix-A.2-1.2.1">Restructuring of <a href="#basic-message-exchange" class="xref">Section 4</a>:<a href="#appendix-A.2-1.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.2-1.2.2.1">Add dedicated <a href="#sec_content-format" class="xref">Section 4.1</a> on Content-Format<a href="#appendix-A.2-1.2.2.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="appendix-A.2-1.2.2.2">Add overview table about usable and required features for request method
types to <a href="#dns-queries-in-coap-requests" class="xref">Section 4.2</a><a href="#appendix-A.2-1.2.2.2" class="pilcrow">¶</a>
</li>
              <li class="normal" id="appendix-A.2-1.2.2.3">Add dedicated <a href="#sec_req-caching" class="xref">Section 4.2.2</a> and <a href="#sec_resp-caching" class="xref">Section 4.3.2</a> on caching
requirements for CoAP requests and responses<a href="#appendix-A.2-1.2.2.3" class="pilcrow">¶</a>
</li>
            </ul>
</li>
          <li class="normal" id="appendix-A.2-1.3">Fix nits and typos<a href="#appendix-A.2-1.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-B">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-B-1">TODO acknowledge.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Martine Sophie Lenders</span></div>
<div dir="auto" class="left"><span class="org">Freie Universität Berlin</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:m.lenders@fu-berlin.de" class="email">m.lenders@fu-berlin.de</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Christian Amsüss</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:christian@amsuess.com" class="email">christian@amsuess.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Cenk Gündoğan</span></div>
<div dir="auto" class="left"><span class="org">HAW Hamburg</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:cenk.guendogan@haw-hamburg.de" class="email">cenk.guendogan@haw-hamburg.de</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Thomas C. Schmidt</span></div>
<div dir="auto" class="left"><span class="org">HAW Hamburg</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:t.schmidt@haw-hamburg.de" class="email">t.schmidt@haw-hamburg.de</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Matthias Wählisch</span></div>
<div dir="auto" class="left"><span class="org">Freie Universität Berlin</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:m.waehlisch@fu-berlin.de" class="email">m.waehlisch@fu-berlin.de</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
