






                        The CMCC Terminal Process


                                 IEN 132


                             1 February 1980










                             David Flood Page










                      Bolt, Beranek and Newman Inc.
                            50 Moulton Street
                      Cambridge, Massachusetts 02238


                              (617) 491-1850

    IEN 132           The ARPA CMCC Terminal Process




    1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . 3


    2.  Commands . . . . . . . . . . . . . . . . . . . . . . . . . . 4

      2.1  Control commands  . . . . . . . . . . . . . . . . . . . . 5

        2.1.1  Gain access control . . . . . . . . . . . . . . . . . 5

        2.1.2  Start or stop reports or traps  . . . . . . . . . . . 6

        2.1.3  Relinquish control of a gateway . . . . . . . . . . . 7

      2.2  Output Commands . . . . . . . . . . . . . . . . . . . . . 7

        2.2.1  Find out reports/traps being collected/output . . . . 8

        2.2.2  Output selected reports/traps . . . . . . . . . . . . 8

        2.2.3  Close the Log File  . . . . . . . . . . . . . . . . . 8

      2.3  Database query commands . . . . . . . . . . . . . . . . . 8

        2.3.1  Give current Catenet description  . . . . . . . . . . 9

      2.4  Other commands  . . . . . . . . . . . . . . . . . . . . . 9

        2.4.1  Leave the terminal process  . . . . . . . . . . . . . 9


    3.  Output Formats . . . . . . . . . . . . . . . . . . . . . . . 9

      3.1  Report Outputs  . . . . . . . . . . . . . . . . . . . . . 9

        3.1.1  Gateway description . . . . . . . . . . . . . . . .  10

        3.1.2  Throughput transit matrix . . . . . . . . . . . . .  10

        3.1.3  Echo  . . . . . . . . . . . . . . . . . . . . . . .  10

        3.1.4  Status of all interfaces  . . . . . . . . . . . . .  11

        3.1.5  Routing data  . . . . . . . . . . . . . . . . . . .  11

      3.2  Trap Outputs  . . . . . . . . . . . . . . . . . . . . .  11

        3.2.1  Interface up/down . . . . . . . . . . . . . . . . .  11





                                  - 1 -

    IEN 132           The ARPA CMCC Terminal Process


        3.2.2  Neighbor gateway up/down  . . . . . . . . . . . . .  12

      3.3  Messages generated by the control process . . . . . . .  12

        3.3.1  Gateway reports time out  . . . . . . . . . . . . .  12

        3.3.2  Gateway restarts reporting  . . . . . . . . . . . .  12

      3.4  Other displays  . . . . . . . . . . . . . . . . . . . .  12

        3.4.1  List reports/traps collected/enabled and output . .  12

        3.4.2  Catenet description . . . . . . . . . . . . . . . .  13









































                                  - 2 -

    IEN 132           The ARPA CMCC Terminal Process


    1.  Introduction

         The Catenet Monitoring and Control Center (CMCC)  produces  a
    basic   information  gathering  system  for  the  catenet  and  in
    particular the catenet gateways.  Among the features included are:

       - multiple user access to information
       - selective display  of  throughput  and  status  reports  from
         gateways
       - capability of sending specific inquiries to gateways
       - limited status display of the catenet

    The   information  gathered  consists  of  throughput  statistics,
    routing information, gateway description and the up/down status of
    each gateway and its interfaces.

         The system consists of a control process and a number of user
    terminal processes.  The  control  process  communicates  directly
    with  the  gateways, while the terminal processes communicate with
    the control process.  Each terminal process sends requests to  the
    control  process  to  obtain  information  from  the  gateways and
    displays this information when it is received and can also put the
    information into a log file.  In addition, the terminal  processes
    can  be used to display information stored by the control process.

         Users can make requests for gateways to start or stop sending
    regular reports;  to  enable  or  disable  the  sending  of  event
    messages,  known  as  traps;  and to answer single inquiries.  The
    regular reports consist of packet throughput  statistics,  routing
    tables  and  the  up/down status of all interfaces in the gateway.
    Trap types include interface up or down and neighbor gateway up or
    down.  To avoid conflicts, the CMCC prevents more than one user at
    a time from manipulating reports or traps in a gateway.

         Using the report and trap information, the CMCC will maintain
    a representation of the up/down status of  all  the  gateways  and
    their  interfaces.   This  representation  can  be  displayed by a
    terminal process.  In addition, the CMCC will generate a  terminal
    alarm whenever it detects that a gateway or interface goes down or
    comes back up.

         The  CMCC  is also designed to cope with gateways that do not
    implement all possible monitoring facilities.  In these cases  the
    user  will  be  informed  that  the  gateway could not satisfy the
    information request.

         The document describes the use  of  the  Monitoring  terminal
    process  as  it is currently implemented.  It is currently a basic
    information gathering and displaying process, and by and large the
    information gathered is only that which the Satnet  gateways  will
    provide.   New features will be added, and the user interface made
    more sophisticated, as time goes on.  At the moment  there  is  no


                                  - 3 -

    IEN 132           The ARPA CMCC Terminal Process


    on-line  'help'  facility, so you will need this document with you
    when you start to use the terminal process.

         Background information can be found in IEN 105, "ARPA Catenet
    Monitoring  and  Control",  and  IEN  131,   "Gateway   Monitoring
    Protocol",  describes  the  message formats used for communicating
    with the gateways.

    2.  Commands

         Commands fall into four categories:

       - Commands to send messages to the gateways (control commands).
       - Commands to control the output of messages received from  the
         gateways (output commands).
       - Commands  to  interrogate  the   CMCC's   internal   database
         (database commands).
       - Other commands (miscellaneous).

         Information sent by the gateways is considered to be either a
    report  or a trap.  A report gives the current value of some data,
    such as throughput counts, in the gateway; a  trap  is  a  message
    announcing  some event in the gateway, such as a network interface
    going down.

         The report types available are:

       - Gateway description
       - Echo
       - Throughput counts
       - Status of all interfaces
       - Routing table

    and the trap types are:

       - Interface up/down
       - Neighbor gateway up/down

         These are explained more fully in IEN 131.

         In the following command format descriptions, square brackets
    denote an optional entry, and curly brackets indicate a list  from
    which  at  least  one  item  must  be  chosen.   Commands  may  be
    abbreviated as long as they are still unique;   however,  spelling
    errors  are  not  allowed,  even  if  the command has already been
    uniquely  specified  before  the  error  was  made.   The  minimum
    abbreviations  are  in  capitals.   A  word  or phrase enclosed in
    angle brackets indicates a variable whose name is to be  supplied,
    for example <gateway name>.  Words not contained in angle brackets
    and having no capitals are noise words and may be omitted.




                                  - 4 -

    IEN 132           The ARPA CMCC Terminal Process


         Command input is terminated by a carriage return.  Delete and
    control-A will delete a single character and control-U will delete
    an entire command.  Errors in command input cause self-explanatory
    error  messages to appear, for example BAD GATEWAY NAME.  After an
    error message, all characters (including editing characters) up to
    the next carriage return are ignored.

    2.1  Control commands

         These are the commands concerned with obtaining  reports  and
    traps  from  the  gateways.   In  order  to start and stop regular
    reports, or enable or disable traps, a terminal process must  have
    access  control  of the gateways affected.  This access control is
    an internal software lock and is not anything  that  the  gateways
    know  about.   A  terminal  process  may directly request a single
    report from a gateway  whether  it  has  access  control  of  that
    gateway  or  not.   These requests go through the control process,
    and it is the control process which actually sends the request  to
    the gateway.

    2.1.1  Gain access control

         The command

        Gain <gateway name>

    attempts  to  gain  access  control  of  a  gateway.   If no other
    terminal process has control of the gateway, then the reply

         <gateway name> - OK

    is given.  If another terminal process does have control, then the
    reply

         <gateway name> ALREADY CONTROLLED BY <user name>

    will appear.

         Examples:

         BBN  - OK

    and

         UCL ALREADY CONTROLLED BY UKSAT









                                  - 5 -

    IEN 132           The ARPA CMCC Terminal Process


    2.1.2  Start or stop reports or traps

       The general form of a control command is:

     [NO] {REPort<report>} from{ALL      } [{<n>       }][At <m>]
                   type        {<gateway>}  {Indefinite}
                                  name

     [NO] {Trap  <trap  >} from{ALL      }
                  type         {<gateway>}
                                  name

     The NO option turns off a report, or disables a trap.

     <report type> is one of:

       Description           (type 0)
       ECho                       (1)
       Thruput                    (2)
       Allints                    (3)
       Routing                    (7)

     and <trap type> is a selection from:

       Interface             (type 1)
       Neighbor                   (2)

         Report types 4-6 and trap type 3, which are mentioned in  the
    Gateway Monitoring Protocol document, are not implemented yet.

         The "from{ALL           }"
                  {<gateway name>}

    option  defines  the  gateways  affected.   A  gateway  name is an
    identifier  of  up  to  15  characters.   Gateway  names  may   be
    abbreviated.

         <n>
         Indefinite

    defines  the number of times the gateway is to produce the report.
    The default is 1.  Indefinite means  until  further  notice,  i.e.
    until a NO REPort command is issued.

         At <m>

    defines the reporting interval.  The default is 60 seconds.

         Example:

         REPort Thruput from UCL 25 At 60



                                  - 6 -

    IEN 132           The ARPA CMCC Terminal Process


    turns on a regular report, and

          NO Trap Interface from BBN

    disables a trap.

         If  the  terminal  process  does not have access control of a
    gateway,  then  a  commands  starting  with  NO,   or   containing
    parameters  specifying  a number of reports or reporting interval,
    will cause the message

         <gateway name> NOT CONTROLLED

    to be output, and the command will be ignored.

         The  terminal  process  reports  any  format  errors  in  the
    commands  by self-explanatory error messages, for example BAD TRAP
    TYPE.  It also reports on the results of the requests by  messages
    of the form:

       <gateway name>{WILL}<report/trap type(s)>
                     {WONT} [ - TIMED OUT]

         "TIMED  OUT"  will  appear if no response at all was obtained
    from the gateway.  The control process tries to obtain a  response
    up  to  three  times  at  30  second intervals before causing this
    message to appear.

    2.1.3  Relinquish control of a gateway

         To relinquish control of gateways, the command

         RELease {<gateway name>}
                 {ALL           }

    is entered.  The monitor responds with

         <gateway name> - RELEASED

    This is to allow  other  users  to  have  access  control  of  the
    gateway.   The Quit command (see below) also releases all gateways
    currently controlled by the terminal process.

    2.2  Output Commands

         The output commands are concerned with the  information  that
    appears on a terminal, or is output to the log file.  The commands
    available are as follows:

       -  Find out which reports/traps are collected/enabled.
       -  Find out which reports/traps are being output.
       -  Output selected reports/traps for selected gateways.


                                  - 7 -

    IEN 132           The ARPA CMCC Terminal Process


    The  display  outputs  corresponding  to the commands are given in
    section 3.

    2.2.1  Find out reports/traps being collected/output

       Which {Reports} {Collected}
             {Traps  } {Displayed}
                       {Logged   }

         The response to this command is described in  section  3.4.1.

    2.2.2  Output selected reports/traps

     [NO]{Display}{<report type>}[from{ALL            }]
         {Log    }{<trap   type>}     {<gateway name>}

    where  <report  type>  and  <trap type> are named as in the REPort
    command, above and the

         "from {ALL            }"
               {<gateway name>}

    option indicates the relevant gateways, as in the REPort  command.
    If  there  is  no  log  file open, then a Log command opens a file
    called 'CMCC_LOG.<date>', where <date> is of the  form  22-MAR-80.
    A  NO  Log  comand leaves the log file open, even if the result of
    the command is that nothing is being logged;  closing of  the  log
    file is done by a separate command (see below).

         Examples:

         Display Thruput from ALL
         NO Log INTerface from UCL

    2.2.3  Close the Log File

         A "NO Log" command turns off logging for the specified report
    type/gateway  combination,  but  leaves  the  log  file open.  The
    command

         UNLog

    turns off all logging and closes the log file.

    2.3  Database query commands

         Currently there is only one of these.







                                  - 8 -

    IEN 132           The ARPA CMCC Terminal Process


    2.3.1  Give current Catenet description

         The command is

     Catenet

    and it gives a display of the gateway connections to each network,
    and the status of those connections.  See display 3.4.2.

    2.4  Other commands

         Currently there is only one of these, too.

    2.4.1  Leave the terminal process

         The command is

         Quit

    and it releases any controlled gateways before displaying

         STOPPING...

    and halting the process. Terminating the process with a  control-C
    will not release controlled gateways and is therefore inadvisable.
    There  is  a separate command to release gateways without halting;
    see section 2.1.3.

    3.  Output Formats

         There are the following output types:

      - Outputs for reports and traps.
      - Outputs for messages generated by the control process.
      - Database query displays.

         Each output is preceded by the time expressed as four  digits
    (hhmm).  Any output except the database displays may appear either
    in  the  log  file  or  on  the terminal or both, depending on the
    output commands  that  have  been  entered.   The  information  is
    presented in the same format in both cases.

    3.1  Report Outputs

         In the following descriptions, <internet address> is the four
    bytes  of an internet address, expressed in decimal, and separated
    by commas.   A  <gateway  name>  may  be  a  character  identifier
    followed  by a slash and a network number, for example "BBN/4", or
    an <internet address>.

         Each report has a <sequence number> field of the form  #  50.
    For  regular  reports  this  is the sequence number of the report;


                                  - 9 -

    IEN 132           The ARPA CMCC Terminal Process


    for a  single  report  it  is  the  report  identification  number
    assigned to the request by the control process.

    3.1.1  Gateway description

     <gateway name > <sequence number> GATEWAY DESCRIPTION:
     INTERFACES:
         <internet address>,...
     NEIGHBORS:
         <gateway name>,...

    where  the "interfaces" list gives the internet address of each of
    the gateway's interfaces.  These are ordered in the same way as in
    the reports.

         Example:

         RSRE # 0 GATEWAY DESCRIPTION:
         INTERFACES:
              11,3,2,42;  25,6,0,0;
         NEIGHBORS:
              UCL/11

    3.1.2  Throughput transit matrix

         <gateway name> <sequence number> THROUGHPUT COUNTS:
         TO \ FROM <net name> <net name> DROPPED
         <net name> <count>    <count>    <count>
         <net name> <count>    <count>    <count>

         The counts are cumulative counts.

         Example:

         BBN  # 50 THROUGHPUT COUNTS:
         TO \ FROM  SATNET   ARPANET DROPPED
         SATNET      1         123      5
         ARPANET     13        4        1

    3.1.3  Echo

       The report is

          <gateway name> <sequence number> ECHO HEARD

         Example:

         NDRE # 4 ECHO HEARD






                                  - 10 -

    IEN 132           The ARPA CMCC Terminal Process


    3.1.4  Status of all interfaces

    <gateway name><sequence number> INTERFACE TO <net name> {UP  },..
                                                            {DOWN},

    for as many network interfaces as necessary.

         Example:

         COMSAT # 26 INTERFACE TO SATNET UP, COMSAT-NET DOWN

    3.1.5  Routing data

         <gateway name> <sequence number> ROUTING TABLE:

         NETWORK   DISTANCE   GATEWAYS
         NUMBER
          <net>    <hop count>   <gateway name>, <gateway name>,...

         This gives, for the gateway, the  minimum  distance  to  each
    network  plus  a  list  of  the neighbor gateway(s) on the minimum
    distance path(s).  If the gateway is known to the CMCC,  then  the
    <gateway name> will be the name, otherwise it will be expressed as
    an <internet address>.

         Example:

         BBN # 50 ROUTING TABLE:
         NETWORK  DISTANCE  GATEWAYS
         NUMBER

           1         2         10,0,0,38;
           4         0
           11        1         UCL/4

    3.2  Trap Outputs

         There  is  one  output  type  for  each  trap type.  There is
    nothing in a trap message corresponding to the  <sequence  number>
    in a report.

    3.2.1  Interface up/down

     <gateway name> TRAP MESSAGE: INTERFACE TO <net> {UP  }
                                                     {DOWN}
         Example:

         BBN TRAP MESSAGE: INTERFACE TO SATNET DOWN





                                  - 11 -

    IEN 132           The ARPA CMCC Terminal Process


    3.2.2  Neighbor gateway up/down

     <gateway name> TRAP MESSAGE: <Internet address> {UP  }
                                                     {DOWN}

         Example:

         NDRE TRAP MESSAGE: 10,0,0,38; DOWN


    3.3  Messages generated by the control process

         These messages are to do with gateway reports timing out, and
    coming back up again.

    3.3.1  Gateway reports time out

     <gateway name> NOT REPORTING.

         This  will  be  issued  if  the gateway reports have not been
    received for three minutes.

    3.3.2  Gateway restarts reporting

     <gateway name> REPORTING AGAIN.

         This is issued as soon  as  a  message  is  received  from  a
    gateway that has timed out.


    3.4  Other displays

         These  are  the displays which show information stored at the
    monitoring center.

    3.4.1  List reports/traps collected/enabled and output

     <report type list> from <gateway name>
     <trap type list> from <gateway name>

         These are produced in response to a "Which"...   command,  as
    appropriate.  See section 2.2.1.

    Examples:

     THRUPUT, ALLINTS FROM BBN








                                  - 12 -

    IEN 132           The ARPA CMCC Terminal Process


    3.4.2  Catenet description

         The  display  is a matrix showing for each gateway the status
    or existence of its connections to each network.  If a gateway  is
    connected  to  a  network  then  the  matrix entry consists of two
    counts, being the number of interfaces to the  network  which  are
    up,  and  down.   If  there is no connection to a network then the
    entry is a period.

                <net>  <net>  <net>

     <gateway>  { UP }   .      .
                {DOWN}
     <gateway>  - GATEWAY DOWN -

    and so on for all gateways.  The "- GATEWAY DOWN -"  display means
    that no regular report has been received from the  gateway  within
    the last three minutes.

     Example:

                ARPANET   SATNET  UCLNET
     UCL           .        UP     DOWN
     BBN          UP        UP      .
     NDRE        - GATEWAY DOWN -





























                                  - 13 -
