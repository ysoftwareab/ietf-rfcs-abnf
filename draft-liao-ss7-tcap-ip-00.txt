
Internet Engineering Task Force                            Monling Liao
INTERNET DRAFT                                                  Liem Le
draft-liao-ss7-tcap-ip-00.txt                             Emad Qaddoura 
March  1999                                                   Don Wurch
                                                        Nortel Networks
Expires: September 1999 


                    SS7-TCAP/IP Interworking
                <draft-liao-ss7-tcap-ip-00.txt>





Status of this Memo

This document is an Internet-Draft and is in full conformance with all 
provisions of Section 10 of RFC2026 except that the right to produce 
derivative works is not granted.

Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.  Note that other 
groups may also distribute working documents as Internet-Drafts.

Internet-Drafts are draft documents valid for a maximum of six months 
and may be updated, replaced, or obsoleted by other documents at any 
time.  It is inappropriate to use Internet-Drafts as reference material 
or to cite them other than as "work in progress."

The list of current Internet-Drafts can be accessed at 
http://www.ietf.org/ietf/1id-abstracts.txt

The list of Internet-Draft Shadow Directories can be accessed at 
http://www.ietf.org/shadow.html.



Abstract

The paper defines the architectural framework, convergence solutions and 
service interworking scenarios associated with SS7-TCAP/IP Interworking 
between applications in PSTN/IN/Wireless and IP domains.

Note

Some aspects of this contribution are the subject of a provisional patent 
application by Nortel Networks.  The contributors hereby represent that they are 
not personally aware of any other proprietary or intellectual property rights in 
this contribution.






<draft-liao-ss7-tcap-ip-00.txt> 				[Page 2]

Table of Contents
									 
1.0 Introduction								
2.0 Terminology								
3.0 Base Configuration							
3.1 Reference Architecture
3.2 Convergence functions							 
3.3 Inter-domain scenario configurations
3.3.1 Voice Over IP Service						 
3.3.2 Short Message Service TCAP/IP Interworking	
3.3.3 IP Applications and TCAP/IP Interworking 
3.3.4 Signaling Transport between SS7 networks	
4.0 Next Steps									
5.0 References and Related Work						
6.0 Authors											   


1.0 Introduction

Today, the telecommunications industry depends on the SS7 network for 
the signaling between different entities within the system. The 
technologies such as Internet Dial-up Access, Voice over IP (VoIP), etc. 
have identified the need of SS7-ISUP/IP Interworking. There are several 
Internet Drafts[1,2] that define how the SS7-ISUP inter-works with IP. 
The other aspect of the SS7 is the use of TCAP for transaction related 
applications as in 800/888, calling card, local number portability 
(LNP), wireless mobility management, Intelligent Network (IN) and CLASS 
services. These services are also required on VoIP convergent network. 
In fact, some of these service entities have been planned and/or 
implemented in the IP network without the standardization of the 
TCAP/SS7 Interworking with IP. 

The explosive growth of the Internet and IP networks makes the 
integration of SS7 entities in the IP network more practical. The 
network intelligence on voice over IP network will make the use of TCAP 
on a more widespread basis. This paper proposes the integration of SS7 
network services into IP networks via the TCAP/IP Interworking.

2.0 Terminology

Call Server/Controller (CS)
The Call Server performs signaling and call control functions for IP 
clients, e.g., VoIP phones and Media Gateways. CS may handle the 
registration and management of resources at the MG.  The CS may have the 
ability to authorize resource usage based on local policy, for example, 
based on the attributes of both the end-user and the ISP. 

Directory Number (DN)
Subscriber number or telephone number.

Global Title Translation (GTT)
SS7 network routing function that translates a logical address to a 
physical SS7 network address and possibly, a subsystem number, which 
identify the application that will process the message.

<draft-liao-ss7-tcap-ip-00.txt>					[Page 3]

Internet Service Provider (ISP)
Group providing Internet service to customers
 
ISDN User Part (ISUP)
Integrated Services Digital Network User Part. The call control part of 
the SS7 protocol.  

Media Gateway (MG)
A MG terminates PSTN facilities (trunks, loops), packetizes the media 
stream for IP, if it is not already packetized, and delivers packetized 
traffic to the IP network. Examples of MGs are NAS (Network Access 
Servers) and VoIP gateways. The NAS and VoIP functions may or may not be 
combined in one gateway.

Public Switched Telephone Network (PSTN)
Abbreviation used by the ITU for the public telephone network.

Service Control Point (SCP)
This is a node in an SS7 network that provides centralized service logic 
and data, such as call routing information.

Signaling Connection Control Part (SCCP)
The signaling layer in the SS7 protocol provides a transfer capability 
for circuit related and non-circuit related signaling information.

Signal Transfer Point (STP)
This is a node in an SS7 network that routes signaling messages based on 
their destination address in the SS7 network.

TCAP/IP Interworking Gateway (TIPG)
The network entity that provides the interface between SS7 network and 
IP network pertaining to TCAP messaging.

Transaction Capabilities Application Part (TCAP)
Transaction Capabilities in the SS7 protocol are functions that control 
non-circuit-related information transfer between two or more signaling 
nodes via a signaling network. 




3.0 Base Configurations

SS7-TCAP/IP Interworking will provide an interface between the SS7 
network TCAP messaging and IP network entities. This section presents 
base configurations that serve to illustrate the architectural framework 
of the SS7-TCAP/IP Interworking. 
  



3.1 Reference Architecture




<draft-liao-ss7-tcap-ip-00.txt> 				[Page 4]


      PSTN   				IP Network          
                                       		     +-----+
 +---+                                         	     |IP   |
 |SCP|                                     	     |Entity        
 +---+\                                TCAP over /   +-----+    
       \    +---+   TCAP over    +----+  IP*    /       .
 +---+  \---|STP|------SS7-------|TIPG| -------/        .
 |SP |----- +---+                +----+ -------         .
 +---+     /                 	 TCAP/IP       \     +-----+
 +-------+/                   Interworking      \    |IP   |
 |VLR/HLR|                       Function        \   |Entity
 +-------+                                           +-----+
				
	Figure 1: TCAP/IP Interworking Reference Architecture

* This Reference Architecture shows an open TCAP/IP Interface between 
the TIPG and the IP Entity. Please refer to the, "Simple SS7-TCAP/IP 
Protocol (STIPP)" document [3] for a proposed protocol for this open 
interface.

The SS7-TCAP/IP Interworking function will be performed on the TCAP/IP 
Gateway (TIPG). The Reference Architecture for the TIPG is illustrated 
in figure 1.


The Reference Architecture for TIPG shows the TCAP/IP Interworking, 
including the interface between the SS7 network and the IP network. The 
TCAP/IP Interworking function could also be performed on any gateway 
that establishes an interface between the SS7 network and an IP network.

Three inter-domain scenarios are addressed:

1. SS7 entity communicating with IP server                              
2. IP entity (e.g. call server) communicating with SCP in SS7 network
3. IP signaling transport between two SS7 networks

To the interconnecting SS7 network, TIPG acts as a signaling endpoint. 
It may, of course, include STP functions and acts as a STP. To the 
interconnecting IP network, TIPG acts as a transit point for messaging 
between SS7 network and IP entities. TIPG can also be an IP entity 
itself, that is, a TIPG can transfer TCAP messages to a far-end TIPG for 
signaling transport between two SS7 networks. 

By providing TCAP/IP interworking functions, the signaling transport is 
transparent to TCAP applications. Thus, TCAP applications must not be 
impacted whether the signaling message is sent over SS7 network or IP 
network.  Within SS7 network, SCCP functions are provided for addressing 
and routing. Within IP network, a convergence layer is defined for 
addressing and routing functions. 
									              
The TIPG will perform the mapping function between IP entities and SS7 
addresses, and bi-directional encapsulation/decapsulation function for 
the TCAP/IP Interworking. 

<draft-liao-ss7-tcap-ip-00.txt> 				[Page 5]


Depends on application needs (e.g. sequence control), it may require 
either TCP/IP or UDP/IP to provide the transport functions for TCAP over  
IP. Whether using TCP, UDP or a reliable transport is outside the scope 
of this document. A convergence layer named Simple TCAP Interworking 
Part (STIP) is defined between TCAP and UDP/IP (or TCP/IP) transport. 
STIP provides connectionless control for TCAP applications.  

The STIP header consists of called party address and calling party 
address paraameters as defined in SCCP.

*************   SS7        ********     IP      ************
*SS7 Entity *--------------* TIPG *-------------* IP Entity*
*************              ********             ************
                +-----+               +-----+
                |TCAP |               |TCAP |
                +-----+               +-----+
                |SCCP |               |STIP |
                +-----+               +-----+
                |MTP  |               |TCP/UDP/Reliable transport 
                +-----+               +-----+ 
                                      | IP  |
                                      +-----+
      
    Figure 2: TCAP messaging between SS7 network & IP network

 
I. SS7 network originates a TCAP message into the IP network:

+-----+-----+-----+             +----+              +------+----+-----+
| MTP | SCCP| TCAP|-----------> |TCAP|------------->|IP/UDP|STIP|TCAP |
+-----+-----+-----+Decapsulation+----+ Encapsulation+------+----+-----+

	Figure 3.a: TCAP messaging from SS7 network to IP network

The SS7 message is decapsulated to remove the MTP and SCCP headers. The 
remaining TCAP message is encapsulated with the IP header and the STIP 
header, which contains the required information from the MTP and SCCP 
headers.

II. IP network originates a TCAP message into the SS7 network:

+------+-----+-----+             +----+              +----+-----+-----+
|IP/UDP| STIP|TCAP |-----------> |TCAP|------------> |MTP | SCCP| TCAP|
+------+-----+-----+Decapsulation+----+Encapsulation +----+-----+-----+

	Figure 3.b: TCAP messaging from IP network to SS7 network

The IP message is decapsulated to remove the IP header and the STIP 
header. The remaining TCAP message is encapsulated with the MTP and SCCP 
headers with the required information from the STIP header. 

III. IP network provides TCAP message transport between two SS7 
networks:

<draft-liao-ss7-tcap-ip-00.txt> 				[Page 6]


The TCAP message is originated from one SS7 network and is terminated to 
a far-end SS7 network. The IP network provides signaling transport 
functions. Each TIPG at the edge of IP network performs the 
encapsulation/decapsulation functions as described above. 



3.2 Convergence functions

STIP convergence functions are required in both TIPG gateway and IP 
entity that requires the TCAP over IP function. 

Note that TIPG may be deployed as a STP and thus some of IP servers,
e.g. call servers, are provisioned as pseudo signaling end point 
to the SS7 network. The routing in this case is based on mapping
between point codes and IP addresses. The STIP functions described
below assume that no point codes are provisioned for IP entities 
except the TIPG.

3.2.1 TIPG STIP functions

TIPG acts as a signaling end point to the SS7 network and as a transit 
signaling point to the IP network. IP entities are TIPG's subsystems.
TIPG needs to maintain the mapping between Subsystem number (SSN) and
the address of IP servers after IP servers logging in [3]. 



In addition to encapsulation and decapsulation functions described in
section 3.1, STIP convergence layer performs SCCP addressing and 
routing to SS7 network and also SCCP-like addressing and routing
to IP network. 

3.2.1.1 Global Title Translation (GTT) function

Global Title (GT) Address in SS7 network refers E.164 DN and E.214 
Mobile number. The GTT function performed by SCCP is to translate GT to 
find a destination node in SS7 network. Since TIPG is acting as a 
transit signaling point to IP entities, the GTT function may be required 
and extended in TIPG. Possible GTT outcomes:

- a destination node in SS7 network - DPC (+SSN or +GT)
- a destination node in IP network - IP address + port number


3.2.1.2 Incoming TCAP messages from SS7 network

STIP determines the destination IP entity based on Destination Point 
Code (DPC) and the called party address.





<draft-liao-ss7-tcap-ip-00.txt> 				[Page 7]

1. If DPC of the incoming message is TIPG itself, the destination is a 
TCAP application that may reside in one IP server or another TIPG (for 
signaling transport between two SS7 networks) depends on the Routing 
Indicator in Called Party Address (CDPA).

- SSN routing: If SSN is available, forward the message to the IP server 
that has logged in with the same SSN, otherwise the SCCP message return 
procedure is initiated. 

- GT routing: This indicates translation is required. STIP performs GTT 
to obtain a far end TIPG's IP address and forwards the message.

2. If DPC is not TIPG itself, the signaling transport function is 
requested. STIP retrieves the IP address of a far end TIPG based on the 
DPC. The mapping between DPC and IP address is described in section 
3.2.1.4.

The SCCP Called Party Address (CdPA) and Calling Party Address (CgPA) 
are copied into STIP CdPA and CgPA with the following exceptions:

- CdPA: If DPC is not TIPG itself and SCCP.CdPA contains SSN only, the 
DPC must be added to STIP.CdPA in order for the far end TIPG to send out 
the message to its interconnecting SS7 network.

- CgPA: If SCCP.CgPA contains SSN only, the OPC must be added to 
STIP.CgPA in order for the response message to be sent back to the 
originator.


3.2.1.3 Incoming TCAP messages from IP network

If STIP.CdPA indicates GT routing, then perform GTT to obtain a 
destination address:
- the destination is an IP address, forward the message to the IP 
entity. 
- the destination is a SS7 point code then set DPC to the SS7 
point code.

The STIP CdPA and CgPA are copied into SCCP CdPA and CgPA with the 
following exceptions:

- CdPA: If STIP.CdPA contains PC and SSN, copy the SSN to SCCP.CdPA and 
uses the PC for DPC. 

- CgPA: If STIP.CdPA indicates GT routing, and STIP.CgPA contains SSN 
only, this indicates the message is originated from an IP server. STIP 
adds TIPG's PC into SCCP.CgPA in order for a response message to be sent 
back to the TIPG.

The OPC is set to TIPG's PC unless the STIP.CgPA contains a different PC 
that indicates it is a signaling transport message. In this case, the 
OPC must be set to the PC from STIP.CgPA.



<draft-liao-ss7-tcap-ip-00.txt> 				[Page 8]

3.2.1.4 Mapping between point code and IP address 

To provide signaling transport over IP function between two SS7 
networks, it requires mapping of SS7 point codes to a TIPG's IP address.

This mapping information is needed when a response message needs to be 
sent back to the originating SS7 network. STIP needs to record the DPC 
with incoming IP address and port number when it first sends out the 
query message with an OPC other than its own PC to SS7 network.

To prevent the overload with the point code mapping information,
TIPG may add a 'clean-up' procedure to periodically delete
the mapping records that are not referenced/used over a period of time.


3.2.2 STIP in IP entity (non TIPG) 

STIP provides addressing and routing functions for TCAP applications in 
IP entities. The STIP CgPA and CdPA contain the same type of SCCP 
routing addresses: GT and PC/SSN. Since the IP entity is not an SS7 
entity, it does not have SS7 point code nor does it utilizes any point 
code that may be sent to it in CgPA from the homed TIPG. The point code 
if any contained in CgPA in a query message is used as CdPA in a 
subsequent response message to the originator via TIPG.

STIP provides three primitives as described in SS7 SCCP to the TCAP 
user:

1. N-UNITDATA request - used by the TCAP user to request data transport 
to another user.

2. N-UNITDATA indication - informs the TCAP user that data is being 
delivered to it.

3. N-NOTICE indication - informs the TCAP user that data could not reach 
the final destination.

3.2.2.1 Incoming STIP TCAP Data message from TIPG 

STIP TCAP Data message is defined in STIPP document [3]. The routing 
indicator in CdPA must be set to SSN routing. The message is passed to 
the application using N-UNITDATA indication primitive with parameters:
- CdPA
- CgPA
- TCAP data

3.2.2.2 Outgoing message from subsystem

STIP received the data parameters from the TCAP user via N-UNITDATA 
request primitive. The data parameters are:
- CdPA
- CgPA 
- TCAP data


<draft-liao-ss7-tcap-ip-00.txt> 				[Page 9]

The addressing information may take the following forms:
- DPC+SSN (from the CgPA of the received message from SS7 network)
- GT 

It's optional for TCAP user to set CgPA. The CgPA is set to its own SSN. 
STIP sends the message via UDP/IP to the homed TIPG.

3.2.2.3 STIP TCAP Error message from TIPG

Upon receiving the TCAP Error message (defined in STIPP protocol [3]), 
STIP informs the TCAP user via N-NOTICE indication primitive.



3.3 Inter-domain scenarios configurations

3.3.1 Voice Over IP Services Configuration
 
The Voice-Over-IP (VoIP) services configuration illustrates the 
application of the TCAP/IP Interworking functionality. The TCAP/IP 
Interworking functionality will be performed within the TIPG.             
				                                                 

	     
          +---+    ------------		 
          |SCP|--- |SS7 network|----------	
          +---+    ------------            \
                  ss7 /   \                 \
                     /     \ss7              \	     
                +------+  +-------+           \+-----+   
                | TIPG |  |ISUP GW|            |CO/SP|---PSTN phone         
                +------+  +-------+            +-----+           		
	
                  STIP\     / IP                /
                     +-------+                 /
              ------ |  CS   |                /
             /IP     +-------+               /
            /           |IP                 /
   -----------       +-------+         ---------- 
   |IP network|------|  MG   |---------|  PSTN	 |			 
   ------------ RTP  +-------+  IMT    ----------		  	   
       |      stream					  
       |
      IP phone

	Figure 4: VoIP Services TCAP/IP Interworking Configuration
    

Note:
1. TIPG and ISUP Gateway are two different logical entities that can 
physically be located on the same physical box.
2. IMT- Inter-Machine Trunk



<draft-liao-ss7-tcap-ip-00.txt> 				[Page 10]

Sample TCAP message headers:
1. Query message
       STIP message sent by IP entity
         Dest.IP+port = TIPG's IP+port
         Src.IP+port = IP entity's IP+port
  
         STIP.CdPA = GT + Translation Type (TT), GT routing
         STIP.CgPA = IP entity's SSN, SSN routing

       TIPG's STIP sends the TCAP message with SCCP & MTP header
         DPC = STP's PC
         OPC = TIPG's PC
   
         SCCP.CdPA = GT + TT, GT routing
         SCCP.CgPA = TIPG's PC + SSN, SSN routing


2. Response message
       SS7 TCAP message to TIPG
         DPC = TIPG's PC
         OPC = SCP's PC
  
         SCCP.CdPA = IP entity's SSN, SSN routing 
         SCCP.CgPA = SCP's LNP SSN, SSN routing

       TIPG's STIP sends the TCAP message with STIP header
         Dest.IP+port = IP entity's IP+port
         Src.IP+port = TIPG's IP+port
  
         STIP.CdPA = IP entity's SSN, SSN routing
         STIP.CgPA = SCP's PC + SCP's LNP SSN, SSN routing
       

3. If a return result message is required

       STIP message sent by IP entity
         Dest.IP+port = TIPG's IP+port
         Src.IP+port = IP entity's IP+port
  
         STIP.CdPA = SCP's PC + SCP's LNP SSN, SSN routing
         STIP.CgPA = IP entity's SSN, SSN routing



       TIPG's STIP sends the TCAP message with SCCP & MTP header
         DPC = SCP's PC
         OPC = TIPG's PC
   
         SCCP.CdPA = SCP's LNP SSN, SSN routing
         SCCP.CgPA = IP entity's SSN, SSN routing
            



<draft-liao-ss7-tcap-ip-00.txt> 				[Page 11]


Scenario for an VoIP phone making a call to PSTN user with LNP:

1. VoIP phone sends a "Make Call" to its carrier with PSTN number as 
destination DN.
2. The IP carrier CS determines the destination DN is in an 
interconnecting PSTN with LNP deployment, so it sends a TCAP message for 
LNP number translation to the TIPG over IP.
3. TIPG decapsulates the IP header, encapsulates the TCAP message with 
the SS7 header, and delivers to the SS7 network.
4. GTT is performed at STP to determine the destination SCP. Upon 
receiving the message, LNP SCP responds with a TCAP message that 
contains the local routing DN to the TIPG.
5. TIPG decapsulates the SS7 header, encapsulates the TCAP message with 
the IP header, and deliver to the CS.
6. CS acquires E.164/IP address conversion to locate a MG that has IMT 
to the destination PSTN. Note: for simplicity of illustration, the same 
CS provides media gateway control function for the identified MG.                                   
7. CS commands MG to reserve trunk resources and sends ISUP-IAM message 
to the ISUP Gateway over IP.
8. ISUP Gateway decapsulates the IP header, encapsulates the ISUP 
message with the SS7 header, and deliver to the destination PSTN.
9. The destination CO sends back a response message to the ISUP gateway.
10. The ISUP gateway decapsulates the SS7 header, encapsulates with the 
IP header, and sends to the CS.				
11. CS/MG completes the call setup with the VoIP phone.

The steps 2 to 5 involve the TCAP/IP interworking functionality.  The 
other steps involve either Q.931 or ISUP functionality and are not the 
concern of this paper.  Also note that there is the need for the mapping 
between IP Address/Port Number and the assigned TDM channel that is 
performed at the CS/MG.

3.3.2 Short Message Service TCAP/IP Interworking Configuration 

The TCAP/IP Interworking function can be applied to a Short Message 
Service Center (SMSC) Application. Again, the TCAP/IP Interworking 
function will be performed within the TIPG.  

             +------+    IP     +------+
             | TIPG |-----------| SMSC |
             +------+           +------+
              /    \
             / ss7  \
            /        \
         +-----+   +-------+
         | MSC |   |HLR/VLR|
         +-----+   +-------+

	Figure 6: Short Message Service TCAP/IP Interworking Configuration






<draft-liao-ss7-tcap-ip-00.txt> 				[Page 12]

Scenario for the SS7 sending the SMS message to the SMSC:

1. SMS message arrives at the TIPG from the SS7 network destined for the 
SMSC.
2. TIPG decapsulates the SS7 header, encapsulates the TCAP message with 
the IP header, and delivers it to the SMSC.
3. SMSC saves the content of SMS message for the future delivery.
 
Scenario for the SMSC delivering the SMS to the SS7 network:

1. TCAP message arrives at the TIPG from the SMSC.
2. TIPG puts its PC/SSN in the originating PC/SSN field of the SS7 
message.  It also examines the STIP header for the destination SS7 
address of the SS7 message.
3. TIPG decapsulates the IP header and encapsulates the TCAP message 
with the SS7 header, and then delivers it to the SS7 network.



3.3.3 IP Applications and TCAP/IP Interworking Configuration 


   +----+    +------+    ss7    +------+
   |SCP |----| STP  |-----------| TIPG |
   +----+    +------+        -- +------+
                        ss7 /     /    \
             +------+  -----     / IP   \
             | SP   |           /        \
             +------+       +------+     +------+
                            | IP   |     |IP    |
                            |Entity|     |Entity|
                            +------+     +------+

Figure 7: IP Applications and TCAP/IP Interworking Configuration 

Note: The IP Entity can be any IP-based application such as: Directory 
Service, Location Service, etc.

An important aspect of this scenario is the need for the address 
translation between the subsystem number and the IP address/Port Number.  
The TIPG must have a table that records the mapping between these two 
addresses.

Scenario for the SS7 originating the TCAP message into the IP network:

1. TCAP message arrives at the TIPG from the SS7 network. This TCAP 
message is destined for one of the IP Entities homed to the TIPG.
2. TIPG examines the destination SSN in the SS7 message and maps this 
SSN into IP address/port number of the destination IP Entity.
3. TIPG decapsulates the SS7 header, encapsulates the TCAP message with 
the IP header, and delivers it to the destination IP Entity.




<draft-liao-ss7-tcap-ip-00.txt> 				[Page 13]

Scenario for the IP Entity originating the TCAP message into the SS7 
network:
										
1. TCAP message arrives at the TIPG from the IP Entity. This TCAP 
message is destined for one of the SS7 Entities within the SS7 network.

2. TIPG adds its PC in the originating PC/SSN of the SS7 message.  It 
also examines the STIP header for the destination SS7 address of the SS7 
message, which can be specified as the PC/SSN or the Global Title. The 
TCAP response message to a TCAP invoke message is an example of the 
PC/SSN specified in the STIP header.  The delivery of the short message 
to a Short Message Entity (SME) is an example of the Global Title 
specified in the STIP header.  In this case, the Global Title can 
possibly be an E.164 or E.214 number.

3. TIPG decapsulates the IP header and encapsulates the TCAP message 
with the SS7 header, and then delivers it to the SS7 network.


3.3.4 PSTN Signaling Transport Configuration
 
For VoIP services, an IP network may provide signaling transport 
functions for two PSTN networks. For example, a PSTN user makes a call
via an interconnecting IP network to another PSTN user who has 
subscribed Calling Name Delivery (CNAM) service. The TCAP query message 
launched by the terminating switch may be transported via the IP network 
to the originating network to retrieve the calling name information. 
This intermediate signaling transport function can also support queries 
between the originating and terminating PSTN networks for CLASS 
Automatic Recall and Automatic Callback services.

Each TIPG in the edge of IP network performs the 
encapsulation/decapsulation functions for converting of a TCAP/SS7 
message to a TCAP/IP message and of a TCAP/IP message to a TCAP/SS7 
message.

		     
          +---+    ------------			   ------------                
          |SCP|--- |SS7 network|                  |SS7 network|      
          +---+    ------------			   ------------
                  ss7 /   \                         /         \
                     /     \ss7               	ss7/           \
            +------+       +-------+         +-------+       +-----+   
            |CO/SP |       |TIPG-2 |         |TIPG-1 |       |CO/SP|
            +------+       +-------+         +-------+       +-----+            
	         |                 \             / IP		   |
	         |               IP \           /		         |
  		PSTN   		      ----------- 	      Called Pary
  		Caller	            |IP network|	       with CNAM
                                    ------------		

 
	Figure 5: Signaling Transport TCAP/IP Interworking Configuration
	

<draft-liao-ss7-tcap-ip-00.txt> 				[Page 14]

Scenario for Calling Name Delivery service for a PSTN-IP-PSTN call:

1. A PSTN to PSTN call via an interconnecting IP network. This call is 
connected from the originating PSTN via IP carrier's gateways such as 
ISUP gateway, CS & MG to the terminating PSTN switch.

2. The terminating PSTN checks the called party service profile and 
sends a TCAP message towards the originating carrier for CNAM 
information.

3. The SS7 network performs Global Title Translation (GTT) on calling 
party number and sends the TCAP message to TIPG-1 over SS7.
									           
4. TIPG-1 acquires E164/IP address conversion (GTT function) based on 
SCCP routing information and determines the far-end TIPG-2.

5. TIPG-1 decapsulates the SS7 header, encapsulates the TCAP message 
with the IP header, and deliver to TIPG-2 over IP.

6. Upon receiving the TCAP message, TIPG-2 records the mapping between 
the originating PC and IP address of the far end TIPG-1, decapsulates 
the IP header, encapsulates the TCAP message with the SS7 header, and 
delivers to the interconnecting SS7 network.

7. The interconnecting SS7 network performs the final GTT and forwards 
the TCAP message to CNAME SCP.

8. SCP responds with a TCAP message that contains the requested CNAME 
information via the interconnecting SS7 network to TIPG-2.

9. TIPG-2 retrieves the IP address of the far end TIPG-1 based on DPC in 
SCCP routing information.

10. TIPG-2 decapsulates the SS7 header, encapsulates the TCAP message 
with the IP header, and deliver to TIPG-1.

11. Upon receiving the TCAP message, TIPG-1 decapsulates the IP header, 
encapsulates the TCAP message with the SS7 header, and delivers to the 
interconnecting SS7 network.

12. The terminating switch delivers calling name to alert called party.


4.0 Next Steps

The goal of this document is to present the importance of the SS7-
TCAP/IP Interworking function in providing an interface between SS7 TCAP 
and IP networks.  The next step is to identify the problems/issues 
associated with the SS7-TCAP/IP Interworking and to define a protocol 
for the open interface between the TIPG and the IP entity that will 
resolve these problems/issues.



<draft-liao-ss7-tcap-ip-00.txt> 				[Page 15]

There are a number of issues to be addressed in providing the 
Interworking function. The resolution of these issues will require 
continuing research.

* Assignment of a specific port number for the application performing 
the TCAP/IP Interworking function.

* Security issues involving Encryption/Decryption (at the TIPG and 
Endpoint Applications), Firewall Transversal, etc. at the IP interface 
of the TIPG will need to be addressed.

* Encapsulation, decapsulation, fragmentation and sequence control 
issues for multiple messages.

5.0 References and Related Work

[1] N. Greene, et al, "SS7-Internet Interworking - Architectural 
Framework", draft-greene-ss7-arch-frame-01.txt, July 1998, work in 
progress	
								
[2] M. Arango, C. Huitema, "Simple Gateway Control Protocol (SGCP)", 
draft-huitema-sgcp-v1-02.txt, July 1998, work in progress

[3] M. Liao, E. Qaddoura, L. Le, R. Tummula, and D. Wurch, "Simple SS7-
TCAP/IP Protocol (STIPP)", draft-liao-stipp-v0.text, March 1999, work 
in progress

6.0 Authors

Monling Liao
Nortel
RTP, NC
Phone: (919) 991-2704
email:  monling@nortelnetworks.com 

Emad Qaddoura
Nortel
Richardson, TX
Phone: (972) 684-2705
email: EmadQ@nortelnetworks.com
										          
Liem Le
Nortel
Richardson, TX
Phone: (972) 684-0689
email: LiemLe@nortelnetworks.com

Donald Wurch
Nortel
Richardson, TX
Phone: (972) 684-1049
email: DWurch@nortelnetworks.com

INTERNET DRAFT          EXPIRES September 1999        INTERNET DRAFT		
				           
