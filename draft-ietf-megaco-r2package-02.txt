Internet Engineering Task Force                               Kushanava Laha
Internet Draft                                                   Vikram Nair 
Document: draft-ietf-megaco-r2package-02.txt         Hughes Software Systems 
Category: Informational                                            June 2001 
 
 


                            Megaco/H.248 R2 Package

Status of this Memo

   This document is an Internet-Draft and is in full conformance with all 
   provisions of Section 10 of RFC2026 [1].

   Internet-Drafts are working documents of the Internet Engineering Task Force 
   (IETF), its areas, and its working groups. Note that other groups may also 
   distribute working documents as Internet-Drafts. Internet-Drafts are draft 
   documents valid for a maximum of six months and may be updated, replaced, or 
   obsolete by other documents at any time. It is inappropriate to use 
   Internet- Drafts as reference material or to cite them other than as "work in
   progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt
   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

1. Abstract

   This document is work in progress and defines the R2 package in association 
   with the Megaco/H.248 Protocol that can be used to control a Media Gateway 
   (MG) from an external controller, called a Media Gateway controller (MGC). It 
   is intended to satisfy the requirements in section 12 of the Megaco/H.248 
   requirement document [2].

2. Conventions used in this document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", 
   "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this document are to 
   be interpreted as described in RFC-2119 [3].

3. Document Organization

   The subsequent portion of this draft is organized into the following major 
   sections:

   * Introduction 
   * Assumptions
   * Description of the R2 package
   * Procedures and Call Flows
   * References
   * Author's Address



Laha, Nair                  Informational - Expires December, 2001             1
                      Megaco/H.248 R2 Package               June 2001


4. Introduction 

   Signaling System R2 is used for international/national signaling for both 
   automatic and semiautomatic working. It allows for rapid call set-up by 
   providing sufficient signals in both directions to permit the transmission 
   of numerical and other information relating to the called and calling 
   subscriber lines and to increase routing facilities.

   The R2 package presented in this draft shall be used to set up calls on R2 
   signaling trunks at one or both ends of the VoIP network. Terminations 
   (signaling trunks) at the MG, implementing signaling system R2 are expected 
   to realize this R2 package in conjunction with the basic CAS package (bcas) 
   [4]

   It is to be noted that the R2 package, presented in this draft, is NOT an 
   extension of the bcas package (as per definition of package extensions in 
   [2]). It has been the intent to define the parameters in this R2 package as 
   mutually exclusive from the ones defined in the bcas package. The bcas 
   package defines the basic parameters that need to be supported by a 
   termination in the MG, for it to be capable of implementing any form of CAS
   (including signaling System R2). A termination (signaling trunk at MG), in 
   order to support signaling System R2, shall realize the package parameters 
   defined in the bcas package as per guidelines described later in procedures 
   section, in addition to all the parameters defined in the R2 package. 

   The forward and backward compelled register signaling sequence for exchanging   
   call setup control information shall be executed in the MG. Signaling System 
   R2 defines several numbered (digit) and enumerated (non-digit) components of 
   the call set-up control information. The numbered call setup-up control 
   information components considered in this draft are the destination number, 
   source number and country code. The enumerated call set-up control 
   information components considered are echo suppression information, calling 
   subscriber category, discriminating indicator, nature of circuit, subscriber 
   line status and congestion information. Of these, the numbered components and 
   the following enumerated components - echo suppression information, calling 
   subscriber category, discriminating indicator and nature of circuit, are 
   collectively termed as address parameters as they collectively convey the 
   complete address information required for call set-up in Signaling system R2. 
   They are also the components required at the minimum by the outgoing MG in 
   order to start the compelling action. 

   To gracefully handle time sensitive issues governing the compelling sequence 
   and to keep the MGC transparent of implementation specific compelling at MG, 
   the following simple guidelines have been observed while defining the 
   package.

   o  All numbered address parameters are exchanged as complete digit strings 
      between the MG and MGC containing all the digits. Digit by digit reporting 
      or signaling of numbered address parameters are not allowed between the MG 
      and MGC. 
   o  It is necessary that the outgoing MG is equipped with all the address 
      parameters before it can start with the outpulsing compelling sequence. 

Laha, Nair                  Informational - Expires December, 2001             2
                      Megaco/H.248 R2 Package               June 2001

      The MGC, therefore, sends the address parameters to the outgoing MG as 
      additional parameters in one composite R2 Address signal.
   o  The MG behaving as an incoming R2 end, shall compel and collect all 
      the address parameters as per the provisioned compelling sequence. 
      Flexibility is there in the package for the MGC to solicit each address 
      parameter as separate events or as a single composite event - the R2 
      Address event, where the collected address parameters are Observed Events 
      Descriptor parameters to the event.
   
   Signals and events related to only basic R2 signaling operation for automatic 
   or semi-automatic working, have been considered in the R2 package. Variants 
   of R2 signaling may define new supervisory (line) and call set-up control 
   (register) signals to introduce features such as re-answering, trunk 
   offering, re-ring, operator break-in etc, to name a few. As there is no   
   single standard mechanism to implement such features (they vary from country 
   to country), they have not been considered in this package. However it is 
   possible to realize such features on the MEGACO interface, by defining 
   additional signals and events in other packages that either extend this basic 
   R2 package or are to be used in conjunction with this R2 package.

5. Assumptions

a) As shown in the diagram below, MG shall be connected to R2 exchange for R2 
   compelled signaling, peer MG for media transport and MGC for exchanging R2 
   signaling information using MEGACO/H.248 with R2 package.


                                     +-----+
                            +-MEGACO-| MGC |-MEGACO-+
                            |        +-----+        |        
                            |                       | 
      (~~~~~~)           +--+--+                 +--+--+           (~~~~~~)
      ( PSTN )====R2=====| MG1 |------RTP--------| MG2 |====R2=====( PSTN )
      (~~~~~~)           +-----+                 +-----+           (~~~~~~)
   [Call origination] [Incoming MG]           [Outgoing MG]  [Call Termination]
    

                          Incoming - Outgoing convention
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

   This draft uses the following convention for incoming / outgoing MG
   o  Incoming MG: R2 exchange initiates the call signaling towards MG.
   o  Outgoing MG: MG initiates the call signaling towards R2 exchange.

   Hence as shown in the figure above, MG1 is an incoming MG and MG2 is an 
   outgoing MG.

b) Signaling system R2 can be used for analogue (one-way operation) or digital 
   transmission systems (one-way or both-ways operations). The call agent (MGC) 
   should be transparent of the transmission details at the physical layer. The 
   MG is therefore assumed to be provisioned with the actual signaling 
   frequencies for inter-register signaling (2-out-of-n in-band multi frequency 
   code with forward and backward compelled signaling) along with their

Laha, Nair                  Informational - Expires December, 2001             3
                      Megaco/H.248 R2 Package               June 2001

   properties such as amplitude, tone duration, cadence etc and also their 
   logical significance. All timers that dictate the inter-register compelling 
   actions are also assumed to be provisioned in the MG. The SF, E&M (for  
   analog) and "abcd" bits (for digital) line signaling parameters generated at 
   the physical layer, along with their logical significance, are also assumed 
   to be provisioned at the MG. 

c) The MG, behaving as an incoming end, may not be provisioned to recognize the 
   "end of pulsing" compelled forward register signal. It is assumed therefore 
   that the incoming MG shall detect the end of digit information in called 
   party number based on some digit map. This shall also take care of situations 
   where identification of end of digit sequence is through length determination 
   or timeout mechanisms. Calling party number shall be compelled till the 
   occurrence of maximum length of calling party number or timeout, specified as 
   package property or encountering end of pulsing. The MG is assumed to be 
   provisioned with a list of possible country codes. The MG shall compel the 
   country code digits based on this provisioned information.

c) The VoIP Gateway (MG and MGC), supporting signaling System R2 on the PSTN 
   side, forms the signaling and media interworking gateway between two very 
   different types of signaling and network. It is therefore assumed that the MG 
   shall either originate or terminate R2 signaling (acting as a true inter-
   working unit between the PSTN and packet network both in terms of signaling 
   and media) depending on whether it emulates the outgoing or incoming end in 
   the signal path. Under tandem operation, therefore, the MG converts end-to-
   end R2 signaling to link-by-link signaling and does not allow R2 register 
   signals to pass through it as tones.



























Laha, Nair                  Informational - Expires December, 2001             4
                      Megaco/H.248 R2 Package               June 2001

6. R2 Package 

6.1 Package

    Package Name: R2 Package
    Package ID:   r2 (To be allocated through IANA)
    Description:  This package provides package parameters applicable to 
                  terminations supporting compelled R2-signalling between the 
                  Media Gateway and the PSTN network, in addition to the package 
                  parameters supplied in the bcas package.
    Version:      1
    Extends:      None

6.2 Properties

   The MG has a provisioned value for all the properties. If unmodified by MGC, 
   the MG uses the provisioned value by default.

    Property Name: clear back signal validation time
    Property id:   clrbtim (0x0001)
    Description:   Specifies the minimum duration for which the MG, if behaving 
                   as an outgoing end, validates the "Clear-back" signal 
                   initiated by the other end (incoming end). 
    Type:          integer, in milliseconds
    Possible values: 0 and up
    Defined in:    TerminationState
    Characteristics: Read/Write

    Property Name: source number length
    Property id:   callen (0x0002)
    Description:   Indicates that the calling party digits can be upto a maximum 
                   length as specified by the parameter value. Thus calling 
                   party digits are collected upto a maximum of this value or 
                   end of pulsing indicator. If this property is set to zero 
                   then MG should not report calling party number as 
                   ObservedEventsDescriptor in R2 Address event.
    Type:          integer
    Possible values: 0 and up 
    Defined in:    TerminationState
    Characteristics: Read/Write 

    Property Name: source number timeout
    Property id:   caltout (0x0003)
    Description:   Indicates that calling party digits are to be collected till 
                   timeout of this timer value. MG shall stop compelling source 
                   number and consider collection of source number to be 
                   complete either on expiry of this timer or when the source 
                   number length criterion is matched or on receipt of end of 
                   pulsing.
    Type:          integer, in milliseconds
    Possible values: 0 and up 
    Defined in:    TerminationState
    Characteristics: Read/Write 

Laha, Nair                  Informational - Expires December, 2001             5
                      Megaco/H.248 R2 Package               June 2001

    Property Name: subscriber line status flag
    Property id:   slsf (0x0004)
    Description:   Specifies whether the MG, behaving as an incoming end, and
                   after reporting all the address parameters to MGC, waits or 
                   does not wait for the called subscriber line status 
                   information to be signaled by MGC before terminating the 
                   compelling action.
    Type:          enumeration
    Possible values: 
                   "WT" (0x0001) Wait
                   "NW" (0x0002) Do not wait
    Defined in:    TerminationState
    Characteristics: Read/Write 

    Property Name: trunk direction
    Property id:   trdir (0x0005)
    Description:   Specifies whether the R2 termination is an incoming, outgoing 
                   or bothway trunk circuit. 
    Type:          enumeration
    Possible values: 
                   "IC" (0x0001) Incoming
                   "OG" (0x0002) Outgoing
                   "BW" (0x0003) Bothways
    Defined in:    TerminationState
    Characteristics: Read 

6.3 Events

   The line signaling condition that convey the line signaling events and the 
   actual frequency, cadence, duration and amplitude values for the multi-
   frequency tones that convey the register signaling information on the 
   physical interface are provisioned in the MG.

6.3.1

    Event Name:    Unblock
    EventID:       ublk (0x0001)
    Description:   Indicates an incoming line signal "Idle"/"Released" on a 
                   "Blocked" termination that removes the engaged condition. 
    EventsDescriptor Parameters:
                   none defined by this package
    ObservedEventsDescriptor Parameters:
                   none defined by this package

6.3.2

    Event Name:    R2 Address
    EventID:       r2addr (0x0002)
    Description:   Reports the address parameter collected through compelled 
                   register signaling. The address parameter include the 
                   destination number, source number  



Laha, Nair                  Informational - Expires December, 2001             6
                      Megaco/H.248 R2 Package               June 2001

                   identification, the calling subscriber category, controlling 
                   information for echo suppression, country code, nature of 
                   trunk circuit and discriminating digit information for 
                   international calls(whichever is applicable). 
    EventsDescriptor Parameters: Digit map parameter activated for collection of 
                   destination number, specifying a digit map by name 
                   (previously configured) or by value.
    ObservedEventsDescriptor Parameters:
                   Parameter Name: Destination number 
                   ParameterID: di (0x0001)
                   Description: The called party number digit string that 
                                matched part or all of an alternative 
                                sequence specified in the digit map, collected 
                                through the compelled register signaling. 
                   Type: String of digits returned as a quoted string.
                   Possible Values: A sequence of the characters "0" through "9"

                   Parameter Name: Destination number Termination Method
                   ParameterID: dimeth (0x0002)
                   Description: Indicates the reason for the generation of the 
                                Destination number parameter.
                   Type: enumeration
                   Possible values:
                         "UM" (0x0001) Unambiguous match
                         "PM" (0x0002) Partial match, completion by timer 
                              expiry or "end of pulsing", or unmatched event.
                         "FM" (0x0003) Full match, completion by timer 
                              expiry or "end of pulsing"

                   Parameter Name: Source number 
                   ParameterID: si (0x0003)
                   Description: The calling party number digit string, that is
                                collected during compelled register signaling
                                till the occurrence of any of the event
                                mentioned below:
                                o  end of pulsing
                                o  maximum length of calling party digits 
                                   (calllen) specified as package property.
                                o  timeout of calling party timer (caltout) 
                                   specified as package property.
                   Type: string of digits returned as a quoted string.
                   Possible Values: a sequence of the characters "0" through "9"

                   Parameter Name: Calling Subscriber Category
                   ParameterID: sc (0x0004)
                   Description: Calling Party subscriber's category, as 
                                collected through compelled register signaling.
                   Type: enumeration
                   Possible Values:                        
                      "NNPS"  (0x0001) Non-priority subscriber 
                                       (National Working)
                      "NPRS"  (0x0002) Priority subscriber (National Working)
                      "NMNT"  (0x0003) Maintenance equipment (National working)

Laha, Nair                  Informational - Expires December, 2001             7
                      Megaco/H.248 R2 Package               June 2001

                      "NOPR"  (0x0004) Operator call (National Working)
                      "NDT"   (0x0005) Data transmission (National working)
                      "ISOPR" (0x0006) Subscriber or operator without forward 
                                       transfer facility (International working)
                      "IOPRF" (0x0007) Operator with forward transfer facility 
                                       (International working)
                      "IDT"   (0x0008) Data transmission 
                                       (International working)
                      "IPRS"  (0x0009) Priority subscriber 
                                       (International working)
                      "NSMTR" (0x000a) Subscriber with meter
                                       (National working)
                      "SIDD" (0x000b) Subscriber with IDD 
                       
                   Parameter Name: Echo Suppression Information
                   ParameterID: es (0x0005)
                   Description: Control Information on echo suppressors
                   Type: enumeration
                   Possible Values: 
                         "OGRQ" (0x0001) Call requires echo suppressors and 
                                         outgoing half-echo suppressor has to be 
                                         inserted 
                         "NRQ" (0x0002) Call may not require any echo suppressor 
                         "OGINS" (0x0003) Call requires echo suppressors and 
                                          outgoing half-echo suppressor has 
                                          already been inserted
                         "ICRQ" (0x0004) Call requires incoming echo suppressors 
                                         to be inserted

                   Parameter Name: Country Code Information
                   ParameterID: cc (0x0006)
                   Description: Country code digit string collected as a part of 
                                the compelled register signaling in 
                                international working. MG shall be provisioned 
                                with the list of country codes in its local 
                                database, which can be referenced to collect 
                                country code digits. If present, conveys the 
                                country code (and possibly the area code as  
                                well) of the location of the outgoing 
                                international R2 register. 
                   Type: string of digits returned as a quoted string.
                   Possible values: A sequence of the characters "0" through "9"

                   Parameter Name: Discriminating Indicator  
                   ParameterID: disc (0x0007)
                   Description: For automatic working this will specify that a 
                                discriminating digit is used. For semi-automatic 
                                working this will specify the service language 
                                (Language digit) to be used by the operator. For 
                                international working may serve as a test call 
                                indicator also.            
                   Type: enumeration


Laha, Nair                  Informational - Expires December, 2001             8
                      Megaco/H.248 R2 Package               June 2001

                   Possible Values: 
                         "DISC"(0x0001) Discriminating digit for automatic 
                                        working
                         "FR" (0x0002) Language digit French
                         "EN" (0x0003) Language digit English
                         "GR" (0x0004) Language digit German
                         "RU" (0x0005) Language digit Russian
                         "SP" (0x0006) Language digit Spanish
                         "OT" (0x0007) Language digit Other
                         "TCI" (0x0008) Call by automatic test equipment

                   Parameter Name: Nature of circuit
                   ParameterID: nac (0x0008)
                   Description: Reports the nature of circuits involved in the 
                                connection so far viz. inclusion of satellite 
                                link.
                   Type: enumeration
                   Possible Values: 
                         "SATINC"   (0x0001) Satellite link included
                         "SATNOINC" (0x0002) Satellite link not included

6.3.3

    Event Name:    Subscriber Line Status
    EventID:       sls (0x0003)
    Description:   Reports the line status of the called subscriber, collected 
                   by the outgoing end through compelled register signaling. 
    EventsDescriptor Parameters:
                   none defined by this package
    ObservedEventsDescriptor Parameters:
                   Parameter Name: Subscriber Line Condition
                   ParameterID: lsts (0x0001)
                   Description: Line conditions of the called subscriber
                   Type: enumeration
                   Possible Values: 
                         "UN" (0x0001) Unallocated number
                         "SLB" (0x0002) Subscriber line busy
                         "SLFC" (0x0003) Subscriber line free, charge
                         "SLFNOC" (0x0004) Subscriber line free, no charge
                         "SOO" (0x0005) Subscriber out of order
                         "SIT" (0x0006) Send special information tone
                         "NK" (0x0007) Subscriber status not known, set-up 
                                       speech path

6.3.4

    Event Name:    R2 Failure
    EventID:       r2f (0x0004)
    Description:   Reports general failure or abnormal line and register 
                   signaling conditions associated specifically with this 
                   package. 
    EventsDescriptor Parameters:
                   none defined by this package

Laha, Nair                  Informational - Expires December, 2001             9
                      Megaco/H.248 R2 Package               June 2001

    ObservedEventsDescriptor Parameters:
                   Parameter Name: Error code
                   ParameterID: ec (0x0001)
                   Description: Describes the failure reason
                   Type: enumeration
                   Possible Values: 
                         "CNG" (0x0001) Congestion: Encountered Network 
                                        congestion.
                         "BLK" (0x0002) Blocked: Encountered engaged condition 
                                        on an "idle" termination due to which 
                                        the MGC should not attempt a call on 
                                        this termination till the un-engaged 
                                        ("unblocked") condition is restored. If 
                                        reported on an already "seized" 
                                        termination, indicates a failure 
                                        condition for which the controlling MGC 
                                        is expected to back-off and retry on a 
                                        new termination, propagate the 
                                        congestion condition backwards and/or 
                                        clear the call on this termination 
                                        (depending on the call state at MGC).
                         "EADDR" (0x0003) Error in address specification: The 
                                        address information specified by the MGC 
                                        is incomplete or inappropriate with 
                                        respect to the compelling sequence 
                                        provisioned in the outgoing MG
                         "BADR" (0x0004) Bad Signal Request: The package signal 
                                        (supervisory line signal) requested by 
                                        MGC for application is inappropriate 
                                        with respect to the line signaling 
                                        state at MG. The request is being 
                                        dishonored by MG with no impact on the 
                                        current signaling state.
                         "DSEZ" (0x0005) Dual Seizure: Encountered dual seizure
                                        condition on the termination which MGC
                                        tried to seize

6.3.5

    Event Name:    Destination number 
    EventID:       di (0x0005)
    Description:   Event to report destination number address parameter to MGC.
    EventsDescriptor Parameters: Digit map parameter activated for collection of 
                   destination number, specifying a digit map by name 
                   (previously configured) or by value.
    ObservedEventsDescriptor Parameters:
                   Parameter Name: Destination number 
                   ParameterID: di (0x0001)
                   Description: The called party number digit string that 
                                matched part or all of an alternative 
                                sequence specified in the digit map, collected 
                                through the compelled register signaling. 
                   Type: String of digits returned as a quoted string.

Laha, Nair                  Informational - Expires December, 2001           10  
                      Megaco/H.248 R2 Package               June 2001

                   Possible Values: A sequence of the characters "0" through "9"

                   Parameter Name: Destination number Termination Method
                   ParameterID: dimeth (0x0002)
                   Description: Indicates the reason for the generation of the 
                                Destination number parameter.
                   Type: enumeration
                   Possible values:
                         "UM" (0x0001) Unambiguous match
                         "PM" (0x0002) Partial match, completion by timer 
                              expiry or "end of pulsing", or unmatched event.
                         "FM" (0x0003) Full match, completion by timer 
                              expiry or "end of pulsing"

6.3.6

    Event Name:    Source number 
    EventID:       si (0x0006)
    Description:   Event to report source number address parameter to MGC.  
    EventsDescriptor Parameters:
                   none defined by this package
    ObservedEventsDescriptor Parameters:
                   Parameter Name: Source number 
                   ParameterID: si (0x0001)
                   Description: The calling party number digit string, that is
                                collected during compelled register signaling
                                till the occurrence of any of the event
                                mentioned below:
                                o  end of pulsing
                                o  maximum length of calling party digits 
                                   (calllen) specified as package property.
                                o  timeout of calling party timer (caltout) 
                                   specified as package property.
                   Type: String of digits returned as a quoted string.
                   Possible Values: A sequence of the characters "0" through "9"

6.3.7

    Event Name:    Calling Subscriber Category
    EventID:       sc (0x0007)
    Description:   Event to report calling subscriber category parameter to MGC.
    EventsDescriptor Parameters:
                   none defined by this package
    ObservedEventsDescriptor Parameters:
                   Parameter Name: Subscriber Category 
                   ParameterID: sc (0x0001)
                   Description: Calling Party's category, as collected through 
                                compelled register signaling.
                   Type: enumeration
                   Possible Values:
                      "NNPS"  (0x0001) Non-priority subscriber 
                                       (National Working)
                      "NPRS"  (0x0002) Priority subscriber (National Working)

Laha, Nair                  Informational - Expires December, 2001           11  
                      Megaco/H.248 R2 Package               June 2001

                      "NMNT"  (0x0003) Maintenance equipment (National working)
                      "NOPR"  (0x0004) Operator call (National Working)
                      "NDT"   (0x0005) Data transmission (National working)
                      "ISOPR" (0x0006) Subscriber or operator without forward 
                                       transfer facility (International working)
                      "IOPRF" (0x0007) Operator with forward transfer facility 
                                       (International working)
                      "IDT"   (0x0008) Data transmission 
                                       (International working)
                      "IPRS"  (0x0009) Priority subscriber 
                                       (International working)
                      "NSMTR" (0x000a) Subscriber with meter
                                       (National working)
                      "SIDD" (0x000b) Subscriber with IDD 
                       
6.3.8

    Event Name:    Echo Suppression Information
    EventID:       es (0x0008)
    Description:   Event to report echo suppression information parameter to 
                   MGC.
    EventsDescriptor Parameters:
                   none defined by this package
    ObservedEventsDescriptor Parameters:
                   Parameter Name: Echo Suppression Information
                   ParameterID: es (0x0001)
                   Description: Control Information on echo suppressors
                   Type: enumeration
                   Possible Values: 
                         "OGRQ" (0x0001) Call requires echo suppressors and 
                                         outgoing half-echo suppressor has to be 
                                         inserted 
                         "NRQ" (0x0002) Call may not require any echo suppressor 
                         "OGINS" (0x0003) Call requires echo suppressors and 
                                          outgoing half-echo suppressor has 
                                          already been inserted
                         "ICRQ" (0x0004) Call requires incoming echo suppressors 
                                         to be inserted

6.3.9

    Event Name:    Country Code Information
    EventID:       cc (0x0009)
    Description:   Event to specify country code information parameter to MGC.
    EventsDescriptor Parameters:
                   none defined by this package
    ObservedEventsDescriptor Parameters:
                   Parameter Name: Country Code Information
                   ParameterID: cc (0x0001)
                   Description: Country code digit string collected as a part of 
                                the compelled register signaling in 
                                international working. MG shall be provisioned 
                                with the list of country codes in its local 

Laha, Nair                  Informational - Expires December, 2001           12
                      Megaco/H.248 R2 Package               June 2001

                                database, which can be referenced to collect 
                                country code digits. If present, conveys the 
                                country code (and possibly the area code as  
                                well) of the location of the outgoing 
                                international R2 register..
                   Type: string of digits returned as a quoted string.
                   Possible values: A sequence of the characters "0" through "9"

6.3.10

    Event Name:    Discriminating Indicator
    EventID:       disc (0x000A)
    Description:   Event to specify discriminating indicator parameter to MGC.
    EventsDescriptor Parameters:
                   none defined by this package
    ObservedEventsDescriptor Parameters:
                   Parameter Name: Discriminating Indicator
                   ParameterID: disc (0x0001)
                   Description: For automatic working this may specify that a 
                                discriminating digit is used. For semi-automatic 
                                working may specify the service language                                
                                (Language digit) to be used by the operator. For 
                                international working may serve as a test call 
                                indicator.
                   Type: enumeration
                   Possible Values: 
                         "DISC"(0x0001) Discriminating digit for automatic 
                                        working
                         "FR" (0x0002) Language digit French
                         "EN" (0x0003) Language digit English
                         "GR" (0x0004) Language digit German
                         "RU" (0x0005) Language digit Russian
                         "SP" (0x0006) Language digit Spanish
                         "OT" (0x0007) Language digit Other
                         "TCI" (0x0008) Call by automatic test equipment

6.3.11

    Event Name:    Nature of circuit
    EventID:       nac (0x000B)
    Description:   Event to specify nature of circuit parameter to MGC. 
    EventsDescriptor Parameters:
                   none defined by this package
    ObservedEventsDescriptor Parameters:
                   Parameter Name: Nature of circuit
                   ParameterID: nac (0x0001)
                   Description: Reports the nature of circuits involved in the 
                                connection so far viz. inclusion of satellite 
                                link.
                   Type: enumeration
                   Possible Values: 
                         "SATINC"   (0x0001) Satellite link included
                         "SATNOINC" (0x0002) Satellite link not included

Laha, Nair                  Informational - Expires December, 2001           13
                      Megaco/H.248 R2 Package               June 2001

6.4 Signals

   The line signals that are actually sent out on the physical interface and 
   the actual frequency, cadence, duration and amplitude values for the multi-
   frequency tones that convey the register signaling information are 
   provisioned in the MG.

6.4.1
    
    Signal Name:   Block
    SignalID:      blk (0x0001)
    Description:   Applies a "Blocked" signal on an "Idle" termination. 
    Signal Type:   (OO) On-off 
    Duration:      Not applicable
    Additional Parameters: None

6.4.2

    Signal Name:   Unblock
    SignalID:      ublk (0x0002)
    Description:   Applies an "Idle"/"Released" signal on a "Blocked" 
                   termination. 
    Signal Type:   (OO) On-off
    Duration:      Not applicable
    Additional Parameters: None

6.4.3

    Signal Name:   R2 Address
    SignalID:      r2addr (0x0003)
    Description:   Composite signal that supplies all the necessary address 
                   parameters to start the compelling register signaling at the 
                   outgoing MG. All the parameter conveyed in this signal may 
                   not be actually applied on the termination by the outgoing 
                   MG. The MG shall transmit only those information that is 
                   relevant to the compelling action configured at the MG. 
    Signal Type:   (BR) Brief
    Duration:      Provisioned
    Additional Parameters: 
                   Parameter Name: Destination number 
                   ParameterID: di (0x0001)
                   Description: The called party number digits. This parameter 
                                shall be mandatorily present in the Address 
                                signal.
                   Type: string of digits 
                   Possible Values: a sequence of the characters "0" through "9"

                   Parameter Name: Source number 
                   ParameterID: si (0x0002)
                   Description: The calling party number digits. If the 
                                source number is not available at the MGC, this 
                                parameter may be absent in the Address signal. 
                   Type: string of digits 

Laha, Nair                  Informational - Expires December, 2001           14
                      Megaco/H.248 R2 Package               June 2001

                   Possible Values: a sequence of the characters "0" through "9"

                   Parameter Name: Calling Subscriber Category
                   ParameterID: sc (0x0003)
                   Description: Calling party subscriber's category. If the 
                                calling subscriber category is not available at 
                                the MGC, this parameter may be absent in the 
                                signal.
                   Type: enumeration
                   Possible Values: 
                      "NNPS" (0x0001) Non-priority subscriber (National Working)
                      "NPRS" (0x0002) Priority subscriber (National Working)
                      "NMNT" (0x0003) Maintenance equipment (National working)
                      "NOPR" (0x0004) Operator call (National Working)
                      "NDT" (0x0005) Data transmission (National working)
                      "ISOPR" (0x0006) Subscriber or operator without forward 
                                       transfer facility (International working)
                      "IOPRF" (0x0007) Operator with forward transfer facility 
                                       (International working)
                      "IDT" (0x0008) Data transmission (International working)
                      "IPRS"(0x0009) Priority subscriber (International working)

                   Parameter Name: Echo Suppression Information
                   ParameterID: es (0x0004)
                   Description: Control information on echo suppressors
                   Type: enumeration
                   Possible Values: 
                         "OGRQ" (0x0001) Call requires echo suppressors and 
                                         outgoing half-echo suppressor has to be 
                                         inserted 
                         "NRQ" (0x0002) Call may not require any echo suppressor 
                         "OGINS" (0x0003) Call requires echo suppressors and 
                                          outgoing half-echo suppressor has 
                                          already been inserted
                         "ICRQ" (0x0003) Call requires incoming echo suppressors 
                                         to be inserted

                   Parameter Name: Country Code Information
                   ParameterID: cc (0x0005)                    
                   Description: Country code information. If present, conveys 
                                the country code (and possibly the area code as 
                                well) information digits. 
                   Type: string of digits 
                   Possible Values: a sequence of the characters "0" through "9"

                   Parameter Name: Discriminating Indicator  
                   ParameterID: disc (0x0006)
                   Description: For automatic working may specify that a 
                                discriminating digit is used. For semi-automatic 
                                working may specify the service language 
                                (Language digit) to be used by the operator. For 
                                international working may serve as a test call 
                                indicator.

Laha, Nair                  Informational - Expires December, 2001           15
                      Megaco/H.248 R2 Package               June 2001

                   Type: enumeration
                   Possible Values: 
                         "DISC" (0x0001) Discriminating digit for automatic 
                                        working
                         "FR" (0x0002) Language digit French
                         "EN" (0x0003) Language digit English
                         "GR" (0x0004) Language digit German
                         "RU" (0x0005) Language digit Russian
                         "SP" (0x0006) Language digit Spanish
                         "OT" (0x0007) Language digit Other
                         "TCI" (0x0008) Call by automatic test equipment

                   Parameter Name: Nature of Circuit  
                   ParameterID: nac (0x0007)
                   Description: conveys the nature of circuits involved in the      
                                connection so far viz. inclusion of satellite 
                                link.
                   Type: Enumeration
                   Possible Values: 
                         "SATINC" (0x0001) Satellite link included
                         "SATNOINC" (0x0002) Satellite link not included

6.4.4

    Signal Name:   Congestion
    SignalID:      cng (0x0004)
    Description:   This signal applies the network congestion compelled R2 
                   signal on a termination in the incoming MG. It arises 
                   when at MGC the call setup attempt fails owing to 
                   unavailability of PDN resources or encounters network 
                   congestion while routing on PDN. 
    Signal Type:   (BR) Brief
    Duration:      Provisioned
    Additional Parameters: None

6.4.5

    Signal Name:   Subscriber Line Status
    SignalID:      sls (0x0005)
    Description:   Applies the compelled R2 signal that translates to called 
                   subscriber line status information. 
    Signal Type:   (BR) Brief
    Duration:      Provisioned
    Additional Parameters: 
                   Parameter Name: Subscriber Line Condition
                   ParameterID: lsts (0x0001)
                   Description: Line conditions of the called subscriber
                   Type: enumeration
                   Possible Values: 
                        "UN" (0x0001) Unallocated number
                         "SLB" (0x0002) Subscriber line busy
                         "SLFC" (0x0003) Subscriber line free, charge
                         "SLFNOC" (0x0004) Subscriber line free, no charge

Laha, Nair                  Informational - Expires December, 2001           16
                      Megaco/H.248 R2 Package               June 2001

                         "SOO" (0x0005) Subscriber out of order
                         "SIT" (0x0006) Send special information tone
                         "NK" (0x0007) Subscriber status not known, set-up 
                                       speech path

6.5 Statistics

6.5.1 

  Statistics Name: Call Duration
  StatisticsID:    cd (0x0001)
  Description:     Provides the cumulative duration the termination is in active 
                   call context i.e. from the point of applying/receiving 
                   "Answered" signal till the point of release  ("Clear-forward" 
                   or "Clear-back") initiation.
  Units:           Double, in seconds.






































Laha, Nair                  Informational - Expires December, 2001           17
                      Megaco/H.248 R2 Package               June 2001

7. Procedures

7.1 Property parameters

   This section supplies the procedures for defining the property parameters in 
   the bcas package, when using the bcas package in conjunction with the R2 
   package for realizing signaling System R2 on terminations (signaling trunks) 
   at the MG. 

   bcas/sztim
   ----------
   If the signaling System R2 supported in the MG does not support "seize" 
   signal validation feature, the property shall be provisioned with a default 
   value 0 i.e. no validation required.

   bcas/sdto
   ---------
   On a digital interface, this property signifies the maximum duration within 
   which the "seizure acknowledged" line signal is expected at the outgoing MG 
   in response to the transmitted "Seizing" signal. The MG shall have default    
   non-zero value provisioned for this property.
   On an analog interface, this property shall have a default zero value 
   provisioned implying that the MG is required to report the "start dialing" 
   event in bcas package to MGC immediately after it has successfully 
   transmitted the "seizing" signal.

   bcas/ansto
   ----------
   If the signaling System R2 supported in the MG does not provide a maximum 
   time by which the "answer" signal should be received, the property shall be 
   provisioned with a default value zero.

   bcas/anstim
   -----------
   If the signaling System R2 supported in the MG does not support "answer" 
   signal validation feature, the property shall be provisioned with a default 
   value 0 i.e. no validation required.

   bcas/clrtim
   -----------
   It specifies the minimum duration for which the MG, if behaving as an 
   outgoing end, validates the "clear-forward" (digital operation) or "release" 
   (analogue operation) signal.

7.2 Procedures for exchanging supervisory signals

   It has been the intention to optimize the inclusion of the additional 
   supervisory signals in the R2 package, which are absent in the bcas package 
   but are considered mandatory for the basic operation of signaling System 
   R2. This section attempts to capture the procedures involved in using the 
   package (R2 and bcas) signals and events for exchanging the supervisory 
   signals in signaling System R2 between the MGC and MG under normal 
   signaling operations. It is understood that the event parameters shall be 

 Laha, Nair                  Informational - Expires December, 2001           18
                      Megaco/H.248 R2 Package               June 2001

   reported from the MG to MGC only if an events descriptor is activated by the 
   MGC on the termination, requesting that event.

   Default behavior
   ----------------
   When a termination in the MG is not involved in a call, it is in the "idle" 
   state. The MGC configures an "idle" R2 termination to report bcas/sz event 
   (for reporting incoming "seizing" signal) and bcas/casf, r2/r2f events (for 
   reporting failure events such as Unexpected line signal, Protocol State 
   machine malfunction and Blocked condition). 

   Seizure (bcas/sz)
   -----------------
   If an "idle" termination is selected for initiating an R2 call in an outgoing 
   MG, the MGC shall send the bcas/sz signal to the MG and the MG shall transmit 
   the "seizing" supervisory signal to the incoming end. The outgoing MG shall 
   start the "start dialing timer" after transmitting the "seizing" signal.
   The MG, if behaving as an incoming end, shall report the bcas/sz event when 
   it detects an incoming "seizing" signal on an "idle" R2 termination.

   Start Dialing (bcas/sd)
   ------------------------
   This event notifies the MGC that the MG behaving as the outgoing end is ready   
   to outpulse the call set-up control signals (address signals as compelled 
   register signaling).

   In digital operation, the outgoing MG reports the bcas/sd event to the MGC, 
   when it receives a "seizure acknowledged" supervisory signal from the 
   incoming end in response to a "seizing" signal. In the event of "start 
   dialing timeout", the outgoing MG shall report a failure condition to the 
   MGC by filling up Start Dialing Timeout ("SDO") as the value of the Error 
   Code (ec) parameter in the ObservedEvents Descriptor of the bcas/casf event. 
   The behavior of the MGC is implementation specific. It may retry the 
   "seizing" attempt on the same termination (after bringing back the 
   termination to "idle" condition) or retry on some other termination.

   In analogue operations, Signaling System R2 does not define a "seizure 
   acknowledged" supervisory signal. The "start dialing timeout" property shall 
   be provisioned to default value zero. The outgoing MG shall report the 
   bcas/sd event to the MGC immediately after it has successfully sent the 
   "seizing" signal. This allows the MGC to experience an identical interface 
   regardless of the termination (trunk) type (analogue or digital). 

   It is to be noted that bcas/sd is only an event and not a signal, as it is 
   not required in the incoming MG. The incoming MG is expected to respond to 
   the incoming "seizing" signal on the physical interface depending on the 
   termination type. For digital operations, the incoming MG shall respond with 
   the "seizure acknowledged" line signal to the outgoing end. For analogue 
   operations, the incoming MG shall maintain the line signal as "idle". 

   Answer (bcas/ans)
   -----------------
   bcas/ans is reported as an event from the outgoing MG to the MGC when the 

Laha, Nair                  Informational - Expires December, 2001           19
                      Megaco/H.248 R2 Package               June 2001

   "answer" line signal is detected from the incoming end.  
   MGC uses bcas/ans as a signal to instruct the incoming MG to transmit the 
   "answer" line signal to the outgoing end.

   Clearing (bcas/cf, bcas/cb)
   ---------------------------
   The bcas/cf and bcas/cb signal and event parameters defined in the bcas 
   package shall be used to instruct and detect supervisory signals related to 
   call clearing on an R2 termination. 

   The MGC can configure the incoming interface by activating an events 
   descriptor that requests the bcas/cf event, to detect and report the receipt 
   of the "clear-forward" or "release" line signal. Similarly the MGC can 
   instruct the MG to apply a bcas/cf signal to clear the call on an outgoing 
   interface, anytime, subsequent to the transmission of the "seizing" signal.

   The MGC can configure the outgoing interface by activating an events 
   descriptor that requests the bcas/cb event, to detect and report the receipt 
   of the "clear-back" line signal. Similarly the MGC can instruct the MG to 
   apply a bcas/cb signal to clear the call on an incoming interface, anytime, 
   subsequent to the transmission of the "answer" signal.

   It is to be noted that the release and release-guard sequence defined by 
   signaling System R2 shall be locally executed at the MG at the time of call 
   clearing and the MGC shall be transparent of such procedures. The "clear 
   signal validation time" and "clear back signal validation time" 
   properties shall govern the release guard procedures.

   Blocking/Unblocking (r2/blk, r2/ublk)
   -------------------------------------
   Signaling System R2 defines supervisory signals to render an "idle" R2 
   termination (trunk) to "blocked" state. The MGC applies the r2/blk signal to 
   the MG on an incoming interface in "idle" state to prevent any incoming 
   "seizure" of the circuit. The MG for which the same interface is an outgoing 
   interface, shall report the blocking condition to its controlling MGC by 
   filling up Blocked ("BLK") as the value of the Error Code (ec) parameter in 
   the ObservedEvents Descriptor of the r2/r2f event. If the controlling MGC of 
   the outgoing MG attempts to "seize" a "blocked" termination, the outgoing MG 
   shall report a failure to the MGC (filling up "Bad Signal Request" as the 
   value of Error code (ec) parameter in the ObservedEvents Descriptor of the 
   bcas/casf event).

   Signaling System R2 similarly defines supervisory signals to render a 
   "blocked" R2 termination (trunk) to "unblocked"/"idle" state. The MGC applies 
   the r2/ublk signal to the MG on an incoming interface in "blocked" state to 
   render it to "unblocked"/"idle" state and entertain subsequent "seizure" of 
   the circuit. The MG for which the same interface is an outgoing interface, 
   shall report the unblocking condition to its controlling MGC by reporting the 
   r2/ublk event. This implies that when an MG reports the Blocked ("BLK") error 
   code in the r2/r2f event, the controlling MGC is expected to configure the MG 
   to detect and report the r2/ublk event. Subsequent "seizures" of the 
   termination by the MGC shall be entertained by the MG for which the 
   termination is an outgoing interface.

 Laha, Nair                  Informational - Expires December, 2001           20
                      Megaco/H.248 R2 Package               June 2001

   Glare Mitigation
   ----------------
   The glare condition or more popularly known as Dual Seizure arises when the 
   outgoing end detects simultaneous seizure of a both-way R2 trunk by both the 
   ends i.e. when "seizing" signal has been transmitted and in response an 
   incoming "Seizing" signal is detected. 

   This glare condition in distributed MG-MGC architecture can occur in two   
   possible scenarios:
   o  MGC initially has applied bcas/sz event on a r2 termination. MG detects a 
      bcas/sz on the termination and reports it to MGC. Meanwhile, MGC also 
      initiates a call attempt by removing the bcas/sz event detection and  
      applying bcas/sz signal on the same r2 termination. In such scenario MG 
      gets a command to apply bcas/sz signal after reporting bcas/sz event and 
      MGC gets a bcas/sz notification after applying bcas/sz signal on the same 
      r2 termination.
   o  MGC instructs MG to apply bcas/sz signal onto an r2 termination. MG, 
      applies the bcas/sz signal on the r2 termination and subsequently receives 
      an incoming "seizing" signal on the same r2 termination.

   For both of the scenarios MG shall detect the dual seizure condition and 
   report the same to MGC by filling up Dual Seizure ("DSEZ") as the value of 
   the Error Code (ec) parameter of the r2/r2f observed event.

   The following ladder diagrams illustrate the call flow diagrams for 
   supervisory signal exchange on a digital interface involving an R2 outgoing 
   end, MG behaving as an incoming end and its controlling MGC. These call flow 
   diagrams demonstrate occurrence of dual seizure and handling of the same at 
   MG. 

   Dual seizure between MG and MGC
   -------------------------------
   ---------------------------------------------------------------
          R2                     MG                      MGC
   ---------------------------------------------------------------
                                                <----------
                                                  Modify
                                              [event = bcas/sz,
                                               bcas/casf, r2/r2f]  
                 ----------->                    
                   "seizing"              
                 <-----------
                   "seizure
                 acknowledged"              

   /*----------------------------------------------------------------
    MG detecting a r2 trunk seize event from the peer r2 end reports 
    the same to MGC. Meanwhile, MGC decides to use the same r2 trunk
    for another call and thus applies bcas/sz signal. This leads to a 
    dual seizure scenario. MG shall notify r2 failure event to MGC with 
    "DSEZ" as error code parameter.
   -----------------------------------------------------------------*/


Laha, Nair                  Informational - Expires December, 2001           21
                      Megaco/H.248 R2 Package               June 2001

   ---------------------------------------------------------------
          R2                     MG                      MGC
   ---------------------------------------------------------------
                                 ----------->   <-----------
                                   Notify          Modify
                                  [bcas/sz]    [signal = bcas/sz,
                                                event = bcas/cf, r2/r2f] 

                                 ----------->
                                   Notify
                                  [r2/r2f {ec="DSEZ"}]


   Dual seizure between MG and network
   ------------------------------------
   ---------------------------------------------------------------
          R2                     MG                      MGC
   ---------------------------------------------------------------
                                                <----------
                                                  Modify
                                              [signal = bcas/sz,
                                               event = bcas/casf,
                                                          r2/r2f]  
   /*----------------------------------------------------------------
    MG applies "seizing" signal onto r2 trunk. In response to "seizing"
    signal it detects seizure signal on the same trunk.
    This leads to a dual seizure scenario. MG shall notify r2 
    failure event to MGC with "DSEZ" as error code parameter.
   -----------------------------------------------------------------*/
          -----------> <-----------                    
           "seizing"     "seizing"              

                                     ----------->
                                        Notify
                                      [r2/r2f {ec="DSEZ"}]
   
   Failure/Abnormal conditions (bcas/casf, r2/r2f)
   -----------------------------------------------
   Failure or abnormal conditions at the MG (outgoing or incoming end) during 
   supervisory signal exchange shall be reported through the bcas/casf or r2/r2f 
   to the MGC. It is advised that the MGC at all times keeps an Events 
   Descriptor activated on the termination (incoming or outgoing) that requests 
   the bcas/casf and r2/r2f.

7.3 Procedures for exchanging call set-up control information

   The only signal that exists in the bcas package for carrying call set-up 
   control information between the MGC and the MG, is the bcas/addr signal. It 
   should be noted that the bcas/addr signal is incapable of conveying all the 
   relevant call set-up control information which is required for complete R2 
   compelling action in the outgoing MG. There are no events defined in the bcas 
   package for carrying the address information as events to MGC. Hence the 
   requirement of introducing new signals and events in the R2 package. 

 Laha, Nair                  Informational - Expires December, 2001           22
                      Megaco/H.248 R2 Package               June 2001

   Digit sequence termination at incoming MG
   -----------------------------------------
   Address parameters calling party number, called party number and country code 
   shall be compelled and the event completion criteria for each of the 
   parameter shall be decided upon the conditions / procedures mentioned in the 
   table below:

   Address Parameter     Completion criteria
   -----------------     -------------------
   Called Party Number   MG shall collect called party number digits using the
                         digit map specified by MGC. Now, if the MG is 
                         provisioned to recognize the "end of pulsing" register 
                         signal, this signal along with the digit map shall 
                         determine the termination condition of the accumulated 
                         digits. During called party number compelling if the 
                         "end of pulsing" signal is recognized when the MG also 
                         determines that an unambiguous match has been found 
                         with an alternative in the digit map, the MG shall 
                         report the collected digits of the relevant parameter 
                         with the completion method set to "Unambiguous Match". 
                         If the "end of pulsing" signal is recognized when an 
                         alternative in the digit map has partially matched, the 
                         MG shall report the collected digits of the relevant 
                         parameter with the completion method set to "Partial 
                         Match". Similarly, if the "end of pulsing" signal is 
                         recognized after one of the alternative in the digit 
                         map has fully matched and there are more digits 
                         available, the MG shall report all the collected digits 
                         of the relevant parameter with the completion method 
                         set to "Full Match".
                         
   Calling Party Number  MG shall collect calling party number digit string till 
                         the occurrence of any of the event mentioned below:
                         o  end of pulsing
                         o  maximum length of calling party digits (calllen) 
                            specified as package property.
                         o  timeout of calling party timer (caltout) specified 
                            as package property. "caltout" timer shall be 
                            started the moment calling party number compelling 
                            starts.

   Country Code          MG shall collect country code digits based on 
                         provisioned list of country codes. 

   Termination of Compelling Sequence
   ----------------------------------

   After an incoming MG has reported the r2/addr event to its controlling MGC, 
   the latter shall route the call based on the call set-up control information 
   contained in the r2/addr event. Depending on the value of the property 
   "subscriber line status flag", the incoming MG shall either terminate the 
   compelled signaling sequence or wait for the outcome of the routing status 
   to be signaled by the MGC. In the event of the second option, the MGC shall 

 Laha, Nair                  Informational - Expires December, 2001           23
                      Megaco/H.248 R2 Package               June 2001

   indicate back to the incoming MG either the Called subscriber line status 
   (r2/sls signal) or the r2/cng signal (if MGC encountered network congestion). 
   Similarly the MG, if behaving as an outgoing end, shall wait for the called 
   subscriber line status information from the incoming end. The same shall be 
   reported as r2/sls event to its controlling MGC. If the outgoing MG receives 
   congestion information instead, the same shall be reported as r2/r2f event to 
   MGC with Error code parameter set to Congestion ("CNG"). 

 
   Failure/Abnormal conditions (bcas/casf, r2/r2f)
   -----------------------------------------------
   Failure or abnormal conditions at the MG (outgoing or incoming end) during 
   call set-up control information exchange shall be reported through the 
   bcas/casf or r2/r2f events to the MGC. It is advised that the MGC at all 
   times keeps an Events Descriptor activated on the termination (incoming or 
   outgoing) that requests the bcas/casf and r2/r2f.


7.4 Call flows for Incoming MG

   Digital trunk type is assumed at the physical interface level. The ladder 
   diagrams attempt to capture the typical usage of the package signals and 
   events and they are indicative in nature. Here MG is behaving as an incoming 
   end and the MG and MGC are assumed to be placed such that they together form 
   the last incoming R2 register (transit gateway) in the signaling path beyond 
   which international interworking with PDN call signaling protocols start. 
   There can be other legal combinations of packing the events and signals using 
   the embedded descriptor capabilities of the MEGACO protocol. 

   ---------------------------------------------------------------
          R2                     MG                      MGC
   ---------------------------------------------------------------
                                       < ---------
                                          Modify
                                      [event = bcas/sz,
                                       bcas/casf, r2/r2f]  
                 ----------->                    
                   "seizing"              
                 <-----------
                   "seizure
                 acknowledged"              
                                       ----------->
                                         Notify 
                                        [bcas/sz]

  /*----------------------------------------------------------------
      Compelling action starts with the R2 outgoing end transmitting
      the country code indicator. The MG compels the country code
      digits and collects them till a match is found with one of the 
      entries in its provisioned database. 
   ----------------------------------------------------------------*/



 Laha, Nair                  Informational - Expires December, 2001           24
                      Megaco/H.248 R2 Package               June 2001
   
   ---------------------------------------------------------------
          R2                     MG                      MGC
   ---------------------------------------------------------------
                                     <----------
                                          Modify
                                      [event = r2/addr,bcas/cf 
                                       bcas/casf, r2/r2f]  
                  ----------->
                 "Country Code Indicator,
                  no echo suppressor 
                  required"

                 <-----------
                 "send next digit" 
                                  
                 ----------->
                "Country code
                 (first digit)=9"

                 <-----------
                "send next digit"

                 ----------->
                 "Country code 
                 (last digit)=1"

   /*-------------------------------------------------------------------
      MG solicits the language/discriminating digit information from
      the R2 end, as per compelling action defined in the MG. 
   -------------------------------------------------------------------*/

                 <-----------
               "send language or 
                discriminating digit"

                  ----------->
                 "discriminating 
                  digit=0" 

   /*----------------------------------------------------------------
      MGC has pre-configured the MG to report an r2/addr event by 
      specifying a digit map in the digit map descriptor(plan or name 
      reference to an already configured digit plan) for collecting called 
      number. MG solicits the called party number information from
      the R2 end, as per compelling action defined in the MG. 
   -------------------------------------------------------------------*/
   

               <-----------
               "send next (called 
                party number) digit"



Laha, Nair                  Informational - Expires December, 2001           25
                      Megaco/H.248 R2 Package               June 2001
   
   ---------------------------------------------------------------
          R2                     MG                      MGC
   ---------------------------------------------------------------
               -----------> 
                "Called party no.
                 (1st digit)=0" 

               <-----------
               "send next digit"

               ----------->
                 "Called party no.
                 (next digit)=0" 

               <-----------
                "send next digit"

     { Remaining Called party number exchanged through compelling }

                 ----------->
                "Called party no. 
                 (last digit)=6"

   /*----------------------------------------------------------------
      MG solicits the calling party category information from
      the R2 end, as per compelling action defined in the MG. 
    ----------------------------------------------------------------*/
                 <-----------
               "send calling party 
                category"

                 ----------->
                "Calling party 
                 category = Non 
                 priority subscriber"

   /*----------------------------------------------------------------
      Source number length and source number timeout properties for 
      collecting calling number are as per provisioned values. MG 
      solicits the calling party number information from the R2 end, 
      as per compelling action defined in the MG. 
    ----------------------------------------------------------------*/
                 <-----------
               "send calling party 
                number "

                 ----------->                 
                 "Calling party no.
                 (1st digit)=6"
 
                 <-----------                
                "send next (calling 
                party number)digit"

 Laha, Nair                  Informational - Expires December, 2001           26
                      Megaco/H.248 R2 Package               June 2001
   
   ---------------------------------------------------------------
          R2                     MG                      MGC
   ---------------------------------------------------------------
                ----------->                
                 "Calling party no.
                 (next digit)=8" 

                <-----------
               "send next (calling 
                party number)digit"

      { Remaining Called party number exchanged through compelling }

                  ----------->              
                 "Calling party no. 
                 (last digit)=7" 

   /*----------------------------------------------------------------
      MG has no further address parameters to compel. The r2addr event
      is reported to MGC with all collected address parameters as 
      ObservedEvents Descriptor parameters
    ----------------------------------------------------------------*/
                                          ------------>                
                                             Notify 
                                           [r2/addr 
                                          {es = "NRQ",
                                           cc = "91",
                                           disc = "DISC"
                                           di = "00...6"
                                           dimeth = "UM"
                                           sc = "NP"
                                           si = "68...7"}] 

   /*----------------------------------------------------------------
      MGC has set the "subscriber line status flag" to "wait"
      so that MG waits for subscriber line status information signaled 
      from the MGC, before terminating the compelling action.
      MG sends a dummy backward signal to complete the compelling
      sequence soliciting further digits. R2 outgoing end has no
      further digits to send. 
   ----------------------------------------------------------------*/
                <-----------
                "send next digit"

   /*----------------------------------------------------------------
      Based on the received address information, MGC routes the call
      on PDN. However the subscriber line status is not known to MGC
      and the same information is signaled to MG.
    ----------------------------------------------------------------*/
                                           <-----------
                                              Modify 
                                          [signal = r2/sls
                                           {lsts = "NK"}]

Laha, Nair                  Informational - Expires December, 2001           27
                      Megaco/H.248 R2 Package               June 2001
   
   ---------------------------------------------------------------
          R2                     MG                      MGC
   ---------------------------------------------------------------
   /*----------------------------------------------------------------
      MG terminates the compelling sequence by signaling the R2 end to 
      set up the speech path (pulsed signal). R2 registers are deallocated 
      at both ends}
   
   ----------------------------------------------------------------*/
              <-----------
               "address complete,
                setup speechpath"

   /*----------------------------------------------------------------
      Compelling action ends. Terminations successfully added to context. 
      Called Subscriber answers.
   ----------------------------------------------------------------*/
                                       <-----------
                                          Modify 
                                      [signal = bcas/ans,
                 <-----------
                   "answer"

   ================================================================
                              Media
   ================================================================

   /*----------------------------------------------------------------
      Outgoing R2 end clears the call.
   ----------------------------------------------------------------*/
                  ----------->
                    "clear
                    forward"
                                       ----------->
                                          Notify 
                                        [bcas/cf]

   /*----------------------------------------------------------------
      MG executes the release guard sequence locally.
   ----------------------------------------------------------------*/

                  <-----------
                   "released"

   /*----------------------------------------------------------------
      MGC brings back the termination to default state.
   ----------------------------------------------------------------*/
                                                           
                                        <-----------
                                          Modify 
                                       [ event = bcas/sz, 
                                       bcas/casf, r2/r2f] 


Laha, Nair                  Informational - Expires December, 2001           28
                      Megaco/H.248 R2 Package               June 2001
   
7.5 Call flows for Outgoing MG

   Digital trunk type is assumed at the physical interface level. The ladder 
   diagrams attempt to capture the typical usage of the package signals and 
   events and they are indicative in nature. Here MG is behaving as an outgoing 
   end and the MG and MGC are assumed to be placed such that they together form 
   the first outgoing R2 register in the signaling path beyond which R2 call 
   signaling protocols start. There can be other legal combinations of packing 
   the events and signals using the embedded descriptor capabilities of the 
   MEGACO protocol. 
   
   ---------------------------------------------------------------
          R2                     MG                      MGC
   ---------------------------------------------------------------
                                                      
                                         < ---------
                                           Modify
                                      [signal = bcas/sz,
                                       event = bcas/sd,
                                       bcas/casf, r2/r2f]  
                 <-----------
                   "seizing"              
                 ----------->
                   "seizure
                 acknowledged"              
                                       ----------->
                                          Notify 
                                        [bcas/sd]

   /*----------------------------------------------------------------
      MGC applies r2/addr signal to MG specifying address parameters
      required by MG for applying address signals while compelling.
      MGC waits for called destination status.
   ----------------------------------------------------------------*/
                                       <----------
                                          Modify
                                      [signal = r2/addr,
                                       event = bcas/casf, r2/r2f,
                                       r2/sls]  

   /*----------------------------------------------------------------
      Compelling action starts with outgoing MG transmitting the country
      Code indicator and the R2 end compelling the rest of the country
      code digits.
   ---------------------------------------------------------------*/
                 <-----------
                 "Country Code Indicator,
                  no echo suppressor 
                  required"

                 ----------->          
                 "send next digit" 


Laha, Nair                  Informational - Expires December, 2001           29
                      Megaco/H.248 R2 Package               June 2001
   
   ---------------------------------------------------------------
          R2                     MG                      MGC
   ---------------------------------------------------------------
                 <-----------
                "Country code
                 (first digit)=9"

                 ----------->
                "send next digit"

                 <-----------
                 "Country code 
                 (last digit)=1"

   /*-------------------------------------------------------------------
      R2 end solicits the language/discriminating digit information from
      the MG.
   -------------------------------------------------------------------*/

                 ----------->
               "send language or 
                discriminating digit"

                  <-----------
                 "discriminating 
                  digit=0" 
                          
   /*----------------------------------------------------------------
      R2 end solicits the called party number information from
      the MG.
    ---------------------------------------------------------------*/
                 ----------->
               "send next (called 
                party number) digit"

                 <----------- 
                "Called party no.
                 (1st digit)=0" 

                 ----------->
               "send next digit"

                  <-----------
                 "Called party no.
                 (next digit)=0" 

                 ----------->
                "send next digit"

     { Remaining Called party number exchanged through compelling }
                 <-----------
                "Called party no. 
                 (last digit)=6"

Laha, Nair                  Informational - Expires December, 2001           30
                      Megaco/H.248 R2 Package               June 2001
   
   ---------------------------------------------------------------
          R2                     MG                      MGC
   ---------------------------------------------------------------

   /*----------------------------------------------------------------
      R2 end solicits the calling party category information from
      the MG. 
    ----------------------------------------------------------------*/
                 ----------->
               "send calling party 
                category"

                 <-----------
                "Calling party 
                 category = Non 
                 priority subscriber" 

   /*----------------------------------------------------------------
      R2 end solicits the calling party number information from
      the MG.
    ----------------------------------------------------------------*/
 
                 ----------->
               "send calling party 
                number "

                 <-----------
                 "Calling party no.
                 (1st digit)=6"
 
                 ----------->                
                "send next (calling 
                party number)digit"


                 <-----------
                 "Calling party no.
                 (next digit)=8" 

                ----------->
               "send next (calling 
                party number)digit"

      { Remaining Called party number exchanged through compelling }
                 <-----------
                 "Calling party no. 
                 (last digit)=7"
   
   /*----------------------------------------------------------------
      R2 end terminates the compelling sequence by signaling the MG 
      with the called destination status. R2 registers are deallocated 
      at both ends. Terminations successfully added to context.
    ----------------------------------------------------------------*/

Laha, Nair                  Informational - Expires December, 2001           31
                      Megaco/H.248 R2 Package               June 2001
   
   ---------------------------------------------------------------
          R2                     MG                      MGC
   ---------------------------------------------------------------
                   ---------->  
               "address complete,
                wait for called 
                destination status"

                  <-----------
                "Calling party 
                 category = Non 
                 priority subscriber" 

                  ---------->  
               "subscriber line free,
                 charge"
                                        ----------->
                                          Notify 
                                        [r2/sls (lsts = {SLFC"}]


    /*----------------------------------------------------------------
      MGC sets events for having answer reported. 
    ----------------------------------------------------------------*/
                                       <-----------
                                          Modify 
                                      [event = bcas/ans,
                                       bcas/casf, r2/r2f,
                                       bcas/cb]

   /*----------------------------------------------------------------
      R2 end sends answer signal to MG. MG reports answer event to MGC. 
    ----------------------------------------------------------------*/
                 ----------->
                   "answer"
                                       ----------->
                                          Notify 
                                        [bcas/ans]

   ================================================================
                              Media
   ================================================================
   
   /*----------------------------------------------------------------
      Incoming R2 end clears the call.
   ----------------------------------------------------------------*/
                  ----------->
                    "clear
                     back"              
                                       ----------->
                                          Notify 
                                        [bcas/cb]


Laha, Nair                  Informational - Expires December, 2001           32
                      Megaco/H.248 R2 Package               June 2001
   
   ---------------------------------------------------------------
          R2                     MG                      MGC
   ---------------------------------------------------------------
   /*----------------------------------------------------------------
      MGC brings the termination back to default handling.
   ----------------------------------------------------------------*/
 
                                      <-----------
                                          Modify 
                                     [signal = bcas/cf,
                                       event = bcas/sz, 
                                      bcas/casf, r2/r2f]

  /*----------------------------------------------------------------
      MG executes the release guard sequence locally.
   ----------------------------------------------------------------*/
                 <-----------
                   "clear
                   forward"

                 ----------->
                  "released"
































Laha, Nair                  Informational - Expires December, 2001           33
                      Megaco/H.248 R2 Package               June 2001

8. References

[1]  Bradner, S., "The Internet Standards Process -- Revision 3", BCP 9, RFC 
     2026, October 1996.

[2]  F. Cuervo, N. Greene, A. Rayhan, C. Huitema, B. Rosen, J. Segers, "Megaco
     Protocol Version 1.0", RFC 3015, November 2000.

[3]  Bradner, S., "Key words for use in RFCs to Indicate Requirement Levels", 
     BCP 14, RFC 2119, March 1997

[4]  V.Bajaj, K.Laha, Bill Foster, Michael Brown, Wendy Bothwell, "Megaco/H.248 
     Basic CAS Packages", Internet Draft, January 2001.

[5]  Specifications of Signaling System R2, Q.400 to Q.490, Blue Book, CCITT 


9. Author's Addresses

Kushanava Laha
Hughes Software Systems, Ltd.
Gurgaon,Haryana,India. 122015.
Ph: (91)-11-6346666.Ext-2226
Email: klaha@hss.hns.com.

Vikram Nair
Hughes Software Systems, Ltd.
Gurgaon,Haryana,India. 122015.
Ph: (91)-11-6346666.Ex-2349
Email: vnair@hss.hns.com
























Laha, Nair                  Informational - Expires December, 2001           34
                      Megaco/H.248 R2 Package               June 2001
   
Full Copyright Statement

"Copyright (C) The Internet Society (June,2001). All Rights Reserved. This 
document and translations of it may be copied and furnished to others, and 
derivative works that comment on or otherwise explain it or assist in its 
implementation may be prepared, copied, published and distributed, in whole or 
in part, without restriction of any kind, provided that the above copyright 
notice and this paragraph are included on all such copies and derivative works. 
However, this document itself may not be modified in any way, such as by 
removing the copyright notice or references to the Internet Society or other 
Internet organizations, except as needed for the purpose of developing Internet 
standards in which case the procedures for copyrights defined in the Internet 
Standards process must be followed, or as required to translate it into









































Laha, Nair                  Informational - Expires December, 2001           35
