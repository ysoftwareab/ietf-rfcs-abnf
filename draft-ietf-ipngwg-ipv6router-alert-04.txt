



INTERNET-DRAFT                              Dave Katz, Juniper Networks
                                                   Craig Partridge, BBN
                                                     Alden Jackson, BBN
                                                       13 February 1998


                        IPv6 Router Alert Option

              <draft-ietf-ipngwg-ipv6router-alert-04.txt>



Status of this Memo

   This document is an Internet Draft.  Internet Drafts are working
   documents of the Internet Engineering Task Force (IETF), its Areas,
   and its Working Groups.  Note that other groups may also distribute
   working documents as Internet Drafts.

   Internet Drafts are draft documents valid for a maximum of six
   months.  Internet Drafts may be updated, replaced, or obsoleted by
   other documents at any time.  It is not appropriate to use Internet
   Drafts as reference material or to cite them other than as a "working
   draft" or "work in progress."

   Please check the I-D abstract listing contained in each Internet
   Draft directory to learn the current status of this or any Internet
   Draft.

   This draft expires 24 August 1998 and reflects comments received
   during the WG last call.

Abstract

   This memo describes a new IPv6 Hop-by-Hop Option type that alerts
   transit routers to more closely examine the contents of an IP
   datagram.  This option is useful for situations where a datagram
   addressed to a particular destination contains information that may
   require special processing by routers along the path.


1.0  Introduction

   New protocols, such as RSVP, use control datagrams which, while
   addressed to a particular destination, contain information that needs
   to be examined, and in some case updated, by routers along the path
   between the source and destination.  It is desirable to forward
   regular datagrams as rapidly as possible, while ensuring that the



<draft-ietf-ipngwg-ipv6-router-alert-04.txt>            [Page 1]

Internet Draft             IPv6 Router Alert            13 February 1998


   router processes these special control datagrams appropriately.
   Currently, however, the only way for a router to determine if it
   needs to examine a datagram is to at least partially parse upper
   layer data in all datagrams.  This parsing is expensive and slow.
   This situation is undesirable.

   This draft defines a new option within the IPv6 Hop-by-Hop Header.
   The presence of this option in an IPv6 datagram informs the router
   that the contents of this datagram is of interest to the router and
   to handle any control data accordingly.  The absence of this option
   in an IPv6 datagram informs the router that the datagram does not
   contain information needed by the router and hence can be safely
   routed without further datagram parsing.  Hosts originating IPv6
   datagrams are required to include this option in certain
   circumstances.

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC-2119].


2.0  Approach

   The goal is to provide an efficient mechanism whereby routers can
   know when to intercept datagrams not addressed to them without having
   to extensively examine every datagram.  The described solution is to
   define a new IPv6 Hop-by-Hop Header option having the semantic
   "routers should examine this datagram more closely" and require
   protocols such as RSVP to use this option.  This approach incurs
   little or no performance penalty on the forwarding of normal
   datagrams.  Not including this option tells the router that there is
   no need to closely examine the contents of the datagram.


2.1  Syntax

   The router alert option has the following format:

                 +--------+--------+--------+--------+
                 |00| TBD |00000010| Value (2 octets)|
                 +--------+--------+--------+--------+
                            len= 2

      "TBD" is the Hop-by-Hop Option Type number (To be allocated by the
      IANA). [DO WE NEED A NUMBER FROM IANA BEFORE WE CAN SUBMIT THIS?
      IF SO, I SUGGEST 20.]

      Nodes not recognizing this option type MUST skip over this option



<draft-ietf-ipngwg-ipv6-router-alert-04.txt>            [Page 2]

Internet Draft             IPv6 Router Alert            13 February 1998


      and continue processing the header.  This option MUST NOT change
      en route.  There MUST only be one option of this type, regardless
      of value, per Hop-by-Hop header.

      Value:  A 2 octet code in network byte order with the following
      values:

         0        Datagram contains ICMPv6 Group Membership message.
         1        Datagram contains RSVP message.
         2        Datagram contains an Active Networks message.
         3-65535  Reserved.

   New value codes must be registered with the IANA.


2.2  Semantics

   The destination identified in the IPv6 header MUST ignore this option
   upon receipt.  Nodes that do not recognize the option MUST ignore it
   and continue processing the header.  Unrecognized value fields MUST
   be silently ignored and the processing of the header continued.  The
   destination node identified in the IPv6 header MUST ignore the option
   upon receipt to prevent multiple evaluations of the packet.


   Routers that recognize this option MUST examine datagrams carrying it
   more closely to determine whether or not further processing is
   necessary.  The router only needs to parse the packet in sufficient
   detail to decide whether the packet contains something of interest.
   The value field can be used by an implementation to speed processing
   of the datagram within the transit router.

   Observe that further processing can involve protocol layers above
   IPv6.  E.g., for RSVP messages, the datagram will have to undergo UDP
   and RSVP protocol processing.  Once the datagram leaves the IPv6
   layer, there is considerable ambiguity about whether the router is
   acting as an IPv6 host or an IPv6 router.  Precisely how the router
   handles the contents is value-field specific.  However, if the
   processing required for the datagram involves examining the payload
   of the IPv6 datagram, then the interim router is performing a host
   function and SHOULD interpret the data as a host.

   The option indicates that the contents of the datagram may be
   interesting to the router.  The router's interest and the actions
   taken by employing Router Alert MUST be specified in the RFC of the
   protocol that mandates or allows the use of Router Alert.





<draft-ietf-ipngwg-ipv6-router-alert-04.txt>            [Page 3]

Internet Draft             IPv6 Router Alert            13 February 1998


3.0  Impact on Other Protocols

   For this option to be effective, its use MUST be mandated in
   protocols that expect routers to perform significant processing on
   datagrams not directly addressed to them.

   All IPv6 datagrams containing an ICMPv6 Group Membership message MUST
   contain this option within the IPv6 Hop-by-Hop Options Header of such
   datagrams.

   All IPv6 datagrams containing an RSVP message MUST contain this
   option within the IPv6 Hop-by-Hop Options Header of such datagrams.


4.0  Security Considerations

   If the Router Alert option is not set and should be set, the behavior
   of the protocol using Router Alert will be adversely affected since
   the protocol relies on the use of the Router Alert option.

   If the Router Alert option is set when it should not be set, it is
   likely that the packet will experience a performance penalty, as it
   may not be processed by the router in the same fashion as if the
   option were not set.



5.0  References

    [RFC-1883] Deering, S. & R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification, RFC-1883, Internet Engineering Task
              Force, December 1995.

    [RFC-2205] Braden, R. (ed.), L. Zhang, S. Berson, S. Herzog, S.
              Jamin, "Resource ReSerVation Protocol (RSVP)-- Version 1
              Functional Specification", Internet Engineering Task
              Force, September 1997.

    [RFC-2119] Bradner, S., "Key words for use in RFC's to Indicate
              Requirement Levels", RFC-2119, Internet Engineering Task
              Force, March 1977.

    [RFC-2113] Katz, D., IP Router Alert Option, RFC-2113, Internet
              Engineering Task Force,  February 1997.







<draft-ietf-ipngwg-ipv6-router-alert-04.txt>            [Page 4]

Internet Draft             IPv6 Router Alert            13 February 1998


6.0  Authors' Addresses

   Dave Katz                               Phone:  +1 (408) 327-0173
   Juniper Networks                        Email:  dkatz@jnx.com
   3260 Jay Street
   Santa Clara, CA 95054
   USA

   Craig Partridge                         Phone: +1 (617) 873-3000
   BBN Technologies                        Email: craig@bbn.com
   10 Moulton Street
   Cambridge, MA 02138
   USA

   Alden Jackson                           Phone: +1 (617) 873-3000
   BBN Technologies                        Email: awjacks@bbn.com
   10 Moulton Street
   Cambridge, MA 02138
   USA
































<draft-ietf-ipngwg-ipv6-router-alert-04.txt>            [Page 5]


