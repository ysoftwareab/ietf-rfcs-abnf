<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Mechanism for Peer-to-Peer Group Management using Multiple Overlays</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Mechanism for Peer-to-Peer Group Management using Multiple Overlays">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">O. Kassinen</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">T. Koskela</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">E. Harjula</td></tr>
<tr><td class="header">Expires: January 11, 2010</td><td class="header">M. Ylianttila</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">University of Oulu</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">July 10, 2009</td></tr>
</table></td></tr></table>
<h1><br />Mechanism for Peer-to-Peer Group Management using Multiple Overlays<br />draft-kassinen-p2prg-group-management-00</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on January 11, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>
	  This document introduces a mechanism for managing peer groups in structured peer-to-peer (P2P) overlay networks. 
      Group management enables efficient and secure interaction between the group members (peers), by controlling the scope 
	  of propagation for the group-specific P2P messaging and other communications. The mechanism for group management, 
	  introduced in this document, is based on a multiple-overlay scheme. Each group is a separate overlay network with its 
	  own address space, resources, and message routing information. A common overlay is used for sharing information about 
	  the group overlays (sub-overlays).
	  
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Terminology<br />
<a href="#arch">3.</a>&nbsp;
Overview of the Architecture<br />
<a href="#ops">4.</a>&nbsp;
Overview of the Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#create">4.1.</a>&nbsp;
Creation of Groups<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#maintain">4.2.</a>&nbsp;
Maintenance of Groups<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#join">4.3.</a>&nbsp;
Joining and Leaving from Groups<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#remove">4.4.</a>&nbsp;
Removal of Groups<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#bind">4.5.</a>&nbsp;
Binding of Groups to an &quot;Alias&quot; ID<br />
<a href="#formats">5.</a>&nbsp;
Data Formats<br />
<a href="#performance">6.</a>&nbsp;
Performance Considerations<br />
<a href="#Acknowledgements">7.</a>&nbsp;
Acknowledgements<br />
<a href="#IANA">8.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">9.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">10.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">10.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
		Emerging popularity of social networking services, such as Facebook <a class='info' href='#FACEBOOK'>[FACEBOOK]<span> (</span><span class='info'>, &ldquo;Facebook,&rdquo; .</span><span>)</span></a>, 
		Google Groups <a class='info' href='#GOOGLEGRP'>[GOOGLEGRP]<span> (</span><span class='info'>, &ldquo;Google Groups,&rdquo; .</span><span>)</span></a>, or Yahoo Groups<a class='info' href='#YAHOOGRP'>[YAHOOGRP]<span> (</span><span class='info'>, &ldquo;Yahoo Groups,&rdquo; .</span><span>)</span></a>, emphasizes the 
		importance of group management. This is especially the case with Peer-to-Peer (P2P) networks that are 
		natural platforms for interpersonal communications. Content and information sharing within and between 
		communities can be seen as the major driving force behind P2P networks. Users usually have certain 
		interests when they join the network. Thus, they inherently tend to create interest groups among each 
		other, called communities. The users of traditional P2P applications, such as content sharing, ip 
		telephony, or video/audio conferencing, are increasingly getting organized as peer groups.
		
</p>
<p>
		Main motivation for users and services to form groups is to control their scope of communications for 
		privacy reasons. Peer group members usually trust the members of the group to some extent. Groups can also 
		be used for security reasons, as the access to the group and thus group-specific resources and communication 
		is usually granted only to the members of the group. Even though group management is generally considered as 
		one of the basic functionalities of P2P services, standardization initiatives, such as IETF's P2PSIP working 
		group <a class='info' href='#P2PSIP'>[P2PSIP]<span> (</span><span class='info'>, &ldquo;Peer-to-Peer Session Initiation Protocol (P2PSIP) IETF Working Group,&rdquo; .</span><span>)</span></a>, have not yet paid much attention on it. 
		
</p>
<p>
		Group management has for long been utilized in different forms in different P2P systems. The most common 
		approach is to manage groups on application layer, i.e. using a separate protocol above P2P layer for group 
		management. However, application-specific group management is not optimal in the situations where group 
		members want to use multiple applications within the same group. Perhaps the best known P2P-layer group 
		management mechanism is the one used in JXTA <a class='info' href='#JXTA'>[JXTA]<span> (</span><span class='info'>Gong, L., &ldquo;Project JXTA: A Technology Overview,&rdquo; 2001.</span><span>)</span></a>. In JXTA, each peer is a member of a 
		global peer group, called "NetPeerGroup", and optionally one or more other peer groups. JXTA, however, 
		does not specify in detail how to create or manage a group. With structured P2P systems, the most natural 
		way for group management (in addition to application layer solutions) is to use separate overlays for each 
		group. Hierarchical overlay structures, such as <a class='info' href='#HIERAS'>[HIERAS]<span> (</span><span class='info'>Xu, Z., Min, R., and Y. Hu, &ldquo;HIERAS: A DHT Based Hierarchical P2P Routing Algorithm,&rdquo; 2003.</span><span>)</span></a> and <a class='info' href='#HierarchP2P'>[HierarchP2P]<span> (</span><span class='info'>Garc´es-Erice, L., Biersack, E., Felber, P., Ross, K., and L. Urvoy-Keller, &ldquo;Hierarchical Peer-to-Peer Systems,&rdquo; 2003.</span><span>)</span></a>, 
		have been proposed as a measure to improve routing efficiency of structured P2P networks. However, the 
		fundamental model of hierarchical overlays is also useful for group management purposes.
		
</p>
<p>
		This document describes a mechanism for managing groups of entities in structured peer-to-peer (P2P)
		overlay networks. In the proposed group management mechanism, each group forms a separate P2P overlay 
		network that is specific to the group. Every member of the group participates in the routing activities 
		and other routines of the overlay as defined by the P2P protocol and the DHT algorithm. A peer can be a 
		member in more than one group.
		
</p>
<p>
		A group overlay isolates the group-specific activities from the other P2P overlay based activities 
		of the peers. This multi-overlay approach has the following advantages, compared to using a single large
		overlay that would contain the activities of all groups and would utilize a separate mechanism
		for group management.
		
</p>
<p>
			</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>
				- Routing efficiency: Small overlays provide more efficient routing, compared to a single large 
				overlay. Hop count is lower in small overlays.
				
</dd>
<dt></dt>
<dd>
				- Fairer load distribution: Only the member nodes are responsible for maintaining the specific 
				group.
				
</dd>
<dt></dt>
<dd>
				- Simplicity of operation: All group-related activities are inherently contained in group-specific
				overlays. 
				
</dd>
<dt></dt>
<dd>
				- Security: A base for security is provided with independent overlays that separate the 
				communications of different groups from each other. There is no need to separately monitor the 
				access rights to group-specific resources (except with the security measures of the selected P2P 
				protocol that, of course, apply).
				
</dd>
<dt></dt>
<dd>
				- Transparency: The group management system supports an arbitrary combination of a DHT-algorithm
				and a DHT-based P2P overlay	protocol. Furthermore, it is possible to use different 
				DHT-algorithms within different group overlays thanks to the independent nature of the overlays.
				
</dd>
</dl></blockquote><p>
		
</p>
<p>
		All peers are members of the `main overlay&#039;. The introduced mechanism uses the main overlay for 
		distributing information about the existing groups and group memberships. Every peer has access to the 
		publicly available information on groups, since the peers can perform searches in the main overlay.
		
</p>
<p>
		In the following sections, certain P2P protocol related terms and action examples are used. The terms 
		or exact details or actions might be slightly different depending on the actual P2P protocol that is 
		used in an implementation of the group management mechanism. This document attempts to use terms and 
		P2P actions that are common to most DHT-based P2P protocols.
		
</p>
<p>
		As much as possible, the solution utilizes the existing DHT-based data storing (publish) and finding 
		(lookup) mechanisms of a P2P protocol.
		
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>
		The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", 
		"RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in 
		<a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
		
</p>
<p>
		Overlay: A structured P2P network that is realized on top of a lower-level network (in practice an 
		IP-supporting network).
		
</p>
<p>
		Peer: As in P2PSIP terminology: A node that participates in the maintenance of an overlay.
		
</p>
<p>
		Client: As in P2PSIP terminology: A node that does not participate to the maintenance of an overlay, 
		and uses the services provided by the peers.
		
</p>
<p>
		Group: Any group of nodes within a structured P2P network; their intercommunication is realized 
		within a group overlay.
		
</p>
<p>
		Group ID: A human-readable or binary identifier that identifies a group. The ID is used as a search 
		key in the DHT system for finding information about the group overlay.
		
</p>
<p>
		Group Description: A human-readable description of a group, bound to a group ID.
		
</p>
<p>
		Group Overlay: An overlay that contains the member peers of a group. Group activities take place in a 
		group overlay.
		
</p>
<p>
		Main Overlay: A large overlay where all the peers of a certain network are members. It is used for 
		distributing information about group overlays and group memberships.
		
</p>
<p>
		Community: A sub-type of groups; a group that consists of human users. The terminal device of a human 
		member acts as a peer in the group overlay.
		
</p>
<a name="arch"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Overview of the Architecture</h3>

<p>
		The core idea behind the presented group management architecture is to use one DHT overlay network 
		per community, resulting in multiple small overlays that are subsets of the main overlay. This 
		results in an overlay hierarchy where each DHT overlay is a self-contained, independent network as 
		illustrated in Figure 1. The group information, containing at least the contact information of the 
		group's bootstrap peer and the group description, SHOULD be published in the main overlay. If the 
		users, however, wish to have private groups that are not publicly advertised, the group information 
		can remain unpublished. There can be both public and private groups in existence at the same time 
		in a network.
		
</p>
<p>
		The relationship of overlays is illustrated in the example in Figure 1. All peers 1, 2, 3, and 4 
		are members of the main overlay. Peers 1 and 2 are members in group A (and thus in group overlay A).
		Peers 2 and 4 are members in group B. Peer 3 is not a member in any group.
		
</p><br /><hr class="insert" />
<a name="overlays"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


           +---------------------------------------------+
          /                                               \
         |                   Main Overlay                  |
          \                                               /
           +--+-----------+-------------+-------------+--+
              |           |             |             |
        +-----+--+    +---+----+    +---+----+    +---+----+
        | Peer 1 |    | Peer 2 |    | Peer 3 |    | Peer 4 |
        +-----+--+    +---+----+    +--------+    +---+----+
              |           |     \                     |
          +---+-----------+      +--------------------+
         /                 \    /                      \
        |  Group Overlay A  |  |     Group Overlay B    |
         \                 /    \                      /
          +---------------+      +--------------------+

</pre></div>
<p style='text-align: center'>Example situation: peers as members in different overlays.
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="ops"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Overview of the Operations</h3>

<a name="create"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Creation of Groups</h3>

<p>
			A new group is created by establishing a new overlay network (the group overlay), where the group 
			activities will take place. Such creation usually implies that a new instance of the P2P protocol 
			stack is created so that its routing tables, resource tables, etc. are specific to the created 
			group. Before creating a new group, the creator checks with a resource lookup request from the 
			main overlay that no other group already exists with the same ID.
			
</p>
<p>
			In the basic case, the creator peer will act as the bootstrap node for the group. This means that 
			the node will respond to the joining nodes&#039; initial requests when they try to become members 
			of the group. The creator peer does not need to be the bootstrap peer; the role can be assumed by 
			any other peer of the group.
			
</p>
<p>
			The creator peer publishes a DHT key-value pair of &lt;group ID, group info&gt; to the main 
			overlay. Group info contains the bootstrap node&#039;s ID and its contact information i.e. the 
			IP address and port. In addition, the creator peer publishes the members list, which contains 
			only the first member, itself, at this point. The list is published under a DHT key that 
			contains an equivalent of the phrase &quot;members of&quot; along with the group ID; thus it is 
			possible for others to search for the members of a specified group. Finally, the creator peer 
			publishes a key-value pair where the key is a wildcard that enables listing all groups and the 
			value is the group ID. `Wildcard&#039; here means that the same key is used for all groups 
			created by any peer; thus, searching for the key will yield a list of resources, each related 
			to a specific group. The action sequence of creating a public group is illustrated in Figure 2.
			
</p>
<p>
			If a node that cannot be responsible for overlay management (for example, a low-capability P2PSIP 
			client) wants to create a group, it needs to ask another node (with more capabilities or public 
			IP address) to become the creator of the group. This more capable node will, at least 
			temporarily, take the responsibility of maintaining the group information in the main overlay. A 
			node can also be a client in the main overlay and a peer in a group overlay, or vice versa.
			
</p>
<p>
			Groups can be public or private. Private groups are not published to the main overlay. The same 
			logic applies to memberships. Even if a group is public, the memberships might be private, thus
			the members list is not published in that case.
			
</p><br /><hr class="insert" />
<a name="group_creation"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


  Creator Peer                                           Main Overlay
       |                                                       |
       | Lookup(group ID)                                      |
       |------------------------------------------------------&gt;|
       | Not found                                             |
       |&lt;------------------------------------------------------|
       |                                                       |
       | New stack instance                                    |
       |------+                                                |
       |&lt;-----+                                                |
       |                                                       |
       | Publish(group ID, group info)                         |
       |------------------------------------------------------&gt;|
       | OK                                                    |
       |&lt;------------------------------------------------------|
       |                                                       |
       | Publish("members of &lt;group ID&gt;", creator peer's ID)   |
       |------------------------------------------------------&gt;|
       | OK                                                    |
       |&lt;------------------------------------------------------|
       |                                                       |
       | Publish("group list wildcard", group ID)              |
       |------------------------------------------------------&gt;|
       | OK                                                    |
       |&lt;------------------------------------------------------|
       |                                                       |


</pre></div>
<p style='text-align: center'>Creation of a public group.
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="maintain"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Maintenance of Groups</h3>

<p>
			Maintenance of a group refers to the publishing of group existence and group membership 
			information in the main overlay. In addition, group maintenance also comprises the overlay 
			maintenance messaging (e.g. keepalive signals between neighbor nodes) as required by the used 
			P2P protocol. Publishing is typically done repeatedly, if the overlay's P2P protocol requires 
			resource objects to be refreshed periodically.
			
</p>
<p>
			In every group there MUST be at least one peer that is capable of maintaining the group 
			overlay&#039;s routing and resource-management functionalities. If all peers leave the group 
			overlay so that only clients remain, at least one of the clients SHOULD become a peer, or 
			alternatively, peer services MAY be requested from an external peer (this functionality is 
			not defined in this version of this draft).	If neither of the mentioned conditions is not 
			fulfilled, the group ceases to exist.
			
</p>
<p>
			If the advertiser peer leaves the group overlay and this group is a public group, another 
			peer SHOULD assume the role of advertiser peer; otherwise, the refreshing of the public group 
			info in the main overlay ceases.
			
</p>
<a name="join"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Joining and Leaving from Groups</h3>

<p>
			Joining is typically done via the bootstrap node of the group. This node is initially the 
			creator peer. Joining can occur through any member peer of the group (if the underlying P2P 
			protocol allows this), but usually the joining peer knows specifically about the bootstrap 
			peer that is advertised in the main overlay. In the case of public groups, information about
			the existing nodes (members) in the group is found in the main overlay. In the case of private 
			groups, the information can be conveyed in some other way, for example, by an e-mail or a 
			paper note that instructs the joiner to contact a specific existing overlay-node. The action 
			sequence of joining a public group is shown in Figure 3.
			
</p>
<p>
			Leaving a group is done by the departing from the corresponding group overlay, using the leave 
			function of the underlying P2P protocol. A leaving node MUST also stop refreshing its group 
			membership publication in the main overlay, and SHOULD, if possible, remove the 
			information&#039;s existing version from the main overlay. If the leaving node participated as 
			a peer in the group overlay, it also naturally retires from the maintenance functionalities,
			which happens when it leaves the overlay.
			
</p><br /><hr class="insert" />
<a name="group_joining"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


Joining Peer                       Main Ov.  Boots. Peer  Group Ov.
     |                                |           |           |
     | Lookup(group ID)               |           |           |
     |-------------------------------&gt;|           |           |
     | Group info                     |           |           |
     |&lt;-------------------------------|           |           |
     |                                |           |           |
     | New stack instance             |           |           |
     |------+                         |           |           |
     |&lt;-----+                         |           |           |
     |                                |           |           |
     | Bootstrap request              |           |           |
     |-------------------------------------------&gt;|           |
     | OK                             |           |           |
     |&lt;-------------------------------------------|           |
     |                                |           |           |
     | Join overlay                   |           |           |
     |-------------------------------------------------------&gt;|
     | OK                             |           |           |
     |&lt;-------------------------------------------------------|
     |                                |           |           |
     | Publish("members...", peer ID) |           |           |
     |-------------------------------&gt;|           |           |
     | OK                             |           |           |
     |&lt;-------------------------------|           |           |
     |                                |           |           |

</pre></div>
<p style='text-align: center'>Joining a public group.
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
			Pointers <a class='info' href='#I-D.hardie-p2psip-p2p-pointers'>[I&#8209;D.hardie&#8209;p2psip&#8209;p2p&#8209;pointers]<span> (</span><span class='info'>Hardie, T. and V. Narayanan, &ldquo;Pointers for Peer-to-Peer Overlay Networks, Nodes, or Resources,&rdquo; March&nbsp;2009.</span><span>)</span></a> in P2P networks 
			have been proposed as a mechanism for referring to a specific overlay network or resource in a 
			way such that these pointers can be used in communication outside the P2P network. In group 
			management, pointers can be used for referring to a specific group. For example, a pointer-based 
			&quot;link&quot; containing an overlay pointer could be used when inviting new members to a 
			group overlay. Opening the &quot;link&quot; then results in the instantiation of the 
			DHT-utilizing protocol stack (and/or other similar required actions) and performing the overlay 
			joining operation of the used P2P protocol.
			
</p>
<a name="remove"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Removal of Groups</h3>

<p>
			Removing a group is done by shutting down the group overlay so that no nodes remain there 
			anymore. Group and membership information SHOULD be actively removed from the main overlay.
			This means removing all of the following: 1) the resource (key-value pair) whose key is the 
			group ID in the main overlay; 2) the group from the list contained in the resource whose key 
			is the groups wildcard; and 3) the membership resources whose key is 
			&quot;members of &lt;group ID&gt;&quot;.
			
</p>
<p>
			The group overlay can also cease to exist even without an explicit removal of the group. If no 
			peers remain in the overlay, i.e. only clients remain and no nodes willing to act as new peers 
			are found, the group disappears.
			
</p>
<a name="bind"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Binding of Groups to an &quot;Alias&quot; ID</h3>

<p>
			It is possible to establish aliases for existing groups with a `bind&#039; action. Binding is 
			done by publishing to the main overlay a key-value pair, where the key is the new group ID 
			(bind ID, i.e. an alias of the existing overlay) and the value contains the original overlay ID 
			along with a tag which indicates that the key-value pair is a result of binding. This is similar 
			to the key-value pair published during group creation, but instead of group info, the value only 
			contains the above-mentioned information. Thus, when a peer joins to a group by identifying the 
			group with a bind-ID, the peer learns the original (actual) ID of the group overlay and must 
			initiate another Lookup request to find the group info of the group overlay.
			
</p>
<p>
			Binding is useful when, for example, creating location-based communities where the ID of a 
			location-specific Bluetooth beacon device or an RFID label is used for triggering joining to an 
			existing group overlay; the bind ID in this case would be the Bluetooth ID or the ID of the RFID 
			label.
			
</p>
<a name="formats"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Data Formats</h3>

<p>
		In order to enable the peers to interpret the group-related pieces of information correctly, the 
		related DHT-stored values (in the key-value pairs that are mentioned in the various group operations 
		in this document) have some syntax requirements that are specified in this section.
		
</p>
<p>XML is used for encoding the group-related information in the resource values. All these XML 
		documents are preceded by the header &quot;GROUP-MANAGEMENT:&quot; (outside of the XML document),
		which enables a peer to recognize group-management related resources from other kinds of resources,
		simply by checking if the beginning of the resource value matches &quot;GROUP-MANAGEMENT:&quot;.
		This also eliminates the need for trying XML parsing in the case of non-group-related resources.
		In the future, a dedicated MIME type might be registered, to be used instead of the 
		&quot;GROUP-MANAGEMENT:&quot; header that currently serves as a type identifier.
		
</p>
<p>
		Inside all these XML documents, the root element is called &quot;group_management&quot;. The root 
		element has an attribute called &quot;type&quot; that indicates, how to interpret the inner elements.
		In group info (published during group creation), the attribute value is &quot;group_info&quot;. In 
		group binding, the attribute value is &quot;group_id_redirect&quot;. This way, when joining a group, 
		the joining peer can determine if the found XML resource contains directly the contact information 
		of a group (the group ID was used as the lookup key), or does it contain the actual ID of a bound 
		group, which of course requires a second lookup request in order to find the group info of the group 
		in question (the bind ID was used as the lookup key).
		
</p>
<p style='text-align: left'>The following XML document is an example of a published group info.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


GROUP-MANAGEMENT:
&lt;group_management type="group-info"&gt;
  &lt;bootstrap-address&gt;12.34.56.78&lt;/bootstrap-address&gt;
  &lt;bootstrap-port&gt;5080&lt;/bootstrap-port&gt;
  &lt;description&gt;The most jolly group!&lt;/description&gt;
&lt;/group_management&gt;

</pre></div>
<p style='text-align: left'>
			The following XML document is an example of a published binding. When a lookup is performed 
			with the bind ID as the search key, this resource value is found. The value of the attribute 
			&quot;encoding&quot; can be either &quot;as-is&quot;, indicating that the contained group ID 
			(possibly intended as human-readable) can be used as such for the lookup of actual group info, 
			or &quot;hex&quot;, indicating that the contained group ID (possibly binary) is encoded in 
			hexadecimal characters, two hex characters per byte.
			
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


GROUP-MANAGEMENT:
&lt;group_management type="group-id-redirect"&gt;
  &lt;actual-group-id encoding="hex"&gt;0276EC1F&lt;/actual-group-id&gt;
&lt;/group_management&gt;

</pre></div>
<p>
		The case of joining to a group with an ID that is a result of a binding is not shown in the 
		figures of this document. Figure 3 only showed the case, where the group info is directly found.
		
</p>
<p>
		Thanks to the overlay-per-group scheme, the need for special data formats is minimal, since the 
		group-internal activities (resource publishing for communications, collaboration, etc.) are free 
		from syntax requirements from the viewpoint of group management. This means that those resources 
		do not need any special tagging to indicate &quot;this data belongs to the group Foo&quot;, 
		because all group-specific acitivity is automatically contained in the group overlay and is not 
		risked to being confused with other overlays' activities. 
		
</p>
<a name="performance"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Performance Considerations</h3>

<p>
		Optimization techniques for facilitating a node&#039;s concurrent membership in multiple overlays 
        can be used. For example, to decrease memory consumption, routing information about remote nodes can 
        be shared between the locally stored data structures in such a way that maintaining duplicate pieces 
		of information about remote nodes is avoided. However, this kind of techniques are optional. A 
		straightforward implementation can simply utilize several concurrently running P2P protocol stacks 
		that are not coordinated among each other. In a simple case where a peer is a member in the main 
		overlay and one group overlay, such an implementation would run two protocol stack instances 
		concurrently.
        
</p>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgements</h3>

<p>
	  	The authors wish to acknowledge the valuable comments of Prof. Henning Schulzrinne, Columbia 
		University, NY, USA.
		
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>
		This memo includes no request to IANA at this time. 
		
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<p>
		The introduced group management mechanism effectively encapsulates group-specific traffic inside a 
		group overlay, and thus helps to improve the security and privacy. However, the problem of 
		bootstrapping, i.e. how to ensure that only legitimate members are able to join a particular group, 
		remains. The future work includes developing mechanisms for secure group access management.
		
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="FACEBOOK">[FACEBOOK]</a></td>
<td class="author-text">&ldquo;<a href="http://www.facebook.com/">Facebook</a>.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="GOOGLEGRP">[GOOGLEGRP]</a></td>
<td class="author-text">&ldquo;<a href="http://groups.google.com/">Google Groups</a>.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="HIERAS">[HIERAS]</a></td>
<td class="author-text">Xu, Z., Min, R., and Y. Hu, &ldquo;<a href="http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=1240580">HIERAS: A DHT Based Hierarchical P2P Routing Algorithm</a>,&rdquo; 2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="HierarchP2P">[HierarchP2P]</a></td>
<td class="author-text">Garc´es-Erice, L., Biersack, E., Felber, P., Ross, K., and L. Urvoy-Keller, &ldquo;<a href="http://www.springerlink.com/content/4cratlwjx1075pnx/fulltext.pdf">Hierarchical Peer-to-Peer Systems</a>,&rdquo; 2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.hardie-p2psip-p2p-pointers">[I-D.hardie-p2psip-p2p-pointers]</a></td>
<td class="author-text">Hardie, T. and V. Narayanan, &ldquo;Pointers for Peer-to-Peer Overlay Networks, Nodes, or Resources,&rdquo; internet-draft&nbsp;hardie-p2psip-p2p-pointers-01, March&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="JXTA">[JXTA]</a></td>
<td class="author-text">Gong, L., &ldquo;<a href="http://admis.fudan.edu.cn/member/yztang/Papers/P2P/industry/JXTA%20TechOverview.pdf">Project JXTA: A Technology Overview</a>,&rdquo; 2001.</td></tr>
<tr><td class="author-text" valign="top"><a name="P2PSIP">[P2PSIP]</a></td>
<td class="author-text">&ldquo;<a href="http://ietf.org/html.charters/p2psip-charter.html">Peer-to-Peer Session Initiation Protocol (P2PSIP) IETF Working Group</a>.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="YAHOOGRP">[YAHOOGRP]</a></td>
<td class="author-text">&ldquo;<a href="http://groups.yahoo.com/">Yahoo Groups</a>.&rdquo;</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Otso Kassinen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Oulu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Erkki Koiso-Kanttilan katu 3</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Oulu,   90014</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 8 553 2811</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:otso.kassinen@ee.oulu.fi">otso.kassinen@ee.oulu.fi</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Timo Koskela</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Oulu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Erkki Koiso-Kanttilan katu 3</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Oulu,   90014</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 8 553 2522</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:timo.koskela@ee.oulu.fi">timo.koskela@ee.oulu.fi</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Erkki Harjula</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Oulu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Erkki Koiso-Kanttilan katu 3</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Oulu,   90014</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 8 553 2522</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:erkki.harjula@ee.oulu.fi">erkki.harjula@ee.oulu.fi</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mika Ylianttila</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Oulu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Erkki Koiso-Kanttilan katu 3</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Oulu,   90014</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 8 553 25311</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mika.ylianttila@ee.oulu.fi">mika.ylianttila@ee.oulu.fi</a></td></tr>
</table>
</body></html>
