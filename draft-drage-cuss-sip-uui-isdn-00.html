<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Interworking ISDN Call Control User Information with SIP</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Interworking ISDN Call Control User Information with SIP">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">K. Drage</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Alcatel-Lucent</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">A. Johnston</td></tr>
<tr><td class="header">Expires: March 24, 2011</td><td class="header">Avaya</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">J. McMillen</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Unaffiliated</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">September 20, 2010</td></tr>
</table></td></tr></table>
<h1><br />Interworking ISDN Call Control User Information with SIP<br />draft-drage-cuss-sip-uui-isdn-00</h1>

<h3>Abstract</h3>

<p>
The motivation and use cases for interworking and transporting ITU-T DSS1 User-user information element data in SIP are described in the "Problem Statement and Requirements for Transporting User to User Call Control Information in SIP" document. As networks move to SIP it is 
important that applications requiring this data can continue to function in SIP 
networks as well as the ability to interwork with this ISDN service for end-to-
end transparency. This document defines a usage of the User-to-User header field to enable interworking with this ISDN service.

</p>
<p>
This document is covers the interworking with both public ISDN and private ISDN capabilities, so the interworking with QSIG will also be addressed.

</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on March 24, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Terminology<br />
<a href="#anchor2">2.</a>&nbsp;
Overview<br />
<a href="#anchor3">3.</a>&nbsp;
Summary of the ISDN User-to-User Service<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
The service<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.2.</a>&nbsp;
Impacts of the ISDN service on SIP operation<br />
<a href="#anchor6">4.</a>&nbsp;
Relation to SIP-T<br />
<a href="#anchor7">5.</a>&nbsp;
Transition away from ISDN<br />
<a href="#anchor8">6.</a>&nbsp;
ISDN Usage of the User-to-User Header Field<br />
<a href="#anchor9">7.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor10">8.</a>&nbsp;
Security Considerations<br />
<a href="#anchor11">9.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">10.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Terminology</h3>

<p>
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in BCP 14, RFC 2119 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Overview</h3>

<p>  
This document describes a usage of the User-to-User header field defined in <a class='info' href='#johnston-cuss-sip-uui'>[johnston&#8209;cuss&#8209;sip&#8209;uui]<span> (</span><span class='info'>Johnston, A., McMillen, J., and J. Rafferty, &ldquo;A Mechanism for Transporting User to User Call Control Information in  SIP,&rdquo; .</span><span>)</span></a>  to enable the transport of User to User Information (UUI) in ISDN interworking scenarios using SIP <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>.    Specifically, this document discuss the interworking of call control related ITU-T DSS1 User-user information element<a class='info' href='#Q931'>[Q931]<span> (</span><span class='info'>, &ldquo;ITU-T Recommendation Q.931: Digital subscriber Signalling System No. 1 - Network layer; ISDN user-network interface layer 3 specification for basic call control,&rdquo; .</span><span>)</span></a>, <a class='info' href='#Q957.1'>[Q957.1]<span> (</span><span class='info'>, &ldquo;ITU-T Recommendation Q.957.1: Digital subscriber Signalling System No. 1 - Stage 3 description for supplementary services using DSS 1; Stage 3 description for additional information transfer supplementary services using DSS 1: User-to-User Signalling (UUS),&rdquo; .</span><span>)</span></a> and ITU-T Q.763 User-to-user information parameter <a class='info' href='#Q763'>[Q763]<span> (</span><span class='info'>, &ldquo;ITU-T Q.763 Signaling System No. 7 - ISDN user part formats and  codes,&rdquo; .</span><span>)</span></a> data in SIP. UUI is widely used in 
the PSTN today in contact centers and call centers which are transitioning away 
from ISDN to SIP.

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Summary of the ISDN User-to-User Service</h3>

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
The service</h3>

<p>
ISDN defines a number of related services. Firstly there is a user signalling bearer service, which uses the information elements / parameters in the signalling channel to carry the data, and does not establish a related circuit-switched connection. For DSS1, this is specified in ITU-T Recommendation Q.931 section 3.3 and section 7 <a class='info' href='#Q931'>[Q931]<span> (</span><span class='info'>, &ldquo;ITU-T Recommendation Q.931: Digital subscriber Signalling System No. 1 - Network layer; ISDN user-network interface layer 3 specification for basic call control,&rdquo; .</span><span>)</span></a>. It also defines a user-to-user signalling supplementary service, which uses the information elements / parameters in the signalling channel to carry additional data, but which is used in conjunction with the establishment of a related circuit-switched connection. This reuses the same information elements / parameters as the user signalling bearer service, with the addition of other signalling information, and for DSS1 this is specified in ITU-T Recommendation Q.957.1 <a class='info' href='#Q957.1'>[Q957.1]<span> (</span><span class='info'>, &ldquo;ITU-T Recommendation Q.957.1: Digital subscriber Signalling System No. 1 - Stage 3 description for supplementary services using DSS 1; Stage 3 description for additional information transfer supplementary services using DSS 1: User-to-User Signalling (UUS),&rdquo; .</span><span>)</span></a>.

</p>
<p>
ISDN defines three variants of the user-to-user signalling supplementary service as follows:

</p>
<blockquote class="text"><dl>
<dt>UUS1:</dt>
<dd>
User-to-user information exchanged during the setup and clearing phases of a call, by transporting User-to-user information element within call control messages. This in itself has two subvariants, UUS1 implicit and UUS1 explicit. UUS1 explicit uses additional supplementary service control information to control the request and granting of the service, as in USS2 and UUS3. In UUS1 implicit, it is the presence of the user signalling data itself that constitutes the request for the service. UUS1 explicit as a result also allows the requester to additionally specify whether the parallel circuit-switched connection should proceed if the UUS1 service cannot be provided (preferred or required).
        
</dd>
<dt>UUS2:</dt>
<dd>
User-to-user information exchanged from the sender's point of view during call establishment, between the DSS1 ALERTING and DSS1 CONNECT messages, within DSS1 USER INFORMATION messages; and
        
</dd>
<dt>UUS3:</dt>
<dd>
User-to-user information exchanged while a call is in the Active state, within DSS1 USER INFORMATION messages.
        
</dd>
</dl></blockquote>
<p>
The service is always requested by the calling user.

</p>
<p>
This document defines only the application of the ISDN UUS1 implicit supplementary service to interworking scenarios, this being the most widely deployed and used of the various ISDN user-to-user services, and indeed the one that matches the requirements specified in draft-johnston-cuss-sip-uui-reqs.

</p>
<p>
The ISDN UUS1 service has the following additional characteristics as to the data that can be transported:

</p>
<blockquote class="text">
<p>
The maximum number of octets of user information that can be transported in 128 octets. It is noted that some early ISDN implementations had a limitation of 32 octets, but it is understood that these are not currently deployed.
        
</p>
<p>
The content of the user information octets is described by a single octet protocol discriminator (see table 4-26 of ITU-T Recommendation Q.931) <a class='info' href='#Q931'>[Q931]<span> (</span><span class='info'>, &ldquo;ITU-T Recommendation Q.931: Digital subscriber Signalling System No. 1 - Network layer; ISDN user-network interface layer 3 specification for basic call control,&rdquo; .</span><span>)</span></a>. That protocol descriminator may describe the protocol used within the user data, the structure of the user data, or leave it entirely open. Note that not all values within the protocol discriminator necessarily make sense for use in the user to user service, as the content is aligned with the protocol discriminator that appears at the start of all DSS1 messages (see table 4-1 of ITU-T Recommendation Q.931) <a class='info' href='#Q931'>[Q931]<span> (</span><span class='info'>, &ldquo;ITU-T Recommendation Q.931: Digital subscriber Signalling System No. 1 - Network layer; ISDN user-network interface layer 3 specification for basic call control,&rdquo; .</span><span>)</span></a>.
        
</p>
<p>
Only a single user information package can be transported in each message.
        
</p>
<p>
The ISDN service works without encryption or integrity protection. The user trusts the intermediate network elements, and therefore the operator of those elements, not to modify the data, and to deliver all the data to the remote user. On a link by link basis, message contents are protected at layer 2 by standard CRC mechanisms - this allows loss on a link level basis to be detected, but does not guard against fraudulent attacks on the link itself. This does not prevent the use of additional encryption or integrity protection within the payload itself, although the limit on the size of the payload (128 octets) will restrict this.
        
</p>
</blockquote>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Impacts of the ISDN service on SIP operation</h3>

<p>
The ISDN service has the following impacts that need to be understood within the SIP environment.

</p>
<blockquote class="text"><dl>
<dt>Call transfer</dt>
<dd>
ISDN call transfer cancels all user-to-user supplementary services. In the ISDN, if user-to-user data is required after call transfer, then UUS3 has to be renegotiated, which is not provided by this SIP extension. The impact of this restriction on the SIP environment is that UUI header fields cannot be exchanged in transactions clearing down the SIP dialog after call transfer has occurred.
        
</dd>
<dt>Conference</dt>
<dd>
ISDN conferencing allows the user to still exchange user-to-user data after the conference is created. As far as UUS1 is concerned, this means that when an individual party clears, those clearing messages can still contain user-to-user data. As a conferee this is sent to the conference controller. As the conference controller, as this effectively clears the conference, it can be broadcast to all conferees, or sent to individual conferees [OPEN ISSUE - CHECK THIS IN THE PROTOCOL - DOES IT REQUIRE EXPLICIT].
        
</dd>
<dt></dt>
<dd>
The ISDN three-party supplementary service is similar in many ways to conferencing, but is signalled using a different mechanism. This means that on clearing, the controller using UUS1 implicit does have the choice of sending data to either or both remote users.
        
</dd>
<dt>Diversion</dt>
<dd>
When ISDN diversion occurs, any UUS1 user-to-user data is sent to the forwarded-to-user (assuming that the call meets requirements for providing the service - this is impacted by the explicit service only). If the type of diversion is such that the call is also delivered to the forwarding user, they will also receive any UUS1 user-to-user data.
        
</dd>
</dl></blockquote>
<p>
Contributors note: The above list needs to be studied further in regard to private ISDN service definitions, e.g. for the interworking of SIP and QSIG.

</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Relation to SIP-T</h3>

<p>
A method of transport of ISDN UUI is to use SIP-T <a class='info' href='#RFC3372'>[RFC3372]<span> (</span><span class='info'>Vemuri, A. and J. Peterson, &ldquo;Session Initiation Protocol for Telephones (SIP-T): Context and Architectures,&rdquo; September&nbsp;2002.</span><span>)</span></a> and transport the UUI information end-to-end, as part of an ISUP message or QSIG message) as a MIME body.  If the SIP-T method of encapsulation of ISDN instead of interworking is used, this is a reasonable mechanism and does not require any extensions to existing SIP-T.  However, if true ISDN interworking is being done, this approach is not reasonable.  Instead, the better approach is to interwork the ISDN UUI using the native SIP UUI transport mechanism, the User-to-User header field.  The rest of this document describes this approach.

</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Transition away from ISDN</h3>

<p>
This interworking usage of the SIP UUI mechanism will likely begin with one User Agent being an ISDN gateway while the other User Agent is a native SIP endpoint.  As networks transition away from ISDN, it is possible that both User Agents could become native SIP endpoints.  In this case, there is an opportunity to transition away from this ISDN usage to a more general usage of <a class='info' href='#johnston-cuss-sip-uui'>[johnston&#8209;cuss&#8209;sip&#8209;uui]<span> (</span><span class='info'>Johnston, A., McMillen, J., and J. Rafferty, &ldquo;A Mechanism for Transporting User to User Call Control Information in  SIP,&rdquo; .</span><span>)</span></a>.  This will be possible when both endpoints are aware of the actual application using the UUI.  

</p>
<p>
The SIP UUI mechanism provides a way to achieve this transition.  As an endpoint moves from being an ISDN gateway to a native SIP endpoint, and a usage application for the UUI has been standardized, the endpoint can carry the UUI both as ISDN and application encoding.  This will permit the other endpoint to utlize the UUI if it is an ISDN gateway or a native SIP endpoint.  When all the endpoints have moved away from ISDN, the ISDN encoding usage can be discontinued.

</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
ISDN Usage of the User-to-User Header Field</h3>

<p>
This document defines the purpose usage of the ISDN interworking application of UUI which is to 
interoperate with ISDN User to User Signaling (UUS), a supplementary service in 
which the user is able to send/receive a limited amount of information to/from another ISDN user over the signalling channel in association with a call to the other ISDN user..  

</p>
<p>
Two examples of ISDN UUI with redirection (transfer and diversion) are defined in <a class='info' href='#ANSII'>[ANSII]<span> (</span><span class='info'>, &ldquo;ANSI T1.643-1995, Telecommunications-Integrated Services Digital Network  (ISDN)-Explicit Call Transfer Supplementary Service,&rdquo; .</span><span>)</span></a> and <a class='info' href='#ETSI'>[ETSI]<span> (</span><span class='info'>, &ldquo;ETSI ETS 300 207-1 Ed.1 (1994), Integrated Services Digital Network  (ISDN); Diversion supplementary services,&rdquo; .</span><span>)</span></a>.


</p>
<p>
OPEN ISSUE 1: Key to defining such an application is to understand how the capabilities of the generic SIP User-to-User header field extension relate to those provide by the ISDN user-to-user signalling supplementary service. If they are the same as the ISDN User-to-user signalling supplementary service then interworking is solely a matter of mapping the construct in one protocol into the equivalent construct in the other protocol. As the ISDN user-to-user signalling supplementary service is a somewhat restricted service, it is unlikely that the capabilities will be more than the generic SIP User-to-User header field extension. So we need to deal with the question of what occurs when (and if) the generic SIP User-to-User header field extension has wider capabilities than those of the ISDN user-to-user signalling supplementary service. The capabilities of the ISDN user-to-user signalling supplementary service have been outlined in section 3. The following open issues target what could occur if each of these capabilities are exceeded.

</p>
<p>
OPEN ISSUE 2: The maximum number of octets defined for the generic SIP User-to-User header field extension exceeds the 128 octets supported by the ISDN user-to-user signalling supplementary service. Obviously if the SIP sender sends more than that allowed, then mapping of the entire contents is impossible. Truncation should not occur (as the truncation cannot be signalled in the ISDN and the contents will probably end up meaningless) and therefore the only option is to discard the information and proceed without it. Mapping in the opposite direction will never be a problem. Is extra signalling needed to allow for this discard; it is believed that the answer is no. If the SIP user knows that it is interworking with the ISDN, then the UUI application at the SIP endpoint should limit its communication to 128 octet packets, in the knowledge that discard will occur if it does not. The UUI application at the SIP endpoint has complete control over what occurs. It should be noted that this was exactly the envisaged operation when early ISDN implementations that only supported 32 octets interworked with those supporting 128 octets. It also corresponds to the interworking with ISDNs that do not support the supplementary service at all, as discard will occur in these circumstances as well. Note that failure to include the user-user data into the ISDN SETUP message (when discard occurs) will result in the service being unavailable for the remainder of the call when UUS1 implicit operation is used.

</p>
<p>
OPEN ISSUE 3: The generic SIP User-to-User header field extension supports the description of more "protocol discriminators" that that supported by the ISDN user-to-user signalling supplementary service. Part of this depends on how these additional application identifiers (if any) are carried, and as a result whether the existing ISDN protocol discriminator is carried "as is". At the moment this is assumed, and therefore if a valid protocol discriminator value exists, then it is mapped. If one does not exist then it is not mapped, and discard of the entire user data occurs as in open issue 2. It is believed that many of the considerations of Issue 2 apply, and therefore the sole reason for any additional signalling support is to identify a protocol discriminator that can be mapped (i.e. one that forms part of the set that exists in ISDN), from those that cannot. Note that failure to include the user-user data into the ISDN SETUP message (when discard occurs) will result in the service being unavailable for the remainder of the call when UUS1 implicit operation is used.

</p>
<p>
OPEN ISSUE 4: It could be that more than one payload is allowed to be included in the generic SIP User-to-User header field extension whereas only one payload is supported by the ISDN user-to-user signalling supplementary service. It is believed the considerations are identical to open issue 2.

</p>
<p>
OPEN ISSUE 5: If integrity protection or encryption is supported in the generic SIP User-to-User header field extension then it is unlikely this can be supported in the ISDN. It is assumed that the gateway will support nothing but the transparent mapping of payload, and indeed fulfils no useful function by performing any capability in regard to integrity protection or encryption. Similar considerations apply as for open issue 2, i.e. that the UUI application at the SIP endpoint has complete control over what occurs.

</p>
<p>
OPEN ISSUE 6: Interworking depends on there being equivalent functionality existing in both protocols. The mapping for ISDN basic call to SIP is well established and deployed. It is believed that there is no issue in mapping the generic SIP User-to-User header field extension as supported in RFC 3261 to the ISDN user-to-user signalling supplementary service in this respect. Issues may occur when more complex SIP transactions are used such as the 3xx response and the REFER method. This is of course dependent on there being a mapping at the ISDN gateway of the the 3xx response or the REFER method in the first place. Many SIP deployments rely on some server converting REFER transactions to INVITE transactions within the SIP environment, therefore the interworking requirements are merely those of the INVITE dialog itself. Are there other more complex scenarios that need to be studied for interworking?

</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Acknowledgements</h3>

<p>
Thanks to Spencer Dawkins, Vijay Gurbani, and Laura Liess for their 
review of earlier versions of this document.  The authors wish to thank Francois Audet, Denis 
Alexeitsev, Paul Kyzivat, Cullen Jennings, and Mahalingam Mani for their 
comments.

</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Q931">[Q931]</a></td>
<td class="author-text">&ldquo;<a href="http://www.itu.int/rec/T-REC-Q.931-199805-I/en">ITU-T Recommendation Q.931: Digital subscriber Signalling System No. 1 - Network layer; ISDN user-network interface layer 3 specification for basic call control</a>,&rdquo; http://www.itu.int/rec/T-REC-Q.931-199805-I/en&nbsp;.</td></tr>
<tr><td class="author-text" valign="top"><a name="Q957.1">[Q957.1]</a></td>
<td class="author-text">&ldquo;<a href=" http://www.itu.int/rec/T-REC-Q.957.1-199607-I">ITU-T Recommendation Q.957.1: Digital subscriber Signalling System No. 1 - Stage 3 description for supplementary services using DSS 1; Stage 3 description for additional information transfer supplementary services using DSS 1: User-to-User Signalling (UUS)</a>,&rdquo;  http://www.itu.int/rec/T-REC-Q.957.1-199607-I&nbsp;.</td></tr>
<tr><td class="author-text" valign="top"><a name="Q763">[Q763]</a></td>
<td class="author-text">&ldquo;<a href="http://www.itu.int/rec/T-REC-Q.763-199912-I/en">ITU-T Q.763 Signaling System No. 7 - ISDN user part formats and 
codes</a>,&rdquo; http://www.itu.int/rec/T-REC-Q.931-199805-I/en&nbsp;.</td></tr>
<tr><td class="author-text" valign="top"><a name="ANSII">[ANSII]</a></td>
<td class="author-text">&ldquo;ANSI T1.643-1995, Telecommunications-Integrated Services Digital Network 
(ISDN)-Explicit Call Transfer Supplementary Service.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="ETSI">[ETSI]</a></td>
<td class="author-text">&ldquo;ETSI ETS 300 207-1 Ed.1 (1994), Integrated Services Digital Network 
(ISDN); Diversion supplementary services.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3372">[RFC3372]</a></td>
<td class="author-text">Vemuri, A. and J. Peterson, &ldquo;<a href="http://tools.ietf.org/html/rfc3372">Session Initiation Protocol for Telephones (SIP-T): Context and Architectures</a>,&rdquo; BCP&nbsp;63, RFC&nbsp;3372, September&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3372.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3324">[RFC3324]</a></td>
<td class="author-text">Watson, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3324">Short Term Requirements for Network Asserted Identity</a>,&rdquo; RFC&nbsp;3324, November&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3324.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="johnston-cuss-sip-uui-reqs">[johnston-cuss-sip-uui-reqs]</a></td>
<td class="author-text">Johnston, A., McMillen, J., and L. Liess, &ldquo;<a href="http://www.tools.ietf.org/html/draft-johnston-cuss-sip-uui-reqs">Problem Statement and Requirements for Transporting User to User Call Control Information in 
SIP</a>,&rdquo; draft-johnston-cuss-sip-uui-reqs-00&nbsp;.</td></tr>
<tr><td class="author-text" valign="top"><a name="johnston-cuss-sip-uui">[johnston-cuss-sip-uui]</a></td>
<td class="author-text">Johnston, A., McMillen, J., and J. Rafferty, &ldquo;<a href="http://www.tools.ietf.org/html/draft-johnston-cuss-sip-uui">A Mechanism for Transporting User to User Call Control Information in 
SIP</a>,&rdquo; draft-johnston-cuss-sip-uui-00&nbsp;.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Keith Drage</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alcatel-Lucent</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Quadrant, Stonehill Green, Westlea</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Swindon</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">UK</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:keith.drage@alcatel-lucent.com">keith.drage@alcatel-lucent.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alan Johnston</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Avaya</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">St. Louis, MO  63124</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alan.b.johnston@gmail.com">alan.b.johnston@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Joanne McMillen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Unaffiliated</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:c.joanne.mcmillen@gmail.com">c.joanne.mcmillen@gmail.com</a></td></tr>
</table>
</body></html>
