<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Connecting Stub Networks to Existing Infrastructure</title>
<meta content="Ted Lemon" name="author">
<meta content="
       

 This document describes a set of practices for connecting stub networks to adjacent infrastructure networks, as well as to
 larger network fabrics. This is applicable in cases such as constrained (Internet of Things) networks where there is a need
 to provide functional parity of service discovery and reachability between devices on the stub network and devices on an
 adjacent infrastructure link (for example, a home network).
       
       

 The stub networks use case is intended to fully address the need to attach a single network link to an infrastructure
 network, where the attached link provides no through routing and in cases where integration to the infrastructure routing
 fabric (if any) is not available.
       
    " name="description">
<meta content="xml2rfc 3.5.0" name="generator">
<meta content="draft-lemon-stub-networks-02" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.5.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.3
    google-i18n-address 2.4.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.2
    pycountry 20.7.3
    pyflakes 2.2.0
    PyYAML 5.4.1
    requests 2.25.1
    setuptools 53.0.0
    six 1.15.0
-->
<link href="/tmp/draft-lemon-stub-networks%5B3%5D-na2gm79l.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Connecting Stub Networks</td>
<td class="right">March 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Lemon</td>
<td class="center">Expires 3 September 2021</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Internet Engineering Task Force</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-03-02" class="published">2 March 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Best Current Practice</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2021-09-03">3 September 2021</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">T. Lemon</div>
<div class="org">Apple Inc.</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Connecting Stub Networks to Existing Infrastructure</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">

 This document describes a set of practices for connecting stub networks to adjacent infrastructure networks, as well as to
 larger network fabrics. This is applicable in cases such as constrained (Internet of Things) networks where there is a need
 to provide functional parity of service discovery and reachability between devices on the stub network and devices on an
 adjacent infrastructure link (for example, a home network).<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">

 The stub networks use case is intended to fully address the need to attach a single network link to an infrastructure
 network, where the attached link provides no through routing and in cases where integration to the infrastructure routing
 fabric (if any) is not available.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 3 September 2021.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="ulEmpty compact toc">
<li class="ulEmpty compact toc" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="ulEmpty compact toc" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-glossary" class="xref">Glossary</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="ulEmpty compact toc" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-support-for-adjacent-infras" class="xref">Support for adjacent infrastructure links</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
<ul class="compact toc ulEmpty">
<li class="compact toc ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-managing-addressability-on-" class="xref">Managing addressability on the adjacent infrastructure link</a><a href="#section-toc.1-1.3.2.1.1" class="pilcrow">¶</a></p>
<ul class="compact toc ulEmpty">
<li class="compact toc ulEmpty" id="section-toc.1-1.3.2.1.2.1">
                    <p id="section-toc.1-1.3.2.1.2.1.1" class="keepWithNext"><a href="#section-3.1.1" class="xref">3.1.1</a>.  <a href="#name-ip-addressability-already-p" class="xref">IP addressability already present on adjacent infrastructure link</a><a href="#section-toc.1-1.3.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact toc ulEmpty" id="section-toc.1-1.3.2.1.2.2">
                    <p id="section-toc.1-1.3.2.1.2.2.1"><a href="#section-3.1.2" class="xref">3.1.2</a>.  <a href="#name-ip-addressability-not-prese" class="xref">IP addressability not present on adjacent infrastructure link</a><a href="#section-toc.1-1.3.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact toc ulEmpty" id="section-toc.1-1.3.2.1.2.3">
                    <p id="section-toc.1-1.3.2.1.2.3.1"><a href="#section-3.1.3" class="xref">3.1.3</a>.  <a href="#name-resolving-contention-over-w" class="xref">Resolving contention over which prefix to deprecate</a><a href="#section-toc.1-1.3.2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact toc ulEmpty" id="section-toc.1-1.3.2.1.2.4">
                    <p id="section-toc.1-1.3.2.1.2.4.1"><a href="#section-3.1.4" class="xref">3.1.4</a>.  <a href="#name-handling-the-presence-of-mu" class="xref">Handling the presence of multiple stub routers</a><a href="#section-toc.1-1.3.2.1.2.4.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-managing-addressability-on-t" class="xref">Managing addressability on the stub network</a><a href="#section-toc.1-1.3.2.2.1" class="pilcrow">¶</a></p>
<ul class="compact toc ulEmpty">
<li class="compact toc ulEmpty" id="section-toc.1-1.3.2.2.2.1">
                    <p id="section-toc.1-1.3.2.2.2.1.1"><a href="#section-3.2.1" class="xref">3.2.1</a>.  <a href="#name-maintenance-across-stub-rou" class="xref">Maintenance across stub router restarts</a><a href="#section-toc.1-1.3.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact toc ulEmpty" id="section-toc.1-1.3.2.2.2.2">
                    <p id="section-toc.1-1.3.2.2.2.2.1"><a href="#section-3.2.2" class="xref">3.2.2</a>.  <a href="#name-generating-a-ula-prefix-to-" class="xref">Generating a ULA prefix to provide addressability</a><a href="#section-toc.1-1.3.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-managing-reachability-on-th" class="xref">Managing reachability on the adjacent infrastructure link</a><a href="#section-toc.1-1.3.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="xref">3.4</a>.  <a href="#name-managing-reachability-on-the" class="xref">Managing reachability on the stub network</a><a href="#section-toc.1-1.3.2.4.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="xref">3.5</a>.  <a href="#name-providing-discoverability-o" class="xref">Providing discoverability of stub network hosts on the adjacent infrastructure link</a><a href="#section-toc.1-1.3.2.5.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.3.2.6">
                <p id="section-toc.1-1.3.2.6.1"><a href="#section-3.6" class="xref">3.6</a>.  <a href="#name-providing-discoverability-of" class="xref">Providing discoverability of adjacent infrastructure hosts on the stub network</a><a href="#section-toc.1-1.3.2.6.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty compact toc" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-providing-reachability-to-i" class="xref">Providing reachability to IPv4 services to the stub network</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
<ul class="compact toc ulEmpty">
<li class="compact toc ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-nat64-provided-by-infrastru" class="xref">NAT64 provided by infrastructure</a><a href="#section-toc.1-1.4.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-nat64-provided-by-stub-rout" class="xref">NAT64 provided by stub router(s)</a><a href="#section-toc.1-1.4.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty compact toc" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-handling-partitioning-event" class="xref">Handling partitioning events on a stub network</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="ulEmpty compact toc" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-support-for-non-adjacent-li" class="xref">Support for non-adjacent links</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
<ul class="compact toc ulEmpty">
<li class="compact toc ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-acquiring-an-off-stub-netwo" class="xref">Acquiring an off-stub-network-routable prefix for the stub network</a><a href="#section-toc.1-1.6.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-arranging-for-routing-to-a-" class="xref">Arranging for routing to a stub network's off-stub-network routable prefix</a><a href="#section-toc.1-1.6.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="xref">6.3</a>.  <a href="#name-making-service-advertisemen" class="xref">Making service advertisements available on non-adjacent infrastructure</a><a href="#section-toc.1-1.6.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="xref">6.4</a>.  <a href="#name-making-service-advertisement" class="xref">Making service advertisements available on the internet</a><a href="#section-toc.1-1.6.2.4.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.6.2.5">
                <p id="section-toc.1-1.6.2.5.1"><a href="#section-6.5" class="xref">6.5</a>.  <a href="#name-distinction-between-non-adj" class="xref">Distinction between non-adjacent infrastructure and global internet connectivity</a><a href="#section-toc.1-1.6.2.5.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty compact toc" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="ulEmpty compact toc" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-appendix.a" class="xref"></a><a href="#name-authors-address" class="xref">Author's Address</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">

 This document describes a set of practices for connecting stub networks to adjacent infrastructure networks, as well as to
 larger network fabrics. This is applicable in cases such as constrained (Internet of Things) networks where there is a need
 to provide functional parity of service discovery and reachability between devices on the stub network and devices on an
 adjacent infrastructure link (for example, a home network).<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">

 The stub networks use case is intended to fully address the need to attach a single network link to an infrastructure
 network, where the attached link provides no through routing and in cases where integration to the infrastructure routing
 fabric (if any) is not available.<a href="#section-1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2">
      <h2 id="name-glossary">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-glossary" class="section-name selfRef">Glossary</a>
      </h2>
<span class="break"></span><dl class="dlParallel" id="section-2-1">
        <dt id="section-2-1.1">Addressability</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.2">The ability to associate each node on a link with its own IPv6 address.<a href="#section-2-1.2" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.3">

   Reachability</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.4">Given an IPv6 destination address that is not on-link for any link to which a node is attached, the
   information required that allows the node to send packets to a router that can forward those packets towards a link where
   the destination address is on-link.<a href="#section-2-1.4" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.5">Infrastructure network</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.6">

   the network infrastructure to which a stub router connects. This network can be a single link, or a network of links. The
   network may also provide some services, such as a DNS resolver, a DHCPv4 server, and a DHCPv6 prefix delegation server,
   for example.<a href="#section-2-1.6" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.7">Infrastructure link</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.8">any link in a network infrastructure that is managed by a single entity.<a href="#section-2-1.8" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.9">Adjacent infrastructure link (AIL)</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.10">an infrastructure link to which a stub router is directly connected.<a href="#section-2-1.10" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.11">Non-adjacent infrastructure link (NAIL)</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.12">an infrastructure link to which a stub router is not directly connected.<a href="#section-2-1.12" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.13">Non-adjacent link (NAL)</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.14">

   any link to which the stub router is not directly connected, whether within an infrastructure or elsewhere on the
   Internet.<a href="#section-2-1.14" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.15">Off-Stub-Network-Routable (OSNR) Prefix</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.16">a prefix advertised on the stub network that can be used for communication with hosts not on the stub network.<a href="#section-2-1.16" class="pilcrow">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
</section>
<section id="section-3">
      <h2 id="name-support-for-adjacent-infras">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-support-for-adjacent-infras" class="section-name selfRef">Support for adjacent infrastructure links</a>
      </h2>
<p id="section-3-1">

 We assume that adjacent infrastructure link supports Router and Prefix Discovery using router advertisements. Adjacent
 infrastructure links on networks where this is not supported are out of scope for this document.<a href="#section-3-1" class="pilcrow">¶</a></p>
<section id="section-3.1">
        <h3 id="name-managing-addressability-on-">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-managing-addressability-on-" class="section-name selfRef">Managing addressability on the adjacent infrastructure link</a>
        </h3>
<p id="section-3.1-1">

   In order to provide IPv6 routing to the stub network, IPv6 addressing must be available on the adjacent infrastructure
   link. In the ideal case, such addressing is already present on the link, and need not be provided. In this case, the stub
   router SHOULD NOT provide addressability on the adjacent infrastructure link.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<section id="section-3.1.1">
          <h4 id="name-ip-addressability-already-p">
<a href="#section-3.1.1" class="section-number selfRef">3.1.1. </a><a href="#name-ip-addressability-already-p" class="section-name selfRef">IP addressability already present on adjacent infrastructure link</a>
          </h4>
<p id="section-3.1.1-1">

     IPv6 addressing is considered to be present on the link if a usable on-link prefix is advertised on the adjacent
     infrastructure link. A usable on-link prefix could be a prefix advertised on the link that is on-link and allows
     autonomous configuration. A prefix is also a usable on-link prefix if it is advertised on the link as on-link, and if
     the 'm' bit is set in the Router Advertisement message header

     (<span>[<a href="#RFC4861" class="xref">RFC4861</a>], <a href="https://rfc-editor.org/rfc/rfc4861#section-4.2" class="relref">Section 4.2</a></span>) that contains the Prefix option. This indicates that
     node addressibility is being managed using DHCPv6.<a href="#section-3.1.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1.1-2">

     A prefix is advertised on the link if, when a Router Solicit message

     (<span>[<a href="#RFC4861" class="xref">RFC4861</a>], <a href="https://rfc-editor.org/rfc/rfc4861#section-4.1" class="relref">Section 4.1</a></span>) is sent, a Router Advertisement message is received in
     response which contains a prefix information option (<span>[<a href="#RFC4861" class="xref">RFC4861</a>], <a href="https://rfc-editor.org/rfc/rfc4861#section-4.6.2" class="relref">Section 4.6.2</a></span>)
     for that prefix.<a href="#section-3.1.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1.1-3">

     After such an RA message has been received, it can be assumed for some period of time thereafter that the prefix
     is still valid on the link. However, prefix lifetimes and router lifetimes are often quite long. The mere fact that a
     prefix that has been advertised is still within its valid lifetime does not mean that that prefix is still being
     advertised on the link.<a href="#section-3.1.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1.1-4">

     This is important because when a new host appears on the adjacent infrastructure link and sends an initial router
     solicit, if it does not receive a usable on-link prefix, it will not be able to communicate. Consequently, the stub
     router MUST monitor router solicits and advertisements on the link in order to determine whether a prefix that has been
     advertised on the link is still being advertised.<a href="#section-3.1.1-4" class="pilcrow">¶</a></p>
<p id="section-3.1.1-5">

     There are several methods that can be used to accomplish this:<a href="#section-3.1.1-5" class="pilcrow">¶</a></p>
<p id="section-3.1.1-6">

     The stub router MUST listen for router advertisements on the adjacent infrastructure link, and record the time at
     which each router advertisement was received. A router advertisement that is more than STALE_RA_TIME seconds old MUST be
     assumed to no longer be advertised on the link. When the last non-stale router advertisement containing a usable
     prefixes on the link is marked stale, the stub router should begin Router Discovery
     (<span>[<a href="#RFC4861" class="xref">RFC4861</a>], <a href="https://rfc-editor.org/rfc/rfc4861#section-6.3" class="relref">Section 6.3</a></span>).<a href="#section-3.1.1-6" class="pilcrow">¶</a></p>
<p id="section-3.1.1-7">

     The stub router MUST listen for router solicits on the adjacent infrastructure link. When a router solicit is
     received, the router SHOULD set a timer for VICARIOUS_SOLICIT_TIME seconds. If, after that amount of time, no router
     advertisements are received that contain a usable on-link prefix, the stub router MUST begin router discovery. This is
     necessary in case the response to the router solicit was unicast, since in this case the stub router would not see that
     response.  When the stub router first connects to the adjacent infrastructure link, it MUST begin router discovery.<a href="#section-3.1.1-7" class="pilcrow">¶</a></p>
<p id="section-3.1.1-8">

     When router discovery completes, the stub router evaluates whether or not a usable on-link prefix has been seen in a
     non-stale router advertisement during router discovery. If no usable on-link prefix has been seen, then the stub router
     MUST begin to provide a usable on-link prefix.<a href="#section-3.1.1-8" class="pilcrow">¶</a></p>
<p id="section-3.1.1-9">

     As an alternative to the vicarious router discovery process described here, the stub router could monitor the presence
     of the router advertising the on-link prefix in the neighbor cache. If the neighbor cache entry becomes stale, this
     could be an indication that the prefix is also stale. If the neighbor cache entry goes stale, the router would need to
     try to refresh it, and if that fails, then the stub router must begin advertising its own on-link prefix on the stub
     network.<a href="#section-3.1.1-9" class="pilcrow">¶</a></p>
</section>
<section id="section-3.1.2">
          <h4 id="name-ip-addressability-not-prese">
<a href="#section-3.1.2" class="section-number selfRef">3.1.2. </a><a href="#name-ip-addressability-not-prese" class="section-name selfRef">IP addressability not present on adjacent infrastructure link</a>
          </h4>
<p id="section-3.1.2-1">
     When there is no usable on-link prefix on the adjacent infrastructure network, the stub router provides its own on-link
     prefix. This prefix has a valid and preferred lifetime of STUB_PROVIDED_PREFIX_LIFETIME seconds. This prefix MUST allow
     for autonomous configuration (SLAAC).<a href="#section-3.1.2-1" class="pilcrow">¶</a></p>
<p id="section-3.1.2-2">
     The stub router must advertise this prefix every BEACON_INTERVAL seconds. When the stub router is advertising
     reachability to the stub network, the on-link prefix advertisement and the route information advertisement must be
     contained in the same router advertisement.<a href="#section-3.1.2-2" class="pilcrow">¶</a></p>
<p id="section-3.1.2-3">

     When the stub router is advertising an on-link prefix on the AIL, it may receive a router advertisement containing a
     usable on-link prefix for the AIL with a non-zero preferred lifetime. In this case, the stub router should begin to
     deprecate the on-link prefix it is advertising on the AIL. The preferred lifetime for this prefix should be set to zero
     in subsequent advertisements.<a href="#section-3.1.2-3" class="pilcrow">¶</a></p>
<p id="section-3.1.2-4">

     The valid lifetime (VALID) is computed based on three values: the current time when a router advertisement is being
     generated (NOW), the time at which the new usable on-link prefix advertisement was received (DEPRECATE_TIME), and
     STUB_PROVIDED_PREFIX_LIFETIME. All of these values are in seconds. VALID is computed as follows:<a href="#section-3.1.2-4" class="pilcrow">¶</a></p>
<p id="section-3.1.2-5">

     VALID = STUB_PROVIDED_PREFIX_LIFETIME - (NOW - DEPRECATE_TIME)<a href="#section-3.1.2-5" class="pilcrow">¶</a></p>
<p id="section-3.1.2-6">

     If VALID is less than BEACON_INTERVAL, the stub router does not include the deprecated prefix in the router
     advertisement. Note that VALID could be less than zero. Otherwise, the prefix is provided in the advertisement, but with
     a valid lifetime of VALID.<a href="#section-3.1.2-6" class="pilcrow">¶</a></p>
</section>
<section id="section-3.1.3">
          <h4 id="name-resolving-contention-over-w">
<a href="#section-3.1.3" class="section-number selfRef">3.1.3. </a><a href="#name-resolving-contention-over-w" class="section-name selfRef">Resolving contention over which prefix to deprecate</a>
          </h4>
<p id="section-3.1.3-1">
     It is also possible that all routers on the link that are capable of advertising prefixes might be following the same
     protocol of deprecating their own prefix when a valid prefix shows up. To prevent a situation where all routers
     deprecate their prefix and wait until there are no valid prefixes being advertised before advertising a prefix, each
     stub router must detect the situation where, having deprecated its own prefix, all of the other prefixes being
     advertised on the link have also been deprecated.<a href="#section-3.1.3-1" class="pilcrow">¶</a></p>
<p id="section-3.1.3-2">

     When this situation occurs, each router on the link MUST compare the valid lifetimes of all the prefixes that have been
     seen. If the router's own prefix expires last, then that router should immediately resume publishing its prefix as a
     preferred prefix.<a href="#section-3.1.3-2" class="pilcrow">¶</a></p>
<p id="section-3.1.3-3">

     If a router observes this situation and its prefix is not the one that expires last, it MUST set a timer for
     UNDEPRECATE_WAIT seconds, while continuing to observe prefix advertisements on the link. If, when the timer expires, the
     prefix that expires last has not been re-published as a preferred prefix, then that prefix is marked as 'really
     deprecated', and no longer considered a candidate for de-deprecation.<a href="#section-3.1.3-3" class="pilcrow">¶</a></p>
<p id="section-3.1.3-4">

     Using the remaining list of prefixes, the router should then apply the same algorithm. It should continue to apply this
     algorithm until either its prefix becomes the one to re-publish as preferred, or some other router has re-published its
     prefix as preferred.<a href="#section-3.1.3-4" class="pilcrow">¶</a></p>
</section>
<section id="section-3.1.4">
          <h4 id="name-handling-the-presence-of-mu">
<a href="#section-3.1.4" class="section-number selfRef">3.1.4. </a><a href="#name-handling-the-presence-of-mu" class="section-name selfRef">Handling the presence of multiple stub routers</a>
          </h4>
<p id="section-3.1.4-1">
     When multiple stub routers are connected to the same AIL, and no usable on-link prefix is being provided on that link by
     the infrastructure, there will be a competition between routers to provide a usable on-link prefix. In order to avoid
     duplication, stub routers MUST include a random offset in the time interval across which router discovery is
     performed. This ensures that after a power failure, not all stub routers will exit router discovery at the exact same
     time, and so one stub router should advertise a usable on-link prefix before the others. This should prevent the other
     stub routers from advertising additional on-link prefixes.<a href="#section-3.1.4-1" class="pilcrow">¶</a></p>
<p id="section-3.1.4-2">
     There is no particular harm caused by advertising multiple on-link prefixes, but it is preferable to minimize this,
     because each on-link prefix consumes space in every on-link host's routing table, and consumes time when making source
     address selection and routing decisions.<a href="#section-3.1.4-2" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-3.2">
        <h3 id="name-managing-addressability-on-t">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-managing-addressability-on-t" class="section-name selfRef">Managing addressability on the stub network</a>
        </h3>
<p id="section-3.2-1">
   How addressability is managed on stub networks depends on the nature of the stub network. For some stub networks, the stub
   router can be sure that it is the only router. For example, a stub router that is providing a Wi-Fi network for tethering
   will advertise its own SSID and use its own joining credentials; in this case, it can assume that it is the only router
   for that network, and advertise a default route and on-link prefix just like any other router.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">
   However, some stub networks are more cooperative in nature, for example IP mesh networks. On such networks, multiple stub
   routers may be present and be providing addressability and reachability.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">
   In either case, some stub router connected to the stub network MUST provide a usable on-link prefix (the OSNR prefix) for
   the stub network.  If the stub network is a multicast-capable medium where Router Advertisements are used for router
   discovery, the same mechanism described in section [Support for adjacent infrastructure links] is used.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">
   Stub networks that do not support the use of Router Advertisements for router discovery must use some similar
   mechanism that is compatible with that type of network. Describing the process of establishing a common OSNR prefix on
   such networks is out of scope for this document.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<section id="section-3.2.1">
          <h4 id="name-maintenance-across-stub-rou">
<a href="#section-3.2.1" class="section-number selfRef">3.2.1. </a><a href="#name-maintenance-across-stub-rou" class="section-name selfRef">Maintenance across stub router restarts</a>
          </h4>
<p id="section-3.2.1-1">
     Stub routers may restart from time to time; when a restart occurs, the stub router may have been advertising state to the
     network which, following the restart, is no longer required.<a href="#section-3.2.1-1" class="pilcrow">¶</a></p>
<p id="section-3.2.1-2">
     For example, suppose there are two stub routers connected to the same infrastructure link. When the first stub router is
     restarted, the second takes over providing an on-link prefix. Now the first router rejoins the link. It sees that the
     second stub router's prefix is advertised on the infrastructure link, and therefore does not advertise its own.<a href="#section-3.2.1-2" class="pilcrow">¶</a></p>
<p id="section-3.2.1-3">
     This behavior can cause problems because the first stub router no longer sees the on-link prefix it had been
     advertising on infrastructure as on-link. Consequently, if it receives a packet to forward to such an address, it will
     forward that packet directly to a default router, if one is present; otherwise, it will have no route to the destination,
     and will drop the packet.<a href="#section-3.2.1-3" class="pilcrow">¶</a></p>
<p id="section-3.2.1-4">
     To address this problem, stub routers SHOULD remember the last time a prefix was advertised across restarts. On restart,
     the router can immediately begin deprecating the prefix, and can stop after the prefix valid lifetime goes to zero, based
     on the recorded time that the last advertisement was sent.<a href="#section-3.2.1-4" class="pilcrow">¶</a></p>
<p id="section-3.2.1-5">
     When a stub router has only flash memory with limited write lifetime, it may be inappropriate to do a write to flash
     every time a prefix beacon happens. In this case, the router SHOULD record the set of prefixes that have been advertised
     on infrastructure and the maximum valid lifetime that was advertised. On restart, the router should assume that hosts on
     the infrastructure link have received advertisements for any such prefixes, and should immediately deprecate them, and
     continue to do so until the maximum valid lifetime has elapsed after restart.<a href="#section-3.2.1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2.2">
          <h4 id="name-generating-a-ula-prefix-to-">
<a href="#section-3.2.2" class="section-number selfRef">3.2.2. </a><a href="#name-generating-a-ula-prefix-to-" class="section-name selfRef">Generating a ULA prefix to provide addressability</a>
          </h4>
<p id="section-3.2.2-1">
     In order to be able to provide addressability either on the stub network or on an adjacent infrastructure network, a stub
     router must allocate its own ULA prefix. ULA prefixes, described in Unique Local IPv6 Unicast Addresses
     (<span>[<a href="#RFC4193" class="xref">RFC4193</a>]</span>) are randomly allocated prefixes. A stub router MUST allocate a single ULA prefix for use in
     providing on-link prefixes to the stub network and the infrastructure network, as needed.<a href="#section-3.2.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2.2-2">
     The ULA prefix allocated by a stub router SHOULD be maintained across reboots, and SHOULD remain stable over
     time. For privacy reasons, a stub router that roams from network to network may wish to allocate a different ULA prefix
     each time it connects to a different infrastructure network.<a href="#section-3.2.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2.2-3">
     If IPv6 prefix delegation is available, which implies that IPv6 service is also available on the infrastructure
     link, then the stub router MAY use IPv6 prefix delegation to acquire a prefix to advertise on the stub network, rather
     than allocating one out of its ULA prefix.<a href="#section-3.2.2-3" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-3.3">
        <h3 id="name-managing-reachability-on-th">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-managing-reachability-on-th" class="section-name selfRef">Managing reachability on the adjacent infrastructure link</a>
        </h3>
<p id="section-3.3-1">
   Stub routers MUST advertise reachability to stub network OSNR prefixes on any AIL to which they are connected.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">
   Each stub network will have some set of prefixes that are advertised as on-link for that network. A stub router connected
   to that network SHOULD advertise reachability to all such prefixes on any AIL to which it is attached using router
   advertisements<a href="#section-3.3-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.4">
        <h3 id="name-managing-reachability-on-the">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-managing-reachability-on-the" class="section-name selfRef">Managing reachability on the stub network</a>
        </h3>
<p id="section-3.4-1">
   The stub router MAY advertise itself as a default router on the stub network, if it itself has a default route on the
   AIL. In some cases it may not be desirable to advertise reachability to the Internet as a whole; in this case the stub
   router need not advertise itself as a default router.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4-2">
   If the stub router is not advertising itself as a default on the stub network, it MUST advertise reachability to any
   prefixes that are being advertised as on-link on AILs to which it is attached. This is true for prefixes it is advertising,
   and for other prefixes being advertised on that link.<a href="#section-3.4-2" class="pilcrow">¶</a></p>
<p id="section-3.4-3">
   Note that in some stub network configurations, it is possible for more than one stub router to be connected to the stub
   network, and each stub router may be connected to a different AIL. In this case, a stub router advertising a default route
   may receive a packet destined for a link that is not an AIL for that router, but is an AIL for a different router. In such a
   case, if the infrastructure is not capable of routing between these two AILs, a packet which could have been delivered by
   another stub router will be lost by the stub router that received it.<a href="#section-3.4-3" class="pilcrow">¶</a></p>
<p id="section-3.4-4">
   Consequently, stub routers SHOULD be configurable to not advertise themselves as default routers on the stub network. Stub
   routers SHOULD be configurable to explicitly advertise AIL prefixes on the stub network even if they are advertising as a
   default router. Stub routers SHOULD be configurable to advertise NAIL prefixes on the stub network; such configuration would
   include a list of NAIL prefixes to advertise. This list may be configured in a management interface or as a result of these
   routes being delivered in a routing protocol or through router discovery. The mechanisms by which such configuration can be
   accomplished are out of scope for this document.<a href="#section-3.4-4" class="pilcrow">¶</a></p>
</section>
<section id="section-3.5">
        <h3 id="name-providing-discoverability-o">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-providing-discoverability-o" class="section-name selfRef">Providing discoverability of stub network hosts on the adjacent infrastructure link</a>
        </h3>
<p id="section-3.5-1">

   In some cases it will be necessary for hosts on the adjacent infrastructure link to be able to discover devices on the stub
   network. In other cases, this will be unnecessary or even undesirable. For example, it may be undesirable for devices on an
   adjacent infrastructure link to be able to discover devices on a Wi-Fi tether, for example provided by a mobile phone.<a href="#section-3.5-1" class="pilcrow">¶</a></p>
<p id="section-3.5-2">

   One example of a use case for stub networks where such discovery is desirable is the constrained network use case. In this
   case a low-power, low-cost stub network provides connectivity for devices that provide services to the infrastructure. For
   such networks, it is necessary that devices on the infrastructure be able to discover devices on the stub network.<a href="#section-3.5-2" class="pilcrow">¶</a></p>
<p id="section-3.5-3">

   The most basic use case for this is to provide feature parity with existing solutions like multicast DNS (mDNS). For
   example, a light bulb with built-in Wi-Fi connectivity might be discoverable on the infrastructure link to which it is
   connected, using mDNS, but likely is not discoverable on other links. To provide equivalent functionality for an equivalent
   device on a constrained network that is a stub network, the stub network device must be discoverable on the infrastructure
   link (which is an AIL from the perspective of the stub network).<a href="#section-3.5-3" class="pilcrow">¶</a></p>
<p id="section-3.5-4">

   If services are to be advertised using DNS Service Discovery <span>[<a href="#RFC6763" class="xref">RFC6763</a>]</span>, there are in principle two ways to
   accomplish this. One is to present services on the stub network as a DNS zone which can then be configured as a browsing
   domain in the DNS (<span>[<a href="#RFC6763" class="xref">RFC6763</a>], <a href="https://rfc-editor.org/rfc/rfc6763#section-11" class="relref">Section 11</a></span>). The second is to advertise stub network
   services on the AIL using multicast DNS (mDNS) <span>[<a href="#RFC6762" class="xref">RFC6762</a>]</span>.<a href="#section-3.5-4" class="pilcrow">¶</a></p>
<p id="section-3.5-5">

   Stub network routers cannot be assumed to be able to integrate into the DNS naming hierarchy of the infrastructure
   network. Therefore, stub networks must be able to rely on ad-hoc service advertisement protocols. Since mDNS is in wide use,
   this is a suitable protocol for this use case. This is not to say that mDNS is the only such protocol that could be
   used, but it is the one that we suggest implementing.<a href="#section-3.5-5" class="pilcrow">¶</a></p>
<p id="section-3.5-6">

   In order to provide mDNS discovery for devices on the stub network, one of two solutions is likely to be applicable,
   depending on the operational practicalities of the stub network. For a constrained stub network, on which battery operated
   devices may be attached, mass multicast traffic for service discovery is impractical, since every device needs to wake up
   for every service discovery, even if they don't offer that service, and since many such devices may be operating on
   battery power. For such a network, multicast DNS is not a good choice.<a href="#section-3.5-6" class="pilcrow">¶</a></p>
<p id="section-3.5-7">

   For such networks, a unicast service registration protocol such as DNS-SD Service Registration Protocol (SRP)
   <span>[<a href="#I-D.ietf-dnssd-srp" class="xref">I-D.ietf-dnssd-srp</a>]</span> is a good solution. The stub router can act as an SRP server on the stub network,
   accepting service advertisements from stub network devices. On the adjacent infrastructure network, it can advertise those
   services as multicast DNS Advertising Proxy <span>[<a href="#I-D.sctl-advertising-proxy" class="xref">I-D.sctl-advertising-proxy</a>]</span>.<a href="#section-3.5-7" class="pilcrow">¶</a></p>
<p id="section-3.5-8">

   For other stub networks, for example a Wi-Fi-based Personal Area Network provided as part of a tethering function on a mobile
   device, multicast DNS may be the only option. For Wi-Fi stub networks, there is such a large installed base of devices
   supporting mDNS that requiring some other service advertisement solution would be problematic simply because it would
   require new software for that entire installed base. For other networks, particularly constrained networks, where devices do
   not currently support mDNS, no such obstacle exists.<a href="#section-3.5-8" class="pilcrow">¶</a></p>
<p id="section-3.5-9">

   Because the primary use case for discovery of devices on a stub network is the use case where the stub network is joining a
   constrained network to an existing infrastructure link, we currently only describe a solution (DNS-SD SRP) for that use
   case. A solution for the use case where the stub router must provide discoverability for a stub network where mDNS
   advertising is preferred is out of scope for this document.<a href="#section-3.5-9" class="pilcrow">¶</a></p>
</section>
<section id="section-3.6">
        <h3 id="name-providing-discoverability-of">
<a href="#section-3.6" class="section-number selfRef">3.6. </a><a href="#name-providing-discoverability-of" class="section-name selfRef">Providing discoverability of adjacent infrastructure hosts on the stub network</a>
        </h3>
<p id="section-3.6-1">

   Hosts on the stub network may need to discover hosts on the adjacent infrastructure network. In the IoT network example
   we've been using, there might be a light switch on the stub network which needs to be able to actuate a light bulb connected
   to the adjacent infrastructure network. In order to know where to send the actuation messages, the light switch will need to
   be able to discover the light bulb's address somehow.<a href="#section-3.6-1" class="pilcrow">¶</a></p>
<p id="section-3.6-2">

   In the case of a Wi-Fi stub network, devices on the stub network will need to be able to access the Internet, and may also
   need to be able to access local services on the adjacent infrastructure link.<a href="#section-3.6-2" class="pilcrow">¶</a></p>
<p id="section-3.6-3">

   In order to address these use cases, the stub network router SHOULD provide a DNS-SD Discovery Proxy
   <span>[<a href="#RFC8766" class="xref">RFC8766</a>]</span> and a DNS resolver. Since these two functions are combined, if the stub router provides them, it
   MUST offer both services on the standard DNS UDP and TCP ports.<a href="#section-3.6-3" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-4">
      <h2 id="name-providing-reachability-to-i">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-providing-reachability-to-i" class="section-name selfRef">Providing reachability to IPv4 services to the stub network</a>
      </h2>
<section id="section-4.1">
        <h3 id="name-nat64-provided-by-infrastru">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-nat64-provided-by-infrastru" class="section-name selfRef">NAT64 provided by infrastructure</a>
        </h3>
<p id="section-4.1-1">
   Stub networks are defined to be IPv6-only because it would be difficult to implement a stub network using IPv4
   technology. However, stub network devices may need to be able to communicate with IPv4-only services either on the
   adjacent infrastructure, or on the global internet. Ideally, the infrastructure network fully supports IPv6, and all
   services on the infrastructure network are IPv6-capable. In this case, perhaps the infrastructure network provides NAT64
   service to IPv4-only hosts on the internet. In this ideal setting, the stub router need do nothing-the infrastructure
   network is doing it all.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">
   In this situation, if there are multiple stub routers, each connected to the same adjacent infrastructure link, there is
   no need for special behavior-each stub router can advertise a default route, and any stub router will do to route NAT64
   traffic. If some stub routers are connected to different adjacent infrastructure links than others, some of which support
   NAT64 and some of which do not, then the default route may not carry traffic to the correct link for NAT64 service. In
   this case, a more specific address to the infrastructure NAT64 prefix(es) MUST be advertised by those stub routers that
   are able to discover it.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2">
        <h3 id="name-nat64-provided-by-stub-rout">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-nat64-provided-by-stub-rout" class="section-name selfRef">NAT64 provided by stub router(s)</a>
        </h3>
<p id="section-4.2-1">
   Most infrastructure networks at present do not provide NAT64 service. It is therefore necessary for stub routers to
   be able to provide NAT64 service if IPv4 hosts are to be reachable from the stub network.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">
   To provide NAT64 service, a stub router must allocate a NAT64 prefix. For convenience, the stub network allocates a single
   prefix out of the /48 ULA prefix that it maintains. Out of the 2^16 possible subnets of the /48, the stub router SHOULD
   use the numerically highest /64 prefix.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">
   If there are multiple stub routers providing connectivity between the stub network and infrastructure, each stub network
   uses its own NAT64 prefix-there is no common NAT64 prefix. The reason for this is that NAT64 translation is not stateless,
   and is tied to the stub router's IPv4 address. Therefore each NAT64 egress is not equivalent.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2-4">
   A stub network that services a Wi-Fi stub network SHOULD provide DNS64 translation: hosts on the stub network cannot be
   assumed to be able to do DNS64 synthesis in the stub resolver. In this case the DNS resolver on the stub router MUST honor
   the CD and DO bits if received in a request, since this indicates that the stub resolver on the requestor intends to do
   DNSSEC validation. In this case, the resolver on the stub router MUST NOT perform DNS64 synthesis.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
<p id="section-4.2-5">
   On specific stub networks it may be desirable to require the stub network device to perform DNS64 synthesis. Stub network
   routers for such networks do not need to provide DNS64 synthesis. Instead, they MUST provide an ipv4only.arpa answer that
   advertises the NAT64 prefix for that stub router, and MUST provide an explicit route to that NAT64 prefix on the stub
   network using RA or whatever technology is specific to that stub network type.<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<p id="section-4.2-6">
   In constrained networks it can be very useful if stub network resolvers provide the information required to do DNS64
   translation in the answer to the AAAA query. If the answer to an AAAA query comes back with "no data" (not NXDOMAIN), this
   suggests that there may be an A record. In this case, the stub network's resolver SHOULD attempt to look up an A record on
   the same name. If such a record exists, the resolver SHOULD return no data in the Answer section of the DNS response, and
   SHOULD provide any CNAME records that were involved in returning the "no data" answer to the AAAA query, and SHOULD
   provide any A records that were ultimately returned, in the Additional section. The resolver should also include an
   ipv4only.arpa record in the Additional section.<a href="#section-4.2-6" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-5">
      <h2 id="name-handling-partitioning-event">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-handling-partitioning-event" class="section-name selfRef">Handling partitioning events on a stub network</a>
      </h2>
<p id="section-5-1">

 If a stub network is constructed using mesh technology, it may become partitioned. In such a situation, it may be one stub
 router is connected to one partition, and another stub router is connected to the other partition. In this situation, in
 order for all nodes to be reachable, it is necessary that each partition of the stub network have its own prefix. When
 such a partition occurs, the stub routers must detect that it has occurred. If a stub router is currently providing a
 prefix on the stub network, it need take no action. If a stub router had not been providing a prefix on the stub network,
 and now discovers that there is no stub router providing a prefix on the network, it MUST begin to provide its own prefix
 on the stub network. It MUST also advertise reachability to that new prefix on its adjacent infrastructure link(s).<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">

 When partitions of this type occur, they may also heal. When a partition heals in a situation where two stub routers have
 both been advertising a prefix, it will now appear that there are two prefixes on the stub network. Since partition events
 may represent a recurring situation, stub routers SHOULD wait for at least PARTITION_HEAL_WAIT_TIME before deprecating one
 of these prefixes.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">

 When the time comes to deprecate one or more prefixes as a result of a network partition healing, only one prefix should
 remain. If there are any GUA prefixes, and if there is no specific configuration contradicting this, the GUA prefix that is
 numerically lowest should be kept, and all others deprecated. If there are no GUA prefixes, then the ULA prefix that is
 numerically lowest should be kept, and the others deprecated. By using this approach, it is not necessary for the routers to
 coordinate in advance.<a href="#section-5-3" class="pilcrow">¶</a></p>
</section>
<section id="section-6">
      <h2 id="name-support-for-non-adjacent-li">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-support-for-non-adjacent-li" class="section-name selfRef">Support for non-adjacent links</a>
      </h2>
<p id="section-6-1">
 There are two ways that connectivity to non-adjacent links can be established. The first is that if the infrastructure
 network as a whole has a working IPv4 routing fabric, NAT64 can be used to enable hosts on the stub network to establish
 communications with hosts on non-adjacent links, including the Internet. In some cases, this is all that is needed.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">
 However, if it will be necessary for nodes on non-adjacent networks to establish communications with nodes on the stub
 network, this will require a working IPv6 routing fabric connecting the stub network to any non-adjacent links from which
 communications will need to be established.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">
 In order for such routing to work, the stub network will also need to acquire a prefix that the infrastructure network is
 aware of and can route to. The ULA prefix that can work for communicating to adjacent infrastructure links will not work for
 communicating to non-adjacent links.<a href="#section-6-3" class="pilcrow">¶</a></p>
<section id="section-6.1">
        <h3 id="name-acquiring-an-off-stub-netwo">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-acquiring-an-off-stub-netwo" class="section-name selfRef">Acquiring an off-stub-network-routable prefix for the stub network</a>
        </h3>
<p id="section-6.1-1">
   A prefix may be acquired by using DHCPv6 Prefix Delegation
   (<span>[<a href="#RFC8415" class="xref">RFC8415</a>], <a href="https://rfc-editor.org/rfc/rfc8415#section-6.3" class="relref">Section 6.3</a></span>). The stub router then advertises this prefix as the
   on-link prefix for the stub network, as before. It also advertises reachability to this prefix using router
   advertisements, as before.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">
   In the case where there is more than one stub router, it would be best if only one stub router requested a delegated
   prefix. This can be managed through the mechanism described earlier: the stub router only acquires a prefix to advertise
   when it has decided that it needs to advertise a prefix, and so in most cases only one stub router at a time will request
   a delegated prefix.<a href="#section-6.1-2" class="pilcrow">¶</a></p>
<p id="section-6.1-3">
   In order to avoid excessive consumption of delegated prefixes, stub routers connected to stub networks that support
   multiple stub routers SHOULD request short lifetimes for delegated prefixes and renew frequently. Stub routers SHOULD
   request a lifetime of PREFIX_DELEGATION_INTERVAL. Stub routers SHOULD record the time that a prefix was acquired in stable
   storage, and SHOULD release the prefix using a "DHCP Release" transaction when shutting down, or when it determines that a
   prefix is no longer needed (See "graceful shutdown" in Figure 9 of <span>[<a href="#RFC8415" class="xref">RFC8415</a>]</span> for details). Stub routers
   SHOULD release any remembered still-valid prefix after reboot, if after rebooting it is discovered that another prefix is
   being advertised on the stub network.<a href="#section-6.1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-6.2">
        <h3 id="name-arranging-for-routing-to-a-">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-arranging-for-routing-to-a-" class="section-name selfRef">Arranging for routing to a stub network's off-stub-network routable prefix</a>
        </h3>
<p id="section-6.2-1">
   We can assume that a side effect of the prefix delegation process will be to establish routing to the stub router that
   requested the prefix. This should mean that any node that wishes to establish communication with a node on the stub
   network will be able to do so through the delegating router that provides the prefix or, if it is attached to an
   infrastructure link that is adjacent to the stub router, through the stub router itself by means of the router
   advertisement it is providing.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">
   The case of multiple stub routers is more complicated however. Any routing that comes as a side-effect of DHCPv6 Prefix
   Delegation will only route through the stub router that acquired the prefix. Other stub routers can provide reachability
   on their respective adjacent infrastructure links, but reachability across the full routing fabric of the infrastructure
   network will only be possible if there is some routing protocol present on the infrastructure network. Addressing this
   problem is out of scope for this document.<a href="#section-6.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-6.3">
        <h3 id="name-making-service-advertisemen">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-making-service-advertisemen" class="section-name selfRef">Making service advertisements available on non-adjacent infrastructure</a>
        </h3>
<p id="section-6.3-1">

   In order for service advertisements to be available on non-adjacent infrastructure, the infrastructure must provide SRP
   service for constrained stub networks, and must advertise the availability of such service so that stub routers can
   forward SRP updates to that SRP service, rather than providing SRP as a local service. This SRP service can be discovered
   using DNS-SD, using the _dnssd-srp-tls service type. If the stub network requires UDP-based SRP rather than tls-based SRP,
   the stub router MUST act as a proxy to deliver SRP updates over the tcp+tls transport.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<p id="section-6.3-2">

   For stub networks that use multicast DNS, stub routers must provide a discovery proxy service, and most advertise that
   service to the infrastructure. In turn, the infrastructure must configure that service to be discoverable by devices on
   the infrastructure, as described in <span>[<a href="#RFC8766" class="xref">RFC8766</a>], <a href="https://rfc-editor.org/rfc/rfc8766#section-6" class="relref">Section 6</a></span>.<a href="#section-6.3-2" class="pilcrow">¶</a></p>
</section>
<section id="section-6.4">
        <h3 id="name-making-service-advertisement">
<a href="#section-6.4" class="section-number selfRef">6.4. </a><a href="#name-making-service-advertisement" class="section-name selfRef">Making service advertisements available on the internet</a>
        </h3>
<p id="section-6.4-1">

   The mechanism described previously for making service advertisements available to non-adjacent infrastructure also scales
   to the internet, since it uses DNS. Indeed, the question an operator should ask before enabling such discovery is, do they
   want their stub network devices to be discoverable on the internet. If it becomes possible to configure service
   advertising automatically, behavior similar to that specified in
   <span>[<a href="#RFC6092" class="xref">RFC6092</a>], <a href="https://rfc-editor.org/rfc/rfc6092#section-3.2" class="relref">Section 3.2</a></span> and 3.3, would be advised: do not automatically advertise
   stub network devices on the Internet.<a href="#section-6.4-1" class="pilcrow">¶</a></p>
</section>
<section id="section-6.5">
        <h3 id="name-distinction-between-non-adj">
<a href="#section-6.5" class="section-number selfRef">6.5. </a><a href="#name-distinction-between-non-adj" class="section-name selfRef">Distinction between non-adjacent infrastructure and global internet connectivity</a>
        </h3>
<p id="section-6.5-1">

   Stub routers may be mobile, or fixed. That is, they may move from location to location along with some or all of their
   connected devices, attaching to whatever infrastructure is available. Or they may be fixed devices that are only ever
   expected to exist in one particular location.<a href="#section-6.5-1" class="pilcrow">¶</a></p>
<p id="section-6.5-2">

   For devices that are intended to be in a fixed location, the distinction between infrastructure links and the internet as
   a whole is meaningful; for mobile nodes it most likely is not, unless such a node is only going to ever attach to trusted
   infrastructure as it moves from location to location-not a common scenario.<a href="#section-6.5-2" class="pilcrow">¶</a></p>
<p id="section-6.5-3">

   For fixed links, the infrastructure may be trusted, in which case the distinction between infrastructure and internet can
   be expected to be managed by the infrastructure, and therefore only visible to the stub router in the sense that some
   non-adjacent destinations may be reachable (infrastructure destinations, for example) while others are not.<a href="#section-6.5-3" class="pilcrow">¶</a></p>
<p id="section-6.5-4">

   The reason for mentioning this here is to point out that the stub router can't be expected to manage this interface:
   it is up to the infrastructure network to do so, either implicitly or explicitly. <span>[<a href="#RFC7084" class="xref">RFC7084</a>]</span> provides a set
   of default behaviors for home routers that may be adequate for automatically managing this interface, but further work in
   this area may be warranted.<a href="#section-6.5-4" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-7">
      <h2 id="name-normative-references">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="RFC4861">[RFC4861]</dt>
      <dd>
<span class="refAuthor">Narten, T.</span><span class="refAuthor">, Nordmark, E.</span><span class="refAuthor">, Simpson, W.</span><span class="refAuthor">, and H. Soliman</span>, <span class="refTitle">"Neighbor Discovery for IP version 6 (IPv6)"</span>, <span class="seriesInfo">RFC 4861</span>, <span class="seriesInfo">DOI 10.17487/RFC4861</span>, <time datetime="2007-09" class="refDate">September 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4861">https://www.rfc-editor.org/info/rfc4861</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4193">[RFC4193]</dt>
      <dd>
<span class="refAuthor">Hinden, R.</span><span class="refAuthor"> and B. Haberman</span>, <span class="refTitle">"Unique Local IPv6 Unicast Addresses"</span>, <span class="seriesInfo">RFC 4193</span>, <span class="seriesInfo">DOI 10.17487/RFC4193</span>, <time datetime="2005-10" class="refDate">October 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4193">https://www.rfc-editor.org/info/rfc4193</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6092">[RFC6092]</dt>
      <dd>
<span class="refAuthor">Woodyatt, J., Ed.</span>, <span class="refTitle">"Recommended Simple Security Capabilities in Customer Premises Equipment (CPE) for Providing Residential IPv6 Internet Service"</span>, <span class="seriesInfo">RFC 6092</span>, <span class="seriesInfo">DOI 10.17487/RFC6092</span>, <time datetime="2011-01" class="refDate">January 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6092">https://www.rfc-editor.org/info/rfc6092</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6762">[RFC6762]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span><span class="refAuthor"> and M. Krochmal</span>, <span class="refTitle">"Multicast DNS"</span>, <span class="seriesInfo">RFC 6762</span>, <span class="seriesInfo">DOI 10.17487/RFC6762</span>, <time datetime="2013-02" class="refDate">February 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6762">https://www.rfc-editor.org/info/rfc6762</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6763">[RFC6763]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span><span class="refAuthor"> and M. Krochmal</span>, <span class="refTitle">"DNS-Based Service Discovery"</span>, <span class="seriesInfo">RFC 6763</span>, <span class="seriesInfo">DOI 10.17487/RFC6763</span>, <time datetime="2013-02" class="refDate">February 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6763">https://www.rfc-editor.org/info/rfc6763</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7084">[RFC7084]</dt>
      <dd>
<span class="refAuthor">Singh, H.</span><span class="refAuthor">, Beebee, W.</span><span class="refAuthor">, Donley, C.</span><span class="refAuthor">, and B. Stark</span>, <span class="refTitle">"Basic Requirements for IPv6 Customer Edge Routers"</span>, <span class="seriesInfo">RFC 7084</span>, <span class="seriesInfo">DOI 10.17487/RFC7084</span>, <time datetime="2013-11" class="refDate">November 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7084">https://www.rfc-editor.org/info/rfc7084</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8415">[RFC8415]</dt>
      <dd>
<span class="refAuthor">Mrugalski, T.</span><span class="refAuthor">, Siodelski, M.</span><span class="refAuthor">, Volz, B.</span><span class="refAuthor">, Yourtchenko, A.</span><span class="refAuthor">, Richardson, M.</span><span class="refAuthor">, Jiang, S.</span><span class="refAuthor">, Lemon, T.</span><span class="refAuthor">, and T. Winters</span>, <span class="refTitle">"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"</span>, <span class="seriesInfo">RFC 8415</span>, <span class="seriesInfo">DOI 10.17487/RFC8415</span>, <time datetime="2018-11" class="refDate">November 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8415">https://www.rfc-editor.org/info/rfc8415</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8766">[RFC8766]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span>, <span class="refTitle">"Discovery Proxy for Multicast DNS-Based Service Discovery"</span>, <span class="seriesInfo">RFC 8766</span>, <span class="seriesInfo">DOI 10.17487/RFC8766</span>, <time datetime="2020-06" class="refDate">June 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8766">https://www.rfc-editor.org/info/rfc8766</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-dnssd-srp">[I-D.ietf-dnssd-srp]</dt>
      <dd>
<span class="refAuthor">Lemon, T.</span><span class="refAuthor"> and S. Cheshire</span>, <span class="refTitle">"Service Registration Protocol for DNS-Based Service Discovery"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-dnssd-srp-09</span>, <time datetime="2021-01-11" class="refDate">11 January 2021</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-dnssd-srp-09">https://tools.ietf.org/html/draft-ietf-dnssd-srp-09</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.sctl-advertising-proxy">[I-D.sctl-advertising-proxy]</dt>
    <dd>
<span class="refAuthor">Cheshire, S.</span><span class="refAuthor"> and T. Lemon</span>, <span class="refTitle">"Advertising Proxy for DNS-SD Service Registration Protocol"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-sctl-advertising-proxy-00</span>, <time datetime="2020-07-13" class="refDate">13 July 2020</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-sctl-advertising-proxy-00">https://tools.ietf.org/html/draft-sctl-advertising-proxy-00</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="authors-addresses">
<section id="section-appendix.a">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ted Lemon</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">One Apple Park Way</span></div>
<div dir="auto" class="left">
<span class="locality">Cupertino</span>, <span class="region">California</span> <span class="postal-code">95014</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mellon@fugue.com" class="email">mellon@fugue.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
