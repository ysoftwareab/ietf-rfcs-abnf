



Network Work group                                        P. Psenak, Ed.
Internet-Draft                                            N. Nainar, Ed.
Intended status: Standards Track                             I. Wijnands
Expires: May 3, 2018                                 Cisco Systems, Inc.
                                                        October 30, 2017


                       OSPFv3 Extensions for BIER
                 draft-psenak-bier-ospfv3-extensions-00

Abstract

   Bit Index Explicit Replication (BIER) is an architecture that
   provides optimal multicast forwarding through a "BIER domain" without
   requiring intermediate routers to maintain any multicast related per-
   flow state.  BIER also does not require any explicit tree-building
   protocol for its operation.  A multicast data packet enters a BIER
   domain at a "Bit-Forwarding Ingress Router" (BFIR), and leaves the
   BIER domain at one or more "Bit-Forwarding Egress Routers" (BFERs).
   The BFIR router adds a BIER header to the packet.  The BIER header
   contains a bit-string in which each bit represents exactly one BFER
   to forward the packet to.  The set of BFERs to which the multicast
   packet needs to be forwarded is expressed by setting the bits that
   correspond to those routers in the BIER header.

   This document describes the OSPFv3 protocol extensions required for
   BIER.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on May 3, 2018.







Psenak, et al.             Expires May 3, 2018                  [Page 1]

Internet-Draft         OSPFv3 Extensions for BIER           October 2017


Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Conventions used in this document . . . . . . . . . . . . . .   3
     2.1.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   3
     2.2.  Requirements notation . . . . . . . . . . . . . . . . . .   3
   3.  Flooding of BIER information in OSPFv3  . . . . . . . . . . .   3
     3.1.  BIER Sub-TLV  . . . . . . . . . . . . . . . . . . . . . .   4
     3.2.  BIER MPLS Encapsulation Sub-TLV . . . . . . . . . . . . .   5
     3.3.  Flooding scope of BIER Information  . . . . . . . . . . .   7
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   7
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   7
   6.  Acknowledgement . . . . . . . . . . . . . . . . . . . . . . .   8
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   8
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   8
     7.2.  Informative References  . . . . . . . . . . . . . . . . .   8
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   8

1.  Introduction

   [I-D.ietf-bier-architecture] introduces and explains BIER
   architecture that provides optimal multicast forwarding through a
   "BIER domain" without requiring intermediate routers to maintain any
   multicast related per-flow state.  BIER also does not require any
   explicit tree-building protocol for its operation.  A multicast data
   packet enters a BIER domain at a "Bit-Forwarding Ingress Router"
   (BFIR), and leaves the BIER domain at one or more "Bit-Forwarding
   Egress Routers" (BFERs).  The BFIR router adds a BIER header to the
   packet.  The BIER header contains a bit-string in which each bit
   represents exactly one BFER to forward the packet to.  The set of
   BFERs to which the multicast packet needs to be forwarded is
   expressed by setting the bits that correspond to those routers in the
   BIER header.



Psenak, et al.             Expires May 3, 2018                  [Page 2]

Internet-Draft         OSPFv3 Extensions for BIER           October 2017


   BIER architecture requires the distribution of BIER specific
   information among the routers participating within a BIER domain.
   BIER architecture permits link-state routing protocol to perform the
   distribution of such information.
   [I-D.ietf-bier-ospf-bier-extensions] proposes the OSPFv2 protocol
   extensions to distribute BIER specific information.  This document
   describes the OSPFv3 protocol extensions required to advertise BIER
   specific information.

2.  Conventions used in this document

2.1.  Terminology

   BFER - Bit Forwarding Egress Router

   BFIR - Bit Forwarding Ingress Router

   BFR - Bit-Forwarding Router

   BIER - Bit Index Explicit Replication

   ECMP - Equal Cost Multi-Path

   SI - Set Identifier

2.2.  Requirements notation

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

3.  Flooding of BIER information in OSPFv3

   All BIER specific information that a Bit-Forwarding Router (BFR)
   needs to advertise to other BFRs is associated with a BFR-Prefix.  A
   BFR prefix is a unique (within a given BIER domain) routable IPv4 or
   IPv6 address that is assigned to each BFR as described in more detail
   in [I-D.ietf-bier-architecture].

   [I-D.ietf-ospf-ospfv3-lsa-extend] defines the encoding of OSPFv3 LSA
   in TLV format that allows to carry additional informations.  This
   section defines the required Sub-TLVs to carry BIER information that
   is associated with the BFR-Prefix.  The Sub-TLV defined in this
   section MAY be carried in the below OSPFv3 Extended LSA TLVs
   [I-D.ietf-ospf-ospfv3-lsa-extend]:

      Intra-Area-Prefix TLV




Psenak, et al.             Expires May 3, 2018                  [Page 3]

Internet-Draft         OSPFv3 Extensions for BIER           October 2017


      Inter-Area-Prefix TLV

3.1.  BIER Sub-TLV

   A Sub-TLV of the above mentioned Prefix TLVs is defined for
   distributing BIER information.  The Sub-TLV is called the BIER Sub-
   TLV.  Multiple BIER Sub-TLVs MAY be included in any of the above
   mentioned Prefix TLV.

   The BIER Sub-TLV has the following format:


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |              Type             |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Sub-domain-ID |      BAR      |              BFR-id           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |C|  Flags      |                   Reserved                    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Sub-TLVs (variable)                      |
      +-                                                             -+
      |                                                               |


   Type

      Set to TBD1

   Length

      Variable, dependent on sub-TLVs.

   Sub-domain-ID

      Unique value identifying the BIER sub-domain within the BIER
      domain, as described in [I-D.ietf-bier-architecture]

   BAR

      Single octet BIER Algorithm. 0 is the only supported value defined
      in this document and represents Shortest Path First (SPF)
      algorithm based on IGP link metric.  This is the standard shortest
      path algorithm as computed by the OSPF protocol.  Other values may
      be defined in the future.

   BFR-id



Psenak, et al.             Expires May 3, 2018                  [Page 4]

Internet-Draft         OSPFv3 Extensions for BIER           October 2017


      A 2 octet field encoding the BFR-id, as documented in
      [I-D.ietf-bier-architecture].  If the BFR is not locally
      configured with a valid BFR-id, the value of this field is set to
      invalid BFR-id per [[I-D.ietf-bier-architecture].

   Flags

      The C flag (BSL Conversion flag) is set to 1 if the node is
      capable of imposing a different BSL than the one it received in a
      BIER encapsulated packet.  More details about the usage of this
      conversion is discussed in Section 2.3 of
      [I-D.ietf-bier-ospf-bier-extensions].  Other flags MUST be set to
      0 and receiver MUST ignore the other flags.  New flags may be
      defined in future.

   If a BFR advertises the same Sub-domain-ID in multiple BIER sub-TLVs,
   the BRF MUST be treated as if it did not advertise a BIER sub-TLV for
   such sub-domain.

   All BFRs MUST detect advertisement of duplicate valid BFR-IDs for a
   given Sub-domain-ID.  When such duplication is detected all BFRs
   advertising duplicates MUST be treated as if they did not advertise a
   valid BFR-id.

   The supported algorithm MUST be consistent for all routers supporting
   a given BFR sub-domain.  A router receiving BIER Sub-TLV
   advertisement with a BAR which does not match the locally configured
   value MUST report a misconfiguration for the given BIER sub-domain
   and MUST ignore such BIER sub-TLV.

3.2.  BIER MPLS Encapsulation Sub-TLV

   The BIER MPLS Encapsulation Sub-TLV is a Sub-TLV of the BIER Sub-TLV
   defined in Section 3.1.  This Sub-TLV is used to carry MPLS
   encapsulation specific information for BIER in MPLS networks.

   The BIER MPLS Encapsulation Sub-TLV has the following format:














Psenak, et al.             Expires May 3, 2018                  [Page 5]

Internet-Draft         OSPFv3 Extensions for BIER           October 2017


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |              Type             |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |Lbl Range Size |                Label Range Base               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |BS Len |                     Reserved                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+



      Type: Set to TBD2.

      Length: 8 octets

      Label Range Size: A 1 octet field encoding the label range size of
      the label range.  It MUST be greater then 0, otherwise the
      advertising router MUST be treated as if it did not advertise a
      BIER sub-TLV.

      Label Range Base: A 3 octet field, where the 20 rightmost bits
      represent the first label in the label range.  The 4 leftmost bits
      MUST be ignored.

      Bit String Length: A 4 bits field encoding the supported BitString
      length associated with this BFR-prefix.  The values allowed in
      this field are specified in section 2 of
      [I-D.ietf-bier-mpls-encapsulation].

      The "label range" is the set of labels beginning with the label
      range base and ending with ((label range base)+(label range size)-
      1).  A unique label range is allocated for each BitStream length
      and Sub-domain-ID.  These labels are used for BIER forwarding as
      described in [I-D.ietf-bier-architecture] and
      [I-D.ietf-bier-mpls-encapsulation].

      The size of the label range is determined by the number of Set
      Identifiers (SI) (section 1 of [I-D.ietf-bier-architecture]) that
      are used in the network.  Each SI maps to a single label in the
      label range.  The first label is for SI=0, the second label is for
      SI=1, etc.

   If same BS length is repeated in multiple BIER MPLS Encapsulation
   Sub-TLV inside the same BIER Sub-TLV, the BIER sub-TLV MUST be
   ignored.





Psenak, et al.             Expires May 3, 2018                  [Page 6]

Internet-Draft         OSPFv3 Extensions for BIER           October 2017


   Label ranges within all BIER MPLS Encapsulation Sub-TLV inside the
   same BIER Sub-TLV MUST NOT overlap.  If the overlap is detected, the
   advertising router MUST be treated as if it did not advertise a BIER
   sub-TLV.

   All advertised labels MUST be valid, otherwise the BIER sub-TLV MUST
   be ignored.

3.3.  Flooding scope of BIER Information

   The BIER Sub-TLV is included as part of OSPFv3 Extended LSAs as
   defined in Section 3.  The flooding scope of the BIER Sub-TLV is
   decided by the flooding scope of the Extended LSA carrying the Sub-
   TLV.  Any OSPFv3 router SHOULD include the local BIER information in
   BIER Sub-TLV and advertise it using Intra-Area-Prefix LSA.

   When an OSPFv3 Area Border Router (ABR) originates E-Inter-Area-
   Prefix-LSA for a Prefix P, it follows the below procedure to
   propagate the BIER information between areas:

   o  Examine if the Prefix P is a BFR-Prefix.  This could be done by
      checking the presence of BIER Sub-TLV in Intra-Area-Prefix-TLV of
      E-Intra-Area-Prefix-LSA for Prefix P.

   o  If the above is TRUE, copy the BIER Sub-TLV to Inter-Area-Prefix
      TLV.

4.  IANA Considerations

   The document requests two new allocations from the OSPFv3 Extended-
   LSA sub-TLV registry as defined in [I-D.ietf-ospf-ospfv3-lsa-extend].

      BIER Sub-TLV: TBD1

      BIER MPLS Encapsulation Sub-TLV: TBD2

5.  Security Considerations

   This document defines additional Sub-TLVs for OSPFv3 Extended-LSAs
   and does not impose any changes in flooding scope or Path
   computation.

   Implementations must assure that any malformed TLVs or Sub-TLVs must
   not result in errors that causes hard OSPFv3 failures.







Psenak, et al.             Expires May 3, 2018                  [Page 7]

Internet-Draft         OSPFv3 Extensions for BIER           October 2017


6.  Acknowledgement

   TBD

7.  References

7.1.  Normative References

   [I-D.ietf-bier-architecture]
              Wijnands, I., Rosen, E., Dolganow, A., Przygienda, T., and
              S. Aldrin, "Multicast using Bit Index Explicit
              Replication", draft-ietf-bier-architecture-08 (work in
              progress), September 2017.

   [I-D.ietf-bier-mpls-encapsulation]
              Wijnands, I., Rosen, E., Dolganow, A., Tantsura, J.,
              Aldrin, S., and I. Meilik, "Encapsulation for Bit Index
              Explicit Replication in MPLS and non-MPLS Networks",
              draft-ietf-bier-mpls-encapsulation-12 (work in progress),
              October 2017.

   [I-D.ietf-ospf-ospfv3-lsa-extend]
              Lindem, A., Roy, A., Goethals, D., Vallem, V., and F.
              Baker, "OSPFv3 LSA Extendibility", draft-ietf-ospf-ospfv3-
              lsa-extend-16 (work in progress), October 2017.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC5340]  Coltun, R., Ferguson, D., Moy, J., and A. Lindem, "OSPF
              for IPv6", RFC 5340, DOI 10.17487/RFC5340, July 2008,
              <https://www.rfc-editor.org/info/rfc5340>.

7.2.  Informative References

   [I-D.ietf-bier-ospf-bier-extensions]
              Psenak, P., Kumar, N., Wijnands, I., Dolganow, A.,
              Przygienda, T., Zhang, Z., and S. Aldrin, "OSPF Extensions
              for BIER", draft-ietf-bier-ospf-bier-extensions-09 (work
              in progress), October 2017.

Authors' Addresses







Psenak, et al.             Expires May 3, 2018                  [Page 8]

Internet-Draft         OSPFv3 Extensions for BIER           October 2017


   Peter Psenak (editor)
   Cisco Systems, Inc.
   Apollo Business Center
   Mlynske nivy 43, Bratislava  821 09
   Slovakia

   Email: ppsenak@cisco.com


   Nagendra Kumar Nainar (editor)
   Cisco Systems, Inc.
   7200 Kit Creek Road
   Research Triangle Park, NC  27709
   US

   Email: naikumar@cisco.com


   IJsbrand Wijnands
   Cisco Systems, Inc.
   De Kleetlaan 6a
   Diegem  1831
   Belgium

   Email: ice@cisco.com


























Psenak, et al.             Expires May 3, 2018                  [Page 9]
