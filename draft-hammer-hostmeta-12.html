<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Web Host Metadata</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Web Host Metadata">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">E. Hammer-Lahav</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Yahoo!</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">June 9, 2010</td></tr>
<tr><td class="header">Expires: December 11, 2010</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Web Host Metadata<br />draft-hammer-hostmeta-12</h1>

<h3>Abstract</h3>

<p>
        This memo describes a method for locating host metadata as well as information about
        individual resources controlled by the host.
      
</p>
<h3>Editorial Note (to be removed by RFC Editor)</h3>

<p>
        Please discuss this draft on the
        <a href='https://www.ietf.org/mailman/listinfo/apps-discuss'>apps-discuss@ietf.org</a>
        mailing list.
      
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on December 11, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Example<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#resource_example">1.1.1.</a>&nbsp;
Processing Resource-Specific Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Notational Conventions<br />
<a href="#anchor4">2.</a>&nbsp;
Obtaining host-meta Documents<br />
<a href="#anchor5">3.</a>&nbsp;
The host-meta Document Format<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Link element">3.1.</a>&nbsp;
The 'Link' Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#template_syntax">3.1.1.</a>&nbsp;
Template Syntax<br />
<a href="#anchor6">4.</a>&nbsp;
Processing host-meta Documents<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.1.</a>&nbsp;
Host-Wide Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">4.2.</a>&nbsp;
Resource-Specific Information<br />
<a href="#Security">5.</a>&nbsp;
Security Considerations<br />
<a href="#anchor9">6.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">6.1.</a>&nbsp;
The 'host-meta' Well-Known URI<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">6.2.</a>&nbsp;
The 'lrdd' Relation Type<br />
<a href="#anchor12">Appendix&nbsp;A.</a>&nbsp;
Acknowledgments<br />
<a href="#anchor13">Appendix&nbsp;B.</a>&nbsp;
Document History<br />
<a href="#rfc.references1">7.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
        Web-based protocols often require the discovery of host policy or metadata, where "host" is
        not a single resource but the entity controlling the collection of resources identified by
        Uniform Resource Identifiers (URI) with a common URI host <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>.
      
</p>
<p>
        While web protocols have a wide range of metadata needs, they often use metadata that is
        concise, has simple syntax requirements, and can benefit from storing their metadata in a
        common location used by other related protocols.
      
</p>
<p>
        Because there is no URI or representation available to describe a host, many of the methods
        used for associating per-resource metadata (such as HTTP headers) are not available. This
        often leads to the overloading of the root HTTP resource (e.g. 'http://example.com/') with
        host metadata that is not specific or relevant to the root resource itself.
      
</p>
<p>
        This memo registers the well-known URI suffix <tt>host-meta</tt> in
        the Well-Known URI Registry established by <a class='info' href='#RFC5785'>[RFC5785]<span> (</span><span class='info'>Nottingham, M. and E. Hammer-Lahav, &ldquo;Defining Well-Known Uniform Resource Identifiers (URIs),&rdquo; April&nbsp;2010.</span><span>)</span></a>, and specifies a
        simple, general-purpose metadata document format for hosts, to be used by multiple
        web-based protocols.
      
</p>
<p>
        In addition, there are times when a host-wide scope for policy or metadata is too
        coarse-grained. host-meta provides two mechanisms for providing resource-specific
        information:

        </p>
<ul class="text">
<li>
            Link Templates - links using a URI template instead of a fixed target URI, providing a
            way to define generic rules for generating resource-specific links by applying the
            individual resource URI to the template.
          
</li>
<li>
            Link-based Resource Descriptor Documents (LRDD, pronounced 'lard') - descriptor
            documents providing resource-specific information, typically information that cannot be
            expressed using link templates. LRDD documents are linked to using link templates
            with the <tt>lrdd</tt> relation type.
          
</li>
</ul><p>
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Example</h3>

<p>
          The following is a simple host-meta document including both host-wide and
          resource-specific information for the 'example.com' host:
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;?xml version='1.0' encoding='UTF-8'?&gt;
  &lt;XRD xmlns='http://docs.oasis-open.org/ns/xri/xrd-1.0'&gt;

    &lt;!-- Host-wide Information --&gt;

    &lt;Property type='http://protocol.example.net/version'&gt;1.0&lt;/Property&gt;

    &lt;Link rel='copyright'
     href='http://example.com/copyright' /&gt;

    &lt;!-- Resource-specific Information --&gt;

    &lt;Link rel='hub'
     template='http://example.com/hub' /&gt;

    &lt;Link rel='lrdd'
     type='application/xrd+xml'
     template='http://example.com/lrdd?uri={uri}' /&gt;

    &lt;Link rel='author'
     template='http://example.com/author?q={uri}' /&gt;

  &lt;/XRD&gt;

</pre></div>
<p>
          The host-wide information which applies to host in its entirety provided by the document
          includes:

          </p>
<ul class="text">
<li>
              A <tt>http://protocol.example.net/version</tt> host property with
              a value of <tt>1.0</tt>.
            
</li>
<li>
              A link to the host's copyright policy (<tt>copyright</tt>).
            
</li>
</ul><p>
        
</p>
<p>
          The resource-specific information provided by the document includes:

          </p>
<ul class="text">
<li>
              A link template for receiving real-time updates (<tt>hub</tt>)
              about individual resources. Since the template does not include a template variable,
              the target URI is identical for all resources.
            
</li>
<li>
              A LRDD document link template (<tt>lrdd</tt>) for obtaining
              additional resource-specific information contained in a separate document for each
              individual resource.
            
</li>
<li>
              A link template for finding information about the author of individual resources
              (<tt>author</tt>).
            
</li>
</ul><p>
        
</p>
<a name="resource_example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1.1"></a><h3>1.1.1.&nbsp;
Processing Resource-Specific Information</h3>

<p>
            When looking for information about the an individual resource, for example, the resource
            identified by 'http://example.com/xy', the resource URI is applied to the
            templates found, producing the following links:
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;Link rel='hub'
   href='http://example.com/hub' /&gt;

  &lt;Link rel='lrdd'
   type='application/xrd+xml'
   href='http://example.com/lrdd?uri=http%3A%2F%2Fexample.com%2Fxy' /&gt;

  &lt;Link rel='author'
   href='http://example.com/author?q=http%3A%2F%2Fexample.com%2Fxy' /&gt;

</pre></div>
<p>
            The LRDD document for 'http://example.com/xy' is obtained using an HTTP
            <tt>GET</tt> request:
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;?xml version='1.0' encoding='UTF-8'?&gt;
  &lt;XRD xmlns='http://docs.oasis-open.org/ns/xri/xrd-1.0'&gt;

    &lt;Subject&gt;http://example.com/xy&lt;/Subject&gt;

    &lt;Property type='http://spec.example.net/color'&gt;red&lt;/Property&gt;

    &lt;Link rel='hub'
     href='http://example.com/another/hub' /&gt;

    &lt;Link rel='author'
     href='http://example.com/john' /&gt;
  &lt;/XRD&gt;

</pre></div>
<p>
            Together, the information available about the individual resource (presented as an XRD
            document for illustration purposes) is:
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;?xml version='1.0' encoding='UTF-8'?&gt;
  &lt;XRD xmlns='http://docs.oasis-open.org/ns/xri/xrd-1.0'&gt;

    &lt;Subject&gt;http://example.com/xy&lt;/Subject&gt;

    &lt;Property type='http://spec.example.net/color'&gt;red&lt;/Property&gt;

    &lt;Link rel='hub'
     href='http://example.com/hub' /&gt;

    &lt;Link rel='hub'
     href='http://example.com/another/hub' /&gt;

    &lt;Link rel='author'
     href='http://example.com/john' /&gt;

    &lt;Link rel='author'
     href='http://example.com/author?q=http%3A%2F%2Fexample.com%2Fxy' /&gt;

  &lt;/XRD&gt;

</pre></div>
<p>
            Note that the order of links matters and is based on their original order in the
            host-meta and LRDD documents. For example, the <tt>hub</tt> link
            obtained from the host-meta link template has a higher priority than the link found in
            the LRDD document because the host-meta link appears before the
            <tt>lrdd</tt> link.
          
</p>
<p>
            On the other hand, the <tt>author</tt> link found in the LRDD document
            has a higher priority than the link found in the host-meta document because it appears
            after the <tt>lrdd</tt> link.
          
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Notational Conventions</h3>

<p>
          The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
          "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in
          <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
        
</p>
<p>
          This document uses the Augmented Backus-Naur Form (ABNF) notation of <a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a>.
          Additionally, the following rules are included from <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>: reserved,
          unreserved, and pct-encoded.
        
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Obtaining host-meta Documents</h3>

<p>
        The client obtains the host-meta document for a given host by making an
        HTTPS <a class='info' href='#RFC2818'>[RFC2818]<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a> GET request to the host's port 443 for the
        <tt>/.well-known/host-meta</tt> path. If the request fails to produce a
        valid host-meta document, the client makes an HTTP <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> GET request
        to the host's port 80 for the <tt>/.well-known/host-meta</tt> path.
      
</p>
<p>
        The server MUST support at least one but SHOULD support both ports. If both ports are
        supported, they MUST serve the same document. The client MAY attempt to obtain the host-meta
        document from either port, SHOULD attempt using port 443 first, and SHOULD attempt the
        other port if the first fails.
      
</p>
<p>
          For example, the following request is used to obtain the host-meta document for the
          'example.com' host:
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  GET /.well-known/host-meta HTTP/1.1
  Host: example.com

</pre></div>
<p>
        If the server response indicates that the host-meta resource is located elsewhere (a 301,
        302, or 307 response status code), the client MUST try to obtain the resource from the
        location provided in the response. This means that the host-meta document for one host
        MAY be retrieved from another host. Likewise, if the resource is not available or does
        not exist (e.g. a 404 or 410 response status codes) at both ports, the client should infer
        that metadata is not available via this mechanism.
      
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
The host-meta Document Format</h3>

<p>
        The host-meta document uses the XRD 1.0 document format as defined by
        <a class='info' href='#OASIS.XRD-1.0'>[OASIS.XRD&#8209;1.0]<span> (</span><span class='info'>Hammer-Lahav, E. and W. Norris, &ldquo;Extensible Resource Descriptor (XRD) Version 1.0 (work in progress),&rdquo; .</span><span>)</span></a>, which provides a simple and extensible XML-based schema
        for describing resources. This memo defines additional processing rules needed to describe
        hosts. Documents MAY include any XRD element not explicitly excluded.
      
</p>
<p>
        The host-meta document root MUST be an <tt>XRD</tt> element. The
        document SHOULD NOT include a <tt>Subject</tt> element, as at this time
        no URI is available to identify hosts. The use of the <tt>Alias</tt>
        element in host-meta is undefined and NOT RECOMMENDED.
      
</p>
<p>
        The subject (or "context resource" as defined by <a class='info' href='#I-D.nottingham-http-link-header'>[I&#8209;D.nottingham&#8209;http&#8209;link&#8209;header]<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; May&nbsp;2010.</span><span>)</span></a>)
        of the XRD <tt>Property</tt> and <tt>Link</tt>
        elements is the host described by the host-meta document. However, the subject of
        <tt>Link</tt> elements with a <tt>template</tt>
        attribute is the individual resource whose URI is applied to the link template as described
        in <a class='info' href='#Link element'>Section&nbsp;3.1<span> (</span><span class='info'>The 'Link' Element</span><span>)</span></a>.
      
</p>
<a name="Link element"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
The 'Link' Element</h3>

<p>
          The XRD <tt>Link</tt> element, when used with the
          <tt>href</tt> attribute, conveys a link relation between the host
          described by the document and a common target URI.
        
</p>
<p>
            For example, the following link declares a common copyright license for the entire
            scope:
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;Link rel='copyright' href='http://example.com/copyright' /&gt;

</pre></div>
<p>
          However, a <tt>Link</tt> element with a
          <tt>template</tt> attribute conveys a relation whose context is an
          individual resource within the host-meta document scope, and whose target is constructed
          by applying the context resource URI to the template. The template string MAY contain a URI
          string without any variables to represent a resource-level relation that is identical for
          every individual resource.
        
</p>
<p>
            For example, a blog with multiple authors can provide information about each article's
            author by providing an endpoint with a parameter set to the URI of each article. Each
            article has a unique author, but all share the same pattern of where that information
            is located:
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;Link rel='author'
   template='http://example.com/author?article={uri}' /&gt;

</pre></div>
<a name="template_syntax"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.1"></a><h3>3.1.1.&nbsp;
Template Syntax</h3>

<p>
            This memo defines a simple template syntax for URI transformation. A template is a
            string containing brace-enclosed ("{}") variable names marking the parts of the string
            that are to be substituted by the corresponding variable values.
          
</p>
<p>
            Before substituting template variables, any value character other than unreserved (as
            defined by <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>) MUST be percent-encoded per
            <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>.
          
</p>
<p>
            This memo defines a single variable - <tt>uri</tt> - as the entire
            context resource URI. Protocols MAY define additional relation-specific variables and
            syntax rules, but SHOULD only do so for protocol-specific relation types, and MUST NOT
            change the meaning of the <tt>uri</tt> variable. If a client is
            unable to successfully process a template (e.g. unknown variable names, unknown or
            incompatible syntax) the parent <tt>Link</tt> element SHOULD be
            ignored.
          
</p>
<p>
              The template syntax ABNF:
            
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  URI-Template =  *( uri-char / variable )
  variable     =  "{" var-name "}"
  uri-char     =  ( reserved / unreserved / pct-encoded )
  var-name     =  %x75.72.69 / ( 1*var-char ) ; "uri" or other names
  var-char     =  ALPHA / DIGIT / "." / "_"

</pre></div>
<p>
              For example:
            
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  Input:    http://example.com/r?f=1
  Template: http://example.org/?q={uri}
  Output:   http://example.org/?q=http%3A%2F%2Fexample.com%2Fr%3Ff%3D1

</pre></div>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Processing host-meta Documents</h3>

<p>
        Once the host-meta document has been obtained, the client processes its content based on
        the type of information desired: host-wide or resource-specific.
      
</p>
<p>
        Clients usually look for a link with a specific relation type or other attributes. In
        such cases, the client does not need to process the entire host-meta document and all
        linked LRDD documents, but instead, process the various documents in their prescribed order
        until the desired information is found.
      
</p>
<p>
        Protocols using host-meta must indicate whether the information they seek is host-wide or
        resource-specific. For example, "obtain the first host-meta resource-specific link using
        the 'author' relation type". If both types are used for the same purpose (e.g. first look
        for resource-specific, then look for host-wide), the protocol must specify the processing
        order.
      
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Host-Wide Information</h3>

<p>
          When looking for host-wide information, the client MUST ignore any
          <tt>Link</tt> elements with a <tt>template</tt>
          attribute, as well as any link using the <tt>lrdd</tt> relation type.
          All other elements are scoped as host-wide.
        
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Resource-Specific Information</h3>

<p>
          Unlike host-wide information which is contained solely within the host-meta document,
          resource-specific information is obtained from host-meta link templates, as well as from
          linked LRDD documents.
        
</p>
<p>
          When looking for resource-specific information, the client constructs a resource
          descriptor by collecting and processing all the host-meta link templates. For each link
          template:

          </p>
<ol class="text">
<li>
              The client applies the URI of the desired resource to the template, producing a
              resource-specific link.
            
</li>
<li>
              If the link's relation type is other than <tt>lrdd</tt>, the
              client adds the link to the resource descriptor in order.
            
</li>
<li>
              If the link's relation type is <tt>lrdd</tt>:

              
<blockquote class="text"><dl>
<dt>3.1</dt>
<dd>
                  The client obtains the LRDD document by following the scheme-specific rules
                  for the LRDD document URI. If the document URI scheme is
                  <tt>http</tt> or <tt>https</tt>, the
                  document is obtained via an HTTP <tt>GET</tt> request to
                  the identified URI. If the HTTP response status code is 301, 302, or 307, the
                  client MUST follow the redirection response and repeat the request with the
                  provided location.
                
</dd>
<dt>3.2</dt>
<dd>
                  The client adds any link found in the LRDD document to the resource
                  descriptor in order, except for any link using the
                  <tt>lrdd</tt> relation type (processing is limited to a single
                  level of inclusion). When adding links, the client
                  SHOULD retain any extension attributes and child elements if present (e.g.
                  &lt;Property&gt; or &lt;Title&gt; elements).
                
</dd>
<dt>3.3</dt>
<dd>
                  The client adds any resource properties found in the LRDD document to the
                  resource descriptor in order (e.g. &lt;Alias&gt; or &lt;Property&gt; child
                  elements of the LRDD document &lt;XRD&gt; root element).
                
</dd>
</dl></blockquote>
            
</li>
</ol><p>
        
</p>
<p>
          A detailed example is provided in <a class='info' href='#resource_example'>Section&nbsp;1.1.1<span> (</span><span class='info'>Processing Resource-Specific Information</span><span>)</span></a>.
        
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>
        The metadata returned by the host-meta resource is presumed to be under the control of the
        appropriate authority and representative of all the resources described by it. If this
        resource is compromised or otherwise under the control of another party, it may represent a
        risk to the security of the server and data served by it, depending on what protocols use it.
      
</p>
<p>
        Protocols using host-meta templates SHOULD evaluate the construction of their templates as
        well as any protocol-specific variables or syntax to ensure that the templates cannot be
        abused by an attacker. For example, a client can be tricked into following a malicious link
        due to a poorly constructed template which produces unexpected results when its variable
        values contain unexpected characters.
      
</p>
<p>
        Protocols MAY restrict document retrieval to HTTPS based on their security needs.
        Protocols utilizing host-meta documents obtained via other methods not described in this
        memo SHOULD consider the security and authority risks associated with such methods.
      
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
The 'host-meta' Well-Known URI</h3>

<p>
          This memo registers the <tt>host-meta</tt> well-known URI in the
          Well-Known URI Registry as defined by <a class='info' href='#RFC5785'>[RFC5785]<span> (</span><span class='info'>Nottingham, M. and E. Hammer-Lahav, &ldquo;Defining Well-Known Uniform Resource Identifiers (URIs),&rdquo; April&nbsp;2010.</span><span>)</span></a>.

          </p>
<blockquote class="text"><dl>
<dt>URI suffix:</dt>
<dd>
              host-meta
            
</dd>
<dt>Change controller:</dt>
<dd>
              IETF
            
</dd>
<dt>Specification document(s):</dt>
<dd>
              [[ this document ]]
            
</dd>
<dt>Related information:</dt>
<dd>
              None
            
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
The 'lrdd' Relation Type</h3>

<p>
          This specification registers the <tt>lrdd</tt> relation type in the
          Link Relation Type Registry defined by <a class='info' href='#I-D.nottingham-http-link-header'>[I&#8209;D.nottingham&#8209;http&#8209;link&#8209;header]<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; May&nbsp;2010.</span><span>)</span></a>:

          </p>
<blockquote class="text"><dl>
<dt>Relation Name:</dt>
<dd>
              lrdd
            
</dd>
<dt>Description:</dt>
<dd>
              <tt>lrdd</tt> (pronounced 'lard') is an acronym for Link-based
              Resource Descriptor Document. It is used by the host-meta document processor to
              locate resource-specific information about individual resources. When used elsewhere
              (e.g. HTTP <tt>Link</tt> header fields or HTML &lt;LINK&gt;
              elements), it operates as an include directive, identifying the location of
              additional links and other metadata. Multiple links with the 'lrdd' relation indicate
              multiple sources to include, not alternative sources of the same information. An
              <tt>application/xrd+xml</tt> representation MUST be available, and
              this media type MAY appear in a link's <tt>type</tt> attribute.
              Additional representations MAY be available (using HTTP content negotiation), in
              which case the link's 'type' attribute SHOULD be omitted.
            
</dd>
<dt>Reference:</dt>
<dd>
              [[ This specification ]]
            
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Acknowledgments</h3>

<p>
        The author would like to acknowledge the contributions of everyone who
        provided feedback and use cases for this memo; in particular, Dirk Balfanz, DeWitt Clinton,
        Blaine Cook, Eve Maler, Breno de Medeiros, Brad Fitzpatrick, James Manger, Will Norris,
        Mark Nottingham, John Panzer, Drummond Reed, and Peter Saint-Andre.
      
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Document History</h3>

<p>
        [[ to be removed by the RFC editor before publication as an RFC ]]
      
</p>
<p>
        -12
        
        </p>
<ul class="text">
<li>
            Clarified use of media type, simplified processing flow.
          
</li>
</ul><p>
      
</p>
<p>
        -11

        </p>
<ul class="text">
<li>
            Editorial clarifications.
          
</li>
</ul><p>
      
</p>
<p>
        -10

        </p>
<ul class="text">
<li>
            Integrated LRDD into the memo, dropping the multiple sources and using only host-meta
            for LRDD processing.
          
</li>
</ul><p>
      
</p>
<p>
        -09

        </p>
<ul class="text">
<li>
            Removed the &lt;hm:Host&gt; element due to lack of use cases (protocols with signature
            requirements can define their own way of declaring the document's subject for this
            purpose).
          
</li>
<li>
            Minor editorial changes.
          
</li>
<li>
            Changed following redirections to MUST.
          
</li>
<li>
            Updated references.
          
</li>
</ul><p>
      
</p>
<p>
        -08

        </p>
<ul class="text">
<li>
            Fixed typo.
          
</li>
</ul><p>
      
</p>
<p>
        -07

        </p>
<ul class="text">
<li>
            Minor editorial clarifications.
          
</li>
<li>
            Added XML schema for host-meta extension.
          
</li>
<li>
            Updated XRD reference to the latest draft (no normative changes).
          
</li>
</ul><p>
      
</p>
<p>
        -06

        </p>
<ul class="text">
<li>
            Updated well-known reference to RFC 5785.
          
</li>
<li>
            Minor editorial changes.
          
</li>
<li>
            Made HTTPS a higher priority (SHOULD) over HTTP.
          
</li>
</ul><p>
      
</p>
<p>
        -05

        </p>
<ul class="text">
<li>
            Adjusted syntax to the latest XRD schema.
          
</li>
<li>
            Added note about using a link template without variables.
          
</li>
</ul><p>
      
</p>
<p>
        -04

        </p>
<ul class="text">
<li>
            Corrected the &lt;hm:Host&gt; example.
          
</li>
</ul><p>
      
</p>
<p>
        -03

        </p>
<ul class="text">
<li>
            Changed scope to an entire host (per RFC 3986).
          
</li>
<li>
            Simplified template syntax to always percent-encode values and vocabulary to a single 'uri' variable.
          
</li>
<li>
            Changed document retrieval to always use HTTP(S).
          
</li>
<li>
            Added security consideration about the use of templates.
          
</li>
<li>
            Explicitly defined the root element to be 'XRD'.
          
</li>
</ul><p>
      
</p>
<p>
        -02

        </p>
<ul class="text">
<li>
            Changed Scope element syntax from attributes to URI-like string value.
          
</li>
</ul><p>
      
</p>
<p>
        -01

        </p>
<ul class="text">
<li>
            Editorial rewrite.
          
</li>
<li>
            Redefined scope as a scheme-authority pair.
          
</li>
<li>
            Added document structure section.
          
</li>
</ul><p>
      
</p>
<p>
        -00

        </p>
<ul class="text">
<li>
            Initial draft.
          
</li>
</ul><p>
      
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.nottingham-http-link-header">[I-D.nottingham-http-link-header]</a></td>
<td class="author-text">Nottingham, M., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-nottingham-http-link-header-10.txt">Web Linking</a>,&rdquo; draft-nottingham-http-link-header-10 (work in progress), May&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-nottingham-http-link-header-10.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="OASIS.XRD-1.0">[OASIS.XRD-1.0]</a></td>
<td class="author-text">Hammer-Lahav, E. and W. Norris, &ldquo;<a href="http://www.oasis-open.org/committees/download.php/37692/xrd-1.0-wd16.html">Extensible Resource Descriptor (XRD) Version 1.0 (work in progress)</a>&rdquo; (<a href="http://www.oasis-open.org/committees/download.php/37692/xrd-1.0-wd16.html">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2818">[RFC2818]</a></td>
<td class="author-text">Rescorla, E., &ldquo;<a href="http://tools.ietf.org/html/rfc2818">HTTP Over TLS</a>,&rdquo; RFC&nbsp;2818, May&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2818.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5234.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5785">[RFC5785]</a></td>
<td class="author-text">Nottingham, M. and E. Hammer-Lahav, &ldquo;<a href="http://tools.ietf.org/html/rfc5785">Defining Well-Known Uniform Resource Identifiers (URIs)</a>,&rdquo; RFC&nbsp;5785, April&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5785.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Eran Hammer-Lahav</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Yahoo!</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:eran@hueniverse.com">eran@hueniverse.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://hueniverse.com">http://hueniverse.com</a></td></tr>
</table>
</body></html>
