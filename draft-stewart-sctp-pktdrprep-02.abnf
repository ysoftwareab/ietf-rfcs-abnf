rtt = (lastsa >> 2) + lastsv) >> 1;

bottle_bw = ntohl(pd.bottle_bw);
on_queue =  ntohl(pd.current_onq);

on_queue = flight_size;
bw_avail = (bottle_bw*rtt)/1000;

partial_bytes_acked = 0;

overrun = on_queue - bw_avail;

cwnd = prev_cwnd

seg_inflight = flight_size / mtu
seg_onqueue = on_queue / mtu
my_portion = (overrun * seg_inflight)/seg_onqueue;

adjust =  cwnd - flight_size;
my_portion = 0;
cwnd = flight_size
cwnd = mtu;
ssthresh = cwnd - 1;

incr = min(((bw_avail - on_queue) >> 2),
                  ((int)asoc.max_burst * (int)mtu));

cwnd = bw_avail;
