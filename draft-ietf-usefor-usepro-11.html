<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Netnews Architecture and Protocols</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Netnews Architecture and Protocols">
<meta name="keywords" content="usefor, Usenet, netnews">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Usenet Format Working Group</td><td class="header">R. Allbery, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Stanford University</td></tr>
<tr><td class="header">Obsoletes: <a href='http://tools.ietf.org/html/rfc1036'>1036</a> (if&nbsp;approved)</td><td class="header">C. Lindsey</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">University of Manchester</td></tr>
<tr><td class="header">Expires: February 23, 2009</td><td class="header">August 22, 2008</td></tr>
</table></td></tr></table>
<h1><br />Netnews Architecture and Protocols<br />draft-ietf-usefor-usepro-11</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on February 23, 2009.</p>

<h3>Abstract</h3>

<p>This document defines the architecture of Netnews systems and
      specifies the correct manipulation and interpretation of Netnews
      articles by software which originates, distributes, stores, and
      displays them.  It also specifies the requirements that must be met
      by any protocol used to transport and serve Netnews articles.
</p>
<h3>Internet Draft Comments</h3>

<p>Comments are solicited and should be addressed to the Usenet
      Format Working Group at ietf-usefor@imc.org.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Basic Concepts<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Scope<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">1.3.</a>&nbsp;
Requirements Notation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">1.4.</a>&nbsp;
Syntax Notation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">1.5.</a>&nbsp;
Definitions<br />
<a href="#transport">2.</a>&nbsp;
Transport<br />
<a href="#anchor7">3.</a>&nbsp;
Duties of Agents<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.1.</a>&nbsp;
General Principles<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#path">3.2.</a>&nbsp;
The Path Header Field<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#path-construct">3.2.1.</a>&nbsp;
Constructing the Path Header Field<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.2.2.</a>&nbsp;
Path Header Field Example<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#history">3.3.</a>&nbsp;
Article History and Duplicate Suppression<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#posting">3.4.</a>&nbsp;
Duties of a Posting Agent<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#proto-article">3.4.1.</a>&nbsp;
Proto-articles<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#multi-injection">3.4.2.</a>&nbsp;
Multiple Injection of Articles<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#followups">3.4.3.</a>&nbsp;
Followups<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#references">3.4.4.</a>&nbsp;
Construction of the References Header Field<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#injecting">3.5.</a>&nbsp;
Duties of an Injecting Agent<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#moderate">3.5.1.</a>&nbsp;
Forwarding Messages to a Moderator<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#relaying">3.6.</a>&nbsp;
Duties of a Relaying Agent<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#serving">3.7.</a>&nbsp;
Duties of a Serving Agent<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reading">3.8.</a>&nbsp;
Duties of a Reading Agent<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#moderator">3.9.</a>&nbsp;
Duties of a Moderator<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#gateway">3.10.</a>&nbsp;
Duties of a Gateway<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#outgoing">3.10.1.</a>&nbsp;
Duties of an Outgoing Gateway<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#incoming">3.10.2.</a>&nbsp;
Duties of an Incoming Gateway<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.10.3.</a>&nbsp;
Gateway Example<br />
<a href="#media">4.</a>&nbsp;
Media Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#transmission">4.1.</a>&nbsp;
application/news-transmission<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#groupinfo">4.2.</a>&nbsp;
application/news-groupinfo<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#checkgroup">4.3.</a>&nbsp;
application/news-checkgroups<br />
<a href="#control">5.</a>&nbsp;
Control Messages<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#control-auth">5.1.</a>&nbsp;
Authentication and Authorization<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">5.2.</a>&nbsp;
Group Control Messages<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#newgroup">5.2.1.</a>&nbsp;
The newgroup Control Message<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rmgroup">5.2.2.</a>&nbsp;
The rmgroup Control Message<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#checkgroups">5.2.3.</a>&nbsp;
The checkgroups Control Message<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#cancel">5.3.</a>&nbsp;
The cancel Control Message<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#supersedes">5.4.</a>&nbsp;
The Supersedes Header Field<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sendme">5.5.</a>&nbsp;
The ihave and sendme Control Messages<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#obs-control">5.6.</a>&nbsp;
Obsolete Control Messages<br />
<a href="#anchor13">6.</a>&nbsp;
Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">6.1.</a>&nbsp;
Compromise of System Integrity<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">6.2.</a>&nbsp;
Denial of Service<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">6.3.</a>&nbsp;
Leakage<br />
<a href="#anchor17">7.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#anchor20">Appendix&nbsp;A.</a>&nbsp;
Changes to the Existing Protocols<br />
<a href="#anchor21">Appendix&nbsp;B.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Basic Concepts</h3>

<p>"Netnews" is a set of protocols for generating, storing and
        retrieving news "articles" whose format is defined in <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a>, and for exchanging them amongst a readership
        that is potentially widely distributed.  It is organized around
        "newsgroups", with the expectation that each reader will be able
        to see all articles posted to each newsgroup in which he
        participates.  These protocols most commonly use a flooding
        algorithm which propagates copies throughout a network of
        participating servers.  Typically, only one copy is stored per
        server, and each server makes it available on demand to readers
        able to access that server.
</p>
<p>"Usenet" is a particular worldwide publicly accessible network
        based on the Netnews protocols.  It is only one such possible
        network; there are deployments of the Netnews protocols other
        than Usenet (such as ones internal to particular organizations).
        This document discusses the more general Netnews architecture and
        protocols.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Scope</h3>

<p>This document defines the architecture of Netnews systems and
        specifies the correct manipulation and interpretation of Netnews
        articles by software which originates, distributes, stores, and
        displays them.  It addresses protocol issues that are independent
        of transport protocols such as NNTP <a class='info' href='#RFC3977'>[RFC3977]<span> (</span><span class='info'>Feather, C., &ldquo;Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a> and
        specifies the requirements Netnews places on those underlying
        transport protocols.  It also specifies the handling of control
        messages.
</p>
<p>The format and syntax of Netnews articles are specified in
        <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a>, which should be read in conjunction with
        this document.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Requirements Notation</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
        NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL"
        in this document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.4"></a><h3>1.4.&nbsp;
Syntax Notation</h3>

<p>Syntax defined in this document uses the Augmented
        Backus-Naur Form (ABNF) notation (including the Core Rules)
        defined in <a class='info' href='#RFC4234'>[RFC4234]<span> (</span><span class='info'>Crocker, D., Ed. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; October&nbsp;2005.</span><span>)</span></a> and constructs defined in
        <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a> and <a class='info' href='#RFC2822'>[RFC2822]<span> (</span><span class='info'>Resnick, P., &ldquo;Internet Message Format,&rdquo; April&nbsp;2001.</span><span>)</span></a>.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.5"></a><h3>1.5.&nbsp;
Definitions</h3>

<p>Any term used in this document that is defined in Section 1.5
        of <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a> is used with the definition given
        there.  In addition, the following terms will be used:
</p>
<p>A "hierarchy" is the set of all newsgroups whose names share a
        first &lt;component> (as defined in Section 3.1.4 of <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a>).  A "sub-hierarchy" is the set of all
        newsgroups whose names share several initial components.
</p>
<p>A "news server" is further distinguished into the roles of
        "injecting agent", "relaying agent", and "serving agent".  An
        "injecting agent" accepts a proto-article with the goal of
        distributing it to relaying and serving agents and hence to
        readers.  A "relaying agent" accepts articles from other relaying
        agents or injecting agents and distributes them to other relaying
        agents or serving agents.  A "serving agent" receives an article
        from a relaying agent or injecting agent and makes it available to
        readers.
</p>
<p>A "user agent" is further distinguished into the roles of
        "posting agent" and "reading agent".  A "posting agent" is
        software which assists in the preparation of a proto-article and
        then passes it to an injecting agent.  A "reading agent" is
        software which retrieves articles from a serving agent for
        presentation to a reader.
</p>
<p>"Injecting" an article is the processing of a proto-article by
        an injecting agent.  Normally this action is done once and only
        once for a given article.  "Multiple injection" is passing the
        same article to multiple injecting agents, either serially or in
        parallel, by one or several posting agents.
</p>
<p>A "gateway" is software which receives news articles and
        converts them to messages of some other kind (such as <a class='info' href='#RFC2822'>[RFC2822]<span> (</span><span class='info'>Resnick, P., &ldquo;Internet Message Format,&rdquo; April&nbsp;2001.</span><span>)</span></a> mail messages), receives messages of some
        other kind and converts them to news articles, or conveys
        articles between two separate Netnews networks.
</p>
<a name="transport"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Transport</h3>

<p>The exact means used to transmit articles from one agent to
      another is not specified.  NNTP <a class='info' href='#RFC3977'>[RFC3977]<span> (</span><span class='info'>Feather, C., &ldquo;Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a> is the
      most common transport mechanism for Netnews networks.  Other
      methods in use include the UUCP protocol <a class='info' href='#RFC0976'>[RFC0976]<span> (</span><span class='info'>Horton, M., &ldquo;UUCP mail interchange format standard,&rdquo; February&nbsp;1986.</span><span>)</span></a>
      (extensively used in the early days of Usenet) and physically
      delivered magnetic and optical media.  Any mechanism may be used
      in conjunction with this protocol provided that it can meet the
      requirements specified here.
</p>
<p>Transports for Netnews articles MUST treat news articles as
      uninterpreted sequences of octets, excluding the values 0 (which may
      not occur in Netnews articles) and 13 and 10 (which MUST only appear
      in Netnews articles as a pair in that order and which together
      denote a line separator).  These octets are the US-ASCII <a class='info' href='#ASCII'>[ASCII]<span> (</span><span class='info'>American National Standard for Information             Systems, &ldquo;Coded Character Sets - 7-Bit American National Standard           Code for Information Interchange (7-Bit ASCII),&rdquo; 1986.</span><span>)</span></a> characters NUL, CR, and LF respectively.
        </p>
<blockquote class="text">
<p>NOTE: This corresponds to the range of octets permitted in
          MIME 8bit data <a class='info' href='#RFC2045'>[RFC2045]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies,&rdquo; November&nbsp;1996.</span><span>)</span></a>.  Transports for
          Netnews are not required to support transmission of MIME binary
          data.
</p>
</blockquote><p>
      
</p>
<p>In particular, transports MUST convey all header fields
      (including header fields within message/rfc822 objects in article
      bodies) unmodified even if they contain octets in the range 128 to
      255.  Furthermore, transports for relaying and serving agents MUST,
      and transports for other agents SHOULD, convey lines even if they
      exceed 998 characters in length, especially in article bodies.
      (This requirement is stricter than MIME 8bit data.)  These
      requirements include the transport paths between posting agents,
      injecting agents, serving agents, and reading agents.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Duties of Agents</h3>

<p>The following section specifies the duties of the agents involved
      in the creation, relaying, and serving of Netnews articles.  This
      protocol is described by following the life of a typical Usenet
      article: it is prepared by a posting agent, given to an injecting
      agent, transferred through one or more relaying agents, accepted by
      a serving agent, and finally retrieved by a reading agent.  Articles
      submitted to moderated groups go through an additional process,
      which is described separately.  Finally, the additional duties and
      requirements of a gateway are discussed.
</p>
<p>At each step, each agent has a set of checks and transformations
      of the article that it is required to perform.  These are described
      as sequences of steps to be followed, but it should be understood
      that it is the effect of these sequences that is important, and
      implementations may use any method that gives rise to the same
      effect.
</p>
<p>Many news servers combine the functions of injecting agent,
      relaying agent, and serving agent in a single software package.  For
      the purposes of this specification, such combined agents should
      conceptually be treated as an injecting agent which sends articles
      to a serving agent and optionally a relaying agent.  The
      requirements of all three agents MUST be still met when the news
      server is performing the functions of those agents.
</p>
<p>Control messages may have additional effects than those described
      below on news servers which accept them.  Those effects are
      described in <a class='info' href='#control'>Section&nbsp;5<span> (</span><span class='info'>Control Messages</span><span>)</span></a>.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
General Principles</h3>

<p>There are two important principles that news implementors and
        administrators need to keep in mind.  The first is the well-known
        Internet Robustness Principle:
          </p>
<blockquote class="text">
<p>Be liberal in what you accept, and conservative in what you
            send.
</p>
</blockquote><p>
        
</p>
<p>As applied to Netnews, this primarily means that unwanted or
        non-compliant articles SHOULD be rejected as early as possible,
        but once they are in general circulation, relaying and serving
        agents may wish to accept them where possible rather than lose
        information.  Posting agents and injecting agents SHOULD therefore
        be maximally strict in their application of both this protocol and
        <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a>, and reading agents SHOULD be robust in
        the presence of violations of the Netnews article format where
        possible.
</p>
<p>In the case of Netnews, there is an even more important
        principle, derived from a much older code of practice, the
        Hippocratic Oath (we may thus call this the Hippocratic
        Principle):
          </p>
<blockquote class="text">
<p>First, do no harm.
</p>
</blockquote><p>
        
</p>
<p>It is vital to realize that decisions which might be merely
        suboptimal in a smaller context can become devastating mistakes
        when amplified by the actions of thousands of hosts within a few
        minutes.
</p>
<p>No Netnews agent is ever required to accept any article.  It
        is common for injecting, relaying, and serving agents to reject
        well-formed articles for reasons of local policy (such as not
        wishing to carry a particular newsgroup or attempting to filter
        out unwanted articles).  This document specifies how articles
        are to be treated if they are accepted and specifies some cases
        where they must be rejected, but an agent MAY always reject any
        article for other reasons than those stated here.
</p>
<p>A primary goal of the Netnews protocol is to ensure that all
        readers receiving a particular article (as uniquely identified by
        the content of its Message-ID header field) see the identical
        article, apart from allowable divergence in trace headers and
        local metadata.  Accordingly, agents (other than moderators) MUST
        NOT modify articles in ways other than described here.
        Unacceptable articles MUST be rejected rather than corrected.
</p>
<a name="path"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
The Path Header Field</h3>

<p>All news server components (injecting agents, relaying agents,
        and serving agents) MUST identify themselves, when processing an
        article, by prepending their &lt;path-identity> (defined in
        Section 3.1.5 of <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a>) to the Path header
        field.  Injecting agents MUST also use the same identity in
        Injection-Info header fields they add, and serving and relaying
        agents SHOULD use the same identity in any Xref header fields they
        add.
</p>
<p>The &lt;path-identity> used by an agent may be chosen via one
        of the following methods (in decreasing order of preference):
          </p>
<ol class="text">
<li>The fully-qualified domain name (FQDN) of the system on
            which the agent is running.
</li>
<li>A fully-qualified domain name (FQDN) within a domain
            affiliated with the administrators of the agent and guaranteed
            to be unique by the administrators of that domain.  For
            example, the uniqueness of server.example.org could be
            guaranteed by the administrator of example.org even if there
            is no DNS record for server.example.org itself.
</li>
<li>Some other (arbitrary) name in the form &lt;path-nodot>
            believed to be unique and registered at least with all the
            other news servers to which that relaying agent or injecting
            agent sends articles.  This option SHOULD NOT be used unless
            the earlier options are unavailable or unless the name is of
            longstanding usage.
</li>
</ol><p>
        
</p>
<p>Some existing implementations treat &lt;path-identity> as
        case-sensitive, some case-insensitive.  The &lt;path-identity>
        therefore SHOULD be all lowercase and implementations SHOULD
        compare identities case-insensitively.
</p>
<a name="path-construct"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
Constructing the Path Header Field</h3>

<p>If a relaying or serving agent receives an article from an
          injecting or serving agent that is part of the same news server,
          it MAY leave the Path header field of the article unchanged.
          Otherwise, every injecting, relaying, or serving agent that
          accepts an article MUST update the Path header field as follows.
          Note that the Path header field content is constructed from
          right to left by prepending elements.
            </p>
<ol class="text">
<li>The agent MUST prepend "!" to the Path header field
              content.
</li>
<li>An injecting agent SHOULD prepend the
              &lt;path-diagnostic> "!.POSTED", optionally followed by "."
              and the FQDN or IP address of the source, to the Path header
              field content.
</li>
<li>A relaying or serving agent SHOULD prepend a
              &lt;path-diagnostic> to the Path header field content, where
              the &lt;path-diagnostic> is chosen as follows:
                
<ul class="text">
<li>If the expected &lt;path-identity> of the source of
                  the article matches the leftmost &lt;path-identity> of
                  the Path header field's content, use "!"
                  (&lt;diag-match>), resulting in two consecutive
                  "!"s.
</li>
<li>If the expected &lt;path-identity> of the source of
                  the article does not match, use "!.MISMATCH." followed
                  by the expected &lt;path-identity> of the source or its
                  IP address.
</li>
<li>If the relaying or serving agent is not willing or
                  able to check the &lt;path-identity>, use "!.SEEN."
                  followed by the FQDN, IP address, or expected
                  &lt;path-identity> of the source.
</li>
</ul>
              Be aware that <a class='info' href='#RFC1036'>[RFC1036]<span> (</span><span class='info'>Horton, M. and R. Adams, &ldquo;Standard for interchange of USENET messages,&rdquo; December&nbsp;1987.</span><span>)</span></a> did not include
              &lt;path-diagnostic>.  Implementations which predate this
              specification will add only single "!" characters between
              &lt;path-identity> strings.
</li>
<li>The agent MAY then prepend to the Path header field
              content "!" or "!!" followed by an additional
              &lt;path-identity> for itself other than its primary one.
              Using "!!", and thereby adding a &lt;diag-match> since the
              &lt;path-identity> clearly is verified, is RECOMMENDED.  This
              step may be repeated any number of times.  This is permitted
              for agents that have multiple &lt;path-identity>s (such as
              during a transition from one to another).  Each of these
              &lt;path-identity>s MUST meet the requirements set out in
              <a class='info' href='#path'>Section&nbsp;3.2<span> (</span><span class='info'>The Path Header Field</span><span>)</span></a>.
</li>
<li>Finally, the agent MUST prepend its primary
              &lt;path-identity> to the Path header field content.  The
              primary &lt;path-identity> is the &lt;path-identity> it
              normally advertises to its peers for their use in generating
              &lt;path-diagnostic>s as described above.
</li>
</ol><p>
          
</p>
<p>Any agent which modifies the Path header field MAY fold it by
          inserting FWS immediately after any &lt;path-identity> or
          &lt;diag-other> it added (see section 3.1.5 of <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a> for allowable locations for FWS).
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2"></a><h3>3.2.2.&nbsp;
Path Header Field Example</h3>

<p>Here is an example of a Path header field created
            following the rules for injecting and relaying
            agents.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
       Path: foo.isp.example!.SEEN.isp.example!!foo-news
         !.MISMATCH.2001:DB:0:0:8:800:200C:417A!bar.isp.example
         !!old.site.example!barbaz!!baz.isp.example
         !.POSTED.dialup123.baz.isp.example!not-for-mail
</pre></div>
<p>This article was injected by baz.isp.example as indicated by
          the &lt;diag-keyword> "POSTED".  The injector has recorded that
          it received the article from dialup123.baz.isp.example.
          "not-for-mail is a common &lt;tail-entry>.
</p>
<p>The article was relayed to the relaying agent known, at least
          to old.site.example, as "barbaz".
</p>
<p>barbaz relayed it to old.site.example, which does not support
          &lt;diag-keyword> and therefore used the old "!" delimiter.
          This indicates that the identity of "barbaz" was not verified
          and may have been forged.
</p>
<p>old.site.example relayed it to a news server using the
          &lt;path-identity> of bar.isp.example and claiming (by using the
          "!!" &lt;path-delimiter>) to have verified that it came from
          old.site.example.
</p>
<p>bar.isp.example relayed it to foo-news which, not being
          convinced that it truly came from bar.isp.example, inserted the
          &lt;diag-keyword> "MISMATCH" and then stated that it received
          the article from the IPv6 address
          [2001:DB8:0:0:8:800:200C:417A].  (This is not to say that
          bar.isp.example was not a correct &lt;path-identity> for that
          source but simply that that identity did not match the
          expectations of foo-news.)
</p>
<p>foo-news then passed the article to foo.isp.example, which
          declined to validate its &lt;path-identity> and instead appended
          the &lt;diag-keyword> "SEEN" to indicate it knows the source of
          the article as isp.example.  This may be either an expected
          &lt;path-identity> or the FQDN of the system from which it
          received the article.  Presumably foo.isp.example is a serving
          agent that then delivered the article to a reading agent.
</p>
<p>baz.isp.example, bar.isp.example, and foo-news folded the
          Path header field.
</p>
<a name="history"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Article History and Duplicate Suppression</h3>

<p>Netnews normally uses a flood-fill algorithm for propagation of
        articles in which each news server offers the articles it accepts
        to multiple peers and each news server may be offered the same
        article from multiple other news servers.  Accordingly, duplicate
        suppression is key; if a news server accepted every article it was
        offered, it may needlessly accept (and then potentially
        retransmit) dozens of copies of every article.
</p>
<p>Relaying and serving agents therefore MUST keep a record of
        articles they have already seen and use that record to reject
        additional offers of the same article.  This record is called the
        "history" file or database.
</p>
<p>Each article is uniquely identified by its message identifier,
        so a relaying or serving agent could satisfy this requirement by
        storing a record of every message identifier that agent has ever
        seen.  Such a history database would grow without bound, however,
        so it is common and permitted to optimize based on the
        Injection-Date or Date header field of an article as follows.  (In
        the following discussion, the "date" of an article is defined to
        be the date represented by its Injection-Date header field if
        present, otherwise its Date header field.)
          </p>
<ul class="text">
<li>Agents MAY select a cutoff interval and reject any article
            with a date farther in the past than that cutoff interval.  If
            this interval is shorter than the time it takes for an article
            to propagate through the network, the agent might reject an
            article it had not yet seen, so it ought not be aggressively
            short.  For Usenet, for example, a cutoff interval of no less
            than seven days is conventional.
</li>
<li>Agents that enforce such a cutoff MAY then drop records of
            articles that had dates older than the cutoff from their
            history databases.  If such an article were offered to the
            agent again, it would be rejected due to the cutoff date, so
            the history record is no longer required to suppress the
            duplicate.
</li>
<li>Alternatively, agents MAY drop history records according to
            the date when the article was first seen by that agent rather
            than the date of the article.  In this case, the history
            retention interval MUST be at least 24 hours longer than the
            cutoff interval to allow for articles dated in the future.
            This interval matches the allowable error in the date of the
            article (see <a class='info' href='#injecting'>Section&nbsp;3.5<span> (</span><span class='info'>Duties of an Injecting Agent</span><span>)</span></a>).
</li>
</ul><p>
        
</p>
<p>These are just two implementation strategies for article
        history, albeit the most common ones.  Relaying and serving agents
        are not required to use these strategies, only to meet the
        requirement of not accepting an article more than once.  However,
        these strategies are safe and widely deployed and implementors are
        encouraged to use one of them, especially if they do not have
        extensive experience with Netnews and the subtle effects of its
        flood-fill algorithm.
</p>
<a name="posting"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Duties of a Posting Agent</h3>

<p>A posting agent is the component of a user agent that assists a
        poster in creating a valid proto-article and forwarding it to an
        injecting agent.
</p>
<p>Posting agents SHOULD ensure that proto-articles they create
        are valid according to <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a> and any other
        applicable policies.  They MUST NOT create any Injection-Info
        header field; this header field may only be added by the injecting
        agent.
</p>
<p>If the proto-article already contains both Message-ID and Date
        header fields, posting agents MAY add an Injection-Date header
        field to that proto-article immediately before passing that
        proto-article to an injection agent.  They SHOULD do so if the
        Date header field (representing the composition time of the
        proto-article) is more than a day in the past at the time of
        injection.  They MUST do so if the proto-article is being
        submitted to more than one injecting agent; see <a class='info' href='#multi-injection'>Section&nbsp;3.4.2<span> (</span><span class='info'>Multiple Injection of Articles</span><span>)</span></a>.
</p>
<p>The Injection-Date header field is new in this revision of the
        Netnews protocol and is designed to allow the Date header field to
        hold the composition date (as recommended in section 3.6.1 of
        <a class='info' href='#RFC2822'>[RFC2822]<span> (</span><span class='info'>Resnick, P., &ldquo;Internet Message Format,&rdquo; April&nbsp;2001.</span><span>)</span></a>), even if the proto-article is not to be
        injected for some time after its composition.  However, note that
        all implementations predating this specification ignore the
        Injection-Date header field and use the Date header field in its
        stead for rejecting articles older than their cutoff (see <a class='info' href='#history'>Section&nbsp;3.3<span> (</span><span class='info'>Article History and Duplicate Suppression</span><span>)</span></a>), and injecting agents predating this
        specification do not add an Injection-Date header.  Articles with
        a Date header field substantially in the past will still be
        rejected by implementations predating this specification,
        regardless of the Injection-Date header field, and hence may
        suffer poorer propagation.
</p>
<p>Contrary to <a class='info' href='#RFC2822'>[RFC2822]<span> (</span><span class='info'>Resnick, P., &ldquo;Internet Message Format,&rdquo; April&nbsp;2001.</span><span>)</span></a>, which implies that the
        mailbox or mailboxes in the From header field should be that of
        the poster or posters, a poster who does not, for whatever
        reason, wish to use his own mailbox MAY use any mailbox ending
        in the top level domain ".invalid" <a class='info' href='#RFC2606'>[RFC2606]<span> (</span><span class='info'>Eastlake, D. and A. Panitz, &ldquo;Reserved Top Level DNS Names,&rdquo; June&nbsp;1999.</span><span>)</span></a>.
</p>
<p>Posting agents meant for use by ordinary posters SHOULD reject
        any attempt to post an article which cancels or Supersedes another
        article of which the poster is not the author or sender.
</p>
<a name="proto-article"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.1"></a><h3>3.4.1.&nbsp;
Proto-articles</h3>

<p>A proto-article is an article in the format used by a posting
          agent for offering to an injecting agent.  It may omit certain
          header fields which can be better-supplied by the injecting
          agent and will not contain header fields that are added by the
          injecting agent.  A proto-article is only for transmission to an
          injecting agent and SHOULD NOT be transmitted to any other
          agent.
</p>
<p>A proto-article has the same format as a normal article
          except that the Injection-Info and Xref header fields MUST NOT
          be present; the Path header field MUST NOT contain a "POSTED"
          &lt;diag-keyword>; and any of the following mandatory header
          fields MAY be omitted: Message-ID, Date, and Path.  In all other
          respects, a proto-article MUST be a valid Netnews article.  In
          particular, the header fields which may be omitted MUST NOT be
          present with invalid content.
</p>
<p>If a posting agent intends to offer the same proto-article to
          multiple injecting agents, the header fields Message-ID, Date,
          and Injection-Date MUST be present and identical in all copies
          of the proto-article.  See <a class='info' href='#multi-injection'>Section&nbsp;3.4.2<span> (</span><span class='info'>Multiple Injection of Articles</span><span>)</span></a>.
</p>
<a name="multi-injection"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.2"></a><h3>3.4.2.&nbsp;
Multiple Injection of Articles</h3>

<p>Under some circumstances (posting to multiple disjoint
          networks, injecting agents with spotty connectivity, or for
          redundancy, for example), a posting agent may wish to offer the
          same article to multiple injecting agents.  In this unusual
          case, the goal is to not create multiple independent articles
          but rather to inject the same article at multiple points and let
          the normal duplicate suppression facility of Netnews (see <a class='info' href='#history'>Section&nbsp;3.3<span> (</span><span class='info'>Article History and Duplicate Suppression</span><span>)</span></a>) ensure that any given agent accepts the
          article only once, even if supposedly disjoint networks have
          unexpected links.
</p>
<p>Whenever possible, multiple injection SHOULD be done by
          offering the same proto-article to multiple injecting agents.
          The posting agent MUST supply the Message-ID, Date, and
          Injection-Date header fields, and the proto-article as offered
          to each injecting agent MUST be identical.
</p>
<p>In some cases, offering the same proto-article to all
          injecting agents may not be possible (such as when gatewaying,
          after the fact, articles found on one Netnews network to
          another, supposedly unconnected one).  In this case, the posting
          agent MUST convert the article back into a proto-article before
          passing it to another injecting agent, but it MUST retain
          unmodified the Message-ID, Date, and Injection-Date header
          fields.  It MUST NOT add an Injection-Date header field if it is
          missing from the existing article.  It MUST remove any Xref
          header field and either rename or remove any Injection-Info
          header field and other trace fields.
            </p>
<blockquote class="text">
<p>NOTE: Multiple injection inherently risks duplicating
              articles.  Multiple injection after the fact, by converting
              an article back to a proto-article and injecting it again,
              additionally risks loops, loss of trace information,
              unintended repeat injection into the same network, and other
              problems.  It should be done with care and only when there
              is no alternative.  The requirement to retain Message-ID,
              Date, and Injection-Date header fields minimizes the
              possibility of a loop and ensures that the newly injected
              article is not treated as a new, separate article.
</p>
</blockquote><p>
          
</p>
<p>Multiple injection of an article listing one or more
          moderated newsgroups in its Newsgroups header field SHOULD only
          be done by a moderator and MUST only be done after the
          proto-article has been approved for all moderated groups to
          which it is to be posted and has an Approved header field (see
          <a class='info' href='#moderator'>Section&nbsp;3.9<span> (</span><span class='info'>Duties of a Moderator</span><span>)</span></a>).  Multiple injection of an
          unapproved article intended for moderated newsgroups will
          normally only result in the moderator receiving multiple copies,
          and if the newsgroup status is not consistent across all
          injecting agents, may result in duplication of the article or
          other problems.
</p>
<a name="followups"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.3"></a><h3>3.4.3.&nbsp;
Followups</h3>

<p>A followup is an article that contains a response to the
          contents of an earlier article, its precursor.  In addition to
          its normal duties, a posting agent preparing a followup is
          also subject to the following requirements.  Wherever in the
          following it is stated that by default a header field is said
          to be inherited from one of those header fields in the
          precursor, it means that its initial content is to be a copy
          of the content of that precursor header field (with changes in
          folding permitted).  However, posters MAY then override that
          default before posting.
</p>
<p>Despite the historic practice of some posting agents, the
          Keywords header field SHOULD NOT be inherited by default from
          the precursor article.
</p>
<p>
            </p>
<ol class="text">
<li>If the Followup-To header field of the precursor
              article consists of "poster", the followup MUST NOT be
              posted by default but by default is to be emailed to the
              address given in the precursor's Reply-To or From header
              field following the rules for an email reply <a class='info' href='#RFC2822'>[RFC2822]<span> (</span><span class='info'>Resnick, P., &ldquo;Internet Message Format,&rdquo; April&nbsp;2001.</span><span>)</span></a>.  This action MAY be overridden by the
              poster, in which case the posting agent should continue as
              if the Followup-To header field in the precursor did not
              exist.
</li>
<li>The Newsgroups header field SHOULD by default be
              inherited from the precursor's Followup-To header field if
              present, and otherwise from the precursor's Newsgroups
              header field.
</li>
<li>The Subject header field SHOULD by default be inherited
              from that of the precursor.  The case-sensitive string
              "Re: " (including the space after the colon) MAY be
              prepended to the content of its Subject header field unless
              it already begins with that string.
                
<blockquote class="text">
<p>NOTE: Prepending "Re: " serves no protocol function
                  and hence is not required, but it is widely expected and
                  not doing so would be surprising.
</p>
</blockquote>
              
</li>
<li>The Distribution header field SHOULD by default be
              inherited from the precursor's Distribution header field, if
              present.
</li>
<li>The followup MUST have a References header field
              referring to its precursor constructed in accordance with
              <a class='info' href='#references'>Section&nbsp;3.4.4<span> (</span><span class='info'>Construction of the References Header Field</span><span>)</span></a>.
</li>
</ol><p>
          
</p>
<a name="references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.4"></a><h3>3.4.4.&nbsp;
Construction of the References Header Field</h3>

<p>The following procedure is to be used whenever some previous
          article (the "parent") is to be referred to in the References
          header field of a new article, whether because the new article
          is a followup and the parent is its precursor or for some other
          reason.
</p>
<p>The content of the new article's References header field MUST
          be formed from the content of the parent's References header
          field if present and the content of the Message-ID header field
          of the parent.  If the parent had a References header, FWS as
          defined in <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a> MUST be added between its
          content and the Message-ID header field content.
</p>
<p>If the resulting References header field would, after
          unfolding, exceed 998 characters in length (including its field
          name but not the final CRLF), it MUST be trimmed (and otherwise
          MAY be trimmed).  Trimming means removing any number of message
          identifiers from its content, except that the first message
          identifier and the last two MUST NOT be removed.
</p>
<p>An essential property of the References header field,
          guaranteed by the above procedure and REQUIRED to be maintained
          by any extensions to this protocol, is that an article MUST NOT
          precede one of its parents.
</p>
<a name="injecting"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
Duties of an Injecting Agent</h3>

<p>An injecting agent takes a proto-article from a posting agent
        and either forwards it to a moderator or passes it to a relaying
        or serving agent or agents.  An injecting agent bears the primary
        responsibility for ensuring that any article it injects conforms
        with the rules of the Netnews standards.  The administrator of an
        injecting agent is also expected to bear some responsibility
        towards the rest of the Netnews network to which it is connected
        for the articles the injecting agent accepts.
</p>
<p>Injecting agents, when rejecting articles, are encouraged to
        communicate the reason for rejection to the posting agent using
        whatever facility is provided by the underlying transport.  The
        injecting agent is in a unique position to communicate the reason
        for rejection; relaying agents and serving agents normally have to
        reject messages silently.  The injecting agent therefore bears
        much of the burden of diagnosing broken posting agents or
        communicating policy violations to posters.
</p>
<p>An injecting agent MUST have available a list (possibly empty)
        of moderated groups for which it accepts articles and the
        corresponding submission addresses.  It SHOULD have available a
        list of valid newsgroups to catch articles not posted to a valid
        newsgroup and therefore likely to be silently discarded by
        relaying and serving agents.  Usually, an injecting agent is
        deployed in conjunction with a serving agent and maintains these
        lists based on control messages received by the serving agent.
</p>
<p>An injecting agent processes proto-articles as follows:
          </p>
<ol class="text">
<li>It SHOULD verify that the article is from a trusted source
            (by, for example, relying on the authorization capability of
            the underlying transport used to talk to the posting
            agent).
</li>
<li>It MUST reject any proto-article that does not have the
            proper mandatory header fields for a proto-article; that has
            Injection-Info or Xref header fields; that has a Path header
            field containing the "POSTED" &lt;diag-keyword>; or that is
            not syntactically valid as defined by <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a>.  It SHOULD reject any proto-article which contains a
            header field deprecated for Netnews (see, for example, <a class='info' href='#RFC3798'>[RFC3798]<span> (</span><span class='info'>Hansen, T. and G. Vaudreuil, &ldquo;Message Disposition Notification,&rdquo; May&nbsp;2004.</span><span>)</span></a>).  It MAY reject any proto-article that
            contains trace header fields (e.g., NNTP-Posting-Host)
            indicating that it was already injected by an injecting agent
            that did not add Injection-Info or Injection-Date.
</li>
<li>It SHOULD reject any article whose Injection-Date or Date
            header field is more than 24 hours into the future (and MAY
            use a margin less than 24 hours).  It SHOULD reject any
            article whose Injection-Date header field is too far in the
            past (older than the cutoff interval of a relaying agent the
            injecting agent is using, for example).  It SHOULD similarly
            reject any article whose Date header field is too far in the
            past, since not all news servers support Injection-Date and
            only the injecting agent can provide a useful error message to
            the posting agent.  In either case, this interval SHOULD NOT
            be any shorter than 72 hours into the past.
</li>
<li>It SHOULD reject any proto-article whose Newsgroups header
            field does not contain at least one &lt;newsgroup-name> for a
            valid group, or containing a &lt;newsgroup-name> reserved for
            specific purposes by Section 3.1.4 of <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a>
            unless that specific purpose or local agreement applies to the
            proto-article being processed.  Crossposting to unknown
            newsgroups is not precluded provided that at least one of
            the newsgroups in the Newsgroups header is valid.
</li>
<li>The Message-ID and Date header fields with appropriate
            contents MUST be added when not present in the
            proto-article.
</li>
<li>The injecting agent MUST NOT alter the body of the
            article in any way (including any change of
            Content-Transfer-Encoding).  It MAY add other header fields
            not already provided by the poster, but injecting agents are
            encouraged to use the Injection-Info header for such
            information and to minimize the addition of other headers.  It
            SHOULD NOT alter, delete, or reorder any existing header field
            except the Path header field.  It MUST NOT alter or delete any
            existing Message-ID header field.
</li>
<li>If the Newsgroups header contains one or more moderated
            groups and the proto-article does not contain an Approved
            header field, the injecting agent MUST either forward it to a
            moderator as specified in <a class='info' href='#moderate'>Section&nbsp;3.5.1<span> (</span><span class='info'>Forwarding Messages to a Moderator</span><span>)</span></a> or, if
            that is not possible, reject it.  This forwarding MUST be done
            after adding the Message-ID and Date headers if required, and
            before adding the Injection-Info and Injection-Date
            headers.
</li>
<li>Otherwise, a Path header field with a &lt;tail-entry> MUST
            be added if not already present.
</li>
<li>The injecting agent MUST then update the Path header field
            as described in <a class='info' href='#path-construct'>Section&nbsp;3.2.1<span> (</span><span class='info'>Constructing the Path Header Field</span><span>)</span></a>.
</li>
<li>An Injection-Info header field SHOULD be added identifying
            the source of the article and possibly other trace information
            as described in Section 3.2.8 of <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a>.
</li>
<li>If the proto-article already had an Injection-Date header
            field, it MUST NOT be modified or replaced.  If the
            proto-article had both a Message-ID header field and a Date
            header field, an Injection-Date header field MUST NOT be
            added, since the proto-article may have been multiply injected
            by a posting agent that predates this standard.  Otherwise,
            the injecting agent MUST add an Injection-Date header field
            containing the current date and time.
</li>
<li>Finally, the injecting agent forwards the article to one or
            more relaying agents, and the injection process is
            complete.
</li>
</ol><p>
        
</p>
<a name="moderate"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5.1"></a><h3>3.5.1.&nbsp;
Forwarding Messages to a Moderator</h3>

<p>An injecting agent MUST forward the proto-article to the
          moderator of the leftmost moderated group listed in the
          Newsgroups header field, customarily via email.  There are two
          standard ways in which it may do this:
            </p>
<ol class="text">
<li>The complete proto-article is encapsulated, header
              fields and all, within the email.  This SHOULD be done by
              creating an email message with a Content-Type of
              application/news-transmission with the usage parameter set
              to "moderate".  The body SHOULD NOT contain any content
              other than the message.  This method has the advantage of
              removing any possible conflict between Netnews and email
              header fields and any changes to those fields during
              transport through email.
</li>
<li>The proto-article is sent as an email with the addition
              of any header fields (such as a To header field) required
              for an email.  The existing Message-ID header field SHOULD
              be retained.
</li>
</ol><p>
          
</p>
<p>Although both of these methods have been used in the past and
          the first has clear technical advantages, the second is in more
          common use and many moderators are not prepared to deal with
          messages in the first format.  Accordingly, the first method
          SHOULD NOT be used unless the moderator to which it is being
          forwarded is known to be able to handle this method.
</p>
<p>
            </p>
<blockquote class="text">
<p>NOTE: Deriving the email address of the moderator of a
              group is outside the scope of this document.  It is worth
              mentioning, however, that a common method is to use a
              forwarding service that handles submissions for many
              moderated groups.  For maximum compatibility with existing
              news servers, such forwarding services generally form the
              submission address for a moderated group by replacing each
              "." in the &lt;newsgroup-name> with "-" and then using that
              value as the &lt;local-part> of a &lt;mailbox> formed by
              appending a set domain.
</p>
</blockquote><p>
          
</p>
<p>Forwarding proto-articles to moderators via email is the most
          general method and most common in large Netnews networks such as
          Usenet, but any means of forwarding the article that preserves
          it without injecting it MAY be used.  For example, if the
          injecting agent has access to a database used by the moderator
          to store proto-articles awaiting processing, it may place the
          proto-article directly into that database.  Such methods may be
          more appropriate for smaller Netnews networks.
</p>
<a name="relaying"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.6"></a><h3>3.6.&nbsp;
Duties of a Relaying Agent</h3>

<p>A relaying agent accepts injected articles from injecting and
        other relaying agents and passes them on to relaying or serving
        agents.  To avoid bypass of injecting agent policies and forgery
        of Path and Injector-Info headers, relaying agents SHOULD accept
        articles only from trusted agents.
</p>
<p>An article SHOULD NOT be relayed unless the sending agent has
        been configured to supply and the receiving agent to receive at
        least one of the &lt;newsgroup-name>s in its Newsgroups header
        field and at least one of the &lt;dist-name>s in its Distribution
        header field (if present).  Exceptionally, control messages
        creating or removing newsgroups (newgroup or rmgroup control
        messages, for example) SHOULD be relayed if the affected group
        appears in its Newsgroups header field and both the sending and
        receiving relaying agents are configured to relay a newsgroup of
        that name (whether or not such a newsgroup exists).
</p>
<p>In order to avoid unnecessary relaying attempts, an article
        SHOULD NOT be relayed if the &lt;path-identity> of the receiving
        agent (or some known alias thereof) appears as a
        &lt;path-identity> (excluding within the &lt;tail-entry> or
        following a "POSTED" &lt;diag-keyword>) in its Path header
        field.
</p>
<p>A relaying agent processes an article as follows:
          </p>
<ol class="text">
<li>It MUST reject any article without a Newsgroups header
            field or Message-ID header field, or without either an
            Injection-Date or Date header field.
</li>
<li>It MUST examine the Injection-Date header field or, if
            absent, the Date header field, and reject the article if that
            date is more than 24 hours into the future.  It MAY reject
            articles with dates in the future with a smaller margin than
            24 hours.
</li>
<li>It MUST reject any article that has already been accepted.
            If it implements one of the mechanisms described in <a class='info' href='#history'>Section&nbsp;3.3<span> (</span><span class='info'>Article History and Duplicate Suppression</span><span>)</span></a>, this means that it MUST reject any
            article whose date falls outside the cutoff interval since it
            won't know whether such articles had been accepted previously
            or not.
</li>
<li>It SHOULD reject any article that does not include all the
            mandatory header fields.  It MAY reject any article that
            contains header fields that do not have valid contents.
</li>
<li>It SHOULD reject any article that matches an
            already-received cancel control message or the contents of the
            Supersedes header field of an accepted article, provided that
            the relaying agent chose (on the basis of local site policy)
            to honor that cancel control message or Supersedes header
            field.
</li>
<li>It MAY reject any article without an Approved header field
            posted to a newsgroup known to be moderated.  This practice is
            strongly encouraged but the information necessary to do so is
            not required to be maintained by a relaying agent.
</li>
<li>It MUST update the Path header field as described in <a class='info' href='#path-construct'>Section&nbsp;3.2.1<span> (</span><span class='info'>Constructing the Path Header Field</span><span>)</span></a>.
</li>
<li>It MAY delete any Xref header field already present.  It
            MAY add a new Xref header field for its own use (but recall
            that <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a> permits at most one such
            header field).
</li>
<li>Finally, it passes the article on to other relaying and
            serving agents to which it is configured to send articles.
</li>
</ol><p>
        
</p>
<p>Relaying agents SHOULD, where possible in the underlying
        transport, inform the agent that passed the article to the
        relaying agent if the article was rejected.  Relaying agents MUST
        NOT inform any other external entity of the rejection of an
        article unless that external entity has explicitly requested that
        it be informed of such errors.
</p>
<p>Relaying agents MUST NOT alter, delete, or rearrange any part
        of an article except for the Path and Xref header fields.  They
        MUST NOT modify the body of articles in any way.  If an article is
        not acceptable as-is, the article MUST be rejected rather than
        modified.
</p>
<a name="serving"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.7"></a><h3>3.7.&nbsp;
Duties of a Serving Agent</h3>

<p>A serving agent accepts articles from a relaying agent or
        injecting agent, stores it, and makes it available to reading
        agents.  Articles are normally indexed by newsgroup and
        &lt;article-locator> (Section 3.2.14 of <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a>),
        usually in the form of a decimal number.
</p>
<p>If the serving agent stores articles by newsgroup, control
        messages SHOULD NOT be stored in the newsgroups listed in the
        control message's Newsgroups header field.  Instead, they SHOULD
        be stored in a newsgroup in the hierarchy "control", which is
        reserved for this purpose.  Conventionally, control messages are
        stored in newsgroups named for the type of control message (such
        as "control.cancel" for cancel control messages).
</p>
<p>A serving agent MUST have available a list (possibly empty) of
        moderated groups for which it accepts articles so that it can
        reject unapproved articles posted to moderated groups.  Frequently
        a serving agent is deployed in combination with an injecting agent
        and can use the same list as the injecting agent.
</p>
<p>A serving agent processes articles as follows:
          </p>
<ol class="text">
<li>It MUST reject any article that does not include all the
            mandatory header fields or any article which contains header
            fields that do not have valid contents.
</li>
<li>It MUST examine the Injection-Date header field or, if
            absent, the Date header field, and reject the article if that
            date is more than 24 hours into the future.  It MAY reject
            articles with dates in the future with a smaller margin than
            24 hours.
</li>
<li>It MUST reject any article that has already been accepted.
            If it implements one of the mechanisms described in <a class='info' href='#history'>Section&nbsp;3.3<span> (</span><span class='info'>Article History and Duplicate Suppression</span><span>)</span></a>, this means that it MUST reject any
            article whose date falls outside the cutoff interval since it
            won't know whether such articles had been accepted previously
            or not.
</li>
<li>It SHOULD reject any article that matches an
            already-received and honored cancel message or Supersedes
            header field following the same rules as a relaying agent
            (<a class='info' href='#relaying'>Section&nbsp;3.6<span> (</span><span class='info'>Duties of a Relaying Agent</span><span>)</span></a>).
</li>
<li>It MUST reject any article without an Approved header field
            posted to any newsgroup listed as moderated.
</li>
<li>It MUST update the Path header field as described in <a class='info' href='#path-construct'>Section&nbsp;3.2.1<span> (</span><span class='info'>Constructing the Path Header Field</span><span>)</span></a>.
</li>
<li>It MUST (except when specially configured to preserve the
            &lt;article-locator>s set by the sending site) remove any Xref
            header field from each article.  It then MAY (and usually
            will) add a new Xref header field (but recall that <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a> permits at most one such header field).
</li>
<li>Finally, it stores the article and makes it available for
            reading agents.
</li>
</ol><p>
        
</p>
<p>Serving agents MUST NOT create new newsgroups simply because an
        unrecognized &lt;newsgroup-name> occurs in a Newsgroups header
        field.  Newsgroups are normally created via control messages
        (<a class='info' href='#newgroup'>Section&nbsp;5.2.1<span> (</span><span class='info'>The newgroup Control Message</span><span>)</span></a>).
</p>
<p>Serving agents MUST NOT alter, delete, or rearrange any part of
        an article except for the Path and Xref header fields.  They MUST
        NOT modify the body of the articles in any way.  If an article is
        not acceptable as-is, the article MUST be rejected rather than
        modified.
</p>
<a name="reading"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.8"></a><h3>3.8.&nbsp;
Duties of a Reading Agent</h3>

<p>Since a reading agent is only a passive participant in a
        Netnews network, there are no specific protocol requirements
        placed on it.  See <a class='info' href='#USEAGE'>[USEAGE]<span> (</span><span class='info'>Lindsey, C., &ldquo;Usenet Best Practice,&rdquo; .</span><span>)</span></a> for best-practice
        recommendations.
</p>
<a name="moderator"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.9"></a><h3>3.9.&nbsp;
Duties of a Moderator</h3>

<p>A moderator receives news articles, customarily by email,
        decides whether to approve them and, if so, either passes them to
        an injecting agent or forwards them to further moderators.
</p>
<p>Articles are normally received by the moderator in email either
        encapsulated as an object of Content-Type
        application/news-transmission (or possibly encapsulated but
        without an explicit Content-Type header field), or else directly
        as an email already containing all the header fields appropriate
        for a Netnews article (see <a class='info' href='#moderate'>Section&nbsp;3.5.1<span> (</span><span class='info'>Forwarding Messages to a Moderator</span><span>)</span></a>).
        Moderators who may receive articles via email SHOULD be prepared
        to accept articles in either format.
</p>
<p>There are no protocol restrictions on what criteria are used
        for accepting or rejecting messages or on what modifications a
        moderator may make to a message (both header fields and body)
        before injecting it.  Recommended best practice, however, is to
        make the minimal required changes.  Moderators need to be aware
        that modifications made to articles may invalidate signatures
        created by the poster or previous moderators.  See <a class='info' href='#USEAGE'>[USEAGE]<span> (</span><span class='info'>Lindsey, C., &ldquo;Usenet Best Practice,&rdquo; .</span><span>)</span></a> for further best-practice recommendations.
</p>
<p>Moderators process articles as follows:
          </p>
<ol class="text">
<li>They decide whether to approve or reject a proto-article,
            and if approved, prepare the proto-article for injection.  If
            the proto-article was received as an unencapsulated email
            message, this will require converting it back to a valid
            Netnews proto-article.  If the article is rejected, it is
            normally rejected for all newsgroups to which it was posted
            and nothing further is done.  If it is approved, the moderator
            proceeds with the following steps.
</li>
<li>If the Newsgroups header field contains further moderated
            newsgroups for which approval has not already been given, they
            may either reach some agreement with the other moderators on
            the disposition of the article or, more generally, add an
            indication (identifying both the moderator and the name of the
            newsgroup) that they approve the article and then forward it
            to the moderator of the leftmost unapproved newsgroup.  This
            forwarding SHOULD be done following the procedure in <a class='info' href='#moderate'>Section&nbsp;3.5.1<span> (</span><span class='info'>Forwarding Messages to a Moderator</span><span>)</span></a> and MAY be done by rotating the
            &lt;newsgroup-name>s in the Newsgroups header field so that
            the leftmost unapproved newsgroup is is the leftmost moderated
            newsgroup in that field and then posting it, letting the
            injecting agent do the forwarding.  However, if using this
            mechanism, they MUST first ensure that the article contains no
            Approved header field.
</li>
<li>If the Newsgroups header field contains no further
            unapproved moderated groups, they add an Approved header field
            (see Section 3.2.1 of <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a>) identifying
            the moderator and, insofar as is possible, all the other
            moderators who have approved the article.  The moderator who
            takes this step assumes responsibility for ensuring that the
            article was approved by the moderators of all moderated
            newsgroups to which it was posted.
</li>
<li>Moderators are encouraged to retain the Message-ID header
            field if it is valid, and also retain the Date header field
            unless it appears to be stale (72 hours or more in the past)
            for reasons understood by the moderator (such as delays in the
            moderation process) in which case they MAY substitute the
            current date.  Any Injection-Date, Injection-Info, or Xref
            header fields already present MUST be removed.
</li>
<li>Any Path header field MUST either be removed or truncated
            to only those entries following its "POSTED"
            &lt;diag-keyword>, if any.
</li>
<li>The moderator then passes the article to an injecting
            agent, having first observed all the duties of a posting
            agent.
</li>
</ol><p>
        
</p>
<a name="gateway"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.10"></a><h3>3.10.&nbsp;
Duties of a Gateway</h3>

<p>A gateway transforms an article into the native message format
        of another medium, or translates the messages of another medium
        into news articles, or transforms articles into proto-articles for
        injection into a separate Netnews network.  Encapsulation of a
        news article into a message of MIME type
        application/news-transmission, or the subsequent undoing of that
        encapsulation, is not gatewaying, since it involves no
        transformation of the article.
</p>
<p>There are two basic types of gateway, the outgoing gateway that
        transforms a news article into a different type of message, and
        the incoming gateway that transforms a message from another
        network into a news proto-article and injects it into a Netnews
        network.  These are handled separately below.
</p>
<p>Transformation of an article into another medium stands a very
        high chance of discarding or interfering with the protection
        inherent in the news system against duplicate articles.  The most
        common problem caused by gateways is loops that repeatedly
        reinject previously posted articles.  To prevent this, a gateway
        MUST take precautions against loops, as detailed below.
</p>
<p>The transformations applied to the message SHOULD be as minimal
        as possible while still accomplishing the gatewaying.  Every
        change made by a gateway potentially breaks a property of one of
        the media or loses information, and therefore only those
        transformations made necessary by the differences between the
        media should be applied.
</p>
<p>If bidirectional gatewaying (both an incoming and an outgoing
        gateway) is being set up between Netnews and some other medium,
        the incoming and outgoing gateways SHOULD be coordinated to avoid
        unintended reinjection of gated articles.  Circular gatewaying
        (gatewaying a message into another medium and then back into
        Netnews) SHOULD NOT be done; encapsulation of the article SHOULD
        be used instead where this is necessary.
</p>
<p>Safe bidirectional gatewaying between a mailing list and a
        newsgroup is far easier if the newsgroup is moderated.  Posts to
        the moderated group and submissions to the mailing list can then
        go through a single point that does the necessary gatewaying and
        then sends the message out to both the newsgroup and the mailing
        list at the same time, eliminating most of the possibility of
        loops.  Bidirectional gatewaying between a mailing list and an
        unmoderated newsgroup, in contrast, is difficult to do correctly
        and is far more fragile.  Newsgroups intended to be
        bidirectionally gated to a mailing list SHOULD therefore be
        moderated where possible, even if the moderator is a simple
        gateway and injecting agent that correctly handles crossposting to
        other moderated groups and otherwise passes all traffic.
</p>
<a name="outgoing"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.10.1"></a><h3>3.10.1.&nbsp;
Duties of an Outgoing Gateway</h3>

<p>From the perspective of Netnews, an outgoing gateway is just
          a special type of reading agent.  The exact nature of what the
          outgoing gateway will need to do to articles depends on the
          medium to which the articles are being gated.  The operation of
          the outgoing gateway is subject to additional constraints due to
          the possibility of one or more corresponding incoming gateways
          back from that medium to Netnews, since this raises the danger
          of loops.
</p>
<p>The following practices are encouraged for all outgoing
          gateways, regardless of whether there is known to be a related
          incoming gateway, both as precautionary measures and as a
          guideline to quality of implementation:
            </p>
<ol class="text">
<li>The message identifier of the news article should be
              preserved if at all possible, preferably as or within the
              corresponding unique identifier of the other medium, but if
              not at least as a comment in the message.  This helps
              greatly with preventing loops.
</li>
<li>The Date and Injection-Date of the news article should
              also be preserved if possible, for similar reasons.
</li>
<li>The message should be tagged in some way so as to prevent
              its reinjection into Netnews.  This may be impossible to do
              without knowledge of potential incoming gateways, but it is
              better to try to provide some indication even if not
              successful; at the least, a human-readable indication that
              the article should not be gated back to Netnews can help
              locate a human problem.
</li>
<li>Netnews control messages should not be gated to another
              medium unless they would somehow be meaningful in that
              medium.
</li>
</ol><p>
          
</p>
<a name="incoming"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.10.2"></a><h3>3.10.2.&nbsp;
Duties of an Incoming Gateway</h3>

<p>The incoming gateway has the responsibility of ensuring that
          all of the requirements of this protocol are met by the articles
          that it forms.  In addition to its special duties as a gateway,
          it bears all of the duties and responsibilities of a posting
          agent as well, and additionally has the same responsibility of a
          relaying agent to reject articles that it has already
          gatewayed.
</p>
<p>An incoming gateway MUST NOT gate the same message twice.  It
          may not be possible to ensure this in the face of mangling or
          modification of the message, but at the very least a gateway,
          when given a copy of a message it has already gated identical
          except for trace header fields (like Received in Email or Path
          in Netnews) MUST NOT gate the message again.  An incoming
          gateway SHOULD take precautions against having this rule
          bypassed by modifications of the message that can be
          anticipated.
</p>
<p>News articles prepared by gateways MUST be valid news
          proto-articles (see <a class='info' href='#proto-article'>Section&nbsp;3.4.1<span> (</span><span class='info'>Proto-articles</span><span>)</span></a>).  This
          often requires the gateway to synthesize a conforming article
          from non-conforming input.  The gateway MUST then pass the
          article to an injecting agent, not directly to a relaying
          agent.
</p>
<p>Incoming gateways MUST NOT pass control messages (articles
          containing a Control or Supersedes header field) without
          removing or renaming that header field.  Gateways MAY, however,
          generate cancel control messages for messages they have
          gatewayed.  If a gateway receives a message that it can
          determine is a valid equivalent of a cancel control message in
          the medium it is gatewaying, it SHOULD discard that message
          without gatewaying it, generate a corresponding cancel control
          message of its own, and inject that cancel control message.
            </p>
<blockquote class="text">
<p>NOTE: It is not unheard of for mail-to-news gateways to
              be used to post control messages, but encapsulation should
              be used for these cases instead.  Gateways by their very
              nature are particularly prone to loops.  Spews of normal
              articles are bad enough; spews of control messages with
              special significance to the news system, possibly resulting
              in high processing load or even email sent for every message
              received, are catastrophic.  It is far preferable to
              construct a system specifically for posting control messages
              that can do appropriate consistency checks and
              authentication of the originator of the message.
</p>
</blockquote><p>
          
</p>
<p>If there is a message identifier that fills a role similar to
          that of the Message-ID header field in news, it SHOULD be used
          in the formation of the message identifier of the news article,
          perhaps with transformations required to meet the uniqueness
          requirement of Netnews and with the removal of any comments so
          as to comply with the syntax in Section 3.1.3 of <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a>.  Such transformations SHOULD be designed so
          that two messages with the same identifier generate the same
          Message-ID header field.
            </p>
<blockquote class="text">
<p>NOTE: Message identifiers play a central role in the
              prevention of duplicates, and their correct use by gateways
              will do much to prevent loops.  Netnews does, however,
              require that message identifiers be unique, and therefore
              message identifiers from other media may not be suitable for
              use without modification.  A balance must be struck by the
              gateway between preserving information used to prevent loops
              and generating unique message identifiers.
</p>
</blockquote><p>
          
</p>
<p>Exceptionally, if there are multiple incoming gateways for a
          particular set of messages, each to a different newsgroup(s),
          each one SHOULD generate a message identifier unique to that
          gateway.  Each incoming gateway nonetheless MUST ensure that it
          does not gate the same message twice.
            </p>
<blockquote class="text">
<p>NOTE: Consider the example of two gateways of a given
              mailing list into two separate Usenet newsgroups, both of
              which preserve the email message identifier.  Each newsgroup
              may then receive a portion of the messages (different sites
              seeing different portions).  In these cases, where there is
              no one "official" gateway, some other method of generating
              message identifiers has to be used to avoid collisions.  It
              would obviously be preferable for there to be only one
              gateway which crossposts, but this may not be possible to
              coordinate.
</p>
</blockquote><p>
          
</p>
<p>If no date information is available, the gateway MAY supply a
          Date header field with the gateway's current date.  If only
          partial information is available (such as date but not time),
          this SHOULD be fleshed out to a full Date by adding default
          values rather than discarding this information.  Only in very
          exceptional circumstances should Date information be discarded,
          as it plays an important role in preventing reinjection of old
          messages.
</p>
<p>An incoming gateway MUST add a Sender header field to the
          news article it forms containing the &lt;mailbox> of the
          administrator of the gateway.  Problems with the gateway may be
          reported to this &lt;mailbox>.  The &lt;display-name> portion of
          this &lt;mailbox> SHOULD indicate that the entity responsible
          for injection of the message is a gateway.  If the original
          message already had a Sender header field, it SHOULD be renamed
          so that its contents can be preserved.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.10.3"></a><h3>3.10.3.&nbsp;
Gateway Example</h3>

<p>To illustrate the type of precautions that should be taken
          against loops, here is an example of the measures taken by one
          particular combination of mail-to-news and news-to-mail gateways
          designed to handle bidirectional gatewaying between mailing
          lists and unmoderated groups:
            </p>
<ol class="text">
<li>The news-to-mail gateway preserves the message identifier
              of the news article in the generated email message.  The
              mail-to-news gateway likewise preserves the email message
              identifier provided that it is syntactically valid for
              Netnews.  This allows the news system's built-in suppression
              of duplicates to serve as the first line of defense against
              loops.
</li>
<li>The news-to-mail gateway adds an X-Gateway header field
              to all messages it generates. The mail-to-news gateway
              discards any incoming messages containing this header field.
              This is robust against mailing list managers that replace
              the message identifier, and against any number of email
              hops, provided that the other message header fields are
              preserved.
</li>
<li>The mail-to-news gateway prepends the host name from
              which it received the email message to the content of the
              Path header field.  The news-to-mail gateway refuses to
              gateway any message that contains the list server name in
              its Path header field (including in the tail section).  This
              is robust against any amount of munging of the message
              header fields by the mailing list, provided that the email
              only goes through one hop.
</li>
<li>The mail-to-news gateway is designed never to generate
              bounces to the envelope sender.  Instead, articles that are
              rejected by the news server (for reasons not warranting
              silent discarding of the message) result in a bounce message
              sent to an errors address known not to forward to any
              mailing lists, so that they can be handled by the news
              administrators.
</li>
</ol><p>
          
</p>
<p>These precautions have proven effective in practice at
          preventing loops for this particular application (bidirectional
          gatewaying between mailing lists and locally distributed
          newsgroups where both gateways can be designed together).
          General gatewaying to world-wide newsgroups poses additional
          difficulties; one must be very wary of strange configurations,
          such as a newsgroup gated to a mailing list which is in turn
          gated to a different newsgroup.
</p>
<a name="media"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Media Types</h3>

<p>This document defines several media types, which shall be
      registered with IANA as provided for in <a class='info' href='#RFC4288'>[RFC4288]<span> (</span><span class='info'>Freed, N. and J. Klensin, &ldquo;Media Type Specifications and Registration Procedures,&rdquo; December&nbsp;2005.</span><span>)</span></a>.
</p>
<p>The media type message/news, as previously registered with
      IANA, is hereby declared obsolete.  It was never widely
      implemented, and its default treatment as application/octet-stream
      by agents that did not recognize it was counter-productive.  The
      media type message/rfc822 SHOULD be used in its place.
</p>
<a name="transmission"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
application/news-transmission</h3>

<p>The media type application/news-transmission is intended for
        the encapsulation of complete news articles where the intention is
        that the recipient should then inject them into Netnews.  This
        application type provides one of the methods for mailing articles
        to moderators (see <a class='info' href='#moderate'>Section&nbsp;3.5.1<span> (</span><span class='info'>Forwarding Messages to a Moderator</span><span>)</span></a>) and may be used to
        convey messages to an injecting agent.  This encapsulation removes
        the need to transform an email message into a Netnews
        proto-article and provides a way to send a Netnews article using
        MIME through a transport medium that does not support 8bit
        data.
</p>
<p>The MIME media type definition of
          application/news-transmission is:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   MIME type name:           application
   MIME subtype name:        news-transmission
   Required parameters:      none
   Optional parameters:      One and only one of "usage=moderate",
                             "usage=inject", or "usage=relay".
   Encoding considerations:  A transfer-encoding different from that
                             of the article transmitted MAY be
                             supplied to ensure correct transmission
                             over some 7bit transport medium.
   Security considerations:  A news article may be a control message,
                             which if processed could have effects on
                             the recipient host's system beyond just
                             storage of the article.
   Published specification:  This specification.
   Body part:                A complete proto-article ready for
                             injection into Netnews or an article
                             being relayed to another agent.
</pre></div>
<p>usage=moderate indicates the article is intended for a
        moderator, usage=inject for an injecting agent, and usage=relay
        for a relaying agent.  The entity receiving the article may only
        implement one type of agent, in which case the parameter MAY be
        omitted.
</p>
<p>Contrary to the prior registration of this media type, article
        batches are not permitted as a body part.  Multiple messages or a
        message with multiple application/news-transmission parts may be
        used instead.
</p>
<a name="groupinfo"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
application/news-groupinfo</h3>

<p>The application/news-groupinfo media type is used in
        conjunction with the newgroup control message (see <a class='info' href='#newgroup'>Section&nbsp;5.2.1<span> (</span><span class='info'>The newgroup Control Message</span><span>)</span></a>).  Its body part contains brief information
        about a newsgroup: the newsgroup name, its description, and its
        moderation status.
</p>
<p>The MIME media type definition of
          application/news-groupinfo is:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   MIME type name:           application
   MIME subtype name:        news-groupinfo
   Required parameters:      none
   Optional parameters:      charset, which MUST be a charset
                             registered for use with MIME text types
                             and has the same syntax as the parameter
                             defined for text/plain [RFC2046].
                             Specifies the charset of the body part.
                             If not given, the charset defaults to
                             US-ASCII [ASCII].
   Disposition:              by default, inline
   Encoding considerations:  7bit or 8bit MUST be used to maintain
                             compatibility.
   Security considerations:  None.
   Published specification:  This specification.
</pre></div>
<p>The content of the application/news-groupinfo body
          part is defined as:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      groupinfo-body      = [ newsgroups-tag CRLF ]
                               newsgroups-line CRLF
      newsgroups-tag      = %x46.6F.72 SP %x79.6F.75.72 SP
                               %x6E.65.77.73.67.72.6F.75.70.73 SP
                               %x66.69.6C.65.3A
                               ; case sensitive
                               ; "For your newsgroups file:"
      newsgroups-line     = newsgroup-name
                               [ 1*HTAB newsgroup-description ]
                               [ *WSP moderation-flag ]
      newsgroup-description
                          = eightbit-utext *( *WSP eightbit-utext )
      moderation-flag     = SP "(" %4D.6F.64.65.72.61.74.65.64 ")"
                               ; SPACE + case sensitive "(Moderated)"
      eightbit-utext      = utext / %d127-255
</pre></div>
<p>This unusual format is backward-compatible with the scanning of
        the body of newgroup control messages for descriptions done by
        Netnews implementations that predate this specification.
        Although optional, the &lt;newsgroups-tag> SHOULD be included for
        backward compatibility.
</p>
<p>The &lt;newsgroup-description> MUST NOT contain any occurrence
        of the string "(Moderated)" within it.  Moderated newsgroups MUST
        be marked by appending the case sensitive text "&nbsp;(Moderated)"
        at the end.
</p>
<p>While a charset parameter is defined for this media type, most
        existing software does not understand MIME header fields or
        correctly handle descriptions in a variety of charsets.  Using a
        charset of US-ASCII where possible is therefore RECOMMENDED; if
        not possible, UTF-8 <a class='info' href='#RFC3629'>[RFC3629]<span> (</span><span class='info'>Yergeau, F., &ldquo;UTF-8, a transformation format of ISO 10646,&rdquo; November&nbsp;2003.</span><span>)</span></a> SHOULD be used.
        Regardless of the charset used, the constraints of the above
        grammar MUST be met and the &lt;newsgroup-name> MUST be
        represented in that charset using the same octets as would be used
        with a charset of US-ASCII.
</p>
<a name="checkgroup"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
application/news-checkgroups</h3>

<p>The application/news-checkgroups media type contains a list of
        newsgroups within a hierarchy or hierarchies, including their
        descriptions and moderation status.  It is primarily for use with
        the checkgroups control message (see <a class='info' href='#checkgroups'>Section&nbsp;5.2.3<span> (</span><span class='info'>The checkgroups Control Message</span><span>)</span></a>).
</p>
<p>The MIME media type definition of
          application/news-checkgroups is:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   MIME type name:           application
   MIME subtype name:        news-checkgroups
   Required parameters:      none
   Optional parameters:      charset, which MUST be a charset
                             registered for use with MIME text types
                             and has the same syntax as the parameter
                             defined for text/plain [RFC2046].
                             Specifies the charset of the body part.
                             If not given, the charset defaults to
                             US-ASCII [ASCII].
   Disposition:              by default, inline
   Encoding considerations:  7bit or 8bit MUST be used to maintain
                             compatibility.
   Security considerations:  This media type provides only a means
                             for conveying a list of newsgroups and
                             does not provide any information
                             indicating whether the sender is
                             authorized to state which newsgroups
                             should exist within a hierarchy.  Such
                             authorization must be accomplished by
                             other means.
   Published specification:  This specification.
</pre></div>
<p>The content of the application/news-groupinfo body
          part is defined as:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      checkgroups-body    = *( valid-group CRLF )
      valid-group         = newsgroups-line ; see 4.2
</pre></div>
<p>The same restrictions on charset, &lt;newsgroup-name>, and
        &lt;newsgroup-description> apply for this media type as for
        application/news-groupinfo.
</p>
<p>One application/news-checkgroups message may contain
        information for one or more hierarchies and is considered complete
        for any hierarchy for which it contains a &lt;valid-group>.  In
        other words, an application/news-checkgroups body part consisting
        of:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      example.moderated         A moderated newsgroup (Moderated)
      example.test              An unmoderated test group
</pre></div>
<p>is a statement that the example.* hierarchy contains two
        newsgroups, example.moderated and example.test, and no others.
        This media type therefore MUST NOT be used for conveying partial
        information about a hierarchy; if a group from a given hierarchy
        is present, all groups that exist in that hierarchy MUST be
        listed.
</p>
<a name="control"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Control Messages</h3>

<p>A control message is an article which contains a Control header
      field and thereby indicates that some action should be taken by an
      agent other than distribution and display.  Any article containing a
      Control header field (defined in Section 3.2.3 of <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a>) is a control message.  Additionally, the action
      of an article containing a Supersedes header field is described
      here; while such an article is not a control message, it specifies
      an action similar to the cancel control message.
</p>
<p>The &lt;control-command> of a Control header field comprises a
      &lt;verb>, which indicates the action to be taken, and one or more
      &lt;argument> values, which supply the details.  For some control
      messages, the body of the article is also significant.  Each
      recognized &lt;verb> (the control message type) is described in a
      separate section below.  Agents MAY accept other control message
      types than those specified below, and MUST either ignore or reject
      control messages with unrecognized types.  Syntactic definitions of
      valid &lt;argument> values and restrictions on control message
      bodies are given in the section for each control message type.
</p>
<p>Contrary to <a class='info' href='#RFC1036'>[RFC1036]<span> (</span><span class='info'>Horton, M. and R. Adams, &ldquo;Standard for interchange of USENET messages,&rdquo; December&nbsp;1987.</span><span>)</span></a>, the presence of a Subject
      header field starting with the string "cmsg&nbsp;" MUST NOT cause an
      article to interpreted as a control message.  Agents MAY reject an
      article with no Control header field and such a Subject header field
      as ambiguous.  Likewise, the presence of a &lt;newsgroup-name>
      ending in ".ctl" in the Newsgroups header field or the presence of
      an Also-Control header field MUST NOT cause the article to be
      interpreted as a control message.
</p>
<a name="control-auth"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Authentication and Authorization</h3>

<p>Control messages specify actions above and beyond the normal
        processing of an article and are therefore potential vectors of
        abuse and unauthorized action.  There is, at present, no
        standardized means of authenticating the sender of a control
        message or verifying that the contents of a control message were
        sent by the claimed sender.  There are, however, some
        unstandardized authentication mechanisms in common use.
</p>
<p>Agents acting on control messages SHOULD take steps to
        authenticate control messages before acting on them, as
        determined by local authorization policy.  Whether this is done
        via the use of an unstandardized authentication protocol, by
        comparison with information obtained through another protocol,
        by human review, or by some other means is left unspecified by
        this document.  Further extensions or revisions of this protocol
        are expected to standardize a digital signature mechanism.
</p>
<p>Agents are expected to have their own local authorization
        policies for which control messages will be honored.  No Netnews
        agent is ever required to act on any control message.  The
        following descriptions specify the actions that a control message
        requests, but an agent MAY always decline to act on any given
        control message.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Group Control Messages</h3>

<p>A group control message is any control message type that
        requests some update to the list of newsgroups known to a news
        server.  The standard group control message types are "newgroup",
        "rmgroup", and "checkgroups".
</p>
<p>Before honoring any group control message, an agent MUST check
        the newsgroup or newsgroups affected by that control message and
        decline to create any newsgroups not in conformance with the
        restrictions in Section 3.1.4 of <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a>.
</p>
<p>All of the group control messages MUST have an Approved header
        field (Section 3.2.1 of <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a>).  Group control
        messages without an Approved header field SHOULD NOT be
        honored.
</p>
<p>Group control messages affecting specific groups (newgroup and
        rmgroup control messages, for example) SHOULD include the
        &lt;newsgroup-name> for the group or groups affected in their
        Newsgroups header field.  Other newsgroups MAY be included in the
        Newsgroups header field so that the control message will reach
        more news servers, but due to the special relaying rules for group
        control messages (see <a class='info' href='#relaying'>Section&nbsp;3.6<span> (</span><span class='info'>Duties of a Relaying Agent</span><span>)</span></a>) this is normally
        unnecessary and may be excessive.
</p>
<a name="newgroup"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1"></a><h3>5.2.1.&nbsp;
The newgroup Control Message</h3>

<p>The newgroup control message requests the specified group be
          created or, if already existing, have its moderation status or
          description changed.  The syntax of its Control header field
          is:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      control-command     =/ Newgroup-command
      Newgroup-command    = "newgroup" Newgroup-arguments
      Newgroup-arguments  = 1*WSP newsgroup-name
                               [ 1*WSP newgroup-flag ]
      newgroup-flag       = "moderated"
</pre></div>
<p>If the request is honored, the moderation status of the group
          SHOULD be set in accordance with the presence or absence of the
          &lt;newgroup-flag> "moderated".  "moderated" is the only flag
          defined by this protocol.  Other flags MAY be defined by
          extensions to this protocol and accepted by agents.  If an agent
          does not recognize the &lt;newgroup-flag> of a newgroup control
          message, it SHOULD ignore that control message.
</p>
<p>The body of a newgroup message SHOULD contain an entity of
          type application/news-groupinfo specifying the description of
          the newsgroup, either as the entire body or as an entity within
          a multipart/mixed object <a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a>.  If such an
          entity is present, the moderation status specified therein MUST
          match the moderation status specified by the &lt;newgroup-flag>.
          The body of a newgroup message MAY contain other entities
          (encapsulated in multipart/mixed) that provide additional
          information about the newsgroup or the circumstances of the
          control message.
</p>
<p>In the absence of an application/news-groupinfo entity, a
          news server MAY search the body of the message for the line
          "For your newsgroups file:" and take the following line as a
          &lt;newsgroups-line>.  Prior to the standardization of
          application/news-groupinfo, this was the convention for
          providing a newsgroup description.
</p>
<p>If the request is honored and contains a newsgroup
          description, and if the news server honoring it stores newsgroup
          descriptions, the stored newsgroup description SHOULD be updated
          to the description specified in the control message, even if no
          other property of the group has changed.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1.1"></a><h3>5.2.1.1.&nbsp;
newgroup Control Message Example</h3>

<p>A newgroup control message requesting creation of
              the moderated newsgroup example.admin.info.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      From: "example.* Administrator" &lt;admin@noc.example&gt;
      Newsgroups: example.admin.info
      Date: 27 Feb 2002 12:50:22 +0200
      Subject: cmsg newgroup example.admin.info moderated
      Approved: admin@noc.example
      Control: newgroup example.admin.info moderated
      Message-ID: &lt;ng-example.admin.info-20020227@noc.example&gt;
      MIME-Version: 1.0
      Content-Type: multipart/mixed; boundary="nxtprt"
      Content-Transfer-Encoding: 8bit

      This is a MIME control message.
      --nxtprt
      Content-Type: application/news-groupinfo

      For your newsgroups file:
      example.admin.info      About the example.* groups (Moderated)

      --nxtprt
      Content-Type: text/plain

      A moderated newsgroup for announcements about new newsgroups in
      the example.* hierarchy.

      --nxtprt--
</pre></div>
<a name="rmgroup"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2"></a><h3>5.2.2.&nbsp;
The rmgroup Control Message</h3>

<p>The rmgroup control message requests the specified group be
          removed from a news server's list of valid groups.  The syntax
          of its Control header field is:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      control-command     =/ Rmgroup-command
      Rmgroup-command     = "rmgroup" Rmgroup-arguments
      Rmgroup-arguments   = 1*WSP newsgroup-name
</pre></div>
<p>The body of the control message MAY contain anything, usually
          an explanatory text.
</p>
<a name="checkgroups"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.3"></a><h3>5.2.3.&nbsp;
The checkgroups Control Message</h3>

<p>The checkgroups control message contains a list of all the
          valid groups in a hierarchy with descriptions and moderation
          status.  It requests a news server update its valid newsgroup
          list for that hierarchy to include the groups specified, remove
          any groups not specified, and update group descriptions to match
          those given in the checkgroups control message.  The syntax of
          its Control header field is:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      control-command     =/ Checkgroup-command
      Checkgroup-command  = "checkgroups" Checkgroup-arguments
      Checkgroup-arguments= [ chkscope ] [ chksernr ]
      chkscope            = 1*( 1*WSP ["!"] newsgroup-name )
      chksernr            = 1*WSP "#" 1*DIGIT
</pre></div>
<p>A checkgroups message is interpreted as an exhaustive list of
          the valid groups in all hierarchies or sub-hierarchies with a
          prefix listed in the &lt;chkscope> argument, excluding any
          sub-hierarchy where the &lt;chkscope> argument is prefixed by
          "!".  If no &lt;chkscope> argument is given, it applies to all
          hierarchies for which group statements appear in the body of the
          message.  Since much existing software does not honor the
          &lt;chkscope> argument, the body of the checkgroups control
          message MUST NOT contain group statements for newsgroups outside
          the intended scope and SHOULD contain a correct newsgroup list
          even for sub-hierarchies excluded with "!" &lt;chkscope> terms.
          News servers, however, MUST honor &lt;chkscope> as specified
          here.
</p>
<p>The &lt;chksernr> argument may be any positive integer.  If
          present, it MUST increase with every change to the newsgroup
          list and MUST NOT ever decrease.  If provided, news servers
          SHOULD remember the &lt;chksernr> value of the previous
          checkgroups control message honored for a particular hierarchy
          or sub-hierarchy and decline to honor any subsequent checkgroups
          control message for the same hierarchy or sub-hierarchy with a
          smaller &lt;chksernr> value.
</p>
<p>For example, the following Control header
            field
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      Control: checkgroups de !de.alt #248
</pre></div>
<p>indicates the body of the message will list every
            newsgroup in the de.* hierarchy, excepting the de.alt.*
            sub-hierarchy, and should not be honored if a checkgroups
            control message with a serial number greater than 248 was
            previously honored.
</p>
<p>The body of the message is an entity of type
          application/news-checkgroups.  It SHOULD be declared as such
          with appropriate MIME headers, but news servers SHOULD interpret
          checkgroups messages that lack the appropriate MIME headers as
          if the body were of type application/news-checkgroups for
          backward compatibility.
</p>
<a name="cancel"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
The cancel Control Message</h3>

<p>The cancel control message requests that a target article be
        withdrawn from circulation and access.  The syntax of its Control
        header field is:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      control-command     =/ Cancel-command
      Cancel-command      = "cancel" Cancel-arguments
      Cancel-arguments    = 1*WSP msg-id
</pre></div>
<p>The argument identifies the article to be cancelled by its
        message identifier.  The body of the control message MAY contain
        anything, usually an explanatory text.
</p>
<p>A serving agent that elects to honor a cancel message SHOULD
        make the article unavailable to reading agents (perhaps by
        deleting it completely).  If the cancel control message arrives
        before the article it targets, news servers choosing to honor it
        SHOULD remember the message identifier that was cancelled and
        reject the cancelled article when it arrives.
</p>
<p>To best ensure that it will be relayed to the same news servers
        as the original message, a cancel control message SHOULD have the
        same Newsgroups header field as the message it is cancelling.
</p>
<p>Cancel control messages listing moderated newsgroups in their
        Newsgroups header field MUST contain an Approved header field like
        any other article in a moderated newsgroup.  This means that
        cancels posted to a moderated newsgroup will normally be sent to
        the moderator first for approval.  Outside of moderated
        newsgroups, cancel messages are not required to contain an
        Approved header field.
</p>
<p>Contrary to <a class='info' href='#RFC1036'>[RFC1036]<span> (</span><span class='info'>Horton, M. and R. Adams, &ldquo;Standard for interchange of USENET messages,&rdquo; December&nbsp;1987.</span><span>)</span></a>, cancel control messages
        are not required to contain From and Sender header fields matching
        the target message.  This requirement only encouraged cancel
        issuers to conceal their identity and provided no security.
</p>
<a name="supersedes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
The Supersedes Header Field</h3>

<p>The presence of a Supersedes header field in an article
        requests that the message identifier given in that header field be
        withdrawn in exactly the same manner as if it were the target of a
        cancel control message.  Accordingly, news servers SHOULD use the
        same authentication and authorization checks for deciding whether
        to honor a Supersedes header field as they use for cancel control
        messages.  If the Supersedes header field is honored, the news
        server SHOULD take the same actions as it would take when honoring
        a cancel control message for the given target article.
</p>
<a name="sendme"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
The ihave and sendme Control Messages</h3>

<p>The ihave and sendme control messages implement a predecessor
        of the NNTP <a class='info' href='#RFC3977'>[RFC3977]<span> (</span><span class='info'>Feather, C., &ldquo;Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a> protocol.  They are largely
        obsolete on the Internet but still see use in conjunction with
        some transport protocols such as UUCP.  News servers are not
        required to support them.
</p>
<p>ihave and sendme control messages share similar syntax
          for their Control header fields and bodies:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      control-command     =/ Ihave-command
      Ihave-command       = "ihave" Ihave-arguments
      Ihave-arguments     = 1*WSP *( msg-id 1*WSP ) relayer-name
      control-command     =/ Sendme-command
      Sendme-command      = "sendme" Sendme-arguments
      Sendme-arguments    = Ihave-arguments
      relayer-name        = path-identity  ; see 3.1.5 of [USEFOR]
      ihave-body          = *( msg-id CRLF )
      sendme-body         = ihave-body
</pre></div>
<p>The body of the article consists of a list of &lt;msg-id>s, one
        per line.  The message identifiers SHOULD be put in the body of
        the article, not in the Control header field, but news servers MAY
        recognize and process message identifiers in the Control header
        field for backward compatibility.  Message identifiers MUST NOT be
        put in the Control header field if they are present in the body of
        the control message.
</p>
<p>The ihave message states that the named relaying agent has
        received articles with the specified message identifiers, which
        may be of interest to the relaying agents receiving the ihave
        message.  The sendme message requests that the agent receiving it
        send the articles having the specified message identifiers to the
        named relaying agent.  Contrary to <a class='info' href='#RFC1036'>[RFC1036]<span> (</span><span class='info'>Horton, M. and R. Adams, &ldquo;Standard for interchange of USENET messages,&rdquo; December&nbsp;1987.</span><span>)</span></a>, the
        relayer-name MUST be given as the last argument in the Control
        header field.
</p>
<p>Upon receipt of the sendme message (and a decision to honor
        it), the receiving agent sends the article or articles requested.
        The mechanism for this transmission is unspecified by this
        document and is arranged between the sites involved.
</p>
<p>These control messages are normally sent as point-to-point
        articles between two sites and not then sent on to other sites.
        Newsgroups beginning with "to." are reserved for such
        point-to-point communications and are formed by prepending "to."
        to a &lt;relayer-name> to form a &lt;newsgroup-name>.  Articles
        with such a group in their Newsgroups header fields SHOULD NOT be
        sent to any news server other than the one identified by
        &lt;relayer-name>.
</p>
<a name="obs-control"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6"></a><h3>5.6.&nbsp;
Obsolete Control Messages</h3>

<p>The following control message types are declared obsolete by
        this document and SHOULD NOT be sent or honored:
          </p>
<blockquote class="text">
<p>sendsys<br />

            version<br />

            whogets<br />

            senduuname<br />

</p>
</blockquote><p>
        
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>Netnews is designed for broad dissemination of public messages
      and offers little in the way of security.  What protection Netnews
      has against abuse and impersonation is provided primarily by the
      underlying transport layer.  In large Netnews networks where news
      servers cannot be relied upon to enforce authentication and
      authorization requirements at the transport layer, articles may be
      trivially forged and widely read, and the identities of article
      senders and privacy of articles cannot be assured.
</p>
<p>See Section 5 of <a class='info' href='#USEFOR'>[USEFOR]<span> (</span><span class='info'>Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format,&rdquo; .</span><span>)</span></a> for further security
      considerations related to the format of articles.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Compromise of System Integrity</h3>

<p>Control messages pose a particular security concern since
        acting on unauthorized control messages may cause newsgroups to be
        removed, articles to be deleted, and unwanted newsgroups to be
        created.  Administrators of news servers SHOULD therefore take
        steps to verify the authenticity of control messages as discussed
        in <a class='info' href='#control-auth'>Section&nbsp;5.1<span> (</span><span class='info'>Authentication and Authorization</span><span>)</span></a>.  Articles containing Supersedes
        header fields are effectively cancel control messages and SHOULD
        be subject to the same checks as discussed in <a class='info' href='#supersedes'>Section&nbsp;5.4<span> (</span><span class='info'>The Supersedes Header Field</span><span>)</span></a>.  Currently, many sites are ignoring all
        cancel control messages and Supersedes header fields due to the
        difficulty of authenticating them and their widespread abuse.
</p>
<p>Cancel control messages are not required to have the same
        Newsgroups header field as the messages they are cancelling and,
        since they are sometimes processed before the original message is
        received, it may not be possible to check that they do.  This
        allows a malicious poster to inject a cancel control message for
        an article in a moderated newsgroup without adding an Approved
        header field to the control message, and to hide malicious cancel
        control messages from some reading agents by using a different
        Newsgroups header field so that the cancel control message is not
        accepted by all news servers that accepted the original
        message.
</p>
<p>All agents should be aware that all article content, most
        notably including the content of the Control header field, is
        potentially untrusted and malicious.  Articles may be constructed
        in syntactically invalid ways to attempt to overflow internal
        buffers, violate hidden assumptions, or exploit implementation
        weaknesses.  For example, some news server implementations have
        been successfully attacked via inclusion of Unix shell code in the
        Control header field.  All article contents, and particularly
        control message contents, SHOULD be handled with care and
        rigorously verified before any action is taken on the basis of the
        contents of the article.
</p>
<p>A malicious poster may add an Approved header field to bypass
        the moderation process of a moderated newsgroup.  Injecting agents
        SHOULD verify that messages approved for a moderated newsgroup are
        being injected by the moderator using authentication information
        from the underlying transport or some other authentication
        mechanism arranged with the moderator.
</p>
<p>A malicious news server participating in a Netnews network may
        bypass checks performed by injecting agents, forge Path header
        fields and other trace information (such as Injection-Info header
        fields), and otherwise compromise the authorization requirements
        of a Netnews network.  News servers SHOULD use the facilities of
        the underlying transport to authenticate their peers and reject
        articles from injecting and relaying agents that do not follow the
        requirements of this protocol or the Netnews network.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Denial of Service</h3>

<p>The proper functioning of individual newsgroups can be
        disrupted by the excessive posting of unwanted articles; by the
        repeated posting of identical or near identical articles; by
        posting followups unrelated to their precursors or which quote
        their precursors in full with the addition of minimal extra
        material (especially if this process is iterated); by crossposting
        to, or requesting followups to, totally unrelated newsgroups; and
        by abusing control messages and the Supersedes header field to
        delete articles or newsgroups.
</p>
<p>Such articles intended to deny service, or other articles of an
        inflammatory nature, may also have their From or Reply-To
        addresses set to valid but incorrect email addresses, thus causing
        large volumes of email to descend on the true owners of those
        addresses.  Users and agents should always be aware that
        identifying information in articles may be forged.
</p>
<p>A malicious poster may prevent an article from being seen at a
        particular site by including in the Path header field of the
        proto-article the &lt;path-identity> of that site.  Use of the
        &lt;diag-keyword> "POSTED" by injecting agents to mark the point
        of injection can prevent this attack.
</p>
<p>Primary responsibility for preventing such attacks lies with
        injecting agents, which can apply authentication and authorization
        checks via the underlying transport and prevent those attempting
        denial of service attacks from posting messages.  If specific
        injecting agents fail to live up to their responsibilities, they
        may be excluded from the Netnews network by configuring relaying
        agents to reject articles originating from them.
</p>
<p>A malicious complainer may submit a modified copy of an article
        (with an altered Injection-Info header field, for instance) to the
        administrator of an injecting agent in an attempt to discredit the
        author of that article and even to have his posting privileges
        removed.  Administrators SHOULD therefore obtain a genuine copy of
        the article from their own serving agent before taking action in
        response to such a complaint.
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Leakage</h3>

<p>Articles which are intended to have restricted distribution are
        dependent on the goodwill of every site receiving them.
        Restrictions on dissemination and retention of articles may be
        requested via the Archive and Distribution header fields, but such
        requests cannot be enforced by the protocol.
</p>
<p>The flooding algorithm used by Netnews transports such as NNTP
        <a class='info' href='#RFC3977'>[RFC3977]<span> (</span><span class='info'>Feather, C., &ldquo;Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a> is extremely good at finding any path by
        which articles can leave a subnet with supposedly restrictive
        boundaries, and substantial administrative effort is required to
        avoid this.  Organizations wishing to control such leakage are
        advised to designate a small number of gateways to handle all news
        exchange with the outside world.
</p>
<p>The sendme control message <a class='info' href='#sendme'>Section&nbsp;5.5<span> (</span><span class='info'>The ihave and sendme Control Messages</span><span>)</span></a>, insofar as
        it is still used, can be used to request articles the requester
        should not have access to.
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>IANA is requested to register the following media types,
      described elsewhere in this document, for use with the Content-Type
      header field, in the IETF tree in accordance with the procedures set
      out in <a class='info' href='#RFC4288'>[RFC4288]<span> (</span><span class='info'>Freed, N. and J. Klensin, &ldquo;Media Type Specifications and Registration Procedures,&rdquo; December&nbsp;2005.</span><span>)</span></a>.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      application/news-transmission  (4.1)
      application/news-groupinfo     (4.2)
      application/news-checkgroups   (4.3)
</pre></div>
<p>application/news-transmission is a change to a previous
      registration.
</p>
<p>IANA is also requested to change the status of the message/news
      media type to "OBSOLETE".  message/rfc822 should be used instead.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="ASCII">[ASCII]</a></td>
<td class="author-text">American National Standard for Information
            Systems, &ldquo;Coded Character Sets - 7-Bit American National Standard
          Code for Information Interchange (7-Bit ASCII),&rdquo; ANSI&nbsp;X3.4, 1986.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2046">[RFC2046]</a></td>
<td class="author-text"><a href="mailto:ned@innosoft.com">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com">N. Borenstein</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2046">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>,&rdquo; RFC&nbsp;2046, November&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2046.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2822">[RFC2822]</a></td>
<td class="author-text">Resnick, P., &ldquo;<a href="http://tools.ietf.org/html/rfc2822">Internet Message Format</a>,&rdquo; RFC&nbsp;2822, April&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc2822.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3629">[RFC3629]</a></td>
<td class="author-text">Yergeau, F., &ldquo;<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>,&rdquo; STD&nbsp;63, RFC&nbsp;3629, November&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3629.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4234">[RFC4234]</a></td>
<td class="author-text"><a href="mailto:dcrocker@bbiw.net">Crocker, D., Ed.</a> and <a href="mailto:paul.overell@thus.net">P. Overell</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc4234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; RFC&nbsp;4234, October&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4234.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc4234.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc4234.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4288">[RFC4288]</a></td>
<td class="author-text">Freed, N. and J. Klensin, &ldquo;<a href="http://tools.ietf.org/html/rfc4288">Media Type Specifications and Registration Procedures</a>,&rdquo; BCP&nbsp;13, RFC&nbsp;4288, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4288.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="USEFOR">[USEFOR]</a></td>
<td class="author-text">Murchison, K., Ed., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format.&rdquo;</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC0976">[RFC0976]</a></td>
<td class="author-text">Horton, M., &ldquo;<a href="http://tools.ietf.org/html/rfc976">UUCP mail interchange format standard</a>,&rdquo; RFC&nbsp;976, February&nbsp;1986 (<a href="http://www.rfc-editor.org/rfc/rfc976.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1036">[RFC1036]</a></td>
<td class="author-text">Horton, M. and R. Adams, &ldquo;<a href="http://tools.ietf.org/html/rfc1036">Standard for interchange of USENET messages</a>,&rdquo; RFC&nbsp;1036, December&nbsp;1987 (<a href="http://www.rfc-editor.org/rfc/rfc1036.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2045">[RFC2045]</a></td>
<td class="author-text"><a href="mailto:ned@innosoft.com">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com">N. Borenstein</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2045">Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies</a>,&rdquo; RFC&nbsp;2045, November&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2045.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2606">[RFC2606]</a></td>
<td class="author-text"><a href="mailto:dee3@us.ibm.com">Eastlake, D.</a> and <a href="mailto:buglady@fuschia.net">A. Panitz</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2606">Reserved Top Level DNS Names</a>,&rdquo; BCP&nbsp;32, RFC&nbsp;2606, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2606.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3798">[RFC3798]</a></td>
<td class="author-text">Hansen, T. and G. Vaudreuil, &ldquo;<a href="http://tools.ietf.org/html/rfc3798">Message Disposition Notification</a>,&rdquo; RFC&nbsp;3798, May&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3798.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3977">[RFC3977]</a></td>
<td class="author-text">Feather, C., &ldquo;<a href="http://tools.ietf.org/html/rfc3977">Network News Transfer Protocol (NNTP)</a>,&rdquo; RFC&nbsp;3977, October&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc3977.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="USEAGE">[USEAGE]</a></td>
<td class="author-text">Lindsey, C., &ldquo;Usenet Best Practice.&rdquo;</td></tr>
</table>

<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Changes to the Existing Protocols</h3>

<p>This document prescribes many changes, clarifications, and new
      features since the protocol described in <a class='info' href='#RFC1036'>[RFC1036]<span> (</span><span class='info'>Horton, M. and R. Adams, &ldquo;Standard for interchange of USENET messages,&rdquo; December&nbsp;1987.</span><span>)</span></a>.  Most notably:
        </p>
<ul class="text">
<li>A new, backward-compatible Path header field format that
          permits standardized embedding of additional trace and
          authentication information is now RECOMMENDED.  See <a class='info' href='#injecting'>Section&nbsp;3.5<span> (</span><span class='info'>Duties of an Injecting Agent</span><span>)</span></a> and <a class='info' href='#relaying'>Section&nbsp;3.6<span> (</span><span class='info'>Duties of a Relaying Agent</span><span>)</span></a>.  Folding
          of the Path header is permitted.
</li>
<li>Trimming of the References header field is REQUIRED and a
          mechanism for doing so is defined.
</li>
<li>Addition of the new Injection-Date header field is required
          for injecting agents (<a class='info' href='#injecting'>Section&nbsp;3.5<span> (</span><span class='info'>Duties of an Injecting Agent</span><span>)</span></a>) and MUST be
          used by news servers for date checks (<a class='info' href='#relaying'>Section&nbsp;3.6<span> (</span><span class='info'>Duties of a Relaying Agent</span><span>)</span></a>).  Injecting agents are strongly encouraged to put all
          local trace information in the new Injection-Info header
          field.
</li>
<li>A new media type is defined for transmitting Netnews
          articles through other media (<a class='info' href='#transmission'>Section&nbsp;4.1<span> (</span><span class='info'>application/news-transmission</span><span>)</span></a>),
          and moderators SHOULD prepare to receive submissions in that
          format (<a class='info' href='#moderate'>Section&nbsp;3.5.1<span> (</span><span class='info'>Forwarding Messages to a Moderator</span><span>)</span></a>).
</li>
<li>Certain control messages (<a class='info' href='#obs-control'>Section&nbsp;5.6<span> (</span><span class='info'>Obsolete Control Messages</span><span>)</span></a>)
          are declared obsolete, and the special significance of "cmsg"
          at the start of a Subject header field is removed.
</li>
<li>Additional media types are defined for improved
          structuring, specification, and automated processing of
          control messages (<a class='info' href='#groupinfo'>Section&nbsp;4.2<span> (</span><span class='info'>application/news-groupinfo</span><span>)</span></a> and <a class='info' href='#checkgroup'>Section&nbsp;4.3<span> (</span><span class='info'>application/news-checkgroups</span><span>)</span></a>).
</li>
<li>Two new optional parameters are added to the checkgroups
          control message.
</li>
<li>The message/news media type is declared obsolete.
</li>
<li>Cancel control messages are no longer required to have From
          and Sender header fields matching those of the target message,
          as this requirement added no real security.
</li>
<li>The relayer-name parameter in the Control header field of
          ihave and sendme control messages is now required.
</li>
</ul><p>
      
</p>
<p>In addition, many protocol steps and article verification
      requirements unmentioned or left ambiguous by <a class='info' href='#RFC1036'>[RFC1036]<span> (</span><span class='info'>Horton, M. and R. Adams, &ldquo;Standard for interchange of USENET messages,&rdquo; December&nbsp;1987.</span><span>)</span></a> but widely implemented by Netnews servers have
      been standardized and specified in detail.
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Acknowledgements</h3>

<p>This document is the result of a ten year effort and the number
      of people that have contributed to its content are too numerous to
      mention individually.  Many thanks go out to all past and present
      members of the USEFOR Working Group of the Internet Engineering Task
      Force (IETF) and the accompanying mailing list.
</p>
<p>Special thanks are due to Henry Spencer, whose Son-of-1036 draft
      served as the initial basis for this document.
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Russ Allbery (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Stanford University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O. Box 20066</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Stanford, CA  94309</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:rra@stanford.edu">rra@stanford.edu</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.eyrie.org/~eagle/">http://www.eyrie.org/~eagle/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Charles H. Lindsey</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Manchester</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">5 Clerewood Avenue</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Heald Green</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cheadle</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cheshire  SK8 3JU</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">United Kingdom</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+44 161 436 6131</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:chl@clerew.man.ac.uk">chl@clerew.man.ac.uk</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
