


SIMPLE WG                                                       T. Moran
Internet-Draft
Expires: December 17, 2003                                  S. Addagatla
                                                             E. Leppanen
                                                                   Nokia
                                                                A. Allen
                                                           June 18, 2003


    Requirements for Presence Specific Event Notification Filtering
                 draft-ietf-simple-pres-filter-reqs-01

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on December 17, 2003.

Copyright Notice

   Copyright (C) The Internet Society (2003). All Rights Reserved.

Abstract

   This document defines a set of structured requirements whereby a
   presence information subscriber may select specific information to be
   received in the presence infomation notification sent by the
   notifier. The purpose is to limit the content and frequency of
   notifications so that only essential information on a need basis is
   delivered by the server.






Moran, et al.          Expires December 17, 2003                [Page 1]

Internet-Draft      Presence Filtering Requirements            June 2003


Table of Contents

   1.    Introduction . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.    Conventions  . . . . . . . . . . . . . . . . . . . . . . . .  3
   3.    Overview of functionality  . . . . . . . . . . . . . . . . .  4
   4.    Requirements for Specification of Filters  . . . . . . . . .  4
   4.1   Common Syntax  . . . . . . . . . . . . . . . . . . . . . . .  4
   4.2   Package Identification . . . . . . . . . . . . . . . . . . .  4
   4.3   Target URI . . . . . . . . . . . . . . . . . . . . . . . . .  4
   4.4   Notification Triggering  . . . . . . . . . . . . . . . . . .  4
   4.5   Notification Content Limiting  . . . . . . . . . . . . . . .  5
   4.6   Discovery of Items . . . . . . . . . . . . . . . . . . . . .  5
   5.    Requirements for Uploading Filter Criteria (Operational
         Rules) . . . . . . . . . . . . . . . . . . . . . . . . . . .  6
   5.1   SUBSCRIBE Method . . . . . . . . . . . . . . . . . . . . . .  6
   5.1.1 Retention of Filter Criteria . . . . . . . . . . . . . . . .  6
   5.1.2 Changing Filter Criteria . . . . . . . . . . . . . . . . . .  6
   5.2   Server does not Support Filters  . . . . . . . . . . . . . .  6
   5.3   Server does not Support Filter Criteria  . . . . . . . . . .  6
   5.4   Server can no Longer Support Filter Criteria . . . . . . . .  7
   6.    Interaction with Other Features  . . . . . . . . . . . . . .  7
   6.1   Resource Lists . . . . . . . . . . . . . . . . . . . . . . .  7
   6.2   Partial Notifications  . . . . . . . . . . . . . . . . . . .  7
   6.3   Authorization  . . . . . . . . . . . . . . . . . . . . . . .  7
   7.    Security Considerations  . . . . . . . . . . . . . . . . . .  7
   8.    Example Applications for Notification Filtering  . . . . . .  8
   9.    Acknowledgements . . . . . . . . . . . . . . . . . . . . . .  9
   10.   Main changes from version 00 . . . . . . . . . . . . . . . .  9
         References . . . . . . . . . . . . . . . . . . . . . . . . .  9
         Authors' Addresses . . . . . . . . . . . . . . . . . . . . . 10
         Intellectual Property and Copyright Statements . . . . . . . 12




















Moran, et al.          Expires December 17, 2003                [Page 2]

Internet-Draft      Presence Filtering Requirements            June 2003


1. Introduction

   SIP event notification is described in [6]. It defines a general
   framework for subscriptions and notifications for SIP event packages.
   Concrete applications of the general event framework to a specific
   group of events are described in [5] (user presence) and [7] (watcher
   information).

   The presence information refers to a set of presence attributes
   describing the availability and willingness of the user (presentity)
   for communication. The user makes his presence information available
   for other users (watchers).

   As the inherent usage of event packages grows, the client needs some
   mechanisms for controlling the event notifications at the source.
   Evidence of this need is found in [4].

   The Internet Draft describing the Presence event package [5] mentions
   the possibility for a filtering. Accordingly, the SUBSCRIBE request
   may contain a body for filtering the presence information
   subscription. However, the definition of the filtering has been left
   out of the scope of the Internet Draft. As an example, the body of
   the SUBSCRIBE request may include a restriction on the set of data
   returned in NOTIFY requests.

   These mechanisms are expected to be particularly valuable to users of
   wireless devices. The characteristics of these devices typically
   include low bandwidth, low data processing capabilities, small
   display and limited battery power. Such devices can benefit from the
   ability to filter the amount of information generated at the source
   of the event notification.

   However, it is expected that the control mechanisms for event
   notifications add value for all users irrespectively of their device
   or network access characteristics.

   Section 4 and Section 5 of this draft propose a set of requirements
   whereby a client may specify which notifications it is interested in.
   That is, a means to specify filtering rules to be executed by the
   server. Section 8 provides a few example applications of notification
   filtering.

2. Conventions

   In this document, the key words 'MUST', 'MUST NOT', 'REQUIRED',
   'SHALL', 'SHALL NOT', 'SHOULD', 'SHOULD NOT', 'RECOMMENDED', 'MAY',
   and 'OPTIONAL' are to be interpreted as described in RFC 2119 [1]
   and indicate requirement levels for compliant implementations.



Moran, et al.          Expires December 17, 2003                [Page 3]

Internet-Draft      Presence Filtering Requirements            June 2003


3. Overview of functionality

   Filter Criteria set by a watcher may be set based on some
   predetermined knowledge of the structure of the presence information,
   or the filtering mechanism may itself be used to first discover the
   structure of the presence information thus enabling the setting new
   filter criteria to deliver the values of interest.

   The filtering may be performed either by the presence server of the
   presentity (the notifier) or by some intermediate server between the
   notifier and the watcher. The filtering should be considered as a
   post processing operation on the presence document after it has been
   modified due the rules of the authorization. As a result the
   authorization policy always overides any of the data or notifications
   requested by any of the filter criteria.

   Subscriptions containing filter criteria may either be accepted or
   rejected by the notifier based on the presence of filter criteria.

4. Requirements for Specification of Filters

   The following requirements relate to the creation of filter criteria.

4.1 Common Syntax

   A common set of constructs MUST be defined for the creation of rules.
   There MUST be a common set of operations that follow a common syntax.
   The user MUST be possible to define different rules for different
   purposes using a common filtering mechanism.

4.2 Package Identification

   A means is REQUIRED whereby the user may specify the package the
   rules apply to.

4.3 Target URI

   It MUST be possible for the watcher in the filter criteria to
   indicate the target presentity, resource list or sub list of the
   resource list to which a certain filter criteria is applied if this
   is different from the Request-URI in the subscription.

4.4 Notification Triggering

   This chapter presents requirements for specifying the desired
   conditions for when notifications are to be sent to the client.

   The scope of the 'when' part is to allow a possibility for the user



Moran, et al.          Expires December 17, 2003                [Page 4]

Internet-Draft      Presence Filtering Requirements            June 2003


   to specify such rules for the notification triggering where the
   criteria is based on the presence information, e.g., the value of the
   status element.

   The notification triggering criteria would override the default
   trigger conditions of the server/service as defined in the package
   when they are within the server's local policy constraints.

   It MUST be possible to specify logical expressions based on the value
   of elements defined in the package for the purpose of when to send
   notifications. This covers expressions (tests) related to the change
   of an element's value, and reaching a certain value of an element.

   It MUST be possible to construct expressions that combine multiple
   tests.

4.5 Notification Content Limiting

   This chapter presents requirements for specifying the content to be
   sent in the notifications.

   It MUST be possible for the watcher to specify the presence
   information elements [2] (XML elements and/or attributes) to be
   delivered in the notification. The specified elements MUST be
   possible to cover also extensions to PIDF formated presence
   information, see for example [3].

   E.g. the following two cases must be possible:

   o  It MUST be possible for the watcher to define a criteria which
      allows the complete tuple and all information within a tuple to be
      transmitted.

   o  It MUST be possible for the watcher to define a criteria which
      result notifies to contain values only for defined attributes.


   It MUST be possible to specify logical expressions based on the value
   of elements defined in the package for the purpose of determining
   what to send in the notification. The existence of an element SHOULD
   be considered as a criterion.

   It MUST be possible to construct expressions that combine multiple
   tests.

4.6 Discovery of Items

   It MUST be possible for the watcher to request to learn new items of



Moran, et al.          Expires December 17, 2003                [Page 5]

Internet-Draft      Presence Filtering Requirements            June 2003


   the presence information that the notifier may make available to the
   watcher. E.g., to discover additions of new tuples and/or other new
   presence information items.

   It MUST be possible for the watcher using the filter criteria to
   determine what presence information is available before subscribing
   to presence information with the actual values.

5. Requirements for Uploading Filter Criteria (Operational Rules)

   It MUST be possible for the watcher to upload filter criteria to the
   server (notifier) and know the status - accepted or rejected.

5.1 SUBSCRIBE Method

   Placing filter criteria in the body of the subscription MUST be
   supported. Other means of delivering the filter criteria to the
   server MAY be supported. E.g. it should be possible for the rules to
   be (permanently) stored in the server, as in a resource list case.

5.1.1 Retention of Filter Criteria

   The server MUST retain the filter criteria through the lifetime of
   the subscription dialog until there is a modification to the filter
   settings.

5.1.2 Changing Filter Criteria

   It MUST be possible to change the filter settings during a
   subscription.

   It MUST be possible for the watcher to reset the filter settings to
   the service (server) defined default.

   Changing filter criteria SHOULD be bandwidth efficient.

5.2 Server does not Support Filters

   If the server does not support filters (the content type) then it
   MUST be possible to indicate so in a response.

5.3 Server does not Support Filter Criteria

   It MUST be possible for the server to explicitly indicate that it
   does not support or understand the filter criteria. This indication
   MAY include a reason about the refusal of the subscription.





Moran, et al.          Expires December 17, 2003                [Page 6]

Internet-Draft      Presence Filtering Requirements            June 2003


5.4 Server can no Longer Support Filter Criteria

   The server MUST be able to terminate the subscription if the any of
   the active filters are no longer applicable due to a policy in the
   server.

6. Interaction with Other Features

6.1 Resource Lists

   It MUST be possible to support filtering for subscriptions to
   resource lists [8].

   It MUST be possible for a watcher to specify filter criteria for a
   resource list and/or any nested sub list of the resource list.

   It MUST be possible for a watcher to specify different filter for any
   individual member of a resource list in a resource list subscription.

   It MUST be possible for a watcher to specify different filter
   criteria for individual members of any of nested sub lists of a
   resource list in a resource list subscription. Any of the nested sub
   lists may be located in a different domain from the parent list.

   It MUST be possible for each watcher to define own filter criteria
   within resource list subscription if there are several simultaneous
   watchers using the same list.

6.2 Partial Notifications

   It MUST be possible to use filtering along with the partial
   notification [9] within the same subscription.

6.3 Authorization

   Authorization SHOULD occur irrespective of the filtering.

7. Security Considerations

   Security requirements specified for [5] also applies to the presence
   filtering. Additional security considerations related to the presence
   filtering are described as follows.

   The filter criteria should not be rejected based on the authorization
   policy since this would enable the watcher by experimentation with
   the use of filter criteria to determine the authorization policy the
   presentity has set for him and thus discover what the presentity
   wants to hide from him.



Moran, et al.          Expires December 17, 2003                [Page 7]


   The presence of filter criteria in the body in a SIP message has a
   significant effect on the way in which the request is handled at a
   server. As a result, it is especially important that messages
   containing filter criteria are authenticated and authorized.

   Modification to the Filter Criteria by an intermediary could also
   result in the watcher either not receiving notifications of presence
   information they are interested in or receiving a very large presence
   document. Therefore the filter criteria should be integrity protected
   between those nodes that are authorised to modify it (e.g., the
   resource list servers).

   Processing of requests and looking up filter criteria requires some
   amount of computation. This enables a DoS attack whereby a user can
   send requests with substantial numbers messages with large contents,
   in the hopes of overloading the server. To prevent this the number of
   filter criteria allowed in a request should be limited.

   Requests containing filter criteria can reveal sensitive information
   about a UA's capabilities. If this information is sensitive, it
   SHOULD be encrypted using methods that allow it to be read by those
   nodes that need to do so (e.g., the resource list servers).

   The resource list servers should convey only those parts of filter
   information targetted to the same destination as the fanned out
   individual subscriptions, if the filter information is conveyed
   further within the subscription.

8. Example Applications for Notification Filtering

   1.  A watcher wishes to get to know presentity's availability and
       willingness for messaging (e.g. IM and MMS).

   2.  A watcher is interested in getting information about the
       communication means and contact addresses the presentity is
       currently available for communication.

   3.  A watcher requires a notification if the state of a buddy has
       changed to 'open'.

   4.  A Subscriber only wants to be notified when the presentity's
       location is Dallas or Fort Worth. The notification should include
       the vehicle license, driver name, and city.

   5.  A Basic location tracking service requires notification when the
       presentity's cell id changes. The notification should include the
       cell id.

   6.  A watcher is intrested in being notified when a presentity gains
       a new communication capability such as a new networked



Moran, et al.          Expires December 17, 2003                [Page 8]

Internet-Draft      Presence Filtering Requirements            June 2003


       multi-player game.


9. Acknowledgements

   The authors would like to thank Hisham Khartabil, Mikko Lonnfors,
   Juha Kalliokulju, Aki Niemi, Jose Costa-Requena and Markus Isomaki
   for their valuable input.

10. Main changes from version 00

   o  Overview of functionality chapter added.

   o  More specific requirements for supporting filtering with the
      resource lists, and nested lists.

   o  Interaction with other features chapter added.

   o  More specific requirements to support getting information about
      the structure of presence document, and changes in it.

   o  Several filter specific additions to security considerations.

   o  Several editorial changes, e.g., reference and terminology
      updates.

References

   [1]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", BCP 14, RFC 2119, March 1997.

   [2]  Sugano, H., "CPIM Presence Information Data Format",
        draft-ietf-impp-cpim-pidf-08.txt, May 2003.

   [3]  Schulzrinne, H., "RPIDS -- Rich Presence Information Data Format
        for Presence Based on the Session Initiation Protocol (SIP)",
        draft-schulzrinne-simple-rpids-01.txt, February 2003.

   [4]  Kiss, K., "Requirements for Presence Service based on 3GPP
        specifications and wireless environment characteristics",
        draft-kiss-simple-presence-wireless-reqs-02, February 2003.

   [5]  Rosenberg, J., "Session Initiation Protocol (SIP) Extensions for
        Presence",  draft-ietf-simple-presence-10.txt, January 2003.

   [6]  Roach, A., "Session Initiation Protocol (SIP)-Specific Event
        Notification", RFC 3265, June 2002.




Moran, et al.          Expires December 17, 2003                [Page 9]

Internet-Draft      Presence Filtering Requirements            June 2003


   [7]  Rosenberg, J., "A Watcher Information Event Template-Package for
        the Session Initiation Protocol (SIP)",
        draft-ietf-simple-winfo-package-05.txt, January 2003.

   [8]  Rosenberg, J., "A Session Initiation Protocol (SIP) Event
        Notification Extension for Resource Lists",
        draft-ietf-simple-event-list-03.txt, May 2003.

   [9]  Lonnfors, M., "Partial Notification of Presence Information",
        draft-lonnfors-simple-partial-notify-01.txt, May 2003.


Authors' Addresses

   Tim Moran
   2800 Britt Drive
   Argyle, Texas 76226
   USA

   Phone: +1 972 849 8821
   EMail: tl_moran@att.net


   Sreenivas Addagatla
   Nokia
   6000 Connection Drive
   Irving, Texas 75039
   USA

   Phone: +1 972 374 1917
   EMail: sreenivas.addagatla@nokia.com


   Eva Leppanen
   Nokia
   P.O BOX 785
   Tampere
   Finland

   Phone: +358 7180 77066
   EMail: eva-maria.leppanen@nokia.com










Moran, et al.          Expires December 17, 2003               [Page 10]

Internet-Draft      Presence Filtering Requirements            June 2003


   Andrew Allen
   1937 McRae Lane
   Mundelein, Illinois 60060
   USA

   EMail: AndrewAllen007@aol.com













































Moran, et al.          Expires December 17, 2003               [Page 11]

Internet-Draft      Presence Filtering Requirements            June 2003


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.


Full Copyright Statement

   Copyright (C) The Internet Society (2003). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION



Moran, et al.          Expires December 17, 2003               [Page 12]

Internet-Draft      Presence Filtering Requirements            June 2003


   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.











































Moran, et al.          Expires December 17, 2003               [Page 13]


