<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>PCEP extensions for p2mp sr policy</title>
<meta content="Hooman Bidgoli" name="author">
<meta content="Daniel Voyer" name="author">
<meta content="Saranya Rajarathinam" name="author">
<meta content="Ehsan Hemmati" name="author">
<meta content="Tarek Saad" name="author">
<meta content="Siva Sivabalan" name="author">
<meta content="
       SR P2MP policies are set of policies that enable architecture for
      P2MP service delivery. This document specifies extensions to the Path
      Computation Element Communication Protocol (PCEP) that allow a stateful
      PCE to compute and initiate P2MP paths from a Root to a set of
      Leaves. 
    " name="description">
<meta content="xml2rfc 3.11.1" name="generator">
<meta content="draft-ietf-pce-sr-p2mp-policy-00" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.11.1
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.4
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.26.0
    setuptools 59.1.1
    six 1.16.0
-->
<link href="/tmp/draft-ietf-pce-sr-p2mp-policy-00-uh9booqv.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">PCEP p2mp sr policy</td>
<td class="right">December 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Bidgoli, et al.</td>
<td class="center">Expires 11 June 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-pce-sr-p2mp-policy-00</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-12-08" class="published">8 December 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-06-11">11 June 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">H. Bidgoli, <span class="editor">Ed.</span>
</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">V. Voyer</div>
<div class="org">Bell Canada</div>
</div>
<div class="author">
      <div class="author-name">S. Rajarathinam</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">E. Hemmati</div>
<div class="org">Cisco System</div>
</div>
<div class="author">
      <div class="author-name">T. Saad</div>
<div class="org">Juniper Networks</div>
</div>
<div class="author">
      <div class="author-name">S. Sivabalan</div>
<div class="org">Ciena</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">PCEP extensions for p2mp sr policy</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">SR P2MP policies are set of policies that enable architecture for
      P2MP service delivery. This document specifies extensions to the Path
      Computation Element Communication Protocol (PCEP) that allow a stateful
      PCE to compute and initiate P2MP paths from a Root to a set of
      Leaves.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 11 June 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-conventions-used-in-this-do" class="xref">Conventions used in this document</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-overview-of-pcep-operation-" class="xref">Overview of PCEP Operation in SR P2MP Network</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-high-level-view-of-p2mp-pol" class="xref">High level view of P2MP Policy Objects</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1.2.1">
                    <p id="section-toc.1-1.3.2.1.2.1.1" class="keepWithNext"><a href="#section-3.1.1" class="xref">3.1.1</a>.  <a href="#name-shared-tree-vs-non-shared-r" class="xref">Shared Tree vs Non-Shared Replication Segment</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-existing-drafts-used-for-de" class="xref">Existing drafts used for defining a P2MP Policy</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.1">
                    <p id="section-toc.1-1.3.2.2.2.1.1"><a href="#section-3.2.1" class="xref">3.2.1</a>.  <a href="#name-existing-documents-used-by-" class="xref">Existing Documents used by this draft</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.2">
                    <p id="section-toc.1-1.3.2.2.2.2.1"><a href="#section-3.2.2" class="xref">3.2.2</a>.  <a href="#name-p2mp-policy-identification" class="xref">P2MP Policy Identification</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.3">
                    <p id="section-toc.1-1.3.2.2.2.3.1"><a href="#section-3.2.3" class="xref">3.2.3</a>.  <a href="#name-replication-segment-identif" class="xref">Replication Segment Identification</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.4">
                    <p id="section-toc.1-1.3.2.2.2.4.1"><a href="#section-3.2.4" class="xref">3.2.4</a>.  <a href="#name-pcecc-use-in-replication-se" class="xref">PCECC Use in Replication Segment</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-high-level-procedures-for-p" class="xref">High Level Procedures for P2MP SR LSP Instantiation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.1">
                    <p id="section-toc.1-1.3.2.3.2.1.1"><a href="#section-3.3.1" class="xref">3.3.1</a>.  <a href="#name-pce-init-procedure" class="xref">PCE-Init Procedure</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.2">
                    <p id="section-toc.1-1.3.2.3.2.2.1"><a href="#section-3.3.2" class="xref">3.3.2</a>.  <a href="#name-pcc-init-procedure" class="xref">PCC-Init Procedure</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.3">
                    <p id="section-toc.1-1.3.2.3.2.3.1"><a href="#section-3.3.3" class="xref">3.3.3</a>.  <a href="#name-common-procedure" class="xref">Common Procedure</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.4">
                    <p id="section-toc.1-1.3.2.3.2.4.1"><a href="#section-3.3.4" class="xref">3.3.4</a>.  <a href="#name-global-optimization-of-the-" class="xref">Global Optimization of the Candidate Path</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.5">
                    <p id="section-toc.1-1.3.2.3.2.5.1"><a href="#section-3.3.5" class="xref">3.3.5</a>.  <a href="#name-fast-reroute" class="xref">Fast Reroute</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.6">
                    <p id="section-toc.1-1.3.2.3.2.6.1"><a href="#section-3.3.6" class="xref">3.3.6</a>.  <a href="#name-connecting-replication-segm" class="xref">Connecting Replication Segment via Segment List</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="xref">3.4</a>.  <a href="#name-sr-p2mp-policy-and-replicat" class="xref">SR P2MP Policy and Replication Segment TLVs and Objects</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.1">
                    <p id="section-toc.1-1.3.2.4.2.1.1"><a href="#section-3.4.1" class="xref">3.4.1</a>.  <a href="#name-sr-p2mp-policy-objects" class="xref">SR P2MP Policy Objects</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.2">
                    <p id="section-toc.1-1.3.2.4.2.2.1"><a href="#section-3.4.2" class="xref">3.4.2</a>.  <a href="#name-replication-segment-objects" class="xref">Replication Segment Objects</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.3">
                    <p id="section-toc.1-1.3.2.4.2.3.1"><a href="#section-3.4.3" class="xref">3.4.3</a>.  <a href="#name-p2mp-policy-and-replication" class="xref">P2MP Policy and Replication Segment general considerations</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-object-format" class="xref">Object Format</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-open-message-and-capability" class="xref">Open Message and Capability Exchange</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a href="#section-4.1.1" class="xref">4.1.1</a>.  <a href="#name-pcecc-path-setup-capability" class="xref">PCECC Path Setup Capability</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.2">
                    <p id="section-toc.1-1.4.2.1.2.2.1"><a href="#section-4.1.2" class="xref">4.1.2</a>.  <a href="#name-association-type-capability" class="xref">Association Type Capability</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-symbolic-name-in-pcinit-mes" class="xref">Symbolic Name in PCInit Message from PCC</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-p2mp-policy-specific-object" class="xref">P2MP Policy Specific Objects and TLVs</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.1">
                    <p id="section-toc.1-1.4.2.3.2.1.1"><a href="#section-4.3.1" class="xref">4.3.1</a>.  <a href="#name-p2mp-policy-association-gro" class="xref">P2MP Policy Association Group for P2MP Policy</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.1.2.1">
                        <p id="section-toc.1-1.4.2.3.2.1.2.1.1"><a href="#section-4.3.1.1" class="xref">4.3.1.1</a>.  <a href="#name-p2mp-sr-policy-association-" class="xref">P2MP SR Policy Association Group Policy Identifiers TLV</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.1.2.2">
                        <p id="section-toc.1-1.4.2.3.2.1.2.2.1"><a href="#section-4.3.1.2" class="xref">4.3.1.2</a>.  <a href="#name-p2mp-sr-policy-association-g" class="xref">P2MP SR Policy Association Group Candidate Path Identifiers TLV</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.1.2.3">
                        <p id="section-toc.1-1.4.2.3.2.1.2.3.1"><a href="#section-4.3.1.3" class="xref">4.3.1.3</a>.  <a href="#name-p2mp-sr-policy-association-gr" class="xref">P2MP SR Policy Association Group Candidate Path Attributes TLV</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.2">
                    <p id="section-toc.1-1.4.2.3.2.2.1"><a href="#section-4.3.2" class="xref">4.3.2</a>.  <a href="#name-p2mp-end-points-object" class="xref">P2MP-END-POINTS Object</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="xref">4.4</a>.  <a href="#name-p2mp-policy-and-replication-" class="xref">P2MP Policy and Replication Segment Identifier Object and TLV</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4.2.1">
                    <p id="section-toc.1-1.4.2.4.2.1.1"><a href="#section-4.4.1" class="xref">4.4.1</a>.  <a href="#name-extension-of-the-lsp-object" class="xref">Extension of the LSP Object, SR-P2MP-LSPID-TLV</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a href="#section-4.5" class="xref">4.5</a>.  <a href="#name-replication-segment" class="xref">Replication Segment</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5.2.1">
                    <p id="section-toc.1-1.4.2.5.2.1.1"><a href="#section-4.5.1" class="xref">4.5.1</a>.  <a href="#name-the-format-of-the-replicati" class="xref">The format of the replication segment message</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5.2.2">
                    <p id="section-toc.1-1.4.2.5.2.2.1"><a href="#section-4.5.2" class="xref">4.5.2</a>.  <a href="#name-pcecc" class="xref">PCECC</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5.2.3">
                    <p id="section-toc.1-1.4.2.5.2.3.1"><a href="#section-4.5.3" class="xref">4.5.3</a>.  <a href="#name-label-action-rules-in-repli" class="xref">Label action rules in replicating segment</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5.2.4">
                    <p id="section-toc.1-1.4.2.5.2.4.1"><a href="#section-4.5.4" class="xref">4.5.4</a>.  <a href="#name-sr-ero-rules" class="xref">SR-ERO Rules</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5.2.4.2.1">
                        <p id="section-toc.1-1.4.2.5.2.4.2.1.1"><a href="#section-4.5.4.1" class="xref">4.5.4.1</a>.  <a href="#name-sr-ero-subobject-changes" class="xref">SR-ERO subobject changes</a></p>
</li>
                    </ul>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-tree-deletion" class="xref">Tree Deletion</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-fragmentation" class="xref">Fragmentation</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-example-workflows" class="xref">Example Workflows</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-consideration" class="xref">IANA Consideration</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="xref">11.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="xref">11.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The draft <span>[<a href="#draft-ietf-pim-sr-p2mp-policy" class="xref">draft-ietf-pim-sr-p2mp-policy</a>]</span> defines a
      variant of the SR Policy <span>[<a href="#draft-ietf-spring-segment-routing-policy" class="xref">draft-ietf-spring-segment-routing-policy</a>]</span> for constructing a
      P2MP segment to support multicast service delivery.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">A Point-to-Multipoint (P2MP) Policy connects a Root node to a set of
      Leaf nodes, optionally through a set of intermediate replication nodes.
      A Replication segment <span>[<a href="#draft-ietf-spring-sr-replication-segment" class="xref">draft-ietf-spring-sr-replication-segment</a>]</span>, which corresponds
      to the state of a P2MP segment on a particular node which provide
      forwarding instructions for the segment.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">A P2MP Policy is relevant on the root of the P2MP Tree and it
      contains candidate paths. The candidate paths are made of path-instances
      and each path-instance is constructed via replication segments. These
      replication segments are programmed on the root, leaves and optionally
      intermediate replication nodes.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">A replication segments MAY be connected directly, or they MAY be
      connected or steered via unicast SR segment or a segment list.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">For a P2MP Tree, a controller may be used to compute paths from a
      Root node to a set of Leaf nodes, optionally via a set of replication
      nodes. A packet is replicated at the root node and optionally on
      Replication nodes towards each Leaf node.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">There are two types of a P2MP Tree: Spray and Replication.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">A Point-to-Multipoint service delivery could be via Ingress
      Replication, known as Spray. The root unicasts individual copies of
      traffic to each leaf. The corresponding P2MP Policy consists of
      replication segments only for the root and the leaves and they are
      connected via a unicast SR Segment.<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">A Point-to-Multipoint service delivery could also be via Downstream
      Replication, known as Replication. The root and some downstream
      replication nodes replicate the traffic along the way as it traverses
      closer to the leaves.<a href="#section-1-8" class="pilcrow">¶</a></p>
<p id="section-1-9">The leaves and the root can be explicitly configured on the PCE or
      PCC can update the PCE with the information of the discovered root and
      leaves. As an example Multicast protocols like MVPN procedures <span>[<a href="#RFC6513" class="xref">RFC6513</a>]</span> or PIM can be used to discovery the leaves and roots
      on the PCC and update the PCE with these relevant information. The
      controller can calculate the P2MP Policy and any of its associated
      replication segments with these info.<a href="#section-1-9" class="pilcrow">¶</a></p>
<p id="section-1-10">This document defines PCEP objects, TLVs and the procedures to
      instantiate a P2MP Policy and Replication Segments.<a href="#section-1-10" class="pilcrow">¶</a></p>
</section>
<section id="section-2">
      <h2 id="name-conventions-used-in-this-do">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions-used-in-this-do" class="section-name selfRef">Conventions used in this document</a>
      </h2>
<p id="section-2-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in RFC 2119 [RFC2119].<a href="#section-2-1" class="pilcrow">¶</a></p>
</section>
<section id="section-3">
      <h2 id="name-overview-of-pcep-operation-">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-overview-of-pcep-operation-" class="section-name selfRef">Overview of PCEP Operation in SR P2MP Network</a>
      </h2>
<p id="section-3-1">After discovering the root and the leaves on the PCE (via different
      mechanism mentioned in previous sections), the PCE computes the P2MP
      Tree and identifying the relevant Replication routers, then it programs
      the PCCs with relevant information needed to create a P2MP Tree.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">As per draft <span>[<a href="#draft-ietf-pim-sr-p2mp-policy" class="xref">draft-ietf-pim-sr-p2mp-policy</a>]</span> a P2MP
      Policy is defined by Root-ID, Tree-ID and a set of leaves. A P2MP policy
      is a variant of SR policy as such it uses the same concept as draft
      <span>[<a href="#draft-ietf-pce-segment-routing-policy-cp" class="xref">draft-ietf-pce-segment-routing-policy-cp</a>]</span>. A P2MP policy
      is composed of a collection of SR P2mp Candidate Paths. Candidate paths
      are computed by the PCE and can be used for P2MP Tree redundancy. Only a
      single candidate path may be active at each time. Each candidate paths
      can be globally optimized, therefore it is consists of multiple
      path-instances. A path-instance can be considered to a P2MP LSP. If a
      candidate path needs to be globally optimized two path-instances can be
      programmed on the root node and via make before break procedures the
      candidate path can be switched from path-instance 1 to the 2nd
      path-instance. The forwarding states of these path-instances are build
      via replication segments, in short each path-instance initiated on the
      root has its own set of replication segments on the Root, Transit and
      Leaf nodes.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">A replication segment is set of forwarding instructions on a specific
      node. Each instruction may be a PUSH or SWAP operation before forwarding
      out of an interface, or a POP action on bud and leaf nodes.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">PCE could also calculate and download additional information for the
      replication segments, such as protections next-hops for link protection
      (FRR).<a href="#section-3-4" class="pilcrow">¶</a></p>
<section id="section-3.1">
        <h3 id="name-high-level-view-of-p2mp-pol">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-high-level-view-of-p2mp-pol" class="section-name selfRef">High level view of P2MP Policy Objects</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-3.1-1.1">
            <p id="section-3.1-1.1.1">SR P2MP Policy<a href="#section-3.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-1.1.2.1">
                <p id="section-3.1-1.1.2.1.1">Is only relevant on the Root of the P2MP path and is a
                policy on PCE. It is downloaded only on the rootnode and is
                identified via &lt;Root-ID, Tree-ID&gt; It contains the
                following information:<a href="#section-3.1-1.1.2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-1.1.2.1.2.1">Root node of the P2MP Segment<a href="#section-3.1-1.1.2.1.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-3.1-1.1.2.1.2.2">Leaf nodes of the P2MP Segment<a href="#section-3.1-1.1.2.1.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-3.1-1.1.2.1.2.3">Tree-ID, which is a unique identifier of the P2MP tree
                    on the Root<a href="#section-3.1-1.1.2.1.2.3" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-3.1-1.1.2.1.2.4">A set of Candidate paths belonging to the policy<a href="#section-3.1-1.1.2.1.2.4" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-3.1-1.1.2.1.2.5">Optional Constraints used to build these candidate
                    paths<a href="#section-3.1-1.1.2.1.2.5" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
</li>
        </ul>
<ul class="normal">
<li class="normal" id="section-3.1-2.1">
            <p id="section-3.1-2.1.1">Candidate Path:<a href="#section-3.1-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-2.1.2.1">Is used for P2MP Tree redundancy where the candidate path
                with the highest preference is the active path.<a href="#section-3.1-2.1.2.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.1-2.1.2.2">It can contain two path-instance for global optimization
                procedures (i.e. make before break)<a href="#section-3.1-2.1.2.2" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.1-2.1.2.3">Contains information regarding protocol-id, originator,
                discriminator, preference, path-instances<a href="#section-3.1-2.1.2.3" class="pilcrow">¶</a>
</li>
            </ul>
</li>
          <li class="normal" id="section-3.1-2.2">
            <p id="section-3.1-2.2.1">Replication Segment:<a href="#section-3.1-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-2.2.2.1">Is the forwarding information needed on each node for
                building the forwarding path for each path-instance of the
                P2MP Candidate path.<a href="#section-3.1-2.2.2.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.1-2.2.2.2">
                <p id="section-3.1-2.2.2.2.1">Explained further in upcoming sections, there are 2 ways to
                identify the replication segment, depending if they are shared
                and non-shared<a href="#section-3.1-2.2.2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-2.2.2.2.2.1">It is identified via Tree-ID and Root-ID and
                    path-instance for non-shared replication segment.<a href="#section-3.1-2.2.2.2.2.1" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-3.1-2.2.2.2.2.2">It is identified via Node-ID, Replication-ID, for
                    shared replication segment<a href="#section-3.1-2.2.2.2.2.2" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-3.1-2.2.2.2.2.3">Contains forwarding instructions, in the form of a list
                    of outgoing segments each of which may be a list<a href="#section-3.1-2.2.2.2.2.3" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-3.1-2.2.2.2.2.4">On the forwarding plane the Replication Segment is
                    identified via the incoming Replication SID.<a href="#section-3.1-2.2.2.2.2.4" class="pilcrow">¶</a>
</li>
                  <li class="normal" id="section-3.1-2.2.2.2.2.5">Replication segment information is downloaded on Root,
                    Transit and Leaf nodes respectively.<a href="#section-3.1-2.2.2.2.2.5" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
</li>
        </ul>
<section id="section-3.1.1">
          <h4 id="name-shared-tree-vs-non-shared-r">
<a href="#section-3.1.1" class="section-number selfRef">3.1.1. </a><a href="#name-shared-tree-vs-non-shared-r" class="section-name selfRef">Shared Tree vs Non-Shared Replication Segment</a>
          </h4>
<p id="section-3.1.1-1">A non-shared Replication Segment is used when the label field of
          the PMSI Tunnel Attribute (PTA) is set to zero as per <span>[<a href="#draft-parekh-bess-mvpn-sr-p2mp" class="xref">draft-parekh-bess-mvpn-sr-p2mp</a>]</span>. This is used when there
          is no upstream assigned label in the PTA (provider tunnel attribute)
          and aggregate of MVPNs into a single P-Tunnel is not desired.<a href="#section-3.1.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1.1-2">An alternative shared Replication Segment is used when the label
          field of the PTA is not set to Zero and there is an upstream
          assigned label in the PTA. In this case multiple MVPNs (VRFs) can be
          aggregate into a single Provider Tunnel and the upstream assigned
          label distinguishes the MVPNs context.<a href="#section-3.1.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1.1-3">It should be noted that the shared Replication Segment can also
          be used to build a bypass tunnel for the purpose of fast re-route.
          This might be desirable if the bypass tunnel is build via the PCE
          and downloaded to the PCC for link protection. In doing so, multiple
          non-shared Replication Segments can use the shared replication
          segment as their bypass tunnel for link protection. The replication
          segments used in this bypass tunnel should only create a unicast
          bypass tunnel to protect the link between two replication segments
          on the primary path.<a href="#section-3.1.1-3" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-3.2">
        <h3 id="name-existing-drafts-used-for-de">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-existing-drafts-used-for-de" class="section-name selfRef">Existing drafts used for defining a P2MP Policy</a>
        </h3>
<p id="section-3.2-1">This document attempts to leverage existing IETF draft and RFC
        documents which define PCEP objects, to update the PCE with Root and
        Leaves information when PCC Initiated method is used. Similarly,
        existing documents are utilized where feasible to update the PCC with
        relevant information to build the P2MP Policy and its Replication
        Segments. This document introduces new TLVs and Objects specific to a
        programing P2MP policy and its replication segment.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<section id="section-3.2.1">
          <h4 id="name-existing-documents-used-by-">
<a href="#section-3.2.1" class="section-number selfRef">3.2.1. </a><a href="#name-existing-documents-used-by-" class="section-name selfRef">Existing Documents used by this draft</a>
          </h4>
<ul class="normal">
<li class="normal" id="section-3.2.1-1.1">
              <p id="section-3.2.1-1.1.1"><span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span> The bases for a stateful PCE, and
              reuses the following objects or a variant of them<a href="#section-3.2.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1-1.1.2.1">&lt;SRP Object&gt;<a href="#section-3.2.1-1.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-3.2.1-1.1.2.2">&lt;LSP Object&gt;<a href="#section-3.2.1-1.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-3.2.1-1.1.2.3">A variation of the LSP identifier TLV is defined in this
                  draft, to support P2MP LSP Identifier<a href="#section-3.2.1-1.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-3.2.1-1.2">
              <span>[<a href="#RFC8236" class="xref">RFC8236</a>]</span> P2MP capabilities advertisement<a href="#section-3.2.1-1.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.1-1.3">
              <span>[<a href="#draft-ietf-pce-segment-routing-policy-cp" class="xref">draft-ietf-pce-segment-routing-policy-cp</a>]</span>
              Candidate paths for P2MP Policy is used for Tree Redundancy. As
              an example, a P2MP Policy can have multiple candidate paths.
              Each protecting the primary candidate path. The active path is
              chosen via the preference of the candidate path.<a href="#section-3.2.1-1.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.1-1.4">
              <span>[<a href="#RFC3209" class="xref">RFC3209</a>]</span> Defines the instance-ID, instance-ID
              is used for global optimization of a candidate path with in a
              P2MP policy. Each Candidate path can have 2 path-instances.
              These path-instances are equivalent to sub-lsps (instance-IDs).
              There are used for MBB and global optimization procedures.
              instance-ID is equivalent to LSP ID<a href="#section-3.2.1-1.4" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.1-1.5">
              <span>[<a href="#draft-ietf-spring-segment-routing-policy" class="xref">draft-ietf-spring-segment-routing-policy</a>]</span> Segment-list, used for connecting two non-adjacent
              replication policy via a unicast binding SID or
              Segment-list.<a href="#section-3.2.1-1.5" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.1-1.6">
              <span>[<a href="#RFC8306" class="xref">RFC8306</a>]</span> P2MP End Point objects, used
              for the PCC to update the PCE with discovered Leaves.<a href="#section-3.2.1-1.6" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.1-1.7">
              <span>[<a href="#draft-ietf-pce-pcep-extension-for-pce-controller" class="xref">draft-ietf-pce-pcep-extension-for-pce-controller</a>]</span> for
              programming and identifying the Replication Segment. A new PCE
              CC Capability sub Tlv is introduced to indicated the support to
              handle PCE CC based label download for SR P2MP.<a href="#section-3.2.1-1.7" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.1-1.8">
              <span>[<a href="#draft-ietf-pce-multipath" class="xref">draft-ietf-pce-multipath</a>]</span> Forwarding
              instruction for a P2MP LSP is defined by a set of SR-ERO
              sub-objects in the ERO object, ERO-ATTRIBUTES object and
              MULTIPATH-BACKUP TLV as defined in this draft.<a href="#section-3.2.1-1.8" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.1-1.9">
              <span>[<a href="#RFC8664" class="xref">RFC8664</a>]</span> SR-ERO Sub Object used in the
              multipath.<a href="#section-3.2.1-1.9" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-3.2.1-2">It should be noted that the <span>[<a href="#draft-dhs-spring-sr-p2mp-policy-yang" class="xref">draft-dhs-spring-sr-p2mp-policy-yang</a>]</span> can provide further
          details of the high level P2MP Policy Model.<a href="#section-3.2.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2.2">
          <h4 id="name-p2mp-policy-identification">
<a href="#section-3.2.2" class="section-number selfRef">3.2.2. </a><a href="#name-p2mp-policy-identification" class="section-name selfRef">P2MP Policy Identification</a>
          </h4>
<p id="section-3.2.2-1">A P2MP Policy and its candidate path can be identified on the
          root via the P2MP LSP Object. This Object is a variation of the LSP
          ID Object defined in <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span> and is as follow:<a href="#section-3.2.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.2-2.1">
              <p id="section-3.2.2-2.1.1">PLSP-ID: <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span>, is assigned by PCC and is
              unique per candidate path. It is constant for the lifetime of a
              PCEP session. Stand-by candidate paths will be assigned a new
              PLSP-ID by PCC. Stand-by candidate paths can co-exist with the
              active candidate path.<a href="#section-3.2.2-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.2-2.1.2.1">Note: Every candidate path in the SR-P2MP Policy is
                  unique with its own unique PLSP-ID and Instance-ID. But the
                  same Tree-ID is used for all candidate paths as they are
                  part of the same P2MP Tree.<a href="#section-3.2.2-2.1.2.1" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-3.2.2-2.2">Root-ID: is equivalent to the first node on the P2MP path, as
              per <span>[<a href="#RFC3209" class="xref">RFC3209</a>]</span>, Section 4.6.2.1<a href="#section-3.2.2-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.2-2.3">Tree-ID: is equivalent to Tunnel Identifier color which
              identifies a unique P2MP Policy at a ROOT and is advertised via
              the PTA in the BGP AD route or can be assigned manually on the
              root. Tree-ID needs to be unique on the root.<a href="#section-3.2.2-2.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.2-2.4">
              <p id="section-3.2.2-2.4.1">Instance-ID: LSP ID Identifier as defined in RFC 3209, is the
              path-instance identifier and is assigned by the PCC. As it was
              mentioned the candidate path can have up to two path-instance
              for global optimization. Note that the Root-ID, Tree-ID and
              Instance-ID are part of a new SR- P2MP-LSP-IDENTIFIER TLV which
              will be identified in this draft.<a href="#section-3.2.2-2.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.2-2.4.2.1">Note: each Path-instance on the Root node is assigned a
                  unique Instance-ID<a href="#section-3.2.2-2.4.2.1" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
</section>
<section id="section-3.2.3">
          <h4 id="name-replication-segment-identif">
<a href="#section-3.2.3" class="section-number selfRef">3.2.3. </a><a href="#name-replication-segment-identif" class="section-name selfRef">Replication Segment Identification</a>
          </h4>
<p id="section-3.2.3-1">The key to identify a replication segment is also a P2MP LSP
          Object. With varying encoding rules for the SR-P2MP-LSP- IDENTIFIER
          TLV which will be explained in later sections.<a href="#section-3.2.3-1" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2.4">
          <h4 id="name-pcecc-use-in-replication-se">
<a href="#section-3.2.4" class="section-number selfRef">3.2.4. </a><a href="#name-pcecc-use-in-replication-se" class="section-name selfRef">PCECC Use in Replication Segment</a>
          </h4>
<p id="section-3.2.4-1">PCECC and a variant of CCI object is used in Replication Segment
          to identify a cross connect. A cross connect is a incoming SID and
          set of outgoing interfaces and their corresponding SID. The CCI
          objects contains the incoming SID while the outgoing interfaces are
          presented via the ERO objects, which each may contain a list of
          segments.<a href="#section-3.2.4-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-3.3">
        <h3 id="name-high-level-procedures-for-p">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-high-level-procedures-for-p" class="section-name selfRef">High Level Procedures for P2MP SR LSP Instantiation</a>
        </h3>
<p id="section-3.3-1">A P2MP policy can be instantiated via the PCC or the PCE depending
        on how the root and the leaves are discovered. This document describes
        two way to discover the root and the leaves:<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3-2.1">They can be configured and identified on the controller and are
            considered PCE initiated.<a href="#section-3.3-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.3-2.2">They can be discovered on the PCC via MVPN procedures <span>[<a href="#RFC6513" class="xref">RFC6513</a>]</span> or legacy multicast protocols like PIM or IGMP
            etc... and are considered PCC initiated.<a href="#section-3.3-2.2" class="pilcrow">¶</a>
</li>
        </ul>
<section id="section-3.3.1">
          <h4 id="name-pce-init-procedure">
<a href="#section-3.3.1" class="section-number selfRef">3.3.1. </a><a href="#name-pce-init-procedure" class="section-name selfRef">PCE-Init Procedure</a>
          </h4>
<ul class="normal">
<li class="normal" id="section-3.3.1-1.1">PCE is informed of the P2MP request through its API or
              configuration mechanism to instantiate a P2MP tunnel.<a href="#section-3.3.1-1.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.3.1-1.2">PCE will initiate the P2MP Policy for the request, by sending
              a PCInitiate message to the Root.<a href="#section-3.3.1-1.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.3.1-1.3">
              <p id="section-3.3.1-1.3.1">Root in response to the PCInitiate message, will generate
              PLSP-ID for the candidate paths and an Instance-ID for the
              Path-Instance (LSP-ID) contained with in the candidate path. The
              tree-id for the P2MP Policy is also filled. PCC will reports
              back the PLSP-ID, Instance-ID and tree-id via PCRpt message<a href="#section-3.3.1-1.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.1-1.3.2.1">Optionally, the Root can add any additional leaves that
                  were discovered by multicast procedures in this PCRpt
                  message.<a href="#section-3.3.1-1.3.2.1" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-3.3.1-1.4">PCE will send a PCInitiate message to the Root, Transit and
              the Leaf nodes to download the Replication Segment information.
              These messages will utilize the CCI object to encode the
              forwarding instruction information.<a href="#section-3.3.1-1.4" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.3.1-1.5">PCE will then send a PCUpdate to the root indicating the
              association information (Candidate path) , and implicitly
              indicate it to bind to the latest CCI information
              downloaded.<a href="#section-3.3.1-1.5" class="pilcrow">¶</a>
</li>
          </ul>
</section>
<section id="section-3.3.2">
          <h4 id="name-pcc-init-procedure">
<a href="#section-3.3.2" class="section-number selfRef">3.3.2. </a><a href="#name-pcc-init-procedure" class="section-name selfRef">PCC-Init Procedure</a>
          </h4>
<p id="section-3.3.2-1">After Root (PCC) discovers the leaves (as an example via MVPN
          Procedures or other mechanism), the following communication happens
          between the PCE and PCCs<a href="#section-3.3.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.2-2.1">Root sends a PCRpt message for P2MP policy to PCE including
              the Root-ID, Tree-ID, PLSP-ID, Instance-ID, symbolic-path-name,
              and any leaves discovered until then.<a href="#section-3.3.2-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.3.2-2.2">
              <p id="section-3.3.2-2.2.1">PCE on receiving of this report, will compute the P2MP Policy
              and its replication segments.<a href="#section-3.3.2-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.2-2.2.2.1">PCE will send a PCInitiate message to the Root, Transit
                  and the Leaf nodes to download the Replication Segment
                  information. These messages will utilize the CCI object to
                  encode the forwarding instruction information.<a href="#section-3.3.2-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-3.3.2-2.2.2.2">PCE will then send a PCUpdate to the root indicating the
                  association information (Candidate path) , and implicitly
                  indicate it to bind to the latest CCI information
                  downloaded.<a href="#section-3.3.2-2.2.2.2" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
</section>
<section id="section-3.3.3">
          <h4 id="name-common-procedure">
<a href="#section-3.3.3" class="section-number selfRef">3.3.3. </a><a href="#name-common-procedure" class="section-name selfRef">Common Procedure</a>
          </h4>
<p id="section-3.3.3-1">The following procedures are the same for PCE or PCC Init.<a href="#section-3.3.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.3-2.1">PCE will download the replication segments for the
              Candidate-path's path-instances to all the leaves and transit
              nodes using PCInitiate message with PLSP-ID = 0, Instance-ID =0,
              symbolic path name, Root-address, Tree-id(assigned by the root).
              This PCInitiate message includes the EROs needed for the
              replication segments. These messages will utilize the CCI object
              to encode the forwarding instruction information.<a href="#section-3.3.3-2.1" class="pilcrow">¶</a>
</li>
          </ul>
<ul class="normal">
<li class="normal" id="section-3.3.3-3.1">
              <p id="section-3.3.3-3.1.1">Any new candidate path for the P2MP Policy is downloaded by
              PCE to the Root by sending a PCInitiate message<a href="#section-3.3.3-3.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.3-3.1.2.1">it should be noted, PLSP-ID, Path-Instance ID and the
                  Tree-ID are generated by the PCC for these new candidate
                  paths and their Path-instances<a href="#section-3.3.3-3.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-3.3.3-3.1.2.2">Any update to the Candidate Paths or Replication Segments
                  is done via the PCUpd message. Association object need to be
                  present for Candidate Path updates and CCI object for the
                  replication segment updates.<a href="#section-3.3.3-3.1.2.2" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-3.3.3-3.2">The PCE will also download the necessary replication segment
              for the candidate path and its path-instances to the root,
              leaves and the transit nodes via a PCInit message<a href="#section-3.3.3-3.2" class="pilcrow">¶</a>
</li>
          </ul>
<ul class="normal">
<li class="normal" id="section-3.3.3-4.1">
              <p id="section-3.3.3-4.1.1">New leaves can be discovered via Multicast procedures, and
              new replication segments can be instantiated or existing one
              updated to reach these leaves<a href="#section-3.3.3-4.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.3-4.1.2.1">If these leaves reside on routers that are part of the
                  P2MP LSP path, then PCUpd is sent from PCE to necessary PCCs
                  (LEAVES, TRANSIT or ROOT) with the correct PLSP-ID,
                  Instance-ID, Tree-ID and CC-ID.<a href="#section-3.3.3-4.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-3.3.3-4.1.2.2">If the new leaves are residing on routers that are not
                  part of the P2MP Tree yet, then a PCInitiate message is sent
                  down with PLSP- ID=0 and Instance-ID=0 on the corresponding
                  routers.<a href="#section-3.3.3-4.1.2.2" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-3.3.3-4.2">The active candidate-path is indicated by the PCC through the
              operational bits(Up/Active) of the LSP object in the PCRpt
              message. If a candidate path needs to be removed, PCE sends PC
              Initiate message, setting the R-flag in the LSP object and R bit
              in the SRP-object.<a href="#section-3.3.3-4.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.3.3-4.3">To remove the entire P2MP-LSP, PCE needs to send PCInitiate
              remove messages for every candidate path of the P2MP POLICY to
              the root and send PCInitiate remove messages for every
              Replication Regment on all the PCCs on the P2MP Tree. The R bit
              in the LSP Object as defined in <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span>, refers
              to the removal of the LSP as identified by the
              SR-P2MP-POLICY-ID-TLV (defined in this document). An all zero
              (SR-P2MP-LSP-ID-TLV defines to remove all the state of the
              corresponding PLSP-ID.<a href="#section-3.3.3-4.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.3.3-4.4">A candidate path is made active based on the preference of
              the path. If the Root is programed with multiple candidate paths
              from different sources, as an example PCE and CLI, based on its
              tie-breaking rules, if it selects the CLI path, it will send a
              report to PCE for the PCE path indicating the status of
              label-download and sets operational bit of the LSP object to UP
              and Not Active . At any instance, only one path will be
              active<a href="#section-3.3.3-4.4" class="pilcrow">¶</a>
</li>
          </ul>
</section>
<section id="section-3.3.4">
          <h4 id="name-global-optimization-of-the-">
<a href="#section-3.3.4" class="section-number selfRef">3.3.4. </a><a href="#name-global-optimization-of-the-" class="section-name selfRef">Global Optimization of the Candidate Path</a>
          </h4>
<p id="section-3.3.4-1">When a P2MP LSP needs to be optimized for any reason (i.e. it is
          taking a FRR tunnel or new routers are added to the network) a
          global optimization of the candidate path is possible.<a href="#section-3.3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.3.4-2">Each Candidate Path can contain two Path-Instances. The current
          unoptimized Path-Instance is the active instance and its replication
          segments are forwarding the multicast PDUs from the root to the
          leaves. However the second optimized Path-Instance will be setup
          with its own unique replication segments throughout the network,
          from the Root to the leaves. These two Path-Instances can co-exist.
          The two Path-Instances are uniquely identified by their Instance-ID
          in the SR-P2MP-POLICY-ID-TLV (defined in this document). After the
          optimized LSP has been downloaded successfully PCC MUST send two
          reports, reporting UP of the new path indicating the new LSP-ID, and
          a second reporting the tear down of the old path with the R bit of
          the LSP Object SET with the old Instance-ID in the
          SR-P2MP-POLICY-ID-TLV. This MBB procedure will move the multicast
          PDUs to the optimized Path-Instance.<a href="#section-3.3.4-2" class="pilcrow">¶</a></p>
<p id="section-3.3.4-3">The leaf should be able to accept traffic from both
          Path-Instances to minimize the traffic outage by the Make Before
          Break process.<a href="#section-3.3.4-3" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3.5">
          <h4 id="name-fast-reroute">
<a href="#section-3.3.5" class="section-number selfRef">3.3.5. </a><a href="#name-fast-reroute" class="section-name selfRef">Fast Reroute</a>
          </h4>
<p id="section-3.3.5-1">Currently this draft identifies the Facility FRR procedures. In
          addition, only LINK Protection procedures are defined. How the
          Facility Path is built and instantiated is beyond the scope of this
          document.<a href="#section-3.3.5-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.3.5-2">
<pre>         R
         | |
          T
          |
         ---
        |   |
        L1 L2

        Figure 1



          R---F1
          |    |
          T---F2
          |
         ---
        |   |
        L1 L2

        Figure 2</pre><a href="#section-3.3.5-2" class="pilcrow">¶</a>
</div>
<p id="section-3.3.5-3">As an example, the bypass path (unicast bypass) between
          the PLR and MP can be constructed via SR or even via a shared tree
          (replication segment).<a href="#section-3.3.5-3" class="pilcrow">¶</a></p>
<p id="section-3.3.5-4">As an example, in figure 1 the detour path between R and T is the
          2nd fiber between these nodes. As such the bypass path could be
          setup on the 2nd fiber. That said in figure 2 the bypass path is
          traversing multiple nodes and this example a unicast SR path might
          be ideal for setting up the detour path.<a href="#section-3.3.5-4" class="pilcrow">¶</a></p>
<p id="section-3.3.5-5">In addition, PHP procedure and implicit null label on the bypass
          path can be implemented to reduce the PCE programming on the MP
          PCC.<a href="#section-3.3.5-5" class="pilcrow">¶</a></p>
<p id="section-3.3.5-6">Optional shared replication segments can be used in networks that
          do not have unicast SR turned on. These shared replication segments
          can be programmed on the bypass nodes without a P2MP Policy. The
          replication segments on primary path can use these shared
          replication segments as a protection tunnel to protect links.<a href="#section-3.3.5-6" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3.6">
          <h4 id="name-connecting-replication-segm">
<a href="#section-3.3.6" class="section-number selfRef">3.3.6. </a><a href="#name-connecting-replication-segm" class="section-name selfRef">Connecting Replication Segment via Segment List</a>
          </h4>
<p id="section-3.3.6-1">There could be nodes between two replication segment that do not
          support P2MP Policy or Replication segment. It is possible to
          connect two non-adjacent Replication segments via a unicast segment
          routing path via a SID list, comprised of any IGP supported segment
          types (ex: Binding, Adjacency, Node) to forward to the next
          replicating node. This information is encoded via the SR-ERO
          sub-objects and ERO-attributes objects. The last segment in an
          encoding SID list MUST be a replication segment<a href="#section-3.3.6-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-3.4">
        <h3 id="name-sr-p2mp-policy-and-replicat">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-sr-p2mp-policy-and-replicat" class="section-name selfRef">SR P2MP Policy and Replication Segment TLVs and Objects</a>
        </h3>
<p id="section-3.4-1"></p>
<section id="section-3.4.1">
          <h4 id="name-sr-p2mp-policy-objects">
<a href="#section-3.4.1" class="section-number selfRef">3.4.1. </a><a href="#name-sr-p2mp-policy-objects" class="section-name selfRef">SR P2MP Policy Objects</a>
          </h4>
<p id="section-3.4.1-1">SR P2MP Policy can be constructed via the following objects<a href="#section-3.4.1-1" class="pilcrow">¶</a></p>
<p id="section-3.4.1-2">&lt;Common Header&gt;<a href="#section-3.4.1-2" class="pilcrow">¶</a></p>
<p id="section-3.4.1-3">&lt;SRP&gt;<a href="#section-3.4.1-3" class="pilcrow">¶</a></p>
<p id="section-3.4.1-4">&lt;P2MP LSP&gt;<a href="#section-3.4.1-4" class="pilcrow">¶</a></p>
<p id="section-3.4.1-5">[&lt;association-list&gt;]<a href="#section-3.4.1-5" class="pilcrow">¶</a></p>
<p id="section-3.4.1-6">optionally if the root is updating the PCE with end point list
          the end-point-list object can be added.<a href="#section-3.4.1-6" class="pilcrow">¶</a></p>
<p id="section-3.4.1-7">[&lt;end-points-list&gt;]<a href="#section-3.4.1-7" class="pilcrow">¶</a></p>
</section>
<section id="section-3.4.2">
          <h4 id="name-replication-segment-objects">
<a href="#section-3.4.2" class="section-number selfRef">3.4.2. </a><a href="#name-replication-segment-objects" class="section-name selfRef">Replication Segment Objects</a>
          </h4>
<p id="section-3.4.2-1">Replication segment can be constructed via the following
          objects<a href="#section-3.4.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.4.2-2">
<pre>   &lt;Common Header&gt;
   &lt;SRP&gt;
   &lt;P2MP LSP&gt;
   (&lt;cci-list&gt;|
   (&lt;CCI&gt;&lt;intended-path&gt;))
   &lt;cci-list&gt; ::=  &lt;CCI&gt;
                  [&lt;cci-list&gt;]
  &lt;intended-path&gt; ::= ((&lt;PATH-ATTRIB&gt;&lt;ERO&gt;)
                      [&lt;intended-path&gt;])



</pre><a href="#section-3.4.2-2" class="pilcrow">¶</a>
</div>
<p id="section-3.4.2-3">Path-attribute as per <span>[<a href="#draft-ietf-pce-multipath" class="xref">draft-ietf-pce-multipath</a>]</span><a href="#section-3.4.2-3" class="pilcrow">¶</a></p>
</section>
<section id="section-3.4.3">
          <h4 id="name-p2mp-policy-and-replication">
<a href="#section-3.4.3" class="section-number selfRef">3.4.3. </a><a href="#name-p2mp-policy-and-replication" class="section-name selfRef">P2MP Policy and Replication Segment general considerations</a>
          </h4>
<p id="section-3.4.3-1">The above new objects and TLV's defined in this document can be
          included in PCRpt, PcInitiate and PcUpd messages.<a href="#section-3.4.3-1" class="pilcrow">¶</a></p>
<p id="section-3.4.3-2">It should be noted that every PcRpt, PcInitiate and PCUpd
          messages will contain full list of the Leaves and segment and
          forwarding information that is needed to build the Candidate path
          and its Replication segments. They will never send the delta
          information related to the new leaves or forwarding information that
          need to be added or updated. This is necessary to ensure that PCE or
          any new PCE is in sync with the PCC.<a href="#section-3.4.3-2" class="pilcrow">¶</a></p>
<p id="section-3.4.3-3">When a PCRpt, PCInitiate and PCUpd messages is sent via PCEP it
          maintains the previous ERO Path IDs and generates new Path IDs for
          new instructions, as per <span>[<a href="#draft-ietf-pce-multipath" class="xref">draft-ietf-pce-multipath</a>]</span>.
          The PATH IDs are maintained for each specific forwarding
          instructions until the instructions are deleted. For example: When
          the first leaf is added, the PCE will update with PathI ID 1 to the
          PCC. When the second leaf is added, according to the path
          calculated, PCE might just append the existing instruction Path ID 1
          with a new Path ID 2 to construct the new PCUpd message.<a href="#section-3.4.3-3" class="pilcrow">¶</a></p>
<p id="section-3.4.3-4">The CCI Object is used to identify the entire cross connect of
          incoming segment and the set of outgoing Interfaces and their
          corresponding SIDs/SIDList. Any modification to the cross connect
          should use this CCI ID to identify the cross connect uniquely.
          Leaves and their corresponding Path IDs can be removed from the
          cross connect identified via the CCI. The CC-ID is assigned by the
          PCE.<a href="#section-3.4.3-4" class="pilcrow">¶</a></p>
</section>
</section>
</section>
<section id="section-4">
      <h2 id="name-object-format">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-object-format" class="section-name selfRef">Object Format</a>
      </h2>
<section id="section-4.1">
        <h3 id="name-open-message-and-capability">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-open-message-and-capability" class="section-name selfRef">Open Message and Capability Exchange</a>
        </h3>
<p id="section-4.1-1">Format of the open Object:<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.1-2">
<pre>    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Ver |   Flags |   Keepalive   |  DeadTimer    |      SID      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   //                        Optional TLVs                        //
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><a href="#section-4.1-2" class="pilcrow">¶</a>
</div>
<p id="section-4.1-3">All the nodes need to establish a PCEP connection with the PCE.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1-4">During PCEP Initialization Phase, PCEP Speakers need to set flags
        N, M, P in the STATEFUL-PCE-CAPABILITY TLV as defined in <span>[<a href="#draft-ietf-pce-stateful-pce-p2mp" class="xref">draft-ietf-pce-stateful-pce-p2mp</a>]</span> section-5.2<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<p id="section-4.1-5">This draft extends the PCEP OPEN object by defining an optional TLV
        to indicate the PCE's capability to perform SR-P2MP path computations
        with a new IANA capability type.<a href="#section-4.1-5" class="pilcrow">¶</a></p>
<p id="section-4.1-6">The inclusion of this TLV in an OPEN object indicates that the
        sender can perform SR-P2MP path computations. This will be similar to
        the P2MP-CAPABILITY defined in <span>[<a href="#RFC8306" class="xref">RFC8306</a>]</span> section-3.1.2
        and a new value needs to be defined for SR-P2MP.<a href="#section-4.1-6" class="pilcrow">¶</a></p>
<section id="section-4.1.1">
          <h4 id="name-pcecc-path-setup-capability">
<a href="#section-4.1.1" class="section-number selfRef">4.1.1. </a><a href="#name-pcecc-path-setup-capability" class="section-name selfRef">PCECC Path Setup Capability</a>
          </h4>
<p id="section-4.1.1-1">A PST of PCECC is also added as per <span>[<a href="#draft-ietf-pce-pcep-extension-for-pce-controller" class="xref">draft-ietf-pce-pcep-extension-for-pce-controller</a>]</span>.<a href="#section-4.1.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1.1-2">This document also introduces a new bit S in the SR PCECC
          capacity Sub TLV indicating the support to handle PCECC based label
          download for Replication segment.<a href="#section-4.1.1-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.1.1-3">
<pre> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |               Type=1          |          Length=4             |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                             Flags                       |S|M|L|
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-4.1.1-3" class="pilcrow">¶</a>
</div>
<p id="section-4.1.1-4">Also, the N,M,P bits in STATEFUL-PCE-CAPABILITY TLV should be
          SET.<a href="#section-4.1.1-4" class="pilcrow">¶</a></p>
</section>
<section id="section-4.1.2">
          <h4 id="name-association-type-capability">
<a href="#section-4.1.2" class="section-number selfRef">4.1.2. </a><a href="#name-association-type-capability" class="section-name selfRef">Association Type Capability</a>
          </h4>
<p id="section-4.1.2-1">A Assoc-Type-List TLV as per <span>[<a href="#RFC8697" class="xref">RFC8697</a>]</span> section 3.4
          should be send via PCEP open object with following association
          type<a href="#section-4.1.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.1.2-2">
<pre>   +-------------------+----------------------------+------------------+
   | Association Type  | Association Name           | Reference        |
   | Value             |                            |                  |
   +-------------------+----------------------------+------------------+
   | TBD1              | P2MP SR Policy Association | This document    |
   +-------------------+----------------------------+------------------+</pre><a href="#section-4.1.2-2" class="pilcrow">¶</a>
</div>
<p id="section-4.1.2-3">OP-CONF-Assoc-RANGE (Operator-configured Association Range)should
          not be set for this association type and must be ignored.<a href="#section-4.1.2-3" class="pilcrow">¶</a></p>
<p id="section-4.1.2-4">The open message MUST include the MULTIPATH CAPABILITY TLV as
          defined in <span>[<a href="#draft-ietf-pce-multipath" class="xref">draft-ietf-pce-multipath</a>]</span><a href="#section-4.1.2-4" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-4.2">
        <h3 id="name-symbolic-name-in-pcinit-mes">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-symbolic-name-in-pcinit-mes" class="section-name selfRef">Symbolic Name in PCInit Message from PCC</a>
        </h3>
<p id="section-4.2-1">As per <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span> section 7.3.2. a Symbolic Path Name
        TLV should uniquely identify the P2MP path on the PCC. This symbolic
        path name is a human-readable string that identifies an P2MP LSP in
        the network. It needs to be constant through the lifetime of the P2MP
        path.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">As an example in the case of P2MP LSP the symbolic name can be p2mp
        policy name + candidate path name of the LSP.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-4.3">
        <h3 id="name-p2mp-policy-specific-object">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-p2mp-policy-specific-object" class="section-name selfRef">P2MP Policy Specific Objects and TLVs</a>
        </h3>
<section id="section-4.3.1">
          <h4 id="name-p2mp-policy-association-gro">
<a href="#section-4.3.1" class="section-number selfRef">4.3.1. </a><a href="#name-p2mp-policy-association-gro" class="section-name selfRef">P2MP Policy Association Group for P2MP Policy</a>
          </h4>
<p id="section-4.3.1-1">Two ASSOCIATION object types for IPv4 and IPv6 are defined in
          <span>[<a href="#RFC8697" class="xref">RFC8697</a>]</span>. The ASSOCIATION object includes
          "Association type" indicating the type of the association group.
          This document adds a new Association type. Association type = TBD1
          "P2MP SR Policy Association Type" for SR Policy Association Group
          (P2MP SRPAG). As per <span>[<a href="#draft-barth-pce-segment-routing-policy-cp" class="xref">draft-barth-pce-segment-routing-policy-cp</a>]</span> section 5,
          three new TLVs are identified to carry association information:
          P2MP-SRPAG- POL-ID-TLV, P2MP-SRPAG-CPATH-ID-TLV,
          P2MP-SRPAG-CPATH-ATTR-TLV<a href="#section-4.3.1-1" class="pilcrow">¶</a></p>
<section id="section-4.3.1.1">
            <h5 id="name-p2mp-sr-policy-association-">
<a href="#section-4.3.1.1" class="section-number selfRef">4.3.1.1. </a><a href="#name-p2mp-sr-policy-association-" class="section-name selfRef">P2MP SR Policy Association Group Policy Identifiers TLV</a>
            </h5>
<p id="section-4.3.1.1-1">The P2MP-SRPOLICY-POL-ID TLV is a mandatory TLV for the
            P2MP-SRPAG Association. Only one P2MP-SRPOLICY-POL-ID TLV can be
            carried and only the first occurrence is processed and any others
            MUST be ignored.<a href="#section-4.3.1.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.3.1.1-2">
<pre>    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |             Type              |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                             Root                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          TREE-ID                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><a href="#section-4.3.1.1-2" class="pilcrow">¶</a>
</div>
<p id="section-4.3.1.1-3">Type: TBD2 for "P2MP-SR-POLICY-POL-ID" TLV.<a href="#section-4.3.1.1-3" class="pilcrow">¶</a></p>
<p id="section-4.3.1.1-4">Length: 8 or 20, depending on length of End-point (IPv4 or
            IPv6)<a href="#section-4.3.1.1-4" class="pilcrow">¶</a></p>
<p id="section-4.3.1.1-5">Tunnel Sender Address : Can be either IPv4 or IPv6, this value
            is the value of the root loopback IP.<a href="#section-4.3.1.1-5" class="pilcrow">¶</a></p>
<p id="section-4.3.1.1-6">Tree-ID: Tree ID that the replication segment is part of as per
            draft-ietf-spring-sr-p2mp-policy<a href="#section-4.3.1.1-6" class="pilcrow">¶</a></p>
<p id="section-4.3.1.1-7"></p>
</section>
<section id="section-4.3.1.2">
            <h5 id="name-p2mp-sr-policy-association-g">
<a href="#section-4.3.1.2" class="section-number selfRef">4.3.1.2. </a><a href="#name-p2mp-sr-policy-association-g" class="section-name selfRef">P2MP SR Policy Association Group Candidate Path Identifiers TLV</a>
            </h5>
<p id="section-4.3.1.2-1">The P2MP-SRPOLICY-CPATH-ID TLV is a mandatory TLV for the
            P2MPSRPAG Association. Only one P2MP-SRPOLICY-CPATH-ID TLV can be
            carried and only the first occurrence is processed and any others
            MUST be ignored.<a href="#section-4.3.1.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.3.1.2-2">
<pre>    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |             Type              |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Proto. Origin |Flags        |A|    Reserved                   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                         Originator ASN                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                       Originator Address                      |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                         Discriminator                         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><a href="#section-4.3.1.2-2" class="pilcrow">¶</a>
</div>
<p id="section-4.3.1.2-3">Type: TBD3 for "P2MP-SR-POLICY-CPATH-ID" TLV.<a href="#section-4.3.1.2-3" class="pilcrow">¶</a></p>
<p id="section-4.3.1.2-4">Length: 28.<a href="#section-4.3.1.2-4" class="pilcrow">¶</a></p>
<p id="section-4.3.1.2-5">Protocol Origin: 8-bit value that encodes the protocol origin,
            as specified in [I-D.ietf-spring-segment-routing-policy] Section
            2.3.<a href="#section-4.3.1.2-5" class="pilcrow">¶</a></p>
<p id="section-4.3.1.2-6">Flags : A: This candidate path is active. At any instance only
            one candidate path can be active. PCC indicates the active
            candidate path to PCE through this bit. Reserved: MUST be set to
            zero on transmission and ignored on receipt.<a href="#section-4.3.1.2-6" class="pilcrow">¶</a></p>
<p id="section-4.3.1.2-7">Originator ASN: Represented as 4 byte number, part of the
            originator identifier, as specified in <span>[<a href="#draft-ietf-spring-segment-routing-policy" class="xref">draft-ietf-spring-segment-routing-policy</a>]</span> Section
            2.4.<a href="#section-4.3.1.2-7" class="pilcrow">¶</a></p>
<p id="section-4.3.1.2-8">Originator Address: Represented as 128 bit value where IPv4
            address are encoded in lowest 32 bits, part of the originator
            identifier, as specified in <span>[<a href="#draft-ietf-spring-segment-routing-policy" class="xref">draft-ietf-spring-segment-routing-policy</a>]</span> Section
            2.4.<a href="#section-4.3.1.2-8" class="pilcrow">¶</a></p>
<p id="section-4.3.1.2-9">Discriminator: 32-bit value that encodes the Discriminator of
            the candidate path.<a href="#section-4.3.1.2-9" class="pilcrow">¶</a></p>
</section>
<section id="section-4.3.1.3">
            <h5 id="name-p2mp-sr-policy-association-gr">
<a href="#section-4.3.1.3" class="section-number selfRef">4.3.1.3. </a><a href="#name-p2mp-sr-policy-association-gr" class="section-name selfRef">P2MP SR Policy Association Group Candidate Path Attributes TLV</a>
            </h5>
<p id="section-4.3.1.3-1">The P2MP-SRPOLICY-CPATH-ATTR TLV is an optional TLV for the
            SRPAG Association. Only one P2MP-SRPOLICY-CPATH-ATTR TLV can be
            carried and only the first occurrence is processed and any others
            MUST be ignored.<a href="#section-4.3.1.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.3.1.3-2">
<pre>    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |             Type              |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                           Preference                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><a href="#section-4.3.1.3-2" class="pilcrow">¶</a>
</div>
<p id="section-4.3.1.3-3">Type: TBD4 for "P2MP-SRPOLICY-CPATH-ATTR" TLV.<a href="#section-4.3.1.3-3" class="pilcrow">¶</a></p>
<p id="section-4.3.1.3-4">Length: 4. Preference: Numerical preference of the candidate
            path, as specified in <span>[<a href="#draft-ietf-spring-segment-routing-policy" class="xref">draft-ietf-spring-segment-routing-policy</a>]</span> Section
            2.7.<a href="#section-4.3.1.3-4" class="pilcrow">¶</a></p>
<p id="section-4.3.1.3-5">If the TLV is missing, a default preference of 100 as specified
            in <span>[<a href="#draft-ietf-spring-segment-routing-policy" class="xref">draft-ietf-spring-segment-routing-policy</a>]</span> is
            used.<a href="#section-4.3.1.3-5" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-4.3.2">
          <h4 id="name-p2mp-end-points-object">
<a href="#section-4.3.2" class="section-number selfRef">4.3.2. </a><a href="#name-p2mp-end-points-object" class="section-name selfRef">P2MP-END-POINTS Object</a>
          </h4>
<p id="section-4.3.2-1">In order for the Root to indicate operations of its
          leaves(Add/Remove/Modify/DoNotModify), the PC Report message is
          extended to include P2MP End Point &lt;P2MP End-points&gt; Object
          which is defined in <span>[<a href="#RFC8306" class="xref">RFC8306</a>]</span><a href="#section-4.3.2-1" class="pilcrow">¶</a></p>
<p id="section-4.3.2-2">The format of the PC Report message is as follow:<a href="#section-4.3.2-2" class="pilcrow">¶</a></p>
<p id="section-4.3.2-3">&lt;Common Header&gt;<a href="#section-4.3.2-3" class="pilcrow">¶</a></p>
<p id="section-4.3.2-4">[&lt;SRP&gt;]<a href="#section-4.3.2-4" class="pilcrow">¶</a></p>
<p id="section-4.3.2-5">&lt;LSP&gt;<a href="#section-4.3.2-5" class="pilcrow">¶</a></p>
<p id="section-4.3.2-6">[&lt;association-list&gt;]<a href="#section-4.3.2-6" class="pilcrow">¶</a></p>
<p id="section-4.3.2-7">[&lt;end-points-list&gt;]<a href="#section-4.3.2-7" class="pilcrow">¶</a></p>
<p id="section-4.3.2-8"></p>
<div class="alignLeft art-text artwork" id="section-4.3.2-9">
<pre>   IPV4-P2MP END-POINTS:

    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          Leaf type                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Source IPv4 address                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Destination IPv4 address                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   ~                           ...                                 ~
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Destination IPv4 address                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   IPV6-P2MP END-POINTS:

    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          Leaf type                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                Source IPv6 address (16 bytes)                 |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |              Destination IPv6 address (16 bytes)              |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   ~                           ...                                 ~
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |              Destination IPv6 address (16 bytes)              |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><a href="#section-4.3.2-9" class="pilcrow">¶</a>
</div>
<p id="section-4.3.2-10">Leaf Types (derived from <span>[<a href="#RFC8306" class="xref">RFC8306</a>]</span> section 3.3.2)
          :<a href="#section-4.3.2-10" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.3.2-11">
<li id="section-4.3.2-11.1">New leaves to add (leaf type = 1)<a href="#section-4.3.2-11.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.3.2-11.2">Old leaves to remove (leaf type = 2)<a href="#section-4.3.2-11.2" class="pilcrow">¶</a>
</li>
            <li id="section-4.3.2-11.3">Old leaves whose path can be modified/reoptimized (leaf type
              = 3), Future reserved not used for tree SID as of now.<a href="#section-4.3.2-11.3" class="pilcrow">¶</a>
</li>
            <li id="section-4.3.2-11.4">Old leaves whose path must be left unchanged (leaf type =
              4)<a href="#section-4.3.2-11.4" class="pilcrow">¶</a>
</li>
            <li id="section-4.3.2-11.5">the entire pce leaf list is overwritten and replaced with the
              new leaf list (leaf type = 5)<a href="#section-4.3.2-11.5" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-4.3.2-12">A given P2MP END-POINTS object gathers the leaves of a
          given type. Note that a P2MP report can mix the different types of
          leaves by including several P2MP END-POINTS objects. The END-POINTS
          object body has a variable length. These are multiples of 4 bytes
          for IPv4, multiples of 16 bytes, plus 4 bytes, for IPv6.<a href="#section-4.3.2-12" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-4.4">
        <h3 id="name-p2mp-policy-and-replication-">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-p2mp-policy-and-replication-" class="section-name selfRef">P2MP Policy and Replication Segment Identifier Object and TLV</a>
        </h3>
<p id="section-4.4-1">As it was mentioned previously both P2MP Policy and Replication
        Segment are identified via the LSP object and more precisely via the
        SR-P2MP-LSPID-TLV<a href="#section-4.4-1" class="pilcrow">¶</a></p>
<p id="section-4.4-2">The P2MP Policy uses the PLSP-ID to identify the Candidate Paths
        and the Instance-ID to identify a Path-Instance with in the Candidate
        path.<a href="#section-4.4-2" class="pilcrow">¶</a></p>
<p id="section-4.4-3">On other hand the Replication Segment uses the SR-P2MP-LSPID-TLV to
        identify and correlate a Replication Segment to a P2MP Policy<a href="#section-4.4-3" class="pilcrow">¶</a></p>
<p id="section-4.4-4">As it was noted previously on the Root, the P2MP Policy and the
        Replication Segment is downloaded via the same PCUpd message.<a href="#section-4.4-4" class="pilcrow">¶</a></p>
<section id="section-4.4.1">
          <h4 id="name-extension-of-the-lsp-object">
<a href="#section-4.4.1" class="section-number selfRef">4.4.1. </a><a href="#name-extension-of-the-lsp-object" class="section-name selfRef">Extension of the LSP Object, SR-P2MP-LSPID-TLV</a>
          </h4>
<p id="section-4.4.1-1">The LSP Object is defined in Section 7.3 of <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span>. It specifies the PLSP-ID to uniquely identify an
          LSP that is constant for the life time of a PCEP session. Similarly,
          for a P2MP tunnel, the PLSP-ID identify a Candidate Path uniquely
          with in the P2MP policy.<a href="#section-4.4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.4.1-2">The LSP Object MUST include the new SR-P2MP-POLICY-ID-TLV
          (IPV4/IpV6) defined in this document below. This is a variation to
          the P2MP object defined in <span>[<a href="#draft-ietf-pce-stateful-pce-p2mp" class="xref">draft-ietf-pce-stateful-pce-p2mp</a>]</span><a href="#section-4.4.1-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.4.1-3">
<pre>SR-IPV4-P2MP-POLICY-ID TLV:

       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           Type=TBD            |           Length=10           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   Root                                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                  Tree-ID                                      |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |            Path-Instance-ID   |       Reserved                |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   SR-IPV6-P2MP-POLICY-ID TLV :

        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           Type=TBD            |           Length=22           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      +                                                               +
      |                  Root                                         |
      +                          (16 octets)                          +
      |                                                               |
      +                                                               +
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                             Tree-ID                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             Path-Instance-ID  |       Reserved                |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><a href="#section-4.4.1-3" class="pilcrow">¶</a>
</div>
<p id="section-4.4.1-4">The type (16-bit) of the TLV is TBD (need allocation by
          IANA).<a href="#section-4.4.1-4" class="pilcrow">¶</a></p>
<p id="section-4.4.1-5">Root: Source Router IP Address<a href="#section-4.4.1-5" class="pilcrow">¶</a></p>
<p id="section-4.4.1-6">Tree-ID: Unique Identifier of this P2MP LSP on the Root.<a href="#section-4.4.1-6" class="pilcrow">¶</a></p>
<p id="section-4.4.1-7">Instance-ID : Contains 16 Bit instance ID.<a href="#section-4.4.1-7" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-4.5">
        <h3 id="name-replication-segment">
<a href="#section-4.5" class="section-number selfRef">4.5. </a><a href="#name-replication-segment" class="section-name selfRef">Replication Segment</a>
        </h3>
<p id="section-4.5-1">As per <span>[<a href="#draft-ietf-spring-sr-replication-segment" class="xref">draft-ietf-spring-sr-replication-segment</a>]</span> a
        replication segment has a next-hop-group which MAY contain a single
        outgoing replication SID or a list of SIDs (sr-policy-sid-list) In
        either case there needs to be a replication SID at the bottom of the
        stack. This means two replication segments can be directly connected
        or connected via a SR domain.<a href="#section-4.5-1" class="pilcrow">¶</a></p>
<section id="section-4.5.1">
          <h4 id="name-the-format-of-the-replicati">
<a href="#section-4.5.1" class="section-number selfRef">4.5.1. </a><a href="#name-the-format-of-the-replicati" class="section-name selfRef">The format of the replication segment message</a>
          </h4>
<p id="section-4.5.1-1">The format of a Replication Segment message encoding is similar
          to P2MP Policy. However, the P2MP Policy contains the association
          object and the replication segment message does not contain the
          association object. In addition the replication segment uses the CCI
          object to identify a P2MP cross connect. The replication segment is
          downloaded individually to the root, transit and leaf nodes without
          the P2MP Policy. The P2MP Policy is a Root Concept. The replication
          segment uses SR-P2MP-LSPID-TLV as its identifier. The TLV is coded
          differently for shared and non-shared case.<a href="#section-4.5.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.5.1-2.1">In the case of a replication segment being shared, the
              Tree-ID in the SR-P2MP-POLICY Identifier TLV is the
              replication-id of the Replication Segment and Root = 0,
              Instance-Id = 0. When downloading a shared replication segment
              from PCE through a PcInitiate message, the SR-P2MP-POLICY
              Identifier TLV is all 0, and on the report back from PCC, PCC
              generates PLSP-ID, Replication-id (Tree-id field will be
              populated with replication-id). Instance-id will be 0.<a href="#section-4.5.1-2.1" class="pilcrow">¶</a>
</li>
          </ul>
</section>
<section id="section-4.5.2">
          <h4 id="name-pcecc">
<a href="#section-4.5.2" class="section-number selfRef">4.5.2. </a><a href="#name-pcecc" class="section-name selfRef">PCECC</a>
          </h4>
<p id="section-4.5.2-1">The CCI Object as defined in <span>[<a href="#draft-ietf-pce-pcep-extension-for-pce-controller" class="xref">draft-ietf-pce-pcep-extension-for-pce-controller</a>]</span> is used
          to identify a forwarding instruction in the Replication Segment. A
          forwarding instruction is incoming SID and a set of outgoing
          branches. The CCI Object-Type of 1 is used for the MPLS Label. The
          label in the CCI Object is the incoming SID. The outgoing SIDs are
          defined by the ERO Objects.<a href="#section-4.5.2-1" class="pilcrow">¶</a></p>
<p id="section-4.5.2-2">The CCI Object can be include in Reports, initiate and Update
          messages for Replication Segments.<a href="#section-4.5.2-2" class="pilcrow">¶</a></p>
<p id="section-4.5.2-3">The PCInitiate message defined in <span>[<a href="#RFC8281" class="xref">RFC8281</a>]</span> and
          extended in <span>[<a href="#draft-ietf-pce-pcep-extension-for-pce-controller" class="xref">draft-ietf-pce-pcep-extension-for-pce-controller</a>]</span> is
          further extended to support SR-P2MP replication segment based
          central control instructions.<a href="#section-4.5.2-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.5.2-4">
<pre>   The format of the extended PCInitiate message is as follows:
        &lt;PCInitiate Message&gt; ::= &lt;Common Header&gt;
                                 &lt;PCE-initiated-lsp-list&gt;
     Where:
        &lt;Common Header&gt; is defined in [RFC5440]

        &lt;PCE-initiated-lsp-list&gt; ::= &lt;PCE-initiated-lsp-request&gt;
                                     [&lt;PCE-initiated-lsp-list&gt;]

        &lt;PCE-initiated-lsp-request&gt; ::=
                             (&lt;PCE-initiated-lsp-instantiation&gt;|
                              &lt;PCE-initiated-lsp-deletion&gt;|
                              &lt;PCE-initiated-lsp-central-control&gt;)

        &lt;PCE-initiated-lsp-central-control&gt; ::= &lt;SRP&gt;
                                                &lt;LSP&gt;
                                                (&lt;cci-list&gt;|
                                                (&lt;CCI&gt;&lt;intended-path&gt;))

        &lt;cci-list&gt; ::=  &lt;CCI&gt;
                        [&lt;cci-list&gt;]

      &lt;intended-path&gt; ::= ((&lt;PATH-ATTRIB&gt;&lt;ERO&gt;)
                          [&lt;intended-path&gt;])

     Where:
         &lt;PCE-initiated-lsp-instantiation&gt; and
         &lt;PCE-initiated-lsp-deletion&gt; are as per
         [RFC8281].
</pre><a href="#section-4.5.2-4" class="pilcrow">¶</a>
</div>
<p id="section-4.5.2-5">The LSP and SRP object is defined in <span>[<a href="#RFC8231" class="xref">RFC8231</a>]</span>.
          The &lt;intended-path&gt; is as per <span>[<a href="#RFC8281" class="xref">RFC8281</a>]</span> <span>[<a href="#draft-ietf-pce-multipath" class="xref">draft-ietf-pce-multipath</a>]</span> (PATH-ATTRIB and ERO).<a href="#section-4.5.2-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.5.2-6">
<pre>The format of the PCRpt message is as follows:

         &lt;PCRpt Message&gt; ::= &lt;Common Header&gt;
                             &lt;state-report-list&gt;
      Where:

         &lt;state-report-list&gt; ::= &lt;state-report&gt;[&lt;state-report-list&gt;]

         &lt;state-report&gt; ::= (&lt;lsp-state-report&gt;|
                             &lt;central-control-report&gt;)

         &lt;lsp-state-report&gt; ::= [&lt;SRP&gt;]
                                &lt;LSP&gt;
                                &lt;path&gt;

         &lt;central-control-report&gt; ::= [&lt;SRP&gt;]
                                      &lt;LSP&gt;
                                      (&lt;cci-list&gt;|
                                      (&lt;CCI&gt;&lt;intended-path&gt;))

         &lt;cci-list&gt; ::=  &lt;CCI&gt;
                         [&lt;cci-list&gt;]

       Where:
         &lt;path&gt; is as per [RFC8231] and the LSP and SRP object are
         also defined in [RFC8231].
         The &lt;intended-path&gt; is as per [draft-ietf-pce-multipath] (PATH-ATTRIB
         and ERO).

</pre><a href="#section-4.5.2-6" class="pilcrow">¶</a>
</div>
<p id="section-4.5.2-7">This document extends the use of PCUpd message with SR-P2MP CCI
          as follows:<a href="#section-4.5.2-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.5.2-8">
<pre>      &lt;PCUpd Message&gt; ::= &lt;Common Header&gt;
                          &lt;update-request-list&gt;
   Where:

      &lt;update-request-list&gt; ::= &lt;update-request&gt;[&lt;update-request-list&gt;]

      &lt;update-request&gt; ::= (&lt;lsp-update-request&gt;|
                             &lt;central-control-update&gt;)

      &lt;lsp-update-request&gt; ::= &lt;SRP&gt;
                               &lt;LSP&gt;
                               &lt;path&gt;

      &lt;central-control-update&gt; ::= &lt;SRP&gt;
                                   &lt;LSP&gt;
                                   (&lt;CCI&gt;&lt;intended-path&gt;)

   Where:
      &lt;path&gt; is as per [RFC8231] and the LSP and SRP object are
      also defined in [RFC8231].
      The &lt;intended-path&gt; is as per [draft-ietf-pce-multipath] (PATH-ATTRIB
      and ERO).


</pre><a href="#section-4.5.2-8" class="pilcrow">¶</a>
</div>
<p id="section-4.5.2-9"></p>
</section>
<section id="section-4.5.3">
          <h4 id="name-label-action-rules-in-repli">
<a href="#section-4.5.3" class="section-number selfRef">4.5.3. </a><a href="#name-label-action-rules-in-repli" class="section-name selfRef">Label action rules in replicating segment</a>
          </h4>
<p id="section-4.5.3-1">The node action and role of ingress, transit, leaf or bud, is
          indicated via a new Node Role TLV. This document introduces a new
          SR-P2MP-NODE-ROLE TLV (Type To be assigned by IANA) that will be
          present in the PATH-ATTRIB object.<a href="#section-4.5.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.5.3-2">
<pre>       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           Type=TBD            |           Length=4            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   Role Type   |                 Reserved                      |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><a href="#section-4.5.3-2" class="pilcrow">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-4.5.3-3.1">ingress, role type = 1<a href="#section-4.5.3-3.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-4.5.3-3.2">transit, role type = 2<a href="#section-4.5.3-3.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-4.5.3-3.3">leaf, role type = 3<a href="#section-4.5.3-3.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-4.5.3-3.4">bud, role type = 4<a href="#section-4.5.3-3.4" class="pilcrow">¶</a>
</li>
          </ul>
</section>
<section id="section-4.5.4">
          <h4 id="name-sr-ero-rules">
<a href="#section-4.5.4" class="section-number selfRef">4.5.4. </a><a href="#name-sr-ero-rules" class="section-name selfRef">SR-ERO Rules</a>
          </h4>
<p id="section-4.5.4-1">Forwarding information of a replication segment can be configured
          and steered via many different mechanisms.<a href="#section-4.5.4-1" class="pilcrow">¶</a></p>
<p id="section-4.5.4-2">As an example a replication SID can be steered via:<a href="#section-4.5.4-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.5.4-3">
<li id="section-4.5.4-3.1">
              <p id="section-4.5.4-3.1.1">Replication SID steered with an IPv4/IPv6 directly connected
              nexthop<a href="#section-4.5.4-3.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.5.4-3.1.2.1">In this case there will two SR-ERO in the ERO Object,
                  with the Replication SID SR-ERO at the bottom and the
                  IPv4/IPv6 SR-ERO on the top.<a href="#section-4.5.4-3.1.2.1" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li id="section-4.5.4-3.2">
              <p id="section-4.5.4-3.2.1">Replication SID steered with an IPv4/IPv6 loopback address
              that reside on the directly connected router.<a href="#section-4.5.4-3.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.5.4-3.2.2.1">In this case there will two SR-ERO in the ERO Object,
                  with the Replication SID SR-ERO at the bottom and the
                  IPv4/IPv6 SR-ERO on the top.<a href="#section-4.5.4-3.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.5.4-3.2.2.2">In addition a new flag D is added to the SR-ERO to signal
                  that the Loopback nexthop is connected to the directly
                  attached router.<a href="#section-4.5.4-3.2.2.2" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li id="section-4.5.4-3.3">Replication SID steered with unnumbered IPv4/IPv6 directly
              connected Interface<a href="#section-4.5.4-3.3" class="pilcrow">¶</a>
</li>
            <li id="section-4.5.4-3.4">
              <p id="section-4.5.4-3.4.1">Replication SID steered via a SR adjacency or node SID<a href="#section-4.5.4-3.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.5.4-3.4.2.1">In this case even a sid-list can be used to traffic
                  engineer the path between two Replication Segment<a href="#section-4.5.4-3.4.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-4.5.4-3.4.2.2">The Replication SID SR-ERO is at the bottom while the
                  segments describing the path are on top in order.<a href="#section-4.5.4-3.4.2.2" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ol>
<section id="section-4.5.4.1">
            <h5 id="name-sr-ero-subobject-changes">
<a href="#section-4.5.4.1" class="section-number selfRef">4.5.4.1. </a><a href="#name-sr-ero-subobject-changes" class="section-name selfRef">SR-ERO subobject changes</a>
            </h5>
<p id="section-4.5.4.1-1">SR-ERO from RFC 8664 is used to construct the forwarding
            information needed for Replication Segment.<a href="#section-4.5.4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.5.4.1-2">A new D flag was added to indicate a loopback nexthop that is
            residing on the directly attached router. It should be noted that
            this flag should be set only for the loopback case and not for a
            local interface as a nexthop.<a href="#section-4.5.4.1-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.5.4.1-3">
<pre>      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |L|   Type=36   |     Length    |  NT   |     Flags   |D|F|S|C|M|
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                         SID (optional)                        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     //                   NAI (variable, optional)                  //
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-4.5.4.1-3" class="pilcrow">¶</a>
</div>
<p id="section-4.5.4.1-4">Flags : F, S, C, M are already defined in rfc8664.<a href="#section-4.5.4.1-4" class="pilcrow">¶</a></p>
<p id="section-4.5.4.1-5">This document defines a new flag D: If the next-hop in NAI
            field is system IP or loopback, this bit indicates whether the
            system IP / loopback is directly connected router or not. If set
            indicates directly connected address. When this bit is set, F bit
            should be 0 (meaning NAI should be present)<a href="#section-4.5.4.1-5" class="pilcrow">¶</a></p>
</section>
</section>
</section>
</section>
<section id="section-5">
      <h2 id="name-tree-deletion">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-tree-deletion" class="section-name selfRef">Tree Deletion</a>
      </h2>
<p id="section-5-1">To delete the entire tree (P2MP LSP), Root send a PCRpt message with
      the R bit of the LSP object set and all the fields of the SR-P2MP-
      LSP-ID TLV set to 0(indicating to remove all state associated with this
      P2MP tunnel). The PCE in response sends a PCInitiate message with R bit
      in the SRP object SET to all nodes along the path to indicate deletion
      of the entries.<a href="#section-5-1" class="pilcrow">¶</a></p>
</section>
<section id="section-6">
      <h2 id="name-fragmentation">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-fragmentation" class="section-name selfRef">Fragmentation</a>
      </h2>
<p id="section-6-1">The Fragmentation bit in the LSP object (F bit) can be used to
      indicate a fragmented PCEP message<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
<section id="section-7">
      <h2 id="name-example-workflows">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-example-workflows" class="section-name selfRef">Example Workflows</a>
      </h2>
<p id="section-7-1">PCC-Initiated Workflow<a href="#section-7-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7-2">
<pre>                 +-------+                             +-------+
                  |PCC    |                             |  PCE  |
                  |Root   |                             +-------+
           +------|       |                                 |
           | PCC  +-------+                                 |
           | Transit| |                                     |
    +------|        | |---PCRpt,PLSP-ID=1,D=1--------------&gt;| PCECC LSP
    |PCC   +--------+ |   N=1,root-addr,tree-id=a,          | SR-Policy
    |        |  |     |   instance-id =b,                   | Report to
    |Leaf    |  |     |   p2mp-end-points(LeafType=5)       | PCE
    +--------+  |     |                                     |
        |       |     |                                     |
        |       |     |&lt;--PCUpdate,PLSP-ID=1, SRP-ID =1,    | Update
        |       |     |   root-addr,tree-id=a,instance-id=b,| CP
        |       |     |   p2mp-end-points, association-obj  |
        |       |     |                                     |
        |       |     |-------PCRpt,PLSP-ID=1, SRP-ID = 1,-&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=b,|
        |       |     |      p2mp-end-points(LeafType=5)    |
        |       |     |      association-object,            |
        |       |     |                                     |
        |&lt;---------------PCInitiate,PLSP-ID=0, -------------| Download
        |       |     |   root-addr,tree-id=a,instance-id=0,| Leaf
        |       |     |  CC-ID=Z,C=0,                       | Replication
        |       |     |  O=0,L=z,path-attribute,ERO,SR-ERO  | Segment(RS)
        |       |     |                                     |
        |---------------------PCRpt,PLSP-ID=1--------------&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=b,|
        |       |     |       CC-ID=Z,Label=z,O=0,          |
        |       |     |      path-attribute,ERO,SR-ERO      |
        |       |     |                                     |
        |       |&lt;-------PCInitiate,PLSP-ID=0, -------------| Download
        |       |     |   root-addr,tree-id=a,instance-id=0,| Transit
        |       |     |  CC-ID=Y,C=0,                       | RS
        |       |     |  O=0,L=y,path-attribute,ERO,SR-ERO  |
        |       |     |                                     |
        |       |-------------PCRpt,PLSP-ID=2--------------&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=c,|
        |       |     |       CC-ID=Y,Label=y,O=0,          |
        |       |     |      path-attribute,ERO,SR-ERO      |
        |       |     |                                     |
        |       |     |&lt;--PCInitiate,PLSP-ID=1,             | Download
        |       |     |   root-addr,tree-id=a,instance-id=b,| Root
        |       |     |   CC-ID=X,C=0,                      | RS
        |       |     | O=0,L=x,p2mp-end-                   |
        |       |     |   points(LeafType=5),path-attribute,|
        |       |     |   ERO,SR-ERO                        |
        |       |     |                                     |
        |       |     |-------PCRpt,PLSP-ID=1--------------&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=b,|
        |       |     |    CC-ID=X,Label=x,O=0,             |
        |       |     |      p2mp-end-points(LeafType=5)    |
        |       |     |      path-attriute,ERO,SR-ERO       |
        |       |     |                                     |
        |       |     |&lt;--PCUpdate,PLSP-ID=1, SRP-ID =2,    |
        |       |     |   root-addr,tree-id=a,instance-id=b,| Activate
        |       |     |   p2mp-end-points                   | CP to last
        |       |     |                                     | RS
        |       |     |-------PCRpt,PLSP-ID=1, SRP-ID =2, -&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=b,|
        |       |     |      p2mp-end-points(LeafType=5)    |
        |       |     |                                     |

</pre><a href="#section-7-2" class="pilcrow">¶</a>
</div>
<p id="section-7-3">Note that on transit / leaf Initiate is with PLSP-ID = 0. Therefore
      PLSP-ID is locally unique to a node. It should be noted that the CC-ID
      does not need to be constant across all nodes that make up the path.<a href="#section-7-3" class="pilcrow">¶</a></p>
<p id="section-7-4">PCE-Initiated workflow<a href="#section-7-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7-5">
<pre>                 +-------+                             +-------+
                  |PCC    |                             |  PCE  |
                  |Root   |                             +-------+
           +------|       |                                 |
           | PCC  +-------+                                 |
           | Transit| |                                     |
    +------|        | |                                     | PCECC LSP
    |PCC   +--------+ |                                     |
    |        |  |     |                                     |
    |Leaf    |  |     |                                     |
    +--------+  |     |                                     |
        |&lt;---------------PCInitiate,PLSP-ID=0, -------------| Download
        |       |     |   root-addr,tree-id=a,instance-id=0,| Leaf RS
        |       |     |  CC-ID=Z,C=0,                       |
        |       |     |  O=0,L=z,path-attribute,ERO,SR-ERO  |
        |       |     |                                     |
        |---------------------PCRpt,PLSP-ID=1--------------&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=b,|
        |       |     |       CC-ID=Z,Label=z,O=0,          |
        |       |     |      path-attribute,ERO,SR-ERO      |
        |       |     |                                     |
        |       |&lt;-------PCInitiate,PLSP-ID=0, -------------| Download
        |       |     |   root-addr,tree-id=a,instance-id=0,| Transit RS
        |       |     |  CC-ID=Y,C=0,                       |
        |       |     |  O=0,L=y,path-attribute,ERO,SR-ERO  |
        |       |     |                                     |
        |       |-------------PCRpt,PLSP-ID=2--------------&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=c,|
        |       |     |       CC-ID=Y,Label=y,O=0,          |
        |       |     |      path-attribute,ERO,SR-ERO      |
        |       |     |                                     |
        |       |     |&lt;--PCInitiate,PLSP-ID=0,             | Initiate
        |       |     |   root-addr,tree-id=0,instance-id=0,| CP
        |       |     |   p2mp-end-points, association-obj  |
        |       |     |                                     |
        |       |     |-------PCRpt,PLSP-ID=1,-------------&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=b,|
        |       |     |      p2mp-end-points(LeafType=5)    |
        |       |     |      association-object,            |
        |       |     |                                     |
        |       |     |&lt;--PCInitiate,PLSP-ID=1,             | Download
        |       |     |   root-addr,tree-id=a,instance-id=b,| Root RS
        |       |     |   CC-ID=X,C=0,                      |
        |       |     | O=0,L=x,p2mp-end-                   |
        |       |     |   points(LeafType=5),path-attribute,|
        |       |     |   ERO,SR-ERO                        |
        |       |     |                                     |
        |       |     |-------PCRpt,PLSP-ID=1--------------&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=b,|
        |       |     |    CC-ID=X,Label=x,O=0,             |
        |       |     |      p2mp-end-points(LeafType=5)    |
        |       |     |      path-attriute,ERO,SR-ERO       |
        |       |     |                                     |
        |       |&lt;-------PCInitiate,PLSP-ID=0, -------------|
        |       |     |   root-addr,tree-id=a,instance-id=0,|
        |       |     |  CC-ID=Y,C=0,                       |
        |       |     |  O=0,L=y,path-attribute,ERO,SR-ERO  |
        |       |     |                                     |
        |       |-------------PCRpt,PLSP-ID=2--------------&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=c,|
        |       |     |       CC-ID=Y,Label=y,O=0,          |
        |       |     |      path-attribute,ERO,SR-ERO      |
        |       |     |                                     |
        |       |     |&lt;--PCUpdate,PLSP-ID=1, SRP-ID =1,    | Bind and
        |       |     |   root-addr,tree-id=a,instance-id=b,| Activate
        |       |     |   p2mp-end-points,                  | CP to last
        |       |     |                                     | RS
        |       |     |-------PCRpt,PLSP-ID=1, SRP-ID = 1,-&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=b,|
        |       |     |      p2mp-end-points(LeafType=5)    |


</pre><a href="#section-7-5" class="pilcrow">¶</a>
</div>
<p id="section-7-6">MBB Workflow:<a href="#section-7-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7-7">
<pre>Common (PCE-INIT, PCC-INIT) MBB

                 +-------+                             +-------+
                  |PCC    |                             |  PCE  |
                  |Root   |                             +-------+
           +------|       |                                 |
           | PCC  +-------+                                 |
           | Transit| |                                     |
    +------|        | |                                     | PCECC LSP
    |PCC   +--------+ |                                     |
    |        |  |     |                                     |
    |Leaf    |  |     |                                     |
    +--------+  |     |                                     |
        |&lt;---------------PCInitiate,PLSP-ID=1, -------------| Download
        |       |     |   root-addr,tree-id=a,instance-id=b,| new RS on
        |       |     |  CC-ID=Z1,C=0,                      | Leaf
        |       |     |  O=0,L=z1,path-attribute,ERO,SR-ERO |
        |       |     |                                     |
        |---------------------PCRpt,PLSP-ID=1--------------&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=b,|
        |       |     |       CC-ID=Z1,Label=z1,O=0,        |
        |       |     |      path-attribute,ERO,SR-ERO      |
        |       |     |                                     |
        |       |&lt;-------PCInitiate,PLSP-ID=2, -------------| Download
        |       |     |   root-addr,tree-id=a,instance-id=c,| new RS on
        |       |     |  CC-ID=Y1,C=0,                      | Transit
        |       |     |  O=0,L=y1,path-attribute,ERO,SR-ERO |
        |       |     |                                     |
        |       |-------------PCRpt,PLSP-ID=2--------------&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=c,|
        |       |     |       CC-ID=Y1,Label=y1,O=0,        |
        |       |     |      path-attribute,ERO,SR-ERO      |
        |       |     |                                     |
        |       |     |&lt;--PCInitiate,PLSP-ID=1,             | Download
        |       |     |   root-addr,tree-id=a,instance-id=b,| new RS on
        |       |     |   CC-ID=X1,C=0,                     | Root
        |       |     | O=0,L=x1,p2mp-end-                  |
        |       |     |   points(LeafType=5),path-attribute,|
        |       |     |   ERO,SR-ERO                        |
        |       |     |                                     |
        |       |     |-------PCRpt,PLSP-ID=1--------------&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=b,|
        |       |     |    CC-ID=X1,Label=x1,O=0,           |
        |       |     |      p2mp-end-points(LeafType=5)    |
        |       |     |      path-attriute,ERO,SR-ERO       |
        |       |     |                                     |
        |       |     |&lt;--PCUpdate,PLSP-ID=1, SRP-ID =1,    | Bind and
        |       |     |   root-addr,tree-id=a,instance-id=b,| Activate
,       |       |     |   p2mp-end-points,                  | CP to last
        |       |     |                                     | RS
        |       |     |-------PCRpt,PLSP-ID=1, SRP-ID = 1,-&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=b,|
        |       |     |      p2mp-end-points(LeafType=5)    |
        |       |     |                                     |
        |       |     |&lt;--PCInitiate,PLSP-ID=1,R=1          | Remove
        |       |     |   root-addr,tree-id=a,instance-id=b,| the old RS
        |       |     |   CC-ID=X1,C=0                      | from Leaf
        |       |     | O=0,L=x1,p2mp-end-                   |
        |       |     |   points(LeafType=5),path-attribute,|
        |       |     |   ERO,SR-ERO                        |
        |       |     |                                     |
        |       |     |-------PCRpt,PLSP-ID=1, R=1---------&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=b,|
        |       |     |    CC-ID=X1,Label=x1,O=0,             |
        |       |     |      p2mp-end-points(LeafType=5)    |
        |       |     |      path-attriute,ERO,SR-ERO       |
        |       |     |                                     |
        |       |&lt;-------PCInitiate,PLSP-ID=2, R=1----------| Remove the
        |       |     |   root-addr,tree-id=a,instance-id=c,| old RS from
        |       |     |  CC-ID=Y1,C=0,                      | Transit
        |       |     |  O=0,L=y1,path-attribute,ERO,SR-ERO |
        |       |     |                                     |
        |       |-------------PCRpt,PLSP-ID=2, R=1---------&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=c,|
        |       |     |       CC-ID=Y1,Label=y1,O=0,        |
        |       |     |      path-attribute,ERO,SR-ERO      |
        |       |     |                                     |
        |&lt;---------------PCInitiate,PLSP-ID=1,R=1-----------| Remove the
        |       |     |   root-addr,tree-id=a,instance-id=b,| old RS from
        |       |     |  CC-ID=Z1,C=0,                       | Root
        |       |     |  O=0,L=z1,path-attribute,ERO,SR-ERO  |
        |       |     |                                     |
        |---------------------PCRpt,PLSP-ID=1,R=1----------&gt;|
        |       |     |   root-addr,tree-id=a,instance-id=b,|
        |       |     |       CC-ID=Z1,Label=z1,O=0,         |
        |       |     |      path-attribute,ERO,SR-ERO      |

</pre><a href="#section-7-7" class="pilcrow">¶</a>
</div>
<p id="section-7-8"></p>
</section>
<section id="section-8">
      <h2 id="name-iana-consideration">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-consideration" class="section-name selfRef">IANA Consideration</a>
      </h2>
<p id="section-8-1"></p>
<ol start="1" type="1" class="normal type-1" id="section-8-2">
<li id="section-8-2.1">This draft extends the PCEP OPEN object by defining an optional
          TLV to indicate the PCE's capability to perform SR-P2MP path
          computations with a new IANA capability type (TBD).<a href="#section-8-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-8-2.2">PCEP open object with a new association type " P2MP SR Policy
          Association " value (TBD).<a href="#section-8-2.2" class="pilcrow">¶</a>
</li>
        <li id="section-8-2.3">
          <p id="section-8-2.3.1">A new Association type. Association type = TBD1 "P2MP SR Policy
          Association Type" for SR Policy Association Group (P2MP SRPAG)<a href="#section-8-2.3.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-8-2.3.2">
<li id="section-8-2.3.2.1">three new TLVs are identified to carry association
              information: P2MP-SRPAG- POL-ID-TLV, P2MP-SRPAG-CPATH-ID-TLV,
              P2MP-SRPAG-CPATH-ATTR-TLV<a href="#section-8-2.3.2.1" class="pilcrow">¶</a>
</li>
          </ol>
</li>
        <li id="section-8-2.4">Two new TLVs for Identifying the P2MP Policy and the Replication
          segment SR-IPV4-P2MP-POLICY-ID TLV and SR-IPV6-P2MP-POLICY-ID
          TLV<a href="#section-8-2.4" class="pilcrow">¶</a>
</li>
        <li id="section-8-2.5">A new SR-P2MP-NODE-ROLE TLV (Type To be assigned by IANA) that
          will be present in the PATH-ATTRIB object<a href="#section-8-2.5" class="pilcrow">¶</a>
</li>
      </ol>
</section>
<section id="section-9">
      <h2 id="name-security-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-9-1">TBD<a href="#section-9-1" class="pilcrow">¶</a></p>
</section>
<section id="section-10">
      <h2 id="name-acknowledgments">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-10-1">The authors would like to thank Tanmoy Kundu and Stone Andrew at
      Nokia for their feedback and major contribution to this draft.<a href="#section-10-1" class="pilcrow">¶</a></p>
</section>
<section id="section-11">
      <h2 id="name-references">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-11.1">
        <h3 id="name-normative-references">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-11.2">
        <h3 id="name-informative-references">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="draft-barth-pce-segment-routing-policy-cp">[draft-barth-pce-segment-routing-policy-cp]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="draft-dhs-spring-sr-p2mp-policy-yang">[draft-dhs-spring-sr-p2mp-policy-yang]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="draft-ietf-pce-multipath">[draft-ietf-pce-multipath]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="draft-ietf-pce-pcep-extension-for-pce-controller">[draft-ietf-pce-pcep-extension-for-pce-controller]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="draft-ietf-pce-segment-routing-policy-cp">[draft-ietf-pce-segment-routing-policy-cp]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="draft-ietf-pce-stateful-pce-p2mp">[draft-ietf-pce-stateful-pce-p2mp]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="draft-ietf-pim-sr-p2mp-policy">[draft-ietf-pim-sr-p2mp-policy]</dt>
        <dd>
<span class="refTitle">"D. Yoyer, C. Filsfils, R.Prekh, H.bidgoli, Z. Zhang, "draft-voyer-pim-sr-p2mp-policy""</span>, <time datetime="2019-10" class="refDate">October 2019</time>. </dd>
<dd class="break"></dd>
<dt id="draft-ietf-spring-segment-routing-policy">[draft-ietf-spring-segment-routing-policy]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="draft-ietf-spring-sr-replication-segment">[draft-ietf-spring-sr-replication-segment]</dt>
        <dd>
<span class="refTitle">"D. Yoyer, C. Filsfils, R.Prekh, H.bidgoli, Z. Zhang, "draft-voyer-pim-sr-p2mp-policy "draft-voyer-spring-sr-replication-segment""</span>, <time datetime="2020-07" class="refDate">July 2020</time>. </dd>
<dd class="break"></dd>
<dt id="draft-parekh-bess-mvpn-sr-p2mp">[draft-parekh-bess-mvpn-sr-p2mp]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="draft-sivabalan-pce-binding-label-sid">[draft-sivabalan-pce-binding-label-sid]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3209">[RFC3209]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5440">[RFC5440]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6513">[RFC6513]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8231">[RFC8231]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8236">[RFC8236]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8281">[RFC8281]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8306">[RFC8306]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8664">[RFC8664]</dt>
        <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8697">[RFC8697]</dt>
      <dd>
<span class="refTitle">""</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Hooman Bidgoli (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div dir="auto" class="left">
<span class="locality">Ottawa</span>  </div>
<div dir="auto" class="left"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:hooman.bidgoli@nokia.com" class="email">hooman.bidgoli@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Daniel Voyer</span></div>
<div dir="auto" class="left"><span class="org">Bell Canada</span></div>
<div dir="auto" class="left">
<span class="locality">Montreal</span>  </div>
<div dir="auto" class="left"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:daniel.voyer@bell.ca" class="email">daniel.voyer@bell.ca</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Saranya Rajarathinam</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div dir="auto" class="left">
<span class="locality">Mountain View</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:saranya.Rajarathinam@nokia.com" class="email">saranya.Rajarathinam@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ehsan Hemmati</span></div>
<div dir="auto" class="left"><span class="org">Cisco System</span></div>
<div dir="auto" class="left">
<span class="locality">San Jose</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ehemmati@cisco.com" class="email">ehemmati@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Tarek Saad</span></div>
<div dir="auto" class="left"><span class="org">Juniper Networks</span></div>
<div dir="auto" class="left">
<span class="locality">Ottawa</span>  </div>
<div dir="auto" class="left"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:tsaad@juniper.com" class="email">tsaad@juniper.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Siva Sivabalan</span></div>
<div dir="auto" class="left"><span class="org">Ciena</span></div>
<div dir="auto" class="left">
<span class="locality">Ottawa</span>  </div>
<div dir="auto" class="left"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ssivabal@ciena.com" class="email">ssivabal@ciena.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
