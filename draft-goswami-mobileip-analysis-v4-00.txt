





INTERNET-DRAFT                                            Subrata Goswami
Expires February 12, 2003                            Independent Consultant
                                                            Sept 13, 2002


     		   A Simple Analysis of Mobile IP v4
              <draft-goswami-mobileip-analysis-v4-00.txt>


Status of this Memo

This document is an Internet-Draft and is in full conformance with all
provisions of Section 10 of RFC2026.

Internet-Drafts are working documents of the Internet Engineering Task
Force (IETF), its areas, and its working groups.  Note that other groups
may also distribute working documents as Internet-Drafts.

Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any
time.  It is inappropriate to use Internet- Drafts as reference material
or to cite them other than as "work in progress."

The list of current Internet-Drafts can be accessed at
http://www.ietf.org/ietf/1id-abstracts.txt

The list of Internet-Draft Shadow Directories can be accessed at
http://www.ietf.org/shadow.html.

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this
document are to be interpreted as described in RFC 2119 [RFC 2119].


Abstract

This document analyzes Mobile IP v4 from a deployment point of view. With
the popularity of wireless LAN technologies subnet roaming has become a
prominent issue. Some critical scalabilty issues for Home Agent 
and Foreign Agents are pointed out. 

1.  Overview and Rationale

In the 802.11 wireless lan [WiFi] network an 802.11 client connects to an
802.11 Access Point (AP) at the link level.Mobile-IPv4 (MIP4)[MIPv4] enables 
a Mobile Node (MN), equiped with 802.11 access card, to roam from subnet to 
subnet.  At present MIP4 is the  most mature and widely implemented standard
for network level mobility. Hence it makes sense to see what are the issues 
that may limit its usefulness from a practical perspective.


2. Number of Tunnels

A hypothetical Mobile IP network is shown in the following figure.  9
subnets are shown in the figure. Each subnet has one Home Agent (HA)
and one Foreign Agent (FA). A  Mobile Nodes (MN) would have
their home network in one of these subnetworks. The FA and HA could be
seperate entities or may be the same entity (i.e. have the same IP 
address).



        -------------------------------------
        |      [FA0]|      [FA1]|      [FA2]|
        |      [HA0]|      [HA1]|      [HA2]|
        |           |           |           |
        |[MN11]     |           |           |
        |[MN21]     |           |           |
        -------------------------------------
        |      [FA3]|      [FA4]|      [FA5]|
        |      [HA3]|      [HA4]|      [HA5]|
        |           |           |           |
        |           |           |           |
        |           |           |           |
        -------------------------------------
        |      [FA6]|      [FA7]|      [FA8]|
        |      [HA6]|      [HA7]|      [HA8]|
        |           |           |           |
        |           |           |           |
        |           |           |           |
        -------------------------------------

        [MNij] - Mobile Node j in Home Network i
        [FAi]  - Foreign Agent in network i
        [HAi]  - Home Agent in network i


Figure 1: Mobile IPv4 deployment over an address space of 9 sub-nets.

A tunnel needs to be created when a single MN roams into a foreign 
subnet.  If there are Sn subnets, then there can be Sn*(Sn-1) or
Sn*(Sn-1)*0.5 tunnels depending on when FA and HA are distinct or 
the same entities respectively. Thus tunnel configuration and management 
is an n^2 problem. 

For the example in Figure 1, there would 9*8=72 or 36 tunnels. A large
organization that has an Class-A (or /8) address space  can have 2^16 
subnets of 254 nodes. That can potentially imply 2^16*(2^16-1)*0.5 = about 
2 billion tunnels.  Although, at any point of time only 2^16*254 = about
16 million of the tunnels would be active.  For an organization with 
Class-B (or /16) address  space, those numbers would be 2^8*(2^8-1) and 
2^8*254 or about 64,000 and 64,000 respectively.

3.  Home Agent Throughput

The second scalability issue is the throughput of the HA.  If the larget
subnet has Nn nodes, then the HA of that subnet may potentially have to
support Nn tunnels. Now if each node has bandwidht requirement of b bits 
per second, then the HA needs to have a throughput of bNn.  Thus there is
a linear relationship between an HA and the number of nodes in the subnet. 
For example, in a 1022 node subnet with 1.0 Mbps per node demabd, the HA 
needs to have a throughput of 1Gbps. 

4.  Foreign Agent Throughput

The third scalability issue is the throughput of the FA.  If the average
number of nodes is An nodes per subnet, then  there is the  pathological case 
of all hosts of the Sn subnets roaming into one subnet.  In such a situation
the FA would have to have a throughput of bAnSn. To get an idea of what this 
means, let us consider a Class B space with 254 node subnets. If each MN 
demands 1Mpbs, then the FA would need to pass 254*255*1= about 64 Gbps. 
Although, in most real situations only a fraction of the nodes would roam 
into one subnet. In the pathologocal case mentioned above, the number of 
tunnels that needs to be terminated by the FA is approximately the number of 
nodes available in the adderss space. 

If the pathological case needs to be supported,then it might be worhwhile to
have multiple FA's per subnet so that the load can be sahred. This in the
extreme case would result in co-located FA , which has severe implications in 
the number of IP addresses used. 

5.  Mobile Node Issues

The primary impact on an MN in the pathological case mentioned above would be
inability to register (hence no service ) with an FA, if the Visitor Table 
in FA is limited.  Even if the Visitor Table supports 64,000 entries, the FA 
would still need to add, delete, and search a large table.

6.  Acknowledgments

All the RFC's, IDÆs, freely available  802.11 standards,  and Linux web-sites.

7.  References

[MIPv4] Perkins, C., "IP Mobility Support", RFC 2002, October 1996.


8.  Author's Address

     Subrata Goswami, Ph.D.
     Independent Consultant
     Newark, CA 94560
     sgoswami@umich.edu


This document expires February 12, 2003.
