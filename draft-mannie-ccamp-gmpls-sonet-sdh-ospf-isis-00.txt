

   CCAMP Working Group                                E. Mannie (Ebone)
   Internet Draft                            D. Papadimitriou (Alcatel)
   Expiration Date: August 2002
   Document: draft-mannie-ccamp-gmpls-
   sonet-sdh-ospf-isis-00.txt                             February 2002



         GMPLS Extensions to OSPF and IS-IS for SONET/SDH Control

            draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-00.txt



   Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026 [1].

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that
   other groups may also distribute working documents as Internet-
   Drafts. Internet-Drafts are draft documents valid for a maximum of
   six months and may be updated, replaced, or obsoleted by other
   documents at any time. It is inappropriate to use Internet- Drafts
   as reference material or to cite them other than as "work in
   progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

Abstract

   This document discusses and explains some of the extensions required
   in existing IGP routing protocols to support sub-sequent signalling
   for dynamically established SONET/SDH circuits using GMPLS-based
   control plane architecture [GMPLS-ARCH]. In particular, it specifies
   the GMPLS routing extensions to OSPF and IS-IS routing protocols for
   SONET/SDH networks using [GMPLS-RTG] as guideline.

   The current document is based on the Traffic Engineering (TE)
   extensions defined in [OSPF-TE] and [ISIS-TE]. It supports link
   bundling (also referred to as TE-Links) as defined in [MPLS-BDL].
   The document proposes several new sub-TLVs for SONET/SDH network
   control which complement those proposed in [GMPLS-OSPF-TE] and
   [GMPLS-ISIS-TE]. The proposed encoding does not preclude any further
   integration in the before mentioned documents that the current one
   complements.




                         Expires August 2002                 [Page 1]

            draft-mannie-ccamp-gmpls-sdh-ospf-isis-01.txt      FebÆ02




1. Conventions used in this document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
   NOT","SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in
   this document are to be interpreted as described in RFC 2119.

2. Introduction

   This document is based on Traffic Engineering (TE) extensions
   defined in [OSPF-TE] and [ISIS-TE]. [GMPLS-OSPF-TE] and [GMPLS-ISIS-
   TE] have extended these attributes in the GMPLS context.

   The current proposal also uses the notion Link Bundling as defined
   in [MPLS-BDL]. A set of data bearing links between two adjacent
   GMPLS nodes (or simply nodes) is defined as a TE-link, which is
   identified by a TE link ID. GMPLS currently integrates the TE-link
   by detailing among others that several links having the same Traffic
   Engineering (TE) capabilities (i.e. same TE metric, same set of
   Resource Class and same Switching capability) can be advertised as a
   single TE-link.  Such TE-links are referred to as link bundles whose
   individual data bearing link (or simply links) are referred to as
   component links; moreover, there is no longer a one-to-one
   association between a regular routing adjacency and a TE-link.

   In order to enable distributed SONET/SDH network control, the IGP
   routing protocol needs to transport two different sets (or types) of
   information. A set that describes the link capabilities of a SONET/
   SDH GMPLS node (or simply a node, in this context), independently of
   their usage, and a set that describes (in some appropriate manner)
   the resources (or SONET/SDH signals, more precisely the timeslots)
   that are in use at each TE link.

   The first set can be defined as being driven by less frequent
   updates (since TE link capabilities changes are not expected to be
   frequent) while the second would follow update interval values as
   than the one used for any other non-technology dependent TE Link
   attribute. We consider here that when this frequency is very low the
   corresponding TE-link capability is static; by opposition, other are
   referred to as dynamic.

   The TLVs describing the capabilities of SONET/SDH TE-links are
   separately defined for LOVC/VT and HOVC/STS SPE:

   - LS-MC TLV : Link SONET/SDH Multiplex Capability TLV
   - LS-CC TLV  : Link SONET/SDH Concatenation Capability TLV

   The TLVs describing the dynamic status of a SONET/SDH TE-Link is:

   - LS-UT-TLV : Link SONET/SDH number of Unallocated Timeslot TLV



                          Expires January 2002                [Page 2]

            draft-mannie-ccamp-gmpls-sdh-ospf-isis-01.txt      FebÆ02


   When using OSPF, GMPLS TE links can be advertised using Opaque LSAs
   (Link State Advertisements) of Type 10. The Traffic Engineering (TE)
   LSA, whose area flooding scope is specified [RFC-2370], has one top-
   level Type/Length/ Value (TLV) triplet and one or more nested sub-
   TLVs for extensibility.  The top-level TLV can take one of two
   values (1) Router Address (referred to as the Node TLV) or (2) TE-
   Link TLV. So here, we propose to extend the current sub-TLV set of
   the latter.

   When using IS-IS, GMPLS TE links are advertised using LS PDUs. TE
   Attributes TLVs are defined sub-TLV of the Extended IS Reachability
   TLV (TLV 22) see [ISIS-TE].


3.   Additional Considerations

   Between two adjacent nodes, several links having the same Traffic
   Engineering (TE) capabilities (i.e. same TE metric, same set of
   Resource Class and same Switching capability) can be advertised as a
   single TE-link, such TE-links are referred to as link bundles. The
   individual link (or data bearing links) belonging to a given bundle
   are referred to as component links. Also there is no longer a one-
   to-one association between a regular routing adjacency and a TE-
   link.

   The result is that each component of a bundle must have the same
   SONET/SDH multiplexing and concatenation capabilities as defined
   later in this draft. The two corresponding TLVs (LS-MC and LS-CC)
   are specified once, but apply to each component. Thus, no per
   component information or identification is required for these TLVs.
   The Link SONET/SDH UT TLV defined later gives the total number of
   unallocated (identical) components in a TE-Link.

   Combined with the Link Property correlation (see [LMP]) of component
   links in TE-links, i.e. link bundling, this capability helps in
   removing the problem of having to potentially flood a huge amount of
   routing information. For instance, with a group of 10 fibers and 40
   wavelengths per fiber, each of them supporting an STM-64, there are
   potentially 76800 VC-3 timeslots that can be allocated on that TE-
   link and that have therefore to be advertised to all nodes in the
   same routing domain. The most efficient way to proceed on a per-TE
   Link basis is to advertise the number of unallocated timeslots, such
   that after the initial advertisement, each node within a given
   routing area is aware of total capacity per TE-Link (see Section
   5.1).

   Despite being bundled, the usage of each component link in a TE link
   may differ completely. For example, in a TE link comprising two
   components, for instance, the first component could be structured in
   VC-4-4c while the second component could be structured in VC-3s.
   Likewise, each STM-i of an STM-N (N > 1) could also be structured
   differently from the others.



                          Expires January 2002                [Page 3]

            draft-mannie-ccamp-gmpls-sdh-ospf-isis-01.txt      FebÆ02


   Therefore, for given TE link it is not sufficient to simply
   represent the total number of timeslots (i.e. the bandwidth) that
   are allocated. It is also essential to know the corresponding signal
   types. This because in SONET/SDH an ôallocatedö signal does not only
   consume a timeslot at a given position in the multiplex, it also
   imposes some restrictions on the future allocations that can be made
   from the free portion of the SONET/SDH multiplex. This imposes a
   specific Concatenation Capability rules as described in section 4.2.

   The types of signals that can be carried within an STS-(3*N)/STM-N
   (for High Order, HO) or an STS-1/STM-0 (for Low Order, LO) that are
   supported by the TE links are needed for path computation purposes.
   When computing an explicit route, a node considers the Interface
   Switching Capability descriptor subùTLV (see [GMPLS-RTG]) and the
   LS-MC sub-TLV to ensure that the path (a) has the capability to
   carry/switch the signal and (b) that it has sufficient available
   bandwidth (i.e. enough timeslot within the SONET/SDH multiplex) to
   carry the signal.

4.   TE-Link Capabilities

   There are two SONET/SDH TE-link capabilities to be advertised in the
   routing protocols: the multiplexing capabilities and the
   concatenation capability.

4.1  Link Multiplex Capability

   The types of signals that are supported by the SONET/SDH links of a
   node (switch, multiplexer, or terminal) is a critical information
   regarding SONET/SDH network capability. Therefore this information
   is to be advertised via a TE routing protocol extensions.

   The purpose of the link multiplex capability is to succinctly
   describe the types of SDH/SONET signals that can be multiplexed by a
   node on one end of a link. For example, depending on how it is
   structured, an OC-48 link may be able to multiplex a variety of
   signal types. From a routing and path computation perspective,
   however, we are interested in knowing exactly which of these signals
   can be multiplexed at a particular end of that link in order to find
   an end-to-end route

4.1.1   Structure of SONET/SDH Multiplex Capabilities

   GMPLS-based control of SONET/SDH networks enables the control of
   multiplex structures at a finer level of granularity than STS-(3*N)/
   STM-N (N = 1,4,16,64,256) and than STS-1/STM-0. These multiplex
   structures are defined in [T1.105] and [G.707].

4.1.2   Link SONET/SDH Multiplex Capability TLV (LS-MC)

   The Link SONET/SDH Multiplex Capability (LS-MC) TLV describes the
   multiplex capabilities of either a low-order link (i.e. a single
   STS-1/STM-0), or a high-order link (i.e. a single STS-(3*N)/STM-N (N

                          Expires January 2002                [Page 4]

            draft-mannie-ccamp-gmpls-sdh-ospf-isis-01.txt      FebÆ02


   = 1,4,16,64,256). It indicates precisely the type of elementary
   signal type that can be multiplexed by this link. Both low order and
   high order instances of this TLV can be used simultaneously (for
   reasons outside of the scope of this document).

   In IS-IS, this TLV is a sub-TLV of the Extended IS Reachability TLV
   (TLV 22) with type TBD. In OSPF, this TLV is a sub-TLV of the Link
   TLV, with type TBD. The length of this TLV is four octets. The
   Multiplexing Capability Flag (MC-Flag) field is coded in one octet,
   and is defined as a vector of flags.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |             Type              |         Length = 4            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    MC Flag    |                    Reserved                   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               OSPF Link SONET/SDH Multiplex Capability TLV.

    0                   1                   2
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Type     |   Length = 4  |   MC Flag     |    Reserved   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Reserved            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              IS-IS Link SONET/SDH Multiplex Capability TLV.

   The MC Flag field above indicates the capability of a link to
   multiplex a given signal into the higher order signal directly above
   it in the SONET/SDH multiplex tree. This flag is actually a vector
   of bits defined separately for both High Order (HO) and for Low
   Order (LO) SDH/SONET signals. A bit value of 1 indicates that the
   multiplexing capability is supported while a bit value of 0
   indicates that the multiplexing capability is not supported. Bit 1
   is the lowest order bit of the flag field.

   The MC-Flag for HOVC SDH is:

        - Bit 1 : VC-3     in VC-4 (via TUG-3)
        - Bit 2 : VC-3     in AUG-1
        - Bit 3 : VC-4-Nc  in AUG-N    , N=1,4,16,64
        - Bit 4 : AUG-N    in AUG-(4*N), N=1,4,16,64
        - Bit 5 : Reserved
        - Bit 6 : Reserved
        - Bit 7 : Reserved
        - Bit 8 : Reserved

   Similarly, the MC-Flag for LOVC is:


                          Expires January 2002                [Page 5]

            draft-mannie-ccamp-gmpls-sdh-ospf-isis-01.txt      FebÆ02


        - Bit 1 : VC-11s in TUG-2
        - Bit 2 : VC-12s in TUG-2
        - Bit 3 : VC-2   in TUG-2
        - Bit 4 : TUG-2s in TUG-3
        - Bit 5 : TUG-2s in VC-3
        - Bit 6 : VC-3   in STM-0
        - Bit 7 : Reserved
        - Bit 8 : Reserved

   For instance, a value of HOVC MC-Flag can be:

   - "11111111" (0xff) indicates a full SDH HO multiplexing capability
   - "00001111" (0x0f) indicates that the lowest multiplexing
     capability is VC-3
   - "00000111" (0x07) indicates a full AUG-N (within a STM-N)
     multiplexing capability, for a given value of N,
   - "00000011" (0x03) indicates a full AUG-1 (within a STM-1)
     multiplexing capability,

   For instance, a value of LOVC MC-Flag can be:

   - "00110010" indicates that VC-12 can only be multiplexed in VC-3
     into an AU-3 (through TUG-2) and then in a STM-0.
   - "00110100" indicates that VC-2 can only be multiplexed in VC-3
     into an AU-3 (through TUG-2) and then in a STM-0.

   A binary value of "00000000" should not be advertised since it
   indicates no SDH capability at all. Note that some values are
   invalid; for instance, the binary value "00011000" is invalid.

   The MC Flag for STS SPE in SONET is:

        - Bit 1      : STS-1 in STS-3c SPE
        - Bit 2      : STS-(3xN)c in STS-(3x(N*4))c SPE, N=1,4,16,64
        - Bit 3 to 8 : reserved

   Similarly, the MC Flag for VT SPE is:

        - Bit 1      : VT-1.5
        - Bit 2      : VT-2
        - Bit 3      : VT-3
        - Bit 4      : VT-6
        - Bit 5 to 8 : reserved

4.2  Link Concatenation Capability

   Contiguous and Virtual concatenation of Low Order (LO) and High
   Order (HO) SONET and SDH signals are respectively defined in
   [T1.105] and [G.707].

4.2.1 Link SONET/SDH Concatenation Capability TLV (LS-CC)



                          Expires January 2002                [Page 6]

            draft-mannie-ccamp-gmpls-sdh-ospf-isis-01.txt      FebÆ02


   The Link SONET/SDH Concatenation Capability TLV describes the
   SONET/SDH concatenation capabilities on a link.

   In IS-IS, this TLV is a sub-TLV of the Extended IS Reachability TLV
   with type TBD. In OSPF, this TLV is a sub-TLV of the Link TLV, with
   type TBD. The length is 4 or 8 octets depending on the value of the
   Flag V. The value is coded as follows.

   1. Concatenation for SDH LOVC:

      - Contiguous concatenation for X VC-2s (VC-2-Xc, X = 1,...,7)
      - Virtual concatenation of X VC-2/1s (VC-2/1-Xv, X = 1,...,7)

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |             Type              |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |V|E|         Reserved          |      Max VC-2s Contiguous     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Max VC-1s Virtual       |      Max VC-2s Virtual        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              OSPF LO Link SDH Concatenation Capability TLV.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Type     |     Length    |V|E|        Reserved           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Max VC-2s Contiguous     |       Max VC-1s Virtual       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Max VC-2s Virtual        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              IS-IS LO Link SDH Concatenation Capability TLV.

   2. Concatenation for SDH HOVC:

      - Contiguous concatenation of X VC-4s (VC-4-Xc, X = 4,16,64,256)
      - Virtual concatenation of X VC-3/4s (VC-3/4-Xv, X = 1,...,256)

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |             Type              |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |V|E|         Reserved          |      Max VC-4s Contiguous     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Max VC-3s Virtual        |      Max VC-4s Virtual        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              OSPF HO Link SDH Concatenation Capability TLVs.

                          Expires January 2002                [Page 7]

            draft-mannie-ccamp-gmpls-sdh-ospf-isis-01.txt      FebÆ02



    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Type     |     Length    |V|E|        Reserved           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Max VC-4s Contiguous     |       Max VC-3s Virtual       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Max VC-4s Virtual        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              IS-IS HO Link SDH Concatenation Capability TLV.

   Max VC-2s/VC-4s Contiguous:
   - this field gives the maximum number of VC-2s/VC-4s Contiguous that
     can be contiguously concatenated on a link.

   Max VC-1s/VC-3s Virtual:
   - this field gives the maximum number of VC-1s/VC-3s that can be
     virtually concatenated in one block on a link.

   Max VC-2s/VC-4s Virtual:
   - this field gives the maximum number of VC-2s/VC-4s that can be
     virtually concatenated on a link.

   A value of zero for one of these fields means that the corresponding
   concatenation capability is not supported.

   3. Concatenation for SONET:

   Using the STS-1 SPE and STS-3c SPE equivalence to a VC-3 and a VC-4,
   respectively, the above HO Concatenation TLV applies. Notice that
   contiguous concatenation is applicable to STS-3c SPE signals,
   enabling STS-(3*X)c SPE with X = 4,16,64,256. For lower signals,
   Virtual Concatenation of X VT-n SPEs (n=1.5,2,3,6) is considered in
   [T1.105] but left for the next release of this document.

   4. Support of Virtual Concatenation: Flag V

   Flag V, if set to 1, indicates that Virtual Concatenation is
   supported. Therefore, when set to 1, at least one of the (Max VC-1s
   or Max VC-2s) or (Max VC-3s) or (Max VC-4s) values must be non-zero.
   Therefore, when set to 0, this flag translates that Max VC-1s and
   Max VC-2s or Max VC-3s and Max VC-4s are equal to zero and so can be
   omitted except when Flag E would be set (see below).

4.2.2 Extended Link SONET/SDH Concatenation Capability TLV (LS-CC)

   In some cases equipmentÆs have limitations on the number of signal
   that can be concatenated. In that case, it may not possible to use a
   complete range of contiguous (or even virtual) concatenation. It
   might also be that some of supported contiguous and virtual
   concatenation capabilities are precluded or discarded for reasons

                          Expires January 2002                [Page 8]

            draft-mannie-ccamp-gmpls-sdh-ospf-isis-01.txt      FebÆ02


   outside of the scope of this specification. Therefore, we propose an
   alternate way of representing the concatenation capabilities of a
   link by listing explicitly all of the levels of contiguous and
   virtual concatenation being supported.

   Flag E is set to 1 to indicate the extended form of the LS-CC TLV.
   In that case, three lists are used to indicate all the discrete
   levels of concatenation supported. Each concatenation level is coded
   on 16 bits. The length of each list is given in terms of 16 bits
   entries.

   In IS-IS, this Extended TLV is a sub-TLV of the Extended IS
   Reachability TLV with type TBD. In OSPF, this TLV is a sub-TLV of
   the Link TLV, with type TBD. The length (in octets) is by definition
   variable.

   In below Extended LS-CC TLV examples, the first list is for the VC-
   2/VC-4 contiguous concatenation, the second list is for the VC-1/VC-
   3 virtual concatenation and the third list is for the VC-2/VC-4
   virtual concatenation:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |             Type              |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |V|E|         Reserved          |      Max VC-2s Contiguous     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Max VC-1s Virtual       |      Max VC-2s Virtual        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |Res|   List 1 Length   |    List 2 Length  |   List 3 Length   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                 List 1: List of VC-2s Contiguous              |
   |                      Concatenation Levels                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                 List 2: List of VC-1s Virtual                 |
   |                      Concatenation Levels                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                 List 3: List of VC-2s Virtual                 |
   |                      Concatenation Levels                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               OSPF Extended LO Link SDH Concatenation TLV.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Type     |     Length    |V|E|        Reserved           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Max VC-4s Contiguous     |       Max VC-3s Virtual       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Max VC-4s Virtual        |            Reserved           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                          Expires January 2002                [Page 9]

            draft-mannie-ccamp-gmpls-sdh-ospf-isis-01.txt      FebÆ02


   |Res|   List 1 Length   |    List 2 Length  |   List 3 Length   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                 List 1: List of VC-4 Contiguous               |
   |                      Concatenation Levels                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                 List 2: List of VC-3 Virtual                  |
   |                      Concatenation Levels                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                 List 3: List of VC-4 Virtual                  |
   |                      Concatenation Levels                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               IS-IS Extended HO Link SDH Concatenation TLV.

   The reserved fields must be set to 0 when sent, and must be ignored
   on receipt. If no concatenation is supported on a link, this TLV
   should not be sent.

5. Dynamic Allocation

   This section defines the dynamic capabilities of a link that should
   be advertised by OSPF/IS-IS. The most important dynamic link
   capability that needs to be advertised concerns the link resources
   usage. In the SONET/SDH context, this information can be represented
   by the number of unallocated (free) timeslots per signal type and
   per link.

5.1  Link SONET/SDH Unallocated Timeslot TLV (LS-UT)

   The Link SONET/SDH Unallocated Timeslot TLV specifies the number of
   identical unallocated timeslots per TE-Link. As such, the initial
   value(s) of this TLV indicates the total capacity in terms of number
   of timeslot per TE-Link.

   In IS-IS, this TLV is a sub-TLV of the Extended IS Reachability TLV
   with type TBD. In OSPF, this TLV is a sub-TLV of the Link TLV, with
   type TBD.

   The length is n*4 octets. The value is the number of unallocated
   (free) timeslot in the TE-link, and is coded in 4 octets. The Signal
   Type field values are defined in [GMPLS-SONET-SDH]. Typically, a
   given LS-UT TLV, will only advertise signal types which are relevant
   for the particular implementation. Typically, a given LS-UT TLV,
   will only include signal types of the same order since one expect
   (as it is mostly the case in legacy networks) separated routing
   instances between LO and HOVC layers.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |             Type              |          Length = n*4         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Signal Type  |         Number of Unallocated Timeslots       |

                          Expires January 2002               [Page 10]

            draft-mannie-ccamp-gmpls-sdh-ospf-isis-01.txt      FebÆ02


   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Signal Type  |         Number of Unallocated Timeslots       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   \\                             ...                             \\
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               OSPF Link SONET/SDH Unallocated Timeslot TLV.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Type     |     Length    |           Reserved            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Signal Type   |        Number of Unallocated Timeslots        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Signal Type   |        Number of Unallocated Timeslots        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   \\                             ...                             \\
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              IS-IS Link SONET/SDH Unallocated Timeslot TLV.

   For instance, if a TE-link is made of 40 STM-64 decomposed in VC-4,
   the value of this TLV is 400 x 64. Thus, 25600 SDH STM-64 signals
   are supported, and, if required, 25600 instances of exactly the same
   signal can be allocated.

   Note: when two Number of Unallocated Timeslots fields having the
   same Signal Type value are advertised, the second one indicates the
   number of a contiguous block of unallocated slots.

6  Security Considerations

   Security considerations are not discussed in this version of the
   document.

7. References

   [G.707]      ITU-T Recommendation G.707, ôNetwork Node Interface for
                the Synchronous Digital Hierarchyö, April 2000.

   [GMPLS-ARCH] E.Mannie (Editor) et al., ôGeneralized MPLS (GMPLS)
                Architecture,ö Internet Draft, Work in Progress, draft-
                ietf-ccamp-gmpls-architecture-01.txt, November 2001.

   [GMPLS-ISIS-TE]     K. Kompella et al, ôIS-IS Extensions in Support
                       of Generalized MPLS,ö Internet Draft, Work in
                       Progress, draft-ietf-isis-gmpls-extensions-
                       05.txt, January 2002.

                          Expires January 2002               [Page 11]

            draft-mannie-ccamp-gmpls-sdh-ospf-isis-01.txt      FebÆ02



   [GMPLS-OSPF-TE]     K.Kompella et al., ôOSPF Extensions in Support
                       of Generalized MPLS,ö Internet Draft, Work in
                       Progress, draft-ietf-ccamp-ospf-gmpls-
                       extensions-04.txt, January 2002.

   [GMPLS-RTG]  K. Kompella et al., ôRouting Extensions in Support of
                Generalized MPLS,ö Internet Draft, Work in Progress,
                draft-kompella-ccamp-gmpls-routing-01.txt, February
                2002.

   [ISIS-TE]    H. Smith, T. Li, ôISIS Extensions for Traffic
                Engineeringö, draft-ietf-isis-traffic-04.txt, Internet
                Draft, Work in Progress, June 2001.

   [MPLS-BDL]   K.Kompella et al., ôLink Bundling in MPLS Traffic
                Engineering,ö Internet Draft, Work in Progress, draft-
                ietf-mpls-bundle-01.txt, November 2001.

   [OSPF-TE]    D. Katz, D. Yeung, K. Kompella ôTraffic Engineering
                Extensions to OSPFö, draft-katz-yeung-ospf-traffic-
                06.txt, Internet Draft, Work in Progress, June 2001.

   [RFC-2370]   R. Coltun, RFC 2370, "The OSPF Opaque LSA Option", July
                1998.

   [T1.105]     American National Standards Institute, ôSynchronous
                Optical Network (SONET) - Payload Mappingsö, ANSI
                T1.105, 2001.

8. Author's Addresses

   Eric Mannie
   Ebone (GTS)
   Terhulpsesteenweg, 6A
   1560 Hoeilaart, Belgium
   Ph: +32-2-658.56.52
   Email: eric.mannie@ebone.com

   Dimitri Papadimitriou
   Alcatel

   Francis Wellesplein 1,

   B-2018 Antwerpen, Belgium
   Phone: +32 3 240-8491
   Email: Dimitri.Papadimitriou@alcatel.be









                          Expires January 2002               [Page 12]

            draft-mannie-ccamp-gmpls-sdh-ospf-isis-01.txt      FebÆ02
























































                          Expires January 2002               [Page 13]
