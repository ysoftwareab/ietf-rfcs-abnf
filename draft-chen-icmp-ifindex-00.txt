





Network Working Group                                         Enke Chen
Internet Draft                                             Naiming Shen
Expiration Date: December 2003                         Redback Networks


      Carry the ifIndex Number In Certain ICMP and ICMPv6 Messages


                     draft-chen-icmp-ifindex-00.txt


1. Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as ``work in progress.''

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


2. Abstract

   To facilitate network debugging we propose that the ifIndex number be
   carried in the ICMP/ICMPv6 "Time Exceeded Message" and "Destination
   Unreachable Message (port unreachable)".













Chen & Shen                                                     [Page 1]





Internet Draft       draft-chen-icmp-ifindex-00.txt            June 2003


3. Introduction

   The source address in the "Time Exceeded Message" and "Destination
   Unreachable Message (port unreachable)" of ICMP [1] and ICMPv6 [2] is
   usually the IP/IPv6 address of an interface of a router/host on which
   the packet arrived. This address (as displayed by the network
   management tool "traceroute") is essential for network operators to
   identify and debug specific forwarding paths in a network.

   When un-numbered interfaces are involved, however, the source address
   alone would not be enough in determining the incoming interface of a
   packet.  This presents a significant hurdle for network management.

   To facilitate network debugging, we propose that the ifIndex [3] be
   carried in the ICMP/ICMPv6 "Time Exceeded Message" and "Destination
   Unreachable Message (port unreachable)".


4. Carry the ifIndex Number

   Each of the ICMP/ICMPv6 "Time Exceeded Message" [1, 2] and
   "Destination Unreachable Message (port unreachable)" has a 32-bit
   field that is labeled "unused" in the ICMP and ICMPv6 specifications.
   We propose that the ifIndex [3] be carried in the 32-bit "unused"
   field. The ifIndex number should be for the incoming interface of the
   packet.

   As defined in [3], the ifIndex is an unique, non-zero, constant value
   for an interface, and it is of local significance.

   It is optional to carry the ifIndex number in the specified
   ICMP/ICMPv6 messages. The field must be zero when the ifIndex number
   is not carried.


5. Security Considerations

   This extension does not introduce any security issues.













Chen & Shen                                                     [Page 2]





Internet Draft       draft-chen-icmp-ifindex-00.txt            June 2003


6. Acknowledgments

   TBD.


7. References

   [1] J. Postel, "Internet Control Message Protocol", RFC 792,
   September 1981.

   [2] A. Conta, S. Deering, "Internet Control Message Protocol (ICMPv6)
   for the IPv6 Specification", Work in Progress, draft-ietf-ipngwg-
   icmp-v3-02.txt, November 2001.

   [3] K. McCloghrie, F. Kastenholz, "The Interfaces Group MIB", RFC
   2863, June 2000.


8. Author Information

   Enke Chen
   Redback Networks, Inc.
   350 Holger Way
   San Jose, CA 95134
   e-mail: enke@redback.com

   Naiming Shen
   Redback Networks, Inc.
   350 Holger Way
   San Jose, CA 95134
   e-mail: naiming@redback.com




















Chen & Shen                                                     [Page 3]


