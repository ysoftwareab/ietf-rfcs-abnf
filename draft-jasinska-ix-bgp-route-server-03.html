<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Internet Exchange Route Server </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction to Multilateral Interconnection">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Specification of Requirements">
<link href="#rfc.section.2" rel="Chapter" title="2 Technical Considerations for Route Server Implementations">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Client UPDATE Messages">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Attribute Transparency">
<link href="#rfc.section.2.2.1" rel="Chapter" title="2.2.1 NEXT_HOP Attribute">
<link href="#rfc.section.2.2.2" rel="Chapter" title="2.2.2 AS_PATH Attribute">
<link href="#rfc.section.2.2.3" rel="Chapter" title="2.2.3 MULTI_EXIT_DISC Attribute">
<link href="#rfc.section.2.2.4" rel="Chapter" title="2.2.4 Communities Attributes">
<link href="#rfc.section.2.3" rel="Chapter" title="2.3 Per-Client Policy Control in Multilateral Interconnection">
<link href="#rfc.section.2.3.1" rel="Chapter" title="2.3.1 Path Hiding on a Route Server">
<link href="#rfc.section.2.3.2" rel="Chapter" title="2.3.2 Implementing Per-Client Policy Control">
<link href="#rfc.section.2.3.2.1" rel="Chapter" title="2.3.2.1 Multiple Route Server RIBs">
<link href="#rfc.section.2.3.2.2" rel="Chapter" title="2.3.2.2 Advertising Multiple Paths">
<link href="#rfc.section.2.3.2.2.1" rel="Chapter" title="2.3.2.2.1 Diverse BGP Path Approach">
<link href="#rfc.section.2.3.2.2.2" rel="Chapter" title="2.3.2.2.2 BGP ADD-PATH Approach">
<link href="#rfc.section.3" rel="Chapter" title="3 Security Considerations">
<link href="#rfc.section.4" rel="Chapter" title="4 IANA Considerations">
<link href="#rfc.section.5" rel="Chapter" title="5 Acknowledgments">
<link href="#rfc.references" rel="Chapter" title="6 References">
<link href="#rfc.references.1" rel="Chapter" title="6.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="6.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document outlines a specification for multilateral interconnections at Internet exchange points (IXPs). Multilateral interconnection is a method of exchanging routing information between three or more exterior BGP speakers using a single intermediate broker system, referred to as a route server. Route servers are typically used on shared access media networks, such as Internet exchange points (IXPs), to facilitate simplified interconnection between multiple Internet routers.  " />
  <meta name="description" content="This document outlines a specification for multilateral interconnections at Internet exchange points (IXPs). Multilateral interconnection is a method of exchanging routing information between three or more exterior BGP speakers using a single intermediate broker system, referred to as a route server. Route servers are typically used on shared access media networks, such as Internet exchange points (IXPs), to facilitate simplified interconnection between multiple Internet routers.  " />
  <meta name="keywords" content="I-D, Internet-Draft, IDR" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">IDR Working Group</td>
<td class="right">E. Jasinska</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Limelight Networks</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">N. Hilliard</td>
</tr>
<tr>
<td class="left">Expires: April 26, 2012</td>
<td class="right">INEX</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">R. Raszuk</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">NTT MCL Inc.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">N. Bakker</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">AMS-IX B.V.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 24, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Internet Exchange Route Server <br />
  <span class="filename">draft-jasinska-ix-bgp-route-server-03</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document outlines a specification for multilateral interconnections at Internet exchange points (IXPs). Multilateral interconnection is a method of exchanging routing information between three or more exterior BGP speakers using a single intermediate broker system, referred to as a route server. Route servers are typically used on shared access media networks, such as Internet exchange points (IXPs), to facilitate simplified interconnection between multiple Internet routers.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 26, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction to Multilateral Interconnection</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Specification of Requirements</a>
</li>
<li>2.   <a href="#rfc.section.2">Technical Considerations for Route Server Implementations</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Client UPDATE Messages</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Attribute Transparency</a>
</li>
<li>2.2.1.   <a href="#rfc.section.2.2.1">NEXT_HOP Attribute</a>
</li>
<li>2.2.2.   <a href="#rfc.section.2.2.2">AS_PATH Attribute</a>
</li>
<li>2.2.3.   <a href="#rfc.section.2.2.3">MULTI_EXIT_DISC Attribute</a>
</li>
<li>2.2.4.   <a href="#rfc.section.2.2.4">Communities Attributes</a>
</li>
<li>2.3.   <a href="#rfc.section.2.3">Per-Client Policy Control in Multilateral Interconnection</a>
</li>
<li>2.3.1.   <a href="#rfc.section.2.3.1">Path Hiding on a Route Server</a>
</li>
<li>2.3.2.   <a href="#rfc.section.2.3.2">Implementing Per-Client Policy Control</a>
</li>
<li>2.3.2.1.   <a href="#rfc.section.2.3.2.1">Multiple Route Server RIBs</a>
</li>
<li>2.3.2.2.   <a href="#rfc.section.2.3.2.2">Advertising Multiple Paths</a>
</li>
<li>2.3.2.2.1.   <a href="#rfc.section.2.3.2.2.1">Diverse BGP Path Approach</a>
</li>
<li>2.3.2.2.2.   <a href="#rfc.section.2.3.2.2.2">BGP ADD-PATH Approach</a>
</li>
<li>3.   <a href="#rfc.section.3">Security Considerations</a>
</li>
<li>4.   <a href="#rfc.section.4">IANA Considerations</a>
</li>
<li>5.   <a href="#rfc.section.5">Acknowledgments</a>
</li>
<li>6.   <a href="#rfc.references">References</a>
</li>
<li>6.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>6.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction to Multilateral Interconnection</h1>
<p id="rfc.section.1.p.1">Internet exchange points (IXPs) provide IP data interconnection facilities for their participants, typically using shared Layer-2 networking media such as Ethernet. The Border Gateway Protocol (BGP) <a href="#RFC4271">[RFC4271]</a>, an inter-Autonomous System routing protocol, is commonly used to facilitate exchange of network reachability information over such media.  </p>
<p id="rfc.section.1.p.2">While bilateral exterior BGP sessions between exchange participants were previously the most common means of exchanging reachability information, the overhead associated with dense interconnection has caused substantial operational scaling problems for Internet exchange point participants.  </p>
<p id="rfc.section.1.p.3">Multilateral interconnection is a method of interconnecting BGP speaking routers using a third party brokering system, commonly referred to as a route server and typically managed by the IXP operator. Each of the multilateral interconnection participants (usually referred to as route server clients) announces network reachability information to the route server using exterior BGP, and the route server in turn forwards this information to each other route server client connected to it, according to its configuration.  Although a route server uses BGP to exchange reachability information with each of its clients, it does not forward traffic itself and is therefore not a router.  </p>
<p id="rfc.section.1.p.4">A route server can be viewed as similar in function to an <a href="#RFC4456">[RFC4456]</a> route reflector, except that it operates using EBGP instead of iBGP. Certain adaptions to <a href="#RFC4271">[RFC4271]</a> are required to enable an EBGP router to operate as a route server, which are outlined in <a href="#spec">Section 2</a> of this document.  </p>
<p id="rfc.section.1.p.5">The term "route server" is often in a different context used to describe a BGP node whose purpose is to accept BGP feeds from multiple clients for the purpose of operational analysis and troubleshooting. A system of this form may alternatively be known as a "route collector" or a "route-views server". This document uses the term "route server" exclusively to describe multilateral peering brokerage systems.  </p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Specification of Requirements</h1>
<p id="rfc.section.1.1.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#spec" id="spec">Technical Considerations for Route Server Implementations</a>
</h1>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> Client UPDATE Messages</h1>
<p id="rfc.section.2.1.p.1">A route server MUST accept all UPDATE messages received from each of its clients for inclusion in its Adj-RIB-In. These UPDATE messages MAY by omitted from the route server's Loc-RIB or Loc-RIBs, due to filters configured for the purposes of implementing routing policy. The route server SHOULD perform one or more BGP Decision Processes to select routes for subsequent advertisement to its clients, taking into account possible configuration to provide multiple NLRI paths to a particular client as described in <a href="#multiple_paths">Section 2.3.2.2</a> or multiple Loc-RIBs as described in <a href="#multiple_ribs">Section 2.3.2.1</a>. The route server SHOULD forward UPDATE messages where appropriate from its Loc-RIB or Loc-RIBs to its clients.  </p>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> Attribute Transparency</h1>
<p id="rfc.section.2.2.p.1">As a route server primarily performs a brokering service, modification of attributes could cause route server clients to alter their BGP best path selection process for received prefix reachability information, thereby changing the intended routing policies of exchange participants. Therefore, contrary to what is specified in section 5. of <a href="#RFC4271">[RFC4271]</a>, route servers SHOULD NOT by default (unless explicitly configured) update well-known BGP attributes received from route server clients before redistributing them to their other route server clients. Optional recognized and unrecognized BGP attributes, whether transitive or non-transitive, SHOULD NOT be updated by the route server (unless enforced by local IX operator configuration) and SHOULD be passed on to other route server clients.  </p>
<h1 id="rfc.section.2.2.1">
<a href="#rfc.section.2.2.1">2.2.1.</a> NEXT_HOP Attribute</h1>
<p id="rfc.section.2.2.1.p.1">The NEXT_HOP, a well-known mandatory BGP attribute, defines the IP address of the router used as the next hop to the destinations listed in the Network Layer Reachability Information field of the UPDATE message. As the route server does not participate in the actual routing of traffic, the NEXT_HOP attribute MUST be passed unmodified to the route server clients, similar to the "third party" next hop feature described in section 5.1.3. of <a href="#RFC4271">[RFC4271]</a>.  </p>
<h1 id="rfc.section.2.2.2">
<a href="#rfc.section.2.2.2">2.2.2.</a> <a href="#as_path_attr" id="as_path_attr">AS_PATH Attribute</a>
</h1>
<p id="rfc.section.2.2.2.p.1">AS_PATH is a well-known mandatory attribute which identifies the autonomous systems through which routing information carried in the UPDATE message has passed.  </p>
<p id="rfc.section.2.2.2.p.2">As a route server does not participate in the process of forwarding data between client routers, and because modification of the AS_PATH attribute could affect route server client best path calculations, the route server SHOULD NOT prepend its own AS number to the AS_PATH segment nor modify the AS_PATH segment in any other way.  </p>
<h1 id="rfc.section.2.2.3">
<a href="#rfc.section.2.2.3">2.2.3.</a> MULTI_EXIT_DISC Attribute</h1>
<p id="rfc.section.2.2.3.p.1">MULTI_EXIT_DISC is an optional non-transitive attribute intended to be used on external (inter-AS) links to discriminate among multiple exit or entry points to the same neighboring AS. If applied to an NLRI UPDATE sent to a route server, the attribute (contrary to section 5.1.4 of <a href="#RFC4271">[RFC4271]</a>) SHOULD be propagated to other route server clients and the route server SHOULD NOT modify the value of this attribute.  </p>
<h1 id="rfc.section.2.2.4">
<a href="#rfc.section.2.2.4">2.2.4.</a> Communities Attributes</h1>
<p id="rfc.section.2.2.4.p.1">The BGP COMMUNITIES (<a href="#RFC1997">[RFC1997]</a>) and Extended Communities (<a href="#RFC4360">[RFC4360]</a>) attributes are attributes intended for labeling information carried in BGP UPDATE messages. Transitive as well as non-transitive Communities attributes applied to an NLRI UPDATE sent to a route server SHOULD NOT be modified, processed or removed. However, if such an attribute is intended for processing by the route server itself, it MAY be modified or removed.  </p>
<h1 id="rfc.section.2.3">
<a href="#rfc.section.2.3">2.3.</a> <a href="#policy" id="policy">Per-Client Policy Control in Multilateral Interconnection</a>
</h1>
<p id="rfc.section.2.3.p.1">While IXP participants often use route servers with the intention of interconnecting with as many other route server participants as possible, there are circumstances where control of path distribution on a per-client basis is important for ensuring that desired interconnection policies are met.  </p>
<p id="rfc.section.2.3.p.2">The control of path distribution on a per-client basis can lead to a path being hidden from the route server client.  We refer to this as "path hiding", which is described in <a href="#path_hiding">Section 2.3.1</a>.  </p>
<p id="rfc.section.2.3.p.3">Route server implementations SHOULD implement one of the methods described in <a href="#no_path_hiding">Section 2.3.2</a>, for the operator to be able to allow the control of path distribution on a per-client basis without the occurrence of "path hiding".  </p>
<h1 id="rfc.section.2.3.1">
<a href="#rfc.section.2.3.1">2.3.1.</a> <a href="#path_hiding" id="path_hiding">Path Hiding on a Route Server</a>
</h1>
<div id="#rfc.figure.1"></div>
<div id="#ixp_policy_interconnection"></div>
<p></p>
<pre>
     ___      ___
    /   \    /   \
 ..| AS1 |..| AS2 |..
:   \___/    \___/   :
:       \    / |     :
:        \  /  |     :
: IXP     \/   |     :
:         /\   |     :
:        /  \  |     :
:    ___/____\_|_    :
:   /   \    /   \   :
 ..| AS3 |..| AS4 |..
    \___/    \___/
            </pre>
<p></p>
<p id="rfc.section.2.3.1.p.1">Using the example in <a href="#ixp_policy_interconnection">Figure 1</a>, AS1 does not directly exchange prefix information with either AS2 or AS3 at the IXP, but only interconnects with AS4.  </p>
<p id="rfc.section.2.3.1.p.2">In the traditional bilateral interconnection model, per-client policy control to a third party exchange participant is accomplished either by not engaging in a bilateral interconnection with that participant or else by implementing outbound filtering on the BGP session towards that participant. However, in a multilateral interconnection environment, only the route server can perform outbound filtering in the direction of the route server client; route server clients depend on the route server to perform their outbound filtering for them.  </p>
<p id="rfc.section.2.3.1.p.3">Assuming a traditional best path selection, when the same prefix is advertised to a route server from multiple route server clients, the route server will select a single best path for propagation to all connected clients. If, however, the route server has been configured to filter the calculated best path from reaching a particular route server client, then that client will not receive a path for that prefix, although alternate paths received by the route server might have been policy compliant for that client. This phenomenon is referred to as "path hiding".  </p>
<p id="rfc.section.2.3.1.p.4">For example, in <a href="#ixp_policy_interconnection">Figure 1</a>, if the same prefix were sent to the route server via AS2 and AS4, and the route via AS2 was preferred according to BGP's traditional best path selection, but AS1's policy prevents AS2's path from being accepted, then AS1 would never receive a path to this prefix, even though the route server had previously received a valid alternative path via AS4. This happens because the best path selection is performed only once on the route server for all clients.  </p>
<p id="rfc.section.2.3.1.p.5">Path hiding will only occur on route servers which employ per-client policy control; if an IXP operator deploys a route server without the possibility for policy control, then path hiding does not occur, as all paths are considered equally valid from the point of view of the route server.  </p>
<h1 id="rfc.section.2.3.2">
<a href="#rfc.section.2.3.2">2.3.2.</a> <a href="#no_path_hiding" id="no_path_hiding">Implementing Per-Client Policy Control</a>
</h1>
<p id="rfc.section.2.3.2.p.1">In this section, we describe the alternatives to provide per-client policy control while preventing the occurrence of path hiding.  </p>
<h1 id="rfc.section.2.3.2.1">
<a href="#rfc.section.2.3.2.1">2.3.2.1.</a> <a href="#multiple_ribs" id="multiple_ribs">Multiple Route Server RIBs</a>
</h1>
<p id="rfc.section.2.3.2.1.p.1">The most portable means to allow for per-client policy control without the occurrence of path hiding, is by using a route server BGP implementation which performs the per-client best path calculation for each set of paths to a prefix, which results after the route server's client policies have been taken into consideration. This can be implemented by using per-client Loc-RIBs, with path filtering implemented between the Adj-RIB-In and the per-client Loc-RIB. Implementations MAY optimize this by maintaining paths not subject to filtering policies in a global Loc-RIB, with per-client Loc-RIBs stored as deltas.  </p>
<p id="rfc.section.2.3.2.1.p.2">This implementation is highly portable, as it makes no assumptions about the feature capabilities of the route server clients.  </p>
<h1 id="rfc.section.2.3.2.2">
<a href="#rfc.section.2.3.2.2">2.3.2.2.</a> <a href="#multiple_paths" id="multiple_paths">Advertising Multiple Paths</a>
</h1>
<p id="rfc.section.2.3.2.2.p.1">The path distribution model described above assumes standard BGP session encoding where the route server sends a single path to its client for any given prefix. This path is selected using the BGP path selection decision process described in <a href="#RFC4271">[RFC4271]</a>. If, however, it were possible for the route server to send more than a single path to a route server client, then route server clients would no longer depend on receiving a single best path to a particular prefix; consequently, the path hiding problem described in <a href="#path_hiding">Section 2.3.1</a> would disappear.  </p>
<p id="rfc.section.2.3.2.2.p.2">We present two methods which describe how such increased path diversity could be implemented.  </p>
<h1 id="rfc.section.2.3.2.2.1">
<a href="#rfc.section.2.3.2.2.1">2.3.2.2.1.</a> <a href="#diverse_bgp" id="diverse_bgp">Diverse BGP Path Approach</a>
</h1>
<p id="rfc.section.2.3.2.2.1.p.1">The Diverse BGP Path proposal as defined in <a href="#I-D.ietf-grow-diverse-bgp-path-dist">[I-D.ietf-grow-diverse-bgp-path-dist]</a> is a simple way to distribute multiple prefix paths from a route server to a route server client by using a separate BGP session from the route server to a client for each different path.  </p>
<p id="rfc.section.2.3.2.2.1.p.2">The number of paths which may be distributed to a client is constrained by the number of BGP sessions which the server and the client are willing to establish with each other. The distributed paths may be established from the global BGP Loc-RIB on the route server in addition to any per-client Loc-RIB. As there may be more potential paths to a given prefix than configured BGP sessions, this method is not guaranteed to eliminate the path hiding problem in all situations. Furthermore, this method may significantly increase the number of BGP sessions handled by the route server, which may negatively impact its performance.  </p>
<h1 id="rfc.section.2.3.2.2.2">
<a href="#rfc.section.2.3.2.2.2">2.3.2.2.2.</a> BGP ADD-PATH Approach</h1>
<p id="rfc.section.2.3.2.2.2.p.1">The <a href="#I-D.ietf-idr-add-paths">[I-D.ietf-idr-add-paths]</a> Internet draft proposes a different approach to multiple path propagation, by allowing a BGP speaker to forward multiple paths for the same prefix on a single BGP session. As <a href="#RFC4271">[RFC4271]</a> specifies that a BGP listener must implement an implicit withdraw when it receives an UPDATE message for a prefix which already exists in its Adj-RIB-In, this approach requires explicit support for the feature both on the route server and on its clients.  </p>
<p id="rfc.section.2.3.2.2.2.p.2">If the ADD-PATH capability is negotiated bidirectionally between the route server and a route server client, and the route server client propagates multiple paths for the same prefix to the route server, then this could potentially cause the propagation of inactive, invalid or suboptimal paths to the route server, thereby causing loss of reachability to other route server clients. For this reason, ADD-PATH implementations on a route server SHOULD enforce send-only mode with the route server clients, which would result in negotiating receive-only mode from the client to the route server.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Security Considerations</h1>
<p id="rfc.section.3.p.1">The path hiding problem outlined in section <a href="#path_hiding">Section 2.3.1</a> can be used in certain circumstances to proactively block third party path announcements from other route server clients.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> IANA Considerations</h1>
<p id="rfc.section.4.p.1">The new set of mechanism for route servers does not require any new allocations from IANA.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Acknowledgments</h1>
<p id="rfc.section.5.p.1">The authors would like to thank Ryan Bickhart, Steven Bakker, Chris Hall, Bruno Decraene and Pierre Francois for their valuable input.  </p>
<p id="rfc.section.5.p.2">In addition, the authors would like to acknowledge the developers of BIRD, OpenBGPD and Quagga, whose open source BGP implementations include route server capabilities which are compliant with this document.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">6.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">6.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1997">[RFC1997]</b></td>
<td class="top">
<a href="mailto:rchandra@cisco.com" title="cisco Systems, Inc.">Chandrasekeran, R.</a>, <a href="mailto:pst@cisco.com" title="cisco Systems, Inc.">Traina, P.</a> and <a href="mailto:tli@skat.usc.edu">T. Li</a>, "<a href="http://tools.ietf.org/html/rfc1997">BGP Communities Attribute</a>", RFC 1997, August 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4271">[RFC4271]</b></td>
<td class="top">
<a>Rekhter, Y.</a>, <a>Li, T.</a> and <a>S. Hares</a>, "<a href="http://tools.ietf.org/html/rfc4271">A Border Gateway Protocol 4 (BGP-4)</a>", RFC 4271, January 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4360">[RFC4360]</b></td>
<td class="top">
<a>Sangli, S.</a>, <a>Tappan, D.</a> and <a>Y. Rekhter</a>, "<a href="http://tools.ietf.org/html/rfc4360">BGP Extended Communities Attribute</a>", RFC 4360, February 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4456">[RFC4456]</b></td>
<td class="top">
<a>Bates, T.</a>, <a>Chen, E.</a> and <a>R. Chandra</a>, "<a href="http://tools.ietf.org/html/rfc4456">BGP Route Reflection: An Alternative to Full Mesh Internal BGP (IBGP)</a>", RFC 4456, April 2006.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-idr-add-paths">[I-D.ietf-idr-add-paths]</b></td>
<td class="top">
<a>Walton, D</a>, <a>Chen, E</a>, <a>Retana, A</a> and <a>J Scudder</a>, "<a href="http://tools.ietf.org/html/draft-ietf-idr-add-paths-06">Advertisement of Multiple Paths in BGP</a>", Internet-Draft draft-ietf-idr-add-paths-06, September 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-grow-diverse-bgp-path-dist">[I-D.ietf-grow-diverse-bgp-path-dist]</b></td>
<td class="top">
<a>Raszuk, R</a>, <a>Fernando, R</a>, <a>Patel, K</a>, <a>McPherson, D</a> and <a>K Kumaki</a>, "<a href="http://tools.ietf.org/html/draft-ietf-grow-diverse-bgp-path-dist-06">Distribution of diverse BGP paths.</a>", Internet-Draft draft-ietf-grow-diverse-bgp-path-dist-06, November 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">6.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1863">[RFC1863]</b></td>
<td class="top">
<a href="mailto:dhaskin@baynetworks.com" title="Bay Networks, Inc.">Haskin, D.</a>, "<a href="http://tools.ietf.org/html/rfc1863">A BGP/IDRP Route Server alternative to a full mesh routing</a>", RFC 1863, October 1995.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4223">[RFC4223]</b></td>
<td class="top">
<a>Savola, P.</a>, "<a href="http://tools.ietf.org/html/rfc4223">Reclassification of RFC 1863 to Historic</a>", RFC 4223, October 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4760">[RFC4760]</b></td>
<td class="top">
<a>Bates, T.</a>, <a>Chandra, R.</a>, <a>Katz, D.</a> and <a>Y. Rekhter</a>, "<a href="http://tools.ietf.org/html/rfc4760">Multiprotocol Extensions for BGP-4</a>", RFC 4760, January 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5065">[RFC5065]</b></td>
<td class="top">
<a>Traina, P.</a>, <a>McPherson, D.</a> and <a>J. Scudder</a>, "<a href="http://tools.ietf.org/html/rfc5065">Autonomous System Confederations for BGP</a>", RFC 5065, August 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5226">[RFC5226]</b></td>
<td class="top">
<a>Narten, T.</a> and <a>H. Alvestrand</a>, "<a href="http://tools.ietf.org/html/rfc5226">Guidelines for Writing an IANA Considerations Section in RFCs</a>", BCP 26, RFC 5226, May 2008.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Elisa Jasinska</span> 
	  <span class="n hidden">
		<span class="family-name">Jasinska</span>
	  </span>
	</span>
	<span class="org vcardline">Limelight Networks</span>
	<span class="adr">
	  <span>2220 W 14th St</span>

	  <span class="vcardline">
		<span class="locality">Tempe</span>,  
		<span class="region">AZ</span> 
		<span class="code">85281</span>
	  </span>
	  <span class="country-name vcardline">US</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:elisa@llnw.com">elisa@llnw.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Nick Hilliard</span> 
	  <span class="n hidden">
		<span class="family-name">Hilliard</span>
	  </span>
	</span>
	<span class="org vcardline">INEX</span>
	<span class="adr">
	  <span>4027 Kingswood Road</span>

	  <span class="vcardline">
		<span class="locality">Dublin</span>,  
		<span class="region"></span>
		<span class="code">24</span>
	  </span>
	  <span class="country-name vcardline">IE</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:nick@inex.ie">nick@inex.ie</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Robert Raszuk</span> 
	  <span class="n hidden">
		<span class="family-name">Raszuk</span>
	  </span>
	</span>
	<span class="org vcardline">NTT MCL Inc.</span>
	<span class="adr">
	  <span>101 S Ellsworth Avenue Suite 350</span>

	  <span class="vcardline">
		<span class="locality">San Mateo</span>,  
		<span class="region">CA</span> 
		<span class="code">94401</span>
	  </span>
	  <span class="country-name vcardline">US</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:robert@raszuk.net">robert@raszuk.net</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Niels Bakker</span> 
	  <span class="n hidden">
		<span class="family-name">Bakker</span>
	  </span>
	</span>
	<span class="org vcardline">AMS-IX B.V.</span>
	<span class="adr">
	  <span>Westeinde 12</span>

	  <span class="vcardline">
		<span class="locality">Amsterdam</span>,  
		<span class="region">NH</span> 
		<span class="code">1017 ZN</span>
	  </span>
	  <span class="country-name vcardline">NL</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:niels.bakker@ams-ix.net">niels.bakker@ams-ix.net</a></span>

  </address>
</div>

</body>
</html>