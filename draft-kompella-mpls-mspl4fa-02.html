<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Multi-purpose Special Purpose Label for Forwarding Actions</title>
<meta content="Kireeti Kompella" name="author">
<meta content="Vishnu Pavan Beeram" name="author">
<meta content="Tarek Saad" name="author">
<meta content="Israel Meilik" name="author">
<meta content='
       The MPLS architecture introduced Special Purpose Labels (SPLs) to
indicate special forwarding actions and offered a few simple examples,
such as Router Alert.  In the two decades since the original
architecture was crafted, the range, complexity and sheer number of
such actions has grown; in addition, there now is need for "associated
data" for some of the forwarding actions.  Likewise, the capabilities
and scale of forwarding engines has also improved vastly over the same
time period.  There is a pressing need to match the needs with the
capabilities to deliver the next generation of MPLS architecture. 
       In this memo, we propose an alternate mechanism whereby a single SPL
can encode multiple forwarding actions and carry associated data, some
in the label stack and some after the label stack.  This proposal also
solves the problem of scarcity of base SPLs. 
       This approach can immediately address several use cases: 
       
         to carry a Slice Selector for IETF network slicing; 
         to signal that further fast reroute may have harmful consequences; 
         to indicate that there is relevant data after the label stack; 
         among others. 
       
    ' name="description">
<meta content="xml2rfc 3.12.0" name="generator">
<meta content="special purpose label, slice, oam, nffrr, flow id, fragmentation" name="keyword">
<meta content="draft-kompella-mpls-mspl4fa-02" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.12.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.7.1
    pycountry 22.1.10
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.6.0
    six 1.16.0
    WeasyPrint 52.5
-->
<link href="/tmp/mspl4fa-02-uiffacen.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">MSPL for FA</td>
<td class="right">February 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Kompella, et al.</td>
<td class="center">Expires 12 August 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">MPLS WG</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-kompella-mpls-mspl4fa-02</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-02-08" class="published">8 February 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-08-12">12 August 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">K. Kompella</div>
<div class="org">Juniper Networks</div>
</div>
<div class="author">
      <div class="author-name">V.P. Beeram</div>
<div class="org">Juniper Networks</div>
</div>
<div class="author">
      <div class="author-name">T. Saad</div>
<div class="org">Juniper Networks</div>
</div>
<div class="author">
      <div class="author-name">I. Meilik</div>
<div class="org">Broadcom</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Multi-purpose Special Purpose Label for Forwarding Actions</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">The MPLS architecture introduced Special Purpose Labels (SPLs) to
indicate special forwarding actions and offered a few simple examples,
such as Router Alert.  In the two decades since the original
architecture was crafted, the range, complexity and sheer number of
such actions has grown; in addition, there now is need for "associated
data" for some of the forwarding actions.  Likewise, the capabilities
and scale of forwarding engines has also improved vastly over the same
time period.  There is a pressing need to match the needs with the
capabilities to deliver the next generation of MPLS architecture.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">In this memo, we propose an alternate mechanism whereby a single SPL
can encode multiple forwarding actions and carry associated data, some
in the label stack and some after the label stack.  This proposal also
solves the problem of scarcity of base SPLs.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
<p id="section-abstract-3">This approach can immediately address several use cases:<a href="#section-abstract-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-abstract-4.1">to carry a Slice Selector for IETF network slicing;<a href="#section-abstract-4.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-abstract-4.2">to signal that further fast reroute may have harmful consequences;<a href="#section-abstract-4.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-abstract-4.3">to indicate that there is relevant data after the label stack;<a href="#section-abstract-4.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-abstract-4.4">among others.<a href="#section-abstract-4.4" class="pilcrow">¶</a>
</li>
      </ul>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 12 August 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-conventions-and-definitions" class="xref">Conventions and Definitions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-revision-history" class="xref">Revision History</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2.2.1">
                    <p id="section-toc.1-1.1.2.2.2.1.1" class="keepWithNext"><a href="#section-1.2.1" class="xref">1.2.1</a>.  <a href="#name-changes-from-00-to-01" class="xref">Changes from -00 to -01</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2.2.2">
                    <p id="section-toc.1-1.1.2.2.2.2.1" class="keepWithNext"><a href="#section-1.2.2" class="xref">1.2.2</a>.  <a href="#name-changes-from-01-to-02" class="xref">Changes from -01 to -02</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1"><a href="#section-1.3" class="xref">1.3</a>.  <a href="#name-slice-selector" class="xref">Slice Selector</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-multi-purpose-bspl-the-forw" class="xref">Multi-purpose bSPL: the Forwarding Actions Indicator</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-the-fai-bspl" class="xref">The FAI bSPL</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.1">
                    <p id="section-toc.1-1.2.2.1.2.1.1"><a href="#section-2.1.1" class="xref">2.1.1</a>.  <a href="#name-isd-vs-psd" class="xref">ISD vs PSD</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-format-of-the-fai-bspl" class="xref">Format of the FAI bSPL</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.1">
                    <p id="section-toc.1-1.2.2.2.2.1.1"><a href="#section-2.2.1" class="xref">2.2.1</a>.  <a href="#name-definitions-of-the-fai-flag" class="xref">Definitions of the FAI Flag Bits</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.2">
                    <p id="section-toc.1-1.2.2.2.2.2.1"><a href="#section-2.2.2" class="xref">2.2.2</a>.  <a href="#name-processing-the-fai-flags-an" class="xref">Processing the FAI Flags and the ISD</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.3">
                    <p id="section-toc.1-1.2.2.2.2.3.1"><a href="#section-2.2.3" class="xref">2.2.3</a>.  <a href="#name-example-of-the-fai" class="xref">Example of the FAI</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-issues-to-be-resolved" class="xref">Issues to be Resolved</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-preventing-fai-from-reachin" class="xref">Preventing FAI From Reaching Top of Stack</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-repeating-the-fai-at-readab" class="xref">Repeating the FAI at "Readable Stack Depth"</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-psd" class="xref">PSD</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-contributors" class="xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Base Special Purpose Labels (bSPLs) are a precious commodity; there
are only 16 such values, of which 8 have already been allocated.
There are currently five requests for bSPLs that the authors are aware
of; this document proposes another use case for a bSPL, in all
consuming nearly all the remaining values.  This document suggests a
method whereby a single bSPL can be used for all the purposes
currently requested.  This leads to perhaps the more valuable
long-term contribution of this document: an approach to the definition
and use of bSPLs (and SPLs in general) whereby a single value can be
used for multiple purposes, and provide a flexible yet efficient means
of carrying associated data.<a href="#section-1-1" class="pilcrow">¶</a></p>
<div id="conventions-and-definitions">
<section id="section-1.1">
        <h3 id="name-conventions-and-definitions">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-conventions-and-definitions" class="section-name selfRef">Conventions and Definitions</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
"MAY", and "OPTIONAL" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.1-2">
          <dt id="section-1.1-2.1">FAI:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.2">
  Forwarding Actions Indicator<a href="#section-1.1-2.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.3">FFB:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.4">
  Forwarding Flags Block<a href="#section-1.1-2.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.5">ISD:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.6">
  In-Stack Data<a href="#section-1.1-2.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.7">sISD:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.8">
  Standard ISD<a href="#section-1.1-2.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.9">uISD:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.10">
  User-Defined ISD<a href="#section-1.1-2.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.11">PSD:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.12">
  Post-Stack Data<a href="#section-1.1-2.12" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.13">SPL:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.14">
  Special-purpose label<a href="#section-1.1-2.14" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.15">bSPL:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.16">
  Base special-purpose label<a href="#section-1.1-2.16" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="revision-history">
<section id="section-1.2">
        <h3 id="name-revision-history">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-revision-history" class="section-name selfRef">Revision History</a>
        </h3>
<p id="section-1.2-1">This section (to be removed before publication) offers highlights from
the draft's revision history.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<div id="changes-from-00-to-01">
<section id="section-1.2.1">
          <h4 id="name-changes-from-00-to-01">
<a href="#section-1.2.1" class="section-number selfRef">1.2.1. </a><a href="#name-changes-from-00-to-01" class="section-name selfRef">Changes from -00 to -01</a>
          </h4>
<ol start="1" type="1" class="normal type-1" id="section-1.2.1-1">
<li id="section-1.2.1-1.1">This section added.<a href="#section-1.2.1-1.1" class="pilcrow">¶</a>
</li>
            <li id="section-1.2.1-1.2">Added a section discussing when data should be put in the LS FAD vs
in the PL FAD.<a href="#section-1.2.1-1.2" class="pilcrow">¶</a>
</li>
            <li id="section-1.2.1-1.3">Tweaked the bits in the FAI.  Added a field "edist".<a href="#section-1.2.1-1.3" class="pilcrow">¶</a>
</li>
            <li id="section-1.2.1-1.4">Elaborated on the use of the H bit and the FAH data.<a href="#section-1.2.1-1.4" class="pilcrow">¶</a>
</li>
            <li id="section-1.2.1-1.5">Updated the processing of the LS FAD.<a href="#section-1.2.1-1.5" class="pilcrow">¶</a>
</li>
            <li id="section-1.2.1-1.6">Added processing of edist.<a href="#section-1.2.1-1.6" class="pilcrow">¶</a>
</li>
            <li id="section-1.2.1-1.7">Updated the FAI example.<a href="#section-1.2.1-1.7" class="pilcrow">¶</a>
</li>
            <li id="section-1.2.1-1.8">Updated the Issues section.<a href="#section-1.2.1-1.8" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</div>
<div id="changes-from-01-to-02">
<section id="section-1.2.2">
          <h4 id="name-changes-from-01-to-02">
<a href="#section-1.2.2" class="section-number selfRef">1.2.2. </a><a href="#name-changes-from-01-to-02" class="section-name selfRef">Changes from -01 to -02</a>
          </h4>
<ol start="1" type="1" class="normal type-1" id="section-1.2.2-1">
<li id="section-1.2.2-1.1">Updated Abstract and Introduction to focus on FAI; moved description
of use cases to separate section.<a href="#section-1.2.2-1.1" class="pilcrow">¶</a>
</li>
            <li id="section-1.2.2-1.2">Added terminology.<a href="#section-1.2.2-1.2" class="pilcrow">¶</a>
</li>
            <li id="section-1.2.2-1.3">Changed terminology: LS FAD and PL FAD to ISD and PSD, respectively.<a href="#section-1.2.2-1.3" class="pilcrow">¶</a>
</li>
            <li id="section-1.2.2-1.4">Updated text on criteria for putting associated data in ISD.<a href="#section-1.2.2-1.4" class="pilcrow">¶</a>
</li>
            <li id="section-1.2.2-1.5">Introduced the terms FAI Block, FFB Block, sISD Block and uISD
Block.  Introduced an "end of block" bit, s.  Updated flag bits;
updated processing of ISD.<a href="#section-1.2.2-1.5" class="pilcrow">¶</a>
</li>
            <li id="section-1.2.2-1.6">Removed field edist.<a href="#section-1.2.2-1.6" class="pilcrow">¶</a>
</li>
            <li id="section-1.2.2-1.7">Updated the section on preventing the FAI from reaching the Top of Stack.<a href="#section-1.2.2-1.7" class="pilcrow">¶</a>
</li>
            <li id="section-1.2.2-1.8">Updated the section on Readable Stack Depth<a href="#section-1.2.2-1.8" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</div>
</section>
</div>
<div id="slice-selector">
<section id="section-1.3">
        <h3 id="name-slice-selector">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-slice-selector" class="section-name selfRef">Slice Selector</a>
        </h3>
<p id="section-1.3-1">Network slicing is an important ongoing effort both for network
design, as well as for standardization, in particular at the IETF
<span>[<a href="#I-D.nsdt-teas-ns-framework" class="xref">I-D.nsdt-teas-ns-framework</a>]</span>.  A key issue is identifying which
slice a packet belongs to, by means of a "slice selector" carried in
the packet header.  <span>[<a href="#I-D.bestbar-teas-ns-packet" class="xref">I-D.bestbar-teas-ns-packet</a>]</span> describes several
such methods for MPLS networks, of which the Global Identifier for
Slice Selector (GISS) is one of the more practical solutions.  This
document shows how to realize the GISS using a base special purpose
label (bSPL).<a href="#section-1.3-1" class="pilcrow">¶</a></p>
<p id="section-1.3-2">In MPLS networks, a GISS is a data plane construct identifying packets
belonging to a slice aggregate (the set of packets that belong to the
slice).  The GISS dictates forwarding actions for the slice aggregate:
QoS behavior and next hop selection.  The purpose of the GISS is
detailed in <span>[<a href="#I-D.bestbar-teas-ns-packet" class="xref">I-D.bestbar-teas-ns-packet</a>]</span>.  To embed a GISS in a
label stack, one must preface it with a bSPL identifying it as such.
For reasons that will become apparent, this bSPL is called the
Forwarding Actions Indicator (FAI).<a href="#section-1.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="multi-purpose-bspl-the-forwarding-actions-indicator">
<section id="section-2">
      <h2 id="name-multi-purpose-bspl-the-forw">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-multi-purpose-bspl-the-forw" class="section-name selfRef">Multi-purpose bSPL: the Forwarding Actions Indicator</a>
      </h2>
<p id="section-2-1">This document proposes the use of a single bSPL to tell routers one or
more forwarding actions they should take on a packet, e.g.:<a href="#section-2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.1">to treat a packet according to its slice, given its GISS;<a href="#section-2-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.2">to load balance a packet, given its entropy;<a href="#section-2-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.3">whether or not to perform fast reroute on a failure
<span>[<a href="#I-D.kompella-mpls-nffrr" class="xref">I-D.kompella-mpls-nffrr</a>]</span>;<a href="#section-2-2.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.4">whether or not a packet has metadata relevant to intermediate
hops along the path;<a href="#section-2-2.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.5">and perhaps other functions in the future.<a href="#section-2-2.5" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-2-3">This bSPL is called the "Forwarding Actions Indicator" (FAI).  There are
other suggestions for this name, including "Network Functions Indicator"
and "Network Actions Indicator".  We'll let WG consensus determine the
final choice of name, but for now, we'll continue to use FAI.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">The FAI uses the label's TC bits and TTL field to inform the
forwarding plane of the required actions.  Each of these actions may
have associated data.  This data may be carried in the label stack as
"In-Stack Data" (ISD) or after the label stack as "Post-Stack Data"
(PSD).<a href="#section-2-4" class="pilcrow">¶</a></p>
<div id="the-fai-bspl">
<section id="section-2.1">
        <h3 id="name-the-fai-bspl">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-the-fai-bspl" class="section-name selfRef">The FAI bSPL</a>
        </h3>
<p id="section-2.1-1">The design of the bSPL hinges on two key insights: forwarding engines
do not interpret the TC bits or the TTL field for labels that are not
at the top of the label stack (ToS); nor do they do so for SPLs.  For
non-ToS labels, the important bit fields are the label value field (to
compute entropy and identify SPLs) and the End of Stack (S) bit (to
know when the label stack ends).  [If you know of a forwarding engine
that looks at other bit fields of labels below the ToS, please contact
the authors.]  This means that for a bSPL that will never appear at
the ToS, the TC bits and the TTL bits can be used to carry additional
information.  Furthermore, for the ISD, the entire 4-octet label word,
the S bit excepted, can be used to carry data.  We use this technique
to make the FAI bSPL multipurpose, and to make the ISD words compact
and efficient.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<div id="isd-vs-psd">
<section id="section-2.1.1">
          <h4 id="name-isd-vs-psd">
<a href="#section-2.1.1" class="section-number selfRef">2.1.1. </a><a href="#name-isd-vs-psd" class="section-name selfRef">ISD vs PSD</a>
          </h4>
<p id="section-2.1.1-1">A pertinent question is when one should put data in the ISD versus in
the PSD.  One alternative is to put all such data in the PSD.
However, this would mean that accessing such information would require
finding the End of Stack, and parsing the PSD.  For certain types of
data, this would be a severe burden on the packet forwarding engine.
Examples of such data are the Entropy label (needed for efficient load
balancing) and the GISS (needed for accurate packet forwarding).
Having any of this data in the PSD would hurt forwarding performance.<a href="#section-2.1.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1.1-2">This memo suggests that data that is required for accurate and optimal
forwarding should be put in the ISD, and data that is optional from a
forwarding point of view should be put in the PSD.  Furthermore, each
flag bit should have no more than one word of associated ISD.
The EG flag can thus have up to 2 words of associated data.<a href="#section-2.1.1-2" class="pilcrow">¶</a></p>
<p id="section-2.1.1-3">By the above criteria, this memo suggests that in-situ OAM data and
the Flow ID be carried in the PSD.<a href="#section-2.1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="format-of-the-fai-bspl">
<section id="section-2.2">
        <h3 id="name-format-of-the-fai-bspl">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-format-of-the-fai-bspl" class="section-name selfRef">Format of the FAI bSPL</a>
        </h3>
<span id="name-format-for-fai-isd-and-psd"></span><div id="FAI-FAD">
<figure id="figure-1">
          <div class="alignLeft art-text artwork" id="section-2.2-1.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                          TC b S       TTL
                                         -----   ---------------
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         (previous forwarding label    | TC  |0|      TTL      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Forwarding Actions Indicator  |s|u|0|0|h|N|E G|x|y|z|a|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Forwarding Actions Header         |0|0|               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Forwarding Actions Header         |1|0|               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Standard In-Stack Data (sISD)     |0|0|               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Last word of sISD                 |1|0|               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         User-defined ISD (uISD)           |0|0|               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Last word of User-defined ISD     |1|0|               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Other labels                        |0|               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         End of Stack label                  |1|               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|b b b b| Payload (potentially, PSD)                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Payload                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-format-for-fai-isd-and-psd" class="selfRef">Format for FAI, ISD and PSD</a>
          </figcaption></figure>
</div>
<p id="section-2.2-2">The FAI's label value MUST be the IANA allocated value.  The S bit
MUST be reflect whether the label stack ends at this label or not.<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<div id="definitions-of-the-fai-flag-bits">
<section id="section-2.2.1">
          <h4 id="name-definitions-of-the-fai-flag">
<a href="#section-2.2.1" class="section-number selfRef">2.2.1. </a><a href="#name-definitions-of-the-fai-flag" class="section-name selfRef">Definitions of the FAI Flag Bits</a>
          </h4>
<p id="section-2.2.1-1">The TC and TTL bits are used as flags, defined as follows:<a href="#section-2.2.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.2.1-2">
            <dt id="section-2.2.1-2.1">s:</dt>
            <dd style="margin-left: 1.5em" id="section-2.2.1-2.2">
  sISD is present (1) or not (0).<a href="#section-2.2.1-2.2" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.1-2.3">u:</dt>
            <dd style="margin-left: 1.5em" id="section-2.2.1-2.4">
  uISD is present (1) or not (0).<a href="#section-2.2.1-2.4" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.1-2.5">b:</dt>
            <dd style="margin-left: 1.5em" id="section-2.2.1-2.6">
  this is the "end of block" bit that indicates the end of the Forwarding
Flags Block and the end of the ISD Block.<a href="#section-2.2.1-2.6" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.1-2.7">S:</dt>
            <dd style="margin-left: 1.5em" id="section-2.2.1-2.8">
  MUST be set if the FAI is the end of stack, and clear otherwise.<a href="#section-2.2.1-2.8" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.1-2.9">h:</dt>
            <dd style="margin-left: 1.5em" id="section-2.2.1-2.10">
  If set, the PSD contains hop-by-hop information. Every node in the
path SHOULD attempt to process the hop-by-hop information, but not at
the expense of exceeding the processing time budget, which could cause
this (or other) packets to be dropped.  If clear, no hop-by-hop data
exists in the PSD: either the PSD is empty, or it contains only
end-to-end data (to be processed by the egress).<a href="#section-2.2.1-2.10" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.1-2.11">N:</dt>
            <dd style="margin-left: 1.5em" id="section-2.2.1-2.12">
  If set, do not do fast reroute (NFFRR).<a href="#section-2.2.1-2.12" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.1-2.13">EG:</dt>
            <dd style="margin-left: 1.5em" id="section-2.2.1-2.14">
  this is a 2-bit flag indicating whether the ISD carries Entropy
and/or GISS information.<a href="#section-2.2.1-2.14" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-2.2.1-3">The FAI Block consists of a Forwarding Flags Block, an sISD Block and a
uISD Block.  The two ISD Blocks are optional; their presence is
indicated by the s and u bits.  Each of these three blocks end when
the b bit is set.<a href="#section-2.2.1-3" class="pilcrow">¶</a></p>
<p id="section-2.2.1-4">The Forwarding Flags Block extends from the FAI bSPL up to (and
including) the first label that has the b bit set.  If the FFB
consists of just the bSPL, then its b bit must be set.<a href="#section-2.2.1-4" class="pilcrow">¶</a></p>
<p id="section-2.2.1-5">The sISD Block extends from the label after the FFB up to (and
including) the label with the b bit set.  If there is no sISD, the s
bit in the FFB MUST be clear.<a href="#section-2.2.1-5" class="pilcrow">¶</a></p>
<p id="section-2.2.1-6">The uISD Block extends from the label after the sISD Block up to (and
including) the label with the b bit set.  If there is no uISD, the u
bit in the FFB MUST be clear.<a href="#section-2.2.1-6" class="pilcrow">¶</a></p>
<p id="section-2.2.1-7">The EG field is used as follows:<a href="#section-2.2.1-7" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.2.1-8">
            <dt id="section-2.2.1-8.1">00:</dt>
            <dd style="margin-left: 1.5em" id="section-2.2.1-8.2">
  No Entropy or GISS present<a href="#section-2.2.1-8.2" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.1-8.3">01:</dt>
            <dd style="margin-left: 1.5em" id="section-2.2.1-8.4">
  ISD 0 contains 16 bits of Entropy in the high order 16 bits and
14 bits of GISS in the low order 16 bits (S and b bits excepted).<a href="#section-2.2.1-8.4" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.1-8.5">10:</dt>
            <dd style="margin-left: 1.5em" id="section-2.2.1-8.6">
  ISD 0 contains 20 bits of Entropy in the high order 20 bits and
10 bits of GISS in the low order 12 bits (S and b bits excepted).<a href="#section-2.2.1-8.6" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2.1-8.7">11:</dt>
            <dd style="margin-left: 1.5em" id="section-2.2.1-8.8">
  ISD 0 contains the 30-bit Entropy; ISD 1 contains the 30-bit GISS.
In ISD 0, the S and b bits MUST be 0; the packet forwarding engine
may choose to use the S and b bits as part of the Entropy, as it
doesn't affect the outcome.  In ISD 1, the S bit may be 0 or 1.<a href="#section-2.2.1-8.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
</div>
<div id="processing-the-fai-flags-and-the-isd">
<section id="section-2.2.2">
          <h4 id="name-processing-the-fai-flags-an">
<a href="#section-2.2.2" class="section-number selfRef">2.2.2. </a><a href="#name-processing-the-fai-flags-an" class="section-name selfRef">Processing the FAI Flags and the ISD</a>
          </h4>
<p id="section-2.2.2-1">Here's how the Standard ISD is parsed.  One must keep track of the s
bit to know when the Standard ISD Block end, and the S bit to know
when the stack ends.  The Standard ISD data appears in the order of
the corresponding flags.<a href="#section-2.2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2.2-2">It is an error if the label stack ends while there are more ISD
words to process.  In particular, it is an error if the FAI's S bit
is set, but the b bit is clear.<a href="#section-2.2.2-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.2.2-3">
<li id="section-2.2.2-3.1">If s and u are both 0, done: there is no associated ISD.<a href="#section-2.2.2-3.1" class="pilcrow">¶</a>
</li>
            <li id="section-2.2.2-3.2">Set CL ("current label") to the FAI label.  LL is the last label
(End of Stack); PL ("payload") is the first 4-octet word of the
payload.<a href="#section-2.2.2-3.2" class="pilcrow">¶</a>
</li>
            <li id="section-2.2.2-3.3">
              <p id="section-2.2.2-3.3.1">While b is clear:<a href="#section-2.2.2-3.3.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.2.2-3.3.2">
<li id="section-2.2.2-3.3.2.1">increment CL<a href="#section-2.2.2-3.3.2.1" class="pilcrow">¶</a>
</li>
              </ol>
</li>
            <li id="section-2.2.2-3.4">Process N.  CL is unchanged.<a href="#section-2.2.2-3.4" class="pilcrow">¶</a>
</li>
            <li id="section-2.2.2-3.5">
              <p id="section-2.2.2-3.5.1">If s is set, Standard ISD is present: process standard flags.<a href="#section-2.2.2-3.5.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.2.2-3.5.2">
<li id="section-2.2.2-3.5.2.1">Process EG:<a href="#section-2.2.2-3.5.2.1" class="pilcrow">¶</a>
</li>
                <li id="section-2.2.2-3.5.2.2">If EG is 00, CL is unchanged.<a href="#section-2.2.2-3.5.2.2" class="pilcrow">¶</a>
</li>
                <li id="section-2.2.2-3.5.2.3">If EG is 01 or 10, increment CL.  CL now contains both GISS and Entropy.<a href="#section-2.2.2-3.5.2.3" class="pilcrow">¶</a>
</li>
                <li id="section-2.2.2-3.5.2.4">If EG is 11, CL+1 contains Entropy; CL+2 contains GISS.  Increment CL by 2.<a href="#section-2.2.2-3.5.2.4" class="pilcrow">¶</a>
</li>
                <li id="section-2.2.2-3.5.2.5">Process other standard data-bearing flags; increment CL by 1 for each.<a href="#section-2.2.2-3.5.2.5" class="pilcrow">¶</a>
</li>
              </ol>
</li>
            <li id="section-2.2.2-3.6">
              <p id="section-2.2.2-3.6.1">If u is set, uISD is present.<a href="#section-2.2.2-3.6.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.2.2-3.6.2">
<li id="section-2.2.2-3.6.2.1">Process uISD until b is set.<a href="#section-2.2.2-3.6.2.1" class="pilcrow">¶</a>
</li>
              </ol>
</li>
          </ol>
<p id="section-2.2.2-4">Note that how the uISD is used is not defined here; this is up to the
user.  All that is included here is how a forwarding engine can tell
where the uISD block ends.<a href="#section-2.2.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="example-of-the-fai">
<section id="section-2.2.3">
          <h4 id="name-example-of-the-fai">
<a href="#section-2.2.3" class="section-number selfRef">2.2.3. </a><a href="#name-example-of-the-fai" class="section-name selfRef">Example of the FAI</a>
          </h4>
<span id="name-example-of-fai-isd-hop-by-h"></span><div id="ex-fai">
<figure id="figure-2">
            <div class="alignLeft art-text artwork" id="section-2.2.3-1.1">
<pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                              TC b S       TTL
                                             -----   ---------------
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |      Tunnel Label-1                   | TC  |0|      TTL      |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |      Tunnel Label-2                   | TC  |0|      TTL      |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |      Forwarding Actions Indicator     |1|1|1|0|1|1|0|1|0|0|0|0|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |      Entropy                  |   GISS ...|1|0|      ...      |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |      VPN Label                        |TC   |1|      TTL      |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |b b b b|                    PSD                                |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | real payload starts ...

s  =  1: there is standard ISD.
u  =  0: there is no user-defined ISD.
N  =  1: NFFRR is set.
EG = 01: ISD 0 contains Entropy + GISS.
h  =  1: There is hop-by-hop PSD.
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-example-of-fai-isd-hop-by-h" class="selfRef">Example of FAI + ISD + hop-by-hop PSD</a>
            </figcaption></figure>
</div>
<p id="section-2.2.3-2">The real payload starts after the PSD.<a href="#section-2.2.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="issues-to-be-resolved">
<section id="section-3">
      <h2 id="name-issues-to-be-resolved">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-issues-to-be-resolved" class="section-name selfRef">Issues to be Resolved</a>
      </h2>
<p id="section-3-1">This section captures issues to be resolved, in this memo and others.
As the issues are fixed, they should be removed from here; ideally,
this section should be empty before publication.<a href="#section-3-1" class="pilcrow">¶</a></p>
<div id="preventing-fai-from-reaching-top-of-stack">
<section id="section-3.1">
        <h3 id="name-preventing-fai-from-reachin">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-preventing-fai-from-reachin" class="section-name selfRef">Preventing FAI From Reaching Top of Stack</a>
        </h3>
<p id="section-3.1-1">As was said earlier, the FAI MUST NOT be at the top of stack, since
its TC and TTL bits have been repurposed.  There are two ways to
prevent this.  If an LSR X pops a label and the next label is the FAI,
X can pop the FAI and all ISD words.  This version of the memo
introduces the "end-of-block" (s) bit, whereby a forwarding engine
that knows the FAI can detect the entire FAI block, even if it doesn't
know some of the flags.  This can be used in conjunction with <a href="#rsd" class="xref">Section 3.2</a>.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">In case it is desired to preserve the FAI+FAD until the egress, X
should push an explicit NULL (label value 0 or 2) onto the stack above
the FAI, with the correct TC and TTL values.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1-3">Other options may be pursued; however, we believe this is an adequate
resolution.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="rsd">
<section id="section-3.2">
        <h3 id="name-repeating-the-fai-at-readab">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-repeating-the-fai-at-readab" class="section-name selfRef">Repeating the FAI at "Readable Stack Depth"</a>
        </h3>
<p id="section-3.2-1">For LSRs which cannot parse the entire label stack, or would prefer
not to unless needed, it is possible to repeat the FAI at "readable
stack depth" (rsd).  Say the rsd is 10 labels, and the FAI block is
3 labels.  Then, the FAI block can be repeated every 7 labels, allowing
all forwarding engines in the path to process it.  When a forwarding
label is popped and the FAI block exposed, it is deleted in its entirety,
since the same (or potentially different) FAI block is again within the
rsd.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">Note that the s or u bits set to 0 can be used to indicate that the
corresponding ISD is absent.  Only the last FAI would contain the full
information, reducing the size of the label stack.  However, in this
case, LSRs that don't process the whole stack may not load balance
less effectively, and potentially not adhere to the slice service
level objectives.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">Other options will be described in future versions of this document.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="psd">
<section id="section-3.3">
        <h3 id="name-psd">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-psd" class="section-name selfRef">PSD</a>
        </h3>
<p id="section-3.3-1">The format of the PSD, whether or not a Control Word is present, and
handling of the first nibble, is outside the scope of this document.
The FAI will not contain details about the contents of the PSD,
besides the single flag on whether or not the PSD contains information
relevant to (most) intermediate hops.  It is assumed that another memo
will document the format of the PSD, and that that memo will provide a
means of parsing the PSD (e.g., a TLV structure) and thus determining
its contents.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">The PSD memo should also comment on the impact of processing the PSD
on forwarding performance, especially in the case of hop-by-hop info.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="contributors">
<section id="section-4">
      <h2 id="name-contributors">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<p id="section-4-1">Many thanks to Colby Barth, Chandra Ramachandran and Srihari Sangli
for their contributions to this draft.<a href="#section-4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgments">
<section id="section-5">
      <h2 id="name-acknowledgments">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-5-1">We'd like to acknowledge the helpful discussions with Swamy SRK and
folks from the Broadcom team on the impacts to existing and future
forwarding engines.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">The edist field was added thanks to Haoyu Song, who suggested the
optimization to find End of Stack.<a href="#section-5-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-6">
      <h2 id="name-iana-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-6-1">If this draft is deemed useful and adopted as a WG document, the
authors request the allocation of a bSPL for the FAI.  We suggest the
early allocation of label 8 for this.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">A malicious or compromised LSR can insert the FAI and associated data
into a label stack, preventing (for example) FRR from occurring.  If
so, protection will not kick in for failures that could have been
protected, and there will be unnecessary packet loss.  Similarly,
inserting or removing a Fragmentation Header means that a packet's
contents cannot be accurately reconstructed.  Inserting or changing
a GISS means that the packet will be misclassified, perhaps leaving
or entering a high-value slice and causing damage.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-8">
      <h2 id="name-references">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-8.1">
        <h3 id="name-normative-references">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.bestbar-teas-ns-packet">[I-D.bestbar-teas-ns-packet]</dt>
        <dd>
<span class="refAuthor">Saad, T.</span>, <span class="refAuthor">Beeram, V. P.</span>, <span class="refAuthor">Wen, B.</span>, <span class="refAuthor">Ceccarelli, D.</span>, <span class="refAuthor">Halpern, J.</span>, <span class="refAuthor">Peng, S.</span>, <span class="refAuthor">Chen, R.</span>, <span class="refAuthor">Liu, X.</span>, <span class="refAuthor">Contreras, L. M.</span>, <span class="refAuthor">Rokui, R.</span>, and <span class="refAuthor">L. Jalil</span>, <span class="refTitle">"Realizing Network Slices in IP/MPLS Networks"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-bestbar-teas-ns-packet-07</span>, <time datetime="2022-01-11" class="refDate">11 January 2022</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-bestbar-teas-ns-packet-07.txt">https://www.ietf.org/archive/id/draft-bestbar-teas-ns-packet-07.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.kompella-mpls-nffrr">[I-D.kompella-mpls-nffrr]</dt>
        <dd>
<span class="refAuthor">Kompella, K.</span> and <span class="refAuthor">W. Lin</span>, <span class="refTitle">"No Further Fast Reroute"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-kompella-mpls-nffrr-02</span>, <time datetime="2021-07-12" class="refDate">12 July 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-kompella-mpls-nffrr-02.txt">https://www.ietf.org/archive/id/draft-kompella-mpls-nffrr-02.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-8.2">
        <h3 id="name-informative-references">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.nsdt-teas-ns-framework">[I-D.nsdt-teas-ns-framework]</dt>
      <dd>
<span class="refAuthor">Gray, E.</span> and <span class="refAuthor">J. Drake</span>, <span class="refTitle">"Framework for IETF Network Slices"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-nsdt-teas-ns-framework-05</span>, <time datetime="2021-02-02" class="refDate">2 February 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-nsdt-teas-ns-framework-05.txt">https://www.ietf.org/archive/id/draft-nsdt-teas-ns-framework-05.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Kireeti Kompella</span></div>
<div dir="auto" class="left"><span class="org">Juniper Networks</span></div>
<div dir="auto" class="left"><span class="street-address">1133 Innovation Way</span></div>
<div dir="auto" class="left">
<span class="locality">Sunnyvale</span>, <span class="region">CA</span> <span class="postal-code">94089</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:kireeti.ietf@gmail.com" class="email">kireeti.ietf@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Vishnu Pavan Beeram</span></div>
<div dir="auto" class="left"><span class="org">Juniper Networks</span></div>
<div dir="auto" class="left"><span class="street-address">1133 Innovation Way</span></div>
<div dir="auto" class="left">
<span class="locality">Sunnyvale</span>, <span class="region">CA</span> <span class="postal-code">94089</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:vbeeram@juniper.net" class="email">vbeeram@juniper.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Tarek Saad</span></div>
<div dir="auto" class="left"><span class="org">Juniper Networks</span></div>
<div dir="auto" class="left"><span class="street-address">1133 Innovation Way</span></div>
<div dir="auto" class="left">
<span class="locality">Sunnyvale</span>, <span class="region">CA</span> <span class="postal-code">94089</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:tsaad@juniper.net" class="email">tsaad@juniper.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Israel Meilik</span></div>
<div dir="auto" class="left"><span class="org">Broadcom</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:israel.meilik@broadcom.com" class="email">israel.meilik@broadcom.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
