<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Softwire Mesh Multicast</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Softwire Mesh Multicast">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">M. Xu</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Y. Cui</td></tr>
<tr><td class="header">Expires: April 21, 2011</td><td class="header">Shu. Yang</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Tsinghua University</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Chris. Metz</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">greg. Shepherd</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Cisco Systems</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 18, 2010</td></tr>
</table></td></tr></table>
<h1><br />Softwire Mesh Multicast<br />draft-xu-softwire-mesh-multicast-00</h1>

<h3>Abstract</h3>

<p>The Internet will need to support IPv4 and IPv6 packets.  Both address
      families and their attendent protocol suites support multicast of the
      single-source and any-source varieties.  As part of the transition to
      IPv6, there will be scenarios where a backbone network running one IP
      address family internally (referred to as internal IP or I-IP) will
      provide transit services to attached client networks running another IP
      address family (referred to as external IP or E-IP).  It is expected that
      the I-IP backbone will offer unicast and multicast transit services to
      the client E-IP networks.
</p>
<p>Softwires Mesh is a solution for supporting E-IP unicast and
      multicast across an I-IP backbone.  This document describes the
      mechanisms for suppporting Internet -style multicast across a set of
      E-IP and I-IP networks supporting softwires mesh.
</p>
<p>
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on April 21, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Terminology<br />
<a href="#anchor3">3.</a>&nbsp;
Scenarios of Interest<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
IPv6-over-IPv4 <br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.2.</a>&nbsp;
IPv4-over-IPv6<br />
<a href="#anchor6">4.</a>&nbsp;
IPv4-over-IPv6 <br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.1.</a>&nbsp;
Mechanism<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">4.2.</a>&nbsp;
Group Address Mapping<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">4.3.</a>&nbsp;
Actions performed by AFBR<br />
<a href="#anchor10">5.</a>&nbsp;
IPv6-over-IPv4<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">5.1.</a>&nbsp;
Discussion<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">5.2.</a>&nbsp;
I-IP IPv4 Address Limitations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">5.3.</a>&nbsp;
E-IP IPv6 Addressing<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">5.4.</a>&nbsp;
Aggregation or Compression <br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">5.5.</a>&nbsp;
AFBR Signaling<br />
<a href="#anchor16">6.</a>&nbsp;
Summary<br />
<a href="#anchor17">7.</a>&nbsp;
Security Considerations<br />
<a href="#anchor18">8.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
</p>
<p>The Internet will need to support IPv4 and IPv6 packets.  Both address
      families and their attendent protocol suites support multicast of the
      single-source and any-source varieties.  As part of the transition to
      IPv6, there will be scenarios where a backbone network running one IP
      address family internally (referred to as internal IP or I-IP) will
      provide transit services to attached client networks running another IP
      address family (referred to as external IP or E-IP).
</p>
<p>The preferred solution is to leverage the multicast functions,
      inherent in the I-IP backbone, to efficiently and scalably tunnel
      encapsulated client E-IP multicast packets inside an I-IP core tree
      rooted at one or more ingress AFBR nodes and branching out to one or
      more egress AFBR leaf nodes.
</p>
<p><a class='info' href='#RFC4925'>[6]<span> (</span><span class='info'>Li, X., Dawkins, S., Ward, D., and A. Durand, &ldquo;Softwire Problem Statement,&rdquo; July&nbsp;2007.</span><span>)</span></a> outlines the requirements for the
      softwires mesh scenario including multicast.  It is straightforward to
      envisage that client E-IP multicast sources and receivers will reside in
      different client E-IP networks connected to an I-IP backbone network.  This requires that the client E-IP source-rooted or shared tree will
      need to traverse the I-IP backbone network.
</p>
<p>One method to accomplish this is to re-use the multicast VPN approach
      outlined in <a class='info' href='#I-D.ietf-l3vpn-2547bis-mcast'>[10]<span> (</span><span class='info'>Aggarwal, R., Bandi, S., Cai, Y., Morin, T., Rekhter, Y., Rosen, E., Wijnands, I., and S. Yasukawa, &ldquo;Multicast in MPLS/BGP IP VPNs,&rdquo; January&nbsp;2010.</span><span>)</span></a>.  MVPN-like schemes can
      support the softwire mesh scenario and achieve a "many-to-one" mapping
      between the E-IP client multicast trees and transit core multicast
      trees.  The advantage of this approach is that the number of trees in the
      I-IP backbone network scales less than linearly with the number of E-IP
      client trees.  Corporate enterprise networks and by extension multicast
      VPNs have been known to run applications that create a large amount of
      (S,G) states.  Aggregation at the edge contains the (S,G) states that need
      to be maintained by the network operator supporting the customer VPNs.
      The disadvantage of this approach is possible inefficient bandwidth and
      resource utilization if multicast packets are delivered to a receiver
      AFBR with no attached E-IP receiver.
</p>
<p>Internet-style multicast is a somewhat different in that the trees
      tends to be relatively sparse and source-rooted.  The need for multicast
      aggregation at the edge (where many customer multicast trees are mapped
      into a few or one backbone multicast trees) does not exist and to date
      has not been identified.  Thus the need for a basic or closer alignment
      with E-IP and I-IP multicast procedures emerges. 
</p>
<p>A framework on how to support such methods discribed in <a class='info' href='#RFC5565'>[8]<span> (</span><span class='info'>Wu, J., Cui, Y., Metz, C., and E. Rosen, &ldquo;Softwire Mesh Framework,&rdquo; June&nbsp;2009.</span><span>)</span></a>.  In this document, a more detailed discussion
      supporting the "one-to-one" mapping schemes for the IPv6 over IPv4 and
      IPv4 over IPv6 scenarios will be discussed.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>An example of a softwire mesh network supporting multicast is
      illustrated in Figure 1.  A multicast source S is located in one E-IP
      client network, while candidate E-IP group receivers are located in the
      same or different E-IP client networks that all share a common I-IP
      transit network.  When E-IP sources and receivers are not local to each
      other, they can only communicate with each other through the I-IP core.
      There may be several E-IP sources for some multicast group residing in
      different client E-IP networks.  In the case of shared trees, the E-IP
      sources, receivers and RPs might be located in different client E-IP
      networks.  In the simple case the resources of the I-IP core are managed
      by a single operator although the inter-provider case is not
      precluded.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                         ._._._._.            ._._._._.
                        |         |          |         |   --------
                        |  E-IP   |          |  E-IP   |--|Source S|
                        | network |          | network |   --------
                         ._._._._.            ._._._._.
                            |                    |
                           AFBR             upstream AFBR
                            |                    |
                          __+____________________+__
                         /   :   :           :   :  \
                        |    :      :      :     :   |  E-IP Multicast
                        |    : I-IP transit core :   |  message should
                        |    :     :       :     :   |  get across the
                        |    :   :            :  :   | I-IP transit core
                         \_._._._._._._._._._._._._./
                             +                   +
                        downstream AFBR    downstream AFBR
                             |                    |
                          ._._._._            ._._._._
             --------    |        |          |        |   --------
            |Receiver|-- |  E-IP  |          |  E-IP  |--|Receiver|
             --------    |network |          |network |   --------
                          ._._._._            ._._._._


</pre></div>
<p>Figure 1: Softwire Mesh Multicast Framework
</p>
<p>
</p>
<p>Terminology used in this document:
</p>
<p>o Address Family Border Router (AFBR) - A dual-stack router
      interconnecting two or more networks using different IP address
      families.  In the context of softwires mesh multicast, the AFBR runs E-IP
      and I-IP control planes to maintain E-IP and I-IP multicast state
      respectively and performs the appropriate encapsulation/decapsulation
      client E-IP multicast packets for transport across the I-IP core.  An
      AFBR will can act as a source and/or receiver in an I-IP multicast
      tree.
</p>
<p>o Upstream AFBR: The AFBR routers that are located at the upstream of
      multicast data flow.
</p>
<p>o Downstream AFBR: The AFBR routers that are located at the
      downstream of multicast data flow.
</p>
<p>o I-IP (Internal IP).  This refers to the form of IP (i.e., either
      IPv4 or IPv6) that is supported by the transit (or backbone)
      network.
</p>
<p>o E-IP (External IP) This refers to the form of IP (i.e. either IPv4
      or IPv6) that is supported by the client network(s) attached to the I-IP
      transit core.  An E-IPv6 client network runs IPv6 and an E-IPv4 client
      network runs IPv4.
</p>
<p>o I-IP core tree.  A single-source or multi-source distribution tree
      rooted at one or more AFBR source nodes and branching out to one or more
      AFBR leaf nodes.  An I-IP core Tree is built using standard IP or MPLS
      multicast signaling protocols operating exclusively inside the I-IP core
      network.  An I-IP core Tree is used to tunnel E-IP multicast packets
      belonging to E-IP trees across the I-IP core.  Another name for an I-IP
      core Tree is multicast or multipoint softwire.  An I-IPv6 core network
      runs IPv6 and an I-IPv4 core network runs IPv4.
</p>
<p>o E-IP client tree.  A single-source or multi-source distribution tree
      rooted at one or more hosts or routers located inside a client E-IP
      network and branching out to one or more leaf nodes located in the same
      or different client E-IP networks.
</p>
<p>
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Scenarios of Interest</h3>

<p>
</p>
<p>This section describes the two different scenarios where softwires
      mesh multicast will apply.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
IPv6-over-IPv4 </h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                         ._._._._.            ._._._._.
                        |  IPv6   |          |  IPv6   |   --------
                        | Client  |          | Client  |--|Source S|
                        | network |          | network |   --------
                         ._._._._.            ._._._._.
                            |                    |
                           AFBR             upstream AFBR
                            |                    |
                          __+____________________+__
                         /   :   :           :   :  \
                        |    :      :      :     :   |
                        |    : IPv4 transit core :   |
                        |    :     :       :     :   |
                        |    :   :            :  :   |
                         \_._._._._._._._._._._._._./
                             +                   +
                        downstream AFBR    downstream AFBR
                             |                    |
                          ._._._._            ._._._._
             --------    |  IPv6  |          |  IPv6  |   --------
            |Receiver|-- | Client |          | Client |--|Receiver|
             --------    |network |          | network|   --------
                          ._._._._            ._._._._


</pre></div>
<p>Figure 2: IPv6-over-IPv4 Scenario
</p>
<p>In this scenario, the E-IP Client Networks run IPv6 while the I-IP
        core runs IPv4 and is illustrated in Figure 2.
</p>
<p>IPv6 multicast group addresses are longer than IPv4 multicast group
        addresses.  It will not be possible to perform an algorithmic IPv6 - to
        - IPv4 address mapping without the risk of multiple IPv6 group
        addresses mapped to the same IPv4 address resulting in unnecessary
        bandwidth and resource consumption.  Therefore additional effort in the
        form of inter-AFBR signaling will be required to ensure client E-IPv6
        multicast packets are injected into the correct I-IPv4 multicast trees
        at the AFBRs.  This clear mismatch in IPv6 and IPv4 group address
        lengths means that it will not be possible to perform a "one to one"
        mapping between IPv6 and IPv4 group addresses unless the IPv6 group
        address is scoped.
</p>
<p>As mentioned earlier this scenario is common the MVPN environment.
        As native IPv6 deployments and multicast applications emerge from the
        outer reaches of the greater public IPv4 Internet, it is envisaged
        that the IPv6 over IPv4 softwires mesh multicast scenario will be a
        necessary feature supported by networks operators. 
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
IPv4-over-IPv6</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                         ._._._._.            ._._._._.
                        |  IPv4   |          |  IPv4   |   --------
                        | Client  |          | Client  |--|Source S|
                        | network |          | network |   --------
                         ._._._._.            ._._._._.
                            |                    |
                           AFBR             upstream AFBR(A)
                            |                    |
                          __+____________________+__
                         /   :   :           :   :  \
                        |    :      :      :     :   |
                        |    : IPv6 transit core :   |
                        |    :     :       :     :   |
                        |    :   :            :  :   |
                         \_._._._._._._._._._._._._./
                             +                   +
                        downstream AFBR(C)  downstream AFBR(D)
                             |                    |
                          ._._._._            ._._._._
             --------    |  IPv4  |          |  IPv4  |   --------
            |Receiver|-- | Client |          | Client |--|Receiver|
             --------    |network |          | network|   --------
                          ._._._._            ._._._._


</pre></div>
<p>Figure 3: IPv4-over-IPv6 Scenario
</p>
<p>In this scenario, the E-IP client networks run IPv4 and I-IP core
        runs IPv6.  This scenario is illustrated in Figure 3.
</p>
<p>Because of the much larger IPv6 group address space, it will not be
        a problem to map individual client E-IPv4 trees to a specific I-IPv6
        core tree.  This simplifies operations on the AFBR because it becomes
        possible to algorithmically map an IPv4 group/source address to an IPv6 group/source
        address and vice-versa. 
</p>
<p>The IPv4-over-IPv6 scenario is an emerging requirement as network
        operators build out native IPv6 backbone networks.  These networks
        naturally will support native IPv6 services and applications but it is
        with near 100% certainty that legacy IPv4 networks handling unicast
        and multicast will need to be accomodated. 
</p>
<p>
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
IPv4-over-IPv6 </h3>

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Mechanism</h3>

<p>Routers in the client E-IPv4 networks contain routes to all other
        client E-IPv4 networks.  Through the set of known and deployed
        mechanisms, E-IPv4 hosts and routers have discovered or learned of
        (S,G) or (*,G) IPv4 addresses.  Any I-IP multicast state instantiated
        in the core is referred to as (S',G') or (*,G') and is of course
        separate from E-IP multicast state.
</p>
<p>Suppose a downstream AFBR D receives an E-IPv4 PIM Join/Prune
        message from the E-IPv4 network for either an (S,G) tree or a (*,G)
        tree.  The AFBR D router can translate the E-IPv4 PIMv4 message into an
        I-IPv6 PIMv6 message with the latter being directed towards I-IP IPv6
        address of the upstream AFBR.  When the I-IPv6 PIM message arrives at
        the upstream AFBR A, it should translate the message back into an
        E-IPv4 PIM message.  The result of these actions is the construction
        of E-IPv4 tree with (S,G) or (*,G) state deposited in the E-IP
        networks and an I-IP trees with (S',G') or (*,G') contained in the I-IP
        network.
</p>
<p>In this case it is incumbent upon the AFBR routers to perform PIM
        signaling message conversions in the control plane and IP group
        address conversions or mappings in the data plane. It becomes possible to
        devise an algorithmic IPv4-to-IPv6 group mapping at AFBR.  AFBR A can
        translate the IPv4 source address S into the corresponding IPv4-mapped
        IPv6 address, and then B can translate it back.  A proposed group
        address mapping is described in the next section.
</p>
<p>Note that the I-IPv6 core routers do not contain E-IPv4 routes. To
        ensure that PIMv6 join messages can reach the correct AFBR router
        leading to E-IPv4 source network, the RPF Vector <a class='info' href='#RFC5496'>[7]<span> (</span><span class='info'>Wijnands, IJ., Boers, A., and E. Rosen, &ldquo;The Reverse Path Forwarding (RPF) Vector TLV,&rdquo; March&nbsp;2009.</span><span>)</span></a> is appended to the PIMv6 message on its ways
        to the AFBR.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Group Address Mapping</h3>

<p>
</p>
<p>For IPv4-over-IPv6 scenario, an simple algorithmic mapping between
        IPv4 multicast group addresses and IPv6 group addresses is supported.
        One possibility is to prepend the operator's IPv6 prefix to the IPv4
        address when mapping an E-IP address to an I-IP address, just like
        figure 8 shows.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
             0  8  16                            96        127
             +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
             |FF XX|      ISP Assigned Prefix    | v4 address|
             +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p>Figure 8: Mapping IPv4 to IPv6 group address
</p>
<p>
</p>
<p>The first two octets identify the the IPv6 multicast address format
        described in <a class='info' href='#RFC2373'>[3]<span> (</span><span class='info'>Hinden, R. and S. Deering, &ldquo;IP Version 6 Addressing Architecture,&rdquo; July&nbsp;1998.</span><span>)</span></a>.  The following 10 octets
        are assigned by the network operator and the last 4 octets are the
        IPv4 address.
</p>
<p>Additional group address mapping options will be provided in the
        next version of this draft. 
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Actions performed by AFBR</h3>

<p>The following actions are performed by the AFBR
</p>
<p></p>
<ul class="text">
<li>Process E-IPv4 PIM messages
</li>
<li>Perform E-IPv4 PIM to I-IP PIMv6 message conversion
</li>
<li>Transmit and receive I-IP PIMv6 messages
</li>
</ul>

<p>Details of these procedures will be outlined in the next version of
        this document.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IPv6-over-IPv4</h3>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Discussion</h3>

<p>
</p>
<p>Routers in the client E-IPv6 networks contain routes to all other
        client E-IPv6 networks.  Through the set of known and deployed
        mechanisms, E-IPv6 hosts and routers have discovered or learned of
        (S,G) or (*,G) IPv6 addresses.  Any I-IP multicast state instantiated
        in the core is referred to as (S',G') or (*,G') and is of course
        separate from E-IP multicast state.
</p>
<p>This particular scenario introduces unique challenges.  Unlike the
        IPv4-over-IPv6 scenario, it&rsquo;s impossible to map all of the IPv6
        multicast address space into the IPv4 address space to address the
        one-to-one Softwire Multicast requirement.  There are however a number
        of approaches to either reduce the scope of the one-to-one requirement
        or to provide minimal aggregation as a compromise.  These can be
        explored in greater detail and articulated in future drafts for
        consideration of the Softwire Multicast solution by the working group.
        Simple examples of these follow as discussion items for this work in
        progress.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
I-IP IPv4 Address Limitations</h3>

<p>We must first consider what range of I-IP IPv4 multicast addresses
        are available for the IPv6-over-IPv4 mapping.  If the I-IP provider is
        also using IPv4 multicast for other services then the entire 224/4
        address range will not be available.  Additionally, the 239/8 scoped
        range may also be used for other services limiting the available
        addresses for Softwire Multicast even further.  These limitations need
        to be addressed in any Softwire Mesh Multicast IPv6-over-IPv4
        solution.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
E-IP IPv6 Addressing</h3>

<p>The multicast address range of E-IP IPv6 can be reduced in a number
        of ways to limit the scope of addresses that need to be mapped into
        the I-IP IPv4 space.  The high order bits of the IPv6 address range may
        be discarded for mapping purposes.  Additional bit may also be reduced
        if the agreed solution limits the E-IP IPv6 multicast addresses
        available for Softwire Multicast.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Aggregation or Compression </h3>

<p>It will be necessary in this use-case to support a non -
        "one-to-one" mapping of E-IPv6 to I-IPv4 trees.  This could take the
        form of address aggregation or address compression using an agreed
        upon hashing mechanism.  In both cases there may be a requirement for
        an AFBR signaling mechanism to communicate the mapping function and
        the group of interest between E-IP sites. 
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
AFBR Signaling</h3>

<p>Specific signaling procedures and examples will be included in the
        next version of this document.
</p>
<p>]
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Summary</h3>

<p>There are two scenarios applicable to softwires mesh multicast:
      IPv4-over-IPv6 and IPv6-over-IPv4.  In the former senario, one-to-one
      group address mapping and PIM signaling conversion can be realized. 
</p>
<p>The latter scenario introduces several challenges relatd to group
      address constraints, AFBR signaling and the potential need for
      aggregation at the edge. 
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>The AFBR routers could maintain secure communications through the use
      of Security Architecture for the Internet Protocol as described
      in[RFC4301].  But when adopting some schemes that will cause heavy burden
      on routers, some attacker may use it as a tool for DDoS attack.
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>For Inter-AFBR signaling, address mapping is applied, and it should
      follow some predefined rule, especially the format of IPv6 prefix for
      address mapping should be predefined, so that ingress AFBR and egress
      AFBR can finish the mapping procedure correctly.  The format of IPv6
      prefix for translation can be unified within only the transit core, or
      within global area.  In the later condition, the format should be
      assigned by IANA.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2784">[1]</a></td>
<td class="author-text"><a href="mailto:dino@procket.com">Farinacci, D.</a>, <a href="mailto:tony1@home.net">Li, T.</a>, <a href="mailto:stan_hanks@enron.net">Hanks, S.</a>, <a href="mailto:dmm@cisco.com">Meyer, D.</a>, and <a href="mailto:pst@juniper.net">P. Traina</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2784">Generic Routing Encapsulation (GRE)</a>,&rdquo; RFC&nbsp;2784, March&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2784.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3991">[2]</a></td>
<td class="author-text">Foster, B. and F. Andreasen, &ldquo;<a href="http://tools.ietf.org/html/rfc3991">Media Gateway Control Protocol (MGCP) Redirect and Reset Package</a>,&rdquo; RFC&nbsp;3991, February&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3991.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2373">[3]</a></td>
<td class="author-text"><a href="mailto:hinden@iprg.nokia.com">Hinden, R.</a> and <a href="mailto:deering@cisco.com">S. Deering</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2373">IP Version 6 Addressing Architecture</a>,&rdquo; RFC&nbsp;2373, July&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2373.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2373.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2373.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4291">[4]</a></td>
<td class="author-text">Hinden, R. and S. Deering, &ldquo;<a href="http://tools.ietf.org/html/rfc4291">IP Version 6 Addressing Architecture</a>,&rdquo; RFC&nbsp;4291, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4291.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4601">[5]</a></td>
<td class="author-text">Fenner, B., Handley, M., Holbrook, H., and I. Kouvelas, &ldquo;<a href="http://tools.ietf.org/html/rfc4601">Protocol Independent Multicast - Sparse Mode (PIM-SM): Protocol Specification (Revised)</a>,&rdquo; RFC&nbsp;4601, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4601.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc4601.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4925">[6]</a></td>
<td class="author-text">Li, X., Dawkins, S., Ward, D., and A. Durand, &ldquo;<a href="http://tools.ietf.org/html/rfc4925">Softwire Problem Statement</a>,&rdquo; RFC&nbsp;4925, July&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4925.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5496">[7]</a></td>
<td class="author-text">Wijnands, IJ., Boers, A., and E. Rosen, &ldquo;<a href="http://tools.ietf.org/html/rfc5496">The Reverse Path Forwarding (RPF) Vector TLV</a>,&rdquo; RFC&nbsp;5496, March&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5496.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5565">[8]</a></td>
<td class="author-text">Wu, J., Cui, Y., Metz, C., and E. Rosen, &ldquo;<a href="http://tools.ietf.org/html/rfc5565">Softwire Mesh Framework</a>,&rdquo; RFC&nbsp;5565, June&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5565.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-pim-rpf-vector">[9]</a></td>
<td class="author-text">Wijnands, I., Boers, A., and E. Rosen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-pim-rpf-vector-08.txt">The RPF Vector TLV</a>,&rdquo; draft-ietf-pim-rpf-vector-08 (work in progress), January&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-pim-rpf-vector-08.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-l3vpn-2547bis-mcast">[10]</a></td>
<td class="author-text">Aggarwal, R., Bandi, S., Cai, Y., Morin, T., Rekhter, Y., Rosen, E., Wijnands, I., and S. Yasukawa, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-l3vpn-2547bis-mcast-10.txt">Multicast in MPLS/BGP IP VPNs</a>,&rdquo; draft-ietf-l3vpn-2547bis-mcast-10 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-l3vpn-2547bis-mcast-10.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.metz-softwires-multicast-problem-statement">[11]</a></td>
<td class="author-text">Metz, C., Cui, Y., and M. Xu, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-metz-softwires-multicast-problem-statement-00.txt">Softwires Mesh Multicast Problem Statement</a>,&rdquo; draft-metz-softwires-multicast-problem-statement-00 (work in progress), February&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-metz-softwires-multicast-problem-statement-00.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mingwei Xu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tsinghua University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Department of Computer Science, Tsinghua University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Beijing  100084</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.R.China</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+86-10-6278-5822</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:xmw@cernet.edu.cn">xmw@cernet.edu.cn</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Yong Cui</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tsinghua University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Department of Computer Science, Tsinghua University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Beijing  100084</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.R.China</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+86-10-6278-5822</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:cuiyong@tsinghua.edu.cn">cuiyong@tsinghua.edu.cn</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Shu Yang</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tsinghua University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Department of Computer Science, Tsinghua University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Beijing  100084</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.R.China</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+86-10-6278-5822</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:yangshu1988@gmail.com">yangshu1988@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Chris Metz</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">170 West Tasman Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Jose, California  95134-1706</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1-408-525-3275</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:chmetz@cisco.com">chmetz@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Greg Shepherd</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">170 West Tasman Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Jose, California  95134</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1-541-912-9758</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:shep@cisco.com">shep@cisco.com</a></td></tr>
</table>
</body></html>
