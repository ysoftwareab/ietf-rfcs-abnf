<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>SDP media capabilities Negotiation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="SDP media capabilities Negotiation">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">MMUSIC</td><td class="header">R. Gilman</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Independent</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">R. Even</td></tr>
<tr><td class="header">Expires: January 13, 2011</td><td class="header">Gesher Erove Ltd</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">F. Andreasen</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Cisco Systems</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">July 12, 2010</td></tr>
</table></td></tr></table>
<h1><br />SDP media capabilities Negotiation<br />draft-ietf-mmusic-sdp-media-capabilities-10</h1>

<h3>Abstract</h3>

<p>Session Description Protocol (SDP) capability negotiation provides a general framework for indicating and negotiating capabilities in SDP.  The base framework defines only capabilities for negotiating transport protocols and attributes.  In this document, we extend the framework by defining media capabilities that can be used to negotiate media types and their associated parameters.  This extension is designed to map easily to existing and future SDP media attributes, but not encodings or formatting. 
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on January 13, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#terms">2.</a>&nbsp;
Terminology<br />
<a href="#sdpmedcap">3.</a>&nbsp;
 SDP Media Capabilities<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reqts">3.1.</a>&nbsp;
Requirements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#overview">3.2.</a>&nbsp;
Solution Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#newattrs">3.3.</a>&nbsp;
New Capability Attributes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mcap">3.3.1.</a>&nbsp;
The Media Encoding Capability Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mfcap">3.3.2.</a>&nbsp;
The Media Format Parameter Capability Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mscap">3.3.3.</a>&nbsp;
The Media-Specific Capability Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#configparms">3.3.4.</a>&nbsp;
New Configuration Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#lcfg">3.3.5.</a>&nbsp;
The Latent Configuration Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#pcfg">3.3.6.</a>&nbsp;
Enhanced Potential Configuration Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ptsubs">3.3.7.</a>&nbsp;
Substitution of Media Payload Type Numbers in Capability Attribute Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sescap">3.3.8.</a>&nbsp;
The Session Capability Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#oaext">3.4.</a>&nbsp;
Offer/Answer Model Extensions<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#offergen">3.4.1.</a>&nbsp;
Generating the Initial Offer<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#answergen">3.4.2.</a>&nbsp;
Generating the Answer <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ansproc">3.4.3.</a>&nbsp;
Offerer Processing of the Answer <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sesmod">3.4.4.</a>&nbsp;
Modifying the Session<br />
<a href="#examples">4.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#altcodecs">4.1.</a>&nbsp;
Alternative Codecs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#altcombos">4.2.</a>&nbsp;
Alternative Combinations of Codecs (Session Configurations)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#latentstreams">4.3.</a>&nbsp;
Latent Media Streams<br />
<a href="#iana">5.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ianaattrs">5.1.</a>&nbsp;
New SDP Attributes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ianaoption">5.2.</a>&nbsp;
New SDP Option Tag<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ianaparms">5.3.</a>&nbsp;
New SDP Capability Negotiation Parameters<br />
<a href="#security">6.</a>&nbsp;
Security Considerations<br />
<a href="#verchanges">7.</a>&nbsp;
Changes from previous versions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">7.1.</a>&nbsp;
Changes from version 09<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">7.2.</a>&nbsp;
Changes from version 08<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">7.3.</a>&nbsp;
Changes from version 04<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">7.4.</a>&nbsp;
Changes from version 03<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">7.5.</a>&nbsp;
Changes from version 02<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">7.6.</a>&nbsp;
Changes from version 01<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">7.7.</a>&nbsp;
Changes from version 00<br />
<a href="#acks">8.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>Session Description Protocol (SDP) capability negotiation  <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a> provides a general framework for indicating and negotiating capabilities in SDP<a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a>. The base framework defines only capabilities for negotiating transport protocols and attributes.  
</p>
<p>The <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a> document lists some of the issues with the current SDP capability negotiation process. An additional real life case is to be able to offer one media stream (e.g. audio) but list the capability to support another media stream (e.g. video) without actually offering it concurrently.  
</p>
<p>In this document, we extend the framework by defining media capabilities that can be used to indicate and negotiate media types and their associated format parameters.  This document also adds the ability to declare support for media streams, the use of which can be offered and negotiated later, and the ability to specify session configurations as combinations of media stream configurations.  The definitions of new attributes for media capability negotiation are chosen to make the translation from these attributes to "conventional" SDP <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a> media attributes as straightforward as possible in order to simplify implementation.  This goal is intended to reduce processing in two ways: each proposed configuration in an offer may be easily translated into a conventional SDP media stream record for processing by the receiver; and the construction of an answer based on a selected proposed configuration is straightforward. 
</p>
<a name="terms"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
            and "OPTIONAL" in this document are to be interpreted as described in RFC2119 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> and indicate requirement levels for compliant RTP implementations.
</p>
<p>
</p>
<p>"Base Attributes": Conventional SDP attributes appearing in the base configuration of a media block.

</p>
<p>"Base Configuration": The media configuration represented by a media block exclusive of all the capability negotiation attributes defined in this document, the base capability document<a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>, or any future capability negotiation document.
			
</p>
<p>"Conventional Attribute": Any SDP attribute other than those defined by the series of capability negotiation specifications.

</p>
<p>"Conventional SDP": An SDP record devoid of capability negotiation attributes.
</p>
<p>	"Media Capability": A media encoding, typically a media subtype such as PCMU, H263-1998, or T38.

</p>
<a name="sdpmedcap"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
 SDP Media Capabilities</h3>

<p>The SDP capability negotiation <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a> discusses the use of any SDP <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a> attribute (a=) under the attribute capability "acap".  The limitations of using acap for fmtp and rtpmap in a potential configuration are described in <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>; for example they can be used only at the media level since they are media level attributes. The <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>  does not provide a way to exchange capabilities prior to the actual offer of one or more media streams.  This section provides an overview of extensions providing an SDP Media Capability negotiation solution offering more robust capabilities negotiation. This is followed by definitions of new SDP attributes for the solution and its associated updated offer/answer procedures <a class='info' href='#RFC3264'>[RFC3264]<span> (</span><span class='info'>Rosenberg, J. and H. Schulzrinne, &ldquo;An Offer/Answer Model with Session Description Protocol (SDP),&rdquo; June&nbsp;2002.</span><span>)</span></a>
			
</p>
<a name="reqts"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Requirements</h3>

<p>The capability negotiation extensions described herein are described as follows.
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>REQ-01: </dt>
<dd>Support the specification of alternative (combinations of) media formats (codecs) in a single media block.                       
</dd>
</dl></blockquote><p>
				
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>REQ-02: </dt>
<dd>Support the specification of alternative media format parameters for each media format.                    
</dd>
</dl></blockquote><p>
				
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>REQ-03: </dt>
<dd>Retain backward compatibility with conventional SDP.  Ensure that each and every offered configuration can be easily translated into a corresponding SDP media block expressed with conventional SDP lines.                 
</dd>
</dl></blockquote><p>
				
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>REQ-04: </dt>
<dd>Ensure the scheme operates within the offer/answer model in such a way that media formats and parameters can be agreed upon with a single exchange.                  
</dd>
</dl></blockquote><p>
				
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>REQ-05: </dt>
<dd>Provide the ability to express offers in such a way that the offerer can receive media as soon as the offer is sent.  (Note that the offerer may not be able to render received media prior to exchange of keying material.)            
</dd>
</dl></blockquote><p>
				
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>REQ-06: </dt>
<dd>Provide the ability to offer latent media configurations for future negotiation.               
</dd>
</dl></blockquote><p>
				
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>REQ-07: </dt>
<dd>Provide reasonable efficiency in the expression of alternative media formats and/or format parameters, especially in those cases in which many combinations of options are offered.                
</dd>
</dl></blockquote><p>
				
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>REQ-08: </dt>
<dd>Retain the extensibility of the base capability negotiation mechanism.
</dd>
</dl></blockquote><p>
				
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>REQ-09: </dt>
<dd>Provide the ability to specify acceptable combinations of media streams and encodings.  For example, offer a PCMU audio stream with an H264 video stream, or a G729 audio stream with an H263 video stream.  This ability would give the offerer a means to limit processing requirements for simultaneous streams.  This would also permit an offer to include the choice of an audio/T38 stream or an image/T38 stream, but not both.               
</dd>
</dl></blockquote><p>
				
</p>
<p>Other possible extensions have been discussed, but have not been treated in this document.  They may be considered in the future.  Three such extensions are:
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>FUT-01: </dt>
<dd>Provide the ability to mix, or change, media types within a single media block.  Conventional SDP does not support this capability explicitly; the usual technique is to define a media subtype that represents the actual format within the nominal media type.  For example, T.38 FAX as an alternative to audio/PCMU within an audio stream is identified as audio/T38; a separate FAX stream would use image/T38.                 
</dd>
</dl></blockquote><p>
				
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>FUT-02: </dt>
<dd>Provide the ability to support multiple transport protocols within an active media stream without reconfiguration.  This is not explicitly supported by conventional SDP.                  
</dd>
</dl></blockquote><p>
				
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>FUT-03: </dt>
<dd>Provide capability negotiation attributes for all media-level SDP line types in the same manner as already done for the attribute type, with the exception of the media line type itself.  The media line type is handled in a special way to permit compact expression of media coding/format options.  The lines types are bandwidth ("b="), information ("i="), connection data ("c="), and, possibly, the deprecated encryption key ("k=").                   
</dd>
</dl></blockquote><p>
				
</p>
<a name="overview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Solution Overview</h3>

<p>The solution consists of new capability attributes corresponding to conventional SDP line types, new parameters for the pcfg attribute extending the base attributes from  <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>, and a use of the pcfg attribute to return capability information in the SDP answer.
</p>
<p>Three new attributes are defined in a manner that can be related to the capabilities specified in a media line, and its corresponding rtpmap and fmtp attributes.
</p>
<p>
					</p>
<ul class="text">
<li>A new media attribute ("a=mcap") defines media capabilities in the form of a subtype (e.g.  "PCMU"), and its encoding parameters (e.g. "/8000/2").  Each resulting media format type/subtype capability has an associated handle called a media capability number.  The encoding parameters are as specified for the rtpmap attribute defined in <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a>
						
</li>
<li>A new attribute ("a=mfcap") specifies media format parameters associated with one or more media capabilities.  The mfcap attribute is used primarily to associate the formatting capabilities normally carried in the fmtp attribute.
</li>
<li>A new attribute ("a=mscap") that specifies media parameters      associated with one or more media capabilities.  The mscap      attribute is used to associate capabilities with attributes other than fmtp or rtpmap, for example, the rtcp-fb attribute.
</li>
<li>A new attribute ("a=lcfg") specifies latent media stream configurations when no corresponding media line ("m=") is offered.  An example is the offer of a latent configuration for video even though no video is currently offered.  If both parties indicate support for one or more latent configurations, the corresponding media stream(s) may be added via a new offer/answer exchange.  
</li>
<li>A new attribute ("a=sescap") is used to specify an acceptable combination of simultaneous media streams as a list of potential and/or latent configurations.
</li>
</ul><p>
				
</p>
<p>New parameters are defined for the potential configuration (pcfg), latent configuration (lcfg), and accepted configuration (acfg) attributes to associate the new attributes with particular configurations.
</p>
<p>
					</p>
<ul class="text">
<li>
  A new parameter type ("m=") is added to the potential configuration ("a=pcfg:") attribute and the actual configuration ("a=acfg:") attribute defined in <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>, and to the new latent configuration ("a=lcfg:") attribute.  This permits specification of media capabilities (including their associated parameters) and combinations thereof for the configuration.  For example, the "a=pcfg:" line might specify PCMU and telephone events or G.729B and telephone events as acceptable configurations.  The "a=acfg:" line in the answer would specify the accepted choice.
  
</li>
<li>A new parameter type ("pt=") is added to the potential configuration, actual configuration, and latent configuration attributes.  This parameter associates RTP payload types numbers with the referenced media capabilities, and is appropriate only when the transport protocol uses RTP.  
</li>
<li>A new parameter type ("mt=") is used to specify the media type for latent configurations.
</li>
</ul><p>
				
</p>
<p>Special processing rules are defined for capability attribute arguments in order to reduce the need to replicate essentially-identical attribute lines for the base configuration and potential configurations.
</p>
<p>
					</p>
<ul class="text">
<li>A substitution rule is defined for any capability attribute to permit the replacement of the (escaped) media capability number with the media format identifier (e.g., the payload type number in audio/video profiles).
</li>
<li>Replacement rules are defined for the conventional SDP equivalents of the mfcap, mscap, and bcap capability attributes.  This reduces the necessity to use the deletion qualifier in the pcfg a= parameter in order to ignore rtpmap, fmtp, and certain other attributes in the base configuration.
</li>
<li>An argument concatenation rule is defined for mfcap attributes which refer to the same media capability number.  This makes it convenient to combine format options concisely by associating multiple mfcap lines with multiple media capabilities.

</li>
</ul><p>
				
</p>
<p>This document extends the base protocol extensions to the offer/answer model that allow for capabilities and potential configurations to be included in an offer.  Media capabilities constitute capabilities that can be used in potential and latent configurations.  Whereas potential configurations constitute alternative offers that may be accepted by the answerer instead of the actual configuration(s) included in the "m=" line(s) and associated parameters, latent configurations merely inform the other side of possible configurations supported by the entity.  Those latent configurations may be used to guide subsequent offer/answer exchanges, but they are not part of the current offer/answer exchange. 
</p>
<p>The mechanism is illustrated by the offer/answer exchange below, where Alice sends an offer to Bob: 
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                Alice                               Bob
               | (1) Offer (SRTP and RTP)         |
               |---------------------------------&gt;|
               |                                  |
               | (2) Answer (RTP)                 |
               |&lt;---------------------------------|
               |                                  |
</pre></div>
<p>Alice's offer includes RTP and SRTP as alternatives. RTP is the default, but SRTP is the preferred one (long lines are folded to fit the margins):
</p>
<p>
					</p>
<blockquote class="text">
<p>
						v=0<br />
 
						o=- 25678 753849 IN IP4 192.0.2.1<br />
 
						s=<br />
 
						c=IN IP4 192.0.2.1<br />
 
						t=0 0<br />
 
						a=creq:med-v0<br />
 						
						m=audio 3456 RTP/AVP 0 18<br />
 
						a=tcap:1 RTP/SAVP  RTP/AVP<br />
						
						a=rtpmap:0 PCMU/8000/1<br />
 
         					a=rtpmap:18 G729/8000/1<br />
 
          					a=fmtp:18 annexb=yes<br />
 
         					a=mcap:1,4 g729/8000/1<br />

          					a=mcap:2 PCMU/8000/1<br />
 
          					a=mcap:5 telephone-event/8000<br />

          					a=mfcap:1 annexb=no<br />
 
          					a=mfcap:4 annexb=yes<br />

          					a=mfcap:5 0-11<br />
 						
						a=acap:1 crypto:1 AES_CM_128_HMAC_SHA1_32 \   <br />
 
						inline:NzB4d1BINUAvLEw6UzF3WSJ+PSdFcGdUJShpX1Zj|2^20|1:32<br />
 						
						a=pcfg:1 m=4,5|1,5 t=1 a=1 pt=1:100,4:101,5:102<br />

          					a=pcfg:2 m=2 t=1 a=1 pt=2:103<br />

          					a=pcfg:3 m=4 t=2 pt=4:18
          					
</p>
</blockquote><p>
				
</p>
<p>
				The required base and extensions are provided by the "a=creq" attribute defined in <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>, with the option tag "med-v0", which indicates that the extension framework defined here, must be supported. The Base level support is implied since it is required for the extensions.
</p>
<p>The "m=" line indicates that Alice is offering to use plain RTP with PCMU or G.729B.  The media line implicitly defines the default transport protocol (RTP/AVP in this case) and the default actual configuration.  
</p>
<p>The "a=tcap:1" line, specified in the base protocol, defines transport protocol capabilities, in this case Secure RTP (SAVP profile) as the first option and RTP (AVP profile) as the second option.
</p>
<p>The "a=mcap:1,4" line defines two G.729 media format capabilities, numbered 1 and 4, and their encoding rate.  The capabilities are of media type "audio" and subtype G729.  Note that the media subtype is explicitly specified here, rather than RTP payload type numbers.  In this example, two G.729 subtype capabilities are defined.  This permits the declaration of two sets of formatting parameters for G.729.
</p>
<p>The "a=mcap:2" line defines a G.711 mu-law capability, numbered 2.
</p>
<p>The "a=mcap:5" line defines an audio telephone-event capability, numbered 5.
</p>
<p>The "a=mfcap:1" line specifies the fmtp formatting parameters for capability 1 (offerer will not accept G.729 Annex B packets).
</p>
<p>The "a=mfcap:4" line specifies the fmtp formatting parameters for capability 4 (offerer will accept G.729 Annex B packets).
</p>
<p>The "a=mfcap:5" line specifies the fmtp formatting parameters for capability 5 (the DTMF touchtones 0-9,*,#).
</p>
<p>The "a=acap:1" line specified in the base protocol provides the "crypto" attribute which provides the keying material for SRTP using SDP security descriptions.
</p>
<p>The "a=pcfg:" attributes provide the potential configurations included in the offer by reference to the media capabilities, transport capabilities, and associated payload type number mappings.  Three explicit alternatives are provided; the lowest-numbered one is the preferred one. The "a=pcfg:1 ..." line specifies media capabilities 4 and 5, i.e., G.729B and DTMF, or media capability 1 and 5, i.e., G.729 and DTMF. Furthermore, it specifies transport protocol capability 1 (i.e. the RTP/SAVP profile - secure RTP), and the attribute capability 1, i.e.  the crypto attribute provided.  Lastly, it specifies a payload type number mapping for media capabilities 1, 4, and 5, thereby permitting the offerer to distinguish between encrypted media and unencrypted media received prior to receipt of the answer.  
</p>
<p>Use of unique payload type numbers is not required; codecs such as AMR-WB <a class='info' href='#RFC4867'>[RFC4867]<span> (</span><span class='info'>Sjoberg, J., Westerlund, M., Lakaniemi, A., and Q. Xie, &ldquo;RTP Payload Format and File Storage Format for the Adaptive Multi-Rate (AMR) and Adaptive Multi-Rate Wideband (AMR-WB) Audio Codecs,&rdquo; April&nbsp;2007.</span><span>)</span></a> have the potential for so many combinations of options that it may be impractical to define unique payload type numbers for all supported combinations. If unique payload type numbers cannot be specified, then the offerer will be obliged to wait for the SDP answer before rendering received media.  For SRTP using SDES inline keying <a class='info' href='#RFC4568'>[RFC4568]<span> (</span><span class='info'>Andreasen, F., Baugher, M., and D. Wing, &ldquo;Session Description Protocol (SDP) Security Descriptions for Media Streams,&rdquo; July&nbsp;2006.</span><span>)</span></a>, the offerer will still need to receive the answer before being able to decrypt the stream.
</p>
<p>
The second alternative ("a=pcfg:2 ...")  specifies media capability 2, i.e. PCMU, under the RTP/SAVP profile, with the same SRTP key material.
</p>
<p>The third alternative ("a=pcfg:3 ...")  offers G.729B unsecured; it's only purpose in this example is to show a preference for G.729B over PCMU.
</p>
<p>The media line, with any qualifying attributes such as fmtp or rtpmap, is itself considered a valid configuration; it is assumed to be the lowest preference.  
</p>
<p>Bob receives the SDP offer from Alice.  Bob supports G.729B, PCMU, and telephone events over RTP, but not SRTP,  hence he accepts the potential configuration 3 for RTP provided by Alice. Bob generates the following answer:
</p>
<p>
					</p>
<blockquote class="text">
<p>
						v=0<br />
 
						o=- 24351 621814 IN IP4 192.0.2.2<br />
 
						s=<br />
 
						c=IN IP4 192.0.2.2<br />
 
						t=0 0<br />
 
						a=csup:med-v0<br />
 						
						m=audio 4567 RTP/AVP 18<br />
 
						a=rtpmap:18 G729/8000<br />
 
						a=fmtp:18 annexb=yes<br />
 
						a=acfg:3 m=4 pt=4:18
</p>
</blockquote><p>
				
</p>
<p>Bob includes the "a=csup" and "a=acfg" attributes in the answer to inform Alice that he can support the med-v0 level of capability negotiations.  Note that in this particular example, the answerer supported the capability extensions defined here, however had he not, he would simply have processed the offer based on the offered PCMU and G.729 codecs under the RTP/AVP profile only.  Consequently, the answer would have omitted the "a=csup" attribute line and chosen one or both of the PCMU and G.729 codecs instead.  The answer carries the accepted configuration in the m line along with corresponding rtpmap and/or fmtp parameters, as appropriate.
</p>
<p>
Note that per the base protocol, after the above, Alice MAY generate a new offer with an actual configuration ("m=" line, etc.) corresponding to the actual configuration referenced in Bob's answer (not shown here).
</p>
<a name="newattrs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
New Capability Attributes</h3>

<p>In this section, we present the new attributes associated with indicating the media capabilities for use by the SDP Capability
   negotiation.  The approach taken is to keep things similar to the existing media capabilities defined by the existing media descriptions ("m=" lines) and the associated "rtpmap" and "fmtp" attributes.  We use media subtypes and "media capability numbers" instead of payload type numbers to link the relevant media capability parameters.  This permits the capabilities to be defined at the session level and be used for multiple streams, if desired.  Payload types are then specified at the media level (see Section <a class='info' href='#ptparm'>Section&nbsp;3.3.4.2<span> (</span><span class='info'>The Payload Type Number Mapping Parameter (pt=)</span><span>)</span></a>).

</p>
<p>A media capability merely indicates possible support for the media type and media format(s) in question.  In order to actually use a
media capability in an offer/answer exchange, it must be referenced in a potential configuration.

</p>
<p>Media capabilities can be provided at the session-level and/or the media-level.  Media capabilities provided at the session level may be referenced in an lcfg attribute at the session level, or by any pcfg attribute at the media level (consistent with the media type), whereas media capabilities provided at the media level may be referenced by a pcfg or lcfg attribute within that media stream only.  In either case, the scope of the &lt;med-cap-num&gt; is the entire session description.  This enables each media capability to be uniquely referenced across the entire session description (e.g. in a potential configuration).
</p>
<a name="mcap"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.1"></a><h3>3.3.1.&nbsp;
The Media Encoding Capability Attribute</h3>

<p>Media subtypes can be expressed as media encoding capabilities by use of the "a=mcap" attribute, which is formatted as follows:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
a=mcap:&lt;media cap num list&gt; &lt;encoding name&gt;/&lt;clock rate&gt;
                             [/&lt;encoding parms&gt;]
</pre></div>
<p>
				where &lt;med cap num list&gt; is a (list of) media capability number(s) used to number a media format capability, the &lt;encoding name&gt; is the media subtype e.g. H263-1998 or PCMU, &lt;clock rate&gt; is the encoding rate, and &lt;encoding parms&gt; are the media encoding parameters for the media subtype;.  All media format capabilities in the list are assigned to the same media type/subtype.  Each occurrence of the mcap attribute MUST use unique values in its &lt;med cap num list&gt;; the media capability numbers must be unique across the entire SDP session.  In short, the mcap attribute defines media capabilities and associates them with a media capability number in the same manner as the rtpmap attribute defines them and associates them with a payload type number. 
</p>
<p>In ABNF, we have:
				
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   media-capability-line = "a=mcap:" media-cap-num-list
                           1*WSP encoding-name "/" clock-rate
                           ["/" encoding-parms]
   media-cap-num-list = media-cap-num *[COMMA media-cap-num]
   media-cap-num      = 1*DIGIT
   encoding-name      = token ; Media Subtype name(PCMU, G729, etc.)
   clock-rate         = 1*DIGIT
   encoding-parms     = token
</pre></div>
<p>The encoding-name, clock-rate and encoding-params are as defined to appear in an rtpmap attribute for each media type/subtype.  Thus, it is easy to convert an mcap attribute line into one or more rtpmap attribute lines, once a payload type number is assigned to a media-cap-num (see section <a class='info' href='#lcfg'>Section&nbsp;3.3.5<span> (</span><span class='info'>The Latent Configuration Attribute</span><span>)</span></a>).
</p>
<p>The "mcap" attribute can be provided at the session-level and/or the media-level.  There can be more than one mcap attribute at the session or media level.  Each media-cap-num must be unique within the entire SDP record; it is used to identify that media capability in potential, latent and actual configurations, and in other attribute lines as explained below. When used in a potential, latent or actual configuration it is, in effect, a media level attribute regardless if it is specified at the session or media level. In other words, the media capability applies to the specific media description associated with the configuration which invokes it.
</p>
<p>For example:	
</p>
<p>
						</p>
<blockquote class="text">
<p>
						v=0<br />
 						
						a=mcap:1 L16/8000/1<br />
 
						a=mcap:2 L16/16000/2<br />
 
						a=mcap:3,4 H263-1998/90000<br />
 
						m=audio 54320 RTP/AVP 0<br />
 
                                    a=pcfg:1 m=1|2, pt=1:99,2:98<br />
 
                                    m=video 66544 RTP/AVP 100<br />

                                    a=rtpmap:100 H264/90000<br />
 
                                    a=pcfg:10 m=3 pt=3:101

						
</p>
</blockquote><p>
					
</p>
<a name="mfcap"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.2"></a><h3>3.3.2.&nbsp;
The Media Format Parameter Capability Attribute</h3>

<p>
				This attribute is used to associate media-specific format parameters with one or more media capabilities.  The form of the attribute is:
					
</p>
<p>
						</p>
<blockquote class="text">
<p>a=mfcap:&lt;media-caps&gt;  &lt;list of parameters&gt;

</p>
</blockquote><p>
					
</p>
<p>where &lt;media-caps&gt; permits the parameter(s) to be associated with one or more media capabilities and the format parameters are specific to the type of codec.  The mfcap lines map to a single traditional SDP fmtp attribute line (one for each entry in &lt;media-caps&gt;) of the form
</p>
<p>
						</p>
<blockquote class="text">
<p>a=fmtp:&lt;fmt&gt;  &lt;list of parameters&gt;

</p>
</blockquote><p>
					
</p>
<p>where &lt;fmt&gt; is the media format description defined in RFC 4566 <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a>, as appropriate for the particular media stream.  The mfcap attribute MUST be used to encode attributes for media capabilities, which would conventionally appear in an fmtp attribute.
</p>
<p>The mfcap attribute adheres to RFC 4566<a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a> attribute production rules with
</p>
<p>
						</p>
<blockquote class="text">
<p>
						 media-format-capability = "a=mfcap:"&lt;media-caps&gt;<br />

								</p>
<blockquote class="text">
<p> 1*WSP &lt;fmt-specific-param-list&gt;<br />

									
</p>
</blockquote>
								<br />

        media-caps = "*"  ; wildcard: all media caps<br />

								
<blockquote class="text">
<p>  / &lt;media-cap-num-list&gt; ; defined in <a class='info' href='#mcap'>Section&nbsp;3.3.1<span> (</span><span class='info'>The Media Encoding Capability Attribute</span><span>)</span></a> <br />

									
</p>
</blockquote>
								<br />

                  fmt-specific-param-list = text ; defined in RFC 4566

						
						

</blockquote><p>
					
</p>
<a name="mfcapcat"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.2.1"></a><h3>3.3.2.1.&nbsp;
Media Format Parameter Concatenation Rule</h3>

<p>The appearance of media subtypes with a large number of formatting options (e.g., AMR-WB <a class='info' href='#RFC4867'>[RFC4867]<span> (</span><span class='info'>Sjoberg, J., Westerlund, M., Lakaniemi, A., and Q. Xie, &ldquo;RTP Payload Format and File Storage Format for the Adaptive Multi-Rate (AMR) and Adaptive Multi-Rate Wideband (AMR-WB) Audio Codecs,&rdquo; April&nbsp;2007.</span><span>)</span></a>) coupled with the restriction that only a single fmtp attribute can appear per media format, suggests that it is useful to create a combining rule for mfcap parameters which are associated with the same media capability number.  Therefore, different mfcap lines MAY include the same media-cap-num in their media-cap-num-list.  When a particular media capability is selected for processing, the parameters from each mfcap line which references the particular capability number in its media-cap-num-list are concatenated together via ";", in the order the mfcap attributes appear in the SDP record, to form the equivalent of a single fmtp attribute line.  This permits one to define a separate mfcap line for a single parameter and value that is to be applied to each media capability designated in the media-cap-num-list.  This provides a compact method to specify multiple combinations of format parameters when using codecs with multiple format options. Note that order-dependent parameters MAY be placed in a single mfcap line to avoid possible problems with line rearrangement by a middlebox.
</p>
<p>Format parameters are not parsed by SDP; their content is specific to the media type/subtype.  When format parameters for a specific media capability are combined from multiple a=mfcap lines which reference that media capability, the format-specific parameters are concatenated together and separated by "; " for construction of the corresponding format attribute (a=fmtp):
</p>
<p>
							</p>
<blockquote class="text">
<p>a=fmtp:&lt;fmt&gt; 1*WSP  &lt;fmt-specific-param-list&gt;
					*(";" 1*WSP 
					</p>
<blockquote class="text">
<p>&lt;fmt-specfic-param-list&gt;) ; 
</p>
</blockquote>
								

</blockquote><p>
						
</p>
<p>where &lt;fmt&gt; depends on the transport protocol in the manner defined in RFC4566.  SDP cannot assess the legality of the resulting parameter list in the "a=fmtp" line; the user must take care to insure that legal parameter lists are generated. 
</p>
<p>The "mfcap" attribute can be provided at the session-level and the media-level.  There can be more than one mfcap attribute at the session or media level.  The unique media-cap-num is used to associate the parameters with a media capability.  
</p>
<p>
				As a simple example, a G.729 capability is, by default, considered to  support comfort noise as defined by Annex B.  Capabilities for G.729  with and without comfort noise support may thus be defined by:			
				
</p>
<p>
							</p>
<blockquote class="text">
<p>
						a=mcap:1,2 audio G729/8000<br />
 
						a=mfcap:2 annexb:no
</p>
</blockquote><p>
						
</p>
<p>Media format capability 1 supports G.729 with Annex B, whereas media format capability 2 supports G.729 without Annex B. 
</p>
<p>
				Example for H.263 video:				
				
</p>
<p>
							</p>
<blockquote class="text">
<p>
						a=mcap:1 video H263-1998/90000<br />

						a=mcap:2 video H263-2000/90000<br />
 
 
						a=mfcap:1 CIF=4;QCIF=2;F=1;K=1<br />
 
						a=mfcap:2 profile=2;level=2.2
</p>
</blockquote><p>
						
</p>
<p>Finally, for six format combinations of the Adaptive MultiRate codec:
</p>
<p>
							</p>
<blockquote class="text">
<p>
						a=mcap:1-3 AMR/8000/1<br />
 
						a=mcap:4-6 AMR-WB/16000/1<br />
 
						a=mfcap:1,2,3,4 mode-change-capability=1<br />
 
						a=mfcap:5,6 mode-change-capability=2<br />
 
						a=mfcap:1,2,3,5 max-red=220<br />
 
						a=mfcap:3,4,5,6 octet-align=1<br />
 
						a=mfcap:1,3,5 mode-set=0,2,4,7<br />
 					
						a=mfcap:2,4,6 mode-set=0,3,5,6
</p>
</blockquote><p>
						
</p>
<p>So that AMR codec #1, when specified in a pcfg attribute within an audio stream block (and assigned payload type number 98) as in
</p>
<p>
							</p>
<blockquote class="text">
<p>
                                                                a=pcfg:1 m=1 pt=1:98
</p>
</blockquote><p>
						
</p>
<p>is essentially equivalent to the following 
</p>
<p>
							</p>
<blockquote class="text">
<p>
						m=audio 49170 RTP/AVP 98<br />
 
						a=rtpmap:98 AMR/8000/1<br />
 
						a=fmtp:98 mode-change-capability=1; \ <br />
 
			max-red=220; mode-set=0,2,4,7
</p>
</blockquote><p>
						
</p>
<p>and AMR codec #4 with payload type number 99,depicted by the potential configuration:
</p>
<p>
							</p>
<blockquote class="text">
<p>
						
						a=pcfg:4 m=4, pt=4:99
</p>
</blockquote><p>
						
</p>
<p> is equivalent to the following: 
</p>
<p>
							</p>
<blockquote class="text">
<p>
						m=audio 49170 RTP/AVP 99<br />
 
						a=rtpmap:99 AMR-WB/16000/1<br />
 
						a=fmtp:99 mode-change-capability=1; octet-align=1; \ <br />
 
				mode-set=0,3,5,6
</p>
</blockquote><p>
						
</p>
<p>and so on for the other four combinations. SDP could thus convert the media capabilities specifications into one or more alternative media stream specifications, one of which can be chosen for the answer.
</p>
<a name="mscap"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.3"></a><h3>3.3.3.&nbsp;
The Media-Specific Capability Attribute</h3>

<p>Media-specific attributes, beyond the rtpmap and fmtp attributes, may be associated with media capability numbers via a new media-specific attribute, mscap, of the following form:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      a=mscap:&lt;media caps&gt; &lt;att field&gt; &lt;att value&gt;
</pre></div>
<p>Where &lt;media caps&gt; is a (list of) media capability number(s), &lt;att field&gt; is the attribute name, and &lt;att value&gt; is the value field for the named attribute.  In ABNF, we have:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
       media-specific-capability = "a=mscap:"
                                    media-caps ; defined in 3.
                                    1*WSP att-field ; from RFC4566
                                    1*WSP att-value ; from RFC4566.
</pre></div>
<p>Given an association between a media capability and a payload type number as
   specified by the pt= parameters in an lcfg or pcfg attribute line, a mscap
   line may be translated easily into a conventional SDP attribute line of the form

</p>
<p>
						</p>
<blockquote class="text">
<p>a=&lt;att field&gt;":"&lt;fmt&gt; &lt;att value&gt;   ; &lt;fmt&gt; defined in <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a>
							
</p>
</blockquote><p>
					
</p>
<p>A resulting attribute that is not a legal SDP attribute as specified by RFC4566  MUST be ignored by the receiver.
</p>
<p>A single mscap line may refer to multiple media capabilities; this is equivalent to multiple mscap lines, each with the same attribute values, one line per media capability. 
</p>
<p>Multiple mscap lines may refer to the same media capability, but, unlike the mfcap attribute, no concatenation operation is defined.  Hence, multiple mscap lines applied to the same media capability is equivalent to multiple lines of the specified attribute in a conventional media record.
</p>
<p>Here is an example with the rtcp-fb attribute, modified from an example in <a class='info' href='#RFC5104'>[RFC5104]<span> (</span><span class='info'>Wenger, S., Chandra, U., Westerlund, M., and B. Burman, &ldquo;Codec Control Messages in the RTP Audio-Visual Profile with Feedback (AVPF),&rdquo; February&nbsp;2008.</span><span>)</span></a> (with the session-level and audio media omitted).  If the offer contains a media block like the following,
</p>
<p>
						</p>
<blockquote class="text">
<p>
							m=video 51372 RTP/AVP 98<br />
 
							a=rtpmap:98 H263-1998/90000<br />
 
							a=tcap:1 RTP/AVPF<br />
 
                                               a=mcap:1 H263-1998/90000<br />
 
        					      a=mscap:1 rtcp-fb ccm tstr<br />
 
      						      a=mscap:1 rtcp-fb ccm fir<br />
 
       					      a=mscap:* rtcp-fb ccm tmmbr smaxpr=120<br />
 
                                              a=pcfg:1 t=1 m=1 pt=1:98
               
</p>
</blockquote><p>
					
</p>
<p>and if the proposed configuration is chosen, then the equivalent media block would look like
</p>
<p>
						</p>
<blockquote class="text">
<p>
							m=video 51372 RTP/AVPF 98<br />
 
							a=rtpmap:98 H263-1998/90000<br />
 
							a=rtcp-fb:98 ccm tstr<br />
 
          						a=rtcp-fb:98 ccm fir<br />
 
         						a=rtcp-fb:* ccm tmmbr smaxpr=120

               
</p>
</blockquote><p>
					
</p>
<a name="configparms"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.4"></a><h3>3.3.4.&nbsp;
New Configuration Parameters</h3>

<p>		Along with the new attributes for media capabilities, new extension parameters are defined for use in the potential configuration, the actual configuration, and the new latent configuration defined in Section <a class='info' href='#lcfg'>Section&nbsp;3.3.5<span> (</span><span class='info'>The Latent Configuration Attribute</span><span>)</span></a>.
</p>
<a name="mparm"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.4.1"></a><h3>3.3.4.1.&nbsp;
The Media Configuration Parameter (+m=)</h3>

<p>The media configuration parameter is used to specify the media encoding(s) and related parameters for a configuration.  Adhering to the ABNF for extension-config-list in <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a> with
                                    
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
          ext-cap-name = "m"
          ext-cap-list = media-cap-num-list
                         [*(BAR media-cap-num-list)]
</pre></div>
<p>we have
						
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
           media-config-list = ["+"]"m=" media-cap-num-list
                               [*(BAR media-cap-num-list)]
                                 ; BAR is defined in [SDPCapNeg]
           media-cap-num-list  = media-cap-num *("," media-cap-num)
           media-cap-num       = 1*DIGIT      ; defined in [RFC5234]
</pre></div>
<p>Alternative media configurations are separated by a vertical bar ("|").  The alternatives are ordered by preference, most-preferred first.  When media capabilities are not included in a potential configuration at the media level, the media type and media format from the associated "m=" line will be used.  Note that the media configuration parameter MAY be specified with the plus sign ("+") to force the entire attribute line to be ignored if the parameter is not recognized by the interpreter, although this is unnecessary if the med-v0 level of support is specified in a creq attribute.

</p>
<a name="ptparm"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.4.2"></a><h3>3.3.4.2.&nbsp;
The Payload Type Number Mapping Parameter (pt=)</h3>

<p>We define the payload type number mapping parameter, payload-number-config-list, in accordance with the extension-config-list format defined in <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>.  In ABNF:
						
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
         payload-number-config-list = ["+"]"pt=" media-map-list
         media-map-list = media-map *["," media-map]
         media-map = media-cap-num ":" payload-type-number
                       ; media-cap-num is defined in section 3.3.1
         payload-type-number = 1*DIGIT / "*" ; RTP payload type number
</pre></div>
<p>The example in the section <a class='info' href='#ptsubs'>Section&nbsp;3.3.7<span> (</span><span class='info'>Substitution of Media Payload Type Numbers in Capability Attribute Parameters</span><span>)</span></a>
shows how the parameters from the mcap line are mapped to payload type numbers from the pcfg "pt" parameter.  The plus sign ("+") SHOULD be included in the parameter specification, if med-v0 level of support is not required, because the entire attribute line in which it appears SHOULD be ignored if the parameter is not recognized by the interpreter.
</p>
<p>The "*" value is used in cases such as BFCP <a class='info' href='#RFC4583'>[RFC4583]<span> (</span><span class='info'>Camarillo, G., &ldquo;Session Description Protocol (SDP) Format for Binary Floor Control Protocol (BFCP) Streams,&rdquo; November&nbsp;2006.</span><span>)</span></a> in which the fmt list in the m-line is ignored.
</p>
<p>A latent configuration represents a future capability, hence the pt= parameter is not directly meaningful in the lcfg attribute because no actual media session is being offered or accepted; it is permitted in order to tie any payload type number parameters within attributes to the proper media format.  A primary example is the case of format parameters for the RED payload, which are payload type numbers.  Specific payload type numbers used in a latent configuration may be interpreted as suggestions to be used in any future offer based on the latent configuration, but they are not binding; the offerer and/or answerer may use any payload type numbers each deems appropriate.  The use of explicit payload type numbers for latent configurations can be avoided by use of the parameter substitution rule of section <a class='info' href='#ptsubs'>Section&nbsp;3.3.7<span> (</span><span class='info'>Substitution of Media Payload Type Numbers in Capability Attribute Parameters</span><span>)</span></a>
.  Future extensions are also permitted.
</p>
<a name="mtparm"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.4.3"></a><h3>3.3.4.3.&nbsp;
The Media Type Parameter</h3>

<p>When a latent configuration is specified (always at the session level), indicating the ability to support an additional media stream, it is necessary to specify the media type (audio, video, etc.) as well as the format and transport type.  The media type parameter is defined as
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
         media-type = "mt=" 1*WSP media; media defined in RFC4566.</pre></div>
<p>At present, the media-type parameter is used only in the latent configuration attribute.  The media format(s) and transport type(s) are specified using the media configuration parameter ("+m=") defined above, and the transport parameter ("t=") defined in <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>, respectively.
</p>
<a name="lcfg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.5"></a><h3>3.3.5.&nbsp;
The Latent Configuration Attribute</h3>

<p>One of the goals of this work is to permit the exchange of supportable media configurations in addition to those offered or accepted for immediate use.  Such configurations are referred to as "latent configurations".  For example, a party may offer to establish a session with an audio stream, and, at the same time, announce its ability to support a video stream as part of the same session.  The offerer can supply its video capabilities by offering one or more latent video configurations along with the media stream for audio; the responding party may indicate its ability and willingness to support such a video session by returning a corresponding latent configuration.
</p>
<p>Latent configurations returned in SDP answers must match offered latent configurations (or parameter subsets thereof).  Therefore, it is appropriate for the offering party to announce most, if not all, of its capabilities in the initial offer.  This choice has been made in order to keep the size of the answer more compact by not requiring acap, mcap, tcap, etc. lines in the answer. 
</p>
<p>Latent configurations may be announced by use of the latent configuration attribute, which is defined in a manner very similar to the potential configuration attribute.  The media type (mt=) and the transport protocol(s) (t=) MUST be specified since there is no corresponding m-line for defaults.  In most cases, the media configuration (m=) parameter must be present as well (see section <a class='info' href='#examples'>Section&nbsp;4<span> (</span><span class='info'>Examples</span><span>)</span></a>
 for examples).  The lcfg attribute is a session level attribute, and all capability attributes referenced by lcfg attribute parameters must appear at the session level in the SDP record.
</p>
<p>The latent configuration attribute is of the form:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
          a=lcfg:&lt;config-number&gt; &lt;latent-cfg-list&gt;
</pre></div>
<p>which adheres to the RFC4566 "attribute" production with att-field and att-value defined as:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
         att-field  = "lcfg"
         att-value  = config-number 1*WSP lcfg-config-list
         config-number   = 1*10(DIGIT)  ; defined in [RFC5234]
         lcfg-config-list = media-type
                            1*WSP pot-config
                                 ; as defined in [SDPCapNeg]
                                 ; and extended herein
</pre></div>
<p>The media-type (mt=) parameter identifies the media type (audio, video, etc.) to be associated with the latent media stream, and must be present.
The pot-config must contain a transport-protocol-config-list (t=) parameter and a media-config-list (m=) parameter.  The pot-config list MUST NOT
contain more than one instance of each type of parameter list.  As
specified in [SDPCapNeg], the use of the "+" prefix with a parameter
indicates that the entire configuration must be ignored if the
parameter is not understood; otherwise, the parameter itself may be
ignored.
</p>
<p>Media stream payload numbers are not assigned by a latent configuration.  Assignment will take place if and when the corresponding stream is actually offered in a later exchange.  The payload-number-config-list is included as a parameter to the lcfg attribute in case it is necessary to tie payload numbers in attribute capabilities to specific media capabilities.
</p>
<p>Each latent configuration MUST be specified at the session level; it represents an additional media stream to those in the media block(s} of the offer or answer.  If an acap: attribute is declared at the session level for use in an lcfg line, it SHOULD NOT be used in a pcfg line at the media level unless it is to become a session-level attribute in the answer if that potential configuration becomes the actual configuration;
mcap, mfcap, mscap, tcap attributes may appear at the session level because
they always result in media-level attributes or m-line parameters.
</p>
<p>The configuration numbers for latent configurations do not imply a preference; the offerer will imply a preference when actually offering potential configurations derived from latent configurations negotiated earlier.  Note however that the offerer of latent configurations MAY specify preferences for combinations of potential and latent configurations by use of the sescap attribute defined in section <a class='info' href='#sescap'>Section&nbsp;3.3.8<span> (</span><span class='info'>The Session Capability Attribute</span><span>)</span></a>.  In order to permit intermixing of latent and potential configurations in session capabilities, latent configuration numbers MUST be different from those used for potential configurations.
</p>
<p>If a cryptographic attribute, such as the SDES "a=crypto:" attribute <a class='info' href='#RFC4568'>[RFC4568]<span> (</span><span class='info'>Andreasen, F., Baugher, M., and D. Wing, &ldquo;Session Description Protocol (SDP) Security Descriptions for Media Streams,&rdquo; July&nbsp;2006.</span><span>)</span></a>, is referenced by a latent configuration through an acap attribute, any key material REQUIRED in the conventional attribute, such as the SDES key/salt string, MUST be included in order to satisfy formatting rules for the attribute.  The actual value(s) of the key material SHOULD be meaningless, and the receiver of the lcfg: attribute MUST ignore the values.
</p>
<a name="pcfg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.6"></a><h3>3.3.6.&nbsp;
Enhanced Potential Configuration Attribute</h3>

<p>	The present work requires new extensions (parameters) for the pcfg: attribute defined in the base protocol <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>  The parameters and their definitions are "borrowed" from the definitions provided for the latent configuration attribute in section <a class='info' href='#lcfg'>Section&nbsp;3.3.5<span> (</span><span class='info'>The Latent Configuration Attribute</span><span>)</span></a>.  The expanded ABNF definition of the pcfg attribute is
</p>
<p>
						</p>
<blockquote class="text">
<p>
							a=pcfg: &lt;config-number&gt; [&lt;pot-cfg-list&gt;]					
</p>
</blockquote><p>
					
</p>
<p>	where
</p>
<p>
						</p>
<blockquote class="text">
<p>config-number  = 1*DIGIT ;defined in <a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a>
								<br />

	          pot-cfg-list   = pot-config *(1*WSP pot-config) <br />

	          pot-config     = attribute-config-list / def in <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a> <br />

	                           transport-protocol-config-list /  ;defined in <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>
								<br />

                           extension-config-list /  ;<a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>
								<br />

	                           media-config-list /  ; <a class='info' href='#mparm'>Section&nbsp;3.3.4.1<span> (</span><span class='info'>The Media Configuration Parameter (+m=)</span><span>)</span></a><br />

	                           payload-number-config-list /  ; <a class='info' href='#ptparm'>Section&nbsp;3.3.4.2<span> (</span><span class='info'>The Payload Type Number Mapping Parameter (pt=)</span><span>)</span></a>
	                           

</p>
</blockquote><p>
					
</p>
<p>Except for the extension-config-list, the pot-cfg-list MUST NOT contain more than one instance of each parameter list.
</p>
<a name="answercaps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.6.1"></a><h3>3.3.6.1.&nbsp;
Returning Capabilities in the Answer</h3>

<p>Potential and/or latent configuration attributes may be returned within the media block(s) of an answer SDP to indicate the ability of the answerer to to support alternative configurations of the corresponding stream(s).  For example, an offer may include multiple potential configurations for a media stream and/or latent configurations for additional streams; the corresponding answer will indicate (via an acfg attribute) which configuration is accepted, but it MAY also contain potential and/or latent configuration attributes, with parameters, to indicate which other offered configurations would be acceptable.  This information is useful if it becomes desirable to reconfigure a media stream, e.g., to reduce resource consumption. 
</p>
<p>When potential and/or latent configurations are returned in an answer, all numbering MUST refer to the configuration and capability attribute numbering of the offer.  The referenced capability attributes MUST NOT be returned in the answer.  The parameter values of any returned pcfg or lcfg attributes MUST be a subset of those included in the offered configurations; values may be omitted only if they were indicated as alternative sets, or optional, in the original offer.  The parameter set indicated in the returned acfg attribute need not be repeated in a returned pcfg attribute.  The answerer may return more than one pcfg attribute with the same configuration number if it is necessary to describe selected combinations of optional or alternative parameters.
</p>
<p>Similarly, one or more session capability attributes (a=sescap) may be returned to indicate which of the offered session capabilities is/are supportable by the answerer (see section <a class='info' href='#sescap'>Section&nbsp;3.3.8<span> (</span><span class='info'>The Session Capability Attribute</span><span>)</span></a>.)
</p>
<p>Note that the answerer MUST NOT return capabilities beyond those included by the offerer.  For this reason, it seems advisable for the offerer to include most, if not all, potential and latent configurations in the initial offer.  Additional capabilities MAY be announced later by renegotiating the session in a second offer/answer exchange.
</p>
<a name="ptmaping"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.6.2"></a><h3>3.3.6.2.&nbsp;
Payload Type Number Mapping</h3>

<p>When media capabilities defined in mcap attributes are used in potential configuration lines, and the transport protocol uses RTP, it is necessary to assign payload type numbers to them.  In some cases, it is desirable to assign different payload type numbers to the same media capability when used in different potential configurations.  One example is when configurations for AVP and SAVP are offered: the offerer would like the answerer to use different payload type numbers for encrypted and unencrypted media so that it (the offerer) can decide whether or not to render early media which arrives before the answer is received.  This association of distinct payload type number(s) with different transport protocols requires a separate pcfg line for each protocol.  Clearly, this technique cannot be used if the number of potential configurations exceeds the number of possible payload type numbers.
</p>
<a name="mediaattrs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.6.3"></a><h3>3.3.6.3.&nbsp;
Processing of Media-Format-Related Conventional Attributes for Potential Configurations</h3>

<p>In cases in which media capabilities negotiation is employed, SDP records are likely to contain conventional attributes such as rtpmap, fmtp, and other media-format-related lines, as well as capability attributes such as mcap, mfcap, and mscap which map into those conventional attributes.
</p>
<p>When one or more media capabilities (a=mcap) are invoked in a potential configuration via m= arguments, each capability is associated with a payload type number by default or by a payload type number argument (pt=).  Special processing MUST be invoked on conventional attributes associated with that payload type number.  If the media capability is associated with one or more mfcap attributes, then any corresponding conventional fmtp attribute in the media block MUST be ignored for that configuration.  If no mfcap attributes are specified, then the fmtp attribute line within the media block with the matching payload type number, if any, will apply.  Conventional fmtp attributes with payload type numbers not referenced in the configuration MUST also be ignored.  Similarly, any other conventional media-specific attributes (e.g., rtcp-fb) in the media block with payload type number matching a mscap attribute will apply unless there is an applicable mscap attribute for the same attribute type (e.g., rtcp-fb), in which case all base level attributes of the same type and payload type number will be ignored.  Any media-specific attributes in the media block which refer to payload type numbers not used by the potential configuration will be ignored.  These rules are intended to avoid the need to duplicate attributes and use the a=-m: form of invoking attributes in a potential configuration just to replace an rtpmap or fmtp attribute.
</p>
<p>For example:
</p>
<p>
							</p>
<blockquote class="text">
<p>
							
							       v=0<br />
 
       o=- 25678 753849 IN IP4 192.0.2.1<br />

       s=<br />

       c=IN IP4 192.0.2.1<br />

       t=0 0<br />

       a=creq:med-v0<br />

       m=audio 3456 RTP/AVP 0 18 100<br />

       a=rtpmap:100 telephone-events<br />

       a=fmtp:100 0-11<br />

       a=mcap:1 PCMU/8000<br />

       a=mcap:2 g729/8000<br />

       a=mcap:3 telephone-events/8000<br />

       a=mfcap:3 0-15<br />

       a=pcfg:1 m=2,3|1,3 pt=1:0,2:18,3:100				
							
								
</p>
</blockquote><p>
						
</p>
<p>In this example, PCMU is media capability 1, G729 is media capability 2, and telephone-event is media capability 3.  The a=pcfg: line specifies that the preferred configuration is G.729 with extended dtmf events, second is G.711 mu-law with extended dtmf events.  Intermixing of G.729, G.711, and "commercial" dtmf events is least preferred (the base configuration provided by the "m=" line, which is,
by default, the least preferred configuration).  The rtpmap and fmtp attributes of the base configuration are replaced by the mcap and mfcap attributes when invoked by the proposed configuration.
</p>
<p>If the preferred configuration is selected, the SDP answer will look like
</p>
<p>
							</p>
<blockquote class="text">
<p>
							
							       v=0<br />
 
       o=- 25678 753849 IN IP4 192.0.2.1<br />

       s=<br />

       c=IN IP4 192.0.2.1<br />

       t=0 0<br />

       a=csup:med-v0<br />

       m=audio 6543 RTP/AVP 18 100<br />

       a=rtpmap:100 telephone-events/8000<br />

      a=fmtp:100 0-15<br />

       
      a=acfg:1 m=2,3 pt=1:0,2:18,3:100
				
							
								
</p>
</blockquote><p>
						
</p>
<a name="ptsubs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.7"></a><h3>3.3.7.&nbsp;
Substitution of Media Payload Type Numbers in Capability Attribute Parameters</h3>

<p>In some cases, for example, when an RFC 2198 redundancy audio subtype (RED) capability is defined in an mfcap attribute, the parameters to an attribute may contain payload type numbers.  Two options are available for specifying such payload type numbers.  They may be expressed explicitly, in which case they are bound to actual payload types by means of the payload type number parameter (pt=) in the appropriate potential or latent configuration.  For example, the following SDP fragment defines a potential configuration with redundant G.711 mu-law:
</p>
<p>
						</p>
<blockquote class="text">
<p>
				m=audio 45678 RTP/AVP 0<br />

     a=rtpmap:0 PCMU/8000<br />

     a=mcap:1 PCMU/8000<br />

     a=mcap:2 RED/8000<br />

     a=mfcap:2 0/0<br />

     a=pcfg:1 m=2,1 pt=2:98,1:0	
				
				
</p>
</blockquote><p>
					
</p>
<p>The potential configuration is then equivalent to
</p>
<p>
						</p>
<blockquote class="text">
<p>
					m=audio 45678 RTP/AVP 98 0<br />

     a=rtpmap:0 PCMU/8000<br />

     a=rtpmap:98 RED/8000<br />

     a=fmtp:98 0/0					
					
</p>
</blockquote><p>
					
</p>
<p>A more general mechanism is provided via the parameter substitution rule:
</p>
<p>When an mfcap, mscap, or acap attribute is processed, its arguments will be scanned for sequences of the following form:
     "%" *DIGIT "%"
If found, the digit string is interpreted as a media capability number and the sequence is replaced by the payload type number assigned to the media capability as specified by the pt= parameter in the selected potential configuration.  The sequence "%%" (null digit string) is replaced by a single percent sign and processing continues with the next character, if any.

</p>
<p>For example, the above offer sequence could have been written as
</p>
<p>
						</p>
<blockquote class="text">
<p>
     m=audio 45678 RTP/AVP 0<br />

     a=rtpmap:0 PCMU/8000<br />

     a=mcap:1 PCMU/8000<br />

     a=mcap:2 RED/8000<br />

     a=mfcap:2 %1%/%1%<br />

     a=pcfg:1 m=2,1 pt=2:98,1:0<br />

							
</p>
</blockquote><p>
					
</p>
<p>and the equivalent SDP is the same as above.  This technique is useful for configurations in which the same mfcap attribute might be used for different encodings, such as redundant G.711 or redundant G.729 encodings.
</p>
<a name="sescap"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.8"></a><h3>3.3.8.&nbsp;
The Session Capability Attribute</h3>

<p>The session capability attribute provides a means for the offerer and/or the answerer to specify combinations of specific media stream configurations which it is willing and able to support.  Each session capability in an offer is expressed as a list of potential and/or latent configurations; in an answer, the session capabilities refer to actual and/or latent media configurations.  The session capability attribute is described by:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
	"a=sescap:" &lt;session num&gt; &lt;list of configs&gt;
</pre></div>
<p>which corresponds to the standard attribute definition with
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
        att-field       = "sescap"
        att-value       = session-num 1*WSP list-of-configs
        session-num     = 1*DIGIT  ; defined in RFC5234
        list-of-configs = &lt;alt-config&gt; *["," &lt;alt-config&gt;]
        alt-config = config-number *["|" config-number]
                      ; config-number defined in [SDPCapNeg]
</pre></div>
<p>The session-num identifies the session; a lower-number session is preferred over a higher-numbered session.  Each alt-config list specifies alternative media configurations within the session; preference is based on config-num as specified in <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>.  Note that the session preference order, when present, takes precedence over the individual media stream configuration preference order.
</p>
<p>Use of session capability attributes requires that configuration numbers assigned to potential and latent configurations be unique across the entire session; <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a> requires only that pcfg configuration numbers be unique within a media description.
</p>
<p>As an example, consider an endpoint that is capable of supporting an audio stream with either one H.264 video stream or two H.263 video streams with a floor control stream.  The SDP offer might look like the following:
</p>
<p>
						</p>
<blockquote class="text">
<p>
			       v=0<br />

       o=- 25678 753849 IN IP4 192.0.2.1<br />

       s=<br />

       c=IN IP4 192.0.2.1<br />

       t=0 0<br />

       a=creq:med-v0<br />

       a=sescap:2 1,2,3,5<br />

       a=sescap:1 1,4<br />

								<br />

       m=audio 54322 RTP/AVP 0<br />

       a=rtpmap:0 PCMU/8000<br />

       a=pcfg:1<br />

								<br />

       m=video 22344 RTP/AVP 102<br />

       a=rtpmap:102 H263-1998/90000<br />

       a=fmtp:102 CIF=4;QCIF=2;F=1;K=1<br />

       i= main video stream<br />

       a=label:11<br />

       a=pcfg:2<br />

       a=mcap:1 H264/90000<br />

       a=mfcap:1 profile-level-id=42A01E; packetization-mode=2<br />

       a=acap:1 label:13<br />

       a=pcfg:4 m=1 a=1 pt=1:104<br />

								<br />

       m=video 33444 RTP/AVP 103<br />

       a=rtpmap:103 H263-1998/90000<br />

       a=fmtp:103 CIF=4;QCIF=2;F=1;K=1<br />

       i= secondary video (slides)<br />

       a=label:12<br />

       a=pcfg:3<br />

								<br />

       m=application 33002 TCP/BFCP *<br />

       a=setup:passive<br />

       a=connection:new<br />

       a=floorid:1 m-stream:11 12<br />

       a=floor-control:s-only<br />

       a=confid:4321<br />

       a=userid:1234<br />

       a=pcfg:5
			
</p>
</blockquote><p>
					
</p>
<p>If the answerer understands MediaCapNeg, but cannot support the Binary Floor Control Protocol, then it would respond with:
</p>
<p>
						</p>
<blockquote class="text">
<p>
		
		       v=0<br />

       o=- 25678 753849 IN IP4 192.0.2.1<br />

       s=<br />

       c=IN IP4 192.0.2.22<br />

       t=0 0<br />

       a=cusp:med-v0<br />

       a=sescap:1 1,4<br />

								<br />

       m=audio 23456 RTP/AVP 0<br />

       a=rtpmap:0 PCMU/8000<br />

       a=acfg:1<br />

								<br />

       m=video 41234 RTP/AVP 104<br />

       a=rtpmap:100 H264/90000<br />

       a=fmtp:104 profile-level-id=42A01E; packetization-mode=2<br />

       a=acfg:4 m=1 a=1 pt=1:104<br />

       a=pcfg:2<br />

								<br />

       m=video 0 RTP/AVP 103<br />

a=acfg:3<br />

								<br />

       m=application 0 TCP/BFCP *<br />

       a=acfg:5

		
</p>
</blockquote><p>
					
</p>
<p>An endpoint that doesn't support Media capabilities negotiation, but does support H.263 video, would respond with one or two H.263 video streams.  In the latter case, the answerer may issue a second offer to reconfigure the session to one audio and one video channel using H.264 or H.263. 
</p>
<p>Session capabilities MAY include latent capabilities as well.  Here's a similar example in which the offerer wishes to initially establish an audio stream, and prefers to later establish two video streams with chair control.  If the answerer doesn't understand Media CapNeg, or cannot support the dual video streams or flow control, then it may support a single H.264 video stream.  Note that establishment of the most favored configuration will require two offer/answer exchanges.
</p>
<p>
						</p>
<blockquote class="text">
<p>
	v=0<br />

       o=- 25678 753849 IN IP4 192.0.2.1<br />

       s=<br />

       c=IN IP4 192.0.2.1<br />

       t=0 0<br />

       a=creq:med-v0<br />

       a=sescap:1 1,3,4,5<br />

       a=sescap:2 1,2<br />

       a=sescap:3 1<br />

								<br />

       a=mcap:1 H263-1998/90000<br />

       a=mfcap:1 CIF=4;QCIF=2;F=1;K=1<br />

       a=tcap:1 RTP/AVP TCP/BFCP<br />

								<br />

       a=acap:31 label:12<br />

       a=acap:32 content:main<br />

      
       a=lcfg:3 mt=video t=1 m=1 a=31,32 i=3<br />

								<br />

       a=acap:41 label:13<br />

       a=acap:42 content:slides<br />

     
       a=lcfg:4 mt=video t=1 m=1 a=41,42 i=4<br />

								<br />

       a=tcap:5 TCP/BFCP<br />

       a=mcap:2 * <br />

       a=acap:51 setup:passive<br />

       a=acap:52 connection:new<br />

       a=acap:53 floorid:1 m-stream:12 13<br />

       a=acap:54 floor-control:s-only<br />

       a=acap:55 confid:4321<br />

       a=acap:56 userid:1234<br />

       a=lcfg:5 mt=application m=2  t=2<br />

								<br />


       m=audio 54322 RTP/AVP 0<br />

       a=rtpmap:0 PCMU/8000<br />

       a=label:11<br />

       a=pcfg:1<br />

								<br />

       m=video 22344 RTP/AVP 102<br />

      
       a=rtpmap:102 H264/90000<br />

       a=fmtp:102 profile-level-id=42A01E; packetization-mode=2<br />

       a=label:11<br />

       a=content:main<br />

       a=pcfg:2

	
	
</p>
</blockquote><p>
					
</p>
<p>In this example, the default offer, as seen by endpoints which do not understand capabilities negotiation, proposes a PCMU audio stream and an H.264 video stream.  Note that the offered lcfg lines for the video streams don't carry pt= parameters because they're not needed (payload type numbers will be assigned in the offer/answer exchange that establishes the streams).   If the answerer supports Media CapNeg, and supports the most desired configuration, it would return the following SDP:

</p>
<p>
						</p>
<blockquote class="text">
<p>
	       v=0<br />

       o=- 25678 753849 IN IP4 192.0.2.1<br />

       s=<br />

       c=IN IP4 192.0.2.22<br />

       t=0 0<br />

       a=csup:med-v0<br />

       a=sescap:1 1,3,4,5<br />

       a=sescap:2 1,2<br />

       a=sescap:3 1<br />

								<br />

       a=lcfg:3 mt=video t=1 m=1 a=31,32<br />

								<br />

       a=lcfg:4 mt=video t=1 m=1 a=41,42 <br />

								<br />

       a=lcfg:5 mt=application t=2<br />

								<br />

       m=audio 23456 RTP/AVP 0<br />

       a=rtpmap:0 PCMU/8000<br />

a=acfg:1<br />

								<br />

       m=video 0 RTP/AVP 102<br />

       a=pcfg:2

	
</p>
</blockquote><p>
					
</p>
<p>This exchange supports immediate establishment of an audio stream for preliminary conversation.  This exchange would presumably be followed at the appropriate time with a "reconfiguration" offer/answer exchange to add the video and chair control streams.
</p>
<p>The choices of session capabilities may be based on processing load, total bandwidth, or any other criteria of importance to the communicating parties.  If the answerer supports media capabilities negotiation, and session configurations are offered, it must accept one of the offered configurations, or it must refuse the session.  Therefore, if the offer includes any session capabilities, it should include all the session capabilities the offerer is willing to support.
</p>
<a name="oaext"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Offer/Answer Model Extensions</h3>

<p>In this section, we define extensions to the offer/answer model defined in RFC3264 <a class='info' href='#RFC3264'>[RFC3264]<span> (</span><span class='info'>Rosenberg, J. and H. Schulzrinne, &ldquo;An Offer/Answer Model with Session Description Protocol (SDP),&rdquo; June&nbsp;2002.</span><span>)</span></a> and <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>  to allow for media capabilities, bandwidth capabilities, and latent configurations to be used with the SDP Capability Negotiation framework.
</p>
<p>The <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a> provides a relatively compact means to offer the equivalent of an ordered list of alternative media stream configurations (as would be described by separate m= lines and associated attributes).  The  attributes acap, mscap, mfcap and mcap are designed to map somewhat straightforwardly into equivalent m= lines and conventional attributes when invoked by a pcfg, lcfg, or acfg attribute with appropriate parameters.  The a=pcfg: lines, along with the m= line itself, represent offered media configurations.  The a=lcfg: lines represent alternative capabilities for future use.
</p>
<a name="offergen"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.1"></a><h3>3.4.1.&nbsp;
Generating the Initial Offer</h3>

<p>
				When an endpoint generates an initial offer and wants to use the functionality described in the current document, it should identify and define the codecs it can support via mcap, mfcap and mscap attributes.  The SDP media line(s) should be made up with the configuration to be used if the other party does not understand capability negotiations (by default, this is the least preferred configuration).  Typically, the media line configuration will contain the minimum acceptable capabilities.  The offer MUST include the level of capability negotiation extensions needed to support this functionality in a "creq" attribute.	
</p>
<p>Preferred configurations for each media stream are identified following the media line.  The present offer may also include latent configuration (lcfg) attributes, at the session level, describing media streams and/or configurations the offerer is not now offering, but which it is willing to support in a future offer/answer exchange.  A simple example might be the inclusion of a latent video configuration in an offer for an audio stream.
</p>
<a name="answergen"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.2"></a><h3>3.4.2.&nbsp;
Generating the Answer </h3>

<p>
				When the answering party receives the offer and if it supports the required capability negotiation extensions, it should select the most-preferred configuration it can support for each media stream, and build its answer accordingly.  The configuration selected for each accepted media stream is placed into the answer as a media line with associated parameters and attributes.  If a proposed configuration is chosen, the answer must include the supported extension attribute and each media stream for which a proposed configuration was chosen must contain an actual configuration (acfg) attribute to indicate just which pcfg attribute was used to build the answer.  The answer should also include any potential or latent configurations the answerer can support, especially any configurations compatible with other potential or latent configurations received in the offer.  The answerer should make note of those configurations it might wish to offer in the future.				
</p>
<a name="ansproc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.3"></a><h3>3.4.3.&nbsp;
Offerer Processing of the Answer </h3>

<p>
				When the offerer receives the answer, it should make note of any capabilities and/or latent configurations for future use.  The media line(s) must be processed in the normal way to identify the media stream(s) accepted by the answer, if any.  The acfg attribute, if present, may be used to verify the proposed configuration used to form the answer, and to infer the lack of acceptability of higher- preference configurations that were not chosen.  Note that the base specification <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a> requires the answerer to choose the highest preference configuration it can support, subject to local policies.				
</p>
<a name="sesmod"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.4"></a><h3>3.4.4.&nbsp;
Modifying the Session</h3>

<p>If, at a later time, one of the parties wishes to modify the operating parameters of a session, e.g., by adding a new media stream, or by changing the properties used on an existing stream, it may do so via the mechanisms defined for offer/answer <a class='info' href='#RFC3264'>[RFC3264]<span> (</span><span class='info'>Rosenberg, J. and H. Schulzrinne, &ldquo;An Offer/Answer Model with Session Description Protocol (SDP),&rdquo; June&nbsp;2002.</span><span>)</span></a>.  If the initiating party has remembered the codecs, potential configurations, and latent configurations announced by the other party in the earlier negotiation, it may use this knowledge to maximize the likelihood of a successful modification of the session.  Alternatively, the initiator may perform a new capabilities exchange as part of the reconfiguration.  In such a case, the new capabilities will replace the previously-negotiated capabilities.  This may be useful if conditions change on the endpoint.		
					
</p>
<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Examples</h3>

<p>
		
		In this section, we provide examples showing how to use the Media Capabilities with the SDP Capability Negotiation. 
		
</p>
<a name="altcodecs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Alternative Codecs</h3>

<p>This example provide a choice of one of six variations of the adaptive multirate codec.  In this example, the default configuration as specified by the media line is the same as the most preferred configuration.  Each configuration uses a different payload type number so the offerer can interpret early media.
</p>
<p>
					</p>
<blockquote class="text">
<p>
						1.  v=0<br />
 
						2.  o=- 25678 753849 IN IP4 192.0.2.1<br />
 
						3.  s=<br />
 
						4.  c=IN IP4 192.0.2.1<br />
 
						5.  t=0 0<br />
 
						6.  a=creq:med-v0<br />
 						
						7.  m=audio 54322 RTP/AVP 96<br />
 
						8.  rtpmap:96 AMR-WB/16000/1<br />
 
						9.  a=fmtp:96 mode-change-capability=1; max-red=220; \ <br />
 
				mode-set=0,2,4,7<br />
 
						10. a=mcap:1,3,5 audio AMR-WB/16000/1<br />
 
						11. a=mcap:2,4,6 audio AMR/8000/1<br />
 
						12. a=mfcap:1,2,3,4 mode-change-capability=1<br />
 
 						13. a=mfcap:5,6 mode-change-capability=2<br />
 
 						14. a=mfcap:1,2,3,5 max-red=220<br />
 
 						15. a=mfcap:3,4,5,6 octet-align=1 <br />

						16. a=mfcap:1,3,5 mode-set=0,2,4,7 <br />

						17. a=mfcap:2,4,6 mode-set=0,3,5,6 <br />

						18. a=pcfg:1 m=1 pt=1:96<br />

						19. a=pcfg:2 m=2 pt=2:97<br />

						20. a=pcfg:3 m=3 pt=3:98<br />

						21. a=pcfg:4 m=4 pt=4:99 <br />

						22. a=pcfg:5 m=5 pt=5:100 <br />

						23. a=pcfg:6 m=6 pt=6:101 						
						
</p>
</blockquote><p>
				
</p>
<p>In the above example, media capability 1 could have been excluded from  the mcap declaration in line 10 and from the mfcap attributes in lines 12, 14, and 16.  The pcfg on line 18 could then have been simply "pcfg:1".
</p>
<p>The next example offers a video stream with three options of H.264 and 4 transports.  It also includes an audio stream with different audio qualities: four variations of AMR, or AC3.  The offer looks something like:
					
</p>
<p>
					</p>
<blockquote class="text">
<p>
						v=0<br />
 
						o=- 25678 753849 IN IP4 192.0.2.1<br />
 
						s=An SDP Media NEG example<br />
 
						c=IN IP4 192.0.2.1<br />
 
						t=0 0<br />
 
						a=creq:med-v0<br />
						
						 a=ice-pwd:speEc3QGZiNWpVLFJhQX <br />
 
						m=video 49170 RTP/AVP 100 <br />
 
						c=IN IP4 192.0.2.56<br />
 
						a=maxprate:1000 <br />
 
						a=rtcp:51540 <br />
 
						a=sendonly <br />
 
						a=candidate 12345 1 UDP 9 192.0.2.56 49170 host <br />
 
						a=candidate 23456 2 UDP 9 192.0.2.56 51540 host<br />
 
						a=candidate 34567 1 UDP 7 10.0.0.1 41345 srflx raddr \ <br />
 
			 192.0.2.56 rport 49170<br />
 
						a=candidate 45678 2 UDP 7 10.0.0.1 52567 srflx raddr \ <br />

			 192.0.2.56 rport 51540<br />
 
						a=candidate 56789 1 UDP 3 192.0.2.100 49000 relay raddr \ <br />
 
			192.0.2.56 rport 49170<br />
 
						a=candidate 67890 2 UDP 3 192.0.2.100 49001 relay raddr \ <br />
 
			192.0.2.56 rport 51540 <br />
 
						b=AS:10000 <br />
 
						b=TIAS:10000000 <br />
 
						b=RR:4000 <br />
 
						b=RS:3000<br />
 
						a=rtpmap:100 H264/90000 <br />
 
						a=fmtp:100 profile-level-id=42A01E; packetization-mode=2; \ <br />
 
		sprop-parameter-sets=Z0IACpZTBYmI,aMljiA==; \ <br />
 
						sprop-interleaving-depth=45; sprop-deint-buf-req=64000; \ <br />
 
		sprop-init-buf-time=102478; deint-buf-cap=128000  <br />
 
						a=tcap:1 RTP/SAVPF RTP/SAVP RTP/AVPF<br />
 
						a=mcap:1-3,7-9 H264/90000<br />
 
						a=mcap:4-6 rtx/90000<br />
 
						a=mfcap:1-9 profile-level-id=42A01E<br />
 
						a=mfcap:1-9 aMljiA==<br />
 
						a=mfcap:1,4,7 packetization-mode=0<br />
 
						a=mfcap:2,5,8 packetization-mode=1<br />
 
						a=mfcap:3,6,9 packetization-mode=2<br />
 
						a=mfcap:1-9 sprop-parameter-sets=Z0IACpZTBYmI<br />
 
						a=mfcap:1,7 sprop-interleaving-depth=45; \ <br />
 
		 sprop-deint-buf-req=64000; sprop-init-buf-time=102478; \ <br />
 
			 deint-buf-cap=128000<br />
 
						a=mfcap:4 apt=100<br />
 
						a=mfcap:5 apt=99<br />
 
						a=mfcap:6 apt=98<br />
 
						a=mfcap:4-6 rtx-time=3000<br />
 
						a=mscap:1-6 rtcp-fb nack<br />
 
					a=acap:1 crypto:1 AES_CM_128_HMAC_SHA1_80 \ <br />
 
						inline:d0RmdmcmVCspeEc3QGZiNWpVLFJhQX1cfHAwJSoj|220|1:32 <br />
 
						a=pcfg:1 t=1 m=1,4 a=1 pt=1:100,4:97<br />
 
						a=pcfg:2 t=1 m=2,5 a=1 pt=2:99,4:96<br />
 
						a=pcfg:3 t=1 m=3,6 a=1 pt=3:98,6:95<br />
 
						a=pcfg:4 t=2 m=7 a=1 pt=7:100 <br />
 
						a=pcfg:5 t=2 m=8 a=1 pt=8:99<br />
 
						a=pcfg:6 t=2 m=9 a=1 pt=9:98<br />
 
						a=pcfg:7 t=3 m=1,3 pt=1:100,4:97 <br />
 
						a=pcfg:8 t=3 m=2,4 pt=2:99,4:96<br />
 
						a=pcfg:9 t=3 m=3,6 pt=3:98,6:95<br />
 
						m=audio 49176 RTP/AVP 101 100 99 98 <br />
 
						c=IN IP4 192.0.2.56<br />
 
						a=ptime:60 <br />
 
						a=maxptime:200 <br />
 
						a=rtcp:51534 <br />
 
						a=sendonly <br />
 
						a=candidate 12345 1 UDP 9 192.0.2.56 49176 host <br />
 
						a=candidate 23456 2 UDP 9 192.0.2.56 51534 host<br />
 
						a=candidate 34567 1 UDP 7 10.0.0.1 41348 srflx \ <br />
 
		 raddr 192.0.2.56 rport 49176<br />
 
						a=candidate 45678 2 UDP 7 10.0.0.1 52569 srflx \ <br />
 
		 raddr 192.0.2.56 rport 51534<br />
 
						a=candidate 56789 1 UDP 3 192.0.2.100 49002 relay \ <br />
 
				 raddr 192.0.2.56 rport 49176<br />
 
						a=candidate 67890 2 UDP 3 192.0.2.100 49003 relay \ <br />
 
			 raddr 192.0.2.56 rport 51534 <br />
 
						b=AS:512 <br />
 
						b=TIAS:512000 <br />
 
						b=RR:4000 <br />
 
						b=RS:3000 <br />
 
						a=maxprate:120 <br />
 
						a=rtpmap:98 AMR-WB/16000 <br />
 
						a=fmtp:98 octet-align=1; mode-change-capability=2<br />
 
						a=rtpmap:99 AMR-WB/16000 <br />
 
						a=fmtp:99 octet-align=1; crc=1; mode-change-capability=2<br />
 
						a=rtpmap:100 AMR-WB/16000/2 <br />
 
						a=fmtp:100 octet-align=1; interleaving=30 <br />
 
						a=rtpmap:101 AMR-WB+/72000/2 <br />
 
						a=fmtp:101 interleaving=50; int-delay=160000; <br />
 
						a=mcap:14 ac3/48000/6 <br />
 
						a=acap:23 crypto:1 AES_CM_128_HMAC_SHA1_80 \ <br />
 
						inline:d0RmdmcmVCspeEc3QGZiNWpVLFJhQX1cfHAwJSoj|220|1:32<br />
 
						a=tcap:4 RTP/SAVP <br />
 
						a=pcfg:10 t=4 a=23 <br />
 
						a=pcfg:11 t=4 m=14 a=23 pt=14:102					
						
</p>
</blockquote><p>
				
</p>
<p>This offer illustrates the advantage in compactness that arises if one can avoid deleting the base configuration attributes and recreating them in acap attributes for the potential configurations.
</p>
<a name="altcombos"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Alternative Combinations of Codecs (Session Configurations)</h3>

<p>If an endpoint has limited signal processing capacity, it might be capable of supporting, say, a G.711 mu-law audio stream in combination with an H.264 video stream, or a G.729B audio stream in combination with an H.263-1998 video stream.  It might then issue an offer like the following:
</p>
<p>
					</p>
<blockquote class="text">
<p>
		
			   v=0<br />
 
	   o=- 25678 753849 IN IP4 192.0.2.1<br />
 
	   s=<br />
 
	   c=IN IP4 192.0.2.1<br />
 
	   t=0 0<br />
 
	   a=creq:med-v0<br />
 
	   a=sescap:1 2,4<br />
 
	   a=sescap:2 1,3<br />
 
	   m=audio 54322 RTP/AVP 18<br />
 
	   a=rtpmap:18 G729/8000<br />
 
	   a=fmtp:18 annexb=yes<br />
 
	   a=mcap:1 PCMU/8000<br />
 
	   a=pcfg:1 m=1 pt=1:0<br />
 
	   a=pcfg:2<br />
 
   m=video 54344 RTP/AVP 100<br />
 
   a=rtpmap:100 H263-1998/90000<br />
 
   a=mcap:2 H264/90000<br />
 
   a=mfcap:2 profile-level-id=42A01E; packetization-mode=2<br />
 
   a=pcfg:3 m=2 pt=2:101<br />
 
   a=pcfg:4

		
</p>
</blockquote><p>
				
</p>
<p>Note that the preferred session configuration (and the default as well) is G.729B with H.263.  This overrides the individual media stream preferences which are PCMU and H.264 by the potential configuration numbering rule.  
</p>
<a name="latentstreams"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Latent Media Streams</h3>

<p>
Consider a case in which the offerer can support either G.711 mu-law, or G.729B, along with DTMF telephony events for the 12 common touchtone signals, but is willing to support simple G.711 mu-law audio as a last resort.  In addition, the offerer wishes to announce its ability to support video in the future, but does not wish to offer a video stream at present.  The offer might look like the following:

</p>
<p>
					</p>
<blockquote class="text">
<p>
						1. v=0<br />
 
						2. o=- 25678 753849 IN IP4 192.0.2.1<br />
 
						3. s=<br />
 
						4. c=IN IP4 192.0.2.1<br />
 
						5. t=0 0<br />
 
						6. a=creq:med-v0<br />
 						
						7. a=mcap:10 H263-1998/90000<br />
 
						8. a=mcap:11 H264/90000<br />

                                    9. a=tcap:1 RTP/AVP<br />

						10. a=lcfg:10 mt=video t=1 m=10|11<br />
 
						11. m=audio 23456 RTP/AVP 0<br />
 
						12. a=rtpmap:0 PCMU/8000<br />
 
						13. a=mcap:1 PCMU/8000<br />
 
 						14. a=mcap:2 g729/8000<br />
 
 						15. a=mcap:3 telephone-event/8000<br />
 
 						16. a=mfcap:3 0-11<br />

						17. a=pcfg:1 m=1,3|2,3 pt=1:0,2:18,3:100 						
						
</p>
</blockquote><p>
				
</p>
<p>Lines 7-10 announce support for H.263 and H.264 video (H.263 preferred) for future reference.  Lines 11 and 12 offer an audio stream and provide the lowest precedence configuration (PCMU without any DTMF encoding).  Lines 13-15 define the media capabilities to be offered: PCMU, G729, and telephone-event.  Line 16 provides the format parameters for telephone-events, specifying the 12 commercial DTMF 'digits'.  Line 17 defines the most-preferred media configuration as PCMU plus DTMF events and the next-most-preferred configuration as G.729B plus DTMF events.
</p>
<p>If the answerer is able to support all the potential configurations, and also support H.263 video (but not H.264), it would reply with an answer like:
</p>
<p>
					</p>
<blockquote class="text">
<p>
						1. v=0<br />
 
						2. o=- 24351 621814 IN IP4 192.0.2.2<br />
 
						3. s=<br />
 
						4. c=IN IP4 192.0.2.2<br />
 
						5. t=0 0<br />
 
						6. a=csup:med-v0<br />
 	
						7. a=lcfg:1 mt=video t=1 m=10<br />
 
						8. m=audio 54322 RTP/AVP 0 100<br />
 
					      9. a=rtpmap:0 PCMU/8000<br />
 
						10.	a=rtpmap:100 telephone-event/8000<br />
 
 						11.	a=fmtp:100 0-11<br />
 
 						12.	a=acfg:1 m=1,3 pt=1:0,3:100<br />
  						
						13. a=pcfg:1 m=2,3 pt=2:18,3:100						
						
</p>
</blockquote><p>
				
</p>
<p>Line 7 announces the capability to support H.263 video at a  later time.  Lines 8-11 of the answer present the selected configuration for the media stream.  Line 12 identifies the potential configuration from which it was taken, and line 13 announces the potential capability to support G.729 with DTMF events as well.  If,  at some later time, congestion becomes a problem in the network, either party may offer a reconfiguration of the media stream to use G.729 in order to reduce packet sizes.
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<a name="ianaattrs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
New SDP Attributes</h3>

<p>
			
			

			
			
			
			The IANA is hereby requested to register the following new SDP attributes:
</p>
<p>
					</p>
<blockquote class="text">
<p>
					Attribute name:      mcap<br />
 
					Long form name:      media capability<br />
 
					Type of attribute:   session-level and media-level<br />
 
					Subject to charset:  no<br />
 
					Purpose:             associate media capability number(s) with<br />
 
                     			media subtype and encoding parameters<br />
 
					Appropriate Values:  see Section <a class='info' href='#mcap'>Section&nbsp;3.3.1<span> (</span><span class='info'>The Media Encoding Capability Attribute</span><span>)</span></a>
								
						
</p>
</blockquote><p>
				
</p>
<p>
					</p>
<blockquote class="text">
<p>
					Attribute name:      mfcap<br />
 
					Long form name:      media format capability<br />
 
					Type of attribute:   session-level and media-level<br />
 
					Subject to charset:  no<br />
 
					Purpose:             associate media format attributes and<br />
 
                     			parameters with media format capabilities<br />
 
					Appropriate Values:  see Section <a class='info' href='#mfcap'>Section&nbsp;3.3.2<span> (</span><span class='info'>The Media Format Parameter Capability Attribute</span><span>)</span></a>
								
						
</p>
</blockquote><p>
				
</p>
<p>
					</p>
<blockquote class="text">
<p>
					Attribute name:      mscap<br />
 
					Long form name:      media-specific capability<br />
 
					Type of attribute:   session-level and media-level<br />
 
					Subject to charset:  no<br />
 
					Purpose:             associate media-specific attributes and<br />
 
                     			parameters with media capabilities<br />
 
					Appropriate Values:  see Section <a class='info' href='#mscap'>Section&nbsp;3.3.3<span> (</span><span class='info'>The Media-Specific Capability Attribute</span><span>)</span></a>
								
						
</p>
</blockquote><p>
				
</p>
<p>
					</p>
<blockquote class="text">
<p>
					Attribute name:      lcfg<br />
 
					Long form name:       latent configuration<br />
 
					Type of attribute:   session-level<br />
 
					Subject to charset:  no<br />
 
					Purpose:             to announce supportable media configurations<br />
 
                     			without offering them for immediate use.<br />
 
					Appropriate Values:  see Section <a class='info' href='#lcfg'>Section&nbsp;3.3.5<span> (</span><span class='info'>The Latent Configuration Attribute</span><span>)</span></a>
								
						
</p>
</blockquote><p>
				
</p>
<p>
					</p>
<blockquote class="text">
<p>
					Attribute name:      sescap<br />
 
					Long form name:       session capability<br />
 
					Type of attribute:   session-level<br />
 
					Subject to charset:  no<br />
 
					Purpose:             to specify and prioritize acceptable<br />
 
                     			combinations of media stream configurations.<br />
 
					Appropriate Values:  see Section <a class='info' href='#sescap'>Section&nbsp;3.3.8<span> (</span><span class='info'>The Session Capability Attribute</span><span>)</span></a>
								
						
</p>
</blockquote><p>
				
</p>
<a name="ianaoption"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
New SDP Option Tag</h3>

<p>
				The IANA is hereby requested to add the new option tag "med-v0", defined in this document, to the SDP Capability Option
				Negotiation Capability registry created for <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>.   
			
</p>
<a name="ianaparms"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
New SDP Capability Negotiation Parameters</h3>

<p>
				The IANA is hereby requested to expand the SDP Capability Negotiation Potential Configuration Parameter Registry
				established by <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a> to become the SDP Capability Negotiation Configuration Parameter Registry
				and to include parameters for the potential, actual and latent configuration attributes.  The new parameters to be
 				registered are the "m" for "media", "pt" for "payload type number", and "mt" for "media type" parameters.  Note that
				the "mt" parameter is defined for use only in the latent configuration attribute.				
			
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>The security considertions of <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a> apply for this document. 
</p>
<p>The addition of negotiable media encoding, bandwidth attributes, and connection data in this specification can cause problems for middleboxes which attempt to control bandwidth utilization, media flows, and/or processing resource consumption as part of network policy, but which do not understand the media capability negotiation feature.  As for the initial CapNeg work, the SDP answer is formulated in such a way that it always carries the selected media encoding and bandwidth parameters for every media stream selected.  Pending an understanding of capabilities negotiation, the middlebox should examine the answer SDP to obtain the best picture of the media streams being established.
</p>
<p>As always, middleboxes can best do their job if they fully understand media capabilities negotiation.
</p>
<a name="verchanges"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Changes from previous versions</h3>

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Changes from version 09</h3>

<p>
					</p>
<ul class="text">
<li>Additional corrections to latent media stream example in <a class='info' href='#latentstreams'>Section&nbsp;4.3<span> (</span><span class='info'>Latent Media Streams</span><span>)</span></a>
</li>
<li>Fixed up attribute formatting examples and corresponding ABNF.
</li>
<li>Removed preference rule for latent configurations.
</li>
<li>Various spelling and other editorial changes were made.
</li>
<li>updated crossreferences.
</li>
</ul><p>
				
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Changes from version 08</h3>

<p>The major change is in section <a class='info' href='#latentstreams'>Section&nbsp;4.3<span> (</span><span class='info'>Latent Media Streams</span><span>)</span></a>, Latent Media Streams, fixing the syntax of the answer. All the other changes are editorial.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
Changes from version 04</h3>

<p>
					</p>
<ul class="text">
<li>The definitions for bcap, ccap, icap, and kcap attributes have been removed, and are to be defined in another document.
</li>
<li>Corrected formatting of m= and p= configuration parameters to conform to extension-config-list form defined in <a class='info' href='#SDPCapNeg'>[SDPCapNeg]<span> (</span><span class='info'>Andreasen, F., &ldquo;SDP Capability Negotiation,&rdquo; July&nbsp;2008.</span><span>)</span></a>
						
</li>
<li>Reorganized definitions of new parameters to make them easier to find in document.
</li>
<li>Added ability to renegotiate capabilities when modifying the session (Section <a class='info' href='#sesmod'>Section&nbsp;3.4.4<span> (</span><span class='info'>Modifying the Session</span><span>)</span></a>).
</li>
<li>Made various editorial changes, clarifications, and typo corrections.
</li>
</ul><p>
				
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.4"></a><h3>7.4.&nbsp;
Changes from version 03</h3>

<p>
					</p>
<ul class="text">
<li>A new session capability attribute (sescap) has been added to permit specification of acceptable media stream combinations.
</li>
<li>Capability attribute definitions corresponding to the i, c, b, and k SDP line types have been added for completeness.
</li>
<li>Use of the pcfg: attribute in SDP answers has been included in order to conveniently return information in the answer about acceptable configurations in the media stream offer.
</li>
<li>The use of the lcfg: attribute(s) in SDP answers has been restricted to indicate just which latent configuration offers would be acceptable to the answerer.
</li>
<li>A suggestion for "naïve" middleboxes has been added to the Security Considerations.
</li>
<li>Various editorial changes have been made.
</li>
<li>Several errors/omissions have been corrected.
</li>
<li>The description of the mscap attribute has been modified to make it clear that it should not be used to generate undefined SDP attributes, or to "extend" existing attributes.
</li>
<li>&lt;ms-parameters&gt; are made optional in the mscap attribute definition.
</li>
<li>&quot;AMR&quot; changed to &quot;AMR-WB&quot; in cases in which the sample rate is 16000.

</li>
</ul><p>
				
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.5"></a><h3>7.5.&nbsp;
Changes from version 02</h3>

<p>This version contains several detail changes intended to simplify capability processing and mapping into conventional SDP media blocks.
</p>
<p>
					</p>
<ul class="text">
<li>The "mcap" attribute is enhanced to include the role of the "ecap" attribute; the latter is eliminated.
</li>
<li>The "fcap" attribute has been renamed "mfcap".  New replacement rules vis-à-vis fmtp attributes in the base media specification have been added.
</li>
<li>A new "mscap" attribute is defined to handle the problem of attributes (other than rtpmap and fmtp) that are specific to a particular payload type.
</li>
<li>New rules for processing the mcap, mfcap, and mscap attributes, and overriding standard rtpmap, fmtp, or other media-specific attributes, are put forward to reduce the need to use the deletion option in the a= parameter of the potential configuration (pcfg) attribute.
</li>
<li>A new parameter, "mt=" is added to the latent configuration attribute (lcfg) to specify the media stream type (audio, video, etc.) when the lcfg is declared at the session level.
</li>
<li>The examples are expanded.
</li>
<li>Numerous typos and misspellings have been corrected.
</li>
</ul><p>
				
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.6"></a><h3>7.6.&nbsp;
Changes from version 01</h3>

<p>The documents adds a new attribute for specifying bandwidth capability and a parametr to list in the potential configuration.
		Other changes are to align the document with the terminolgy and attribute names from draft-ietf-mmusic-sdp-capability-negotiation-07. 
		The document also clarifies some previous open issues.
		
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.7"></a><h3>7.7.&nbsp;
Changes from version 00</h3>

<p>
		The major changes include taking out the "mcap" and "cptmap" parameter. The mapping of payload type is now in the "pt" parameter of "pcfg". Media subtype need to explictly definesd in the "cmed" attribute if referenced in the "pcfg"
		
</p>
<a name="acks"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Acknowledgements</h3>

<p>This document is heavily influenced by the discussions and work done by the SDP Capability Negotiation Design team. The following people in particular provided useful comments and suggestions to either the document itself or the overall direction of the solution defined herein: Cullen Jennings, Matt Lepinski, Joerg Ott, Colin Perkins, and Thomas Stach.

</p>
<p>We thank Ingemar Johansson and Magnus Westerlund for examples that stimulated this work.
 
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3264">[RFC3264]</a></td>
<td class="author-text">Rosenberg, J. and H. Schulzrinne, &ldquo;<a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with Session Description Protocol (SDP)</a>,&rdquo; RFC&nbsp;3264, June&nbsp;2002 (<a href="ftp://ftp.isi.edu/in-notes/rfc3264.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4566">[RFC4566]</a></td>
<td class="author-text">Handley, M., Jacobson, V., and C. Perkins, &ldquo;<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>,&rdquo; RFC&nbsp;4566, July&nbsp;2006 (<a href="ftp://ftp.isi.edu/in-notes/rfc4566.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="ftp://ftp.isi.edu/in-notes/rfc5234.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="SDPCapNeg">[SDPCapNeg]</a></td>
<td class="author-text">Andreasen, F., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mmusic-sdp-capability-negotiation-09.txt">SDP Capability Negotiation</a>,&rdquo; draft-ietf-mmusic-sdp-capability-negotiation-09 (work in progress), July&nbsp;2008 (<a href="http://tools.ietf.org/html/draft-ietf-mmusic-sdp-capability-negotiation-09">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC4568">[RFC4568]</a></td>
<td class="author-text">Andreasen, F., Baugher, M., and D. Wing, &ldquo;<a href="http://tools.ietf.org/html/rfc4568">Session Description Protocol (SDP) Security Descriptions for Media Streams</a>,&rdquo; RFC&nbsp;4568, July&nbsp;2006 (<a href="ftp://ftp.isi.edu/in-notes/rfc4568.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4583">[RFC4583]</a></td>
<td class="author-text">Camarillo, G., &ldquo;<a href="http://tools.ietf.org/html/rfc4583">Session Description Protocol (SDP) Format for Binary Floor Control Protocol (BFCP) Streams</a>,&rdquo; RFC&nbsp;4583, November&nbsp;2006 (<a href="ftp://ftp.isi.edu/in-notes/rfc4583.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4867">[RFC4867]</a></td>
<td class="author-text">Sjoberg, J., Westerlund, M., Lakaniemi, A., and Q. Xie, &ldquo;<a href="http://tools.ietf.org/html/rfc4867">RTP Payload Format and File Storage Format for the Adaptive Multi-Rate (AMR) and Adaptive Multi-Rate Wideband (AMR-WB) Audio Codecs</a>,&rdquo; RFC&nbsp;4867, April&nbsp;2007 (<a href="ftp://ftp.isi.edu/in-notes/rfc4867.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5104">[RFC5104]</a></td>
<td class="author-text">Wenger, S., Chandra, U., Westerlund, M., and B. Burman, &ldquo;<a href="http://tools.ietf.org/html/rfc5104">Codec Control Messages in the RTP Audio-Visual Profile with Feedback (AVPF)</a>,&rdquo; RFC&nbsp;5104, February&nbsp;2008 (<a href="ftp://ftp.isi.edu/in-notes/rfc5104.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Robert R Gilman </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Independent</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">3243 W. 11th Ave. Dr.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Broomfield, CO 80020</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:bob_gilman@comcast.net">bob_gilman@comcast.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Roni Even</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Gesher Erove Ltd</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">14 David Hamelech</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tel Aviv  64953</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Israel</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ron.even.tlv@gmail.com">ron.even.tlv@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Flemming Andreasen </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Edison, NJ</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:fandreas@cisco.com">fandreas@cisco.com</a></td></tr>
</table>
</body></html>
