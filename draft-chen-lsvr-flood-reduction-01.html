<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>BGP-SPF Flooding Reduction</title>
<meta content="Huaimo Chen" name="author">
<meta content="Gyan S. Mishra" name="author">
<meta content="Aijun Wang" name="author">
<meta content="Yisong Liu" name="author">
<meta content="Haibo Wang" name="author">
<meta content="Yanhe Fan" name="author">
<meta content="
       This document describes extensions to
      Border Gateway Protocol (BGP) for flooding the link states
      on a topology that is a subgraph of the 
      complete topology of a BGP-SPF domain, so that 
      the amount of flooding traffic in the domain is greatly 
      reduced. 
      This would reduce convergence time with a more stable 
      and optimized routing environment. 
    " name="description">
<meta content="xml2rfc 3.10.0" name="generator">
<meta content="draft-chen-lsvr-flood-reduction-01" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.10.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 58.2.0
    six 1.16.0
-->
<link href="/tmp/draft-chen-lsvr-flood-reduction-01-y9g61w30.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Flood Reduction</td>
<td class="right">November 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Chen, et al.</td>
<td class="center">Expires 17 May 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-chen-lsvr-flood-reduction-01</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-11-13" class="published">13 November 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-05-17">17 May 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">H. Chen</div>
<div class="org">Futurewei</div>
</div>
<div class="author">
      <div class="author-name">G. Mishra</div>
<div class="org">Verizon Inc.</div>
</div>
<div class="author">
      <div class="author-name">A. Wang</div>
<div class="org">China Telecom</div>
</div>
<div class="author">
      <div class="author-name">Y. Liu</div>
<div class="org">China Mobile</div>
</div>
<div class="author">
      <div class="author-name">H. Wang</div>
<div class="org">Huawei</div>
</div>
<div class="author">
      <div class="author-name">Y. Fan</div>
<div class="org">Casa Systems</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">BGP-SPF Flooding Reduction</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document describes extensions to
      Border Gateway Protocol (BGP) for flooding the link states
      on a topology that is a subgraph of the 
      complete topology of a BGP-SPF domain, so that 
      the amount of flooding traffic in the domain is greatly 
      reduced. 
      This would reduce convergence time with a more stable 
      and optimized routing environment.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note" id="section-note.1">
      <h2 id="name-requirements-language">
<a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
      </h2>
<p id="section-note.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <span><a href="#RFC2119" class="xref">RFC 2119</a> [<a href="#RFC2119" class="xref">RFC2119</a>]</span>.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 17 May 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminologies" class="xref">Terminologies</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-overview-of-bgp-spf-link-st" class="xref">Overview of BGP-SPF Link State Flooding</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-flooding-in-rr-model" class="xref">Flooding in RR Model</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-flooding-in-node-connection" class="xref">Flooding in Node Connections Model</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-flooding-in-directly-connec" class="xref">Flooding in Directly-Connected Nodes Model</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-revised-flooding-procedures" class="xref">Revised Flooding Procedures</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-revised-flooding-procedure-" class="xref">Revised Flooding Procedure for RR Model</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-revised-flooding-procedure-f" class="xref">Revised Flooding Procedure for Node Connections Model</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-bgp-extensions-for-flooding" class="xref">BGP Extensions for Flooding Reduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-extensions-for-rr-model" class="xref">Extensions for RR Model</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-extensions-for-node-connect" class="xref">Extensions for Node Connections Model</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.1">
                    <p id="section-toc.1-1.5.2.2.2.1.1"><a href="#section-5.2.1" class="xref">5.2.1</a>.  <a href="#name-new-tlvs" class="xref">New TLVs</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.2">
                    <p id="section-toc.1-1.5.2.2.2.2.1"><a href="#section-5.2.2" class="xref">5.2.2</a>.  <a href="#name-flooding-topology-distribut" class="xref">Flooding Topology Distribution in Centralized Mode</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.3">
                    <p id="section-toc.1-1.5.2.2.2.3.1"><a href="#section-5.2.3" class="xref">5.2.3</a>.  <a href="#name-an-algorithm-for-distribute" class="xref">An Algorithm for Distributed Mode</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-acknowledgements" class="xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1"> For some networks such as dense Data Center (DC) networks
with BGP-SPF,
the existing Link State (LS) flooding mechanism 
defined in <span>[<a href="#I-D.ietf-lsvr-bgp-spf" class="xref">I-D.ietf-lsvr-bgp-spf</a>]</span>
for a BGP-SPF domain
may not be efficient and may have some issues. 
The extra LS flooding consumes network bandwidth. 
Processing the extra LS flooding, 
including receiving, buffering and decoding the extra LSs, 
wastes memory space and processor time.
This may cause scalability issues and 
affect the network convergence negatively.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">This document describes extensions to
      Border Gateway Protocol (BGP) for flooding the link states
      on a topology that is a subgraph of the 
      complete topology of a BGP-SPF domain, so that 
      the amount of flooding traffic in the domain is greatly 
      reduced.<a href="#section-1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2">
      <h2 id="name-terminologies">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminologies" class="section-name selfRef">Terminologies</a>
      </h2>
<p id="section-2-1">The following terminologies are used in this document.<a href="#section-2-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2-2">
        <dt id="section-2-2.1">BGP:</dt>
        <dd style="margin-left: 3.0em" id="section-2-2.2">Border Gateway Protocol<a href="#section-2-2.2" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.3">LS:</dt>
        <dd style="margin-left: 3.0em" id="section-2-2.4">Link State<a href="#section-2-2.4" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.5">SPF:</dt>
        <dd style="margin-left: 3.0em" id="section-2-2.6">Shortest Path First<a href="#section-2-2.6" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.7">RR:</dt>
        <dd style="margin-left: 3.0em" id="section-2-2.8">Route Reflector<a href="#section-2-2.8" class="pilcrow">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
</section>
<section id="section-3">
      <h2 id="name-overview-of-bgp-spf-link-st">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-overview-of-bgp-spf-link-st" class="section-name selfRef">Overview of BGP-SPF Link State Flooding</a>
      </h2>
<p id="section-3-1"><span>[<a href="#I-D.ietf-lsvr-bgp-spf" class="xref">I-D.ietf-lsvr-bgp-spf</a>]</span> defines 
         three BGP peering models:<a href="#section-3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-2.1">BGP Peering in Route-Reflector or Controller Topology 
            (RR or Sparse model for short).<a href="#section-3-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-2.2">BGP Single-Hop Peering on Network Node Connections
           (Node Connections model for short), and<a href="#section-3-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-2.3">BGP Peering Between Directly-Connected Nodes
            (Directly-Connected Nodes model for short).<a href="#section-3-2.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-3-3">

         This section briefs the BGP-SPF Link State Flooding
         in each of these models.<a href="#section-3-3" class="pilcrow">¶</a></p>
<section id="section-3.1">
        <h3 id="name-flooding-in-rr-model">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-flooding-in-rr-model" class="section-name selfRef">Flooding in RR Model</a>
        </h3>
<p id="section-3.1-1">In RR model, BGP-SPF speakers/nodes peer solely 
           with one or more Route Reflectors (RRs) or controllers
           over eBGP sessions. 
           A BGP-SPF speaker sends/advertises its BGP-LS-SPF Link NLRI 
           in a BGP update message to the RRs or controllers that 
           the speaker peers with when it discovers that its corresponding 
           link is up. 
           After receiving the Link NLRI, each of the RRs or controllers sends
           the NLRI in a BGP update message to the other BGP-SPF speakers 
           that peer with the RRs or controllers.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">For example, <a href="#rr-top-1" class="xref">Figure 1</a>  
          shows a BGP-SPF domain, which contains two RRs RR1 and RR2, 
          and three network nodes A, B and C. RR1 peers with all three 
          nodes A, B and C in the network. 
          RR2 also peers with all three nodes A, B and C in the network. 
          There is a link between A and B, a link between A and C, and 
          a link between B and C.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<span id="name-bgp-spf-domain-with-two-rrs"></span><div id="rr-top-1">
<figure id="figure-1">
          <div class="alignCenter art-text artwork" id="section-3.1-3.1">
<pre>
              +-------+      +-------+
              |  RR1  |------|  RR2  |
              +-------+      +-------+
             /    \   \  ____/  /    \
            /      \___\/      /      \
           /       /\   \___  /        \
          / ______/  \      \/          \
         / /--&gt;       \     /\__________ \
        / /            ( B )            \ \
       / /         ___/     \___         \ \
      / /     ____/             \____     \ \
  ^  / / ____/                       \____ \ \
  | / / /                                 \ \ \
 / / / /                                   \ \ \
  ( A )-------------------------------------( C )</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-bgp-spf-domain-with-two-rrs" class="selfRef">BGP-SPF Domain with two RRs</a>
          </figcaption></figure>
</div>
<p id="section-3.1-4">Each of the nodes A, B and C in the network 
           sends/advertises its link NLRIs in BGP update messages 
           to both RR1 and RR2. After receiving a link NLRI in a 
           BGP update message from a node (e.g., node A), each of 
           RR1 and RR2 sends the NLRI in a BGP update message to 
           the other nodes (e.g., nodes B and C). 
           Each of the other nodes receives two copies of the 
           same NLRI, one from RR1 and the other from RR2. 
           One copy is enough, the other redundant copy should be 
           reduced.<a href="#section-3.1-4" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2">
        <h3 id="name-flooding-in-node-connection">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-flooding-in-node-connection" class="section-name selfRef">Flooding in Node Connections Model</a>
        </h3>
<p id="section-3.2-1">In Node Connections model, EBGP single-hop sessions are
           established over direct point-to-point links 
           interconnecting the nodes in the BGP-SPF routing domain.
           Once the session has been established and 
           the BGP-LS-SPF AFI/SAFI capability has been exchanged for 
           the corresponding session, then the link is considered up 
           from a BGP-SPF perspective and the corresponding BGP-LS-SPF
           Link NLRI is advertised to all the nodes in the domain 
           through all the BGP sessions over the links. 
           If the session goes down, the corresponding Link NLRI will
           be withdrawn. The withdrawal is done through advertising 
           a BGP update containing the NLRI in MP_UNREACH_NLRI to 
           all the nodes in the domain using all BGP sessions over 
           the links.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">For example, <a href="#parallel-link-top-1" class="xref">Figure 2</a> shows 
           a BGP-SPF domain, which contains four nodes A, B, C and D. 
           These four nodes are connected by six links. 
           There are two parallel links between A and B, 
           a link between A and C, a link between A and D, 
           a link between B and C and a link between C and D.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<span id="name-bgp-spf-domain-with-paralle"></span><div id="parallel-link-top-1">
<figure id="figure-2">
          <div class="alignCenter art-text artwork" id="section-3.2-3.1">
<pre>
       --&gt;
     _____________________
 ( A )-------------------( B )
 | |\  --&gt;                 | |
 v | \_____                | v
   |  --&gt;  \_______        |
   |               \_____  |
   |                     \ | ^
   |                      \| |
 ( D )-------------------( C )
       --&gt;           &lt;--</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-bgp-spf-domain-with-paralle" class="selfRef">BGP-SPF Domain with parallel links</a>
          </figcaption></figure>
</div>
<p id="section-3.2-4">Suppose that the BGP sessions over all the links except
            for the session over the link between A and D have been 
            established and the BGP-LS-SPF AFI/SAFI capability has 
            been exchanged for the corresponding sessions. When the
            BGP session over the link between A and D is established
            and the BGP-LS-SPF AFI/SAFI capability is exchanged for
            the corresponding session, node A considers that the link
            from A to D is up and sends the BGP-LS-SPF Link NLRI for
            the link through its four BGP sessions (i.e., the session 
            between A and B over the first parallel link between A and
            B, the session between A and B over the second parallel 
            link between A and B, the session between A and C over the
            link between A and C, and the session between A and D over
            the link between A and D) to nodes B, C and D. After 
            receiving the NLRI from node A, each of the nodes B, C and
            D sends the NLRI to the other nodes that have BGP sessions
            with the node. Node B sends the NLRI to node C. Node C
            sends the NLRI to nodes B and D. Node D sends the NLRI to
            node C.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<p id="section-3.2-5">Similarly, when the BGP session over the link between A and
            D is established and the BGP-LS-SPF AFI/SAFI capability is
            exchanged for the corresponding session, node D considers
            that the link from D to A is up and sends the BGP-LS-SPF
            Link NLRI for the link through its two BGP sessions (i.e., the
            session between D and C over the link between D and C, and
            the session between D and A over the link between D and A)
            to nodes C and A. After receiving the NLRI from node D,
            each of the nodes A and C sends the NLRI to the other nodes
            that have BGP sessions with the node. Node C sends the NLRI
            to nodes A and B. Node A sends the NLRI to nodes B and C
            through two parallel BGP sessions to B and the BGP session
            to C.<a href="#section-3.2-5" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3">
        <h3 id="name-flooding-in-directly-connec">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-flooding-in-directly-connec" class="section-name selfRef">Flooding in Directly-Connected Nodes Model</a>
        </h3>
<p id="section-3.3-1">In Directly-Connected Nodes model, BGP-SPF speakers peer 
           with all directly-connected nodes but the sessions may
           be between loopback addresses. 
           Consequently, there will be a single BGP session even if
           there are multiple direct connections between BGP-SPF
           speakers. BGP-LS-SPF Link NLRI is advertised as long as
           a BGP session has been established, the BGP-LS-SPF
           AFI/SAFI capability has been exchanged. Since there are
           BGP sessions between every directly-connected nodes in
           the BGP-SPF routing domain, there is only a reduction 
           in BGP sessions when there are parallel links between
           nodes comparing to node connections model.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-4">
      <h2 id="name-revised-flooding-procedures">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-revised-flooding-procedures" class="section-name selfRef">Revised Flooding Procedures</a>
      </h2>
<p id="section-4-1">This section describes the revised flooding procedures
         to support flooding reduction 
         for different models, including RR Model and 
         Node Connections Model.
         These procedures are backward compatible.
         In a network with some nodes (including RRs) 
         not supporting flooding
         reduction, a link NLRI originated from any node 
         will be distributed to every node in the network.<a href="#section-4-1" class="pilcrow">¶</a></p>
<section id="section-4.1">
        <h3 id="name-revised-flooding-procedure-">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-revised-flooding-procedure-" class="section-name selfRef">Revised Flooding Procedure for RR Model</a>
        </h3>
<p id="section-4.1-1">In RR model, the revised flooding procedure is as follows:<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-2.1">Every BGP-SPF speaker/node sends its BGP-LS-SPF Link NLRI
            to the same one or more of the RRs or controllers that the
            speaker peers with when it discovers that its
            corresponding link is up.<a href="#section-4.1-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.1-2.2">After receiving the Link NLRI, the RR or controller 
            sends the NLRI to the other BGP-SPF speakers that peer
            with the RR or controller.<a href="#section-4.1-2.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.1-3">For example, for the BGP-SPF domain in 
         <a href="#rr-top-1" class="xref">Figure 1</a>, using the revised flooding procedure,
         speaker/Node A sends its Link NLRI for link A to B to 
         RR1 when A discovers that link A to B is up. 
         Node A does not send the NLRI to RR2. 
         After receiving the Link NLRI for link A to B from 
         speaker/node A, RR1 sends the NLRI to the other nodes B and C.

         Each of the other nodes receives only one copy of the same NLRI,
         which is from RR1. There is no redundant copy of the same NLRI.
         Comparing to the normal flooding in RR model as illustrated
         in <a href="#rr-top-1" class="xref">Figure 1</a>, the revised flooding procedure
         reduces the amount of link states flooding by half.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2">
        <h3 id="name-revised-flooding-procedure-f">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-revised-flooding-procedure-f" class="section-name selfRef">Revised Flooding Procedure for Node Connections Model</a>
        </h3>
<p id="section-4.2-1">In Node Connections model, the revised flooding procedure is as
         follows:<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-2.1">A BGP-SPF speaker/node has a flooding topology of the
            BGP-SPF domain. In an option, the flooding topology is
            computed in a distributed mode, where every BGP-SPF
            speaker computes a flooding topology for the domain
            using a same algorithm.
            In another option, the flooding topology is computed
            in a centralized mode, where one BGP-SPF speaker
            elected as a leader computes a flooding topology for
            the domain and advertises the flooding topology to
            every BGP-SPF speaker in the domain.<a href="#section-4.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-2.2">A BGP-SPF speaker/node sends its link NLRI in a BGP update
            message for its link up or down to its peers that 
            are directly connected on the flooding topology, and
            sends its link NLRI in a BGP update message for its link 
            down to all its peers.
            
            When receiving the NLRI in a new BGP
            update message for a link up or down from a peer, the speaker
            sends the NLRI in a BGP update message to its other peers that
            are directly connected on the flooding topology.<a href="#section-4.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-2.3">When a BGP-SPF session is down, the BGP-SPF speaker/node
             that was connected to the session will not withdraw the 
             link NLRIs received from the session right away. 
             It keeps the NLRIs for some time.<a href="#section-4.2-2.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.2-3">Given a real network topology (RT), a flooding topology (FT) of
         the RT is a sub network topology of the RT and connects all the
         nodes in the RT.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2-4">For example, <a href="#flooding-top-1" class="xref">Figure 3</a> shows
         a flooding topology of the real topology in
         <a href="#parallel-link-top-1" class="xref">Figure 2</a>.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
<span id="name-a-flooding-topology"></span><div id="flooding-top-1">
<figure id="figure-3">
          <div class="alignCenter art-text artwork" id="section-4.2-5.1">
<pre>
 ( A )-------------------( B )
   |                       |
   |                       |
   |                       |
   |                       |
   |                       |
   |                       |
 ( D )-------------------( C )</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-a-flooding-topology" class="selfRef">A Flooding Topology</a>
          </figcaption></figure>
</div>
<p id="section-4.2-6">The flooding topology in <a href="#flooding-top-1" class="xref">Figure 3</a>
         is a sub network topology of the RT in
         <a href="#parallel-link-top-1" class="xref">Figure 2</a> and connects all the
         nodes (i.e., nodes A, B, C and D) in the RT in 
         <a href="#parallel-link-top-1" class="xref">Figure 2</a>.<a href="#section-4.2-6" class="pilcrow">¶</a></p>
<p id="section-4.2-7"><a href="#reduced-flood-flow-1" class="xref">Figure 4</a> shows a reduced flooding
         flow of a link NLRI in a BGP update message for a link up or
         down in the BGP-SPF domain, which is the same as the one in
         <a href="#parallel-link-top-1" class="xref">Figure 2</a>.<a href="#section-4.2-7" class="pilcrow">¶</a></p>
<span id="name-a-reduced-link-state-floodi"></span><div id="reduced-flood-flow-1">
<figure id="figure-4">
          <div class="alignCenter art-text artwork" id="section-4.2-8.1">
<pre>
       --&gt;
     _____________________
 ( A )-------------------( B )
 | |\                      | |
 v | \_____                | v
   |       \_______        |
   |               \_____  |
   |                     \ |
   |                      \|
 ( D )-------------------( C )
       --&gt;</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-a-reduced-link-state-floodi" class="selfRef">A Reduced Link State Flooding Flow</a>
          </figcaption></figure>
</div>
<p id="section-4.2-9">Speaker/Node A sends the NLRI in a BGP update message 
         for its link to
         its peers B and D. Nodes B and D are peers of node A and 
         are directly connected to A on the
         flooding topology (FT). Node A does not send the NLRI to its peer
         C since C is not directly connected to A on the FT.<a href="#section-4.2-9" class="pilcrow">¶</a></p>
<p id="section-4.2-10">After receiving the
         NLRI in the message from A, node B sends the NLRI in a BGP update
         message to B's other peer C 
         (which is directly connected to B on the FT).
         After receiving the NLRI in a BGP update message from A, node D
         sends the NLRI in a BGP update message to D's other peer C
         (which is directly connected to D on the FT).<a href="#section-4.2-10" class="pilcrow">¶</a></p>
<p id="section-4.2-11">The number of NLRIs in messages flooded in
        <a href="#reduced-flood-flow-1" class="xref">Figure 4</a> is much less than that in
        <a href="#parallel-link-top-1" class="xref">Figure 2</a>.
        The performance of network is improved using the revised
        flooding procedure.<a href="#section-4.2-11" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-5">
      <h2 id="name-bgp-extensions-for-flooding">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-bgp-extensions-for-flooding" class="section-name selfRef">BGP Extensions for Flooding Reduction</a>
      </h2>
<p id="section-5-1">This section specifies BGP extensions for flooding
         reduction in two models: 
         RR model and Node Connections model.
         The extensions for Directly-Connected Node model 
         are included 
         in the extensions for Node Connections model.<a href="#section-5-1" class="pilcrow">¶</a></p>
<section id="section-5.1">
        <h3 id="name-extensions-for-rr-model">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-extensions-for-rr-model" class="section-name selfRef">Extensions for RR Model</a>
        </h3>
<p id="section-5.1-1">A single RR for a BGP-SPF domain is elected as a leader RR
         of the domain. The leader RR is the RR with the highest 
         priority to become a leader in the domain. If there are
         more than one RRs having the same highest priority, the RR
         with the highest Node ID and the highest priority is the
         leader RR in the domain.
         In a deployment, only every RR
         advertises its priority for becoming a leader using a
         Leader Priority TLV defined below.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">Two new TLVs are defined for flooding reduction in RR model.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-3.1">Leader Priority TLV: A node uses it to advertise its
              priority for becoming a leader.<a href="#section-5.1-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.1-3.2">Node Flood TLV: A RR or controller uses it to 
              tell every node the flooding behavior the node
              needs to follow.<a href="#section-5.1-3.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.1-4">
          The format of Leader Priority TLV is illustrated in
          <a href="#leader-priority-tlv" class="xref">Figure 5</a>.<a href="#section-5.1-4" class="pilcrow">¶</a></p>
<span id="name-leader-priority-tlv"></span><div id="leader-priority-tlv">
<figure id="figure-5">
          <div class="alignCenter art-text artwork" id="section-5.1-5.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |           Type = TBD1         |          Length = 4           |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                      Reserved                 |   Priority    |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-leader-priority-tlv" class="selfRef">Leader Priority TLV</a>
          </figcaption></figure>
</div>
<span class="break"></span><dl class="dlParallel" id="section-5.1-6">
          <dt id="section-5.1-6.1">Type:</dt>
          <dd style="margin-left: 3.0em" id="section-5.1-6.2">It is to be assigned by IANA.<a href="#section-5.1-6.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-6.3">Length:</dt>
          <dd style="margin-left: 3.0em" id="section-5.1-6.4">4.<a href="#section-5.1-6.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-6.5">Reserved:</dt>
          <dd style="margin-left: 3.0em" id="section-5.1-6.6">MUST be set to zero in transmission
              and should be ignored on reception.<a href="#section-5.1-6.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-6.7">Priority:</dt>
          <dd style="margin-left: 3.0em" id="section-5.1-6.8">A unsigned integer from  0 to 255 
              in one octet indicating priority to become a leader.<a href="#section-5.1-6.8" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-5.1-7">The format of Node Flood TLV is illustrated in
          <a href="#node-flood-tlv" class="xref">Figure 6</a>.<a href="#section-5.1-7" class="pilcrow">¶</a></p>
<span id="name-node-flood-tlv"></span><div id="node-flood-tlv">
<figure id="figure-6">
          <div class="alignCenter art-text artwork" id="section-5.1-8.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |           Type = TBD2         |          Length = 4           |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                      Reserved                 | Flood-behavior|
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-node-flood-tlv" class="selfRef">Node Flood TLV</a>
          </figcaption></figure>
</div>
<span class="break"></span><dl class="dlParallel" id="section-5.1-9">
          <dt id="section-5.1-9.1">Type:</dt>
          <dd style="margin-left: 3.0em" id="section-5.1-9.2">It is to be assigned by IANA.<a href="#section-5.1-9.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-9.3">Length:</dt>
          <dd style="margin-left: 3.0em" id="section-5.1-9.4">4.<a href="#section-5.1-9.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-9.5">Reserved:</dt>
          <dd style="margin-left: 3.0em" id="section-5.1-9.6">MUST be set to zero in transmission
              and should be ignored on reception.<a href="#section-5.1-9.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-9.7">Flood-behavior:</dt>
          <dd style="margin-left: 3.0em" id="section-5.1-9.8">The following flooding behavior
              are defined.<a href="#section-5.1-9.8" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<div class="alignLeft art-text artwork" id="section-5.1-10">
<pre>
        0 - Reserved.
        1 - send link states to the RR with the minimum ID
        2 - send link states to the RR with the maximum ID
        3 - send link states to 2 RRs with smaller IDs
        4 - send link states to 2 RRs with larger IDs
    6-127 - Standardized flooding behaviors for RR Model
  128-254 - Private flooding behaviors for RR Model.
</pre><a href="#section-5.1-10" class="pilcrow">¶</a>
</div>
<p id="section-5.1-11">In a deployment, 
          the flooding behavior for every node is configured on a RR
          or controller such as the leader RR and the RR advertises
          the behavior to the other RRs and every node in the network
          though using a Node Flood TLV.<a href="#section-5.1-11" class="pilcrow">¶</a></p>
<p id="section-5.1-12">For example, if we want every node in the network to send 
          its link states to only one RR, we configure this behavior on
          a RR and the RR advertises the behavior to every node using 
          a Node Flood TLV with Flood-behavior set to one, which tells 
          every node to send its link states to the RR with the minimum
          ID. If we want every node in the network to send its link states
          to two RRs for redundancy, we configure this behavior on a RR
          and the RR advertises the behavior to every node using a Node
          Flood TLV with Flood-behavior set to 3, which tells every node
          to send its link states to the two RRs with smaller IDs
          (i.e., the RR with the minimum ID and the RR with the second
          minimum ID).<a href="#section-5.1-12" class="pilcrow">¶</a></p>
</section>
<section id="section-5.2">
        <h3 id="name-extensions-for-node-connect">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-extensions-for-node-connect" class="section-name selfRef">Extensions for Node Connections Model</a>
        </h3>
<p id="section-5.2-1">There are two modes for the flooding topology computation:
          centralized mode and distributed mode. In a centralized
          mode, one BGP-SPF node is elected as a leader. The leader
          computes a flooding topology for the BGP-SPF domain and
          advertises the flooding topology to every BGP-SPF node in
          the domain. In a distributed mode, every BGP-SPF node
          computes a flooding topology for the BGP-SPF domain using
          a same algorithm. There is not any flooding topology
          distribution.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2"> This section defines the new TLVs for the two modes, 
           describes the flooding topology distribution in centralized
           mode and an algorithm that can be used by every node
           to compute its flooding topology in distributed mode.<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<section id="section-5.2.1">
          <h4 id="name-new-tlvs">
<a href="#section-5.2.1" class="section-number selfRef">5.2.1. </a><a href="#name-new-tlvs" class="section-name selfRef">New TLVs</a>
          </h4>
<p id="section-5.2.1-1">Five new TLVs are defined for flooding reduction 
          in Node Connections model.<a href="#section-5.2.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2.1-2.1">Node Algorithm TLV: A leader uses this TLV to 
              tell every node the algorithm to be used to compute
              a flooding topology.<a href="#section-5.2.1-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-5.2.1-2.2">Algorithms Support TLV: A node uses this TLV 
              to indicate the algorithms that it supports for 
              distributed mode.<a href="#section-5.2.1-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-5.2.1-2.3">Node IDs TLV: A leader uses this TLV  
              to indicate the mapping from nodes to their indices 
              for centralized mode.<a href="#section-5.2.1-2.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-5.2.1-2.4">Paths TLV: A leader uses this TLV  
              to advertise a part of flooding topology 
              for centralized mode.<a href="#section-5.2.1-2.4" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-5.2.1-2.5">Connection Used for Flooding TLV: A node uses this TLV  
              to indicate that a connection/link is a part of the 
              flooding topology and used for flooding.<a href="#section-5.2.1-2.5" class="pilcrow">¶</a>
</li>
          </ul>
<section id="section-5.2.1.1">
            <h5 id="name-node-algorithm-tlv">
<a href="#section-5.2.1.1" class="section-number selfRef">5.2.1.1. </a><a href="#name-node-algorithm-tlv" class="section-name selfRef">Node Algorithm TLV</a>
            </h5>
<p id="section-5.2.1.1-1">The format of Node Algorithm TLV is illustrated in
          <a href="#node-algorithm-tlv" class="xref">Figure 7</a>.<a href="#section-5.2.1.1-1" class="pilcrow">¶</a></p>
<span id="name-node-algorithm-tlv-2"></span><div id="node-algorithm-tlv">
<figure id="figure-7">
              <div class="alignCenter art-text artwork" id="section-5.2.1.1-2.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |           Type = TBD3         |          Length = 4           |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                      Reserved                 |   Algorithm   |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-node-algorithm-tlv-2" class="selfRef">Node Algorithm TLV</a>
              </figcaption></figure>
</div>
<span class="break"></span><dl class="dlParallel" id="section-5.2.1.1-3">
              <dt id="section-5.2.1.1-3.1">Type:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.1-3.2">It is to be assigned by IANA.<a href="#section-5.2.1.1-3.2" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.1-3.3">Length:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.1-3.4">4.<a href="#section-5.2.1.1-3.4" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.1-3.5">Reserved:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.1-3.6">MUST be set to zero in transmission
              and should be ignored on reception.<a href="#section-5.2.1.1-3.6" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.1-3.7">Algorithm:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.1-3.8"></dd>
            <dd class="break"></dd>
</dl>
<div class="alignLeft art-text artwork" id="section-5.2.1.1-4">
<pre>
        0 - The leader computes a flooding topology using its own
            algorithm and advertises the flooding topology to every
            node.
    1-127 - Every node computes its flooding topology using this
            standardized distributed algorithm.
  128-254 - Private distributed algorithms.
</pre><a href="#section-5.2.1.1-4" class="pilcrow">¶</a>
</div>
<p id="section-5.2.1.1-5">A node such as the leader node can use this TLV to tell
          every node in the domain to 
          use the flooding topology from the leader for flooding
          the link states through advertising the TLV with 
          the Algorithm field set to zero, or to tell
          every node to compute its own flooding topology using 
          the algorithm given by the Algorithm field in the TLV 
          containing an identifier of an algorithm when the 
          Algorithm field is not zero.<a href="#section-5.2.1.1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-5.2.1.2">
            <h5 id="name-algorithms-support-tlv">
<a href="#section-5.2.1.2" class="section-number selfRef">5.2.1.2. </a><a href="#name-algorithms-support-tlv" class="section-name selfRef">Algorithms Support TLV</a>
            </h5>
<p id="section-5.2.1.2-1">The format of Algorithms Support TLV is illustrated in
          <a href="#algorithms-support-tlv" class="xref">Figure 8</a>.<a href="#section-5.2.1.2-1" class="pilcrow">¶</a></p>
<span id="name-algorithms-support-tlv-2"></span><div id="algorithms-support-tlv">
<figure id="figure-8">
              <div class="alignCenter art-text artwork" id="section-5.2.1.2-2.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |           Type = TBD4         |          Length (variable)    |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |   Algorithm   |   Algorithm   |    . . .
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-algorithms-support-tlv-2" class="selfRef">Algorithms Support TLV</a>
              </figcaption></figure>
</div>
<span class="break"></span><dl class="dlParallel" id="section-5.2.1.2-3">
              <dt id="section-5.2.1.2-3.1">Type:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.2-3.2">It is to be assigned by IANA.<a href="#section-5.2.1.2-3.2" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.2-3.3">Length:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.2-3.4">The number of Algorithms in the TLV.<a href="#section-5.2.1.2-3.4" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.2-3.5">Algorithm:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.2-3.6">A numeric identifier in the range 
              0-255 indicating the algorithm that can be used to
              compute the flooding topology.<a href="#section-5.2.1.2-3.6" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
</dl>
</section>
<section id="section-5.2.1.3">
            <h5 id="name-node-ids-tlv">
<a href="#section-5.2.1.3" class="section-number selfRef">5.2.1.3. </a><a href="#name-node-ids-tlv" class="section-name selfRef">Node IDs TLV</a>
            </h5>
<p id="section-5.2.1.3-1">The format of Node IDs TLV is illustrated in
          <a href="#node-ids-tlv" class="xref">Figure 9</a>.<a href="#section-5.2.1.3-1" class="pilcrow">¶</a></p>
<span id="name-node-ids-tlv-2"></span><div id="node-ids-tlv">
<figure id="figure-9">
              <div class="alignCenter art-text artwork" id="section-5.2.1.3-2.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |           Type = TBD5         |          Length (variable)    |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |      Reserved               |L|         Starting Index        |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                            Node ID                            |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 ~                          . . . . . .                          ~
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                            Node ID                            |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-node-ids-tlv-2" class="selfRef">Node IDs TLV</a>
              </figcaption></figure>
</div>
<span class="break"></span><dl class="dlParallel" id="section-5.2.1.3-3">
              <dt id="section-5.2.1.3-3.1">Type:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.3-3.2">It is to be assigned by IANA.<a href="#section-5.2.1.3-3.2" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.3-3.3">Length:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.3-3.4">4 * (number of Node IDs + 1).<a href="#section-5.2.1.3-3.4" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.3-3.5">Reserved:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.3-3.6">MUST be set to zero in transmission
              and should be ignored on reception.<a href="#section-5.2.1.3-3.6" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.3-3.7">L:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.3-3.8">This bit is set to one if the index of the last
              node ID in this TLV is equal to the last index in the
              full list of node IDs for the BFP-SPF domain.<a href="#section-5.2.1.3-3.8" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.3-3.9">Starting Index:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.3-3.10">
            The index of the first node ID in this TLV is Starting Index;
            the index of the second node ID in this TLV is Starting Index + 1;
            the index of the third node ID in this TLV is Starting Index + 2;
            and so on.<a href="#section-5.2.1.3-3.10" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.3-3.11">Node ID:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.3-3.12">The BGP identifier of a node in the
            BGP-SPF domain.<a href="#section-5.2.1.3-3.12" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
</dl>
</section>
<section id="section-5.2.1.4">
            <h5 id="name-paths-tlv">
<a href="#section-5.2.1.4" class="section-number selfRef">5.2.1.4. </a><a href="#name-paths-tlv" class="section-name selfRef">Paths TLV</a>
            </h5>
<p id="section-5.2.1.4-1">The format of Paths TLV is illustrated in
          <a href="#paths-tlv" class="xref">Figure 10</a>. 
          A leader uses this TLV to advertise a part of flooding
          topology for centralized mode. 
          A path may be described as a sequence of indices: 
          (Index 1, Index 2, Index 3, ...), denoting a connection
          between the node with index 1 and the node with index 2,
          a connection between the node with index 2 and the node
          with index 3, and so on.
          A single link/connection is a simple case of a path that only 
          connects two nodes. 
          A single link path may be encoded in a paths TLV of 8 bytes 
          with two indices.<a href="#section-5.2.1.4-1" class="pilcrow">¶</a></p>
<span id="name-paths-tlv-2"></span><div id="paths-tlv">
<figure id="figure-10">
              <div class="alignCenter art-text artwork" id="section-5.2.1.4-2.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |           Type = TBD6         |          Length (variable)    |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |             Index 1           |             Index 2           |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 ~                          . . . . . .                          ~
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-paths-tlv-2" class="selfRef">Paths TLV</a>
              </figcaption></figure>
</div>
<span class="break"></span><dl class="dlParallel" id="section-5.2.1.4-3">
              <dt id="section-5.2.1.4-3.1">Type:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.4-3.2">It is to be assigned by IANA.<a href="#section-5.2.1.4-3.2" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.4-3.3">Length:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.4-3.4">2 * (number of indices in the path)
            when the TLV contains the indices for one path.<a href="#section-5.2.1.4-3.4" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.4-3.5">Index 1:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.4-3.6">
            The index of the first node in the path.<a href="#section-5.2.1.4-3.6" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.4-3.7">Index 2:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.4-3.8">
            The index of the second (next) node in the path.<a href="#section-5.2.1.4-3.8" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-5.2.1.4-4">Multiple such as N paths may be encoded in one paths TLV.
          Each of the multiple paths is represented as a sequence of
          indices of the nodes on the path, and two paths (i.e., two
          sequences of indices for the two paths) are separated by a
          special index value such as 0xFFFF. In this case, there are 
          (N - 1) special indices as separators to separate N paths,
          and the Length field has a value of
          2 * (number of indices in N paths + N  - 1).<a href="#section-5.2.1.4-4" class="pilcrow">¶</a></p>
<p id="section-5.2.1.4-5">When there are a number such as N of single link paths,
          using one paths TLV to represent them is more efficient
          than using N paths TLVs to represent them (i.e., each
          paths TLV represents a single link path). Using one
          TLV consumes 4 + 2 * (2*N + N - 1) = 6*N + 2 bytes. Using
          N TLVs occupies N * (4 + 4) = 8*N bytes. The space
          used by the former is about three quarters of
          the space used by the latter for a big N such as 30.<a href="#section-5.2.1.4-5" class="pilcrow">¶</a></p>
</section>
<section id="section-5.2.1.5">
            <h5 id="name-connection-used-for-floodin">
<a href="#section-5.2.1.5" class="section-number selfRef">5.2.1.5. </a><a href="#name-connection-used-for-floodin" class="section-name selfRef">Connection Used for Flooding TLV</a>
            </h5>
<p id="section-5.2.1.5-1">The format of Connection Used for Flooding TLV is illustrated in
          <a href="#cuf-tlv" class="xref">Figure 11</a>.<a href="#section-5.2.1.5-1" class="pilcrow">¶</a></p>
<span id="name-connection-used-for-flooding"></span><div id="cuf-tlv">
<figure id="figure-11">
              <div class="alignCenter art-text artwork" id="section-5.2.1.5-2.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |           Type = TBD7         |          Length = 8           |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                        Local Node ID                          |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                        Remote Node ID                         |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre>
</div>
<figcaption><a href="#figure-11" class="selfRef">Figure 11</a>:
<a href="#name-connection-used-for-flooding" class="selfRef">Connection Used for Flooding TLV</a>
              </figcaption></figure>
</div>
<span class="break"></span><dl class="dlParallel" id="section-5.2.1.5-3">
              <dt id="section-5.2.1.5-3.1">Type:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.5-3.2">It is to be assigned by IANA.<a href="#section-5.2.1.5-3.2" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.5-3.3">Length:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.5-3.4">8.<a href="#section-5.2.1.5-3.4" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.5-3.5">Local Node ID:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.5-3.6">
            The BGP ID of the local node of the session over the connection on
            the flooding topology which is used for flooding link states.<a href="#section-5.2.1.5-3.6" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2.1.5-3.7">Remote Node ID:</dt>
              <dd style="margin-left: 3.0em" id="section-5.2.1.5-3.8">
            The BGP ID of the remote node of the session over the connection on
            the flooding topology which is used for flooding link states.<a href="#section-5.2.1.5-3.8" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
</dl>
</section>
</section>
<div id="FT-Distribution">
<section id="section-5.2.2">
          <h4 id="name-flooding-topology-distribut">
<a href="#section-5.2.2" class="section-number selfRef">5.2.2. </a><a href="#name-flooding-topology-distribut" class="section-name selfRef">Flooding Topology Distribution in Centralized Mode</a>
          </h4>
<p id="section-5.2.2-1">In centralized mode, the leader computes a flooding topology
           for the domain whenever there is a change in the real
           network topology of the domain and advertises the flooding
           topology to every node in the domain.<a href="#section-5.2.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2.2-2">After the current leader has failed, a new leader is elected.
           The new leader computes a flooding topology for the domain
           and advertises the flooding topology to every node in the
           domain.<a href="#section-5.2.2-2" class="pilcrow">¶</a></p>
<p id="section-5.2.2-3">For a brand new flooding topology of the domain computed, the
           leader advertises the whole flooding topology to every node in
           the domain. The leader advertises the mappings between all the
           node IDs and their indices to every node in the domain using a
           number of node IDs TLVs first. These node IDs TLVs contain the
           IDs of all the nodes in the domain and indicates the index
           corresponding to each of the node IDs and are advertised under
           MP_REACH_NLRI in BGP update messages. And then the leader
           advertises the connections/links on the flooding topology to
           every node in the domain using a number of paths TLVs. These
           paths TLVs contain all the connections/links on the flooding
           topology and are advertised under MP_REACH_NLRI in BGP
           update messages.<a href="#section-5.2.2-3" class="pilcrow">¶</a></p>
<p id="section-5.2.2-4">After advertising a flooding topology to every node in the
           domain, which is called the current flooding topology, for a new
           flooding topology computed for the updated real network topology
           of the domain, the leader advertises only the changes in the new
           flooding topology comparing to the current flooding topology to
           every node in the domain.  The leader advertises the changes in
           the mappings between all the node IDs and their indices to every
           node in the domain using node IDs TLVs first, and then
           advertises the changes in the flooding topology to every node in
           the domain using paths TLVs.<a href="#section-5.2.2-4" class="pilcrow">¶</a></p>
<p id="section-5.2.2-5">For the new nodes added into the domain, the leader advertises
           the mappings between the IDs of the new nodes and their indices
           using a node IDs TLV under MP_REACH_NLRI in a BGP update
           message to add the mappings. For the dead nodes removed from the
           domain, the leader advertises the mappings between the IDs of the
           dead nodes and their indices using a node IDs TLV under
           MP_UNREACH_NLRI in a BGP update message to withdraw the mappings.<a href="#section-5.2.2-5" class="pilcrow">¶</a></p>
<p id="section-5.2.2-6">For the new connections/links added into the current flooding
           topology, the leader advertises the new connections/links using
           a paths TLV under MP_REACH_NLRI in a BGP update message to
           add the new connections/inks to the current flooding topology.
           For the old connections/links removed from the current flooding
           topology, the leader advertises the old connections/links using
           a paths TLV under MP_UNREACH_NLRI in a BGP update message to
           withdraw the old connections/links from the current flooding
           topology.<a href="#section-5.2.2-6" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-5.2.3">
          <h4 id="name-an-algorithm-for-distribute">
<a href="#section-5.2.3" class="section-number selfRef">5.2.3. </a><a href="#name-an-algorithm-for-distribute" class="section-name selfRef">An Algorithm for Distributed Mode</a>
          </h4>
<p id="section-5.2.3-1">This section specifies an algorithm that can be used
         by every node to compute its flooding topology.<a href="#section-5.2.3-1" class="pilcrow">¶</a></p>
<p id="section-5.2.3-2">The algorithm for computing a flooding topology of a BGP-SPF
         domain (real topology) is described as follows.<a href="#section-5.2.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2.3-3.1">Select a node R0  
             with the smallest node ID and without the status
             indicating that the node does not support transit;<a href="#section-5.2.3-3.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-5.2.3-3.2">Build a tree using R0 as root of the tree (details below);<a href="#section-5.2.3-3.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-5.2.3-3.3">And then connect a leaf to the tree to have a flooding
            topology (details follow).<a href="#section-5.2.3-3.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-5.2.3-4">The algorithm starts from<a href="#section-5.2.3-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2.3-5.1">a variable MaxD with an initial value 3,<a href="#section-5.2.3-5.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-5.2.3-5.2">an initial flooding topology FT = {(R0, D=0, PHs={})} 
              with node R0 as root, where R0's Degree D = 0, 
              Previous Hops PHs = { };<a href="#section-5.2.3-5.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-5.2.3-5.3">an initial candidate queue Cq = 
              {(R1,D=0, PHs={R0}), (R2,D=0, PHs={R0}), ..., (Rm,D=0, PHs={R0})},
              where each of nodes R1 to Rm is connected to R0, 
              its Degree D = 0 and Previous Hops PHs ={R0}, 
              R1 to Rm are in 
              increasing order by their IDs.<a href="#section-5.2.3-5.3" class="pilcrow">¶</a>
</li>
          </ul>
<ol start="1" type="1" class="normal type-1" id="section-5.2.3-6">
<li id="section-5.2.3-6.1">
Find and remove the first element with node A from Cq 
that is not on FT and one PH's D in PHs &lt; MaxD, and add
the element with A into FT; Set A's D to one, 
increase A's PH's D by one.
If no element in Cq satisfies the conditions, algorithm is 
restarted with ++MaxD, the initial FT and Cq.<a href="#section-5.2.3-6.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.2.3-6.2">If all the nodes are on the FT, then goto step 4;<a href="#section-5.2.3-6.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.2.3-6.3">
Suppose that node Xi (i = 1, 2,..., n) is connected to node A and not on FT, 
and X1, X2,..., Xn are in increasing order
by their IDs (i.e., X1's ID &lt; X2's ID &lt; ... &lt; Xn's ID).
If they are not ordered, then make them in the order.

If Xi is not in Cq, then add it into the end of Cq with D = 0 and PHs = {A}; 
otherwise (i.e., Xi is in Cq), add A into the end of Xi's PHs; 
Goto step 1.<a href="#section-5.2.3-6.3" class="pilcrow">¶</a>
</li>
            <li id="section-5.2.3-6.4">
For each node B on FT whose D is one 
(from minimum to maximum node ID), 
find a link L attached to B such that 
L's remote node R can transit traffic and has minimum D and ID
(if there is no node R which can transit traffic, 
then find a link L to node R whose D and ID are minimum), 
add link L between B and R into FT and increase B's D and R's D by one.
Return FT.<a href="#section-5.2.3-6.4" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</section>
</section>
<div id="Security">
<section id="section-6">
      <h2 id="name-security-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-6-1">TBD<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Acknowledgements">
<section id="section-7">
      <h2 id="name-acknowledgements">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-7-1">The authors of this document would like to thank 
     Donald E. Eastlake, Acee Lindem and Keyur Patel
     for the comments.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="IANA">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-8-1">TBD<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-9">
      <h2 id="name-references">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-9.1">
        <h3 id="name-normative-references">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-lsvr-bgp-spf">[I-D.ietf-lsvr-bgp-spf]</dt>
        <dd>
<span class="refAuthor">Patel, K.</span>, <span class="refAuthor">Lindem, A.</span>, <span class="refAuthor">Zandi, S.</span>, and <span class="refAuthor">W. Henderickx</span>, <span class="refTitle">"BGP Link-State Shortest Path First (SPF) Routing"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-lsvr-bgp-spf-15</span>, <time datetime="2021-07-01" class="refDate">1 July 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-lsvr-bgp-spf-15.txt">https://www.ietf.org/archive/id/draft-ietf-lsvr-bgp-spf-15.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4721">[RFC4721]</dt>
        <dd>
<span class="refAuthor">Perkins, C.</span>, <span class="refAuthor">Calhoun, P.</span>, and <span class="refAuthor">J. Bharatia</span>, <span class="refTitle">"Mobile IPv4 Challenge/Response Extensions (Revised)"</span>, <span class="seriesInfo">RFC 4721</span>, <span class="seriesInfo">DOI 10.17487/RFC4721</span>, <time datetime="2007-01" class="refDate">January 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4721">https://www.rfc-editor.org/info/rfc4721</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4760">[RFC4760]</dt>
        <dd>
<span class="refAuthor">Bates, T.</span>, <span class="refAuthor">Chandra, R.</span>, <span class="refAuthor">Katz, D.</span>, and <span class="refAuthor">Y. Rekhter</span>, <span class="refTitle">"Multiprotocol Extensions for BGP-4"</span>, <span class="seriesInfo">RFC 4760</span>, <span class="seriesInfo">DOI 10.17487/RFC4760</span>, <time datetime="2007-01" class="refDate">January 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4760">https://www.rfc-editor.org/info/rfc4760</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7938">[RFC7938]</dt>
      <dd>
<span class="refAuthor">Lapukhov, P.</span>, <span class="refAuthor">Premji, A.</span>, and <span class="refAuthor">J. Mitchell, Ed.</span>, <span class="refTitle">"Use of BGP for Routing in Large-Scale Data Centers"</span>, <span class="seriesInfo">RFC 7938</span>, <span class="seriesInfo">DOI 10.17487/RFC7938</span>, <time datetime="2016-08" class="refDate">August 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7938">https://www.rfc-editor.org/info/rfc7938</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-9.2">
        <h3 id="name-informative-references">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-lsr-dynamic-flooding">[I-D.ietf-lsr-dynamic-flooding]</dt>
        <dd>
<span class="refAuthor">Li, T.</span>, <span class="refAuthor">Psenak, P.</span>, <span class="refAuthor">Ginsberg, L.</span>, <span class="refAuthor">Chen, H.</span>, <span class="refAuthor">Przygienda, T.</span>, <span class="refAuthor">Cooper, D.</span>, <span class="refAuthor">Jalil, L.</span>, <span class="refAuthor">Dontula, S.</span>, and <span class="refAuthor">G. S. Mishra</span>, <span class="refTitle">"Dynamic Flooding on Dense Graphs"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-lsr-dynamic-flooding-09</span>, <time datetime="2021-06-09" class="refDate">9 June 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-lsr-dynamic-flooding-09.txt">https://www.ietf.org/archive/id/draft-ietf-lsr-dynamic-flooding-09.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-lsr-flooding-topo-min-degree">[I-D.ietf-lsr-flooding-topo-min-degree]</dt>
        <dd>
<span class="refAuthor">Chen, H.</span>, <span class="refAuthor">Toy, M.</span>, <span class="refAuthor">Yang, Y.</span>, <span class="refAuthor">Wang, A.</span>, <span class="refAuthor">Liu, X.</span>, <span class="refAuthor">Fan, Y.</span>, and <span class="refAuthor">L. Liu</span>, <span class="refTitle">"Flooding Topology Minimum Degree Algorithm"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-lsr-flooding-topo-min-degree-02</span>, <time datetime="2021-06-01" class="refDate">1 June 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-lsr-flooding-topo-min-degree-02.txt">https://www.ietf.org/archive/id/draft-ietf-lsr-flooding-topo-min-degree-02.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8670">[RFC8670]</dt>
      <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Dawra, G.</span>, <span class="refAuthor">Aries, E.</span>, and <span class="refAuthor">P. Lapukhov</span>, <span class="refTitle">"BGP Prefix Segment in Large-Scale Data Centers"</span>, <span class="seriesInfo">RFC 8670</span>, <span class="seriesInfo">DOI 10.17487/RFC8670</span>, <time datetime="2019-12" class="refDate">December 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8670">https://www.rfc-editor.org/info/rfc8670</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Huaimo Chen</span></div>
<div dir="auto" class="left"><span class="org">Futurewei</span></div>
<div dir="auto" class="left">
<span class="locality">Boston, MA</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:huaimo.chen@futurewei.com" class="email">huaimo.chen@futurewei.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Gyan S. Mishra</span></div>
<div dir="auto" class="left"><span class="org">Verizon Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">13101 Columbia Pike</span></div>
<div dir="auto" class="left">
<span class="locality">Silver Spring</span>,  <span class="postal-code">MD 20904</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:301%20502-1347" class="tel">301 502-1347</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:gyan.s.mishra@verizon.com" class="email">gyan.s.mishra@verizon.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Aijun Wang</span></div>
<div dir="auto" class="left"><span class="org">China Telecom</span></div>
<div dir="auto" class="left"><span class="street-address">Beiqijia Town, Changping District</span></div>
<div dir="auto" class="left"><span class="locality">Beijing</span></div>
<div dir="auto" class="left"><span class="postal-code">102209</span></div>
<div dir="auto" class="left"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:wangaj3@chinatelecom.cn" class="email">wangaj3@chinatelecom.cn</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Yisong Liu</span></div>
<div dir="auto" class="left"><span class="org">China Mobile</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:liuyisong@chinamobile.com" class="email">liuyisong@chinamobile.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Haibo Wang</span></div>
<div dir="auto" class="left"><span class="org">Huawei</span></div>
<div dir="auto" class="left"><span class="street-address">Huawei Bld., No.156 Beiqing Rd.</span></div>
<div dir="auto" class="left"><span class="locality">Beijing</span></div>
<div dir="auto" class="left"><span class="postal-code">100095</span></div>
<div dir="auto" class="left"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:rainsword.wang@huawei.com" class="email">rainsword.wang@huawei.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Yanhe Fan</span></div>
<div dir="auto" class="left"><span class="org">Casa Systems</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:yfan@casa-systems.com" class="email">yfan@casa-systems.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
