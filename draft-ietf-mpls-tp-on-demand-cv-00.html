<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>MPLS on-demand Connectivity Verification, Route Tracing and Adjacency Verification</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="MPLS on-demand Connectivity Verification, Route Tracing and Adjacency Verification">
<meta name="keywords" content="Internet-Draft, MPLS-TP OAM, lsp ping">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">N. Bahadur</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">R. Aggarwal</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Juniper Networks, Inc.</td></tr>
<tr><td class="header">Expires: January 28, 2011</td><td class="header">S. Boutros</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Cisco Systems, Inc.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">E. Gray</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Ericsson</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">July 27, 2010</td></tr>
</table></td></tr></table>
<h1><br />MPLS on-demand Connectivity Verification, Route Tracing and Adjacency Verification<br />draft-ietf-mpls-tp-on-demand-cv-00</h1>

<h3>Abstract</h3>

<p>LSP-Ping is an existing and widely deployed OAM mechanism for MPLS
      LSPs. This document describes extensions to LSP-Ping so that LSP-Ping
      can be used to perform OAM on MPLS-TP LSPs. It also clarifies the
      procedures to be used for processing the OAM packets. Further, it
      describes how LSP-Ping can be used to perform Connectivity Verification,
      Route Tracing and Adjacency functions in MPLS-TP networks.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on January 28, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">1.1.</a>&nbsp;
Conventions used in this document<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.2.</a>&nbsp;
LSP-Ping for MPLS-TP LSPs using IP encapsulation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.3.</a>&nbsp;
LSP-Ping for MPLS-TP LSPs using non-IP encapsulation<br />
<a href="#anchor4">2.</a>&nbsp;
LSP-Ping extensions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#dsmap-addr-type">2.1.</a>&nbsp;
New address type for Downstream Mapping TLV<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#src-addr-tlv">2.2.</a>&nbsp;
Source Address TLV<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.3.</a>&nbsp;
MEP and MIP Identifier<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#static-fecs">2.4.</a>&nbsp;
Identifying Statically provisioned LSPs and PWs<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.4.1.</a>&nbsp;
Static LSP Sub-TLV<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.4.2.</a>&nbsp;
Static Pseudowire Sub-TLV<br />
<a href="#anchor8">3.</a>&nbsp;
Performing LSP-Ping over MPLS-TP LSPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ip-lsp-ping">3.1.</a>&nbsp;
LSP-Ping with IP encapsulation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.2.</a>&nbsp;
LSP-Ping with IP encapsulation, over ACH<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#lsp-ping-ping">3.3.</a>&nbsp;
Non-IP based LSP-Ping<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.4.</a>&nbsp;
Reverse path Connectivity verification<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.5.</a>&nbsp;
P2MP Considerations<br />
<a href="#anchor12">4.</a>&nbsp;
Performing LSP Traceroute over MPLS-TP LSPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">4.1.</a>&nbsp;
LSP Traceroute with IP encapsulation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#lsp-ping-trace">4.2.</a>&nbsp;
Non-IP based LSP Traceroute<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">4.2.1.</a>&nbsp;
Ingress node procedure for sending echo request packets<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">4.2.2.</a>&nbsp;
Ingress node procedure for receiving echo response packets<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">4.2.3.</a>&nbsp;
Transit and egress node procedure<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">4.3.</a>&nbsp;
P2MP Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">4.4.</a>&nbsp;
ECMP Considerations<br />
<a href="#anchor19">5.</a>&nbsp;
Applicability<br />
<a href="#anchor20">6.</a>&nbsp;
Security Considerations<br />
<a href="#anchor21">7.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor22">8.</a>&nbsp;
Contributing Authors<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>LSP-Ping <a class='info' href='#RFC4379'>[RFC4379]<span> (</span><span class='info'>Kompella, K. and G. Swallow, &ldquo;Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures,&rdquo; February&nbsp;2006.</span><span>)</span></a> is an OAM mechanism for MPLS
      LSPs. This document describes extensions to LSP-Ping so that LSP-Ping
      can be used for on-demand monitoring of MPLS-TP LSPs. It also clarifies
      the procedures to be used for processing the OAM packets. This document
      describes how LSP-Ping can be used to perform on-demand Connectivity
      Verification, Route Tracing and Adjacency functions required in <a class='info' href='#RFC5860'>[RFC5860]<span> (</span><span class='info'>Vigoureux, M., Ward, D., and M. Betts, &ldquo;Requirements for Operations, Administration, and Maintenance (OAM) in MPLS Transport Networks,&rdquo; May&nbsp;2010.</span><span>)</span></a> and specified in
      <a class='info' href='#I-D.ietf-mpls-tp-oam-framework'>[I&#8209;D.ietf&#8209;mpls&#8209;tp&#8209;oam&#8209;framework]<span> (</span><span class='info'>Allan, D., Busi, I., Niven-Jenkins, B., Fulignoli, A., Hernandez-Valencia, E., Levrau, L., Mohan, D., Sestito, V., Sprecher, N., Helvoort, H., Vigoureux, M., Weingarten, Y., and R. Winter, &ldquo;MPLS-TP OAM Framework,&rdquo; July&nbsp;2010.</span><span>)</span></a>.
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Conventions used in this document</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
LSP-Ping for MPLS-TP LSPs using IP encapsulation</h3>

<p>LSP-Ping requires IP addressing on the egress and transit LSRs for
        performing OAM on MPLS signaled LSPs and pseudowires. In particular,
        in these cases the LSP-Ping packets generated by an ingress LSR are
        encapsulated in an IP/UDP header with the destination address from the
        127/8 range and then encapsulated in the MPLS label stack (<a class='info' href='#RFC4379'>[RFC4379]<span> (</span><span class='info'>Kompella, K. and G. Swallow, &ldquo;Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures,&rdquo; February&nbsp;2006.</span><span>)</span></a> , <a class='info' href='#RFC5884'>[RFC5884]<span> (</span><span class='info'>Aggarwal, R., Kompella, K., Nadeau, T., and G. Swallow, &ldquo;Bidirectional Forwarding Detection (BFD) for MPLS Label Switched Paths (LSPs),&rdquo; June&nbsp;2010.</span><span>)</span></a>).
        Egress LSRs use the presence of the 127/8 destination address to
        identify the OAM packets and rely further on the UDP port number to
        determine whether the packet is a LSP-Ping packet. It is to be noted
        that this determination does not require IP forwarding capabilities.
        It requires the presence of an IP host stack which enables egress LSRs
        to process packets with a destination address from the 127/8 range.
        <a class='info' href='#RFC1122'>[RFC1122]<span> (</span><span class='info'>Braden, R., &ldquo;Requirements for Internet Hosts - Communication Layers,&rdquo; October&nbsp;1989.</span><span>)</span></a> allocates the 127/8 range as "Internal
        host loopback address" and <a class='info' href='#RFC1812'>[RFC1812]<span> (</span><span class='info'>Baker, F., &ldquo;Requirements for IP Version 4 Routers,&rdquo; June&nbsp;1995.</span><span>)</span></a> states that
        "a router SHOULD NOT forward, except over a loopback interface, any
        packet that has a destination address on network 127".
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
LSP-Ping for MPLS-TP LSPs using non-IP encapsulation</h3>

<p>In certain MPLS-TP deployment scenarios IP addressing might not be
        available or it may be preferred to use non-IP encapsulation for
        LSP-Ping and BFD packets. In such scenarios, LSP-Ping SHOULD be run
        without IP addressing, using the ACH channel type specified in <a class='info' href='#I-D.ietf-mpls-tp-lsp-ping-bfd-procedures'>[I&#8209;D.ietf&#8209;mpls&#8209;tp&#8209;lsp&#8209;ping&#8209;bfd&#8209;procedures]<span> (</span><span class='info'>Bahadur, N., Aggarwal, R., Ward, D., Nadeau, T., Sprecher, N., and Y. Weingarten, &ldquo;LSP-Ping and BFD encapsulation over ACH,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</p>
<p><a class='info' href='#lsp-ping-ping'>Section&nbsp;3.3<span> (</span><span class='info'>Non-IP based LSP-Ping</span><span>)</span></a> and <a class='info' href='#lsp-ping-trace'>Section&nbsp;4.2<span> (</span><span class='info'>Non-IP based LSP Traceroute</span><span>)</span></a> describe the theory of operation for
        performing LSP-Ping over MPLS-TP LSPs with a non-IP encapsulation.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
LSP-Ping extensions</h3>

<a name="dsmap-addr-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
New address type for Downstream Mapping TLV</h3>

<p><a class='info' href='#RFC4379'>[RFC4379]<span> (</span><span class='info'>Kompella, K. and G. Swallow, &ldquo;Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures,&rdquo; February&nbsp;2006.</span><span>)</span></a> defines the Downstream Mapping TLV.
        This document defines the following new Address type which is added to
        the Downstream Mapping TLV:
</p><br /><hr class="insert" />
<a name="dsmap-new-addr-type"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      Type #        Address Type           K Octets
      ------        --------------         --------
          0         Not Applicable                8

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Downstream Mapping TLV new address type&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The new address type indicates that no address is present in the
        Downstream Mapping TLV. Multipath type SHOULD be set to 0 (no multipath)
        when using this address type.
</p>
<p>When this address type is used, on receipt of a LSP-Ping echo
        request, interface verification MUST be bypassed. Thus the receiving
        node SHOULD only perform mpls label control-plane/data-plane
        consistency checks.
</p>
<p>The new address type is also applicable to the Detailed Downstream
        Mapping TLV defined in <a class='info' href='#I-D.ietf-mpls-lsp-ping-enhanced-dsmap'>[I&#8209;D.ietf&#8209;mpls&#8209;lsp&#8209;ping&#8209;enhanced&#8209;dsmap]<span> (</span><span class='info'>Bahadur, N., Kompella, K., and G. Swallow, &ldquo;Mechanism for performing LSP-Ping over MPLS tunnels,&rdquo; May&nbsp;2010.</span><span>)</span></a>.
</p>
<a name="src-addr-tlv"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Source Address TLV</h3>

<p>When sending LSP-Ping packets using ACH, without IP encapsulation,
        there MAY be a need to identify the source address of the packet. This
        source address will be specified via the Source Address TLV, being
        defined in <a class='info' href='#I-D.ietf-mpls-tp-ach-tlv'>[I&#8209;D.ietf&#8209;mpls&#8209;tp&#8209;ach&#8209;tlv]<span> (</span><span class='info'>Boutros, S., Bryant, S., Sivabalan, S., Swallow, G., Ward, D., and V. Manral, &ldquo;Definition of ACH TLV Structure,&rdquo; March&nbsp;2010.</span><span>)</span></a>. A LSP-Ping
        packet MUST NOT include more than 1 source address TLV. The source
        address MUST specify the address of the originator of the packet. If
        more than 1 such TLV is present in a LSP-Ping request packet, then an
        error of 1 (Malformed echo request received), [ Section 3.1 <a class='info' href='#RFC4379'>[RFC4379]<span> (</span><span class='info'>Kompella, K. and G. Swallow, &ldquo;Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures,&rdquo; February&nbsp;2006.</span><span>)</span></a> ], MUST be returned, if it is possible to
        unambiguously identify the source of the packet.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
MEP and MIP Identifier</h3>

<p>When sending LSP-Ping packets using ACH, there MAY be a need to
        identify the maintenance end point (MEP) and/or the maintenance
        intermediate point (MIP) being monitored <a class='info' href='#I-D.ietf-mpls-tp-rosetta-stone'>[I&#8209;D.ietf&#8209;mpls&#8209;tp&#8209;rosetta&#8209;stone]<span> (</span><span class='info'>Sprecher, N., &ldquo;A Thesaurus for the Terminology used in Multiprotocol Label Switching Transport Profile (MPLS-TP) drafts/RFCs and ITU-T's Transport Network Recommendations.,&rdquo; May&nbsp;2010.</span><span>)</span></a>. The MEP/MIP
        identifiers defined in <a class='info' href='#I-D.ietf-mpls-tp-identifiers'>[I&#8209;D.ietf&#8209;mpls&#8209;tp&#8209;identifiers]<span> (</span><span class='info'>Bocci, M. and G. Swallow, &ldquo;MPLS-TP Identifiers,&rdquo; July&nbsp;2010.</span><span>)</span></a> MAY be carried in the
        ACH TLVs <a class='info' href='#I-D.ietf-mpls-tp-ach-tlv'>[I&#8209;D.ietf&#8209;mpls&#8209;tp&#8209;ach&#8209;tlv]<span> (</span><span class='info'>Boutros, S., Bryant, S., Sivabalan, S., Swallow, G., Ward, D., and V. Manral, &ldquo;Definition of ACH TLV Structure,&rdquo; March&nbsp;2010.</span><span>)</span></a> for
        identification. Only one identifier (MEP or MIP) MUST be present in a
        packet. The MEP/MIP identifiers associated with the packet MUST be
        checked for the MPLS-TP LSP path/section that is being monitored. If
        the identifier does not match the LSP path/section, then the packet
        MUST be dropped.
</p>
<a name="static-fecs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Identifying Statically provisioned LSPs and PWs</h3>

<p><a class='info' href='#RFC4379'>[RFC4379]<span> (</span><span class='info'>Kompella, K. and G. Swallow, &ldquo;Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures,&rdquo; February&nbsp;2006.</span><span>)</span></a> specifies how an MPLS LSP under test
        may be identified in an echo request. A Target FEC Stack TLV is used
        to identify the LSP. In order to identify a statically provisioned LSP
        and PW, new target FEC stack sub-TLVs are being defined. The new
        sub-TLVs are assigned sub-type identifiers as follows, and are
        described in the following sections.
</p><br /><hr class="insert" />
<a name="new-fec-types"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     Sub-Type #       Length              Value Field
      ----------       ------              -----------
             TBD         24                Static LSP
             TBD         24                Static Pseudowire
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: New target FEC sub-types&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4.1"></a><h3>2.4.1.&nbsp;
Static LSP Sub-TLV</h3>

<p>The format of the Static LSP sub-TLV value field is specified in
          the following figure. The value fields are taken from the
          definitions in <a class='info' href='#I-D.ietf-mpls-tp-identifiers'>[I&#8209;D.ietf&#8209;mpls&#8209;tp&#8209;identifiers]<span> (</span><span class='info'>Bocci, M. and G. Swallow, &ldquo;MPLS-TP Identifiers,&rdquo; July&nbsp;2010.</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="static-lsp-fec"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                       Source Global ID                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                        Source Node ID                         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Source Tunnel Number      |        LSP Number             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                    Destination Global ID                      |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     Destination Node ID                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   Destination Tunnel Number   |        Must be Zero           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Static LSP FEC Sub-TLV&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The Source global ID and Destination Global ID MAY be set to 0.
          When set to zero, the field is not applicable.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4.2"></a><h3>2.4.2.&nbsp;
Static Pseudowire Sub-TLV</h3>

<p>The format of the Static PW sub-TLV value field is specified in
          the following figure.
</p><br /><hr class="insert" />
<a name="static-pw-fec"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                       Source Global ID                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                        Source Node ID                         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                         Source AC-ID                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                    Destination Global ID                      |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     Destination Node ID                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     Destination AC-ID                         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Static PW FEC Sub-TLV&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The Source global ID and Destination Global ID MAY be set to 0.
          When set to zero, the field is not applicable. The Global ID and
          Node ID fields are taken from the definitions in <a class='info' href='#I-D.ietf-mpls-tp-identifiers'>[I&#8209;D.ietf&#8209;mpls&#8209;tp&#8209;identifiers]<span> (</span><span class='info'>Bocci, M. and G. Swallow, &ldquo;MPLS-TP Identifiers,&rdquo; July&nbsp;2010.</span><span>)</span></a>. The AC-ID definitions
          are taken from <a class='info' href='#RFC5003'>[RFC5003]<span> (</span><span class='info'>Metz, C., Martini, L., Balus, F., and J. Sugimoto, &ldquo;Attachment Individual Identifier (AII) Types for Aggregation,&rdquo; September&nbsp;2007.</span><span>)</span></a>.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Performing LSP-Ping over MPLS-TP LSPs</h3>

<p>This section specifies how LSP-Ping ping can be used in the context
      of MPLS-TP LSPs. The LSP-Ping ping function meets the Connectivity
      Verification requirement specified in <a class='info' href='#RFC5860'>[RFC5860]<span> (</span><span class='info'>Vigoureux, M., Ward, D., and M. Betts, &ldquo;Requirements for Operations, Administration, and Maintenance (OAM) in MPLS Transport Networks,&rdquo; May&nbsp;2010.</span><span>)</span></a>. This function SHOULD
      be performed on-demand. This function SHOULD be performed between End
      Points (MEPs) and Intermediate Points (MIPs) of PWs and LSPs, and
      between End Points of PWs, LSPs and Sections. In order for the LSP-Ping
      packet to be processed at the desired MIP, the TTL of the MPLS label
      should be set such that it expires at the MIP to be probed.
</p>
<a name="ip-lsp-ping"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
LSP-Ping with IP encapsulation</h3>

<p>LSP-Ping packets, as specified in <a class='info' href='#RFC4379'>[RFC4379]<span> (</span><span class='info'>Kompella, K. and G. Swallow, &ldquo;Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures,&rdquo; February&nbsp;2006.</span><span>)</span></a>, are
        sent over the MPLS LSP for which OAM is being performed and contain an
        IP/UDP packet within them. The IP header is not used for forwarding
        (since LSP forwarding is done using MPLS label switching). The IP
        header is used mainly for addressing and can be used in the context of
        MPLS-TP LSPs. This form of LSP-Ping OAM MUST be supported for MPLS-TP
        LSPs when IP addressing is in use.
</p>
<p>The LSP-Ping echo response message MUST be sent on the reverse path
        of the LSP. The reply MUST contain IP/UDP headers followed by the
        LSP-Ping payload. The destination address in the IP header MUST be set
        to that of the sender of the echo request message. The source address
        in the IP address MUST be set to a valid address of the replying
        node.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
LSP-Ping with IP encapsulation, over ACH</h3>

<p>IP encapsulated LSP-Ping packets MAY be sent over the MPLS LSP 
        using control channel (ACH).  IP ACH type specified in 
        <a class='info' href='#RFC4385'>[RFC4385]<span> (</span><span class='info'>Bryant, S., Swallow, G., Martini, L., and D. McPherson, &ldquo;Pseudowire Emulation Edge-to-Edge (PWE3) Control Word for Use over an MPLS PSN,&rdquo; February&nbsp;2006.</span><span>)</span></a> MUST be used in such a case. The IP
        header is used mainly for addressing and can be used in the context of
        MPLS-TP LSPs.
</p>
<p>The LSP-Ping echo response message SHOULD be sent on the reverse path
        of the LSP using ACH and SHOULD be IP encapsulated. 
        The destination address in the IP header MUST be set
        to that of the sender of the echo request message. The source address
        in the IP address MUST be set to a valid address of the replying
        node.
</p>
<a name="lsp-ping-ping"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Non-IP based LSP-Ping</h3>

<p>The OAM procedures defined in <a class='info' href='#RFC4379'>[RFC4379]<span> (</span><span class='info'>Kompella, K. and G. Swallow, &ldquo;Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures,&rdquo; February&nbsp;2006.</span><span>)</span></a>
        require the use of IP addressing and in some cases IP routing to
        perform OAM functions. When the ACH header is used, IP addressing and
        routing is not needed. This section describes procedures for
        performing lsp-ping without a dependency on IP addressing and
        routing.
</p>
<p>When using LSP-Ping over the ACH header, the LSP-Ping Reply mode
        <a class='info' href='#RFC4379'>[RFC4379]<span> (</span><span class='info'>Kompella, K. and G. Swallow, &ldquo;Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures,&rdquo; February&nbsp;2006.</span><span>)</span></a> in the LSP-Ping echo request MUST be
        set to 4 (Reply via application level control channel).
</p>
<p>The ingress node MAY attach a Source Address TLV (<a class='info' href='#src-addr-tlv'>Section&nbsp;2.2<span> (</span><span class='info'>Source Address TLV</span><span>)</span></a>) to identify the node originating the
        request.
</p>
<p>The LSP-Ping reply message MUST be sent on the reverse path of the
        LSP using ACH. The LSP-Ping payload MUST directly follow the ACH
        header (and any ACH TLVs) and no IP and/or UDP headers MUST be
        attached. The responding node MAY attach a Source Address TLV to
        identify the node sending the response.
</p>
<p>If a node receives an MPLS echo request packet over ACH, without
        IP/UDP headers and if that node does not have a return MPLS LSP path
        to the echo request source, then the node MUST drop the echo request
        packet and not attempt to send a response.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Reverse path Connectivity verification</h3>

<p>For bi-directional LSPs, when the egress sends the echo response,
        the egress MAY attach the target FEC stack TLV <a class='info' href='#RFC4379'>[RFC4379]<span> (</span><span class='info'>Kompella, K. and G. Swallow, &ldquo;Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures,&rdquo; February&nbsp;2006.</span><span>)</span></a> in the echo response. The ingress (on receipt
        of the echo response) can use the FEC stack TLV to perform reverse
        path connectivity verification. For co-routed bi-directional LSPs, the
        target FEC stack used for LSP-Ping will be the same in both the
        forward and reverse path of the LSP. For associated bi-directional
        LSPs, the target FEC stack will be different for the reverse path.
</p>
<p>On receipt of the echo response, the ingress MUST perform the
        following checks:
</p>
<p></p>
<ol class="text">
<li>Perform interface and label-stack validation to ensure that the
            packet is received on the reverse path of the bi-directional
            LSP
</li>
<li>If the target FEC stack is present in the echo response, then
            perform FEC validation.
</li>
</ol><p>If any of the validations fail, then the ingress MUST drop
        the echo response and report an error.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
P2MP Considerations</h3>

<p><a class='info' href='#I-D.ietf-mpls-p2mp-lsp-ping'>[I&#8209;D.ietf&#8209;mpls&#8209;p2mp&#8209;lsp&#8209;ping]<span> (</span><span class='info'>Yasukawa, S., Farrel, A., Ali, Z., Swallow, G., Nadeau, T., and S. Saxena, &ldquo;Detecting Data Plane Failures in Point-to-Multipoint Multiprotocol Label Switching (MPLS) - Extensions to LSP Ping,&rdquo; March&nbsp;2010.</span><span>)</span></a> describes how
        LSP-Ping can be used for OAM on P2MP LSPs with IP encapsulation. This
        MUST be supported for MPLS-TP P2MP LSPs when IP addressing is used.
        When IP addressing is not used, then the procedures described in <a class='info' href='#lsp-ping-ping'>Section&nbsp;3.3<span> (</span><span class='info'>Non-IP based LSP-Ping</span><span>)</span></a> can be applied to P2MP MPLS-TP LSPs as
        well.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Performing LSP Traceroute over MPLS-TP LSPs</h3>

<p>This section specifies how LSP-Ping traceroute can be used in the
      context of MPLS-TP LSPs. The LSP-Ping traceroute function meets the
      Adjacency and Route Tracing requirement specified in <a class='info' href='#RFC5860'>[RFC5860]<span> (</span><span class='info'>Vigoureux, M., Ward, D., and M. Betts, &ldquo;Requirements for Operations, Administration, and Maintenance (OAM) in MPLS Transport Networks,&rdquo; May&nbsp;2010.</span><span>)</span></a>. This function SHOULD
      be performed on-demand. This function SHOULD be performed between End
      Points and Intermediate Points of PWs and LSPs, and between End Points
      of PWs, LSPs and Sections.
</p>
<p>When performing lsp-ping traceroute, the ingress node inserts a
      Downstream Mapping TLV to get the downstream node information and to
      enable LSP verification along the transit nodes. The Downstream Mapping
      TLV can be used as is for performing the traceroute. If IP addressing is
      not in use, then the Address Type field in the Downstream Mapping TLV
      can be set to "Not applicable" (<a class='info' href='#dsmap-addr-type'>Section&nbsp;2.1<span> (</span><span class='info'>New address type for Downstream Mapping TLV</span><span>)</span></a>).
      The Downstream Mapping TLV address type field can be extended to include
      other address types as need be.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
LSP Traceroute with IP encapsulation</h3>

<p>The mechanics of LSP-Ping traceroute are similar to those described
        for ping in <a class='info' href='#ip-lsp-ping'>Section&nbsp;3.1<span> (</span><span class='info'>LSP-Ping with IP encapsulation</span><span>)</span></a>. Traceroute packets
        sent by the LSP ingress MUST follow procedures described in <a class='info' href='#RFC4379'>[RFC4379]<span> (</span><span class='info'>Kompella, K. and G. Swallow, &ldquo;Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures,&rdquo; February&nbsp;2006.</span><span>)</span></a>. This form of LSP-Ping OAM MUST be supported
        for MPLS-TP LSPs, when IP addressing is used.
</p>
<a name="lsp-ping-trace"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Non-IP based LSP Traceroute</h3>

<p>This section describes the procedures for performing LSP traceroute
        when using the ACH header and without any dependency on IP addressing.
        The procedures specified in <a class='info' href='#lsp-ping-ping'>Section&nbsp;3.3<span> (</span><span class='info'>Non-IP based LSP-Ping</span><span>)</span></a> with
        regards to Source Address TLV, MEP/MIP identifiers apply to LSP
        traceroute as well.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.1"></a><h3>4.2.1.&nbsp;
Ingress node procedure for sending echo request packets</h3>

<p>Traceroute packets sent by the LSP ingress MUST adhere to the
          format described in <a class='info' href='#lsp-ping-ping'>Section&nbsp;3.3<span> (</span><span class='info'>Non-IP based LSP-Ping</span><span>)</span></a>. MPLS-TTL
          expiry (as described in <a class='info' href='#RFC4379'>[RFC4379]<span> (</span><span class='info'>Kompella, K. and G. Swallow, &ldquo;Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures,&rdquo; February&nbsp;2006.</span><span>)</span></a>) will be used
          to direct the packets to specific nodes along the LSP path.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2"></a><h3>4.2.2.&nbsp;
Ingress node procedure for receiving echo response packets</h3>

<p>The LSP-Ping traceroute responses will be received on the LSP
          itself and the presence of an ACH header with channel type of
          LSP-Ping is an indicator that the packet contains LSP-ping
          payload.
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.3"></a><h3>4.2.3.&nbsp;
Transit and egress node procedure</h3>

<p>When a echo request reaches the transit or egress, the presence
          of the ACH channel type of LSP-Ping will indicate that the packet
          contains LSP-Ping data. The LSP-Ping data, the label stack and the
          MEP/MIP identifier should be sufficient to identify the LSP
          associated with the echo request packet. If there is an error and
          the node is unable to identify the LSP on which the echo response
          would to be sent, the node MUST drop the echo request packet and not
          send any response back. All responses MUST always be sent on a LSP
          path using the ACH header and ACH channel type of LSP-Ping.
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
P2MP Considerations</h3>

<p><a class='info' href='#I-D.ietf-mpls-p2mp-lsp-ping'>[I&#8209;D.ietf&#8209;mpls&#8209;p2mp&#8209;lsp&#8209;ping]<span> (</span><span class='info'>Yasukawa, S., Farrel, A., Ali, Z., Swallow, G., Nadeau, T., and S. Saxena, &ldquo;Detecting Data Plane Failures in Point-to-Multipoint Multiprotocol Label Switching (MPLS) - Extensions to LSP Ping,&rdquo; March&nbsp;2010.</span><span>)</span></a> describes how
        LSP-Ping can be used for OAM on P2MP LSPs. This MUST be supported for
        MPLS-TP P2MP LSPs when IP addressing is used. When IP addressing is
        not used, then the procedures described in <a class='info' href='#lsp-ping-trace'>Section&nbsp;4.2<span> (</span><span class='info'>Non-IP based LSP Traceroute</span><span>)</span></a> can be applied to P2MP MPLS-TP LSPs as
        well.
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
ECMP Considerations</h3>

<p>LSP-Ping using ACH SHOULD NOT be used when there is ECMP (equal
        cost multiple paths) for a given LSP. The addition of the additional
        ACH header may modify the hashing behavior for OAM packets which may
        result in incorrect monitoring of path taken by data traffic.
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Applicability</h3>

<p>The non-IP addressing based procedures specified in this document
      apply only to MPLS-TP LSPs. They also apply to PWs when IP encapsulation
      is not desired. However, when IP addressing is used, as in non MPLS-TP
      LSPs, procedures specified in <a class='info' href='#RFC4379'>[RFC4379]<span> (</span><span class='info'>Kompella, K. and G. Swallow, &ldquo;Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures,&rdquo; February&nbsp;2006.</span><span>)</span></a> MUST be
      used.
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>The draft does not introduce any new security considerations. Those
      discussed in <a class='info' href='#RFC4379'>[RFC4379]<span> (</span><span class='info'>Kompella, K. and G. Swallow, &ldquo;Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures,&rdquo; February&nbsp;2006.</span><span>)</span></a> are also applicable to this
      document.
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p><a class='info' href='#static-fecs'>Section&nbsp;2.4<span> (</span><span class='info'>Identifying Statically provisioned LSPs and PWs</span><span>)</span></a> defines 2 new sub-TLV types for
      inclusion within the LSP Ping <a class='info' href='#RFC4379'>[RFC4379]<span> (</span><span class='info'>Kompella, K. and G. Swallow, &ldquo;Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures,&rdquo; February&nbsp;2006.</span><span>)</span></a> Target FEC
      Stack TLV.
</p>
<p>IANA is requested to assign sub-type values to the following sub-TLVs
      from the "Multiprotocol Label Switching Architecture (MPLS) Label
      Switched Paths (LSPs) Parameters - TLVs" registry, "TLVs and sub-TLVs"
      sub-registry.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
- Static LSP
- Static Pseudowire

</pre></div>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Contributing Authors</h3>

<p>The following individuals also contributed to this document:</p>
<ul class="text">
<li>Thomas D. Nadeau, BT
</li>
<li>Nurit Sprecher, Nokia Siemens Networks
</li>
<li>Yaacov Weingarten, Nokia Siemens Networks
</li>
</ul>

<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mpls-tp-lsp-ping-bfd-procedures">[I-D.ietf-mpls-tp-lsp-ping-bfd-procedures]</a></td>
<td class="author-text">Bahadur, N., Aggarwal, R., Ward, D., Nadeau, T., Sprecher, N., and Y. Weingarten, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-lsp-ping-bfd-procedures-00.txt">LSP-Ping and BFD encapsulation over ACH</a>,&rdquo; draft-ietf-mpls-tp-lsp-ping-bfd-procedures-00 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-lsp-ping-bfd-procedures-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4379">[RFC4379]</a></td>
<td class="author-text">Kompella, K. and G. Swallow, &ldquo;<a href="http://tools.ietf.org/html/rfc4379">Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures</a>,&rdquo; RFC&nbsp;4379, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4379.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4385">[RFC4385]</a></td>
<td class="author-text">Bryant, S., Swallow, G., Martini, L., and D. McPherson, &ldquo;<a href="http://tools.ietf.org/html/rfc4385">Pseudowire Emulation Edge-to-Edge (PWE3) Control Word for Use over an MPLS PSN</a>,&rdquo; RFC&nbsp;4385, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4385.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mpls-lsp-ping-enhanced-dsmap">[I-D.ietf-mpls-lsp-ping-enhanced-dsmap]</a></td>
<td class="author-text">Bahadur, N., Kompella, K., and G. Swallow, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-lsp-ping-enhanced-dsmap-05.txt">Mechanism for performing LSP-Ping over MPLS tunnels</a>,&rdquo; draft-ietf-mpls-lsp-ping-enhanced-dsmap-05 (work in progress), May&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-lsp-ping-enhanced-dsmap-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mpls-p2mp-lsp-ping">[I-D.ietf-mpls-p2mp-lsp-ping]</a></td>
<td class="author-text">Yasukawa, S., Farrel, A., Ali, Z., Swallow, G., Nadeau, T., and S. Saxena, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-p2mp-lsp-ping-10.txt">Detecting Data Plane Failures in Point-to-Multipoint Multiprotocol Label Switching (MPLS) - Extensions to LSP Ping</a>,&rdquo; draft-ietf-mpls-p2mp-lsp-ping-10 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-p2mp-lsp-ping-10.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mpls-tp-ach-tlv">[I-D.ietf-mpls-tp-ach-tlv]</a></td>
<td class="author-text">Boutros, S., Bryant, S., Sivabalan, S., Swallow, G., Ward, D., and V. Manral, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-ach-tlv-02.txt">Definition of ACH TLV Structure</a>,&rdquo; draft-ietf-mpls-tp-ach-tlv-02 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-ach-tlv-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mpls-tp-identifiers">[I-D.ietf-mpls-tp-identifiers]</a></td>
<td class="author-text">Bocci, M. and G. Swallow, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-identifiers-02.txt">MPLS-TP Identifiers</a>,&rdquo; draft-ietf-mpls-tp-identifiers-02 (work in progress), July&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-identifiers-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mpls-tp-oam-framework">[I-D.ietf-mpls-tp-oam-framework]</a></td>
<td class="author-text">Allan, D., Busi, I., Niven-Jenkins, B., Fulignoli, A., Hernandez-Valencia, E., Levrau, L., Mohan, D., Sestito, V., Sprecher, N., Helvoort, H., Vigoureux, M., Weingarten, Y., and R. Winter, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-oam-framework-07.txt">MPLS-TP OAM Framework</a>,&rdquo; draft-ietf-mpls-tp-oam-framework-07 (work in progress), July&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-oam-framework-07.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mpls-tp-rosetta-stone">[I-D.ietf-mpls-tp-rosetta-stone]</a></td>
<td class="author-text">Sprecher, N., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-rosetta-stone-02.txt">A Thesaurus for the Terminology used in Multiprotocol Label Switching Transport Profile (MPLS-TP) drafts/RFCs and ITU-T's Transport Network Recommendations.</a>,&rdquo; draft-ietf-mpls-tp-rosetta-stone-02 (work in progress), May&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-rosetta-stone-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1122">[RFC1122]</a></td>
<td class="author-text"><a href="mailto:Braden@ISI.EDU">Braden, R.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1122">Requirements for Internet Hosts - Communication Layers</a>,&rdquo; STD&nbsp;3, RFC&nbsp;1122, October&nbsp;1989 (<a href="http://www.rfc-editor.org/rfc/rfc1122.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1812">[RFC1812]</a></td>
<td class="author-text"><a href="mailto:fred@cisco.com">Baker, F.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1812">Requirements for IP Version 4 Routers</a>,&rdquo; RFC&nbsp;1812, June&nbsp;1995 (<a href="http://www.rfc-editor.org/rfc/rfc1812.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5003">[RFC5003]</a></td>
<td class="author-text">Metz, C., Martini, L., Balus, F., and J. Sugimoto, &ldquo;<a href="http://tools.ietf.org/html/rfc5003">Attachment Individual Identifier (AII) Types for Aggregation</a>,&rdquo; RFC&nbsp;5003, September&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5003.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5860">[RFC5860]</a></td>
<td class="author-text">Vigoureux, M., Ward, D., and M. Betts, &ldquo;<a href="http://tools.ietf.org/html/rfc5860">Requirements for Operations, Administration, and Maintenance (OAM) in MPLS Transport Networks</a>,&rdquo; RFC&nbsp;5860, May&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5860.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5884">[RFC5884]</a></td>
<td class="author-text">Aggarwal, R., Kompella, K., Nadeau, T., and G. Swallow, &ldquo;<a href="http://tools.ietf.org/html/rfc5884">Bidirectional Forwarding Detection (BFD) for MPLS Label Switched Paths (LSPs)</a>,&rdquo; RFC&nbsp;5884, June&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5884.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nitin Bahadur</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Juniper Networks, Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1194 N. Mathilda Avenue</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sunnyvale, CA  94089</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 408 745 2000</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:nitinb@juniper.net">nitinb@juniper.net</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="www.juniper.net">www.juniper.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Rahul Aggarwal</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Juniper Networks, Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1194 N. Mathilda Avenue</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sunnyvale, CA  94089</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 408 745 2000</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:rahul@juniper.net">rahul@juniper.net</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="www.juniper.net">www.juniper.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sami Boutros</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems, Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">3750 Cisco Way</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Jose, CA  95134</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:sboutros@cisco.com">sboutros@cisco.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href=""></a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Eric Gray</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ericsson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">900 Chelmsford Street</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lowell, MA  01851</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 978 275 7470</td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:eric.gray@ericsson.com">eric.gray@ericsson.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href=""></a></td></tr>
</table>
</body></html>
