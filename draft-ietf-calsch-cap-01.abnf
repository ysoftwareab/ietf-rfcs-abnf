template-type=Calendar-Access-Protocol

template-version=0.0

template-description=
template-url-syntax=
url-options     =       url-port / url-calendar /
                                        url-user / url-scheme /
                                        url-email / url-upn

url-port        =       "ports=" ports-list
ports-list      =       port / port "," ports-list
port            =       1*DIGIT

url-calendar    =       "CalID=" calid-list
calid-list      =       CalID / CalID "," CalID

url-user        =       "user=" user-list
user-list       =       user / user "," user-list
user            =       # A CU as defined by
                                     # the CS implementation,

url-scheme      =       "scheme=" scheme-list
scheme-list     =       scheme / scheme "," scheme-list
scheme          =       CAP # Only CAP supported at
                                            # this time.

url-email       =       "mailto=" email-list
email-list      =       email / email "," email-list
email           =       # An RFC822 email address

url-upn         =       "mailto=" upn-list
upn-list        =       upn / upn "," upn-list
upn             =       # An RFC822 upn address

URL =
Attributes = (location-description=Net iCal server1),
url-options = url-port / url-calendar / url-user \0D
url-port = "ports=" ports-list \0D
ports-list = port / port "," ports-list \0D
port = 1*DIGIT \0D
url-calendar = "CalID=" calid-list \0D
calid-list = CalID / CalID "," CalID \0D
url-user = "user=" user-list \0D
user-list = user / user "," user-list \0D
url-scheme = "scheme=" scheme-list \0D
scheme-list = scheme / scheme "," scheme-list \0D
scheme = CAP \0D
url-email = "mailto=" email-list \0D
email-list = email / email "," email-list \0D
url-upn = "mailto=" upn-list \0D
upn-list = upn / upn "," upn-list\0D)

SEARCH  = "BEGIN:VQUERY" CRLF
             [scope] [maxresults] [maxsize] querycomp
             "END:VQUERY" CRLF

scope           = "SCOPE:" comp-name ("," comp-name)*

comp-name       = "VEVENT" / "VTODO" / "VJOURNAL" / "VTIMEZONE"
                   / "VALARM" / "VFREEBUSY" / iana-name / x-name

maxresults      = integer

maxsize         = integer

querycomp       = (query) / (queryname query) / queryname

queryname       = "QUERYNAME:" text

query           = "QUERY:" queryrule

queryrule       = select where orderby ...

select          = <any valid SQL string that goes into a SELECT clause>

where           = <any valid SQL string that goes into a WHERE clause>

orderby         = <any valid SQL string that goes into a ORDERBY
                     clause>

OPTINFO="CMDID:abcde"
created   = "CREATED" creaparam ":" date-time CRLF creaparam = (";"
last-mod  = "LAST-MODIFIED" lstparam ":" date-time CRLF lstparam  =
transp    = "TRANSP" tranparam ":" transvalue CRLF tranparam = *(";"
rights  = [princ] (policy / carref / cardef) CRLF

princ = "UPN" "=" (text / all / "OWNER" / "NONOWNER")

policy  = ";" "POLICY" "=" policyname

policyname      = "READBUSYTIMEINFO" / "ACTONBEHALFOF" /
carref  = ";" "CARREF" "=" text *("," text)

cardef  = action object

action  = ";" "ACTION" "=" act-type *("," act-type)

act-type        = ("CREATE" / "MODIFY" / "DELETE" / "READ" / all)

object  = ";" "OBJECT" "=" (csprop *("," csprop) [propvalue])
                   / (calprop *("," calprop) [propvalue])
                   / (component *("," component)) [compvalue]
                   / (compprop *("," compprop) [propvalue])
                   / (compparam *("," compparam) [paramvalue])

csprop          = csprop2 / all / iana-name

csprop2         = <any calendar store property defined in [CAP]>

propvalue       = propvalue2 / all / iana-name

propvalue2      = <any value appropriate for the named property>

calprop         = calprop2 / all / iana-name

calprop2        = <any calendar property name defined in [RFC2445] or
                        [CAP]>

component       = component2 / all / iana-name

component2      = <any calendar component defined in [RFC2445] or
                     [CAP]>

compprop        = compprop2 / all / iana-name

compprop2       = <any component property name defined in [RFC2445] or
                        [CAP]>

compparam       = compparm2 / all / iana-name

compparm2       = <any component parameter name defined in [RFC2445] or
                        [CAP]>

compvalue       = ";" "VALUE" "=" ((component2 *("," component2))
                   / all / iana-name)

paramvalue      = paramvalue2 / all / iana-name

paramvalue2     = <any value appropriate for the named parameter>

all             = "ALL"

iana-name       = <A name registered with IANA>

UPN="foo@host.com";ACTION=READ;OBJECT=DTSTART,DTEND

aclc    = "BEGIN" ":" "VCAR" CRLF
                     carprop
             "END" ":" "VCAR" CRLF

carprop = carid 1*(grant / deny)

OBJECT=VCAR,CARID,GRANT,DENY
grant   = "GRANT" rightsparam ":" rights CRLF rightparam      = *(";"
DENY    = "DENY" rightsparam ":" rights CRLF rightsparam      = *(";"
CARID   = "CARID" textparam ":" text CRLF

rstatus    = "REQUEST-STATUS" rstatparam ":"
                statcode [";" statdesc [";" extdata]]

rstatparam = *(
                   ; the following is optional,
                   ; but MUST NOT occur more than once
                   (";" languageparm) /

                   ; the following is optional,
                   ; and MAY occur more than once

                   (";" xparam)

                   )

statcode   = 1*DIGIT *("." 1*DIGIT)
statdesc   = text
extdata    = text
