Networking Working Group                                    J. Martocci
Internet-Draft                                     Johnson Controls Inc.
Intended status: Informational                          Anthony Schoofs
Expires: April 16, 2010                       University College Dublin
                                                       October 16, 2009


               Commercial Building Applications Requirements
              draft-martocci-6lowapp-building-applications-00


Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on April 16, 2010.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.









Martocci, et al.        Expires April 16, 2010                 [Page 1]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009




Abstract

   Building management systems have evolved toward IP communication at
   the enterprise level during the past decade.  IP implementation at
   the real-time control and sensor layers would provide a single
   pervasive protocol usable across the entire system increasing
   flexibility and code reuse.  This document will describe the topology
   of these building networks, the application protocols widely used in
   their deployment and the application use cases.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in (RFC2119).

Table of Contents

   1. Terminology....................................................4
   2. Overview.......................................................5
   3. FMS Topology...................................................6
      3.1. Introduction..............................................6
      3.2. Sensors/Actuators.........................................8
      3.3. Area Controllers..........................................8
      3.4. Zone Controllers..........................................8
      3.5. Building Controllers......................................9
   4. FMS Communication Media........................................9
   5. FMS Communication Protocols...................................10
      5.1. Controller/Sensor/Actuator Communication Protocol........10
      5.2. Enterprise Communication Protocol........................11
         5.2.1. Peer-to-peer Controller Communication...............11
         5.2.2. Enterprise Communication............................11
   6. FMS Device Density............................................12
      6.1. HVAC Device Density......................................12
      6.2. Fire Device Density......................................12
      6.3. Lighting Device Density..................................13
      6.4. Physical Security Device Density.........................13
   7. FMS Installation Methods......................................13
   8. Building Application Use Cases................................14
      8.1. Fire and Smoke Abatement.................................14
      8.2. Evacuation...............................................15
      8.3. Occupancy/shutdown.......................................16
      8.4. Energy Management........................................17
      8.5. Locking and Unlocking the Building.......................17
      8.6. Building Energy Conservation.............................18


Martocci,(et al)        Expires April 16, 2010                 [Page 2]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


   9. Building Requirements.........................................18
      9.1. Additional Commercial Product Requirements...............18
         9.1.1. Wired and Wireless Implementations..................18
         9.1.2. World-wide Applicability............................18
         9.1.3. Energy Harvested Sensors............................18
      9.2. Additional Installation and Commissioning Requirements...18
         9.2.1. Device Setup Time...................................18
         9.2.2. Unavailability of an IT network.....................19
      9.3. Additional Network Requirements..........................19
         9.3.1. TCP/UDP.............................................19
         9.3.2. Data Rate Performance...............................19
         9.3.3. Interference Mitigation.............................19
         9.3.4. Real-time Performance Measures......................19
         9.3.5. Packet Reliability..................................19
   10. Traffic Pattern..............................................20
   11. Open issues..................................................20
   12. Security Considerations......................................21
   13. IANA Considerations..........................................21
   14. Acknowledgments..............................................21
   15. References...................................................21
      15.1. Normative References....................................21
      15.2. Informative References..................................21



























Martocci,(et al)        Expires April 16, 2010                 [Page 3]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


1. Terminology

   For the description of the general terminology used in this
   specification, please see [I-D.ietf-roll-terminology].

   Specific terminology used in this document is defined below:



   Actuator:     A field device that controls and/or modulates a flow
                 of a gas or liquid; or controls electrical
                 distribution.

   BACnet:       Building Automation Control Network.  A ISO
                 application protocol used in facility management
                 systems.

   Channel:      Radio frequency sub-band used to transmit a modulated
                 signal carrying packets.

   DALI:         Digital Addressable Lighting Interface.  A protocol
                 used in lighting systems.

   Fire:         The term used to describe building equipment used to
                 monitor, control and evacuate an internal space in
                 case of a fire situation.  Equipment includes smoke
                 detectors, pull boxes, sprinkler systems and
                 evacuation control.

   Intrusion Protection:   A term used to protect resources from
                 external infiltration.  Intrusion protection systems

   Lighting:     The term used to describe building equipment used to
                 monitor and control an internal or external lighted
                 space.  Equipment includes occupancy sensors, light
                 switches and ballasts.

   Luminaire:    Another term for a light fixture installed in a
                 ceiling.

   Security:     The term used to describe building equipment used to
                 monitor and control occupant and equipment safety
                 inside a building.  Equipment includes window tamper
                 switches, door access systems, infrared detection
                 systems, and video cameras.




Martocci,(et al)        Expires April 16, 2010                 [Page 4]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


2. Overview

   Facility Management systems are deployed in a wide variety of
   commercial building topologies, including single buildings, multi-
   building single site environments such as university campuses and
   widely dispersed multi-building multi-site environments such as
   franchise operations.  These buildings range in size from 100K square
   feet (10k square meters) structures (5 story office buildings), to
   multi-million sqft skyscrapers (110 story Shanghai World Financial
   Center) to complex government facilities (Pentagon). The described
   topology is meant to be the model to be used in all these types of
   environments, but clearly must be tailored to the building class,
   building tenant and vertical market being served.

   The following sections describe the FMS system architecture from the
   lowest layer to the highest layers in the hierarchy.  Each section
   describes the basic functionality of the layer, its networking model,
   power requirements and a brief description of the communication
   requirements.  The entire section references the block diagram noted
   in Figure 1.  This figure depicts six major subsystems comprising an
   FMS.  These subsystems all have layered solutions starting at the
   sensor layer and moving upward in complexity toward the enterprise
   network layer.  While these six subsystems are common to many
   facilities, they are by no means the exhaustive list - a chemical
   facility may require a complete fume hood management system; a
   manufacturing facility may require interfacing to the PLC subsystem;
   or a multi-tenant facility might require a comprehensive power
   management subsystem.  The objective in the architecture is to
   integrate all common functions into the system yet allow maximum
   flexibility to modify these systems and add other subsystems as
   dictated by the customer.

   Commercial buildings have been fitted with pneumatic and subsequently
   electronic communication pathways connecting sensors to their
   controllers for over one hundred years.  Pneumatics were displaced by
   simple electronics and dry contacts in the 1960's.  Smart processor
   based sensors displaced simple contacts in the 1970's.  Localized
   digital control, introduced in the 1980's allowed applications to
   operate independently from the upper layers of the system.  Multi-
   dropped twisted pair sensor/controller communication networks
   displaced high cost cabled networks.

   The 1990's ushered in the use of Ethernet IP networks at the
   enterprise level.  This transition allowed the previously independent
   proprietary communication networks to coexist on the enterprise IP
   LAN network.  This migration reduced installation costs and allowed
   pertinent building data to be injected onto the enterprise


Martocci,(et al)        Expires April 16, 2010                 [Page 5]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


   application suite.  Proprietary protocols were displaced by industry
   standard application protocols such as BACnet for HVAC, DALI for
   Lighting and LON as general backbone.

   Recent economic and technical advances in wireless communication
   allow facilities to increasingly utilize a wireless solution in lieu
   of a wired solution; thereby reducing installation costs while
   maintaining highly reliant communication.  Wireless solutions will be
   adapted from their existing wired counterparts in many of the
   building applications including, but not limited to HVAC, Lighting,
   Physical Security, Fire, and Elevator systems.  These devices will be
   developed to reduce installation costs; while increasing installation
   and retrofit flexibility.  Sensing devices may be battery, scavenged,
   or mains powered.  Actuators and area controllers will be mains
   powered. Today, different networks based on their own standard (e.g.
   BACnet, DALI) do not share cabling, sensors or actuators easily. The
   arrival of IP for building control will change this picture.

   The objective of this draft is to describe topologies, protocols and
   application use cases.  It will describe the application benefits and
   concerns in converting to pervasive IP networks.  It will further
   describe the IP services required to operate these systems.  Finally,
   it will describe how the building data and IT data models might
   converge to allow a free flowing of data on the converged FMS/IT
   network.



3. FMS Topology

3.1. Introduction

   To understand the network systems requirements of an FMS in a
   commercial building, this document uses a framework to describe the
   basic functions and composition of the system.  An FMS is a
   horizontally layered system of sensors, actuators, controllers and
   user interface devices orchestrated to work together over selected
   communication media.  Additionally, an FMS may also be divided
   vertically across alike, but different building subsystems such as
   HVAC, Fire, Security, Lighting, Shutters and Elevator control systems
   as denoted in Figure 1. These distinct areas are termed 'silos'.
   Currently, the separation between the silos is rather sharp. Gateways
   provide connections between the silos to support all encompassing
   applications. With future IP deployment applications will have a flat
   addressing space for accessing all nodes in any silo.




Martocci,(et al)        Expires April 16, 2010                 [Page 6]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


   Much of the makeup of an FMS is optional and installed as required by
   the customer.  These systems are expensive and must be designed to
   allow for incremental purchases as dictated by the customer's budget
   cycle.

   Sensors and actuators have no standalone functionality.  All other
   devices support partial or complete standalone functionality.  These
   devices can optionally be tethered to form a more cohesive system.
   The customer requirements dictate the level of integration within the
   facility.  This architecture provides excellent fault tolerance since
   each node is designed to operate independently but will accept
   overrides from the higher layers when the higher layers are
   available.

   Heating, Ventilation and Air Conditioning (HVAC); Fire; Security and
   Lighting are components that can be tethered together into a cohesive
   set of all encompassing applications tailored to the customer's whim.
   Shutter control is an emerging application domain prevalent in the
   European market.  These major subsystems are connected logically
   through application software called Building Applications.



              +------+ +-----+ +------+ +------+ +------+ +------+

Bldg App'ns   |      | |     | |      | |      | |      | |      |

              |      | |     | |      | |      | |      | |      |

Building Cntl |      | |     | |   S  | |   L  | |   S  | |  E   |

              |      | |     | |   E  | |   I  | |   H  | |  L   |

Zone Control  |  H   | |  F  | |   C  | |   G  | |   U  | |  E   |

              |  V   | |  I  | |   U  | |   H  | |   T  | |  V   |

Area Control  |  A   | |  R  | |   R  | |   T  | |   T  | |  A   |

              |  C   | |  E  | |   I  | |   I  | |   E  | |  T   |

Actuators     |      | |     | |   T  | |   N  | |   R  | |  O   |

              |      | |     | |   Y  | |   G  | |   S  | |  R   |

Sensors       |      | |     | |      | |      | |      | |      |



Martocci,(et al)        Expires April 16, 2010                 [Page 7]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


              +------+ +-----+ +------+ +------+ +------+ +------+

                  Figure 1 - Building Systems and Devices

3.2. Sensors/Actuators

   An FMS may be composed of many functional stacks or silos that are
   interoperably woven together via Building Applications.  Each silo
   has an array of sensors that monitor the environment and actuators
   that effect the environment as determined by the upper layers of the
   FMS topology.  The sensors typically are the leaves of the network
   tree structure providing environmental data into the system.  The
   actuators are the sensors' counterparts modifying the characteristics
   of the system based on the input sensor data and the applications
   deployed.

3.3. Area Controllers

   An area describes a small physical locale within a building,
   typically a room; although public spaces such as hallways and atria
   are also controlled by area controllers.  The HVAC, Security and
   Lighting functions within a building address area or room level
   applications running in the area controllers.  Area controls are fed
   by sensor inputs that monitor the environmental conditions within the
   room.  Common sensors found in many rooms that feed the area
   controllers include temperature, occupancy, lighting load, solar load
   and relative humidity.  Sensors found in specialized rooms (such as
   chemistry labs) might include air flow, pressure, CO2 and CO particle
   sensors.  Room actuation includes temperature setpoint, lights and
   blinds/curtains.

3.4. Zone Controllers

   Zone Control supports a similar set of characteristics as the Area
   Control albeit to an extended space.  A zone is normally a logical
   grouping or functional division of a commercial building.  A zone may
   also coincidentally map to a physical locale such as a floor.

   Zone Control may have direct sensor inputs (smoke detectors for
   fire), controller inputs (room controllers for air-handlers in HVAC)
   or both (door controllers and tamper sensors for security).  Like
   area/room controllers, zone controllers are standalone devices that
   operate independently or may be attached to the larger network for
   more synergistic control.





Martocci,(et al)        Expires April 16, 2010                 [Page 8]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


3.5. Building Controllers

   Building Controllers orchestrate the overall building control.  These
   devices provide higher level functionality such as web servers,
   scheduling, time series data archival, energy monitoring and
   reduction, and alarm management.  Additionally they will cooperate
   with the other silos to provide synergistic applications as noted in
   the use case sections that follow.

4. FMS Communication Media

   Today most FMSs communicate over four media; DALI, EIA-485, Ethernet
   and wireless.

   Sensors, actuators, area controllers, zone controllers, and building
   controllers most often connect via EIA-485 3-wire twisted pair serial
   media operating nominally at 38400 to 76800 baud. This allows runs to
   5000 ft without a repeater.  With the maximum of two repeaters, a
   single communication trunk can serpentine 15000 ft.  Figure 2 defines
   a representative sampling of the devices and protocols of an FMS
   wired network based on BACnet. For lighting the DALI standard
   provides a 5-wire cable containing control and power-supply lines. Up
   to 64 control units can be connected to one line. The maximum
   distance between two directly connected DALI devices is 300m
   operating at 1200 bits/s. In Figure 2 the field bus can be replaced
   with DALI for lighting purposes.

   The HVAC, Fire, Access, Intrusion and Lighting subsystems are
   integrated using LAN based Ethernet technology.  These enterprise
   devices connect to standard Cat-5e through workgroup switches.  WLAN
   communications can replace the Ethernet connection if the application
   can operate within the WLAN performance characteristics.  Currently
   all building controllers support only a RJ-45 connection.  WLAN
   connections require an external wireless bridge.  Multi-building
   sites can also connect onto the facility intranet if the intranet
   performance matches the application requirements.

   Recently sensors, area controllers and zone controllers have been
   deployed on wireless mesh systems.  802.15.4 based mesh systems seem
   to be the technology of choice by most manufacturers due to the cost
   point of the radio technology and communication robustness.



   *********************************************************************




Martocci,(et al)        Expires April 16, 2010                 [Page 9]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


     NOTE:  Figure 2 deleted from this version of the draft, awaiting
                  author's agreement on figure's content.

   *********************************************************************



                 Figure 2 Media Types and Wired Protocols



5. FMS Communication Protocols

5.1. Controller/Sensor/Actuator Communication Protocol

   The sensors, actuators, area controllers, zone controllers, and
   building controllers all utilize BACnet (Building Automation Control
   Network), DALI (Digital Addressable Lighting Interface), or LON
   protocol.  BACnet is an ISO world-wide Standard application layer
   protocol designed to maximize interoperability across many products,
   systems and vendors in commercial buildings.  BACnet was conceived in
   1987 and released in 1995 for the HVAC industry.  Since that time
   Fire, Security and Lighting functionality has been added.

   BACnet supports six media types including Ethernet (802.3 and IP),
   EIA-485, Arcnet, LON, RS-232 and ZigBee.

   BACnet supports all expected network services including functions
   such as device and object discovery; unicast and broadcast messaging;
   full routing; flow control and fragmentation, and network security.

   BACnet MS/TP is the BACnet data link for EIA-485 networks.  MS/TP is
   a token passing protocol (implemented in software) allowing
   master/slave and peer-to-peer communication simultaneously.  Devices
   must designate themselves as slaves or masters on the network.  Slave
   devices may only access the network when solicited by a master
   device.  Masters may communicate to any node on the network whenever
   it holds the token.  BACnet MS/TP has a 1-octet MAC address allowing
   for a maximum of 254 devices per network segment. (Address 255 is
   reserved for broadcast designation).  Table 1 describes the network
   parameters in tabular form.

   DALI standard was conceived in the late 1990 and consolidated in the
   IEC 62386 standard (formerly IEC 60929). DALI network is ordered in
   16 groups of each maximally 64 devices. 16 scenes can be defined
   grouping sets of devices together to receive the same command



Martocci,(et al)        Expires April 16, 2010                [Page 10]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


   sequences. A DALI network is usually a lighting subnet connected to
   the building network with a LON DALI gateway

   BACnet/IP addressing currently supports IPv4 addressing only.  An
   IPv6 working group has been commissioned by the BACnet Committee to
   develop the needed changes for BACnet to support IPv6. This proposal
   has been written and is scheduled for Public Review in January 2010.




   *********************************************************************

      NOTE:  Table 1 deleted from this version of the draft, awaiting
                  author's agreement on figure's content.

   *********************************************************************

               Table 1 Typical FMS Communication Parameters



5.2. Enterprise Communication Protocol

   Multiple protocols are supported at the enterprise level of the FMS
   since this layer supports not only the embedded control operation but
   also the user interface and end-user enterprise applications.

5.2.1. Peer-to-peer Controller Communication

   Building Controllers orchestrate the overall FMS system operations.
   Control and data access functions implemented at this level utilize
   BACnet IP.  BACnet IP provides the complete building object model and
   requisite services across all the FMS silos.  Since BACnet is
   deployed on the lower layers of the system, utilizing it to control
   operations at the highest layer of the system is prudent.  BACnet IP
   implements UDP/IP with its own transport layer.  It is designed to
   operate efficiently and transparently on all IP networks.

5.2.2. Enterprise Communication

   While BACnet and LON are the control protocols of choice; it is out
   of scope for most enterprise applications.  Web Services and SNMP
   frequently is added to the enterprise layer to assist in integration
   with end-user applications and Network Management Systems


Martocci,(et al)        Expires April 16, 2010                [Page 11]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


   respectively.  The enterprise level also supports most ancillary IT
   protocols such as SMTP, SNTP, DHCP and DNS.



6. FMS Device Density

   Device density differs depending on the application and code
   requirements.  The following sections detail typical installation
   densities for different applications.

6.1. HVAC Device Density

   HVAC room applications typically have sensors and controllers spaced
   about 50ft apart.  In most cases there is a 3:1 ratio of sensors to
   controllers.  That is, for each room there is an installed
   temperature sensor, flow sensor and damper controller for the
   associated room controller.

   HVAC equipment room applications are quite different.  An air handler
   system may have a single controller with upwards to 25 sensors and
   actuators within 50 ft of the air handler.  A chiller or boiler is
   also controlled with a single equipment controller instrumented with
   25 sensors and actuators.  Each of these devices would be
   individually addressed.  Air handlers typically serve one or two
   floors of the building.  Chillers and boilers may be installed per
   floor, but many times service a wing, building or the entire complex
   via a central plant.

   These numbers are typical.  In special cases, such as clean rooms,
   operating rooms, pharmaceuticals and labs, the ratio of sensors to
   controllers can increase by a factor of three.  Tenant installations
   such as malls would opt for packaged units where much of the sensing
   and actuation is integrated into the unit.  Here a single device
   address would serve the entire unit.

6.2. Fire Device Density

   Fire systems are much more uniformly installed with smoke detectors
   installed about every 50 feet.  This is dictated by local building
   codes.  Fire pull boxes are installed uniformly about every 150 feet.
   A fire controller will service a floor or wing.  The fireman's fire
   panel will service the entire building and typically is installed in
   the atrium.





Martocci,(et al)        Expires April 16, 2010                [Page 12]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


6.3. Lighting Device Density

   Lighting is also very uniformly installed with ballasts installed
   approximately every 10 feet.  A lighting panel typically serves 48 to
   64 zones.  Wired systems typically tether many lights together into a
   single zone.  Wireless systems configure each fixture independently
   to increase flexibility and reduce installation costs.

6.4. Physical Security Device Density

   Security systems are non-uniformly oriented with heavy density near
   doors and windows and lighter density in the building interior space.
   The recent influx of interior and perimeter camera systems is
   increasing the security footprint.  These cameras are atypical
   endpoints requiring upwards to 1mbps data rates per camera as
   contrasted by the few kbps needed by most other FMS sensing
   equipment.  To date, camera systems have been deployed on a
   proprietary wired high speed network or on enterprise VLAN.  Camera
   compression technology now supports full-frame video over wireless
   media.

7. FMS Installation Methods

   Wired FMS installation is a multifaceted procedure depending on the
   extent of the system and the software interoperability requirement.
   Unlike most IP installations, FMSs are installed from the bottom up.
   That is the sensors, actuators and controllers are installed first.
   Later the Zone Controllers are installed; and finally the system is
   connected to the enterprise network.

   The sensor/actuator and controller level, the procedure is typically
   a two or three step process.  Most FMS equipment is 24 VAC equipment
   that can be installed by a low-voltage electrician.  He/she arrives
   on-site during the construction of the building prior to the sheet
   wall and ceiling installation.  This allows him/her to allocate wall
   space, easily land the equipment and run the wired controller and
   sensor networks.  The Building Controllers and Enterprise network are
   not normally installed until months later.  The electrician completes
   his task by running a wire verification procedure that shows proper
   continuity between the devices and proper local operation of the
   devices.

   For lighting networks this means that light sensor, presence sensor,
   switches, and luminaires are all connected within a room and
   sometimes already connected to a room controller. Commissioning is
   for DALI executed with a laptop to map network addresses to physical
   devices.


Martocci,(et al)        Expires April 16, 2010                [Page 13]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


   Later in the installation cycle, the higher order controllers are
   installed, programmed and commissioned together with the previously
   installed sensors, actuators and controllers.  In most cases the IP
   network is still not operable.  The Building Controllers are
   completely commissioned using a crossover cable or a temporary IP
   switch together with static IP addresses.

   Once the IP network is operational, the FMS may optionally be added
   to the enterprise network.  Wireless installation will necessarily
   need to keep the same work flow.  The electrician will install the
   products as before and run continuity tests between the wireless
   devices to assure operation before leaving the job.   The electrician
   does not carry a laptop so the commissioning must be built into the
   device operation.



8. Building Application Use Cases

   The Building Application layer is a software layer that binds the
   various system silos into a cohesive systemic application.  This
   discussion in not meant to be inclusive.  Rather it is meant to show
   how these diverse systems can be coordinated to provide innovated
   synergistic applications for the customer safety and comfort.

8.1. Fire and Smoke Abatement

   Most local codes now require commercial buildings to incorporate
   comprehensive fire and life/safety systems into a building.  It is
   well documented that loss of life in a building is mainly caused by
   smoke inhalation rather than the fire itself.  Agencies, such as UL
   (in the US market), have developed fire certification programs that
   govern fire and smoke operations in commercial buildings.  These
   programs require very rigorous interactive testing for certification.
   In addition to the obvious need to minimize life/safety situations in
   a building, facility operators are highly encouraged to implement
   these systems due to insurance cost reductions.

   The fire and smoke abatement application requires a highly
   coordinated interaction between the fire silo and the HVAC silo.  The
   fire system detects the smoke or fire and reports it to the HVAC
   system.  While the fire system is issuing evacuation notices,
   sounding the alarms and flashing the strobes; the HVAC system
   automatically shuts down all fan systems in the immediate area (to
   starve the fire) while simultaneously opening all external dampers
   and ratcheting up the fans in the adjacent areas to purge the smoke.



Martocci,(et al)        Expires April 16, 2010                [Page 14]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


   Meanwhile, the lighting systems will immediately turn on all safety
   lights in the area to assure safe passage for the occupants.  It will
   also create light trails to assist occupants to the doors.  The
   physical security system will unlatch all doors to assure immediate
   egress of the occupants.  The elevator control system will either
   shut off entirely or bypass normal operation to assist with the
   emergency responders.

   The fire and smoke systems operate in either a manual or automatic
   mode.  The manual mode provides critical fire and smoke information
   on a display to be controlled by a Fire Marshal.  The automatic mode
   is a preprogrammed set of events that control the fire automatically.
   In practice, the fire system will be set to automatic mode and
   operate accordingly until the Fire Marshall arrives.  At that point
   the system is normally overridden to manual mode so that the Fire
   Marshall can control operations from the command center as deemed
   necessary.

   While the smoke abatement operation could be the province of the fire
   system alone, economics dictate that the fire system off-loads the
   smoke abatement operation to the HVAC system.  In practice, the fire
   system will receive the initial fire indication by one or more of its
   smoke detectors.  It will then inform the HVAC system of the physical
   locale of the fire.  The HVAC system will then take charge of the
   smoke abatement operation by automatically adjusting the air handlers
   and dampers.  The HVAC system must incorporate a comprehensive
   prioritization scheme throughout its system.  This prioritization
   scheme must allow all smoke operations to take control precedence
   over all other control operations including manual operator control.
   All affected devices must support a supervision policy that assures
   that all operations requested were executed properly.  The system
   must automatically return to well-defined normal operational state
   once the smoke situation has abated.

8.2. Evacuation

   Evacuation is another systemic operation that may be activated as
   part of the Fire/Smoke Control application, or may be activated for
   other reasons such as terrorist threats.   Evacuation requirements
   most often will activate subsystems of the Fire, Security and
   Lighting silos.  The Fire system normally supports the intercom
   subsystem in the facility.  The intercom system will then trigger the
   recorded voice evacuation instructions.  This may be in concert with
   the fire system audio indications if a fire situation is active or
   standalone.  The lighting subsystem will be activated to turn on the
   lights and evacuation paths to aid in the evacuation.  The security
   system will coincidentally open all doors to allow a smooth safe


Martocci,(et al)        Expires April 16, 2010                [Page 15]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


   egress from the building.  If the building also supports elevator
   control, the elevators will operates as directed by a preprogrammed
   evacuation policy.

8.3. Occupancy/shutdown

   A major energy saving technique in commercial buildings is to
   automatically commence HVAC and lighting operations prior to building
   occupancy.  Conversely, building shutdown allows the systematic
   reduction in HVAC and lighting operations as the building becomes
   unoccupied.

   The HVAC system is usually charged with defining occupied and
   unoccupied times.  The Fire and Security operations are always
   operable and lighting is most often subservient to HVAC.  These times
   are typically programmed into the system by facility operations;
   however, it could be learned adaptively by the security's access
   control system.  The target occupancy time drives the HVAC subsystem
   to turn on all ventilation equipment at an optimal time so that each
   space is ready for occupancy at the prescribed time.  These
   algorithms will be adaptive over time but also include systemic
   instrumentation such as outdoor air and relative humidity to turn on
   the equipment at the last possible moment yet still meet the target
   environmental needs just before occupancy.  The lighting systems are
   turned on/off as function of the overall light intensity and the
   presence of persons inside the room. Switching on is immediate on
   arrival of persons, switching off is done with a suitable delay,
   possibly involving dimming of lights.

   Conversely, the HVAC systems will also determine the earliest
   possible time it can shut down heating/cooling yet still control the
   setpoints to meet the requisite parameters.  Lighting again gets off
   easier since the lights can be extinguished as soon as they are not
   needed.  Building owners may use the lighting systems to pace the
   janitorial service providers by defining a strict timetable that the
   lights will be on in a given area.  Here, the janitorial service
   providers will need to keep in step to complete their work prior to
   the lights being turned off.

   Facility Management Systems often include a telephone interface that
   allows any late workers to override the normal HVAC and lighting
   schedules simply by dialing into the system and specifying their
   locale.  The lights and fan system will continue to operate for a few
   extra hours in the immediate vicinity.  The same applies to occupancy
   sensors in meeting rooms.  Either by automatic sensing or a simple
   push of the occupied switch, the HVAC and lighting schedules will



Martocci,(et al)        Expires April 16, 2010                [Page 16]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


   extend the normal schedule for the meeting room.


8.4. Energy Management

   The occupancy/shutdown applications noted above optimize runtime of
   large equipment.  This in itself is a major component of energy
   savings.  However, even during occupancy large equipment can be
   modulated or shutoff temporarily without affecting environment
   comfort.  This suite of applications run in the HVAC domain, however
   the HVAC silo will interact with the lighting system to reduce the
   lighting load to help in the overall reduction of energy.

   The load rolling and demand limiting applications allow for the
   sequencing of equipment to reduce the overall energy profile or to
   shave off peak energy demands in the facility.  The FMS system will
   constantly monitor real-time energy usage and automatically turn
   unneeded equipment off (or reduce the control setpoint) to stave off
   peaking the facility's electrical profile.  Demand peaks set by
   commercial facilities are frowned upon heavily by utilities and are
   often accompanied by huge energy charge increases for upwards to 1
   year.

   Recently real-time pricing has furthered the ability to save energy.
   This allows a facility to proactively either use or curtail energy
   based on the price/KWH of the energy.  Again, the HVAC subsystem
   takes the lead in this application.  It can either poll the price
   structure from the Utility off the Internet, or the current pricing
   will be forwarded to the facility by the Utility.  The HVAC subsystem
   can then automatically defer unneeded operation or temporarily reduce
   the cooling or lighting load as the cost warrants.



8.5. Locking and Unlocking the Building

   The member of the cleaning staff arrives first in the morning
   unlocking the building (or a part of it) from the control room.  This
   means that several doors are unlocked; the alarms are switched off;
   the heating turns on; some lights switch on, etc.  Similarly, the
   last person leaving the building has to lock the building.  This will
   lock all the outer doors, turn the alarms on, switch off heating and
   lights, etc.






Martocci,(et al)        Expires April 16, 2010                [Page 17]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


8.6. Building Energy Conservation

   A room that is not in use should not be heated, air conditioned or
   ventilated and the lighting should be turned off.  In a building with
   366 rooms it can happen quite frequently that someone forgets to
   switch off the HVAC and lighting.  This is a real waste of valuable
   energy.  To prevent this from happening, the janitor can program the
   building according to the day's schedule.  This way, lighting and
   HVAC is turned on prior to the use of a room, and turned off
   afterwards.



9. Building Requirements

   This section contains the overall set of building application as
   dictated by the previous discussion.



9.1. Additional Commercial Product Requirements

9.1.1. Wired and Wireless Implementations

   Solutions MUST support both wired and wireless implementations.

9.1.2. World-wide Applicability

   Wireless devices MUST be supportable on unlicensed bands such as the
   2.4Ghz.

9.1.3. Energy Harvested Sensors

   Sleeping devices SHOULD target for operation using viable energy
   harvesting techniques such as ambient light, mechanical action, solar
   load, air pressure and differential temperature.



9.2. Additional Installation and Commissioning Requirements

9.2.1. Device Setup Time

   Network setup by the installer MUST take no longer than 20 seconds
   per device installed.




Martocci,(et al)        Expires April 16, 2010                [Page 18]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


9.2.2. Unavailability of an IT network

   Product commissioning MUST be performed by an application engineer
   prior to the installation of the IT network.



9.3. Additional Network Requirements

9.3.1. TCP/UDP

   Connection based and connectionless services MUST be supported

9.3.2. Data Rate Performance

   An effective data rate of 20kbps is the lowest acceptable operational
   data rate acceptable on the network.



9.3.3. Interference Mitigation

   The network MUST automatically detect interference and migrate the
   network to a better 802.15.4 channel to improve communication.
   Channel changes and nodes response to the channel change MUST occur
   within 60 seconds.

9.3.4. Real-time Performance Measures

   A node transmitting a 'request with expected reply' to another node
   MUST send the message to the destination and receive the response  in
   not more than 120 msec.  This response time SHOULD be achievable with
   5 or less hops in each direction. This requirement assumes network
   quiescence and a negligible turnaround time at the destination node.

9.3.5. Packet Reliability

   Reliability MUST meet the following minimum criteria :

   < 1% MAC layer errors on all messages; After no more than three
   retries

   < .1% Network layer errors on all messages;

   After no more than three additional retries;

   < 0.01% Application layer errors on all messages.


Martocci,(et al)        Expires April 16, 2010                [Page 19]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


   Therefore application layer messages will fail no more than once
   every 100,000 messages.



10. Traffic Pattern

   The independent nature of the automation systems within a building
   plays heavy onto the network traffic patterns.  Much of the real-time
   sensor data stays within the local environment.  Alarming and other
   event data will percolate to higher layers.

   Systemic data may be either polled or event based.  Polled data
   systems will generate a uniform packet load on the network.  This
   architecture has proven not scalable.  Most vendors have developed
   event based systems which passes data on event.  These systems are
   highly scalable and generate low data on the network at quiescence.
   Unfortunately, the systems will generate a heavy load on startup
   since all the initial data must migrate to the controller level.
   They also will generate a temporary but heavy load during firmware
   upgrades.  This latter load can normally be mitigated by performing
   these downloads during off-peak hours.

   Devices will need to reference peers occasionally for sensor data or
   to coordinate across systems.  Normally, though, data will migrate
   from the sensor level upwards through the local, area then
   supervisory level.  Bottlenecks will typically form at the funnel
   point from the area controllers to the supervisory controllers.



11. Open issues

   Other items to be addressed in further revisions of this document
   include:

     Need to describe the set of application protocol service
     requirements and the correlation to IP services.

     Need to define security policy requirements for building
     applications

     Need to fully document these needs into well defined application
     requirements.





Martocci,(et al)        Expires April 16, 2010                [Page 20]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009




12. Security Considerations

   TBD



13. IANA Considerations

   This document includes no requirement to IANA.



14. Acknowledgments

   This document was prepared using 2-Word-v2.0.template.dot.



15. References

15.1. Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
             Requirement Levels", BCP 14, RFC 2119, March 1997.



15.2. Informative References

   [I-D.ietf-roll-terminology]Vasseur, J., "Terminology in Low power And
   Lossy Networks", draft-ietf-roll-terminology-00 (work in progress),
   October 2008.















Martocci,(et al)        Expires April 16, 2010                [Page 21]

Internet-Draft  draft-martocci-6Lowapp-building-appns-00    October 2009


Authors' Addresses


   Jerry Martocci
   Johnson Controls
   507 E. Michigan Street
   Milwaukee, Wisconsin, 53202
   USA
   Phone: 414.524.4010
   Email: jerald.p.martocci@jci.com


   Anthony Schoofs
   CLARITY Centre for Sensor Web Technologies
   University College Dublin,
   Dublin 4 Ireland
   Phone: +353 1 7162488
   Email: anthony.schoofs@ucdconnect.ie































Martocci,(et al)        Expires April 16, 2010                [Page 22]

