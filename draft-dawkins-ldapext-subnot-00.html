<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Subscription/Notification for Lightweight Directory Access Protocol (LDAP)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Subscription/Notification for Lightweight Directory Access Protocol (LDAP)">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">P. Xun</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Huawei</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">S. Dawkins, Ed.</td></tr>
<tr><td class="header">Expires: April 17, 2010</td><td class="header">Huawei (USA)</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 14, 2009</td></tr>
</table></td></tr></table>
<h1><br />Subscription/Notification for Lightweight Directory Access Protocol (LDAP)<br />draft-dawkins-ldapext-subnot-00</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on April 17, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>This document extends Lightweight Directory Access Protocol (LDAP) to support 
		subscription and notification mechanism. An LDAP client can subscribe to 
		data of interest available from an LDAP server and receive notifications 
		from the LDAP server when this data is updated. By this means, an LDAP 
		client can become aware of changes to data of interest in a timely manner.
	
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#anchor1">2.</a>&nbsp;
Terminology in this Specification<br />
<a href="#anchor2">3.</a>&nbsp;
Applicability of this Specification<br />
<a href="#subscribe">4.</a>&nbsp;
The Subscribe Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sub-request">4.1.</a>&nbsp;
The Subscribe Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">4.1.1.</a>&nbsp;
SubscribeReq.requestValue.subscribeRequestType<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">4.1.2.</a>&nbsp;
SubscribeReq.requestValue.notificationRefData<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">4.1.3.</a>&nbsp;
SubscribeReq.requestValue.sendDataIndication<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.1.4.</a>&nbsp;
SubscribeReq.requestValue.expiryTime<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.1.5.</a>&nbsp;
SubscribeReq.subscribeContent<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">4.1.6.</a>&nbsp;
SubscribeReq.requestValue.notifyRestriction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">4.2.</a>&nbsp;
Subscribe Result<br />
<a href="#anchor16">5.</a>&nbsp;
Notice of Data Changed<br />
<a href="#sec">6.</a>&nbsp;
Security Considerations<br />
<a href="#iana">7.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">8.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>This document extends the Lightweight Directory Access Protocol (LDAP) 
		(<a class='info' href='#RFC4510'>[RFC4510]<span> (</span><span class='info'>Zeilenga, K., &ldquo;Lightweight Directory Access Protocol (LDAP): Technical Specification Road Map,&rdquo; June&nbsp;2006.</span><span>)</span></a>, <a class='info' href='#RFC4511'>[RFC4511]<span> (</span><span class='info'>Sermersheim, J., &ldquo;Lightweight Directory Access Protocol (LDAP): The Protocol,&rdquo; June&nbsp;2006.</span><span>)</span></a>, <a class='info' href='#RFC4512'>[RFC4512]<span> (</span><span class='info'>Zeilenga, K., &ldquo;Lightweight Directory Access Protocol (LDAP): Directory Information Models,&rdquo; June&nbsp;2006.</span><span>)</span></a>)
		to allow 
		LDAP clients to subscribe to data of interest available from 
		LDAP servers and be notified of changes to subscribed data. 
	
</p>
<p>This extension consists of one extended operation and one unsolicited notification 
		message. The Subscribe operation is used by the LDAP client to subscribe for 
		interested data in LDAP server. When the subscribed data are updated, the LDAP 
		server sends the notification message to the related LDAP client with required 
		data.
	
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology in this Specification</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
		"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in
		this document are to be interpreted as described in RFC 2119. 
		<a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>
	
</p>
<p>Augmented BNF (<a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a>) is used in this specification.
	
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Applicability of this Specification</h3>

<p>This specification describes an LDAP extension for use in a controlled network environment,
		which does not have firewalls or Network Address Translators (NATs). For this reason,
		no considerations for NAT traversal, translator binding lifetimes, etc. are included
		in this specification.
	
</p>
<a name="subscribe"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
The Subscribe Operation</h3>

<p>The Subscribe operation allows an LDAP client to create a subscription to specific 
		data in an LDAP server.  
	
</p>
<a name="sub-request"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
The Subscribe Request</h3>

<p>NOTE TO RFC EDITOR: Please replace all instances of &quot;IANA-ASSIGNED-OID&quot;  
			with the actual value assigned by IANA, when this value is available.
		
</p>
<p>The Subscribe Request is an LDAPMessage of CHOICE extendedReq where the 
				requestName is IANA-ASSIGNED-OID.1. The message is defined as follows:
			
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

SubscribeReq ::= [APPLICATION 23] SEQUENCE {
	requestName		LDAPOID,
	requestValue		SubscribeRequestValue }

SubscribeRequestValue ::= SEQUENCE {
	subscribeRequestType	ENUMERATED {
		subscribe	(0),
		unsubscribe	(1) }
	subscribeContent	SubscribeContent,
	notifyRestriction	NotifyRestriction OPTIONAL,
	notificationRefData	LDAPString OPTIONAL,
	sendDataIndication 	BOOLEAN,
	expiryTime		GeneralizedTime OPTIONAL }

SubscribeContent ::= SEQUENCE {
	baseObject		LDAPDN,
	subscribeAttributeList	SEQUENCE OF SubscribeAttributes }

SubscribeAttributes ::= SEQUENCE {
	attributes		AttributeSelection,
	operation		SET SIZE(1..3) OF ENUMERATED {
			add	(0),
			modify	(1),
			delete	(2) } }

NotifyRestriction ::= SEQUENCE {
	notifyTo		NotifyReceiver,
	notifyStart		GeneralizedTime OPTIONAL }

NotifyReceiver ::= SEQUENCE {
	entryDN		LDAPDN,
	attributeName	AttributeDescription }
</pre></div>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
SubscribeReq.requestValue.subscribeRequestType</h3>

<p>This field indicates this request is a request to subscribe or 
				unsubscribe. The values of this field are:

				</p>
<ul class="text">
<li>subscribe: indicates this request is to 
						subscribe to specific data in LDAP server
</li>
<li>unsubscribe: indicates this request is to 
						cancel the associated subscription
</li>
</ul><p>
			
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.2"></a><h3>4.1.2.&nbsp;
SubscribeReq.requestValue.notificationRefData</h3>

<p>If present, this is an opague block of data that a client sends to 
				the server in the Subscribe request and gets back unmodified 
				in the Notification response when the notification is triggered. 
			
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.3"></a><h3>4.1.3.&nbsp;
SubscribeReq.requestValue.sendDataIndication</h3>

<p>This indication tells the server whether to return the current 
				values of the subscribed attributes listed in subscribeContent 
				in the Subscribe response. 
			
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.4"></a><h3>4.1.4.&nbsp;
SubscribeReq.requestValue.expiryTime</h3>

<p>If present, this is the designated time at which the subscription 
				expires, specified as GeneralizedTime. If this field is absent, 
				the Subscribe request is always valid until the LDAP server 
				receives a Subscribe request with the subscribeRequestType set 
				to unsubscribe.
			
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.5"></a><h3>4.1.5.&nbsp;
SubscribeReq.subscribeContent</h3>

<p>The subscriberContent defines the content of a subscription request.
				
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.5.1"></a><h3>4.1.5.1.&nbsp;
baseObject</h3>

<p>This field specifies the name of object entry that 
					LDAP clients wish  to receive notifications for, 
					when the object entry attributes change.
				
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.5.2"></a><h3>4.1.5.2.&nbsp;
SubscribeReq.subscribeContent.subscribeAttributeList</h3>

<p>A subscribeAttributeList lists the selected attributes that 
					the LDAP client is interested in.
				
</p>
<p></p>
<ul class="text">
<li>attributes: In this field, the selected attributes in the 
					entry are listed. If the value of any attribute listed 
					in this field is updated, a Notification response is 
					sent to the client.
				
</li>
<li>operation: The value of this field denotes that the client 
						is interested in the specific cause that results in the 
						change of attribute. In this field, one or more (of the 
						following three) operations MUST be listed.
					        
<ul class="text">
<li>add: if the attribute is added, the 
						server sends the notification response.
						
</li>
<li>modify: if the attribute is modified, the server sends
						the notification response.
						
</li>
<li>delete: if the attribute is deleted, the server sends 
						the notification response.
						
</li>
</ul>
				
</li>
</ul>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.6"></a><h3>4.1.6.&nbsp;
SubscribeReq.requestValue.notifyRestriction</h3>

<p>The notifyRestriction describes how the Notice of Data Changed 
				Notification is sent.
			
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.6.1"></a><h3>4.1.6.1.&nbsp;
SubscribeReq.requestValue.notifyRestriction.notifyTo</h3>

<p>This denotes the receiver of a Notice of Data Changed 
					Notification of a related Subscribe request. In 
					the Subscribe request, an attribute name MAY be 
					designated and the value(s) of this attribute contains 
					the specific client(s) name(s) which will receive the 
					related Notification.
				
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.6.1.1"></a><h3>4.1.6.1.1.&nbsp;
SubscribeReq.requestValue.notifyRestriction.notifyTo.entryDN</h3>

<p>This field describes the entry in which the 
						designated attribute locates.
					
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.6.1.2"></a><h3>4.1.6.1.2.&nbsp;
SubscribeReq.requestValue.notifyRestriction.notifyTo.attributeName</h3>

<p>This field denotes the attribute name which contains 
						the specific client(s) name(s).
					
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.6.2"></a><h3>4.1.6.2.&nbsp;
SubscribeReq.requestValue.notifyRestriction.notifyStart</h3>

<p>The designated time that the Subscribe request comes into effect, 
					specified as GeneralizedTime. If this field is absent, the 
					Subscribe request is valid when the server receives it.

				
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Subscribe Result</h3>

<p>The results of the Subscribe Request consist of zero or more 
			SubscribeResultEntry messages followed by a single 
			SubscribeResultDone message.
		
</p>
<p>The SubscribeResultEntry is present if the 
				sendDataIndication is set to TRUE in the Subscribe 
				Request. Every SubscribeResultEntry represents an entry 
				listed in subscribeContent of the Subscribe Request. 
				The SubscribeResultEntry is an IntermediateResponse 
				message where the requestName is IANA-ASSIGNED-OID.2 and 
				the requestValue is present and contains a 
				SubscribeResultData type defined as follows:
			
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
SubscribeResultData ::= SEQUENCE {
	objectName		LDAPDN,
	attributes		PartialAttributeList}

PartialAttributeList ::= SEQUENCE OF
	partialAttribute PartialAttribute
</pre></div>
<p>The SubscribeResultDone is an LDAPMessage of CHOICE 
				extendedResp where the requestName is IANA-ASSIGNED-OID.3.
				The message is defined as follows:
			
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
SubscribeResultDone ::= [APPLICATION 24] SEQUENCE {
	COMPONENTS OF LDAPResult,
	responseName	LDAPOID }
</pre></div>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Notice of Data Changed</h3>

<p>After a client successfully subscribes to notification of the data change in the 
		server, if the subscribed data is updated (i.e. added, deleted, modified), 
		the server SHALL send the Notification of Data Change message to the required 
		client(s) with the data before and after the changes. To perform this operation, 
		first, the server SHALL check if the actual notification receiver - which is 
		designated in the value of parameter 
		SubscribeReq.requestValue.notifyRestriction.notifyTo - is valid. 
	
</p>
<p>Second, the server SHALL check if the notification receiver is permitted to 
		receive the data according to the access control mechanism of LDAP. Then the 
		server SHALL send the notification message after all the checks are done.
	
</p>
<p>The Notice of Data Change is an Unsolicited Notification as defined in 
		<a class='info' href='#RFC4511'>[RFC4511]<span> (</span><span class='info'>Sermersheim, J., &ldquo;Lightweight Directory Access Protocol (LDAP): The Protocol,&rdquo; June&nbsp;2006.</span><span>)</span></a>. The responseName field of the Notice of Data Changed 
		message is IANA-ASSIGNED-OID.4 and the responseValue is present and 
		contains a BER-encoded NotifyResponseValue.
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

NotifyResponseValue ::= SEQUENCE {
	notificationRefData	LDAPString OPTIONAL,
	notifyContent		SEQUENCE OF NotifyEntry }

NotifyEntry ::= SEQUENCE {
	baseObject		LDAPDN,
	notifyAttributeList	SEQUENCE OF NotifyAttribute }

NotifyAttribute ::= SEQUENCE {
	state			ENUMERATED {
			add	(0),
			modify	(1),
			delete	(2) }
	attributeType		AttributeDesciption,
	newValue [0] SET OF value AttributeValue OPTIONAL,
	oldValue [1] SET OF value AttributeValue OPTIONAL
}
</pre></div>
<p>Fields of the Notice of Data Changed message are:
		</p>
<ol class="text">
<li>notificationRefData: server returns the same notificationRefData as received in the 
				related Subscribe Request to the Notification of Data Change message.
			
</li>
<li>notificationContent: the detailed data which has been updated.
			
</li>
<li>state: denotes the operation that changed the attribute, i.e. the attribute has been 
				added, deleted, or modified.
			
</li>
<li>attributeType: denotes which attribute is changed.
			
</li>
<li>newValue: the new value of the attribute after change.
			
</li>
<li>oldValue: the original value of the attribute before change.
			
</li>
</ol><p>
	
</p>
<p>The server sends the Notification of Data Change message and will not expect any 
		response from the clients.
	
</p>
<a name="sec"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>General security considerations in <a class='info' href='#RFC4510'>[RFC4510]<span> (</span><span class='info'>Zeilenga, K., &ldquo;Lightweight Directory Access Protocol (LDAP): Technical Specification Road Map,&rdquo; June&nbsp;2006.</span><span>)</span></a>, especially those associated 
		with update operations in <a class='info' href='#RFC4511'>[RFC4511]<span> (</span><span class='info'>Sermersheim, J., &ldquo;Lightweight Directory Access Protocol (LDAP): The Protocol,&rdquo; June&nbsp;2006.</span><span>)</span></a>, apply to this extension.
	
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>	
		
<p>It is requested that Internet Assigned Numbers Authority (IANA) make 
				the following assignment:
			
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Subject: Request for LDAP Protocol Mechanism Registration
Object Identifier: see table
Description: see table
Person and email address to contact for further information:
	Peng Xun xunpeng@huawei.com

NOTE TO RFC EDITOR: Please replace all instances of
			XXXX with the RFC number
			for this specification when it is
			assigned.
Specification: RFC XXXX

Author/Change Controller: IESG

Comments:

Object Identifier   Type Description
------------------- ---- -------------------------
IANA-ASSIGNED-OID.1  E	Subscribe Extended Request
IANA-ASSIGNED-OID.2  E	SubscribeResultEntry Extended
                                 IntermediateResponse
IANA-ASSIGNED-OID.3  E	SubscribeResultDone Extended
                                 Response
IANA-ASSIGNED-OID.4  N	Notice of Data Changed

Legend
---------------------------------------------------
E =&gt; supportedExtension
N =&gt; Unsolicited Notice
</pre></div>
	

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4510">[RFC4510]</a></td>
<td class="author-text">Zeilenga, K., &ldquo;<a href="http://tools.ietf.org/html/rfc4510">Lightweight Directory Access Protocol (LDAP): Technical Specification Road Map</a>,&rdquo; RFC&nbsp;4510, June&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4510.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4511">[RFC4511]</a></td>
<td class="author-text">Sermersheim, J., &ldquo;<a href="http://tools.ietf.org/html/rfc4511">Lightweight Directory Access Protocol (LDAP): The Protocol</a>,&rdquo; RFC&nbsp;4511, June&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4511.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4512">[RFC4512]</a></td>
<td class="author-text">Zeilenga, K., &ldquo;<a href="http://tools.ietf.org/html/rfc4512">Lightweight Directory Access Protocol (LDAP): Directory Information Models</a>,&rdquo; RFC&nbsp;4512, June&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4512.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5234.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Peng Xun</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Huawei Technologies Co., Ltd.</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:xunpeng@huawei.com">xunpeng@huawei.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Spencer Dawkins (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Huawei Technologies (USA)</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 214 755 3870</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:spencer@wonderhamster.org">spencer@wonderhamster.org</a></td></tr>
</table>
</body></html>
