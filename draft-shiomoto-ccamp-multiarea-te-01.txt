





CCAMP Working Group                              Kohei Shiomoto (NTT)
Internet Draft                                         Eiji Oki (NTT)
Expiration Date: December 2002                  Masaru Katayama (NTT)
                                                 Wataru Imajuku (NTT)
                                                Naoaki Yamanaka (NTT)

                                                            June 2002

            Multi-area multi-layer traffic engineering using
                  hierarchical LSPs in GMPLS networks
                draft-shiomoto-ccamp-multiarea-te-01.txt 

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as ``work in progress.''

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

Copyright Notice

   Copyright (C) The Internet Society (2002).  All Rights Reserved.


Abstract


This draft proposes a traffic engineering framework for multi-layer path
networks using dynamic virtual topology configuration capability of
GMPLS protocols.  The electrical label switched path is routed over the
virtual topology built on a set of optical label switched path in multi-
layer path networks.  The virtual topology is dynamically altered by
setting up or tearing down optical label switched paths.  Virtual topol-
ogy is configured in response to traffic demand change so that conges-
tion of the network is mitigated.  Utilization of label switched path is
measured at ingress node and disseminated with routing protocol



Kohei Shiomoto                                                          [Page 1]

Kohei Shiomoto     draft-shiomoto-multiarea-te-01.txt       24 June 2002


extensions for the individual node to decide whether the virtual topol-
ogy should be altered or not without centralized coordination.



1.  Summary for Sub-IP Area


1.1.  Summary

See the Abstract above.


1.2.  RELATED DOCUMENTS

"Multi-area MPLS traffic engineering," draft-kompella-mpls-multiarea-
te-03.txt (work in progress), 5/02.



1.3.  Where does it fit in the Picture of the Sub-IP Work

This work fits the CCAMP box.


1.4.  Why is it Targeted at this WG

This draft is targeted at the CCAMP WG because it addresses the traffic
engineering in multi-area multi-layer domain.  The topic is in the scope
of the work item on how the properties of network resources gathered by
the measurement protocol can be distributed in existing routing proto-
cols, such as OSPF and IS-IS.


1.5.  Justification of Work

The WG should consider this document as it addresses a new traffic engi-
neering framework using dynamic virtual topology configuration mechanism
in multi-layer path network, which is enabled by GMPLS protocols.


2.  Conventions used in this document

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this
document are to be interpreted as described in RFC-2119.





Kohei Shiomoto                                                          [Page 2]

Kohei Shiomoto     draft-shiomoto-multiarea-te-01.txt       24 June 2002


3.  Introduction


GMPLS provides a protocol framework for multi-layer path network con-
trol.  Label switched paths (LSPs) in fiber-, lambda-, SDH/SONET-, and
IP-layers can be set up by using GMPLS signaling and routing protocols.
The lower-layer LSP provides a (virtual) topology for the upper-layer
LSP routing in multi-layer path network.  In particular non-packet capa-
ble LSP (fiber, lambda, SDH/SONET), which has a fixed capacity, con-
structs a "hard" virtual topology for packet capable LSP routing.  The
virtual topology can be quickly re-configured using GMPLS routing and
signaling protocols to set up the lower-layer LSPs.


Promising application of GMPLS-based multi-layer path network control
includes traffic engineering.  A new traffic engineering framework can
be constructed in multi-layer path networks.  This draft proposes a
traffic engineering method based on the quick virtual topology configu-
ration.  The rest of the draft is organized as follows.  Firstly we
briefly review the current traffic engineering methods for fixed network
topology.  Secondly we show the concept of the proposed traffic engi-
neering method based on the quick virtual topology configuration.
Multi-area network whose backbone area is optical-layer network and
other areas are electrical IP-layer networks is used for network model.
Thirdly we provide protocol extensions for the proposed method.


4.  Current traffic engineering in MPLS

Conventional routing protocol computes the path which minimizes its cost
using the shortest path algorithm [OSPF,ISIS].  Packets are forwarded
along with the shortest path even if the intermediate links do not have
sufficient bandwidth, which result in congestion.  To overcome the con-
gestion cased by IGP's shortest path routing, MPLS-based traffic engi-
neering has been extensively studied recently [RFC2702].  Explicit route
for LSP can be used so as to avoid congestion in MPLS framework.  Con-
straint-based shortest path first (CSPF) algorithm selects the path with
minimum cost assuming that links which do not have sufficient bandwidth
are excluded from the network topology.  If the requested bandwidth for
the LSP is given, the CSPF algorithm calculates the path which satisfies
the requested bandwidth.  The path for the LSP is specified at the
source node and the LSP is set up along with the path [RFC3209,
RFC3212].

LSP which requests a specified bandwidth is served in first-come-first-
served basis.  As the number of such LSPs increases, the network uti-
lization might not get optimized: some links might be congested while
others not.  Explicit route for existing LSPs need to be re-optimized



Kohei Shiomoto                                                          [Page 3]

Kohei Shiomoto     draft-shiomoto-multiarea-te-01.txt       24 June 2002


for better network utilization.  Several network optimization methods
have been developed.  In [Wang99], given the traffic demand matrix whose
(i,j) element corresponds to the traffic demand from the node i to j,
linear and integer programming formulations are used to minimize the
utilization of the most congested link.  In [Xiao00], LSP is arbitrarily
routed at first to obtain the traffic demand matrix and a simple CSPF
algorithm is applied to find the route of the LSP in descending order of
its traffic demand volume.


Those traffic engineering methods are developed under the assumption
that the underlying network topology is fixed.  The network utilization
is, however, limited under the fixed underlying network topology.  This
draft proposes a traffic engineering method using the dynamic reconfigu-
ration of virtual topology in multi-layer path network.  In particular
we address the method for two-layer network in which the lower-layer is
photonic network and the upper-layer is IP packet network.


5.  Dynamic reconfiguration of virtual topology in Photonic IP multi-
layer network


5.1.  Network model

Multi-area network whose backbone area is optical-layer network and
other areas are electrical IP-layer networks is used for network model
[ID-Kompella02].  Photonic layer provides a virtual topology for IP
layer in Photonic IP multi-layer network.  Optical LSP, which is set up
to connect two electrical LSRs, is advertised as FA-LSP [LSP-HIER].  A
set of those FA-LSPs forms the virtual network topology for electrical
LSP routing.  Electrical LSP is routed over the virtual network topol-
ogy.


Figure 1 shows the multi-area network with photonic core backbone area.
Electrical areas (areas 1, 2, and 3) consist of LSRs while the photonic
backbone-area consists of PXCs.  The electrical areas are connected with
the photonic backbone area (area 0) at the ABRs 1, 2, and 3, respec-
tively.











Kohei Shiomoto                                                          [Page 4]

Kohei Shiomoto     draft-shiomoto-multiarea-te-01.txt       24 June 2002


         -------------+ +-----------------+  +----------
             area1    | |     area 0      |  |   area2
          (Ingress)   | | (Photonic core  |  | (Egress)
                      | |  backbone area) |  |
           +-----+  +-----+   +-----+   +-----+  +-----+
           |     |  |     |   |     |   |     |  |     |
         --| LSR1+--+ ABR1+---+ PXC1+---+ ABR2+--+ LSR2+--
           |     |  |     |   |     |   |     |  |     |
           +-----+  +-----+   +--|--+   +-----+  +-----+
                      | |        |        |  |
                      | |     +-----+     |  |
          ------------+ |     |     |     |  +-----------
                        |     | PXC2|     |  +----------
                        |     |     |     |  |   area3
                        |     +-----+     |  | (Egress)
                        |        |        |  |
                        |     +-----+   +-----+  +-----+
                        |     |     |   |     |  |     |
                        |     | PXC3|---| ABR3+--| LSR3|-
                        |     |     |   |     |  |     |
                        |     +-----+   +-----+  +-----+
                        |                 |  |
                        |                 |  |
                        +-----------------+  +----------

               Figure 1: Multi-area network with photonic backbone.


E-LSPs are set up between ABRs in distant area so that all areas are
mutually interconnected in a full-mesh manner.  Those E-LSPs are used to
carry packets over the photonic backbone area.  The photonic backbone
area provides a virtual topology for E-LSP routing.  The O-LSP is set up
over the photonic backbone area to connect ABRs in distant electrical
areas.  The O-LSPs need to be set up so that all areas are mutually
interconnected via E-LSPs in a full-mesh manner.  We should note that
not all ABRs are directly connected each other via an O-LSP.  E-LSP uses
single-hop or multi-hop O-LSPs from ingress to egress areas.  In some
cases an E-LSP may be routed over a single-hop O-LSP, which directly
connects the ingress and egress areas.  In other cases an E-LSP may be
routed over multi-hop O-LSPs, by which the ingress area is electrically
reachable to the egress area.


Two virtual optical backbone area topologies are explained using the
sample network in Figure 1.  Suppose that the O-LSP is already set up
between ABR 2 and ABR 3.  In this situation if the traffic demand
between area 1 and area 2 is higher than that between area 1 and area 3,
the O-LSP should be set up between ABR 1 and ABR 2.  In this case the



Kohei Shiomoto                                                          [Page 5]

Kohei Shiomoto     draft-shiomoto-multiarea-te-01.txt       24 June 2002


virtual optical backbone area topology is shown in Figure 2 (a).  The E-
LSPs are routed over the virtual optical backbone area topology.  The E-
LSP from area 1 to area 3 is routed over a two-hop path passing through
area 1, 2, and 3 while the E-LSP from area 1 to area 2 is routed over a
single-hop path passing through area 1 and 2.  On the other hand, if the
traffic demand between area 1 and area 3 is higher than that between
area 1 and area 2, the O-LSP should be set up between ABR 1 and ABR 3.
In this case the virtual optical backbone area topology is shown in Fig-
ure 2 (b).

         +-------+     +-------+         +-------+     +-------+
         |       |     |       |         |       |     |       |
         | Area1 +-----+ Area2 |         | Area1 |     | Area2 |
         |       |     |       |         |       |     |       |
         +-------+     +---+---+         +---+---+     +---+---+
                           |                 |             |
                           |                 |             |
                       +---+---+             |         +---+---+
                       |       |             |         |       |
                       | Area3 |             +---------+ Area3 |
                       |       |                       |       |
                       +-------+                       +-------+

                  (a)                             (b)

             Figure 2: Virtual topology of backbone area.


5.2.  Dynamic reconfiguration of virtual topology


The virtual backbone area topology should adjust to traffic demand
change [Ramaswami96, Kar00, Oki02].  If traffic demand for E-LSPs are
given, appropriate virtual optical backbone area topology could be
determined.  In determining the virtual topology we use a heuristic
method in which O-LSP is set up between node pair in the descending
order of traffic demand between them.  The idea behind the method is
that sending most of traffic in a single-hop may reduce congestion.  We
need to determine the virtual topology such that we make the best use of
the O-LSP bandwidth because the O-LSP occupies the fixed bandwidth once
it is established.  When the O-LSP gets underutilized, it should be
released for future demand of another O-LSP.


The dynamic reconfiguration of the virtual topology can be implemented
with either centralized or distributed approach.  In centralized
approach, a central network management system collects traffic demand
over the E-LSP measured by all nodes in the network, calculates a new



Kohei Shiomoto                                                          [Page 6]

Kohei Shiomoto     draft-shiomoto-multiarea-te-01.txt       24 June 2002


virtual topology, and dictates appropriate nodes to initiate O-LSP setup
procedure.  In distributed approach, each node decides whether it should
initiate O-LSP setup procedure or not.  In this draft we take the dis-
tributed approach because the centralized one suffers from reliability
problem due to single point of failure.


The distributed approach requires a mechanism for coordination between
nodes.  Unless coordination mechanism is properly implemented, a new
virtual topology might be formed inconsistently.  To overcome this prob-
lem, LSP bandwidth utilization is measured at ingress node and it is
disseminated to all nodes in the domain.  Each node calculates the next
virtual topology to mitigate the congestion using bandwidth utilization
for E-LSP and O-LSP disseminated by its ingress node.  Each node decides
whether it should initiate O-LSP setup procedure or not by comparing the
current virtual topology and the next one.


6.  Protocol extensions


6.1.  Routing protocol extensions for LSP utilization dissemination


O-LSP utilization is measured at ingress LSR.  Measured O-LSP utiliza-
tion is disseminated by routing protocol.  Area local Opaque LSA (type
10) is used to carry the measured OLSP utilization [GMPLS-ROUT, GMPLS-
OSPF, TE-OSPF].  Format of sub-TLV for the measured O-LSP utilization is
shown in Figure 3.  The measured O-LSP utilization is disseminated to
notify individual nodes of that congestion occurs in the network.


E-LSP utilization is measured at ingress LSR.  Measured E-LSP utiliza-
tion is disseminated by routing protocol.  Area local Opaque LSA (type
10) is used to carry the measured E-LSP utilization.  Format of sub-TLV
for the measured E-LSP utilization is shown in Figure 3.  The measured
E-LSP utilization is used for individual node to calculate the next vir-
tual topology to mitigate congestion.













Kohei Shiomoto                                                          [Page 7]

Kohei Shiomoto     draft-shiomoto-multiarea-te-01.txt       24 June 2002


   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              Type             |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              Measured LSP utilization (MBytes/s)              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

        Figure 3: Traffic demand sub-TLV for OSPF extensions.


7.  Conclusions


GMPLS protocols open a new vista for multi-layer path network control.
The traffic engineering method using dynamic reconfiguration of virtual
topology is a promising application of GMPLS protocols in multi-layer
path networks.  Detailed protocol mechanisms for interwork between lay-
ers in multi-path network need further study and will be developed in
the future version of this draft.



8.  Security considerations


Security issues are not discussed in this draft.


9.  Reference


[OSPF] J. T. Moy, "OSPF: anatomy of an Internet routing protocol," Addi-
son-Wesley, 98.

[ISIS] R. Callon, "Use of OSI IS-IS for routing in TCP/IP and dual envi-
ronments," RFC1195, 12/90.

[RFC2702] D. O. Auduche, et al. , "Requirements for traffic engineering
over MPLS," RFC 2702, 9/99.

[RFC3209] D. O. Auduche, et al. , "RSVP-TE: Extensions to RSVP for LSP
tunnels," RFC 3209, 12/01.

[RFC3212] B. Jamoussi, et al. "Constraint-based LSP setup using LDP,"
RFC 3212, 1/02.

[Wang99] Y. Wang and Z. Wang, "Explicit routing algorithms for Internet



Kohei Shiomoto                                                          [Page 8]

Kohei Shiomoto     draft-shiomoto-multiarea-te-01.txt       24 June 2002


traffic engineering," In Proc. of IEEE IC3N, pp. 582-588, Boston, MA,
10/99.

[Xiao00] X. Xiao, A. Hannan, B. Bailey, and L. M. Ni, "Traffic engineer-
ing with MPLS in the Internet," IEEE Network Magazine, pp.28-33, 3-4/00.

[ID-Kompella02] "Multi-area MPLS traffic engineering," draft-kompella-
mpls-multiarea-te-03.txt (work in progress), 5/02.

[LSP-HIER] "LSP hierarchy with MPLS TE," draft-ietf-mpls-lsp-hierar-
chy-06.txt (work in progress), 5/02.

[Ramaswami96] R. Ramaswami and K. N. Sivarajan, "Design of logical
topologies for wavelength-routed optical networks," IEEE J. Select.
Areas in Commun., pp. 840-851, Vol. 14, No. 5, 6/96.

[Kar00] K. Kar, M. Kodialam, and T. V. Lakshman, "Minimum interference
routing of bandwidth guaranteed tunnels with MPLS traffic engineering
applications," IEEE J. Select. Areas in Commun., pp. 2566-2579, Vol. 18,
No. 12, 12/00.

[Oki02] E. Oki, K. Shiomoto, S. Okamoto, W. Imajuku, and N. Yamanaka, A
heuristic-based multi-layer optimum topology design scheme based on
traffic measurement for IP+Photonic networks," In Proc. of OFC 2002,
3/2002.

[GMPLS-ROUT] "Routing extensions in support of generalized MPLS," draft-
many-ccamp-gmpls-routing-04.txt (work in progress), 4/02.

[GMPLS-OSPF] "OSPF extensions in support of generalized MPLS," draft-
ietf-ccamp-ospf-gmpls-extensions-07.txt (work in progress), 5/02.

[TE-OSPF] "Traffic engineering extensions to OSPF," draft-katz-yeung-
ospf-traffic-06.txt, 10/01.


10.  Author information


Kohei Shiomoto
NTT Network Innovation Laboratories
Midori 3-9-11
Musashino, Tokyo 180-8585, Japan
Email: shiomoto.kohei@lab.ntt.co.jp

Eiji Oki
NTT Network Innovation Laboratories
Midori 3-9-11



Kohei Shiomoto                                                          [Page 9]

Kohei Shiomoto     draft-shiomoto-multiarea-te-01.txt       24 June 2002


Musashino, Tokyo 180-8585, Japan
Email: oki.eiji@lab.ntt.co.jp

Masaru Katayama
NTT Network Innovation Laboratories
Midori 3-9-11
Musashino, Tokyo 180-8585, Japan
Email: katy@exa.onlab.ntt.co.jp

Wataru Imajuku
NTT Network Innovation Laboratories
Hikari-no-oka 1-1
Yokosuka, Kanagawa 239-0847, Japan
Email: Imajuku@exa.onlab.ntt.co.jp

Naoaki Yamanaka
NTT Network Innovation Laboratories
Midori 3-9-11
Musashino, Tokyo 180-8585, Japan
Email: yamanaka.naoaki@lab.ntt.co.jp































Kohei Shiomoto                                                         [Page 10]

