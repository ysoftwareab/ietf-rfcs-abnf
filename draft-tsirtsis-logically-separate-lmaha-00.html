<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Behavior of Collocated HA/LMA</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Behavior of Collocated HA/LMA">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">G. Tsirtsis</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Qualcomm</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">S. Krishnan</td></tr>
<tr><td class="header">Expires: September 26, 2008</td><td class="header">Ericsson</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">March 25, 2008</td></tr>
</table></td></tr></table>
<h1><br />Behavior of Collocated HA/LMA<br />draft-tsirtsis-logically-separate-lmaha-00.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 26, 2008.</p>

<h3>Abstract</h3>

<p>In discussions about PMIPv6-MIPv6 interactions in NETLMM WG,
                scenario C describes the case of collocation of LMA and HA
                function. In this case a PMIP network emulates the "home link"
                for MNs using MIPv6. This document argues that even when LMA and
                HA functions are Collocated they MUST be treated as logically
                separate entities. In particular this draft argues that PMIP
                BCEs MUST NOT overwrite MIPv6 BCEs and vice versa.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Requirements notation<br />
<a href="#anchor2">2.</a>&nbsp;
Acknowledgments<br />
<a href="#anchor3">3.</a>&nbsp;
Introduction<br />
<a href="#anchor4">4.</a>&nbsp;
The Case for Logically Separate LMA and HA<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">4.1.</a>&nbsp;
Logical Relationship Between Colocated LMA/HA<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.1.1.</a>&nbsp;
BCE Overwritting is Wrong<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.1.2.</a>&nbsp;
Shared State between LMA and HA<br />
<a href="#anchor8">5.</a>&nbsp;
Detailed Bootstrapping and Handoff Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">5.1.</a>&nbsp;
Bootstrapping on Emulated Home Link<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">5.2.</a>&nbsp;
Connecting to Foreign Link<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">5.3.</a>&nbsp;
Connecting Back to Emulated Home Link<br />
<a href="#anchor12">6.</a>&nbsp;
Security Considerations<br />
<a href="#anchor13">7.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">8.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Requirements notation</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
                NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
                "OPTIONAL" in this document are to be interpreted as described
                in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Acknowledgments</h3>

<p>We would like to thank the authors of PMIPv6-MIPv6 interactions
                draft <a class='info' href='#I-D.giaretta-netlmm-mip-interactions'>[I&#8209;D.giaretta&#8209;netlmm&#8209;mip&#8209;interactions]<span> (</span><span class='info'>Giaretta, G., &ldquo;Interactions between PMIPv6 and MIPv6: scenarios and related issues,&rdquo; November&nbsp;2007.</span><span>)</span></a> for
                providing the basis for this discussion. 
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Introduction</h3>

<p>In PMIPv6-MIPv6 interactions draft <a class='info' href='#I-D.giaretta-netlmm-mip-interactions'>[I&#8209;D.giaretta&#8209;netlmm&#8209;mip&#8209;interactions]<span> (</span><span class='info'>Giaretta, G., &ldquo;Interactions between PMIPv6 and MIPv6: scenarios and related issues,&rdquo; November&nbsp;2007.</span><span>)</span></a>, scenario C
                describes the case of collocation of LMA and HA function. In
                this case a PMIP network emulates the "home link" for MNs using
                MIPv6. This document argues that even when LMA and HA functions
                are Collocated they MUST be treated as logically separate
                entities. In particular this draft argues that PMIP BCEs MUST
                NOT overwrite MIPv6 BCEs and vice versa.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
The Case for Logically Separate LMA and HA</h3>

<p>When a PMIPv6 <a class='info' href='#I-D.ietf-netlmm-proxymip6'>[I&#8209;D.ietf&#8209;netlmm&#8209;proxymip6]<span> (</span><span class='info'>Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K., and B. Patil, &ldquo;Proxy Mobile IPv6,&rdquo; February&nbsp;2008.</span><span>)</span></a> local
                mobility agent is collocated with a MIPv6 <a class='info' href='#RFC3775'>[RFC3775]<span> (</span><span class='info'>Johnson, D., Perkins, C., and J. Arkko, &ldquo;Mobility Support in IPv6,&rdquo; June&nbsp;2004.</span><span>)</span></a> home agent, the PMIPv6 network can be configured to emulate
                the MIPv6 "home link" for a mobile node using MIPv6. This
                configuration and its implications are discussed below.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Logical Relationship Between Colocated LMA/HA</h3>

<p> A PMIPv6 network comprising an LMA and multiple MAGs
                    emulates a single link. When a PMIPv6 LMA and a MIPv6 HA are
                    Collocated, PMIPv6 is used to handle mobility between MAGs
                    in the same PMIPv6 network emulating the link, and MIPv6 is
                    used to handle mobility between different links (emulated or
                    physical).
</p>
<p>In that sense, logically, the PMIPv6 LMA operates at a lower
                    layer than the MIPv6 HA. This means that when a packet is
                    received by the LMA/HA, the destination address of the
                    packet is first matched against Binding Cache Entries (BCE)
                    created by MIPv6 BUs. If there are no MIPv6 BCEs for this
                    destination address (i.e., the MN is deregistered at MIPv6
                    level) then LMA BCEs are searched.
</p>
<p>This simple way of thinking about logically separating the
                    two functions, ensures that MNs can move between PMIPv6
                    emulated links and other links the same way the do between
                    physical links and without require any specific
                    implementation of the combined LMA/HA. 
</p>
<p>Indeed, the two logical functions can be implemented as two
                    different but communicating processes or as a single
                    integrated process. The BCE tables of the LMA and the HA can
                    also be combined in a single table or they can be maintained
                    as separate tables. This draft does not impose, propose, or
                    in any other way imply any specific implementation. Instead,
                    this draft describes the required external behavior of such
                    a combined LMA/HA implementation and argues against PMIPv6
                    BCEs overwriting MIPv6 BCEs.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
BCE Overwritting is Wrong</h3>

<p>There is currently a school of thought in the NETLMM WG
                        that wants PMIPv6 PBUs to overwrite state created by
                        PMIPv6 BUs and vice versa. This school of thought comes
                        from a fundamental assumptions that as MNs move from one
                        link to another, they only maintain ONE link at a time.
                        In other words the assumption is that during a handoff
                        an MN will disconnect from one link and connect to
                        another. In that sense, when a combined HA/LMA receives
                        a MIPv6 BU over a foreign link, it can overwrite any
                        state created in the LMA for the same mobile (since
                        presumably the MN is no longer connected to the MAG).
                        Based on the same logic when an combined HA/LMA receives
                        a PMIPv6 BU over a MAG on the home link, it can
                        overwrite any state created in the HA for the same
                        mobile (since presumably the MN is no longer connected
                        to a foreign link).
</p>
<p>This logic breaks down if one considers MNs that are
                        capable of maintaining more than one link at the same
                        time. Such capability is common and can be utilised in
                        many different way, while specifically MIPv6 allows for
                        the following behavior: 
</p>
<p>
                        </p>
<blockquote class="text">
<p>Directing traffic between foreign links: If an MN
                                can maintain two links at the same time, it can
                                direct traffic to one or the other link by
                                simply sending a BU to its HA, registering the
                                CoA corresponding to one or the other link.
</p>
<p>Directing traffic between home and foreign link:
                                If one of the links maintained is the home link,
                                the MN can direct traffic to it by sending a
                                deregistration MIPv6 BU to the HA over the home
                                link, while it can also direct traffic to the
                                foreign link by sending a MIPv6 BU to the HA
                                directing traffic to the CoA of the foreign
                                link.
</p>
<p>Directing traffic between Multiple links: MEXT WG
                                is also working on <a class='info' href='#I-D.ietf-monami6-multiplecoa'>[I&#8209;D.ietf&#8209;monami6&#8209;multiplecoa]<span> (</span><span class='info'>Ernst, T., Nagami, K., and V. Devarapalli, &ldquo;Multiple Care-of Addresses Registration,&rdquo; February&nbsp;2008.</span><span>)</span></a> and
                                    <a class='info' href='#I-D.soliman-monami6-flow-binding'>[I&#8209;D.soliman&#8209;monami6&#8209;flow&#8209;binding]<span> (</span><span class='info'>Soliman, H., Montavont, N., Fikouras, N., and K. Kuladinithi, &ldquo;Flow Bindings in Mobile IPv6 and Nemo Basic Support,&rdquo; November&nbsp;2007.</span><span>)</span></a>
                                specifications allowing an MN to register
                                multiple links (multiple CoAs and the home link)
                                to its HA at the same time and even direct
                                different flows to different links.
</p>
</blockquote><p>
                    
</p>
<p>It should be clear that none of this can be possible if
                        every time the MN connects to its home link, the
                        corresponding PMIPv6 BCE overwrites the HA BCEs for the
                        same mobile or every time the MN sends a BU to its HA
                        over a foreign link, the MIPv6 BCE overwrites the LMA
                        BCE entry for the same MN.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.2"></a><h3>4.1.2.&nbsp;
Shared State between LMA and HA</h3>

<p>If the HA is configured as a virtual home link HA (i.e.,
                        there is no direct link between MN and HA), there are no
                        need to share any parameters between HA and LMA
                        functions. The LMA and HA function, however, need to
                        share certain parameters in a Collocated implementation
                        if the PMIPv6 network is used as a home link, i.e., if
                        the PMIPv6 network emulates a direct connection between
                        the MN and the HA. The parameters that need to be shared
                        in this case have to do with the addresses assigned to
                        the MN by the two entities. Specifically:
</p>
<p>
                        </p>
<blockquote class="text">
<p>When an LMA receives a PBU for a new MN, it MUST
                                first check if the MN is associated with the
                                Collocated HA e.g. based on the MN-ID. If the HA
                                already has a home address associated with this
                                MN, then the LMA MUST allocate the same address
                                over the PMIPv6 home link.
</p>
<p>When an HA receives an IKEv2 bootstrapping
                                request for a new MN, it MUST first check if the
                                MN is associated with the Collocated LMA e.g.
                                based on the MN-ID. If the LMA already has a
                                prefix associated with this MN, then the HA
                                provide the MN with the same HNP over the IKEv2
                                session.
</p>
</blockquote><p>
                    
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Detailed Bootstrapping and Handoff Considerations</h3>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Bootstrapping on Emulated Home Link</h3>

<p>When an MN connects to a MAG in a PMIPv6 network, it receives
                    an RA indicating a prefix that is topologically correct at
                    the LMA and unique to the MN. This prefix can be used by the
                    MN to autoconfigure one (or more) IPv6 address. This address
                    continues to be valid as the MN moves between MAGs in the
                    same PMIPv6 network. This is so since every time the MN
                    moves to a new MAG, the MAG sends a PBU to the LMA creating
                    a PMIPv6 Binding Cache Entry (BCE), binding the MN's prefix
                    with a MAG's address. Any packet with a destination address
                    matching the MN's prefix, is directed to the LMA, which
                    based on the BCE table it tunnels the packet to the
                    appropriate MAG which then delivers it to the MN.
</p>
<p>Assume now that the MN, equipped with an IPv6 address derived
                    from a prefix provided to it over the link emulated by the
                    PMIPv6 network, wants to bootstrap MIPv6. Also assume that
                    the HA used by the MN is the one Collocated with the LMA of
                    the PMIPv6 network the MN is connected to. This address is
                    maybe discovered by Dynamic HA Address Detection (DHAAD) as
                    defined in <a class='info' href='#RFC3775'>[RFC3775]<span> (</span><span class='info'>Johnson, D., Perkins, C., and J. Arkko, &ldquo;Mobility Support in IPv6,&rdquo; June&nbsp;2004.</span><span>)</span></a> or by any of the
                    bootstrapping mechanisms <a class='info' href='#RFC5026'>[RFC5026]<span> (</span><span class='info'>Giaretta, G., Kempf, J., and V. Devarapalli, &ldquo;Mobile IPv6 Bootstrapping in Split Scenario,&rdquo; October&nbsp;2007.</span><span>)</span></a>
                    <a class='info' href='#I-D.ietf-mip6-bootstrapping-integrated-dhc'>[I&#8209;D.ietf&#8209;mip6&#8209;bootstrapping&#8209;integrated&#8209;dhc]<span> (</span><span class='info'>Chowdhury, K. and A. Yegin, &ldquo;MIP6-bootstrapping for the Integrated Scenario,&rdquo; July&nbsp;2007.</span><span>)</span></a>. 
</p>
<p>The MN proceeds to establish a security association with it
                    using IKEv2. According to <a class='info' href='#RFC5026'>[RFC5026]<span> (</span><span class='info'>Giaretta, G., Kempf, J., and V. Devarapalli, &ldquo;Mobile IPv6 Bootstrapping in Split Scenario,&rdquo; October&nbsp;2007.</span><span>)</span></a>, as part
                    of this procedure the HA can provide the home network prefix
                    (HNP) to the MN. The MN immediately understands that it is
                    attached to its MIPv6 home link since the prefix advertised
                    to it directly over the link (in an RA) matches the HNP
                    provided to it by the HA. In this case the MN does not need
                    to send a MIPv6 BU to the HA and the logical HA function
                    does not get initiated.
</p>
<p> In other words, any packet sent to the MN's prefix is still
                    intercepted by the LMA and redirected to the appropriate MAG
                    (according to PMIPv6 BCE table) for delivery to the MN over
                    the emulated home link.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Connecting to Foreign Link</h3>

<p>If the MN connects to an access router that is not part of
                    the same PMIPv6 network as before i.e., on a foreign link,
                    it will receive an RA with a different prefix (say a foreign
                    prefix) and generates an IP address on the foreign link.
</p>
<p>Note that up to now nothing has changed at the Collocated
                    LMA/HA. All traffic is still redirected by the LMA to the
                    registered MAG according to the state in the PMIPv6 BCE
                    table. For this to change the MN needs to send a MIPv6 BU to
                    the HA. The BU introduces an entry to the MIPv6 BCE, binding
                    the MN's prefix to the CoA. Any packets now reaching the
                    LMA/HA will now match the MIPv6 BCE and be redirected to the
                    CoA.
</p>
<p>Note that the MIPv6 BCE created by the BU sent over the
                    foreign link MUST NOT overwrite the PMIPv6 BCE for the same
                    MN. The PMIPv6 BCE for this MN is removed only if and when
                    the MN disconnects from the MAG in the PMIPv6 domain and has
                    nothing to do with the HA state. Indeed, according to when a
                    MAG an MN disconnects from a MAG, the MAG is supposed to
                    send a deregistration BU to the LMA removing the
                    corresponding BCE for that MN.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Connecting Back to Emulated Home Link</h3>

<p>Now say that after the MN has disconnected to from the PMIPv6
                    MAG and registered to the HA via a foreign link, the MN
                    connects again to its emulated home link via one of the MAGs
                    in the PMIPv6 network.
</p>
<p>The MAG the MN connects to, is supposed to send a PBU to the
                    LMA. Since the MN maintains a relationship with the HA, the
                    LMA should provide the same prefix as before i.e., the HNP.
                    This means that when the MN receives the RA from the MAG,
                    which includes the a prefix matching its HNP, it will detect
                    that this emulated link is its home link.
</p>
<p>Note that the PBU sent by the MAG MUST NOT overwrite the
                    MIPv6 BCE pointing to the foreign link for this MN. This is
                    because the MAG can not possibly know whether the MN still
                    maintains the foreign link or not. Indeed, if the MN wants
                    to receive its traffic over the home link it will sent a
                    deregistration MIPv6 BU to the HA and remove the MIPv6 BCE.
                    When that happens packets will again reach the LMA and be
                    redirected according to the PMIPv6 BCE to the appropriate
                    MAG.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>This document does not introduce security issues
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>This document requires no action from IANA.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.giaretta-netlmm-mip-interactions">[I-D.giaretta-netlmm-mip-interactions]</a></td>
<td class="author-text">Giaretta, G., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-giaretta-netlmm-mip-interactions-02.txt">Interactions between PMIPv6 and MIPv6: scenarios and related issues</a>,&rdquo; draft-giaretta-netlmm-mip-interactions-02 (work in progress), November&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-giaretta-netlmm-mip-interactions-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mip6-bootstrapping-integrated-dhc">[I-D.ietf-mip6-bootstrapping-integrated-dhc]</a></td>
<td class="author-text">Chowdhury, K. and A. Yegin, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mip6-bootstrapping-integrated-dhc-05.txt">MIP6-bootstrapping for the Integrated Scenario</a>,&rdquo; draft-ietf-mip6-bootstrapping-integrated-dhc-05 (work in progress), July&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mip6-bootstrapping-integrated-dhc-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-monami6-multiplecoa">[I-D.ietf-monami6-multiplecoa]</a></td>
<td class="author-text">Ernst, T., Nagami, K., and V. Devarapalli, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-monami6-multiplecoa-06.txt">Multiple Care-of Addresses Registration</a>,&rdquo; draft-ietf-monami6-multiplecoa-06 (work in progress), February&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-monami6-multiplecoa-06.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-netlmm-proxymip6">[I-D.ietf-netlmm-proxymip6]</a></td>
<td class="author-text">Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K., and B. Patil, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-netlmm-proxymip6-11.txt">Proxy Mobile IPv6</a>,&rdquo; draft-ietf-netlmm-proxymip6-11 (work in progress), February&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-netlmm-proxymip6-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.soliman-monami6-flow-binding">[I-D.soliman-monami6-flow-binding]</a></td>
<td class="author-text">Soliman, H., Montavont, N., Fikouras, N., and K. Kuladinithi, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-soliman-monami6-flow-binding-05.txt">Flow Bindings in Mobile IPv6 and Nemo Basic Support</a>,&rdquo; draft-soliman-monami6-flow-binding-05 (work in progress), November&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-soliman-monami6-flow-binding-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3775">[RFC3775]</a></td>
<td class="author-text">Johnson, D., Perkins, C., and J. Arkko, &ldquo;<a href="http://tools.ietf.org/html/rfc3775">Mobility Support in IPv6</a>,&rdquo; RFC&nbsp;3775, June&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3775.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5026">[RFC5026]</a></td>
<td class="author-text">Giaretta, G., Kempf, J., and V. Devarapalli, &ldquo;<a href="http://tools.ietf.org/html/rfc5026">Mobile IPv6 Bootstrapping in Split Scenario</a>,&rdquo; RFC&nbsp;5026, October&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5026.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">George Tsirtsis</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Qualcomm</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:tsirtsis@googlemail.com">tsirtsis@googlemail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Suresh Krishnan</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ericsson</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:suresh.krishnan@ericsson.com">suresh.krishnan@ericsson.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
