<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>PCN 3-State Encoding Extension in a
    single DSCP</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="PCN 3-State Encoding Extension in a
    single DSCP">
<meta name="keywords" content="Quality of Service, QoS, Congestion Control, Congestion Notification, Tunnelling, Encapsulation &amp; Decapsulation, Differentiated Services, Integrated Services, Signalling, Protocol, Flow Admission Control, Flow Termination">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Congestion and Pre-Congestion</td><td class="header">B. Briscoe</td></tr>
<tr><td class="header">Notification</td><td class="header">T. Moncaster</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">BT</td></tr>
<tr><td class="header">Intended status: Experimental</td><td class="header">March 08, 2010</td></tr>
<tr><td class="header">Expires: September 9, 2010</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />PCN 3-State Encoding Extension in a
    single DSCP<br />draft-ietf-pcn-3-in-1-encoding-02</h1>

<h3>Abstract</h3>

<p>The objective of Pre-Congestion Notification (PCN) is to protect the
      quality of service (QoS) of inelastic flows within a Diffserv domain.
      The overall rate of the PCN-traffic is metered on every link in the
      PCN-domain, and PCN-packets are appropriately marked when certain
      configured rates are exceeded. The level of marking allows the boundary
      nodes to make decisions about whether to admit or block a new flow
      request, and (in abnormal circumstances) whether to terminate some of
      the existing flows, thereby protecting the QoS of previously admitted
      flows. This document specifies how such marks are to be encoded into the
      IP header by re-using the Explicit Congestion Notification (ECN)
      codepoints within this controlled domain. This encoding builds on the
      baseline encoding and provides for three PCN encoding states:
      Not-marked, Threshold-marked and Excess-traffic-marked.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 9, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the BSD License.</p>

<a name="pcn3in1_Introduction"></a><br /><hr />
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The objective of Pre-Congestion Notification (PCN) <a class='info' href='#RFC5559'>[RFC5559]<span> (</span><span class='info'>Eardley, P., &ldquo;Pre-Congestion Notification (PCN) Architecture,&rdquo; June&nbsp;2009.</span><span>)</span></a> is to protect the quality of service (QoS) of
      inelastic flows within a Diffserv domain, in a simple, scalable, and
      robust fashion. Two mechanisms are used: admission control, to decide
      whether to admit or block a new flow request, and (in abnormal
      circumstances) flow termination to decide whether to terminate some of
      the existing flows. To achieve this, the overall rate of PCN-traffic is
      metered on every link in the domain, and PCN-packets are appropriately
      marked when certain configured rates are exceeded. These configured
      rates are below the rate of the link thus providing notification to
      boundary nodes about overloads before any congestion occurs (hence
      "pre-congestion notification").
</p>
<p>The level of marking allows boundary nodes to make decisions about
      whether to admit or terminate. This is achieved by marking packets on
      interior nodes according to some metering function implemented at each
      node. Threshold-traffic-marking marks all PCN packets once they exceed
      the threshold-traffic-rate on a link while Excess-traffic-marking marks
      only those PCN packets that exceed the excess-traffic-rate, which is
      higher than the threshold-traffic-rate <a class='info' href='#RFC5670'>[RFC5670]<span> (</span><span class='info'>Eardley, P., &ldquo;Metering and Marking Behaviour of PCN-Nodes,&rdquo; November&nbsp;2009.</span><span>)</span></a>.
      These marks are monitored by the egress nodes of the PCN domain.
</p>
<p>To fully support these two types of marking, three encoding states
      are needed. The baseline encoding described in <a class='info' href='#RFC5696'>[RFC5696]<span> (</span><span class='info'>Moncaster, T., Briscoe, B., and M. Menth, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information,&rdquo; November&nbsp;2009.</span><span>)</span></a> provides for deployment scenarios that only
      require two PCN encoding states using a single Diffserv codepoint. This
      document describes an experimental extension to the baseline-encoding
      that adds a third PCN encoding state in the IP header, still using a
      single Diffserv codepoint. For brevity it will be called the 3-in-1 PCN
      Encoding.
</p>
<p>General PCN-related terminology is defined in the PCN architecture
      <a class='info' href='#RFC5559'>[RFC5559]<span> (</span><span class='info'>Eardley, P., &ldquo;Pre-Congestion Notification (PCN) Architecture,&rdquo; June&nbsp;2009.</span><span>)</span></a>, and terminology specific to packet
      encoding is defined in the PCN baseline encoding <a class='info' href='#RFC5696'>[RFC5696]<span> (</span><span class='info'>Moncaster, T., Briscoe, B., and M. Menth, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information,&rdquo; November&nbsp;2009.</span><span>)</span></a>. Note that <a class='info' href='#RFC5696'>[RFC5696]<span> (</span><span class='info'>Moncaster, T., Briscoe, B., and M. Menth, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information,&rdquo; November&nbsp;2009.</span><span>)</span></a>
      requires the PCN Working Group to maintain a list of all DSCPs used for
      PCN experiments.
</p>
<a name="pcn3in1_Changes"></a><br /><hr />
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Changes in This Version (to be removed by RFC Editor)</h3>

<p></p>
<blockquote class="text"><dl>
<dt>From draft-ietf-pcn-3-in-1-encoding-01 to -02:</dt>
<dd>
<ul class="text">
<li>Corrected mistake in introduction, which wrongly stated
                that the threshold-traffic rate is higher than the
                excess-traffic rate. Other minor corrections.
</li>
<li>Updated acks &amp; refs.
</li>
</ul>
</dd>
<dt>From draft-ietf-pcn-3-in-1-encoding-00 to -01:</dt>
<dd>
<ul class="text">
<li>Altered the wording to make sense if <a class='info' href='#I-D.ietf-tsvwg-ecn-tunnel'>[I&#8209;D.ietf&#8209;tsvwg&#8209;ecn&#8209;tunnel]<span> (</span><span class='info'>Briscoe, B., &ldquo;Tunnelling of Explicit Congestion Notification,&rdquo; March&nbsp;2010.</span><span>)</span></a> moves to proposed
                standard.
</li>
<li>References updated
</li>
</ul>
</dd>
<dt>From draft-briscoe-pcn-3-in-1-encoding-00 to draft-ietf-pcn-3-in-1-encoding-00:</dt>
<dd>
<ul class="text">
<li>Filename changed to draft-ietf-pcn-3-in-1-encoding.
</li>
<li>Introduction altered to include new template description of
                PCN.
</li>
<li>References updated.
</li>
<li>Terminology brought into line with <a class='info' href='#RFC5670'>[RFC5670]<span> (</span><span class='info'>Eardley, P., &ldquo;Metering and Marking Behaviour of PCN-Nodes,&rdquo; November&nbsp;2009.</span><span>)</span></a>.
</li>
<li>Minor corrections.
</li>
</ul>
</dd>
</dl></blockquote>

<a name="pcn3in1_Reqs_Lang"></a><br /><hr />
<a name="rfc.section.2"></a><h3>2.&nbsp;
Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p>
<a name="pcn3in1_Requirement"></a><br /><hr />
<a name="rfc.section.3"></a><h3>3.&nbsp;
The Requirement for Three PCN Encoding States</h3>

<p>The PCN architecture <a class='info' href='#RFC5559'>[RFC5559]<span> (</span><span class='info'>Eardley, P., &ldquo;Pre-Congestion Notification (PCN) Architecture,&rdquo; June&nbsp;2009.</span><span>)</span></a> describes
      proposed PCN schemes that expect traffic to be metered and marked using
      both Threshold and Excess Traffic schemes. In order to achieve this it
      is necessary to allow for three PCN encoding states: one as a Not Marked
      (NM) state and the other two to distinguish these two levels of marking
      severity <a class='info' href='#RFC5670'>[RFC5670]<span> (</span><span class='info'>Eardley, P., &ldquo;Metering and Marking Behaviour of PCN-Nodes,&rdquo; November&nbsp;2009.</span><span>)</span></a>. The way tunnels processed the
      ECN field before <a class='info' href='#I-D.ietf-tsvwg-ecn-tunnel'>[I&#8209;D.ietf&#8209;tsvwg&#8209;ecn&#8209;tunnel]<span> (</span><span class='info'>Briscoe, B., &ldquo;Tunnelling of Explicit Congestion Notification,&rdquo; March&nbsp;2010.</span><span>)</span></a>
      severely limited how to encode these states.
</p>
<p>The two bit ECN field seems to offer four possible encoding states,
      but one (00) is set aside for traffic controlled by transports that do
      not understand PCN marking <a class='info' href='#RFC5696'>[RFC5696]<span> (</span><span class='info'>Moncaster, T., Briscoe, B., and M. Menth, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information,&rdquo; November&nbsp;2009.</span><span>)</span></a>, so it would
      be irregular and risky to use it as a PCN encoding state. Of the three
      remaining ECN codepoints, only one (11) can be introduced by a congested
      node within a tunnel and still survive the decapsulation behaviour of a
      tunnel egress not updated to comply with <a class='info' href='#I-D.ietf-tsvwg-ecn-tunnel'>[I&#8209;D.ietf&#8209;tsvwg&#8209;ecn&#8209;tunnel]<span> (</span><span class='info'>Briscoe, B., &ldquo;Tunnelling of Explicit Congestion Notification,&rdquo; March&nbsp;2010.</span><span>)</span></a>. The two remaining codepoints
      are (10) and (01). But if a node within the tunnel used either of these
      two remaining codepoints to try to mark packets with a second severity
      level, a tunnel not updated to comply with <a class='info' href='#I-D.ietf-tsvwg-ecn-tunnel'>[I&#8209;D.ietf&#8209;tsvwg&#8209;ecn&#8209;tunnel]<span> (</span><span class='info'>Briscoe, B., &ldquo;Tunnelling of Explicit Congestion Notification,&rdquo; March&nbsp;2010.</span><span>)</span></a> would remove this marking on
      decapsulation. The ECN field was constrained to two marking states in
      this way irrespective of which earlier ECN tunnelling specification the
      tunnel complied with, whether regular IP in IP tunnelling <a class='info' href='#RFC3168'>[RFC3168]<span> (</span><span class='info'>Ramakrishnan, K., Floyd, S., and D. Black, &ldquo;The Addition of Explicit Congestion Notification (ECN) to IP,&rdquo; September&nbsp;2001.</span><span>)</span></a> or IPsec tunnelling <a class='info' href='#RFC4301'>[RFC4301]<span> (</span><span class='info'>Kent, S. and K. Seo, &ldquo;Security Architecture for the Internet Protocol,&rdquo; December&nbsp;2005.</span><span>)</span></a>.
</p>
<p>One way to provide another encoding state that survives tunnelling is
      to use a second Diffserv codepoint <a class='info' href='#I-D.ietf-pcn-3-state-encoding'>[I&#8209;D.ietf&#8209;pcn&#8209;3&#8209;state&#8209;encoding]<span> (</span><span class='info'>Briscoe, B., Moncaster, T., and M. Menth, &ldquo;A PCN encoding using 2 DSCPs to provide 3 or more states,&rdquo; February&nbsp;2010.</span><span>)</span></a>. Instead, to avoid
      wasting scarce Diffserv codepoints, a network operator can require
      tunnels in a PCN region to comply with <a class='info' href='#I-D.ietf-tsvwg-ecn-tunnel'>[I&#8209;D.ietf&#8209;tsvwg&#8209;ecn&#8209;tunnel]<span> (</span><span class='info'>Briscoe, B., &ldquo;Tunnelling of Explicit Congestion Notification,&rdquo; March&nbsp;2010.</span><span>)</span></a>, thus removing the
      constraints imposed by earlier tunnelling specifications.
</p>
<p>Therefore this document presupposes tunnels in the PCN region comply
      with the newly proposed decapsulation rules defined in <a class='info' href='#I-D.ietf-tsvwg-ecn-tunnel'>[I&#8209;D.ietf&#8209;tsvwg&#8209;ecn&#8209;tunnel]<span> (</span><span class='info'>Briscoe, B., &ldquo;Tunnelling of Explicit Congestion Notification,&rdquo; March&nbsp;2010.</span><span>)</span></a>. Then the constraints of
      standard tunnels no longer apply so this document can define a 3-state
      encoding for PCN within one Diffserv codepoint.
</p>
<a name="pcn3in1_Encoding"></a><br /><hr />
<a name="rfc.section.4"></a><h3>4.&nbsp;
The 3-in-1 PCN Encoding</h3>

<p>The 3-in-1 PCN Encoding scheme is based closely on the baseline
      encoding defined in <a class='info' href='#RFC5696'>[RFC5696]<span> (</span><span class='info'>Moncaster, T., Briscoe, B., and M. Menth, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information,&rdquo; November&nbsp;2009.</span><span>)</span></a> so that there will be
      no compatibility issues if a PCN-domain evolves from using the baseline
      encoding scheme to the experimental scheme described here. The exact
      manner in which the PCN encoding states are carried in the IP header is
      shown in <a class='info' href='#pcn3in1_Fig_Encoding'>Figure&nbsp;1<span> (</span><span class='info'>3-in-1 PCN Encoding</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="pcn3in1_Fig_Encoding"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>      +--------+----------------------------------------------------+
      |        |           Codepoint in ECN field of IP header      |
      |  DSCP  |               &lt;RFC3168 codepoint name&gt;             |
      |        +--------------+-------------+-------------+---------+
      |        | 00 &lt;Not-ECT&gt; | 10 &lt;ECT(0)&gt; | 01 &lt;ECT(1)&gt; | 11 &lt;CE&gt; |
      +--------+--------------+-------------+-------------+---------+
      | DSCP n |    Not-PCN   |      NM     |     ThM     |   ETM   |
      +--------+--------------+-------------+-------------+---------+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: 3-in-1 PCN Encoding&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>In <a class='info' href='#pcn3in1_Fig_Encoding'>Figure&nbsp;1<span> (</span><span class='info'>3-in-1 PCN Encoding</span><span>)</span></a> the 3 PCN states are
      encoded in the ECN field <a class='info' href='#RFC3168'>[RFC3168]<span> (</span><span class='info'>Ramakrishnan, K., Floyd, S., and D. Black, &ldquo;The Addition of Explicit Congestion Notification (ECN) to IP,&rdquo; September&nbsp;2001.</span><span>)</span></a> of an IP packet
      with its Diffserv field <a class='info' href='#RFC2474'>[RFC2474]<span> (</span><span class='info'>Nichols, K., Blake, S., Baker, F., and D. Black, &ldquo;Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers,&rdquo; December&nbsp;1998.</span><span>)</span></a> set to DSCP n,
      which is any PCN-Compatible DiffServ codepoint as defined in Section 4.2
      of the PCN baseline encoding <a class='info' href='#RFC5696'>[RFC5696]<span> (</span><span class='info'>Moncaster, T., Briscoe, B., and M. Menth, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information,&rdquo; November&nbsp;2009.</span><span>)</span></a>). The PCN
      codepoint of a packet defines its marking state as follows:</p>
<blockquote class="text"><dl>
<dt>Not-PCN:</dt>
<dd>The packet is controlled by a transport that
          does not understand PCN marking, therefore the only valid action to
          notify congestion is to drop the packet;
</dd>
<dt>NM:</dt>
<dd>Not marked. A packet in the NM state has not (yet)
          had its marking state changed to the ThM or ETM states, but it may
          be changed to one of these states by a node experiencing congestion
          or pre-congestion;
</dd>
<dt>ThM:</dt>
<dd>Threshold-marked. Such a packet has had its
          marking state changed by the threshold-meter function <a class='info' href='#RFC5670'>[RFC5670]<span> (</span><span class='info'>Eardley, P., &ldquo;Metering and Marking Behaviour of PCN-Nodes,&rdquo; November&nbsp;2009.</span><span>)</span></a>;
</dd>
<dt>ETM:</dt>
<dd>Excess-traffic-marked. Such a packet has had its
          marking state changed by the excess-traffic-meter function <a class='info' href='#RFC5670'>[RFC5670]<span> (</span><span class='info'>Eardley, P., &ldquo;Metering and Marking Behaviour of PCN-Nodes,&rdquo; November&nbsp;2009.</span><span>)</span></a>.
</dd>
</dl></blockquote>

<p>Packets marked NM, ThM or ETM are termed PCN-packets. Their entry
      into the pcn-domain is controlled by edge nodes that understand how to
      process PCN markings <a class='info' href='#RFC5559'>[RFC5559]<span> (</span><span class='info'>Eardley, P., &ldquo;Pre-Congestion Notification (PCN) Architecture,&rdquo; June&nbsp;2009.</span><span>)</span></a>.
</p>
<a name="pcn3in1_Compliant_Node_Behaviour"></a><br /><hr />
<a name="rfc.section.5"></a><h3>5.&nbsp;
Behaviour of a PCN Node Compliant with the 3-in-1 PCN Encoding</h3>

<p>To be compliant with the 3-in-1 PCN Encoding, an PCN interior node
      behaves as follows:</p>
<ul class="text">
<li>Except where explicitly stated otherwise, it MUST comply with the
          baseline encoding specified in <a class='info' href='#RFC5696'>[RFC5696]<span> (</span><span class='info'>Moncaster, T., Briscoe, B., and M. Menth, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information,&rdquo; November&nbsp;2009.</span><span>)</span></a>
</li>
<li>It MUST change NM to ThM if the threshold-meter function
          indicates to mark the packet.
</li>
<li>It MUST change NM or ThM to ETM if the excess-traffic-meter
          function indicates to mark the packet.
</li>
<li>It MUST NOT change Not-PCN to a PCN-Enabled codepoint and MUST
          NOT change a PCN-Enabled codepoint to Not-PCN;
</li>
<li>It MUST NOT change ThM to NM;
</li>
<li>It MUST NOT change ETM to ThM or to NM;
</li>
</ul><p>In other words, a PCN interior node may increase the severity
      of packet marking but it MUST NOT decrease it, where the order of
      severity increases from NM through ThM to ETM.
</p>
<a name="pcn3in1_IANA"></a><br /><hr />
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>This memo includes no request to IANA.
</p>
<p>Note to RFC Editor: this section may be removed on publication as an
      RFC.
</p>
<a name="pcn3in1_Sec_Consider"></a><br /><hr />
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>The security concerns relating to this extended PCN encoding are the
      same as those in <a class='info' href='#RFC5696'>[RFC5696]<span> (</span><span class='info'>Moncaster, T., Briscoe, B., and M. Menth, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information,&rdquo; November&nbsp;2009.</span><span>)</span></a>.
</p>
<a name="pcn3in1_Conclusions"></a><br /><hr />
<a name="rfc.section.8"></a><h3>8.&nbsp;
Conclusions</h3>

<p>The 3-in-1 PCN Encoding provides three states to encode PCN markings
      in the ECN field of an IP packet using just one Diffserv codepoint. One
      state is for not marked packets while the two others are for PCN nodes
      to mark packets with increasing levels of severity. Use of this encoding
      presupposes that any tunnels in the PCN region have been updated to
      comply with <a class='info' href='#I-D.ietf-tsvwg-ecn-tunnel'>[I&#8209;D.ietf&#8209;tsvwg&#8209;ecn&#8209;tunnel]<span> (</span><span class='info'>Briscoe, B., &ldquo;Tunnelling of Explicit Congestion Notification,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</p>
<a name="pcn3in1_Acknowledgements"></a><br /><hr />
<a name="rfc.section.9"></a><h3>9.&nbsp;
Acknowledgements</h3>

<p>Thanks to Phil Eardley, Teco Boot, Kwok Ho Chan and Michael Menth for
      reviewing this.
</p>
<a name="pcn3in1_Comments_Solicited"></a><br /><hr />
<a name="rfc.section.10"></a><h3>10.&nbsp;
Comments Solicited</h3>

<p>To be removed by RFC Editor: Comments and questions are encouraged
      and very welcome. They can be addressed to the IETF Congestion and
      Pre-Congestion working group mailing list &lt;pcn@ietf.org&gt;, and/or
      to the authors.
</p>
<a name="rfc.references"></a><br /><hr />
<a name="rfc.section.11"></a><h3>11.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<h3>11.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-tsvwg-ecn-tunnel">[I-D.ietf-tsvwg-ecn-tunnel]</a></td>
<td class="author-text">Briscoe, B., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-tsvwg-ecn-tunnel-08.txt">Tunnelling of Explicit Congestion Notification</a>,&rdquo; draft-ietf-tsvwg-ecn-tunnel-08 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-tsvwg-ecn-tunnel-08.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2474">[RFC2474]</a></td>
<td class="author-text"><a href="mailto:kmn@cisco.com">Nichols, K.</a>, <a href="mailto:slblake@torrentnet.com">Blake, S.</a>, <a href="mailto:fred@cisco.com">Baker, F.</a>, and <a href="mailto:black_david@emc.com">D. Black</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2474">Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers</a>,&rdquo; RFC&nbsp;2474, December&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2474.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2474.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2474.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3168">[RFC3168]</a></td>
<td class="author-text">Ramakrishnan, K., Floyd, S., and D. Black, &ldquo;<a href="http://tools.ietf.org/html/rfc3168">The Addition of Explicit Congestion Notification (ECN) to IP</a>,&rdquo; RFC&nbsp;3168, September&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3168.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5559">[RFC5559]</a></td>
<td class="author-text">Eardley, P., &ldquo;<a href="http://tools.ietf.org/html/rfc5559">Pre-Congestion Notification (PCN) Architecture</a>,&rdquo; RFC&nbsp;5559, June&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5559.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5670">[RFC5670]</a></td>
<td class="author-text">Eardley, P., &ldquo;<a href="http://tools.ietf.org/html/rfc5670">Metering and Marking Behaviour of PCN-Nodes</a>,&rdquo; RFC&nbsp;5670, November&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5670.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5696">[RFC5696]</a></td>
<td class="author-text">Moncaster, T., Briscoe, B., and M. Menth, &ldquo;<a href="http://tools.ietf.org/html/rfc5696">Baseline Encoding and Transport of Pre-Congestion Information</a>,&rdquo; RFC&nbsp;5696, November&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5696.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<h3>11.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-pcn-3-state-encoding">[I-D.ietf-pcn-3-state-encoding]</a></td>
<td class="author-text">Briscoe, B., Moncaster, T., and M. Menth, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-pcn-3-state-encoding-01.txt">A PCN encoding using 2 DSCPs to provide 3 or more states</a>,&rdquo; draft-ietf-pcn-3-state-encoding-01 (work in progress), February&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-pcn-3-state-encoding-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4301">[RFC4301]</a></td>
<td class="author-text">Kent, S. and K. Seo, &ldquo;<a href="http://tools.ietf.org/html/rfc4301">Security Architecture for the Internet Protocol</a>,&rdquo; RFC&nbsp;4301, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4301.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bob Briscoe</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">BT</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">B54/77, Adastral Park</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martlesham Heath</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ipswich  IP5 3RE</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">UK</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+44 1473 645196</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:bob.briscoe@bt.com">bob.briscoe@bt.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://bobbriscoe.net/">http://bobbriscoe.net/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Toby Moncaster</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">BT</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">c/o B54/70, Adastral Park</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martlesham Heath</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ipswich  IP5 3RE</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">UK</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+44 1206 332805</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:toby.moncaster@bt.com">toby.moncaster@bt.com</a></td></tr>
</table>
</body></html>
