



SPRING Working Group                                               C. Li
Internet-Draft                                       Huawei Technologies
Intended status: Standards Track                                W. Cheng
Expires: December 28, 2019                                  China Mobile
                                                                 M. Chen
                                                                D. Dhody
                                                                   Z. Li
                                                                 J. Dong
                                                     Huawei Technologies
                                                               R. Gandhi
                                                     Cisco Systems, Inc.
                                                           June 26, 2019


            Path Segment for SRv6 (Segment Routing in IPv6)
                  draft-li-spring-srv6-path-segment-01

Abstract

   Segment Routing (SR) allows for a flexible definition of end-to-end
   paths by encoding paths as sequences of topological sub-paths, called
   "segments".  Segment routing architecture can be implemented over an
   MPLS data plane as well as an IPv6 data plane.

   Further, Path Segment has been defined to identify an SR path in SR-
   MPLS networks, and used for various use-cases such as end-to-end SR
   Path Protection and Performance Measurement (PM) of an SR path.
   Similar to SR-MPLS, this document defines Path Segment in SRv6
   networks to identify an SRv6 path.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on December 28, 2019.





Li, et al.              Expires December 28, 2019               [Page 1]

Internet-Draft              SRv6 Path Segment                  June 2019


Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   3
     1.2.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   3
   2.  SRv6 Path Segment . . . . . . . . . . . . . . . . . . . . . .   4
   3.  Operation . . . . . . . . . . . . . . . . . . . . . . . . . .   4
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   6
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   6
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   6
     7.2.  Informative References  . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   Segment routing (SR) [RFC8402] is a source routing paradigm that
   explicitly indicates the forwarding path for packets at the ingress
   node by inserting an ordered list of instructions, called segments.

   When segment routing is deployed on MPLS dataplane, called SR-MPLS
   [I-D.ietf-spring-segment-routing-mpls], a segment is an MPLS label.
   When segment routing is deployed on IPv6 dataplane, called SRv6
   [I-D.ietf-6man-segment-routing-header], a segment is a 128 bit value,
   and it can be an IPv6 address of a local interface but it does not
   have to.  For supporting SR, an extended header called Segment
   Routing Header (SRH), which contains a list of SIDs and several
   needed information such as Segments Left, has been defined in
   [I-D.ietf-6man-segment-routing-header].

   In an SR-MPLS network, when a packet is transmitted along an SR path,
   the labels in the MPLS label stack will be swapped or popped, so no



Li, et al.              Expires December 28, 2019               [Page 2]

Internet-Draft              SRv6 Path Segment                  June 2019


   label or only the last label may be left in the MPLS label stack when
   the packet reaches the egress node.  Thus, the egress node can not
   determine from which ingress node or SR path the packet comes.  For
   identifying an SR-MPLS path, Path Segment is defined in
   [I-D.ietf-spring-mpls-path-segment].

   Likewise, a path needs to be identified in an SRv6 network for
   several use cases such as binding bidirectional path
   [I-D.li-pce-sr-bidir-path] and end-to-end performance measurement
   [I-D.gandhi-spring-udp-pm].  A SRv6 path can be identified by the
   full segment list that made up of several SRv6 segments.  However,
   the segment list may not be a good key to identify an SRv6 path,
   since the the length of segment list is too long and flexible
   according to the number of SIDs.

   This document defines a new SRv6 segment called "SRv6 Path Segment"
   to identify an SRv6 path.  Using of Path Segment as an SRv6 SID
   (instead of path ID carried by an SRH TLV) will see benefit in
   performance and also ease of using the same concept in SR,
   irrespective of SR-MPLS and SRv6 data planes.  The Path Segment is
   inserted as the last segment in the segment list and will not affect
   the order of the original SID list.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

1.2.  Terminology

   DM: Delay Measurement.

   LM: Loss Measurement.

   MPLS: Multiprotocol Label Switching.

   PM: Performance Measurement.

   PSID: Path Segment ID.

   SID: Segment ID.

   SL: Segment List.

   SR: Segment Routing.



Li, et al.              Expires December 28, 2019               [Page 3]

Internet-Draft              SRv6 Path Segment                  June 2019


   SR-MPLS: Segment Routing with MPLS data plane.

   SRH: Segment Routing Header.

   PSID: Path Segment ID.

   PSP: Penultimate Segment Popping.

   Further, this document makes use of the terms defined in [RFC8402]
   and [I-D.ietf-spring-srv6-network-programming].

2.  SRv6 Path Segment

   As defined in [I-D.ietf-spring-srv6-network-programming], a SRv6
   segment is a 128 bit value, which can be present as LOC:FUNCT.

   For identifying an SRv6 path, this document defines a new segment
   called SRv6 Path Segment.

   A Path Segment (consisted of LOC and FUNCT part) can identify an SRv6
   path within an SRv6 domain.  Also, the SRv6 Path Segment may be used
   to identify an SRv6 Policy, its Candidate-path or a SID-List
   [I-D.ietf-spring-segment-routing-policy] terminating on an egress
   node depending on the use-case.

   Note that, based on the use-case, the different SID-Lists of SR
   Policy may use the same SRv6 Path Segment.

3.  Operation

   A Path Segment is a local segment of egress node, it is allocated by
   the egress node.  A Path Segment can be allocated by several ways,
   such as CLI, BGP [I-D.li-idr-sr-policy-path-segment-distribution],
   PCEP [I-D.li-pce-sr-path-segment] or other ways.  The procedure of
   Path Segment allocation is out of scope of this document.

   When the Path Segment is allocated by the egress, it MUST be
   distributed to the ingress node at minimum.  In this case, the
   transit nodes do not know how to process the Path Segment.

   A Path Segment is used for path identification and it MUST NOT be
   copied to the IPv6 destination address.

   The SRv6 Path Segment MUST be inserted as the last entry in the SID
   list without affecting the segment left field in the SRH.  The last
   entry field in SRH should be set as the index of the Path Segment,
   which is the last entry in the SID list.  In this case, Path Segment
   presenting to a transit node is an error condition.



Li, et al.              Expires December 28, 2019               [Page 4]

Internet-Draft              SRv6 Path Segment                  June 2019


   Also, PSP of the SRH MUST be disabled.

   The Path Segment SHOULD appear only once in a SID list, and the one
   that appears at the last entry in the SID list will be processed
   while the rests will be ignored.

       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       |            Segment List[0] (128 bits IPv6 address)            |
       |                                                               |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       |                                                               |
       |                              ...                              |
       |                                                               |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       |            Segment List[n-1] (128 bits IPv6 address)          |
       |                                                               |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       |     Path Segment(Segment List[n], 128 bits IPv6 address)      |
       |                                                               |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                 Figure 1.  SRv6 Path Segment in SID List

   If an egress node supports Path Segment processing and related OAM
   mechanisms are enabled, the node will inspect the last entry in the
   SID list to obtain the Path Segment.  The behavior of Path Segment
   related function will be defined in the future version of this draft
   or related use-case drafts.

4.  IANA Considerations

   This document does not require any IANA actions.

5.  Security Considerations

   This document does not introduce additional security requirements and
   mechanisms other than the ones described in [RFC8402].






Li, et al.              Expires December 28, 2019               [Page 5]

Internet-Draft              SRv6 Path Segment                  June 2019


6.  Acknowledgements

   The authors would like to thank Zafar Ali for his valuable comments
   and suggestions.

7.  References

7.1.  Normative References

   [I-D.ietf-6man-segment-routing-header]
              Filsfils, C., Dukes, D., Previdi, S., Leddy, J.,
              Matsushima, S., and d. daniel.voyer@bell.ca, "IPv6 Segment
              Routing Header (SRH)", draft-ietf-6man-segment-routing-
              header-21 (work in progress), June 2019.

   [I-D.ietf-spring-srv6-network-programming]
              Filsfils, C., Camarillo, P., Leddy, J.,
              daniel.voyer@bell.ca, d., Matsushima, S., and Z. Li, "SRv6
              Network Programming", draft-ietf-spring-srv6-network-
              programming-00 (work in progress), April 2019.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

7.2.  Informative References

   [I-D.gandhi-spring-udp-pm]
              Gandhi, R., Filsfils, C., daniel.voyer@bell.ca, d.,
              Salsano, S., Ventre, P., and M. Chen, "UDP Path for In-
              band Performance Measurement for Segment Routing
              Networks", draft-gandhi-spring-udp-pm-02 (work in
              progress), September 2018.








Li, et al.              Expires December 28, 2019               [Page 6]

Internet-Draft              SRv6 Path Segment                  June 2019


   [I-D.ietf-spring-mpls-path-segment]
              Cheng, W., Li, H., Chen, M., Gandhi, R., and R. Zigler,
              "Path Segment in MPLS Based Segment Routing Network",
              draft-ietf-spring-mpls-path-segment-00 (work in progress),
              March 2019.

   [I-D.ietf-spring-segment-routing-mpls]
              Bashandy, A., Filsfils, C., Previdi, S., Decraene, B.,
              Litkowski, S., and R. Shakir, "Segment Routing with MPLS
              data plane", draft-ietf-spring-segment-routing-mpls-22
              (work in progress), May 2019.

   [I-D.ietf-spring-segment-routing-policy]
              Filsfils, C., Sivabalan, S., daniel.voyer@bell.ca, d.,
              bogdanov@google.com, b., and P. Mattes, "Segment Routing
              Policy Architecture", draft-ietf-spring-segment-routing-
              policy-03 (work in progress), May 2019.

   [I-D.li-idr-sr-policy-path-segment-distribution]
              Li, C., Chen, M., Dong, J., and Z. Li, "Segment Routing
              Policies for Path Segment and Bidirectional Path", draft-
              li-idr-sr-policy-path-segment-distribution-01 (work in
              progress), October 2018.

   [I-D.li-pce-sr-bidir-path]
              Li, C., Chen, M., Cheng, W., Li, Z., Dong, J., Gandhi, R.,
              and Q. Xiong, "PCEP Extensions for Associated
              Bidirectional Segment Routing (SR) Paths", draft-li-pce-
              sr-bidir-path-05 (work in progress), March 2019.

   [I-D.li-pce-sr-path-segment]
              Li, C., Chen, M., Cheng, W., Dong, J., Li, Z., Gandhi, R.,
              and Q. Xiong, "Path Computation Element Communication
              Protocol (PCEP) Extension for Path Segment in Segment
              Routing (SR)", draft-li-pce-sr-path-segment-05 (work in
              progress), March 2019.

Authors' Addresses

   Cheng Li
   Huawei Technologies

   Email: chengli13@huawei.com








Li, et al.              Expires December 28, 2019               [Page 7]

Internet-Draft              SRv6 Path Segment                  June 2019


   Weiqiang Cheng
   China Mobile

   Email: chengweiqiang@chinamobile.com


   Mach(Guoyi) Chen
   Huawei Technologies

   Email: mach.chen@huawei.com


   Dhruv Dhody
   Huawei Technologies
   Divyashree Techno Park, Whitefield
   Bangalore, Karnataka  560066
   India

   Email: dhruv.ietf@gmail.com


   Zhenbin Li
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Rd.
   Beijing  100095
   China

   Email: lizhenbin@huawei.com


   Jie Dong
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Rd.
   Beijing  100095
   China

   Email: jie.dong@huawei.com


   Rakesh Gandhi
   Cisco Systems, Inc.
   Canada

   Email: rgandhi@cisco.com







Li, et al.              Expires December 28, 2019               [Page 8]
