<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>JMAP for Sieve Scripts</title>
<meta content="Kenneth Murchison" name="author">
<meta content="
       This document specifies a data model for managing Sieve
      scripts on a server using the JSON Meta Application Protocol (JMAP).
       
    " name="description">
<meta content="xml2rfc 3.10.0" name="generator">
<meta content="JMAP" name="keyword">
<meta content="JSON" name="keyword">
<meta content="Sieve" name="keyword">
<meta content="draft-ietf-jmap-sieve-06" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.10.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 58.2.0
    six 1.16.0
-->
<link href="/tmp/draft-ietf-jmap-sieve-i6538mu3.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">JMAP Sieve</td>
<td class="right">November 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Murchison</td>
<td class="center">Expires 12 May 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">JMAP</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-jmap-sieve-05</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-11-08" class="published">8 November 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-05-12">12 May 2022</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">K. Murchison</div>
<div class="org">Fastmail</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">JMAP for Sieve Scripts</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document specifies a data model for managing Sieve
      scripts on a server using the JSON Meta Application Protocol (JMAP).<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 12 May 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-notational-conventions" class="xref">Notational Conventions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1"><a href="#section-1.3" class="xref">1.3</a>.  <a href="#name-addition-to-the-capabilitie" class="xref">Addition to the Capabilities Object</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3.2.1">
                    <p id="section-toc.1-1.1.2.3.2.1.1" class="keepWithNext"><a href="#section-1.3.1" class="xref">1.3.1</a>.  <a href="#name-urnietfparamsjmapsieve" class="xref">urn:ietf:params:jmap:sieve</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-sieve-scripts" class="xref">Sieve Scripts</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-sievescript-get" class="xref">SieveScript/get</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.1">
                    <p id="section-toc.1-1.2.2.1.2.1.1"><a href="#section-2.1.1" class="xref">2.1.1</a>.  <a href="#name-examples" class="xref">Examples</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-sievescript-set" class="xref">SieveScript/set</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.1">
                    <p id="section-toc.1-1.2.2.2.2.1.1"><a href="#section-2.2.1" class="xref">2.2.1</a>.  <a href="#name-examples-2" class="xref">Examples</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-sievescript-query" class="xref">SieveScript/query</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="xref">2.4</a>.  <a href="#name-sievescript-validate" class="xref">SieveScript/validate</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a href="#section-2.5" class="xref">2.5</a>.  <a href="#name-sievescript-test" class="xref">SieveScript/test</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5.2.1">
                    <p id="section-toc.1-1.2.2.5.2.1.1"><a href="#section-2.5.1" class="xref">2.5.1</a>.  <a href="#name-example" class="xref">Example</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-compatibility-with-jmap-vac" class="xref">Compatibility with JMAP Vacation Response</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-jmap-capability-registratio" class="xref">JMAP Capability Registration for "sieve"</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-jmap-error-codes-registry" class="xref">JMAP Error Codes Registry</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.1">
                    <p id="section-toc.1-1.5.2.2.2.1.1"><a href="#section-5.2.1" class="xref">5.2.1</a>.  <a href="#name-invalidscript" class="xref">invalidScript</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.2">
                    <p id="section-toc.1-1.5.2.2.2.2.1"><a href="#section-5.2.2" class="xref">5.2.2</a>.  <a href="#name-scriptisactive" class="xref">scriptIsActive</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#appendix-A" class="xref">Appendix A</a>.  <a href="#name-change-history-to-be-remove" class="xref">Change History
      (To be removed by RFC Editor before publication)</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-B" class="xref"></a><a href="#name-authors-address" class="xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1"><span><a href="#RFC8620" class="xref">JMAP</a> [<a href="#RFC8620" class="xref">RFC8620</a>]</span>
      (JSON Meta Application Protocol) is a generic protocol for
      synchronizing data, such as mail, calendars or contacts, between
      a client and a server.

      It is optimized for mobile and web environments, and aims to
      provide a consistent interface to different data types.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">This specification defines a data model for managing
      <span><a href="#RFC5228" class="xref">Sieve</a> [<a href="#RFC5228" class="xref">RFC5228</a>]</span> scripts on
      a server using JMAP.

      The data model is designed to allow a server to provide
      consistent access to the same scripts via
      <span><a href="#RFC5804" class="xref">ManageSieve</a> [<a href="#RFC5804" class="xref">RFC5804</a>]</span> as
      well as JMAP, however the functionality offered over the two
      protocols may differ.<a href="#section-1-2" class="pilcrow">¶</a></p>
<section id="section-1.1">
        <h3 id="name-notational-conventions">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-notational-conventions" class="section-name selfRef">Notational Conventions</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
        "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT
        RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be
        interpreted as described in BCP 14
        <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>
          <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when,
        they appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">Type signatures, examples, and property descriptions in
        this document follow the conventions established in Section
        1.1 of <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>.
        Data types defined in the
        core specification are also used in this document.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">Servers MUST support all properties specified for the new
        data type defined in this document.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<p id="section-1.1-4">For compatibility with publishing requirements, line breaks
        have been inserted inside long JSON strings, with the
        following continuation lines indented.  To form the valid JSON
        example, any line breaks inside a string must be replaced with
        a space and any other white space after the line break
        removed.<a href="#section-1.1-4" class="pilcrow">¶</a></p>
</section>
<section id="section-1.2">
        <h3 id="name-terminology">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
        </h3>
<p id="section-1.2-1">The same terminology is used in this document as in the
        core JMAP specification,
        see <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 1.6.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<p id="section-1.2-2">The term SieveScript (with this specific capitalization) is
        used to refer to the data type defined in this document and
        instances of those data types.<a href="#section-1.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-1.3">
        <h3 id="name-addition-to-the-capabilitie">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-addition-to-the-capabilitie" class="section-name selfRef">Addition to the Capabilities Object</a>
        </h3>
<p id="section-1.3-1">The capabilities object is returned as part of the JMAP
        Session object; see <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>,
        Section 2.
        This document defines one additional capability URI.<a href="#section-1.3-1" class="pilcrow">¶</a></p>
<div id="capa">
<section id="section-1.3.1">
          <h4 id="name-urnietfparamsjmapsieve">
<a href="#section-1.3.1" class="section-number selfRef">1.3.1. </a><a href="#name-urnietfparamsjmapsieve" class="section-name selfRef">urn:ietf:params:jmap:sieve</a>
          </h4>
<p id="section-1.3.1-1">This represents support for the SieveScript data type and
          associated API methods.
          The value of this property in the JMAP Session
          capabilities property is an empty object.<a href="#section-1.3.1-1" class="pilcrow">¶</a></p>
<p id="section-1.3.1-2">The value of this property in an account's
          accountCapabilities property is an object that MUST contain
          the following information on server capabilities:<a href="#section-1.3.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.3.1-3.1">
              <p id="section-1.3.1-3.1.1"><strong>maxSizeScriptName</strong>:
                <code>UnsignedInt</code><a href="#section-1.3.1-3.1.1" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.1.2">
                The maximum length, in (UTF-8) octets, allowed for the
                name of a SieveScript.
                For compatibility with ManageSieve, this MUST be at
                least 512 (up to 128 Unicode characters).<a href="#section-1.3.1-3.1.2" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.1.3"></p>
</li>
            <li class="normal" id="section-1.3.1-3.2">
              <p id="section-1.3.1-3.2.1"><strong>maxSizeScript</strong>:
                <code>UnsignedInt|null</code><a href="#section-1.3.1-3.2.1" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.2.2">
                The maximum size (in octets) of a Sieve script the
                server is willing to store for the user,
                or <code>null</code> for no limit.<a href="#section-1.3.1-3.2.2" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.2.3"></p>
</li>
            <li class="normal" id="section-1.3.1-3.3">
              <p id="section-1.3.1-3.3.1"><strong>maxNumberScripts</strong>:
                <code>UnsignedInt|null</code><a href="#section-1.3.1-3.3.1" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.3.2">
                The maximum number of Sieve scripts the server is
                willing to store for the user,
                or <code>null</code> for no limit.<a href="#section-1.3.1-3.3.2" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.3.3"></p>
</li>
            <li class="normal" id="section-1.3.1-3.4">
              <p id="section-1.3.1-3.4.1"><strong>maxNumberRedirects</strong>:
                <code>UnsignedInt|null</code><a href="#section-1.3.1-3.4.1" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.4.2">
                The maximum number of Sieve "redirect" actions a
                script can perform during a single evaluation
                or <code>null</code> for no limit.
                Note that this is different from the total number of
                "redirect" actions a script can contain.<a href="#section-1.3.1-3.4.2" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.4.3"></p>
</li>
            <li class="normal" id="section-1.3.1-3.5">
              <p id="section-1.3.1-3.5.1"><strong>sieveExtensions</strong>:
                <code>String[]</code><a href="#section-1.3.1-3.5.1" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.5.2">
                A list of case-sensitive Sieve capability strings (as
                listed in Sieve "require" action; see
                <span>[<a href="#RFC5228" class="xref">RFC5228</a>]</span>, Section 3.2)
                indicating the extensions supported by the Sieve engine.<a href="#section-1.3.1-3.5.2" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.5.3"></p>
</li>
            <li class="normal" id="section-1.3.1-3.6">
              <p id="section-1.3.1-3.6.1"><strong>notificationMethods</strong>:
                <code>String[]|null</code><a href="#section-1.3.1-3.6.1" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.6.2">
                A list of
                <span><a href="#RFC3986" class="xref">URI schema parts</a> [<a href="#RFC3986" class="xref">RFC3986</a>]</span>
                for notification methods supported by the Sieve
                <span><a href="#RFC5435" class="xref">"enotify"</a> [<a href="#RFC5435" class="xref">RFC5435</a>]</span>
                extension, or <code>null</code> if the extension
                is not supported by the Sieve engine.<a href="#section-1.3.1-3.6.2" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.6.3"></p>
</li>
            <li class="normal" id="section-1.3.1-3.7">
              <p id="section-1.3.1-3.7.1"><strong>externalLists</strong>:
                <code>String[]|null</code><a href="#section-1.3.1-3.7.1" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.7.2">
                A list of
                <span><a href="#RFC3986" class="xref">URI schema parts</a> [<a href="#RFC3986" class="xref">RFC3986</a>]</span>
                for externally stored list types supported by the
                Sieve <span><a href="#RFC6134" class="xref">"extlists"</a> [<a href="#RFC6134" class="xref">RFC6134</a>]</span>
                extension, or <code>null</code> if the extension
                is not supported by the Sieve engine.<a href="#section-1.3.1-3.7.2" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-1.3.1-3.8">
              <p id="section-1.3.1-3.8.1"><strong>supportsTest</strong>:
                <code>Boolean</code><a href="#section-1.3.1-3.8.1" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.8.2">
                If true, the server supports the
                <span><a href="#test" class="xref">SieveScript/test</a> (<a href="#test" class="xref">Section 2.5</a>)</span>
                method.<a href="#section-1.3.1-3.8.2" class="pilcrow">¶</a></p>
<p id="section-1.3.1-3.8.3"></p>
</li>
          </ul>
</section>
</div>
</section>
</section>
<div id="object">
<section id="section-2">
      <h2 id="name-sieve-scripts">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-sieve-scripts" class="section-name selfRef">Sieve Scripts</a>
      </h2>
<p id="section-2-1">A <strong>SieveScript</strong> object represents
      a single <span><a href="#RFC5228" class="xref">Sieve</a> [<a href="#RFC5228" class="xref">RFC5228</a>]</span> script for
      filtering email messages at time of final delivery.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">A <strong>SieveScript</strong> object has the
      following properties:<a href="#section-2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-3.1">
          <p id="section-2-3.1.1"><strong>id</strong>:
            <code>Id</code>
            (immutable; server-set)<a href="#section-2-3.1.1" class="pilcrow">¶</a></p>
<p id="section-2-3.1.2">
            The id of the script.<a href="#section-2-3.1.2" class="pilcrow">¶</a></p>
<p id="section-2-3.1.3"></p>
</li>
        <li class="normal" id="section-2-3.2">
          <p id="section-2-3.2.1"><strong>name</strong>:
            <code>String|null</code>
            (optional; default is server-dependent)<a href="#section-2-3.2.1" class="pilcrow">¶</a></p>
<p id="section-2-3.2.2">
            User-visible name for the SieveScript.
            If non-null, this MUST be a
            <span><a href="#RFC5198" class="xref">Net-Unicode</a> [<a href="#RFC5198" class="xref">RFC5198</a>]</span>
            string of at least 1 character in length, subject to the
            maximum size given in the capability object.

            For compatibility with ManageSieve, servers MUST reject
            names that contain control characters.  Servers MAY reject
            names that violate server policy (e.g., names containing
            slash (/)).

            The name MUST be unique among all SieveScripts within an
            account.<a href="#section-2-3.2.2" class="pilcrow">¶</a></p>
<p id="section-2-3.2.3"></p>
</li>
        <li class="normal" id="section-2-3.3">
          <p id="section-2-3.3.1"><strong>blobId</strong>:
            <code>Id</code><a href="#section-2-3.3.1" class="pilcrow">¶</a></p>
<p id="section-2-3.3.2">
            The id of the blob containing the raw octets of the script.<a href="#section-2-3.3.2" class="pilcrow">¶</a></p>
<p id="section-2-3.3.3">

            The script MUST be
            <span><a href="#RFC3629" class="xref">UTF-8</a> [<a href="#RFC3629" class="xref">RFC3629</a>]</span>
            content of at least 1 character in length, subject to the
            syntax of <span><a href="#RFC5228" class="xref">Sieve</a> [<a href="#RFC5228" class="xref">RFC5228</a>]</span>.
            The script MUST NOT contain any "require" statement(s)
            mentioning Sieve capabiltity strings not present in the
            <span><a href="#capa" class="xref">capability</a> (<a href="#capa" class="xref">Section 1.3.1</a>)</span> object.
            Note that if the Sieve
            <span><a href="#RFC5463" class="xref">"ihave"</a> [<a href="#RFC5463" class="xref">RFC5463</a>]</span>
            capability string is present in the capability object,
            the script MAY mention unrecognized/unsupported extensions
            in the "ihave" test.<a href="#section-2-3.3.3" class="pilcrow">¶</a></p>
<p id="section-2-3.3.4"></p>
</li>
        <li class="normal" id="section-2-3.4">
          <p id="section-2-3.4.1"><strong>isActive</strong>:
            <code>Boolean</code>
            (server-set; default: false)<a href="#section-2-3.4.1" class="pilcrow">¶</a></p>
<p id="section-2-3.4.2">
            A user may have multiple SieveScripts on the server, yet
            only one script may be used for filtering of incoming
            messages.  This is the active script.  Users may have zero
            or one active script.
            The <span><a href="#set" class="xref">SieveScript/set</a> (<a href="#set" class="xref">Section 2.2</a>)</span>
            method is used for changing the active script or disabling Sieve
            processing.<a href="#section-2-3.4.2" class="pilcrow">¶</a></p>
<p id="section-2-3.4.3"></p>
</li>
      </ul>
<div id="get">
<section id="section-2.1">
        <h3 id="name-sievescript-get">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-sievescript-get" class="section-name selfRef">SieveScript/get</a>
        </h3>
<p id="section-2.1-1">This is a standard "/get" method as described in
        <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.1.
        The <em>ids</em> argument may be
        <code>null</code> to fetch all at once.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">This method provides similar functionality to the GETSCRIPT
        and LISTSCRIPTS commands in <span>[<a href="#RFC5804" class="xref">RFC5804</a>]</span>.<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<section id="section-2.1.1">
          <h4 id="name-examples">
<a href="#section-2.1.1" class="section-number selfRef">2.1.1. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
          </h4>
<p id="section-2.1.1-1" class="keepWithNext">
                Request (and response) to list all scripts:<a href="#section-2.1.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1.1-2">
<pre>
{
  "using": [ "urn:ietf:params:jmap:core",
             "urn:ietf:params:jmap:sieve" ],
  "methodCalls": [
    ["SieveScript/get", {
      "accountId": "ken",
    }, "0"]
  ]
}

{
  "methodResponses": [
    [
      "SieveScript/get",
      {
        "state": "1634915373.240633104-120",
        "list": [
          {
            "id": "2d647053-dded-418d-917a-63eda3ac8f7b",
            "name": "test1",
            "isActive": true,
            "blobId": "S123"
          }
        ],
        "notFound": [],
        "accountId": "ken"
      },
      "0"
    ]
  ]
}
</pre><a href="#section-2.1.1-2" class="pilcrow">¶</a>
</div>
<p id="section-2.1.1-3" class="keepWithNext">
                Request (and response) to download the script
                (assuming that the JMAP Download URL has been
                advertised in the JMAP Session object as having a path
                of
               "/jmap/download/{accountId}/{blobId}/{name}?accept={type}").
                Note that the request-line has been wrapped for
                presentation purposes only.<a href="#section-2.1.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1.1-4">
<pre>
GET
 /jmap/download/ken/S123/test1.siv?accept=application/sieve
 HTTP/1.1
Host: jmap.example.com
Authorization: Basic a2VuOnBhc3N3b3Jk

HTTP/1.1 200 OK
Date: Fri, 22 Oct 2021 15:27:38 GMT
Content-Type: application/sieve; charset=utf-8
Content-Disposition: attachment; filename="test1.siv"
Content-Length: 49

require ["fileinto"];
fileinto "INBOX.target";
</pre><a href="#section-2.1.1-4" class="pilcrow">¶</a>
</div>
<p id="section-2.1.1-5" class="keepWithNext">
                Request (and response) to fetch the content of a single script:<a href="#section-2.1.1-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1.1-6">
<pre>
{
  "using": [ "urn:ietf:params:jmap:core",
             "urn:ietf:params:jmap:blob",
             "urn:ietf:params:jmap:sieve" ],
  "methodCalls": [
    ["SieveScript/get", {
      "accountId": "ken",
      "ids": [ "2d647053-dded-418d-917a-63eda3ac8f7b" ],
    }, "0"],
    ["Blob/get", {
      "accountId": "ken",
      "#ids": {
        "resultOf": "0",
        "name": "SieveScript/get",
        "path": "/list/*/blobId"
      }
    }, "1"]
  ]
}

{
  "methodResponses": [
    [
      "SieveScript/get",
      {
        "state": "1634915373.240633104-120",
        "list": [
          {
            "id": "2d647053-dded-418d-917a-63eda3ac8f7b",
            "name": "test1",
            "isActive": true,
            "blobId": "S123"
          }
        ],
        "notFound": [],
        "accountId": "ken"
      },
      "0"
    ],
    [
      "Blob/get",
      {
        "list": [
          {
            "id": "S123",
           "data:asText":
 "require [\\"fileinto\\"];\\r\\nfileinto \\"INBOX.target\\";\\r\\n",
            "size": 49
          }
        ],
        "notFound": [],
        "accountId": "ken"
      },
      "1"
    ]
  ]
}
</pre><a href="#section-2.1.1-6" class="pilcrow">¶</a>
</div>
</section>
</section>
</div>
<div id="set">
<section id="section-2.2">
        <h3 id="name-sievescript-set">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-sievescript-set" class="section-name selfRef">SieveScript/set</a>
        </h3>
<p id="section-2.2-1">This is a standard "/set" method as described in
        <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>,
        Section 5.3 but with the following
        additional request argument, which may be omitted:<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-2.1">
            <p id="section-2.2-2.1.1"><strong>onSuccessActivateScript</strong>:
            <code>Id|null</code>
            (optional)<a href="#section-2.2-2.1.1" class="pilcrow">¶</a></p>
<p id="section-2.2-2.1.2">
            If <code>null</code>, the currently active
            SieveScript (if any) will be deactivated if and only if
            all of the creations, modifications, and destructions (if
            any) succeed.
            Otherwise, the id of the SieveScript to activate if and
            only if all of the creations, modifications, and
            destructions (if any) succeed.
            (For references to SieveScript creations, this is
            equivalent to a creation-reference, so the id will be the
            creation id prefixed with a "#".)
            If this argument is not present in the request, the
            currently active SieveScript (if any) will remain as such.<a href="#section-2.2-2.1.2" class="pilcrow">¶</a></p>
<p id="section-2.2-2.1.3">

            The id of any activated SieveScript MUST be reported in
            either the "created" or "updated" argument in the response
            as appropriate.
            The id of any deactivated SieveScript MUST be reported in
            the "updated" argument in the response.<a href="#section-2.2-2.1.3" class="pilcrow">¶</a></p>
<p id="section-2.2-2.1.4"></p>
</li>
        </ul>
<p id="section-2.2-3">This method provides similar functionality to the
        PUTSCRIPT, DELETESCRIPT, RENAMESCRIPT, and SETACTIVE commands
        in <span>[<a href="#RFC5804" class="xref">RFC5804</a>]</span>.<a href="#section-2.2-3" class="pilcrow">¶</a></p>
<p id="section-2.2-4">Script content must first be uploaded as a blob using
        either the standard upload mechanism
        (see <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>
        Section 6.1) or the JMAP Blob management extension
        (see <span>[<a href="#I-D.ietf-jmap-blob" class="xref">I-D.ietf-jmap-blob</a>]</span> Section 3.1).<a href="#section-2.2-4" class="pilcrow">¶</a></p>
<p id="section-2.2-5">If the SieveScript can not be created or updated because it
        would result in two SieveScripts with the same name, the
        server MUST reject the request with an "alreadyExists"
        SetError.
        An "existingId" property of type "Id" MUST be included on the
        SetError object with the id of the existing SieveScript.<a href="#section-2.2-5" class="pilcrow">¶</a></p>
<p id="section-2.2-6">If the SieveScript can not be created or updated because
        its size exceeds the "maxSizeScript" limit, the server MUST
        reject the request with a "tooLarge" SetError.<a href="#section-2.2-6" class="pilcrow">¶</a></p>
<p id="section-2.2-7">If the Sieve Script can not be created because it would
        exceed the "maxNumberScripts" limit, the server MUST
        reject the request with an "overQuota" SetError.<a href="#section-2.2-7" class="pilcrow">¶</a></p>
<p id="section-2.2-8">The active SieveScript MUST NOT be destroyed
        unless it is first deactivated in a separate SieveScript/set
        method call.<a href="#section-2.2-8" class="pilcrow">¶</a></p>
<p id="section-2.2-9">The following extra SetError types are defined:<a href="#section-2.2-9" class="pilcrow">¶</a></p>
<p id="section-2.2-10">For "create" and "update":<a href="#section-2.2-10" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-11.1">
            <p id="section-2.2-11.1.1"><strong>invalidScript</strong>:<a href="#section-2.2-11.1.1" class="pilcrow">¶</a></p>
<p id="section-2.2-11.1.2">
              The SieveScript content violates the
              <span><a href="#RFC5228" class="xref">Sieve</a> [<a href="#RFC5228" class="xref">RFC5228</a>]</span>
              grammar and/or one
              or more extensions mentioned in the script's "require"
              statement(s) are not supported by the Sieve interpreter.
              The <em>description</em> property on
              the SetError object SHOULD contain a specific error
              message giving at least the line number of the first error.<a href="#section-2.2-11.1.2" class="pilcrow">¶</a></p>
<p id="section-2.2-11.1.3"></p>
</li>
        </ul>
<p id="section-2.2-12">For "destroy":<a href="#section-2.2-12" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-13.1">
            <p id="section-2.2-13.1.1"><strong>scriptIsActive</strong>:<a href="#section-2.2-13.1.1" class="pilcrow">¶</a></p>
<p id="section-2.2-13.1.2">
              The SieveScript is active.<a href="#section-2.2-13.1.2" class="pilcrow">¶</a></p>
<p id="section-2.2-13.1.3"></p>
</li>
        </ul>
<section id="section-2.2.1">
          <h4 id="name-examples-2">
<a href="#section-2.2.1" class="section-number selfRef">2.2.1. </a><a href="#name-examples-2" class="section-name selfRef">Examples</a>
          </h4>
<p id="section-2.2.1-1" class="keepWithNext">
                Request (and response) to upload a script
                requiring the Imap4Flags
                <span>[<a href="#RFC5232" class="xref">RFC5232</a>]</span>
                Extension (assuming that the JMAP Upload URL has been
                advertised in the JMAP Session object as having a path of
                "/jmap/upload/{accountId}/"):<a href="#section-2.2.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.2.1-2">
<pre>
POST /jmap/upload/ken/ HTTP/1.1
Host: jmap.example.com
Authorization: Basic a2VuOnBhc3N3b3Jk
Content-Type: application/sieve
Content-Length: 98

require "imapflags";

if address :is ["To", "Cc"] "jmap@ietf.org" {
  setflag "\\Flagged";
}


HTTP/1.1 201 Created
Date: Thu, 10 Dec 2020 17:14:31 GMT
Content-Type: application/json; charset=utf-8
Content-Length: 171

{
  "accountId": "ken",
  "blobId": "Gabcc83e44a6e19991c4568d0b94e1767c83dd123",
  "type": "application/sieve"
  "size": 98
}
</pre><a href="#section-2.2.1-2" class="pilcrow">¶</a>
</div>
<p id="section-2.2.1-3" class="keepWithNext">
                Request (and response) to create and activate a script
                using the uploaded blob:<a href="#section-2.2.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.2.1-4">
<pre>
{
  "using": [ "urn:ietf:params:jmap:core",
             "urn:ietf:params:jmap:sieve" ],
  "methodCalls": [
    ["SieveScript/set", {
      "accountId": "ken",
      "create": { "A": {
        "name": null,
        "blobId": "Gabcc83e44a6e19991c4568d0b94e1767c83dd123"
      },
      "onSuccessActivateScript": "#A"
    }, "0"]
  ]
}

{
  "methodResponses": [
    [
      "SieveScript/set",
      {
        "oldState": "1603741717.50737918-4096",
        "newState": "1603741751.227268529-4096",
        "created": {
          "A": {
            "id": "dd1b164f-8cdc-448c-9f54",
            "name": "ken-20201210T171432-0",
            "blobId": "Sdd1b164f-8cdc-448c-9f54",
            "isActive": true
          }
        },
        "updated": null,
        "destroyed": null,
        "notCreated": null,
        "notUpdated": null,
        "notDestroyed": null,
        "accountId": "ken"
      },
      "0"
    ]
  ]
}
</pre><a href="#section-2.2.1-4" class="pilcrow">¶</a>
</div>
<p id="section-2.2.1-5" class="keepWithNext">
                Request (and response) to update script content using
                the <span><a href="#I-D.ietf-jmap-blob" class="xref">JMAP Blob management extension</a> [<a href="#I-D.ietf-jmap-blob" class="xref">I-D.ietf-jmap-blob</a>]</span>:<a href="#section-2.2.1-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.2.1-6">
<pre>
{
  "using": [ "urn:ietf:params:jmap:core",
             "urn:ietf:params:jmap:blob",
             "urn:ietf:params:jmap:sieve" ],
  "methodCalls": [
    ["Blob/set", {
      "accountId": "ken",
      "create": { "B": {
        "data:asText": "redirect \"ken@example.com\"\r\n;",
        "type": "application/sieve"
      }
    }, "1"],
    ["SieveScript/set", {
      "accountId": "ken",
      "update": { "dd1b164f-8cdc-448c-9f54": {
        "blobId": "#B"
        }
      }
    }, "2"]
  ]
}

{
  "methodResponses": [
    [
      "Blob/set",
      {
        "oldState": null,
        "newState": "1603741700.309607123-0128",
        "created": {
          "B": {
            "id": "G969c83e44a6e10871c4568d0b94e1767c83ddeae",
            "blobId": "G969c83e44a6e10871c4568d0b94e1767c83ddeae",
            "type": "application/sieve",
            "size": 29
          }
        },
        "updated": null,
        "destroyed": null,
        "notCreated": null,
        "notUpdated": null,
        "notDestroyed": null,
        "accountId": "ken"
      },
      "1"
    ],
    [
      "SieveScript/set",
      {
        "oldState": "1603741751.227268529-4096",
        "newState": "1603742603.309607868-4096",
        "created": null,
        "updated": {
          "dd1b164f-8cdc-448c-9f54": null
        },
        "destroyed": null,
        "notCreated": null,
        "notUpdated": null,
        "notDestroyed": null,
        "accountId": "ken"
      },
      "2"
    ]
  ]
}
</pre><a href="#section-2.2.1-6" class="pilcrow">¶</a>
</div>
<p id="section-2.2.1-7" class="keepWithNext">
                Request (and response) to update script name and deactivate:<a href="#section-2.2.1-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.2.1-8">
<pre>
{
  "using": [ "urn:ietf:params:jmap:core",
             "urn:ietf:params:jmap:sieve" ],
  "methodCalls": [
    ["SieveScript/set", {
      "accountId": "ken",
      "update": { "dd1b164f-8cdc-448c-9f54": {
        "name": "myscript"
        }
      },
      "onSuccessActivateScript": null
    }, "3"]
  ]
}

{
  "methodResponses": [
    [
      "SieveScript/set",
      {
        "oldState": "1603742603.309607868-4096",
        "newState": "1603742967.852315428-4096",
        "created": null,
        "updated": {
          "dd1b164f-8cdc-448c-9f54": {
            "isActive": false
          }
        },
        "destroyed": null,
        "notCreated": null,
        "notUpdated": null,
        "notDestroyed": null,
        "accountId": "ken"
      },
      "3"
    ]
  ]
}
</pre><a href="#section-2.2.1-8" class="pilcrow">¶</a>
</div>
<p id="section-2.2.1-9" class="keepWithNext">
                Request (and response) to activate a script:<a href="#section-2.2.1-9" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.2.1-10">
<pre>
{
  "using": [ "urn:ietf:params:jmap:core",
             "urn:ietf:params:jmap:sieve" ],
  "methodCalls": [
    ["SieveScript/set", {
      "accountId": "ken",
      "onSuccessActivateScript": "dd1b164f-8cdc-448c-9f54"
    }, "4"]
  ]
}

{
  "methodResponses": [
    [
      "SieveScript/set",
      {
        "oldState": "1603742967.852315428-4096",
        "newState": "1603744460.316617118-4096",
        "created": null,
        "updated": {
          "dd1b164f-8cdc-448c-9f54": {
            "isActive": true
          }
        },
        "destroyed": null,
        "notCreated": null,
        "notUpdated": null,
        "notDestroyed": null,
        "accountId": "ken"
      },
      "4"
    ]
  ]
}
</pre><a href="#section-2.2.1-10" class="pilcrow">¶</a>
</div>
<p id="section-2.2.1-11" class="keepWithNext">
                Requests (and responses) to deactivate and destroy the
                active script:<a href="#section-2.2.1-11" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.2.1-12">
<pre>
{
  "using": [ "urn:ietf:params:jmap:core",
             "urn:ietf:params:jmap:sieve" ],
  "methodCalls": [
    ["SieveScript/set", {
      "accountId": "ken",
      "onSuccessActivateScript": null
    }, "5"],
    ["SieveScript/set", {
      "accountId": "ken",
      "destroy": [ "dd1b164f-8cdc-448c-9f54" ]
    }, "6"]
  ]
}

{
  "methodResponses": [
    [
      "SieveScript/set",
      {
        "oldState": "1603744460.316617118-4096",
        "newState": "1603744637.575375572-4096",
        "created": null,
        "updated": null,
        "updated": {
          "dd1b164f-8cdc-448c-9f54": {
            "isActive": false
          }
        },
        "destroyed": null,
        "notCreated": null,
        "notUpdated": null,
        "notDestroyed": null,
        "accountId": "ken"
      },
      "5"
    ],
    [
      "SieveScript/set",
      {
        "oldState": "1603744637.575375572-4096",
        "newState": "1603744637.854390875-4096",
        "created": null,
        "updated": null,
        "destroyed": [
          "dd1b164f-8cdc-448c-9f54"
        ],
        "notCreated": null,
        "notUpdated": null,
        "notDestroyed": null,
        "accountId": "ken"
      },
      "6"
    ]
  ]
}
</pre><a href="#section-2.2.1-12" class="pilcrow">¶</a>
</div>
</section>
</section>
</div>
<section id="section-2.3">
        <h3 id="name-sievescript-query">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-sievescript-query" class="section-name selfRef">SieveScript/query</a>
        </h3>
<p id="section-2.3-1">This is a standard "/query" method as described in
        <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.5.

        A <em>FilterCondition</em> object has the
        following properties, either of which may be omitted:<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3-2.1">
            <p id="section-2.3-2.1.1"><strong>name</strong>:
            <code>String</code><a href="#section-2.3-2.1.1" class="pilcrow">¶</a></p>
<p id="section-2.3-2.1.2">
            The SieveScript "name" property contains the given string.<a href="#section-2.3-2.1.2" class="pilcrow">¶</a></p>
<p id="section-2.3-2.1.3"></p>
</li>
          <li class="normal" id="section-2.3-2.2">
            <p id="section-2.3-2.2.1"><strong>isActive</strong>:
            <code>Boolean</code><a href="#section-2.3-2.2.1" class="pilcrow">¶</a></p>
<p id="section-2.3-2.2.2">
            The "isActive" property of the SieveScript must be
            identical to the value given to match the condition.<a href="#section-2.3-2.2.2" class="pilcrow">¶</a></p>
<p id="section-2.3-2.2.3"></p>
</li>
          </ul>
<p id="section-2.3-3">The following SieveScript properties MUST be supported for
        sorting:<a href="#section-2.3-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3-4.1">
            <p id="section-2.3-4.1.1"><strong>name</strong><a href="#section-2.3-4.1.1" class="pilcrow">¶</a></p>
<p id="section-2.3-4.1.2"></p>
</li>
          <li class="normal" id="section-2.3-4.2">
            <strong>isActive</strong><a href="#section-2.3-4.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
<section id="section-2.4">
        <h3 id="name-sievescript-validate">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-sievescript-validate" class="section-name selfRef">SieveScript/validate</a>
        </h3>
<p id="section-2.4-1">This method is used by the client to verify Sieve script
        validity without storing the script on the server,
        providing similar functionality to the
        CHECKSCRIPT command in <span>[<a href="#RFC5804" class="xref">RFC5804</a>]</span>.<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<p id="section-2.4-2">The method takes the following arguments:<a href="#section-2.4-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4-3.1">
            <p id="section-2.4-3.1.1"><strong>accountId</strong>:
              <code>Id</code><a href="#section-2.4-3.1.1" class="pilcrow">¶</a></p>
<p id="section-2.4-3.1.2">
              The id of the account to use.<a href="#section-2.4-3.1.2" class="pilcrow">¶</a></p>
<p id="section-2.4-3.1.3"></p>
</li>
          <li class="normal" id="section-2.4-3.2">
            <p id="section-2.4-3.2.1"><strong>blobId</strong>:
              <code>Id</code><a href="#section-2.4-3.2.1" class="pilcrow">¶</a></p>
<p id="section-2.4-3.2.2">
              The id of the blob containing the raw octets of the
              script to validate,
              subject to the same requirements in
              <a href="#object" class="xref">Section 2</a>.<a href="#section-2.4-3.2.2" class="pilcrow">¶</a></p>
<p id="section-2.4-3.2.3"></p>
</li>
        </ul>
<p id="section-2.4-4">The response has the following arguments:<a href="#section-2.4-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4-5.1">
            <p id="section-2.4-5.1.1"><strong>accountId</strong>:
              <code>Id</code><a href="#section-2.4-5.1.1" class="pilcrow">¶</a></p>
<p id="section-2.4-5.1.2">
              The id of the account used for this call.<a href="#section-2.4-5.1.2" class="pilcrow">¶</a></p>
<p id="section-2.4-5.1.3"></p>
</li>
          <li class="normal" id="section-2.4-5.2">
            <p id="section-2.4-5.2.1"><strong>error</strong>:
              <code>SetError|null</code><a href="#section-2.4-5.2.1" class="pilcrow">¶</a></p>
<p id="section-2.4-5.2.2">
              A "invalidScript" SetError object if the script content
              is invalid (see <a href="#set" class="xref">Section 2.2</a>),
              or <code>null</code> if the
              script content is valid.<a href="#section-2.4-5.2.2" class="pilcrow">¶</a></p>
<p id="section-2.4-5.2.3"></p>
</li>
        </ul>
<p id="section-2.4-6">As with the
        <span><a href="#set" class="xref">SieveScript/set</a> (<a href="#set" class="xref">Section 2.2</a>)</span> method,
        script content must first be uploaded as a blob using either
        the standard upload mechanism
        (see <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>
        Section 6.1) or the JMAP Blob management extension
        (see <span>[<a href="#I-D.ietf-jmap-blob" class="xref">I-D.ietf-jmap-blob</a>]</span> Section 3.1).<a href="#section-2.4-6" class="pilcrow">¶</a></p>
</section>
<div id="test">
<section id="section-2.5">
        <h3 id="name-sievescript-test">
<a href="#section-2.5" class="section-number selfRef">2.5. </a><a href="#name-sievescript-test" class="section-name selfRef">SieveScript/test</a>
        </h3>
<p id="section-2.5-1">This method is used by the client to ask the Sieve
        interpreter to evaluate a Sieve script against a set of emails
        and report the actions that would be performed for each.<a href="#section-2.5-1" class="pilcrow">¶</a></p>
<p id="section-2.5-2">When calling this method the "using" property of the
        Request object MUST contain the capabilities
        "urn:ietf:params:jmap:sieve" and "urn:ietf:params:jmap:mail".
        The latter is required due to the use of blob ids which may
        reference Email objects and the use of the Envelope object, as
        described below.<a href="#section-2.5-2" class="pilcrow">¶</a></p>
<p id="section-2.5-3">The <strong>SieveScript/test</strong> method
        takes the following arguments:<a href="#section-2.5-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5-4.1">
            <p id="section-2.5-4.1.1"><strong>accountId</strong>:
              <code>Id</code><a href="#section-2.5-4.1.1" class="pilcrow">¶</a></p>
<p id="section-2.5-4.1.2">
              The id of the account to use.<a href="#section-2.5-4.1.2" class="pilcrow">¶</a></p>
<p id="section-2.5-4.1.3"></p>
</li>
          <li class="normal" id="section-2.5-4.2">
            <p id="section-2.5-4.2.1"><strong>scriptBlobId</strong>:
              <code>String</code><a href="#section-2.5-4.2.1" class="pilcrow">¶</a></p>
<p id="section-2.5-4.2.2">
              The id of the blob containing the raw octets of the
              script to validate,
              subject to the same requirements in
              <a href="#object" class="xref">Section 2</a>.<a href="#section-2.5-4.2.2" class="pilcrow">¶</a></p>
<p id="section-2.5-4.2.3"></p>
</li>
          <li class="normal" id="section-2.5-4.3">
            <p id="section-2.5-4.3.1"><strong>emailBlobIds</strong>:
              <code>Id[]</code><a href="#section-2.5-4.3.1" class="pilcrow">¶</a></p>
<p id="section-2.5-4.3.2">
              The ids representing the raw octets of the
              <span>[<a href="#RFC5322" class="xref">RFC5322</a>]</span> messages to test against.<a href="#section-2.5-4.3.2" class="pilcrow">¶</a></p>
<p id="section-2.5-4.3.3"></p>
</li>
          <li class="normal" id="section-2.5-4.4">
            <p id="section-2.5-4.4.1"><strong>envelope</strong>:
              <code>Envelope|null</code><a href="#section-2.5-4.4.1" class="pilcrow">¶</a></p>
<p id="section-2.5-4.4.2">
              Information that the Sieve interpreter should assume was
              present in the SMTP transaction that delivered the
              message when evaluating "envelope" tests.
              If <code>null</code>, all "envelope"
              tests MUST evaluate to false.
              See Section 7 of <span>[<a href="#RFC8621" class="xref">RFC8621</a>]</span> for
              the contents of the Envelope object.<a href="#section-2.5-4.4.2" class="pilcrow">¶</a></p>
<p id="section-2.5-4.4.3"></p>
</li>
          <li class="normal" id="section-2.5-4.5">
            <p id="section-2.5-4.5.1"><strong>lastVacationResponse</strong>:
              <code>UTCDate|null</code><a href="#section-2.5-4.5.1" class="pilcrow">¶</a></p>
<p id="section-2.5-4.5.2">

              The UTC date-time at which the Sieve interpreter should
              assume that it last auto-replied to the sender of the
              message, or <code>null</code> if the Sieve
              interpreter should assume that it has not auto-replied
              to the sender.<a href="#section-2.5-4.5.2" class="pilcrow">¶</a></p>
<p id="section-2.5-4.5.3"></p>
</li>
        </ul>
<p id="section-2.5-5">The response has the following arguments:<a href="#section-2.5-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5-6.1">
            <p id="section-2.5-6.1.1"><strong>accountId</strong>:
              <code>Id</code><a href="#section-2.5-6.1.1" class="pilcrow">¶</a></p>
<p id="section-2.5-6.1.2">
              The id of the account used for this call.<a href="#section-2.5-6.1.2" class="pilcrow">¶</a></p>
<p id="section-2.5-6.1.3"></p>
</li>
          <li class="normal" id="section-2.5-6.2">
            <p id="section-2.5-6.2.1"><strong>completed</strong>:
              <code>Id[Action[]]|null</code><a href="#section-2.5-6.2.1" class="pilcrow">¶</a></p>
<p id="section-2.5-6.2.2">
              A map of the blob id to a set of
              <em>Action</em> objects for each message
              successfully processed by the script, or
              <code>null</code> if none.

              The <em>Action</em> object has the
              following properties:<a href="#section-2.5-6.2.2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5-6.2.3.1">
                <p id="section-2.5-6.2.3.1.1"><strong>action</strong>:
                  <code>String</code><a href="#section-2.5-6.2.3.1.1" class="pilcrow">¶</a></p>
<p id="section-2.5-6.2.3.1.2">
                  The name of the Sieve action (e.g., "keep").<a href="#section-2.5-6.2.3.1.2" class="pilcrow">¶</a></p>
<p id="section-2.5-6.2.3.1.3"></p>
</li>
              <li class="normal" id="section-2.5-6.2.3.2">
                <p id="section-2.5-6.2.3.2.1"><strong>taggedArgs</strong>:
                  <code>String[*]</code><a href="#section-2.5-6.2.3.2.1" class="pilcrow">¶</a></p>
<p id="section-2.5-6.2.3.2.2">
                  An object
                  containing any named (tagged) arguments for the action.
                  The name MUST be the tag for the argument as given
                  in the specification of the action (e.g., ":flags").
                  This may be an empty object if the action does not
                  have any tagged arguments, or none were specified in
                  the Sieve script (e.g.,
                  <span><a href="#RFC5228" class="xref">discard</a> [<a href="#RFC5228" class="xref">RFC5228</a>]</span> or
                  <span><a href="#RFC5429" class="xref">ereject</a> [<a href="#RFC5429" class="xref">RFC5429</a>]</span> action).<a href="#section-2.5-6.2.3.2.2" class="pilcrow">¶</a></p>
<p id="section-2.5-6.2.3.2.3"></p>
</li>
              <li class="normal" id="section-2.5-6.2.3.3">
                <p id="section-2.5-6.2.3.3.1"><strong>positionalArgs</strong>:
                  <code>*[]</code><a href="#section-2.5-6.2.3.3.1" class="pilcrow">¶</a></p>
<p id="section-2.5-6.2.3.3.2">
                  An array containing
                  any positional arguments for the action in the
                  order as given in the specification of the action.
                  This may be an empty array if the action does not
                  have any positional arguments (e.g.,
                  <span><a href="#RFC5228" class="xref">discard</a> [<a href="#RFC5228" class="xref">RFC5228</a>]</span> or
                  <span><a href="#RFC5228" class="xref">keep</a> [<a href="#RFC5228" class="xref">RFC5228</a>]</span> action).<a href="#section-2.5-6.2.3.3.2" class="pilcrow">¶</a></p>
<p id="section-2.5-6.2.3.3.3"></p>
</li>
            </ul>
</li>
          <li class="normal" id="section-2.5-6.3">
            <p id="section-2.5-6.3.1"><strong>notCompleted</strong>:
              <code>Id[SetError]|null</code><a href="#section-2.5-6.3.1" class="pilcrow">¶</a></p>
<p id="section-2.5-6.3.2">
              A map of the blob id to a SetError object for each message
              that was not successfully processed by the script, or
              <code>null</code> if none.
              A "serverFail" SetError (see Section 3.6.2 of
              <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>)
              MUST be used to indicate a
              Sieve interpreter run-time error.<a href="#section-2.5-6.3.2" class="pilcrow">¶</a></p>
<p id="section-2.5-6.3.3"></p>
</li>
        </ul>
<p id="section-2.5-7">
          The JSON data type to use for each argument value is a
          direct mapping from its Sieve data type, per the following
          table:<a href="#section-2.5-7" class="pilcrow">¶</a></p>
<table class="center" id="table-1">
          <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
            <tr>
              <th class="text-center" rowspan="1" colspan="1">Sieve Type</th>
              <th class="text-center" rowspan="1" colspan="1">JSON Type</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-center" rowspan="1" colspan="1">Number</td>
              <td class="text-center" rowspan="1" colspan="1">Number</td>
            </tr>
            <tr>
              <td class="text-center" rowspan="1" colspan="1">String</td>
              <td class="text-center" rowspan="1" colspan="1">String</td>
            </tr>
            <tr>
              <td class="text-center" rowspan="1" colspan="1">String List</td>
              <td class="text-center" rowspan="1" colspan="1">String[]</td>
            </tr>
            <tr>
              <td class="text-center" rowspan="1" colspan="1">tag with no value</td>
              <td class="text-center" rowspan="1" colspan="1">Boolean (true)</td>
            </tr>
          </tbody>
        </table>
<p id="section-2.5-9">
          Recommendations for constructing the list of arguments are
          as follows:<a href="#section-2.5-9" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5-10.1">Optional arguments in which the value is supplied by
            the Sieve interpreter SHOULD be included (e.g., ":from" and
            ":subject" arguments to the
            <span><a href="#RFC5230" class="xref">"vacation"</a> [<a href="#RFC5230" class="xref">RFC5230</a>]</span>
          action).<a href="#section-2.5-10.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.5-10.2">Optional arguments in which the value is implicitly
            supplied by
            a Sieve variable SHOULD be included (e.g., "keep" or
            "fileinto" actions without an explicit ":flags" argument,
            but <span><a href="#RFC5232" class="xref">"imap4flags"</a> [<a href="#RFC5232" class="xref">RFC5232</a>]</span>
            have been
            set on the internal variable).<a href="#section-2.5-10.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.5-10.3">Optional arguments in which the value is the specfied
            default MAY be omitted.<a href="#section-2.5-10.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.5-10.4">Tagged arguments that are only used to determine
            whether the action will be executed and have no impact on
            the result of the action MAY be omitted (e.g., ":days" and
            ":addresses" arguments to the vacation action).<a href="#section-2.5-10.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.5-11">The following additional errors may be returned instead of
        the "SieveScript/test" response:<a href="#section-2.5-11" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5-12.1">
              "invalidScript": The script content is invalid
              (see <a href="#set" class="xref">Section 2.2</a>).<a href="#section-2.5-12.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.5-12.2">
              "notFound": The script referenced by the id could
              not be found.<a href="#section-2.5-12.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.5-12.3">
              "rateLimit": The number of recent test method calls has
              reached a server-defined limit.<a href="#section-2.5-12.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.5-12.4">
              "requestTooLarge": The total number of emailBlobIds
              exceeds the maximum number the server is willing to
              process in a single test method call.<a href="#section-2.5-12.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.5-12.5">
              "serverFail": The script failed preparation to
              be executed for some other reason.<a href="#section-2.5-12.5" class="pilcrow">¶</a>
</li>
        </ul>
<section id="section-2.5.1">
          <h4 id="name-example">
<a href="#section-2.5.1" class="section-number selfRef">2.5.1. </a><a href="#name-example" class="section-name selfRef">Example</a>
          </h4>
<p id="section-2.5.1-1" class="keepWithNext">
                Assume that the following script has been created and
                has blob id "S123".<a href="#section-2.5.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.5.1-2">
<pre>
require [ "imapflags", "editheader", "vacation", "fcc" ];
setflag "$SieveFiltered";
addheader :last "X-Sieve-Filtered" "yes";
vacation :days 3 :fcc "INBOX.Sent" :flags "\\Answered" text:
Gone fishing.
.
;
</pre><a href="#section-2.5.1-2" class="pilcrow">¶</a>
</div>
<p id="section-2.5.1-3" class="keepWithNext">
                Assume that the following email has been uploaded and
                assigned blob id "B456".<a href="#section-2.5.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.5.1-4">
<pre>
From: "Some Example Sender" &lt;example@example.net&gt;
To: ken@example.com
Subject: test email
Date: Wed, 23 Sep 2020 12:11:11 -0500
Content-Type: text/plain; charset="UTF-8"
MIME-Version: 1.0

This is a test email.
</pre><a href="#section-2.5.1-4" class="pilcrow">¶</a>
</div>
<p id="section-2.5.1-5" class="keepWithNext">
                The following request executes the script against the
                email and provides envelope information for use by the
                "vacation" action.<a href="#section-2.5.1-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.5.1-6">
<pre>
{
  "using": [
    "urn:ietf:params:jmap:core",
    "urn:ietf:params:jmap:sieve",
    "urn:ietf:params:jmap:mail"
  ],
  "methodCalls": [
    [
      "SieveScript/test",
      {
        "accountId": "ken",
        "scriptBlobId": "S123",
        "emailBlobIds": [
          "B456"
        ],
        "envelope": {
          "mailFrom": {
            "email": "example@example.net",
            "parameters": null
          },
          "rcptTo": [
            {
              "email": "ken@example.com",
              "parameters": null
            }
          ]
        },
        "lastVacationResponse": null
      },
      "R1"
    ]
  ]
}
</pre><a href="#section-2.5.1-6" class="pilcrow">¶</a>
</div>
<p id="section-2.5.1-7" class="keepWithNext">
                The following response lists the actions that would be
                performed by the script.<a href="#section-2.5.1-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.5.1-8">
<pre>
{
  "methodResponses": [
    [
      "SieveScript/test",
      {
        "completed": {
          "B456": [
            {
              "action": "addheader",
              "taggedArgs": {
                              ":last": true
                            },
              "positionalArgs": [ "X-Sieve-Filtered", "yes" ]
            },
            {
              "action": "vacation",
              "taggedArgs": {
                              ":fcc": "INBOX.Sent",
                              ":flags": [
                                "\\answered"
                              ],
                              ":subject": "Auto: test email",
                              ":from": "ken@example.com"
                            },
              "positionalArgs": [ "Gone fishing." ]
            },
            {
              "action": "keep",
              "taggedArgs": {
                              ":flags": [
                                "$SieveFiltered"
                              ]
                            },
              "positionalArgs": [ ]
            }
          ]
        },
        "notCompleted": null,
        "accountId": "ken",
      },
      "R1"
    ]
  ]
}
</pre><a href="#section-2.5.1-8" class="pilcrow">¶</a>
</div>
</section>
</section>
</div>
</section>
</div>
<div id="vacation">
<section id="section-3">
      <h2 id="name-compatibility-with-jmap-vac">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-compatibility-with-jmap-vac" class="section-name selfRef">Compatibility with JMAP Vacation Response</a>
      </h2>
<p id="section-3-1">Section 8 of <span>[<a href="#RFC8621" class="xref">RFC8621</a>]</span> defines a
      VacationResponse object to represent an autoresponder to
      incoming email messages.
      Servers that implement the VacationResponse as a Sieve script
      that resides amongst other user scripts are subject to the
      following requirements:<a href="#section-3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-2.1">MUST allow the VacationResponse Sieve script to be fetched
        by the <span><a href="#get" class="xref">SieveScript/get</a> (<a href="#get" class="xref">Section 2.1</a>)</span>
        method.<a href="#section-3-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-2.2">MUST allow the VacationResponse Sieve script to be
        [de]activated via the "onSuccessActivateScript" argument to
        the <span><a href="#set" class="xref">SieveScript/set</a> (<a href="#set" class="xref">Section 2.2</a>)</span> method.<a href="#section-3-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-2.3">MUST NOT allow the VacationResponse Sieve script to be
        destroyed or have its content updated by the
        <span><a href="#set" class="xref">SieveScript/set</a> (<a href="#set" class="xref">Section 2.2</a>)</span> method.
        Any such request MUST be rejected with a "forbidden" SetError.
        A "description" property MAY be present with an explanation
        that the script can only be modified by a VacationResponse/set
        method.<a href="#section-3-2.3" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="security">
<section id="section-4">
      <h2 id="name-security-considerations">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-4-1">All security considerations of
      <span><a href="#RFC8620" class="xref">JMAP</a> [<a href="#RFC8620" class="xref">RFC8620</a>]</span>
      and <span><a href="#RFC5228" class="xref">Sieve</a> [<a href="#RFC5228" class="xref">RFC5228</a>]</span>
      apply to this specification.<a href="#section-4-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-5">
      <h2 id="name-iana-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<section id="section-5.1">
        <h3 id="name-jmap-capability-registratio">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-jmap-capability-registratio" class="section-name selfRef">JMAP Capability Registration for "sieve"</a>
        </h3>
<p id="section-5.1-1">IANA will register the "sieve" JMAP Capability as follows:<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">Capability Name:
        <code>urn:ietf:params:jmap:sieve</code><a href="#section-5.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1-3">Specification document: this document<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1-4">Intended use: common<a href="#section-5.1-4" class="pilcrow">¶</a></p>
<p id="section-5.1-5">Change Controller: IETF<a href="#section-5.1-5" class="pilcrow">¶</a></p>
<p id="section-5.1-6">Security and privacy considerations: this document,
        <a href="#security" class="xref">Section 4</a><a href="#section-5.1-6" class="pilcrow">¶</a></p>
</section>
<section id="section-5.2">
        <h3 id="name-jmap-error-codes-registry">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-jmap-error-codes-registry" class="section-name selfRef">JMAP Error Codes Registry</a>
        </h3>
<p id="section-5.2-1">
          The following sub-sections register two new error codes in the
          JMAP Error Codes registry, as defined in
          <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<section id="section-5.2.1">
          <h4 id="name-invalidscript">
<a href="#section-5.2.1" class="section-number selfRef">5.2.1. </a><a href="#name-invalidscript" class="section-name selfRef">invalidScript</a>
          </h4>
<p id="section-5.2.1-1">JMAP Error Code: invalidScript<a href="#section-5.2.1-1" class="pilcrow">¶</a></p>
<p id="section-5.2.1-2">Intended use: common<a href="#section-5.2.1-2" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3">Change controller: IETF<a href="#section-5.2.1-3" class="pilcrow">¶</a></p>
<p id="section-5.2.1-4">Reference: This document, <a href="#set" class="xref">Section 2.2</a><a href="#section-5.2.1-4" class="pilcrow">¶</a></p>
<p id="section-5.2.1-5">Description: The SieveScript violates the
          <span><a href="#RFC5228" class="xref">Sieve grammar</a> [<a href="#RFC5228" class="xref">RFC5228</a>]</span> and/or one
          or more extensions mentioned in the script's "require"
          statement(s) are not supported by the Sieve interpreter.<a href="#section-5.2.1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-5.2.2">
          <h4 id="name-scriptisactive">
<a href="#section-5.2.2" class="section-number selfRef">5.2.2. </a><a href="#name-scriptisactive" class="section-name selfRef">scriptIsActive</a>
          </h4>
<p id="section-5.2.2-1">JMAP Error Code: scriptIsActive<a href="#section-5.2.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2.2-2">Intended use: common<a href="#section-5.2.2-2" class="pilcrow">¶</a></p>
<p id="section-5.2.2-3">Change controller: IETF<a href="#section-5.2.2-3" class="pilcrow">¶</a></p>
<p id="section-5.2.2-4">Reference: This document, <a href="#set" class="xref">Section 2.2</a><a href="#section-5.2.2-4" class="pilcrow">¶</a></p>
<p id="section-5.2.2-5">Description: The client tried to destroy the active
          SieveScript.<a href="#section-5.2.2-5" class="pilcrow">¶</a></p>
</section>
</section>
</section>
<section id="section-6">
      <h2 id="name-acknowledgments">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-6-1">The concepts in this document are based largely on those in
      <span>[<a href="#RFC5804" class="xref">RFC5804</a>]</span>. 
      The author would like to thank the authors of that document for
      providing both inspiration and some borrowed text for this
      document.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">The author would also like to thank the following
      individuals for contributing their ideas and support for
      writing this specification: Bron Gondwana, Neil Jenkins, Alexey
      Melnikov, and Ricardo Signes.<a href="#section-6-2" class="pilcrow">¶</a></p>
</section>
<section id="section-7">
      <h2 id="name-references">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-7.1">
        <h3 id="name-normative-references">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3629">[RFC3629]</dt>
        <dd>
<span class="refAuthor">Yergeau, F.</span>, <span class="refTitle">"UTF-8, a transformation format of ISO 10646"</span>, <span class="seriesInfo">STD 63</span>, <span class="seriesInfo">RFC 3629</span>, <span class="seriesInfo">DOI 10.17487/RFC3629</span>, <time datetime="2003-11" class="refDate">November 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3629">https://www.rfc-editor.org/info/rfc3629</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3986">[RFC3986]</dt>
        <dd>
<span class="refAuthor">Berners-Lee, T.</span>, <span class="refAuthor">Fielding, R.</span>, and <span class="refAuthor">L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01" class="refDate">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3986">https://www.rfc-editor.org/info/rfc3986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5198">[RFC5198]</dt>
        <dd>
<span class="refAuthor">Klensin, J.</span> and <span class="refAuthor">M. Padlipsky</span>, <span class="refTitle">"Unicode Format for Network Interchange"</span>, <span class="seriesInfo">RFC 5198</span>, <span class="seriesInfo">DOI 10.17487/RFC5198</span>, <time datetime="2008-03" class="refDate">March 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5198">https://www.rfc-editor.org/info/rfc5198</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5228">[RFC5228]</dt>
        <dd>
<span class="refAuthor">Guenther, P., Ed.</span> and <span class="refAuthor">T. Showalter, Ed.</span>, <span class="refTitle">"Sieve: An Email Filtering Language"</span>, <span class="seriesInfo">RFC 5228</span>, <span class="seriesInfo">DOI 10.17487/RFC5228</span>, <time datetime="2008-01" class="refDate">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5228">https://www.rfc-editor.org/info/rfc5228</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5322">[RFC5322]</dt>
        <dd>
<span class="refAuthor">Resnick, P., Ed.</span>, <span class="refTitle">"Internet Message Format"</span>, <span class="seriesInfo">RFC 5322</span>, <span class="seriesInfo">DOI 10.17487/RFC5322</span>, <time datetime="2008-10" class="refDate">October 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5322">https://www.rfc-editor.org/info/rfc5322</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5435">[RFC5435]</dt>
        <dd>
<span class="refAuthor">Melnikov, A., Ed.</span>, <span class="refAuthor">Leiba, B., Ed.</span>, <span class="refAuthor">Segmuller, W.</span>, and <span class="refAuthor">T. Martin</span>, <span class="refTitle">"Sieve Email Filtering: Extension for Notifications"</span>, <span class="seriesInfo">RFC 5435</span>, <span class="seriesInfo">DOI 10.17487/RFC5435</span>, <time datetime="2009-01" class="refDate">January 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5435">https://www.rfc-editor.org/info/rfc5435</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6134">[RFC6134]</dt>
        <dd>
<span class="refAuthor">Melnikov, A.</span> and <span class="refAuthor">B. Leiba</span>, <span class="refTitle">"Sieve Extension: Externally Stored Lists"</span>, <span class="seriesInfo">RFC 6134</span>, <span class="seriesInfo">DOI 10.17487/RFC6134</span>, <time datetime="2011-07" class="refDate">July 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6134">https://www.rfc-editor.org/info/rfc6134</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8620">[RFC8620]</dt>
        <dd>
<span class="refAuthor">Jenkins, N.</span> and <span class="refAuthor">C. Newman</span>, <span class="refTitle">"The JSON Meta Application Protocol (JMAP)"</span>, <span class="seriesInfo">RFC 8620</span>, <span class="seriesInfo">DOI 10.17487/RFC8620</span>, <time datetime="2019-07" class="refDate">July 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8620">https://www.rfc-editor.org/info/rfc8620</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8621">[RFC8621]</dt>
      <dd>
<span class="refAuthor">Jenkins, N.</span> and <span class="refAuthor">C. Newman</span>, <span class="refTitle">"The JSON Meta Application Protocol (JMAP) for Mail"</span>, <span class="seriesInfo">RFC 8621</span>, <span class="seriesInfo">DOI 10.17487/RFC8621</span>, <time datetime="2019-08" class="refDate">August 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8621">https://www.rfc-editor.org/info/rfc8621</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-7.2">
        <h3 id="name-informative-references">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-jmap-blob">[I-D.ietf-jmap-blob]</dt>
        <dd>
<span class="refAuthor">Gondwana, B.</span>, <span class="refTitle">"JMAP Blob management extension"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-jmap-blob-05</span>, <time datetime="2021-10-28" class="refDate">28 October 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-jmap-blob-05">https://datatracker.ietf.org/doc/html/draft-ietf-jmap-blob-05</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5230">[RFC5230]</dt>
        <dd>
<span class="refAuthor">Showalter, T.</span> and <span class="refAuthor">N. Freed, Ed.</span>, <span class="refTitle">"Sieve Email Filtering: Vacation Extension"</span>, <span class="seriesInfo">RFC 5230</span>, <span class="seriesInfo">DOI 10.17487/RFC5230</span>, <time datetime="2008-01" class="refDate">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5230">https://www.rfc-editor.org/info/rfc5230</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5232">[RFC5232]</dt>
        <dd>
<span class="refAuthor">Melnikov, A.</span>, <span class="refTitle">"Sieve Email Filtering: Imap4flags Extension"</span>, <span class="seriesInfo">RFC 5232</span>, <span class="seriesInfo">DOI 10.17487/RFC5232</span>, <time datetime="2008-01" class="refDate">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5232">https://www.rfc-editor.org/info/rfc5232</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5429">[RFC5429]</dt>
        <dd>
<span class="refAuthor">Stone, A., Ed.</span>, <span class="refTitle">"Sieve Email Filtering: Reject and Extended Reject Extensions"</span>, <span class="seriesInfo">RFC 5429</span>, <span class="seriesInfo">DOI 10.17487/RFC5429</span>, <time datetime="2009-03" class="refDate">March 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5429">https://www.rfc-editor.org/info/rfc5429</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5463">[RFC5463]</dt>
        <dd>
<span class="refAuthor">Freed, N.</span>, <span class="refTitle">"Sieve Email Filtering: Ihave Extension"</span>, <span class="seriesInfo">RFC 5463</span>, <span class="seriesInfo">DOI 10.17487/RFC5463</span>, <time datetime="2009-03" class="refDate">March 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5463">https://www.rfc-editor.org/info/rfc5463</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5804">[RFC5804]</dt>
      <dd>
<span class="refAuthor">Melnikov, A., Ed.</span> and <span class="refAuthor">T. Martin</span>, <span class="refTitle">"A Protocol for Remotely Managing Sieve Scripts"</span>, <span class="seriesInfo">RFC 5804</span>, <span class="seriesInfo">DOI 10.17487/RFC5804</span>, <time datetime="2010-07" class="refDate">July 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5804">https://www.rfc-editor.org/info/rfc5804</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<section id="appendix-A">
      <h2 id="name-change-history-to-be-remove">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-change-history-to-be-remove" class="section-name selfRef">Change History
      (To be removed by RFC Editor before publication)</a>
      </h2>
<p id="appendix-A-1">Changes since ietf-05:<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-2.1">Converted source from xml2rfc v2 to v3.<a href="#appendix-A-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-2.2">Added examples for SieveScript/get.<a href="#appendix-A-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-2.3">Miscellaneous editorial changes.<a href="#appendix-A-2.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="appendix-A-3">Changes since ietf-04:<a href="#appendix-A-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-4.1">SieveScript/test: Switched from using a JSON array for each
        completed action and its args to a JSON object.<a href="#appendix-A-4.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-4.2">Switched to referencing draft-ietf-jmap-blob.<a href="#appendix-A-4.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-4.3">Miscellaneous editorial changes.<a href="#appendix-A-4.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="appendix-A-5">Changes since ietf-03:<a href="#appendix-A-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-6.1">SieveScript/test: Moved positional arguments into their own
        array (because the specfications don't use a consistent method for
        defining the action syntax or naming of positional arguments).<a href="#appendix-A-6.1" class="pilcrow">¶</a>
</li>
      </ul>
<p id="appendix-A-7">Changes since ietf-02:<a href="#appendix-A-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-8.1">Removed open issues.<a href="#appendix-A-8.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-8.2">Reverted back to using only blob ids for script content.<a href="#appendix-A-8.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-8.3">Added "rateLimit" and "requestTooLarge" to the list of
        possible error codes for /set method.<a href="#appendix-A-8.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-8.4">Added Compatibility with JMAP Vacation Response
        section.<a href="#appendix-A-8.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-8.5">Added RFC5228 to Security Considerations.<a href="#appendix-A-8.5" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-8.6">Miscellaneous editorial changes.<a href="#appendix-A-8.6" class="pilcrow">¶</a>
</li>
      </ul>
<p id="appendix-A-9">Changes since ietf-01:<a href="#appendix-A-9" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-10.1">Removed normative references to ManageSieve (RFC 5804).<a href="#appendix-A-10.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-10.2">Added the 'maxSizeScriptName' capability.<a href="#appendix-A-10.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-10.3">Made the 'name' property in the SieveScript object
        optional.<a href="#appendix-A-10.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-10.4">Added requirements for the 'name' property in the
        SieveScript object.<a href="#appendix-A-10.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-10.5">Removed the 'blobId' property from the SieveScript
        object.<a href="#appendix-A-10.5" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-10.6">Removed the 'replaceOnCreate' argument from the /set
        method.<a href="#appendix-A-10.6" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-10.7">Removed the 'blobId' argument from the /validate method.<a href="#appendix-A-10.7" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-10.8">Removed the 'scriptBlobId' argument from, and added the
        'scriptContent' argument to, the /test method.<a href="#appendix-A-10.8" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-10.9">Editorial fixes from Neil Jenkins and Ricardo Signes.<a href="#appendix-A-10.9" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-10.10">Other miscellaneous text reorganization and editorial fixes.<a href="#appendix-A-10.10" class="pilcrow">¶</a>
</li>
      </ul>
<p id="appendix-A-11">Changes since ietf-00:<a href="#appendix-A-11" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-12.1">Specified that changes made by onSuccessActivateScript MUST
        be reported in the /set response as created and/or updated as
        appropriate.<a href="#appendix-A-12.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-12.2">Reworked and specified more of the /test response based on
        implementation experience.<a href="#appendix-A-12.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="appendix-A-13">Changes since murchison-01:<a href="#appendix-A-13" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-14.1">Explicitly stated that Sieve capability strings are
        case-sensitive.<a href="#appendix-A-14.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-14.2">errorDescription is now String|null.<a href="#appendix-A-14.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-14.3">Added /query method.<a href="#appendix-A-14.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-14.4">Added /test method.<a href="#appendix-A-14.4" class="pilcrow">¶</a>
</li>
      </ul>
<p id="appendix-A-15">Changes since murchison-00:<a href="#appendix-A-15" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-16.1">Added IANA registration for "scriptIsActive" JMAP error code.<a href="#appendix-A-16.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-16.2">Added open issue about /set{create} with an existing script name.<a href="#appendix-A-16.2" class="pilcrow">¶</a>
</li>
      </ul>
</section>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Kenneth Murchison</span></div>
<div dir="auto" class="left"><span class="org">Fastmail US LLC</span></div>
<div dir="auto" class="left"><span class="street-address">1429 Walnut Street - Suite 1201</span></div>
<div dir="auto" class="left">
<span class="locality">Philadelphia</span>, <span class="region">PA</span> <span class="postal-code">19102</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:murch@fastmailteam.com" class="email">murch@fastmailteam.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
