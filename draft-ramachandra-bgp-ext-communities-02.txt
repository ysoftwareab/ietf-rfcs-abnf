Network Working Group                           Srihari Ramachandra
Internet Draft                                        Daniel Tappan
Expiration Date: March 2000                           cisco Systems

                   BGP Extended Communities Attribute

              draft-ramachandra-bgp-ext-communities-02.txt

1. Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026 except that the right to
   produce derivative works is not granted.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as ``work in progress.''

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

2. Abstract

   This document describes an extension to BGP [BGP-4] which may be used
   to provide flexible control over the distribution of routing
   information.

Ramachandra, Tappan                                             [Page 1]

Internet Draftdraft-ramachandra-bgp-ext-communities-02.txtSeptember 1999

3. Introduction

   The Extended Community Attribute provides two important enhancements
   over the existing BGP Community Attribute:

      - It provides an extended range, ensuring that communities can be
      assigned for a plethora of uses, without fear of overlap.

      - The addition of a Type field provides structure for the
      community space.

   The addition of structure allows the application of policy based on
   the application for which the community value will be used. For
   example, one can filter out all communities of a particular type, or
   allow only certain values for a particular type of community. Without
   structure this can only be accomplished by explicitly enumerating all
   community values which will be denied or allowed.

4. BGP Extended Communities Attribute

   The Extended Communities Attribute is a transitive optional BGP
   attribute. The attribute consists of a set of "extended communities".
   Each extended community is coded as an eight octet value.  All routes
   with  the Extended Communities attribute belong to the communities
   listed in the attribute.

   The Extended Communities Attribute has Type Code 16.

   Each Extended Community is encoded as an eight octet quantity, as
   follows:

      - Type Field: 2 octets

         Types 0 through 0x7fff inclusive are assignable by IANA.  Types
         0x8000 through 0xffff inclusive are vendor-specific.

      - Value Field: 6 octets

         When the high-order octet of the Type field is 0x00, the Value
         field consists of two subfields:

            Administrator: 2 octets

               This subfield contains an Autonomous System number
               assigned by IANA.

            Assigned Number subfield: 4 octets

Ramachandra, Tappan                                             [Page 2]

Internet Draftdraft-ramachandra-bgp-ext-communities-02.txtSeptember 1999

               This subfield contains a number from a numbering space
               which is administered by the organization to which the
               Automous System number in the Administrator subfield has
               been assigned by IANA.

         When the high-order octet of the Type field is 0x01, the Value
         field consists of two subfields:

            Administrator: 4 octets

               This subfield contains an IPv4 address assigned by IANA.

            Assigned Number subfield: 2 octets

               This subfield contains a number from a numbering space
               which is administered by the organization to which the
               IPv4 address in the Administrator subfield has been
               assigned by IANA.

5. Route Origin Community

   The Route Origin Community identifies one or more routers that inject
   a set of routes (that carry this Community) into BGP.

   The Type field for the Route Origin Community is 0x0001 or 0x0101.

6. Route Target Community

   The Route Target Community identifies one or more routers that may
   receive a set of routes (that carry this Community) carried by BGP.

   The Type field for the Route Target Community is 0x0002 or 0x0102.

7. Operations

   A BGP speaker may use the Extended Communities attribute to control
   which routing information it accepts, prefers or distributes to its
   peers.

   A BGP speaker receiving a route that doesn't have the Extended
   Communities attribute may append this attribute to the route when
   propagating it to its peers.

   A BGP speaker receiving a route with the Extended Communities
   attribute may modify this attribute according to the local policy.

Ramachandra, Tappan                                             [Page 3]

Internet Draftdraft-ramachandra-bgp-ext-communities-02.txtSeptember 1999

   A route may carry both the BGP Communities attribute  as defined in
   [RFC1997]), and the Extended BGP Communities attribute. In this case
   the BGP Communities attribute is handled as specified in [RFC1997],
   and the Extended BGP Communities attribute is handled as specified in
   this document.

8. Security Considerations

   This extension to BGP does not change the underlying security issues.

9. Acknowledgements

   To be supplied.

10. References

   [BGP-4]   Rekhter, Y., and T. Li, "A Border Gateway Protocol 4 (BGP-
   4)", RFC 1771, March 1995.

   [RFC1997] Chandra, R., Traina, P., Li, T., "BGP Communities
   Attribute", RFC1997, August 1996.

11. Author Information

   Srihari Ramachandra
   Cisco Systems, Inc.
   170 West Tasman Drive
   San Jose, CA 95134
   e-mail: rsrihari@cisco.com

   Dan Tappan
   Cisco Systems, Inc.
   250 Apollo Drive
   Chelmsford, MA, 01824
   e-mail: tappan@cisco.com

Ramachandra, Tappan                                             [Page 4]
