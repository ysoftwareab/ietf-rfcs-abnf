<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Testing Eyeball Happiness</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Testing Eyeball Happiness">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Benchmarking Methodology</td><td class="header">F. Baker</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Cisco Systems</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">December 14, 2010</td></tr>
<tr><td class="header">Expires: June 17, 2011</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Testing Eyeball Happiness<br />draft-baker-bmwg-testing-eyeball-happiness-02</h1>

<h3>Abstract</h3>

<p>The amount of time it takes to establish a session using common
      transport APIs in dual stack networks and networks with filtering such
      as proposed in BCP 38 is a barrier to IPv6 deployment. This note
      describes a test that can be used to determine whether an application
      can reliably establish sessions quickly in a complex environment such as
      dual stack (IPv4+IPv6) deployment or IPv6 deployment with multiple
      prefixes and upstream ingress filtering. This test is not a test of a
      specific algorithm, but of the external behavior of the system as a
      black box. Any algorithm that has the intended external behavior will be
      accepted by it.
</p>
<h3>Requirements</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on June 17, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#test">2.</a>&nbsp;
Measuring Eyeball Happiness<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#testbed">2.1.</a>&nbsp;
Happy Eyeballs test bed configuration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#procedure">2.2.</a>&nbsp;
Happy Eyeballs test procedure<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#metrics">2.3.</a>&nbsp;
Happy Eyeballs metrics<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#session-metric">2.3.1.</a>&nbsp;
Metric: Session Setup Interval<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Max-metric">2.3.2.</a>&nbsp;
Metric: Maximum Session Setup Interval<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Min-metric">2.3.3.</a>&nbsp;
Metric: Minimum Session Setup Interval<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Variation-metric">2.3.4.</a>&nbsp;
Descriptive Metric: Attempt pattern<br />
<a href="#IANA">3.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">4.</a>&nbsp;
Security Considerations<br />
<a href="#Acknowledgements">5.</a>&nbsp;
Acknowledgements<br />
<a href="#log">6.</a>&nbsp;
Change Log<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">7.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">7.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The <a class='info' href='#I-D.wing-v6ops-happy-eyeballs-ipv6'>Happy
      Eyeballs<span> (</span><span class='info'>Wing, D. and A. Yourtchenko, &ldquo;Happy Eyeballs: Trending Towards Success with Dual-Stack Hosts,&rdquo; October&nbsp;2010.</span><span>)</span></a> [I&#8209;D.wing&#8209;v6ops&#8209;happy&#8209;eyeballs&#8209;ipv6] specification notes an issue in deployed multi-prefix
      IPv6-only and dual stack networks, and proposes a correction. <a class='info' href='#RFC5461'>[RFC5461]<span> (</span><span class='info'>Gont, F., &ldquo;TCP's Reaction to Soft Errors,&rdquo; February&nbsp;2009.</span><span>)</span></a> similarly looks at TCP's response to so-called
      "soft errors" (ICMP host and network unreachable messages), pointing out
      an issue and a set of possible solutions.
</p>
<p>In a dual stack network (i.e., one that contains both <a class='info' href='#RFC0791'>IPv4<span> (</span><span class='info'>Postel, J., &ldquo;Internet Protocol,&rdquo; September&nbsp;1981.</span><span>)</span></a> [RFC0791] and <a class='info' href='#RFC2460'>IPv6<span> (</span><span class='info'>Deering, S. and R. Hinden, &ldquo;Internet Protocol, Version 6 (IPv6) Specification,&rdquo; December&nbsp;1998.</span><span>)</span></a> [RFC2460]
      prefixes and routes), or in an IPv6-only network that uses multiple
      prefixes allocated by upstream providers that implement <a class='info' href='#RFC2827'>BCP 38 Ingress Filtering<span> (</span><span class='info'>Ferguson, P. and D. Senie, &ldquo;Network Ingress Filtering: Defeating Denial of Service Attacks which employ IP Source Address Spoofing,&rdquo; May&nbsp;2000.</span><span>)</span></a> [RFC2827], the fact that two
      hosts that need to communicate have addresses using the same
      architecture does not imply that the network has usable routes
      connecting them, or that those addresses are useful to the applications
      in question. In addition, the process of establishing a session using
      the <a class='info' href='#RFC3493'>Sockets API<span> (</span><span class='info'>Gilligan, R., Thomson, S., Bound, J., McCann, J., and W. Stevens, &ldquo;Basic Socket Interface Extensions for IPv6,&rdquo; February&nbsp;2003.</span><span>)</span></a> [RFC3493] is generally described in
      terms of obtaining a list of possible addresses for a peer (which will
      normally include both IPv4 and IPv6 addresses) using getaddrinfo() and
      trying them in sequence until one succeeds or all have failed. This
      naive algorithm, if implemented as described, has the side-effect of
      making the worst case delay in establishing a session far longer than
      human patience normally allows.
</p>
<p>This has the effect of discouraging users from enabling IPv6 in their
      equipment, or content providers from offering AAAA records for their
      services.
</p>
<p>This note describes a test to determine how quickly an application
      can reliably open sessions in a complex environment, such as dual stack
      (IPv4+IPv6) deployment or IPv6 deployment with multiple prefixes and
      upstream ingress filtering. This is not a test of a specific algorithm,
      but a measurement of the external behavior of the application and its
      host system as a black box. The "happy eyeballs" question is this: how
      long does it take an application to open a session with a server or
      peer, under best case and worst case conditions?
</p>
<p>The methods defined here make the assumption that the initial
      communication set-up of many applications can be summarized by the
      measuring the DNS query/response and transport layer handshaking,
      because no application-layer communication takes place without these
      steps.
</p>
<p>The methods and metrics defined in this note are ideally suited for
      Laboratory operation, as this affords the greatest degree of control to
      modify configurations quickly and produce consistent results.
</p>
<p>However, if the device under test is operated as a single user with
      limited query and stream generation, then there's no concern about
      overloading production network devices with a single "set of eyeballs".
      Therefore, these procedures and metrics MAY be applicable to production
      network application, as long as the injected traffic represents a single
      user's typical traffic load, and the testers adhere to the precautions
      of the relevant network with respect to re-configuration of devices in
      production.
</p>
<a name="test"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Measuring Eyeball Happiness</h3>

<p>This measurement determines the amount of time it takes an
      application to establish a session with a peer in the presence of at
      least one IPv4 and multiple IPv6 prefixes and a variety of network
      behaviors. ISPs are reporting that a host (MacOSX, Windows, Linux,
      FreeBSD, etc) that has more than one address (an IPv4 and an IPv6
      address, two global IPv6 addresses, etc) may serially try addresses,
      allowing each TCP setup to expire, taking several seconds for each
      attempt. There have been reports of a session setup taking as long as 40
      seconds as a result. The amount of time necessary to establish
      communication between two entities should be approximately the same
      regardless of the type of address chosen or the viability of routing in
      the specific network; users will expect this time to be consistent with
      their current experience (else, happiness is at risk).
</p>
<a name="testbed"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Happy Eyeballs test bed configuration</h3>

<p>The configuration of equipment and applications is as shown in
        <a class='info' href='#test1'>Figure&nbsp;1<span> (</span><span class='info'>Generic Test Environment</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="test1"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
+--------+ |                      |198.51.100.0/24
|Protocol| |192.0.2.0/24          |2001:DB8:0:2::/64
|Analyzer+-+2001:DB8:1:0::/64     |2001:DB8:1:4::/64
+--------+ |2001:DB8:0:1::/64     |2001:DB8:2:4::/64
           |                      |
   +-----+ |                      | +-----+
   |Alice+-+                      +-+ Bob |
   +-----+ | +-------+  +-------+ | +-----+
           +-+Router1|  |Router2+-+
   +-----+ | +-----+-+  +-+-----+ |
   | DNS +-+       |      |       |
   +-----+ |      -+------+-      |
           |    203.0.113.0/24    |
           |    2001:DB8:0:3::/64 |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Generic Test Environment&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Alice is the unit being measured, the computer running the process
        that will establish a session with Bob for the application in
        question. DNS is represented in the diagram as a separate system, as
        is the protocol analyzer that will watch Alice's traffic. This is not
        absolutely necessary; If one computer can run tcpdump and a DNS server
        process - and for that matter subsume the routers - that is
        acceptable. The units are separated in the test for purposes of
        clarity.
</p>
<p>On each test run, configuration is performed in Router 1 to permit
        only one route to work. There are various ways this can be
        accomplished, including but not limited to installing</p>
<ul class="text">
<li>a filter that drops datagrams to Bob resulting in an ICMP
            "administratively prohibited",
</li>
<li>a filter that silently drops datagrams to Bob,
</li>
<li>a null route or removing the route to one of Bob's prefixes,
            resulting in an ICMP "destination unreachable", and
</li>
<li>a middleware program that responds with a TCP RST.
</li>
</ul>

<p>The tester should try different methods to determine whether
        differences in this configuration make a difference in the test. For
        example, one might find that the application under test responds
        differently to a TCP RST than to a silent packet loss.
</p>
<a name="procedure"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Happy Eyeballs test procedure</h3>

<p>Consider a network as described in <a class='info' href='#testbed'>Section&nbsp;2.1<span> (</span><span class='info'>Happy Eyeballs test bed configuration</span><span>)</span></a>.
        Alice and Bob each have a set of one or more IPv4 and two or more IPv6
        addresses in DNS, and routers 1 and 2 are configured to route the
        relevant prefixes. Different measurement trials revise an access list
        or null route in Router 1 that would prevent traffic Alice-&gt;Bob
        using each of Bob's addresses. If Bob has a total of N addresses, we
        run the measurement at least N times, permitting exactly one of the
        addresses to enjoy end to end communication each time. If the DNS
        service randomizes the order of the addresses, this may not result in
        a test requiring establishment of a connection to all of the
        addresses; in this case, the test will have to be run repeatedly until
        in at least one instance a TCP SYN or its equivalent is seen for each
        relevant address. The tester should either flush the resolver cache
        between iterations, to force repeated DNS resolution, or should wait
        for at least the DNS RR TTL on each resource record. In the latter
        case, the tester should also observe DNS re-resolving; if not, the
        application is not correctly using DNS.
</p>
<p>This specification assumes common LAN technology with no competing
        traffic and nominal propagation delays, so that they are not a factor
        in the measurement.
</p>
<p>The objective is to measure the amount of time required to
        establish a session. This includes the time from Alice's initial DNS
        request through one or more attempts to establish a session to the
        session being established, as seen in the LAN trace. The simplest way
        to measure this will be to put a traffic analyzer on Alice's point of
        attachment and capture the messages exchanged by Alice.
</p><br /><hr class="insert" />
<a name="tcpflow"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
 DNS Server                   Alice                    Bob
     |                          |                       |
 1.  |&lt;--www.example.com A------|                       |
 2.  |&lt;--www.example.com AAAA---|                       |
 3.  |---192.0.2.1-------------&gt;|                       |
 4.  |---2001:dba::1-----------&gt;|                       |
 5.  |                          |                       |
 6.  |                          |--TCP SYN, IPv6---&gt;X   |&lt;***********
 7.  |                          |--TCP SYN, IPv6---&gt;X   |     |
 8.  |                          |--TCP SYN, IPv6---&gt;X   | TCP 3wHS
 9.  |                          |                       |   Time
10.  |                          |--TCP SYN, IPv4-------&gt;|(any family)
11.  |                          |&lt;-TCP SYN+ACK, IPv4----|     |
12.  |                          |--TCP ACK, IPv4-------&gt;|&lt;***********
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Message flow using TCP&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>In a TCP-based application (<a class='info' href='#tcpflow'>Figure&nbsp;2<span> (</span><span class='info'>Message flow using TCP</span><span>)</span></a>), that
        would be from the DNS request on line 1 through the first completion
        of a TCP three-way handshake, the transmission on line 12.
</p><br /><hr class="insert" />
<a name="udpflow"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
DNS Server                   Alice                    Bob
     |                          |                       |
 1.  |&lt;--www.example.com A------|                       |
 2.  |&lt;--www.example.com AAAA---|                       |
 3.  |---192.0.2.1-------------&gt;|                       |
 4.  |---2001:dba::1-----------&gt;|                       |
 5.  |                          |                       |
 6.  |                          |--UDP Request, IPv6--&gt;X|&lt;---------
 7.  |                          |--UDP Request, IPv6--&gt;X|  first
 8.  |                          |--UDP Request, IPv6--&gt;X|  request/
 9.  |                          |                       |  response
10.  |                          |--UDP Request, IPv4---&gt;|  success
11.  |                          |&lt;-UDP Response, IPv4---|&lt;---------
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Message flow using UDP&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>In a UDP-based application (<a class='info' href='#udpflow'>Figure&nbsp;3<span> (</span><span class='info'>Message flow using UDP</span><span>)</span></a>), that
        would be from the DNS request (line 1) through one or more UDP
        Requests (lines 6-10) until a UDP Response is seen (line 11).
</p>
<p>When using other transports, the methodology will have to be
        specified in context; it should measure the same event.
</p>
<a name="metrics"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Happy Eyeballs metrics</h3>

<p>The measurements taken are the duration of the interval from the
        initial DNS request until the session is seen to have been
        established, as described in <a class='info' href='#procedure'>Section&nbsp;2.2<span> (</span><span class='info'>Happy Eyeballs test procedure</span><span>)</span></a>. We are
        interested in the shortest and longest durations (which will most
        likely be those that send one SYN and succeed and those that send a
        SYN to each possible address before succeeding in one of the
        attempts), and the pattern of attempts sent to different addresses.
        The pattern may be to simply send an attempt every &lt;time
        interval&gt;, or may be more complex; as a result, this is in part
        descriptive.
</p>
<p>ALL measurement events on the sending and receiving of messages
        SHALL be observed at the "Alice" attachment point and time stamps
        SHOULD be applied upon reception of the last bit of the IP information
        field. Use of a alternate timing reference SHALL be noted.
</p>
<a name="session-metric"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.1"></a><h3>2.3.1.&nbsp;
Metric: Session Setup Interval</h3>

<p></p>
<blockquote class="text"><dl>
<dt>Name:</dt>
<dd>Session Setup Interval
</dd>
<dt>Description:</dt>
<dd>The session setup interval MUST be
              the time beginning with the first DNS query sent (observed at
              Alice's attachment), and ending with successful transport
              connection establishment (as indicated in line 12 of <a class='info' href='#tcpflow'>Figure&nbsp;2<span> (</span><span class='info'>Message flow using TCP</span><span>)</span></a>, and line 11 of <a class='info' href='#udpflow'>Figure&nbsp;3<span> (</span><span class='info'>Message flow using UDP</span><span>)</span></a>). This interval is defined as the
              session setup interval.
</dd>
<dt>Methodology:</dt>
<dd>In the LAN analyzer trace, note the
              times of the initial DNS request and the confirmation that the
              session is open as described in <a class='info' href='#procedure'>Section&nbsp;2.2<span> (</span><span class='info'>Happy Eyeballs test procedure</span><span>)</span></a>. Several instances of the test will
              be run, in at least one of which a successful attempt is seen to
              each of Bob's addresses.
</dd>
<dt>Units:</dt>
<dd>Session setup time is measured in
              milliseconds.
</dd>
<dt>Measurement Point(s):</dt>
<dd>The measurement point is at
              Alice's LAN interface, both sending and receiving, observed
              using a program such as tcpdump running on Alice or an external
              analyzer.
</dd>
<dt>Timing:</dt>
<dd>Measurements are conducted using a single clock, whose
accuracy MUST be sufficient to maintain no more than 0.1 ms error
over a 60 second interval. 1 ppm accuracy would suffice.
</dd>
</dl></blockquote>

<a name="Max-metric"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.2"></a><h3>2.3.2.&nbsp;
Metric: Maximum Session Setup Interval</h3>

<p></p>
<blockquote class="text"><dl>
<dt>Name:</dt>
<dd>Maximum Session Setup Interval
</dd>
<dt>Description:</dt>
<dd>The maximum session setup interval is
              the longest period of time observed for the establishment of a
              session as described in <a class='info' href='#session-metric'>Section&nbsp;2.3.1<span> (</span><span class='info'>Metric: Session Setup Interval</span><span>)</span></a>.
</dd>
<dt>Methodology:</dt>
<dd>see Session Setup Interval.
</dd>
<dt>Units:</dt>
<dd>Session setup time is measured in
              milliseconds.
</dd>
<dt>Measurement Point(s):</dt>
<dd>see Session Setup
              Interval.
</dd>
<dt>Timing:</dt>
<dd>Measurements are conducted using a single clock, whose
accuracy MUST be sufficient to maintain no more than 0.1 ms error
over a 60 second interval. 1 ppm accuracy would suffice.
</dd>
</dl></blockquote>

<a name="Min-metric"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.3"></a><h3>2.3.3.&nbsp;
Metric: Minimum Session Setup Interval</h3>

<p></p>
<blockquote class="text"><dl>
<dt>Name:</dt>
<dd>Minimum Session Setup Interval
</dd>
<dt>Description:</dt>
<dd>The minimum session setup interval is
              the shortest period of time observed for the establishment of a
              session.
</dd>
<dt>Methodology:</dt>
<dd>see Session Setup Interval.
</dd>
<dt>Units:</dt>
<dd>Session setup time is measured in
              milliseconds.
</dd>
<dt>Measurement Point(s):</dt>
<dd>see Session Setup
              Interval.
</dd>
<dt>Timing:</dt>
<dd>Measurements are conducted using a single clock, whose
accuracy MUST be sufficient to maintain no more than 0.1 ms error
over a 60 second interval. 1 ppm accuracy would suffice.
</dd>
</dl></blockquote>

<a name="Variation-metric"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.4"></a><h3>2.3.4.&nbsp;
Descriptive Metric: Attempt pattern</h3>

<p></p>
<blockquote class="text"><dl>
<dt>Name:</dt>
<dd>Attempt pattern
</dd>
<dt>Description: </dt>
<dd>The Attempt Pattern is a description
              of the observed pattern of attempts to establish the session. In
              simple cases, it may be something like "Initial TCP SYNs to a
              new address were observed every &lt;so many&gt; milliseconds";
              in more complex cases, it might be something like "Initial TCP
              SYNs in IPv6 were observed every &lt;so many&gt; milliseconds,
              and other TCP SYNs using IPv4 were observed every &lt;so
              many&gt; milliseconds, but the two sequences were independent."
              It may also comment on retransmission patterns if observed.
</dd>
<dt>Methodology:</dt>
<dd>The traffic trace is analyzed to
              determine the pattern of initiation.
</dd>
<dt>Units:</dt>
<dd>milliseconds.
</dd>
<dt>Measurement Point(s):</dt>
<dd>The measurement point is at
              Alice's LAN interface, observed using a program such as tcpdump
              running on Alice or an external analyzer.
</dd>
<dt>Timing:</dt>
<dd>Measurements are conducted using a single clock, whose
accuracy MUST be sufficient to maintain no more than 0.1 ms error
over a 60 second interval. 1 ppm accuracy would suffice.
</dd>
</dl></blockquote>

<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
IANA Considerations</h3>

<p>This memo asks the IANA for no new parameters.
</p>
<p>Note to RFC Editor: This section will have served its purpose if it
      correctly tells IANA that no new assignments or registries are required,
      or if those assignments or registries are created during the RFC
      publication process. From the author"s perspective, it may therefore be
      removed upon publication as an RFC at the RFC Editor"s discretion.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Security Considerations</h3>

<p>This note doesn't address security-related issues.
</p>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Acknowledgements</h3>

<p>This note was discussed with Dan Wing, Andrew Yourtchenko, and
      Fernando Gont. In the Benchmark Methodology Working Group, Al Morton,
      David Newman, and Sarah Banks made comments.
</p>
<a name="log"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Change Log</h3>

<p></p>
<blockquote class="text"><dl>
<dt>-00 Version:</dt>
<dd>Initial version - November, 2010
</dd>
<dt>-01 Version:</dt>
<dd>Rewritten per suggestions by Al Morton,
          David Newman, and Sarah Banks.
</dd>
<dt>-02 Version:</dt>
<dd>Clean-up per working group comments
</dd>
</dl></blockquote>

<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.wing-v6ops-happy-eyeballs-ipv6">[I-D.wing-v6ops-happy-eyeballs-ipv6]</a></td>
<td class="author-text">Wing, D. and A. Yourtchenko, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-wing-v6ops-happy-eyeballs-ipv6-01.txt">Happy Eyeballs: Trending Towards Success with Dual-Stack Hosts</a>,&rdquo; draft-wing-v6ops-happy-eyeballs-ipv6-01 (work in progress), October&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-wing-v6ops-happy-eyeballs-ipv6-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC0791">[RFC0791]</a></td>
<td class="author-text">Postel, J., &ldquo;<a href="http://tools.ietf.org/html/rfc791">Internet Protocol</a>,&rdquo; STD&nbsp;5, RFC&nbsp;791, September&nbsp;1981 (<a href="http://www.rfc-editor.org/rfc/rfc791.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2460">[RFC2460]</a></td>
<td class="author-text"><a href="mailto:deering@cisco.com">Deering, S.</a> and <a href="mailto:hinden@iprg.nokia.com">R. Hinden</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2460">Internet Protocol, Version 6 (IPv6) Specification</a>,&rdquo; RFC&nbsp;2460, December&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2460.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2460.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2460.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2827">[RFC2827]</a></td>
<td class="author-text">Ferguson, P. and D. Senie, &ldquo;<a href="http://tools.ietf.org/html/rfc2827">Network Ingress Filtering: Defeating Denial of Service Attacks which employ IP Source Address Spoofing</a>,&rdquo; BCP&nbsp;38, RFC&nbsp;2827, May&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2827.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3493">[RFC3493]</a></td>
<td class="author-text">Gilligan, R., Thomson, S., Bound, J., McCann, J., and W. Stevens, &ldquo;<a href="http://tools.ietf.org/html/rfc3493">Basic Socket Interface Extensions for IPv6</a>,&rdquo; RFC&nbsp;3493, February&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3493.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5461">[RFC5461]</a></td>
<td class="author-text">Gont, F., &ldquo;<a href="http://tools.ietf.org/html/rfc5461">TCP's Reaction to Soft Errors</a>,&rdquo; RFC&nbsp;5461, February&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5461.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Fred Baker</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Santa Barbara, California  93117</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:fred@cisco.com">fred@cisco.com</a></td></tr>
</table>
</body></html>
