





INTERNET DRAFT                                            Yong-Geun Hong
Expires: January 2002                                      Jung-soo Park
                                                              Min-kyo In
                                                            Yong-jin Kim
                                                                    ETRI
                                                               July 2001

       Multicast Address Allocation using IPv4 Link-local Address
              <draft-hong-autoconf-multicast-ipv4-00.txt>


Status of this Memo

     This document is an Internet-Draft and is in full conformance with
     all provisions of Section 10 of RFC2026.

     Internet Drafts are working documents of the Internet Engineering
     Task Force (IETF), its areas, and working groups. Note that other
     groups may also distribute working documents as Internet-Drafts.

     Internet-Drafts are draft documents valid for a maximum of six
     months and may be updated, replaced, or obsolete by other documents
     at anytime. It is inappropriate to use Internet Drafts as reference
     material or to cite them other than as "work in progress."

     The list of current Internet-Drafts can be accessed at
     http://www.ietf.org/ietf/1id-abstracts.txt.

     The list of Internet-Draft Shadow Directories can be accessed at
     http://www.ietf.org/shadow.html.


Abstract

     In this document, we describe a method by which a host
     automatically allocates multicast addresses using IPv4 link local
     address without any address allocation server. These multicast
     addresses do not collide with other multicast addresses in a local
     scope.




Table of Contents:

     1. Introduction
     2. IPv4 Multicast Address Allocation
     2.1 The IPv4 Local Scope Multicast Address
     2.2 Multicast Address Generation using IPv4 Link-local Address
     3  Consideration of Variable Network
     3.1 Intra-domain Network
     3.2 Inter-domain Network




Hong, Park, In, Kim       Expires January 2002                  [Page 1]


INTERNET-DRAFTMulticast Address Allocation using IPv4 Link-local AddressJuly 2001


     3.3 Consideration for Joining to a Global Network
     4. Limitations
     References




1. Introduction

     IPv4 addresses in the 169.254/16 ranges are used for link-local
     communication. These are valuable in networking where no other
     configuration and administration is available. We call this
     networking Zero configuration networking. The zero configuration
     network don't need any centralized administration. Networks where
     zeroconf protocols apply can include (but are not limited to)
     environments where no DHCP, MADCAP, or DNS servers are present.

     There are two methods for allocating an IP multicast address.
     Firstly, it can be allocated by using a multicast address
     allocation server. Secondly, it can be allocated without the
     server. The former allocates a hierarchical multicast address by
     using a MAAs server, or MADCAP server to guarantee the global
     uniqueness of the allocated address. The latter is a method where a
     host chooses a multicast address by its own way in the well-known
     multicast address range, and then checks the duplication of the
     address. In this document, we deal with the latter case that
     servers do not exist. While the latter method has the advantage of
     no need to use any server, it can cause a significant address
     resolution delay and increased traffic.

     In this document, we will describe multicast address allocation
     method without the delay and increased traffic within a local scope
     network.




2. IPv4 Multicast Address Allocation


     Typically, an IP address is used to identify a node within a
     network. A port number is used to identify a data stream between
     endpoints. Therefore, the host address and port number can be used
     as an identifier that differentiates sessions in a specific area.




2.1 The IPv4 Local Scope Multicast Address


     Originally the address space 239.255.0.0/16 was defined as being




Hong, Park, In, Kim       Expires January 2002                  [Page 2]


INTERNET-DRAFTMulticast Address Allocation using IPv4 Link-local AddressJuly 2001


     used in the IPv4 local scope multicast address, and that expanded
     to the reserved ranges of 239.254.0.0/16 and 239.253.0.0/16. If the
     demand of IPv4 local multicast scope is increased, the local
     multicast scope will be further extended.

     In this document, we consider two important issues. The first one
     is keeping the status of IP multicast address allocation.

     The second one is that the packet with a multicast address
     specified in local scope should not forward to outside networks. So
     we must define the routing policy at the border router such as
     "Administratively Scoped IP Multicast"[1]. With this routing
     policy, we can easily deal with the situations such as inter-domain
     networking and joining to a global network.



2.2 Multicast Address Generation using IPv4 Link-local Address


     In this document, a multicast address in the local scope is made
     from the combination of IPv4 link-local address (169.254.x.x) and
     multicast address prefix. The multicast address consists of two
     upper octets of an IPv4 local scope multicast address and two lower
     octets of a link-local address, as shown in figure 1.

              Host IP Address
           (link-local address)                  Port number
             +-------------+                     +------+
             |169.254.c.d   |                    | u.v  |
             +-------------+                     +------+
                   |                                 |
                   |                                 |
                   V                                 V
          +------------------------------------------------------+
          |  +--------------+ (1)                +---------+ (2) |
          |  |  239.255.c.d |                    |         |     |
          |  |  239.254.c.d |                    | (u.v)   |     |
          |  |  239.253.c.d |                    |         |     |
          |  +--------------+                    +---------+     |
          +------------------------------------------------------+
           Multicast Address subspace               port number

     Figure 1: Extended multicast address subspace formation using IPv4
     link-local address

     To make a multicast address in local scope, two upper octets are
     selected among [239.255/16, 239.254/16, 239.253/16] according to
     the above definition and two lower octets are generated by the copy
     the two lower octets of link-local address.

     Until now, the number of available multicast address is 3, and if




Hong, Park, In, Kim       Expires January 2002                  [Page 3]


INTERNET-DRAFTMulticast Address Allocation using IPv4 Link-local AddressJuly 2001


     the local multicast scope is extended, the number of available
     multicast addresses is also increased. Keeping the status of
     address allocation has some advantages, e.g., when a multicast
     address is needed, it can choose unique one without any bothersome
     jobs.

     And we can use two octets port number of link-local address to
     identify a multicast session address. The link-local address that
     is used for multicast address is unique in local scope by the
     mechanism of address collision detection [2]. So the generated
     multicast address is also unique in the local scope. We don't have
     to worry about the collision of the multicast address to other
     hosts. Within a host, it solves the collision of multicast address
     by keeping the status of address allocatioion.

     For example, let us assume a host has an IP address of
     169.254.190.121, and it can choose individual multicast addresses
     of 239.255.190.121, 239.254.190.121 and 239.253.190.121. Also, it
     can choose two octets-port numbers to identify the endpoint of the
     session. These three multicast address spaces with port numbers are
     unique in the local scope.



3  Consideration of Variable Network



3.1 Intra-domain Network


     All nodes in an Intra-domain network must perform DAD (Duplicate
     Address Detection) procedure.  Throughout the DAD procedure, a host
     can guarantee the uniqueness of the address in the local scope.

     For example in figure 2. The hosts A, B and C receive packets that
     have the multicast address 'a', and hosts C, D and E receive
     packets of the multicast address 'e'. Host C can receive packets of
     multicast address 'a' and 'e' concurrently. In the case, there is
     no collision of multicast addresses and host C is not confused.


               A           B          C         D        E
               |           |          |         |        |
               |           |          |         |        |
               |(a)        |(a)       |(a,e)    |(e)     |(e)
         ------+-----------+----------+---------+--------+---
                           Network Address 169.254.x.x

              Figure 2: Intra-domain Network






Hong, Park, In, Kim       Expires January 2002                  [Page 4]


INTERNET-DRAFTMulticast Address Allocation using IPv4 Link-local AddressJuly 2001


3.2 Inter-domain Network


     The IPv4 local scope multicast address can only be used in a local
     area and cannot be forwarded to external networks by the routing
     policy at the boarder router. If two isolated domains meet together
     and form an inter-domain network, the packet should not be
     delivered to neighbor domain. So, even though two multicast
     addresses generated at each domain are the same, that causes no
     problem because of the limited delivery. The inter-domain issue is
     out of scope.



3.3 Consideration for Joining to a Global Network


     The multicast address, which is allocated by the proposed scheme,
     would be recommended to use in the isolated network. But it is
     possible for the isolated network to join to a global network with
     connection to a public network. At that time the proposed scheme
     don't have any problems because the multicast address, which has a
     local scope, is not allowed to be forwarded to the external network
     through the border router.



4. Limitations


     In this paper, we only deal with link-local range. Thus, global
     range is out of scope of this document. To provide multicast
     services through the Internet, MAAs and MADCAP servers can be used.




References


[1]  D. Meyer. "Administratively Scoped IP Multicast",  [RFC 2365], Jul.
     1998.


[2]  Stuart Cheshire, Apple Computer, Bernard Aboba and Mircrosoft,
     "draft-ietf-zeroconf-IPv4-linklocal-03.txt", Mar. 2001



Authors Addresses

  Yung-geun Hong




Hong, Park, In, Kim       Expires January 2002                  [Page 5]


INTERNET-DRAFTMulticast Address Allocation using IPv4 Link-local AddressJuly 2001


  ETRI PEC
  161 Kajong-Dong, Yusong-Gu, Taejon 305-600, Korea
  Tel : +82 42 860 6557
  Fax : +82 42 861 5404
  E-mail : yghong@etri.re.kr

  Jung-soo Park
  ETRI PEC
  161 Kajong-Dong, Yusong-Gu, Taejon 305-600, Korea
  Tel : +82 42 860 6514
  Fax : +82 42 861 5404
  E-mail : pjs@etri.re.kr

  Min-kyo In
  ETRI PEC
  161 Kajong-Dong, Yusong-Gu, Taejon 305-600, Korea
  Tel : +82 42 860 6489
  Fax : +82 42 861 5404
  E-mail : mkin@etri.re.kr

  Yong-Jin Kim
  ETRI PEC
  161 Kajong-Dong, Yusong-Gu, Taejon 305-600, Korea
  Tel : +82 42 860 6564
  Fax : +82 42 861 5404
  E-mail : kimyj@etri.re.kr






























Hong, Park, In, Kim       Expires January 2002                  [Page 6]
