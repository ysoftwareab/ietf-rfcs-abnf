

IETF Mobile IPv6 Working Group                              Hee Jin Jang
Internet-Draft                                               Alper Yegin
Expires: November 25, 2004                                JinHyeock Choi
                                                             SAMSUNG AIT
                                                            May 31, 2004



             DHCP Option for Home Agent Discovery in MIPv6
                      draft-jang-dhc-haopt-00.txt


Status of this Memo


   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.


   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.


   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."


   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.


   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


   This Internet-Draft will expire on November 25, 2004.


Copyright Notice


   Copyright (C) The Internet Society (2004). All Rights Reserved.


Abstract


   This draft defines a DHCP-based scheme to enable dynamic discovery of
   Mobile IPv6 home agent address and home subnet. A new DHCP option is
   defined to carry the information from a DHCP server to the DHCP
   client running on the mobile node.











Jang, et al.           Expires November 25, 2004                [Page 1]
Internet-Draft    DHCP Option for HA Discovery in MIPv6         May 2004



Table of Contents


   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   3.  DHCP options for HA Dynamic Discovery  . . . . . . . . . . . .  5
   3.1 Home Agent Discovery Option  . . . . . . . . . . . . . . . . .  5
   3.2 Mobile Node Identifier Sub-option  . . . . . . . . . . . . . .  5
   3.3 Home Network Information Sub-option  . . . . . . . . . . . . .  6
   4.  Option Usage . . . . . . . . . . . . . . . . . . . . . . . . .  9
   4.1 DHCP Server - Home Agent Relation  . . . . . . . . . . . . . .  9
   4.2 Mobile Node Considerations . . . . . . . . . . . . . . . . . .  9
   4.3 DHCP Server Considerations . . . . . . . . . . . . . . . . . .  9
   5.  Security Considerations  . . . . . . . . . . . . . . . . . . . 10
   6.  IANA Consideration . . . . . . . . . . . . . . . . . . . . . . 11
       Normative References . . . . . . . . . . . . . . . . . . . . . 12
       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 12
       Intellectual Property and Copyright Statements . . . . . . . . 14



































Jang, et al.           Expires November 25, 2004                [Page 2]
Internet-Draft    DHCP Option for HA Discovery in MIPv6         May 2004



1. Introduction


   Before a mobile node can engage in Mobile IPv6 signaling with a home
   agent, it should either know the IP address of the home agent via
   preconfiguration, or dynamically discover it. Mobile IPv6
   specification[2] describes how home agents can be dynamically
   discovered by mobile nodes that know the home subnet prefix. This
   scheme does not work when prefix information is not already available
   to the mobile node. This problem can be solved by delivering one or
   more home subnet prefix information to the mobile node by means of
   DHCP. Subsequently, the mobile node can engage dynamic home agent
   discovery using the prefix information. In addition to delivering the
   prefix information, DHCP can also be used to directly provide the IP
   addresses of the home agents that are available to the mobile node.


   The solution involves defining a new DHCP option to carry home agent
   IP address and home subnet prefix information. A similar solution has
   already been defined for Mobile IPv4 home agents[6].


   As part of configuring the initial TCP/IP parameters, a mobile node
   can obtain home agent information for the subnet it is directly
   attached to, other subnets in the visited domain, or a subnet from
   its home domain. Mobile node can provide its identity in order to
   make the selection. For example the mobile node can provide its FQDN
   or its user's NAI and expect that a home agent information from its
   home domain is returned. The availability of the requested
   information depends on the DHCP server having prior knowledge or
   dynamically discovering it. While the specific details are outside
   the scope of this document, use of static tables and AAA-assisted
   discovery are possible options.


   The mobile node may or may not be connected to the "home" subnet when
   it attempts to learn Mobile IPv6 home network information. This
   allows operators to centrally deploy home agents while being able to
   bootstrap mobile nodes that are already roaming. This scenario occurs
   when HMIP[7]is used, where the mobile node is required to discover
   the MAP (a special home agent) that is located multiple hops away
   from the mobile node's attachment point.














Jang, et al.           Expires November 25, 2004                [Page 3]
Internet-Draft    DHCP Option for HA Discovery in MIPv6         May 2004



2. Terminology


   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119[1].


   Most of terms used in this draft are defined in Mobile IPv6[2] and
   RFC3315[5].












































Jang, et al.           Expires November 25, 2004                [Page 4]
Internet-Draft    DHCP Option for HA Discovery in MIPv6         May 2004



3. DHCP options for HA Dynamic Discovery


   This section introduces DHCP options used for dynamic home agent
   discovery in Mobile IPv6.


3.1 Home Agent Discovery Option


   This is a new DHCP option for the dynamic home agent discovery. It
   acts as a container for the following sub-options: Mobile Node
   Identifier (MNId) and Home Network Information (HNInf) sub-options.
   The mobile node MUST include MNId sub-option along with its Option
   Request option in its request. If the DHCP server identifies any
   matching home agent address or home subnet prefix, it MUST deliver
   them via HNInf sub-option(s).


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |        OPTION_HADISCOVER      |           option-len          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +                                                               +
   .                        Sub-options                            .
   .                                                               .
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+




          option-code


             OPTION_HADISCOVER (TBD).


          option-len


             Total length of the sub-options.




3.2 Mobile Node Identifier Sub-option


   Mobile node uses this sub-option to identify itself to the DHCP
   server. DHCP server uses this identification to determine the
   matching home agent and home subnet information. This identification
   allows mobile node to request information for a home subnet within
   the visited domain, or from a specific domain. It is assumed that the
   DHCP server has some mechanism to know or retrieve the requested
   Mobile IPv6 information. The specifics of these mechanisms are




Jang, et al.           Expires November 25, 2004                [Page 5]
Internet-Draft    DHCP Option for HA Discovery in MIPv6         May 2004



   outside the scope of this draft.


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  subopt-type  |  subopt-len   |    id-type    |               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               +
   .                                                               .
   .                     Mobile Node Identifier                    .
   +                                                               +
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+




          subopt-type


             MNId_SUBOPT (TBD)


          subopt-len


             Length of the Mobile Node Identifier field plus 1.


          id-type


             The type of Mobile Node Identifier. Possible values are:


                        0    Any mobile node from the local domain
                        1    NAI
                        2    FQDN
                        3    Opaque




   o Type 0 indicates that the mobile node wants to discover the home
   agents and home subnets within the local domain where it is currently
   attached to. The length of the identifier field MUST be set to 0.


   o Type 1 and Type 2 indicate that the mobile node wants to learn the
   home agents and home subnets that match its NAI [3] [4] or FQDN,
   respectively. The Mobile Node Identifier field MUST be set to the NAI
   or FQDN of the mobile node.


   o Type 3 means the mobile node identifier does not have any specific
   format. Use of this type is application-specific.


3.3 Home Network Information Sub-option





Jang, et al.           Expires November 25, 2004                [Page 6]
Internet-Draft    DHCP Option for HA Discovery in MIPv6         May 2004



   This is a sub-option is used to carry one or more home subnet
   prefix(es) and home agent address(es) to a mobile node. The option
   can carry a mix of home addresses and home subnet prefixes at the
   same time.


   The server MUST provide all of the matching home agent address(es)
   and home subnet prefix(es) in a HNinf Sub-option. If the server has
   no information to provide, it MUST reply with the Home Agent
   Discovery option and set its option-len field to zero.


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   subopt-type |  subopt-len   |A|  reserved   | prefix length |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +                                                               +
   |                                                               |
   +                 home agent address or prefix                  +
   |                                                               |
   +                                                               +
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+





          subopt-type


             HNInf_SUBOPT (TBD)


          subopt-len


             18


          home agent address flag (A)


             1-bit home agent address flag. When set, it indicates
             that the following data field contains the complete IPv6
             address of a home agent.


             When the flag is set to zero, it indicates that the
             following data field contains only a home subnet prefix
             that the mobile node may use for the dynamic home agent
             address discovery mechanism as described in Section
             11.4.1 of Mobile IPv6[1].


          reserved




Jang, et al.           Expires November 25, 2004                [Page 7]
Internet-Draft    DHCP Option for HA Discovery in MIPv6         May 2004



             This field is currently unused and reserved for future use.
             It MUST be initialized to zero by the sender and MUST
             be ignored by the receiver.


          prefix length


             8-bit unsigned integer. The number of leading bits
             of the following 128-bit value that are valid as
             a home subnet prefix. The value ranges from 0 to 128.











































Jang, et al.           Expires November 25, 2004                [Page 8]
Internet-Draft    DHCP Option for HA Discovery in MIPv6         May 2004



4. Option Usage


   The requesting and sending of this option follows the rules for DHCP
   options in [5].


4.1 DHCP Server - Home Agent Relation


   The DHCP server does not have to be co-located with a home agent, or
   even be on the home subnet of the mobile node. Its location with
   respect to home network does not matter as long as it possesses the
   requested information.


4.2 Mobile Node Considerations


   When a Mobile IPv6 Mobile Node finds itself with neither a home
   subnet prefix nor a home agent address, it may request the needed
   information with Option Request Option. For instance, a mobile node
   connecting to a network for the first time may acquire a DHCP address
   and solicit for Home Agent information at the same time.


   A mobile node MUST identify itself with Mobile Node Identifier
   Sub-option to facilitate a DHCP server to provide the matching
   information. For example, a DHCP server may have information about
   home agents from several domains (and subnets). It relies on the
   mobile node identifier for determining which ones it should provide
   in response to the client's request.


   When the mobile node gets more than one home agent address, it MUST
   have a selection mechanism to determine which one to use for
   establishing a Mobile IPv6 session. In case it retrieves only home
   subnet prefix(es), it needs to perform dynamic home agent discovery
   to learn the IP addresses of the home agents.


4.3 DHCP Server Considerations


   It is assumed that the DHCP server has access to home network
   information for its clients for this option to be useful. The DHCP
   server can rely on pre-configuration, or some dynamic discovery
   mechanisms for obtaining this information. In case it does not have
   any information, or it cannot locate matching information based on
   the mobile node identifier, it returns a Home Agent Discovery Option
   with 0-length data.










Jang, et al.           Expires November 25, 2004                [Page 9]
Internet-Draft    DHCP Option for HA Discovery in MIPv6         May 2004



5. Security Considerations


   Secure delivery of home agent and home link information from a DHCP
   server to the mobile node (DHCP client) relies on the overall DHCP
   security. The particular option defined in this draft does not have
   additional impact on the DHCP security. DHCP authentication mechanism
   MUST be used when the operator seeks authentication of the requestor
   and the information source (DHCP server). In that case, the Mobile
   Node Identifier MUST be compatible with the DHCP client identifier.
   For example, if the Mobile Node Identifier type is 0, the DHCP client
   identifier MUST belong to the local domain.


   Aside from the DHCP client to server interaction, an operator must
   also ensure secure delivery of mobile IP information to the DHCP
   server. This is outside the scope of DHCP and the newly defined
   option.




































Jang, et al.           Expires November 25, 2004               [Page 10]
Internet-Draft    DHCP Option for HA Discovery in MIPv6         May 2004



6. IANA Consideration


   This document introduces one new DHCPv6 option, Home Agent Discovery
   option which has two sub-options, Mobile Node Identifier and Home
   Network Information. The type numbers for new DHCP option and
   sub-options are currently TBD. An appropriate request will be made to
   IANA if this Internet draft gets accepted as an RFC.













































Jang, et al.           Expires November 25, 2004               [Page 11]
Internet-Draft    DHCP Option for HA Discovery in MIPv6         May 2004



Normative References


   [1]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", BCP 14, RFC 2119, March 1997.


   [2]  Johnson, D., Perkins, C. and J. Arkko, "Mobility Support in
        IPv6", draft-ietf-mobileip-ipv6-24 (work in progress), July
        2003.


   [3]  Aboba, B. and M. Beadles, "The Network Access Identifier", RFC
        2486, January 1999.


   [4]  Calhoun, P. and C. Perkins, "Mobile IP Network Access Identifier
        Extension for IPv4", RFC 2794, March 2000.


   [5]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C. and M.
        Carney, "Dynamic Host Configuration Protocol for IPv6 (DHCPv6)",
        RFC 3315, July 2003.


   [6]  Droms, R., "Dynamic Host Configuration Protocol", RFC 2131,
        March 1997.


   [7]  Soliman, H., Castelluccia, C., Malki, K. and L. Bellier,
        "Hierarchical Mobile IPv6 mobility management (HMIPv6)",
        draft-ietf-mipshop-hmipv6-01 (work in progress), February 2004.


   [8]  Levkowetz, H., "DHCP Option for Mobile IP Mobility Agents",
        draft-ietf-dhc-mipadvert-opt-02 (work in progress), February
        2004.



Authors' Addresses


   Hee Jin Jang
   i-Networking Lab Samsung AIT
   P.O. Box 111 Suwon
   440-600 Korea


   EMail: heejin.jang@samsung.com



   Alper E. Yegin
   i-Networking Lab Samsung AIT
   75 West Plumeria Drive
   San Jose, CA 95134 USA


   EMail: alper.yegin@samsung.com





Jang, et al.           Expires November 25, 2004               [Page 12]
Internet-Draft    DHCP Option for HA Discovery in MIPv6         May 2004



   JinHyeok Choi
   i-Networking Lab Samsung AIT
   P.O. Box 111 Suwon
   440-600 Korea


   EMail: athene@sait.samsung.co.kr














































Jang, et al.           Expires November 25, 2004               [Page 13]
Internet-Draft    DHCP Option for HA Discovery in MIPv6         May 2004



Intellectual Property Statement


   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.


   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.



Full Copyright Statement


   Copyright (C) The Internet Society (2004). All Rights Reserved.


   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.


   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.


   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION




Jang, et al.           Expires November 25, 2004               [Page 14]
Internet-Draft    DHCP Option for HA Discovery in MIPv6         May 2004



   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgement


   Thank Youn-Hee Han, Jung-Hoon Cheon and Xiaoyu Liu who discussed 
   together and gave the helpful advice on this draft.









































Jang, et al.           Expires November 25, 2004               [Page 15]

