



dnsop                                                         D. Crocker
Internet-Draft                               Brandenburg InternetWorking
Updates: 2782, 3263, 3404, 3529, 3620,                       May 3, 2018
         3832, 3887, 3958, 4120, 4227,
         4386, 4387, 4976, 5026, 5328,
         5389, 5415, 5555, 5679, 5766,
         5780, 5804, 6011, 6120, 6186,
         6733 (if approved)
Intended status: Best Current Practice
Expires: November 4, 2018


DNS Attrleaf Changes: Fixing Specifications with _Underscored Node Name
                                  Use
                    draft-ietf-dnsop-attrleaf-fix-00

Abstract

   Original uses of an _underscore character as a domain node name
   prefix, which creates a space for constrained interpretation of
   resource records, were specified without the benefit of an IANA
   registry.  This produced an entirely uncoordinated set of name-
   creation activities, all drawing from the same namespace.  A registry
   now has been defined.  However the existing specifications that use
   _underscore naming need to be modified, to be in line with the new
   registry.  This document specifies those changes.  The changes
   preserve existing software and operational practice, while adapting
   the specifications for those practices to the newer _underscore
   registry model.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on November 4, 2018.





Crocker                 Expires November 4, 2018                [Page 1]

Internet-Draft              DNS AttrLeaf Fix                    May 2018


Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  RRset Use in Specifications . . . . . . . . . . . . . . . . .   3
     2.1.  TXT RRset Use . . . . . . . . . . . . . . . . . . . . . .   3
     2.2.  SRV RRset Use . . . . . . . . . . . . . . . . . . . . . .   4
     2.3.  URI RRset Use . . . . . . . . . . . . . . . . . . . . . .   5
   3.  Underscored Template Specifications . . . . . . . . . . . . .   6
     3.1.  SRV Specification Changes . . . . . . . . . . . . . . . .   6
     3.2.  URI Specification Changes . . . . . . . . . . . . . . . .   7
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   9
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   9
   6.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   9
     6.1.  Normative References  . . . . . . . . . . . . . . . . . .   9
     6.2.  References -- Informative . . . . . . . . . . . . . . . .  10
   Appendix A.  Acknowledgements . . . . . . . . . . . . . . . . . .  12
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .  13

1.  Introduction

   Original uses of an _underscore character as a domain node name
   [RFC1035] prefix, which creates a space for constrained
   interpretation of resource records, were specified without the
   benefit of an [IANA-reg] registry.  This produced an entirely
   uncoordinated set of name-creation activities, all drawing from the
   same namespace.  A registry has been now defined, and that document
   discusses the background for _underscore domain name use [Attrleaf].

   The basic model for underscored name registration, as specified in
   [Attrleaf], is to have each registry entry be unique in terms of the
   combination of a resource record type and a 'global' (ie, right-most)
   underscore name.




Crocker                 Expires November 4, 2018                [Page 2]

Internet-Draft              DNS AttrLeaf Fix                    May 2018


   The existing uses of _underscore naming have specifications that do
   not reflect the existence of this integrated registry.  For the new
   reader or the new editor of one of those documents, there is
   currently nothing signaling that the underscore name(s) defined in
   the document are now processed through an IANA registry.  This
   document remedies that, by marking such a published document with an
   update, indicating the nature of the change.

   The documents that define the SRV [RFC2782] and URI [RFC7553] DNS
   resource records provide a meta-template for underscore assignments,
   partially based on separate registries [RFC6335].  For the portion
   that selects the global (right-most) underscore name, this
   perpetuates uncoordinated assignment activities by separate technical
   specifications, out of the same name space.  This document remedies
   that by providing detail for revisions to the SRV and URI
   specifications, to bring their use in line with the single,
   integrated global underscore registry.

   The result of these changes preserves existing software and
   operations practices, while adapting the technical specifications to
   the newer _underscore registry model.

2.  RRset Use in Specifications

2.1.  TXT RRset Use

   This section provides a generic approach for changes to existing
   specifications that define straightforward use of _underscored node
   names, when scoping the use of a "TXT" RR.  The approach provides the
   information needed for adapting such specifications to the use of the
   IANA DNS Underscore Global Scoped Entry Registry [Attrleaf].  Hence
   the approach is meant both as an update to these existing
   specifications, and as guidance for changes when those documents are
   revised.

   For any document that specifies the use of a "TXT" RRset under an
   underscored name, that name is expected to be registered in the IANA
   DNS Underscore Global Scoped Entry Registry [Attrleaf].  An effort
   has been made to locate existing drafts that do this, register the
   global underscored name, and list them in this document.

   If a specification that defines use of a "TXT" record within an
   underscore-scoped name is revised, it SHOULD add an entry to the
   global underscored name registry, if one does not already exist.

   Here is a template of suggested text for this to appear in the IANA
   Considerations section of the specification:




Crocker                 Expires November 4, 2018                [Page 3]

Internet-Draft              DNS AttrLeaf Fix                    May 2018


      "Per" [Attrleaf] "please add the following entry to the DNS
      Underscore Global Scoped Entry Registry:"

   +--------+----------------+-----------------------------------------+
   | RR     | _NODE NAME     | REFERENCE                               |
   | Type   |                |                                         |
   +--------+----------------+-----------------------------------------+
   | TXT    | _{DNS node     | {citation for the document making the   |
   |        | name}          | addition.}                              |
   +--------+----------------+-----------------------------------------+

                 Table 1: Underscore Global Registry Entry

2.2.  SRV RRset Use

   Specification for the SRV [RFC2782] resource record provides a
   template for use of underscored node names.  The global (right-most)
   name, is characterised as naming the 'protocol' that is associated
   with "SRV" RR usage.

   This section provides a generic approach for changes to existing
   specifications that define the use of an "SRV" RR.  The approach
   provides the information needed for adapting such specifications to
   the use of the IANA DNS Underscore Global Scoped Entry Registry
   [Attrleaf].  Hence the approach is meant both as an update to these
   existing specifications, and as guidance for changes when those
   documents are revised.

   For any document that specifies the use of a "SRV" RRset, the global
   ('protocol', right-most) underscored name is expected to be
   registered in the IANA DNS Underscore Global Scoped Entry Registry
   [Attrleaf].  An effort has been made to locate existing drafts that
   do this, register the global underscored name, and list them in this
   document.

   If a specification that defines use of an "SRV" record is revised,
   and the right-most underscored name above the record is not already
   registered, an entry for the name SHOULD be added to the global
   underscored name registry.

   Here is a template of suggested text for this to appear in the IANA
   Considerations section of the specification:

      "Per" [Attrleaf] "please add the following entry to the DNS
      Underscore Global Scoped Entry Registry:"






Crocker                 Expires November 4, 2018                [Page 4]

Internet-Draft              DNS AttrLeaf Fix                    May 2018


   +--------+----------------------+-----------------------------------+
   | RR     | _NODE NAME           | REFERENCE                         |
   | Type   |                      |                                   |
   +--------+----------------------+-----------------------------------+
   | SRV    | _{DNS 'protocol'     | {citation for the document making |
   |        | node name}           | the addition.}                    |
   +--------+----------------------+-----------------------------------+

                 Table 2: Underscore Global Registry Entry

2.3.  URI RRset Use

   Specification for the URI [RFC7553] resource record provides a
   template for use of underscored node names.  The global (right-most)
   name, is characterised as naming the 'protocol' that is associated
   with "URI" RR usage or by reversing an Enumservice sequence.

   This section provides a generic approach for changes to existing
   specifications that define use of a "URI" RRset.  The approach
   provides the information needed for adapting such specifications to
   the use of the IANA DNS Underscore Global Scoped Entry Registry
   [Attrleaf].  Hence the approach is meant both as an update to these
   existing specifications, and as guidance for changes when those
   documents are revised.

   For any RFC that specifies the use of a "URI" RR, the global
   ('protocol' or right-most enumservice) underscored name is expected
   to be registered in the IANA DNS Underscore Global Scoped Entry
   Registry [Attrleaf].  An effort has been made to locate existing
   drafts that do this and register the associated 'protocol' name.

   If a specification that defines use of a "URI" record is revised,
   when the right-most underscored name used by it is not already
   registered, an entry for the name SHOULD be added to the global
   underscored name registry.

   Here is a template of suggested text for this to appear in the IANA
   Considerations section of the specification:

      "Per" [Attrleaf] "please add the following entry to the DNS
      Underscore Global Scoped Entry Registry:"










Crocker                 Expires November 4, 2018                [Page 5]

Internet-Draft              DNS AttrLeaf Fix                    May 2018


   +-------+---------------------------+-------------------------------+
   | RR    | _NODE NAME                | REFERENCE                     |
   | Type  |                           |                               |
   +-------+---------------------------+-------------------------------+
   | URI   | _{DNS 'protocol' or       | {citation for the document    |
   |       | Enumservice node name}    | making the addition.}         |
   +-------+---------------------------+-------------------------------+

                 Table 3: Underscore Global Registry Entry

3.  Underscored Template Specifications

3.1.  SRV Specification Changes

   The specification for a domain name under which an SRV [RFC2782]
   resource record appears provides a template for use of underscored
   node names.  The global (right-most) underscored name, is
   characterised as indicating the 'protocol' that is associated with
   "SRV" RR usage.

   The text of that specification is hereby updated from:

   The format of the SRV RR

    Here is the format of the SRV RR, whose DNS type code is 33:
          _Service._Proto.Name TTL Class SRV Priority Weight Port Target
    ...
    Proto
         The symbolic name of the desired protocol, with an underscore
         (_) prepended to prevent collisions with DNS labels that occur
         in nature.  _TCP and _UDP are at present the most useful values
         for this field, though any name defined by Assigned Numbers or
         locally may be used (as for Service).  The Proto is case
         insensitive.

   The updated text is:

      The format of the SRV RR

      Here is the format of the SRV RR, whose DNS type code is 33:



         "_Service._Proto.Name TTL Class SRV Priority Weight Port
         Target" _..._

      Proto




Crocker                 Expires November 4, 2018                [Page 6]

Internet-Draft              DNS AttrLeaf Fix                    May 2018


         The symbolic name of the desired protocol, with an underscore
         (_) prepended to prevent collisions with DNS labels that occur
         in nature. _tcp and _udp are at present the most useful values
         for this field.  The Proto is case insensitive.

         The SRV RRset protocol (global, right-most) underscored name
         SHOULD be registered in the IANA DNS Underscore Global Scoped
         Entry Registry [Attrleaf].

3.2.  URI Specification Changes

   Specification for the domain name under which a URI [RFC7553]
   resource record occurs is similar to that for the SRV [RFC2782]
   resource record, although the text refers only to 'service' name,
   rather than distinguishing 'service' from 'protocol'.  Further, the
   URI RR specification permits alternative underscored naming schemes:

      One matches what is used for "SRV", with the global (right-most)
      underscored name calls "protocol'.

      The other is based on a reversing of an Enumservice [RFC6117]
      sequence.

   The text to be updated is:



























Crocker                 Expires November 4, 2018                [Page 7]

Internet-Draft              DNS AttrLeaf Fix                    May 2018


   4.1.  Owner Name, Class, and Type

   The URI owner name is subject to special conventions.

   Just like the SRV RR [RFC2782], the URI RR has service information
   encoded in its owner name.  In order to encode the service for a
   specific owner name, one uses service parameters.  Valid service
   parameters are those registered by IANA in the "Service Name and
   Transport Protocol Port Number Registry" [RFC6335] or as "Enumservice
   ---
   Registrations [RFC6117].  The Enumservice Registration parameters are
   reversed (i.e., subtype(s) before type), prepended with an underscore
   (_), and prepended to the owner name in separate labels.  The
   underscore is prepended to the service parameters to avoid collisions
   with DNS labels that occur in nature, and the order is reversed to
   make it possible to do delegations, if needed, to different zones
   (and therefore providers of DNS).

   For example, suppose we are looking for the URI for a service with
   ENUM Service Parameter "A:B:C" for host example.com.  Then we would
   query for (QNAME,QTYPE)=("_C._B._A.example.com","URI").

   As another example, suppose we are looking for the URI for a service
   with Service Name "A" and Transport Protocol "B" for host
   example.com.  Then we would query for
   (QNAME,QTYPE)=("_A._B.example.com","URI").

   The updated text is:

      4.1.  Owner Name, Class, and Type

      The URI owner name is subject to special conventions.

      As for the SRV RRset [RFC2782], the URI RRset global (right-most)
      underscored name SHOULD be registered in the IANA DNS Underscore
      Global Scoped Entry Registry [Attrleaf].

      Just like the SRV RRset, the URI RRset has service information
      encoded in its owner name.  In order to encode the service for a
      specific owner name, one uses service parameters.  Valid service
      parameters are:

      *  Those registered by IANA in the "Service Name and Transport
         Protocol Port Number Registry [RFC6335]" The underscore is
         prepended to the service parameters to avoid collisions with
         DNS labels that occur in nature, and the order is reversed to
         make it possible to do delegations, if needed, to different
         zones (and therefore providers of DNS).



Crocker                 Expires November 4, 2018                [Page 8]

Internet-Draft              DNS AttrLeaf Fix                    May 2018


      *  Those listed in "Enumservice Registrations [RFC6117].  The
         Enumservice Registration parameters are reversed (i.e.,
         subtype(s) before type), prepended with an underscore (_), and
         prepended to the owner name in separate labels.  The right-most
         underscored Enumservice name becomes the global Attrleaf name
         to register.

      For example, suppose we are looking for the URI for a service with
      ENUM Service Parameter "A:B:C" for host example.com.  Then we
      would query for (QNAME,QTYPE)=("_C._B._A.example.com","URI").

      As another example, suppose we are looking for the URI for a
      service with Service Name "A" and Transport Protocol "B" for host
      example.com.  Then we would query for
      (QNAME,QTYPE)=("_A._B.example.com","URI").

4.  IANA Considerations

   Although this document makes reference to IANA registries, it
   introduces no new IANA registries or procedures.

5.  Security Considerations

   This memo raises no security issues.

6.  References

6.1.  Normative References

   [Attrleaf]
              Crocker, D., "DNS Scoped Data Through '_Underscore' Naming
              of Attribute Leaves", 2018.

   [RFC6117]  Hoeneisen, B., Mayrhofer, A., and J. Livingood, "IANA
              Registration of Enumservices: Guide, Template, and IANA
              Considerations", RFC 6117, March 2011.

   [RFC6335]  Cotton, M., Eggert, L., Tpuch, J., Westerlund, M., and S.
              Cheshire, "Internet Assigned Numbers Authority (IANA)
              Procedures for the Management of the Service Name and
              Transport Protocol Port Number Registry", RFC 6335, Aug
              2011.

   [RFC7553]  Falstrom, P. and O. Kolkman, "The Uniform Resource
              Identifier (URI) DNS Resource Record", RFC 7553,
              ISSN 2070-1721, June 2015.





Crocker                 Expires November 4, 2018                [Page 9]

Internet-Draft              DNS AttrLeaf Fix                    May 2018


6.2.  References -- Informative

   [IANA-reg]
              "Protocol Registries", URL https://www.iana.org/protocols,
              2018.

   [RFC1035]  Mockapetris, P., "Domain names - implementation and
              specification", STD 13, RFC 1035, November 1987.

   [RFC2782]  Gulbrandsen, A., Vixie, P., and L. Esibov, "A DNS RR for
              specifying the location of services (DNS SRV)", RFC 2782,
              February 2000.

   [RFC3263]  Rosenberg, J. and H. Schulzrinne, "Session Initiation
              Protocol (SIP): Locating SIP Servers", RFC 3263, June
              2002.

   [RFC3404]  Mealling, M., "Dynamic Delegation Discovery System (DDDS)
              Part Four: The Uniform Resource Identifiers (URI)
              Resolution Application", RFC 3404, October 2002.

   [RFC3529]  Harold, W., "Using Extensible Markup Language-Remote
              Procedure Calling (XML-RPC) in Blocks Extensible Exchange
              Protocol (BEEP)", RFC 3529, April 2003.

   [RFC3620]  New, D., "The TUNNEL Profile", RFC 3620, October 2003.

   [RFC3832]  Columbia University, Columbia University, Sun
              Microsystems, IBM, and IBM, "Remote Service Discovery in
              the Service Location Protocol (SLP) via DNS SRV",
              RFC 3832, July 2004.

   [RFC3861]  Peterson, J., "Address Resolution for Instant Messaging
              and Presence", RFC 3861, August 2004.

   [RFC3887]  "Message Tracking Query Protocol", RFC 3887, September
              2007.

   [RFC3958]  Daigle, L. and A. Newton, "Domain-Based Application
              Service Location Using SRV RRs and the Dynamic Delegation
              Discovery Service (DDDS)", RFC 3958, January 2005.

   [RFC4120]  USC-ISI, MIT, MIT, and MIT, "The Kerberos Network
              Authentication Service (V5)", RFC 4120, July 2005.

   [RFC4227]  O'Tuathail, E. and M. Rose, "Using the Simple Object
              Access Protocol (SOAP) in Blocks Extensible Exchange
              Protocol (BEEP)", RFC 4227, January 2006.



Crocker                 Expires November 4, 2018               [Page 10]

Internet-Draft              DNS AttrLeaf Fix                    May 2018


   [RFC4386]  Boeyen, S. and P. Hallam-Baker, "Internet X.509 Public Key
              Infrastructure: Repository Locator Service", RFC 4386,
              February 2006.

   [RFC4387]  Gutmann, P., Ed., "Internet X.509 Public Key
              Infrastructure Operational Protocols: Certificate Store
              Access via HTTP", RFC 4387, February 2006.

   [RFC4976]  Jennings, C., Mahy, R., and Roach, "Relay Extensions for
              the Message Session Relay Protocol (MSRP)", RFC 4976,
              September 2007.

   [RFC5026]  Giaretta, G., Ed., Kempf, J., and V. Devarapalli, Ed.,
              "Mobile IPv6 Bootstrapping in Split Scenario", RFC 5026,
              October 2007.

   [RFC5328]  Adolf, A. and P. MacAvock, "A Uniform Resource Name (URN)
              Namespace for the Digital Video Broadcasting Project
              (DVB)", RFC 5328, September 2008.

   [RFC5389]  Rosenberg, Mahy, Matthews, and Wing, "Session Traversal
              Utilities for NAT (STUN)", RFC 5389, October 2008.

   [RFC5415]  Calhoun, P., Ed., Montemurro, M., Ed., and D. Stanley,
              Ed., "Control And Provisioning of Wireless Access Points
              (CAPWAP) Protocol Specification", RFC 5415, March 2009.

   [RFC5507]  Faltstrom, P., Ed. and R. Austein, Ed., "Design Choices
              When Expanding the DNS", RFC 5507, April 2009.

   [RFC5509]  Loreto, S., "Internet Assigned Numbers Authority (IANA)
              Registration of Instant Messaging and Presence DNS SRV RRs
              for the Session Initiation Protocol (SIP)", RFC 5509,
              April 2009.

   [RFC5518]  Hoffman, P., Levine, J., and A. Hathcock, "Vouch By
              Reference", RFC 5518, April 2009.

   [RFC5555]  Soliman, H., Ed., "Mobile IPv6 Support for Dual Stack
              Hosts and Routers", RFC 5555, June 2009.

   [RFC5617]  Sendmail, Inc., Cisco Systems, Inc., Yahoo! Inc., and
              Taughannock Networks, "DomainKeys Identified Mail (DKIM)
              Author Domain Signing Practices (ADSP)", RFC 5617, August
              2009.

   [RFC5679]  Bajko, G., "Locating IEEE 802.21 Mobility Services Using
              DNS", RFC 5679, December 2009.



Crocker                 Expires November 4, 2018               [Page 11]

Internet-Draft              DNS AttrLeaf Fix                    May 2018


   [RFC5766]  Mahy, R., Matthews, P., and J. Rosenberg, "Traversal Using
              Relays around NAT (TURN): Relay Extensions to Session
              Traversal Utilities for NAT (STUN)", RFC 5766, April 2010.

   [RFC5780]  MacDonald, D. and B. Lowekamp, "NAT Behavior Discovery
              Using Session Traversal Utilities for NAT (STUN)",
              RFC 5780, May 2010.

   [RFC5804]  Melnikov, A., Ed. and T. Martin, "A Protocol for Remotely
              Managing Sieve Scripts", RFC 5804, July 2010.

   [RFC5864]  Allbery, R., "NS SRV Resource Records for AFS", RFC 5864,
              April 2010.

   [RFC5928]  Petit-Huguenin, M., "Traversal Using Relays around NAT
              (TURN) Resolution Mechanism", RFC 5928, August 2010.

   [RFC6011]  Lawrence, S., Ed. and J. Elwell, "Session Initiation
              Protocol (SIP) User Agent Configuration", RFC 6011,
              October 2010.

   [RFC6120]  Saint-Andre, P., "Extensible Messaging and Presence
              Protocol (XMPP): Core", RFC 6120, March 2011.

   [RFC6186]  Daboo, C., "Use of SRV Records for Locating Email
              Submission/Access Services", RFC 6186, March 2011.

   [RFC6376]  Crocker, D., Hansen, T., and M. Kucherawy, "DomainKeys
              Identified Mail (DKIM) Signatures", RFC 6376, Sept 2011.

   [RFC6733]  Fajardo, V., Arkko, J., Loughney, J., and G. Zorn,
              "Diameter Base Protocol", RFC 6733, October 2012.

   [RFC7208]  Kitterman, S., "Sender Policy Framework (SPF) for
              Authorizing Use of Domains in E-Mail, Version 1",
              RFC 7208, April 2014.

   [RFC7489]  Kucherawy, M., Ed. and E. Zwicky, Ed., "Domain-based
              Message Authentication, Reporting, and Conformance
              (DMARC)", RFC 7489, March 2015.

Appendix A.  Acknowledgements

   Thanks go to Bill Fenner, Tony Hansen, Peter Koch, Olaf Kolkman, and
   Andrew Sullivan for diligent review of the (much) earlier drafts.
   For the later enhancements, thanks to: Tim Wicinski, John Levine, Bob
   Harold, Joel Jaeggli, Ond&#345;ej Sury and Paul Wouters.




Crocker                 Expires November 4, 2018               [Page 12]

Internet-Draft              DNS AttrLeaf Fix                    May 2018


   Special thanks to Ray Bellis for more than 10 years of persistent
   encouragement to continue this effort, as well as the suggestion for
   an essential simplification to the registration model.

Author's Address

   Dave Crocker
   Brandenburg InternetWorking
   675 Spruce Dr.
   Sunnyvale, CA  94086
   USA

   Phone: +1.408.246.8253
   Email: dcrocker@bbiw.net
   URI:   http://bbiw.net/




































Crocker                 Expires November 4, 2018               [Page 13]
