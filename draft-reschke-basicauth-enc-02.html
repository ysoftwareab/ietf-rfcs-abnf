<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>An Encoding Parameter for HTTP Basic Authentication</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Notational Conventions">
<link href="#rfc.section.3" rel="Chapter" title="3 The 'encoding' auth-param">
<link href="#rfc.section.4" rel="Chapter" title="4 Examples">
<link href="#rfc.section.5" rel="Chapter" title="5 Security Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="8 References">
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="8.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Deployment Considerations">
<link href="#rfc.appendix.Appendix%20A.1" rel="Chapter" title="Appendix A.1 User Agents">
<link href="#rfc.appendix.Appendix%20A.1.1" rel="Chapter" title="Appendix A.1.1 Alternative approach">
<link href="#rfc.appendix.Appendix%20A.2" rel="Chapter" title="Appendix A.2 Origin Servers">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B FAQ (to be removed by RFC Editor before publication)">
<link href="#rfc.appendix.Appendix%20B.1" rel="Chapter" title="Appendix B.1 Why not simply switch the default encoding to UTF-8?">
<link href="#rfc.appendix.Appendix%20B.2" rel="Chapter" title="Appendix B.2 What about Digest?">
<link href="#rfc.appendix.Appendix%20B.3" rel="Chapter" title="Appendix B.3 Will existing UAs ignore the parameter?">
<link href="#rfc.appendix.Appendix%20C" rel="Chapter" title="Appendix C Change Log (to be removed by RFC Editor before publication)">
<link href="#rfc.appendix.Appendix%20C.1" rel="Chapter" title="Appendix C.1 Since draft-reschke-basicauth-enc-00">
<link href="#rfc.appendix.Appendix%20C.2" rel="Chapter" title="Appendix C.2 Since draft-reschke-basicauth-enc-01">
<link href="#rfc.appendix.Appendix%20D" rel="Chapter" title="Appendix D Open issues (to be removed by RFC Editor prior to publication)">
<link href="#rfc.appendix.Appendix%20D.1" rel="Chapter" title="Appendix D.1 edit">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The "Basic" authentication scheme defined in RFC 2617 does not properly define how to treat non-ASCII characters. This has lead to a situation where user agent implementations disagree, and servers make different assumptions based on the locales they are running in. There is little interoperability for characters in the ISO-8859-1 character set, and even less interoperability for any characters beyond that.  " />
  <meta name="description" content="The "Basic" authentication scheme defined in RFC 2617 does not properly define how to treat non-ASCII characters. This has lead to a situation where user agent implementations disagree, and servers make different assumptions based on the locales they are running in. There is little interoperability for characters in the ISO-8859-1 character set, and even less interoperability for any characters beyond that.  " />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">J. F. Reschke</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">greenbytes</td>
</tr>
<tr>
<td class="left">Updates: 2617 (if approved)</td>
<td class="right">July 07, 2011</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right"></td>
</tr>
<tr>
<td class="left">Expires: January 08, 2012</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">An Encoding Parameter for HTTP Basic Authentication<br />
  <span class="filename">draft-reschke-basicauth-enc-02</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The "Basic" authentication scheme defined in RFC 2617 does not properly define how to treat non-ASCII characters. This has lead to a situation where user agent implementations disagree, and servers make different assumptions based on the locales they are running in. There is little interoperability for characters in the ISO-8859-1 character set, and even less interoperability for any characters beyond that.  </p>
<p>This document defines a backwards-compatible extension to "Basic", specifying the server's character encoding expectation, using a new authentication scheme parameter.  </p>
<h1><a>Editorial Note (To be removed by RFC Editor before publication)</a></h1>
<p>Distribution of this document is unlimited. Although this is not a work item of the HTTPbis Working Group, comments should be sent to the Hypertext Transfer Protocol (HTTP) mailing list at <a href="mailto:ietf-http-wg@w3.org">ietf-http-wg@w3.org</a>, which may be joined by sending a message with subject "subscribe" to <a href="mailto:ietf-http-wg-request@w3.org?subject=subscribe">ietf-http-wg-request@w3.org</a>.  </p>
<p>Discussions of the HTTPbis Working Group are archived at <a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">http://lists.w3.org/Archives/Public/ietf-http-wg/</a>.  </p>
<p>XML versions, latest edits and the issues list for this document are available from <a href="http://greenbytes.de/tech/webdav/#draft-reschke-basicauth-enc">http://greenbytes.de/tech/webdav/#draft-reschke-basicauth-enc</a>.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on January 08, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Notational Conventions</a>
</li>
<li>3.   <a href="#rfc.section.3">The 'encoding' auth-param</a>
</li>
<li>4.   <a href="#rfc.section.4">Examples</a>
</li>
<li>5.   <a href="#rfc.section.5">Security Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Acknowledgements</a>
</li>
<li>8.   <a href="#rfc.references">References</a>
</li>
<li>8.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>8.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Deployment Considerations</a>
</li>
<li>Appendix A.1.   <a href="#rfc.appendix.Appendix%20A.1">User Agents</a>
</li>
<li>Appendix A.1.1.   <a href="#rfc.appendix.Appendix%20A.1.1">Alternative approach</a>
</li>
<li>Appendix A.2.   <a href="#rfc.appendix.Appendix%20A.2">Origin Servers</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">FAQ (to be removed by RFC Editor before publication)</a>
</li>
<li>Appendix B.1.   <a href="#rfc.appendix.Appendix%20B.1">Why not simply switch the default encoding to UTF-8?</a>
</li>
<li>Appendix B.2.   <a href="#rfc.appendix.Appendix%20B.2">What about Digest?</a>
</li>
<li>Appendix B.3.   <a href="#rfc.appendix.Appendix%20B.3">Will existing UAs ignore the parameter?</a>
</li>
<li>Appendix C.   <a href="#rfc.appendix.Appendix%20C">Change Log (to be removed by RFC Editor before publication)</a>
</li>
<li>Appendix C.1.   <a href="#rfc.appendix.Appendix%20C.1">Since draft-reschke-basicauth-enc-00</a>
</li>
<li>Appendix C.2.   <a href="#rfc.appendix.Appendix%20C.2">Since draft-reschke-basicauth-enc-01</a>
</li>
<li>Appendix D.   <a href="#rfc.appendix.Appendix%20D">Open issues (to be removed by RFC Editor prior to publication)</a>
</li>
<li>Appendix D.1.   <a href="#rfc.appendix.Appendix%20D.1">edit</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">The "Basic" authentication scheme defined in Section 2 of <a href="#RFC2617">[RFC2617]</a> does not properly define how to treat non-ASCII characters (<a href="#USASCII">[USASCII]</a>): it uses the Base64 (<a href="#RFC4648">[RFC4648]</a>, Section 4) encoding of the concatenation of username, separator character, and password without stating which character encoding to use.  </p>
<p id="rfc.section.1.p.2">This has lead to a situation where user agent implementations disagree, and servers make different assumptions based on the locales they are running in. There is little interoperability for characters in the ISO-8859-1 character set (<a href="#ISO-8859-1">[ISO-8859-1]</a>), and even less interoperability for any characters beyond that.  </p>
<p id="rfc.section.1.p.3">This document defines a backwards-compatible extension to "Basic", specifying the server's character encoding expection, using a new auth-param as defined in Section 1.2 of <a href="#RFC2617">[RFC2617]</a>.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Notational Conventions</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#encoding" id="encoding">The 'encoding' auth-param</a>
</h1>
<p id="rfc.section.3.p.1">In challenges, servers MAY use the "encoding" authentication parameter (case-insensitive) to express the character encoding they expect the user agent to use.  </p>
<p id="rfc.section.3.p.2">The only allowed value is "UTF-8", to be matched case-insensitively (see <a href="#RFC2978">[RFC2978]</a>, Section 2.3), indicating that the server expects the UTF-8 character encoding to be used (<a href="#RFC3629">[RFC3629]</a>).  </p>
<p id="rfc.section.3.p.3">Other values are reserved for future use.  </p>
<p id="rfc.section.3.p.4">For credentials sent by the user agent, the "encoding" parameter is reserved for future use and MUST NOT be sent.  </p>
<p id="rfc.section.3.p.5">The reason for this is that the information that could be included does not seem to be useful to the server, but the additional complexity of parsing and processing the additional parameter might make this extension harder to deploy.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#examples" id="examples">Examples</a>
</h1>
<div id="#rfc.figure.1"></div>
<p>In the example below, the server prompts for authentication in the "foo" realm, using Basic authentication, with a preference for the UTF-8 character encoding:</p>
<pre>
WWW-Authenticate: Basic realm="foo", encoding="UTF-8"
</pre>
<p>Note that the parameter value can be either a token or a quoted string; in this case the server chose to use the quoted-string notation.</p>
<p id="rfc.section.4.p.1">The user's name is "test", and his password is the string "123" followed by the Unicode character U+00A3 (POUND SIGN). Following Section 1.2 of <a href="#RFC2617">[RFC2617]</a>, but using the character encoding UTF-8, the user-pass, converted to a sequence of octets, is: </p>
<div id="#rfc.figure.2"></div>
<pre>
 't' 'e' 's' 't' ':' '1' '2' '3' pound
 74  65  73  74  3A  31  32  33  C2  A3  
</pre>
<p id="rfc.section.4.p.2">Encoding this octet sequence in Base64 (<a href="#RFC4648">[RFC4648]</a>, Section 4) yields: </p>
<div id="#rfc.figure.3"></div>
<pre>
  dGVzdDoxMjPCow==
</pre>
<p id="rfc.section.4.p.3">Thus the Authorization header field would be: </p>
<div id="#rfc.figure.4"></div>
<pre>
  Authorization: Basic dGVzdDoxMjPCow==
</pre>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#security.considerations" id="security.considerations">Security Considerations</a>
</h1>
<p id="rfc.section.5.p.1">This document does not introduce any new security considerations beyond those defined for the "Basic" authentication scheme (<a href="#RFC2617">[RFC2617]</a>, Section 4), and those applicable to the handling of UTF-8 (<a href="#RFC3629">[RFC3629]</a>, Section 10).  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#iana.considerations" id="iana.considerations">IANA Considerations</a>
</h1>
<p id="rfc.section.6.p.1">There are no IANA Considerations related to this specification.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Acknowledgements</h1>
<p id="rfc.section.7.p.1">The internationalisation problem has been reported as a Mozilla bug back in the year 2000 (see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=41489">https://bugzilla.mozilla.org/show_bug.cgi?id=41489</a> and also the more recent <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=656213">https://bugzilla.mozilla.org/show_bug.cgi?id=656213</a>).  It was Andrew Clover's idea to address it using a new auth-param.  </p>
<p id="rfc.section.7.p.2">Thanks to Martin Thomson for providing feedback on this document.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2978">[RFC2978]</b></td>
<td class="top">
<a>Freed, N.</a> and <a>J. Postel</a>, "<a href="http://tools.ietf.org/html/rfc2978">IANA Charset Registration Procedures</a>", BCP 19, RFC 2978, October 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3629">[RFC3629]</b></td>
<td class="top">
<a href="mailto:fyergeau@alis.com" title="Alis Technologies">Yergeau, F.</a>, "<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>", STD 63, RFC 3629, November 2003.</td>
</tr>
<tr>
<td class="reference"><b id="ISO-8859-1">[ISO-8859-1]</b></td>
<td class="top">
<a>International Organization for Standardization</a>, "<a>Information technology -- 8-bit single-byte coded graphic character sets -- Part 1: Latin alphabet No. 1</a>", ISO/IEC 8859-1:1998, 1998.</td>
</tr>
<tr>
<td class="reference"><b id="USASCII">[USASCII]</b></td>
<td class="top">
<a>American National Standards Institute</a>, "<a>Coded Character Set -- 7-bit American Standard Code for Information Interchange</a>", ANSI X3.4, 1986.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2617">[RFC2617]</b></td>
<td class="top">
<a href="mailto:john@math.nwu.edu" title="Northwestern University, Department of Mathematics">Franks, J.</a>, <a href="mailto:pbaker@verisign.com" title="Verisign Inc.">Hallam-Baker, P.M.</a>, <a href="mailto:jeff@AbiSource.com" title="AbiSource, Inc.">Hostetler, J.L.</a>, <a href="mailto:lawrence@agranat.com" title="Agranat Systems, Inc.">Lawrence, S.D.</a>, <a href="mailto:paulle@microsoft.com" title="Microsoft Corporation">Leach, P.J.</a>, <a title="Netscape Communications Corporation">Luotonen, A.</a> and <a href="mailto:stewart@OpenMarket.com" title="Open Market, Inc.">L. Stewart</a>, "<a href="http://tools.ietf.org/html/rfc2617">HTTP Authentication: Basic and Digest Access Authentication</a>", RFC 2617, June 1999.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">8.2.</a> Informative References</h1>
<table><tbody><tr>
<td class="reference"><b id="RFC4648">[RFC4648]</b></td>
<td class="top">
<a>Josefsson, S.</a>, "<a href="http://tools.ietf.org/html/rfc4648">The Base16, Base32, and Base64 Data Encodings</a>", RFC 4648, October 2006.</td>
</tr></tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> Deployment Considerations</h1>
<h1 id="rfc.appendix.Appendix A.1">
<a href="#rfc.appendix.Appendix%20A.1">Appendix A.1.</a> User Agents</h1>
<p id="rfc.section.Appendix A.1.p.1">User agents not implementing this specifications should continue to work as before, ignoring the new parameter.  </p>
<p id="rfc.section.Appendix A.1.p.2">User agents which already default to the UTF-8 encoding already implement this specification by definition.  </p>
<p id="rfc.section.Appendix A.1.p.3">Other user agents can keep their default behavior, and switch to UTF-8 when seeing the new parameter.  </p>
<h1 id="rfc.appendix.Appendix A.1.1">
<a href="#rfc.appendix.Appendix%20A.1.1">Appendix A.1.1.</a> Alternative approach</h1>
<p id="rfc.section.Appendix A.1.1.p.1">On the other hand, the strategy below may already improve the user-visible behavior today: </p>

<ul>
<li>In the first authentication request, choose the character encoding based on the user's credentials: if they do not need any characters outside the ISO-8859-1 character set, default to ISO-8859-1, otherwise use UTF-8.  </li>
<li>If the first attempt failed and the encoding used was ISO-8859-1, retry once with UTF-8 encoding instead.  </li>
</ul>

<p> </p>
<p id="rfc.section.Appendix A.1.1.p.2">Note that there's a risk if the site blocks an account after multiple login failures (for instance, when it doesn't reset the counter after a successful login).  </p>
<h1 id="rfc.appendix.Appendix A.2">
<a href="#rfc.appendix.Appendix%20A.2">Appendix A.2.</a> Origin Servers</h1>
<p id="rfc.section.Appendix A.2.p.1">Origin servers that do not support non-ASCII characters in credentials do not require any changes.  </p>
<p id="rfc.section.Appendix A.2.p.2">Origin servers that need to support non-ASCII characters, but can't use the UTF-8 encoding will not be affected; they will continue to function as well as before.  </p>
<p id="rfc.section.Appendix A.2.p.3">Finally, origin servers that need to support non-ASCII characters and can use the UTF-8 encoding can opt in as described above. In the worst case, they'll continue to see either broken credentials or no credentials at all (depending on how legacy clients handle characters they can not encode).  </p>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> <a href="#faq" id="faq">FAQ (to be removed by RFC Editor before publication)</a>
</h1>
<h1 id="rfc.appendix.Appendix B.1">
<a href="#rfc.appendix.Appendix%20B.1">Appendix B.1.</a> Why not simply switch the default encoding to UTF-8?</h1>
<p id="rfc.section.Appendix B.1.p.1">There are sites in use today that default to a locale encoding, such as ISO-8859-1, and expect user agents to use that encoding. These sites will break if the user agent uses a different encoding, such as UTF-8.  </p>
<h1 id="rfc.appendix.Appendix B.2">
<a href="#rfc.appendix.Appendix%20B.2">Appendix B.2.</a> What about Digest?</h1>
<p id="rfc.section.Appendix B.2.p.1">Although the solution proposed in this document may be applicable to "Digest" as well, any attempt to update this scheme may be an uphill battle hard to win.  </p>
<h1 id="rfc.appendix.Appendix B.3">
<a href="#rfc.appendix.Appendix%20B.3">Appendix B.3.</a> Will existing UAs ignore the parameter?</h1>
<p id="rfc.section.Appendix B.3.p.1">It appears they will. See <a href="http://greenbytes.de/tech/tc/httpauth/#simplebasicnewparam1">http://greenbytes.de/tech/tc/httpauth/#simplebasicnewparam1</a> and <a href="http://greenbytes.de/tech/tc/httpauth/#simplebasicnewparam2">http://greenbytes.de/tech/tc/httpauth/#simplebasicnewparam2</a>.  </p>
<h1 id="rfc.appendix.Appendix C">
<a href="#rfc.appendix.Appendix%20C">Appendix C.</a> <a href="#change.log" id="change.log">Change Log (to be removed by RFC Editor before publication)</a>
</h1>
<h1 id="rfc.appendix.Appendix C.1">
<a href="#rfc.appendix.Appendix%20C.1">Appendix C.1.</a> Since draft-reschke-basicauth-enc-00</h1>
<p id="rfc.section.Appendix C.1.p.1">Add and close issues "credparam" and "paramcase".  Rewrite the deployment considerations.  </p>
<h1 id="rfc.appendix.Appendix C.2">
<a href="#rfc.appendix.Appendix%20C.2">Appendix C.2.</a> Since draft-reschke-basicauth-enc-01</h1>
<p id="rfc.section.Appendix C.2.p.1">Note more recent Mozilla bugzilla entry; add behavior of existing UAs to FAQ (with pointer to test cases).  </p>
<h1 id="rfc.appendix.Appendix D">
<a href="#rfc.appendix.Appendix%20D">Appendix D.</a> Open issues (to be removed by RFC Editor prior to publication)</h1>
<h1 id="rfc.appendix.Appendix D.1">
<a href="#rfc.appendix.Appendix%20D.1">Appendix D.1.</a> edit</h1>
<p id="rfc.section.Appendix D.1.p.1">Type: edit</p>
<p id="rfc.section.Appendix D.1.p.2">julian.reschke@greenbytes.de (2010-08-11): Umbrella issue for editorial fixes/enhancements.  </p>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Julian F. Reschke</span> 
	  <span class="n hidden">
		<span class="family-name">Reschke</span>
	  </span>
	</span>
	<span class="org vcardline">greenbytes GmbH</span>
	<span class="adr">
	  <span>Hafenweg 16</span>

	  <span class="vcardline">
		<span class="locality">Muenster</span>,  
		<span class="region">NW</span> 
		<span class="code">48155</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:julian.reschke@greenbytes.de">julian.reschke@greenbytes.de</a></span>

<span class="vcardline">URI: <a href="http://greenbytes.de/tech/webdav/">http://greenbytes.de/tech/webdav/</a></span>

  </address>
</div>

</body>
</html>