v=0                                
c=IN IP4 124.124.124.222                                
m=audio 2222 RTP/AVP 0 
v=0                                
c=IN IP4 124.124.124.222                                
m=image 4444 udptl t38 
a=T38FaxVersion:1 
a=T38FaxRateManagement:transferredTCFlocalTCF 
a=T38FaxUdpEC:t38UDPFEC 
a=T38FaxMaxBufferSize:2000 
a=T38MaxDatagram:512 
a=T38FaxMaxRate:14400 
v=0                                
c=IN IP4 124.124.124.222                                
 
 
            H.248 (megaco) MG Autonomous T38 Transitioning October 2002 
 
 
m=audio 2222 RTP/AVP 0 8 13 
a=ptime:20 
v=0                                
c=IN IP4 124.124.124.222                                
m=audio 1111 RTP/AVP 18 129 
a=ptime10 
a=rtpmap:129 telephone-event/8000 
a=fmtp:129 0-15 
v=0                                
c=IN IP4 124.124.124.222                                
m=image 4444 udptl t38 
a=T38FaxRateManagement:transferredTCFlocalTCF 
a=T38FaxUdpEC:t38UDPFEC 
v=0                                
c=IN IP4 124.124.124.222                                
m=audio 2222 RTP/AVP 0 8 13 140 
a=ptime:20 
a=rtpmap:140 telephone-event/8000 
a=fmtp:140 0-15 
v=0                                
c=IN IP4 124.124.124.222                                
m=image 0 udptl t38 
a=T38FaxRateManagement:transferredTCFlocalTCF 
a=T38FaxUdpEC:t38UDPFEC 
a=T38FaxMaxBufferSize:1536 
a=T38MaxDatagram:512 
v=0                                
c=IN IP4 124.124.124.222                                
m=audio 2222 RTP/AVP 0 8 13 140 
a=ptime:20 
a=rtpmap:140 telephone-event/8000 
a=fmtp:140 0-15 
v=0                                
c=IN IP4 124.124.124.222                                
m=image 8190 udptl t38 
a=T38FaxVersion:0 
a=T38FaxRateManagement:transferredTCFlocalTCF 
a=T38FaxUdpEC:t38UDPFEC 
a=T38FaxMaxBufferSize:2000 
Transaction = 10 { 
Context = - {W-AuditValue = * {Audit{Media, Packages}}}   
Reply = 10 { 
 
 
            H.248 (megaco) MG Autonomous T38 Transitioning October 2002 
 
 
Context = - { 
AuditValue = * { 
      Media {  
Stream = 1 {  
        Local  { 
v=0 
c=IN IP4 $  
m=audio $ RTP/AVP 18 0  
v=0 
c=IN IP4 $  
m=image $ udptl t38 
         } ; RTP profile for G.711 is 0, G.729 is 18, Also T.38 udptl    
             shall be used for FoIP relay. 
        } 
       }, 
      Packages {al, rtp, ipfax, fax, ctyp, cg}  
      ; al = analog line pkg, rtp = rtp pkg, ipfax = T.38 fax pkg,  
fax = fax pkg 
ReserveValue=True/false to ask for all/the-most-preferred Codec(s), 
Transaction = 11 { 
Context = $ { 
Add = DS0/1/1 { 
Events = 1 {al/on, ftmd/dtfmctyp/dtone, al/of} 
           },  ; SCN termination prepared to listen for tones 
Add = $ { 
         Media {  
Stream = 1 {  
             LocalControl { Mode = ReceiveOnly, ReserveGroup= True }, 
             Local { 
v=0 
c=IN IP4 $ 
m=audio $ RTP/AVP 18 0 
v=0 
c=IN IP4 $ 
m=image $ udptl t38 
              }; IP termination for audio and image     
            }                   
          } 
        }     
     } 
Reply = 11 { 
Context = 2000 {  
Add = DS0/1/1,  ; SCN termination added 
Add = RTP/1 { 
         Media {  
Stream = 1 { 
             Local { 
v=0                                
c=IN IP4 124.124.124.222                                
m=audio 2222 RTP/AVP 18 
             } ; IP termination added 
           } 
         } 
       } 
     } 
Transaction = 30 { 
Context = $ { 
Add = DS0/2/2 { 
         Media { 
Stream = 1 { 
             LocalControl {Mode = SendReceive } } }, 
Events = 10 {al/of, ftmd/dtfmctyp, faxctyp/dtone{sdtt=cng}, 
Signals = {al/ri, ctyp/callsig, ctyp/ans} 
Add  = $ { 
         Media {  
Stream = 1 {  
             LocalControl {Mode = SendReceive }, 
             Local { 
v=0 
c=IN IP4 $                                
m=audio $ RTP/AVP 18 0 
             },                   
             Remote { 
v=0 
c=IN IP4 124.124.124.222                                
m=audio 2222 RTP/AVP 18 
             } ; RTP profile for G.729 is 18  
           } 
         } 
       } 
     } 
Reply = 30 { 
Context = 5000 { 
Add = DS0/2/2,  
Add = RTP/2 { 
         Media {  
 
 
            H.248 (megaco) MG Autonomous T38 Transitioning October 2002 
 
 
Stream = 1 {  
             Local { 
v=0 
c=IN IP4 125.125.125.111  
m=audio 1111 RTP/AVP 18 
              }  
            }  
          } 
        } 
     } 
Transaction = 12 { 
Context = 2000 { 
Modify = DS0/1/1 { 
Events = 10 { faxctyp/dtone{sdtt=cng}, 
Modify = RTP/1 { 
              Media {  
Stream = 1 {  
                     LocalControl {Mode = SendReceive }, 
                     Remote { 
v=0 
c=IN IP4 125.125.125.111  
m=audio 1111 RTP/AVP 18 
                     }      
                 } 
              } 
          }     
       } 
Reply = 12 { 
Context = 2000 {Modify = DS0/1/1, Modify = RTP/1} 
Transaction = 50 { 
Context = 2000 { 
Notify = DS0/1/1 { 
ObservedEvents = 1 { 
          19991212T22110001:faxctyp/dtone{dtst=cng} } 
Reply = 50 { 
Context = 2000 {Notify = DS0/1/1} 
Transaction = 31 { 
Context = 5000 { 
Modify = DS0/2/2 { 
         Signals {faxctyp/callsig{callSigname=cng}}; issue CNG at remote 
Reply = 31 { 
Context = 5000 {Modify = DS0/2/2} 
Transaction = 70 { 
Context = 5000 { 
Notify = DS0/2/2 { 
ObservedEvents = 10 { 
          19991212T22110031:faxctyp/dtone{dtst=ANSced}}; CED and ANS are 
Reply = 70 { 
Context = 5000 {Notify = DS0/2/2} 
Transaction = 13 { 
Context = 2000 { 
Modify = DS0/1/1 { 
 
 
            H.248 (megaco) MG Autonomous T38 Transitioning October 2002 
 
 
         Signals {faxctyp/ans{anstype=ansced}} 
Reply = 13 { 
Context = 2000 {Modify = DS0/1/1} 
Transaction = 71 { 
Context = 5000 { 
Notify = DS0/2/2 { 
ObservedEvents = 10 { 
          19991212T22110031:ctyp/dtone{dtst=v21flag}} 
Reply = 71 { 
Context = 5000 {Notify = DS0/2/2} 
Transaction =  5{ 
Context = 2000 { 
Modify = DS0/1/1 { 
 
 
            H.248 (megaco) MG Autonomous T38 Transitioning October 2002 
 
 
         Signals {ctyp/ans{anstype=v21flags, SignalType=TimeOut}} 
Events = 2 { fax/faxconnchange} 
Stream=1{ 
         LocalControl 
            {fax/faxstate = Train; 
            } 
            } 
         } 
Reply = 5 { 
Context = 2000 {Modify = DS0/1/1} 
    
Transaction =  33{ 
Context = 5000 { 
Modify = DS0/2/2 { 
Events = 12 { fax/faxconnchange}, 
Stream=1{ 
         LocalControl 
            {fax/faxstate = TrainNegotiating; 
            } 
            } 
         } 
Reply = 33 { 
Context = 5000 {Modify = DS0/2/2} 
    
Transaction = 15 { 
Context = 2000 { 
Modify = RTP/1 { 
         Media {  
Stream = 1 {  
             LocalControl 
            {ipfax/faxstate = Negotiating; 
            } 
             Local { 
v=0 
c=IN IP4 124.124.124.222 
m=image 2222 udptl t38 
a=T38FaxRateManagement:transferredTCFlocalTCF 
a=T38FaxUdpEC:t38UDPFEC 
             } ; change to T.38 in the IP connection     
           }                   
         } 
       }     
     } 
Reply = 15 { 
Context = 2000 {Modify = RTP/1 { 
       Media {  
Stream = 1 {  
           Local { 
v=0 
c=IN IP4 124.124.124.222 
m=image 3333 udptl t38 
a=T38FaxRateManagement:localTCF 
a=T38FaxUdpEC:t38UDPFEC 
           }; the IP connection brought into fax mode 
         } 
       } 
     } } 
Transaction = 32 { 
Context = 5000 { 
Modify  = RTP/2 { 
         Media {  
Stream = 1 {  
             LocalControl 
            {ipfax/faxstate = Negotiating; 
            } 
             Local { 
v=0 
c=IN IP4 125.125.125.111  
m=image 1111 udptl t38 
a=T38FaxRateManagement:localTCF 
a=T38FaxUdpEC:t38UDPFEC 
             },                   
             Remote { 
v=0 
c=IN IP4 124.124.124.222 
m=image 3333 udptl t38 
a=T38FaxRateManagement:localTCF 
a=T38FaxUdpEC:t38UDPFEC 
 
 
            H.248 (megaco) MG Autonomous T38 Transitioning October 2002 
 
 
             }  
           } 
         } 
       } 
     } 
Reply = 32 { 
Context = 5000 { 
Modify = RTP/2 { 
         Media {  
Stream = 1 {  
             Local { 
v=0 
c=IN IP4 125.125.125.111  
m=image 1111 udptl t38 
a=T38FaxRateManagement:localTCF 
a=T38FaxUdpEC:t38UDPFEC 
              }  
            }  
          } 
        } 
     } 
Transaction = 15 { 
Context = 2000 { 
Modify = RTP/1 { 
              Media {  
Stream = 1 {  
                     Remote { 
v=0 
c=IN IP4 125.125.125.111  
m=image 1111 udptl t38 
a=T38FaxRateManagement:localTCF 
a=T38FaxUdpEC:t38UDPFEC 
                     }      
 
 
            H.248 (megaco) MG Autonomous T38 Transitioning October 2002 
 
 
                 } 
              } 
          }     
       } 
Reply = 15 { 
Context = 2000 { Modify = RTP/1} 
Transaction = 4 { 
Context = 5000 { 
Notify = DS0/2/2 { 
ObservedEvents = 10 { 
          19991212T22110031:fax/dtone{st=v21flag}} 
Transaction = 4 { 
Context = 5000 { 
Notify = DS0/2/2 { 
ObservedEvents = 10 { 
          19991212T22110031:faxctyp/dtone{dtst=ansam}} 
ReserveGroup=True to ask the MG to take both audio and image media 
Transaction = 11 { 
Context = $ { 
Add = DS0/1/1 { 
Events = 1 {al/on, ftmd/dtfmctyp/dtone, 
Add = $ { 
         Media {  
Stream = 1 {  
             LocalControl { Mode = ReceiveOnly, ReserveGroup=True }, 
             Local { 
v=0 
c=IN IP4 $ 
m=audio $ RTP/AVP 18 0   
v=0 
c=IN IP4 $ 
m=image $ udptl t38 
              } ; the IP side termination showing capability of RTP 
Reply = 11 { 
Context = 2000 {  
Add = DS0/1/1,; the SCN termination is accepted 
Add = RTP/1 { 
         Media {  
Stream = 1 { 
             Local { 
v=0                                
c=IN IP4 124.124.124.222                                
m=audio 2222 RTP/AVP 18 
             } ; the IP RTP termination is accepted with audio payload 
Transaction = 1450 { 
Context = 2000 { 
 
 
            H.248 (megaco) MG Autonomous T38 Transitioning October 2002 
 
 
Modify = RTP/1 { 
         Media {  
Stream = 1 {  
             Local { 
v=0 
c=IN IP4 124.124.124.222 
m=image 2222 udptl t38 
a=T38FaxRateManagement:transferredTCF 
a=T38FaxUdpEC:t38UDPFEC 
             } ; modify media stream 1 to use image media , udptl 
Events=fax/faxconnchange; 
          } 
    
           }                   
Reply = 14 { 
Context = 2000 {Modify = RTP/1 { 
       Media {  
Stream = 1 {  
           Local { 
v=0 
c=IN IP4 124.124.124.222 
m=image 3333 udptl t38 
a=T38FaxRateManagement:transferredTCF 
a=T38FaxUdpEC:t38UDPFEC 
           }; The fax udptl/t38 transport channel is accepted on the IP 
Notify = DS0/1/1 { 
ObservedEvents = 1 { 
 
 
            H.248 (megaco) MG Autonomous T38 Transitioning October 2002 
 
 
          19991212T22110001:ctyp/dtone{dtt=cng} } 
Reply = 50 { 
Context = 2000 {Notify = DS0/1/1} 
Transaction = 30 { 
Context = $ { 
Modify = DS0/1/1 { 
         Media { 
Stream = 1 { 
             LocalControl { fax/faxstate = Prepare, Mode=SendReceive } } 
Events = 10 {al/of,ftmd/dtfmctyp, faxctyp/dtone{st=cng}, 
Signals = {al/ri, ctyp/ans, ctyp/callsig} 
Modify = RTP/1 { 
         Media {  
Stream = 1 { 
             Local { 
v=0 
c=IN IP4 124.124.124.222 
m=image 2222 udptl t38 
a=T38FaxRateManagement:transferredTCF 
a=T38FaxUdpEC:t38UDPFEC 
 
 
            H.248 (megaco) MG Autonomous T38 Transitioning October 2002 
 
 
             } ; modify media stream 1 to use image media , udptl 
Events = 2 { ipfax/faxconnchng }      
Reply = 14 { 
Context = 2000 { 
Modify = RTP/1 { 
       Media {  
Stream = 1 {  
           Local { 
v=0 
c=IN IP4 124.124.124.222 
m=image 3333 udptl t38 
a=T38FaxRateManagement:transferredTCF 
a=T38FaxUdpEC:t38UDPFEC 
           }; The fax udptl/t38 transport channel is accepted on the IP 
Modify = DS0/1/1 
Transaction = 60 { 
Context = 2000 { 
Notify = RTP/1 { 
ObservedEvents = 1 { 
          19991212T22110001:ipfax/faxconnchange{faxconnchng=Negotiating 
Reply = 60 { 
Context = 2000 {Notify = RTP/1} 
Transaction = 10 { 
Context = - {W-AuditCapability = * {Audit{Media, Packages}}}   
Reply = 10 { 
Context = - { 
AuditCapability = * { 
      Media {  
Stream = 1 {  
        Local  { 
     
v=0 
c=IN IP4 $  
m=audio $ RTP/AVP 0 18 
v=0 
c=IN IP4 $  
m=image $ udptl t38  
         } ; RTP profile for G.711 is 0, G.729 is 18, t38 is T.38  
        } 
       }, 
      Packages {al, rtp, ipfax, fax, ctyp, cg}  
      ; al = analog line pkg, rtp = rtp pkg, ipfax = T.38 fax pkg, fax = 
Transaction = 11 { 
Context = $ { 
Add = DS0/1/1 { 
         Media {  
Stream = 1 {  
               }     } 
Add = $ { 
         Media {  
Stream = 1 {  
             LocalControl { Mode = ReceiveOnly, ReserveGroup=True }, 
             Local { 
v=0 
c=IN IP4 $ 
m=audio $ RTP/AVP 0 18 
V=0 
c=IN IP4 $ 
m=image $ udptl t38 
    
 
 
            H.248 (megaco) MG Autonomous T38 Transitioning October 2002 
 
 
    
              }; IP termination for audio      
            }                   
          } 
        }     
     } 
Reply = 11 { 
Context = 2000 {  
Add = DS0/1/1,  ; SCN termination added 
Add = RTP/1 { 
         Media {  
Stream = 1 { 
             Local { 
v=0                                
c=IN IP4 124.124.124.222                                
m=audio 2222 RTP/AVP 18 
v=0                                
c=IN IP4 124.124.124.222 
m=image 4444 udptl t38 
a=T38FaxRateManagement:transferredTCFlocalTCF 
a=T38FaxUdpEC:t38UDPFEC 
    
             } ; IP termination added 
           } 
         } 
       } 
     } 
Transaction = 30 { 
Context = $ { 
Add = DS0/2/2 { 
         Media { 
Stream = 1 { 
             LocalControl {Mode = SendReceive}, ReserveGroup=True } }, 
Add  = $ { 
         Media {  
Stream = 1 {  
             LocalControl {Mode = SendReceive }, 
             Local { 
v=0 
c=IN IP4 $                                
m=audio $ RTP/AVP 0 18 
v=0 
c=IN IP4 $ 
m=image $ udptl t38 
             },                   
             Remote { 
v=0 
c=IN IP4 124.124.124.222                                
m=audio 2222 RTP/AVP 18 
v=0 
c=IN IP4 124.124.124.222 
m=image 4444 udptl t38 
a=T38FaxRateManagement:transferredTCFlocalTCF 
a=T38FaxUdpEC:t38UDPFEC 
    
             } ; RTP profile for G.711 is 0 
           } 
         } 
       } 
     } 
Reply = 30 { 
Context = 5000 { 
Add = DS0/2/2,  
Add = RTP/2 { 
         Media {  
Stream = 1 {  
             Local { 
v=0 
c=IN IP4 125.125.125.111  
m=audio 1111 RTP/AVP 18 
v=0 
c=IN IP4 125.125.125.111 
m=image 5555 udptl t38 
a=T38FaxRateManagement:transferredTCFlocalTCF 
a=T38FaxUdpEC:t38UDPFEC 
    
              }  
            }  
          } 
        } 
     } 
Transaction = 12 { 
Context = 2000 { 
 
 
            H.248 (megaco) MG Autonomous T38 Transitioning October 2002 
 
 
Modify = DS0/1/1 { 
              
Modify = RTP/1 { 
              Media {  
Stream = 1 {  
                     LocalControl {Mode = SendReceive, ReserveGroup=True 
v=0 
c=IN IP4 125.125.125.111  
m=audio 1111 RTP/AVP 18 
v=0 
c=IN IP4 125.125.125.111 
m=image 5555 udptl t38 
a=T38FaxRateManagement:transferredTCFlocalTCF 
a=T38FaxUdpEC:t38UDPFEC 
    
    
                     }      
                 } 
              } 
          }     
       } 
Reply = 12 { 
Context = 2000 {Modify = DS0/1/1, Modify = RTP/1} 
ReserveGroup=True to ask the MG to take both audio and image media 
Transaction = 11 { 
Context = $ { 
Add = DS0/1/1 { 
Events = 1 {al/on, ftmd/dtfmctyp/dtone, 
Add = $ { 
         Media {  
Stream = 1 {  
             LocalControl { Mode = ReceiveOnly, ReserveGroup=True }, 
             Local { 
v=0 
c=IN IP4 $ 
m=audio $ RTP/AVP 18 0  
v=0 
c=IN IP4 $ 
m=image $ udptl t38 
              } ; the IP side termination showing capability of RTP 
Reply = 11 { 
Context = 2000 {  
Add = DS0/1/1,; the SCN termination is accepted 
Add = RTP/1 { 
         Media {  
Stream = 1 { 
             Local { 
v=0                                
c=IN IP4 124.124.124.222                                
m=audio 2222 RTP/AVP 0 
v=0                                
c=IN IP4 124.124.124.222 
m=image 5555 udptl t38 
             } ; the IP RTP termination is accepted with audio payload 
Transaction = 30 { 
Context = $ { 
Modify = DS0/1/1 { 
         Media { 
Stream = 1 { 
             LocalControl { fax/faxstate = Prepare, ReserveGroup=True } 
Events = 10 {al/of, fax/faxconnchange },; the MGC request the 
Signals = {al/ri, ctyp/callsig} 
Modify = RTP/1 { 
         Media {  
Stream = 1 { 
             Local { 
v=0 
c=IN IP4 124.124.124.222 
m=audio 1111 RTP/AVP 0 
v=0 
c=IN IP4 124.124.124.222 
m=image 2222 udptl t38 
a=T38FaxRateManagement:transferredTCF 
a=T38FaxUdpEC:t38UDPFEC 
             } ; modify media stream 1 to use image media , udptl 
Events = 2 { ipfax/faxconnchng }      
Reply = 14 { 
Context = 2000 { 
Modify = RTP/1 { 
       Media {  
Stream = 1 {  
           Local { 
v=0 
c=IN IP4 124.124.124.222 
m=audio 2222 RTP/AVP 0 
m=image 3333 udptl t38 
a=T38FaxRateManagement:transferredTCF 
a=T38FaxUdpEC:t38UDPFEC 
           }; The fax udptl/t38 transport channel is accepted on the IP 
Modify = DS0/1/1 
