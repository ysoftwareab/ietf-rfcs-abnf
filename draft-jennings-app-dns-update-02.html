<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>HTTP API for Updating DNS Records</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="HTTP API for Updating DNS Records">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">C. Jennings</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Cisco Systems</td></tr>
<tr><td class="header">Intended status:  Standards Track</td><td class="header">T. Daly</td></tr>
<tr><td class="header">Expires:  September 9, 2009</td><td class="header">J. Hitchcock</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Dynamic Network Services, Inc.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">March 08, 2009</td></tr>
</table></td></tr></table>
<h1><br />HTTP API for Updating DNS Records<br />draft-jennings-app-dns-update-02</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008. The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 9, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>This specification defines a simple HTTP based scheme for clients to
      update DNS records.
</p>
<p>The draft is being discussed on the apps-discuss@ietf.org list.
</p>
<h3>Legal</h3>

<p>This documents and the information contained therein are provided on
      an "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
      OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
      THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR
      IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
      INFORMATION THEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
      WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
</p>
<a name="anchor1"></a><br /><hr />
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>There are many circumstances in which an application or device would
      like to have an easy way to update DNS records. While a number of
      support DNS based protocols exist for updating records<a class='info' href='#RFC2136'>[RFC2136]<span> (</span><span class='info'>Vixie, P., Thomson, S., Rekhter, Y., and J. Bound, &ldquo;Dynamic Updates in the Domain Name System           (DNS UPDATE),&rdquo; April&nbsp;1997.</span><span>)</span></a><a class='info' href='#RFC3007'>[RFC3007]<span> (</span><span class='info'>Wellington, B., &ldquo;Secure Domain Name System (DNS) Dynamic Update,&rdquo; November&nbsp;2000.</span><span>)</span></a><a class='info' href='#RFC4310'>[RFC4310]<span> (</span><span class='info'>Hollenbeck, S., &ldquo;Domain Name System (DNS) Security Extensions Mapping for the           Extensible Provisioning Protocol (EPP),&rdquo; December&nbsp;2005.</span><span>)</span></a>, many of these mechanisms are not available in
      today's scaled down applications and devices. However, many existing
      application and devices do support the use of HTTP<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol --           HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> and HTTP over TLS to update DNS records. The
      goal of this specification is to create a generic standard for which
      applications and devices can update DNS records using HTTP over TLS.
</p>
<p>The need for this protocol exists from the use of DHCP and other
      dynamic IP addressing systems, where a device receives updates to it IP
      address, and further, there exists a need for the global DNS to be made
      aware of such a change. Many residential NAT devices support this type
      of operation today, but do it using hap-hazard and proprietary methods
      <a class='info' href='#DynDNS'>[DynDNS]<span> (</span><span class='info'>, &ldquo;http://www.dyndns.com/developers/specs/syntax.html,&rdquo; 2008.</span><span>)</span></a><a class='info' href='#telnic'>[telnic]<span> (</span><span class='info'>, &ldquo;http://www.telnic.net/developers-resources.html,&rdquo; 2008.</span><span>)</span></a><a class='info' href='#SliceHost'>[SliceHost]<span> (</span><span class='info'>SliceHost, &ldquo;http://articles.slicehost.com/assets/2008/5/27/Slicehost_API.pdfl,&rdquo; May&nbsp;2008.</span><span>)</span></a> .
</p>
<p>The approach described in the specification allows a client to make
      HTTP over TLS requests to a server to update DNS records, using standard
      and highly available encryption techniques for security, while providing
      a generic a flexible interface for updating DNS records
</p>
<a name="anchor2"></a><br /><hr />
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate           Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p>
<a name="anchor3"></a><br /><hr />
<a name="rfc.section.3"></a><h3>3.&nbsp;
Update Record Requests</h3>

<p>This section describes the semantics of requests to update DNS
      records. The specification only covers how tell a DNS system what
      updates are desired. How the DNS system deal with SOA records or DNSSEC
      if not effected in any way by this specification.
</p>
<a name="anchor4"></a><br /><hr />
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
HTTPS Request</h3>

<p>The client needs to be configured with the base URL for the server,
        along with a username and password. The request is created by forming
        an HTTPS<a class='info' href='#RFC2818'>[RFC2818]<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a> POST request to a URL. The
        HTTPS POST request is formed by starting with the configured base URL,
        and then appending all the required parameters. The request MUST be
        done using HTTPS to protect the password. The client MUST ensure the
        TLS certificate of the server is appropriately signed.
</p>
<p>The HTTP request SHOULD contain a "User-Agent" header that clearly
        identifies the version of the software making the request, as this
        facilitates debugging.
</p>
<a name="anchor5"></a><br /><hr />
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
URL Parameters</h3>

<p>The request MUST include exactly one user, password, domain, and
        type parameter as defined below. Other parameters are optional and can
        occur at most once. The values of parameters MUST be appropriately
        escaped as required to be part of a valid HTTP URL.
</p>
<p>Open Issue: there is some discussion going on around if it is
        better to use HTTP basic auth or form style parameters. TODO Resolve
        this.
</p>
<p style='text-align: center'>General Parameters
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Parameter Name</th><th align="left">Value</th></tr>
<tr>
<td align="left">user</td>
<td align="left">The configured user name for the user making the request.</td>
</tr>
<tr>
<td align="left">password</td>
<td align="left">The configured password for the user making the request base16
          encoded as defined in <a class='info' href='#RFC4648'>[RFC4648]<span> (</span><span class='info'>Josefsson, S., &ldquo;The Base16, Base32, and Base64 Data Encodings,&rdquo; October&nbsp;2006.</span><span>)</span></a>.</td>
</tr>
<tr>
<td align="left">domain</td>
<td align="left">The fully qualified domain name for the record to update.</td>
</tr>
<tr>
<td align="left">type</td>
<td align="left">The ASCII encoded version of they type of DNS record to
          update.</td>
</tr>
<tr>
<td align="left">rdata</td>
<td align="left">The value that should be stored in the DNS resource record.</td>
</tr>
<tr>
<td align="left">match</td>
<td align="left">The value that matches an existing resource record that is to be
          updated by this request. A special value of "*" means that all
          existing records are replaced by the new record in this request.</td>
</tr>
<tr>
<td align="left">ttl</td>
<td align="left">Requested time to live for the DNS records in seconds. If
          omitted, this will be set to default chosen by the server.</td>
</tr>
</table>
<br clear="all" />

<p>Some common values for the type parameter field are shown in the
        following table.
</p>
<p style='text-align: center'>Type Parameters Values
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Type Name</th><th align="left">Value</th></tr>
<tr>
<td align="left">A</td>
<td align="left">DNS A record <a class='info' href='#RFC1035'>[RFC1035]<span> (</span><span class='info'>Mockapetris, P., &ldquo;Domain names           - implementation and specification,&rdquo; November&nbsp;1987.</span><span>)</span></a>.</td>
</tr>
<tr>
<td align="left">AAAA</td>
<td align="left">DNS AAAA record <a class='info' href='#RFC3596'>[RFC3596]<span> (</span><span class='info'>Thomson, S., Huitema, C., Ksinant, V., and M. Souissi, &ldquo;DNS Extensions to Support IP Version 6,&rdquo; October&nbsp;2003.</span><span>)</span></a>.</td>
</tr>
<tr>
<td align="left">CNAME</td>
<td align="left">DNS CNAME record <a class='info' href='#RFC1035'>[RFC1035]<span> (</span><span class='info'>Mockapetris, P., &ldquo;Domain names           - implementation and specification,&rdquo; November&nbsp;1987.</span><span>)</span></a>.</td>
</tr>
<tr>
<td align="left">NS</td>
<td align="left">DNS NS record <a class='info' href='#RFC1035'>[RFC1035]<span> (</span><span class='info'>Mockapetris, P., &ldquo;Domain names           - implementation and specification,&rdquo; November&nbsp;1987.</span><span>)</span></a>.</td>
</tr>
<tr>
<td align="left">PTR</td>
<td align="left">DNS PTR record <a class='info' href='#RFC1035'>[RFC1035]<span> (</span><span class='info'>Mockapetris, P., &ldquo;Domain names           - implementation and specification,&rdquo; November&nbsp;1987.</span><span>)</span></a>.</td>
</tr>
<tr>
<td align="left">SRV</td>
<td align="left">DNS SRV record <a class='info' href='#RFC2782'>[RFC2782]<span> (</span><span class='info'>Gulbrandsen, A., Vixie, P., and L. Esibov, &ldquo;A DNS RR for specifying the location of           services (DNS SRV),&rdquo; February&nbsp;2000.</span><span>)</span></a>.</td>
</tr>
<tr>
<td align="left">TXT</td>
<td align="left">DNS TXT record <a class='info' href='#RFC1464'>[RFC1464]<span> (</span><span class='info'>Rosenbaum, R., &ldquo;Using the Domain           Name System To Store Arbitrary String Attributes,&rdquo; May&nbsp;1993.</span><span>)</span></a>.</td>
</tr>
<tr>
<td align="left">HIP</td>
<td align="left">DNS HIP record <a class='info' href='#RFC5205'>[RFC5205]<span> (</span><span class='info'>Nikander, P. and J. Laganier, &ldquo;Host Identity Protocol (HIP) Domain Name System (DNS)           Extensions,&rdquo; April&nbsp;2008.</span><span>)</span></a>.</td>
</tr>
<tr>
<td align="left">MX</td>
<td align="left">DNS MX record.</td>
</tr>
<tr>
<td align="left">SPF</td>
<td align="left">DNS SPF record.</td>
</tr>
</table>
<br clear="all" />

<a name="sec-mult"></a><br /><hr />
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
Entries with multiple records</h3>

<p>For many updates, where only one resource record is desired, the
          match parameter is sent with a value of "*" indicating all existing
          records are removed and replaced with the new one. Sometimes it is
          desirable to have multiple records of the same type for the same
          name. For example, a domain may have multiple MX records. To add a
          new record, no match value is sent, or the match value is empty, and
          a new record is appended to the set. To update an existing record,
          the match parameter is set to the value of the old record that needs
          to be updated. If the record in the match parameter can not be
          found, the request returns an 404 error.
</p>
<a name="anchor6"></a><br /><hr />
<a name="rfc.section.3.2.2"></a><h3>3.2.2.&nbsp;
Deleting records</h3>

<p>If the value of the parameter that would update a record is
          empty, the record MUST be removed from DNS.
</p>
<a name="anchor7"></a><br /><hr />
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Return Codes and Errors</h3>

<p>HTTP response codes are used to indicate success and errors as
        specified in the following table.
</p>
<p style='text-align: center'>Response Codes
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Value</th><th align="left">Error Condition</th></tr>
<tr>
<td align="left">200</td>
<td align="left">No error, operation successful</td>
</tr>
<tr>
<td align="left">400</td>
<td align="left">The update parameters passed are invalid or would otherwise
          result in an ambiguous update</td>
</tr>
<tr>
<td align="left">401</td>
<td align="left">Bad authentication credentials</td>
</tr>
<tr>
<td align="left">403</td>
<td align="left">Trying to update a record for which the given credentials are not
          authorized.</td>
</tr>
<tr>
<td align="left">404</td>
<td align="left">No records were found that match the value in the match parameter
          of the request.</td>
</tr>
<tr>
<td align="left">406</td>
<td align="left">A valid update was passed, however, it was not accepted for
          reasons of update abuse, whereby excessive numbers of duplicate
          updates have been sent.</td>
</tr>
<tr>
<td align="left">409</td>
<td align="left">A valid update was passed, however, no change was made as the
          requested change was preexisting</td>
</tr>
<tr>
<td align="left">501</td>
<td align="left">The server does not support the specified operation</td>
</tr>
<tr>
<td align="left">503</td>
<td align="left">The server is too busy to service the request or is otherwise
          unavailable and the client should wait at least 5 minutes before
          trying to update again</td>
</tr>
</table>
<br clear="all" />

<p>The body of the response MAY have human readable text that allows a
        network administrator to learn more about why the request failed.
</p>
<a name="anchor8"></a><br /><hr />
<a name="rfc.section.4"></a><h3>4.&nbsp;
Example</h3>

<p>In the examples below, some of the URLs appear broken across multiple
      lines. This is because of physical width limitations in this document;
      such URLs need to be read as single URLs with no embedded white space.
      All of the examples assume that a user called "me@example.net" with
      password "no" is allowed to update records in the example.com domain.
      The base URL for the DNS update service of
      https://dns.example.org/dns/update is used in the examples.
</p>
<p>Each example shows the state of the DNS in a precondition before the
      request, the requests performed using this specification, and then the
      resulting state of the DNS in the postcondition.
</p>
<a name="anchor9"></a><br /><hr />
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Update an A record</h3>

<p>This example shows a basic update where all existing A record
        values are replaced with a new entry.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Precondition:
  www.example.com   A    192.0.2.0
  www.example.com   A    192.0.2.1

Requests:
  https://dns.example.org/dns/update?user=me%40example.net
        &amp;password=6E6F&amp;match=*&amp;domain=www.example.com&amp;type=A
        &amp;rdata=192.0.2.2

Postcondition:
  www.example.com   A    192.0.2.2
</pre></div>
<a name="ex-multi"></a><br /><hr />
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Create two MX records</h3>

<p>This example shows how to create entries where there are multiple
        records.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Precondition:

Requests:
  https://dns.example.org/dns/update?user=me%40example.net
       &amp;password=6E6F&amp;domain=example.com&amp;match=&amp;type=MX
       &amp;rdata=10%20mail1.example.com
  https://dns.example.org/dns/update?user=me%40example.net
       &amp;password=6E6F&amp;domain=example.com&amp;match=&amp;type=MX
       &amp;rdata=20%20mail2.example.com

Postcondition:
  example.com   MX    10 mail1.example.com
  example.com   MX    20 mail2.example.com
</pre></div>
<a name="ex-del"></a><br /><hr />
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Delete an A record</h3>

<p>This example shows a simple removal of a record.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Precondition:
  www.example.com   A    192.0.2.1
  www.example.com   A    192.0.2.2
  www.example.com   A    192.0.2.3

Requests:
  https://dns.example.org/dns/update?user=me%40example.net
        &amp;password=6E6F&amp;domain=www.example.com&amp;type=A&amp;match=192.0.2.2

Postcondition:
  www.example.com   A    192.0.2.1
  www.example.com   A    192.0.2.3
</pre></div>
<a name="ex-add"></a><br /><hr />
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Add a new SRV record</h3>

<p>This example shows how to append a record to a list of existing
        records.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Precondition:
  _sip._tcp.example.com   SRV 10 1 5060 sip1.example.com
  _sip._tcp.example.com   SRV 10 1 5060 sip2.example.com

Requests:
  https://dns.example.org/dns/update?user=me%40example.net
         &amp;password=6E6F&amp;domain=_sip._tcp.example.com
         &amp;match=&amp;type=SRV&amp;rdata=10%201%205060%20sip3.example.com

Postcondition:
  _sip._tcp.example.com   SRV 10 1 5060 sip1.example.com
  _sip._tcp.example.com   SRV 10 1 5060 sip2.example.com
  _sip._tcp.example.com   SRV 10 1 5060 sip3.example.com
</pre></div>
<a name="ex-dup"></a><br /><hr />
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Update an existing SRV record</h3>

<p>This example is similar to the previous one, in that an entry is
        being changed.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Precondition:
  _sip._tcp.example.com   SRV 10 1 5060 sip1.example.com
  _sip._tcp.example.com   SRV 10 1 5060 sip2.example.com
  _sip._tcp.example.com   SRV 10 1 5060 sip3.example.com

Requests:
  https://dns.example.org/dns/update?user=me%40example.net
        &amp;password=6E6F&amp;domain=_sip._tcp.example.com&amp;type=SRV
        &amp;match=10%201%205060%20sip2.example.com
        &amp;rdata=10%201%205060%20sip22.example.com

Postcondition:
  _sip._tcp.example.com   SRV 10 1 5060 sip1.example.com
  _sip._tcp.example.com   SRV 10 1 5060 sip22.example.com
  _sip._tcp.example.com   SRV 10 1 5060 sip3.example.com
</pre></div>
<a name="anchor10"></a><br /><hr />
<a name="rfc.section.5"></a><h3>5.&nbsp;
WADL Descriptioin</h3>

<p>This section is non normative. The <a class='info' href='#sun.wadl'>WADL<span> (</span><span class='info'>Handley, M., &ldquo;Web Application Description Language (WADL),&rdquo; November&nbsp;2006.</span><span>)</span></a> [sun.wadl] description for the examples is:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;application
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xsi:schemaLocation="http://research.sun.com/wadl/2006/10 wadl.xsd"
 xmlns="http://research.sun.com/wadl/2006/10"&gt;

&lt;resources base="https://dns.example.org/"&gt;
  &lt;resource path="dns"&gt;
    &lt;resource path="update"&gt;
    &lt;method name="POST"&gt;
    &lt;request&gt;
    &lt;param href="#userParam"/&gt;
    &lt;param href="#passwordParam"/&gt;
    &lt;param href="#domainParam"/&gt;
    &lt;param href="#typeParam"/&gt;
    &lt;param href="#rdataParam"/&gt;
    &lt;param href="#ttlParam"/&gt;
    &lt;/request&gt;
    &lt;/method&gt;
  &lt;/resource&gt;
&lt;/resource&gt;
&lt;/resources&gt;

&lt;param name="user" type="xsd:string" style="query" required="true"
   id="userParam"&gt;
&lt;/param&gt;

&lt;param name="password" type="xsd:string" style="query"
   required="true"
   id="passwordParam"&gt;
&lt;/param&gt;

&lt;param name="domain" type="xsd:string" style="query" required="true"
   id="domainParam"&gt;
&lt;/param&gt;

&lt;param name="type" type="xsd:string" style="query" id="typeParam"&gt;
&lt;/param&gt;

&lt;param name="rdata" type="xsd:string" style="query" id="rdataParam"&gt;
&lt;/param&gt;

&lt;param name="ttl" type="xsd:integer" style="query" id="ttlParam"&gt;
&lt;/param&gt;

&lt;/application&gt;
</pre></div>
<a name="anchor11"></a><br /><hr />
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>This document makes no requests of IANA.
</p>
<a name="anchor12"></a><br /><hr />
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>The request includes a clear text password and MUST be done over
      HTTPS or the password may be seen by an attacker and used to hijack the
      services.
</p>
<p>If a user publishes the IP of their notebook computer, PDA, or smart
      phone as the move, it is likely that the IP address can be correlated to
      locations. By looking at the location over time for a specific user, it
      may be further possible to correlate that to an actual person. These
      attacks and implications to privacy are discussed in <a class='info' href='#dns-track'>[dns&#8209;track]<span> (</span><span class='info'>Guha, S. and P. Francis, &ldquo;Identity Trail: Covert Surveillance Using DNS,&rdquo; January&nbsp;2007.</span><span>)</span></a>.
</p>
<a name="anchor13"></a><br /><hr />
<a name="rfc.section.8"></a><h3>8.&nbsp;
Open Issues</h3>

<p>Using HTTP Digest vs URL parameters.
</p>
<p>Way to set the resource record to the IP address that the server got
      the request from.
</p>
<a name="anchor14"></a><br /><hr />
<a name="rfc.section.9"></a><h3>9.&nbsp;
Why not use DNS Dynamic Update?</h3>

<p>TODO - lots of work is needed here.
</p>
<p>RFC 2136 and the security for this provided by 3007, and the later
      DNSSEC RFCs provide a robust system for updating DNS that supports
      static shared secrets and asymmetric keys. Security working with
      asymmetric keys not easy but doing with static keys is vulnerable to
      offline attacks. Hard to do from Java script. Questions, any issues
      punching through NATs that have DNS ALGs with this? Hard to integrate
      with fine web security systems like openid. Trivial to implement this
      most web environments.
</p>
<p>Questions about deployment success. When were things defined, what is
      the market choosing? Does it work?
</p>
<p>Is the problem that we just need a simple open source library that
      does Dynamic Update?
</p>
<a name="anchor15"></a><br /><hr />
<a name="rfc.section.10"></a><h3>10.&nbsp;
Acknowledgements</h3>

<p>Thanks to Frank Ellermann, Peter Koch, Stephane Bortzmeyer, Mark
      Baker, Patrik Faltstrom, and Julian Reschke.
</p>
<a name="rfc.references"></a><br /><hr />
<a name="rfc.section.11"></a><h3>11.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<h3>11.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate
          Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="ftp://ftp.isi.edu/in-notes/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol --
          HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="ftp://ftp.isi.edu/in-notes/rfc2616.txt">TXT</a>, <a href="ftp://ftp.isi.edu/in-notes/rfc2616.ps">PS</a>, <a href="ftp://ftp.isi.edu/in-notes/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2818">[RFC2818]</a></td>
<td class="author-text">Rescorla, E., &ldquo;<a href="http://tools.ietf.org/html/rfc2818">HTTP Over TLS</a>,&rdquo; RFC&nbsp;2818, May&nbsp;2000 (<a href="ftp://ftp.isi.edu/in-notes/rfc2818.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4648">[RFC4648]</a></td>
<td class="author-text">Josefsson, S., &ldquo;<a href="http://tools.ietf.org/html/rfc4648">The Base16, Base32, and Base64 Data Encodings</a>,&rdquo; RFC&nbsp;4648, October&nbsp;2006 (<a href="ftp://ftp.isi.edu/in-notes/rfc4648.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<h3>11.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="DynDNS">[DynDNS]</a></td>
<td class="author-text">&ldquo;http://www.dyndns.com/developers/specs/syntax.html,&rdquo; 2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1035">[RFC1035]</a></td>
<td class="author-text">Mockapetris, P., &ldquo;<a href="http://tools.ietf.org/html/rfc1035">Domain names
          - implementation and specification</a>,&rdquo; STD&nbsp;13, RFC&nbsp;1035, November&nbsp;1987 (<a href="ftp://ftp.isi.edu/in-notes/rfc1035.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1464">[RFC1464]</a></td>
<td class="author-text"><a href="mailto:rosenbaum@lkg.dec.com">Rosenbaum, R.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1464">Using the Domain
          Name System To Store Arbitrary String Attributes</a>,&rdquo; RFC&nbsp;1464, May&nbsp;1993 (<a href="ftp://ftp.isi.edu/in-notes/rfc1464.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2136">[RFC2136]</a></td>
<td class="author-text"><a href="mailto:paul@vix.com">Vixie, P.</a>, <a href="mailto:set@thumper.bellcore.com">Thomson, S.</a>, <a href="mailto:yakov@cisco.com">Rekhter, Y.</a>, and <a href="mailto:bound@zk3.dec.com">J. Bound</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2136">Dynamic Updates in the Domain Name System
          (DNS UPDATE)</a>,&rdquo; RFC&nbsp;2136, April&nbsp;1997 (<a href="ftp://ftp.isi.edu/in-notes/rfc2136.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2136.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2136.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2782">[RFC2782]</a></td>
<td class="author-text"><a href="mailto:arnt@troll.no">Gulbrandsen, A.</a>, Vixie, P., and <a href="mailto:levone@microsoft.com">L. Esibov</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2782">A DNS RR for specifying the location of
          services (DNS SRV)</a>,&rdquo; RFC&nbsp;2782, February&nbsp;2000 (<a href="ftp://ftp.isi.edu/in-notes/rfc2782.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3007">[RFC3007]</a></td>
<td class="author-text">Wellington, B., &ldquo;<a href="http://tools.ietf.org/html/rfc3007">Secure Domain Name System (DNS) Dynamic Update</a>,&rdquo; RFC&nbsp;3007, November&nbsp;2000 (<a href="ftp://ftp.isi.edu/in-notes/rfc3007.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3596">[RFC3596]</a></td>
<td class="author-text">Thomson, S., Huitema, C., Ksinant, V., and M. Souissi, &ldquo;<a href="http://tools.ietf.org/html/rfc3596">DNS Extensions to Support IP Version 6</a>,&rdquo; RFC&nbsp;3596, October&nbsp;2003 (<a href="ftp://ftp.isi.edu/in-notes/rfc3596.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4310">[RFC4310]</a></td>
<td class="author-text">Hollenbeck, S., &ldquo;<a href="http://tools.ietf.org/html/rfc4310">Domain Name System (DNS) Security Extensions Mapping for the
          Extensible Provisioning Protocol (EPP)</a>,&rdquo; RFC&nbsp;4310, December&nbsp;2005 (<a href="ftp://ftp.isi.edu/in-notes/rfc4310.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5205">[RFC5205]</a></td>
<td class="author-text">Nikander, P. and J. Laganier, &ldquo;<a href="http://tools.ietf.org/html/rfc5205">Host Identity Protocol (HIP) Domain Name System (DNS)
          Extensions</a>,&rdquo; RFC&nbsp;5205, April&nbsp;2008 (<a href="ftp://ftp.isi.edu/in-notes/rfc5205.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="SliceHost">[SliceHost]</a></td>
<td class="author-text">SliceHost, &ldquo;http://articles.slicehost.com/assets/2008/5/27/Slicehost_API.pdfl,&rdquo; May&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="dns-track">[dns-track]</a></td>
<td class="author-text">Guha, S. and P. Francis, &ldquo;<a href="http://tools.ietf.org/html/rfc4310">Identity Trail: Covert Surveillance Using DNS</a>,&rdquo; RFC&nbsp;4310, January&nbsp;2007 (<a href="ftp://ftp.isi.edu/in-notes/rfc4310.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="sun.wadl">[sun.wadl]</a></td>
<td class="author-text">Handley, M., &ldquo;<a href="http://wadl.dev.java.net/wadl20061109.pdf">Web Application Description Language (WADL)</a>,&rdquo; &nbsp;http://wadl.dev.java.net/wadl20061109.pdf, November&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="telnic">[telnic]</a></td>
<td class="author-text">&ldquo;http://www.telnic.net/developers-resources.html,&rdquo; 2008.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cullen Jennings</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">170 West Tasman Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mailstop SJC-21/2</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Jose, CA  95134</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 408 902-3341</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:fluffy@cisco.com">fluffy@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tom Daly</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dynamic Network Services, Inc.</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:tom@dyn-inc.com">tom@dyn-inc.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jeremy Hitchcock</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dynamic Network Services, Inc.</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jeremy@dyndns.com">jeremy@dyndns.com</a></td></tr>
</table>
</body></html>
