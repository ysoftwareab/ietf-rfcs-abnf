<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>NTP Interleaved Modes</title>
<meta content="Miroslav Lichvar" name="author">
<meta content="Aanchal Malhotra" name="author">
<meta content="
       This document extends the specification of Network Time Protocol
        (NTP) version 4 in RFC 5905 with special modes called the NTP
        interleaved modes, that enable NTP servers to provide their clients and
        peers with more accurate transmit timestamps that are available only
        after transmitting NTP packets. More specifically, this document
        describes three modes: interleaved client/server, interleaved
        symmetric, and interleaved broadcast. 
    " name="description">
<meta content="xml2rfc 3.10.0" name="generator">
<meta content="NTP" name="keyword">
<meta content="interleaved mode" name="keyword">
<meta content="draft-ietf-ntp-interleaved-modes-07" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.10.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 58.2.0
    six 1.16.0
-->
<link href="/tmp/ntp-interleaved-modes-8phyfgwf.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">NTP Interleaved Modes</td>
<td class="right">October 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Lichvar &amp; Malhotra</td>
<td class="center">Expires 21 April 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Internet Engineering Task Force</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-ntp-interleaved-modes-07</dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a href="https://www.rfc-editor.org/rfc/rfc5905" class="eref">5905</a> (if approved)</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-10-18" class="published">18 October 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-04-21">21 April 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Lichvar</div>
<div class="org">Red Hat</div>
</div>
<div class="author">
      <div class="author-name">A. Malhotra</div>
<div class="org">Boston University</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">NTP Interleaved Modes</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document extends the specification of Network Time Protocol
        (NTP) version 4 in RFC 5905 with special modes called the NTP
        interleaved modes, that enable NTP servers to provide their clients and
        peers with more accurate transmit timestamps that are available only
        after transmitting NTP packets. More specifically, this document
        describes three modes: interleaved client/server, interleaved
        symmetric, and interleaved broadcast.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 21 April 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-requirements-language" class="xref">Requirements Language</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-interleaved-client-server-m" class="xref">Interleaved Client/server mode</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-interleaved-symmetric-mode" class="xref">Interleaved Symmetric mode</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-interleaved-broadcast-mode" class="xref">Interleaved Broadcast mode</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-protocol-failures" class="xref">Protocol Failures</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-acknowledgements" class="xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1"><span><a href="#RFC5905" class="xref">RFC 5905</a> [<a href="#RFC5905" class="xref">RFC5905</a>]</span> describes the operations of
        NTPv4 in a client/server, symmetric, and broadcast mode. The transmit
        and receive timestamps are two of the four timestamps included in every
        NTPv4 packet used for time synchronization.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">For a highly accurate and stable synchronization, the transmit and
        receive timestamp should be captured close to the beginning of the
        actual transmission and the end of the reception respectively. An
        asymmetry in the timestamping causes the offset measured by NTP to have
        an error.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">There are at least four options where a timestamp of an NTP packet may
        be captured with a software NTP implementation running on a
        general-purpose operating system:<a href="#section-1-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-1-4">
<li id="section-1-4.1">User space (software)<a href="#section-1-4.1" class="pilcrow">¶</a>
</li>
        <li id="section-1-4.2">Network device driver or kernel (software)<a href="#section-1-4.2" class="pilcrow">¶</a>
</li>
        <li id="section-1-4.3">Data link layer (hardware - MAC chip)<a href="#section-1-4.3" class="pilcrow">¶</a>
</li>
        <li id="section-1-4.4">Physical layer (hardware - PHY chip)<a href="#section-1-4.4" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-1-5">Software timestamps captured in user space in the NTP
        implementation itself are least accurate. They do not include
        system calls used for sending and receiving packets, processing and
        queuing delays in the system, network device drivers, and hardware.
        Hardware timestamps captured at the physical layer are most
        accurate.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">A transmit timestamp captured in the driver or hardware is more
        accurate than the user-space timestamp, but it is available to the NTP
        implementation only after it sent the packet using a system call. The
        timestamp cannot be included in the packet itself unless the driver or
        hardware supports NTP and can modify the packet before or during the
        actual transmission.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">The protocol described in RFC 5905 does not specify any mechanism for
        a server to provide its clients and peers with a more accurate transmit
        timestamp that is known only after the transmission. A packet that
        strictly follows RFC 5905, i.e. it contains a transmit timestamp
        corresponding to the packet itself, is said to be in basic mode.<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">Different mechanisms could be used to exchange timestamps known after
        the transmission. The server could respond to each request with two
        packets. The second packet would contain the transmit timestamp
        corresponding to the first packet. However, such a protocol would
        enable a traffic amplification attack, or it would use packets with an
        asymmetric length, which would cause an asymmetry in the network delay
        and an error in the measured offset.<a href="#section-1-8" class="pilcrow">¶</a></p>
<p id="section-1-9">This document describes an interleaved client/server, interleaved
        symmetric, and interleaved broadcast mode. In these modes, the server
        sends a packet which contains a transmit timestamp corresponding to the
        transmission of the previous packet that was sent to the client or
        peer. This transmit timestamp can be captured in any software or
        hardware component involved in the transmission of the packet. Both
        servers and clients/peers are required to keep
        some state specific to the interleaved mode.<a href="#section-1-9" class="pilcrow">¶</a></p>
<p id="section-1-10">An NTPv4 implementation that
        supports the client/server and broadcast interleaved modes
        interoperates with NTPv4 implementations without this capability. A
        peer using the symmetric interleaved mode does not fully interoperate
        with a peer which does not support it. The mode needs to be configured
        specifically for each symmetric association.<a href="#section-1-10" class="pilcrow">¶</a></p>
<p id="section-1-11">The interleaved modes do not change the NTP packet header format and
        do not use new extension fields. The negotiation is implicit. The
        protocol is extended with new values that can be assigned to the origin
        and transmit timestamp. Servers and peers check the origin timestamp to
        detect requests conforming to the
        interleaved mode. A response can be valid only in one mode. If a client
        or peer that does not support interleaved mode received a response
        conforming to the interleaved mode, it would be rejected as bogus.<a href="#section-1-11" class="pilcrow">¶</a></p>
<p id="section-1-12">An explicit negotiation would require a new extension field. RFC 5905
        does not specify how servers should handle requests with an unknown
        extension field. The original use of extension fields was
        authentication with <span><a href="#RFC5906" class="xref">Autokey</a> [<a href="#RFC5906" class="xref">RFC5906</a>]</span>, which cannot
        be negotiated. Some existing implementations do not respond to requests
        with unknown extension fields. This behavior would prevent clients from
        reliably detecting support for the interleaved mode.<a href="#section-1-12" class="pilcrow">¶</a></p>
<p id="section-1-13">Requests and responses cannot always be formed in interleaved mode.
        It cannot be used exclusively. Servers, clients, and peers that support
        the interleaved mode need to support also the basic mode.<a href="#section-1-13" class="pilcrow">¶</a></p>
<p id="section-1-14">This document assumes familiarity with RFC 5905.<a href="#section-1-14" class="pilcrow">¶</a></p>
<section id="section-1.1">
        <h3 id="name-requirements-language">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
          NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
          "MAY", and "OPTIONAL" in this document are to be interpreted as
          described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>
          <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when, they appear in all
          capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2">
      <h2 id="name-interleaved-client-server-m">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-interleaved-client-server-m" class="section-name selfRef">Interleaved Client/server mode</a>
      </h2>
<p id="section-2-1">The interleaved client/server mode is similar to the basic client/
        server mode. The difference between the two modes is in the values
        saved to the origin and transmit timestamp fields.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">The origin timestamp is a cookie which is used to detect that a
        received packet is a response to the last packet sent in the other
        direction of the association. It is a copy of one of the timestamps
        from the packet to which it is responding, or zero if it is not a
        response. Servers following RFC 5905 ignore the origin timestamp in
        client requests. A server response which does not have a matching
        origin timestamp is called bogus.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">A client request in the basic mode has an origin timestamp equal to
        the transmit timestamp from the last valid server response, or is zero
        (which indicates the first request of the association). A server
        response in the basic mode has an origin timestamp equal to the
        transmit timestamp from the client request. The transmit timestamp in
        the response corresponds to the transmission of the response in which
        the timestamp is contained.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">A client request in the interleaved mode has an origin timestamp equal
        to the receive timestamp from the last valid server response. A server
        response in the interleaved mode has an origin timestamp equal to the
        receive timestamp from the client request. The transmit timestamp in
        the response corresponds to the transmission of the previous response
        which had the receive timestamp equal to the origin timestamp from the
        request.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">A server which supports the interleaved mode needs to save pairs of
        local receive and transmit timestamps. The server SHOULD discard old
        timestamps to limit the amount of memory needed to support clients
        using the interleaved mode. The server MAY separate the timestamps by
        IP addresses, but it SHOULD NOT separate them by port numbers to
        support clients that change their port between requests, as recommended
        in <span><a href="#RFC9109" class="xref">RFC 9109</a> [<a href="#RFC9109" class="xref">RFC9109</a>]</span>.<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">The server MAY restrict the interleaved mode to specific IP addresses
        and/or authenticated clients.<a href="#section-2-6" class="pilcrow">¶</a></p>
<p id="section-2-7">Both servers and clients that support the interleaved mode MUST NOT
        send a packet that has a transmit timestamp equal to the receive
        timestamp in order to reliably detect whether received packets conform
        to the interleaved mode. One way to ensure that is to increment the
        transmit timestamp by 1 unit (i.e. about 1/4 of a nanosecond) if the
        two timestamps are equal, or a new timestamp can be generated.<a href="#section-2-7" class="pilcrow">¶</a></p>
<p id="section-2-8">The transmit and receive timestamps in server responses need to be
        unique to prevent two different clients from sending requests with the
        same origin timestamp and the server responding in the interleaved mode
        with an incorrect transmit timestamp. If the timestamps are not
        guaranteed to be monotonically increasing, the server SHOULD check that
        the transmit and receive timestamps are not already saved as a receive
        timestamp of a previous request (from the same IP address if the server
        separates timestamps by addresses), and generate a new timestamp if
        necessary.<a href="#section-2-8" class="pilcrow">¶</a></p>
<p id="section-2-9">When the server receives a request from a client, it SHOULD respond
        in the interleaved mode if the following conditions are met:<a href="#section-2-9" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2-10">
<li id="section-2-10.1">The request does not have a receive timestamp equal to the transmit
            timestamp.<a href="#section-2-10.1" class="pilcrow">¶</a>
</li>
        <li id="section-2-10.2">The origin timestamp from the request matches the local receive
            timestamp of a previous request that the server has saved (for the
            IP address if it separates timestamps by addresses).<a href="#section-2-10.2" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-2-11">A response in the interleaved mode MUST contain the transmit timestamp
        of the response which contained the receive timestamp matching the
        origin timestamp from the request. The server SHOULD drop the timestamps
        after sending the response. The receive timestamp MUST NOT be used
        again to detect a request conforming to the interleaved mode.<a href="#section-2-11" class="pilcrow">¶</a></p>
<p id="section-2-12">If the conditions are not met (i.e. the request is not detected to
        conform to the interleaved mode), the server MUST NOT respond in the
        interleaved mode. The server MAY always respond in the basic mode. In
        any case, the server SHOULD save the new receive and transmit
        timestamps.<a href="#section-2-12" class="pilcrow">¶</a></p>
<p id="section-2-13">The first request from a client is always in the basic mode and so is
        the server response. It has a zero origin timestamp and zero receive
        timestamp. Only when the client receives a valid response from the
        server, it will be able to send a request in the interleaved mode.<a href="#section-2-13" class="pilcrow">¶</a></p>
<p id="section-2-14">The protocol recovers from packet loss. When a client request or
        server response is lost, the client will use the same origin timestamp
        in the next request. The server can respond in the interleaved mode if
        it still has the timestamps corresponding to the origin timestamp. If
        the server already responded to the timestamp in the interleaved mode,
        or it had to drop the timestamps for other reasons, it
        will respond in the basic mode and save new timestamps, which will
        enable an interleaved response to the subsequent request. The client
        SHOULD limit the number of requests in the interleaved mode between
        server responses to prevent processing of very old timestamps in case a
        large number of consecutive requests is lost.<a href="#section-2-14" class="pilcrow">¶</a></p>
<p id="section-2-15">An example of packets in a client/server exchange using the
        interleaved mode is shown in Figure <a href="#client-server-exchange" class="xref">1</a>. The packets in the basic and
        interleaved mode are indicated with B and I respectively. The
        timestamps t1~, t3~ and t11~ point to the same transmissions as t1, t3
        and t11, but they may be less accurate. The first exchange is in the
        basic mode followed by a second exchange in the interleaved mode. For
        the third exchange, the client request is in the interleaved mode, but
        the server response is in the basic mode, because the server did not
        have the pair of timestamps t6 and t7 (e.g. they were dropped to save
        timestamps for other clients using the interleaved mode).<a href="#section-2-15" class="pilcrow">¶</a></p>
<span id="name-packet-timestamps-in-interl"></span><div id="client-server-exchange">
<figure id="figure-1">
        <div class="alignLeft art-text artwork" id="section-2-16.1">
<pre>
Server   t2   t3               t6   t7              t10  t11
    -----+----+----------------+----+----------------+----+-----
        /      \              /      \              /      \
Client /        \            /        \            /        \
    --+----------+----------+----------+----------+----------+--
      t1         t4         t5         t8         t9        t12

Mode: B         B           I         I           I         B
    +----+    +----+      +----+    +----+      +----+    +----+
Org | 0  |    | t1~|      | t2 |    | t4 |      | t6 |    | t5 |
Rx  | 0  |    | t2 |      | t4 |    | t6 |      | t8 |    |t10 |
Tx  | t1~|    | t3~|      | t1 |    | t3 |      | t5 |    |t11~|
    +----+    +----+      +----+    +----+      +----+    +----+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-packet-timestamps-in-interl" class="selfRef">Packet timestamps in interleaved client/server mode</a>
        </figcaption></figure>
</div>
<p id="section-2-17">When the client receives a response from the server, it performs the
        tests described in RFC 5905. Two of the tests are modified for the
        interleaved mode:<a href="#section-2-17" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2-18">
<li id="section-2-18.1">The check for duplicate packets SHOULD compare both receive and
            transmit timestamps in order to not drop a valid response in the
            interleaved mode if it follows a response in the basic mode and
            they contain the same transmit timestamp.<a href="#section-2-18.1" class="pilcrow">¶</a>
</li>
        <li id="section-2-18.2">The check for bogus packets SHOULD compare the origin timestamp
            with both transmit and receive timestamps from the request. If the
            origin timestamp is equal to the transmit timestamp, the response
            is in the basic mode. If the origin timestamp is equal to the
            receive timestamp, the response is in the interleaved mode.<a href="#section-2-18.2" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-2-19">The client SHOULD NOT update its NTP state when an invalid response is
        received, to not lose the timestamps which will be needed to complete a
        measurement when the subsequent response in the interleaved mode is
        received.<a href="#section-2-19" class="pilcrow">¶</a></p>
<p id="section-2-20">If the packet passed the tests and conforms to the interleaved mode,
        the client can compute the offset and delay using the formulas from RFC
        5905 and one of two different sets of timestamps. The first set is
        RECOMMENDED for clients that filter measurements based on the delay.
        The corresponding timestamps from Figure <a href="#client-server-exchange" class="xref">1</a> are written in
        parentheses.<a href="#section-2-20" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2-21.1">T1 - local transmit timestamp of the previous request (t1)<a href="#section-2-21.1" class="pilcrow">¶</a>
</li>
        <li class="normal ulEmpty" id="section-2-21.2">T2 - remote receive timestamp from the previous response (t2)<a href="#section-2-21.2" class="pilcrow">¶</a>
</li>
        <li class="normal ulEmpty" id="section-2-21.3">T3 - remote transmit timestamp from the latest response (t3)<a href="#section-2-21.3" class="pilcrow">¶</a>
</li>
        <li class="normal ulEmpty" id="section-2-21.4">T4 - local receive timestamp of the previous response (t4)<a href="#section-2-21.4" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-2-22">The second set gives a more accurate measurement of the current
        offset, but the delay is much more sensitive to a frequency error
        between the server and client due to a much longer interval between T1
        and T4.<a href="#section-2-22" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-2-23.1">T1 - local transmit timestamp of the latest request (t5)<a href="#section-2-23.1" class="pilcrow">¶</a>
</li>
        <li class="normal ulEmpty" id="section-2-23.2">T2 - remote receive timestamp from the latest response (t6)<a href="#section-2-23.2" class="pilcrow">¶</a>
</li>
        <li class="normal ulEmpty" id="section-2-23.3">T3 - remote transmit timestamp from the latest response (t3)<a href="#section-2-23.3" class="pilcrow">¶</a>
</li>
        <li class="normal ulEmpty" id="section-2-23.4">T4 - local receive timestamp of the previous response (t4)<a href="#section-2-23.4" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-2-24">Clients MAY filter measurements based on the mode. The maximum number
        of dropped measurements in the basic mode SHOULD be limited in case the
        server does not support or is not able to respond in the interleaved
        mode. Clients that filter measurements based on the delay will
        implicitly prefer measurements in the interleaved mode over the basic
        mode, because they have a shorter delay due to a more accurate transmit
        timestamp (T3).<a href="#section-2-24" class="pilcrow">¶</a></p>
<p id="section-2-25">The server MAY limit saving of the receive and transmit timestamps to
        requests which have an origin timestamp specific to the interleaved
        mode in order to not waste resources on clients using the basic mode.
        Such an optimization will delay the first interleaved response of the
        server to a client by one exchange.<a href="#section-2-25" class="pilcrow">¶</a></p>
<p id="section-2-26">A check for a non-zero origin timestamp works with SNTP clients that
        always set the timestamp to zero and clients that implement <span><a href="#I-D.ietf-ntp-data-minimization" class="xref">NTP data minimization</a> [<a href="#I-D.ietf-ntp-data-minimization" class="xref">I-D.ietf-ntp-data-minimization</a>]</span>.
        From the server's point of view, such clients start a new association
        with each request.<a href="#section-2-26" class="pilcrow">¶</a></p>
<p id="section-2-27">To avoid searching the saved receive timestamps for non-zero origin
        timestamps from requests conforming to the basic mode, the server can
        encode in low-order bits of the receive and transmit timestamps below
        precision of the clock a flag indicating whether the timestamp is a
        receive timestamp. If the server receives a request with a non-zero
        origin timestamp which does not indicate it is a receive timestamp of
        the server, the request does not conform to the interleaved mode and
        it is not necessary to perform the search and/or
        save the new receive and transmit timestamp.<a href="#section-2-27" class="pilcrow">¶</a></p>
</section>
<section id="section-3">
      <h2 id="name-interleaved-symmetric-mode">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-interleaved-symmetric-mode" class="section-name selfRef">Interleaved Symmetric mode</a>
      </h2>
<p id="section-3-1">The interleaved symmetric mode uses the same principles as the
        interleaved client/server mode. A packet in the interleaved symmetric
        mode has a transmit timestamp which corresponds to the transmission of
        the previous packet sent to the peer and an origin timestamp equal to
        the receive timestamp from the last packet received from the peer.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">To enable synchronization in both directions of a symmetric
        association, both peers need to support the interleaved mode. For this
        reason, it SHOULD be disabled by default and enabled with an option in
        the configuration of the active side of the association.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">In order to prevent the peer from matching the transmit timestamp with
        an incorrect packet when the peers' transmissions do not alternate
        (e.g. they use different polling intervals) and a previous packet was
        lost, the use of the interleaved mode in symmetric associations
        requires additional restrictions.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">Peers which have an association need to count valid packets received
        between their transmissions to determine in which mode a packet should
        be formed. A valid packet in this context is a packet which passed all
        NTP tests for duplicate, replayed, bogus, and unauthenticated packets.
        Other received packets may update the NTP state to allow the
        (re)initialization of the association, but they do not change the
        selection of the mode.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">A peer A SHOULD send a peer B a packet in the interleaved mode only
        when all of the following conditions are met:<a href="#section-3-5" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3-6">
<li id="section-3-6.1">The peer A has an active association with the peer B which was
            specified with the option enabling the interleaved mode, OR the peer
            A received at least one valid packet in the interleaved mode from
            the peer B.<a href="#section-3-6.1" class="pilcrow">¶</a>
</li>
        <li id="section-3-6.2">The peer A did not send a packet to the peer B since it received
            the last valid packet from the peer B.<a href="#section-3-6.2" class="pilcrow">¶</a>
</li>
        <li id="section-3-6.3">The previous packet that the peer A sent to the peer B was the
            only response to a packet received from the peer B.<a href="#section-3-6.3" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-3-7">The first condition is needed for compatibility with implementations
        that do not support or are not configured for the interleaved mode. The
        other conditions prevent a missing response from causing a mismatch
        between the remote transmit (T2) and local receive timestamp (T3),
        which would cause a large error in the measured offset and delay.<a href="#section-3-7" class="pilcrow">¶</a></p>
<p id="section-3-8">An example of packets exchanged in a symmetric association is shown in
        Figure <a href="#peer-exchange" class="xref">2</a>. The
        minimum polling interval of the peer A is twice as long as the maximum
        polling interval of the peer B. The first packets sent by the peers are
        in the basic mode. The second and third packet sent by the peer A is in
        the interleaved mode. The second packet sent by the peer B is in the
        interleaved mode, but the following packets sent by the peer B are in
        the basic mode, because multiple responses are sent per request.<a href="#section-3-8" class="pilcrow">¶</a></p>
<span id="name-packet-timestamps-in-interle"></span><div id="peer-exchange">
<figure id="figure-2">
        <div class="alignLeft art-text artwork" id="section-3-9.1">
<pre>
Peer A   t2 t3       t6          t8 t9      t12         t14 t15
    -----+--+--------+-----------+--+--------+-----------+--+-----
        /    \      /           /    \      /           /    \
Peer B /      \    /           /      \    /           /      \
    --+--------+--+-----------+--------+--+-----------+--------+--
      t1       t4 t5          t7      t10 t11        t13      t16

Mode: B      B      I         B      I      B         B      I
    +----+ +----+ +----+    +----+ +----+ +----+    +----+ +----+
Org | 0  | | t1~| | t2 |    | t3~| | t4 | | t3 |    | t3 | |t10 |
Rx  | 0  | | t2 | | t4 |    | t4 | | t8 | |t10 |    |t10 | |t14 |
Tx  | t1~| | t3~| | t1 |    | t7~| | t3 | |t11~|    |t13~| | t9 |
    +----+ +----+ +----+    +----+ +----+ +----+    +----+ +----+
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-packet-timestamps-in-interle" class="selfRef">Packet timestamps in interleaved symmetric mode</a>
        </figcaption></figure>
</div>
<p id="section-3-10">If the peer A has no association with the peer B and it responds with
        symmetric passive packets, it does not need to count the packets in
        order to meet the restrictions, because each request has at most one
        response. The peer SHOULD process the requests in the same way as a
        server which supports the interleaved client/server mode. It MUST NOT
        respond in the interleaved mode if the request was not in the
        interleaved mode.<a href="#section-3-10" class="pilcrow">¶</a></p>
<p id="section-3-11">The peers SHOULD compute the offset and delay using one of the two sets
        of timestamps specified in the client/server section. They MAY switch
        between them to minimize the interval between T1 and T4 in order to
        reduce the error in the measured delay.<a href="#section-3-11" class="pilcrow">¶</a></p>
</section>
<section id="section-4">
      <h2 id="name-interleaved-broadcast-mode">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-interleaved-broadcast-mode" class="section-name selfRef">Interleaved Broadcast mode</a>
      </h2>
<p id="section-4-1">A packet in the interleaved broadcast mode contains two transmit
        timestamps. One corresponds to the packet itself and is saved in the
        transmit timestamp field. The other corresponds to the previous packet
        and is saved in the origin timestamp field. The packet is compatible
        with the basic mode, which uses a zero origin timestamp.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">An example of packets sent in the broadcast mode is shown in
        Figure <a href="#broadcast-transmissions" class="xref">3</a>.<a href="#section-4-2" class="pilcrow">¶</a></p>
<span id="name-packet-timestamps-in-interlea"></span><div id="broadcast-transmissions">
<figure id="figure-3">
        <div class="alignLeft art-text artwork" id="section-4-3.1">
<pre>
Server         t1           t3           t5           t7
         ------+------------+------------+------------+---------
                \            \            \            \
Client           \            \            \            \
         ---------+------------+------------+------------+------
                  t2           t4           t6           t8

Mode:           B            I            I            I
              +----+       +----+       +----+       +----+
Org           | 0  |       | t1 |       | t3 |       | t5 |
Rx            | 0  |       | 0  |       | 0  |       | 0  |
Tx            | t1~|       | t3~|       | t5~|       | t7~|
              +----+       +----+       +----+       +----+
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-packet-timestamps-in-interlea" class="selfRef">Packet timestamps in interleaved broadcast mode</a>
        </figcaption></figure>
</div>
<p id="section-4-4">A client which does not support the interleaved mode ignores the
        origin timestamp and processes all packets as if they were in the basic
        mode.<a href="#section-4-4" class="pilcrow">¶</a></p>
<p id="section-4-5">A client which supports the interleaved mode SHOULD check if the
        origin timestamp is not zero to detect packets in the interleaved mode.
        The client SHOULD also compare the origin timestamp with the transmit
        timestamp from the previous packet to detect lost packets. If the
        difference is larger than a specified maximum (e.g. 1 second), the
        packet SHOULD NOT be used for synchronization in the interleaved
        mode.<a href="#section-4-5" class="pilcrow">¶</a></p>
<p id="section-4-6">The client SHOULD compute the offset using the origin timestamp from
        the received packet and the local receive timestamp of the previous
        packet. If the client needs to measure the network delay, it SHOULD use
        the interleaved client/server mode.<a href="#section-4-6" class="pilcrow">¶</a></p>
</section>
<section id="section-5">
      <h2 id="name-protocol-failures">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-protocol-failures" class="section-name selfRef">Protocol Failures</a>
      </h2>
<p id="section-5-1">An incorrect client implementation of the basic mode (RFC 5905) can
        work reliably with servers that implement only the basic mode, but the
        protocol can fail intermittently with servers that implement the
        interleaved mode.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">If the client sets the origin timestamp to other values than the
        transmit timestamp from the last valid server response, or zero, the
        origin timestamp can match a receive timestamp of a previous server
        response (possibly to a different client), causing an unexpected
        interleaved response. The client is expected to drop the response as
        bogus. If it did not check for bogus packets, it would be vulnerable to
        off-path attacks.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">If the client set the origin timestamp to a constant non-zero value,
        this mismatch would be expected to happen once per the NTP era (about
        136 years) if the NTP server was responding at the maximum rate needed
        to go through all timestamp values (about 2 billion responses per
        second). With lower rates of requests the chance of hitting a server
        timestamp decreases proportionally.<a href="#section-5-3" class="pilcrow">¶</a></p>
<p id="section-5-4">The worst case of this failure would be a client that specifically sets
        the origin timestamp to the server's receive timestamp, i.e. the client
        accidentally implemented the interleaved mode, but it does not accept
        interleaved responses. This client would still be able to synchronize
        its clock. It would drop interleaved responses as bogus and set the
        origin timestamp to the receive timestamp from the last valid response
        in the basic mode. As servers are required to not respond twice to the
        same origin timestamp in the interleaved mode, at least every other
        response would be in the basic mode and accepted by the client.<a href="#section-5-4" class="pilcrow">¶</a></p>
<p id="section-5-5">Intermittent protocol failures can be caused also by an incorrect
        server implementation of the interleaved mode. A server which does not
        ensure the receive and transmit timestamps in its responses are unique
        in a sufficiently long interval can misinterpret requests formed
        correctly in the basic mode as interleaved and respond in the
        interleaved mode. The response would be dropped by the client as
        bogus.<a href="#section-5-5" class="pilcrow">¶</a></p>
<p id="section-5-6">A duplicated server receive timestamp can cause an expected
        interleaved response to contain a transmit timestamp which does not
        correspond to the transmission of the previous response from which the
        client copied the receive timestamp to the origin timestamp in the
        request, but a different response which contained the same receive
        timestamp. The response would be accepted by the client with a small
        error in the transmit timestamp equal to the difference between the
        transmit timestamps of the two different responses. As the two requests
        to which the responses responded were received at the same time
        (according to the server's clock), the two transmissions would be
        expected to be close to each other and the difference between them
        would be comparable to the error a basic response normally has in its
        transmit timestamp.<a href="#section-5-6" class="pilcrow">¶</a></p>
<p id="section-5-7">One reason for a duplicated server timestamp can be a large backward
        step of the server's clock. If the timestamps the server has saved do
        not fully cover the second pass of the clock over the repeated
        interval, two requests received in different passes of the clock can
        get the same receive timestamp. The client which made the first request
        can get the transmit timestamp corresponding to the transmission of the
        second response. From the server's point of view, the error of the
        transmit timestamp would be still small, but from the client's point of
        view the server already failed when it made the step as it was serving
        wrong time before or after the step with a much larger error than the
        error caused by the protocol failure.<a href="#section-5-7" class="pilcrow">¶</a></p>
</section>
<div id="Security">
<section id="section-6">
      <h2 id="name-security-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-6-1">The security considerations of time protocols in general are discussed
        in <span><a href="#RFC7384" class="xref">RFC 7384</a> [<a href="#RFC7384" class="xref">RFC7384</a>]</span>, and specifically the
        security considerations of NTP are discussed in RFC 5905.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">Security issues that apply to the basic modes apply also to the
        interleaved modes. They are described in <span><a href="#SECNTP" class="xref">The Security of NTP's Datagram Protocol</a> [<a href="#SECNTP" class="xref">SECNTP</a>]</span>.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">Clients and peers SHOULD NOT leak the receive timestamp in packets
        sent to other peers or clients (e.g. as a reference timestamp) to
        prevent off-path attackers from easily getting the origin timestamp
        needed to make a valid response in the interleaved mode.<a href="#section-6-3" class="pilcrow">¶</a></p>
<p id="section-6-4">Clients using the interleaved mode SHOULD randomize all bits of both
        receive and transmit timestamps, as recommended for the transmit
        timestamp in the <span><a href="#I-D.ietf-ntp-data-minimization" class="xref">NTP
          client data minimization</a> [<a href="#I-D.ietf-ntp-data-minimization" class="xref">I-D.ietf-ntp-data-minimization</a>]</span>, to make it more difficult for
        off-path attackers to guess the origin timestamp in the server
        response.<a href="#section-6-4" class="pilcrow">¶</a></p>
<p id="section-6-5">The client data minimization cannot be fully implemented in the
        interleaved mode. The origin timestamp cannot be zeroed out, which
        makes the clients more vulnerable to tracking as they move between
        networks.<a href="#section-6-5" class="pilcrow">¶</a></p>
<p id="section-6-6">Attackers can force the server to drop its timestamps in order to
        prevent clients from getting an interleaved response. They can send a
        large number of requests, send requests with a spoofed source address,
        or replay an authenticated request if the interleaved mode is enabled
        only for authenticated clients. Clients SHOULD NOT rely on servers to
        be able to respond in the interleaved mode.<a href="#section-6-6" class="pilcrow">¶</a></p>
<p id="section-6-7">Protecting symmetric associations in the interleaved mode against
        replay attacks is even more difficult than in the basic mode.
        In both modes, the NTP state needs to be protected between the
        reception of the last non-replayed response and transmission of the
        next request in order for the request to contain the origin timestamp
        expected by the peer. The difference is in the timestamps needed to
        complete a measurement. In the basic mode only one valid response is
        needed at a time and it is used as soon as it is received, but the
        interleaved mode needs two consecutive valid responses. The NTP state
        needs to be protected all the time to not lose the timestamps which
        are needed to complete the measurement when the second response is
        received.<a href="#section-6-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="IANA">
<section id="section-7">
      <h2 id="name-iana-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-7-1">This memo includes no request to IANA.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Acknowledgements">
<section id="section-8">
      <h2 id="name-acknowledgements">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-8-1">The interleaved modes described in this document are based on the
        implementation written by David Mills in the <a href="http://www.ntp.org">NTP project</a>. The specification of
        the broadcast mode is based purely on this implementation. The
        specification of the symmetric mode has some modifications. The
        client/server mode is specified as a new mode compatible with the
        symmetric mode, similarly to the basic symmetric and client/server
        modes.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">The authors would like to thank Theresa Enghardt, Daniel Franke,
        Benjamin Kaduk, Erik Kline, Tal Mizrahi, Steven Sommars, Harlan Stenn,
        and Kristof Teichel for their useful comments.<a href="#section-8-2" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-9">
      <h2 id="name-references">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-9.1">
        <h3 id="name-normative-references">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-ntp-data-minimization">[I-D.ietf-ntp-data-minimization]</dt>
        <dd>
<span class="refAuthor">Franke, D. F.</span> and <span class="refAuthor">A. Malhotra</span>, <span class="refTitle">"NTP Client Data Minimization"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-ntp-data-minimization-04</span>, <time datetime="2019-03-25" class="refDate">25 March 2019</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-ntp-data-minimization-04.txt">https://www.ietf.org/archive/id/draft-ietf-ntp-data-minimization-04.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5905">[RFC5905]</dt>
        <dd>
<span class="refAuthor">Mills, D.</span>, <span class="refAuthor">Martin, J., Ed.</span>, <span class="refAuthor">Burbank, J.</span>, and <span class="refAuthor">W. Kasch</span>, <span class="refTitle">"Network Time Protocol Version 4: Protocol and Algorithms Specification"</span>, <span class="seriesInfo">RFC 5905</span>, <span class="seriesInfo">DOI 10.17487/RFC5905</span>, <time datetime="2010-06" class="refDate">June 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5905">https://www.rfc-editor.org/info/rfc5905</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-9.2">
        <h3 id="name-informative-references">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC5906">[RFC5906]</dt>
        <dd>
<span class="refAuthor">Haberman, B., Ed.</span> and <span class="refAuthor">D. Mills</span>, <span class="refTitle">"Network Time Protocol Version 4: Autokey Specification"</span>, <span class="seriesInfo">RFC 5906</span>, <span class="seriesInfo">DOI 10.17487/RFC5906</span>, <time datetime="2010-06" class="refDate">June 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5906">https://www.rfc-editor.org/info/rfc5906</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7384">[RFC7384]</dt>
        <dd>
<span class="refAuthor">Mizrahi, T.</span>, <span class="refTitle">"Security Requirements of Time Protocols in Packet Switched Networks"</span>, <span class="seriesInfo">RFC 7384</span>, <span class="seriesInfo">DOI 10.17487/RFC7384</span>, <time datetime="2014-10" class="refDate">October 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7384">https://www.rfc-editor.org/info/rfc7384</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9109">[RFC9109]</dt>
        <dd>
<span class="refAuthor">Gont, F.</span>, <span class="refAuthor">Gont, G.</span>, and <span class="refAuthor">M. Lichvar</span>, <span class="refTitle">"Network Time Protocol Version 4: Port Randomization"</span>, <span class="seriesInfo">RFC 9109</span>, <span class="seriesInfo">DOI 10.17487/RFC9109</span>, <time datetime="2021-08" class="refDate">August 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9109">https://www.rfc-editor.org/info/rfc9109</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SECNTP">[SECNTP]</dt>
      <dd>
<span class="refAuthor">Malhotra, A.</span>, <span class="refAuthor">Gundy, M. V.</span>, <span class="refAuthor">Varia, M.</span>, <span class="refAuthor">Kennedy, H.</span>, <span class="refAuthor">Gardner, J.</span>, and <span class="refAuthor">S. Goldberg</span>, <span class="refTitle">"The Security of NTP's Datagram Protocol"</span>, <time datetime="2016" class="refDate">2016</time>, <span>&lt;<a href="http://eprint.iacr.org/2016/1006">http://eprint.iacr.org/2016/1006</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Miroslav Lichvar</span></div>
<div dir="auto" class="left"><span class="org">Red Hat</span></div>
<div dir="auto" class="left"><span class="street-address">Purkynova 115</span></div>
<div dir="auto" class="left">
<span class="postal-code">612 00</span> <span class="locality">Brno</span>
</div>
<div dir="auto" class="left"><span class="country-name">Czech Republic</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mlichvar@redhat.com" class="email">mlichvar@redhat.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Aanchal Malhotra</span></div>
<div dir="auto" class="left"><span class="org">Boston University</span></div>
<div dir="auto" class="left"><span class="street-address">111 Cummington St</span></div>
<div dir="auto" class="left">
<span class="locality">Boston</span>,  <span class="postal-code">02215</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:aanchal4@bu.edu" class="email">aanchal4@bu.edu</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
