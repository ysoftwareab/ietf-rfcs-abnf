





Internet Engineering Task Force                                SIMPLE WG
Internet Draft                                              J. Rosenberg
                                                             dynamicsoft
                                                               D. Willis
                                                             dynamicsoft
                                                               R. Sparks
                                                             dynamicsoft
                                                             B. Campbell
                                                             dynamicsoft
                                                          H. Schulzrinne
                                                             Columbia U.
                                                               J. Lennox
                                                             Columbia U.
                                                              C. Huitema
                                                               Microsoft
                                                                B. Aboba
                                                               Microsoft
                                                                D. Gurle
                                                               Microsoft
draft-ietf-simple-winfo-format-01.txt
March 1, 2002
Expires: September 2002


              An XML Based Format for Watcher Information

STATUS OF THIS MEMO

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress".

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   To view the list Internet-Draft Shadow Directories, see
   http://www.ietf.org/shadow.html.





J. Rosenberg et. al.                                          [Page 1]

Internet Draft                Watcher Info                 March 1, 2002


Abstract

   Watchers are defined as entities that request (i.e., subscribe to)
   information about a resource. There is fairly complex state
   associated with these subscriptions. The union of the state for all
   subscriptions to a particular resource is called the watcher
   information for that resource. This state is dynamic, changing as
   subscribers come and go. As a result, it is possible, and indeed
   useful, to subscribe to the watcher information for a particular
   resource. In order to enable this, a format is needed to describe the
   state of watchers on a resource. This specification describes an XML
   document format for such state.







































J. Rosenberg et. al.                                          [Page 2]

Internet Draft                Watcher Info                 March 1, 2002




                           Table of Contents



   1          Introduction ........................................    4
   2          Structure of Watcher Information ....................    4
   3          Document Identifiers ................................    6
   4          Example .............................................    6
   5          XML DTD .............................................    7
   6          Security Considerations .............................    8
   7          IANA Considerations .................................    8
   8          Authors Addresses ...................................    8
   9          Normative References ................................    9
   10         Informative References ..............................    9


































J. Rosenberg et. al.                                          [Page 3]

Internet Draft                Watcher Info                 March 1, 2002


1 Introduction

   Watchers are defined as entities that request (i.e., subscribe to)
   information about a resource, using the SIP Events framework [1].
   There is fairly complex state associated with these subscriptions.
   This state includes the identity of the subscriber, the state of the
   subscription, and so on. The union of the state for all subscriptions
   to a particular resource is called the watcher information for that
   resource. This state is dynamic, changing as subscribers come and go.
   As a result, it is possible, and indeed useful, to subscribe to the
   watcher information for a particular resource. An important
   application of this is the ability of a user to find out the set of
   subscribers to their presentity [4]. This would allow the user to
   provide an authorization decision for the subscription.

   To support subscriptions to watcher information, two components are
   needed. The first is the definition of a SIP Events package for
   watcher information. The other is the definition of a data format to
   represent watcher information. The former is specified in [2], and
   the latter is specified here.

2 Structure of Watcher Information

   Watcher information is an XML document that begins with the root
   element tag "watcherinfo". It consists of any number of "resource"
   sub-elements, describing all the resources being watched.


   <!ELEMENT watcherinfo (resource*)>



   Each resource element has an attribute giving the URI for the
   resource, and an attribute for indicating the event package for which
   watcher information on that resource is being provided. The resource
   element contains sub-elements representing a list of the watchers for
   this resource.


   <!ELEMENT resource (watcher*)>
   <!ATTLIST resource uri        CDATA  #REQUIRED>
                      package    CDATA  #REQUIRED>



   The watcher element describes a user watching the enclosing resource.





J. Rosenberg et. al.                                          [Page 4]

Internet Draft                Watcher Info                 March 1, 2002


   <!ELEMENT watcher CDATA>
   <!ATTLIST watcher    uri              CDATA                     #REQUIRED
                        status (pending|active|waiting|terminated) #REQUIRED
                        event (subscribe|approved|deactivated|probation
                               |rejected|timeout|giveup|noresource)#REQUIRED
                        duration CDATA                             #IMPLIED
                        expiration CDATA                           #IMPLIED
                        first-subscribed CDATA                     #IMPLIED




   The mandatory attributes of the watcher element are:

        uri: The identity of the watcher, expressed as a URI.

        status: The status of the subscription. The meaning of the
             various statuses are defined in the watcher information
             event package [2].

        event: The event which caused the transition to the current
             status. The events are defined in the watcher information
             event package [2].

   There are also two optional, informative attributes of the watcher
   element. These are:

        duration: The amount of time, in seconds, that the subscription
             was in the previous state before transitioning to the state
             described in the status parameter.

        expiration: The amount of time, in seconds from the current
             time, that the subscription will expire.

        first-subscribed: The date and time, expressed as an integral
             number of seconds since January 1, 1970, 00:00 UTC, when
             the SUBSCRIBE which created the subscription was received.
             This value remains unchanged as the subscription is
             refreshed.

   The information contained within the watcher tag is a textual
   representation of the name of the subscriber. It is optional.

   The number of watchers present for each presentity, and the set of
   presentities listed, depends on the type of data being provided, and
   to whom.

   In one application, a user, A, subscribes to the presence of another



J. Rosenberg et. al.                                          [Page 5]

Internet Draft                Watcher Info                 March 1, 2002


   user, B. A would like to find out about the status of their
   subscription. To do so, A subscribes to the watcher information for
   B's presence. A does not have authorization to learn the status of
   all watchers for B's presence. As a result, the watcher information
   sent to A will contain only one watcher - A themself.

   In another application, a user B, wishes to learn the set of people
   who have subscribed to B's presence. To do this, B subscribes to the
   watcher information for B's presence. Here, B is authorized to see
   all the watchers of B's presence. As a result, the watcher
   information sent to B will contain all watchers of B's presence.

   In the case where an administrator wishes to learn the current status
   in the system, the watcher information could contain all watchers for
   all resources.

3 Document Identifiers

   A watcher information document which appears as a top-level XML
   document is identified with the formal public identifier "-
   //IETF//DTD RFCxxxx XWATCHER 1.0//EN". When this document is
   published as an RFC, "xxxx" will be replaced by the RFC number.
   Watcher lists have the MIME type "application/watcherinfo+xml".


        The "+xml" component of the type name conforms with the
        format of XML MIME types introduced by Murata et al [3]

   A watcher list embedded as a fragment within another XML document is
   identified with the XML namespace identifier
   "http://www.ietf.org/internet-drafts/draft-ietf-simple-winfo-format-
   00.txt".  If this document is published as an RFC, the namespace
   identifier will be "http://www.rfc-editor.org/rfc/rfcxxxx.txt", where
   xxxx is the RFC number.


        Note that the URIs specifying XML namespaces are only
        globally unique names; they do not have to reference any
        particular actual object.  The URI of a canonical source of
        this specification meets the requirement of being globally
        unique, and is also useful to document the format.

4 Example

   The following is an example of watcher information for a presentity,
   who is a professor. There are two watchers, one from a university,
   and another from an organization.




J. Rosenberg et. al.                                          [Page 6]

Internet Draft                Watcher Info                 March 1, 2002


   <?xml version="1.0"?>
   <!DOCTYPE watcherinfo
      PUBLIC "-//IETF//DTD RFCxxxx XWATCHER 1.0//EN" "watcher.dtd">

   <watcherinfo>
     <resource uri="sip:professor@university.edu" package="presence">
       <watcher uri="sip:subcriber@university.edu" status="active"
                   event="approved" first-subscribed="958525312" />
       <watcher uri="sip:subcriber@organization.org" status="pending"
                   event="subscribe">Mr. Subscriber</watcher>
     </resource>
   </watcherinfo>



5 XML DTD


   <?xml version="1.0" encoding="US-ASCII" ?>

   <!--
       Draft DTD for Watcher info.
   -->

   <!-- Watcherinfo element: document root -->

   <!ELEMENT watcherinfo (resource*)>

   <!-- Resource element: describes one resource being watched -->

   <!ELEMENT resource (watcher*)>
   <!ATTLIST resource uri        CDATA  #REQUIRED>
                      package    CDATA  #REQUIRED>

   <!-- Watcher element: describes one entity watching -->

   <!ELEMENT watcher    CDATA>
   <!ATTLIST watcher    uri              CDATA                     #REQUIRED
                        status (pending|active|waiting|terminated) #REQUIRED
                        event (subscribe|approved|deactivated|probation
                             |rejected|timeout|giveup|noresource)  #REQUIRED
                        duration CDATA                             #IMPLIED
                        expiration CDATA                           #IMPLIED
                        first-subscribed CDATA                     #IMPLIED







J. Rosenberg et. al.                                          [Page 7]

Internet Draft                Watcher Info                 March 1, 2002


6 Security Considerations

   Watcher information is sensitive information. The protocol used to
   distribute it SHOULD ensure privacy, message integrity and
   authentication. Furthermore, the protcol should provide access
   controls which restrict who can see who elses watcher information.

7 IANA Considerations

   There are no IANA considerations associated with this specification.

8 Authors Addresses


   Jonathan Rosenberg
   dynamicsoft
   72 Eagle Rock Avenue
   East Hanover, NJ 07936
   email: jdrosen@dynamicsoft.com

   Dean Willis
   dynamicsoft
   5100 Tennyson Parkway, Suite 1200
   Plano, Texas 75024
   email: dwillis@dynamicsoft.com

   Robert Sparks
   dynamicsoft
   5100 Tennyson Parkway, Suite 1200
   Plano, Texas 75024
   email: rsparks@dynamicsoft.com

   Ben Campbell
   dynamicsoft
   5100 Tennyson Parkway, Suite 1200
   Plano, Texas 75024
   email: bcampbell@dynamicsoft.com

   Henning Schulzrinne
   Columbia University
   M/S 0401
   1214 Amsterdam Ave.
   New York, NY 10027-7003
   email: schulzrinne@cs.columbia.edu

   Jonathan Lennox
   Columbia University
   M/S 0401



J. Rosenberg et. al.                                          [Page 8]

Internet Draft                Watcher Info                 March 1, 2002


   1214 Amsterdam Ave.
   New York, NY 10027-7003
   email: lennox@cs.columbia.edu

   Christian Huitema
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA 98052-6399
   email: huitema@microsoft.com

   Bernard Aboba
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA 98052-6399
   email: bernarda@microsoft.com

   David Gurle
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA 98052-6399
   email: dgurle@microsoft.com



9 Normative References

   [1] A. Roach et al.  , "SIP-specific event notification," Internet
   Draft, Internet Engineering Task Force, Feb. 2002.  Work in progress.

   [2] J. Rosenberg, "A SIP event sub-package for watcher information,"
   Internet Draft, Internet Engineering Task Force, July 2001.  Work in
   progress.

   [3] M. Murata, S. S. Laurent, and D. Kohn, "XML media types," Request
   for Comments 3023, Internet Engineering Task Force, Jan. 2001.

10 Informative References

   [4] M. Day, J. Rosenberg, and H. Sugano, "A model for presence and
   instant messaging," Request for Comments 2778, Internet Engineering
   Task Force, Feb.  2000.


   Full Copyright Statement

   Copyright (c) The Internet Society (2002). All Rights Reserved.

   This document and translations of it may be copied and furnished to



J. Rosenberg et. al.                                          [Page 9]

Internet Draft                Watcher Info                 March 1, 2002


   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.





























J. Rosenberg et. al.                                         [Page 10]



