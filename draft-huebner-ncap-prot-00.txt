

NetIQ Common Agent Protocol                                  Roger Huebner
Internet-Draft                                                 NetIQ Corp.
Expires: August 16, 2004                                 February 16, 2004


                    The NetIQ Common Agent Protocol 
                       draft-huebner-ncap-prot-00

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 16, 2004.

Abstract

	This document outlines the protocol used by the NetIQ Common
	Agent as part of its NetIQ Common Agent Protocol (NCAP).  This binary
	protocol is used over standard TCP sockets and provides both 
	real-time event delivery and common RPC services to the NetIQ
	Common Agent Framework.  These messages may be encrypted via SSL 
	based on the handshake received during intial negotiation.  
	Messages consist primarily of a standardized header and a 
	variable-length body.

	Both message header and content are stored in sender-native form,
	pursuant to a reader-makes-right data flow.




NCAP                      Expires August 16, 2004                 [Page 1]

Internet-Draft       The NetIQ Common Agent Protocol        February 2004

I.  Introduction

	The NetIQ Common Agent Protocol (NCAP) describes the format
	and order of messages used in communication between the client and 
	server components in a NetIQ Common n-tiered system.

	Based on the results of handshaking, these messages may be sent
	in "clear text" mode (unencrypted) or encrypted via SSL.  Once
	a session has established a standard mode of transport encryption,
	it stays constant for the lifetime of the session.

	Once connection has been made and handshake mode successfully
	completed, authentication may or may not take place, based on
	user configuration and environmental requirements.

	Established connections may then send and receive RPC requests/
	responses.  Asynchronous system update messages and live event
	data may also be delivered to the client based on notification 
	subscriptions.


II. State Description and Transitions

	Every connection will exist in one of the following states:

	a) "UNINITIALIZED" (client only) - in this state, the client has
	created a connection object, yet has not performed any operations
	to initiate a server conversation.  Transitions to "HANDSHAKING"

	b) "HANDSHAKING" - in this state, the connection object is
	negotiating session information, such as peer-endianness,
	transport encryption/authentication required, etc.  Transitions
	to "CONNECTED" or "INVALIDATED".

	c) "CONNECTED" - in this state, a valid session exists that has
	satisfied both peers and wherein normal VIS-level requests and
	responses may take place.  

	d) "INVALIDATED" - in this state, either the local or remote
	peer has decided that this connection no longer may be used due
	to the failure to negotiate a mutually-agreed upon standard,
	the failure to establish trustworthiness of the peer, or 
	the client could not provide adequate credentials.


NCAP                      Expires August 16, 2004                 [Page 2]

Internet-Draft       The NetIQ Common Agent Protocol        February 2004

III. Message Overview

	Messages are structured collections of data with a well-defined
	grammar used to communicate such concepts as: authentication,
	provider requests, provider responses and event notifications.

	Certain messages only occur under specific circumstances.  For
	example, SSL negotiations will only happen during the "HANDSHAKING"
	phase; NCAP messages may happen in either "HANDSHAKING" or
	"CONNECTED" modes.

IV. NCAP Messages

	Messages used by the VIS Protocol are of the following generic
	format.

	[header]
	[message-specific payload]

	The header contains information such as the endian of the message,
	information regarding which process/thread sent the message,
	request order ID, message category and type, etc.  The endian of 
	the message will be the same as that of the sender.  Fields will 
	be converted to the local endian by the receiving process 
	("reader-makes-right").  The endian specifier in the header
	is a single byte and obviously unaffected by this.

	The payload immediately follows the header and contains flattened
	data specific to the type of request or reply specified in the
	header.  This data is flattened via the standard VIS flattening/
	unflattening methods.  The payload, as with the header, is
	flattened in the sender's endian.  VIS takes the endian issues
	into account when unflattening this data.



NCAP                      Expires August 16, 2004                 [Page 3]

Internet-Draft       The NetIQ Common Agent Protocol        February 2004


Author's Address

	Roger Huebner
	NetIQ Corp.
	Park Towers North
	1233 West Loop South, Ste 1800
	Houston, TX 77027
	USA

	Phone: (713) 418-5407
	EMail: Roger.Huebner@netiq.com


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.

   The IETF has been notified of intellectual property rights claimed in
   regard to some or all of the specification contained in this
   document. For more information consult the online list of claimed
   rights.

NCAP                      Expires August 16, 2004                 [Page 4]

Internet-Draft       The NetIQ Common Agent Protocol        February 2004


Full Copyright Statement

   Copyright (C) The Internet Society (2004). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.


   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.






































NCAP                      Expires August 16, 2004                 [Page 5]


