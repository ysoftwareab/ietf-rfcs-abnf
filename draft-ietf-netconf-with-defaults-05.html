<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>With-defaults capability for NETCONF</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="With-defaults capability for NETCONF">
<meta name="keywords" content="with-defaults, XML">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">NETCONF</td><td class="header">A. Bierman</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">InterWorking Labs</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">B. Lengyel</td></tr>
<tr><td class="header">Expires: September 6, 2010</td><td class="header">Ericsson</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">March 05, 2010</td></tr>
</table></td></tr></table>
<h1><br />With-defaults capability for NETCONF<br />draft-ietf-netconf-with-defaults-05</h1>

<h3>Abstract</h3>

<p>
    The NETCONF protocol defines ways to read configuration data
    from a NETCONF server. Part of this data is not set by the NETCONF client, 
    but rather a default value is used. In many situations the 
    NETCONF client has a priori knowledge about default data, so the NETCONF 
    server does not need to send it to the client. In other situations the 
    NETCONF client will need this data as part of the NETCONF &lt;rpc-reply> messages. 
    This document defines a capability-based extension to 
    the NETCONF protocol that allows the NETCONF client to control whether 
    default values are part of NETCONF &lt;rpc-reply> messages or &lt;copy-config> output to the target URL.
   
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 6, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Terminology<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#basicHandling">1.2.</a>&nbsp;
Current handling of default data<br />
<a href="#anchor3">2.</a>&nbsp;
With-defaults Capability<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.2.</a>&nbsp;
Dependencies<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.3.</a>&nbsp;
Conformance<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#capabilityIdChapter">2.4.</a>&nbsp;
Capability Identifier<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.5.</a>&nbsp;
New Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">2.6.</a>&nbsp;
Modifications to Existing Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">2.7.</a>&nbsp;
Interactions with Other Capabilities<br />
<a href="#anchor10">3.</a>&nbsp;
YANG Module<br />
<a href="#IANA">4.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">5.</a>&nbsp;
Security Considerations<br />
<a href="#anchor11">6.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">7.</a>&nbsp;
Normative References<br />
<a href="#anchor13">Appendix&nbsp;A.</a>&nbsp;
Open Issues<br />
<a href="#anchor14">Appendix&nbsp;B.</a>&nbsp;
Change Log<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">B.1.</a>&nbsp;
-00<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">B.2.</a>&nbsp;
00-01<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">B.3.</a>&nbsp;
01-02<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">B.4.</a>&nbsp;
02-03<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">B.5.</a>&nbsp;
03-04<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">B.6.</a>&nbsp;
04-05<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
    The NETCONF protocol <a class='info' href='#RFC4741'>[RFC4741]<span> (</span><span class='info'>Enns, R., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a> defines ways to read configuration data
    from a NETCONF server. Part of this data is not set by the NETCONF client, 
    but rather a default value is used. In many situations the 
    NETCONF client has a priori knowledge about default data, so the NETCONF 
    server does not need to send it to the client. A priori knowledge can be 
    e.g., a document formally describing the data models supported by the NETCONF server. 
    <br />
<br />

    A networking device may have a large number of default values. 
    Often the default values are not interesting or specifically defined 
    with a "reasonable" value, so that the management user does not have to handle them.
    For these reasons it is quite common for networking devices to
    suppress the output of parameters having the default value.
    <br />
<br />

    However there are use-cases when a NETCONF client 
    will need the default data from the node:
    <br />
<br />

    </p>
<ul class="text">
<li>The management application often needs a single, definitive and complete set of configuration 
      values that determine how the a networking device works.
</li>
<li>Documentation about default values can be  unreliable or unavailable.
</li>
<li>Some management applications might not have the capabilities to 
      correctly parse and interpret formal data models.
</li>
<li>Human users might want to understand the received 
      data without consultation of the documentation.
</li>
</ul><p>
    <br />
<br />

    In all these cases the NETCONF client will need default data as part of the NETCONF &lt;rpc-reply> messages. 
    <br />
<br />

    This document defines a capability-based extension to 
    the NETCONF protocol that allows the NETCONF client to control whether 
    default data is part of NETCONF &lt;rpc-reply> messages.
   
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Terminology</h3>

<p>
     The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
     "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
     and "OPTIONAL" in this document are to be interpreted as
     described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
    
</p>
<p>
     </p>
<blockquote class="text"><dl>
<dt>Data model schema:</dt>
<dd>
       A document or set of documents describing the 
       data models supported by the NETCONF server.
      
</dd>
<dt>Management Application:</dt>
<dd>
        A computer program running outside the NETCONF server  
        that configures or supervises the NETCONF server. 
        A management application can reach the device e.g. via the NETCONF, CLI or SNMP.
      
</dd>
<dt>Default data:</dt>
<dd>
        Data specified in the data model schema as default, 
        that is set or used by the device whenever the NETCONF client or 
        other management application/user does not provide a specific 
        value for the relevant data item.             
        Default data MAY or MAY NOT be stored as part of a configuration datastore.
      
</dd>
<dt>Explicitly set data:</dt>
<dd>
        Data that is set to any value by a NETCONF client or 
        other management application by the way of an actual management operation,
        including any data model schema default value.
        Any value set by the NETCONF server which is not the schema defined default value
        is also considered explicitly set data.
       
</dd>
</dl></blockquote><p>      
    
</p>
<p>
     In addition the following terms are defined in RFC 4741 and are not redefined here:
     </p>
<ul class="text">
<li>client
</li>
<li>operation
</li>
<li>RPC
</li>
<li>RPC request
</li>
<li>RPC response
</li>
<li>server
</li>
</ul><p>
    
</p>
<a name="basicHandling"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Current handling of default data</h3>

<p>
     NETCONF does not define whether default data is part of the
     datastore/data model, or if it is meta-data that influences the
     behavior of the NETCONF server, but is not actually part of
     the datastore.  This document is intended to support either
     type of implementation, without deciding which approach is better.      
     <br />
<br />

     As a consequence of this approach,  
     NETCONF servers that do not implement the :with-defaults capability may or may not 
     return default data. 
     <br />
<br />

     Different NETCONF servers report default data in different ways. This 
     document specifies the following three basic modes:
     <br />
<br />

     </p>
<blockquote class="text"><dl>
<dt>report-all:</dt>
<dd>
        All default data is always reported.
      
</dd>
<dt>trim:</dt>
<dd>
        Values are not reported if they match the default value (as
        specified in the data model schema).
      
</dd>
<dt>explicit:</dt>
<dd>
        Report only values that match the definition of explicitly set data.
      
</dd>
</dl></blockquote><p>  
    
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
With-defaults Capability</h3>

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Overview</h3>

<p>
    The :with-defaults capability indicates that the NETCONF server makes it possible 
    for the NETCONF client to control whether default data is part of NETCONF 
    &lt;rpc-reply> messages. The capability affects both 
    configuration and state data (while acknowledging that the usage of default 
    values for state data is less prevalent). 
    Sending of default data is controlled for each individual operation separately. 
    <br />
<br />

    A NETCONF server implementing the :with-defaults capability MUST indicate 
    its basic behavior, whether it sends default data in 
    the absence of any specific request from the NETCONF client; and MUST support the 
    'report-all' handling mode and MAY support other modes.  
    <br />
<br />

    A server indicating 'explicit' either in the basic or the also-supported parameter 
    MUST be able to differentiate between normal default data and explicitly set data.
   
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Dependencies</h3>

<p>None
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Conformance</h3>

<p>Every NETCONF server SHOULD implement this capability.
</p>
<a name="capabilityIdChapter"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Capability Identifier</h3>

<p>
     urn:ietf:params:netconf:capability:with-defaults:1.0
     <br />
<br />

     The identifier MUST have a parameter: "basic-mode". This indicates how 
     the server reports default data in &lt;rpc-reply> messages, in the case the 
     client does not specify the required behavior in the &lt;rpc> request.
     The allowed values of this parameter are 
     report-all, trim, explicit as listed in <a class='info' href='#basicHandling'>Section&nbsp;1.2<span> (</span><span class='info'>Current handling of default data</span><span>)</span></a>. 
    
</p>
<p>
     The identifier MAY have another parameter: "also-supported". This parameter 
     indicates which additional default handling modes the server supports. 
     The value of the parameter is a comma separated list of one or two modes 
     that are supported beside the mode indicated in the basic parameter.
     Possible modes are taken from the list in <a class='info' href='#basicHandling'>Section&nbsp;1.2<span> (</span><span class='info'>Current handling of default data</span><span>)</span></a>.
    
</p>
<p>
      In addition to these parameters, the identifier MUST have the YANG 'module' 
      and 'revision' parameters if the ietf-with-defaults YANG module is supported,
      as defined in section 5.6.4 of <a class='info' href='#I-D.ietf-netmod-yang'>[I&#8209;D.ietf&#8209;netmod&#8209;yang]<span> (</span><span class='info'>Bjorklund, M., &ldquo;YANG - A data modeling language for NETCONF,&rdquo; April&nbsp;2010.</span><span>)</span></a>.
    
</p>
<p>Example:
     <br />
<br />

     urn:ietf:params:netconf:capability:with-defaults:1.0?module=ietf-netconf-with-defaults&amp;revision=2010-03-05&amp;basic-mode=report-all    
     <br />
<br />

     urn:ietf:params:netconf:capability:with-defaults:1.0?module=ietf-netconf-with-defaults&amp;revision=2010-03-05&amp;basic-mode=report-all&amp;also-supported=trim,explicit    
    
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.5"></a><h3>2.5.&nbsp;
New Operations</h3>

<p>None
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.6"></a><h3>2.6.&nbsp;
Modifications to Existing Operations</h3>

<p>
     A new &lt;with-defaults> XML <a class='info' href='#W3C.REC-xml-20001006'>[W3C.REC&#8209;xml&#8209;20001006]<span> (</span><span class='info'>Sperberg-McQueen, C., Maler, E., Paoli, J., and T. Bray, &ldquo;Extensible Markup Language (XML) 1.0 (Second Edition),&rdquo; October&nbsp;2000.</span><span>)</span></a> 
     child element is added to the method-name element. 
     This is the element that indicates the type of the 
      operation e.g. &lt;get>, &lt;get-config> or &lt;copy-config>.
      If the  &lt;with-defaults> element is present, it controls the 
      reporting of default data. The server MUST return 
      default data in the NETCONF &lt;rpc-reply> messages according to the value of the element.
     
</p>
<p>
      Allowed values of the with-defaults element are taken from 
      the list in <a class='info' href='#basicHandling'>Section&nbsp;1.2<span> (</span><span class='info'>Current handling of default data</span><span>)</span></a>. The allowed values are 
      restricted to the values that the device indicates 
      support for in the with-defaults capability in the basic and also-supported parameters.   
     
</p>
<p>
      If an unsupported value is used, the NETCONF server SHALL 
      return an &lt;rpc-reply> with an &lt;rpc-error> element. 
      The &lt;error-tag> SHALL be 'operation-not-supported', and
      the &lt;error-app-tag> SHALL be 'with-defaults-mode-not-supported'.
     
</p>
<p>
      If the &lt;with-defaults> element is not present, 
      the server follows its basic behavior as indicated 
      by the capability identifier's parameter see <a class='info' href='#capabilityIdChapter'>Section&nbsp;2.4<span> (</span><span class='info'>Capability Identifier</span><span>)</span></a>.
     
</p>
<p>    
     Affected operations:
     </p>
<ul class="text">
<li>&lt;get>
</li>
<li>&lt;get-config>
</li>
<li>&lt;copy-config>
</li>
</ul><p>
     <br />
<br />

     &lt;copy-config> is only affected if the target of the operation is a URL. 
     If the target is a NETCONF datastore (running, candidate or startup) the capability has no effect; 
     the with-defaults parameter, if present, SHALL be silently ignored.
     <br />
<br />

     Other operations that return configuration data SHOULD also handle default 
     data according to the rules set in this document, and explicitly state this in their documentation. 
     If this is not specified in the document defining the respective operation, 
     the default handling rules described herein do not affect these operations.
    
</p>
<p>
     The following example shows a &lt;get-config&gt; operation
     which is using the 'with-defaults' element.
     The client is retrieving the 'interfaces' object,
     defined in the example.com data model.
     (In this simple example, the 'name' field is defined
     as the key, and the 'mtu' field is the only other
     data in the &lt;interface&gt; element).
     The default value of mtu is  '1500'. The basic default handling for the server is "trim".
     As the 'with-defaults'
     element has the value 'report-all', the mtu is returned not just for eth0 but also for eth1.
    
</p>
<p>
     <br /><hr class="insert" />
<a name="with_defaults_example"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    &lt;rpc message-id="102"
         xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
      &lt;get-config&gt;
        &lt;source&gt;
           &lt;running/&gt;
        &lt;/source&gt;
        &lt;filter type="subtree"&gt;
          &lt;interfaces xmlns="http://example.com/interfaces/1.2"/&gt;
        &lt;/filter&gt;
        &lt;with-defaults
          xmlns="urn:ietf:params:netconf:capability:with-defaults:1.0"&gt;
          report-all
        &lt;/with-defaults&gt;
      &lt;/get-config&gt;
    &lt;/rpc&gt;

    &lt;rpc-reply message-id="102"
         xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
      &lt;data&gt;
        &lt;interfaces xmlns="http://example.com/interfaces/1.2"&gt;
          &lt;interface&gt;
            &lt;name&gt;eth0&lt;/name&gt;
            &lt;mtu&gt;8192&lt;/mtu&gt;
          &lt;/interface&gt;
          &lt;interface&gt;
            &lt;name&gt;eth1&lt;/name&gt;
            &lt;mtu&gt;1500&lt;/mtu&gt;
          &lt;/interface&gt;
        &lt;/interfaces&gt;
      &lt;/data&gt;
    &lt;/rpc-reply&gt;

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

    
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.7"></a><h3>2.7.&nbsp;
Interactions with Other Capabilities</h3>

<p>None
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
YANG Module</h3>

<p>
     The following YANG module defines the addition of the with-defaults element 
     to the &lt;get>,  &lt;get-config> and &lt;copy-config> operations. 
     The YANG language is defined in <a class='info' href='#I-D.ietf-netmod-yang'>[I&#8209;D.ietf&#8209;netmod&#8209;yang]<span> (</span><span class='info'>Bjorklund, M., &ldquo;YANG - A data modeling language for NETCONF,&rdquo; April&nbsp;2010.</span><span>)</span></a>.
     The above operations are defined in YANG in <a class='info' href='#I-D.ietf-netconf-4741bis'>[I&#8209;D.ietf&#8209;netconf&#8209;4741bis]<span> (</span><span class='info'>Enns, R., Bjorklund, M., Schoenwaelder, J., and A. Bierman, &ldquo;Network Configuration Protocol (NETCONF),&rdquo; February&nbsp;2010.</span><span>)</span></a>.
     Every NETCONF server SHOULD implement this YANG module.
   
</p>
<p>
-- RFC Ed.: Insert license information for code as appropriate
   
</p>
<p>
    </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;CODE BEGINS&gt; file="ietf-netconf-with-defaults.yang"

module ietf-netconf-with-defaults {

   namespace "urn:ietf:params:netconf:capability:with-defaults:1.0";

   prefix nwd;

   import ietf-netconf { prefix nc; }

   organization
    "IETF NETCONF (Network Configuration Protocol) Working Group";

   contact
    "WG Web:   &lt;http://tools.ietf.org/wg/netconf/&gt;
     WG List:  &lt;mailto:netconf@ietf.org&gt;

     WG Chair: Bert Wijnen
               &lt;mailto:bertietf@bwijnen.net&gt;

     WG Chair: Mehmet Ersue
               &lt;mailto:mehmet.ersue@nsn.com&gt;

     Editor: Andy Bierman
             &lt;mailto:andyb@iwl.com&gt;

     Editor: Balazs Lengyel
             &lt;mailto:balazs.lengyel@ericsson.com&gt;";

   description
    "This module defines a capability-based extension to the
     NETCONF protocol that allows the NETCONF client to control
     whether default values are part of NETCONF
     &lt;rpc-reply&gt; messages or &lt;copy-config&gt; output to the target URL.


     Copyright (c) 2010 IETF Trust and the persons identified as
     the document authors.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject
     to the license terms contained in, the Simplified BSD License
     set forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (http://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX; see
     the RFC itself for full legal notices.";
   // RFC Ed.: replace XXXX with actual RFC number and remove this note

   // RFC Ed.: remove this note
   // Note: extracted from draft-ietf-netmod-with-defaults-05.txt

   revision 2010-03-05 {
     description
       "Initial version.";
     reference
      "RFC XXXX: With-defaults capability for NETCONF";
   }
   // RFC Ed.: replace XXXX with actual RFC number and remove this note

   typedef with-defaults-mode {
      description
        "Possible modes to report default data in
         rpc-reply messages.";
      type enumeration {
         enum report-all {
             description
               "All default data is always reported.";
         }
         enum trim {
             description
               "Values are not reported if they match the default.";
         }
         enum explicit {
             description
               "Report values that match the definition of
                explicitly set data.";
         }
     }
   }

   grouping with-defaults-parameters {
     leaf with-defaults {
       description
         "The explicit defaults processing mode requested.";
       type with-defaults-mode;
     }
   }

   // extending the get-config operation
   augment /nc:get-config/nc:input {
       uses with-defaults-parameters;
   }

   // extending the get operation
   augment /nc:get/nc:input {
       uses with-defaults-parameters;
   }

   // extending the copy-config operation
   augment /nc:copy-config/nc:input {
       uses with-defaults-parameters;
   }

}

&lt;CODE ENDS&gt;
</pre></div><p>

    <br />
<br />

   
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
IANA Considerations</h3>

<p>This document registers one capability identifier URN from the 
    'Network Configuration Protocol <a class='info' href='#RFC4741'>[RFC4741]<span> (</span><span class='info'>Enns, R., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a> Capability URNs' registry, 
    and registers the same URN for the NETCONF XML namespace in 
    the "IETF XML registry" <a class='info' href='#RFC3688'>[RFC3688]<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a>. 
    Note that the capability URN is compliant to <a class='info' href='#RFC4741'>[RFC4741]<span> (</span><span class='info'>Enns, R., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a> section 10.3.
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="20%"><col align="left">
<tr><th align="left">Index</th><th align="left">Capability Identifier</th></tr>
<tr>
<td align="left">:with-defaults</td>
<td align="left">urn:ietf:params:netconf:capability:with-defaults:1.0</td>
</tr>
</table>
<br clear="all" />

<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>
    This document defines a minor extension to existing
    NETCONF protocol operations. It does not introduce
    any new or increased security risks into the management system.
   
</p>
<p>
    The 'with-defaults' capability
    gives client control over the retrieval of particular
    types of XML data from a configuration database.
    They only suppress data that can already be retrieved
    with the standard protocol operations, and do not
    add any data to the configuration database.
   
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Acknowledgements</h3>

<p>Thanks to Martin Bjorklund, Sharon Chisholm, Phil Shafer, Juergen Schoenwaelder, Washam Fan and 
    many other members of the NETCONF WG for providing important input to this document.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3688">[RFC3688]</a></td>
<td class="author-text">Mealling, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3688">The IETF XML Registry</a>,&rdquo; BCP&nbsp;81, RFC&nbsp;3688, January&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3688.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4741">[RFC4741]</a></td>
<td class="author-text">Enns, R., &ldquo;<a href="http://tools.ietf.org/html/rfc4741">NETCONF Configuration Protocol</a>,&rdquo; RFC&nbsp;4741, December&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4741.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-netconf-4741bis">[I-D.ietf-netconf-4741bis]</a></td>
<td class="author-text">Enns, R., Bjorklund, M., Schoenwaelder, J., and A. Bierman, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-netconf-4741bis-02.txt">Network Configuration Protocol (NETCONF)</a>,&rdquo; draft-ietf-netconf-4741bis-02 (work in progress), February&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-netconf-4741bis-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-netmod-yang">[I-D.ietf-netmod-yang]</a></td>
<td class="author-text">Bjorklund, M., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-netmod-yang-12.txt">YANG - A data modeling language for NETCONF</a>,&rdquo; draft-ietf-netmod-yang-12 (work in progress), April&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-netmod-yang-12.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-xml-20001006">[W3C.REC-xml-20001006]</a></td>
<td class="author-text">Sperberg-McQueen, C., Maler, E., Paoli, J., and T. Bray, &ldquo;<a href="http://www.w3.org/TR/2000/REC-xml-20001006">Extensible Markup Language (XML) 1.0 (Second Edition)</a>,&rdquo; World Wide Web Consortium FirstEdition&nbsp;REC-xml-20001006, October&nbsp;2000 (<a href="http://www.w3.org/TR/2000/REC-xml-20001006">HTML</a>).</td></tr>
</table>

<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Open Issues</h3>

<p>
      This section will be removed.  The open issues are closed in this
      revision of the draft, pending working group approval.
    
</p>
<p>
     Is the definition of defaults OK?  
     [The definition of explicitly set default data has been changed
      to 'explicitly set data', and now aligns with the YANG definition.]
    
</p>
<p>Shall we wait for YANG and 4741bis and make the YANG normative? [Yes.]
</p>
<p>Shall we make with-defaults mandatory?
      [No. It is SHOULD, not MUST.]
   
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Change Log</h3>

<p>
      -- RFC Ed.: remove this section before publication.
    
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.1"></a><h3>B.1.&nbsp;
-00</h3>

<p>Created from draft-bierman-netconf-with-defaults-01.txt
</p>
<p>
        It was decided by the NETCONF mailing list, that with-defaults should be a 
        sub-element of each affected operation. 
        While this violates the XSD of RFC4741 this is acceptable and follows 
        the ideas behind NETCONF and YANG.
        <br />
<br />

        Hopefully it will be clarified in the 4741bis RFC whether such extensions are allowed.
      
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.2"></a><h3>B.2.&nbsp;
00-01</h3>

<p>Changed value set of with-default capability and element
</p>
<p>Added version to URI
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.3"></a><h3>B.3.&nbsp;
01-02</h3>

<p>report-all made mandatory
</p>
<p>Placeholder for YAM added, XSD will be removed when 4741 provides the NETCONF YAM
</p>
<p>with-defaults is valid for state data as well 
        (if state data has a defined default which might not be so frequent).
        The definition of explicit was modified for state data.
      
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.4"></a><h3>B.4.&nbsp;
02-03</h3>

<p>Clarifications
</p>
<p>YAM added
</p>
<p>Use the same URN for the capability and the XML namespace to 
        accommodate YANG, and avoid two separate URN/URIs being advertised 
        in the HELLO message, for such a small function.
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.5"></a><h3>B.5.&nbsp;
03-04</h3>

<p>Clarifications
</p>
<p>Added non-netconf interfaces to the definition of explicitly set default data
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.6"></a><h3>B.6.&nbsp;
04-05</h3>

<p>Updated I-D and YANG module boiler-plate.
</p>
<p>Removed redundant 'with-defaults' YANG feature.
</p>
<p>Changed definition of 'explicit' mode to match the YANG definition
</p>
<p>Removed XSD because the YANG is normative and the XSD is unconstrained,
        and does not properly extend the 3 affected NETCONF operations.
      
</p>
<p>Made the YANG module a normative section instead of non-normative appendix.
</p>
<p>Changed YANG from an informative to a normative reference,
</p>
<p>Changed 4741bis from an informative to a normative reference because the YANG
         module imports the ietf-netconf module in order to augment some RPC operations.
</p>
<p>Updated capability requirements to include YANG module capability parameters.
</p>
<p>Added a description statement to the with-defaults leaf definition.
</p>
<p>Update open issues section; ready to close all open issues.
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andy Bierman</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">InterWorking Labs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">303 Potrero Street, Suite 52</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Santa Cruz, CA  95060-2760</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 831 460 7010</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:andyb@iwl.com">andyb@iwl.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Balazs Lengyel</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ericsson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Budapest,   </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hungary</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:balazs.lengyel@ericsson.com">balazs.lengyel@ericsson.com</a></td></tr>
</table>
</body></html>
