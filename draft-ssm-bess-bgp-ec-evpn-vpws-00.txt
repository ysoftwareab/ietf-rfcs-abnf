



BESS                                                         R. Srikanth
Internet-Draft                                            R. Satishkumar
Intended status: Standards Track                              M. Perumal
Expires: September 8, 2019                                      Ericsson
                                                           March 7, 2019


   BGP Extended Community for Virtual Private Wire Service Support in
                              Ethernet VPN
                  draft-ssm-bess-bgp-ec-evpn-vpws-00

Abstract

   This document describes an optional BGP extended community for use in
   Ethernet VPN (EVPN) Virtual Private Wire Service (VPWS).  It helps in
   avoiding the situation where the EVPN VPWS instance is declared 'up'
   on one side but remains 'down' on the other side.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on September 8, 2019.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of




Srikanth, et al.        Expires September 8, 2019               [Page 1]

Internet-Draft      draft-ssm-bess-bgp-ec-evpn-vpws-00         March 2019


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   2
   3.  Problem Description . . . . . . . . . . . . . . . . . . . . .   3
   4.  Remote VPWS Instance Identifier Extended Community  . . . . .   3
   5.  Usage of the Extended Community . . . . . . . . . . . . . . .   4
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   4
   7.  IANA Considerationss  . . . . . . . . . . . . . . . . . . . .   5
   8.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   5
   9.  Normative References  . . . . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Introduction

   In EVPN, a VPWS service instance is identified by a pair of per-EVI
   Ethernet A-D routes as described in [RFC8214].  Each Provider Edge
   (PE) node that wants to instantiate a VPWS service instance encodes
   the VPWS service instance identifier in the 32-bit Ethernet Tag ID
   field of the per-EVI Ethernet A-D route.

   The pair of PEs instantiating a VPWS service instance will each
   advertise a per-EVI Ethernet A-D route with its VPWS service instance
   identifier.  Each PE is also configured with the other PE's VPWS
   service instance identifier.  When each PE receives the other PE's
   per-EVI Ethernet A-D route with the VPWS service instance identifier
   of the other PE configured on each PE, the VPWS service instance is
   instantiated.

   However, if the VPWS service identifiers are misconfigured on either
   of the PEs, it can result in a situation where the EVPN VPWS service
   instance is declared 'up' on one PE but remains 'down' on the other
   PE.

   This document describes an optional BGP extended community for use in
   VPWS that can be used to avoid the above situation.

2.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.




Srikanth, et al.        Expires September 8, 2019               [Page 2]

Internet-Draft      draft-ssm-bess-bgp-ec-evpn-vpws-00         March 2019


   o  EVPN: Ethernet VPN.

   o  PE: Provider Edge Node.

   o  VPWS: Virtual Private Wire Service defined in [RFC8214].

   o  LSI: Local VPWS service instance identifier.

   o  RSI: Remote VPWS service instance identifier.

   o  EC: Extended Community.

3.  Problem Description

   Consider a case where PE1 and PE2 wants to instantiate a EVPN VPWS
   service instance with the following configurations:

   o  PE1 is configured with Local VPWS service instance identifier
      (LSI) as 100 and Remote VPWS service instance identifier (RSI) as
      200.

   o  PE2 is configured with LSI as 300 and RSI as 100.

   With this setup:

   o  PE1 will receive the per-EVI Ethernet A-D route from PE2 with
      Ethernet Tag ID as 300.

   o  PE2 will receive the per-EVI Ethernet A-D route from PE1 with
      Ethernet Tag ID as 100.

   Though it is a misconfiguration, the EVPN VPWS service instance on
   PE2 will come up and PE2 will start forwarding traffic towards PE1.
   However, the EVPN VPWS service instance on PE1 will remain down.
   This may be undesirable (for example, it can resulting in wastage of
   network bandwidth).

4.  Remote VPWS Instance Identifier Extended Community

   This document defines a new transitive extended community [RFC4360]
   to be included with per-EVI Ethernet A-D routes.  This attribute is
   optional and can be used to avoid the situation described in
   Section 3.








Srikanth, et al.        Expires September 8, 2019               [Page 3]

Internet-Draft      draft-ssm-bess-bgp-ec-evpn-vpws-00         March 2019


              +-------------------------------------------+
              |  Type (0x06) / Sub-type (TBD)  (2 octets) |
              +-------------------------------------------+
              |  Remote Service ID  (4 octets)            |
              |                                           |
              +-------------------------------------------+


       Figure 1: EVPN VPWS Extended Community for remote service ID.

   Remote Service ID: This field MUST be set to the VPWS service
   instance identifier value of the remote PE (RSI).  The VPWS service
   instance identifier value MAY be set to a 24-bit value, and when a
   24-bit value is used, it MUST be right-aligned.

5.  Usage of the Extended Community

   Consider the following setup:

                   +------------+       +------------+
                   |   PE1      |       |   PE2      |
                   | (LSI: 100) |-------| (LSI: 200) |
                   | (RSI: 200) |       | (RSI: 100) |
                   +------------+       +------------+

                 Figure 2: Network Topology for EVPN-VPWS

   EVPN-VPWS as described in [RFC8214] only exchange LSI value along
   with local label.  In this case PE1 will send a per-EVI Ethernet A-D
   route with LSI 100 and PE2 will send a per-EVI Ethernet A-D route
   with LSI 200.

   With the extended community described in this document, PE1 sends the
   per-EVI Ethernet A-D route with LSI 100 and RSI 200 and PE2 sends the
   per-EVI Ethernet A-D route with LSI 200 and RSI 100.

   PE1 upon receiving the per-EVI Ethernet A-D route will bring up the
   EVPN VPWS service instance only if the LSI and RSI received in the
   route matches the LSI and RSI configured on PE1.  Otherwise, PE1
   keeps the EVPN VPWS service instance as down.

6.  Security Considerations

   The security considerations described in RFC8214 apply to this
   document.






Srikanth, et al.        Expires September 8, 2019               [Page 4]

Internet-Draft      draft-ssm-bess-bgp-ec-evpn-vpws-00         March 2019


7.  IANA Considerationss

   This document requests IANA to assign a new EVPN Extended Community
   of Type 0x06 and Sub-Type TBD:

      Sub-Type Value  Name                              Reference
      ---------------------------------------------------------------
      TBD             Remote VPWS Instance Identifier   This document


8.  Acknowledgments

   Thanks to Chundu Kotesh Babu and Jiang He for comments and
   suggestions.

9.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC4360]  Sangli, S., Tappan, D., and Y. Rekhter, "BGP Extended
              Communities Attribute", RFC 4360, DOI 10.17487/RFC4360,
              February 2006, <https://www.rfc-editor.org/info/rfc4360>.

   [RFC7432]  Sajassi, A., Ed., Aggarwal, R., Bitar, N., Isaac, A.,
              Uttaro, J., Drake, J., and W. Henderickx, "BGP MPLS-Based
              Ethernet VPN", RFC 7432, DOI 10.17487/RFC7432, February
              2015, <https://www.rfc-editor.org/info/rfc7432>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8214]  Boutros, S., Sajassi, A., Salam, S., Drake, J., and J.
              Rabadan, "Virtual Private Wire Service Support in Ethernet
              VPN", RFC 8214, DOI 10.17487/RFC8214, August 2017,
              <https://www.rfc-editor.org/info/rfc8214>.

Authors' Addresses

   Srikanth Ramaswamy
   Ericsson
   Bangalore
   India

   Email: srikanth@ericsson.com



Srikanth, et al.        Expires September 8, 2019               [Page 5]

Internet-Draft      draft-ssm-bess-bgp-ec-evpn-vpws-00         March 2019


   Satishkumar Rodd
   Ericsson
   Bangalore
   India

   Email: satishkumar.n.rodd@ericsson.com


   Muthu Arul Mozhi Perumal
   Ericsson
   Bangalore
   India

   Email: muthu.arul@gmail.com





































Srikanth, et al.        Expires September 8, 2019               [Page 6]
