<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Diameter Extended NAPTR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Diameter Extended NAPTR">
<meta name="keywords" content="NAPTR, Diameter, Services Field, Peer Discovery">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Diameter Maintenance and</td><td class="header">M. Jones</td></tr>
<tr><td class="header">Extensions (DIME)</td><td class="header">Bridgewater Systems</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">J. Korhonen</td></tr>
<tr><td class="header">Updates: <a href='http://tools.ietf.org/html/rfc3588'>3588</a> (if&nbsp;approved)</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">November 9, 2010</td></tr>
<tr><td class="header">Expires: May 13, 2011</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Diameter Extended NAPTR<br />draft-ietf-dime-extended-naptr-03</h1>

<h3>Abstract</h3>

<p>The Diameter base protocol specifies mechanisms whereby a given 
      realm may advertise Diameter nodes and the supported transport protocol. 
      However, these mechanism do not reveal the Diameter applications that each 
      node supports. A peer outside the realm would have to perform a Diameter
      capability exchange with every node in order to discover which one supports
      a required application. This document describes an improvement using an 
      extended format for the Straightfoward-NAPTR (S-NAPTR) Application Service
      Tag that allows for discovery of the supported applications without doing 
      Diameter capability exchange beforehand.
</p>
<h3>Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on May 13, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Terminology<br />
<a href="#anchor3">3.</a>&nbsp;
Extended NAPTR Service Field Format<br />
<a href="#anchor4">4.</a>&nbsp;
Extended NAPTR-based Diameter Peer Discovery<br />
<a href="#anchor5">5.</a>&nbsp;
Usage Guidelines<br />
<a href="#IANA">6.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ietf-apps">6.1.</a>&nbsp;
IETF Diameter Application Service Tags<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#vendor-apps">6.2.</a>&nbsp;
Vendor-Specific Diameter Application Service Tags<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#proto-tags">6.3.</a>&nbsp;
Diameter Application Protocol Tags<br />
<a href="#Security">7.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The Diameter base protocol <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a> 
      specifies three mechanisms for the Diameter peer discovery. One of these 
      involves the Diameter implementation performing a NAPTR query <a class='info' href='#RFC3403'>[RFC3403]<span> (</span><span class='info'>Mealling, M., &ldquo;Dynamic Delegation Discovery System (DDDS) Part Three: The Domain Name System (DNS) Database,&rdquo; October&nbsp;2002.</span><span>)</span></a> for a server in a particular realm. 
      These NAPTR records provide a mapping from a domain, to the SRV record 
      <a class='info' href='#RFC2782'>[RFC2782]<span> (</span><span class='info'>Gulbrandsen, A., Vixie, P., and L. Esibov, &ldquo;A DNS RR for specifying the location of services (DNS SRV),&rdquo; February&nbsp;2000.</span><span>)</span></a> or A/AAAA record <a class='info' href='#RFC1035'>[RFC1035]<span> (</span><span class='info'>Mockapetris, P., &ldquo;Domain names - implementation and specification,&rdquo; November&nbsp;1987.</span><span>)</span></a><a class='info' href='#RFC3596'>[RFC3596]<span> (</span><span class='info'>Thomson, S., Huitema, C., Ksinant, V., and M. Souissi, &ldquo;DNS Extensions to Support IP Version 6,&rdquo; October&nbsp;2003.</span><span>)</span></a> for contacting a server with the specific
      transport protocol in the NAPTR services field. 
</p>
<p>The extended NAPTR usage for Diameter peer discovery defined by
      this document is based on the Straightfoward-NAPTR (S-NAPTR) Dynamic 
      Delegation Discovery System (DDDS) Application defined in 
      <a class='info' href='#RFC3958'>[RFC3958]<span> (</span><span class='info'>Daigle, L. and A. Newton, &ldquo;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS),&rdquo; January&nbsp;2005.</span><span>)</span></a>. This document updates the Diameter peer 
      discovery procedure described in Section 11.6 of <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a> 
      and defines S-NAPTR Application Service and Application Procotol Tag 
      values that permit the discovery of Diameter peers that support 
      a specific Diameter application and transport protocol. 
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The Diameter base protocol specification (Section 1.4 of 
      <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>) and the Straightforward-NAPTR (S-NAPTR) DDDS
      application (section 2.1 in <a class='info' href='#RFC3958'>[RFC3958]<span> (</span><span class='info'>Daigle, L. and A. Newton, &ldquo;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS),&rdquo; January&nbsp;2005.</span><span>)</span></a>) define the terminology
      used in this document.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Extended NAPTR Service Field Format</h3>

<p>The NAPTR Service Field format defined by the S-NAPTR DDDS application
      in <a class='info' href='#RFC3958'>[RFC3958]<span> (</span><span class='info'>Daigle, L. and A. Newton, &ldquo;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS),&rdquo; January&nbsp;2005.</span><span>)</span></a> consists of a S-NAPTR Application
      Service tag and a S-NAPTR Application Protocol tag delimited by
      a single colon (":") character.
</p>
<p>The S-NAPTR Application Service Tag ABNF specification for the 
      discovery of Diameter agents supporting a specific Diameter 
      application is shown below. 
      
      </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    appln-svc-tag           = iana-appln-tag / experimental-appln-tag
    iana-appln-tag          = "aaa+ap" appln-id
    experimental-appln-tag  = "x-aaa+ap" appln-id
    appln-id                = *DIGIT
                              ; Application identifier expressed as a
                              ; decimal integer.
</pre></div><p>

      
</p>
<p>As stated in <a class='info' href='#RFC3958'>[RFC3958]<span> (</span><span class='info'>Daigle, L. and A. Newton, &ldquo;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS),&rdquo; January&nbsp;2005.</span><span>)</span></a>, application service tags 
      that start with "x-" are considered experimental, and no provision 
      is made to prevent duplicate use of the same string. Implementors 
      use them at their own risk.
</p>
<p>The S-NAPTR Application Protocol Tag ABNF specification for the 
      discovery of Diameter agents supporting a specific Diameter 
      transport protocol is shown below. 
      
      </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    appln-protocol-tag  = "diameter." app-protocol
    app-protocol        = "tcp" / "sctp" / "tls.tcp"
</pre></div><p>

      
</p>
<p>For example, a NAPTR service field value of:
      
</p>
<p></p>
<blockquote class="text"><dl>
<dt>'aaa+ap6:diameter.sctp'</dt>
<dd>
          <br />

          Means 
          that the Diameter node in the SRV or A/AAAA record supports the
          Diameter Session Initiation Protocol (SIP) Application ('6') and SCTP
          as the transport protocol.
        
</dd>
</dl></blockquote><p>
      
</p>
<p>The maximum length of the NAPTR service field is 256 octets including
         one octet length field (see Section 4.1 of RFC 3403 and Section 3.3 of
         <a class='info' href='#RFC1035'>[RFC1035]<span> (</span><span class='info'>Mockapetris, P., &ldquo;Domain names - implementation and specification,&rdquo; November&nbsp;1987.</span><span>)</span></a>). DNS administrators SHOULD also provision 
         legacy RFC 3588 style NAPTR records <a class='info' href='#RFC2915'>[RFC2915]<span> (</span><span class='info'>Mealling, M. and R. Daniel, &ldquo;The Naming Authority Pointer (NAPTR) DNS Resource Record,&rdquo; September&nbsp;2000.</span><span>)</span></a> in order to
         guarantee backwards compatibility with legacy RFC 3588 compliant
         Diameter peers. If the DNS administrator provisions 
         both extended S-NAPTR records as defined in this specification and 
         legacy RFC 3588 NAPTR records, then the extended S-NAPTR records 
         MUST have higher priority (e.g. lower order and/or preference 
         values) than legacy NAPTR records.
      
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Extended NAPTR-based Diameter Peer Discovery</h3>

<p>The Diameter Peer Discovery principles are described in
         Section 5.2 of <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. 
         This specification updates the NAPTR query procedure in the Diameter 
         peer discovery mechanism by allowing the querying node to determine 
         which applications are supported by resolved Diameter peers.
         
</p>
<p>The extended format NAPTR records provide a mapping from a domain, 
         to the SRV record or A/AAAA record for contacting a server supporting
         a specific
         transport protocol and Diameter application. The resource record
         will contain an empty regular expression and a replacement
         value, which is the SRV record or the A/AAAA record for that particular
         transport protocol.  If the server supports multiple transport
         protocols, there will be multiple NAPTR records, each with a
         different Services Field value and potentially different list
         of supported Diameter applications.
</p>
<p>The assumption for this mechanism to work is that the DNS 
         administrator of the queried domain has first provisioned the DNS
         with extended format NAPTR entries. The steps below replace the 
         NAPTR query procedure steps in Section 5.2 of <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>.
      
</p>
<p></p>
<blockquote class="text"><dl>
<dt>a.</dt>
<dd>The Diameter implementation performs a NAPTR query for
           a server in a particular realm. The Diameter implementation has 
           to know in advance which realm to look for a Diameter agent in and 
           which Application Identifier it is interested in.  The realm could
           be deduced, for example, from the 'realm' in a NAI that a Diameter
           implementation needed to perform a Diameter operation on.
        
</dd>
<dt>b.</dt>
<dd>If the returned NAPTR service fields contain entries
           formatted as "aaa+apX:Y" where "X" indicates the Application
           Identifier and "Y" indicates the transport protocol, 
           the target realm supports the extended format for 
           NAPTR-based Diameter peer discovery defined in this document.
           
<blockquote class="text"><dl>
<dt></dt>
<dd>If "X" contains the required Application Identifier and "Y" 
           matches a supported transport protocol, the Diameter implementation
           resolves the "replacement" field entry to a target host using
           the lookup method appropriate for the "flags" field.
           
</dd>
<dt></dt>
<dd>If "X" does not contain the required Application Identifier or
           "Y" does not match a supported transport protocol, the Diameter
           implementation abandons the peer discovery.
           
</dd>
</dl></blockquote>
           
</dd>
<dt>c.</dt>
<dd>If the returned NAPTR service fields contain entries
           formatted as "AAA+D2X" where "X" indicates the transport protocol, 
           the target realm supports the NAPTR-based Diameter 
           peer discovery defined in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>.
           
<blockquote class="text"><dl>
<dt></dt>
<dd>If "X" matches a supported transport protocol, the Diameter 
           implementation continues processing the NAPTR as described in 
           <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a> and <a class='info' href='#RFC2915'>[RFC2915]<span> (</span><span class='info'>Mealling, M. and R. Daniel, &ldquo;The Naming Authority Pointer (NAPTR) DNS Resource Record,&rdquo; September&nbsp;2000.</span><span>)</span></a>.
           
</dd>
<dt></dt>
<dd>If "X" does not match a supported transport protocol, the Diameter
           implementation abandons the peer discovery.
           
</dd>
</dl></blockquote>
        
</dd>
<dt>d.</dt>
<dd>If the target realm does not support NAPTR-based Diameter 
        peer discovery, the client proceeds with the next peer discovery mechanism
        described in Section 5.2 of <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>.
        
</dd>
</dl></blockquote><p>
      
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Usage Guidelines</h3>

<p>Diameter is a peer to peer protocol whereas most of the applications that
      extend the base protocol behave like client/server applications. The role
      of the peer is not advertised in the NAPTR tags and not even communicated
      during Diameter capability negotiation (CER/CEA). For this reason,
      NAPTR-based Diameter peer discovery for an application defining client/server
      roles should only be used by a client to discover servers.
      
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<a name="ietf-apps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
IETF Diameter Application Service Tags</h3>

<p>IANA is requested to reserve the following S-NAPTR Application 
      Service Tags for existing IETF Diameter applications:
      
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Tag</th><th align="left">Diameter Application</th></tr>
<tr>
<td align="left">aaa+ap1</td>
<td align="left">NASREQ <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">aaa+ap2</td>
<td align="left">Mobile IPv4 <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">aaa+ap3</td>
<td align="left">Base Accounting <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">aaa+ap4</td>
<td align="left">Credit Control <a class='info' href='#RFC4006'>[RFC4006]<span> (</span><span class='info'>Hakala, H., Mattila, L., Koskinen, J-P., Stura, M., and J. Loughney, &ldquo;Diameter Credit-Control Application,&rdquo; August&nbsp;2005.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">aaa+ap5</td>
<td align="left">EAP <a class='info' href='#RFC4072'>[RFC4072]<span> (</span><span class='info'>Eronen, P., Hiller, T., and G. Zorn, &ldquo;Diameter Extensible Authentication Protocol (EAP) Application,&rdquo; August&nbsp;2005.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">aaa+ap6</td>
<td align="left">SIP <a class='info' href='#RFC4740'>[RFC4740]<span> (</span><span class='info'>Garcia-Martin, M., Belinchon, M., Pallares-Lopez, M., Canales-Valenzuela, C., and K. Tammi, &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; November&nbsp;2006.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">aaa+ap7</td>
<td align="left">Mobile IPv6 IKE <a class='info' href='#RFC5778'>[RFC5778]<span> (</span><span class='info'>Korhonen, J., Tschofenig, H., Bournelle, J., Giaretta, G., and M. Nakhjiri, &ldquo;Diameter Mobile IPv6: Support for Home Agent to Diameter Server Interaction,&rdquo; February&nbsp;2010.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">aaa+ap8</td>
<td align="left">Mobile IPv6 Auth <a class='info' href='#RFC5778'>[RFC5778]<span> (</span><span class='info'>Korhonen, J., Tschofenig, H., Bournelle, J., Giaretta, G., and M. Nakhjiri, &ldquo;Diameter Mobile IPv6: Support for Home Agent to Diameter Server Interaction,&rdquo; February&nbsp;2010.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">aaa+ap9</td>
<td align="left">QoS <a class='info' href='#RFC5866'>[RFC5866]<span> (</span><span class='info'>Sun, D., McCann, P., Tschofenig, H., Tsou, T., Doria, A., and G. Zorn, &ldquo;Diameter Quality-of-Service Application,&rdquo; May&nbsp;2010.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">aaa+ap4294967295</td>
<td align="left">Relay <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a></td>
</tr>
</table>
<br clear="all" />

<p>Future IETF Diameter applications MUST reserve the S-NAPTR 
      Application Service Tag corresponding to the allocated Diameter
      Application ID.
</p>
<a name="vendor-apps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Vendor-Specific Diameter Application Service Tags</h3>

<p>
      Vendor-Specific Diameter Application IDs are allocated by IANA according to
      the "First Come First Served" policy and do not require an IETF specification.
      However, the S-NAPTR Application Service Tag registry created by 
      <a class='info' href='#RFC3958'>[RFC3958]<span> (</span><span class='info'>Daigle, L. and A. Newton, &ldquo;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS),&rdquo; January&nbsp;2005.</span><span>)</span></a> defines a registration policy of "Specification 
      Required" with a further stipulation that the "specification" is an RFC
      (of any category). If a Vendor-Specific Diameter Application requires
      the functionality defined in this document, an RFC of any category MUST be 
      published which reserves the S-NAPTR Application Service Tag corresponding
      to the Vendor-Specific Diameter Application ID.
</p>
<a name="proto-tags"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Diameter Application Protocol Tags</h3>

<p>IANA is requested to reserve the following S-NAPTR Application 
      Protocol Tags for the Diameter transport protocols:
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Tag</th><th align="left">Protocol</th></tr>
<tr>
<td align="left">diameter.tcp</td>
<td align="left">TCP</td>
</tr>
<tr>
<td align="left">diameter.sctp</td>
<td align="left">SCTP</td>
</tr>
<tr>
<td align="left">diameter.tls.tcp</td>
<td align="left">TLS/TCP</td>
</tr>
</table>
<br clear="all" />

<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>This document specifies an enhancement to RFC 3588 Diameter base
      protocol defined NAPTR service field format and also modifications to the NAPTR processing logic defined. The enhancements and modifications are
      based on the S-NAPTR, which is actually a simplification of the NAPTR,
      and therefore the same security considerations described in RFC 3588 are
      applicable to this document. No further extensions are required beyond
      the security mechanisms offered by RFC 3588.
      However, a malicious host doing S-NAPTR queries learns applications 
      supported by Diameter agents in a certain realm faster, which might
      help the malicious host to scan potential targets for an attack 
      more efficiently when some applications have known vulnerabilities.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC1035">[RFC1035]</a></td>
<td class="author-text">Mockapetris, P., &ldquo;<a href="http://tools.ietf.org/html/rfc1035">Domain names - implementation and specification</a>,&rdquo; STD&nbsp;13, RFC&nbsp;1035, November&nbsp;1987 (<a href="http://www.rfc-editor.org/rfc/rfc1035.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2782">[RFC2782]</a></td>
<td class="author-text"><a href="mailto:arnt@troll.no">Gulbrandsen, A.</a>, Vixie, P., and <a href="mailto:levone@microsoft.com">L. Esibov</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2782">A DNS RR for specifying the location of services (DNS SRV)</a>,&rdquo; RFC&nbsp;2782, February&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2782.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3403">[RFC3403]</a></td>
<td class="author-text">Mealling, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3403">Dynamic Delegation Discovery System (DDDS) Part Three: The Domain Name System (DNS) Database</a>,&rdquo; RFC&nbsp;3403, October&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3403.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3588">[RFC3588]</a></td>
<td class="author-text">Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;<a href="http://tools.ietf.org/html/rfc3588">Diameter Base Protocol</a>,&rdquo; RFC&nbsp;3588, September&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3588.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3596">[RFC3596]</a></td>
<td class="author-text">Thomson, S., Huitema, C., Ksinant, V., and M. Souissi, &ldquo;<a href="http://tools.ietf.org/html/rfc3596">DNS Extensions to Support IP Version 6</a>,&rdquo; RFC&nbsp;3596, October&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3596.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3958">[RFC3958]</a></td>
<td class="author-text">Daigle, L. and A. Newton, &ldquo;<a href="http://tools.ietf.org/html/rfc3958">Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS)</a>,&rdquo; RFC&nbsp;3958, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3958.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4004">[RFC4004]</a></td>
<td class="author-text">Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;<a href="http://tools.ietf.org/html/rfc4004">Diameter Mobile IPv4 Application</a>,&rdquo; RFC&nbsp;4004, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4004.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4006">[RFC4006]</a></td>
<td class="author-text">Hakala, H., Mattila, L., Koskinen, J-P., Stura, M., and J. Loughney, &ldquo;<a href="http://tools.ietf.org/html/rfc4006">Diameter Credit-Control Application</a>,&rdquo; RFC&nbsp;4006, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4006.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4072">[RFC4072]</a></td>
<td class="author-text">Eronen, P., Hiller, T., and G. Zorn, &ldquo;<a href="http://tools.ietf.org/html/rfc4072">Diameter Extensible Authentication Protocol (EAP) Application</a>,&rdquo; RFC&nbsp;4072, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4072.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4740">[RFC4740]</a></td>
<td class="author-text">Garcia-Martin, M., Belinchon, M., Pallares-Lopez, M., Canales-Valenzuela, C., and K. Tammi, &ldquo;<a href="http://tools.ietf.org/html/rfc4740">Diameter Session Initiation Protocol (SIP) Application</a>,&rdquo; RFC&nbsp;4740, November&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4740.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5778">[RFC5778]</a></td>
<td class="author-text">Korhonen, J., Tschofenig, H., Bournelle, J., Giaretta, G., and M. Nakhjiri, &ldquo;<a href="http://tools.ietf.org/html/rfc5778">Diameter Mobile IPv6: Support for Home Agent to Diameter Server Interaction</a>,&rdquo; RFC&nbsp;5778, February&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5778.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5866">[RFC5866]</a></td>
<td class="author-text">Sun, D., McCann, P., Tschofenig, H., Tsou, T., Doria, A., and G. Zorn, &ldquo;<a href="http://tools.ietf.org/html/rfc5866">Diameter Quality-of-Service Application</a>,&rdquo; RFC&nbsp;5866, May&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5866.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2915">[RFC2915]</a></td>
<td class="author-text">Mealling, M. and R. Daniel, &ldquo;<a href="http://tools.ietf.org/html/rfc2915">The Naming Authority Pointer (NAPTR) DNS Resource Record</a>,&rdquo; RFC&nbsp;2915, September&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2915.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mark Jones</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bridgewater Systems</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mark@azu.ca">mark@azu.ca</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jouni Korhonen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jouni.nospam@gmail.com">jouni.nospam@gmail.com</a></td></tr>
</table>
</body></html>
