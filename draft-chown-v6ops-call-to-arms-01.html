<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>World IPv6 Day Call to Arms</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Connectivity Issues">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Unmanaged Tunnels">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Tunnel Broker first-hop delays">
<link href="#rfc.section.2.3" rel="Chapter" title="2.3 Connection Timeouts">
<link href="#rfc.section.2.4" rel="Chapter" title="2.4 PMTU Discovery">
<link href="#rfc.section.2.5" rel="Chapter" title="2.5 Rogue Router Advertisements">
<link href="#rfc.section.2.6" rel="Chapter" title="2.6 Tunnel performance">
<link href="#rfc.section.2.7" rel="Chapter" title="2.7 AAAA record advertised but service not enabled">
<link href="#rfc.section.3" rel="Chapter" title="3 Instrumentation">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 IPv6 traffic levels">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Network flow records">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Client Web Access Success Rate">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 IPv4 Performance Comparison">
<link href="#rfc.section.3.5" rel="Chapter" title="3.5 Security monitoring">
<link href="#rfc.section.4" rel="Chapter" title="4 IPv6-only testing">
<link href="#rfc.section.5" rel="Chapter" title="5 Conclusions">
<link href="#rfc.section.6" rel="Chapter" title="6 Security Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 IANA Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Acknowledgments">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The Internet Society (ISOC) has declared that June 8th 2011 will be World IPv6 Day, on which organisations are being encouraged to test their production IPv6 deployment capability.   Many significant content providers and networks have stated they will take part.  Given this date is likely to see more IPv6 traffic flowing across the Internet than has ever been seen before, it seems timely to issue a call to arms for operators and administrators to review and mitigate common causes of IPv6 connectivity problems.   The increased traffic on World IPv6 Day should also create an excellent opportunity to observe the behaviour and performance of IPv6; it is thus very desirable to have appropriate measurement tools in place in advance.   We discuss some appropriate tools from the network and application perspective.  " />
  <meta name="description" content="The Internet Society (ISOC) has declared that June 8th 2011 will be World IPv6 Day, on which organisations are being encouraged to test their production IPv6 deployment capability.   Many significant content providers and networks have stated they will take part.  Given this date is likely to see more IPv6 traffic flowing across the Internet than has ever been seen before, it seems timely to issue a call to arms for operators and administrators to review and mitigate common causes of IPv6 connectivity problems.   The increased traffic on World IPv6 Day should also create an excellent opportunity to observe the behaviour and performance of IPv6; it is thus very desirable to have appropriate measurement tools in place in advance.   We discuss some appropriate tools from the network and application perspective.  " />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">IPv6 Operations</td>
<td class="right">T.J. Chown</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">University of Southampton</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">S. Venaas</td>
</tr>
<tr>
<td class="left">Expires: September 15, 2011</td>
<td class="right">Cisco Systems</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">March 14, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">World IPv6 Day Call to Arms<br />
  <span class="filename">draft-chown-v6ops-call-to-arms-01</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The Internet Society (ISOC) has declared that June 8th 2011 will be World IPv6 Day, on which organisations are being encouraged to test their production IPv6 deployment capability.   Many significant content providers and networks have stated they will take part.  Given this date is likely to see more IPv6 traffic flowing across the Internet than has ever been seen before, it seems timely to issue a call to arms for operators and administrators to review and mitigate common causes of IPv6 connectivity problems.   The increased traffic on World IPv6 Day should also create an excellent opportunity to observe the behaviour and performance of IPv6; it is thus very desirable to have appropriate measurement tools in place in advance.   We discuss some appropriate tools from the network and application perspective.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on September 15, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Connectivity Issues</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Unmanaged Tunnels</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Tunnel Broker first-hop delays</a>
</li>
<li>2.3.   <a href="#rfc.section.2.3">Connection Timeouts</a>
</li>
<li>2.4.   <a href="#rfc.section.2.4">PMTU Discovery</a>
</li>
<li>2.5.   <a href="#rfc.section.2.5">Rogue Router Advertisements</a>
</li>
<li>2.6.   <a href="#rfc.section.2.6">Tunnel performance</a>
</li>
<li>2.7.   <a href="#rfc.section.2.7">AAAA record advertised but service not enabled</a>
</li>
<li>3.   <a href="#rfc.section.3">Instrumentation</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">IPv6 traffic levels</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Network flow records</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Client Web Access Success Rate</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">IPv4 Performance Comparison</a>
</li>
<li>3.5.   <a href="#rfc.section.3.5">Security monitoring</a>
</li>
<li>4.   <a href="#rfc.section.4">IPv6-only testing</a>
</li>
<li>5.   <a href="#rfc.section.5">Conclusions</a>
</li>
<li>6.   <a href="#rfc.section.6">Security Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">IANA Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Acknowledgments</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">Despite the recent exhaustion of the available IPv4 address pool, deployment of IPv6 remains limited.  To help encourage organisations to trial production deployment, ISOC has declared June 8th 2011 as World IPv6 Day.  Organisations are encouraged to use this day to test IPv6 in production, either by enabling clients in their network, or by making externally-facing services available over IPv6.   At the current time, this would generally mean enabling dual-stack networking with IPv4 running alongside IPv6.  However, IPv6-only networks are inevitable, and so some sites may choose to use June 8th to undertake some focused tests on that deployment model.  </p>
<p id="rfc.section.1.p.2">The purpose of this document is two-fold.  One is to discuss common IPv6 connecivity issues that are likely to arise on June 8th, with a focus on dual-stack networking (which is likely to be how the vast majority of sites take part).  This should help raise awareness of those problems and possible mitigations.  The other is to encourage organisations to think about how they might get useful instrumentation on what happens in and to/from their networks on the day.   Such measurement tools are likely to also be useful longer term - once deployed they could be left in place.  </p>
<p id="rfc.section.1.p.3">For most sites providing content, June 8th will be a chance to make some public facing services available over IPv6, such as web content using their production domain (e.g. www.example.com) rather than a contrived IPv6 test domain (e.g. www.ipv6.example.com).  But also some enterprise sites may choose to enable IPv6 in user/client subnets, in which case the performance of those systems and the applications they run will be of paramount interest.  </p>
<p id="rfc.section.1.p.4">The document also includes a brief section on tools that might be used to test IPv6-only operation.  </p>
<p id="rfc.section.1.p.5">NB. This is a very rough draft of the document; feedback is welcomed.  The scope of the document is purely informational to provoke discussion, and to encourage deployment steps for June 8th, which may remain in place after that date.  We aim to have a relatively mature informational text ready well in advance of June.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Connectivity Issues</h1>
<p id="rfc.section.2.p.1">In this section we review some common causes of IPv6 connectivity issues.  The topics below include initial thoughts for this early draft, and there is no significance to the order in which issues are listed.  Some issues, such as transit arrangements, are not included - currently the focus is on end sites (or users) who may take part in the World IPv6 Day.  </p>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> Unmanaged Tunnels</h1>
<p id="rfc.section.2.1.p.1">One cause of connectivity problems is the use of unmanaged tunnels, in particular 'automated' methods that are not provisioned by the user's ISP.   The most common example is 6to4 <a href="#RFC3056">[RFC3056]</a>, or more specifically the 6to4 relay approach described in <a href="#RFC3068">[RFC3068]</a>.   A native IPv6 host communicating with a 6to4 host will require both hosts to have access to an appropriately capable 6to4 relay (which may or may not be the same relay).  If a host in a native IPv6 network has no route to 2002::/16 it cannot send traffic to a 6to4 host.  Similarly, a 6to4 router that cannot reach the well-known IPv4 anycast relay address cannot send traffic to a native IPv6 network.  </p>
<p id="rfc.section.2.1.p.2">One approach to this problem is to encourage sites/ISPs to run local relays, as discussed in <a href="#I-D.carpenter-v6ops-6to4-teredo-advisory">[I-D.carpenter-v6ops-6to4-teredo-advisory]</a>.  The alternative to reduce such problems is simply to obsolete 6to4, as proposed in <a href="#I-D.troan-v6ops-6to4-to-historic">[I-D.troan-v6ops-6to4-to-historic]</a>.  </p>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> Tunnel Broker first-hop delays</h1>
<p id="rfc.section.2.2.p.1">IPv6 tunnel brokers, such as those provided by SixXS (http://www.sixxs.net) and Hurricane Electric (http://tunnelbroker.net) provide a more robust, managed approach to IPv6-in-IPv4 tunnelled access than 6to4.  Individual users interested in IPv6 access for World IPv6 Day, in the absence of IPv6 support from their ISP, should consider registering to use a free tunnel broker.   When choosing a broker service, it is prudent to pick one with a presence near to you that has a minimal round trip time.   Providers such as SixXS and HE have tunnel broker servers in many countries.   Beware picking a broker in another continent that may add 150ms+ to your round trip times.  </p>
<h1 id="rfc.section.2.3">
<a href="#rfc.section.2.3">2.3.</a> Connection Timeouts</h1>
<p id="rfc.section.2.3.p.1">Where dual-stack systems - or rather the applications running on them - have a choice of IPv4 or IPv6 connectivity, timeouts can occur if there is no connectivity on the preferred protocol.  For example, if both A and AAAA DNS records exists for a web server, and IPv6 connectivity is broken, there is likely to be some timeout for the browser before the connection drops back to IPv4.  </p>
<p id="rfc.section.2.3.p.2">A bigger problem exists if the application or OS tries IPv6 first and then does not fall back to IPv4.  A bug in versions of Opera prior to 10.5 caused such behaviour, which was obviously a big issue for Opera users trying to access dual-stack web sites with broken IPv6 connectivity.  </p>
<p id="rfc.section.2.3.p.3">The author has undertaken some informal tests at his own site, which shows how different operating systems handle ICMP unreachables, if they are received.  On Linux, web connections timeout after 20 seconds for 'no response', but immediately for unreachables.  In contrast, Windows Vista was 20 seconds regardless of unreachables being received.  Any non-trivial delay will cause significant user frustration.  </p>
<p id="rfc.section.2.3.p.4">This problem is probably the main reason that Google implemented a AAAA whitelisting system for its test sites.   The sites had to demonstrate they had good IPv6 connectivity before being allowed into the test programme.   The topic is discussed in <a href="#I-D.ietf-v6ops-v6-aaaa-whitelisting-implications">[I-D.ietf-v6ops-v6-aaaa-whitelisting-implications]</a>.  For the sake of World IPv6 Day, it is expected that no such whitelisting is in place - that is, after all, the point of having a day dedicated to testing IPv6 in production.  </p>
<p id="rfc.section.2.3.p.5">An interesting suggestion to handle the problem is the 'happy eyeballs' approach described in <a href="#I-D.ietf-v6ops-happy-eyeballs">[I-D.ietf-v6ops-happy-eyeballs]</a>.  This approach is now also being suggested for multiple interface systems, as per <a href="#I-D.chen-mif-happy-eyeballs-extension">[I-D.chen-mif-happy-eyeballs-extension]</a>.  However some people feel this 'workaround' is simply masking underlying problems that should be fixed.  </p>
<h1 id="rfc.section.2.4">
<a href="#rfc.section.2.4">2.4.</a> PMTU Discovery</h1>
<p id="rfc.section.2.4.p.1">IPv6 mandates that fragmentation is only undertaken by the sending node, and thus IPv6 requires working PMTU Discovery <a href="#RFC1981">[RFC1981]</a>.  An existing RFC gives Recommendations for Filtering ICMPv6 Messages in Firewalls <a href="#RFC4890">[RFC4890]</a>; if this guidance is not followed, connectivity problems are likely to arise.  Blindly filtering all ICMPv6 messages is not good practise.  </p>
<p id="rfc.section.2.4.p.2">The minimum MTU for IPv6 is 1280 bytes.  Where PMTUD is not working or not implemented, the minimum MTU should be used.  </p>
<h1 id="rfc.section.2.5">
<a href="#rfc.section.2.5">2.5.</a> Rogue Router Advertisements</h1>
<p id="rfc.section.2.5.p.1">Within a site, hosts may use IPv6 Stateless Address Autoconfiguration (SLAAC) <a href="#RFC4862">[RFC4862]</a>.   However, it is possible for accidental (or malicious) rogue RAs to cause connectivity issues, as described in the Rogue Router Advertisement Problem Statement <a href="#RFC6104">[RFC6104]</a>.  </p>
<p id="rfc.section.2.5.p.2">A typical cause of rogue RAs is Windows ICS, which can present a rogue 6to4 router on its wireless interface.   This will cause hosts to potentially autoconfigure two global IPv6 addresses and pick the wrong default router, with unpredictable results.  As a (bad) example the author experienced a scenario where he had a rogue 6to4 RA, but because the rogue 6to4 was working he was able to access IPv6 networks outside his own network, but could not access most internal hosts inside his own network because he was unwittingly using 6to4 from outside into his own network, and thus being firewalled from those internal hosts.  </p>
<p id="rfc.section.2.5.p.3">In many cases, default address selection <a href="#RFC3484">[RFC3484]</a> (and <a href="#I-D.ietf-6man-rfc3484-revise">[I-D.ietf-6man-rfc3484-revise]</a>) would avoid such cases, because the address selection rules should prefer, or can be configured to prefer, native IPv6 over 6to4.  However not all operating systems implement RFC 3484 yet, in particular MacOS X.  </p>
<p id="rfc.section.2.5.p.4">Adding ACLs to your switches to block ICMPv6 Type 134 packets on ports that do not have routers connected would also minimise rogue RAs.  A more elegant solution is RA Guard <a href="#RFC6105">[RFC6105]</a>, and another is use of SEcure Neighbour Discovery (SEND) <a href="#RFC3971">[RFC3971]</a>.  However neither is widely implemented yet.  Indeed, any reported operational experience of SEND in an enterprise network would be very welcome.  </p>
<p id="rfc.section.2.5.p.5">Finally, there is a tool called RAmond, available freely from http://ramond.sourceforge.net, that can be configured to detect and issue deprecating RAs against observed rogue RAs.   This software is based on rafixd.  </p>
<h1 id="rfc.section.2.6">
<a href="#rfc.section.2.6">2.6.</a> Tunnel performance</h1>
<p id="rfc.section.2.6.p.1">In scenarios where sites currently have manually configured tunnels to gain IPv6 connectivity, it may be the case that such encapsulation is performed by a router's CPU, in which case unexpected high volumes of traffic may cause problems.   Bear in mind that on World IPv6 Day, you may start using IPv6 by default for some high bandwidth applications that you had not used before, e.g. YouTube from Google.  </p>
<h1 id="rfc.section.2.7">
<a href="#rfc.section.2.7">2.7.</a> AAAA record advertised but service not enabled</h1>
<p id="rfc.section.2.7.p.1">If enabling a service for World IPv6 Day, be aware of other existing services that may be running on the same system.  If a server has multiple functions, all services should be IPv6 enabled before a AAAA record is entered into the DNS for services that may use that name.  </p>
<p id="rfc.section.2.7.p.2">A related consideration is to make sure that firewalls don't just drop IPv6 packets to ports that are not in use.   It's better if the firewall or host sends a TCP RST to avoid a potential timeout. For example, if you add a AAAA record for your web server that also runs say FTP, where FTP is IPv4 only, either the firewall should have port 21 open or the firewall should be configured to send a TCP RST.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Instrumentation</h1>
<p id="rfc.section.3.p.1">In this section we discuss potential instrumentation approaches that may be configured for World IPv6 Day, and then retained longer term after the event.  These should complement informal, subjective reports from users at participating sites.   It is probably prudent to make users aware of the 'at risk' day, and actions they should take should the experience problems.   It may also be desirable to undertake some form of user survey soon afterwards.  </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> IPv6 traffic levels</h1>
<p id="rfc.section.3.1.p.1">It should be possible to measure raw IPv6 traffic levels independently on dual-stack switch/router platforms, given implementations of appropriate MIBs.  Sites should take steps to ensure they have the tools in place to be able to view the relative levels of IPv4 and IPv6 traffic over time.  </p>
<p id="rfc.section.3.1.p.2">Application level measurement is also desirable, because handling of choice (preference) of protocol used lies with the application if both A and AAAA records are returned.  Sites should be aware that due to IPv6 Privacy Extensions <a href="#RFC4941">[RFC4941]</a> application logs may show more apparent different clients connecting, due to clients cycling the source IPv6 address they use over time.  </p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> Network flow records</h1>
<p id="rfc.section.3.2.p.1">Where available, sites should seek to deploy network flow records for traffic, to maximise opportunities to analyse traffic patterns after the event, or in the case of reports of specific problems.   Netflow v9 supports IPv6.   Open source IPv6-capable Netflow collectors also exist, e.g. nfsen, from http://nfsen.sourceforge.net.  </p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> Client Web Access Success Rate</h1>
<p id="rfc.section.3.3.p.1">There have been some recent studies on the capabilities of web clients to access content on dual-stack servers by IPv4 or IPv6 in the presence of both A and AAAA records existing for a web domain.  </p>
<p id="rfc.section.3.3.p.2">One good example is that of <a href="#Anderson10">[Anderson10]</a>, as reported at RIPE-61, where the author set up some application (web server) oriented tests for his newspaper content in Norway.  The methodology was to add an invisible IFRAME to his site that would include IMG links randomly to 1x1 images that were served either via an IPv4-only target or a dual-stack target.  Variation in the hit rates would imply IPv6 brokenness.  By analysing the http metadata information could be gleaned on the cause of the brokenness.   Results in Q4'2009 showed 0.2-0.3% brokenness, including the Opera bug mentioned above.  </p>
<p id="rfc.section.3.3.p.3">Recent figures published by Google suggest at most a 0.1% level of brokenness, indicating some improvement, but that level is still potentially 1 in 1000 users with a problem.   Sites may wish to make their own measurements of IPv6 brokenness rather than relying on third party reports.  </p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> IPv4 Performance Comparison</h1>
<p id="rfc.section.3.4.p.1">Where a dual-stack service is deployed, measuring the relative performance of both protocols is desirable.  This may primarily be a measurement of throughput or delay, but may also include availability/uptime measurement.  A site may choose to set up its own performance measuring framework, for example using open source bandwidth and throughput test tools.  </p>
<h1 id="rfc.section.3.5">
<a href="#rfc.section.3.5">3.5.</a> Security monitoring</h1>
<p id="rfc.section.3.5.p.1">We mentioned RAmond above in the context of watching for rogue RAs.  There is another useful package called NDPmon, also available freely from http://ndpmon.sourceforge.net, that can be configured to watch for certain types of IPv6 'abuse' on your local network.  It may be interesting to run the tool to confirm whether any 'bad' traffic is observed within your network on World IPv6 Day.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> IPv6-only testing</h1>
<p id="rfc.section.4.p.1">The long-term IPv6 deployment plan is IPv6-only networking, rather than dual-stack.  It is not clear how quickly significant IPv6-only networks will emerge, but testing of approaches to IPv6-only operation is desirable as soon as possible.  </p>
<p id="rfc.section.4.p.2">Some experience of NAT64 <a href="#I-D.ietf-behave-v6v4-xlate-stateful">[I-D.ietf-behave-v6v4-xlate-stateful]</a> has been described in <a href="#I-D.tan-v6ops-nat64-experiences">[I-D.tan-v6ops-nat64-experiences]</a>, though this appears to have used only NAT-PT so far.  An implementation of NAT64 is available at http://ecdysis.viagenie.ca.  Operational experience of IVI is also desirable.  An implementation of IVI is available at http://www.ivi2.org/IVI.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#Conclusions" id="Conclusions">Conclusions</a>
</h1>
<p id="rfc.section.5.p.1">With the ISOC World IPv6 Day event due on June 8th 2011, this document aims to help focus attention on both improving awareness and mitigations of common causes of IPv6 connectivity problems, and encouraging sites and organisations to introduce appropriate instrumentation into their networks so they can observe traffic behaviour appropriately.  </p>
<p id="rfc.section.5.p.2">This is a very early version of the text, and is very drafty.  All comments are very welcome towards a mature version in advance of June.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.6.p.1">There are no extra security consideration for this document.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.7.p.1">There are no extra IANA consideration for this document.  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#Acknowledgments" id="Acknowledgments">Acknowledgments</a>
</h1>
<p id="rfc.section.8.p.1">To be added.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1981">[RFC1981]</b></td>
<td class="top">
<a href="mailto:mccann@zk3.dec.com" title="Digital Equipment Corporation">McCann, J.</a>, <a href="mailto:deering@parc.xerox.com" title="Xerox Palo Alto Research Center">Deering, S.</a> and <a href="mailto:mogul@pa.dec.com" title="Digital Equipment Corporation, Western Research Laboratory">J. Mogul</a>, "<a href="http://tools.ietf.org/html/rfc1981">Path MTU Discovery for IP version 6</a>", RFC 1981, August 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3056">[RFC3056]</b></td>
<td class="top">
<a>Carpenter, B.</a> and <a>K. Moore</a>, "<a href="http://tools.ietf.org/html/rfc3056">Connection of IPv6 Domains via IPv4 Clouds</a>", RFC 3056, February 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3068">[RFC3068]</b></td>
<td class="top">
<a>Huitema, C.</a>, "<a href="http://tools.ietf.org/html/rfc3068">An Anycast Prefix for 6to4 Relay Routers</a>", RFC 3068, June 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3484">[RFC3484]</b></td>
<td class="top">
<a>Draves, R.</a>, "<a href="http://tools.ietf.org/html/rfc3484">Default Address Selection for Internet Protocol version 6 (IPv6)</a>", RFC 3484, February 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3971">[RFC3971]</b></td>
<td class="top">
<a>Arkko, J.</a>, <a>Kempf, J.</a>, <a>Zill, B.</a> and <a>P. Nikander</a>, "<a href="http://tools.ietf.org/html/rfc3971">SEcure Neighbor Discovery (SEND)</a>", RFC 3971, March 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4862">[RFC4862]</b></td>
<td class="top">
<a>Thomson, S.</a>, <a>Narten, T.</a> and <a>T. Jinmei</a>, "<a href="http://tools.ietf.org/html/rfc4862">IPv6 Stateless Address Autoconfiguration</a>", RFC 4862, September 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4890">[RFC4890]</b></td>
<td class="top">
<a>Davies, E.</a> and <a>J. Mohacsi</a>, "<a href="http://tools.ietf.org/html/rfc4890">Recommendations for Filtering ICMPv6 Messages in Firewalls</a>", RFC 4890, May 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4941">[RFC4941]</b></td>
<td class="top">
<a>Narten, T.</a>, <a>Draves, R.</a> and <a>S. Krishnan</a>, "<a href="http://tools.ietf.org/html/rfc4941">Privacy Extensions for Stateless Address Autoconfiguration in IPv6</a>", RFC 4941, September 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6104">[RFC6104]</b></td>
<td class="top">
<a>Chown, T.</a> and <a>S. Venaas</a>, "<a href="http://tools.ietf.org/html/rfc6104">Rogue IPv6 Router Advertisement Problem Statement</a>", RFC 6104, February 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6105">[RFC6105]</b></td>
<td class="top">
<a>Levy-Abegnoli, E.</a>, <a>Van de Velde, G.</a>, <a>Popoviciu, C.</a> and <a>J. Mohacsi</a>, "<a href="http://tools.ietf.org/html/rfc6105">IPv6 Router Advertisement Guard</a>", RFC 6105, February 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.carpenter-v6ops-6to4-teredo-advisory">[I-D.carpenter-v6ops-6to4-teredo-advisory]</b></td>
<td class="top">
<a>Carpenter, B</a>, "<a href="http://tools.ietf.org/html/draft-carpenter-v6ops-6to4-teredo-advisory-03">Advisory Guidelines for 6to4 Deployment</a>", Internet-Draft draft-carpenter-v6ops-6to4-teredo-advisory-03, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-v6ops-happy-eyeballs">[I-D.ietf-v6ops-happy-eyeballs]</b></td>
<td class="top">
<a>Wing, D</a> and <a>A Yourtchenko</a>, "<a href="http://tools.ietf.org/html/draft-ietf-v6ops-happy-eyeballs-05">Happy Eyeballs: Success with Dual-Stack Hosts</a>", Internet-Draft draft-ietf-v6ops-happy-eyeballs-05, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.tan-v6ops-nat64-experiences">[I-D.tan-v6ops-nat64-experiences]</b></td>
<td class="top">
<a>Tan, J</a>, <a>Lin, J</a> and <a>W Li</a>, "<a href="http://tools.ietf.org/html/draft-tan-v6ops-nat64-experiences-00">Experience from NAT64 applications</a>", Internet-Draft draft-tan-v6ops-nat64-experiences-00, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.troan-v6ops-6to4-to-historic">[I-D.troan-v6ops-6to4-to-historic]</b></td>
<td class="top">
<a>Troan, O</a>, "<a href="http://tools.ietf.org/html/draft-troan-v6ops-6to4-to-historic-01">Request to move Connection of IPv6 Domains via IPv4 Clouds (6to4) to Historic status</a>", Internet-Draft draft-troan-v6ops-6to4-to-historic-01, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-v6ops-v6-aaaa-whitelisting-implications">[I-D.ietf-v6ops-v6-aaaa-whitelisting-implications]</b></td>
<td class="top">
<a>Livingood, J</a>, "<a href="http://tools.ietf.org/html/draft-ietf-v6ops-v6-aaaa-whitelisting-implications-08">Considerations for Transitioning Content to IPv6</a>", Internet-Draft draft-ietf-v6ops-v6-aaaa-whitelisting-implications-08, November 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.chen-mif-happy-eyeballs-extension">[I-D.chen-mif-happy-eyeballs-extension]</b></td>
<td class="top">
<a>Chen, G</a>, <a>Williams, C</a>, <a>Wing, D</a> and <a>A Yourtchenko</a>, "<a href="http://tools.ietf.org/html/draft-chen-mif-happy-eyeballs-extension-03">Happy Eyeballs Extension for Multiple Interfaces</a>", Internet-Draft draft-chen-mif-happy-eyeballs-extension-03, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-6man-rfc3484-revise">[I-D.ietf-6man-rfc3484-revise]</b></td>
<td class="top">
<a>Matsumoto, A</a>, <a>Kato, J</a>, <a>Fujisaki, T</a> and <a>T Chown</a>, "<a href="http://tools.ietf.org/html/draft-ietf-6man-rfc3484-revise-05">Update to RFC 3484 Default Address Selection for IPv6</a>", Internet-Draft draft-ietf-6man-rfc3484-revise-05, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-behave-v6v4-xlate-stateful">[I-D.ietf-behave-v6v4-xlate-stateful]</b></td>
<td class="top">
<a>Bagnulo, M</a>, <a>Matthews, P</a> and <a>I Beijnum</a>, "<a href="http://tools.ietf.org/html/draft-ietf-behave-v6v4-xlate-stateful-12">Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers</a>", Internet-Draft draft-ietf-behave-v6v4-xlate-stateful-12, July 2010.</td>
</tr>
<tr>
<td class="reference"><b id="Anderson10">[Anderson10]</b></td>
<td class="top">
<a>Anderson, T.</a>, "<a>Measuring and Combating IPv6 Brokenness</a>", 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Tim Chown</span> 
	  <span class="n hidden">
		<span class="family-name">Chown</span>
	  </span>
	</span>
	<span class="org vcardline">University of Southampton </span>
	<span class="adr">
	  <span>Highfield </span>

	  <span class="vcardline">
		<span class="locality">Southampton </span>,  
		<span class="region">Hampshire </span> 
		<span class="code">SO17 1BJ </span>
	  </span>
	  <span class="country-name vcardline">United Kingdom </span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:tjc@ecs.soton.ac.uk%20">tjc@ecs.soton.ac.uk </a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Stig Venaas</span> 
	  <span class="n hidden">
		<span class="family-name">Venaas</span>
	  </span>
	</span>
	<span class="org vcardline">Cisco Systems</span>
	<span class="adr">
	  <span>Tasman Drive</span>

	  <span class="vcardline">
		<span class="locality">San Jose</span>,  
		<span class="region">CA</span> 
		<span class="code">95134</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:stig@cisco.com">stig@cisco.com</a></span>

  </address>
</div>

</body>
</html>