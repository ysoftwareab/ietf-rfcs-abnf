<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Spatial Composition of Metrics</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Spatial Composition of Metrics">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">A. Morton</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">AT&amp;T Labs</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">E. Stephan</td></tr>
<tr><td class="header">Expires: August 28, 2008</td><td class="header">France Telecom Division R&amp;D</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">February 25, 2008</td></tr>
</table></td></tr></table>
<h1><br />Spatial Composition of Metrics<br />draft-ietf-ippm-spatial-composition-06</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on August 28, 2008.</p>

<h3>Abstract</h3>

<p>This memo utilizes IPPM metrics that are applicable to both complete
      paths and sub-paths, and defines relationships to compose a complete
      path metric from the sub-path metrics with some accuracy w.r.t. the
      actual metrics. This is called Spatial Composition in RFC 2330. The memo
      refers to the Framework for Metric Composition, and provides background
      and motivation for combining metrics to derive others. The descriptions
      of several composed metrics and statistics follow.
</p>
<h3>Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p>
<p>In this memo, the characters "&lt;=" should be read as "less than or
      equal to" and "&gt;=" as "greater than or equal to".
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Contributors<br />
<a href="#anchor2">2.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.1.</a>&nbsp;
Motivation<br />
<a href="#anchor4">3.</a>&nbsp;
Scope and Application<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.1.</a>&nbsp;
Scope of work<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.2.</a>&nbsp;
Application<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.3.</a>&nbsp;
Incomplete Information<br />
<a href="#anchor8">4.</a>&nbsp;
Common Specifications for Composed Metrics<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">4.1.</a>&nbsp;
Name: Type-P<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">4.1.1.</a>&nbsp;
Metric Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">4.1.2.</a>&nbsp;
Definition and Metric Units<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">4.1.3.</a>&nbsp;
Discussion and other details<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">4.1.4.</a>&nbsp;
Statistic:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">4.1.5.</a>&nbsp;
Composition Function<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">4.1.6.</a>&nbsp;
Statement of Conjecture and Assumptions<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">4.1.7.</a>&nbsp;
Justification of the Composition Function<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">4.1.8.</a>&nbsp;
Sources of Deviation from the Ground Truth<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">4.1.9.</a>&nbsp;
Specific cases where the conjecture might fail<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">4.1.10.</a>&nbsp;
Application of Measurement Methodology<br />
<a href="#anchor20">5.</a>&nbsp;
One-way Delay Composed Metrics and Statistics<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">5.1.</a>&nbsp;
Name: Type-P-Finite-One-way-Delay-Poisson/Periodic-Stream<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">5.1.1.</a>&nbsp;
Metric Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">5.1.2.</a>&nbsp;
Definition and Metric Units<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor24">5.1.3.</a>&nbsp;
Discussion and other details<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor25">5.2.</a>&nbsp;
Name: Type-P-Finite-Composite-One-way-Delay-Mean<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor26">5.2.1.</a>&nbsp;
Metric Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor27">5.2.2.</a>&nbsp;
Definition and Metric Units of the Mean Statistic<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor28">5.2.3.</a>&nbsp;
Discussion and other details<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor29">5.2.4.</a>&nbsp;
Composition Function: Sum of Means<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor30">5.2.5.</a>&nbsp;
Statement of Conjecture and Assumptions<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor31">5.2.6.</a>&nbsp;
Justification of the Composition Function<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor32">5.2.7.</a>&nbsp;
Sources of Deviation from the Ground Truth<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor33">5.2.8.</a>&nbsp;
Specific cases where the conjecture might fail<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor34">5.2.9.</a>&nbsp;
Application of Measurement Methodology<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor35">5.3.</a>&nbsp;
Name: Type-P-Finite-Composite-One-way-Delay-Minimum<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor36">5.3.1.</a>&nbsp;
Metric Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor37">5.3.2.</a>&nbsp;
Definition and Metric Units of the Mean Statistic<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor38">5.3.3.</a>&nbsp;
Discussion and other details<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor39">5.3.4.</a>&nbsp;
Composition Function: Sum of Means<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor40">5.3.5.</a>&nbsp;
Statement of Conjecture and Assumptions<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor41">5.3.6.</a>&nbsp;
Justification of the Composition Function<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor42">5.3.7.</a>&nbsp;
Sources of Deviation from the Ground Truth<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor43">5.3.8.</a>&nbsp;
Specific cases where the conjecture might fail<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor44">5.3.9.</a>&nbsp;
Application of Measurement Methodology<br />
<a href="#anchor45">6.</a>&nbsp;
Loss Metrics and Statistics<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor46">6.1.</a>&nbsp;
Type-P-Composite-One-way-Packet-Loss-Empirical-Probability<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor47">6.1.1.</a>&nbsp;
Metric Parameters:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor48">6.1.2.</a>&nbsp;
Definition and Metric Units<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor49">6.1.3.</a>&nbsp;
Discussion and other details<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor50">6.1.4.</a>&nbsp;
Statistic: Type-P-One-way-Packet-Loss-Empirical-Probability<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor51">6.1.5.</a>&nbsp;
Composition Function: Composition of Empirical Probabilities<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor52">6.1.6.</a>&nbsp;
Statement of Conjecture and Assumptions<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor53">6.1.7.</a>&nbsp;
Justification of the Composition Function<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor54">6.1.8.</a>&nbsp;
Sources of Deviation from the Ground Truth<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor55">6.1.9.</a>&nbsp;
Specific cases where the conjecture might fail<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor56">6.1.10.</a>&nbsp;
Application of Measurement Methodology<br />
<a href="#anchor57">7.</a>&nbsp;
Delay Variation Metrics and Statistics<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor58">7.1.</a>&nbsp;
Name: Type-P-One-way-pdv-refmin-Poisson/Periodic-Stream<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor59">7.1.1.</a>&nbsp;
Metric Parameters:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor60">7.1.2.</a>&nbsp;
Definition and Metric Units<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor61">7.1.3.</a>&nbsp;
Discussion and other details<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor62">7.1.4.</a>&nbsp;
Statistics: Mean, Variance, Skewness, Quanitle<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor63">7.1.5.</a>&nbsp;
Composition Functions:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor66">7.1.6.</a>&nbsp;
Statement of Conjecture and Assumptions<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor67">7.1.7.</a>&nbsp;
Justification of the Composition Function<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor68">7.1.8.</a>&nbsp;
Sources of Deviation from the Ground Truth<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor69">7.1.9.</a>&nbsp;
Specific cases where the conjecture might fail<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor70">7.1.10.</a>&nbsp;
Application of Measurement Methodology<br />
<a href="#anchor71">8.</a>&nbsp;
Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor72">8.1.</a>&nbsp;
Denial of Service Attacks<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor73">8.2.</a>&nbsp;
User Data Confidentiality<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor74">8.3.</a>&nbsp;
Interference with the metrics<br />
<a href="#IANA">9.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor75">10.</a>&nbsp;
Issues (Open and Closed)<br />
<a href="#Acknowledgements">11.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">12.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">12.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">12.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Contributors</h3>

<p>Thus far, the following people have contributed useful ideas,
      suggestions, or the text of sections that have been incorporated into
      this memo:
</p>
<p>- Phil Chimento &lt;vze275m9@verizon.net&gt;
</p>
<p>- Reza Fardid &lt;RFardid@Covad.COM&gt;
</p>
<p>- Roman Krzanowski &lt;roman.krzanowski@verizon.com&gt;
</p>
<p>- Maurizio Molina &lt;maurizio.molina@dante.org.uk&gt;
</p>
<p>- Al Morton &lt;acmorton@att.com&gt;
</p>
<p>- Emile Stephan &lt;emile.stephan@orange-ftgroup.com&gt;
</p>
<p>- Lei Liang &lt;L.Liang@surrey.ac.uk&gt;
</p>
<p>- Dave Hoeflin &lt;dhoeflin@att.com&gt;
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Introduction</h3>

<p>The IPPM framework <a class='info' href='#RFC2330'>[RFC2330]<span> (</span><span class='info'>Paxson, V., Almes, G., Mahdavi, J., and M. Mathis, &ldquo;Framework for IP Performance Metrics,&rdquo; May&nbsp;1998.</span><span>)</span></a> describes two forms
      of metric composition, spatial and temporal. The new composition
      framework <a class='info' href='#I-D.ietf-ippm-framework-compagg'>[I&#8209;D.ietf&#8209;ippm&#8209;framework&#8209;compagg]<span> (</span><span class='info'>Morton, A., &ldquo;Framework for Metric Composition,&rdquo; December&nbsp;2009.</span><span>)</span></a> expands
      and further qualifies these original forms into three categories. This
      memo describes Spatial Composition, one of the categories of metrics
      under the umbrella of the composition framework.
</p>
<p>Spatial composition encompasses the definition of performance metrics
      that are applicable to a complete path, based on metrics collected on
      various sub-paths.
</p>
<p>The main purpose of this memo is to define the deterministic
      functions that yield the complete path metrics using metrics of the
      sub-paths. The effectiveness of such metrics is dependent on their
      usefulness in analysis and applicability with practical measurement
      methods.
</p>
<p>The relationships may involve conjecture, and <a class='info' href='#RFC2330'>[RFC2330]<span> (</span><span class='info'>Paxson, V., Almes, G., Mahdavi, J., and M. Mathis, &ldquo;Framework for IP Performance Metrics,&rdquo; May&nbsp;1998.</span><span>)</span></a> lists four points that the metric definitions
      should include: </p>
<ul class="text">
<li>the specific conjecture applied to the metric and assumptions of
          the statistical model of the process being measured (if any, see
          <a class='info' href='#RFC2330'>[RFC2330]<span> (</span><span class='info'>Paxson, V., Almes, G., Mahdavi, J., and M. Mathis, &ldquo;Framework for IP Performance Metrics,&rdquo; May&nbsp;1998.</span><span>)</span></a> section 12),
</li>
<li>a justification of the practical utility of the composition in
          terms of making accurate measurements of the metric on the path,
</li>
<li>a justification of the usefulness of the composition in terms of
          making analysis of the path using A-frame concepts more effective,
          and
</li>
<li>an analysis of how the conjecture could be incorrect.
</li>
</ul><p>Also, <a class='info' href='#RFC2330'>[RFC2330]<span> (</span><span class='info'>Paxson, V., Almes, G., Mahdavi, J., and M. Mathis, &ldquo;Framework for IP Performance Metrics,&rdquo; May&nbsp;1998.</span><span>)</span></a> gives an example where a
      conjecture that the delay of a path is very nearly the sum of the delays
      of the exchanges and clouds of the corresponding path digest. This
      example is particularly relevant to those who wish to assess the
      performance of an Inter-domain path without direct measurement, and the
      performance estimate of the complete path is related to the measured
      results for various sub-paths instead.
</p>
<p>Approximate functions between the sub-path and complete path metrics
      are useful, with knowledge of the circumstances where the relationships
      are/are not applicable. For example, we would not expect that delay
      singletons from each sub-path would sum to produce an accurate estimate
      of a delay singleton for the complete path (unless all the delays were
      essentially constant - very unlikely). However, other delay statistics
      (based on a reasonable sample size) may have a sufficiently large set of
      circumstances where they are applicable.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Motivation</h3>

<p>One-way metrics defined in other IPPM RFCs all assume that the
        measurement can be practically carried out between the source and the
        destination of the interest. Sometimes there are reasons that the
        measurement can not be executed from the source to the destination.
        For instance, the measurement path may cross several independent
        domains that have conflicting policies, measurement tools and methods,
        and measurement time assignment. The solution then may be the
        composition of several sub-path measurements. This means each domain
        performs the One-way measurement on a sub path between two nodes that
        are involved in the complete path following its own policy, using its
        own measurement tools and methods, and using its own measurement
        timing. Under the appropriate conditions, one can combine the sub-path
        One-way metric results to estimate the complete path One-way
        measurement metric with some degree of accuracy.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Scope and Application</h3>

<p>
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Scope of work</h3>

<p>For the primary IPPM metrics of Loss, Delay, and Delay Variation,
        this memo gives a set of metrics for that can be composed from the
        same or similar sub-path metrics. This means that the composition
        function may utilize: </p>
<ul class="text">
<li>the same metric for each sub-path;
</li>
<li>multiple metrics for each sub-path (possibly one that is the
            same as the complete path metric);
</li>
<li>a single sub-path metrics that is different from the complete
            path metric;
</li>
<li>different measurement techniques like active and passive
            (recognizing that PSAMP WG will define capabilities to sample
            packets to support measurement).
</li>
</ul>

<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Application</h3>

<p>The new composition framework <a class='info' href='#I-D.ietf-ippm-framework-compagg'>[I&#8209;D.ietf&#8209;ippm&#8209;framework&#8209;compagg]<span> (</span><span class='info'>Morton, A., &ldquo;Framework for Metric Composition,&rdquo; December&nbsp;2009.</span><span>)</span></a> requires the
        specification of the applicable circumstances for each metric. In
        particular, each section addresses whether the metric:
</p>
<p>Requires the same test packets to traverse all sub-paths, or may
        use similar packets sent and collected separately in each
        sub-path.
</p>
<p>Requires homogeneity of measurement methodologies, or can allow a
        degree of flexibility (e.g., active or passive methods produce the
        "same" metric). Also, the applicable sending streams will be
        specified, such as Poisson, Periodic, or both.
</p>
<p>Needs information or access that will only be available within an
        operator's domain, or is applicable to Inter-domain composition.
</p>
<p>Requires synchronized measurement time intervals in all sub-paths,
        or largely overlapping, or no timing requirements.
</p>
<p>Requires assumption of sub-path independence w.r.t. the metric
        being defined/composed, or other assumptions.
</p>
<p>Has known sources of inaccuracy/error, and identifies the
        sources.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Incomplete Information</h3>

<p>In practice, when measurements cannot be initiated on a sub-path
        (and perhaps the measurement system gives up during the test
        interval), then there will not be a value for the sub-path reported,
        and the entire test result SHOULD be recorded as "undefined". This
        case should be distinguished from the case where the measurement
        system continued to send packets throughout the test interval, but all
        were declared lost.
</p>
<p>When a composed metric requires measurements from sub paths A, B,
        and C, and one or more of the sub-path results are undefined, then the
        composed metric SHOULD also be recorded as undefined.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Common Specifications for Composed Metrics</h3>

<p>To reduce the redundant information presented in the detailed metrics
      sections that follow, this section presents the specifications that are
      common to two or more metrics. The section is organized using the same
      subsections as the individual metrics, to simplify comparisons.
</p>
<p>
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Name: Type-P</h3>

<p>All metrics use the Type-P convention as described in <a class='info' href='#RFC2330'>[RFC2330]<span> (</span><span class='info'>Paxson, V., Almes, G., Mahdavi, J., and M. Mathis, &ldquo;Framework for IP Performance Metrics,&rdquo; May&nbsp;1998.</span><span>)</span></a>. The rest of the name is unique to each
        metric.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
Metric Parameters</h3>

<p></p>
<ul class="text">
<li>Src, the IP address of a host
</li>
<li>Dst, the IP address of a host
</li>
<li>T, a time (start of test interval)
</li>
<li>Tf, a time (end of test interval)
</li>
<li>lambda, a rate in reciprocal seconds (for Poisson
              Streams)
</li>
<li>incT, the nominal duration of inter-packet interval, first
              bit to first bit (for Periodic Streams)
</li>
<li>T0, a time that MUST be selected at random from the interval
              [T, T+dT] to start generating packets and taking measurements
              (for Periodic Streams)
</li>
<li>TstampSrc, the wire time of the packet as measured at
              MP(Src)
</li>
<li>TstampDst, the wire time of the packet as measured at
              MP(Dst), assigned to packets that arrive within a "reasonable"
              time.
</li>
<li>Tmax, a maximum waiting time for packets at the destination,
              set sufficiently long to disambiguate packets with long delays
              from packets that are discarded (lost), thus the distribution of
              delay is not truncated.
</li>
<li>M, the total number of packets sent between T0 and Tf
</li>
<li>N, the total number of packets received at Dst (sent between
              T0 and Tf)
</li>
<li>S, the number of sub-paths involved in the complete Src-Dst
              path
</li>
</ul>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.2"></a><h3>4.1.2.&nbsp;
Definition and Metric Units</h3>

<p>This section is unique for every metric.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.3"></a><h3>4.1.3.&nbsp;
Discussion and other details</h3>

<p>This section is unique for every metric.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.4"></a><h3>4.1.4.&nbsp;
Statistic:</h3>

<p>This section is unique for every metric.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.5"></a><h3>4.1.5.&nbsp;
Composition Function</h3>

<p>This section is unique for every metric.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.6"></a><h3>4.1.6.&nbsp;
Statement of Conjecture and Assumptions</h3>

<p>This section is unique for each metric.
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.7"></a><h3>4.1.7.&nbsp;
Justification of the Composition Function</h3>

<p>It is sometimes impractical to conduct active measurements
          between every Src-Dst pair. Since the full mesh of N measurement
          points grows as N x N, the scope of measurement may be limited by
          testing resources.
</p>
<p>There may be varying limitations on active testing in different
          parts of the network. For example, it may not be possible to collect
          the desired sample size in each test interval when access link speed
          is limited, because of the potential for measurement traffic to
          degrade the user traffic performance. The conditions on a low-speed
          access link may be understood well-enough to permit use of a small
          sample size/rate, while a larger sample size/rate may be used on
          other sub-paths.
</p>
<p>Also, since measurement operations have a real monetary cost,
          there is value in re-using measurements where they are applicable,
          rather than launching new measurements for every possible
          source-destination pair.
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.8"></a><h3>4.1.8.&nbsp;
Sources of Deviation from the Ground Truth</h3>

<p>The measurement packets, each having source and destination
          addresses intended for collection at edges of the sub-path, may take
          a different specific path through the network equipment and parallel
          links when compared to packets with the source and destination
          addresses of the complete path. Therefore, the composition of
          sub-path measurements may differ from the performance experienced by
          packets on the complete path. Multiple measurements employing
          sufficient sub-path address pairs might produce bounds on the extent
          of this error.
</p>
<p>Related to the case of an alternate path described above is the
          case where elements in the measured path are unique to measurement
          system connectivity. For example, a measurement system may use a
          dedicated link to a LAN switch, and packets on the complete path do
          not traverse that link. The performance of such a dedicated link
          would be measured continuously, and its contribution to the sub-path
          metrics SHOULD be minimized as a source of error.
</p>
<p>others???
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.9"></a><h3>4.1.9.&nbsp;
Specific cases where the conjecture might fail</h3>

<p>This section is unique for each metric.
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.10"></a><h3>4.1.10.&nbsp;
Application of Measurement Methodology</h3>

<p>The methodology:
</p>
<p>SHOULD use similar packets sent and collected separately in each
          sub-path.
</p>
<p>Allows a degree of flexibility regarding test stream generation
          (e.g., active or passive methods can produce an equivalent result,
          but the lack of control over the source, timing and correlation of
          passive measurements is much more challenging).
</p>
<p>Poisson and/or Periodic streams are RECOMMENDED.
</p>
<p>Applies to both Inter-domain and Intra-domain composition.
</p>
<p>SHOULD have synchronized measurement time intervals in all
          sub-paths, but largely overlapping intervals MAY suffice.
</p>
<p>REQUIRES assumption of sub-path independence w.r.t. the metric
          being defined/composed.
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
One-way Delay Composed Metrics and Statistics</h3>

<p>
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Name: Type-P-Finite-One-way-Delay-Poisson/Periodic-Stream</h3>

<p>This metric is a necessary element of Delay Composition metrics,
        and its definition does not formally exist elsewhere in IPPM
        literature.
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1"></a><h3>5.1.1.&nbsp;
Metric Parameters</h3>

<p>See the common parameters section above.
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.2"></a><h3>5.1.2.&nbsp;
Definition and Metric Units</h3>

<p>Using the parameters above, we obtain the value of
          Type-P-One-way-Delay singleton as per <a class='info' href='#RFC2679'>[RFC2679]<span> (</span><span class='info'>Almes, G., Kalidindi, S., and M. Zekauskas, &ldquo;A One-way Delay Metric for IPPM,&rdquo; September&nbsp;1999.</span><span>)</span></a>.
</p>
<p>For each packet [i] that has a finite One-way Delay (in other
          words, excluding packets which have undefined one-way delay):
</p>
<p>Type-P-Finite-One-way-Delay-Poisson/Periodic-Stream[i] =
</p>
<p>FiniteDelay[i] = TstampDst - TstampSrc
</p>
<p>The units of measure for this metric are time in seconds,
          expressed in sufficiently low resolution to convey meaningful
          quantitative information. For example, resolution of microseconds is
          usually sufficient.
</p>
<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.3"></a><h3>5.1.3.&nbsp;
Discussion and other details</h3>

<p>The &ldquo;Type-P-Finite-One-way-Delay&rdquo; metric permits
          calculation of the sample mean statistic. This resolves the problem
          of including lost packets in the sample (whose delay is undefined),
          and the issue with the informal assignment of infinite delay to lost
          packets (practical systems can only assign some very large
          value).
</p>
<p>The Finite-One-way-Delay approach handles the problem of lost
          packets by reducing the event space. We consider conditional
          statistics, and estimate the mean one-way delay conditioned on the
          event that all packets in the sample arrive at the destination
          (within the specified waiting time, Tmax). This offers a way to make
          some valid statements about one-way delay, and at the same time
          avoiding events with undefined outcomes. This approach is derived
          from the treatment of lost packets in <a class='info' href='#RFC3393'>[RFC3393]<span> (</span><span class='info'>Demichelis, C. and P. Chimento, &ldquo;IP Packet Delay Variation Metric for IP Performance Metrics (IPPM),&rdquo; November&nbsp;2002.</span><span>)</span></a>, and is similar to <a class='info' href='#Y.1540'>[Y.1540]<span> (</span><span class='info'>ITU-T Recommendation Y.1540, &ldquo;Internet protocol data communication service - IP packet           transfer and availability performance parameters,&rdquo; December &nbsp;2002.</span><span>)</span></a> .
</p>
<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Name: Type-P-Finite-Composite-One-way-Delay-Mean</h3>

<p>This section describes a statistic based on the
        Type-P-Finite-One-way-Delay-Poisson/Periodic-Stream metric.
</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1"></a><h3>5.2.1.&nbsp;
Metric Parameters</h3>

<p>See the common parameters section above.
</p>
<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2"></a><h3>5.2.2.&nbsp;
Definition and Metric Units of the Mean Statistic</h3>

<p>We define
<p>Type-P-Finite-One-way-Delay-Mean =
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>                  N
                 ---
            1    \
MeanDelay = - *   &gt;   (FiniteDelay [i])
            N    /
                 ---
                i = 1</pre></div>
<p>
</p>

<p>where all packets i= 1 through N have finite singleton
          delays.
</p>
<p>The units of measure for this metric are time in seconds,
          expressed in sufficiently low resolution to convey meaningful
          quantitative information. For example, resolution of microseconds is
          usually sufficient.
</p>
<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.3"></a><h3>5.2.3.&nbsp;
Discussion and other details</h3>

<p>The Type-P-Finite-One-way-Delay-Mean metric requires the
          conditional delay distribution described in section 5.1.
</p>
<a name="anchor29"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4"></a><h3>5.2.4.&nbsp;
Composition Function: Sum of Means</h3>

<p>The Type-P-Finite&mdash;Composite-One-way-Delay-Mean, or
          CompMeanDelay, for the complete Source to Destination path can be
          calculated from sum of the Mean Delays of all its S constituent
          sub-paths.
</p>
<p>Then the
<p>Type-P-Finite-Composite-One-way-Delay-Mean
              =
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>                  S
                 ---
                 \
CompMeanDelay =   &gt;   (MeanDelay [i])
                 /
                 ---
                i = 1</pre></div>
<p>
</p>

<a name="anchor30"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.5"></a><h3>5.2.5.&nbsp;
Statement of Conjecture and Assumptions</h3>

<p>The mean of a sufficiently large stream of packets measured on
          each sub-path during the interval [T, Tf] will be representative of
          the ground truth mean of the delay distribution (and the
          distributions themselves are sufficiently independent), such that
          the means may be added to produce an estimate of the complete path
          mean delay.
</p>
<p>It is assumed that the one-way delay distributions of the
          sub-paths and the complete path are continuous.
</p>
<a name="anchor31"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.6"></a><h3>5.2.6.&nbsp;
Justification of the Composition Function</h3>

<p>See the common section.
</p>
<a name="anchor32"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.7"></a><h3>5.2.7.&nbsp;
Sources of Deviation from the Ground Truth</h3>

<p>See the common section.
</p>
<a name="anchor33"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.8"></a><h3>5.2.8.&nbsp;
Specific cases where the conjecture might fail</h3>

<p>If any of the sub-path distributions are bimodal, then the
          measured means may not be stable, and in this case the mean will not
          be a particularly useful statistic when describing the delay
          distribution of the complete path.
</p>
<p>The mean may not be sufficiently robust statistic to produce a
          reliable estimate, or to be useful even if it can be measured.
</p>
<p>others...
</p>
<a name="anchor34"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.9"></a><h3>5.2.9.&nbsp;
Application of Measurement Methodology</h3>

<p>The requirements of the common section apply here as well.
</p>
<a name="anchor35"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Name: Type-P-Finite-Composite-One-way-Delay-Minimum</h3>

<p>This section describes is a statistic based on the
        Type-P-Finite-One-way-Delay-Poisson/Periodic-Stream metric, and the
        composed metric based on that statistic.
</p>
<a name="anchor36"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.1"></a><h3>5.3.1.&nbsp;
Metric Parameters</h3>

<p>See the common parameters section above.
</p>
<a name="anchor37"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.2"></a><h3>5.3.2.&nbsp;
Definition and Metric Units of the Mean Statistic</h3>

<p>We define
<p>Type-P-Finite-One-way-Delay-Minimum =
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>= MinDelay = (FiniteDelay [j])

such that for some index, j, where 1&lt;= j &lt;= N
FiniteDelay[j] &lt;= FiniteDelay[i] for all i

</pre></div>
<p>
</p>

<p>where all packets i= 1 through N have finite singleton
          delays.
</p>
<p>The units of measure for this metric are time in seconds,
          expressed in sufficiently low resolution to convey meaningful
          quantitative information. For example, resolution of microseconds is
          usually sufficient.
</p>
<a name="anchor38"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.3"></a><h3>5.3.3.&nbsp;
Discussion and other details</h3>

<p>The Type-P-Finite-One-way-Delay-Minimum metric requires the
          conditional delay distribution described in section 5.1.3.
</p>
<a name="anchor39"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.4"></a><h3>5.3.4.&nbsp;
Composition Function: Sum of Means</h3>

<p>The Type-P-Finite&mdash;Composite-One-way-Delay-Minimum, or
          CompMinDelay, for the complete Source to Destination path can be
          calculated from sum of the Minimum Delays of all its S constituent
          sub-paths.
</p>
<p>Then the
<p>Type-P-Finite-Composite-One-way-Delay-Minimum
              =
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>                  S
                 ---
                 \
CompMinDelay =    &gt;  (MinDelay [i])
                 /
                 ---
                i = 1</pre></div>
<p>
</p>

<a name="anchor40"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.5"></a><h3>5.3.5.&nbsp;
Statement of Conjecture and Assumptions</h3>

<p>The minimum of a sufficiently large stream of packets measured on
          each sub-path during the interval [T, Tf] will be representative of
          the ground truth minimum of the delay distribution (and the
          distributions themselves are sufficiently independent), such that
          the minima may be added to produce an estimate of the complete path
          minimum delay.
</p>
<p>It is assumed that the one-way delay distributions of the
          sub-paths and the complete path are continuous.
</p>
<a name="anchor41"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.6"></a><h3>5.3.6.&nbsp;
Justification of the Composition Function</h3>

<p>See the common section.
</p>
<a name="anchor42"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.7"></a><h3>5.3.7.&nbsp;
Sources of Deviation from the Ground Truth</h3>

<p>See the common section.
</p>
<a name="anchor43"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.8"></a><h3>5.3.8.&nbsp;
Specific cases where the conjecture might fail</h3>

<p>If the routing on any of the sub-paths is not stable, then the
          measured minimum may not be stable. In this case the composite
          minimum would tend to produce an estimate for the complete path that
          may be too low for the current path.
</p>
<p>others???
</p>
<a name="anchor44"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.9"></a><h3>5.3.9.&nbsp;
Application of Measurement Methodology</h3>

<p>The requirements of the common section apply here as well.
</p>
<a name="anchor45"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Loss Metrics and Statistics</h3>

<p>
</p>
<a name="anchor46"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Type-P-Composite-One-way-Packet-Loss-Empirical-Probability</h3>

<p>
</p>
<a name="anchor47"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.1"></a><h3>6.1.1.&nbsp;
Metric Parameters:</h3>

<p>Same as section 4.1.1.
</p>
<a name="anchor48"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.2"></a><h3>6.1.2.&nbsp;
Definition and Metric Units</h3>

<p>Using the parameters above, we obtain the value of
          Type-P-One-way-Packet-Loss singleton and stream as per <a class='info' href='#RFC2680'>[RFC2680]<span> (</span><span class='info'>Almes, G., Kalidindi, S., and M. Zekauskas, &ldquo;A One-way Packet Loss Metric for IPPM,&rdquo; September&nbsp;1999.</span><span>)</span></a>.
</p>
<p>We obtain a sequence of pairs with elements as follows: </p>
<ul class="text">
<li>TstampSrc, as above
</li>
<li>L, either zero or one, where L=1 indicates loss and L=0
              indicates arrival at the destination within TstampSrc +
              Tmax.
</li>
</ul>

<a name="anchor49"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.3"></a><h3>6.1.3.&nbsp;
Discussion and other details</h3>

<p>
</p>
<a name="anchor50"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.4"></a><h3>6.1.4.&nbsp;
Statistic: Type-P-One-way-Packet-Loss-Empirical-Probability</h3>

<p>Given the stream parameter M, the number of packets sent, we can
          define the Empirical Probability of Loss Statistic (Ep), consistent
          with Average Loss in [RFC2680], as follows:
<p>Type-P-One-way-Packet-Loss-Empirical-Probability
              =
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>           M
          ---
     1    \
Ep = - *   &gt;  (L[i])
     M    /
          ---
         i = 1</pre></div>
<p>
</p>

<p>where all packets i= 1 through M have a value for L.
</p>
<a name="anchor51"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.5"></a><h3>6.1.5.&nbsp;
Composition Function: Composition of Empirical Probabilities</h3>

<p>The Type-P-One-way-Composite-Packet-Loss-Empirical-Probability,
          or CompEp for the complete Source to Destination path can be
          calculated by combining Ep of all its constituent sub-paths (Ep1,
          Ep2, Ep3, ... Epn) as
</p>
<p>
<p>Type-P-Composite-One-way-Packet-Loss-Empirical-Probability
              =
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>CompEp = 1 - {(1 - Ep1) x (1 - Ep2) x (1 - Ep3) x ... x (1 - Epn)}</pre></div>
<p>
</p>

<p>If any Epn is undefined in a particular measurement interval,
          possibly because a measurement system failed to report a value, then
          any CompEp that uses sub-path n for that measurement interval is
          undefined.
</p>
<a name="anchor52"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.6"></a><h3>6.1.6.&nbsp;
Statement of Conjecture and Assumptions</h3>

<p>The empirical probability of loss calculated on a sufficiently
          large stream of packets measured on each sub-path during the
          interval [T, Tf] will be representative of the ground truth
          empirical loss probability (and the probabilities themselves are
          sufficiently independent), such that the sub-path probabilities may
          be combined to produce an estimate of the complete path empirical
          loss probability.
</p>
<a name="anchor53"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.7"></a><h3>6.1.7.&nbsp;
Justification of the Composition Function</h3>

<p>See the common section.
</p>
<a name="anchor54"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.8"></a><h3>6.1.8.&nbsp;
Sources of Deviation from the Ground Truth</h3>

<p>See the common section.
</p>
<a name="anchor55"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.9"></a><h3>6.1.9.&nbsp;
Specific cases where the conjecture might fail</h3>

<p>A concern for loss measurements combined in this way is that root
          causes may be correlated to some degree.
</p>
<p>For example, if the links of different networks follow the same
          physical route, then a single catastrophic event like a fire in a
          tunnel could cause an outage or congestion on remaining paths in
          multiple networks. Here it is important to ensure that measurements
          before the event and after the event are not combined to estimate
          the composite performance.
</p>
<p>Or, when traffic volumes rise due to the rapid spread of an
          email-born worm, loss due to queue overflow in one network may help
          another network to carry its traffic without loss.
</p>
<p>others...
</p>
<a name="anchor56"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.10"></a><h3>6.1.10.&nbsp;
Application of Measurement Methodology</h3>

<p>See the common section.
</p>
<a name="anchor57"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Delay Variation Metrics and Statistics</h3>

<p>
</p>
<a name="anchor58"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Name: Type-P-One-way-pdv-refmin-Poisson/Periodic-Stream</h3>

<p>This packet delay variation (PDV) metric is a necessary element of
        Composed Delay Variation metrics, and its definition does not formally
        exist elsewhere in IPPM literature.
</p>
<a name="anchor59"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.1"></a><h3>7.1.1.&nbsp;
Metric Parameters:</h3>

<p>In addition to the parameters of section 4.1.1:</p>
<ul class="text">
<li>TstampSrc[i], the wire time of packet[i] as measured at
              MP(Src) (measurement point at the source)
</li>
<li>TstampDst[i], the wire time of packet[i] as measured at
              MP(Dst), assigned to packets that arrive within a "reasonable"
              time.
</li>
<li>B, a packet length in bits
</li>
<li>F, a selection function unambiguously defining the packets
              from the stream that are selected for the packet-pair
              computation of this metric. F(first packet), the first packet of
              the pair, MUST have a valid Type-P-Finite-One-way-Delay less
              than Tmax (in other words, excluding packets which have
              undefined one-way delay) and MUST have been transmitted during
              the interval T, Tf. The second packet in the pair, F(second
              packet) MUST be the packet with the minimum valid value of
              Type-P-Finite-One-way-Delay for the stream, in addition to the
              criteria for F(first packet). If multiple packets have equal
              minimum Type-P-Finite-One-way-Delay values, then the value for
              the earliest arriving packet SHOULD be used.
</li>
<li>MinDelay, the Type-P-Finite-One-way-Delay value for F(second
              packet) given above.
</li>
<li>N, the number of packets received at the Destination meeting
              the F(first packet) criteria.
</li>
</ul>

<a name="anchor60"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.2"></a><h3>7.1.2.&nbsp;
Definition and Metric Units</h3>

<p>Using the definition above in section 5.1.2, we obtain the value
          of Type-P-Finite-One-way-Delay-Poisson/Periodic-Stream[i], the
          singleton for each packet[i] in the stream (a.k.a.
          FiniteDelay[i]).
</p>
<p>For each packet[i] that meets the F(first packet) criteria given
          above: Type-P-One-way-pdv-refmin-Poisson/Periodic-Stream[i] =
</p>
<p>PDV[i] = FiniteDelay[i] &ndash; MinDelay
</p>
<p>where PDV[i] is in units of time in seconds, expressed in
          sufficiently low resolution to convey meaningful quantitative
          information. For example, resolution of microseconds is usually
          sufficient.
</p>
<a name="anchor61"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.3"></a><h3>7.1.3.&nbsp;
Discussion and other details</h3>

<p>This metric produces a sample of delay variation normalized to
          the minimum delay of the sample. The resulting delay variation
          distribution is independent of the sending sequence (although
          specific FiniteDelay values within the distribution may be
          correlated, depending on various stream parameters such as packet
          spacing). This metric is equivalent to the IP Packet Delay Variation
          parameter defined in <a class='info' href='#Y.1540'>[Y.1540]<span> (</span><span class='info'>ITU-T Recommendation Y.1540, &ldquo;Internet protocol data communication service - IP packet           transfer and availability performance parameters,&rdquo; December &nbsp;2002.</span><span>)</span></a>.
</p>
<a name="anchor62"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.4"></a><h3>7.1.4.&nbsp;
Statistics: Mean, Variance, Skewness, Quanitle</h3>

<p>We define the mean PDV as follows (where all packets i= 1 through
          N have a value for PDV[i]):
</p>
<p>Type-P-One-way-pdv-refmin-Mean = MeanPDV =
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>      N
     ---
1    \
- *   &gt;   (PDV[i])
N    /
     ---
    i = 1</pre></div>
<p>
</p>
<p>We define the variance of PDV as follows:
</p>
<p>Type-P-One-way-pdv-refmin-Variance = VarPDV =
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>          N
         ---
   1     \                      2
-------   &gt;   (PDV[i] - MeanPDV)
(N - 1)  /
         ---
        i = 1</pre></div>
<p>
</p>
<p>
</p>
<p>We define the skewness of PDV as follows:
</p>
<p>Type-P-One-way-pdv-refmin-Skewness = SkewPDV
            =
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>     N
    ---                        3
    \     /                  \
     &gt;   |  PDV[i]- MeanPDV  |
    /     \                 /
    ---
   i = 1
-----------------------------------
    /                         \
   |                  ( 3/2 )  |
    \ (N - 1) * VarPDV        /</pre></div>
<p>
</p>
<p>
</p>
<p>We define the Quantile of the IPDVRefMin sample as the value
          where the specified fraction of singletons is less than the given
          value.
</p>
<a name="anchor63"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.5"></a><h3>7.1.5.&nbsp;
Composition Functions:</h3>

<p>This section gives two alternative composition functions. The
          objective is to estimate a quantile of the complete path delay
          variation distribution. The composed quantile will be estimated
          using information from the sub-path delay variation
          distributions.
</p>
<a name="anchor64"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.5.1"></a><h3>7.1.5.1.&nbsp;
Approximate Convolution</h3>

<p>The Type-P-Finite-One-way-Delay-Poisson/Periodic-Stream samples
            from each sub-path are summarized as a histogram with 1 ms bins
            representing the one-way delay distribution.
</p>
<p>From [TBP], the distribution of the sum of independent random
            variables can be derived using the relation:
</p>
<p>
<p>Type-P-Composite-One-way-pdv-refmin-quantile-a
                =
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>                     /  /
P(X + Y + Z &lt;= a) = |  | P(X &lt;= a-y-z) * P(Y = y) * P(Z = z) dy dz
                   /  /
                   z  y</pre></div>
<p>where X, Y, and Z are random variables representing
                the delay variation distributions of the sub-paths of the
                complete path (in this case, there are three sub-paths), and a
                is the quantile of interest. Note dy and dz indicate partial
                integration here.
</p>This relation can be used to compose a quantile of
            interest for the complete path from the sub-path delay
            distributions. The histograms with 1 ms bins are discrete
            approximations of the delay distributions.

<a name="anchor65"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.5.2"></a><h3>7.1.5.2.&nbsp;
Normal Power Approximation</h3>

<p>Type-P-One-way-Composite-pdv-refmin-NPA for the complete Source
            to Destination path can be calculated by combining statistics of
            all the constituent sub-paths in the following process:
</p>
<p>&lt; see <a class='info' href='#Y.1541'>[Y.1541]<span> (</span><span class='info'>ITU-T Recommendation Y.1541, &ldquo;Network Performance Objectives for IP-based Services,&rdquo; February &nbsp;2006.</span><span>)</span></a> clause 8 and Appendix X
            &gt;
</p>
<a name="anchor66"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.6"></a><h3>7.1.6.&nbsp;
Statement of Conjecture and Assumptions</h3>

<p>The delay distribution of a sufficiently large stream of packets
          measured on each sub-path during the interval [T, Tf] will be
          sufficiently stationary and the sub-path distributions themselves
          are sufficiently independent, so that summary information describing
          the sub-path distributions can be combined to estimate the delay
          distribution of complete path.
</p>
<p>It is assumed that the one-way delay distributions of the
          sub-paths and the complete path are continuous.
</p>
<a name="anchor67"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.7"></a><h3>7.1.7.&nbsp;
Justification of the Composition Function</h3>

<p>See the common section.
</p>
<a name="anchor68"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.8"></a><h3>7.1.8.&nbsp;
Sources of Deviation from the Ground Truth</h3>

<p>In addition to the common deviations, a few additional sources
          exist here. For one, very tight distributions with range on the
          order of a few milliseconds are not accurately represented by a
          histogram with 1 ms bins. This size was chosen assuming an implicit
          requirement on accuracy: errors of a few milliseconds are acceptable
          when assessing a composed distribution quantile.
</p>
<p>Also, summary statistics cannot describe the subtleties of an
          empirical distribution exactly, especially when the distribution is
          very different from a classical form. Any procedure that uses these
          statistics alone may incur error.
</p>
<a name="anchor69"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.9"></a><h3>7.1.9.&nbsp;
Specific cases where the conjecture might fail</h3>

<p>If the delay distributions of the sub-paths are somehow
          correlated, then neither of these composition functions will be
          reliable estimators of the complete path distribution.
</p>
<p>In practice, sub-path delay distributions with extreme outliers
          have increased the error of the composed metric estimate.
</p>
<a name="anchor70"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.10"></a><h3>7.1.10.&nbsp;
Application of Measurement Methodology</h3>

<p>See the common section.
</p>
<a name="anchor71"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>
</p>
<a name="anchor72"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
Denial of Service Attacks</h3>

<p>This metric requires a stream of packets sent from one host
        (source) to another host (destination) through intervening networks.
        This method could be abused for denial of service attacks directed at
        destination and/or the intervening network(s).
</p>
<p>Administrators of source, destination, and the intervening
        network(s) should establish bilateral or multi-lateral agreements
        regarding the timing, size, and frequency of collection of sample
        metrics. Use of this method in excess of the terms agreed between the
        participants may be cause for immediate rejection or discard of
        packets or other escalation procedures defined between the affected
        parties.
</p>
<a name="anchor73"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
User Data Confidentiality</h3>

<p>Active use of this method generates packets for a sample, rather
        than taking samples based on user data, and does not threaten user
        data confidentiality. Passive measurement must restrict attention to
        the headers of interest. Since user payloads may be temporarily stored
        for length analysis, suitable precautions MUST be taken to keep this
        information safe and confidential. In most cases, a hashing function
        will produce a value suitable for payload comparisons.
</p>
<a name="anchor74"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3"></a><h3>8.3.&nbsp;
Interference with the metrics</h3>

<p>It may be possible to identify that a certain packet or stream of
        packets is part of a sample. With that knowledge at the destination
        and/or the intervening networks, it is possible to change the
        processing of the packets (e.g. increasing or decreasing delay) that
        may distort the measured performance. It may also be possible to
        generate additional packets that appear to be part of the sample
        metric. These additional packets are likely to perturb the results of
        the sample measurement.
</p>
<p>To discourage the kind of interference mentioned above, packet
        interference checks, such as cryptographic hash, may be used.
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
IANA Considerations</h3>

<p>Metrics defined in this memo will be registered in the IANA IPPM
      METRICS REGISTRY as described in initial version of the registry <a class='info' href='#RFC4148'>[RFC4148]<span> (</span><span class='info'>Stephan, E., &ldquo;IP Performance Metrics (IPPM) Metrics Registry,&rdquo; August&nbsp;2005.</span><span>)</span></a>.
</p>
<a name="anchor75"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Issues (Open and Closed)</h3>

<p>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;Issue:
</p>
<p>What is the relationship between the decomposition and composition
      metrics? Should we put both kinds in one draft to make up a framework?
      The motivation of decomposition is as follows:
</p>
<p>The One-way measurement can provide result to show what the network
      performance between two end hosts is and whether it meets operator
      expectations or not. It cannot provide further information to engineers
      where and how to improve the performance between the source and the
      destination. For instance, if the network performance is not acceptable
      in terms of the One-way measurement, in which part of the network the
      engineers should put their efforts. This question can to be answered by
      decompose the One-way measurement to sub-path measurement to investigate
      the performance of different part of the network.
</p>
<p>Editor&rsquo;s Questions for clarification: What additional
      information would be provided to the decomposition process, beyond the
      measurement of the complete path?
</p>
<p>Is the decomposition described above intended to estimate a metric
      for some/all disjoint sub-paths involved in the complete path?
</p>
<p>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;RESOLUTION:
      treat this topic in a separate memo
</p>
<p>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</p>
<p>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;Issue
</p>
<p>Section 7 defines a new type of metric, a &ldquo;combination&rdquo;
      of metrics for one-way delay and packet loss. The purpose of this metric
      is to link these two primary metrics in a convenient way.
</p>
<p>Readers are asked to comment on the efficiency of the combination
      metric.
</p>
<p>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;RESOLUTION:
      If a delay singleton is recorded as having "undefined" delay when the
      packet does not arrive within the waiting time Tmax, then this
      information is sufficient to determine the fraction of lost packets in
      the sample, and the additional loss indication of this combo is not
      needed.
</p>
<p>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</p>
<p>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
      Issue
</p>
<p>Can we introduce multicast metrics here, without causing too much
      confusion? Should the multicast version of this draft wait until the
      Unicast concepts are stable (or maybe appear in a separate draft)?
</p>
<p>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;RESOLUTION:
      No and Yes.
</p>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Acknowledgements</h3>

<p>
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-ippm-framework-compagg">[I-D.ietf-ippm-framework-compagg]</a></td>
<td class="author-text">Morton, A., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-ippm-framework-compagg-09.txt">Framework for Metric Composition</a>,&rdquo; draft-ietf-ippm-framework-compagg-09 (work in progress), December&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-ippm-framework-compagg-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2330">[RFC2330]</a></td>
<td class="author-text"><a href="mailto:vern@ee.lbl.gov">Paxson, V.</a>, <a href="mailto:almes@advanced.org">Almes, G.</a>, <a href="mailto:mahdavi@psc.edu">Mahdavi, J.</a>, and <a href="mailto:mathis@psc.edu">M. Mathis</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2330">Framework for IP Performance Metrics</a>,&rdquo; RFC&nbsp;2330, May&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2330.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2330.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2330.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2679">[RFC2679]</a></td>
<td class="author-text"><a href="mailto:almes@advanced.org">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org">Kalidindi, S.</a>, and <a href="mailto:matt@advanced.org">M. Zekauskas</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2679">A One-way Delay Metric for IPPM</a>,&rdquo; RFC&nbsp;2679, September&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2679.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2680">[RFC2680]</a></td>
<td class="author-text"><a href="mailto:almes@advanced.org">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org">Kalidindi, S.</a>, and <a href="mailto:matt@advanced.org">M. Zekauskas</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2680">A One-way Packet Loss Metric for IPPM</a>,&rdquo; RFC&nbsp;2680, September&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2680.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3393">[RFC3393]</a></td>
<td class="author-text">Demichelis, C. and P. Chimento, &ldquo;<a href="http://tools.ietf.org/html/rfc3393">IP Packet Delay Variation Metric for IP Performance Metrics (IPPM)</a>,&rdquo; RFC&nbsp;3393, November&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3393.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4148">[RFC4148]</a></td>
<td class="author-text">Stephan, E., &ldquo;<a href="http://tools.ietf.org/html/rfc4148">IP Performance Metrics (IPPM) Metrics Registry</a>,&rdquo; BCP&nbsp;108, RFC&nbsp;4148, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4148.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-ippm-multimetrics">[I-D.ietf-ippm-multimetrics]</a></td>
<td class="author-text">Stephan, E., Liang, L., and A. Morton, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-ippm-multimetrics-12.txt">IP Performance Metrics (IPPM) for spatial and multicast</a>,&rdquo; draft-ietf-ippm-multimetrics-12 (work in progress), September&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-ippm-multimetrics-12.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Y.1540">[Y.1540]</a></td>
<td class="author-text">ITU-T Recommendation Y.1540, &ldquo;Internet protocol data communication service - IP packet
          transfer and availability performance parameters,&rdquo; December &nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="Y.1541">[Y.1541]</a></td>
<td class="author-text">ITU-T Recommendation Y.1541, &ldquo;Network Performance Objectives for IP-based Services,&rdquo; February &nbsp;2006.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Al Morton</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AT&amp;T Labs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">200 Laurel Avenue South</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Middletown,, NJ  07748</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 732 420 1571</td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text">+1 732 368 1192</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:acmorton@att.com">acmorton@att.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://home.comcast.net/~acmacm/">http://home.comcast.net/~acmacm/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Emile Stephan</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France Telecom Division R&amp;D</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">2 avenue Pierre Marzin</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lannion,   F-22307</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text">+33 2 96 05 18 52</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:emile.stephan@orange-ftgroup.com">emile.stephan@orange-ftgroup.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href=""></a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
