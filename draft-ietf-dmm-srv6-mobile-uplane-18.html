<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Segment Routing IPv6 for Mobile User Plane</title>
<meta content="Satoru Matsushima" name="author">
<meta content="Clarence Filsfils" name="author">
<meta content="Miya Kohno" name="author">
<meta content="Pablo Camarillo Garvia" name="author">
<meta content="Daniel Voyer" name="author">
<meta content="Charles E. Perkins" name="author">
<meta content="
       
        This document specifies the applicability of SRv6 (Segment Routing IPv6)
        to the user-plane of mobile networks. The network programming nature
        of SRv6 accomplishes mobile user-plane functions in a simple manner.
        The statelessness of SRv6 and its ability to control both service
        layer path and underlying transport can be beneficial to the mobile
        user-plane, providing flexibility, end-to-end network slicing, and
        SLA control for various applications.
       
    " name="description">
<meta content="xml2rfc 3.12.2" name="generator">
<meta content="draft-ietf-dmm-srv6-mobile-uplane-18" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.12.2
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.7.1
    pycountry 22.1.10
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.6.0
    six 1.16.0
    WeasyPrint 52.5
-->
<link href="/tmp/draft-ietf-dmm-srv6-mobile-uplane-18-r98c48t1.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">SRv6 Mobile User-Plane</td>
<td class="right">February 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Matsushima, et al.</td>
<td class="center">Expires 22 August 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">DMM Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-dmm-srv6-mobile-uplane-18</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-02-18" class="published">18 February 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-08-22">22 August 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">S. Matsushima, <span class="editor">Ed.</span>
</div>
<div class="org">SoftBank</div>
</div>
<div class="author">
      <div class="author-name">C. Filsfils</div>
<div class="org">Cisco Systems, Inc.</div>
</div>
<div class="author">
      <div class="author-name">M. Kohno</div>
<div class="org">Cisco Systems, Inc.</div>
</div>
<div class="author">
      <div class="author-name">P. Camarillo, <span class="editor">Ed.</span>
</div>
<div class="org">Cisco Systems, Inc.</div>
</div>
<div class="author">
      <div class="author-name">D. Voyer</div>
<div class="org">Bell Canada</div>
</div>
<div class="author">
      <div class="author-name">C.E. Perkins</div>
<div class="org">Lupin Lodge</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Segment Routing IPv6 for Mobile User Plane</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">
        This document specifies the applicability of SRv6 (Segment Routing IPv6)
        to the user-plane of mobile networks. The network programming nature
        of SRv6 accomplishes mobile user-plane functions in a simple manner.
        The statelessness of SRv6 and its ability to control both service
        layer path and underlying transport can be beneficial to the mobile
        user-plane, providing flexibility, end-to-end network slicing, and
        SLA control for various applications.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 22 August 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-conventions-and-terminology" class="xref">Conventions and Terminology</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1" class="keepWithNext"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-conventions" class="xref">Conventions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-predefined-srv6-endpoint-be" class="xref">Predefined SRv6 Endpoint Behaviors</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-motivation" class="xref">Motivation</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-3gpp-reference-architecture" class="xref">3GPP Reference Architecture</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-user-plane-modes" class="xref">User-plane modes</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-traditional-mode" class="xref">Traditional mode</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.1">
                    <p id="section-toc.1-1.5.2.1.2.1.1"><a href="#section-5.1.1" class="xref">5.1.1</a>.  <a href="#name-packet-flow-uplink" class="xref">Packet flow - Uplink</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.2">
                    <p id="section-toc.1-1.5.2.1.2.2.1"><a href="#section-5.1.2" class="xref">5.1.2</a>.  <a href="#name-packet-flow-downlink" class="xref">Packet flow - Downlink</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-enhanced-mode" class="xref">Enhanced mode</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.1">
                    <p id="section-toc.1-1.5.2.2.2.1.1"><a href="#section-5.2.1" class="xref">5.2.1</a>.  <a href="#name-packet-flow-uplink-2" class="xref">Packet flow - Uplink</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.2">
                    <p id="section-toc.1-1.5.2.2.2.2.1"><a href="#section-5.2.2" class="xref">5.2.2</a>.  <a href="#name-packet-flow-downlink-2" class="xref">Packet flow - Downlink</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.3">
                    <p id="section-toc.1-1.5.2.2.2.3.1"><a href="#section-5.2.3" class="xref">5.2.3</a>.  <a href="#name-scalability" class="xref">Scalability</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-enhanced-mode-with-unchange" class="xref">Enhanced mode with unchanged gNB GTP behavior</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.1">
                    <p id="section-toc.1-1.5.2.3.2.1.1"><a href="#section-5.3.1" class="xref">5.3.1</a>.  <a href="#name-interworking-with-ipv6-gtp" class="xref">Interworking with IPv6 GTP</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.2">
                    <p id="section-toc.1-1.5.2.3.2.2.1"><a href="#section-5.3.2" class="xref">5.3.2</a>.  <a href="#name-interworking-with-ipv4-gtp" class="xref">Interworking with IPv4 GTP</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.3">
                    <p id="section-toc.1-1.5.2.3.2.3.1"><a href="#section-5.3.3" class="xref">5.3.3</a>.  <a href="#name-extensions-to-the-interwork" class="xref">Extensions to the interworking mechanisms</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="xref">5.4</a>.  <a href="#name-srv6-drop-in-interworking" class="xref">SRv6 Drop-in Interworking</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-srv6-segment-endpoint-mobil" class="xref">SRv6 Segment Endpoint Mobility Behaviors</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-argsmobsession" class="xref">Args.Mob.Session</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-endmap" class="xref">End.MAP</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="xref">6.3</a>.  <a href="#name-endmgtp6d" class="xref">End.M.GTP6.D</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="xref">6.4</a>.  <a href="#name-endmgtp6ddi" class="xref">End.M.GTP6.D.Di</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5">
                <p id="section-toc.1-1.6.2.5.1"><a href="#section-6.5" class="xref">6.5</a>.  <a href="#name-endmgtp6e" class="xref">End.M.GTP6.E</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.6">
                <p id="section-toc.1-1.6.2.6.1"><a href="#section-6.6" class="xref">6.6</a>.  <a href="#name-endmgtp4e" class="xref">End.M.GTP4.E</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.7">
                <p id="section-toc.1-1.6.2.7.1"><a href="#section-6.7" class="xref">6.7</a>.  <a href="#name-hmgtp4d" class="xref">H.M.GTP4.D</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.8">
                <p id="section-toc.1-1.6.2.8.1"><a href="#section-6.8" class="xref">6.8</a>.  <a href="#name-endlimit-rate-limiting-beha" class="xref">End.Limit: Rate Limiting behavior</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-srv6-supported-3gpp-pdu-ses" class="xref">SRv6 supported 3GPP PDU session types</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-network-slicing-considerati" class="xref">Network Slicing Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-control-plane-consideration" class="xref">Control Plane Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-acknowledgements" class="xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="xref">13</a>. <a href="#name-contributors" class="xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="xref">14</a>. <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.1">
                <p id="section-toc.1-1.14.2.1.1"><a href="#section-14.1" class="xref">14.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.2">
                <p id="section-toc.1-1.14.2.2.1"><a href="#section-14.2" class="xref">14.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-A" class="xref">Appendix A</a>.  <a href="#name-implementations" class="xref">Implementations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-B" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1"> In mobile networks, mobility systems provide
        connectivity over a wireless link to stationary and non-stationary nodes.
        The user-plane establishes a tunnel between the mobile node and its anchor
        node over IP-based backhaul and core networks.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2"> This document specifies the applicability of SRv6 (Segment
        Routing IPv6) to mobile networks.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">Segment Routing <span>[<a href="#RFC8402" class="xref">RFC8402</a>]</span> is a source routing architecture: a node steers a packet through an ordered list of instructions called "segments". A segment can represent any instruction, topological or service based.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">SRv6 applied to mobile networks enables a source-routing based
        mobile architecture, where operators can explicitly indicate a route
        for the packets to and from the mobile node.  The SRv6 Endpoint nodes
        serve as mobile user-plane anchors.<a href="#section-1-4" class="pilcrow">¶</a></p>
</section>
<section id="section-2">
      <h2 id="name-conventions-and-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions-and-terminology" class="section-name selfRef">Conventions and Terminology</a>
      </h2>
<p id="section-2-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
     "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
     "OPTIONAL" in this document are to be interpreted as described in
     <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>.<a href="#section-2-1" class="pilcrow">¶</a></p>
<div id="terms">
<section id="section-2.1">
        <h3 id="name-terminology">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
        </h3>
<ul class="compact">
<li class="compact" id="section-2.1-1.1">CNF: Cloud-native Network Function<a href="#section-2.1-1.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.1-1.2">NFV: Network Function Virtualization<a href="#section-2.1-1.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.1-1.3">PDU: Packet Data Unit<a href="#section-2.1-1.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.1-1.4">PDU Session: Context of a UE connects to a mobile network.<a href="#section-2.1-1.4" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.1-1.5">UE: User Equipment<a href="#section-2.1-1.5" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.1-1.6">UPF: User Plane Function<a href="#section-2.1-1.6" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.1-1.7">VNF: Virtual Network Function (including CNFs)<a href="#section-2.1-1.7" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.1-2">The following terms used within this document are defined in
            <span>[<a href="#RFC8402" class="xref">RFC8402</a>]</span>: Segment Routing, SR Domain, Segment ID (SID), SRv6, SRv6
            SID, Active Segment, SR Policy, Prefix SID, Adjacency SID and Binding SID.<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.1-3"> The following terms used within this document are defined in
            <span>[<a href="#RFC8754" class="xref">RFC8754</a>]</span>: SRH, SR Source Node, Transit Node, SR Segment Endpoint
            Node and Reduced SRH.<a href="#section-2.1-3" class="pilcrow">¶</a></p>
<p id="section-2.1-4">The following terms used within this document are defined in <span>[<a href="#RFC8986" class="xref">RFC8986</a>]</span>: NH, SL, FIB, SA, DA, SRv6 SID behavior, SRv6 Segment Endpoint Behavior.<a href="#section-2.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conventions">
<section id="section-2.2">
        <h3 id="name-conventions">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-conventions" class="section-name selfRef">Conventions</a>
        </h3>
<p id="section-2.2-1">An SR Policy is resolved to a SID list. A SID list is represented as &lt;S1, S2, S3&gt; where S1 is the first SID to visit, S2 is the second SID to visit, and S3 is the last SID to visit along the SR path.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">(SA,DA) (S3, S2, S1; SL) represents an IPv6 packet with:<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-2.2-3.1">Source Address is SA, Destination Address is DA, and next-header is SRH<a href="#section-2.2-3.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-3.2">SRH with SID list &lt;S1, S2, S3&gt; with Segments Left = SL<a href="#section-2.2-3.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-3.3">Note the difference between the &lt;&gt; and () symbols: &lt;S1, S2, S3&gt; represents a SID list where S1 is the first SID and S3 is the last SID to traverse. (S3, S2, S1; SL) represents the same SID list but encoded in the SRH format where the rightmost SID in the SRH is the first SID and the leftmost SID in the SRH is the last SID. When referring to an SR policy in a high-level use-case, it is simpler to use the &lt;S1, S2, S3&gt; notation. When referring to an illustration of the detailed packet behavior, the (S3, S2, S1; SL) notation is more convenient.<a href="#section-2.2-3.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-3.4">The payload of the packet is omitted.<a href="#section-2.2-3.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.2-4">SRH[n]: A shorter representation of Segment List[n], as defined in <span>[<a href="#RFC8754" class="xref">RFC8754</a>]</span>. SRH[SL] can be different from the DA of the IPv6 header.<a href="#section-2.2-4" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-2.2-5.1"> gNB::1 is an IPv6 address (SID) assigned to the gNB.<a href="#section-2.2-5.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-5.2"> U1::1 is an IPv6 address (SID) assigned to UPF1.<a href="#section-2.2-5.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-5.3"> U2::1 is an IPv6 address (SID) assigned to UPF2.<a href="#section-2.2-5.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-5.4"> U2:: is the Locator of UPF2.<a href="#section-2.2-5.4" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="srv6-funcs">
<section id="section-2.3">
        <h3 id="name-predefined-srv6-endpoint-be">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-predefined-srv6-endpoint-be" class="section-name selfRef">Predefined SRv6 Endpoint Behaviors</a>
        </h3>
<p id="section-2.3-1">
     The following SRv6 Endpoint Behaviors are defined in
     <span>[<a href="#RFC8986" class="xref">RFC8986</a>]</span>.<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-2.3-2.1"> End.DT4: Decapsulation and Specific IPv4 Table Lookup<a href="#section-2.3-2.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.3-2.2"> End.DT6: Decapsulation and Specific IPv6 Table Lookup<a href="#section-2.3-2.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.3-2.3"> End.DT46: Decapsulation and Specific IP Table Lookup<a href="#section-2.3-2.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.3-2.4"> End.DX4: Decapsulation and IPv4 Cross-Connect<a href="#section-2.3-2.4" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.3-2.5"> End.DX6: Decapsulation and IPv6 Cross-Connect<a href="#section-2.3-2.5" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.3-2.6"> End.DX2: Decapsulation and L2 Cross-Connect<a href="#section-2.3-2.6" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.3-2.7"> End.T: Endpoint with specific IPv6 Table Lookup<a href="#section-2.3-2.7" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.3-3">
     This document defines new SRv6 Segment Endpoint Behaviors in <a href="#srv6_functions" class="xref">Section 6</a>.<a href="#section-2.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
<div id="motivations">
<section id="section-3">
      <h2 id="name-motivation">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-motivation" class="section-name selfRef">Motivation</a>
      </h2>
<p id="section-3-1"> Mobile networks are becoming more challenging to operate.
 On one hand, traffic is constantly growing, and latency requirements
 are tighter; on the other-hand, there are new use-cases like
 distributed NFVi that are also challenging network operations.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2"> The current architecture of mobile networks does not take into account
 the underlying transport.  The user-plane is rigidly fragmented into
 radio access, core and service networks, connected by tunneling
 according to user-plane roles such as access and anchor nodes. These
 factors have made it difficult for the operator
 to optimize and operate the data-path.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3"> In the meantime,
 applications have shifted to use IPv6, and network operators
 have started adopting IPv6 as their IP transport.
        SRv6, the IPv6 dataplane instantiation of Segment Routing
 <span>[<a href="#RFC8402" class="xref">RFC8402</a>]</span>, integrates both
 the application data-path and the underlying transport layer into
 a single protocol, allowing operators to optimize the network in a
 simplified manner and removing forwarding state from the network. It is also
  suitable for virtualized environments, like VNF/CNF to VNF/CNF networking. SRv6 has been deployed in dozens of networks <span>[<a href="#I-D.matsushima-spring-srv6-deployment-status" class="xref">I-D.matsushima-spring-srv6-deployment-status</a>]</span>.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4"> SRv6 defines the network-programming concept <span>[<a href="#RFC8986" class="xref">RFC8986</a>]</span>.
  Applied to mobility, SRv6 can provide the user-plane behaviors needed
  for mobility management.  SRv6 takes advantage of the underlying transport
  awareness and flexibility together with the ability to also include services to optimize the end-to-end mobile dataplane.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">The use-cases for SRv6 mobility are discussed in <span>[<a href="#I-D.camarilloelmalky-springdmm-srv6-mob-usecases" class="xref">I-D.camarilloelmalky-springdmm-srv6-mob-usecases</a>]</span>, and the architetural benefits are discussed in <span>[<a href="#I-D.kohno-dmm-srv6mob-arch" class="xref">I-D.kohno-dmm-srv6mob-arch</a>]</span>.<a href="#section-3-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="scenarios">
<section id="section-4">
      <h2 id="name-3gpp-reference-architecture">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-3gpp-reference-architecture" class="section-name selfRef">3GPP Reference Architecture</a>
      </h2>
<p id="section-4-1"> This section presents a reference architecture and possible deployment
        scenarios.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2"> <a href="#fig_5g-ref-arch" class="xref">Figure 1</a> shows a reference diagram from
        the 5G packet core architecture <span>[<a href="#TS.23501" class="xref">TS.23501</a>]</span>.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3"> The user plane described in this document does not depend on any
 specific architecture.  The 5G packet core architecture as shown is
 based on the latest 3GPP standards at the time of writing this draft.<a href="#section-4-3" class="pilcrow">¶</a></p>
<span id="name-3gpp-5g-reference-architect"></span><div id="fig_5g-ref-arch">
<figure id="figure-1">
        <div class="alignCenter art-text artwork" id="section-4-4.1">
<pre>
                                +-----+
                                | AMF |
                               /+-----+
                              /    | [N11]
                       [N2]  /  +-----+
                     +------/   | SMF |
                    /           +-----+
                   /              / \
                  /              /   \  [N4]
                 /              /     \                    ________
                /              /       \                  /        \
+--+      +-----+ [N3] +------+  [N9]  +------+  [N6]    /          \
|UE|------| gNB |------| UPF1 |--------| UPF2 |--------- \    DN    /
+--+      +-----+      +------+        +------+           \________/
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-3gpp-5g-reference-architect" class="selfRef">3GPP 5G Reference Architecture</a>
        </figcaption></figure>
</div>
<ul class="compact">
<li class="compact" id="section-4-5.1">UE: User Endpoint<a href="#section-4-5.1" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-4-5.2">gNB: gNodeB with N3 interface towards packet core (and N2 for control plane)<a href="#section-4-5.2" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-4-5.3">UPF1: UPF with Interfaces N3 and N9 (and N4 for control plane)<a href="#section-4-5.3" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-4-5.4">UPF2: UPF with Interfaces N9 and N6 (and N4 for control plane)<a href="#section-4-5.4" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-4-5.5">SMF: Session Management Function<a href="#section-4-5.5" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-4-5.6">AMF: Access and Mobility Management Function<a href="#section-4-5.6" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-4-5.7">DN: Data Network e.g. operator services, Internet access<a href="#section-4-5.7" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-4-6"> This reference diagram does not depict a UPF that is only connected
 to N9 interfaces, although the mechanisms defined in this document
 also work in such case.<a href="#section-4-6" class="pilcrow">¶</a></p>
<p id="section-4-7"> Each session from a UE gets assigned to a UPF. Sometimes multiple
        UPFs may be used, providing richer service functions.  A UE gets its
 IP address from the DHCP block of its UPF.
        The UPF advertises that IP address block toward the Internet,
 ensuring that return traffic is routed to the right UPF.<a href="#section-4-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="uplane-functions">
<section id="section-5">
      <h2 id="name-user-plane-modes">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-user-plane-modes" class="section-name selfRef">User-plane modes</a>
      </h2>
<p id="section-5-1">This section introduces an SRv6 based mobile user-plane.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2"> In order to simplify the adoption of SRv6, we present two different
 "modes" that vary with respect to the use of SRv6.
 The first one is the "Traditional mode", which inherits the
 current 3GPP mobile architecture. In this mode 
 <span><a href="#TS.29281" class="xref">GTP-U protocol</a> [<a href="#TS.29281" class="xref">TS.29281</a>]</span> is replaced by SRv6, however the N3, N9 and N6 interfaces are still point-to-point interfaces with no intermediate waypoints as in the current mobile network architecture.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3"> The second mode is the "Enhanced mode". 
      This is an evolution from the "Traditional mode". In this mode the N3, N9 or N6 interfaces have intermediate waypoints -SIDs- that are used for Traffic Engineering or VNF purposes transparent to 3GPP functionalities. This results in optimal end-to-end policies across the mobile network with transport and services awareness.<a href="#section-5-3" class="pilcrow">¶</a></p>
<p id="section-5-4">In both, the Traditional and the Enhanced modes, we assume that the
      gNB as well as the UPFs are SR-aware (N3, N9 and -potentially- N6
       interfaces are SRv6).<a href="#section-5-4" class="pilcrow">¶</a></p>
<p id="section-5-5">In addition to those two modes, we introduce two mechanisms for interworking with legacy
    access networks (those where the N3 interface is unmodified). In this document we
    introduce them as a variant to the Enhanced mode, however they are equally applicable to the Traditional mode.<a href="#section-5-5" class="pilcrow">¶</a></p>
<p id="section-5-6">One of these mechanisms is designed to interwork with legacy gNBs
 using GTP/IPv4. The second mechanism is designed to interwork with
 legacy gNBs using GTP/IPv6.<a href="#section-5-6" class="pilcrow">¶</a></p>
<p id="section-5-7"> This document uses SRv6 Segment Endpoint Behaviors defined in
 <span>[<a href="#RFC8986" class="xref">RFC8986</a>]</span> as well
 as new SRv6 Segment Endpoint Behaviors designed for the mobile user plane that are defined in this document in <a href="#srv6_functions" class="xref">Section 6</a>.<a href="#section-5-7" class="pilcrow">¶</a></p>
<p id="section-5-8">Note that the modes discussed throughout this section (with the exception of <a href="#drop_in" class="xref">Section 5.4</a>) only have informational purpose to implementors as well as operators deploying this technology. Indeed, it is expected that the operator defines his own operational model that best suits their needs.<a href="#section-5-8" class="pilcrow">¶</a></p>
<div id="traditional_mode">
<section id="section-5.1">
        <h3 id="name-traditional-mode">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-traditional-mode" class="section-name selfRef">Traditional mode</a>
        </h3>
<p id="section-5.1-1"> In the traditional mode, the existing mobile UPFs remain unchanged
     with the sole exception of the use of SRv6 as the data
     plane instead of GTP-U.  There is no impact to the rest of the
     mobile system.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2"> In existing 3GPP mobile networks, a PDU Session is mapped 1-for-1
     with a specific GTP tunnel (TEID). This 1-for-1 mapping is
     mirrored here to replace GTP encapsulation with the SRv6
     encapsulation, while not changing anything else. There will be a unique SRv6 SID
     associated with each PDU Session, and the SID list only contains a single SID.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1-3"> The traditional mode minimizes the changes required to the mobile
     system; hence it is a good starting point for forming a common ground.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1-4"> The gNB/UPF control-plane (N2/N4 interface) is unchanged, specifically
      a single IPv6 address is provided to the gNB. The same control plane signalling 
      is used, and the gNB/UPF decides to use SRv6 based on signaled GTP-U parameters per local policy. The only information from the GTP-U parameters used for the SRv6 policy is the TEID, QFI, and the IPv6 Destination Address.<a href="#section-5.1-4" class="pilcrow">¶</a></p>
<p id="section-5.1-5"> Our example topology is shown in <a href="#fig_traditional" class="xref">Figure 2</a>.
     The gNB and the UPFs are SR-aware.
     In the descriptions of the uplink and downlink packet flow,
     A is an IPv6 address of the UE, and Z is an IPv6 address reachable
     within the Data Network DN.  A new SRv6 Endpoint Behavior, End.MAP, defined
     in <a href="#end-map-function" class="xref">Section 6.2</a>, is used.<a href="#section-5.1-5" class="pilcrow">¶</a></p>
<span id="name-traditional-mode-example-to"></span><div id="fig_traditional">
<figure id="figure-2">
          <div class="alignCenter art-text artwork" id="section-5.1-6.1">
<pre>
                                                           ________
                  SRv6           SRv6                     /        \
+--+      +-----+ [N3] +------+  [N9]  +------+  [N6]    /          \
|UE|------| gNB |------| UPF1 |--------| UPF2 |--------- \    DN    /
+--+      +-----+      +------+        +------+           \________/
         SRv6 node     SRv6 node       SRv6 node
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-traditional-mode-example-to" class="selfRef">Traditional mode - example topology</a>
          </figcaption></figure>
</div>
<div id="traditional_up">
<section id="section-5.1.1">
          <h4 id="name-packet-flow-uplink">
<a href="#section-5.1.1" class="section-number selfRef">5.1.1. </a><a href="#name-packet-flow-uplink" class="section-name selfRef">Packet flow - Uplink</a>
          </h4>
<p id="section-5.1.1-1"> The uplink packet flow is as follows:<a href="#section-5.1.1-1" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.1.1-2">
<pre>
UE_out  : (A,Z)
gNB_out : (gNB, U1::1) (A,Z)     -&gt; H.Encaps.Red &lt;U1::1&gt;
UPF1_out: (gNB, U2::1) (A,Z)     -&gt; End.MAP
UPF2_out: (A,Z)                  -&gt; End.DT4 or End.DT6</pre><a href="#section-5.1.1-2" class="pilcrow">¶</a>
</div>
<p id="section-5.1.1-3"> When the UE packet arrives at the gNB, the gNB performs a
       H.Encaps.Red operation. Since there is only one SID,
       there is no need to push an SRH. gNB only adds an outer IPv6
       header with IPv6 DA U1::1. gNB obtains the SID
       U1::1 from the existing control plane (N2 interface). U1::1 represents an anchoring
        SID specific for that session at UPF1.<a href="#section-5.1.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1.1-4"> When the packet arrives at UPF1, the SID U1::1 is associated with the End.MAP SRv6 Endpoint Behavior. End.MAP replaces U1::1 by U2::1, that
       belongs to the next UPF (U2).<a href="#section-5.1.1-4" class="pilcrow">¶</a></p>
<p id="section-5.1.1-5"> When the packet arrives at UPF2, the SID U2::1 corresponds to
       an End.DT4/End.DT6/End.DT46 SRv6 Endpoint Behavior. UPF2 decapsulates the packet, performs a
       lookup in a specific table associated with that mobile network and
       forwards the packet toward the data network (DN).<a href="#section-5.1.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="traditional_dn">
<section id="section-5.1.2">
          <h4 id="name-packet-flow-downlink">
<a href="#section-5.1.2" class="section-number selfRef">5.1.2. </a><a href="#name-packet-flow-downlink" class="section-name selfRef">Packet flow - Downlink</a>
          </h4>
<p id="section-5.1.2-1">The downlink packet flow is as follows:<a href="#section-5.1.2-1" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.1.2-2">
<pre>
UPF2_in : (Z,A)
UPF2_out: (U2::, U1::2) (Z,A)    -&gt; H.Encaps.Red &lt;U1::2&gt;
UPF1_out: (U2::, gNB::1) (Z,A)   -&gt; End.MAP
gNB_out : (Z,A)                  -&gt; End.DX4, End.DX6, End.DX2
</pre><a href="#section-5.1.2-2" class="pilcrow">¶</a>
</div>
<p id="section-5.1.2-3"> When the packet arrives at the UPF2, the UPF2 maps that flow into
       a PDU Session. This PDU Session is associated with the segment
       endpoint &lt;U1::2&gt;.  UPF2 performs
       a H.Encaps.Red operation, encapsulating the packet into
       a new IPv6 header with no SRH since there is only one SID.<a href="#section-5.1.2-3" class="pilcrow">¶</a></p>
<p id="section-5.1.2-4"> Upon packet arrival on UPF1, the SID U1::2 is a local SID associated with the End.MAP 
       SRv6 Endpoint Behavior. It maps the SID to the next anchoring
       point and replaces U1::2 by gNB::1, that belongs to the next
       hop.<a href="#section-5.1.2-4" class="pilcrow">¶</a></p>
<p id="section-5.1.2-5"> Upon packet arrival on gNB, the SID gNB::1 corresponds to an
       End.DX4, End.DX6 or End.DX2 behavior (depending on the PDU Session Type). The gNB decapsulates the packet,
       removing the IPv6 header and all its extensions headers, and
       forwards the traffic toward the UE.<a href="#section-5.1.2-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="enhanced_mode">
<section id="section-5.2">
        <h3 id="name-enhanced-mode">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-enhanced-mode" class="section-name selfRef">Enhanced mode</a>
        </h3>
<p id="section-5.2-1"> Enhanced mode improves scalability, provides traffic engineering capabilities, and allows service
     programming <span>[<a href="#I-D.ietf-spring-sr-service-programming" class="xref">I-D.ietf-spring-sr-service-programming</a>]</span>,
     thanks to the use of multiple SIDs in the SID list (instead of a direct connectivity in between UPFs with no intermediate waypoints as in Traditional Mode).<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">Thus, the main difference is that the SR policy MAY 
          include SIDs for traffic engineering and service programming
           in addition to the anchoring SIDs at UPFs.<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<p id="section-5.2-3">Additionally in this mode the operator may choose to aggregate several devices under the same SID list (e.g., stationary residential meters connected to the same cell) to improve scalability.<a href="#section-5.2-3" class="pilcrow">¶</a></p>
<p id="section-5.2-4">The gNB/UPF control-plane (N2/N4 interface) is unchanged, specifically
     a single IPv6 address is provided to the gNB. A local policy instructs the gNB to use SRv6.<a href="#section-5.2-4" class="pilcrow">¶</a></p>
<p id="section-5.2-5"> The gNB MAY resolve the IP address received via the control plane into a SID list using a mechanism like PCEP, DNS-lookup, LISP control-plane or others. The resolution mechanism is out of the scope of this document.<a href="#section-5.2-5" class="pilcrow">¶</a></p>
<p id="section-5.2-6"> Note that the SIDs MAY use the arguments Args.Mob.Session if
        required by the UPFs.<a href="#section-5.2-6" class="pilcrow">¶</a></p>
<p id="section-5.2-7"> <a href="#fig_enhanced" class="xref">Figure 3</a> shows an Enhanced mode topology.
     The gNB and the UPF are SR-aware.
     The Figure shows two service segments, S1 and C1.
     S1 represents a VNF in the network, and C1 represents an intermediate router used for Traffic Engineering purposes to enforce a low-latency path in the network.
       Note that neither S1 nor C1 are required to have an N4 interface.<a href="#section-5.2-7" class="pilcrow">¶</a></p>
<span id="name-enhanced-mode-example-topol"></span><div id="fig_enhanced">
<figure id="figure-3">
          <div class="alignCenter art-text artwork" id="section-5.2-8.1">
<pre>
                                 +----+  SRv6               _______
                 SRv6          --| C1 |--[N3]              /       \
+--+    +-----+  [N3]         /  +----+  \  +------+ [N6] /         \
|UE|----| gNB |--       SRv6 /    SRv6    --| UPF1 |------\   DN    /
+--+    +-----+  \      [N3]/      TE       +------+       \_______/
       SRv6 node  \ +----+ /               SRv6 node
                   -| S1 |-
                    +----+
                   SRv6 node
                     VNF
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-enhanced-mode-example-topol" class="selfRef">Enhanced mode - Example topology</a>
          </figcaption></figure>
</div>
<div id="enhanced_uplink">
<section id="section-5.2.1">
          <h4 id="name-packet-flow-uplink-2">
<a href="#section-5.2.1" class="section-number selfRef">5.2.1. </a><a href="#name-packet-flow-uplink-2" class="section-name selfRef">Packet flow - Uplink</a>
          </h4>
<p id="section-5.2.1-1">The uplink packet flow is as follows:<a href="#section-5.2.1-1" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.2.1-2">
<pre>
UE_out  : (A,Z)
gNB_out : (gNB, S1)(U1::1, C1; SL=2)(A,Z)-&gt;H.Encaps.Red&lt;S1,C1,U1::1&gt;
S1_out  : (gNB, C1)(U1::1, C1; SL=1)(A,Z)
C1_out  : (gNB, U1::1)(A,Z)              -&gt;End with PSP
UPF1_out: (A,Z)                          -&gt;End.DT4,End.DT6,End.DT2U
</pre><a href="#section-5.2.1-2" class="pilcrow">¶</a>
</div>
<p id="section-5.2.1-3"> UE sends its packet (A,Z) on a specific bearer to its gNB.
       gNB's control plane associates that session from the UE(A) with
       the IPv6 address B.  gNB's control plane does a
       lookup on B to find the related SID list
       &lt;S1, C1, U1::1&gt;.<a href="#section-5.2.1-3" class="pilcrow">¶</a></p>
<p id="section-5.2.1-4"> When gNB transmits the packet, it contains all the segments of
       the SR policy. The SR policy includes segments for
       traffic engineering (C1) and for service programming (S1).<a href="#section-5.2.1-4" class="pilcrow">¶</a></p>
<p id="section-5.2.1-5"> Nodes S1 and C1 perform their related Endpoint functionality
       and forward the packet.<a href="#section-5.2.1-5" class="pilcrow">¶</a></p>
<p id="section-5.2.1-6"> When the packet arrives at UPF1, the active segment (U1::1) is
       an End.DT4/End.DT6/End.DT2U which performs the decapsulation (removing the
       IPv6 header with all its extension headers) and forwards toward
       the data network.<a href="#section-5.2.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-5.2.2">
          <h4 id="name-packet-flow-downlink-2">
<a href="#section-5.2.2" class="section-number selfRef">5.2.2. </a><a href="#name-packet-flow-downlink-2" class="section-name selfRef">Packet flow - Downlink</a>
          </h4>
<p id="section-5.2.2-1">The downlink packet flow is as follows:<a href="#section-5.2.2-1" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.2.2-2">
<pre>
UPF1_in : (Z,A)                             -&gt;UPF1 maps the flow w/
                                              SID list &lt;C1,S1, gNB&gt;
UPF1_out: (U1::1, C1)(gNB::1, S1; SL=2)(Z,A)-&gt;H.Encaps.Red
C1_out  : (U1::1, S1)(gNB::1, S1; SL=1)(Z,A)
S1_out  : (U1::1, gNB::1)(Z,A)              -&gt;End with PSP
gNB_out : (Z,A)                             -&gt;End.DX4/End.DX6/End.DX2
</pre><a href="#section-5.2.2-2" class="pilcrow">¶</a>
</div>
<p id="section-5.2.2-3">When the packet arrives at the UPF1, the UPF1 maps that
       particular flow into a UE PDU Session. This UE PDU Session is associated
       with the policy &lt;C1, S1, gNB&gt;. The UPF1 performs a
       H.Encaps.Red operation, encapsulating the packet into a
       new IPv6 header with its corresponding SRH.<a href="#section-5.2.2-3" class="pilcrow">¶</a></p>
<p id="section-5.2.2-4">The nodes C1 and S1 perform their related Endpoint processing.<a href="#section-5.2.2-4" class="pilcrow">¶</a></p>
<p id="section-5.2.2-5">Once the packet arrives at the gNB, the IPv6 DA corresponds to
       an End.DX4, End.DX6 or End.DX2 behavior at the gNB (depending on the underlying traffic).
       The gNB decapsulates the packet, removing the IPv6 header,
        and forwards the traffic
       towards the UE. The SID gNB::1 is one example of a SID associated to this service.<a href="#section-5.2.2-5" class="pilcrow">¶</a></p>
<p id="section-5.2.2-6">Note that there are several means to provide the UE session aggregation. The decision on which one to use is a local decision made by the operator. One option is to use the <span><a href="#arguments-for-mobility" class="xref">Args.Mob.Session</a> (<a href="#arguments-for-mobility" class="xref">Section 6.1</a>)</span>. Another option comprises the gNB performing an IP lookup on the inner packet by using the End.DT4, End.DT6, and End.DT2 behaviors.<a href="#section-5.2.2-6" class="pilcrow">¶</a></p>
</section>
<section id="section-5.2.3">
          <h4 id="name-scalability">
<a href="#section-5.2.3" class="section-number selfRef">5.2.3. </a><a href="#name-scalability" class="section-name selfRef">Scalability</a>
          </h4>
<p id="section-5.2.3-1">The Enhanced Mode improves since it allows the aggregation
         of several UEs under the same SID list. For example, in the 
         case of stationary residential meters that are connected 
         to the same cell, all such devices can share the same SID list.
         This improves scalability compared to Traditional Mode 
         (unique SID per UE) and compared to GTP-U (dedicated TEID per UE).<a href="#section-5.2.3-1" class="pilcrow">¶</a></p>
</section>
</section>
</div>
<div id="enhanced_gtp">
<section id="section-5.3">
        <h3 id="name-enhanced-mode-with-unchange">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-enhanced-mode-with-unchange" class="section-name selfRef">Enhanced mode with unchanged gNB GTP behavior</a>
        </h3>
<p id="section-5.3-1"> This section describes two mechanisms for interworking with legacy
     gNBs that still use GTP: one for IPv4, and another for IPv6.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2"> In the interworking scenarios as illustrated in
     <a href="#fig_interworking" class="xref">Figure 4</a>, the gNB does not support SRv6.
     The gNB supports GTP encapsulation over IPv4 or IPv6.  To achieve
     interworking, an SR Gateway (SRGW) entity is added.  The SRGW
     maps the GTP traffic into SRv6.<a href="#section-5.3-2" class="pilcrow">¶</a></p>
<p id="section-5.3-3"> The SRGW is not an anchor point and maintains very little state.
     For this reason,
     both IPv4 and IPv6 methods scale to millions of UEs.<a href="#section-5.3-3" class="pilcrow">¶</a></p>
<span id="name-example-topology-for-interw"></span><div id="fig_interworking">
<figure id="figure-4">
          <div class="alignCenter art-text artwork" id="section-5.3-4.1">
<pre>
                                                          _______
                 IP GTP          SRv6                    /       \
+--+      +-----+ [N3] +------+  [N9]  +------+  [N6]   /         \
|UE|------| gNB |------| SRGW |--------| UPF  |---------\   DN    /
+--+      +-----+      +------+        +------+          \_______/
                      SR Gateway       SRv6 node
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-example-topology-for-interw" class="selfRef">Example topology for interworking</a>
          </figcaption></figure>
</div>
<p id="section-5.3-5">Both of the mechanisms described in this section are applicable to either the Traditional Mode or the Enhanced Mode.<a href="#section-5.3-5" class="pilcrow">¶</a></p>
<section id="section-5.3.1">
          <h4 id="name-interworking-with-ipv6-gtp">
<a href="#section-5.3.1" class="section-number selfRef">5.3.1. </a><a href="#name-interworking-with-ipv6-gtp" class="section-name selfRef">Interworking with IPv6 GTP</a>
          </h4>
<p id="section-5.3.1-1">In this interworking mode the gNB at the N3 interface uses GTP
       over IPv6.<a href="#section-5.3.1-1" class="pilcrow">¶</a></p>
<p id="section-5.3.1-2">Key points:<a href="#section-5.3.1-2" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.3.1-3.1"> The gNB is unchanged (control-plane or user-plane) and
 encapsulates into GTP (N3 interface is not modified).<a href="#section-5.3.1-3.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.3.1-3.2"> The 5G Control-Plane towards the gNB (N2 interface) is unmodified;
 one IPv6 address is needed per SLA(i.e. a BSID at the SRGW). The SRv6 SID is different depending on the required SLA.<a href="#section-5.3.1-3.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.3.1-3.3"> In the uplink, the SRGW removes GTP, finds the SID list related to the IPv6 DA,
         and adds SRH with the SID list.<a href="#section-5.3.1-3.3" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.3.1-3.4"> There is no state for the downlink at the SRGW.<a href="#section-5.3.1-3.4" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.3.1-3.5"> There is simple state in the uplink at the SRGW; using
 Enhanced mode results in fewer SR policies on this node.
 An SR policy is shared across UEs as long as they belong to the same context (i.e., tenant). A set of many different policies (i.e., different SLAs) increases the amount of state required.<a href="#section-5.3.1-3.5" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.3.1-3.6"> When a packet from the UE leaves the gNB, it is SR-routed.
 This simplifies network slicing
 <span>[<a href="#I-D.ietf-lsr-flex-algo" class="xref">I-D.ietf-lsr-flex-algo</a>]</span>.<a href="#section-5.3.1-3.6" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.3.1-3.7"> In the uplink, the SRv6 BSID steers traffic
 into an SR policy when it arrives at the SRGW.<a href="#section-5.3.1-3.7" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-5.3.1-4"> An example topology is shown in
       <a href="#fig_interworking_ipv6" class="xref">Figure 5</a>.<a href="#section-5.3.1-4" class="pilcrow">¶</a></p>
<p id="section-5.3.1-5"> S1 and C1 are two service segments.
       S1 represents a VNF in the network, and C1 represents a router
       configured for Traffic Engineering.<a href="#section-5.3.1-5" class="pilcrow">¶</a></p>
<span id="name-enhanced-mode-with-unchanged"></span><div id="fig_interworking_ipv6">
<figure id="figure-5">
            <div class="alignCenter art-text artwork" id="section-5.3.1-6.1">
<pre>
                               +----+
             IPv6/GTP         -| S1 |-                            ___
+--+  +-----+ [N3]           / +----+ \                          /
|UE|--| gNB |-         SRv6 /   SRv6   \ +----+   +------+ [N6] /
+--+  +-----+ \        [N9]/     VNF    -| C1 |---| UPF2 |------\  DN
        GTP    \ +------+ /              +----+   +------+       \___
                -| SRGW |-                SRv6      SRv6
                 +------+                  TE
                SR Gateway
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-enhanced-mode-with-unchanged" class="selfRef">Enhanced mode with unchanged gNB IPv6/GTP behavior</a>
            </figcaption></figure>
</div>
<section id="section-5.3.1.1">
            <h5 id="name-packet-flow-uplink-3">
<a href="#section-5.3.1.1" class="section-number selfRef">5.3.1.1. </a><a href="#name-packet-flow-uplink-3" class="section-name selfRef">Packet flow - Uplink</a>
            </h5>
<p id="section-5.3.1.1-1">The uplink packet flow is as follows:<a href="#section-5.3.1.1-1" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.3.1.1-2">
<pre>
UE_out  : (A,Z)
gNB_out : (gNB, B)(GTP: TEID T)(A,Z)       -&gt; Interface N3 unmodified
                                              (IPv6/GTP)
SRGW_out: (SRGW, S1)(U2::T, C1; SL=2)(A,Z) -&gt; B is an End.M.GTP6.D
                                              SID at the SRGW
S1_out  : (SRGW, C1)(U2::T, C1; SL=1)(A,Z)
C1_out  : (SRGW, U2::T)(A,Z)               -&gt; End with PSP
UPF2_out: (A,Z)                            -&gt; End.DT4 or End.DT6
</pre><a href="#section-5.3.1.1-2" class="pilcrow">¶</a>
</div>
<p id="section-5.3.1.1-3"> The UE sends a packet destined to Z toward the gNB on a
         specific bearer for that session. The gNB, which is unmodified,
         encapsulates the packet into IPv6, UDP, and GTP headers.
         The IPv6 DA B, and the GTP TEID T are the ones received in the
         N2 interface.<a href="#section-5.3.1.1-3" class="pilcrow">¶</a></p>
<p id="section-5.3.1.1-4"> The IPv6 address that was signaled over the N2 interface for
         that UE PDU Session, B, is now the IPv6 DA. B is an SRv6 Binding
         SID at the SRGW.  Hence the packet is routed to the SRGW.<a href="#section-5.3.1.1-4" class="pilcrow">¶</a></p>
<p id="section-5.3.1.1-5"> When the packet arrives at the SRGW, the SRGW identifies
         B as an End.M.GTP6.D Binding SID
 (see <a href="#End-M-GTP6-D" class="xref">Section 6.3</a>).  Hence, the SRGW removes
         the IPv6, UDP, and GTP headers, and pushes an IPv6
         header with its own SRH containing the SIDs bound to the
         SR policy associated with this BindingSID.  There
         at least one instance of the End.M.GTP6.D SID per PDU type.<a href="#section-5.3.1.1-5" class="pilcrow">¶</a></p>
<p id="section-5.3.1.1-6"> S1 and C1 perform their related Endpoint functionality
         and forward the packet.<a href="#section-5.3.1.1-6" class="pilcrow">¶</a></p>
<p id="section-5.3.1.1-7"> When the packet arrives at UPF2, the active segment is (U2::T)
         which is bound to End.DT4/6.  UPF2 then decapsulates
 (removing the outer IPv6 header with all its extension headers)
 and forwards the packet toward the data network.<a href="#section-5.3.1.1-7" class="pilcrow">¶</a></p>
</section>
<section id="section-5.3.1.2">
            <h5 id="name-packet-flow-downlink-3">
<a href="#section-5.3.1.2" class="section-number selfRef">5.3.1.2. </a><a href="#name-packet-flow-downlink-3" class="section-name selfRef">Packet flow - Downlink</a>
            </h5>
<p id="section-5.3.1.2-1">The downlink packet flow is as follows:<a href="#section-5.3.1.2-1" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.3.1.2-2">
<pre>
UPF2_in : (Z,A)                           -&gt; UPF2 maps the flow with
                                             &lt;C1, S1, SRGW::TEID,gNB&gt;
UPF2_out: (U2::1, C1)(gNB, SRGW::TEID, S1; SL=3)(Z,A) -&gt; H.Encaps.Red
C1_out  : (U2::1, S1)(gNB, SRGW::TEID, S1; SL=2)(Z,A)
S1_out  : (U2::1, SRGW::TEID)(gNB, SRGW::TEID, S1, SL=1)(Z,A)
SRGW_out: (SRGW, gNB)(GTP: TEID=T)(Z,A)   -&gt; SRGW/96 is End.M.GTP6.E
gNB_out : (Z,A)
</pre><a href="#section-5.3.1.2-2" class="pilcrow">¶</a>
</div>
<p id="section-5.3.1.2-3"> When a packet destined to A arrives at the UPF2, the UPF2
 performs a lookup in the table associated to A and finds the
 SID list &lt;C1, S1, SRGW::TEID, gNB&gt;. The UPF2 performs
 an H.Encaps.Red operation, encapsulating the packet into
 a new IPv6 header with its corresponding SRH.<a href="#section-5.3.1.2-3" class="pilcrow">¶</a></p>
<p id="section-5.3.1.2-4"> C1 and S1 perform their related Endpoint processing.<a href="#section-5.3.1.2-4" class="pilcrow">¶</a></p>
<p id="section-5.3.1.2-5"> Once the packet arrives at the SRGW, the SRGW identifies the
 active SID as an End.M.GTP6.E function. The SRGW removes
 the IPv6 header and all its extensions headers. The SRGW
 generates new IPv6, UDP, and GTP headers. The new IPv6 DA
 is the gNB which is the last SID in the received SRH.
 The TEID in the generated GTP header is an argument of the
 received End.M.GTP6.E SID. The SRGW pushes the headers to
 the packet and forwards the packet toward the gNB.  There
 is one instance of the End.M.GTP6.E SID per PDU type.<a href="#section-5.3.1.2-5" class="pilcrow">¶</a></p>
<p id="section-5.3.1.2-6"> Once the packet arrives at the gNB, the packet is a regular
 IPv6/GTP packet. The gNB looks for the specific radio bearer
 for that TEID and forward it on the bearer. This gNB behavior
 is not modified from current and previous generations.<a href="#section-5.3.1.2-6" class="pilcrow">¶</a></p>
</section>
<section id="section-5.3.1.3">
            <h5 id="name-scalability-2">
<a href="#section-5.3.1.3" class="section-number selfRef">5.3.1.3. </a><a href="#name-scalability-2" class="section-name selfRef">Scalability</a>
            </h5>
<p id="section-5.3.1.3-1"> For the downlink traffic, the SRGW is stateless. All the state
 is in the SRH pushed by the UPF2.  The UPF2 must have the UE
 states since it is the UE's session anchor point.<a href="#section-5.3.1.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3.1.3-2"> For the uplink traffic, the state at the SRGW does not
 necessarily need to be unique per PDU Session; the SR policy
     can be shared among UEs.  This enables more
 scalable SRGW deployments compared to a
 solution holding millions of states, one or more per UE.<a href="#section-5.3.1.3-2" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-5.3.2">
          <h4 id="name-interworking-with-ipv4-gtp">
<a href="#section-5.3.2" class="section-number selfRef">5.3.2. </a><a href="#name-interworking-with-ipv4-gtp" class="section-name selfRef">Interworking with IPv4 GTP</a>
          </h4>
<p id="section-5.3.2-1"> In this interworking mode the gNB uses GTP
 over IPv4 in the N3 interface<a href="#section-5.3.2-1" class="pilcrow">¶</a></p>
<p id="section-5.3.2-2"> Key points:<a href="#section-5.3.2-2" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.3.2-3.1"> The gNB is unchanged and encapsulates packets into GTP
 (the N3 interface is not modified).<a href="#section-5.3.2-3.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.3.2-3.2"> In the uplink, traffic is classified by SRGW's
 classification engine and steered into an SR policy.
 The SRGW may be implemented in a UPF or as a separate entity.<a href="#section-5.3.2-3.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.3.2-3.3"> SRGW removes GTP, finds the SID list related to DA, and adds
 an SRH with the SID list.<a href="#section-5.3.2-3.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-5.3.2-4"> An example topology is shown in
 <a href="#fig_interworking_ipv4" class="xref">Figure 6</a>. In this mode
 the gNB is an unmodified gNB using IPv4/GTP.
 The UPFs are SR-aware.  As before, the SRGW maps the
 IPv4/GTP traffic to SRv6.<a href="#section-5.3.2-4" class="pilcrow">¶</a></p>
<p id="section-5.3.2-5"> S1 and C1 are two service segment endpoints.
 S1 represents a VNF in the network, and C1 represents a router
 configured for Traffic Engineering.<a href="#section-5.3.2-5" class="pilcrow">¶</a></p>
<span id="name-enhanced-mode-with-unchanged-"></span><div id="fig_interworking_ipv4">
<figure id="figure-6">
            <div class="alignCenter art-text artwork" id="section-5.3.2-6.1">
<pre>
                               +----+
             IPv4/GTP         -| S1 |-                            ___
+--+  +-----+ [N3]           / +----+ \                          /
|UE|--| gNB |-         SRv6 /   SRv6   \ +----+   +------+ [N6] /
+--+  +-----+ \        [N9]/     VNF    -| C1 |---| UPF2 |------\  DN
        GTP    \ +------+ /              +----+   +------+       \___
                -| UPF1 |-                SRv6      SRv6
                 +------+                  TE
                SR Gateway
</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-enhanced-mode-with-unchanged-" class="selfRef">Enhanced mode with unchanged gNB IPv4/GTP behavior</a>
            </figcaption></figure>
</div>
<section id="section-5.3.2.1">
            <h5 id="name-packet-flow-uplink-4">
<a href="#section-5.3.2.1" class="section-number selfRef">5.3.2.1. </a><a href="#name-packet-flow-uplink-4" class="section-name selfRef">Packet flow - Uplink</a>
            </h5>
<p id="section-5.3.2.1-1">The uplink packet flow is as follows:<a href="#section-5.3.2.1-1" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.3.2.1-2">
<pre>
gNB_out : (gNB, B)(GTP: TEID T)(A,Z)          -&gt; Interface N3
                                                 unchanged IPv4/GTP
SRGW_out: (SRGW, S1)(U2::1, C1; SL=2)(A,Z)    -&gt; H.M.GTP4.D function
S1_out  : (SRGW, C1)(U2::1, C1; SL=1)(A,Z)
C1_out  : (SRGW, U2::1) (A,Z)                 -&gt; PSP
UPF2_out: (A,Z)                               -&gt; End.DT4 or End.DT6
</pre><a href="#section-5.3.2.1-2" class="pilcrow">¶</a>
</div>
<p id="section-5.3.2.1-3"> The UE sends a packet destined to Z toward the gNB on a
 specific bearer for that session. The gNB, which is unmodified,
 encapsulates the packet into a new IPv4, UDP, and GTP headers.
 The IPv4 DA, B, and the GTP TEID are the ones received at the
 N2 interface.<a href="#section-5.3.2.1-3" class="pilcrow">¶</a></p>
<p id="section-5.3.2.1-4"> When the packet arrives at the SRGW for UPF1, the SRGW has an
 classification engine rule for incoming traffic from the
 gNB, that steers the traffic into an SR policy by using the
    function H.M.GTP4.D. The SRGW removes the IPv4, UDP, and GTP
 headers and pushes an IPv6 header with its own SRH containing
 the SIDs related to the SR policy associated with this traffic.
 The SRGW forwards according to the new IPv6 DA.<a href="#section-5.3.2.1-4" class="pilcrow">¶</a></p>
<p id="section-5.3.2.1-5"> S1 and C1 perform their related Endpoint
 functionality and forward the packet.<a href="#section-5.3.2.1-5" class="pilcrow">¶</a></p>
<p id="section-5.3.2.1-6"> When the packet arrives at UPF2, the active segment is (U2::1)
 which is bound to End.DT4/6 which performs the decapsulation
 (removing the outer IPv6 header with all its extension headers)
 and forwards toward the data network.<a href="#section-5.3.2.1-6" class="pilcrow">¶</a></p>
<p id="section-5.3.2.1-7">Note that the interworking mechanisms for IPv4/GTP and IPv6/GTP differs. This is due to the fact that in IPv6/GTP we can leverage the remote steering capabilities provided by the Segment Routing BSID. In IPv4 this construct is not available, and building a similar mechanism would require a significant address consumption.<a href="#section-5.3.2.1-7" class="pilcrow">¶</a></p>
</section>
<section id="section-5.3.2.2">
            <h5 id="name-packet-flow-downlink-4">
<a href="#section-5.3.2.2" class="section-number selfRef">5.3.2.2. </a><a href="#name-packet-flow-downlink-4" class="section-name selfRef">Packet flow - Downlink</a>
            </h5>
<p id="section-5.3.2.2-1">The downlink packet flow is as follows:<a href="#section-5.3.2.2-1" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.3.2.2-2">
<pre>
UPF2_in : (Z,A)                            -&gt; UPF2 maps flow with SID
                                            &lt;C1, S1,GW::SA:DA:TEID&gt;
UPF2_out: (U2::1, C1)(GW::SA:DA:TEID, S1; SL=2)(Z,A) -&gt;H.Encaps.Red
C1_out  : (U2::1, S1)(GW::SA:DA:TEID, S1; SL=1)(Z,A)
S1_out  : (U2::1, GW::SA:DA:TEID)(Z,A)
SRGW_out: (GW, gNB)(GTP: TEID=T)(Z,A)       -&gt; End.M.GTP4.E
gNB_out : (Z,A)
</pre><a href="#section-5.3.2.2-2" class="pilcrow">¶</a>
</div>
<p id="section-5.3.2.2-3">When a packet destined to A arrives at the UPF2, the UPF2
 performs a lookup in the table associated to A and finds the
 SID list &lt;C1, S1, SRGW::SA:DA:TEID&gt;. The UPF2 performs
 a H.Encaps.Red operation, encapsulating the packet into
 a new IPv6 header with its corresponding SRH.<a href="#section-5.3.2.2-3" class="pilcrow">¶</a></p>
<p id="section-5.3.2.2-4">The nodes C1 and S1 perform their related Endpoint
 processing.<a href="#section-5.3.2.2-4" class="pilcrow">¶</a></p>
<p id="section-5.3.2.2-5">Once the packet arrives at the SRGW, the SRGW identifies the
 active SID as an End.M.GTP4.E function. The SRGW removes
 the IPv6 header and all its extensions headers. The SRGW
 generates an IPv4, UDP, and GTP headers. The IPv4 SA and
 DA are received as SID arguments.
 The TEID in the generated GTP header is also the arguments
 of the received End.M.GTP4.E SID.  The SRGW pushes the headers
 to the packet and forwards the packet toward the gNB.<a href="#section-5.3.2.2-5" class="pilcrow">¶</a></p>
<p id="section-5.3.2.2-6"> When the packet arrives at the gNB, the packet is a regular
 IPv4/GTP packet. The gNB looks for the specific radio bearer
 for that TEID and forwards it on the bearer. This gNB behavior
 is not modified from current and previous generations.<a href="#section-5.3.2.2-6" class="pilcrow">¶</a></p>
</section>
<section id="section-5.3.2.3">
            <h5 id="name-scalability-3">
<a href="#section-5.3.2.3" class="section-number selfRef">5.3.2.3. </a><a href="#name-scalability-3" class="section-name selfRef">Scalability</a>
            </h5>
<p id="section-5.3.2.3-1">For the downlink traffic, the SRGW is stateless. All the
 state is in the SRH pushed by the UPF2. The UPF must have
 this UE-base state anyway (since it is its anchor point).<a href="#section-5.3.2.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3.2.3-2">For the uplink traffic, the state at the SRGW is dedicated on a
 per UE/session basis according to a classification engine.
 There is state for steering the different sessions in the form of an SR Policy. However, SR policies are shared
 among several UE/sessions.<a href="#section-5.3.2.3-2" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-5.3.3">
          <h4 id="name-extensions-to-the-interwork">
<a href="#section-5.3.3" class="section-number selfRef">5.3.3. </a><a href="#name-extensions-to-the-interwork" class="section-name selfRef">Extensions to the interworking mechanisms</a>
          </h4>
<p id="section-5.3.3-1">In this section we presented two mechanisms for interworking
       with gNBs and UPFs that do not support SRv6. These mechanisms are used
       to support GTP over IPv4 and IPv6.<a href="#section-5.3.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3.3-2">Even though we have presented these methods as an extension to
       the "Enhanced mode", it is straightforward in its
       applicability to the "Traditional mode".<a href="#section-5.3.3-2" class="pilcrow">¶</a></p>
</section>
</section>
</div>
<div id="drop_in">
<section id="section-5.4">
        <h3 id="name-srv6-drop-in-interworking">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-srv6-drop-in-interworking" class="section-name selfRef">SRv6 Drop-in Interworking</a>
        </h3>
<p id="section-5.4-1">In this section we introduce another mode useful for legacy gNB and UPFs that still operate with GTP-U.
            This mode provides an SRv6-enabled user plane in between
          two GTP-U tunnel endpoints.<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<p id="section-5.4-2">In this mode we employ two SRGWs that map GTP-U traffic to SRv6 and vice-versa.<a href="#section-5.4-2" class="pilcrow">¶</a></p>
<p id="section-5.4-3">Unlike other interworking modes, in this mode both of the mobility overlay endpoints use GTP-U.
            Two SRGWs are deployed in either N3 or N9 interface to realize an intermediate SR policy.<a href="#section-5.4-3" class="pilcrow">¶</a></p>
<span id="name-example-topology-for-srv6-d"></span><div id="fig_drop_in">
<figure id="figure-7">
          <div class="alignCenter art-text artwork" id="section-5.4-4.1">
<pre>

                            +----+
                           -| S1 |-
+-----+                   / +----+ \
| gNB |-            SRv6 /   SRv6   \ +----+   +--------+    +-----+
+-----+  \              /     VNF    -| C1 |---| SRGW-B |----| UPF |
   GTP[N3]\ +--------+ /              +----+   +--------+    +-----+
           -| SRGW-A |-                SRv6   SR Gateway-B     GTP
            +--------+                  TE
           SR Gateway-A

</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-example-topology-for-srv6-d" class="selfRef">Example topology for SRv6 Drop-in mode</a>
          </figcaption></figure>
</div>
<p id="section-5.4-5">The packet flow of <a href="#fig_drop_in" class="xref">Figure 7</a> is as
            follows:<a href="#section-5.4-5" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.4-6">
<pre>
gNB_out : (gNB, U::1)(GTP: TEID T)(A,Z)
GW-A_out: (GW-A, S1)(U::1, SGB::TEID, C1; SL=3)(A,Z)-&gt;U::1 is an
                                                      End.M.GTP6.D.Di
                                                      SID at SRGW-A
S1_out  : (GW-A, C1)(U::1, SGB::TEID, C1; SL=2)(A,Z)
C1_out  : (GW-A, SGB::TEID)(U::1, SGB::TEID, C1; SL=1)(A,Z)
GW-B_out: (GW-B, U::1)(GTP: TEID T)(A,Z)            -&gt;SGB::TEID is an
                                                      End.M.GTP6.E
                                                      SID at SRGW-B
UPF_out : (A,Z)
</pre><a href="#section-5.4-6" class="pilcrow">¶</a>
</div>
<p id="section-5.4-7">When a packet destined to Z is sent to the gNB, which is
          unmodified (control-plane and user-plane remain GTP-U), 
          gNB performs encapsulation into a new IP, UDP, and
          GTP headers.  The IPv6 DA, U::1, and the GTP TEID are the ones
          received at the N2 interface.<a href="#section-5.4-7" class="pilcrow">¶</a></p>
<p id="section-5.4-8">The IPv6 address that was signaled over the N2 interface for that
          PDU Session, U::1, is now the IPv6 DA.  U::1 is an SRv6 Binding
          SID at SRGW-A.  Hence the packet is routed to the SRGW.<a href="#section-5.4-8" class="pilcrow">¶</a></p>
<p id="section-5.4-9">When the packet arrives at SRGW-A, the SRGW identifies U::1 as an
          End.M.GTP6.D.Di Binding SID (see <a href="#End-M-GTP6-D-Di" class="xref">Section 6.4</a>).
          Hence, the SRGW removes the IPv6, UDP, and GTP headers, and pushes an
          IPv6 header with its own SRH containing the SIDs bound to the SR
          policy associated with this Binding SID. There is one instance of the
          End.M.GTP6.D.Di SID per PDU type.<a href="#section-5.4-9" class="pilcrow">¶</a></p>
<p id="section-5.4-10">S1 and C1 perform their related Endpoint functionality and forward
          the packet.<a href="#section-5.4-10" class="pilcrow">¶</a></p>
<p id="section-5.4-11">Once the packet arrives at SRGW-B, the SRGW identifies the active
          SID as an End.M.GTP6.E function. The SRGW removes the IPv6 header and
          all its extensions headers. The SRGW generates new IPv6, UDP, and GTP
          headers. The new IPv6 DA is U::1 which is the last SID in the
          received SRH. The TEID in the generated GTP header is an argument of
          the received End.M.GTP6.E SID. The SRGW pushes the headers to the
          packet and forwards the packet toward UPF.  There is one instance of
          the End.M.GTP6.E SID per PDU type.<a href="#section-5.4-11" class="pilcrow">¶</a></p>
<p id="section-5.4-12">Once the packet arrives at UPF, the packet is a regular IPv6/GTP
          packet. The UPF looks for the specific rule for that TEID to forward
          the packet. This UPF behavior is not modified from current and
          previous generations.<a href="#section-5.4-12" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="srv6_functions">
<section id="section-6">
      <h2 id="name-srv6-segment-endpoint-mobil">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-srv6-segment-endpoint-mobil" class="section-name selfRef">SRv6 Segment Endpoint Mobility Behaviors</a>
      </h2>
<div id="arguments-for-mobility">
<section id="section-6.1">
        <h3 id="name-argsmobsession">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-argsmobsession" class="section-name selfRef">Args.Mob.Session</a>
        </h3>
<p id="section-6.1-1">Args.Mob.Session provide per-session information for charging, buffering and
          lawful intercept (among others) required by some mobile nodes.
          The Args.Mob.Session argument format is used in combination with End.Map,
          End.DT4/End.DT6/End.DT46 and End.DX4/End.DX6/End.DX2 behaviors. Note that proposed format is applicable for
          5G networks, while similar formats could be used for legacy networks.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<span id="name-argsmobsession-format"></span><figure id="figure-8">
          <div class="alignCenter art-text artwork" id="section-6.1-2.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   QFI     |R|U|                PDU Session ID                 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|PDU Sess(cont')|
+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-argsmobsession-format" class="selfRef">Args.Mob.Session format</a>
          </figcaption></figure>
<ul class="compact">
<li class="compact" id="section-6.1-3.1"> QFI: QoS Flow Identifier <span>[<a href="#TS.38415" class="xref">TS.38415</a>]</span><a href="#section-6.1-3.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-6.1-3.2"> R: Reflective QoS Indication  <span>[<a href="#TS.23501" class="xref">TS.23501</a>]</span>.
          This parameter indicates the activation of reflective QoS towards the UE for the transferred packet. Reflective QoS enables the UE to map UL User Plane traffic to QoS Flows without SMF provided QoS rules.<a href="#section-6.1-3.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-6.1-3.3">U: Unused and for future use. MUST be 0 on transmission and
              ignored on receipt.<a href="#section-6.1-3.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-6.1-3.4">PDU Session ID: Identifier of PDU Session. The GTP-U equivalent is TEID.<a href="#section-6.1-3.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-6.1-4">Arg.Mob.Session is required in case that one SID aggregates
      multiple PDU Sessions. Since the SRv6 SID is likely NOT to be
      instantiated per PDU session, Args.Mob.Session helps the UPF to
      perform the behaviors which require per QFI and/or per PDU Session
      granularity.<a href="#section-6.1-4" class="pilcrow">¶</a></p>
<p id="section-6.1-5">Note that the encoding of user-plane messages (e.g., Echo Request, Echo Reply, Error Indication and End Marker) is out of the scope of this draft. <span>[<a href="#I-D.murakami-dmm-user-plane-message-encoding" class="xref">I-D.murakami-dmm-user-plane-message-encoding</a>]</span> defines one possible encoding.<a href="#section-6.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="end-map-function">
<section id="section-6.2">
        <h3 id="name-endmap">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-endmap" class="section-name selfRef">End.MAP</a>
        </h3>
<p id="section-6.2-1">The "Endpoint behavior with SID mapping" behavior (End.MAP for
     short) is used in several scenarios. Particularly in mobility,
      End.MAP is used by the intermediate UPFs.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">When node N receives a packet whose IPv6 DA is D and D is a local End.MAP SID, N does:<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.2-3">
<pre>
S01. If (IPv6 Hop Limit &lt;= 1) {
S02.    Send an ICMP Time Exceeded message to the Source Address,
           Code 0 (Hop limit exceeded in transit),
           interrupt packet processing, and discard the packet.
S03. }
S04. Decrement IPv6 Hop Limit by 1
S05. Update the IPv6 DA with the new mapped SID
S06. Submit the packet to the egress IPv6 FIB lookup for
        transmission to the new destination
</pre><a href="#section-6.2-3" class="pilcrow">¶</a>
</div>
<p id="section-6.2-4">Notes:
                The SIDs in the SRH are not modified.<a href="#section-6.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="End-M-GTP6-D">
<section id="section-6.3">
        <h3 id="name-endmgtp6d">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-endmgtp6d" class="section-name selfRef">End.M.GTP6.D</a>
        </h3>
<p id="section-6.3-1">The "Endpoint behavior with IPv6/GTP decapsulation into SR policy"
     behavior (End.M.GTP6.D for short) is used in interworking scenario
     for the uplink towards SRGW from the legacy gNB using IPv6/GTP.
     Any SID instance of this behavior is associated with an SR Policy B
   and an IPv6 Source Address S.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<p id="section-6.3-2">When the SR Gateway node N receives a packet destined to D and
     D is a local End.M.GTP6.D SID, N does:<a href="#section-6.3-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.3-3">
<pre>
S01. When an SRH is processed {
S02.   If (Segments Left != 0) {
S03.      Send an ICMP Parameter Problem to the Source Address,
             Code 0 (Erroneous header field encountered),
             Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S04.   }
S05.   Proceed to process the next header in the packet
S06. }
</pre><a href="#section-6.3-3" class="pilcrow">¶</a>
</div>
<p id="section-6.3-4">When processing the Upper-layer header of a packet matching a FIB entry locally instantiated as an End.M.GTP6.D SID, N does:<a href="#section-6.3-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.3-5">
<pre>
S01. If (Next Header (NH) == UDP &amp; UDP_Dest_port == GTP) {
S02.    Copy the GTP TEID and QFI to buffer memory
S03.    Pop the IPv6, UDP, and GTP Headers
S04.    Push a new IPv6 header with its own SRH containing B
S05.    Set the outer IPv6 SA to S
S06.    Set the outer IPv6 DA to the first SID of B
S07.    Set the outer Payload Length, Traffic Class, Flow Label,
           Hop Limit, and Next-Header (NH) fields
S08.    Write in the last SID of the SRH the Args.Mob.Session
           based on the information of buffer memory
S09.    Submit the packet to the egress IPv6 FIB lookup and
           transmission to the new destination
S10. } Else {
S11.    Process as per [RFC8986] Section 4.1.1
S12. }
</pre><a href="#section-6.3-5" class="pilcrow">¶</a>
</div>
<p id="section-6.3-6">Notes:
        The NH is set based on the SID parameter. There is one
          instantiation of the End.M.GTP6.D SID per PDU Session Type,
          hence the NH is already known in advance. For the IPv4v6 PDU
          Session Type, in addition we inspect the first nibble of the
          PDU to know the NH value.<a href="#section-6.3-6" class="pilcrow">¶</a></p>
<p id="section-6.3-7">The prefix of last segment (S3 in above example) SHOULD be
        followed by an Arg.Mob.Session argument space which is used to
        provide the session identifiers.<a href="#section-6.3-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="End-M-GTP6-D-Di">
<section id="section-6.4">
        <h3 id="name-endmgtp6ddi">
<a href="#section-6.4" class="section-number selfRef">6.4. </a><a href="#name-endmgtp6ddi" class="section-name selfRef">End.M.GTP6.D.Di</a>
        </h3>
<p id="section-6.4-1">The "Endpoint behavior with IPv6/GTP decapsulation into SR policy for
        Drop-in Mode" behavior (End.M.GTP6.D.Di for short) is used in SRv6
        drop-in interworking scenario described in <a href="#drop_in" class="xref">Section 5.4</a>. The
        difference between End.M.GTP6.D as another variant of IPv6/GTP
        decapsulation function is that the original IPv6 DA of GTP packet is
        preserved as the last SID in SRH.<a href="#section-6.4-1" class="pilcrow">¶</a></p>
<p id="section-6.4-2">Any SID instance of this behavior is associated with an SR Policy B and an IPv6 Source Address S.<a href="#section-6.4-2" class="pilcrow">¶</a></p>
<p id="section-6.4-3">When the SR Gateway node N receives a packet destined to D and
        D is a local End.M.GTP6.D.Di SID, N does:<a href="#section-6.4-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.4-4">
<pre>
S01. When an SRH is processed {
S02.   If (Segments Left != 0) {
S03.      Send an ICMP Parameter Problem to the Source Address,
             Code 0 (Erroneous header field encountered),
             Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S04.   }
S05.   Proceed to process the next header in the packet
S06. }
</pre><a href="#section-6.4-4" class="pilcrow">¶</a>
</div>
<p id="section-6.4-5">When processing the Upper-layer header of a packet matching a FIB entry locally instantiated as an End.M.GTP6.Di SID, N does:<a href="#section-6.4-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.4-6">
<pre>
S01. If (Next Header = UDP &amp; UDP_Dest_port = GTP) {
S02.    Copy D to buffer memory
S03.    Pop the IPv6, UDP, and GTP Headers
S04.    Push a new IPv6 header with its own SRH containing B
S05.    Set the outer IPv6 SA to S
S06.    Set the outer IPv6 DA to the first SID of B
S07.    Set the outer Payload Length, Traffic Class, Flow Label,
           Hop Limit, and Next-Header fields
S08.    Write D to the SRH
S09.    Submit the packet to the egress IPv6 FIB lookup and
           transmission to the new destination
S10. } Else {
S11.    Process as per [RFC8986] Section 4.1.1
S12. }
</pre><a href="#section-6.4-6" class="pilcrow">¶</a>
</div>
<p id="section-6.4-7">Notes:
        The NH is set based on the SID parameter. There is one
          instantiation of the End.M.GTP6.D SID per PDU Session Type,
          hence the NH is already known in advance. For the IPv4v6 PDU
          Session Type, in addition we inspect the first nibble of the
          PDU to know the NH value.<a href="#section-6.4-7" class="pilcrow">¶</a></p>
<p id="section-6.4-8"> The prefix of S SHOULD be an End.M.GTP6.E SID instantiated
       at an SR gateway.<a href="#section-6.4-8" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-6.5">
        <h3 id="name-endmgtp6e">
<a href="#section-6.5" class="section-number selfRef">6.5. </a><a href="#name-endmgtp6e" class="section-name selfRef">End.M.GTP6.E</a>
        </h3>
<p id="section-6.5-1">The "Endpoint behavior with encapsulation for IPv6/GTP tunnel"
        behavior (End.M.GTP6.E for short) is used among others in the interworking scenario
        for the downlink toward the legacy gNB using IPv6/GTP.<a href="#section-6.5-1" class="pilcrow">¶</a></p>
<p id="section-6.5-2">The prefix of End.M.GTP6.E SID MUST be followed by the
        Arg.Mob.Session argument space which is used to provide the session
        identifiers.<a href="#section-6.5-2" class="pilcrow">¶</a></p>
<p id="section-6.5-3">When the SR Gateway node N receives a packet destined to D, and
        D is a local End.M.GTP6.E SID, N does the following:<a href="#section-6.5-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.5-4">
<pre>
S01. When an SRH is processed {
S02.   If (Segments Left != 1) {
S03.      Send an ICMP Parameter Problem to the Source Address,
             Code 0 (Erroneous header field encountered),
             Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S04.   }
S05.   Proceed to process the next header in the packet
S06. }
</pre><a href="#section-6.5-4" class="pilcrow">¶</a>
</div>
<p id="section-6.5-5">When processing the Upper-layer header of a packet matching a FIB entry locally instantiated as an End.M.GTP6.E SID, N does:<a href="#section-6.5-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.5-6">
<pre>
S01.    Copy SRH[0] and D to buffer memory
S02.    Pop the IPv6 header and all its extension headers
S03.    Push a new IPv6 header with a UDP/GTP Header
S04.    Set the outer IPv6 SA to S
S05.    Set the outer IPv6 DA from buffer memory
S06.    Set the outer Payload Length, Traffic Class, Flow Label,
           Hop Limit, and Next-Header fields
S07.    Set the GTP TEID (from buffer memory)
S08.    Submit the packet to the egress IPv6 FIB lookup and
           transmission to the new destination
</pre><a href="#section-6.5-6" class="pilcrow">¶</a>
</div>
<p id="section-6.5-7">Notes:
        An End.M.GTP6.E SID MUST always be the penultimate SID.
        The TEID is extracted from the argument space of the current
        SID.<a href="#section-6.5-7" class="pilcrow">¶</a></p>
<p id="section-6.5-8"> The source address S SHOULD be an End.M.GTP6.D SID instantiated
        at an SR gateway.<a href="#section-6.5-8" class="pilcrow">¶</a></p>
</section>
<section id="section-6.6">
        <h3 id="name-endmgtp4e">
<a href="#section-6.6" class="section-number selfRef">6.6. </a><a href="#name-endmgtp4e" class="section-name selfRef">End.M.GTP4.E</a>
        </h3>
<p id="section-6.6-1">The "Endpoint behavior with encapsulation for IPv4/GTP tunnel"
     behavior (End.M.GTP4.E for short) is used in the downlink when
     doing interworking with legacy gNB using IPv4/GTP.<a href="#section-6.6-1" class="pilcrow">¶</a></p>
<p id="section-6.6-2">When the SR Gateway node N receives a packet destined to S and S
     is a local End.M.GTP4.E SID, N does:<a href="#section-6.6-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.6-3">
<pre>
S01. When an SRH is processed {
S02.   If (Segments Left != 0) {
S03.      Send an ICMP Parameter Problem to the Source Address,
             Code 0 (Erroneous header field encountered),
             Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S04.   }
S05.   Proceed to process the next header in the packet
S06. }
</pre><a href="#section-6.6-3" class="pilcrow">¶</a>
</div>
<p id="section-6.6-4">When processing the Upper-layer header of a packet matching a FIB entry locally instantiated as an End.M.GTP4.E SID, N does:<a href="#section-6.6-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.6-5">
<pre>
S01.    Store the IPv6 DA and SA in buffer memory
S02.    Pop the IPv6 header and all its extension headers
S03.    Push a new IPv4 header with a UDP/GTP Header
S04.    Set the outer IPv4 SA and DA (from buffer memory)
S05.    Set the outer Total Length, DSCP, Time To Live, and
           Next-Header fields
S06.    Set the GTP TEID (from buffer memory)
S07.    Submit the packet to the egress IPv6 FIB lookup and
           transmission to the new destination
</pre><a href="#section-6.6-5" class="pilcrow">¶</a>
</div>
<p id="section-6.6-6">Notes:

        The End.M.GTP4.E SID in S has the following format:<a href="#section-6.6-6" class="pilcrow">¶</a></p>
<span id="name-endmgtp4e-sid-encoding"></span><figure id="figure-9">
          <div class="alignCenter art-text artwork" id="section-6.6-7.1">
<pre>
0                                                         127
+-----------------------+-------+----------------+---------+
|  SRGW-IPv6-LOC-FUNC   |IPv4DA |Args.Mob.Session|0 Padded |
+-----------------------+-------+----------------+---------+
       128-a-b-c            a            b           c

</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-endmgtp4e-sid-encoding" class="selfRef">End.M.GTP4.E SID Encoding</a>
          </figcaption></figure>
<p id="section-6.6-8">The IPv6 Source Address has the following format:<a href="#section-6.6-8" class="pilcrow">¶</a></p>
<span id="name-ipv6-sa-encoding-for-endmgt"></span><figure id="figure-10">
          <div class="alignCenter art-text artwork" id="section-6.6-9.1">
<pre>
0                                                         127
+----------------------+--------+--------------------------+
|  Source UPF Prefix   |IPv4 SA | any bit pattern(ignored) |
+----------------------+--------+--------------------------+
         128-a-b            a                  b

</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-ipv6-sa-encoding-for-endmgt" class="selfRef">IPv6 SA Encoding for End.M.GTP4.E</a>
          </figcaption></figure>
</section>
<section id="section-6.7">
        <h3 id="name-hmgtp4d">
<a href="#section-6.7" class="section-number selfRef">6.7. </a><a href="#name-hmgtp4d" class="section-name selfRef">H.M.GTP4.D</a>
        </h3>
<p id="section-6.7-1">The "SR Policy Headend with tunnel decapsulation and map to an SRv6
        policy" behavior (H.M.GTP4.D for short) is used in the direction
        from legacy IPv4 user-plane to SRv6 user-plane network.<a href="#section-6.7-1" class="pilcrow">¶</a></p>
<p id="section-6.7-2">When the SR Gateway node N receives a packet destined to a
        IW-IPv4-Prefix, N does:<a href="#section-6.7-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.7-3">
<pre>
S01. IF Payload == UDP/GTP THEN
S02.    Pop the outer IPv4 header and UDP/GTP headers
S03.    Copy IPv4 DA, TEID to form SID B
S04.    Copy IPv4 SA to form IPv6 SA B'
S05.    Encapsulate the packet into a new IPv6 header   ;;Ref1
S06.    Set the IPv6 DA = B
S07.    Forward along the shortest path to B
S08. ELSE
S09.    Drop the packet
</pre><a href="#section-6.7-3" class="pilcrow">¶</a>
</div>
<p id="section-6.7-4">Ref1: The NH value is identified by inspecting the first nibble
        of the inner payload.<a href="#section-6.7-4" class="pilcrow">¶</a></p>
<p id="section-6.7-5">The SID B has the following format:<a href="#section-6.7-5" class="pilcrow">¶</a></p>
<span id="name-hmgtp4d-sid-encoding"></span><figure id="figure-11">
          <div class="alignCenter art-text artwork" id="section-6.7-6.1">
<pre>
0                                                         127
+-----------------------+-------+----------------+---------+
|Destination UPF Prefix |IPv4DA |Args.Mob.Session|0 Padded |
+-----------------------+-------+----------------+---------+
       128-a-b-c            a            b           c

</pre>
</div>
<figcaption><a href="#figure-11" class="selfRef">Figure 11</a>:
<a href="#name-hmgtp4d-sid-encoding" class="selfRef">H.M.GTP4.D SID Encoding</a>
          </figcaption></figure>
<p id="section-6.7-7"> The SID B MAY be an SRv6 Binding SID instantiated at the first
        UPF (U1) to bind an SR policy <span>[<a href="#I-D.ietf-spring-segment-routing-policy" class="xref">I-D.ietf-spring-segment-routing-policy</a>]</span>.<a href="#section-6.7-7" class="pilcrow">¶</a></p>
</section>
<section id="section-6.8">
        <h3 id="name-endlimit-rate-limiting-beha">
<a href="#section-6.8" class="section-number selfRef">6.8. </a><a href="#name-endlimit-rate-limiting-beha" class="section-name selfRef">End.Limit: Rate Limiting behavior</a>
        </h3>
<p id="section-6.8-1"> The mobile user-plane requires a rate-limit feature. For this
          purpose, we define a new behavior "End.Limit".
          The "End.Limit" behavior encodes in its arguments the
          rate limiting parameter that should be applied to this packet.
          Multiple flows of packets should have the same group identifier
           in the SID when those flows are in the same AMBR (Aggregate Maximum Bit Rate) group.
          The encoding format of the rate limit
     segment SID is as follows:<a href="#section-6.8-1" class="pilcrow">¶</a></p>
<span id="name-endlimit-rate-limiting-behav"></span><figure id="figure-12">
          <div class="alignCenter art-text artwork" id="section-6.8-2.1">
<pre>
+----------------------+----------+-----------+
| LOC+FUNC rate-limit  | group-id | limit-rate|
+----------------------+----------+-----------+
      128-i-j                i          j
</pre>
</div>
<figcaption><a href="#figure-12" class="selfRef">Figure 12</a>:
<a href="#name-endlimit-rate-limiting-behav" class="selfRef">End.Limit: Rate limiting behavior argument format</a>
          </figcaption></figure>
<p id="section-6.8-3"> If the limit-rate bits are set to zero, the node should
            not do rate limiting unless static configuration or
            control-plane sets the limit rate associated to the SID.<a href="#section-6.8-3" class="pilcrow">¶</a></p>
</section>
</section>
</div>
<div id="pdu_sessions">
<section id="section-7">
      <h2 id="name-srv6-supported-3gpp-pdu-ses">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-srv6-supported-3gpp-pdu-ses" class="section-name selfRef">SRv6 supported 3GPP PDU session types</a>
      </h2>
<p id="section-7-1">The 3GPP <span>[<a href="#TS.23501" class="xref">TS.23501</a>]</span> defines the following PDU session
 types:<a href="#section-7-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-7-2.1">IPv4<a href="#section-7-2.1" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-7-2.2">IPv6<a href="#section-7-2.2" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-7-2.3">IPv4v6<a href="#section-7-2.3" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-7-2.4">Ethernet<a href="#section-7-2.4" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-7-2.5">Unstructured<a href="#section-7-2.5" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-7-3"> SRv6 supports the 3GPP PDU session types without any protocol
     overhead by using the corresponding SRv6 behaviors (End.DX4,
     End.DT4 for IPv4 PDU sessions; End.DX6, End.DT6, End.T for IPv6
     PDU sessions; End.DT46 for IPv4v6 PDU sessions; End.DX2
     for L2 and Unstructured PDU sessions).<a href="#section-7-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="netslice">
<section id="section-8">
      <h2 id="name-network-slicing-considerati">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-network-slicing-considerati" class="section-name selfRef">Network Slicing Considerations</a>
      </h2>
<p id="section-8-1">A mobile network may be required to implement "network slices",
     which logically separate network resources. User-plane behaviors
     represented as SRv6 segments would be part of a slice.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2"><span>[<a href="#I-D.ietf-spring-segment-routing-policy" class="xref">I-D.ietf-spring-segment-routing-policy</a>]</span>
     describes a solution to build basic network slices with SR.
     Depending on the requirements, these slices can be further
     refined by adopting the mechanisms from:<a href="#section-8-2" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-8-3.1">IGP Flex-Algo
 <span>[<a href="#I-D.ietf-lsr-flex-algo" class="xref">I-D.ietf-lsr-flex-algo</a>]</span><a href="#section-8-3.1" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-8-3.2">Inter-Domain policies
        <span>[<a href="#I-D.ietf-spring-segment-routing-central-epe" class="xref">I-D.ietf-spring-segment-routing-central-epe</a>]</span><a href="#section-8-3.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-8-4">Furthermore, these can be combined with ODN/AS (On Demand Nexthop/Automated Steering)
     <span>[<a href="#I-D.ietf-spring-segment-routing-policy" class="xref">I-D.ietf-spring-segment-routing-policy</a>]</span> for
     automated slice provisioning and traffic steering.<a href="#section-8-4" class="pilcrow">¶</a></p>
<p id="section-8-5">Further details on how these tools can be used to create
          end to end network slices are documented in
          <span>[<a href="#I-D.ali-spring-network-slicing-building-blocks" class="xref">I-D.ali-spring-network-slicing-building-blocks</a>]</span>.<a href="#section-8-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="c-plane">
<section id="section-9">
      <h2 id="name-control-plane-consideration">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-control-plane-consideration" class="section-name selfRef">Control Plane Considerations</a>
      </h2>
<p id="section-9-1">This document focuses on user-plane behavior and its
     independence from the control plane. While there are benefits in an enhanced control plane (e.g., to dynamically configure SR policies from a controller, session aggregation), this document does not impose any change to the existent mobility control plane.<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2"> <a href="#IANA" class="xref">Section 11</a> allocates SRv6
     Segment Endpoint Behavior codepoints for the new behaviors defined in this
     document.<a href="#section-9-2" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-security-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-10-1">   The security considerations for Segment Routing are discussed in
           <span>[<a href="#RFC8402" class="xref">RFC8402</a>]</span>.  More specifically for SRv6 the security considerations
           and the mechanisms for securing an SR domain are discussed in
           <span>[<a href="#RFC8754" class="xref">RFC8754</a>]</span>.  Together, they describe the required security mechanisms
           that allow establishment of an SR domain of trust to operate
           SRv6-based services for internal traffic while preventing any
           external traffic from accessing or exploiting the SRv6-based
           services.<a href="#section-10-1" class="pilcrow">¶</a></p>
<p id="section-10-2">The technology described in this document is applied to a mobile network that is within the SR Domain.<a href="#section-10-2" class="pilcrow">¶</a></p>
<p id="section-10-3">This document introduces new SRv6 Endpoint Behaviors. Those behaviors do not need any special security consideration given that it is deployed within that SR Domain.<a href="#section-10-3" class="pilcrow">¶</a></p>
</section>
<div id="IANA">
<section id="section-11">
      <h2 id="name-iana-considerations">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-11-1"> The following values have been allocated within the "SRv6 Endpoint Behaviors" <span>[<a href="#RFC8986" class="xref">RFC8986</a>]</span>
   sub-registry belonging to the top-level
   "Segment Routing Parameters" registry:<a href="#section-11-1" class="pilcrow">¶</a></p>
<span id="name-srv6-mobile-user-plane-endp"></span><div id="endpoint_opcodes">
<table class="center" id="table-1">
        <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-srv6-mobile-user-plane-endp" class="selfRef">SRv6 Mobile User-plane Endpoint Behavior Types</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Value</th>
            <th class="text-center" rowspan="1" colspan="1">Hex</th>
            <th class="text-center" rowspan="1" colspan="1">Endpoint behavior</th>
            <th class="text-center" rowspan="1" colspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">40</td>
            <td class="text-center" rowspan="1" colspan="1">0x0028</td>
            <td class="text-center" rowspan="1" colspan="1">End.MAP</td>
            <td class="text-center" rowspan="1" colspan="1">[This.ID]</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">41</td>
            <td class="text-center" rowspan="1" colspan="1">0x0029</td>
            <td class="text-center" rowspan="1" colspan="1">End.Limit</td>
            <td class="text-center" rowspan="1" colspan="1">[This.ID]</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">69</td>
            <td class="text-center" rowspan="1" colspan="1">0x0045</td>
            <td class="text-center" rowspan="1" colspan="1">End.M.GTP6.D</td>
            <td class="text-center" rowspan="1" colspan="1">[This.ID]</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">70</td>
            <td class="text-center" rowspan="1" colspan="1">0x0046</td>
            <td class="text-center" rowspan="1" colspan="1">End.M.GTP6.Di</td>
            <td class="text-center" rowspan="1" colspan="1">[This.ID]</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">71</td>
            <td class="text-center" rowspan="1" colspan="1">0x0047</td>
            <td class="text-center" rowspan="1" colspan="1">End.M.GTP6.E</td>
            <td class="text-center" rowspan="1" colspan="1">[This.ID]</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">72</td>
            <td class="text-center" rowspan="1" colspan="1">0x0048</td>
            <td class="text-center" rowspan="1" colspan="1">End.M.GTP4.E</td>
            <td class="text-center" rowspan="1" colspan="1">[This.ID]</td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<div id="acknowledge">
<section id="section-12">
      <h2 id="name-acknowledgements">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-12-1">The authors would like to thank Daisuke Yokota, Bart Peirens,
   Ryokichi Onishi, Kentaro Ebisawa, Peter Bosch, Darren Dukes,
   Francois Clad, Sri Gundavelli, Sridhar Bhaskaran, Arashmid Akhavain,
    Ravi Shekhar, Aeneas Dodd-Noble, Carlos Jesus Bernardos, Dirk v. Hugo
     and Jeffrey Zhang for their useful comments of this work.<a href="#section-12-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-13">
      <h2 id="name-contributors">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<p id="section-13-1">Kentaro Ebisawa
      Toyota Motor Corporation
      Japan<a href="#section-13-1" class="pilcrow">¶</a></p>
<p id="section-13-2">Email: ebisawa@toyota-tokyo.tech<a href="#section-13-2" class="pilcrow">¶</a></p>
<p id="section-13-3">Tetsuya Murakami
      Arrcus, Inc.
      United States of America<a href="#section-13-3" class="pilcrow">¶</a></p>
<p id="section-13-4">Email: tetsuya.ietf@gmail.com<a href="#section-13-4" class="pilcrow">¶</a></p>
</section>
<section id="section-14">
      <h2 id="name-references">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-14.1">
        <h3 id="name-normative-references">
<a href="#section-14.1" class="section-number selfRef">14.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-spring-segment-routing-policy">[I-D.ietf-spring-segment-routing-policy]</dt>
        <dd>
<span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Talaulikar, K.</span>, <span class="refAuthor">Voyer, D.</span>, <span class="refAuthor">Bogdanov, A.</span>, and <span class="refAuthor">P. Mattes</span>, <span class="refTitle">"Segment Routing Policy Architecture"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-spring-segment-routing-policy-18</span>, <time datetime="2022-02-17" class="refDate">17 February 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-spring-segment-routing-policy-18">https://datatracker.ietf.org/doc/html/draft-ietf-spring-segment-routing-policy-18</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8402">[RFC8402]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Previdi, S., Ed.</span>, <span class="refAuthor">Ginsberg, L.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Litkowski, S.</span>, and <span class="refAuthor">R. Shakir</span>, <span class="refTitle">"Segment Routing Architecture"</span>, <span class="seriesInfo">RFC 8402</span>, <span class="seriesInfo">DOI 10.17487/RFC8402</span>, <time datetime="2018-07" class="refDate">July 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8402">https://www.rfc-editor.org/info/rfc8402</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8754">[RFC8754]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Dukes, D., Ed.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Leddy, J.</span>, <span class="refAuthor">Matsushima, S.</span>, and <span class="refAuthor">D. Voyer</span>, <span class="refTitle">"IPv6 Segment Routing Header (SRH)"</span>, <span class="seriesInfo">RFC 8754</span>, <span class="seriesInfo">DOI 10.17487/RFC8754</span>, <time datetime="2020-03" class="refDate">March 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8754">https://www.rfc-editor.org/info/rfc8754</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8986">[RFC8986]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Camarillo, P., Ed.</span>, <span class="refAuthor">Leddy, J.</span>, <span class="refAuthor">Voyer, D.</span>, <span class="refAuthor">Matsushima, S.</span>, and <span class="refAuthor">Z. Li</span>, <span class="refTitle">"Segment Routing over IPv6 (SRv6) Network Programming"</span>, <span class="seriesInfo">RFC 8986</span>, <span class="seriesInfo">DOI 10.17487/RFC8986</span>, <time datetime="2021-02" class="refDate">February 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8986">https://www.rfc-editor.org/info/rfc8986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="TS.23501">[TS.23501]</dt>
      <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"System Architecture for the 5G System"</span>, <span class="seriesInfo">3GPP TS 23.501 15.0.0</span>, <time datetime="2017-11" class="refDate">November 2017</time>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-14.2">
        <h3 id="name-informative-references">
<a href="#section-14.2" class="section-number selfRef">14.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ali-spring-network-slicing-building-blocks">[I-D.ali-spring-network-slicing-building-blocks]</dt>
        <dd>
<span class="refAuthor">Ali, Z.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Camarillo, P.</span>, and <span class="refAuthor">D. Voyer</span>, <span class="refTitle">"Building blocks for Slicing in Segment Routing Network"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ali-spring-network-slicing-building-blocks-04</span>, <time datetime="2021-02-21" class="refDate">21 February 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ali-spring-network-slicing-building-blocks-04">https://datatracker.ietf.org/doc/html/draft-ali-spring-network-slicing-building-blocks-04</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.camarilloelmalky-springdmm-srv6-mob-usecases">[I-D.camarilloelmalky-springdmm-srv6-mob-usecases]</dt>
        <dd>
<span class="refAuthor">Garvia, P. C.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Elmalky, H.</span>, <span class="refAuthor">Matsushima, S.</span>, <span class="refAuthor">Voyer, D.</span>, <span class="refAuthor">Cui, A.</span>, and <span class="refAuthor">B. Peirens</span>, <span class="refTitle">"SRv6 Mobility Use-Cases"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-camarilloelmalky-springdmm-srv6-mob-usecases-02</span>, <time datetime="2019-08-15" class="refDate">15 August 2019</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-camarilloelmalky-springdmm-srv6-mob-usecases-02">https://datatracker.ietf.org/doc/html/draft-camarilloelmalky-springdmm-srv6-mob-usecases-02</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-lsr-flex-algo">[I-D.ietf-lsr-flex-algo]</dt>
        <dd>
<span class="refAuthor">Psenak, P.</span>, <span class="refAuthor">Hegde, S.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Talaulikar, K.</span>, and <span class="refAuthor">A. Gulko</span>, <span class="refTitle">"IGP Flexible Algorithm"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-lsr-flex-algo-18</span>, <time datetime="2021-10-25" class="refDate">25 October 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-lsr-flex-algo-18">https://datatracker.ietf.org/doc/html/draft-ietf-lsr-flex-algo-18</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-spring-segment-routing-central-epe">[I-D.ietf-spring-segment-routing-central-epe]</dt>
        <dd>
<span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Dawra, G.</span>, <span class="refAuthor">Aries, E.</span>, and <span class="refAuthor">D. Afanasiev</span>, <span class="refTitle">"Segment Routing Centralized BGP Egress Peer Engineering"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-spring-segment-routing-central-epe-10</span>, <time datetime="2017-12-21" class="refDate">21 December 2017</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-spring-segment-routing-central-epe-10">https://datatracker.ietf.org/doc/html/draft-ietf-spring-segment-routing-central-epe-10</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-spring-sr-service-programming">[I-D.ietf-spring-sr-service-programming]</dt>
        <dd>
<span class="refAuthor">Clad, F.</span>, <span class="refAuthor">Xu, X.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Bernier, D.</span>, <span class="refAuthor">Li, C.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Ma, S.</span>, <span class="refAuthor">Yadlapalli, C.</span>, <span class="refAuthor">Henderickx, W.</span>, and <span class="refAuthor">S. Salsano</span>, <span class="refTitle">"Service Programming with Segment Routing"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-spring-sr-service-programming-05</span>, <time datetime="2021-09-10" class="refDate">10 September 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-spring-sr-service-programming-05">https://datatracker.ietf.org/doc/html/draft-ietf-spring-sr-service-programming-05</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.kohno-dmm-srv6mob-arch">[I-D.kohno-dmm-srv6mob-arch]</dt>
        <dd>
<span class="refAuthor">Kohno, M.</span>, <span class="refAuthor">Clad, F.</span>, <span class="refAuthor">Camarillo, P.</span>, and <span class="refAuthor">Z. Ali</span>, <span class="refTitle">"Architecture Discussion on SRv6 Mobile User plane"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-kohno-dmm-srv6mob-arch-05</span>, <time datetime="2021-11-08" class="refDate">8 November 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-kohno-dmm-srv6mob-arch-05">https://datatracker.ietf.org/doc/html/draft-kohno-dmm-srv6mob-arch-05</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.matsushima-spring-srv6-deployment-status">[I-D.matsushima-spring-srv6-deployment-status]</dt>
        <dd>
<span class="refAuthor">Matsushima, S.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Ali, Z.</span>, <span class="refAuthor">Li, Z.</span>, <span class="refAuthor">Rajaraman, K.</span>, and <span class="refAuthor">A. Dhamija</span>, <span class="refTitle">"SRv6 Implementation and Deployment Status"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-matsushima-spring-srv6-deployment-status-12</span>, <time datetime="2022-02-10" class="refDate">10 February 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-matsushima-spring-srv6-deployment-status-12">https://datatracker.ietf.org/doc/html/draft-matsushima-spring-srv6-deployment-status-12</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.murakami-dmm-user-plane-message-encoding">[I-D.murakami-dmm-user-plane-message-encoding]</dt>
        <dd>
<span class="refAuthor">Murakami, T.</span>, <span class="refAuthor">Matsushima, S.</span>, <span class="refAuthor">Ebisawa, K.</span>, <span class="refAuthor">Camarillo, P.</span>, and <span class="refAuthor">R. Shekhar</span>, <span class="refTitle">"User Plane Message Encoding"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-murakami-dmm-user-plane-message-encoding-04</span>, <time datetime="2021-09-02" class="refDate">2 September 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-murakami-dmm-user-plane-message-encoding-04">https://datatracker.ietf.org/doc/html/draft-murakami-dmm-user-plane-message-encoding-04</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="TS.29281">[TS.29281]</dt>
        <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"General Packet Radio System (GPRS) Tunnelling Protocol User Plane (GTPv1-U)"</span>, <span class="seriesInfo">3GPP TS 29.281 15.1.0</span>, <time datetime="2017-12" class="refDate">December 2017</time>. </dd>
<dd class="break"></dd>
<dt id="TS.38415">[TS.38415]</dt>
      <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"Draft Specification for 5GS container (TS 38.415)"</span>, <span class="seriesInfo">3GPP R3-174510 0.0.0</span>, <time datetime="2017-08" class="refDate">August 2017</time>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="Implementations">
<section id="appendix-A">
      <h2 id="name-implementations">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-implementations" class="section-name selfRef">Implementations</a>
      </h2>
<p id="appendix-A-1">This document introduces new SRv6 Endpoint Behaviors. These behaviors have an
   open-source P4 implementation available in
   <span><a href="https://github.com/ebiken/p4srv6">https://github.com/ebiken/p4srv6</a></span>.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">Additionally, a full implementation of this document is available in Linux Foundation FD.io VPP project since release 20.05. More information available here: 
    <span><a href="https://docs.fd.io/vpp/20.05/d7/d3c/srv6_mobile_plugin_doc.html">https://docs.fd.io/vpp/20.05/d7/d3c/srv6_mobile_plugin_doc.html</a></span>.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
<p id="appendix-A-3">There are also experimental implementations in M-CORD NGIC and Open Air Interface (OAI).<a href="#appendix-A-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Satoru Matsushima (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">SoftBank</span></div>
<div dir="auto" class="left"><span class="country-name">Japan</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:satoru.matsushima@g.softbank.co.jp" class="email">satoru.matsushima@g.softbank.co.jp</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Clarence Filsfils</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc.</span></div>
<div dir="auto" class="left"><span class="country-name">Belgium</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:cf@cisco.com" class="email">cf@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Miya Kohno</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc.</span></div>
<div dir="auto" class="left"><span class="country-name">Japan</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mkohno@cisco.com" class="email">mkohno@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Pablo Camarillo Garvia (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc.</span></div>
<div dir="auto" class="left"><span class="country-name">Spain</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:pcamaril@cisco.com" class="email">pcamaril@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Daniel Voyer</span></div>
<div dir="auto" class="left"><span class="org">Bell Canada</span></div>
<div dir="auto" class="left"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:daniel.voyer@bell.ca" class="email">daniel.voyer@bell.ca</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Charles E. Perkins</span></div>
<div dir="auto" class="left"><span class="org">Lupin Lodge</span></div>
<div dir="auto" class="left"><span class="street-address">20600 Aldercroft Heights Rd.</span></div>
<div dir="auto" class="left">
<span class="locality">Los Gatos</span>, <span class="region">CA</span> <span class="postal-code">95033</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:charliep@computer.org" class="email">charliep@computer.org</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
