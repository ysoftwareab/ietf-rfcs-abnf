
   Internet Engineering Task Force                                      
   Internet Draft                                       Suman Choudhary 
   Document: draft-suman-sipping-stat-00.txt                     Huawei 
                                                           Technologies 
   Expires: December 2004                                    June 2004 
    
    
                             Statistics in SIP 
    
    
Status of this Memo 
    
   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC2026 [i].  
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that      
   other groups may also distribute working documents as Internet-
   Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 
    
   The list of current Internet-Drafts can be accessed at 
        http://www.ietf.org/ietf/1id-abstracts.txt 
   The list of Internet-Draft Shadow Directories can be accessed at 
        http://www.ietf.org/shadow.html. 
    
   This document is an individual submission to the IETF. Comments 
   should be directed to the authors. 
    
    
Abstract 
    
   SIP has emerged as a popular protocol for session setup and 
   management. But feedback is an important attribute of any session.
   The objective of this document is to provide a generic framework 
   which could be used by user agents to provide feedback about the
   session when it terminates.
    
    
Conventions used in this document 
    
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in RFC-2119 [ii]. 
    
Table of Contents 
    
 
 
Suman Choudhary        Expires -  December 2004               [Page 1] 
                          Statistics in SIP                  June 2004 
 
 
   1. Overview.......................................................2 
   2. Rationale......................................................2 
   3. Introduction...................................................2 
   4. IANA Considerations............................................4 
   5. Formal Syntax..................................................4 
   6. Illustrative Examples..........................................5 
   7. Security Considerations........................................5 
   References........................................................6 
   Acknowledgments...................................................6 
   Author's Addresses................................................6 
    
    
1. Overview 
    
   The document defines a extension mechanism to the existing SIP 
   protocol to support session characteristics. Feedback is an important
   attribute of any session. The objective of this document is to 
   provide a generic framework which could be used by user agents to 
   provide feedback about the completed session. The framework is 
   designed so as to accommodate sessions of various types. The 
   motivation for writing this draft was to monitor the quality of 
   service over Voice over IP networks. 
    
    
2. Rationale 
    
   A typical scenario where this idea would be useful is explained to 
   highlight its importance. Diagnosing voice quality problems in a 
   Voice over IP environment is a complex and tedious job. Several tools 
   have been designed to analyze voice packets and generate cumulative 
   statistical data which are then analyzed using computational methods 
   to arrive at figures like Mean Opinion Score, which is the final 
   rating providing a qualitative figure for user level satisfaction for 
   voice quality. Since the user agents are directly involved in the 
   session, and have gathered all useful information, it is always 
   preferable to transfer this information to controlling entity. The 
   controlling entity can use this information to arrive at a conclusion 
   regarding the quality of the session. The document assumes that the 
   information available from the user agent is reliable. It also helps 
   the service providers to constantly evaluate the performance of the 
   network real-time on a per session basis, apart from traffic 
   measurement and modeling research. 
    
    
3. Introduction 
    
       Currently SIP protocol does not provide any mechanism for the 
   session participants to provide feedback regarding the session. The 
   objective of this document is to provide a generic framework for 
 
 
Suman Choudhary        Expires -  December 2004               [Page 2] 
                          Statistics in SIP                  June 2004 
 
 
   reporting statistics information which could be used by network 
   entities to collect session related statistics. The framework is 
   designed so as to accommodate sessions of various types.
    
       A typical session among participants would involve a voice dialog 
   established between participants. In this case, the feedback is 
   provided in the form of parameters like latency, jitter buffer,
   packets lost on the IP channel, those that have been received but 
   then discarded by the receiving jitter buffer, out of sequence 
   packets, duplicate packets, packets sent, packets received, etc. 
    
       Although the previous paragraph emphasized the importance of the 
   draft with respect to a session carrying voice packets, the concept 
   holds good and has importance for any session. 
    
       Any session is characterized by certain parameters which describe 
   its attributes. For a video session, additional parameters can be 
   provided in the form of feedback, they could include frames received,
   frames sent, frames lost, etc. For a data session which could 
   possibly involve the transfer of fax information, they could include 
   the number of fax pages sent, number of fax pages received, etc. 
       
       Table 1 illustrates some of the parameters which have been 
   considered in the basic framework. Additional parameters can be added 
   based on the importance, its application and usage in a specific 
   environment. 
    
   Parameter-name    Meaning 
    
   ps                Number of packets sent 
   pr                Number of packets received 
   po                Number of packets received out of sequence 
   pl                Number of packets lost 
   dur               Duration of the session 
   del               Average propagation delay expressed in ms 
   la                Average latency encountered 
   vji               Average Voice Jitter encountered 
   mos               Mean Opinion Score 
   fpgs              Number of fax pages sent 
   fpgr              Number of fax pages received 
   vfr               Video Frame Rate 
   frms              Number of frames sent 
   frmr              Number of frames received 
    
    
                     Table 1: List of Parameter Names 
    

 
 
Suman Choudhary        Expires -  December 2004               [Page 3] 
                          Statistics in SIP                  June 2004
 
 
       User Agents which support this draft will send this information 
   at the end of the session. If the controlling entity does not support 
   this draft, it MUST ignore these parameters and continue normal 
   processing. The parameters will be routed till the destination. Any 
   intermediate proxies who need this information will parse the 
   contents. 
    
   If the user agent initiates the termination of the session, then the 
   feedback information is sent in the BYE message.  
        
   If the user agent receives BYE, then it sends the feedback 
   information the response to BYE. 
    
4. IANA Considerations 
    
   This draft registers the "application/stat" MIME media type. 
   The statistics information is text-based. It follows the 
   recommendations of RFC 2045[10] for the usage of text-based data for 
   MIME. 
    
   This media type is defined by the following information: 
    
   Media type name: application 
   Media subtype name: stat 
   Required Parameters: None 
   Encoding scheme: ASCII 
   Security considerations: See section 7. 
    
    
5. Formal Syntax 
    
   The grammar for this mime-type is mostly derived out of the SIP 
   specification (RFC 3261[1]). The following definitions are derived 
   from the SIP specification (RFC 3261[1]). 
    
       token 
       DIGIT 
       HCOLON 
       COMMA 
       quoted-string 
    
       Session-information   = 1*( Session-Header CRLF) 
       Session-Header        = ( Session-type / Session-id /  
                               Session-Info / ExtensionParameter ) 
       ExtensionParameter    = token 
       Session-type          = ( "voice" | "data" | "video"  
                                 | "application" | "control"  
                                 | other-service-type) CRLF 
       other-service-type    = quoted-string 
 
 
Suman Choudhary        Expires -  December 2004               [Page 4] 
                          Statistics in SIP                  June 2004
 
 
                           ; it is suggested that the otehr-service-type 
                           ; should be in accordance with the new 
                           ; media-type token defined in sdp in "m=" 
                           ; parameter 
       Session-id            = 1*DIGIT CRLF ; 
                          ; this is obtained from the "o=" field of SDP 
                          ;  
       Session-Info          = SessionParameter 0*( COMMA 0*(WSP) 
                              SessionParamter ) CRLF  
       SessionParamter       = SessionParameterName HCOLON 
                              [ SessionParameterValue ] 
       SessionParameterName  = "ps" / "pr" / "po" / "pl" / "dur" / "del" 
                               "la" / "vji" / "mos" / "fpgs" /"fpgr" / 
                               "vfr" / "frms" / "frmr" 
       SessionParameterValue = *( field-content | LWS ) 
                                ; refer RFC 2543 for field-content
    
6. Illustrative Examples 
    
   A provision for Statistics information at the end of the session is 
   taken as an example. 
    
   BYE sip:callee@example.com SIP/2.0 
   From: "Caller" <sip:caller@example.com>;tag=12sdfa.234 
   To: "Callee" <sip:callee@example.com>;tag=exdsra.ert 
   Call-ID: 12345@example.com 
   CSeq: 2 BYE 
   Via: SIP/2.0/UDP 169.100.1.1;branch=z9hG4bKnashds10 
   Content-Type: application/stat 
   Content-Length: 251 
    
   Session_type: voice 
   Session_id: 6722 
   Session_param: ps = 1723, pr = 1234, pl = 234, po = 234, ji = 4, la = 
   2, mos = 3.5 
    
   Session_type: data 
   Session_id: 8890 
   Session_param: pgs = 234, pgr = 234, pgl = 0 
    
    
7. Security Considerations 
    
   The document does not define any new security mechanism for the 
   transfer of statistics information.  
    
    
    

 
 
Suman Choudhary        Expires -  December 2004               [Page 5] 
                          Statistics in SIP                  June 2004
 
 
References 
    
                     
   1 Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., 
      Peterson, J., Sparks, R., Handley, M. and E. Schooler, "SIP: 
      Session Initiation Protocol", RFC 3261, June 2002. 
    
   2 Bradner, S., "The Internet Standards Process -- Revision 3", BCP9, 
      RFC 2026, October 1996. 
    
   3 Crocker, D. and Overell, P.(Editors), "Augmented BNF for Syntax 
      Specifications: ABNF", RFC 2234, Internet Mail Consortium and 
      Demon Internet Ltd., November 1997 
    
   4 Freed, N., Klensin, J. and J. Postel, "Multipart Internet Mail 
      Extensions (MIME) Part Four: Registration Procedures", BCP 13,  
      RFC 2048, November 1996. 
    
   5 Freed, N. and N. Borenstein, "Multipart Internet Mail  
     Extensions(MIME) Part One: Format of Internet Message Bodies",  
     RFC 2045, November 1996.  
    
   6 Freed, N. and N. Borenstein, "Multipart Internet Mail Extensions  
     (MIME) Part Two: Media Types", RFC 2046, November 1996. 
    
   7 Troost, R., Dorner, S. and K. Moore, "Communicating Presentation  
     Information in Internet Messages: The Content-Disposition Header  
     Field", RFC 2183, August 1997.  
    
   8 Narten, T. and H. Alvestrand, "Guidelines for Writing an IANA  
     Considerations Section in RFCs", BCP 26, RFC 2434, October 1998. 
    
    
Acknowledgments 
    
   Thanks to Veer Kamesh, Kannan, Ranjit, Prasanna and Jaspreet, all 
   belonging to Huawei India for helping me carry this work forward and 
   providing the idea and comments. 
    
    
Author's Addresses 
    
   Suman Choudhary 
   Huawei Technologies 
   4th Floor, Leela Galleria, 
   Leela Palace, 
   Bangalore 
   Email: sumanc@huawei.com 

 
 
Suman Choudhary        Expires -  December 2004               [Page 6] 
                          Statistics in SIP                  June 2004
 
 
   Full Copyright Statement  
        
   Copyright (C) The Internet Society (2002).  All Rights Reserved.  
        
       This document and translations of it may be copied and furnished 
   to others, and derivative works that comment on or otherwise explain 
   it or assist in its implementation may be prepared, copied, published 
   and distributed, in whole or in part, without restriction of any 
   kind, provided that the above copyright notice and this paragraph are 
   included on all such copies and derivative works.  However, this 
   document itself may not be modified in any way, such as by removing 
   the copyright notice or references to the Internet Society or other 
   Internet organizations, except as needed for the purpose of 
   developing Internet standards in which case the procedures for 
   copyrights defined in the Internet Standards process must be  
   followed, or as required to translate it into languages other than  
   English.  
        
       The limited permissions granted above are perpetual and will not  
   be revoked by the Internet Society or its successors or assigns.  
        
       This document and the information contained herein is provided on  
   an "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET  
   ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED,  
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE  
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED  
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 






















 
 
Suman Choudhary        Expires -  December 2004               [Page 7] 

