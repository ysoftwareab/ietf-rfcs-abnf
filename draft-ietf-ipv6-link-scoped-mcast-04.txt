IPv6 Working Group                                             J-S. Park
INTERNET DRAFT                                                      ETRI
Expires: January 2005                                          M-K. Shin
                                                               ETRI/NIST
                                                                H-J. Kim
                                                                    ETRI
                                                               July 2004


                  Link Scoped IPv6 Multicast Addresses
               <draft-ietf-ipv6-link-scoped-mcast-04.txt>



Status of this Memo


     By submitting this Internet-Draft, I certify that any applicable
     patent or other IPR claims of which I am aware have been disclosed,
     and any of which I become aware will be disclosed, in accordance
     with RFC 3668.


     Internet-Drafts are working documents of the Internet Engineering
     Task Force (IETF), its areas, and its working groups.  Note that
     other groups may also distribute working documents as Internet-
     Drafts.


     Internet-Drafts are draft documents valid for a maximum of six
     months and may be updated, replaced, or obsoleted by other docu-
     ments at any time.  It is inappropriate to use Internet-Drafts as
     reference material or to cite them other than as "work in
     progress."


     The list of current Internet-Drafts can be accessed at
     http://www.ietf.org/ietf/1id-abstracts.txt.


     The list of Internet-Draft Shadow Directories can be accessed at
     http://www.ietf.org/shadow.html.


     This Internet-Draft will expire on January 2005.



Abstract


     This document specifies an extension to the multicast addressing
     architecture of the IPv6 protocol. The extension allows for the use
     of interface-IDs to allocate multicast addresses.  When the link-
     local unicast address is configured at each interface of a host, an
     interface ID is uniquely determined.  By delegating multicast
     addresses at the same time as the interface ID, each host can
     identify their multicast addresses automatically at Layer 1 without
     running an intra- or inter-domain allocation protocol in serverless
     environments. Basically, it is preferred to use this method for the
     link-local scope rather than Unicast-Prefix-based IPv6 Multicast
     Addresses [RFC 3306].





Park et al.               Expires January 2005                  [Page 1]


INTERNET-DRAFT    Link Scoped IPv6 Multicast Addresses         July 2004



Table of Contents:


     1. Introduction................................................2
     2. Applicability...............................................3
     3. Link scoped multicast address format........................3
     4. Examples....................................................4
     5. Considerations..............................................4
     6. Security Considerations.....................................5
     7. Acknowledgments.............................................5
     8. References..................................................5
     Authors' Addresses.............................................6




1. Introduction


     This specification defines an extension to the multicast portion of
     the IPv6 addressing architecture [RFC 3513].  The current
     architecture does not contain any built-in support for dynamic
     address allocation.  The extension allows for use of interface-IDs
     to allocate multicast addresses.  When the link-local unicast
     address is configured at each interface of a host, an interface ID
     is uniquely determined.  By delegating multicast addresses at the
     same time as the interface ID, each host can identify its multicast
     addresses automatically without running an intra- or inter-domain
     allocation protocol in serverless environments.


     The current multicast address allocation architecture [RFC 2908] is
     based on a multi-layered, multi-protocol system.  The goal of this
     proposal is to reduce the number of protocols and servers to get
     dynamic multicast address allocation.


     The use of interface ID-based multicast address allocation will, at
     a minimum, remove the need to run the Multicast Address-Set Claim
     (MASC) Protocol [RFC 2909] and the Multicast Address Allocation
     servers [RFC 2908].


     Basically, it is preferred to use this method for the link-local
     scope rather than Unicast-Prefix-based IPv6 Multicast Addresses
     [RFC 3306].  This document restricts the usage of defined fields
     such as scope, plen and network prefix field in [RFC 3306].
     Therefore, this document specifies encoded information for link-
     local scope in the multicast addresses.


     The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
     "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in
     this document are to be interpreted as described in [RFC 2119].










Park et al.               Expires January 2005                  [Page 2]


INTERNET-DRAFT    Link Scoped IPv6 Multicast Addresses         July 2004



2. Applicability


     The allocation technique in this document is designed to be used in
     any environment in which link-local scope IPv6 multicast addresses
     are assigned or selected.  Especially, this method goes well with
     nodes supplying multicast services in a zeroconf environment.  For
     example, multicast addresses less than or equal to link-local scope
     are themselves generated by nodes supplying multicast services.


     Consequently, this technique MUST be used for link scoped multicast
     addresses.  If you want to use multicast addresses greater than
     link- local, you need other methods such as [RFC 3306].



3. Link scoped multicast address format


     Section 2.7 of [EFC 3513] defines the following operational format
     of IPv6 multicast addresses:


      |    8   |  4 |  4 |                     112                     |
      +--------+----+----+---------------------------------------------+
      |11111111|flgs|scop|                  group ID                   |
      +--------+----+----+---------------------------------------------+


            Figure 1:  Generic IPv6 multicast address format


     This document introduces new formats that incorporate interface ID
     information in the multicast address.  The idea of delegating
     multicast addresses at the same time as the interface ID can be
     applicable to link-local.


     Figure 2 illustrates the new format for link scoped multicast
     addresses.  That is, if the scope of the multicast address is link-
     local scope, it is this format.



      |   8    | 4  | 4  |     16     |       64       |       32      |
      +--------+----+----+------------+----------------+---------------+
      |11111111|flgs|scop|  reserved  |  Interface ID  |    group ID   |
      +--------+----+----+------------+----------------+---------------+


           Figure 2: link scoped multicast IPv6 address format


                                      +-+-+-+-+
      flgs is a set of 4 flags:       |0|0|P|T|
                                      +-+-+-+-+


          o P = 0 indicates a multicast address that is not assigned
                  on the basis of the interface ID.
          o P = 1 indicates a multicast address that is assigned
                  on the basis of the interface ID.
          o If P = 1, T MUST be set to 1, otherwise the setting of





Park et al.               Expires January 2005                  [Page 3]


INTERNET-DRAFT    Link Scoped IPv6 Multicast Addresses         July 2004



                  the T bit is defined in Section 2.7 of [RFC 2373].


     flgs should use the same flag defined in section 4 of [RFC 3306].
     That is, this document proposes the third bit of 'flgs' field to
     indicate an Interface ID-based multicast addresses.


     scop MUST be <= 2. It is preferred to use this method for the link-
     local scope rather than Unicast-Prefix-based IPv6 Multicast
     Addresses [RFC 3306].


     The reserved field MUST be zero which maps to a plen of zero in RFC
     3306.


     Interface ID field is used to distinguish each host from others.
     And this value is obtained from the IEEE EUI-64 based interface
     identifier of the link-local unicast IPv6 address.  Given the use
     of this method for link-local scope, the interface ID embedded in
     the multicast address SHOULD come from the interface ID of the
     link-local unicast address on the interface after DAD has
     completed.  That is, the creation of the multicast address MUST
     occur after DAD has completed as part of the auto-config process.


     Group ID is generated to indicate multicast application and is used
     to guarantee its uniqueness only in the host.  It may also be set
     on the basis of the guidelines outlined in [RFC 3307].


     The lifetime of an Interface ID-based multicast address has no
     dependency on the Valid Lifetime field in the Prefix Information
     option, corresponding to the unicast address being used, contained
     in the Router Advertisement message [RFC 2461].



4. Examples


     This is an example of an interface ID-based multicast address with
     link-local scope.  For example in an Ethernet environment, if the
     link-local unicast address is FE80::a12:34ff:fe56:7890, the
     multicast prefix of the host is FF32:0:a12:34ff:fe56:7890::/96.



5. Considerations


     It is preferred to use this method for scop <= 2 rather than
     Unicast-Prefix-based IPv6 Multicast Addresses [RFC 3306].  This
     document considers only link scoped multicast addresses.  For this
     purpose, scop field is used shown in figure 2.


     The link scoped multicast address format supports source-specific
     multicast addresses by the same method, as defined by [RFC 3306].


     Note that if an SSM implementation checks for FF3x::/32, not
     FF3x::/96, the other nodes not implementing this specification will





Park et al.               Expires January 2005                  [Page 4]


INTERNET-DRAFT    Link Scoped IPv6 Multicast Addresses         July 2004



     interpret the link-local multicast addresses generated using this
     specification as SSM addresses, since the document uses the
     reserved field in such a fashion that plen=0 [RFC 3306].  In order
     to avoid this conflict, we recommend SSM implementations must check
     for FF3x::/96, as described in Allocation Guidelines for IPv6
     Multicast Addresses [RFC 3307] section 3.



6. Security Considerations


     [RFC 3041] describes the privacy extension to IPv6 stateless
     address autoconfiguration for an interface ID.  The interface ID,
     generated by [RFC 3041], is also used in this method since the
     uniqueness is verified by DAD procedure as part of the secure auto-
     config process.


     Using source-specific multicast addresses can sometimes aid in the
     prevention of denial-of-service attacks by arbitrary sources,
     although no guarantee is provided.  A more in-depth discussion of
     the security considerations for SSM can be found in [SSM ARCH].



7. Acknowledgements


     We would like to thank Dave Thaler and Brian Haberman for his
     comments related to the consistency between the unicast prefix-
     based multicast draft and this one.  Special thanks are due to Erik
     Nordmark and Pekka Savola for valuable comments.



8. References


 Normative


 [RFC 2119] S. Bradner, "Key words for use in RFCs to indicate
            Requirement Levels", RFC 2119, March 1997.


 [RFC 3041] T. Narten and R. Draves, "Privacy Extensions for
            Stateless Address Autoconfiguration in IPv6," RFC 3041,
            April 2001.


 [RFC 3306] B. Haberman and D. Thaler, "Unicast-Prefix-based IPv6
            Multicast Addresses," RFC 3306, August 2002.


 [RFC 3307] B. Haberman, "Allocation Guidelines for IPv6 Multicast
            Addresses," RFC 3307, August 2002.


 [RFC 3513] R. Hinden and S. Deering, "IP Version 6 Addressing
            Architecture", RFC 3513, April 2003.


 Informative






Park et al.               Expires January 2005                  [Page 5]


INTERNET-DRAFT    Link Scoped IPv6 Multicast Addresses         July 2004



 [RFC 2461] T. Narten, E. Nordmark and W. Simpson, "Neighbor
            Discovery for  IP Version 6 (IPv6)", RFC 2461, December
            1998.


 [RFC 2908] D. Thaler, M. Handley and D. Estrin, "The Internet
            Multicast  Address Allocation Architecture," RFC 2908,
             September 2000.


 [RFC 2909] P. Radoslavov, D. Estrin, R. Govindan, M. Handley,
            S. Kumar, and D. Thaler, "The Multicast Address-Set Claim
            (MASC) Protocol", RFC 2909, September 2000.


 [SSM ARCH] H. Holbrook and B. Cain, "Source-Specific Multicast for
            IP", Work In Progress, October 2003.




Authors' Addresses


       Jung-Soo Park
       ETRI PEC
       161 Gajeong-Dong, Yuseong-Gu, Daejon 305-600, Korea
       Phone: +82 42 860 6514
       Email: jspark@pec.etri.re.kr


       Myung-Ki Shin
       ETRI/NIST
       820 West Diamond Avenue
       Gaithersburg, MD 20899, USA
       Tel : +1 301 975-3613
       Fax : +1 301 590-0932
       E-mail : mshin@nist.gov


       Hyoung-Jun Kim
       ETRI PEC
       161 Gajeong-Dong, Yuseong-Gu, Daejon 305-600, Korea
       Phone: +82 42 860 6576
       Email: khj@etri.re.kr




Intellectual Property Statement


     The IETF takes no position regarding the validity or scope of any
     Intellectual Property Rights or other rights that might be claimed
     to pertain to the implementation or use of the technology described
     in this document or the extent to which any license under such
     rights might or might not be available; nor does it represent that
     it has made any independent effort to identify any such rights.
     Information on the procedures with respect to rights in RFC
     documents can be found in BCP 78 and BCP 79.






Park et al.               Expires January 2005                  [Page 6]


INTERNET-DRAFT    Link Scoped IPv6 Multicast Addresses         July 2004



     Copies of IPR disclosures made to the IETF Secretariat and any
     assurances of licenses to be made available, or the result of an
     attempt made to obtain a general license or permission for the use
     of such proprietary rights by implementers or users of this
     specification can be obtained from the IETF on-line IPR repository
     at http://www.ietf.org/ipr.


     The IETF invites any interested party to bring to its attention any
     copyrights, patents or patent applications, or other proprietary
     rights that may cover technology that may be required to implement
     this standard.  Please address the information to the IETF at ietf-
     ipr@ietf.org.



Disclaimer of Validity


     This document and the information contained herein are provided on
     an "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE
     REPRESENTS OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND
     THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
     THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR
     ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A
     PARTICULAR PURPOSE.



Copyright Statement


     Copyright (C) The Internet Society (2004).  This document is
     subject to the rights, licenses and restrictions contained in BCP
     78, and except as set forth therein, the authors retain all their
     rights.



Acknowledgment


     Funding for the RFC Editor function is currently provided by the
     Internet Society.


















Park et al.               Expires January 2005                  [Page 7] 