NEMO Working Group                                         Eranga Perera
INTERNET DRAFT                                                      UNSW 
29th July 2003                                              Robert Hsieh 
                                                                    UNSW
                                                       Aruna Seneviratne
                                                                    UNSW
                                                      

                     Extended Network Mobility Support  
                     draft-perera-nemo-extended-00.txt

Status of This Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at
   any time.  It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at:
        http://www.ietf.org/ietf/1id-abstracts.txt
   The list of Internet-Draft Shadow Directories can be accessed at:
        http://www.ietf.org/shadow.html.


Abstract
   This draft proposes a solution for extended network mobility support,
   that is a mechanism to enable optimal routing between mobile network
   nodes and its correspondent nodes. The proposed scheme not only
   provides optimal routing for the mobility aware nodes but also
   maintains the benefits of mobility transparency. Our solution
   achieves route optimization by expecting the Mobile Router to take
   the role of an Access Router thereby reducing the number of external
   signaling messages a node behind the Mobile Router needs to perform.
   In order to further reduce the number of signaling messages beyond
   the scope of the mobile network we further propose the Mobile Router
   to play the role of an Home Agent for NEMO-enabled nodes.












Perera et al.             Expires 29 January 2004              [Page 1]



Internet Draft       Extended Network Mobility Support      29 July 2003




                                 Contents

   1. Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . 3

   2. Terminology  . . . . . . . . . . . . . . . . . . . . . . . . . . 4

   3. Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6

       3.1 Dual Roles of the Mobile Router. . . . . . . . . . . . . .  7

           3.1.1 Mobile Router as an Access Router. . . . . . . . . .  7

           3.1.2 Mobile Router as a Home Agent. . . . . . . . . . . .  8

       3.2 Enabling Route Optimization for the Mobile Network Nodes .  9

           3.2.1 Enabling Route Optimization for the Mobile Router. .  9

	   3.2.2 Enabling Route Optimization for Nodes behind the
	         Mobile Router. . . . . . . . . . . . . . . . . . . .  9

   4. Mobile Router Operations  . . . . . . . . . . . . . . . . . . . 10

      4.1 Mobile Router Operations as an Access Router. . . . . . . . 10

      4.2 Mobile Router operations as a Home Agent. . . . . . . . . . 11

          4.2.1 Process of Discovering the Mobile Router . . . . . .  11 
   
          4.2.2 Establishment of a Bidirectional between the Mobile  
	        Router and the NEMO-enabled nodes  . . . . . . . . .  12 

          4.2.3 Establishment of a Bidirectional tunnel between the 
	        Mobile Router and its Home Agent . . . . . . . . . .  12 

   5. Mobile Router's Home Agent Operations . . . . . . . . . . . . . 13 
    
   6. Mobile Network Nodes Route Optimization Operations . . . . . .  14 
    
      6.1 MIPv6-enabled Mobile Network Nodes Route Optimization
          operations . . . . . . . . . . . . . . . . . . . . . . . .  14

      6.2 NEMO-enabled Local Mobile Node and Local Fixed Node 
          Operations . . . . . . . . . . . . . . . . . . . . . . . .  14

   7. Security Considerations . . . . . . . . . . . . . . . . . . . . 15

   
     
Perera et al.             Expires 29 January 2004              [Page 2]



Internet Draft       Extended Network Mobility Support      29 July 2003


1. Introduction

   The basic NEMO protocol [1] provides session continuity to all the 
   nodes in the mobile network. This is achieved by creating a
   bidirectional tunnel between the Mobile Router and its Home Agent. 
   Although this is achieved while providing complete mobility 
   transparency to the nodes within the network, the solution forces all 
   datagrams for a mobile node to be routed through the Home Agent. Our 
   solution proposes a mechanism in order to overcome this indirect 
   routing and provide route optimization for all MIPv6-enabled nodes of
   a mobile network.

   In MIPv6 [2] route optimization provide a means for mobile nodes to 
   send their current mobility bindings, in particular, the care-of 
   address to the correspondent nodes, enabling direct communication. It 
   is evident that in order for a mobile node to perform route
   optimization, it should be aware of its current location.
   If we were to provide network mobility transparency to all nodes
   within the mobile network, as the mobile nodes within the mobile
   network are unaware of their current location, would need to depend
   on the Mobile Router to deal with all mobility management issues
   including route optimization. We advocate on not adhering to the
   design goal of network mobility transparency when providing extended
   mobility support. We believe that allowing a mobile node to handle
   sending Binding Updates to its correspondent nodes is a much secure
   task than depending on another node to perform this task. Our scheme
   preserves benefits of mobility transparency when providing optimal
   routing for MIPv6-enabled nodes. This is achieved by extending the
   Mobile Router's operations, in order to limit the signaling that a
   mobile network node needs to perform beyond the scope of the mobile
   network to a minimum. 

   Although our solution would only support MIPv6-enabled nodes in
   optimal routing our solution does not inhibit in anyway the correct
   operation of the NEMO basic protocol for mobility unaware nodes. Our
   solution is backward compatible with MIPv6 and also compatible with
   the solution for basic NEMO support. 














Perera et al.             Expires 29 January 2004              [Page 3]


Internet Draft       Extended Network Mobility Support      29 July 2003

2. Terminology 
   
   This document uses the mobility related terminology defined in [2],
   [3] and [4]. 
   The following terms are used as defined in [2].

      - Home Agent

      - Home Address

      - Care-of Address 

      - Binding Update 

   The following terms defined in [3] specific to network mobility are
   used in this draft.
      
      - Local Mobile Node
   
      - Local Fixed Node

      - Visiting Mobile Node

      - Mobile Network Node

      - Correspondent Nodes

      - Home Subnet Prefix

      - MIPv6-enabled (MIPv6-node)
     
      - Node behind the Mobile Router

   Except for the definitions of the terms 'Mobile Router' and
   'NEMO-enabled' the rest of the above terms are used as per
   definitions in [3]. Before presenting our extensions to the
   definition of a Mobile Router we state the definitions of a Home
   Agent [2] and Access Router [4], since our definition relies on these
   two terms. 

   Access Router -

      An Access Network Router residing on the edge of an Access Network
      and connected to one or more Access Points.  The Access Points
      maybe of different technology.  An Access Router offers IP
      connectivity to Mobile Nodes, acting as a default router to the
      Mobile Nodes it is currently serving.  The Access Router may
      include intelligence beyond a simple forwarding service offered
      by ordinary IP routers.




Perera et al.             Expires 29 January 2004              [Page 4]


Internet Draft       Extended Network Mobility Support      29 July 2003


   Home Agent  -

      A router on a mobile node's home link with which the mobile node
      has registered its current care-of address.  While the mobile 
      node is away from home, the Home Agent intercepts packets on the 
      home link destined to the mobile node's home address, 
      encapsulates them, and tunnels them to the mobile node's 
      registered care-of address.

   Mobile Router - 

      A router capable of changing its point of attachment to the
      network, moving from one link to another link. The Mobile Router
      is capable of forwarding packets between two or more interfaces,
      and possibly running a dynamic routing protocol modifying the
      state by which to do packet forwarding.

      The interface of a Mobile Router attached to a link inside the
      mobile network is called the Ingress interface. The interface of a
      Mobile Router attached to the home link if the Mobile Router is at
      home, or attached to a foreign link if the Mobile Router is in a
      foreign network is called the Egress interface.

      A Mobile Router acting as a gateway between an entire mobile
      network and the rest of the Internet has one or more Egress
      interface(s) and one or more Ingress interface(s). Packets
      forwarded upstream to the rest of the Internet are transmitted
      through one of the Mobile Router's Egress interfaces; packets
      forwarded downstream to the mobile network are transmitted through
      one of the Mobile Router's Ingress interfaces.

      Our extension to this definition -

         A router capable of playing the role of a Home Agent for the
	 Local Mobile Nodes and Local Fixed Nodes belonging to its home
	 network link and playing the role of an Access Router for Local
	 Mobile Nodes, Local Fixed Nodes, Visiting Mobile Nodes.

   NEMO-enabled - 

      A MIPv6-enabled Local Mobile Node or Local Fixed Node that is  
      capable of dynamically reconfiguring its Home Agent to be the 
      Mobile Router when the Mobile Network is attached to a foreign 
      link.  

   The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [].  
   



Perera et al.             Expires 29 January 2004              [Page 5]

Internet Draft       Extended Network Mobility Support      29 July 2003

3. Overview

   This scheme provides a mechanism to enable route optimization for the
   mobile network nodes that are MIPv6-enabled. One might question the
   need for the Mobile Router's participation in the mobility management
   of these nodes when they are MIPv6-enabled. The reason for relying on
   the Mobile Router to perform certain tasks for the nodes behind it,
   is to preserve the benefits of mobility transparency. Consider a
   mobile network scenario of an aircraft with potentially many Visiting
   Mobile Nodes (passengers with mobile devices), Local Fixed Nodes
   (fixed terminals on every seat for Internet access) and Local Mobile
   Nodes (mobile devices that belong to aircraft personnel). In such a
   scenario, as the aircraft moves each of the above mentioned devices
   would need to communicate with an external Access Router in order to
   get the prefix of the new access network. These mobile devices would
   need to be technologically sophisticated to communicate with external
   Access Routers potentially via satellite links. These devices can
   overcome such technical difficulties and minimize the number of
   signaling messages beyond the scope of the mobile network by relying
   on the Mobile Router to perform the tasks of an Access Router for the
   nodes sitting behind it.

   Consider in the above aircraft scenario the need for each Local
   Mobile Node and Local Fixed Node having to send a separate Binding
   Update to their respective Home Agents. We advocate on making these
   nodes to be NEMO-enabled in order to avoid the need for individual
   Binding Updates to be sent to their Home Agents. The Mobile Router
   can send one Binding Update to a Home Agent on the Home network
   representing itself and the NEMO-enabled nodes behind it. This
   mechanism reduces the number of external signaling messages a
   NEMO-enabled node needs to perform, reduces the overall usage of
   bandwidth beyond the scope of the mobile network and also reduces the
   burden on the Home Agent residing on the home network. By requiring
   the Mobile Router to play the role of a Home Agent for NEMO-enabled
   nodes, our scheme introduces a hierarchical Home Agent structure for
   network mobility which is depicted in figure 1.
                        __|_
                       |    |
                       | HA |  <----- Mobile Router's Home Agent
                       |____|
                    ______|__
                     _|__ 
                    |    |
                    | MR | <----- NEMO-enabled node's Home Agent
                    |____|
                      |
                 _____|_____________________________
                __|__     __|__     __|__
               |     |   |     |   |     |
               | LFN |   | LMN |   | LFN | . . . . . . . 
               |_____|   |_____|   |_____|
     
	       Figure 1: Hierarchical Home Agent Structure

Perera et al.             Expires 29 January 2004              [Page 6]


Internet Draft       Extended Network Mobility Support      29 July 2003

   3.1 Dual Roles of the Mobile Router

      This section provides an overview of roles that the Mobile Router
      performs in order to preserve the benefits of hiding mobility from 
      the nodes within the  mobile network.

      3.1.1 Mobile Router as an Access Router

          The Mobile Router when attached to a foreign network will
	  obtain a prefix pertaining to the new network. Once this is
	  done the Mobile Router will act as an Access Router for the
	  nodes behind it and will send Router Advertisement messages
	  on its Ingress interface. Any MIPv6-enabled node sitting
	  behind the Mobile Router will be able to use the prefix
	  advertised by the Mobile Router and using stateless address
	  auto configuration [5] form a care-of address for itself.
	  Figure 2 depicts an instance of the Mobile Router playing the
	  role of an Access Router to MIPv6-enabled Local Mobile Nodes,
	  Local Fixed Nodes and Visiting Mobile Nodes.  


                        ____           ____
                       |    |         |    |
                       | CN |         | CN |
                       |____|         |____|
                      ___|_______________|____
                     |                        |
                     |                        |
                     |       Internet         |
                     |                        |
                     |________________________|
                        __|_            __|_
                       |    |  Access  |    |
                       | AR |  Router  | AR |
                       |____|          |____|
                    ______|__ Foreign
                     _|__     Link
                    |    |
                    | MR |
                    |____|
                      |<------- Access Router Mode
                 _____|______________________
                __|__     __|__     __|__
               |     |   |     |   |     |
               | VMN |   | LMN |   | LFN |
               |_____|   |_____|   |_____|

              Figure 2: Instance of a Mobile Router playing the role of
	                an Access Router




Perera et al.             Expires 29 January 2004              [Page 7]


Internet Draft       Extended Network Mobility Support      29 July 2003

      3.1.2 Mobile Router as a Home Agent

          NEMO-enabled nodes sitting behind the Mobile Router can
	  further reduce the number of external signaling messages by
	  relying on the Mobile Router to perform the role of a Home
	  Agent for them. Since a Home Agent is a router that resides in
	  a mobile nodes home network we can take the Mobile Router to
	  be a Home Agent for the Local Fixed Nodes and the Local Mobile
	  Nodes because with respect to the Mobile Router's topology
	  these nodes are at home. These nodes would obtain a prefix
	  from the Access Router that is the Mobile Router and auto
	  configure a care-of address. These operations will not differ
	  from a standard MIPv6 mobile node operations. The NEMO-enabled
	  nodes will register its current care-of address with the
	  Mobile Router by dynamically configuring the Mobile Router to
	  be their Home Agent if they belong to the Mobile Router's home
	  network. Mobile Router would send an aggregated Binding Update
	  to the Home Agent residing in the home network to which this
	  mobile network belongs, reducing the usage of bandwidth. The
	  Mobile Router on receiving any packets for the registered
	  nodes will tunnel these packets to the registered care-of
	  addresses of the NEMO-enabled nodes. Figure 3 depicts an
	  instance of a Mobile Router playing the role of a Home Agent
	  for NEMO-enabled nodes.
                        ____           ____
                       |    |         |    |
                       | CN |         | CN |
                       |____|         |____|
                      ___|_______________|____
                     |                        |
                     |                        |
                     |       Internet         |
                     |                        |
                     |________________________|
                        __|_ 
                       |    |  Access
                       | AR |  Router
                       |____|
                    ______|__ Foreign
                     _|__     Link
                    |    |
                    | MR |
                    |____|
                      |<------- Home Agent Mode
                 _____|______________________
                __|__     __|__ 
               |     |   |     |
               | LMN |   | LFN |
               |_____|   |_____|

      Figure 3: Mobile Router playing the role of a Home Agent


Perera et al.             Expires 29 January 2004              [Page 8]


Internet Draft       Extended Network Mobility Support      29 July 2003

3.2 Enabling Route Optimization for the Mobile Network Nodes
   
   This section provides an overview of the route optimization procedure
   for MIPv6-enabled mobile network nodes.
    
    3.2.1 Enabling Route Optimization for the Mobile Router

        The Mobile Router acting as a Mobile Node can register its 
        care-of address with a Home Agent as well as its Correspondent
	Nodes. This enables direct communication between the Mobile
	Router and the MIPv6-enabled Correspondent Nodes. This operation
	does not differ from standard MIPv6 route optimization procedure
	for a Mobile node. If the Mobile Router is operating as a Home
	Agent then the Mobile Router would send a Binding Update to its
	Home Agent representing the nodes registered with it according
	to the NEMO basic protocol.

   3.2.2 Enabling Route Optimization for MIPv6-enabled nodes sitting
         behind the Mobile Router
 
       These nodes can obtain prefix information pertaining to the
       current position of the Mobile Network from the Mobile Router,
       now acting as an Access Router. This process will be described in
       detail in Section 4. Once the prefix is obtained these nodes can
       auto configure a care-of address and send Binding Updates to
       their Home Agent as well as their Correspondent Nodes. Again it
       is evident that route optimization is achieved by these nodes
       using a reduced number of signaling messages with external
       routers as the Mobile Router plays the role of an Access Router
       for the nodes within the mobile network. It is also evident that
       optimal routing for nodes behind the Mobile Router is achieved
       without requiring any changes to the standard MIPv6 operation of
       these nodes as well as their Correspondent Nodes.
    
       The NEMO-enabled nodes can opt to dynamically configure the
       Mobile Router to be their Home Agent. This process will be
       explained in Section 5. In this case these nodes need only to
       send a Binding Update to the Mobile Router and the Mobile Router
       will perform the duties of a MIPv6 Home Agent for these nodes.
       NEMO-enabled nodes can perform route optimization as a standard
       MIPv6 node once they dynamically configure the Mobile Router to
       be their Home Agent. 











Perera et al.             Expires 29 January 2004              [Page 9]


Internet Draft       Extended Network Mobility Support      29 July 2003


4. Mobile Router Operations
   
   In Section 4.1 we provide the details of operations a Mobile Router
   needs to perform when playing the role of an Access Router. This is
   followed by a description of operations a Mobile Router performs as a
   Home Agent in Section 4.2.

   4.1 Mobile Router Operations as an Access Router

     The Mobile Router would obtain a prefix from the Access Router in
     the visited network operating as a standard MIPv6 node. This is
     performed by running a prefix delegation protocol such as DHCPv6
     [5]. (Details of this is beyond the scope of this document) After
     obtaining the prefix the Mobile Router would advertise this prefix
     to the nodes behind the Mobile Router. This can be done by using
     Router Advertisements as described in RFC 2461 [6] with no
     extensions. 


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |     Code      |          Checksum             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Cur Hop Limit |M|O|  Reserved |       Router Lifetime         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                         Reachable Time                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                          Retrans Timer                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   Options ...
      +-+-+-+-+-+-+-+-+-+-+-+-


              Figure 4: Router Advertisement Message Format 

















Perera et al.             Expires 29 January 2004              [Page 10]


Internet Draft       Extended Network Mobility Support      29 July 2003

   4.2 Mobile Router operations as a Home Agent 

     In this section we describe the operations a Mobile Router needs to
     perform when it is capable of playing the role of an Home Agent.

     4.2.1 Process of Discovering the Mobile Router
   
         If the Mobile Router is capable of playing the role of a Home
         Agent we propose to extend the above Router Advertisement
	 message format by introducing a new flag bit R. This is  to
	 indicate to the NEMO-enabled nodes that the Router sending the
	 Advertisements is a Mobile Router. The receivers which do not
	 understand this flag MUST ignore it. We also introduce a new
	 option named 'Home Link' to specify the Mobile Router's home
	 link prefix. This option assists the NEMO-enabled nodes to
	 determine whether they belong to the same link as the Mobile
	 Router. If the prefix advertised on the 'Home Link' option
	 matches the home address prefix of any of the NEMO-enabled
	 nodes, these nodes can opt to reconfigure the Mobile Router as
	 their Home Agent.
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |     Code      |          Checksum             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Cur Hop Limit |M|O|R| Reserved|       Router Lifetime         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                         Reachable Time                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                          Retrans Timer                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   Options ...
      +-+-+-+-+-+-+-+-+-+-+-+-

              Figure 5: Router Advertisement Message Format

         This format represents the following changes over that
	 originally specified in RFC 2461 [6]:

         Mobile Router Bit(R)-
         The Mobile Router (R) bit MUST be set to 1 in the Router
         Advertisement sent by the Mobile Router while the Mobile Router
	 is attached to a foreign link.

         Reserved Field -
         The Reserved Field changed from 6 bits to 5 bits.

         Options -
         Home Link : 
         This option specifies the Mobile Router's home link prefix.
         Receivers MUST ignore any options they do not recognize and
	 continue processing the message [6].

Perera et al.             Expires 29 January 2004              [Page 11]



Internet Draft       Extended Network Mobility Support      29 July 2003


     4.2.2 Establishment of a Bidirectional Tunnel between the Mobile   
           Router and the NEMO-enabled nodes 

         The nodes which opts to use the Mobile Router as the Home Agent
         would send Binding Updates to the Mobile Router. If the Binding
         update is valid that is if the message is from a node that
	 belongs to the Mobile Router's home network, the Mobile Router
	 would send a Binding Acknowledgement to the sending node. This
	 process would establish a bidirectional tunnel between the
	 Mobile Router and these nodes. The binding messages exchanged
	 here are in the same format as standard MIPv6. 


     4.2.3 Establishment of a Bidirectional Tunnel between the Mobile 
           Router and its Home Agent

         The Mobile Router would send a Binding Update to its Home Agent
         indicating that its behaving as a Mobile Router and not a
	 Mobile Node. This can be done by employing the Binding Update
	 format used in the NEMO basic protocol [1]. A new flag bit,
	 Mobile Router flag(R) is used in [1]. When this flag is set the
	 the Home Agent forwards packets destined to the mobile network
	 to the Mobile Router. We propose to use the new mobility
	 options defined in [1] in addition to what is defined in [2] in
	 order to adhere with the NEMO basic protocol. These options are
	 not described on this document, for details refer Section 4.1
	 in [1]. Figure 5 illustrates the new Binding Update format. 

        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                       |          Sequence #           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |A|H|L|K|R|      Reserved       |           Lifetime            |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       .                                                               .
       .                        Mobility options                       .
       .                                                               .
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             Figure 6 : Format of Binding Update with new Mobile 
		           Router Flag bit (R)
      Mobile Router Flag (R)

         The Mobile Router Flag is set to indicate to the Home Agent
         that the Binding Update is from a Mobile Router.  If the flag
         is set to 0, the Home Agent assumes that the Mobile Router is
         just behaving as a Mobile Node, and should not forward packets
         destined for the mobile network to the Mobile Router.

Perera et al.             Expires 29 January 2004             [Page 12]


Internet Draft       Extended Network Mobility Support      29 July 2003

5. Mobile Router's Home Agent Operations
  
   On receiving a Binding Update with the Mobile Router flag bit (R) set 
   the Home Agent of the mobile network would place it in its binding
   cache. When a packet arrives at the home network the Home Agent would
   intercept the packet and would look up the binding cache with a
   longest prefix matching algorithm. We advocate on the use of such an
   algorithm at the Home Agent in order to accommodate Local Mobile
   Nodes being away from the home network as well as not being in the
   mobile network. Figure 6 below depicts such a scenario. Use of such
   an algorithm would also accommodate nodes which are not NEMO-enabled
   but are MIPv6 capable. If the Home Agent has a Binding Update for a
   full address or a longer prefix than the mobile network's prefix it
   would be routed to the care-of address on this Binding Update. 

              ____           ____          ____         ____
             |    |         |    |        |    |       |    |
             | CN |         | CN |        | CN |       | CN |
             |____|         |____|        |____|       |____|
          _____|_______________|____________|_____________|______
         |                                                       |
         |                                                       |
         |                       Internet                        |
         |                                                       |
         |_______________________________________________________|
           __|_                 __|_                 __|_
          |    |  Access       |    |               |    |
          | AR |  Router       | AR |               | AR |
          |____|               |____|               |____|
       ______|__ Foreign     _____|___ Home      ______|___ Foreign
        _|__     Link             __|_ Link         _|___   Link
       |    |                    |    |            |     |
       | MR |                    | HA |            | LMN |
       |____|                    |____|            |_____|
         |
    _____|______________________
    __|__     __|__     __|__
   |     |   |     |   |     |
   | VMN |   | LMN |   | LFN |
   |_____|   |_____|   |_____|
                  
   Figure 7: Local Mobile Node away from the Home Network and Mobile 
             Network 










Perera et al.             Expires 29 January 2004             [Page 13]


Internet Draft       Extended Network Mobility Support      29 July 2003

6. Mobile Network Nodes Route Optimization Operations
    
   6.1 MIPv6-enabled Mobile Network Nodes Operations

     These nodes would obtain the new access network prefix from the
     Router Advertisement messages sent by the Mobile Router, which
     enables them to auto configure a topologically correct address. 
     Each of them having their own care-of address can operate as
     standard MIPv6 nodes and enable route optimization.

   6.2 Operations specific to NEMO-enabled Nodes

     We define any NEMO-enabled node to be capable of dynamically
     reconfiguring its Home Agent to be the Mobile Router. These nodes
     upon receiving Router Advertisements with the Mobile Router Flag
     (R) set can choose to make the Mobile Router to be their Home
     Agent. After reconfiguring the Mobile Router to be their Home Agent
     these nodes need not perform any other network mobility related
     operations. These nodes are then able to achieve route optimization
     by following the standard MIPv6 protocol while needing to only
     communicate with a Home Agent that resides locally. Since the
     Mobile Router plays the role of a standard MIPv6 Home Agent for
     these nodes this hierarchical Home Agent structure is hidden from
     the NEMO-enabled nodes.

7. Security Considerations

   The Mobile Network Nodes having their own care-of address can perform
   the return routability procedure [2] as standard MIPv6 nodes. When
   the Mobile Router is sending a Binding Update representing the
   NEMO-enabled nodes sitting behind it, it is necessary that the Home
   Agent verifies that these Binding Updates belong to the Mobile
   Network. This does not add any security consideration other than what
   is described in NEMO basic protocol [1]. 
   


Acknowledgements
   
This work was carried out through an Australian Research Council Linkage
Postgraduate Research Award with Vodafone Australia Future Technologies. 
 

References

[1] V. Devarapalli, R. Wakikawa, A. Petrescu and P. Thubert. Nemo
    Basic Support Protocol (work in progress), Internet Draft,
    IETF. draft-ietf-nemo-basic-support-00.txt, June 2003

[2] D. Johnson, C. Perkins and J. Arkko. Mobility Support in IPv6 (work
    in progress),Internet Draft, IETF, draft-ietf-mobileip-ipv6-22.txt.
    May 2003

Perera et al.             Expires 29 January 2004             [Page 14]


Internet Draft       Extended Network Mobility Support      21 July 

[4] J. Manner and M. Kojo, "Mobility Related Terminology", (work in
    progress), draft-ietf-seamoby-mobility-terminology.txt, Internet
    Draft, IETF, April 2003

[5] Thomson, S. and T. Narten, "IPv6 Stateless Address
    Autoconfiguration", RFC 2462, December 1998

[6] Droms, R., "Dynamic Host Configuration Protocol for IPv6 (DHCPv6)",
    draft-ietf-dhc-dhcpv6-28 (work in progress), November 2002.

[7] T. Narten, E. Nordmark and W. Simpson. Neighbour Discovery for IP
    Version 6 (IPv6), RFC 2461, IETF, December 1998


Author's Addresses :

Eranga Perera
University of New South Wales
Department of Electrical Engineering and Telecommunications
Sydney,
NSW 2052,
Australia
Email : eranga@mobqos.ee.unsw.edu.au

Robert Hsieh
University of New South Wales
Department of Electrical Engineering and Telecommunications
Sydney,
NSW 2052,
Australia
Email : roberth@ee.unsw.edu.au

Aruna Seneviratne
University of New South Wales
Department of Electrical Engineering and Telecommunications
Sydney,
NSW 2052,
Australia
Email : a.seneviratne@unsw.edu.au














Perera et al.             Expires 29 January 2004             [Page 15]
