


Audio/Video Transport                                              Y. Hu
Internet-Draft                             Huawei Technologies Co., Ltd.
Intended status: Standards Track                           July 31, 2009
Expires: February 1, 2010


                 Selective transmission of RTP Session
              draft-yang-avt-selective-transmission-00.txt

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on February 1, 2010.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.

Abstract

   Selective transmission is an effective technique implementation for
   media stream transport when network congestion occurs or dynamic
   transient burst stream transfers on a bandwidth constrained network.



Hu                      Expires February 1, 2010                [Page 1]

Internet-Draft           Selective transmission                July 2009


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 3
     1.1.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . 4
   2.  Definitions . . . . . . . . . . . . . . . . . . . . . . . . . . 4
   3.  Selective transmission Mechanism Description  . . . . . . . . . 4
     3.1.  Overview  . . . . . . . . . . . . . . . . . . . . . . . . . 4
     3.2.  Procedure specification . . . . . . . . . . . . . . . . . . 5
   4.  RTCP message extension  . . . . . . . . . . . . . . . . . . . . 6
     4.1.  RTCP Retransmission Suppression Indication  . . . . . . . . 6
   5.  Security Considerations . . . . . . . . . . . . . . . . . . . . 7
   6.  Normative References  . . . . . . . . . . . . . . . . . . . . . 7
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . . . 8






































Hu                      Expires February 1, 2010                [Page 2]

Internet-Draft           Selective transmission                July 2009


1.  Introduction

   When a congestion event in the network occurs, it tends to result in
   long bursts of consecutive packet loss.  For real-time video
   services, long bursts of consecutive packet loss will cause mosaic-
   screen, even black screen whether a packet drop management policy is
   first-in first-out (FIFO) or random early detection (RED).  Though
   retransmission can partly solve this issue, the retransmission
   results may cause more serious congestion if network congestion is
   still there.  Therefore, it is suggested to utilize a new method to
   solve this problem.  Considering the inherent characteristic of media
   codec, some packets of video stream are sensitive, important for
   video decoding and playback, and some packets of video stream are
   unimportant and less sensitive.  For example, packets of I-frame and
   P-frame are sensitive, important for video stream, but packets of
   B-frame are less important and sensitive than packets of I-frame and
   P-frame.  Sometimes, the packets of the last P-frame of GOP is
   unimportant and less sensitive.  We consider using these inherent
   characteristic of media codec to selectively transmit sensitive and
   important packets and drop unimportant and less sensitive packets of
   media stream when network congestion occurs.

   If selectively transmitting sensitive, important packets and dropping
   unimportant and less sensitive packets of media stream in the
   network, it will result in non-consecutive sequence number of media
   stream packets.  Due to non-consecutive sequence number of media
   stream packets, for RTP receivers, they will think these packets
   having been drop and will request the retransmission for those
   packets.  However, those packets have been dropped actively by the
   network and RTP receivers don't need to request retransmission to
   these packets having been dropped.  Therefore, intermediary network
   element need a method to suppress these retransmission request.

   Actually, this method of selective transmission can also be used in
   the case of "Unicast-Based Rapid Acquisition of Multicast RTP
   Sessions"[draft-ietf-avt-rapid-acquisition-for-rtp].  In this case,
   in order to reduce the acquisition delay of the reference information
   when RTP receivers switch among multicast sessions, an intermediary
   network element transfers a unicast transient burst stream from the
   reference information to RTP receivers on a bandwidth constrained
   network.  In order to decrease the impact of dynamic transient burst
   stream to the network, the intermediary network element may also
   adopt the method of this selective transmission to reduce the
   transmission of burst media packets.







Hu                      Expires February 1, 2010                [Page 3]

Internet-Draft           Selective transmission                July 2009


1.1.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].


2.  Definitions

   This document uses the following acronyms and definitions frequently:

   Media packet sensitivity: Importance of a video packet to the decoder
   if the packet is lost.  A packet is unimportant and less sensitive ,
   such as a B-frame packet, if the packet is used to decode the current
   video frame.  A packet is sensitive to loss and important, such as a
   packet of I-frame, if the packet is needed to decode several video
   frames.

   Selective transmission: An intermediary network element can drop less
   important video packets and transmit the rest of the packets.

   Retransmission Suppression: Intermediary network element needs to
   suppress the retransmission request of RTP receivers to packet
   dropped according to the selective transmission policy.


3.  Selective transmission Mechanism Description

   The section describes an overview and procedure specification of
   selective transmission mechanism.

3.1.  Overview

   Before having selectively transmitted media stream packets, the
   intermediary network element inspects sensitivity and importance of
   each media stream packet.  When network congestion occurs, the
   intermediary network element drops less important and less sensitive
   media stream.

   The number of dropped packets depends on the size of network
   congestion.  Heavier network congestion, will result in dropping of
   more selective media stream packets.  In the case of Unicast-Based
   Rapid Acquisition of Multicast RTP Sessions, we can also utilize this
   technique method of selective transmission to reduce the transmission
   size of burst media packets allowing faster synchronization.

   In the case of Unicast-Based Rapid Acquisition of Multicast RTP
   Sessions, we can also utilize this technique method of selective



Hu                      Expires February 1, 2010                [Page 4]

Internet-Draft           Selective transmission                July 2009


   transmission to reduce the transmission of burst media packets.

3.2.  Procedure specification

   The procedure of selective transmission mainly include the following
   steps:

   1.  The network element inspects and records sensitivity and
   importance of each media stream packet.  It records less important
   and less sensitive packets in order to prepare for selectively
   dropping these packets.

   2.  When network congestion occurs, intermediary network element
   drops the whole or parts of the less important and less sensitive
   media packets instead of dropping packets on first-in first-out
   (FIFO) or random early detection (RED) based on the state of network
   congestion.  That is to say, when the network has a light congestion
   level, it drops only some of those media packets while when network
   congestion is heavy, it may drop all these media packets and only
   transmits the media packets with sensitivity and importance.  This
   policy will preventshowing mosaic pictures in receivers' screen that
   may happen if packets are randomly dropped.

   3.  After receiving the media stream packets which have been
   transmitted selectively, receivers will identify some packet loss and
   request retransmission of those lost packets.  In fact, it is
   unnecessary for receives to request those packets because
   intermediary network element took the initiative to drop them.  In
   order to avoid this issue, intermediary network element can readjust
   non-consecutive sequence numbers of these packets to be consecutive
   sequence numbers.

   ...I1(1000-1299)B2(1300-1349)B3(1350-1399)P4(1400-1579)B5(1580-1629)
      B6(1630-1679)P7(1680-1859)B8(1860-1909)B9(1910-1959)P10(1960-2139)
      B11(2140-2189)B12(2190-2239)P13(2240-2419)I14(2420-2719)...

   For example, a video frame sequence and sequence number of its
   packets.  In this example, for the sake of convenience, I-frame
   consists of 300 RTP packets, B-frame consists of 50 RTP packets,
   P-frame consists of 180 RTP packets.

          ...I1(1000-1299)B2(1300-1349)B3(1350-1399)P4(1400-1579)
             B6(1580-1629)P7(1630-1809)B8(1810-1859)P10(1860-2039)
             B11(2040-2089)B12(2090-2139)P13(2140-2319)I14(2420-2719)...

   Intermediary network element select B-frame as low sensitivity, and
   selectively drops packets of B5 and B9 and transmits the rest of
   frames.  Since packets of B5 and B9 have been dropped, there are



Hu                      Expires February 1, 2010                [Page 5]

Internet-Draft           Selective transmission                July 2009


   missing sequence number of packets from 1579 to 1630 and 1909 to
   1960.  When receivers receive these RTP packets which have been
   transmitted the video frame sequence except B5 and B9 frames, they
   will request the retransmission of RTP packets B5 and B9 frames.  In
   order to avoid this unnecessary retransmission, intermediary network
   element can rearrange its sequence number as follows:

   After intermediary network element transmits the last RTP packet of
   P13, it will transmits the first RTP packet of I14.  Between the last
   RTP packet of P13 and the first RTP packet of I14, there is a gap of
   100 in the sequence numbers because intermediary network element
   dropped the RTP packets of B5 and B9 frames.  In order to suppress
   this virtual retransmission due to readjust sequence number,
   intermediary network element send an extended RTCP transport-layer
   feedback message to notify receivers that there are missing sequence
   numbers.


4.  RTCP message extension

   This section defines the format of RTCP transport-layer feedback
   message that intermediary network element notifies receivers to
   suppress their retransmission request when selectively transmitting
   media stream.

4.1.  RTCP Retransmission Suppression Indication

   The RTCP Retransmission Suppression Indication Message is identified
   by PT=RTPFB and FMT=TBD.

   The RTCP RSI Message is used by Receiver to suppress its
   retransmission request.

   The RTCP RSI field has the structure depicted in Figure 2.

        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |     Type      |                   Reserved                    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | the Starting Sequence Number  |  the Ending Sequence Number   |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                      Figure 2: Syntax for the RSI message

         0:       unassigned
         1:       network congestion
         2:       rapid acquisition
         3-255:   unassigned



Hu                      Expires February 1, 2010                [Page 6]

Internet-Draft           Selective transmission                July 2009


   Type (8 bits): The Type field indicates the type of selective
   transmission, such as network congestion, or unicast-based rapid
   acquisition of multicast RTP sessions, etc.

   Reserved (24 bits): The Reserved fields are one octet and are set to
   zero on transmission, and ignored on reception.

   The Starting Sequence Number (16 bits): The SSN field indicates a
   starting sequence number.  After the starting sequence number, all
   RTP packets retransmission request are suppressed.

   The Ending Sequence Number (16 bits): The ESN field indicates an
   ending sequence number.  Before the ending sequence number, all RTP
   packets retransmission request are suppressed.


5.  Security Considerations

   TBC.


6.  Normative References

   [I-D.ietf-avt-rapid-acquisition-for-rtp]
              Steeg, B., Begen, A., Caenegem, T., and Z. Vax, "Unicast-
              Based Rapid Acquisition of Multicast RTP Sessions",
              draft-ietf-avt-rapid-acquisition-for-rtp-01 (work in
              progress), June 2009.

   [I-D.ietf-avt-rtcp-guidelines]
              Ott, J. and C. Perkins, "Guidelines for Extending the RTP
              Control Protocol (RTCP)",
              draft-ietf-avt-rtcp-guidelines-01 (work in progress),
              March 2009.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC3550]  Schulzrinne, H., Casner, S., Frederick, R., and V.
              Jacobson, "RTP: A Transport Protocol for Real-Time
              Applications", STD 64, RFC 3550, July 2003.

   [RFC4585]  Ott, J., Wenger, S., Sato, N., Burmeister, C., and J. Rey,
              "Extended RTP Profile for Real-time Transport Control
              Protocol (RTCP)-Based Feedback (RTP/AVPF)", RFC 4585,
              July 2006.

   [RFC4588]  Rey, J., Leon, D., Miyazaki, A., Varsa, V., and R.



Hu                      Expires February 1, 2010                [Page 7]

Internet-Draft           Selective transmission                July 2009


              Hakenberg, "RTP Retransmission Payload Format", RFC 4588,
              July 2006.


Author's Address

   Yinling Hu
   Huawei Technologies Co., Ltd.
   No.91 Baixia Road
   Nanjing 210001
   P.R.China

   Email: yangpeilin@huawei.com






































Hu                      Expires February 1, 2010                [Page 8]


