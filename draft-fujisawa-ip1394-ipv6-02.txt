



Internet-Draft                                               K. Fujisawa
<draft-fujisawa-ip1394-ipv6-02.txt>                     Sony Corporation
Expires: August, 1999                                      February 1999

          Transmission of IPv6 Packets over IEEE 1394 Networks

Status of this memo

     This document is an Internet-Draft and is in full conformance
     with all provisions of Section 10 of RFC2026.

     Internet-Drafts are working documents of the Internet Engineering
     Task Force (IETF), its areas, and its working groups.  Note that
     other groups may also distribute working documents as
     Internet-Drafts.

     Internet-Drafts are draft documents valid for a maximum of six
     months and may be updated, replaced, or obsoleted by other
     documents at any time.  It is inappropriate to use Internet-
     Drafts as reference material or to cite them other than as
     "work in progress."

     The list of current Internet-Drafts can be accessed at
     http://www.ietf.org/ietf/1id-abstracts.txt

     The list of Internet-Draft Shadow Directories can be accessed at
     http://www.ietf.org/shadow.html.

Abstract

   IEEE Std 1394-1995 is a standard for a High Performance Serial Bus.
   This document proposes the frame format for transmission of IPv6
   [IPV6] packets and the method of forming IPv6 link-local addresses
   and statelessly autoconfigured addresses on IEEE1394 networks.
   It also proposes the content of the Source/Target Link-layer Address
   option used in Neighbor Discovery [DISC] when the messages are
   transmitted on an IEEE1394 network.














K. Fujisawa               Expires August 1999                   [Page 1]

Internet Draft     draft-fujisawa-ip1394-ipv6-02.txt       February 1999


1. INTRODUCTION

   IEEE Std 1394-1995 is a standard for a High Performance Serial Bus.
   IETF IP1394 Working Group is standardizing the method to carry IPv4
   datagrams and ARP packets over IEEE1394 subnetwork [IP1394].

   This document proposes the frame format for transmission of IPv6
   [IPV6] packets and the method of forming IPv6 link-local addresses
   and statelessly autoconfigured addresses on IEEE1394 networks.
   It also proposes the content of the Source/Target Link-layer Address
   option used in Neighbor Discovery [DISC] when the messages are
   transmitted on an IEEE1394 network.

2. SPECIFICATION TERMINOLOGY

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119.

3. IPv6-CAPABLE NODES

   An IPv6-capable node SHALL fulfill the following minimum
   requirements;

   - it SHALL implement configuration ROM in the general format
     specified by ISO/IEC 13213:1994 and SHALL implement the bus
     information block specified by IEEE P1394a [P1394a] and a unit
     directory specified by this memo;

   - the max_rec field in its bus information block SHALL be at least 8;
     this indicates an ability to accept block write requests and
     asynchronous stream packets with data payload of 512 octets. The
     same ability SHALL also apply to read requests; that is, the node
     SHALL be able to transmit a block response packet with a data
     payload of 512 octets;

   - it SHALL be isochronous resource manager capable, as specified by
     1394;

   - it SHALL support both reception and transmission of asynchronous
     streams as specified by IEEE P1394a;

   - it SHALL implement the BROADCAST_CHANNEL register as specified
     by IEEE P1394a; and

   - it SHALL be broadcast channel manager capable.

4. LINK ENCAPSULATION AND FRAGMENTATION



K. Fujisawa               Expires August 1999                   [Page 2]

Internet Draft     draft-fujisawa-ip1394-ipv6-02.txt       February 1999


   The encapsulation and fragmentation mechanism SHOULD be the same
   as "5. LINK ENCAPSULATION AND FRAGMENTATION" of [IP1394].

   The ether_type value for IPv6 is 0x86dd.

   The default MTU size for IPv6 packets on an IEEE1394 network is 1500
   octets.  This size may be reduced by a Router Advertisement [DISC]
   containing an MTU option which specifies a smaller MTU, or by manual
   configuration of each node.  If a Router Advertisement received on
   an IEEE1394 interface has an MTU option specifying an MTU larger than
   1500, or larger than a manually configured value, that MTU option may
   be logged to system management but MUST be otherwise ignored. The
   mechanism to extend MTU size between particular two nodes is for
   further study.

5. CONFIGURATION ROM

   Configuration ROM for IPv6-capable nodes SHALL contain a unit
   directory in the format specified by [IP1394] except following rules.

   - The value for Unit_SW_Version is TBD. When this draft is approved
     it is EXPECTED that Unit_SW_Version will assume the value of the
     RFC number assigned.

   - The textual descriptor for the Unit_SW_Version SHOULD be "IPv6".

6. STATELESS AUTOCONFIGURATION

   The Interface Identifier [AARCH] for an IEEE1394 interface is formed
   from the interface's built-in EUI-64 by complementing the
   "Universal/Local" (U/L) bit, which is the next-to-lowest order bit of
   the first octet of the EUI-64.  Complementing this bit will generally
   change a 0 value to a 1, since an interface's built-in address is
   expected to be from a universally administered address space and
   hence have a globally unique value.  A universally administered EUI-
   64 is signified by a 0 in the U/L bit position, while a globally
   unique IPv6 Interface Identifier is signified by a 1 in the
   corresponding position. For further discussion on this point, see
   [AARCH].

   An IPv6 address prefix used for stateless autoconfiguration [ACONF]
   of an IEEE1394 interface MUST have a length of 64 bits.

7. LINK-LOCAL ADDRESSES

   The IPv6 link-local address [AARCH] for an IEEE1394 interface is
   formed by appending the Interface Identifier, as defined above, to
   the prefix FE80::/64.



K. Fujisawa               Expires August 1999                   [Page 3]

Internet Draft     draft-fujisawa-ip1394-ipv6-02.txt       February 1999


       10 bits            54 bits                  64 bits
     +----------+-----------------------+----------------------------+
     |1111111010|         (zeros)       |    Interface Identifier    |
     +----------+-----------------------+----------------------------+

8. ADDRESS MAPPING FOR UNICAST

   The procedure for mapping IPv6 unicast addresses into IEEE1394 link-
   layer addresses uses the Neighbor Discovery [DISC].  Since 1394 link
   address (node_ID) will not be constant across a 1394 bridge, we have
   chosen not to put it in the Link-layer Address option.  The recipient
   of the Neighbor Discovery SHALL use the source_node_ID in the 1394
   packet header or GASP header in conjunction with the content of the
   Source link-layer address.
   The Source/Target Link-layer Address option has the following form
   when the link layer is IEEE1394.

                         1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |     Type      |  Length = 3   |                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                            ---+
     |                         node_unique_ID                        |
     +---                            +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                               |    max_rec    |      spd      |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                          unicast_FIFO                         |
     +---                            +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                               |            reserved           |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                            reserved                           |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Type        1 for Source Link-layer address.
               2 for Target Link-layer address.

   Length      3 (in units of 8 octets).

   The meaning of 'node_unique_ID', 'unicast_FIFO', 'max_rec' and 'spd'
   sub-fields are specified in [IP1394].

   Note that node_ID may change when 1394 bus-reset occurs. The mapping
   cache held in the node SHOULD be cleared on 1394 bus-reset.

9. IPv6 MULTICAST

   By default, all best-effort IPv6 multicast SHALL use asynchronous
   stream packets whose channel number is equal to the channel field



K. Fujisawa               Expires August 1999                   [Page 4]

Internet Draft     draft-fujisawa-ip1394-ipv6-02.txt       February 1999


   from the BROADCAST_CHANNEL register.

   Best-effort IPv6 multicast for particular multicast group addresses
   may utilize a different channel number if such a channel number is
   allocated and advertised prior to use, by the multicast channel
   allocation protocol (MCAP), as described in [IP1394]. The 'type'
   field in MCAP group address descriptor SHALL be TBD to indicate an
   IPv6 group address descriptor.

10. OPEN ISSUES

   a) The mechanism to extend MTU size between particular two nodes.

   b) The mechanism to allocate and distribute a 1394 isochronous
      channel number for isochronous transmission of IPv6 packets,
      for an unicast or multicast flow.

Security Considerations

   Security issues are not discussed in this document.

Acknowledgement

   The auther would like to acknowledge the author of [ETHER] since some
   part of this document has been derived from [ETHER].

References

    [1394]   IEEE Std 1394-1995, Standard for a High Performance Serial
             Bus

    [P1394a] IEEE Project P1394a, Draft Standard for a High Performance
             Serial Bus (Supplement)

    [CSR]    ISO/IEC 13213:1994, Control and Status Register (CSR)
             Architecture for Microcomputer Buses

    [IP1394] IP1394 Working Group, "IPv4 over IEEE 1394", currently
             draft-ietf-ip1394-ipv4-13.txt.

    [IPV6]   S. Deering, R. Hinden, "Internet Protocol, Version 6 (IPv6)
             Specification", RFC2460, Dec 1998.

    [AARCH]  R. Hinden, S. Deering "IP Version 6 Addressing
             Architecture", RFC2373.

    [ACONF]  S. Thomson, T. Narten, "IPv6 Stateless Address
             Autoconfiguration", RFC2462, Dec 1998.



K. Fujisawa               Expires August 1999                   [Page 5]

Internet Draft     draft-fujisawa-ip1394-ipv6-02.txt       February 1999


    [DISC]   T. Narten, E. Nordmark, W. A. Simpson, "Neighbor Discovery
             for IP Version 6 (IPv6)", RFC2461, Dec 1998.

    [ETHER]  M. Crawford, "Transmission of IPv6 Pacekts over Ethernet
             Networks", RFC2464, Dec 1998.

Author's address

   Kenji Fujisawa
   Sony Corporation
   IT Laboratories, Computer Systems Laboratory
   6-7-35, Kitashinagawa,
   Shinagawa-ku, Tokyo, 141-0001 Japan
   Phone: +81-3-5448-4602
   E-mail: fujisawa@sm.sony.co.jp

Technical changes from old version

   * Changes from -00.txt

   - Two octets padding in a Source/Target Link-layer Address option
     of the Neighbor Discovery has been removed.

   * Changes from -01.txt

   - The 'node_ID' sub field has been removed from a Source/Target
     Link-layer Address option of the Neighbor Discovery, and the
     order of some fields has been changed in accordance with [IP1394].

   - The MCAP type value for IPv6 group address descriptor is changed
     to TBD.

   - A new section for "CONFIGURATION ROM" has been added.


















K. Fujisawa               Expires August 1999                   [Page 6]

