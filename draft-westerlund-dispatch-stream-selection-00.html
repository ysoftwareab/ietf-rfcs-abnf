<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Media Stream Selection (MESS)</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Terminology">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Requirements Language">
<link href="#rfc.section.2" rel="Chapter" title="2 Motivation">
<link href="#rfc.section.3" rel="Chapter" title="3 Use Cases for MESS">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Include Media Content">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Exclude Media Content">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Substitute Media Content">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Reset Media Content">
<link href="#rfc.section.3.5" rel="Chapter" title="3.5 Reset All">
<link href="#rfc.section.4" rel="Chapter" title="4 Media Information">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Unique Media ID">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Distribution of Media Information">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Publishing Media Information from Endpoints">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Publishing Media Information from Conference Nodes">
<link href="#rfc.section.4.5" rel="Chapter" title="4.5 Receiving Media Information">
<link href="#rfc.section.4.6" rel="Chapter" title="4.6 RTP Media Transport">
<link href="#rfc.section.4.7" rel="Chapter" title="4.7 SDP Media Description">
<link href="#rfc.section.4.7.1" rel="Chapter" title="4.7.1 Point to Point Communication">
<link href="#rfc.section.4.7.2" rel="Chapter" title="4.7.2 Conferencing Scenario">
<link href="#rfc.section.5" rel="Chapter" title="5 MESS Requests">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Transport">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 BFCP Extensions">
<link href="#rfc.section.5.2.1" rel="Chapter" title="5.2.1 OPERATION">
<link href="#rfc.section.5.2.2" rel="Chapter" title="5.2.2 MEDIA-IDENTIFICATION">
<link href="#rfc.section.5.2.3" rel="Chapter" title="5.2.3 CHANNEL-IDENTIFICATION">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Defined Messages">
<link href="#rfc.section.5.3.1" rel="Chapter" title="5.3.1 MediaSelectionAck">
<link href="#rfc.section.5.3.2" rel="Chapter" title="5.3.2 Include">
<link href="#rfc.section.5.3.3" rel="Chapter" title="5.3.3 Exclude">
<link href="#rfc.section.5.3.4" rel="Chapter" title="5.3.4 Substitute">
<link href="#rfc.section.5.3.5" rel="Chapter" title="5.3.5 Reset">
<link href="#rfc.section.5.3.6" rel="Chapter" title="5.3.6 Reset All">
<link href="#rfc.section.6" rel="Chapter" title="6 MESS Responses">
<link href="#rfc.section.7" rel="Chapter" title="7 RTP Implications">
<link href="#rfc.section.8" rel="Chapter" title="8 Examples">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Client joins a conference">
<link href="#rfc.section.9" rel="Chapter" title="9 IANA Considerations">
<link href="#rfc.section.10" rel="Chapter" title="10 Security Considerations">
<link href="#rfc.section.11" rel="Chapter" title="11 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="12 References">
<link href="#rfc.references.1" rel="Chapter" title="12.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="12.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document describes how media stream selection can be achieved in both a conferencing scenario and peer to peer communication. To allow endpoints to select specific media streams, all available media in the session must be identifiable and there is a need for messages than can be securely transported between endpoints and network nodes. This document also describes a way to distribute the identification information to all participating endpoints. The necessary messages can potentially be mapped onto several different encodings, and this document proposes one mapping that uses an extended version of the Binary Floor Control Protocol." />
  <meta name="description" content="This document describes how media stream selection can be achieved in both a conferencing scenario and peer to peer communication. To allow endpoints to select specific media streams, all available media in the session must be identifiable and there is a need for messages than can be securely transported between endpoints and network nodes. This document also describes a way to distribute the identification information to all participating endpoints. The necessary messages can potentially be mapped onto several different encodings, and this document proposes one mapping that uses an extended version of the Binary Floor Control Protocol." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">D. Grondal</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">B. Burman</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">M. Westerlund</td>
</tr>
<tr>
<td class="left">Expires: April 26, 2012</td>
<td class="right">Ericsson AB</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 24, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Media Stream Selection (MESS)<br />
  <span class="filename">draft-westerlund-dispatch-stream-selection-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document describes how media stream selection can be achieved in both a conferencing scenario and peer to peer communication. To allow endpoints to select specific media streams, all available media in the session must be identifiable and there is a need for messages than can be securely transported between endpoints and network nodes. This document also describes a way to distribute the identification information to all participating endpoints. The necessary messages can potentially be mapped onto several different encodings, and this document proposes one mapping that uses an extended version of the Binary Floor Control Protocol.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 26, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Terminology</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Requirements Language</a>
</li>
<li>2.   <a href="#rfc.section.2">Motivation</a>
</li>
<li>3.   <a href="#rfc.section.3">Use Cases for MESS</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Include Media Content</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Exclude Media Content</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Substitute Media Content</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Reset Media Content</a>
</li>
<li>3.5.   <a href="#rfc.section.3.5">Reset All</a>
</li>
<li>4.   <a href="#rfc.section.4">Media Information</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Unique Media ID</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Distribution of Media Information</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Publishing Media Information from Endpoints</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Publishing Media Information from Conference Nodes</a>
</li>
<li>4.5.   <a href="#rfc.section.4.5">Receiving Media Information</a>
</li>
<li>4.6.   <a href="#rfc.section.4.6">RTP Media Transport</a>
</li>
<li>4.7.   <a href="#rfc.section.4.7">SDP Media Description</a>
</li>
<li>4.7.1.   <a href="#rfc.section.4.7.1">Point to Point Communication</a>
</li>
<li>4.7.2.   <a href="#rfc.section.4.7.2">Conferencing Scenario</a>
</li>
<li>5.   <a href="#rfc.section.5">MESS Requests</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Transport</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">BFCP Extensions</a>
</li>
<li>5.2.1.   <a href="#rfc.section.5.2.1">OPERATION</a>
</li>
<li>5.2.2.   <a href="#rfc.section.5.2.2">MEDIA-IDENTIFICATION</a>
</li>
<li>5.2.3.   <a href="#rfc.section.5.2.3">CHANNEL-IDENTIFICATION</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">Defined Messages</a>
</li>
<li>5.3.1.   <a href="#rfc.section.5.3.1">MediaSelectionAck</a>
</li>
<li>5.3.2.   <a href="#rfc.section.5.3.2">Include</a>
</li>
<li>5.3.3.   <a href="#rfc.section.5.3.3">Exclude</a>
</li>
<li>5.3.4.   <a href="#rfc.section.5.3.4">Substitute</a>
</li>
<li>5.3.5.   <a href="#rfc.section.5.3.5">Reset</a>
</li>
<li>5.3.6.   <a href="#rfc.section.5.3.6">Reset All</a>
</li>
<li>6.   <a href="#rfc.section.6">MESS Responses</a>
</li>
<li>7.   <a href="#rfc.section.7">RTP Implications</a>
</li>
<li>8.   <a href="#rfc.section.8">Examples</a>
</li>
<li>8.1.   <a href="#rfc.section.8.1">Client joins a conference</a>
</li>
<li>9.   <a href="#rfc.section.9">IANA Considerations</a>
</li>
<li>10.   <a href="#rfc.section.10">Security Considerations</a>
</li>
<li>11.   <a href="#rfc.section.11">Acknowledgements</a>
</li>
<li>12.   <a href="#rfc.references">References</a>
</li>
<li>12.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>12.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">Multimedia conferencing is becoming more and more important. The setup up of a multimedia conference is well defined, using for example SIP and SDP. However, as SIP/SDP is used for session setup it leaves little or no dynamic control over what media content to receive from other participants during the session. This document targets this weakness and describes functionality that grants receiving endpoints capabilities to dynamically select what information and media content are received from other participating clients.</p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Terminology</h1>
<p id="rfc.section.1.1.p.1">These terms are commonly used throughout the document:</p>

<dl>
<dt>Media Content:</dt>
<dd style="margin-left: 8">Media being sent from one specific media capture device, such as a microphone for audio media, or video camera for video media.</dd>
<dt>Endpoint:</dt>
<dd style="margin-left: 8">An device that handles media that either originates a number of media content, terminates a number of media content, or some combination of both. As an example, an RTP Mixer is considered as an endpoint, while a simple RTP Translator that simply forwards all input streams is not.</dd>
</dl>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> Requirements Language</h1>
<p id="rfc.section.1.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Motivation</h1>
<p id="rfc.section.2.p.1">In a communication scenario where one or more endpoints offers more than one media content, but where a receiving endpoint cannot handle all simultaneous media content at once, there may be a need for that endpoint to actively and dynamically during an ongoing conference select what content to receive. A typical scenario would be a video conference where some endpoints have multiple cameras capturing different aspects of a room and a receiving endpoint can only render one video stream due to e.g. hardware limitations. Today, the only way to solve this is to have an RTP mixer handle the conference and let that choose one of the streams based on some criteria. It is up to the RTP mixer implementation which stream to choose, but a common criteria is some type of speaker activity.</p>
<p id="rfc.section.2.p.2">It would be possible to let the receiving endpoints to choose which media content(s) to receive, given that endpoints publish information about what media content is available to all other endpoints and if there would exist a protocol to request specific media content from other endpoints. This functionality is what Media Stream Selection (MESS) described in this document targets. It describes how to generate and distribute media content information in both conferencing scenarios as well as in point to point sessions. It also describes how to set up a control channel to send messages between endpoints and finally defines a set of messages that can be used to handle media content requests.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Use Cases for MESS</h1>
<p id="rfc.section.3.p.1">This section presents some typical use cases targeted by MESS. The scenario is an endpoint participating in a conference, receiving media from a centralized conference node. It is assumed that all participating endpoints have published information about what media content they are offering. There are more available media from other participants in the conference than what the receiving endpoint in the use case can present simultaneously, and the conference node has some implemented policy how to select which media to forward.</p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Include Media Content</h1>
<p id="rfc.section.3.1.p.1">An endpoint selects what content to receive from another endpoint based on that endpoint's published media content information. An endpoint can make new decisions about what content to receive dynamically at any time during the session.</p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> Exclude Media Content</h1>
<p id="rfc.section.3.2.p.1">An endpoint wishes to stop receiving content from another endpoint e.g. due to low quality or other reasons. The set of excluded media during a session is subject to change and an endpoint can make new decisions to exclude content dynamically at any time during the session.</p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> Substitute Media Content</h1>
<p id="rfc.section.3.3.p.1">An endpoint renders received media and wants to replace the received media with some other available media content. It can be seen as an atomic combination of the two use-cases above, first excluding one media content and effectively replacing it by including another.  And endpoint can make new substitute decisions dynamically at any time during the session.</p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> <a href="#sec-resetmedia" id="sec-resetmedia">Reset Media Content</a>
</h1>
<p id="rfc.section.3.4.p.1">An endpoint no longer has any specific wish to always include or always exclude a certain content, but wants to return the decision to forward streams or not to the conference node. An endpoint can reset any previously included or excluded stream at any time during the session. At the beginning of the session, all media streams SHALL have a state corresponding to being reset and thus be under the conference node policy control.</p>
<h1 id="rfc.section.3.5">
<a href="#rfc.section.3.5">3.5.</a> Reset All</h1>
<p id="rfc.section.3.5.p.1">An endpoint wishes to remove all previous decisions about included and excluded media. This method is a shortcut to avoid repeated reset messages described in <a href="#sec-resetmedia">Section 3.4</a>.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Media Information</h1>
<p id="rfc.section.4.p.1">To be able to identify the available media content, all different content must be given a unique media ID. The given ID must also be distributed to all participating endpoints. The following sections describe how to generate such IDs and how to distribute them.</p>
<p id="rfc.section.4.p.2">The text in <a href="#sec-sdp-description">SDP Media Description</a> <cite title="NONE">[sec-sdp-description]</cite> describes the specific case where media description is signaled with <a href="#RFC4566">SDP</a> <cite title="NONE">[RFC4566]</cite>, but other signaling methods MAY be used, in which case the mapping to SDP-specific lines and attributes do not apply and other mandatory mappings SHOULD instead be defined in a separate RFC.</p>
<p id="rfc.section.4.p.3">The text in <a href="#sec-rtp-media">Section 4.6</a> describes the specific case when <a href="#RFC3550">RTP</a> <cite title="NONE">[RFC3550]</cite> is used for media transport. Other media transports MAY be used, in which case the mapping to RTP does not apply and other mandatory mappings SHOULD instead be defined in a separate RFC.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Unique Media ID</h1>
<p id="rfc.section.4.1.p.1">To request specific media content, all involved endpoints need to agree on how to uniquely identify different content with a unique media ID.</p>
<p id="rfc.section.4.1.p.2">There is no particular algorithm specified how to generate unique media IDs, as it will depend on which media transport is used. The main requirements on such an algorithm are that media IDs are unique among all communicating endpoints and that all endpoints share the same definitions on what media streams are identified by what media IDs.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Distribution of Media Information</h1>
<p id="rfc.section.4.2.p.1">Assuming all available media content from all communicating endpoints are associated with some kind of media ID, those media IDs need to be distributed to endpoints wishing to actively control what content to receive. There might also be other interesting per-media related information that needs distribution, such as e.g. naming or describing individual media content to aid selection.</p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#sec-pubmediainfo" id="sec-pubmediainfo">Publishing Media Information from Endpoints</a>
</h1>
<p id="rfc.section.4.3.p.1">Endpoints wishing to join a session are responsible to send information about media content they will make available to the other party or parties. This is done by generating media IDs, or other sufficiently unique identification that can be used for generation of media IDs, for all transmitted media content. Depending on the capabilities of the signaling protocol used, an endpoint can also have the opportunity to convey other information than the media ID, such as e.g. describing or naming media content explicitly.</p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> <a href="#sec-publishingmediainfo" id="sec-publishingmediainfo">Publishing Media Information from Conference Nodes</a>
</h1>
<p><a href="#RFC4575">The SIP Event Package for Conference State</a> <cite title="NONE">[RFC4575]</cite> defines an XML schema used for distribution of conference information. The schema defines elements (among others) for users, endpoints and media. The defined &lt;media&gt; element contains a media ID attribute. This attribute SHALL be used to carry generated media IDs. This means that media ID only needs to be unique within an endpoint context and referring clients MUST use both user, endpoint information and media ID to uniquely identify media content. User and endpoint information are relevant in a scenario covering multiple users and/or endpoints (e.g. where a middle node is responsible for forwarding requests or making decisions about media content selection), but may be redundant for a point to point scenario.</p>
<p id="rfc.section.4.4.p.2">Any description or naming of individual media content published by endpoints (as described in the previous section) SHOULD be included in the XML as body of &lt;display-text&gt;, which is another sub element of &lt;media&gt;. There may exist alternatives to obtain naming and description information, but it will in general depend on what is supported by the used media description protocol.</p>
<h1 id="rfc.section.4.5">
<a href="#rfc.section.4.5">4.5.</a> Receiving Media Information</h1>
<p id="rfc.section.4.5.p.1">Reception of media content information is dependent upon in what context the endpoint exists. In a conferencing scenario, the distribution of media information is in general different than distribution of media content information in a point to point session, which must be taken into account when defining use of MESS with media description protocols.</p>
<h1 id="rfc.section.4.6">
<a href="#rfc.section.4.6">4.6.</a> <a href="#sec-rtp-media" id="sec-rtp-media">RTP Media Transport</a>
</h1>
<p id="rfc.section.4.6.p.1">When RTP is used for transmission of media content, a single RTP session can transfer a number of different media content. In such case every received data packet must carry an identifier, or something that can be used as identifier, to separate individual content. Without such an identifier it is simply not possible to demultiplex incoming packets correctly. Using other protocols for transmission offers similar problems when multiplexing.</p>
<p id="rfc.section.4.6.p.2">In the case of RTP, SSRC could be used as the sole identifier, but to avoid changing ID if the SSRC changes (e.g. due to an SSRC collision) an identifier not dependent on, but related to, SSRC is the best choice.</p>
<p><a href="#RFC4575">RFC 4575</a> <cite title="NONE">[RFC4575]</cite>, a sub element of &lt;media&gt; defines an element &lt;src-id&gt; that MUST be used to carry the SSRC selected for the corresponding media content. This enables an endpoint to do reverse look-up of media ID on incoming packets using SSRC, or CSRC in the case media streams are aggregated by an RTP mixer.</p>
<h1 id="rfc.section.4.7">
<a href="#rfc.section.4.7">4.7.</a> <a href="#sec-sdp-description" id="sec-sdp-description">SDP Media Description</a>
</h1>
<p id="rfc.section.4.7.p.1">This section applies when SDP media description is used with RTP Media Transport. Use of MESS with other media transport in SDP MAY be used, but that is out of scope for this document and SHOULD instead be described in a separate RFC.</p>
<p id="rfc.section.4.7.p.2">The generated RTP media IDs MUST be included as ssrc attributes (described in <a href="#RFC5576">Source-Specific SDP Attributes</a> <cite title="NONE">[RFC5576]</cite>).</p>
<p id="rfc.section.4.7.p.3">Assuming a single media in an SDP media block, using an i-line (as described in <a href="#RFC4566">SDP</a> <cite title="NONE">[RFC4566]</cite>) is sufficient to name an individual media content. If a media block carries information about multiple SSRCs, this method is not enough to name all different media content. For this purpose a new source-specific attribute is proposed (previously mentioned in draft-lennox-mmusic-sdp-source-selection-02).</p>
<div id="#rfc.figure.1"></div>
<pre>a=ssrc:&lt;ssrc&gt; information:&lt;description&gt;
</pre>
<p id="rfc.section.4.7.p.4">The new, optional, source-specific attribute, with identical syntax and semantics of &lt;description&gt; as the i-line &lt;session description&gt; in SDP, except that it is specified per SSRC, provides a textual description of the media content represented by the SSRC included in the attribute declaration.</p>
<p id="rfc.section.4.7.p.5">In the case of RTP, an intercepting node in the network could be responsible for generating media descriptions upon reception of the actual RTP stream. However, such a solution will suffer from the fact that not all media may be sent to that node at all times. This would introduce a delay of media description creation until the intercepting node has received RTP packets from all media sources.</p>
<p id="rfc.section.4.7.p.6">In cases where a Media Gateway and it's controller are separate entities (see e.g. <a href="#RFC3435">Media Gateway Control Protocol</a> <cite title="NONE">[RFC3435]</cite>), such as in 3GPP IMS split architecture where MRFP and an MRFC exchange SDP information, e.g. through H.248 or SIP, the MRFC receives the SIP INVITE with SDP from participants and therefore also information about what SSRCs the endpoint intends to use. The MRFP will see incoming SSRCs in the actual RTP streams, but not before any media traffic has occurred. The MRFC is also responsible for publishing the conference <a href="#RFC4575">XML data</a> <cite title="NONE">[RFC4575]</cite>, e.g.  as a body in SIP NOTIFY to SUBSCRIBE'd endpoints. In short, the MRFC, or any other node acting as Conference AS, has the best information for generating and distributing media IDs and is chosen as the responsible node.</p>
<p id="rfc.section.4.7.p.7">There is no big difference in a call-out conferencing scenario where a conferencing node calls out to invited participants. The initial SDP will hold information about the capabilities of the network node and responding endpoints provide answer SDP's with media description (including SSRC) of there intended/offered media.</p>
<p id="rfc.section.4.7.p.8">In a distributed conference with several involved Conferencing AS'es, and also if 3GPP IMS split architecture is not used, the protocol to transfer media ID and SSRC information between Conferencing AS'es / MRFC's is out of scope for this document.</p>
<p id="rfc.section.4.7.p.9">A conference node SHOULD try to locate information from endpoints that name or describe individual media content in the SDP, and include the information in the body of the per-media &lt;display-text&gt; tag.  The information SHOULD be taken from, in this order if more preferred information is missing:</p>

<ol>
<li>The value from an "information" SSRC attribute described above</li>
<li>The value from an i-line within the media block</li>
<li>The value field of a <a href="#RFC4574">label attribute</a> <cite title="NONE">[RFC4574]</cite> within the media block</li>
<li>The value from an i-line at the SDP session level</li>
</ol>

<p>Other sources of information MAY be used, MAY be more preferred, and the &lt;display-text&gt; MAY also be empty. The receiving client MAY e.g. use the &lt;display-text&gt; content to amend originating user/endpoint information presented to the receiving user with the media content specific information.</p>
<h1 id="rfc.section.4.7.1">
<a href="#rfc.section.4.7.1">4.7.1.</a> Point to Point Communication</h1>
<p id="rfc.section.4.7.1.p.1">In point to point communication, endpoints could publish SSRC information using SDP in request and response. This is e.g. valid for the SDP in both the SIP INVITE and the corresponding 200 OK, or in any provisional responses.</p>
<p id="rfc.section.4.7.1.p.2">The list of published SSRCs is the list of offered media content available for request. Also, the SDP can be searched for the information attribute described in <a href="#sec-publishingmediainfo">Section 4.4</a> to extract information about naming of media content.</p>
<h1 id="rfc.section.4.7.2">
<a href="#rfc.section.4.7.2">4.7.2.</a> Conferencing Scenario</h1>
<p id="rfc.section.4.7.2.p.1">In a conferencing scenario, the media content information is distributed using an XML body following the schema defined in <a href="#RFC4575">Conference package</a> <cite title="NONE">[RFC4575]</cite>, e.g. carried by a SIP NOTIFY. For use with SIP and once a client has SUBSCRIBEd for conference information, it SHOULD be prepared to receive SIP NOTIFYs. If the SIP NOTIFY carries this type of XML, the receiving endpoint can extract information about media IDs and media content descriptions by finding all &lt;media&gt; elements in the received XML. This produces a valid request list of available media ID's and their corresponding SSRC values.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> MESS Requests</h1>
<p id="rfc.section.5.p.1">To request media streams, a communication channel between the endpoint and the node in control of the media streams needs to be setup.  This document describes use of SIP/SDP for this purpose, but other methods MAY be used and SHOULD then be described in a separate RFC. The basic requirements on the communication channel used for MESS are to offer reliable transmission and a near real time response.</p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> Transport</h1>
<p id="rfc.section.5.1.p.1">Binary Floor Control Protocol is described in <a href="#RFC4582">RFC 4582</a> <cite title="NONE">[RFC4582]</cite>. BFCP is a protocol that is likely to already be supported by conference-aware nodes and clients. This makes it easy to extend existing implementations to handle any new defined message. It also uses a reliable transport. In the context of media stream selection it is highly related and is thus regarded a feasible choice.</p>
<p id="rfc.section.5.1.p.2">All MESS messages defined in this document are extensions to the existing messages described in <a href="#RFC4582">BFCP</a> <cite title="NONE">[RFC4582]</cite>.  This means that they are not dependent upon any other message and can be implemented separately from legacy messages.</p>
<p id="rfc.section.5.1.p.3">The legacy floor control functionality of BFCP requires additional protocols to handle floor creation. That is not needed by MESS and thus out of scope for this document. A possible way is described in <a href="#RFC4583">SDP for BFCP</a> <cite title="NONE">[RFC4583]</cite>.</p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#sec-extensions" id="sec-extensions">BFCP Extensions</a>
</h1>
<p><a href="#RFC4582">BFCP</a> <cite title="NONE">[RFC4582]</cite> defines 13 primitives used in BFCP. To implement MESS as an extension to BFCP requires this set of primitives to be extended with two other called "MediaSelection" having a value of 32 and "MediaSelectionAck" having a value of 33.  MESS uses the same common header, referred to as COMMON-HEADER, as defined in <a href="#RFC4582">BFCP</a> <cite title="NONE">[RFC4582]</cite>. The attributes also follows the same pattern as described in that RFC, i.e. they are in the format Type-Length-Value.</p>
<div id="#rfc.figure.2"></div>
<pre>+-------+----------------------+---------------------------+
| Value | Primitive            | Direction                 |
+-------+----------------------+---------------------------+
|   32  | MediaSelection       | FloorParticipant -&gt; FCS   |
|   33  | MediaSelectionAck    | FCS -&gt; FloorParticipant   |
+-------+----------------------+---------------------------+</pre>
<p>FCS = Floor Control Server</p>
<p id="rfc.section.5.2.p.2">Table 1: Media Selection Primitives</p>
<p id="rfc.section.5.2.p.3">In addition to these new primitives, MESS also defines a set of new attributes.</p>
<div id="#rfc.figure.3"></div>
<pre>+------+--------------------------+-------------+
| Type | Attribute                | Format      |
+------+--------------------------+-------------+
|  32  | OPERATION                | Unsigned16  |
|  33  | MEDIA-IDENTIFICATION     | Grouped     |
|  34  | CHANNEL-IDENTIFICATION   | OctetString |
+------+--------------------------+-------------+ </pre>
<p id="rfc.section.5.2.p.4">Table 2: Media Selection Attributes</p>
<h1 id="rfc.section.5.2.1">
<a href="#rfc.section.5.2.1">5.2.1.</a> <a href="#sec-operation" id="sec-operation">OPERATION</a>
</h1>
<p id="rfc.section.5.2.1.p.1">The following is the format of the OPERATION attribute.</p>
<div id="#rfc.figure.4"></div>
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 1 0 0 0 0 0|M|0 0 0 0 0 1 0 0|       Operation id            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre>
<p></p>
<p id="rfc.section.5.2.1.p.3">Operation id: This field contains a 16-bit vale that identifies an operation to be performed. Defined entries in this document is Include, Exclude, Substitute, Reset, and Reset All.</p>
<div id="#rfc.figure.5"></div>
<pre>+-------+------------+
| Value | Operation  |
+-------+------------+
|   0   | Include    |
|   1   | Exclude    |
|   2   | Substitute |
|   3   | Reset      |
|   4   | Reset All  |
+-------+------------+</pre>
<p id="rfc.section.5.2.1.p.4">Table 3: MESS Operations</p>
<h1 id="rfc.section.5.2.2">
<a href="#rfc.section.5.2.2">5.2.2.</a> MEDIA-IDENTIFICATION</h1>
<p id="rfc.section.5.2.2.p.1">The MEDIA-IDENTIFICATION attribute is a grouped attribute consisting of a header, referred to as MEDIA-IDENTIFICATION-HEADER with identification type information followed by a sequence of other MEDIA-IDENTIFICATION attributes. The following is the format of the MEDIA-IDENTIFICATION-HEADER</p>
<div id="#rfc.figure.6"></div>
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 1 0 0 0 0 1|M|    Length     |     ID Type   |               |
+-------------+-+---------------+---------------+               |
|                                                               |
/                          Media ID                             /
/                                          +--------------------+
|                                          |      Padding       |
+------------------------------------------+--------------------+</pre>
<p></p>
<p id="rfc.section.5.2.2.p.3">The ID Type field is a 8 bit field describing the type of media id. Defined types in this document are:</p>
<div id="#rfc.figure.7"></div>
<pre>+-------+------------+
| Value | Type       |
+-------+------------+
|   0   | User       |
|   1   | Endpoint   |
|   2   | Media      |
+-------+------------+</pre>
<p id="rfc.section.5.2.2.p.4">Table 4: MESS Media Identification Types</p>
<p id="rfc.section.5.2.2.p.5">The following describes the format of the grouped attribute. The Media ID field will contain different information based on the ID Type. The Media ID field in MEDIA-IDENTIFICATION attributes of type "User" is only allowed to hold MEDIA-IDENTIFICATION of type "Endpoint", and Media ID field in MEDIA-IDENTIFICATION attributes of type "Endpoint" is only allowed to hold MEDIA-IDENTIFICATION attributes of type "Media". The Media ID field in MEDIA-IDENTIFICATION attributes of type "Media" holds the actual media ID number.</p>
<p id="rfc.section.5.2.2.p.6">This allows expression of tree-like identifications with attributes of type User being root node with attributes of Endpoints as leafs containing only attributes of type "Media". The following expresses this relationship in <a href="#RFC5234">ABNF</a> <cite title="NONE">[RFC5234]</cite> syntax.</p>
<div id="#rfc.figure.8"></div>
<pre>MEDIA-IDENTIFICATION = (USER-SUB-IDENTIFICATION / 
                        ENDPOINT-SUB-IDENTIFICATION /
                        MEDIA-SUB-IDENTIFICATION)

USER-SUB-IDENTIFICATION = (MEDIA-IDENTIFICATION-HEADER)
                          [ENDPOINT-SUB-IDENTIFICATION]

ENDPOINT-SUB-IDENTIFICATION = (MEDIA-IDENTIFICATION-HEADER)
                              [MEDIA-SUB-IDENTIFICATION]

MEDIA-SUB-IDENTIFICATION = (MEDIA-IDENTIFICATION-HEADER)

</pre>
<h1 id="rfc.section.5.2.3">
<a href="#rfc.section.5.2.3">5.2.3.</a> CHANNEL-IDENTIFICATION</h1>
<p id="rfc.section.5.2.3.p.1">The following is a description of the CHANNEL-IDENTIFICATION attribute.</p>
<div id="#rfc.figure.9"></div>
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 1 0 0 0 1 0|M|    Length     |                               |
+-------------+-+---------------+                               |
|                                                               |
/                          Channel Id                           /
/                                          +--------------------+
|                                          |      Padding       |
+------------------------------------------+--------------------+</pre>
<p id="rfc.section.5.2.3.p.2">This attribute is used to identify a specific channel to/from an endpoint.</p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> Defined Messages</h1>
<p id="rfc.section.5.3.p.1">MESS defines 5 messages used to control what media content to receive.</p>
<p id="rfc.section.5.3.p.2">Floor participants MAY use the messages in this clause without having obtained a floor, and floor servers MAY accept the messages from participants not owning the floor. When floor control is bypassed in this way, the FLOOR-ID SHALL be ignored by receivers of this message implementing this RFC, and senders implementing this RFC SHALL set it to 0.</p>
<p id="rfc.section.5.3.p.3">If a floor chair requires a floor participant to own the floor before using the messages of this clause, they SHALL both follow regular BFCP floor control procedures as defined in <a href="#RFC4582">BFCP</a> <cite title="NONE">[RFC4582]</cite>. For example, a floor participant not allowed to access the floor will receive a BFCP Error message containing Error Code 5 (Not authorized).</p>
<p id="rfc.section.5.3.p.4">When a floor control server implementing this RFC sends a BFCP SUPPORTED-PRIMITIVES attribute, the codes for messages defined in this clause MUST be included in the Primitives list.</p>
<p id="rfc.section.5.3.p.5">Extension attributes that may be defined in the future are referred to as EXTENSION-ATTRIBUTE in the ABNF, similarly as was done in section 5.3. of <a href="#RFC4582">BFCP</a> <cite title="NONE">[RFC4582]</cite>.</p>
<h1 id="rfc.section.5.3.1">
<a href="#rfc.section.5.3.1">5.3.1.</a> <a href="#sec-mediaselectionack" id="sec-mediaselectionack">MediaSelectionAck</a>
</h1>
<p id="rfc.section.5.3.1.p.1">All MediaSelectionMessages MUST be replied to with a MediaSelectionAck. The format of the MediaSelectionAck is as follows:</p>
<div id="#rfc.figure.10"></div>
<pre>MediaSelectionAck = (COMMON-HEADER)
                    *[EXTENSION-ATTRIBUTE]</pre>
<p></p>
<p id="rfc.section.5.3.1.p.3">The COMMON-HEADER of such a message MUST contain the transaction id of the acknowledged message.</p>
<h1 id="rfc.section.5.3.2">
<a href="#rfc.section.5.3.2">5.3.2.</a> Include</h1>
<p id="rfc.section.5.3.2.p.1">MESS Include messages are sent as BFCP messages with primitive "Media Selection" and the OPERATION attribute set to value "Include". Then follows a list of media identifications representing media streams that are always to be included from now on. Since there might be more than one transport channel in between the requesting node and the receiving node, the message MAY also contain information about which transport channel to use, a channel ID. In case RTP is used as transport, this channel ID SHOULD be a combination of SSRC and RTP session identification. If channel ID is missing there are no restrictions on the used transport and any transport channel MAY be used to deliver the stream. Other transports are out of scope for this document but need a similar identification possibility. Requests to Include an already included media SHALL be ignored. Note that the message is defined in a way that makes it additive and identifications for previously included media SHOULD NOT be included for every new request.</p>
<p id="rfc.section.5.3.2.p.2">A receiver of an include message MUST respond with a MediaSelectionAck containing the same transaction id.</p>
<div id="#rfc.figure.11"></div>
<pre>Include = (COMMON-HEADER)
          1*(FLOOR-ID)
          (OPERATION)
          1*(MEDIA-IDENTIFICATION)
          1*(CHANNEL-IDENTIFICATION)
          *[EXTENSION-ATTRIBUTE]

</pre>
<h1 id="rfc.section.5.3.3">
<a href="#rfc.section.5.3.3">5.3.3.</a> Exclude</h1>
<p id="rfc.section.5.3.3.p.1">MESS Exclude messages are sent as BFCP messages with primitive "Media Selection" and the OPERATION attribute set to value "Exclude". Then follows a list of media identifications representing media streams that are always to be excluded from now on. Requests to Exclude an already excluded media SHALL be ignored. Note that the message is defined in a way that makes it additive and identifications for previously excluded media SHOULD NOT be included for every new request. The exclude message MAY contain an optional channel ID limiting the exclude message so that the excluded stream might be sent using any other transport channel if available. If the channel ID is missing in the exclude message this means that the exclude concerns any channel between an endpoint and a sender.</p>
<div id="#rfc.figure.12"></div>
<pre>Exclude = (COMMON-HEADER)
          1*(FLOOR-ID)
          (OPERATION)
          1*(MEDIA-IDENTIFICATION)
          1*(CHANNEL-IDENTIFICATION)
          *[EXTENSION-ATTRIBUTE]

</pre>
<p></p>
<p id="rfc.section.5.3.3.p.3">A receiver of an exclude message MUST respond with a MediaSelectionAck containing the same transaction id.</p>
<h1 id="rfc.section.5.3.4">
<a href="#rfc.section.5.3.4">5.3.4.</a> Substitute</h1>
<p id="rfc.section.5.3.4.p.1">MESS Substitute messages are sent as BFCP messages with primitive "Media Selection" and the OPERATION attribute set to "Substitute".  Then follows a list of pairs of tuples called MEDIA-TUPLE. A MEDIA-TUPLE contains a MEDIA-IDENTIFICATION and an optional CHANNEL-IDENTIFICATION.</p>
<p id="rfc.section.5.3.4.p.2">The following is a formal description of MEDIA-TUPLE.</p>
<div id="#rfc.figure.13"></div>
<pre>MEDIA-TUPLE = (MEDIA IDENTIFICATION)
              1*(CHANNEL-IDENTIFICATION)</pre>
<p></p>
<p id="rfc.section.5.3.4.p.4">The following is a formal description of the Substitute message.</p>
<div id="#rfc.figure.14"></div>
<pre>Substitute = (COMMON-HEADER)
             1*(FLOOR-ID)
             (OPERATION)
             1*(MEDIA-TUPLE MEDIA-TUPLE)
             *[EXTENSION-ATTRIBUTE]

</pre>
<p></p>
<p id="rfc.section.5.3.4.p.6">In the list of pairs of MEDIA-TUPLEs, the pair MUST be interpret as follows. The first MEDIA-TUPLE defines the media stream, and possibly a transport channel, that should be replaced and the second MEDIA-TUPLE defines the media stream, and optionally a transport channel, to use as a replacement for the first MEDIA-TUPLE.</p>
<p id="rfc.section.5.3.4.p.7">Note that the included MEDIA-INDENTIFICATIONs typically need to be of type USER-SUB-IDENTIFICATION, since they in general do not refer to media from the same user, but other addressing MAY be sufficient.</p>
<p id="rfc.section.5.3.4.p.8">Since CHANNEL-IDENTIFICATION is optional and might be missing for any MEDIA-TUPLE in the above description, such a missing attribute should be interpreted as follows.</p>

<dl>
<dt>No Channel ID in any tuple:</dt>
<dd style="margin-left: 8">All media occurrences should be replaced using the already used channels. This is the same as an atomic version of a message series containing an exclude message and an include message without CHANNEL-IDENTIFICATION attributes.</dd>
<dt>Channel ID in the replaced media tuple:</dt>
<dd style="margin-left: 8">Replace the identified media only on the identified channel. This is the same as an atomic version of a message series containing an exclude message with a CHANNEL-IDENTIFICATION attribute and an include message without CHANNEL-IDENTIFICATION attribute.</dd>
<dt>Channel Id present in the replacing media tuple:</dt>
<dd style="margin-left: 8">Replace all occurrences of an identified media with the replacing media stream using the identified channel. This is the same as an atomic version of an exclude message without CHANNEL-IDENTIFICATION attribute followed by an include message with a CHANNEL-IDENTIFICATION.</dd>
<dt>Channel Id present in both media tuples:</dt>
<dd style="margin-left: 8">Replace the identified media on the identified channel with the replacing media using the identified channel. This is the same as an atomic version of an exclude message followed by an include message, both holding a CHANNEL-IDENTIFICATION attribute.</dd>
</dl>
<p></p>
<p id="rfc.section.5.3.4.p.10">A receiver of a substitute message MUST respond with a MediaSelectionAck containing the same transaction id.</p>
<h1 id="rfc.section.5.3.5">
<a href="#rfc.section.5.3.5">5.3.5.</a> Reset</h1>
<p id="rfc.section.5.3.5.p.1">MESS Reset messages are sent as BFCP messages with primitive "Media Selection" and the OPERATION attribute set to "Reset". The message carries a list of MEDIA-IDENTIFICATION to be reset. It does not matter if the media described by MEDIA-IDENTIFICATION has been excluded, included or neither of them before. The result at the floor control is always the same, the media associated with the received id will no longer be subject to explicit inclusion/exclusion. Requests to Reset an already reset media SHALL be ignored.</p>
<p id="rfc.section.5.3.5.p.2">A receiver of a reset message MUST respond with a MediaSelectionAck containing the same transaction id.</p>
<div id="#rfc.figure.15"></div>
<pre>Reset = (COMMON-HEADER)
        1*(FLOOR-ID)
        (OPERATION)
        1*(MEDIA-IDENTIFICATION)
        *[EXTENSION-ATTRIBUTE]

</pre>
<h1 id="rfc.section.5.3.6">
<a href="#rfc.section.5.3.6">5.3.6.</a> Reset All</h1>
<p id="rfc.section.5.3.6.p.1">MESS Reset All messages are sent as BFCP messages with primitive "Media Selection" and the OPERATION attribute set to "Reset All". It has no attributes. The message is equivalent to a MESS Reset message including MEDIA-IDENTIFICATION attributes of all streams that have previously been specified in "Include", "Exclude" or as second MEDIA-IDENTIFICATION attribute in "Substitute", effectively releasing all existing media streams from being subject to inclusion/exclusion. This operation can fully reset the inclusion/exclusion state even if the requesting endpoint has lost track of what restrictions were previously put.</p>
<div id="#rfc.figure.16"></div>
<pre>Reset All = (COMMON-HEADER)
            1*(FLOOR-ID)
            (OPERATION)
            *[EXTENSION-ATTRIBUTE]

</pre>
<p></p>
<p id="rfc.section.5.3.6.p.3">A receiver of a reset all message MUST respond with a MediaSelectionAck containing the same transaction id.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> MESS Responses</h1>
<p id="rfc.section.6.p.1">This document does define an acknowledge response (<a href="#sec-mediaselectionack">Section 5.3.1</a>) as well as an error message with several different error reasons.</p>
<p><a href="#RFC4582">BFCP</a> <cite title="NONE">[RFC4582]</cite> defines attributes for error handling. The BFCP Error message in <a href="#RFC4582">BFCP section 5.3.13</a> <cite title="NONE">[RFC4582]</cite> SHALL be used also for error reporting applicable to this RFC.</p>
<p><a href="#RFC4582">BFCP</a> <cite title="NONE">[RFC4582]</cite> Table 5 defines 9 error codes used in floor control. This document defines the following additional error codes that MAY be used in MESS responses:</p>
<div id="#rfc.figure.17"></div>
<pre>+--------+-------------------------------------+
| Value  | Meaning                             |
+--------+-------------------------------------+
|   16   | Media does not exist                |
|   17   | Endpoint does not exist             |
|   18   | Cannot include media                |
|   20   | Cannot exclude media                |
|   21   | Cannot substitute media             |
+--------+-------------------------------------+
</pre>
<p id="rfc.section.6.p.4">Table 5: Media Selection Error Codes</p>
<p id="rfc.section.6.p.5">The exact reason for the failure MAY be included as UTF8 encoded text in the field "Error specific details" of the BFCP ERROR-CODE attribute.  The ERROR-INFO attribute MAY also be used.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> RTP Implications</h1>
<p id="rfc.section.7.p.1">RTP is a widely used protocol to transfer media. Usage of MESS when media transport is handled using RTP might impact how RTCP reports must be handled when excluding media. In the case where <a href="#RFC5117">RTP Translators</a> <cite title="NONE">[RFC5117]</cite> exists in between endpoints and if the RTP Transport Translators are able to adjust their forwarding rules based on the signalling defined in this document, RTCP reporting may become inconsistent for excluded media content. How this should be handled is out of scope for this document. The operations described in MESS are consistent with the operation of RTP mixers or direct end-point to end-point topologies.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> Examples</h1>
<p id="rfc.section.8.p.1">Note that the SDP in the examples below is not complete. Only relevant parts have been included.</p>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> Client joins a conference</h1>
<p id="rfc.section.8.1.p.1">A clients joins a conference by sending an SDP according to the following:</p>
<div id="#rfc.figure.18"></div>
<pre>s=MESS Example Client
m=audio 49200 RTP/AVP 96
a=rtpmap:96 G719/48000/2
a=ssrc:521923924 cname:alice@foo.example.com
a=mid:1
m=video 49300 RTP/AVP 96
a=rtpmap:96 H264/90000
a=ssrc:834753488 cname:alice@foo.example.com
a=ssrc:834753488 information:"Alice cam"
a=label:main video
a=mid:2
a=content:main
m=application 50000 TCP/BFCP *
a=setup:passive
a=connection:new</pre>
<p></p>
<p id="rfc.section.8.1.p.3">In this SDP Alice explicitly names her video stream "Alice cam" by using the new attribute defined in this document. This information is associated with a specific SSRC.</p>
<p id="rfc.section.8.1.p.4">A conferencing node in the network then sends the following SIP NOTIFY sample body to subscribed clients.</p>
<div id="#rfc.figure.19"></div>
<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;conference-info
    xmlns="urn:ietf:params:xml:ns:conference-info"
    entity="sips:conf233@example.com"
    state="full" version="1"&gt;
      &lt;!-- OTHER CONFERENCE INFO --&gt;
      &lt;users&gt;
         &lt;!-- USER --&gt;
         &lt;user entity="sip:alice@example.com" state="full"&gt;
            &lt;display-text&gt;Alice&lt;/display-text&gt;
            &lt;!-- ENDPOINTS --&gt;
            &lt;endpoint 
               entity="sip:4kfk4j392jsu@example.com;grid=433kj4j3u"&gt;
               &lt;status&gt;connected&lt;/status&gt;
               &lt;!-- MORE INFORMATION --&gt;
               &lt;!-- MEDIA --&gt;
               &lt;media id="1"&gt;
                  &lt;display-text&gt;Alice cam&lt;/display-text&gt;
                  &lt;type&gt;Video&lt;/type&gt;
                  &lt;label&gt;main video&lt;/label&gt;
                  &lt;src-id&gt;834753488&lt;/src-id&gt;
                  &lt;status&gt;sendrecv&lt;/status&gt;
               &lt;/media&gt;
               &lt;!- POSSIBLY ADDITIONAL MEDIA --&gt;
            &lt;/endpoint&gt;
            &lt;!-- POSSIBLY ADDITIONAL ENDPOINTS --&gt;
         &lt;/user&gt;
         &lt;!-- ADDITIONAL USERS --&gt;
      &lt;/users&gt;
   &lt;!-- ADDITIONAL ELEMENTS --&gt;
&lt;/conference-info&gt;</pre>
<p></p>
<p id="rfc.section.8.1.p.6">Any subscribing endpoint that receives this information can now actively request the "Alice cam" media from sip:alice@example.com to be explicitly included in received media streams. This is done by sending an Include message as defined in this document (some fields not encoded for clarity):</p>
<div id="#rfc.figure.20"></div>
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 1|0 0 0 0 0|0 0 1 0 0 0 0 0|        Payload Length         | 
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Conference ID                         |  
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Transaction ID        |            User ID            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 1 0|M|0 0 0 0 0 1 0 0|           Floor ID            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 1 0 0 0 0 0|1|0 0 0 0 0 1 0 0|0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 1 0 0 0 0 1|1|0 0 0 1 0 1 0 1|0 0 0 0 0 0 0 0|               |
+-------------+-+---------------+---------------+               | 
|                                                               |
/                  sip:alice@example.com                        /
/                                          +--------------------+
|                                          |      Padding       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 1 0 0 0 0 1|1|    Length     |0 0 0 0 0 0 0 1|               | 
+-------------+-+---------------+---------------+               | 
|                                                               |
/    sip:4kfk4j392jsu@example.com;grid=433kj4j3u                /
/                                          +--------------------+
|                                          |      Padding       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 1 0 0 0 0 1|1|    Length     |0 0 0 0 0 0 1 1|               |  
+-------------+-+---------------+---------------+               |  
|                                                               |
/                               1                               /
/                                          +--------------------+
|                                          |      Padding       |
+------------------------------------------+--------------------+
|0 1 0 0 0 1 0|1|    Length     |                               |  
+-------------+-+---------------+                               |  
|                     Channel Id           +--------------------+
|                                          |      Padding       |
+------------------------------------------+--------------------+</pre>
<p></p>
<p id="rfc.section.8.1.p.8">The receiver of this message MUST send an acknowledgement using the same transaction ID as soon as possible.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.9.p.1">Following the guidelines in <a href="#RFC4566">SDP</a> <cite title="NONE">[RFC4566]</cite>, in <a href="#RFC5888">SDP Grouping Framework</a> <cite title="NONE">[RFC5888]</cite> and in <a href="#RFC3550">RTP</a> <cite title="NONE">[RFC3550]</cite>, the IANA is requested to register:</p>
<p id="rfc.section.9.p.2">A new source-specific attribute named "information" as defined in <a href="#sec-pubmediainfo">Section 4.3</a>.</p>
<p id="rfc.section.9.p.3">Add the following entries to the <a href="#RFC4582">BFCP</a> <cite title="NONE">[RFC4582]</cite> registry:</p>

<ul>
<li>Primitives from Table 1</li>
<li>Attributes from Table 2</li>
<li>Error Codes from Table 5</li>
</ul>
<p id="rfc.section.9.p.4">Start a new registry for this document with:</p>

<ul>
<li>Operations from Table 3</li>
<li>Media Identification Types from Table 4</li>
</ul>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.10.p.1">When using MESS there is a potential risk of exposing client behavior to other participants. Consider the case where multiple endpoints participates in a conference. Also assume that media transport is done using RTP. If the network between endpoints contains one (or more) RTP translators and even if MESS communication is strictly between floor server and floor participant, the RTCP traffic to/from endpoints could expose information about endpoints excluding other endpoints. Previously received RTCP traffic replaced with no traffic could be leaking information about an endpoint excluding other endpoints.</p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.11.p.1">Jonanthan Lennox and Henning Schulzrinne for their proposal of a source-specific information attribute in the expired Internet Draft draft-lennox-mmusic-sdp-source-selection-02.</p>
<h1 id="rfc.references">
<a href="#rfc.references">12.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">12.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3550">[RFC3550]</b></td>
<td class="top">
<a>Schulzrinne, H.</a>, <a>Casner, S.</a>, <a>Frederick, R.</a> and <a>V. Jacobson</a>, "<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>", STD 64, RFC 3550, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4566">[RFC4566]</b></td>
<td class="top">
<a>Handley, M.</a>, <a>Jacobson, V.</a> and <a>C. Perkins</a>, "<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>", RFC 4566, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4575">[RFC4575]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, <a>Schulzrinne, H.</a> and <a>O. Levin</a>, "<a href="http://tools.ietf.org/html/rfc4575">A Session Initiation Protocol (SIP) Event Package for Conference State</a>", RFC 4575, August 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4582">[RFC4582]</b></td>
<td class="top">
<a>Camarillo, G.</a>, <a>Ott, J.</a> and <a>K. Drage</a>, "<a href="http://tools.ietf.org/html/rfc4582">The Binary Floor Control Protocol (BFCP)</a>", RFC 4582, November 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5234">[RFC5234]</b></td>
<td class="top">
<a>Crocker, D.</a> and <a>P. Overell</a>, "<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>", STD 68, RFC 5234, January 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5576">[RFC5576]</b></td>
<td class="top">
<a>Lennox, J.</a>, <a>Ott, J.</a> and <a>T. Schierl</a>, "<a href="http://tools.ietf.org/html/rfc5576">Source-Specific Media Attributes in the Session Description Protocol (SDP)</a>", RFC 5576, June 2009.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">12.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC3435">[RFC3435]</b></td>
<td class="top">
<a>Andreasen, F.</a> and <a>B. Foster</a>, "<a href="http://tools.ietf.org/html/rfc3435">Media Gateway Control Protocol (MGCP) Version 1.0</a>", RFC 3435, January 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4574">[RFC4574]</b></td>
<td class="top">
<a>Levin, O.</a> and <a>G. Camarillo</a>, "<a href="http://tools.ietf.org/html/rfc4574">The Session Description Protocol (SDP) Label Attribute</a>", RFC 4574, August 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4583">[RFC4583]</b></td>
<td class="top">
<a>Camarillo, G.</a>, "<a href="http://tools.ietf.org/html/rfc4583">Session Description Protocol (SDP) Format for Binary Floor Control Protocol (BFCP) Streams</a>", RFC 4583, November 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5117">[RFC5117]</b></td>
<td class="top">
<a>Westerlund, M.</a> and <a>S. Wenger</a>, "<a href="http://tools.ietf.org/html/rfc5117">RTP Topologies</a>", RFC 5117, January 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5888">[RFC5888]</b></td>
<td class="top">
<a>Camarillo, G.</a> and <a>H. Schulzrinne</a>, "<a href="http://tools.ietf.org/html/rfc5888">The Session Description Protocol (SDP) Grouping Framework</a>", RFC 5888, June 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Daniel Grondal</span> 
	  <span class="n hidden">
		<span class="family-name">Grondal</span>
	  </span>
	</span>
	<span class="org vcardline">Ericsson AB</span>
	<span class="adr">
	  <span>Farogatan 6</span>

	  <span class="vcardline">
		<span class="locality">SE - 164 80 Kista</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Sweden</span>
	</span>
	<span class="vcardline">Phone: +46107147505</span>

<span class="vcardline">EMail: <a href="mailto:daniel.grondal@ericsson.com">daniel.grondal@ericsson.com</a></span>

<span class="vcardline">URI: <a href="www.ericsson.com">www.ericsson.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Bo Burman</span> 
	  <span class="n hidden">
		<span class="family-name">Burman</span>
	  </span>
	</span>
	<span class="org vcardline">Ericsson AB</span>
	<span class="adr">
	  <span>Farogatan 6</span>

	  <span class="vcardline">
		<span class="locality">SE - 164 90 Kista</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Sweden</span>
	</span>
	<span class="vcardline">Phone: +46107141311</span>

<span class="vcardline">EMail: <a href="mailto:bo.burman@ericsson.com">bo.burman@ericsson.com</a></span>

<span class="vcardline">URI: <a href="www.ericsson.com">www.ericsson.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Magnus Westerlund</span> 
	  <span class="n hidden">
		<span class="family-name">Westerlund</span>
	  </span>
	</span>
	<span class="org vcardline">Ericsson AB</span>
	<span class="adr">
	  <span>Farogatan 6</span>

	  <span class="vcardline">
		<span class="locality">SE- Kista 164 90</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Sweden</span>
	</span>
	<span class="vcardline">Phone: +46107148287</span>

<span class="vcardline">EMail: <a href="mailto:magnus.westerlund@ericsson.com">magnus.westerlund@ericsson.com</a></span>

<span class="vcardline">URI: <a href="www.ericsson.com">www.ericsson.com</a></span>

  </address>
</div>

</body>
</html>