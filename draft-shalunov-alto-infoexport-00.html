<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>ALTO Information Export Service</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="ALTO Information Export Service">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">S. Shalunov</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">BitTorrent</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">R. Penno</td></tr>
<tr><td class="header">Expires: May 1, 2009</td><td class="header">Juniper Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">R. Woundy</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Comcast</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 28, 2008</td></tr>
</table></td></tr></table>
<h1><br />ALTO Information Export Service<br />draft-shalunov-alto-infoexport-00.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on May 1, 2009.</p>

<h3>Abstract</h3>

<p>The ALTO Information Export Service is a simple way to convey ISP routing policy preferences to applications.  Applications that could use this service are those that have a choice in connection endpoints.  Examples of such applications are peer-to-peer and content delivery networks.
</p>
<p>Applications already have access to great amount of underlying topology information.  For example, views of the Internet routing table are easily available at looking glass servers and entirely practical to download to every client.  What is missing is the routing policy information -- what does the local ISP actually prefer?
</p>
<p>This document describes a very simple mechanism that would allow to export such information to applications.  While such service would primarily be provided by the network, i.e., the local ISP, third parties could also operate this service.
</p>
<a name="anchor1"></a><br /><hr />
<a name="rfc.section.1"></a><h3>1.&nbsp;
Requirements notation</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
            "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
            and "OPTIONAL" in this document are to be interpreted as
            described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor2"></a><br /><hr />
<a name="rfc.section.2"></a><h3>2.&nbsp;
Overview</h3>

<p>Each network region can choose to support the ALTO service.  (A network region in this context is an Autonomous System, an ISP, or perhaps a smaller region -- the details depend on the mechanism of discovery.)
</p>
<p>The service works as follows:
				</p>
<ol class="text">
<li>The ISP prepares the ALTO information.  This maps some IP prefixes or AS numbers into priority values.  Higher priority values indicate higher desirability of the prefix.  There is a default treatment for IP numbers that are in none of the prefixes or AS numbers.
</li>
<li>The ISP serializes the information into a sequence of octets (<a class='info' href='#format'>Section&nbsp;4<span> (</span><span class='info'>Information format</span><span>)</span></a>).
</li>
<li>The application, running on a given host, discovers the resource and fetches the serialized ALTO information (<a class='info' href='#discovery'>Section&nbsp;3<span> (</span><span class='info'>Discovery</span><span>)</span></a>).
</li>
<li>The application makes use of the information by preferring IP numbers with higher priority (<a class='info' href='#semantics'>Section&nbsp;5<span> (</span><span class='info'>Semantics</span><span>)</span></a>).
</li>
</ol><p>
				The part of the ISP MAY be implemented, to give a few examples that do not preclude other implementation options,
				</p>
<blockquote class="text">
<p>by running a script connecting to existing equipment, fetching routing information, and then generating and uploading the requisite file;
</p>
<p>by running a database-backed application that is obtains routing information from existing equipment and generates the requisite file dynamically;
</p>
<p>by modifying the software or hardware of existing equipment to support these functions; or
</p>
<p>by using new equipment for the purpose of operating this network service.
</p>
</blockquote><p>
			
</p>
<a name="discovery"></a><br /><hr />
<a name="rfc.section.3"></a><h3>3.&nbsp;
Discovery</h3>

<p>Discovery per se is out of scope for this document and will be handled separately.
</p>
<p>The necessary property of discovery is that a client, starting from nothing on today's Internet that does not yet universally support global-scope multicast and may include NATs, can find a URL that describes the location of the local ALTO service, as configured by the ISP.
</p>
<p>Subsequent sections assume that this URL is found.  So that maximum number of clients can use the ALTO service, the URL schema SHOULD be "http" or "https".
</p>
<a name="format"></a><br /><hr />
<a name="rfc.section.4"></a><h3>4.&nbsp;
Information format</h3>

<p>The URL discovered through the mechanism mentioned in <a class='info' href='#discovery'>Section&nbsp;3<span> (</span><span class='info'>Discovery</span><span>)</span></a> points to a resource that consists of a sequence of octets.  The content MAY change with every request or depend on the source of the request, but it MAY also be fairly static and change, for example, monthly.
</p>
<p>The sequence of octets is a text file in US-ASCII and consists of records.  Records are lines, terminated by network newlines (carriage return, followed by linefeed).  Each record consists of three parts, separated by colon characters:
				</p>
<ol class="text">
<li>Type designator, one of two values: "asn" or "cidr" (quotes do not appear literally in the file).  Other type designators could be added in the future.  When interpreting the file, lines with unknown designators MUST be ignored.
</li>
<li>An AS number or an IP prefix in CIDR notation.  If the type for the line is "asn", an AS number MUST appear, rendered in US-ASCII as an unsigned integer in decimal.  If the type for the line is "cidr", an IP prefix in CIDR notation MUST appear.  For IPv4, the IP prefix uses US-ASCII representation of decimal dot-separated octets.  For IPv6, the IP prefix uses the "[" character, followed by single-colon-separated hex-encoded bytes, followed by the "]" character.  For both IPv4 and IPv6, this is followed by the "/" character, followed by the bitmask length.
</li>
<li>A US-ASCII rendering of decimal representation of an integer, representing priority.  The integer MAY be preceded by a minus sign and MUST NOT contain a plus sign.  (The plus sign is implied.)
</li>
</ol><p>
				The file MUST NOT contain any whitespace other than newlines.  Any extraneous whitespace found MUST be ignored (with a warning if practical).  The following is an example of a valid format:
				</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
cidr:10/8:10
asn:0:5
cidr:10.1/16:20
cidr:10.2/16:-10
cidr:[de:ad:be:ef:fe:ed]/48:20
</pre></div><p>

				(This example may contain leading whitespace on each of the lines.  This whitespace, if present, is a typographic artifact caused by the way this document is rendered.  Actual examples MUST NOT include any such whitespace.)
			
</p>
<p>When the file is interpreted any line that is malformed or not understood MUST be discarded and ignored, but subsequent lines MUST still be paid attention to.
</p>
<a name="semantics"></a><br /><hr />
<a name="rfc.section.5"></a><h3>5.&nbsp;
Semantics</h3>

<p>IP prefixes with positive priorities are more desirable than the default.  IP prefixes with negative priorities are less desirable than the default.  In general, greater values are more desirable.  Zero priority is the default.  IPs not covered by the file are treated as if they had priority zero.
</p>
<p>The absolute value of the priorities does not matter.  Only their relative order is meaningful.  Higher values are more desirable.  For example, multiplying all the priority values in a given file by the same positive integer constant does not change the semantics of the file.
</p>
<p>Some ISPs already convey information such as "traffic in the local country is free" to their customers.  These ISPs will find the ALTO service an excellent means of conveying similar information in a machine-readable form.  Only one (positive) priority value is needed for such use.
</p>
<p>It is up to the ISP deploying the file to choose how much information to publish in it.
</p>
<a name="anchor3"></a><br /><hr />
<a name="rfc.section.6"></a><h3>6.&nbsp;
Example Use by Application</h3>

<p>The semantics of the information are intentionally flexible, because:
				</p>
<blockquote class="text">
<p>Different applications will necessarily use the information differently.  For example, an application that connects to just one address is going to have a different algorithm for selecting it than an application that connects to many.
</p>
<p>Given lack of Internet-scale experimentation with using the information, we don't yet know what the best ways are.  We want to give different approaches a chance to compete.
</p>
</blockquote><p>
				However, it's important to provide at least a non-normative example of how such routing policy information could be used.
			
</p>
<p>Consider a BitTorrent client that wishes to use the ALTO information.  The client will have a list of perhaps up to 200 initial candidate peers, out of which it will select perhaps 50 peers to try to connect to.  In an initial implementation, the client could:
				</p>
<blockquote class="text">
<p>Split the candidates into three sets: preferred (those with positive priorities), to-be-avoided (those with negative priorities), and default (0 or unspecified priority)
</p>
<p>Select up to 25 candidates randomly from the preferred set.  In particular, if there are fewer than 25 in the preferred set, select them all.
</p>
<p>Fill remaining slots up to 50 with candidates from the default set.
</p>
<p>If this didn't fill the slots (i.e., fewer than 50 of the candidates were in the union of preferred and default sets), fill the rest by candidates from the to-be-avoided set.
</p>
<p>When establishing connections after the initial startup, continue using the policy of giving up to half the slots to preferred with the rest for default and to-be-avoided only as last resort.
</p>
<p>When selecting a peer to optimistically unchoke, half the time select a preferred peer if there is one.
</p>
</blockquote><p>
				(The particular numbers could be different.)  If the preferred peers perform better than default ones, they will dominate the transfers.  To-be-avoided peers are largely not contacted, unless the prohibitive policy is broad enough or the swarm is small enough that it is necessary to contact them to fill the slots. 
			
</p>
<p>In addition, the application might use some form of randomized test to see if it performs better or worse when the ALTO service use is on.
</p>
<a name="anchor4"></a><br /><hr />
<a name="rfc.section.7"></a><h3>7.&nbsp;
Mapping IPs to ASNs</h3>

<p>DISCUSSION: Applications can already map IPs to ASNs using information from a BGP looking glass.  To do so, they have to download a file of about 1.5MB when compressed (as of October 2008, with all information not needed for IP to ASN mapping removed) and periodically (perhaps monthly) refresh it.
</p>
<p>Alternatively, the ALTO service as defined in this document could be expanded so that there is another file that expands every ASN mentioned in the policy file into a set of IP prefixes.  In that case, the ASNs in the policy file, from a client's perspective, would be treated like macros.  The mapping file provided by the ISP would be be both smaller and more authoritative.
</p>
<p>For simplicity of implementation, it's highly desirable that clients only have to implement exactly one mechanism of mapping IPs to ASNs.
</p>
<p>We're interested in perspectives of others on this.
</p>
<a name="anchor5"></a><br /><hr />
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>The ISP publishing the ALTO policy information has to treat it as publishing to the entire world.
</p>
<p>Applications using the information must be cognizant of the possibility that the information is malformed or incorrect.  Even when it is correct, its use might harm the performance.  When an application concludes that it would get better performance disregarding the ALTO information, the decision to discontinue the use of ALTO information is likely best left to the user.
</p>
<p>The use of TLS (using the "https" URL schema) will make it easier for clients to verify the origin of ALTO information.
</p>
<a name="rfc.references1"></a><br /><hr />
<h3>9.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Stanislav Shalunov</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">BitTorrent</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:shalunov@bittorrent.com">shalunov@bittorrent.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://shlang.com/">http://shlang.com/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Reinaldo Penno</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Juniper Networks</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:rpenno@juniper.net">rpenno@juniper.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Richard Woundy</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Comcast</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Richard_Woundy@cable.comcast.com">Richard_Woundy@cable.comcast.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
