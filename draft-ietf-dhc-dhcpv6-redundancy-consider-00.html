<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>DHCPv6 Redundancy Deployment Considerations</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Scope and Assumptions">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Service provider model">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Enterprise model">
<link href="#rfc.section.3" rel="Chapter" title="3 Protocol requirements">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 DHCPv6 Servers">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 DHCPv6 Relays">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 DHCPv6 Clients">
<link href="#rfc.section.4" rel="Chapter" title="4 Deployment models">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Split Prefixes">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Multiple Unique Prefixes">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Identical Prefixes">
<link href="#rfc.section.5" rel="Chapter" title="5 Challenges and Issues">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document documents some deployment considerations for those who wishing to use DHCPv6 to support their deployment of IPv6. Specifically, providing semi-redundant DHCPv6 services is discussed in this document." />
  <meta name="description" content="This document documents some deployment considerations for those who wishing to use DHCPv6 to support their deployment of IPv6. Specifically, providing semi-redundant DHCPv6 services is discussed in this document." />
  <meta name="keywords" content="DHCPv6 Redundancy, DHCPv6 Deployment Considerations" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">dhc</td>
<td class="right">J.B. Brzozowski</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Comcast Cable Communications</td>
</tr>
<tr>
<td class="left">Intended status: Best Current Practice</td>
<td class="right">J.F. Tremblay</td>
</tr>
<tr>
<td class="left">Expires: October 20, 2011</td>
<td class="right">Videotron Ltd.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">J.C. Chen</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Time Warner Cable</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">T.M. Mrugalski</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">ISC</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">April 18, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">DHCPv6 Redundancy Deployment Considerations<br />
  <span class="filename">draft-ietf-dhc-dhcpv6-redundancy-consider-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document documents some deployment considerations for those who wishing to use DHCPv6 to support their deployment of IPv6. Specifically, providing semi-redundant DHCPv6 services is discussed in this document.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on October 20, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Scope and Assumptions</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Service provider model</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Enterprise model</a>
</li>
<li>3.   <a href="#rfc.section.3">Protocol requirements</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">DHCPv6 Servers</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">DHCPv6 Relays</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">DHCPv6 Clients</a>
</li>
<li>4.   <a href="#rfc.section.4">Deployment models</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Split Prefixes</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Multiple Unique Prefixes</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Identical Prefixes</a>
</li>
<li>5.   <a href="#rfc.section.5">Challenges and Issues</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Acknowledgements</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">To support the deployment of IPv6 redundancy and high availability are required for many if not all components. This document provides information specific to the proposed near term approach for deploying semi-redundant DHCPv6 services in advance of DHCPv6 server implementations that support a standards based failover or redundancy protocol.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#assumptions" id="assumptions">Scope and Assumptions</a>
</h1>
<p id="rfc.section.2.p.1">This document specifies an interim architecture to provide a semi-redundant DHCPv6 solution before the availability of vendor or standard based solutions. The proposed architecture may be used in wide range of networks, two notable deployment models are discussed: service provider and enterprise network environments. The described architecture leverages only existing and implemented DHCPv6 standards. This document does not address a standards based solution for DHCPv6 redundancy. In the absence of a standards based DHCPv6 redundancy protocol and implementation, some analogies are loosely drawn with the DHCPv4 failover protocol for reference. Specific discussions related to DHCPv4 failover and redundancy is out of scope for this document.</p>
<p id="rfc.section.2.p.2">Although DHCPv6 redundancy may be useful in a wide range of scenarios, they may be generalized for illustration purposes in the two aforementioned. The following assumptions were made with regards to the existing DHCPv6 infrastructure, regardless of the model used: </p>

<ol>
<li>At least two DHCPv6 servers are used to service to the same clients, but the number of servers is not restricted.</li>
<li>Existing DHCPv6 servers will not directly communicate or interact with one another in the assignment of IPv6 addresses and configuration information to requesting clients.</li>
<li>DHCPv6 clients are instructed to run stateful DHCPv6 to request at least one IPv6 address. Configuration information and other options like a delegated IPv6 prefix may be also requested.</li>
<li>Clients requesting IPv6 addresses, prefixes, and or options care of DHCPv6 must recognize and honor the DHCPv6 preference option.  Furthermore, the requesting clients must process DHCPv6 ADVERTISE messages per <a href="#RFC3315">[RFC3315]</a> when the preference option is present.</li>
<li>DHCPv6 server failure does not imply failure of any other network service or protocol, e.g. TFTP servers. Redundancy of any additional services configured by means of DHCPv6 are outside of scope of this document. For example, a single DHCPv6 server may configure multiple TFTP servers, with preference for each TFTP server, as specified in <a href="#RFC5970">[RFC5970]</a>.</li>
</ol>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> Service provider model</h1>
<p id="rfc.section.2.1.p.1">The service provider model represents cases, where end-user devices may be configured directly, without any intermediate devices (like home routers used in service provider model). DHCPv6 clients include cable modems, customer gateways or home routers, and end-user devices.  In some cases hosts may be configured directly using the service provider DHCPv6 infrastructure or via intermediate router, that is in turn being configured by the provider DHCPv6 infrastructure. The service provider DHCPv6 infrastructure may be semi-redundant in either case. Cable modems, customer gateways or home routers, and end-user devices are commonly referred to as CPE (Customer Premises Equipment).  The following additional assumptions were made, besides the ones made in <a href="#assumptions">Section 2</a>: </p>

<ol>
<li>The service provider edge routers and access routers (CMTS for cable or DSLAM/BRAS for DSL for example) are IPv6 enabled when required.</li>
<li>CPE devices are instructed to perform stateful DHCPv6 to request atleast one IPv6 address, delegated prefix, and or configuration information. CPE devices may also be instructed to leverage stateless DHCPv6 <a href="#RFC3736">[RFC3736]</a> to acquire configuration information only. This assumes that IPv6 address and prefix information has been acquired using other means.</li>
<li>The primary application of this BCP is for native IPv6 services. Use and applicability to transition mechanisms is out of scope for this document.</li>
<li>CPE devices must implement a stateful DHCPv6 client <a href="#RFC3315">[RFC3315]</a>, support for DHCPv6 prefix delegation <a href="#RFC3633">[RFC3633]</a> or stateless DHCPv6 <a href="#RFC3736">[RFC3736]</a> may also be implemented.</li>
</ol>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> Enterprise model</h1>
<p id="rfc.section.2.2.p.1">The enterprise model represents cases, where end-user devices are most often configured directly, without any intermediate devices (like home routers used in service provider model). However, enterprise IPv6 environments quite often use or require that DHCPv6 relay agents are in place to support the use of DHCPv6 for the acquisition of IPv6 addresses and or configuration information. The assumptions here extend those that are defined in the beginning of <a href="#assumptions">Section 2</a>:</p>

<ol>
<li>DHCPv6 clients are hosts and are considered end nodes. Examples of such clients include computers, laptops, and possibily mobile devices.</li>
<li>DHCPv6 clients generally do not require the assignment of an IPv6 prefix delegation and as such do not support DHCPv6 prefix delegation <a href="#RFC3633">[RFC3633]</a>.</li>
</ol>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Protocol requirements</h1>
<p id="rfc.section.3.p.1">The following sections outline the requirements that must be satisfied by DHCPv6 clients, relays, and servers to ensure the desired behavior is provided using pre-existing DHCPv6 server implementations as is. The objective is to provide a semi-redundant DHCPv6 service to support the deployment of IPv6 where DHCPv6 is required for the assignment of IPv6 addresses, prefixes, and or configuration information.</p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> DHCPv6 Servers</h1>
<p id="rfc.section.3.1.p.1">This interim architecture requires DHCPv6 servers that are <a href="#RFC3315">RFC 3315</a> <cite title="NONE">[RFC3315]</cite> compliant and support the necessary options required to support this solution. Essential to the the use of the interim architecture is support for stateful DHCPv6 and the DHCPv6 preference option both which are specified in <a href="#RFC3315">[RFC3315]</a>. For deployment scenarios where IPv6 prefix delegation is employed DHCPv6 servers must support DHCPv6 prefix delegation as defined by <a href="#RFC3633">[RFC3633]</a>.  Further, where stateless DHCPv6 is used support for <a href="#RFC3736">[RFC3736]</a> is required by DHCPv6 servers.</p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> DHCPv6 Relays</h1>
<p id="rfc.section.3.2.p.1">There are no specific requirements regarding relays. However, it is implied that DHCPv6 relay agents must be <a href="#RFC3315">[RFC3315]</a> compliant and must support the ability to relay DHCPv6 messages to more than one destination minimally.</p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> DHCPv6 Clients</h1>
<p id="rfc.section.3.3.p.1">DHCPv6 clients are required to be compliant to <a href="#RFC3315">[RFC3315]</a> and support the necessary options required to support this solution depending on the mode of operations and desired behavior. Where prefix delegation is required DHCPv6 clients will be required to support DHCPv6 prefix delegation as defined in <a href="#RFC3633">[RFC3633]</a>. Clients used with this semi-redundant DHCPv6 deployment model must support the acquistion of at least one IPv6 address and configuration information using stateful DHCPv6 as specified by <a href="#RFC3315">[RFC3315]</a>.  The use of stateless DHCPv6 which is also specified in <a href="#RFC3315">[RFC3315]</a> may also be supported. DHCPv6 client must recognize and adhere to the processing of the advertised DHCPv6 preference options sent by the DHCPv6 servers.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Deployment models</h1>
<p id="rfc.section.4.p.1">At the time of this writing a standards-based DHCPv6 redundancy protocol and implementations are not available. As a result DHCPv6 server implementations will be used as-is to provide best effort, semi-redundant DHCPv6 services. Behavior of the DHCPv6 services will in part be governed by the configuration used by each of the servers.  Additionally, various aspects of the DHCPv6 protocol <a href="#RFC3315">[RFC3315]</a> will be leveraged to yield the desired behavior. No inter-server or inter-process communications will be used to coordinate DHCPv6 events and or activities. DHCP services for both IPv4 and IPv6 may operate simultaneously on the same physical server(s) or may operate on different ones.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#split-prefixes" id="split-prefixes">Split Prefixes</a>
</h1>
<p id="rfc.section.4.1.p.1">In the split prefixes model, each DHCPv6 server is configured with a unique, non-overlapping range derived from the /64 prefix deployed for use within an IPv6 network. Distribution between two servers, for example, would require that an allocated /64 be split in two /65 ranges.  2001:db8:1:0001:0000::/65 and 2001:db8:1:0001:8000::/65 would be assigned to each DHCPv6 server for allocation to clients derived from 2001:db8:1:0001::/64 prefix.</p>
<p id="rfc.section.4.1.p.2">Each DHCP server allocates IPv6 addresses from the corresponding ranges per device class. Each DHCPv6 server will be simultaneously active and operational. Address allocation is governed largely through the use of the DHCPv6 preference option, so server with higher preference value is always prefered. Additional proprietary mechanisms can be leveraged to further enforce the favoring of one DHCP server over another. Example of such scenario is presented in <a href="#example-1">Figure 1</a>.</p>
<p id="rfc.section.4.1.p.3">It is important to note that over time, it is possible that bindings may be disproportionally distributed amongst DHCPv6 servers and not any one server will be authoritative for all bindings. Per <a href="#RFC3315">[RFC3315]</a>, a DHCPv6 ADVERTISE messages with a preference option of 255 is an indicator to a DHCPv6 client to immediately begin a client-initiated message exchange by transmitting a REQUEST message. Alternatively, a DHCPv6 ADVERTISE messages with a preference option of any value lesser than 255 or is absent is an indicator to the client that it must wait for subsequent ADVERTISE messages (for a specified period of time) before proceeding.  Additionally, in the event of a DHCPv6 server failure it is desirable for a server other than the server that originally responded to be able to rebind the client. It is not critical, that the DHCPv6 server be able to rebind the client in this scenario, however, this is generally desirable behavior. Given the proposed architecture, the remaining active DHCPv6 server will have a different range configured making it technically incorrect for the same to rebind the client in its current state. Ultimately, when rebinding fails the client will acquire a new binding from the configured range unique to an active server.  Furthermore, shorter T1, T2, valid, and preferred lifetimes can be used to reduce the possibility that a client or some other element on the network will experience a disruption in service or access to relevant binding data.  The values used for T2, preferred and valid lifetime can be adjusted or configured to minimize service disruption.  Ideally T2, preferred and valid lifetimes that are equal or near equal can be used to trigger a DHCPv6 client to reacquire IPv6 address, prefix, and or configuration information almost immediately after rebinding fails.  It is important to note that shorter values will most certainly create additional load and processing for the DHCPv6 server, which must be considered.</p>
<p id="rfc.section.4.1.p.4">Using a split prefix configuration model dynamic updates to DNS can be coordinated to ensure that the DNS is properly updated with current binding information.  Challenges arise with regards to the update of PTR for IPv6 addresses since the DNS may need to be overwritten in a failure condition.  The use of a split prefixes enables the differentiation of bindings and binding timing to determine which represents the current state.  This becomes particularly important when DHCPv6 Leasequery <a href="#RFC5007">[RFC5007]</a> and/or DHCPv6 Bulk Leasequery <a href="#RFC5460">[RFC5460]</a> are leveraged to determine lease or binding state.  An additional benefit is that the use of separate ranges per DHCPv6 server makes failure conditions more obvious and detectable.</p>
<p id="rfc.section.4.1.p.5">(@todo - add more useful illustration)</p>
<div id="#rfc.figure.1"></div>
<div id="#example-1"></div>
<pre>
+----------+                 +-----------+
| Client 1 +-\            +--+ Server 1  |
+----------+  \           |  +-----------+
               \          |   
                \         |
                 \        |  
+----------+      \       |  +-----------+
| Client 2 +--------------+--| Server 2  |
+----------+      /       |  +-----------+
      .          /        .
      .         /         .  
      .        /          .
+----------+  /           .  +-----------+
| Client N +-/            .--| n+1 Server|
+----------+                 +-----------+

Server 1
========
Prefix=2001:db8:abcd:0000::/64
Range=2001:db8:abcd:5678:0000:/65
Preference=255

Server 2
========
Prefix=2001:db8:abcd:0000::/64
Range=2001:db8:abcd:5678:8000:/65
Preference=0

Server n+1
==========
Prefix, range, and preference would 
vary based on range definition

</pre>
<p>Split prefixes approach.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Multiple Unique Prefixes</h1>
<p id="rfc.section.4.2.p.1">In multiple prefix model, each DHCPv6 server is configured with a unique, non-overlapping range derived from multiple unique prefixes deployed for use within an IPv6 network.  Distribution between two servers, for example, would require that a /64 range be configured from an allocated from unique /64 prefixes. For example, the range 2001:db8:1:0001:0000::/64 would be assigned to a single DHCPv6 server for allocation to clients derived from 2001:db8:1:0001::/64 prefix, subsequently the 2001:db8:1:0001:1000::/64 from the prefix 2001:db8:1:0001:1000::/64 could be used by a second DHCP server. This would be repeated for each active DHCP server. Example of this scenario is presented in <a href="#example-2">Figure 2</a>.</p>
<p id="rfc.section.4.2.p.2">This approach uses a unique prefix and ultimately range per DHCPv6 server with corresponding prefixes configured for use in the network.  The corresponding network infrastructure must in turn be configured to use multiple prefixes on the inteface(s) facing the DHCPv6 client. The configuration is similar on all the servers, but a different prefix and a different preference is used per DHCPv6 server.</p>
<p id="rfc.section.4.2.p.3">This approach would drastically increase the rate of consumption of IPv6 prefixes and would also yield operational and management challenges related to the underlying network since a significantly higher number of prefixes would need to be configured and routed. This approach also does not provide a clean migration path to the desired solution leveraging a standards-based DHCPv6 redundancy or failover protocol, which of course has yet to be specified.</p>
<p id="rfc.section.4.2.p.4">The use of multiple unique prefixes provides benefits similar to those referred to in <a href="#split-prefixes">Section 4.1</a> related to dynamic updates to DNS.  The use of multiple unique prefixes enables the differentiation of bindings and binding timing to determine which represents the current state.  This becomes particularly important when DHCPv6 Leasequery <a href="#RFC5007">[RFC5007]</a> and/or DHCPv6 Bulk Leasequery <a href="#RFC5460">[RFC5460]</a> are leveraged to determine lease or binding state.  The use of separate prefixes and ranges per DHCPv6 server makes failure conditions more obvious and detectable.</p>
<div id="#rfc.figure.2"></div>
<div id="#example-2"></div>
<pre>
+----------+                 +-----------+
| Client 1 +-\            +--+ Server 1  |
+----------+  \           |  +-----------+
               \          |
                \         |
                 \        |
+----------+      \       |  +-----------+
| Client 2 +--------------+--| Server 2  |
+----------+      /       |  +-----------+
      .          /        .
      .         /         .
      .        /          .
+----------+  /           .  +-----------+
| Client N +-/            .--| n+1 Server|
+----------+                 +-----------+

Server 1
========
Prefix=2001:db8:abcd:0000::/64
Range=2001:db8:abcd:0000::/64
Preference=255

Server 2
========
Prefix=2001:db8:abcd:1000::/64
Range=2001:db8:abcd:1000::/64
Preference=0

Server 3
========
Prefix=2001:db8:abcd:2000::/64
Range=2001:db8:abcd:2000::/64
Preference=(&gt;0 and &lt;255)
</pre>
<p>Multiple unique prefix approach.</p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> Identical Prefixes</h1>
<p id="rfc.section.4.3.p.1">In the identical prefix model, each DHCPv6 server is configured with the same overlapping prefix and range deployed for use within an IPv6 network.  Distribution between two or more servers, for example, would require that the same /64 prefix and range be configured on all DHCP servers.  For example, the range 2001:db8:1:0001:0000::/64 would be assigned to all DHCPv6 server for allocation to clients derived from 2001:db8:1:0001::/64 prefix.  This would be repeated for each active DHCP server. Example of such scenario is presented in <a href="#example-3">Figure 3</a>.</p>
<p id="rfc.section.4.3.p.2">This approach uses the same prefix, length, and range definition across multiple DHCPv6 servers. All other configuration remaining the same the only other attribute of configuration option configured differently per DHCPv6 server would be DHCPv6 preference. This approach conceivably eases the migration of DHCPv6 services to fully support a standards based redundancy or failover protocol. Similar to the split prefix architecture described above this approach does not place any additional addressing requirements on network infrastructure.</p>
<p id="rfc.section.4.3.p.3">The use of identical prefixes provides no benefit or advantage related to dynamic DNS updates, support of DHCPv6 Leasequery <a href="#RFC5007">[RFC5007]</a> or DHCPv6 Bulk Leasequery <a href="#RFC5460">[RFC5460]</a>. In this case all DHCP servers will use the same prefix and range configurations making it less obvious that a failure condition or event has occurred.</p>
<div id="#rfc.figure.3"></div>
<div id="#example-3"></div>
<pre>
+----------+                 +-----------+
| Client 1 +-\            +--+ Server 1  |
+----------+  \           |  +-----------+
               \          |
                \         |
                 \        |
+----------+      \       |  +-----------+
| Client 2 +--------------+--| Server 2  |
+----------+      /       |  +-----------+
      .          /        .
      .         /         .
      .        /          .
+----------+  /           .  +-----------+
| Client N +-/            .--| n+1 Server|
+----------+                 +-----------+

Server 1
========
Prefix=2001:db8:abcd:0000::/64
Range=2001:db8:abcd:0000::/64
Preference=255

Server 2
========
Prefix=2001:db8:abcd:0000::/64
Range=2001:db8:abcd:0000::/64
Preference=0

Server 3
========
Prefix=2001:db8:abcd:0000::/64
Range=2001:db8:abcd:0000::/64
Preference=(&gt;0 and &lt;255)
</pre>
<p>Identical prefix approach.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Challenges and Issues</h1>
<p id="rfc.section.5.p.1">The lack of interaction between DHCPv6 servers introduces a number of challenges related to the operations of the same in a production environment. The following areas of are particular concern.</p>
<p></p>

<ul>
<li>Interactions with DNS server(s) to support the dynamic update of the same adress and prefix when one or more DHCPv6 servers have become unavailable. This specifically becomes a challenge when or if nodes that were initially granted a lease: <ol>
<li>Attempt to renew or rebind the lease originally granted, or</li>
<li>Attempt to obtain a new lease</li>
</ol>
<p> In either of the cases cited above, safeguards leveraged to prevent the deliberate or inadvertent overwriting of DNS data will likely prevent the responding DHCPv6 server from properly updating DNS with the client&#8217;s new information and or may result in stale data in DNS. Possible solutions include the following:</p>
<ul><li>The ability to configure the override and or disabling of the safeguards that prevent the over-writing of DNS data care of RFC2136, specifically, related to <a href="#RFC4701">[RFC4701]</a> and <a href="#RFC4703">[RFC4703]</a>. This behavior must specifically be supported by the DHCPv6 server. This will allow for the overwriting of existing RRs in DNS that represent the former binding for the client. As a result clients will not have multiple RRs in DNS for a client&#8217;s FQDN-to-IPv6 address mapping. Conversely, RR&#8217;s for a client&#8217;s IPv6 address-to-FQDN mapping will not be actively overwritten or deleted. Stale reverse zone data will be purged using well known DNS constructs, including but not limited to leveraging TTLs. Access control on the DNS server must be leveraged to restrict which DHCP servers may update DNS.</li></ul>
</li>
<li>Interactions with DHCPv6 servers to facilitate the acquisition of IPv6 lease data care of the DHCPv6 Leasequery <a href="#RFC5007">[RFC5007]</a> or DHCPv6 Bulk Leasequery <a href="#RFC5460">[RFC5460]</a> protocols when one or more DHCPv6 servers have become unavailable and have granted leases to DHCPv6 clients.  If IPv6 lease data is required and the granting server is unavailable it will not be possible to obtain any information about leases granted until one of the following has taken place. It is important to note that with DHCPv6 until such time that a redundancy or failover protocol is available binding updates and synchronization will not occur between DHCPv6 servers.<ol>
<li>The granting DHCPv6 server becomes available with all lease information restored</li>
<li>The client has renewed or rebound its lease against a different DHCPv6 server</li>
</ol>
</li>
</ul>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.6.p.1">IANA is not requested to assign any numbers at this time.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">Security considerations specific to the operation of the DHCPv6 protocol are created through the use of this interim architecture for DHCPv6 redundancy beyond what has been cited for Dynamic Host Configuration Protocol for IPv6 (DHCPv6) <a href="#RFC3315">[RFC3315]</a>.  There are considerations related to DNS, specifically the dynamic updating of DNS, when such models are employed. Potential opportunities are created to overwrite valid DNS resource records when provisions have been made accommodate some of the models cited in this document. In some cases this is desirable to ensure that DNS remains up to date when using one or more of these models, however, abuse of the same could result in undesirable behavior.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> Acknowledgements</h1>
<p id="rfc.section.8.p.1">Many thanks to Bernie Volz, Kim Kinnear, and Ralph Droms for their input and review.</p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC4701">[RFC4701]</b></td>
<td class="top">
<a>Stapp, M.</a>, <a>Lemon, T.</a> and <a>A. Gustafsson</a>, "<a href="http://tools.ietf.org/html/rfc4701">A DNS Resource Record (RR) for Encoding Dynamic Host Configuration Protocol (DHCP) Information (DHCID RR)</a>", RFC 4701, October 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3315">[RFC3315]</b></td>
<td class="top">
<a>Droms, R.</a>, <a>Bound, J.</a>, <a>Volz, B.</a>, <a>Lemon, T.</a>, <a>Perkins, C.</a> and <a>M. Carney</a>, "<a href="http://tools.ietf.org/html/rfc3315">Dynamic Host Configuration Protocol for IPv6 (DHCPv6)</a>", RFC 3315, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3633">[RFC3633]</b></td>
<td class="top">
<a>Troan, O.</a> and <a>R. Droms</a>, "<a href="http://tools.ietf.org/html/rfc3633">IPv6 Prefix Options for Dynamic Host Configuration Protocol (DHCP) version 6</a>", RFC 3633, December 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4703">[RFC4703]</b></td>
<td class="top">
<a>Stapp, M.</a> and <a>B. Volz</a>, "<a href="http://tools.ietf.org/html/rfc4703">Resolution of Fully Qualified Domain Name (FQDN) Conflicts among Dynamic Host Configuration Protocol (DHCP) Clients</a>", RFC 4703, October 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3736">[RFC3736]</b></td>
<td class="top">
<a>Droms, R.</a>, "<a href="http://tools.ietf.org/html/rfc3736">Stateless Dynamic Host Configuration Protocol (DHCP) Service for IPv6</a>", RFC 3736, April 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5007">[RFC5007]</b></td>
<td class="top">
<a>Brzozowski, J.</a>, <a>Kinnear, K.</a>, <a>Volz, B.</a> and <a>S. Zeng</a>, "<a href="http://tools.ietf.org/html/rfc5007">DHCPv6 Leasequery</a>", RFC 5007, September 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5460">[RFC5460]</b></td>
<td class="top">
<a>Stapp, M.</a>, "<a href="http://tools.ietf.org/html/rfc5460">DHCPv6 Bulk Leasequery</a>", RFC 5460, February 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5970">[RFC5970]</b></td>
<td class="top">
<a>Huth, T.</a>, <a>Freimann, J.</a>, <a>Zimmer, V.</a> and <a>D. Thaler</a>, "<a href="http://tools.ietf.org/html/rfc5970">DHCPv6 Options for Network Boot</a>", RFC 5970, September 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">John Jason Brzozowski</span> 
	  <span class="n hidden">
		<span class="family-name">Brzozowski</span>
	  </span>
	</span>
	<span class="org vcardline">Comcast Cable Communications</span>
	<span class="adr">
	  <span>1306 Goshen Parkway</span>

	  <span class="vcardline">
		<span class="locality">West Chester</span>,  
		<span class="region">PA</span> 
		<span class="code">19380</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1-609-377-6594</span>

<span class="vcardline">EMail: <a href="mailto:john_brzozowski@cable.comcast.com">john_brzozowski@cable.comcast.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jean-Francois Tremblay</span> 
	  <span class="n hidden">
		<span class="family-name">Tremblay</span>
	  </span>
	</span>
	<span class="org vcardline">Videotron Ltd.</span>
	<span class="adr">
	  <span>612 Saint-Jacques</span>

	  <span class="vcardline">
		<span class="locality">Montreal</span>,  
		<span class="region">Quebec</span> 
		<span class="code">H3C 4M8i</span>
	  </span>
	  <span class="country-name vcardline">Canada</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:Jean-Francois.TremblayING@videotron.com">Jean-Francois.TremblayING@videotron.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jack Chen</span> 
	  <span class="n hidden">
		<span class="family-name">Chen</span>
	  </span>
	</span>
	<span class="org vcardline">Time Warner Cable</span>
	<span class="adr">
	  <span>13820 Sunrise Valley Drive</span>

	  <span class="vcardline">
		<span class="locality">Herndon</span>,  
		<span class="region">VA</span> 
		<span class="code">20171</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jack.chen@twcable.com">jack.chen@twcable.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Tomasz Mrugalski</span> 
	  <span class="n hidden">
		<span class="family-name">Mrugalski</span>
	  </span>
	</span>
	<span class="org vcardline">Internet Systems Consortium, Inc.</span>
	<span class="adr">
	  <span>950 Charter St.</span>

	  <span class="vcardline">
		<span class="locality">Redwood City</span>,  
		<span class="region">CA</span> 
		<span class="code">94063</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1 650 423 1345</span>

<span class="vcardline">EMail: <a href="mailto:tomasz.mrugalski@gmail.com">tomasz.mrugalski@gmail.com</a></span>

  </address>
</div>

</body>
</html>