



Networking Working Group                                     L. Ginsberg
Internet-Draft                                                 P. Psenak
Intended status: Standards Track                           Cisco Systems
Expires: August 9, 2020                                       S. Previdi
                                                                  Huawei
                                                           W. Henderickx
                                                                   Nokia
                                                                J. Drake
                                                        Juniper Networks
                                                        February 6, 2020


                  IS-IS TE Attributes per application
                       draft-ietf-isis-te-app-10

Abstract

   Existing traffic engineering related link attribute advertisements
   have been defined and are used in RSVP-TE deployments.  Since the
   original RSVP-TE use case was defined, additional applications (e.g.,
   Segment Routing Traffic Engineering, Loop Free Alternate) have been
   defined which also make use of the link attribute advertisements.  In
   cases where multiple applications wish to make use of these link
   attributes the current advertisements do not support application
   specific values for a given attribute nor do they support indication
   of which applications are using the advertised value for a given
   link.  This document introduces new link attribute advertisements
   which address both of these shortcomings.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.





Ginsberg, et al.         Expires August 9, 2020                 [Page 1]

Internet-Draft           draft-ietf-isis-te-app            February 2020


   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on August 9, 2020.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3
   2.  Requirements Discussion . . . . . . . . . . . . . . . . . . .   4
   3.  Legacy Advertisements . . . . . . . . . . . . . . . . . . . .   4
     3.1.  Legacy sub-TLVs . . . . . . . . . . . . . . . . . . . . .   5
     3.2.  Legacy SRLG Advertisements  . . . . . . . . . . . . . . .   5
   4.  Advertising Application Specific Link Attributes  . . . . . .   6
     4.1.  Application Identifier Bit Mask . . . . . . . . . . . . .   6
     4.2.  Application Specific Link Attributes sub-TLV  . . . . . .   8
       4.2.1.  Special Considerations for Maximum Link Bandwidth . .   9
       4.2.2.  Special Considerations for Reservable/Unreserved
               Bandwidth . . . . . . . . . . . . . . . . . . . . . .   9
       4.2.3.  Considerations for Extended TE Metrics  . . . . . . .  10
     4.3.  Application Specific SRLG TLV . . . . . . . . . . . . . .  10
   5.  Attribute Advertisements and Enablement . . . . . . . . . . .  11
   6.  Deployment Considerations . . . . . . . . . . . . . . . . . .  12
     6.1.  Use of Legacy Advertisements  . . . . . . . . . . . . . .  12
     6.2.  Use of Zero Length Application Identifier Bit Masks . . .  13
     6.3.  Interoperability, Backwards Compatibility and Migration
           Concerns  . . . . . . . . . . . . . . . . . . . . . . . .  13
       6.3.1.  Multiple Applications: Common Attributes with  RSVP-
               TE  . . . . . . . . . . . . . . . . . . . . . . . . .  13
       6.3.2.  Multiple Applications: All Attributes Not Shared with
               RSVP-TE . . . . . . . . . . . . . . . . . . . . . . .  14
       6.3.3.  Interoperability with Legacy Routers  . . . . . . . .  14



Ginsberg, et al.         Expires August 9, 2020                 [Page 2]

Internet-Draft           draft-ietf-isis-te-app            February 2020


       6.3.4.  Use of Application Specific Advertisements for RSVP-
               TE  . . . . . . . . . . . . . . . . . . . . . . . . .  14
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  15
   8.  Security Considerations . . . . . . . . . . . . . . . . . . .  17
   9.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  17
   10. References  . . . . . . . . . . . . . . . . . . . . . . . . .  17
     10.1.  Normative References . . . . . . . . . . . . . . . . . .  17
     10.2.  Informative References . . . . . . . . . . . . . . . . .  18
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  19

1.  Introduction

   Advertisement of link attributes by the Intermediate-System-to-
   Intermediate-System (IS-IS) protocol in support of traffic
   engineering (TE) was introduced by [RFC5305] and extended by
   [RFC5307], [RFC6119], and [RFC8570].  Use of these extensions has
   been associated with deployments supporting Traffic Engineering over
   Multiprotocol Label Switching (MPLS) in the presence of the Resource
   Reservation Protocol (RSVP) - more succinctly referred to as RSVP-TE
   [RFC3209].

   For the purposes of this document an application is a technology
   which makes use of link attribute advertisements - examples of which
   are listed in Section 3.

   In recent years new applications have been introduced which have use
   cases for many of the link attributes historically used by RSVP-TE.
   Such applications include Segment Routing Traffic Engineering (SRTE)
   [RFC8402] and Loop Free Alternates (LFA) [RFC5286].  This has
   introduced ambiguity in that if a deployment includes a mix of RSVP-
   TE support and SRTE support (for example) it is not possible to
   unambiguously indicate which advertisements are to be used by RSVP-TE
   and which advertisements are to be used by SRTE.  If the topologies
   are fully congruent this may not be an issue, but any incongruence
   leads to ambiguity.

   An additional issue arises in cases where both applications are
   supported on a link but the link attribute values associated with
   each application differ.  Current advertisements do not support
   advertising application specific values for the same attribute on a
   specific link.

   This document defines extensions which address these issues.  Also,
   as evolution of use cases for link attributes can be expected to
   continue in the years to come, this document defines a solution which
   is easily extensible to the introduction of new applications and new
   use cases.




Ginsberg, et al.         Expires August 9, 2020                 [Page 3]

Internet-Draft           draft-ietf-isis-te-app            February 2020


2.  Requirements Discussion

   As stated previously, evolution of use cases for link attributes can
   be expected to continue - so any discussion of existing use cases is
   limited to requirements which are known at the time of this writing.
   However, in order to determine the functionality required beyond what
   already exists in IS-IS, it is only necessary to discuss use cases
   which justify the key points identified in the introduction - which
   are:

   1.  Support for indicating which applications are using the link
       attribute advertisements on a link

   2.  Support for advertising application specific values for the same
       attribute on a link

   [RFC7855] discusses use cases/requirements for SR.  Included among
   these use cases is SRTE which is defined in
   [I-D.ietf-spring-segment-routing-policy].  If both RSVP-TE and SRTE
   are deployed in a network, link attribute advertisements can be used
   by one or both of these applications.  As there is no requirement for
   the link attributes advertised on a given link used by SRTE to be
   identical to the link attributes advertised on that same link used by
   RSVP-TE, there is a clear requirement to indicate independently which
   link attribute advertisements are to be used by each application.

   As the number of applications which may wish to utilize link
   attributes may grow in the future, an additional requirement is that
   the extensions defined allow the association of additional
   applications to link attributes without altering the format of the
   advertisements or introducing new backwards compatibility issues.

   Finally, there may still be many cases where a single attribute value
   can be shared among multiple applications, so the solution must
   minimize advertising duplicate link/attribute pairs whenever
   possible.

3.  Legacy Advertisements

   There are existing advertisements used in support of RSVP-TE.  These
   advertisements include sub-TLVs for TLVs 22, 23, 25, 141, 222, and
   223 and TLVs for Shared Risk Link Group(SRLG) advertisement.

   Sub-TLV values are defined in https://www.iana.org/assignments/isis-
   tlv-codepoints/isis-tlv-codepoints.xhtml#isis-tlv-codepoints-
   22-23-25-141-222-223 and https://www.iana.org/assignments/isis-tlv-
   codepoints/isis-tlv-codepoints.xhtml .




Ginsberg, et al.         Expires August 9, 2020                 [Page 4]

Internet-Draft           draft-ietf-isis-te-app            February 2020


3.1.  Legacy sub-TLVs

   Sub-TLVs for TLVs 22, 23, 25, 141, 222, and 223

        +-------------------------------------------+
        | Type | Description                        |
        +-------------------------------------------+
        |   3  | Administrative group (color)       |
        +-------------------------------------------+
        |   9  | Maximum link bandwidth             |
        +-------------------------------------------+
        |  10  | Maximum reservable link bandwidth  |
        +-------------------------------------------+
        |  11  | Unreserved bandwidth               |
        +-------------------------------------------+
        |  14  | Extended Administrative Group      |
        +-------------------------------------------+
        |  18  | TE Default Metric                  |
        +-------------------------------------------+
        |  33  | Unidirectional Link Delay          |
        +-------------------------------------------+
        |  34  | Min/Max Unidirectional Link Delay  |
        +-------------------------------------------+
        |  35  | Unidirectional Delay Variation     |
        +-------------------------------------------+
        |  36  | Unidirectional Link Loss           |
        +-------------------------------------------+
        |  37  | Unidirectional Residual Bandwidth  |
        +-------------------------------------------+
        |  38  | Unidirectional Available Bandwidth |
        +-------------------------------------------+
        |  39  | Unidirectional Utilized Bandwidth  |
        +-------------------------------------------+


3.2.  Legacy SRLG Advertisements

   TLV 138 GMPLS-SRLG
     Supports links identified by IPv4 addresses and
     unnumbered links

   TLV 139 IPv6 SRLG
     Supports links identified by IPv6 addresses


   Note that [RFC6119] prohibits the use of TLV 139 when it is possible
   to use TLV 138.




Ginsberg, et al.         Expires August 9, 2020                 [Page 5]

Internet-Draft           draft-ietf-isis-te-app            February 2020


4.  Advertising Application Specific Link Attributes

   Two new code points are defined in support of Application Specific
   Link Attribute Advertisements:

   1) Application Specific Link Attributes sub-TLV for TLVs 22, 23, 25,
   141, 222, and 223 (defined in Section 4.2 ).

   2)Application Specific Shared Risk Link Group (SRLG) TLV (defined in
   Section 4.3).

   In support of these new advertisements, an application identifier bit
   mask is defined which identifies the application(s) associated with a
   given advertisement (defined in Section 4.1).

   The following sections define the format of these new advertisements.

4.1.  Application Identifier Bit Mask

   Identification of the set of applications associated with link
   attribute advertisements utilizes two bit masks.  One bit mask is for
   standard applications where the definition of each bit is defined in
   a new IANA controlled registry.  A second bit mask is for non-
   standard User Defined Applications (UDAs).

   The encoding defined below is used by both the Application Specific
   Link Attributes sub-TLV and the Application Specific SRLG TLV.

    0  1  2  3  4  5  6  7
   +--+--+--+--+--+--+--+--+
   | SABM Length + Flag    |  1 octet
   +--+--+--+--+--+--+--+--+
   | UDABM Length + Flag   |  1 octet
   +--+--+--+--+--+--+--+--+
   |   SABM         ...       0 - 127 octets
   +--+--+--+--+--+--+--+--+
   |   UDABM        ...       0 - 127 octets
   +--+--+--+--+--+--+--+--+

   SABM Length + Flag (1 octet)
       Standard Application Identifier Bit Mask
        Length + Flag

             0 1 2 3 4 5 6 7
            +-+-+-+-+-+-+-+-+
            |L| SABM Length |
            +-+-+-+-+-+-+-+-+




Ginsberg, et al.         Expires August 9, 2020                 [Page 6]

Internet-Draft           draft-ietf-isis-te-app            February 2020


      L-flag: Legacy Flag.
       See the following section for a description of how
       this flag is used.

      SABM Length: Indicates the length in octets (0-127) of the
       Standard Application Identifier Bit Mask. The length SHOULD
       be the minimum required to send all bits which are set.

   UDABM Length + Flag (1 octet)
       User Defined Application Identifier Bit Mask
        Length + Flag

             0 1 2 3 4 5 6 7
            +-+-+-+-+-+-+-+-+
            |R| UDABM Length|
            +-+-+-+-+-+-+-+-+

      R: Reserved. SHOULD be transmitted as 0 and
       MUST be ignored on receipt

      UDABM Length: Indicates the length in octets (0-127) of the
       User Defined Application Identifier Bit Mask. The length SHOULD
       be the minimum required to send all bits which are set.

   SABM  (variable length)
      Standard Application Identifier Bit Mask

      (SABM Length * 8) bits

      This field is omitted if SABM Length is 0.


             0 1 2 3 4 5 6 7 ...
            +-+-+-+-+-+-+-+-+...
            |R|S|F|          ...
            +-+-+-+-+-+-+-+-+...


         R-bit: Set to specify RSVP-TE

         S-bit: Set to specify Segment Routing
          Traffic Engineering (SRTE)

         F-bit: Set to specify Loop Free Alternate (LFA)
          (includes all LFA types)

    UDABM  (variable length)
      User Defined Application Identifier Bit Mask



Ginsberg, et al.         Expires August 9, 2020                 [Page 7]

Internet-Draft           draft-ietf-isis-te-app            February 2020


      (UDABM Length * 8) bits

             0 1 2 3 4 5 6 7 ...
            +-+-+-+-+-+-+-+-+...
            |                ...
            +-+-+-+-+-+-+-+-+...

      This field is omitted if UDABM Length is 0.


   Standard Application Identifier Bits are defined/sent starting with
   Bit 0.  Undefined bits MUST be transmitted as 0 and MUST be ignored
   on receipt.  Bits that are NOT transmitted MUST be treated as if they
   are set to 0 on receipt.  Bits that are not supported by an
   implementation MUST be ignored on receipt.

   User Defined Application Identifier Bits have no relationship to
   Standard Application Identifier Bits and are NOT managed by IANA or
   any other standards body.  It is recommended that bits are used
   starting with Bit 0 so as to minimize the number of octets required
   to advertise all UDAs.

4.2.  Application Specific Link Attributes sub-TLV

   A new sub-TLV for TLVs 22, 23, 25, 141, 222, and 223 is defined which
   supports specification of the applications and application specific
   attribute values.

      Type: 16 (temporarily assigned by IANA)
      Length: Variable (1 octet)
      Value:

        Application Identifier Bit Mask
        (as defined in Section 4.1)

        Link Attribute sub-sub-TLVs - format matches the
        existing formats defined in [RFC5305] and [RFC8570]

   When the L-flag is set in the Application Identifier Bit Mask, all of
   the applications specified in the bit mask MUST use the legacy
   advertisements for the corresponding link found in TLVs 22, 23, 25,
   141, 222, and 223 or TLV 138 or TLV 139 as appropriate.  Link
   attribute sub-sub-TLVs for the corresponding link attributes MUST NOT
   be advertised for the set of applications specified in the Standard/
   User Application Identifier Bit Masks and all such advertisements
   MUST be ignored on receipt.





Ginsberg, et al.         Expires August 9, 2020                 [Page 8]

Internet-Draft           draft-ietf-isis-te-app            February 2020


   Multiple Application Specific Link Attribute sub-TLVs for the same
   link MAY be advertised.  When multiple sub-TLVs for the same link are
   advertised, they SHOULD advertise non-conflicting application/
   attribute pairs.  A conflict exists when the same application is
   associated with two different values of the same link attribute for a
   given link.  In cases where conflicting values for the same
   application/attribute/link are advertised all the conflicting values
   MUST be ignored.

   For a given application, the setting of the L-flag MUST be the same
   in all sub-TLVs for a given link.  In cases where this constraint is
   violated, the L-flag MUST be considered set for this application.

   A new registry of sub-sub-TLVs is to be created by IANA which defines
   the link attribute sub-sub-TLV code points.  This document defines a
   sub-sub-TLV for each of the existing sub-TLVs listed in Section 3.1
   except as noted below.  The format of the sub-sub-TLVs matches the
   format of the corresponding legacy sub-TLV and IANA is requested to
   assign the legacy sub-TLV identifier to the corresponding sub-sub-
   TLV.

4.2.1.  Special Considerations for Maximum Link Bandwidth

   Maximum link bandwidth is an application independent attribute of the
   link.  When advertised using the Application Specific Link Attributes
   sub-TLV, multiple values for the same link MUST NOT be advertised.
   This can be accomplished most efficiently by having a single
   advertisement for a given link where the Application Identifier Bit
   Mask identifies all the applications which are making use of the
   value for that link.

   It is also possible to advertise the same value for a given link
   multiple times with disjoint sets of applications specified in the
   Application Identifier Bit Mask.  This is less efficient but still
   valid.

   If different values for Maximum Link Bandwidth for a given link are
   advertised, all values MUST be ignored.

4.2.2.  Special Considerations for Reservable/Unreserved Bandwidth

   Maximum Reservable Link Bandwidth and Unreserved Bandwidth are
   attributes specific to RSVP-TE.  When advertised using the
   Application Specific Link Attributes sub-TLV, bits other than the
   RSVP-TE (R-bit) MUST NOT be set in the Application Identifier Bit
   Mask.  If an advertisement of Maximum Reservable Link Bandwidth or
   Unreserved Bandwidth is received with bits other than the RSVP-TE bit
   set, the advertisement MUST be ignored.



Ginsberg, et al.         Expires August 9, 2020                 [Page 9]

Internet-Draft           draft-ietf-isis-te-app            February 2020


4.2.3.  Considerations for Extended TE Metrics

   [RFC8570] defines a number of dynamic performance metrics associated
   with a link.  It is conceivable that such metrics could be measured
   specific to traffic associated with a specific application.
   Therefore this document includes support for advertising these link
   attributes specific to a given application.  However, in practice it
   may well be more practical to have these metrics reflect the
   performance of all traffic on the link regardless of application.  In
   such cases, advertisements for these attributes will be associated
   with all of the applications utilizing that link.

4.3.  Application Specific SRLG TLV

   A new TLV is defined to advertise application specific SRLGs for a
   given link.  Although similar in functionality to TLV 138 [RFC5307]
   and TLV 139 [RFC6119], a single TLV provides support for IPv4, IPv6,
   and unnumbered identifiers for a link.  Unlike TLVs 138/139, it
   utilizes sub-TLVs to encode the link identifiers in order to provide
   the flexible formatting required to support multiple link identifier
   types.

       Type: 238 (Temporarily assigned by IANA)
       Length: Number of octets in the value field (1 octet)
       Value:
         Neighbor System-ID + pseudo-node ID (7 octets)
         Application Identifier Bit Mask
          (as defined in Section 4.1)
         Length of sub-TLVs (1 octet)
         Link Identifier sub-TLVs (variable)
         0 or more SRLG Values (Each value is 4 octets)

       The following Link Identifier sub-TLVs are defined.
       The values chosen are intentionally matching the equivalent
       sub-TLVs from [RFC5305], [RFC5307], and [RFC6119].

       Type    Description
        4      Link Local/Remote Identifiers [RFC5307]
        6      IPv4 interface address [RFC5305]
        8      IPv4 neighbor address [RFC5305]
       12      IPv6 Interface Address [RFC6119]
       13      IPv6 Neighbor Address [RFC6119]

   At least one set of link identifiers (IPv4, IPv6, or Link Local/
   Remote) MUST be present.  TLVs which do not meet this requirement
   MUST be ignored.

   Multiple TLVs for the same link MAY be advertised.



Ginsberg, et al.         Expires August 9, 2020                [Page 10]

Internet-Draft           draft-ietf-isis-te-app            February 2020


   When the L-flag is set in the Application Identifier Bit Mask, SRLG
   values MUST NOT be included in the TLV.  Any SRLG values which are
   advertised MUST be ignored.  Based on the link identifiers advertised
   the corresponding legacy TLV (see Section 3.2) can be identified and
   the SRLG values advertised in the legacy TLV MUST be used by the set
   of applications specified in the Application Identifier Bit Mask.

   For a given application, the setting of the L-flag MUST be the same
   in all TLVs for a given link.  In cases where this constraint is
   violated, the L-flag MUST be considered set for this application.

5.  Attribute Advertisements and Enablement

   This document defines extensions to support the advertisement of
   application specific link attributes.

   Whether the presence of link attribute advertisements for a given
   application indicates that the application is enabled on that link
   depends upon the application.  Similarly, whether the absence of link
   attribute advertisements indicates that the application is not
   enabled depends upon the application.

   In the case of RSVP-TE, the advertisement of application specific
   link attributes implies that RSVP is enabled on that link.  The
   absence of RSVP-TE application specific link attributes in
   combination with the absence of legacy advertisements implies that
   RSVP is NOT enabled on that link.

   In the case of SRTE, advertisement of application specific link
   attributes does NOT indicate enablement of SRTE.  The advertisements
   are only used to support constraints which may be applied when
   specifying an explicit path.  SRTE is implicitly enabled on all links
   which are part of the Segment Routing enabled topology independent of
   the existence of link attribute advertisements

   In the case of LFA, advertisement of application specific link
   attributes does NOT indicate enablement of LFA on that link.
   Enablement is controlled by local configuration.

   If, in the future, additional standard applications are defined to
   use this mechanism, the specification defining this use MUST define
   the relationship between application specific link attribute
   advertisements and enablement for that application.

   This document allows the advertisement of application specific link
   attributes with no application identifiers i.e., both the Standard
   Application Identifier Bit Mask and the User Defined Application
   Identifier Bit Mask are not present (See Section 4.1).  This supports



Ginsberg, et al.         Expires August 9, 2020                [Page 11]

Internet-Draft           draft-ietf-isis-te-app            February 2020


   the use of the link attribute by any application.  In the presence of
   an application where the advertisement of link attribute
   advertisements is used to infer the enablement of an application on
   that link (e.g., RSVP-TE), the absence of the application identifier
   leaves ambiguous whether that application is enabled on such a link.
   This needs to be considered when making use of the "any application"
   encoding.

6.  Deployment Considerations

   This section discuss deployment considerations associated with the
   use of application specific link attribute advertisements.

6.1.  Use of Legacy Advertisements

   Bit Identifiers for Standard Applications are defined in Section 4.1.
   All of the identifiers defined in this document are associated with
   applications which were already deployed in some networks prior to
   the writing of this document.  Therefore, such applications have been
   deployed using the legacy advertisements.  The Standard Applications
   defined in this document may continue to use legacy advertisements
   for a given link so long as at least one of the following conditions
   is true:

   o  The application is RSVP-TE

   o  The application is SRTE or LFA and RSVP-TE is not deployed
      anywhere in the network

   o  The application is SRTE or LFA, RSVP-TE is deployed in the
      network, and both the set of links on which SRTE and/or LFA
      advertisements are required and the attribute values used by SRTE
      and/or LFA on all such links is fully congruent with the links and
      attribute values used by RSVP-TE

   Under the conditions defined above, implementations which support the
   extensions defined in this document have the choice of using legacy
   advertisements or application specific advertisements in support of
   SRTE and/or LFA.  This will require implementations to provide
   controls specifying which type of advertisements are to be sent/
   processed on receive for these applications.  Further discussion of
   the associated issues can be found in Section 6.3.

   New applications which future documents define to make use of the
   advertisements defined in this document MUST NOT make use of legacy
   advertisements.  This simplifies deployment of new applications by
   eliminating the need to support multiple ways to advertise attributes
   for the new applications.



Ginsberg, et al.         Expires August 9, 2020                [Page 12]

Internet-Draft           draft-ietf-isis-te-app            February 2020


6.2.  Use of Zero Length Application Identifier Bit Masks

   If link attributes are advertised associated with zero length
   Application Identifier Bit Masks for both standard applications and
   user defined applications, then any Standard Application and/or any
   User Defined Application is permitted to use that set of link
   attributes so long as there is not another set of attributes
   advertised on that same link which is associated with a non-zero
   length Application Identifier Bit Mask with a matching Application
   Identifier Bit set.  If support for a new application is introduced
   on any node in a network in the presence of such advertisements,
   these advertisements are permitted to be used by the new application.
   If this is not what is intended, then existing advertisements MUST be
   readvertised with an explicit set of applications specified before a
   new application is introduced.

6.3.  Interoperability, Backwards Compatibility and Migration Concerns

   Existing deployments of RSVP-TE, SRTE, and/or LFA utilize the legacy
   advertisements listed in Section 3.  Routers which do not support the
   extensions defined in this document will only process legacy
   advertisements and are likely to infer that RSVP-TE is enabled on the
   links for which legacy advertisements exist.  It is expected that
   deployments using the legacy advertisements will persist for a
   significant period of time.  Therefore deployments using the
   extensions defined in this document must be able to co-exist with use
   of the legacy advertisements by routers which do not support the
   extensions defined in this document.  The following sub-sections
   discuss interoperability and backwards compatibility concerns for a
   number of deployment scenarios.

   Note that in all cases the defined strategy can be employed on a per
   link basis.

6.3.1.  Multiple Applications: Common Attributes with RSVP-TE

   In cases where multiple applications are utilizing a given link, one
   of the applications is RSVP-TE, and all link attributes for a given
   link are common to the set of applications utilizing that link,
   interoperability is achieved by using legacy advertisements and
   sending application specific advertisements with L-flag set and no
   link attribute values.  This avoids duplication of link attribute
   advertisements.








Ginsberg, et al.         Expires August 9, 2020                [Page 13]

Internet-Draft           draft-ietf-isis-te-app            February 2020


6.3.2.  Multiple Applications: All Attributes Not Shared with RSVP-TE

   In cases where one or more applications other than RSVP-TE are
   utilizing a given link and one or more link attribute values are NOT
   shared with RSVP-TE, it is necessary to use application specific
   advertisements as defined in this document.  Attributes for
   applications other than RSVP-TE MUST be advertised using application
   specific advertisements which have the L-flag clear.  In cases where
   some link attributes are shared with RSVP-TE, this requires duplicate
   advertisements for those attributes.

   The discussion in this section applies to cases where RSVP-TE is NOT
   using any advertised attributes on a link and to cases where RSVP-TE
   is using some link attribute advertisements on the link but some link
   attributes cannot be shared with RSVP-TE.

6.3.3.  Interoperability with Legacy Routers

   For the applications defined in this document, routers which do not
   support the extensions defined in this document will send and receive
   only legacy link attribute advertisements.  So long as there is any
   legacy router in the network which has any of the applications
   enabled, all routers MUST continue to advertise link attributes using
   legacy advertisements.  Once all legacy routers have been upgraded,
   migration from legacy advertisements to application specific
   advertisements can be achieved via the following steps:

   1)Send application specific advertisements while continuing to
   advertise using legacy (all advertisements are then duplicated).
   Receiving routers continue to use legacy advertisements.

   2)Enable the use of the application specific advertisements on all
   routers

   3)Remove legacy advertisements

6.3.4.  Use of Application Specific Advertisements for RSVP-TE

   The extensions defined in this document support RSVP-TE as one of the
   supported applications.  This allows that RSVP-TE could eventually
   utilize the application specific advertisements.  This can be done in
   the following step-wise manner:

   1)Upgrade all routers to support the extensions in this document

   2)Advertise all legacy link attributes using application specific
   advertisements with L-flag clear and R-bit set.




Ginsberg, et al.         Expires August 9, 2020                [Page 14]

Internet-Draft           draft-ietf-isis-te-app            February 2020


   3)Remove legacy advertisements

   Migrating RSVP-TE away from legacy advertisements could result in
   some implementation simplification as it allows the removal of code
   which encodes/decodes the legacy advertisements.  Whether this is
   seen as desirable is something for the marketplace to determine.

7.  IANA Considerations

   This document defines a new sub-TLV for TLVs 22, 23, 25, 141, 222,
   and 223.

    Type  Description             22   23   25  141  222  223
    ----  ---------------------  ---- ---- ---- ---- ---- ----
     16   Application Specific     y    y  y(s)   y    y    y
           Link Attributes

   This document defines one new TLV:

    Type  Description             IIH LSP SNP Purge
    ----  ---------------------   --- --- --- -----
     238  Application Specific     n   y   n    n
           SRLG

   This document requests a new IANA registry be created to control the
   assignment of sub-sub-TLV codepoints for the Application Specific
   Link Attributes sub-TLV.  The suggested name of the new registry is
   "sub-sub-TLV code points for application specific link attributes".
   The registration procedure is "Expert Review" as defined in
   [RFC8126].  The following assignments are made by this document:





















Ginsberg, et al.         Expires August 9, 2020                [Page 15]

Internet-Draft           draft-ietf-isis-te-app            February 2020


    Type   Description
   ---------------------------------------------------------
    0-2    Unassigned
    3      Administrative group (color)
    4-8    Unassigned
    9      Maximum link bandwidth
   10      Maximum reservable link bandwidth
   11      Unreserved bandwidth
   12-13   Unassigned
   14      Extended Administrative Group
   15-17   Unassigned
   18      TE Default Metric
   19-32   Unassigned
   33      Unidirectional Link Delay
   34      Min/Max Unidirectional Link Delay
   35      Unidirectional Delay Variation
   36      Unidirectional Link Loss
   37      Unidirectional Residual Bandwidth
   38      Unidirectional Available Bandwidth
   39      Unidirectional Utilized Bandwidth
   40-255  Unassigned

   Note to designated experts: If a link attribute can be advertised
   both as a sub-TLV of TLVs 22, 23, 25, 141, 222, and 223 and as a sub-
   sub-TLV of the Application Specific Link Attributes sub-TLV defined
   in this document, then the same numerical code should be assigned to
   the link attribute whenever possible.

   This document requests a new IANA registry be created, under the
   category of "Interior Gateway Protocol (IGP) Parameters", to control
   the assignment of Application Identifier Bits.  The suggested name of
   the new registry is "Link Attribute Applications".  The registration
   policy for this registry is "Standards Action" ([RFC8126] and
   [RFC7120]).  Bit definitions SHOULD be assigned in ascending bit
   order beginning with Bit 0 so as to minimize the number of octets
   that will need to be transmitted.  The following assignments are made
   by this document:

    Bit #   Name
   ---------------------------------------------------------
     0      RSVP-TE (R-bit)
     1      Segment Routing Traffic Engineering (S-bit)
     2      Loop Free Alternate (F-bit)

   This document requests a new IANA registry be created to control the
   assignment of sub-TLV types for the application specific SRLG TLV.
   The suggested name of the new registry is "Sub-TLVs for TLV 238".




Ginsberg, et al.         Expires August 9, 2020                [Page 16]

Internet-Draft           draft-ietf-isis-te-app            February 2020


   The registration procedure is "Expert Review" as defined in
   [RFC8126].  The following assignments are made by this document:

    Value    Description
    ---------------------------------------------------------
     0-3     Unassigned
      4      Link Local/Remote Identifiers (see [RFC5307])
      5      Unassigned
      6      IPv4 interface address (see [RFC5305])
      7      Unassigned
      8      IPv4 neighbor address (see [RFC5305])
     9-11    Unassigned
     12      IPv6 Interface Address (see [RFC6119])
     13      IPv6 Neighbor Address (see [RFC6119])
    14-255   Unassigned

8.  Security Considerations

   Security concerns for IS-IS are addressed in [ISO10589, [RFC5304],
   and [RFC5310].

9.  Acknowledgements

   The authors would like to thank Eric Rosen and Acee Lindem for their
   careful review and content suggestions.

10.  References

10.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC5304]  Li, T. and R. Atkinson, "IS-IS Cryptographic
              Authentication", RFC 5304, DOI 10.17487/RFC5304, October
              2008, <https://www.rfc-editor.org/info/rfc5304>.

   [RFC5305]  Li, T. and H. Smit, "IS-IS Extensions for Traffic
              Engineering", RFC 5305, DOI 10.17487/RFC5305, October
              2008, <https://www.rfc-editor.org/info/rfc5305>.

   [RFC5307]  Kompella, K., Ed. and Y. Rekhter, Ed., "IS-IS Extensions
              in Support of Generalized Multi-Protocol Label Switching
              (GMPLS)", RFC 5307, DOI 10.17487/RFC5307, October 2008,
              <https://www.rfc-editor.org/info/rfc5307>.




Ginsberg, et al.         Expires August 9, 2020                [Page 17]

Internet-Draft           draft-ietf-isis-te-app            February 2020


   [RFC5310]  Bhatia, M., Manral, V., Li, T., Atkinson, R., White, R.,
              and M. Fanto, "IS-IS Generic Cryptographic
              Authentication", RFC 5310, DOI 10.17487/RFC5310, February
              2009, <https://www.rfc-editor.org/info/rfc5310>.

   [RFC6119]  Harrison, J., Berger, J., and M. Bartlett, "IPv6 Traffic
              Engineering in IS-IS", RFC 6119, DOI 10.17487/RFC6119,
              February 2011, <https://www.rfc-editor.org/info/rfc6119>.

   [RFC7120]  Cotton, M., "Early IANA Allocation of Standards Track Code
              Points", BCP 100, RFC 7120, DOI 10.17487/RFC7120, January
              2014, <https://www.rfc-editor.org/info/rfc7120>.

   [RFC8126]  Cotton, M., Leiba, B., and T. Narten, "Guidelines for
              Writing an IANA Considerations Section in RFCs", BCP 26,
              RFC 8126, DOI 10.17487/RFC8126, June 2017,
              <https://www.rfc-editor.org/info/rfc8126>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8570]  Ginsberg, L., Ed., Previdi, S., Ed., Giacalone, S., Ward,
              D., Drake, J., and Q. Wu, "IS-IS Traffic Engineering (TE)
              Metric Extensions", RFC 8570, DOI 10.17487/RFC8570, March
              2019, <https://www.rfc-editor.org/info/rfc8570>.

10.2.  Informative References

   [I-D.ietf-spring-segment-routing-policy]
              Filsfils, C., Sivabalan, S., Voyer, D., Bogdanov, A., and
              P. Mattes, "Segment Routing Policy Architecture", draft-
              ietf-spring-segment-routing-policy-06 (work in progress),
              December 2019.

   [RFC3209]  Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan, V.,
              and G. Swallow, "RSVP-TE: Extensions to RSVP for LSP
              Tunnels", RFC 3209, DOI 10.17487/RFC3209, December 2001,
              <https://www.rfc-editor.org/info/rfc3209>.

   [RFC5286]  Atlas, A., Ed. and A. Zinin, Ed., "Basic Specification for
              IP Fast Reroute: Loop-Free Alternates", RFC 5286,
              DOI 10.17487/RFC5286, September 2008,
              <https://www.rfc-editor.org/info/rfc5286>.







Ginsberg, et al.         Expires August 9, 2020                [Page 18]

Internet-Draft           draft-ietf-isis-te-app            February 2020


   [RFC7855]  Previdi, S., Ed., Filsfils, C., Ed., Decraene, B.,
              Litkowski, S., Horneffer, M., and R. Shakir, "Source
              Packet Routing in Networking (SPRING) Problem Statement
              and Requirements", RFC 7855, DOI 10.17487/RFC7855, May
              2016, <https://www.rfc-editor.org/info/rfc7855>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

Authors' Addresses

   Les Ginsberg
   Cisco Systems
   821 Alder Drive
   Milpitas, CA  95035
   USA

   Email: ginsberg@cisco.com


   Peter Psenak
   Cisco Systems
   Apollo Business Center Mlynske nivy 43
   Bratislava  821 09
   Slovakia

   Email: ppsenak@cisco.com


   Stefano Previdi
   Huawei

   Email: stefano@previdi.net


   Wim Henderickx
   Nokia
   Copernicuslaan 50
   Antwerp  2018 94089
   Belgium

   Email: wim.henderickx@nokia.com







Ginsberg, et al.         Expires August 9, 2020                [Page 19]

Internet-Draft           draft-ietf-isis-te-app            February 2020


   John Drake
   Juniper Networks

   Email: jdrake@juniper.net















































Ginsberg, et al.         Expires August 9, 2020                [Page 20]
