<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>An Abstract Application Layer Interface to Transport Services</title>
<meta content="Brian Trammell" name="author">
<meta content="Michael Welzl" name="author">
<meta content="Theresa Enghardt" name="author">
<meta content="Godred Fairhurst" name="author">
<meta content="Mirja Kuehlewind" name="author">
<meta content="Colin Perkins" name="author">
<meta content="Philipp S. Tiesel" name="author">
<meta content="Chris Wood" name="author">
<meta content="Tommy Pauly" name="author">
<meta content="
       This document describes an abstract programming interface to the transport
layer, following the Transport Services Architecture. It supports the
asynchronous, atomic transmission of messages over transport protocols and
network paths dynamically selected at runtime. It is intended to replace the
traditional BSD sockets API as the lowest common denominator interface to the
transport layer, in an environment where endpoints have multiple interfaces
and potential transport protocols to select from. 
    " name="description">
<meta content="xml2rfc 2.40.1" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-ietf-taps-interface-06" name="ietf.draft">
<link href="/tmp/draft-ietf-taps-interface-06-ku55xwqb.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Avoid wrapping of URLs in references */
@media screen {
  .references a {
    white-space: nowrap;
  }
}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin: 0 0 0.25em 0;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/*
  The margin-left: 0 on <dd> removes all distinction
  between levels from nested <dl>s.  Undo that.
*/
dl.olPercent > dd,
dd {
  margin-left: revert;
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">TAPS Interface</td>
<td class="right">March 2020</td>
</tr></thead>
<tfoot><tr>
<td class="left">Trammell, et al.</td>
<td class="center">Expires 10 September 2020</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">TAPS Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-taps-interface-06</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2020-03-09" class="published">9 March 2020</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2020-09-10">10 September 2020</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">B. Trammell, <span class="editor">Ed.</span>
</div>
<div class="org">Google</div>
</div>
<div class="author">
      <div class="author-name">M. Welzl, <span class="editor">Ed.</span>
</div>
<div class="org">University of Oslo</div>
</div>
<div class="author">
      <div class="author-name">T. Enghardt</div>
<div class="org">TU Berlin</div>
</div>
<div class="author">
      <div class="author-name">G. Fairhurst</div>
<div class="org">University of Aberdeen</div>
</div>
<div class="author">
      <div class="author-name">M. Kuehlewind</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">C. Perkins</div>
<div class="org">University of Glasgow</div>
</div>
<div class="author">
      <div class="author-name">P. Tiesel</div>
<div class="org">TU Berlin</div>
</div>
<div class="author">
      <div class="author-name">C. Wood</div>
<div class="org">Apple Inc.</div>
</div>
<div class="author">
      <div class="author-name">T. Pauly</div>
<div class="org">Apple Inc.</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">An Abstract Application Layer Interface to Transport Services</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document describes an abstract programming interface to the transport
layer, following the Transport Services Architecture. It supports the
asynchronous, atomic transmission of messages over transport protocols and
network paths dynamically selected at runtime. It is intended to replace the
traditional BSD sockets API as the lowest common denominator interface to the
transport layer, in an environment where endpoints have multiple interfaces
and potential transport protocols to select from.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 10 September 2020.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2020 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology-and-notation" class="xref">Terminology and Notation</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-overview-of-interface-desig" class="xref">Overview of Interface Design</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-api-summary" class="xref">API Summary</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-usage-examples" class="xref">Usage Examples</a><a href="#section-toc.1-1.4.2.1.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a href="#section-4.1.1" class="xref">4.1.1</a>.  <a href="#name-server-example" class="xref">Server Example</a><a href="#section-toc.1-1.4.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1.2.2">
                    <p id="section-toc.1-1.4.2.1.2.2.1"><a href="#section-4.1.2" class="xref">4.1.2</a>.  <a href="#name-client-example" class="xref">Client Example</a><a href="#section-toc.1-1.4.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1.2.3">
                    <p id="section-toc.1-1.4.2.1.2.3.1"><a href="#section-4.1.3" class="xref">4.1.3</a>.  <a href="#name-peer-example" class="xref">Peer Example</a><a href="#section-toc.1-1.4.2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-transport-properties" class="xref">Transport Properties</a><a href="#section-toc.1-1.4.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a href="#section-4.2.1" class="xref">4.2.1</a>.  <a href="#name-transport-property-names" class="xref">Transport Property Names</a><a href="#section-toc.1-1.4.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a href="#section-4.2.2" class="xref">4.2.2</a>.  <a href="#name-transport-property-types" class="xref">Transport Property Types</a><a href="#section-toc.1-1.4.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-scope-of-the-interface-defi" class="xref">Scope of the Interface Definition</a><a href="#section-toc.1-1.4.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-pre-establishment-phase" class="xref">Pre-Establishment Phase</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-specifying-endpoints" class="xref">Specifying Endpoints</a><a href="#section-toc.1-1.5.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-specifying-transport-proper" class="xref">Specifying Transport Properties</a><a href="#section-toc.1-1.5.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.1">
                    <p id="section-toc.1-1.5.2.2.2.1.1"><a href="#section-5.2.1" class="xref">5.2.1</a>.  <a href="#name-reliable-data-transfer-conn" class="xref">Reliable Data Transfer (Connection)</a><a href="#section-toc.1-1.5.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.2">
                    <p id="section-toc.1-1.5.2.2.2.2.1"><a href="#section-5.2.2" class="xref">5.2.2</a>.  <a href="#name-preservation-of-message-bou" class="xref">Preservation of Message Boundaries</a><a href="#section-toc.1-1.5.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.3">
                    <p id="section-toc.1-1.5.2.2.2.3.1"><a href="#section-5.2.3" class="xref">5.2.3</a>.  <a href="#name-configure-per-message-relia" class="xref">Configure Per-Message Reliability</a><a href="#section-toc.1-1.5.2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.4">
                    <p id="section-toc.1-1.5.2.2.2.4.1"><a href="#section-5.2.4" class="xref">5.2.4</a>.  <a href="#name-preservation-of-data-orderi" class="xref">Preservation of Data Ordering</a><a href="#section-toc.1-1.5.2.2.2.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.5">
                    <p id="section-toc.1-1.5.2.2.2.5.1"><a href="#section-5.2.5" class="xref">5.2.5</a>.  <a href="#name-use-0-rtt-session-establish" class="xref">Use 0-RTT Session Establishment with an Idempotent Message</a><a href="#section-toc.1-1.5.2.2.2.5.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.6">
                    <p id="section-toc.1-1.5.2.2.2.6.1"><a href="#section-5.2.6" class="xref">5.2.6</a>.  <a href="#name-multistream-connections-in-" class="xref">Multistream Connections in Group</a><a href="#section-toc.1-1.5.2.2.2.6.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.7">
                    <p id="section-toc.1-1.5.2.2.2.7.1"><a href="#section-5.2.7" class="xref">5.2.7</a>.  <a href="#name-full-checksum-coverage-on-s" class="xref">Full Checksum Coverage on Sending</a><a href="#section-toc.1-1.5.2.2.2.7.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.8">
                    <p id="section-toc.1-1.5.2.2.2.8.1"><a href="#section-5.2.8" class="xref">5.2.8</a>.  <a href="#name-full-checksum-coverage-on-r" class="xref">Full Checksum Coverage on Receiving</a><a href="#section-toc.1-1.5.2.2.2.8.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.9">
                    <p id="section-toc.1-1.5.2.2.2.9.1"><a href="#section-5.2.9" class="xref">5.2.9</a>.  <a href="#name-congestion-control" class="xref">Congestion control</a><a href="#section-toc.1-1.5.2.2.2.9.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.10">
                    <p id="section-toc.1-1.5.2.2.2.10.1"><a href="#section-5.2.10" class="xref">5.2.10</a>. <a href="#name-interface-instance-or-type" class="xref">Interface Instance or Type</a><a href="#section-toc.1-1.5.2.2.2.10.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.11">
                    <p id="section-toc.1-1.5.2.2.2.11.1"><a href="#section-5.2.11" class="xref">5.2.11</a>. <a href="#name-provisioning-domain-instanc" class="xref">Provisioning Domain Instance or Type</a><a href="#section-toc.1-1.5.2.2.2.11.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.12">
                    <p id="section-toc.1-1.5.2.2.2.12.1"><a href="#section-5.2.12" class="xref">5.2.12</a>. <a href="#name-use-temporary-local-address" class="xref">Use Temporary Local Address</a><a href="#section-toc.1-1.5.2.2.2.12.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.13">
                    <p id="section-toc.1-1.5.2.2.2.13.1"><a href="#section-5.2.13" class="xref">5.2.13</a>. <a href="#name-parallel-use-of-multiple-pa" class="xref">Parallel Use of Multiple Paths</a><a href="#section-toc.1-1.5.2.2.2.13.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.14">
                    <p id="section-toc.1-1.5.2.2.2.14.1"><a href="#section-5.2.14" class="xref">5.2.14</a>. <a href="#name-direction-of-communication" class="xref">Direction of communication</a><a href="#section-toc.1-1.5.2.2.2.14.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.15">
                    <p id="section-toc.1-1.5.2.2.2.15.1"><a href="#section-5.2.15" class="xref">5.2.15</a>. <a href="#name-notification-of-excessive-r" class="xref">Notification of excessive retransmissions</a><a href="#section-toc.1-1.5.2.2.2.15.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2.2.16">
                    <p id="section-toc.1-1.5.2.2.2.16.1"><a href="#section-5.2.16" class="xref">5.2.16</a>. <a href="#name-notification-of-icmp-soft-e" class="xref">Notification of ICMP soft error message arrival</a><a href="#section-toc.1-1.5.2.2.2.16.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-specifying-security-paramet" class="xref">Specifying Security Parameters and Callbacks</a><a href="#section-toc.1-1.5.2.3.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.5.2.3.2.1">
                    <p id="section-toc.1-1.5.2.3.2.1.1"><a href="#section-5.3.1" class="xref">5.3.1</a>.  <a href="#name-pre-connection-parameters" class="xref">Pre-Connection Parameters</a><a href="#section-toc.1-1.5.2.3.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.3.2.2">
                    <p id="section-toc.1-1.5.2.3.2.2.1"><a href="#section-5.3.2" class="xref">5.3.2</a>.  <a href="#name-connection-establishment-ca" class="xref">Connection Establishment Callbacks</a><a href="#section-toc.1-1.5.2.3.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-establishing-connections" class="xref">Establishing Connections</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-active-open-initiate" class="xref">Active Open: Initiate</a><a href="#section-toc.1-1.6.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-passive-open-listen" class="xref">Passive Open: Listen</a><a href="#section-toc.1-1.6.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="xref">6.3</a>.  <a href="#name-peer-to-peer-establishment-" class="xref">Peer-to-Peer Establishment: Rendezvous</a><a href="#section-toc.1-1.6.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="xref">6.4</a>.  <a href="#name-connection-groups" class="xref">Connection Groups</a><a href="#section-toc.1-1.6.2.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-sending-data" class="xref">Sending Data</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-basic-sending" class="xref">Basic Sending</a><a href="#section-toc.1-1.7.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-sending-replies" class="xref">Sending Replies</a><a href="#section-toc.1-1.7.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="xref">7.3</a>.  <a href="#name-send-events" class="xref">Send Events</a><a href="#section-toc.1-1.7.2.3.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.7.2.3.2.1">
                    <p id="section-toc.1-1.7.2.3.2.1.1"><a href="#section-7.3.1" class="xref">7.3.1</a>.  <a href="#name-sent" class="xref">Sent</a><a href="#section-toc.1-1.7.2.3.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.3.2.2">
                    <p id="section-toc.1-1.7.2.3.2.2.1"><a href="#section-7.3.2" class="xref">7.3.2</a>.  <a href="#name-expired" class="xref">Expired</a><a href="#section-toc.1-1.7.2.3.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.3.2.3">
                    <p id="section-toc.1-1.7.2.3.2.3.1"><a href="#section-7.3.3" class="xref">7.3.3</a>.  <a href="#name-senderror" class="xref">SendError</a><a href="#section-toc.1-1.7.2.3.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="xref">7.4</a>.  <a href="#name-message-contexts" class="xref">Message Contexts</a><a href="#section-toc.1-1.7.2.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.5">
                <p id="section-toc.1-1.7.2.5.1"><a href="#section-7.5" class="xref">7.5</a>.  <a href="#name-message-properties" class="xref">Message Properties</a><a href="#section-toc.1-1.7.2.5.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.7.2.5.2.1">
                    <p id="section-toc.1-1.7.2.5.2.1.1"><a href="#section-7.5.1" class="xref">7.5.1</a>.  <a href="#name-lifetime" class="xref">Lifetime</a><a href="#section-toc.1-1.7.2.5.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.5.2.2">
                    <p id="section-toc.1-1.7.2.5.2.2.1"><a href="#section-7.5.2" class="xref">7.5.2</a>.  <a href="#name-priority" class="xref">Priority</a><a href="#section-toc.1-1.7.2.5.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.5.2.3">
                    <p id="section-toc.1-1.7.2.5.2.3.1"><a href="#section-7.5.3" class="xref">7.5.3</a>.  <a href="#name-ordered" class="xref">Ordered</a><a href="#section-toc.1-1.7.2.5.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.5.2.4">
                    <p id="section-toc.1-1.7.2.5.2.4.1"><a href="#section-7.5.4" class="xref">7.5.4</a>.  <a href="#name-idempotent" class="xref">Idempotent</a><a href="#section-toc.1-1.7.2.5.2.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.5.2.5">
                    <p id="section-toc.1-1.7.2.5.2.5.1"><a href="#section-7.5.5" class="xref">7.5.5</a>.  <a href="#name-final" class="xref">Final</a><a href="#section-toc.1-1.7.2.5.2.5.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.5.2.6">
                    <p id="section-toc.1-1.7.2.5.2.6.1"><a href="#section-7.5.6" class="xref">7.5.6</a>.  <a href="#name-corruption-protection-lengt" class="xref">Corruption Protection Length</a><a href="#section-toc.1-1.7.2.5.2.6.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.5.2.7">
                    <p id="section-toc.1-1.7.2.5.2.7.1"><a href="#section-7.5.7" class="xref">7.5.7</a>.  <a href="#name-reliable-data-transfer-mess" class="xref">Reliable Data Transfer (Message)</a><a href="#section-toc.1-1.7.2.5.2.7.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.5.2.8">
                    <p id="section-toc.1-1.7.2.5.2.8.1"><a href="#section-7.5.8" class="xref">7.5.8</a>.  <a href="#name-message-capacity-profile-ov" class="xref">Message Capacity Profile Override</a><a href="#section-toc.1-1.7.2.5.2.8.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.5.2.9">
                    <p id="section-toc.1-1.7.2.5.2.9.1"><a href="#section-7.5.9" class="xref">7.5.9</a>.  <a href="#name-singular-transmission" class="xref">Singular Transmission</a><a href="#section-toc.1-1.7.2.5.2.9.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.6">
                <p id="section-toc.1-1.7.2.6.1"><a href="#section-7.6" class="xref">7.6</a>.  <a href="#name-partial-sends" class="xref">Partial Sends</a><a href="#section-toc.1-1.7.2.6.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.7">
                <p id="section-toc.1-1.7.2.7.1"><a href="#section-7.7" class="xref">7.7</a>.  <a href="#name-batching-sends" class="xref">Batching Sends</a><a href="#section-toc.1-1.7.2.7.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.8">
                <p id="section-toc.1-1.7.2.8.1"><a href="#section-7.8" class="xref">7.8</a>.  <a href="#name-send-on-active-open-initiat" class="xref">Send on Active Open: InitiateWithSend</a><a href="#section-toc.1-1.7.2.8.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-receiving-data" class="xref">Receiving Data</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-enqueuing-receives" class="xref">Enqueuing Receives</a><a href="#section-toc.1-1.8.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-receive-events" class="xref">Receive Events</a><a href="#section-toc.1-1.8.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.8.2.2.2.1">
                    <p id="section-toc.1-1.8.2.2.2.1.1"><a href="#section-8.2.1" class="xref">8.2.1</a>.  <a href="#name-received" class="xref">Received</a><a href="#section-toc.1-1.8.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8.2.2.2.2">
                    <p id="section-toc.1-1.8.2.2.2.2.1"><a href="#section-8.2.2" class="xref">8.2.2</a>.  <a href="#name-receivedpartial" class="xref">ReceivedPartial</a><a href="#section-toc.1-1.8.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8.2.2.2.3">
                    <p id="section-toc.1-1.8.2.2.2.3.1"><a href="#section-8.2.3" class="xref">8.2.3</a>.  <a href="#name-receiveerror" class="xref">ReceiveError</a><a href="#section-toc.1-1.8.2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="xref">8.3</a>.  <a href="#name-receive-message-properties" class="xref">Receive Message Properties</a><a href="#section-toc.1-1.8.2.3.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.8.2.3.2.1">
                    <p id="section-toc.1-1.8.2.3.2.1.1"><a href="#section-8.3.1" class="xref">8.3.1</a>.  <a href="#name-udp-lite-specific-property-" class="xref">UDP(-Lite)-specific Property: ECN</a><a href="#section-toc.1-1.8.2.3.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8.2.3.2.2">
                    <p id="section-toc.1-1.8.2.3.2.2.1"><a href="#section-8.3.2" class="xref">8.3.2</a>.  <a href="#name-early-data" class="xref">Early Data</a><a href="#section-toc.1-1.8.2.3.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8.2.3.2.3">
                    <p id="section-toc.1-1.8.2.3.2.3.1"><a href="#section-8.3.3" class="xref">8.3.3</a>.  <a href="#name-receiving-final-messages" class="xref">Receiving Final Messages</a><a href="#section-toc.1-1.8.2.3.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-message-framers" class="xref">Message Framers</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-adding-message-framers-to-c" class="xref">Adding Message Framers to Connections</a><a href="#section-toc.1-1.9.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-framing-meta-data" class="xref">Framing Meta-Data</a><a href="#section-toc.1-1.9.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-managing-connections" class="xref">Managing Connections</a><a href="#section-toc.1-1.10.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-generic-connection-properti" class="xref">Generic Connection Properties</a><a href="#section-toc.1-1.10.2.1.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.10.2.1.2.1">
                    <p id="section-toc.1-1.10.2.1.2.1.1"><a href="#section-10.1.1" class="xref">10.1.1</a>.  <a href="#name-retransmission-threshold-be" class="xref">Retransmission Threshold Before Excessive Retransmission Notification</a><a href="#section-toc.1-1.10.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.1.2.2">
                    <p id="section-toc.1-1.10.2.1.2.2.1"><a href="#section-10.1.2" class="xref">10.1.2</a>.  <a href="#name-required-minimum-corruption" class="xref">Required Minimum Corruption Protection Coverage for Receiving</a><a href="#section-toc.1-1.10.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.1.2.3">
                    <p id="section-toc.1-1.10.2.1.2.3.1"><a href="#section-10.1.3" class="xref">10.1.3</a>.  <a href="#name-priority-connection" class="xref">Priority (Connection)</a><a href="#section-toc.1-1.10.2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.1.2.4">
                    <p id="section-toc.1-1.10.2.1.2.4.1"><a href="#section-10.1.4" class="xref">10.1.4</a>.  <a href="#name-timeout-for-aborting-connec" class="xref">Timeout for Aborting Connection</a><a href="#section-toc.1-1.10.2.1.2.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.1.2.5">
                    <p id="section-toc.1-1.10.2.1.2.5.1"><a href="#section-10.1.5" class="xref">10.1.5</a>.  <a href="#name-connection-group-transmissi" class="xref">Connection Group Transmission Scheduler</a><a href="#section-toc.1-1.10.2.1.2.5.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.1.2.6">
                    <p id="section-toc.1-1.10.2.1.2.6.1"><a href="#section-10.1.6" class="xref">10.1.6</a>.  <a href="#name-capacity-profile" class="xref">Capacity Profile</a><a href="#section-toc.1-1.10.2.1.2.6.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.1.2.7">
                    <p id="section-toc.1-1.10.2.1.2.7.1"><a href="#section-10.1.7" class="xref">10.1.7</a>.  <a href="#name-bounds-on-send-or-receive-r" class="xref">Bounds on Send or Receive Rate</a><a href="#section-toc.1-1.10.2.1.2.7.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.1.2.8">
                    <p id="section-toc.1-1.10.2.1.2.8.1"><a href="#section-10.1.8" class="xref">10.1.8</a>.  <a href="#name-read-only-connection-proper" class="xref">Read-only Connection Properties</a><a href="#section-toc.1-1.10.2.1.2.8.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-tcp-specific-properties-use" class="xref">TCP-specific Properties: User Timeout Option (UTO)</a><a href="#section-toc.1-1.10.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.10.2.2.2.1">
                    <p id="section-toc.1-1.10.2.2.2.1.1"><a href="#section-10.2.1" class="xref">10.2.1</a>.  <a href="#name-advertised-user-timeout" class="xref">Advertised User Timeout</a><a href="#section-toc.1-1.10.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.2.2.2">
                    <p id="section-toc.1-1.10.2.2.2.2.1"><a href="#section-10.2.2" class="xref">10.2.2</a>.  <a href="#name-user-timeout-enabled" class="xref">User Timeout Enabled</a><a href="#section-toc.1-1.10.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.2.2.3">
                    <p id="section-toc.1-1.10.2.2.2.3.1"><a href="#section-10.2.3" class="xref">10.2.3</a>.  <a href="#name-timeout-changeable" class="xref">Timeout Changeable</a><a href="#section-toc.1-1.10.2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="xref">10.3</a>.  <a href="#name-connection-lifecycle-events" class="xref">Connection Lifecycle Events</a><a href="#section-toc.1-1.10.2.3.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.10.2.3.2.1">
                    <p id="section-toc.1-1.10.2.3.2.1.1"><a href="#section-10.3.1" class="xref">10.3.1</a>.  <a href="#name-soft-errors" class="xref">Soft Errors</a><a href="#section-toc.1-1.10.2.3.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.3.2.2">
                    <p id="section-toc.1-1.10.2.3.2.2.1"><a href="#section-10.3.2" class="xref">10.3.2</a>.  <a href="#name-excessive-retransmissions" class="xref">Excessive retransmissions</a><a href="#section-toc.1-1.10.2.3.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-connection-termination" class="xref">Connection Termination</a><a href="#section-toc.1-1.11.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-connection-state-and-orderi" class="xref">Connection State and Ordering of Operations and Events</a><a href="#section-toc.1-1.12.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="xref">13</a>. <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.13.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="xref">14</a>. <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-toc.1-1.14.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#section-15" class="xref">15</a>. <a href="#name-acknowledgements" class="xref">Acknowledgements</a><a href="#section-toc.1-1.15.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#section-16" class="xref">16</a>. <a href="#name-references" class="xref">References</a><a href="#section-toc.1-1.16.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.16.2.1">
                <p id="section-toc.1-1.16.2.1.1"><a href="#section-16.1" class="xref">16.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.16.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.16.2.2">
                <p id="section-toc.1-1.16.2.2.1"><a href="#section-16.2" class="xref">16.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-toc.1-1.16.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#section-appendix.a" class="xref">Appendix A</a>.  <a href="#name-convenience-functions" class="xref">Convenience Functions</a><a href="#section-toc.1-1.17.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.17.2.1">
                <p id="section-toc.1-1.17.2.1.1"><a href="#section-a.1" class="xref">A.1</a>.  <a href="#name-adding-preference-propertie" class="xref">Adding Preference Properties</a><a href="#section-toc.1-1.17.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.17.2.2">
                <p id="section-toc.1-1.17.2.2.1"><a href="#section-a.2" class="xref">A.2</a>.  <a href="#name-transport-property-profiles" class="xref">Transport Property Profiles</a><a href="#section-toc.1-1.17.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.17.2.2.2.1">
                    <p id="section-toc.1-1.17.2.2.2.1.1"><a href="#section-a.2.1" class="xref">A.2.1</a>.  <a href="#name-reliable-inorder-stream" class="xref">reliable-inorder-stream</a><a href="#section-toc.1-1.17.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.17.2.2.2.2">
                    <p id="section-toc.1-1.17.2.2.2.2.1"><a href="#section-a.2.2" class="xref">A.2.2</a>.  <a href="#name-reliable-message" class="xref">reliable-message</a><a href="#section-toc.1-1.17.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.17.2.2.2.3">
                    <p id="section-toc.1-1.17.2.2.2.3.1"><a href="#section-a.2.3" class="xref">A.2.3</a>.  <a href="#name-unreliable-datagram" class="xref">unreliable-datagram</a><a href="#section-toc.1-1.17.2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#section-appendix.b" class="xref">Appendix B</a>.  <a href="#name-relationship-to-the-minimal" class="xref">Relationship to the Minimal Set of Transport Services for End Systems</a><a href="#section-toc.1-1.18.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a href="#section-appendix.c" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-toc.1-1.19.1" class="pilcrow">¶</a></p>
</li>
</ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">This document specifies a modern abstract programming interface atop the
high-level architecture for transport services defined in
<span>[<a href="#I-D.ietf-taps-arch" class="xref">I-D.ietf-taps-arch</a>]</span>. It supports the
asynchronous, atomic transmission of messages over transport protocols and
network paths dynamically selected at runtime. It is intended to replace the
traditional BSD sockets API as the lowest common denominator interface to the
transport layer, in an environment where endpoints have multiple interfaces
and potential transport protocols to select from.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">As applications adopt this interface, they will benefit from a wide set of
transport features that can evolve over time, and ensure that the system
providing the interface can optimize its behavior based on the application
requirements and network conditions, without requiring changes to the
applications.  This flexibility enables faster deployment of new features and
protocols.  It can also support applications by offering racing and fallback
mechanisms, which otherwise need to be implemented in each application separately.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">It derives specific path and protocol selection
properties and supported transport features from the analysis provided in
<span>[<a href="#RFC8095" class="xref">RFC8095</a>]</span>, <span>[<a href="#I-D.ietf-taps-minset" class="xref">I-D.ietf-taps-minset</a>]</span>, and
<span>[<a href="#I-D.ietf-taps-transport-security" class="xref">I-D.ietf-taps-transport-security</a>]</span>. The design encourages implementations 
underneath the interface to dynamically choose a transport protocol depending on an 
application's choices rather than statically binding applications to a protocol at 
compile time. We note that transport system implementations SHOULD provide
applications a way to override transport selection and instantiate a specific stack,
e.g. to support servers wanting to listen to a specific protocol. This specific
transport stack choice is discouraged for general use, as it comes at the
cost of reduced portability.<a href="#section-1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terminology-and-notation">
<section id="section-2">
      <h2 id="name-terminology-and-notation">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology-and-notation" class="section-name selfRef">Terminology and Notation</a>
      </h2>
<p id="section-2-1">This API is described in terms of Objects, which an application can interact
with; Actions the application can perform on these Objects; Events, which an
Object can send to an application asynchronously; and Parameters associated
with these Actions and Events.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">The following notations, which can be combined, are used in this document:<a href="#section-2-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-2-3.1">An Action creates an Object:<a href="#section-2-3.1" class="pilcrow">¶</a>
</li>
</ul>
<div class="artwork art-text alignLeft" id="section-2-4">
<pre>
Object := Action()
</pre><a href="#section-2-4" class="pilcrow">¶</a>
</div>
<ul>
<li id="section-2-5.1">An Action creates an array of Objects:<a href="#section-2-5.1" class="pilcrow">¶</a>
</li>
</ul>
<div class="artwork art-text alignLeft" id="section-2-6">
<pre>
[]Object := Action()
</pre><a href="#section-2-6" class="pilcrow">¶</a>
</div>
<ul>
<li id="section-2-7.1">An Action is performed on an Object:<a href="#section-2-7.1" class="pilcrow">¶</a>
</li>
</ul>
<div class="artwork art-text alignLeft" id="section-2-8">
<pre>
Object.Action()
</pre><a href="#section-2-8" class="pilcrow">¶</a>
</div>
<ul>
<li id="section-2-9.1">An Object sends an Event:<a href="#section-2-9.1" class="pilcrow">¶</a>
</li>
</ul>
<div class="artwork art-text alignLeft" id="section-2-10">
<pre>
Object -&gt; Event&lt;&gt;
</pre><a href="#section-2-10" class="pilcrow">¶</a>
</div>
<ul>
<li id="section-2-11.1">An Action takes a set of Parameters; an Event contains a set of Parameters.
Action and Event parameters whose names are suffixed with a question mark are optional.<a href="#section-2-11.1" class="pilcrow">¶</a>
</li>
</ul>
<div class="artwork art-text alignLeft" id="section-2-12">
<pre>
Action(param0, param1?, ...) / Event&lt;param0, param1, ...&gt;
</pre><a href="#section-2-12" class="pilcrow">¶</a>
</div>
<p id="section-2-13">Actions associated with no Object are Actions on the abstract interface
itself; they are equivalent to Actions on a per-application global context.<a href="#section-2-13" class="pilcrow">¶</a></p>
<p id="section-2-14">How these abstract concepts map into concrete implementations of this API in a
given language on a given platform is largely dependent on the features of the
language and the platform. Actions could be implemented as functions or method
calls, for instance, and Events could be implemented via event queues, handler
functions or classes, communicating sequential processes, or other asynchronous
calling conventions.<a href="#section-2-14" class="pilcrow">¶</a></p>
<p id="section-2-15">This specification treats Events and errors similarly. Errors, just as any
other Events, may occur asynchronously in network applications. However, it is
recommended that implementations of this interface also return errors
immediately, according to the error handling idioms of the implementation
platform, for errors that can be immediately detected, such as inconsistency
in Transport Properties. Errors can provide an optional reason to give the 
application further details as to why the error occured.<a href="#section-2-15" class="pilcrow">¶</a></p>
<p id="section-2-16">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span>
when, and only when, they appear in all capitals, as shown here.<a href="#section-2-16" class="pilcrow">¶</a></p>
</section>
</div>
<div id="principles">
<section id="section-3">
      <h2 id="name-overview-of-interface-desig">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-overview-of-interface-desig" class="section-name selfRef">Overview of Interface Design</a>
      </h2>
<p id="section-3-1">The design of the interface specified in this document is based on a set of
princples, themselves an elaboration on the architectural design principles
defined in <span>[<a href="#I-D.ietf-taps-arch" class="xref">I-D.ietf-taps-arch</a>]</span>. The interface defined in this document
provides:<a href="#section-3-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-3-2.1">A single interface to a variety of transport protocols to be
used in a variety of application design patterns, independent of the
properties of the application and the Protocol Stacks that will be used at
runtime, such that  all common specialized features of these protocol
stacks are made available to the application as necessary in a
transport-independent way, to enable applications written to a single API
to make use of transport protocols in terms of the features they provide;<a href="#section-3-2.1" class="pilcrow">¶</a>
</li>
<li id="section-3-2.2">Message-orientation, as opposed to stream-orientation, using
application-assisted framing and deframing where the underlying transport
does not provide these;<a href="#section-3-2.2" class="pilcrow">¶</a>
</li>
<li id="section-3-2.3">Asynchronous Connection establishment, transmission, and reception, allowing
concurrent operations during establishment and supporting event-driven
application interactions with the transport layer, in line with developments
in modern platforms and programming languages;<a href="#section-3-2.3" class="pilcrow">¶</a>
</li>
<li id="section-3-2.4">Explicit support for security properties as first-order transport features,
and for configuration of cryptographic identities and transport security parameters persistent across multiple Connections; and<a href="#section-3-2.4" class="pilcrow">¶</a>
</li>
<li id="section-3-2.5">Explicit support for multistreaming and multipath transport protocols, and
the grouping of related Connections into Connection Groups through cloning
of Connections, to allow applications to take full advantage of new
transport protocols supporting these features.<a href="#section-3-2.5" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="api-summary">
<section id="section-4">
      <h2 id="name-api-summary">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-api-summary" class="section-name selfRef">API Summary</a>
      </h2>
<p id="section-4-1">The Transport Services API is the basic common abstract application
programming interface to the Transport Services Architecture defined in the TAPS
Architecture <span>[<a href="#I-D.ietf-taps-arch" class="xref">I-D.ietf-taps-arch</a>]</span>.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">An application primarily interacts with this API through two Objects:
Preconnections and Connections. A Preconnection represents a set of properties
and constraints on the selection and configuration of paths and protocols to
establish a Connection with a remote Endpoint. A Connection represents a
transport Protocol Stack on which data can be sent to and/or received from a
remote Endpoint (i.e., depending on the kind of transport, connections can be
bi-directional or unidirectional). Connections can be created from
Preconnections in three ways: by initiating the Preconnection (i.e., actively
opening, as in a client), through listening on the Preconnection (i.e.,
passively opening, as in a server), or rendezvousing on the Preconnection (i.e.
peer to peer establishment).<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">Once a Connection is established, data can be sent and received on it in the form of
Messages. The interface supports the preservation of message boundaries both
via explicit Protocol Stack support, and via application support through a
Message Framer which finds message boundaries in a stream. Messages are
received asynchronously through event handlers registered by the application.
Errors and other notifications also happen asynchronously on the Connection.
It is not necessary for an application to handle all events; some events may
have implementation-specific default handlers. The application should not
assume that ignoring events (e.g. errors) is always safe.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4"><a href="#pre-establishment" class="xref">Section 5</a>, <a href="#establishment" class="xref">Section 6</a>, <a href="#sending" class="xref">Section 7</a>, <a href="#receiving" class="xref">Section 8</a>, and
<a href="#termination" class="xref">Section 11</a> describe the details of application interaction with Objects
through Actions and Events in each phase of a Connection, following the phases
(Pre-Establishment, Establishment, Data Transfer, and Termination)
described in Section 4.1 of <span>[<a href="#I-D.ietf-taps-arch" class="xref">I-D.ietf-taps-arch</a>]</span>.<a href="#section-4-4" class="pilcrow">¶</a></p>
<div id="usage-examples">
<section id="section-4.1">
        <h3 id="name-usage-examples">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-usage-examples" class="section-name selfRef">Usage Examples</a>
        </h3>
<p id="section-4.1-1">The following usage examples illustrate how an application might use a
Transport Services Interface to:<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.1-2.1">Act as a server, by listening for incoming connections, receiving requests,
and sending responses, see <a href="#server-example" class="xref">Section 4.1.1</a>.<a href="#section-4.1-2.1" class="pilcrow">¶</a>
</li>
<li id="section-4.1-2.2">Act as a client, by connecting to a remote endpoint using Initiate, sending
requests, and receiving responses, see <a href="#client-example" class="xref">Section 4.1.2</a>.<a href="#section-4.1-2.2" class="pilcrow">¶</a>
</li>
<li id="section-4.1-2.3">Act as a peer, by connecting to a remote endpoint using Rendezvous while
simultaneously waiting for incoming Connections, sending Messages, and
receiving Messages, see <a href="#peer-example" class="xref">Section 4.1.3</a>.<a href="#section-4.1-2.3" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-4.1-3">The examples in this section presume that a transport protocol is available
between the endpoints that provides Reliable Data Transfer, Preservation of
data ordering, and Preservation of Message Boundaries. In this case, the
application can choose to receive only complete messages.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1-4">If none of the available transport protocols provides Preservation of Message
Boundaries, but there is a transport protocol that provides a reliable ordered
byte stream, an application may receive this byte stream as partial
Messages and transform it into application-layer Messages.  Alternatively,
an application may provide a Message Framer, which can transform a
byte stream into a sequence of Messages (<a href="#framing" class="xref">Section 9</a>).<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<div id="server-example">
<section id="section-4.1.1">
          <h4 id="name-server-example">
<a href="#section-4.1.1" class="section-number selfRef">4.1.1. </a><a href="#name-server-example" class="section-name selfRef">Server Example</a>
          </h4>
<p id="section-4.1.1-1">This is an example of how an application might listen for incoming Connections
using the Transport Services Interface, receive a request, and send a response.<a href="#section-4.1.1-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.1.1-2">
<pre>
LocalSpecifier := NewLocalEndpoint()
LocalSpecifier.WithInterface("any")
LocalSpecifier.WithService("https")

TransportProperties := NewTransportProperties()
TransportProperties.Require(preserve-msg-boundaries)
// Reliable Data Transfer and Preserve Order are Required by default

SecurityParameters := NewSecurityParameters()
SecurityParameters.AddIdentity(identity)
SecurityParameters.AddPrivateKey(privateKey, publicKey)

// Specifying a remote endpoint is optional when using Listen()
Preconnection := NewPreconnection(LocalSpecifier,
                                  TransportProperties,
                                  SecurityParameters)

Listener := Preconnection.Listen()

Listener -&gt; ConnectionReceived&lt;Connection&gt;

// Only receive complete messages in a Conn.Received handler
Connection.Receive()

Connection -&gt; Received&lt;messageDataRequest, messageContext&gt;

//---- Receive event handler begin ----
Connection.Send(messageDataResponse)
Connection.Close()

// Stop listening for incoming Connections
// (this example supports only one Connection)
Listener.Stop()
//---- Receive event handler end ----

</pre><a href="#section-4.1.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="client-example">
<section id="section-4.1.2">
          <h4 id="name-client-example">
<a href="#section-4.1.2" class="section-number selfRef">4.1.2. </a><a href="#name-client-example" class="section-name selfRef">Client Example</a>
          </h4>
<p id="section-4.1.2-1">This is an example of how an application might connect to a remote application
using the Transport Services Interface, send a request, and receive a response.<a href="#section-4.1.2-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.1.2-2">
<pre>
RemoteSpecifier := NewRemoteEndpoint()
RemoteSpecifier.WithHostname("example.com")
RemoteSpecifier.WithService("https")

TransportProperties := NewTransportProperties()
TransportProperties.Require(preserve-msg-boundaries)
// Reliable Data Transfer and Preserve Order are Required by default

SecurityParameters := NewSecurityParameters()
TrustCallback := NewCallback({
  // Verify identity of the remote endpoint, return the result
})
SecurityParameters.SetTrustVerificationCallback(TrustCallback)

// Specifying a local endpoint is optional when using Initiate()
Preconnection := NewPreconnection(RemoteSpecifier,
                                  TransportProperties,
                                  SecurityParameters)

Connection := Preconnection.Initiate()

Connection -&gt; Ready&lt;&gt;

//---- Ready event handler begin ----
Connection.Send(messageDataRequest)

// Only receive complete messages
Connection.Receive()
//---- Ready event handler end ----

Connection -&gt; Received&lt;messageDataResponse, messageContext&gt;

// Close the Connection in a Receive event handler
Connection.Close()
</pre><a href="#section-4.1.2-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="peer-example">
<section id="section-4.1.3">
          <h4 id="name-peer-example">
<a href="#section-4.1.3" class="section-number selfRef">4.1.3. </a><a href="#name-peer-example" class="section-name selfRef">Peer Example</a>
          </h4>
<p id="section-4.1.3-1">This is an example of how an application might establish a connection with a
peer using Rendezvous(), send a Message, and receive a Message.<a href="#section-4.1.3-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.1.3-2">
<pre>
LocalSpecifier := NewLocalEndpoint()
LocalSpecifier.WithPort(9876)

RemoteSpecifier := NewRemoteEndpoint()
RemoteSpecifier.WithHostname("example.com")
RemoteSpecifier.WithPort(9877)

TransportProperties := NewTransportProperties()
TransportProperties.Require(preserve-msg-boundaries)
// Reliable Data Transfer and Preserve Order are Required by default

SecurityParameters := NewSecurityParameters()
SecurityParameters.AddIdentity(identity)
SecurityParameters.AddPrivateKey(privateKey, publicKey)

TrustCallback := New Callback({
  // Verify identity of the remote endpoint, return the result
})
SecurityParameters.SetTrustVerificationCallback(trustCallback)

// Both local and remote endpoint must be specified
Preconnection := NewPreconnection(LocalSpecifier,
                                  RemoteSpecifier,
                                  TransportProperties,
                                  SecurityParameters)

Preconnection.Rendezvous()

Preconnection -&gt; RendezvousDone&lt;Connection&gt;

//---- Ready event handler begin ----
Connection.Send(messageDataRequest)

// Only receive complete messages
Connection.Receive()
//---- Ready event handler end ----

Connection -&gt; Received&lt;messageDataResponse, messageContext&gt;

// Close the Connection in a Receive event handler
Connection.Close()
</pre><a href="#section-4.1.3-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="transport-properties">
<section id="section-4.2">
        <h3 id="name-transport-properties">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-transport-properties" class="section-name selfRef">Transport Properties</a>
        </h3>
<p id="section-4.2-1">Each application using the Transport Services Interface declares its preferences
for how the transport service should operate using properties at each stage of
the lifetime of a connection using Transport Properties, as defined in
<span>[<a href="#I-D.ietf-taps-arch" class="xref">I-D.ietf-taps-arch</a>]</span>.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">Transport Properties are divided into Selection, Connection, and Message
Properties. During pre-establishment, Selection Properties (see
<a href="#selection-props" class="xref">Section 5.2</a>) are used to specify which paths and protocol stacks can be
used and are preferred by the application, and Connection Properties (see
<a href="#connection-props" class="xref">Section 10.1</a>) can be used to influence decisions made during
establishment and to fine-tune the eventually established connection. These
Connection Properties can also be used later, to monitor and fine-tune
established connections. The behavior of the selected protocol stack(s) when
sending Messages is controlled by Message Properties (see <a href="#message-props" class="xref">Section 7.5</a>).<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">All Transport Properties, regardless of the phase in which they are used, are
organized within a single namespace. This enables setting them as defaults in
earlier stages and querying them in later stages:<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.2-4.1">Connection Properties can be set on Preconnections<a href="#section-4.2-4.1" class="pilcrow">¶</a>
</li>
<li id="section-4.2-4.2">Message Properties can be set on Preconnections and Connections<a href="#section-4.2-4.2" class="pilcrow">¶</a>
</li>
<li id="section-4.2-4.3">The effect of Selection Properties can be queried on Connections and Messages<a href="#section-4.2-4.3" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-4.2-5">Note that configuring Connection Properties and Message Properties on
Preconnections is preferred over setting them later. Early specification of
Connection Properties allows their use as additional input to the selection
process. Protocol Specific Properties, which enable configuration of specialized
features of a specific protocol, see Section 3.2 of <span>[<a href="#I-D.ietf-taps-arch" class="xref">I-D.ietf-taps-arch</a>]</span>, are not
used as an input to the selection process but only support configuration if
the respective prototocol has been selected.<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<div id="property-names">
<section id="section-4.2.1">
          <h4 id="name-transport-property-names">
<a href="#section-4.2.1" class="section-number selfRef">4.2.1. </a><a href="#name-transport-property-names" class="section-name selfRef">Transport Property Names</a>
          </h4>
<p id="section-4.2.1-1">Transport Properties are referred to by property names. These names are
lower-case strings whereby words are separated by hyphens.
These names serve two purposes:<a href="#section-4.2.1-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.2.1-2.1">Allow different components of a TAPS implementation to pass Transport
Properties, e.g., between a language frontend and a policy manager,
or as a representation of properties retrieved from a file or other storage.<a href="#section-4.2.1-2.1" class="pilcrow">¶</a>
</li>
<li id="section-4.2.1-2.2">Make code of different TAPS implementations look similar.<a href="#section-4.2.1-2.2" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-4.2.1-3">Transport Property Names are hierarchically organized in the
form [&lt;Namespace&gt;.]&lt;PropertyName&gt;.<a href="#section-4.2.1-3" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.2.1-4.1">The Namespace part MUST be empty for well-known, generic properties, i.e., for
properties that are not specific to a protocol and are defined in an RFC.<a href="#section-4.2.1-4.1" class="pilcrow">¶</a>
</li>
<li id="section-4.2.1-4.2">Protocol Specific Properties MUST use the protocol acronym as Namespace, e.g.,
"tcp" for TCP specific Transport Properties. For IETF protocols, property
names under these namespaces SHOULD be defined in an RFC.<a href="#section-4.2.1-4.2" class="pilcrow">¶</a>
</li>
<li id="section-4.2.1-4.3">Vendor or implementation specific properties MUST use a string identifying
the vendor or implementation as Namespace.<a href="#section-4.2.1-4.3" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-4.2.1-5">Namespaces for the keywords provided in the IANA protocol numbers registry 
(see https://www.iana.org/assignments/protocol-numbers/protocol-numbers.xhtml) are reserved
for Protocol Specific Properties and MUST not be used for vendor or implementation
specific properties.<a href="#section-4.2.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="property-types">
<section id="section-4.2.2">
          <h4 id="name-transport-property-types">
<a href="#section-4.2.2" class="section-number selfRef">4.2.2. </a><a href="#name-transport-property-types" class="section-name selfRef">Transport Property Types</a>
          </h4>
<p id="section-4.2.2-1">Transport Properties can have one of a set of data types:<a href="#section-4.2.2-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.2.2-2.1">Boolean: can take the values "true" and "false"; representation is
implementation-dependent.<a href="#section-4.2.2-2.1" class="pilcrow">¶</a>
</li>
<li id="section-4.2.2-2.2">Integer: can take positive or negative numeric integer values; range and
representation is implementation-dependent.<a href="#section-4.2.2-2.2" class="pilcrow">¶</a>
</li>
<li id="section-4.2.2-2.3">Numeric: can take positive or negative numeric values; range and
representation is implementation-dependent.<a href="#section-4.2.2-2.3" class="pilcrow">¶</a>
</li>
<li id="section-4.2.2-2.4">Enumeration: can take one value of a finite set of values, dependent on the
property itself. The representation is implementation dependent; however,
implementations MUST provide a method for the application to determine the
entire set of possible values for each property.<a href="#section-4.2.2-2.4" class="pilcrow">¶</a>
</li>
<li id="section-4.2.2-2.5">Preference: can take one of five values (Prohibit, Avoid, Ignore, Prefer,
Require) for the level of preference of a given property during protocol
selection; see <a href="#selection-props" class="xref">Section 5.2</a>.<a href="#section-4.2.2-2.5" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
</section>
</div>
<div id="scope-of-the-interface-definition">
<section id="section-4.3">
        <h3 id="name-scope-of-the-interface-defi">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-scope-of-the-interface-defi" class="section-name selfRef">Scope of the Interface Definition</a>
        </h3>
<p id="section-4.3-1">This document defines a language- and platform-independent interface to a
Transport Services system. Given the wide variety of languages and language
conventions used to write applications that use the transport layer to connect
to other applications over the Internet, this independence makes this interface
necessarily abstract.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">There is no interoperability benefit in tightly defining how the interface is
presented to application programmers across diverse platforms. However,
maintaining the "shape" of the abstract interface across these platforms reduces
the effort for programmers who learn the transport services interface to then
apply their knowledge across multiple platforms.<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.3-3">We therefore make the following recommendations:<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.3-4.1">Actions, Events, and Errors in implementations of this interface SHOULD use
the names given for them in the document, subject to capitalization,
punctuation, and other typographic conventions in the language of the
implementation, unless the implementation itself uses different names for
substantially equivalent objects for networking by convention.<a href="#section-4.3-4.1" class="pilcrow">¶</a>
</li>
<li id="section-4.3-4.2">Implementations of this interface SHOULD implement each Selection Property,
Connection Property, and Message Context Property specified in this document. Each interface SHOULD be implemented even when this
will always result in no operation, e.g. there is no action when the API
specifies a Property that is not available in a transport protocol implemented
on a specific platform. For example, if TCP is the only underlying transport protocol, the Message Property "msg-ordered" can be implemented even if disabling ordering will not have any effect TCP because the API does not guarantee out-of-order delivery. Similarly, the msg-lifetime" Message Property can be implemented but ignored, as the description of this Property states that "it is not guaranteed that a Message will not be sent when its Lifetime has expired".<a href="#section-4.3-4.2" class="pilcrow">¶</a>
</li>
<li id="section-4.3-4.3">Implementations may use other representations for Transport Property Names,
e.g., by providing constants, but should provide a straight-forward mapping
between their representation and the property names specified here.<a href="#section-4.3-4.3" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
</section>
</div>
<div id="pre-establishment">
<section id="section-5">
      <h2 id="name-pre-establishment-phase">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-pre-establishment-phase" class="section-name selfRef">Pre-Establishment Phase</a>
      </h2>
<p id="section-5-1">The Pre-Establishment phase allows applications to specify properties for
the Connections they are about to make, or to query the API about potential
Connections they could make.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">A Preconnection Object represents a potential Connection. It has state that
describes properties of a Connection that might exist in the future.  This state
comprises Local Endpoint and Remote Endpoint Objects that denote the endpoints
of the potential Connection (see <a href="#endpointspec" class="xref">Section 5.1</a>), the Selection Properties
(see <a href="#selection-props" class="xref">Section 5.2</a>), any preconfigured Connection Properties
(<a href="#connection-props" class="xref">Section 10.1</a>), and the security parameters (see
<a href="#security-parameters" class="xref">Section 5.3</a>):<a href="#section-5-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5-3">
<pre>
   Preconnection := NewPreconnection(LocalEndpoint?,
                                     RemoteEndpoint?,
                                     TransportProperties,
                                     SecurityParams)
</pre><a href="#section-5-3" class="pilcrow">¶</a>
</div>
<p id="section-5-4">The Local Endpoint MUST be specified if the Preconnection is used to Listen()
for incoming Connections, but is OPTIONAL if it is used to Initiate()
connections. The Remote Endpoint MUST be specified if the Preconnection is used
to Initiate() Connections, but is OPTIONAL if it is used to Listen() for
incoming Connections.
The Local Endpoint and the Remote Endpoint MUST both be specified if a
peer-to-peer Rendezvous is to occur based on the Preconnection.<a href="#section-5-4" class="pilcrow">¶</a></p>
<p id="section-5-5">Message Framers (see <a href="#framing" class="xref">Section 9</a>), if required, should be added to the
Preconnection during pre-establishment.<a href="#section-5-5" class="pilcrow">¶</a></p>
<div id="endpointspec">
<section id="section-5.1">
        <h3 id="name-specifying-endpoints">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-specifying-endpoints" class="section-name selfRef">Specifying Endpoints</a>
        </h3>
<p id="section-5.1-1">The transport services API uses the Local Endpoint and Remote Endpoint Objects
to refer to the endpoints of a transport connection.
Actions on these Objects can be used to represent various different types of
endpoint identifiers, such as IP addresses, DNS names, and interface names,
as well as port numbers and service names.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">Specify a Remote Endpoint using a hostname and service name:<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.1-3">
<pre>
RemoteSpecifier := NewRemoteEndpoint()
RemoteSpecifier.WithHostname("example.com")
RemoteSpecifier.WithService("https")
</pre><a href="#section-5.1-3" class="pilcrow">¶</a>
</div>
<p id="section-5.1-4">Specify a Remote Endpoint using an IPv6 address and remote port:<a href="#section-5.1-4" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.1-5">
<pre>
RemoteSpecifier := NewRemoteEndpoint()
RemoteSpecifier.WithIPv6Address(2001:db8:4920:e29d:a420:7461:7073:0a)
RemoteSpecifier.WithPort(443)
</pre><a href="#section-5.1-5" class="pilcrow">¶</a>
</div>
<p id="section-5.1-6">Specify a Remote Endpoint using an IPv4 address and remote port:<a href="#section-5.1-6" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.1-7">
<pre>
RemoteSpecifier := NewRemoteEndpoint()
RemoteSpecifier.WithIPv4Address(192.0.2.21)
RemoteSpecifier.WithPort(443)
</pre><a href="#section-5.1-7" class="pilcrow">¶</a>
</div>
<p id="section-5.1-8">Specify a Local Endpoint using a local interface name and local port:<a href="#section-5.1-8" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.1-9">
<pre>
LocalSpecifier := NewLocalEndpoint()
LocalSpecifier.WithInterface("en0")
LocalSpecifier.WithPort(443)
</pre><a href="#section-5.1-9" class="pilcrow">¶</a>
</div>
<p id="section-5.1-10">As an alternative to specifying an interface name for the Local Endpoint, an application can express more fine-grained preferences using the "Interface Instance or Type" Selection Property, see <a href="#prop-interface" class="xref">Section 5.2.10</a>. However, if the application specifies Selection Properties which are inconsistent with the Local Endpoint, this will result in an error once the application attempts to open a Connection.<a href="#section-5.1-10" class="pilcrow">¶</a></p>
<p id="section-5.1-11">Specify a Local Endpoint using a STUN server:<a href="#section-5.1-11" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.1-12">
<pre>
LocalSpecifier := NewLocalEndpoint()
LocalSpecifier.WithStunServer(address, port, credentials)
</pre><a href="#section-5.1-12" class="pilcrow">¶</a>
</div>
<p id="section-5.1-13">Specify a Local Endpoint using a Any-Source Multicast group to join on a named local interface:<a href="#section-5.1-13" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.1-14">
<pre>
LocalSpecifier := NewLocalEndpoint()
LocalSpecifier.WithIPv4Address(233.252.0.0)
LocalSpecifier.WithInterface("en0")
</pre><a href="#section-5.1-14" class="pilcrow">¶</a>
</div>
<p id="section-5.1-15">Source-Specific Multicast requires setting both a Local and Remote Endpoint:<a href="#section-5.1-15" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.1-16">
<pre>
LocalSpecifier := NewLocalEndpoint()
LocalSpecifier.WithIPv4Address(232.1.1.1)
LocalSpecifier.WithInterface("en0")

RemoteSpecifier := NewRemoteEndpoint()
RemoteSpecifier.WithIPv4Address(192.0.2.22)
</pre><a href="#section-5.1-16" class="pilcrow">¶</a>
</div>
<p id="section-5.1-17">Implementations may also support additional endpoint representations and
provide a single NewEndpoint() call that takes different endpoint representations.<a href="#section-5.1-17" class="pilcrow">¶</a></p>
<p id="section-5.1-18">Multiple endpoint identifiers can be specified for each Local Endpoint and
Remote Endpoint.  For example, a Local Endpoint could be configured with two
interface names, or a Remote Endpoint could be specified via both IPv4 and
IPv6 addresses. These multiple identifiers refer to the same transport
endpoint.<a href="#section-5.1-18" class="pilcrow">¶</a></p>
<p id="section-5.1-19">The transport services API resolves names internally, when the Initiate(),
Listen(), or Rendezvous() method is called to establish a Connection. The API
explicitly does not require the application to resolve names, though there is
a tradeoff between early and late binding of addresses to names. Early binding
allows the API implementation to reduce connection setup latency, at the cost
of potentially limited scope for alternate path discovery during Connection
establishment, as well as potential additional information leakage about
application interest when used with a resolution method (such as DNS without
TLS) which does not protect query confidentiality.<a href="#section-5.1-19" class="pilcrow">¶</a></p>
<p id="section-5.1-20">The Resolve() action on Preconnection can be used by the application to force
early binding when required, for example with some Network Address Translator
(NAT) traversal protocols (see <a href="#rendezvous" class="xref">Section 6.3</a>).<a href="#section-5.1-20" class="pilcrow">¶</a></p>
<p id="section-5.1-21">Specifying a multicast group address on the Local Endpoint will indicate to the transport system that the resulting connection will be used to receive multicast messages. The Remote Endpoint can be used to filter by specific senders. This will restrict the application to establishing the Preconnection by calling Listen(). The accepted Connections are receive-only.<a href="#section-5.1-21" class="pilcrow">¶</a></p>
<p id="section-5.1-22">Similarly, specifying a multicast group address on the Remote Endpoint will indicate that the resulting connection will be used to send multicast messages.<a href="#section-5.1-22" class="pilcrow">¶</a></p>
</section>
</div>
<div id="selection-props">
<section id="section-5.2">
        <h3 id="name-specifying-transport-proper">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-specifying-transport-proper" class="section-name selfRef">Specifying Transport Properties</a>
        </h3>
<p id="section-5.2-1">A Preconnection Object holds properties reflecting the application's
requirements and preferences for the transport. These include Selection
Properties for selecting protocol stacks and paths, as well as Connection
Properties for configuration of the detailed operation of the selected Protocol
Stacks.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">The protocol(s) and path(s) selected as candidates during establishment are
determined and configured using these properties. Since there could be paths
over which some transport protocols are unable to operate, or remote endpoints
that support only specific network addresses or transports, transport protocol
selection is necessarily tied to path selection. This may involve choosing
between multiple local interfaces that are connected to different access
networks.<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<p id="section-5.2-3">Most Selection Properties are represented as preferences, which can
have one of five preference levels:<a href="#section-5.2-3" class="pilcrow">¶</a></p>
<table class="center" id="table-1">
          <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Preference</th>
              <th class="text-left" rowspan="1" colspan="1">Effect</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Require</td>
              <td class="text-left" rowspan="1" colspan="1">Select only protocols/paths providing the property, fail otherwise</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Prefer</td>
              <td class="text-left" rowspan="1" colspan="1">Prefer protocols/paths providing the property, proceed otherwise</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Ignore</td>
              <td class="text-left" rowspan="1" colspan="1">No preference</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Avoid</td>
              <td class="text-left" rowspan="1" colspan="1">Prefer protocols/paths not providing the property, proceed otherwise</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Prohibit</td>
              <td class="text-left" rowspan="1" colspan="1">Select only protocols/paths not providing the property, fail otherwise</td>
            </tr>
          </tbody>
        </table>
<p id="section-5.2-5">In addition, the pseudo-level <code>Default</code> can be used to reset the property to the default
level used by the implementation. This level will never show up when queuing the value of
a preference - the effective preference must be returned instead.<a href="#section-5.2-5" class="pilcrow">¶</a></p>
<p id="section-5.2-6">The implementation MUST ensure an outcome that is consistent with application
requirements as expressed using Require and Prohibit. While preferences
expressed using Prefer and Avoid influence protocol and path selection as well,
outcomes may vary given the same Selection Properties, as the available
protocols and paths may vary across systems and contexts. However,
implementations are RECOMMENDED to aim to provide a consistent outcome
to an application, given the same Selection Properties.<a href="#section-5.2-6" class="pilcrow">¶</a></p>
<p id="section-5.2-7">Note that application preferences may conflict with each other. For
example, if an application indicates a preference for a specific path by
specifying an interface, but also a preference for a protocol, a situation
might occur in which the preferred protocol is not available on the preferred
path. In such cases, implementations SHOULD prioritize Selection Properties
that select paths over those that select protocols. Therefore, the transport
system SHOULD race the path first, ignoring the protocol preference if the
protocol does not work on the path.<a href="#section-5.2-7" class="pilcrow">¶</a></p>
<p id="section-5.2-8">Selection and Connection Properties, as well as defaults for Message
Properties, can be added to a Preconnection to configure the selection process
and to further configure the eventually selected protocol stack(s). They are
collected into a TransportProperties object to be passed into a Preconnection
object:<a href="#section-5.2-8" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.2-9">
<pre>
TransportProperties := NewTransportProperties()
</pre><a href="#section-5.2-9" class="pilcrow">¶</a>
</div>
<p id="section-5.2-10">Individual properties are then added to the TransportProperties Object:<a href="#section-5.2-10" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.2-11">
<pre>
TransportProperties.Add(property, value)
</pre><a href="#section-5.2-11" class="pilcrow">¶</a>
</div>
<p id="section-5.2-12">Selection Properties of type "Preference" can be frequently used. Implementations MAY therefore provide additional convenience functions, see <a href="#preference-conv" class="xref">Appendix A.1</a> for examples.
In addition, implementations MAY provide a mechanism to create TransportProperties objects that are preconfigured for common use cases as outlined in <a href="#property-profiles" class="xref">Appendix A.2</a>.<a href="#section-5.2-12" class="pilcrow">¶</a></p>
<p id="section-5.2-13">For an existing Connection, the Transport Properties can be queried any time
by using the following call on the Connection Object:<a href="#section-5.2-13" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.2-14">
<pre>
TransportProperties := Connection.GetTransportProperties()
</pre><a href="#section-5.2-14" class="pilcrow">¶</a>
</div>
<p id="section-5.2-15">A Connection gets its Transport Properties either by being explicitly configured
via a Preconnection, by configuration after establishment, or by inheriting them
from an antecedent via cloning; see <a href="#groups" class="xref">Section 6.4</a> for more.<a href="#section-5.2-15" class="pilcrow">¶</a></p>
<p id="section-5.2-16"><a href="#connection-props" class="xref">Section 10.1</a> provides a list of Connection Properties, while Selection
Properties are listed in the subsections below. Note that many properties are
only considered during establishment, and can not be changed after a Connection
is established; however, they can be queried. Querying a Selection Property
after establishment yields the value <code>Require</code> for properties of the selected
protocol and path, Avoid for properties avoided during selection, and Ignore for
all other properties.<a href="#section-5.2-16" class="pilcrow">¶</a></p>
<p id="section-5.2-17">An implementation of this interface must provide sensible defaults for Selection
Properties. The defaults given for each property below represent a
configuration that can be implemented over TCP. An alternate set of default
Protocol Selection Properties would represent a configuration that can be
implemented over UDP.<a href="#section-5.2-17" class="pilcrow">¶</a></p>
<div id="prop-reliable">
<section id="section-5.2.1">
          <h4 id="name-reliable-data-transfer-conn">
<a href="#section-5.2.1" class="section-number selfRef">5.2.1. </a><a href="#name-reliable-data-transfer-conn" class="section-name selfRef">Reliable Data Transfer (Connection)</a>
          </h4>
<dl class="dlParallel" id="section-5.2.1-1">
            <dt id="section-5.2.1-1.1">Name:</dt>
<dd id="section-5.2.1-1.2">
  reliability<a href="#section-5.2.1-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.1-1.3">Type:</dt>
<dd id="section-5.2.1-1.4">
  Preference<a href="#section-5.2.1-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.1-1.5">Default:</dt>
<dd id="section-5.2.1-1.6">
  Require<a href="#section-5.2.1-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.1-2">This property specifies whether the application needs to use a transport
protocol that ensures that all data is received on the other side without
corruption. This also entails being notified when a Connection is closed or
aborted.<a href="#section-5.2.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-boundaries">
<section id="section-5.2.2">
          <h4 id="name-preservation-of-message-bou">
<a href="#section-5.2.2" class="section-number selfRef">5.2.2. </a><a href="#name-preservation-of-message-bou" class="section-name selfRef">Preservation of Message Boundaries</a>
          </h4>
<dl class="dlParallel" id="section-5.2.2-1">
            <dt id="section-5.2.2-1.1">Name:</dt>
<dd id="section-5.2.2-1.2">
  preserve-msg-boundaries<a href="#section-5.2.2-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.2-1.3">Type:</dt>
<dd id="section-5.2.2-1.4">
  Preference<a href="#section-5.2.2-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.2-1.5">Default:</dt>
<dd id="section-5.2.2-1.6">
  Prefer<a href="#section-5.2.2-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.2-2">This property specifies whether the application needs or prefers to use a transport
protocol that preserves message boundaries.<a href="#section-5.2.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-partially-reliable">
<section id="section-5.2.3">
          <h4 id="name-configure-per-message-relia">
<a href="#section-5.2.3" class="section-number selfRef">5.2.3. </a><a href="#name-configure-per-message-relia" class="section-name selfRef">Configure Per-Message Reliability</a>
          </h4>
<dl class="dlParallel" id="section-5.2.3-1">
            <dt id="section-5.2.3-1.1">Name:</dt>
<dd id="section-5.2.3-1.2">
  per-msg-reliability<a href="#section-5.2.3-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.3-1.3">Type:</dt>
<dd id="section-5.2.3-1.4">
  Preference<a href="#section-5.2.3-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.3-1.5">Default:</dt>
<dd id="section-5.2.3-1.6">
  Ignore<a href="#section-5.2.3-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.3-2">This property specifies whether an application considers it useful to indicate
its reliability requirements on a per-Message basis. This property applies to
Connections and Connection Groups.<a href="#section-5.2.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-ordering">
<section id="section-5.2.4">
          <h4 id="name-preservation-of-data-orderi">
<a href="#section-5.2.4" class="section-number selfRef">5.2.4. </a><a href="#name-preservation-of-data-orderi" class="section-name selfRef">Preservation of Data Ordering</a>
          </h4>
<dl class="dlParallel" id="section-5.2.4-1">
            <dt id="section-5.2.4-1.1">Name:</dt>
<dd id="section-5.2.4-1.2">
  preserve-order<a href="#section-5.2.4-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.4-1.3">Type:</dt>
<dd id="section-5.2.4-1.4">
  Preference<a href="#section-5.2.4-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.4-1.5">Default:</dt>
<dd id="section-5.2.4-1.6">
  Require<a href="#section-5.2.4-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.4-2">This property specifies whether the application wishes to use a transport
protocol that can ensure that data is received by the application on the other
end in the same order as it was sent.<a href="#section-5.2.4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-0rtt">
<section id="section-5.2.5">
          <h4 id="name-use-0-rtt-session-establish">
<a href="#section-5.2.5" class="section-number selfRef">5.2.5. </a><a href="#name-use-0-rtt-session-establish" class="section-name selfRef">Use 0-RTT Session Establishment with an Idempotent Message</a>
          </h4>
<dl class="dlParallel" id="section-5.2.5-1">
            <dt id="section-5.2.5-1.1">Name:</dt>
<dd id="section-5.2.5-1.2">
  zero-rtt-msg<a href="#section-5.2.5-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.5-1.3">Type:</dt>
<dd id="section-5.2.5-1.4">
  Preference<a href="#section-5.2.5-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.5-1.5">Default:</dt>
<dd id="section-5.2.5-1.6">
  Ignore<a href="#section-5.2.5-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.5-2">This property specifies whether an application would like to supply a Message to
the transport protocol before Connection establishment, which will then be
reliably transferred to the other side before or during Connection
establishment, potentially multiple times (i.e., multiple copies of the message data
may be passed to the Remote Endpoint). See also <a href="#msg-idempotent" class="xref">Section 7.5.4</a>. Note that
disabling this property
has no effect for protocols that are not connection-oriented and do not protect
against duplicated messages, e.g., UDP.<a href="#section-5.2.5-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-multistream">
<section id="section-5.2.6">
          <h4 id="name-multistream-connections-in-">
<a href="#section-5.2.6" class="section-number selfRef">5.2.6. </a><a href="#name-multistream-connections-in-" class="section-name selfRef">Multistream Connections in Group</a>
          </h4>
<dl class="dlParallel" id="section-5.2.6-1">
            <dt id="section-5.2.6-1.1">Name:</dt>
<dd id="section-5.2.6-1.2">
  multistreaming<a href="#section-5.2.6-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.6-1.3">Type:</dt>
<dd id="section-5.2.6-1.4">
  Preference<a href="#section-5.2.6-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.6-1.5">Default:</dt>
<dd id="section-5.2.6-1.6">
  Prefer<a href="#section-5.2.6-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.6-2">This property specifies that the application would prefer multiple Connections
within a Connection Group to be provided by streams of a single underlying
transport connection where possible.<a href="#section-5.2.6-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-checksum-control-send">
<section id="section-5.2.7">
          <h4 id="name-full-checksum-coverage-on-s">
<a href="#section-5.2.7" class="section-number selfRef">5.2.7. </a><a href="#name-full-checksum-coverage-on-s" class="section-name selfRef">Full Checksum Coverage on Sending</a>
          </h4>
<dl class="dlParallel" id="section-5.2.7-1">
            <dt id="section-5.2.7-1.1">Name:</dt>
<dd id="section-5.2.7-1.2">
  per-msg-checksum-len-send<a href="#section-5.2.7-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.7-1.3">Type:</dt>
<dd id="section-5.2.7-1.4">
  Preference<a href="#section-5.2.7-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.7-1.5">Default:</dt>
<dd id="section-5.2.7-1.6">
  Require<a href="#section-5.2.7-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.7-2">This property specifies whether the application desires protection against
corruption for all data transmitted on this Connection. Disabling this property may enable
to control checksum coverage later (see <a href="#msg-checksum" class="xref">Section 7.5.6</a>).<a href="#section-5.2.7-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-checksum-control-receive">
<section id="section-5.2.8">
          <h4 id="name-full-checksum-coverage-on-r">
<a href="#section-5.2.8" class="section-number selfRef">5.2.8. </a><a href="#name-full-checksum-coverage-on-r" class="section-name selfRef">Full Checksum Coverage on Receiving</a>
          </h4>
<dl class="dlParallel" id="section-5.2.8-1">
            <dt id="section-5.2.8-1.1">Name:</dt>
<dd id="section-5.2.8-1.2">
  per-msg-checksum-len-recv<a href="#section-5.2.8-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.8-1.3">Type:</dt>
<dd id="section-5.2.8-1.4">
  Preference<a href="#section-5.2.8-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.8-1.5">Default:</dt>
<dd id="section-5.2.8-1.6">
  Require<a href="#section-5.2.8-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.8-2">This property specifies whether the application desires protection against
corruption for all data received on this Connection.<a href="#section-5.2.8-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-cc">
<section id="section-5.2.9">
          <h4 id="name-congestion-control">
<a href="#section-5.2.9" class="section-number selfRef">5.2.9. </a><a href="#name-congestion-control" class="section-name selfRef">Congestion control</a>
          </h4>
<dl class="dlParallel" id="section-5.2.9-1">
            <dt id="section-5.2.9-1.1">Name:</dt>
<dd id="section-5.2.9-1.2">
  congestion-control<a href="#section-5.2.9-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.9-1.3">Type:</dt>
<dd id="section-5.2.9-1.4">
  Preference<a href="#section-5.2.9-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.9-1.5">Default:</dt>
<dd id="section-5.2.9-1.6">
  Require<a href="#section-5.2.9-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.9-2">This property specifies whether the application would like the Connection to be
congestion controlled or not. Note that if a Connection is not congestion
controlled, an application using such a Connection should itself perform
congestion control in accordance with <span>[<a href="#RFC2914" class="xref">RFC2914</a>]</span>. Also note that reliability
is usually combined with congestion control in protocol implementations,
rendering "reliable but not congestion controlled" a request that is unlikely to
succeed.<a href="#section-5.2.9-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-interface">
<section id="section-5.2.10">
          <h4 id="name-interface-instance-or-type">
<a href="#section-5.2.10" class="section-number selfRef">5.2.10. </a><a href="#name-interface-instance-or-type" class="section-name selfRef">Interface Instance or Type</a>
          </h4>
<dl class="dlParallel" id="section-5.2.10-1">
            <dt id="section-5.2.10-1.1">Name:</dt>
<dd id="section-5.2.10-1.2">
  interface<a href="#section-5.2.10-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.10-1.3">Type:</dt>
<dd id="section-5.2.10-1.4">
  Set (Preference, Enumeration)<a href="#section-5.2.10-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.10-1.5">Default:</dt>
<dd id="section-5.2.10-1.6">
  Empty set (not setting a preference for any interface)<a href="#section-5.2.10-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.10-2">This property allows the application to select which specific network interfaces
or categories of interfaces it wants to <code>Require</code>, <code>Prohibit</code>, <code>Prefer</code>, or
<code>Avoid</code>. Note that marking a specific interface as <code>Require</code> strictly limits path
selection to a single interface, and may often lead to less flexible and resilient
connection establishment.<a href="#section-5.2.10-2" class="pilcrow">¶</a></p>
<p id="section-5.2.10-3">In contrast to other Selection Properties, this property is a tuple of an
(Enumerated) interface identifier and a preference, and can either be
implemented directly as such, or for making one preference available for each
interface and interface type available on the system.<a href="#section-5.2.10-3" class="pilcrow">¶</a></p>
<p id="section-5.2.10-4">The set of valid interface types is implementation- and system-specific. For
example, on a mobile device, there may be <code>Wi-Fi</code> and <code>Cellular</code> interface types
available; whereas on a desktop computer, there may be <code>Wi-Fi</code> and <code>Wired
Ethernet</code> interface types available. An implementation should provide all types
that are supported on the local system to all remote systems, to allow
applications to be written generically. For example, if a single implementation
is used on both mobile devices and desktop devices, it should define the
<code>Cellular</code> interface type for both systems, since an application may want to
always <code>Prohibit Cellular</code>. Note that marking a specific interface type as
<code>Require</code> limits path selection to a small set of interfaces, and leads to less
flexible and resilient connection establishment.<a href="#section-5.2.10-4" class="pilcrow">¶</a></p>
<p id="section-5.2.10-5">The set of interface types is expected to change over time as new access
technologies become available.<a href="#section-5.2.10-5" class="pilcrow">¶</a></p>
<p id="section-5.2.10-6">Interface types should not be treated as a proxy for properties of interfaces
such as metered or unmetered network access. If an application needs to prohibit
metered interfaces, this should be specified via Provisioning Domain attributes
(see <a href="#prop-pvd" class="xref">Section 5.2.11</a>) or another specific property.<a href="#section-5.2.10-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-pvd">
<section id="section-5.2.11">
          <h4 id="name-provisioning-domain-instanc">
<a href="#section-5.2.11" class="section-number selfRef">5.2.11. </a><a href="#name-provisioning-domain-instanc" class="section-name selfRef">Provisioning Domain Instance or Type</a>
          </h4>
<dl class="dlParallel" id="section-5.2.11-1">
            <dt id="section-5.2.11-1.1">Name:</dt>
<dd id="section-5.2.11-1.2">
  pvd<a href="#section-5.2.11-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.11-1.3">Type:</dt>
<dd id="section-5.2.11-1.4">
  Set (Preference, Enumeration)<a href="#section-5.2.11-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.11-1.5">Default:</dt>
<dd id="section-5.2.11-1.6">
  Empty set (not setting a preference for any PvD)<a href="#section-5.2.11-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.11-2">Similar to interface instances and types (see <a href="#prop-interface" class="xref">Section 5.2.10</a>), this property
allows the application to control path selection by selecting which specific
Provisioning Domains or categories of Provisioning Domains it wants to
<code>Require</code>, <code>Prohibit</code>, <code>Prefer</code>, or <code>Avoid</code>. Provisioning Domains define
consistent sets of network properties that may be more specific than network
interfaces <span>[<a href="#RFC7556" class="xref">RFC7556</a>]</span>.<a href="#section-5.2.11-2" class="pilcrow">¶</a></p>
<p id="section-5.2.11-3">As with interface instances and types, this property is a tuple of an (Enumerated)
PvD identifier and a preference, and can either be implemented directly as such,
or for making one preference available for each interface and interface type
available on the system.<a href="#section-5.2.11-3" class="pilcrow">¶</a></p>
<p id="section-5.2.11-4">The identification of a specific Provisioning Domain (PvD) is defined to be
implementation- and system-specific, since there is not a portable standard
format for a PvD identitfier. For example, this identifier may be a string name
or an integer. As with requiring specific interfaces, requiring a specific PvD
strictly limits path selection.<a href="#section-5.2.11-4" class="pilcrow">¶</a></p>
<p id="section-5.2.11-5">Categories or types of PvDs are also defined to be implementation- and
system-specific. These may be useful to identify a service that is provided by a
PvD. For example, if an application wants to use a PvD that provides a
Voice-Over-IP service on a Cellular network, it can use the relevant PvD type to
require some PvD that provides this service, without needing to look up a
particular instance. While this does restrict path selection, it is broader than
requiring specific PvD instances or interface instances, and should be preferred
over these options.<a href="#section-5.2.11-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="use-temporary-local-address">
<section id="section-5.2.12">
          <h4 id="name-use-temporary-local-address">
<a href="#section-5.2.12" class="section-number selfRef">5.2.12. </a><a href="#name-use-temporary-local-address" class="section-name selfRef">Use Temporary Local Address</a>
          </h4>
<dl class="dlParallel" id="section-5.2.12-1">
            <dt id="section-5.2.12-1.1">Name:</dt>
<dd id="section-5.2.12-1.2">
  use-temporary-local-address<a href="#section-5.2.12-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.12-1.3">Type:</dt>
<dd id="section-5.2.12-1.4">
  Preference<a href="#section-5.2.12-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.12-1.5">Default:</dt>
<dd id="section-5.2.12-1.6">
  Avoid for Listeners and Rendezvous Connections. Prefer for other Connections.<a href="#section-5.2.12-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.12-2">This property allows the application to express a preference for the use of
temporary local addresses, sometimes called "privacy" addresses <span>[<a href="#RFC4941" class="xref">RFC4941</a>]</span>.
Temporary addresses are generally used to prevent linking connections over time
when a stable address, sometimes called "permanent" address, is not needed.
Note that if an application Requires the use of temporary addresses, the
resulting Connection cannot use IPv4, as temporary addresses do not exist in
IPv4.<a href="#section-5.2.12-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="parallel-multipath">
<section id="section-5.2.13">
          <h4 id="name-parallel-use-of-multiple-pa">
<a href="#section-5.2.13" class="section-number selfRef">5.2.13. </a><a href="#name-parallel-use-of-multiple-pa" class="section-name selfRef">Parallel Use of Multiple Paths</a>
          </h4>
<dl class="dlParallel" id="section-5.2.13-1">
            <dt id="section-5.2.13-1.1">Name:</dt>
<dd id="section-5.2.13-1.2">
  multipath<a href="#section-5.2.13-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.13-1.3">Type:</dt>
<dd id="section-5.2.13-1.4">
  Enumeration<a href="#section-5.2.13-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.13-1.5">Default:</dt>
<dd id="section-5.2.13-1.6">
  Disabled<a href="#section-5.2.13-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.13-2">This property specifies whether an application wants to take advantage of
transferring data across multiple paths between the same end hosts. Using
multiple paths allows connections to migrate between interfaces as
availability and performance properties change. Possible values are:<a href="#section-5.2.13-2" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-5.2.13-3">
            <dt id="section-5.2.13-3.1">Disabled:</dt>
<dd id="section-5.2.13-3.2">
  The connection will not attempt using multiple paths once established<a href="#section-5.2.13-3.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.13-3.3">Handover:</dt>
<dd id="section-5.2.13-3.4">
  The connection should attempt to migrate between different paths upon interface availability changes<a href="#section-5.2.13-3.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.13-3.5">Interactive:</dt>
<dd id="section-5.2.13-3.6">
  The connection should attempt to use multiple paths in response to loss or delay upon individual paths<a href="#section-5.2.13-3.6" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.13-3.7">Aggregate:</dt>
<dd id="section-5.2.13-3.8">
  The connection should attempt to use multiple paths in parallel in order to maximize bandwidth<a href="#section-5.2.13-3.8" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.13-4">Enumeration values other than "Disabled" are interpreted as preferences.<a href="#section-5.2.13-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="direction-of-communication">
<section id="section-5.2.14">
          <h4 id="name-direction-of-communication">
<a href="#section-5.2.14" class="section-number selfRef">5.2.14. </a><a href="#name-direction-of-communication" class="section-name selfRef">Direction of communication</a>
          </h4>
<dl class="dlParallel" id="section-5.2.14-1">
            <dt id="section-5.2.14-1.1">Name:</dt>
<dd id="section-5.2.14-1.2">
  direction<a href="#section-5.2.14-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.14-1.3">Type:</dt>
<dd id="section-5.2.14-1.4">
  Enumeration<a href="#section-5.2.14-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.14-1.5">Default:</dt>
<dd id="section-5.2.14-1.6">
  Bidirectional<a href="#section-5.2.14-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.14-2">This property specifies whether an application wants to use the connection for sending and/or receiving data.  Possible values are:<a href="#section-5.2.14-2" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-5.2.14-3">
            <dt id="section-5.2.14-3.1">Bidirectional:</dt>
<dd id="section-5.2.14-3.2">
  The connection must support sending and receiving data<a href="#section-5.2.14-3.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.14-3.3">Unidirectional send:</dt>
<dd id="section-5.2.14-3.4">
  The connection must support sending data, and the application cannot use the connection to receive any data<a href="#section-5.2.14-3.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.14-3.5">Unidirectional receive:</dt>
<dd id="section-5.2.14-3.6">
  The connection must support receiving data, and the application cannot use the connection to send any data<a href="#section-5.2.14-3.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.14-4">Since unidirectional communication can be
supported by transports offering bidirectional communication, specifying
unidirectional communication may cause a transport stack that supports
bidirectional communication to be selected.<a href="#section-5.2.14-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-establish-retrans-notify">
<section id="section-5.2.15">
          <h4 id="name-notification-of-excessive-r">
<a href="#section-5.2.15" class="section-number selfRef">5.2.15. </a><a href="#name-notification-of-excessive-r" class="section-name selfRef">Notification of excessive retransmissions</a>
          </h4>
<dl class="dlParallel" id="section-5.2.15-1">
            <dt id="section-5.2.15-1.1">Name:</dt>
<dd id="section-5.2.15-1.2">
  retransmit-notify<a href="#section-5.2.15-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.15-1.3">Type:</dt>
<dd id="section-5.2.15-1.4">
  Preference<a href="#section-5.2.15-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.15-1.5">Default:</dt>
<dd id="section-5.2.15-1.6">
  Ignore<a href="#section-5.2.15-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.15-2">This property specifies whether an application considers it useful to be
informed in case sent data was retransmitted more often than a certain
threshold (see <a href="#conn-excss-retransmit" class="xref">Section 10.1.1</a> for configuration of this threshold).<a href="#section-5.2.15-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-soft-error">
<section id="section-5.2.16">
          <h4 id="name-notification-of-icmp-soft-e">
<a href="#section-5.2.16" class="section-number selfRef">5.2.16. </a><a href="#name-notification-of-icmp-soft-e" class="section-name selfRef">Notification of ICMP soft error message arrival</a>
          </h4>
<dl class="dlParallel" id="section-5.2.16-1">
            <dt id="section-5.2.16-1.1">Name:</dt>
<dd id="section-5.2.16-1.2">
  soft-error-notify<a href="#section-5.2.16-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.16-1.3">Type:</dt>
<dd id="section-5.2.16-1.4">
  Preference<a href="#section-5.2.16-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2.16-1.5">Default:</dt>
<dd id="section-5.2.16-1.6">
  Ignore<a href="#section-5.2.16-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.2.16-2">This property specifies whether an application considers it useful to be
informed when an ICMP error message arrives that does not force termination of a
connection. When set to true, received ICMP errors will be available as
SoftErrors, see <a href="#soft-errors" class="xref">Section 10.3.1</a>. Note that even if a protocol supporting this property is selected,
not all ICMP errors will necessarily be delivered, so applications cannot rely
on receiving them.<a href="#section-5.2.16-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="security-parameters">
<section id="section-5.3">
        <h3 id="name-specifying-security-paramet">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-specifying-security-paramet" class="section-name selfRef">Specifying Security Parameters and Callbacks</a>
        </h3>
<p id="section-5.3-1">Most security parameters, e.g., TLS ciphersuites, local identity and private key, etc.,
may be configured statically. Others are dynamically configured during connection establishment.
Thus, we partition security parameters and callbacks based on their place in the lifetime
of connection establishment. Similar to Transport Properties, both parameters and callbacks
are inherited during cloning (see <a href="#groups" class="xref">Section 6.4</a>).<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<div id="pre-connection-parameters">
<section id="section-5.3.1">
          <h4 id="name-pre-connection-parameters">
<a href="#section-5.3.1" class="section-number selfRef">5.3.1. </a><a href="#name-pre-connection-parameters" class="section-name selfRef">Pre-Connection Parameters</a>
          </h4>
<p id="section-5.3.1-1">Common parameters such as TLS ciphersuites are known to implementations. Clients should
use common safe defaults for these values whenever possible. However, as discussed in
<span>[<a href="#I-D.ietf-taps-transport-security" class="xref">I-D.ietf-taps-transport-security</a>]</span>, many transport security protocols require specific
security parameters and constraints from the client at the time of configuration and
actively during a handshake. These configuration parameters are created as follows:<a href="#section-5.3.1-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.3.1-2">
<pre>
SecurityParameters := NewSecurityParameters()
</pre><a href="#section-5.3.1-2" class="pilcrow">¶</a>
</div>
<p id="section-5.3.1-3">Security configuration parameters and sample usage follow:<a href="#section-5.3.1-3" class="pilcrow">¶</a></p>
<ul>
<li id="section-5.3.1-4.1">Local identity and private keys: Used to perform private key operations and prove one's
identity to the Remote Endpoint. (Note, if private keys are not available, e.g., since they are
stored in hardware security modules (HSMs), handshake callbacks must be used. See below for details.)<a href="#section-5.3.1-4.1" class="pilcrow">¶</a>
</li>
</ul>
<div class="artwork art-text alignLeft" id="section-5.3.1-5">
<pre>
SecurityParameters.AddIdentity(identity)
SecurityParameters.AddPrivateKey(privateKey, publicKey)
</pre><a href="#section-5.3.1-5" class="pilcrow">¶</a>
</div>
<ul>
<li id="section-5.3.1-6.1">Supported algorithms: Used to restrict what parameters are used by underlying transport security protocols.
When not specified, these algorithms should use known and safe defaults for the system. Parameters include:
ciphersuites, supported groups, and signature algorithms.<a href="#section-5.3.1-6.1" class="pilcrow">¶</a>
</li>
</ul>
<div class="artwork art-text alignLeft" id="section-5.3.1-7">
<pre>
SecurityParameters.AddSupportedGroup(secp256k1)
SecurityParameters.AddCiphersuite(TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256)
SecurityParameters.AddSignatureAlgorithm(ed25519)
</pre><a href="#section-5.3.1-7" class="pilcrow">¶</a>
</div>
<ul>
<li id="section-5.3.1-8.1">Session cache management: Used to tune cache capacity, lifetime, re-use,
and eviction policies, e.g., LRU or FIFO. Constants and policies for these interfaces
are implementation-specific.<a href="#section-5.3.1-8.1" class="pilcrow">¶</a>
</li>
</ul>
<div class="artwork art-text alignLeft" id="section-5.3.1-9">
<pre>
SecurityParameters.SetSessionCacheCapacity(MAX_CACHE_ELEMENTS)
SecurityParameters.SetSessionCacheLifetime(SECONDS_PER_DAY)
SecurityParameters.SetSessionCachePolicy(CachePolicyOneTimeUse)
</pre><a href="#section-5.3.1-9" class="pilcrow">¶</a>
</div>
<ul>
<li id="section-5.3.1-10.1">Pre-Shared Key import: Used to install pre-shared keying material established
out-of-band. Each pre-shared keying material is associated with some identity that typically identifies
its use or has some protocol-specific meaning to the Remote Endpoint.<a href="#section-5.3.1-10.1" class="pilcrow">¶</a>
</li>
</ul>
<div class="artwork art-text alignLeft" id="section-5.3.1-11">
<pre>
SecurityParameters.AddPreSharedKey(key, identity)
</pre><a href="#section-5.3.1-11" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="connection-establishment-callbacks">
<section id="section-5.3.2">
          <h4 id="name-connection-establishment-ca">
<a href="#section-5.3.2" class="section-number selfRef">5.3.2. </a><a href="#name-connection-establishment-ca" class="section-name selfRef">Connection Establishment Callbacks</a>
          </h4>
<p id="section-5.3.2-1">Security decisions, especially pertaining to trust, are not static. Once configured,
parameters may also be supplied during connection establishment. These are best
handled as client-provided callbacks. Security handshake callbacks that may be
invoked during connection establishment include:<a href="#section-5.3.2-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-5.3.2-2.1">Trust verification callback: Invoked when a Remote Endpoint's trust must be validated before the
handshake protocol can proceed.<a href="#section-5.3.2-2.1" class="pilcrow">¶</a>
</li>
</ul>
<div class="artwork art-text alignLeft" id="section-5.3.2-3">
<pre>
TrustCallback := NewCallback({
  // Handle trust, return the result
})
SecurityParameters.SetTrustVerificationCallback(trustCallback)
</pre><a href="#section-5.3.2-3" class="pilcrow">¶</a>
</div>
<ul>
<li id="section-5.3.2-4.1">Identity challenge callback: Invoked when a private key operation is required, e.g., when
local authentication is requested by a remote.<a href="#section-5.3.2-4.1" class="pilcrow">¶</a>
</li>
</ul>
<div class="artwork art-text alignLeft" id="section-5.3.2-5">
<pre>
ChallengeCallback := NewCallback({
  // Handle challenge
})
SecurityParameters.SetIdentityChallengeCallback(challengeCallback)
</pre><a href="#section-5.3.2-5" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="establishment">
<section id="section-6">
      <h2 id="name-establishing-connections">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-establishing-connections" class="section-name selfRef">Establishing Connections</a>
      </h2>
<p id="section-6-1">Before a Connection can be used for data transfer, it must be established.
Establishment ends the pre-establishment phase; all transport properties and
cryptographic parameter specification must be complete before establishment,
as these will be used to select candidate Paths and Protocol Stacks
for the Connection. Establishment may be active, using the Initiate() Action;
passive, using the Listen() Action; or simultaneous for peer-to-peer, using
the Rendezvous() Action. These Actions are described in the subsections below.<a href="#section-6-1" class="pilcrow">¶</a></p>
<div id="initiate">
<section id="section-6.1">
        <h3 id="name-active-open-initiate">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-active-open-initiate" class="section-name selfRef">Active Open: Initiate</a>
        </h3>
<p id="section-6.1-1">Active open is the Action of establishing a Connection to a Remote Endpoint presumed
to be listening for incoming Connection requests. Active open is used by clients in
client-server interactions. Active open is supported by this interface through the
Initiate Action:<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.1-2">
<pre>
Connection := Preconnection.Initiate(timeout?)
</pre><a href="#section-6.1-2" class="pilcrow">¶</a>
</div>
<p id="section-6.1-3">The timeout parameter specifies how long to wait before aborting Active open.
Before calling Initiate, the caller must have populated a Preconnection
Object with a Remote Endpoint specifier, optionally a Local Endpoint
specifier (if not specified, the system will attempt to determine a
suitable Local Endpoint), as well as all properties
necessary for candidate selection.<a href="#section-6.1-3" class="pilcrow">¶</a></p>
<p id="section-6.1-4">The Initiate() Action returns a Connection object. Once Initiate() has been
called, any changes to the Preconnection MUST NOT have any effect on the
Connection. However, the Preconnection can be reused, e.g., to Initiate
another Connection.<a href="#section-6.1-4" class="pilcrow">¶</a></p>
<p id="section-6.1-5">Once Initiate is called, the candidate Protocol Stack(s) may cause one or more
candidate transport-layer connections to be created to the specified remote
endpoint. The caller may immediately begin sending Messages on the Connection
(see <a href="#sending" class="xref">Section 7</a>) after calling Initate(); note that any idempotent data sent
while the Connection is being established may be sent multiple times or on
multiple candidates.<a href="#section-6.1-5" class="pilcrow">¶</a></p>
<p id="section-6.1-6">The following Events may be sent by the Connection after Initiate() is called:<a href="#section-6.1-6" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.1-7">
<pre>
Connection -&gt; Ready&lt;&gt;
</pre><a href="#section-6.1-7" class="pilcrow">¶</a>
</div>
<p id="section-6.1-8">The Ready Event occurs after Initiate has established a transport-layer
connection on at least one usable candidate Protocol Stack over at least one
candidate Path. No Receive Events (see <a href="#receiving" class="xref">Section 8</a>) will occur before
the Ready Event for Connections established using Initiate.<a href="#section-6.1-8" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.1-9">
<pre>
Connection -&gt; InitiateError&lt;reason?&gt;
</pre><a href="#section-6.1-9" class="pilcrow">¶</a>
</div>
<p id="section-6.1-10">An InitiateError occurs either when the set of transport properties and security
parameters cannot be fulfilled on a Connection for initiation (e.g. the set of
available Paths and/or Protocol Stacks meeting the constraints is empty) or
reconciled with the local and/or remote Endpoints; when the remote specifier
cannot be resolved; or when no transport-layer connection can be established to
the remote Endpoint (e.g. because the remote Endpoint is not accepting
connections, the application is prohibited from opening a Connection by the
operating system, or the establishment attempt has timed out for any other reason).<a href="#section-6.1-10" class="pilcrow">¶</a></p>
<p id="section-6.1-11">See also <a href="#initiate-and-send" class="xref">Section 7.8</a> to combine Connection establishment
and transmission of the first message in a single action.<a href="#section-6.1-11" class="pilcrow">¶</a></p>
</section>
</div>
<div id="listen">
<section id="section-6.2">
        <h3 id="name-passive-open-listen">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-passive-open-listen" class="section-name selfRef">Passive Open: Listen</a>
        </h3>
<p id="section-6.2-1">Passive open is the Action of waiting for Connections from remote Endpoints,
commonly used by servers in client-server interactions. Passive open is
supported by this interface through the Listen Action and returns a Listener object:<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.2-2">
<pre>
Listener := Preconnection.Listen()
</pre><a href="#section-6.2-2" class="pilcrow">¶</a>
</div>
<p id="section-6.2-3">Before calling Listen, the caller must have initialized the Preconnection
during the pre-establishment phase with a Local Endpoint specifier, as well
as all properties necessary for Protocol Stack selection. A Remote Endpoint
may optionally be specified, to constrain what Connections are accepted.<a href="#section-6.2-3" class="pilcrow">¶</a></p>
<p id="section-6.2-4">The Listen() Action returns a Listener object. Once Listen() has been called,
any changes to the Preconnection MUST NOT have any effect on the Listener. The
Preconnection can be disposed of or reused, e.g., to create another Listener.<a href="#section-6.2-4" class="pilcrow">¶</a></p>
<p id="section-6.2-5">Listening continues until the global context shuts down, or until the Stop
action is performed on the Listener object:<a href="#section-6.2-5" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.2-6">
<pre>
Listener.Stop()
</pre><a href="#section-6.2-6" class="pilcrow">¶</a>
</div>
<p id="section-6.2-7">After Stop() is called, the Listener can be disposed of.<a href="#section-6.2-7" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.2-8">
<pre>
Listener -&gt; ConnectionReceived&lt;Connection&gt;
</pre><a href="#section-6.2-8" class="pilcrow">¶</a>
</div>
<p id="section-6.2-9">The ConnectionReceived Event occurs when a Remote Endpoint has established a
transport-layer connection to this Listener (for Connection-oriented
transport protocols), or when the first Message has been received from the
Remote Endpoint (for Connectionless protocols), causing a new Connection to be
created. The resulting Connection is contained within the ConnectionReceived
Event, and is ready to use as soon as it is passed to the application via the
event.<a href="#section-6.2-9" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.2-10">
<pre>
Listener.SetNewConnectionLimit(value)
</pre><a href="#section-6.2-10" class="pilcrow">¶</a>
</div>
<p id="section-6.2-11">If the caller wants to rate-limit the number of inbound Connections that will be delivered,
it can set a cap using SetNewConnectionLimit(). This mechanism allows a server to
protect itself from being drained of resources. Each time a new Connection is delivered
by the ConnectionReceived Event, the value is automatically decremented. Once the
value reaches zero, no further Connections will be delivered until the caller sets the
limit to a higher value. By default, this value is Infinite. The caller is also able to reset
the value to Infinite at any point.<a href="#section-6.2-11" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.2-12">
<pre>
Listener -&gt; ListenError&lt;reason?&gt;
</pre><a href="#section-6.2-12" class="pilcrow">¶</a>
</div>
<p id="section-6.2-13">A ListenError occurs either when the Properties and Security Parameters of the Preconnection cannot be fulfilled for listening or cannot be reconciled with the Local Endpoint (and/or Remote Endpoint, if specified), when the Local Endpoint (or Remote Endpoint, if specified) cannot
be resolved, or when the application is prohibited from listening by policy.<a href="#section-6.2-13" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.2-14">
<pre>
Listener -&gt; Stopped&lt;&gt;
</pre><a href="#section-6.2-14" class="pilcrow">¶</a>
</div>
<p id="section-6.2-15">A Stopped Event occurs after the Listener has stopped listening.<a href="#section-6.2-15" class="pilcrow">¶</a></p>
</section>
</div>
<div id="rendezvous">
<section id="section-6.3">
        <h3 id="name-peer-to-peer-establishment-">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-peer-to-peer-establishment-" class="section-name selfRef">Peer-to-Peer Establishment: Rendezvous</a>
        </h3>
<p id="section-6.3-1">Simultaneous peer-to-peer Connection establishment is supported by the
Rendezvous() Action:<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.3-2">
<pre>
Preconnection.Rendezvous()
</pre><a href="#section-6.3-2" class="pilcrow">¶</a>
</div>
<p id="section-6.3-3">The Preconnection Object must be specified with both a Local Endpoint and a
Remote Endpoint, and also the transport properties and security parameters
needed for Protocol Stack selection.<a href="#section-6.3-3" class="pilcrow">¶</a></p>
<p id="section-6.3-4">The Rendezvous() Action causes the Preconnection to listen on the Local
Endpoint for an incoming Connection from the Remote Endpoint, while
simultaneously trying to establish a Connection from the Local Endpoint to the
Remote Endpoint. This corresponds to a TCP simultaneous open, for example.<a href="#section-6.3-4" class="pilcrow">¶</a></p>
<p id="section-6.3-5">The Rendezvous() Action returns a Connection object. Once Rendezvous() has been
called, any changes to the Preconnection MUST NOT have any effect on the
Connection. However, the Preconnection can be reused, e.g., for Rendezvous of
another Connection.<a href="#section-6.3-5" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.3-6">
<pre>
Preconnection -&gt; RendezvousDone&lt;Connection&gt;
</pre><a href="#section-6.3-6" class="pilcrow">¶</a>
</div>
<p id="section-6.3-7">The RendezvousDone&lt;&gt; Event occurs when a Connection is established with the
Remote Endpoint. For Connection-oriented transports, this occurs when the
transport-layer connection is established; for Connectionless transports,
it occurs when the first Message is received from the Remote Endpoint. The
resulting Connection is contained within the RendezvousDone&lt;&gt; Event, and is
ready to use as soon as it is passed to the application via the Event.<a href="#section-6.3-7" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.3-8">
<pre>
Preconnection -&gt; RendezvousError&lt;reason?&gt;
</pre><a href="#section-6.3-8" class="pilcrow">¶</a>
</div>
<p id="section-6.3-9">An RendezvousError occurs either when the Properties and Security Parameters of the Preconnection cannot be fulfilled
for rendezvous or cannot be reconciled with the Local and/or Remote Endpoints, when the Local Endpoint or Remote Endpoint cannot be resolved,
when no transport-layer connection can be established to the Remote Endpoint,
or when the application is prohibited from rendezvous by policy.<a href="#section-6.3-9" class="pilcrow">¶</a></p>
<p id="section-6.3-10">When using some NAT traversal protocols, e.g., Interactive Connectivity
Establishment (ICE) <span>[<a href="#RFC5245" class="xref">RFC5245</a>]</span>, it is expected that the Local Endpoint will
be configured with some method of discovering NAT bindings, e.g., a Session
Traversal Utilities for NAT (STUN) server. In this case, the Local Endpoint
may resolve to a mixture of local and server reflexive addresses. The
Resolve() action on the Preconnection can be used to discover these bindings:<a href="#section-6.3-10" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.3-11">
<pre>
[]Preconnection := Preconnection.Resolve()
</pre><a href="#section-6.3-11" class="pilcrow">¶</a>
</div>
<p id="section-6.3-12">The Resolve() call returns a list of Preconnection Objects, that represent the
concrete addresses, local and server reflexive, on which a Rendezvous() for
the Preconnection will listen for incoming Connections. These resolved
Preconnections will share all other Properties with the Preconnection from
which they are derived, though some Properties may be made more-specific by
the resolution process. This list can be passed to a peer via a signalling
protocol, such as SIP <span>[<a href="#RFC3261" class="xref">RFC3261</a>]</span> or WebRTC <span>[<a href="#RFC7478" class="xref">RFC7478</a>]</span>, to configure the
remote.<a href="#section-6.3-12" class="pilcrow">¶</a></p>
</section>
</div>
<div id="groups">
<section id="section-6.4">
        <h3 id="name-connection-groups">
<a href="#section-6.4" class="section-number selfRef">6.4. </a><a href="#name-connection-groups" class="section-name selfRef">Connection Groups</a>
        </h3>
<p id="section-6.4-1">Entangled Connections can be created using the Clone Action:<a href="#section-6.4-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.4-2">
<pre>
Connection := Connection.Clone()
</pre><a href="#section-6.4-2" class="pilcrow">¶</a>
</div>
<p id="section-6.4-3">Calling Clone on a Connection yields a group of two Connections: the parent
Connection on which Clone was called, and the resulting cloned Connection. These
connections are "entangled" with each other, and become part of a Connection
Group. Calling Clone on any of these two Connections adds a third Connection to
the Connection Group, and so on. Connections in a Connection Group generally share
Connection Properties. However, there may be exceptions, such as "Priority
(Connection)", see <a href="#conn-priority" class="xref">Section 10.1.3</a>. Like all other Properties, Priority is copied to the new Connection when calling Clone(), but it is not entangled: Changing Priority on one Connection does not change it on the other Connections in the same Connection Group.<a href="#section-6.4-3" class="pilcrow">¶</a></p>
<p id="section-6.4-4">In addition, incoming entangled Connections can be received by creating a
Listener on an existing connection:<a href="#section-6.4-4" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.4-5">
<pre>
Listener := Connection.ListenClone()
</pre><a href="#section-6.4-5" class="pilcrow">¶</a>
</div>
<p id="section-6.4-6">ListenClone() creates a Listener that listens on the same LocalEndpoint as the one the
cloned Connection is using. Any new Connection received by this Listener will be
entangled with the cloned Connection.
Changing one of the Connection Properties on one Connection in the group
changes it for all others. Message Properties, however, are not
entangled. For example, changing "Timeout for aborting Connection" (see
<a href="#conn-timeout" class="xref">Section 10.1.4</a>) on one Connection in a group will automatically change this
Connection Property for all Connections in the group in the same way. However,
changing "Lifetime" (see <a href="#msg-lifetime" class="xref">Section 7.5.1</a>) of a Message will only affect a
single Message on a single Connection, entangled or not.<a href="#section-6.4-6" class="pilcrow">¶</a></p>
<p id="section-6.4-7">If the underlying protocol supports multi-streaming, it is natural to use this
functionality to implement Clone. In that case, entangled Connections are
multiplexed together, giving them similar treatment not only inside endpoints
but also across the end-to-end Internet path.<a href="#section-6.4-7" class="pilcrow">¶</a></p>
<p id="section-6.4-8">Note that calling Clone() may result in on-the-wire signaling, e.g., to open a new
connection, depending on the underlying Protocol Stack. When Clone() leads to
multiple connections being opened instead of multi-streaming,
the transport system will ensure consistency of
Connection Properties by uniformly applying them to all underlying connections
in a group. Even in such a case, there are possibilities for a transport system
to implement prioritization within a Connection Group <span>[<a href="#TCP-COUPLING" class="xref">TCP-COUPLING</a>]</span> <span>[<a href="#RFC8699" class="xref">RFC8699</a>]</span>.<a href="#section-6.4-8" class="pilcrow">¶</a></p>
<p id="section-6.4-9">Attempts to clone a Connection can result in a CloneError:<a href="#section-6.4-9" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.4-10">
<pre>
Connection -&gt; CloneError&lt;reason?&gt;
</pre><a href="#section-6.4-10" class="pilcrow">¶</a>
</div>
<p id="section-6.4-11">The Connection Property "Priority" operates on entangled Connections as in <a href="#msg-priority" class="xref">Section 7.5.2</a>:
when allocating available network
capacity among Connections in a Connection Group, sends on Connections with
higher Priority values will be prioritized over sends on Connections with
lower Priority values. A transport system implementation should, if possible, assign
each Connection the capacity share (M-N) x C / M, where N is the Connection's
Priority value, M is the maximum Priority value used by all Connections in the
group and C is the total available capacity. However, the Priority setting is
purely advisory, and no guarantees are given about the way capacity is shared.
Each implementation is free to implement a way to share
capacity that it sees fit.<a href="#section-6.4-11" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sending">
<section id="section-7">
      <h2 id="name-sending-data">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-sending-data" class="section-name selfRef">Sending Data</a>
      </h2>
<p id="section-7-1">Once a Connection has been established, it can be used for sending data. Data is
sent as Messages, which allow the application to communicate the boundaries
of the data being transferred. By default, Send enqueues a complete Message,
and takes optional per-Message properties (see <a href="#send-basic" class="xref">Section 7.1</a>). All Send actions
are asynchronous, and deliver events (see <a href="#send-events" class="xref">Section 7.3</a>). Sending partial
Messages for streaming large data is also supported (see <a href="#send-partial" class="xref">Section 7.6</a>).<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">Messages are sent on a Connection using the Send action:<a href="#section-7-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7-3">
<pre>
Connection.Send(messageData, messageContext?, endOfMessage?)
</pre><a href="#section-7-3" class="pilcrow">¶</a>
</div>
<p id="section-7-4">where messageData is the data object to send.<a href="#section-7-4" class="pilcrow">¶</a></p>
<p id="section-7-5">The optional messageContext parameter allows adding Message Properties as
described in <a href="#message-props" class="xref">Section 7.5</a>.
Moreover, the messageContext can be used to identify Send Events related to a specific Message (see <a href="#send-events" class="xref">Section 7.3</a>) or to inspect meta-data related to the Message sent (see <a href="#msg-ctx" class="xref">Section 7.4</a>).<a href="#section-7-5" class="pilcrow">¶</a></p>
<p id="section-7-6">The optional endOfMessage parameter supports partial sending and is described in
<a href="#send-partial" class="xref">Section 7.6</a>.<a href="#section-7-6" class="pilcrow">¶</a></p>
<p id="section-7-7">Framers can be used to extend or modify the message data
with additional information that can be processed at the receiver to detect message
boundaries. This is further decribed in <a href="#framing" class="xref">Section 9</a>.<a href="#section-7-7" class="pilcrow">¶</a></p>
<div id="send-basic">
<section id="section-7.1">
        <h3 id="name-basic-sending">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-basic-sending" class="section-name selfRef">Basic Sending</a>
        </h3>
<p id="section-7.1-1">The most basic form of sending on a connection involves enqueuing a single Data
block as a complete Message, with default Message Properties. Message data is
transferred as an array of bytes, and the resulting object contains both the byte
array and the length of the array.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.1-2">
<pre>
messageData := "hello".bytes()
Connection.Send(messageData)
</pre><a href="#section-7.1-2" class="pilcrow">¶</a>
</div>
<p id="section-7.1-3">The interpretation of a Message to be sent is dependent on the implementation, and
on the constraints on the Protocol Stacks implied by the Connection's transport properties.
For example, a Message may be a single datagram for UDP Connections; or an HTTP
Request for HTTP Connections.<a href="#section-7.1-3" class="pilcrow">¶</a></p>
<p id="section-7.1-4">Some transport protocols can deliver arbitrarily sized Messages, but other
protocols constrain the maximum Message size. Applications can query the
Connection Property "Maximum Message size on send" (<a href="#conn-max-msg-send" class="xref">Section 10.1.8.3</a>) to determine the maximum size
allowed for a single Message. If a Message is too large to fit in the Maximum Message
Size for the Connection, the Send will fail with a SendError event (<a href="#send-error" class="xref">Section 7.3.3</a>). For
example, it is invalid to send a Message over a UDP connection that is larger than
the available datagram sending size.<a href="#section-7.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="send-replies">
<section id="section-7.2">
        <h3 id="name-sending-replies">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-sending-replies" class="section-name selfRef">Sending Replies</a>
        </h3>
<p id="section-7.2-1">When a message is sent in response to a message received, the application
may use the Message Context of the received Message to construct a Message Context for the reply.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.2-2">
<pre>
replyMessageContext := requestMessageContext.reply()
</pre><a href="#section-7.2-2" class="pilcrow">¶</a>
</div>
<p id="section-7.2-3">By using the <code>replyMessageContext</code>, the transport system is informed that
the message to be sent is a response and can map the response to the same underlying transport connection or stream the request was received from.
The concept of Message Contexts is described in <a href="#msg-ctx" class="xref">Section 7.4</a>.<a href="#section-7.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="send-events">
<section id="section-7.3">
        <h3 id="name-send-events">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-send-events" class="section-name selfRef">Send Events</a>
        </h3>
<p id="section-7.3-1">Like all Actions in this interface, the Send Action is asynchronous. There are
several Events that can be delivered in response to Sending a Message.
Exactly one Event (Sent, Expired, or SendError) will be delivered in reponse
to each call to Send.<a href="#section-7.3-1" class="pilcrow">¶</a></p>
<p id="section-7.3-2">Note that if partial Sends are used (<a href="#send-partial" class="xref">Section 7.6</a>), there will still be exactly
one Send Event delivered for each call to Send. For example, if a Message
expired while two requests to Send data for that Message are outstanding,
there will be two Expired events delivered.<a href="#section-7.3-2" class="pilcrow">¶</a></p>
<div id="sent">
<section id="section-7.3.1">
          <h4 id="name-sent">
<a href="#section-7.3.1" class="section-number selfRef">7.3.1. </a><a href="#name-sent" class="section-name selfRef">Sent</a>
          </h4>
<div class="artwork art-text alignLeft" id="section-7.3.1-1">
<pre>
Connection -&gt; Sent&lt;messageContext&gt;
</pre><a href="#section-7.3.1-1" class="pilcrow">¶</a>
</div>
<p id="section-7.3.1-2">The Sent Event occurs when a previous Send Action has completed, i.e., when
the data derived from the Message has been passed down or through the
underlying Protocol Stack and is no longer the responsibility of
this interface. The exact disposition of the Message (i.e.,
whether it has actually been transmitted, moved into a buffer on the network
interface, moved into a kernel buffer, and so on) when the Sent Event occurs
is implementation-specific. The Sent Event contains a reference to the Message
to which it applies.<a href="#section-7.3.1-2" class="pilcrow">¶</a></p>
<p id="section-7.3.1-3">Sent Events allow an application to obtain an understanding of the amount
of buffering it creates. That is, if an application calls the Send Action multiple
times without waiting for a Sent Event, it has created more buffer inside the
transport system than an application that always waits for the Sent Event before
calling the next Send Action.<a href="#section-7.3.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="expired">
<section id="section-7.3.2">
          <h4 id="name-expired">
<a href="#section-7.3.2" class="section-number selfRef">7.3.2. </a><a href="#name-expired" class="section-name selfRef">Expired</a>
          </h4>
<div class="artwork art-text alignLeft" id="section-7.3.2-1">
<pre>
Connection -&gt; Expired&lt;messageContext&gt;
</pre><a href="#section-7.3.2-1" class="pilcrow">¶</a>
</div>
<p id="section-7.3.2-2">The Expired Event occurs when a previous Send Action expired before completion;
i.e. when the Message was not sent before its Lifetime (see <a href="#msg-lifetime" class="xref">Section 7.5.1</a>)
expired. This is separate from SendError, as it is an expected behavior for
partially reliable transports. The Expired Event contains a reference to the
Message to which it applies.<a href="#section-7.3.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="send-error">
<section id="section-7.3.3">
          <h4 id="name-senderror">
<a href="#section-7.3.3" class="section-number selfRef">7.3.3. </a><a href="#name-senderror" class="section-name selfRef">SendError</a>
          </h4>
<div class="artwork art-text alignLeft" id="section-7.3.3-1">
<pre>
Connection -&gt; SendError&lt;messageContext, reason?&gt;
</pre><a href="#section-7.3.3-1" class="pilcrow">¶</a>
</div>
<p id="section-7.3.3-2">A SendError occurs when a Message could not be sent due to an error condition:
an attempt to send a Message which is too large for the system and
Protocol Stack to handle, some failure of the underlying Protocol Stack, or a
set of Message Properties not consistent with the Connection's transport
properties. The SendError contains a reference to the Message to which it applies.<a href="#section-7.3.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="msg-ctx">
<section id="section-7.4">
        <h3 id="name-message-contexts">
<a href="#section-7.4" class="section-number selfRef">7.4. </a><a href="#name-message-contexts" class="section-name selfRef">Message Contexts</a>
        </h3>
<p id="section-7.4-1">Using the MessageContext object, the application can set and retrieve meta-data of the message, including Message Properties (see <a href="#message-props" class="xref">Section 7.5</a>) and framing meta-data (see <a href="#framing-meta" class="xref">Section 9.2</a>).
Therefore, a MessageContext object can be passed to the Send action and is returned by each Send and Receive related event.<a href="#section-7.4-1" class="pilcrow">¶</a></p>
<p id="section-7.4-2">Message Properties can be set and queried using the Message Context:<a href="#section-7.4-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.4-3">
<pre>
MessageContext.add(scope?, parameter, value)
PropertyValue := MessageContext.get(scope?, property)
</pre><a href="#section-7.4-3" class="pilcrow">¶</a>
</div>
<p id="section-7.4-4">To get or set Message Properties, the optional scope parameter is left empty. To get or set meta-data for a Framer, the application has to pass a reference to this Framer as the scope parameter.<a href="#section-7.4-4" class="pilcrow">¶</a></p>
<p id="section-7.4-5">For MessageContexts returned by send events (see <a href="#send-events" class="xref">Section 7.3</a>) and receive events (see <a href="#receive-events" class="xref">Section 8.2</a>), the application can query information about the local and remote endpoint:<a href="#section-7.4-5" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.4-6">
<pre>
RemoteEndpoint := MessageContext.GetRemoteEndpoint()
LocalEndpoint := MessageContext.GetLocalEndpoint()
</pre><a href="#section-7.4-6" class="pilcrow">¶</a>
</div>
<p id="section-7.4-7">Message Contexts can also be used to send messages that are flagged as a reply to other messages, see <a href="#send-replies" class="xref">Section 7.2</a> for details.
If the message received was sent by the remote endpoint as a reply to an earlier message and the Protocol Stack provides this information, the MessageContext of the original request can be accessed using the Message Context of the reply:<a href="#section-7.4-7" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.4-8">
<pre>
RequestMessageContext := MessageContext.GetOriginalRequest()
</pre><a href="#section-7.4-8" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="message-props">
<section id="section-7.5">
        <h3 id="name-message-properties">
<a href="#section-7.5" class="section-number selfRef">7.5. </a><a href="#name-message-properties" class="section-name selfRef">Message Properties</a>
        </h3>
<p id="section-7.5-1">Applications may need to annotate the Messages they send with extra information
to control how data is scheduled and processed by the transport protocols in the
Connection. Therefore a message context containing these properties can be passed to the Send Action. For other uses of the message context, see <a href="#msg-ctx" class="xref">Section 7.4</a>.<a href="#section-7.5-1" class="pilcrow">¶</a></p>
<p id="section-7.5-2">Note that Message Properties are per-Message, not per-Send if partial Messages
are sent (<a href="#send-partial" class="xref">Section 7.6</a>). All data blocks associated with a single Message
share properties specified in the Message Contexts. For example, it would not
make sense to have the beginning of a Message expire, but allow the end of a
Message to still be sent.<a href="#section-7.5-2" class="pilcrow">¶</a></p>
<p id="section-7.5-3">A MessageContext object contains metadata for  Messages to be sent or received.<a href="#section-7.5-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.5-4">
<pre>
messageData := "hello".bytes()
messageContext := NewMessageContext()
messageContext.add(parameter, value)
Connection.Send(messageData, messageContext)
</pre><a href="#section-7.5-4" class="pilcrow">¶</a>
</div>
<p id="section-7.5-5">The simpler form of Send, which does not take any messageContext, is equivalent to passing a default MessageContext without adding any Message Properties to it.<a href="#section-7.5-5" class="pilcrow">¶</a></p>
<p id="section-7.5-6">If an application wants to override Message Properties for a specific message,
it can acquire an empty MessageContext Object and add all desired Message
Properties to that Object. It can then reuse the same messageContext Object
for sending multiple Messages with the same properties.<a href="#section-7.5-6" class="pilcrow">¶</a></p>
<p id="section-7.5-7">Properties may be added to a MessageContext object only before the context is used
for sending. Once a messageContext has been used with a Send call, modifying any
of its properties is invalid.<a href="#section-7.5-7" class="pilcrow">¶</a></p>
<p id="section-7.5-8">Message Properties may be inconsistent with the properties of the Protocol Stacks
underlying the Connection on which a given Message is sent. For example,
a Connection must provide reliability to allow setting an infinite value for the
lifetime property of a Message. Sending a Message with Message Properties
inconsistent with the Selection Properties of the Connection yields an error.<a href="#section-7.5-8" class="pilcrow">¶</a></p>
<p id="section-7.5-9">The following Message Properties are supported:<a href="#section-7.5-9" class="pilcrow">¶</a></p>
<div id="msg-lifetime">
<section id="section-7.5.1">
          <h4 id="name-lifetime">
<a href="#section-7.5.1" class="section-number selfRef">7.5.1. </a><a href="#name-lifetime" class="section-name selfRef">Lifetime</a>
          </h4>
<dl class="dlParallel" id="section-7.5.1-1">
            <dt id="section-7.5.1-1.1">Name:</dt>
<dd id="section-7.5.1-1.2">
  msg-lifetime<a href="#section-7.5.1-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.1-1.3">Type:</dt>
<dd id="section-7.5.1-1.4">
  Numeric<a href="#section-7.5.1-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.1-1.5">Default:</dt>
<dd id="section-7.5.1-1.6">
  infinite<a href="#section-7.5.1-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-7.5.1-2">Lifetime specifies how long a particular Message can wait to be sent to the
remote endpoint before it is irrelevant and no longer needs to be
(re-)transmitted. This is a hint to the transport system - it is not guaranteed
that a Message will not be sent when its Lifetime has expired.<a href="#section-7.5.1-2" class="pilcrow">¶</a></p>
<p id="section-7.5.1-3">Setting a Message's Lifetime to infinite indicates that the application does
not wish to apply a time constraint on the transmission of the Message, but it does not express a need for
reliable delivery; reliability is adjustable per Message via the "Reliable Data Transfer (Message)"
property (see <a href="#msg-reliable-message" class="xref">Section 7.5.7</a>). The type and units of Lifetime are implementation-specific.<a href="#section-7.5.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="msg-priority">
<section id="section-7.5.2">
          <h4 id="name-priority">
<a href="#section-7.5.2" class="section-number selfRef">7.5.2. </a><a href="#name-priority" class="section-name selfRef">Priority</a>
          </h4>
<dl class="dlParallel" id="section-7.5.2-1">
            <dt id="section-7.5.2-1.1">Name:</dt>
<dd id="section-7.5.2-1.2">
  msg-prio<a href="#section-7.5.2-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.2-1.3">Type:</dt>
<dd id="section-7.5.2-1.4">
  Integer (non-negative)<a href="#section-7.5.2-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.2-1.5">Default:</dt>
<dd id="section-7.5.2-1.6">
  100<a href="#section-7.5.2-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-7.5.2-2">This property represents a hierarchy of priorities.
It can specify the priority of a Message, relative to other Messages sent over the
same Connection.<a href="#section-7.5.2-2" class="pilcrow">¶</a></p>
<p id="section-7.5.2-3">A Message with Priority 0 will yield to a Message with Priority 1, which will
yield to a Message with Priority 2, and so on. Priorities may be used as a
sender-side scheduling construct only, or be used to specify priorities on the
wire for Protocol Stacks supporting prioritization.<a href="#section-7.5.2-3" class="pilcrow">¶</a></p>
<p id="section-7.5.2-4">Note that this property is not a per-message override of the connection Priority
- see <a href="#conn-priority" class="xref">Section 10.1.3</a>. Both Priority properties may interact, but can be used
independently and be realized by different mechanisms.<a href="#section-7.5.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="msg-ordered">
<section id="section-7.5.3">
          <h4 id="name-ordered">
<a href="#section-7.5.3" class="section-number selfRef">7.5.3. </a><a href="#name-ordered" class="section-name selfRef">Ordered</a>
          </h4>
<dl class="dlParallel" id="section-7.5.3-1">
            <dt id="section-7.5.3-1.1">Name:</dt>
<dd id="section-7.5.3-1.2">
  msg-ordered<a href="#section-7.5.3-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.3-1.3">Type:</dt>
<dd id="section-7.5.3-1.4">
  Boolean<a href="#section-7.5.3-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.3-1.5">Default:</dt>
<dd id="section-7.5.3-1.6">
  true<a href="#section-7.5.3-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-7.5.3-2">If true, it specifies that the receiver-side transport protocol stack may only deliver the Message to the receiving application after the previous ordered Message which was passed to the same Connection via the Send
Action, when such a Message exists. If false, the Message may be delivered to the receiving application out of order.
This property is used for protocols that support preservation of data ordering,
see <a href="#prop-ordering" class="xref">Section 5.2.4</a>, but allow out-of-order delivery for certain messages, e.g., by multiplexing independent messages onto
different streams.<a href="#section-7.5.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="msg-idempotent">
<section id="section-7.5.4">
          <h4 id="name-idempotent">
<a href="#section-7.5.4" class="section-number selfRef">7.5.4. </a><a href="#name-idempotent" class="section-name selfRef">Idempotent</a>
          </h4>
<dl class="dlParallel" id="section-7.5.4-1">
            <dt id="section-7.5.4-1.1">Name:</dt>
<dd id="section-7.5.4-1.2">
  idempotent<a href="#section-7.5.4-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.4-1.3">Type:</dt>
<dd id="section-7.5.4-1.4">
  Boolean<a href="#section-7.5.4-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.4-1.5">Default:</dt>
<dd id="section-7.5.4-1.6">
  false<a href="#section-7.5.4-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-7.5.4-2">If true, it specifies that a Message is safe to send to the remote endpoint
more than once for a single Send Action. It is used to mark data safe for
certain 0-RTT establishment techniques, where retransmission of the 0-RTT data
may cause the remote application to receive the Message multiple times.<a href="#section-7.5.4-2" class="pilcrow">¶</a></p>
<p id="section-7.5.4-3">Note that for protocols that do not protect against duplicated messages,
e.g., UDP, all messages MUST be marked as Idempotent.
In order to enable protocol selection to choose such a protocol,
Idempotent MUST be added to the TransportProperties passed to the
Preconnection. If such a protocol was chosen, disabling Idempotent on
individual messages MUST result in a SendError.<a href="#section-7.5.4-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="msg-final">
<section id="section-7.5.5">
          <h4 id="name-final">
<a href="#section-7.5.5" class="section-number selfRef">7.5.5. </a><a href="#name-final" class="section-name selfRef">Final</a>
          </h4>
<dl class="dlParallel" id="section-7.5.5-1">
            <dt id="section-7.5.5-1.1">Type:</dt>
<dd id="section-7.5.5-1.2">
  Boolean<a href="#section-7.5.5-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.5-1.3">Name:</dt>
<dd id="section-7.5.5-1.4">
  final<a href="#section-7.5.5-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.5-1.5">Default:</dt>
<dd id="section-7.5.5-1.6">
  false<a href="#section-7.5.5-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-7.5.5-2">If true, this Message is the last one that
the application will send on a Connection. This allows underlying protocols
to indicate to the Remote Endpoint that the Connection has been effectively
closed in the sending direction. For example, TCP-based Connections can
send a FIN once a Message marked as Final has been completely sent,
indicated by marking endOfMessage. Protocols that do not support signalling
the end of a Connection in a given direction will ignore this property.<a href="#section-7.5.5-2" class="pilcrow">¶</a></p>
<p id="section-7.5.5-3">Note that a Final Message must always be sorted to the end of a list of Messages.
The Final property overrides Priority and any other property that would re-order
Messages. If another Message is sent after a Message marked as Final has already
been sent on a Connection, the Send Action for the new Message will cause a SendError Event.<a href="#section-7.5.5-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="msg-checksum">
<section id="section-7.5.6">
          <h4 id="name-corruption-protection-lengt">
<a href="#section-7.5.6" class="section-number selfRef">7.5.6. </a><a href="#name-corruption-protection-lengt" class="section-name selfRef">Corruption Protection Length</a>
          </h4>
<dl class="dlParallel" id="section-7.5.6-1">
            <dt id="section-7.5.6-1.1">Name:</dt>
<dd id="section-7.5.6-1.2">
  msg-checksum-len<a href="#section-7.5.6-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.6-1.3">Type:</dt>
<dd id="section-7.5.6-1.4">
  Integer (non-negative with -1 as special value)<a href="#section-7.5.6-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.6-1.5">Default:</dt>
<dd id="section-7.5.6-1.6">
  -1 (full coverage)<a href="#section-7.5.6-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-7.5.6-2">This property specifies the minimum length of the section of the Message,
starting from byte 0, that the application requires to be delivered without
corruption due to lower layer errors. It is used to specify options for simple
integrity protection via checksums. A value of 0 means that no checksum
is required, and -1 means
that the entire Message is protected by a checksum. Only full coverage is
guaranteed, any other requests are advisory, meaning that full coverage is applied
anyway.<a href="#section-7.5.6-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="msg-reliable-message">
<section id="section-7.5.7">
          <h4 id="name-reliable-data-transfer-mess">
<a href="#section-7.5.7" class="section-number selfRef">7.5.7. </a><a href="#name-reliable-data-transfer-mess" class="section-name selfRef">Reliable Data Transfer (Message)</a>
          </h4>
<dl class="dlParallel" id="section-7.5.7-1">
            <dt id="section-7.5.7-1.1">Name:</dt>
<dd id="section-7.5.7-1.2">
  msg-reliable<a href="#section-7.5.7-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.7-1.3">Type:</dt>
<dd id="section-7.5.7-1.4">
  Boolean<a href="#section-7.5.7-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.7-1.5">Default:</dt>
<dd id="section-7.5.7-1.6">
  true<a href="#section-7.5.7-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-7.5.7-2">When true, this property specifies that a message should be sent in such a way
that the transport protocol ensures all data is received on the other side
without corruption. Changing the 'Reliable Data Transfer' property on Messages
is only possible for Connections that were established with the Selection Property 'Configure Per-Message Reliability' enabled.
When this is not the case, changing it will generate an error.
Disabling this property indicates that the transport system may disable retransmissions
or other reliability mechanisms for this particular Message, but such disabling is not guaranteed.<a href="#section-7.5.7-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="send-profile">
<section id="section-7.5.8">
          <h4 id="name-message-capacity-profile-ov">
<a href="#section-7.5.8" class="section-number selfRef">7.5.8. </a><a href="#name-message-capacity-profile-ov" class="section-name selfRef">Message Capacity Profile Override</a>
          </h4>
<dl class="dlParallel" id="section-7.5.8-1">
            <dt id="section-7.5.8-1.1">Name:</dt>
<dd id="section-7.5.8-1.2">
  msg-capacity-profile<a href="#section-7.5.8-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.8-1.3">Type:</dt>
<dd id="section-7.5.8-1.4">
  Enumeration<a href="#section-7.5.8-1.4" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-7.5.8-2">This enumerated property specifies the application's preferred tradeoffs for
sending this Message; it is a per-Message override of the Capacity Profile
connection property (see <a href="#prop-cap-profile" class="xref">Section 10.1.6</a>).<a href="#section-7.5.8-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="send-singular">
<section id="section-7.5.9">
          <h4 id="name-singular-transmission">
<a href="#section-7.5.9" class="section-number selfRef">7.5.9. </a><a href="#name-singular-transmission" class="section-name selfRef">Singular Transmission</a>
          </h4>
<dl class="dlParallel" id="section-7.5.9-1">
            <dt id="section-7.5.9-1.1">Name:</dt>
<dd id="section-7.5.9-1.2">
  singular-transmission<a href="#section-7.5.9-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.9-1.3">Type:</dt>
<dd id="section-7.5.9-1.4">
  Boolean<a href="#section-7.5.9-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-7.5.9-1.5">Default:</dt>
<dd id="section-7.5.9-1.6">
  false<a href="#section-7.5.9-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-7.5.9-2">This property specifies that a message should be sent and received as a single
packet without transport-layer segmentation or network-layer fragmentation, if possible.
Attempts to send a message with this property set with a size greater to the
transport's current estimate of its maximum transmission segment size will
result in a <code>SendError</code>. When used with transports supporting this functionality
and running over IP version 4, the Don't Fragment bit will be set.<a href="#section-7.5.9-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="send-partial">
<section id="section-7.6">
        <h3 id="name-partial-sends">
<a href="#section-7.6" class="section-number selfRef">7.6. </a><a href="#name-partial-sends" class="section-name selfRef">Partial Sends</a>
        </h3>
<p id="section-7.6-1">It is not always possible for an application to send all data associated with
a Message in a single Send Action. The Message data may be too large for
the application to hold in memory at one time, or the length of the Message
may be unknown or unbounded.<a href="#section-7.6-1" class="pilcrow">¶</a></p>
<p id="section-7.6-2">Partial Message sending is supported by passing an endOfMessage boolean
parameter to the Send Action. This value is always true by default, and
the simpler forms of Send are equivalent to passing true for endOfMessage.<a href="#section-7.6-2" class="pilcrow">¶</a></p>
<p id="section-7.6-3">The following example sends a Message in two separate calls to Send.<a href="#section-7.6-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.6-4">
<pre>
messageContext := NewMessageContext()
messageContext.add(parameter, value)

messageData := "hel".bytes()
endOfMessage := false
Connection.Send(messageData, messageContext, endOfMessage)

messageData := "lo".bytes()
endOfMessage := true
Connection.Send(messageData, messageContext, endOfMessage)
</pre><a href="#section-7.6-4" class="pilcrow">¶</a>
</div>
<p id="section-7.6-5">All data sent with the same MessageContext object will be treated as belonging
to the same Message, and will constitute an in-order series until the
endOfMessage is marked. Once the end of the Message is marked, the
MessageContext object may be re-used as a new Message with identical parameters.<a href="#section-7.6-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="send-batching">
<section id="section-7.7">
        <h3 id="name-batching-sends">
<a href="#section-7.7" class="section-number selfRef">7.7. </a><a href="#name-batching-sends" class="section-name selfRef">Batching Sends</a>
        </h3>
<p id="section-7.7-1">To reduce the overhead of sending multiple small Messages on a Connection, the
application may want to batch several Send actions together. This provides a hint to
the system that the sending of these Messages should be coalesced when possible,
and that sending any of the batched Messages may be delayed until the last Message
in the batch is enqueued.<a href="#section-7.7-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.7-2">
<pre>
Connection.Batch(
    Connection.Send(messageData)
    Connection.Send(messageData)
)
</pre><a href="#section-7.7-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="initiate-and-send">
<section id="section-7.8">
        <h3 id="name-send-on-active-open-initiat">
<a href="#section-7.8" class="section-number selfRef">7.8. </a><a href="#name-send-on-active-open-initiat" class="section-name selfRef">Send on Active Open: InitiateWithSend</a>
        </h3>
<p id="section-7.8-1">For application-layer protocols where the Connection initiator also sends the
first message, the InitiateWithSend() action combines Connection initiation with
a first Message sent:<a href="#section-7.8-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.8-2">
<pre>
Connection := Preconnection.InitiateWithSend(messageData, messageContext?, timeout?)
</pre><a href="#section-7.8-2" class="pilcrow">¶</a>
</div>
<p id="section-7.8-3">Whenever possible, a messageContext should be provided to declare the message passed to InitiateWithSend
as idempotent. This allows the transport system to make use of 0-RTT establishment in case this is supported
by the available protocol stacks. When the selected stack(s) do not support transmitting data upon connection
establishment, InitiateWithSend is identical to Initiate() followed by Send().<a href="#section-7.8-3" class="pilcrow">¶</a></p>
<p id="section-7.8-4">Neither partial sends nor send batching are supported by InitiateWithSend().<a href="#section-7.8-4" class="pilcrow">¶</a></p>
<p id="section-7.8-5">The Events that may be sent after InitiateWithSend() are equivalent to those
that would be sent by an invocation of Initate() followed immediately by an
invocation of Send(), with the caveat that a send failure that occurs because
the Connection could not be established will not result in a
SendError separate from the InitiateError signaling the failure of Connection
establishment.<a href="#section-7.8-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="receiving">
<section id="section-8">
      <h2 id="name-receiving-data">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-receiving-data" class="section-name selfRef">Receiving Data</a>
      </h2>
<p id="section-8-1">Once a Connection is established, it can be used for receiving data. As with
sending, data is received in terms of Messages. Receiving is an asynchronous
operation, in which each call to Receive enqueues a request to receive new
data from the connection. Once data has been received, or an error is encountered,
an event will be delivered to complete any pending Receive requests (see <a href="#receive-events" class="xref">Section 8.2</a>). If Messages arrive at the transport system before Receive requests are issued, ensuing Receive requests will first operate on these Messages before awaiting any further Messages.<a href="#section-8-1" class="pilcrow">¶</a></p>
<div id="enqueuing-receives">
<section id="section-8.1">
        <h3 id="name-enqueuing-receives">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-enqueuing-receives" class="section-name selfRef">Enqueuing Receives</a>
        </h3>
<p id="section-8.1-1">Receive takes two parameters to specify the length of data that an application
is willing to receive, both of which are optional and have default values if not
specified.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.1-2">
<pre>
Connection.Receive(minIncompleteLength?, maxLength?)
</pre><a href="#section-8.1-2" class="pilcrow">¶</a>
</div>
<p id="section-8.1-3">By default, Receive will try to deliver complete Messages in a single event (<a href="#receive-complete" class="xref">Section 8.2.1</a>).<a href="#section-8.1-3" class="pilcrow">¶</a></p>
<p id="section-8.1-4">The application can set a minIncompleteLength value to indicate the smallest partial
Message data size in bytes that should be delivered in response to this Receive. By default,
this value is infinite, which means that only complete Messages should be delivered (see <a href="#receive-partial" class="xref">Section 8.2.2</a>
and <a href="#framing" class="xref">Section 9</a> for more information on how this is accomplished).
If this value is set to some smaller value, the associated receive event will be triggered
only when at least that many bytes are available, or the Message is complete with fewer
bytes, or the system needs to free up memory. Applications should always
check the length of the data delivered to the receive event and not assume
it will be as long as minIncompleteLength in the case of shorter complete Messages
or memory issues.<a href="#section-8.1-4" class="pilcrow">¶</a></p>
<p id="section-8.1-5">The maxLength argument indicates the maximum size of a Message in bytes
the application is currently prepared to receive. The default
value for maxLength is infinite. If an incoming Message is larger than the
minimum of this size and the maximum Message size on receive for
the Connection's Protocol Stack, it will be delivered via ReceivedPartial
events (<a href="#receive-partial" class="xref">Section 8.2.2</a>).<a href="#section-8.1-5" class="pilcrow">¶</a></p>
<p id="section-8.1-6">Note that maxLength does not guarantee that the application will receive that many
bytes if they are available; the interface may return ReceivedPartial events with less
data than maxLength according to implementation constraints. Note also that maxLength
and minIncompleteLength are intended only to manage buffering, and are not interpreted
as a receiver preference for message reordering.<a href="#section-8.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="receive-events">
<section id="section-8.2">
        <h3 id="name-receive-events">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-receive-events" class="section-name selfRef">Receive Events</a>
        </h3>
<p id="section-8.2-1">Each call to Receive will be paired with a single Receive Event, which can be a success
or an error. This allows an application to provide backpressure to the transport stack
when it is temporarily not ready to receive messages.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<div id="receive-complete">
<section id="section-8.2.1">
          <h4 id="name-received">
<a href="#section-8.2.1" class="section-number selfRef">8.2.1. </a><a href="#name-received" class="section-name selfRef">Received</a>
          </h4>
<div class="artwork art-text alignLeft" id="section-8.2.1-1">
<pre>
Connection -&gt; Received&lt;messageData, messageContext&gt;
</pre><a href="#section-8.2.1-1" class="pilcrow">¶</a>
</div>
<p id="section-8.2.1-2">A Received event indicates the delivery of a complete Message.
It contains two objects, the received bytes as messageData, and the metadata and properties of the received Message as messageContext.<a href="#section-8.2.1-2" class="pilcrow">¶</a></p>
<p id="section-8.2.1-3">The messageData object provides access to the bytes that were received for this Message, along with the length of the byte array.
The messageContext is provided to enable retrieving metadata about the message and referring to the message, e.g., to send replies and map responses to their requests. See <a href="#msg-ctx" class="xref">Section 7.4</a> for details.<a href="#section-8.2.1-3" class="pilcrow">¶</a></p>
<p id="section-8.2.1-4">See <a href="#framing" class="xref">Section 9</a> for handling Message framing in situations where the Protocol
Stack only provides a byte-stream transport.<a href="#section-8.2.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="receive-partial">
<section id="section-8.2.2">
          <h4 id="name-receivedpartial">
<a href="#section-8.2.2" class="section-number selfRef">8.2.2. </a><a href="#name-receivedpartial" class="section-name selfRef">ReceivedPartial</a>
          </h4>
<div class="artwork art-text alignLeft" id="section-8.2.2-1">
<pre>
Connection -&gt; ReceivedPartial&lt;messageData, messageContext, endOfMessage&gt;
</pre><a href="#section-8.2.2-1" class="pilcrow">¶</a>
</div>
<p id="section-8.2.2-2">If a complete Message cannot be delivered in one event, one part of the Message
may be delivered with a ReceivedPartial event. In order to continue to receive more
of the same Message, the application must invoke Receive again.<a href="#section-8.2.2-2" class="pilcrow">¶</a></p>
<p id="section-8.2.2-3">Multiple invocations of ReceivedPartial deliver data for the same Message by
passing the same MessageContext, until the endOfMessage flag is delivered or a
ReceiveError occurs. All partial blocks of a single Message are delivered in
order without gaps. This event does not support delivering discontiguous partial
Messages.<a href="#section-8.2.2-3" class="pilcrow">¶</a></p>
<p id="section-8.2.2-4">If the minIncompleteLength in the Receive request was set to be infinite (indicating
a request to receive only complete Messages), the ReceivedPartial event may still be
delivered if one of the following conditions is true:<a href="#section-8.2.2-4" class="pilcrow">¶</a></p>
<ul>
<li id="section-8.2.2-5.1">the underlying Protocol Stack supports message boundary preservation, and
the size of the Message is larger than the buffers available for a single
message;<a href="#section-8.2.2-5.1" class="pilcrow">¶</a>
</li>
<li id="section-8.2.2-5.2">the underlying Protocol Stack does not support message boundary
preservation, and the Message Framer (see <a href="#framing" class="xref">Section 9</a>) cannot determine
the end of the message using the buffer space it has available; or<a href="#section-8.2.2-5.2" class="pilcrow">¶</a>
</li>
<li id="section-8.2.2-5.3">the underlying Protocol Stack does not support message boundary
preservation, and no Message Framer was supplied by the application<a href="#section-8.2.2-5.3" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-8.2.2-6">Note that in the absence of message boundary preservation or
a Message Framer, all bytes received on the Connection will be represented as one
large Message of indeterminate length.<a href="#section-8.2.2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="receive-error">
<section id="section-8.2.3">
          <h4 id="name-receiveerror">
<a href="#section-8.2.3" class="section-number selfRef">8.2.3. </a><a href="#name-receiveerror" class="section-name selfRef">ReceiveError</a>
          </h4>
<div class="artwork art-text alignLeft" id="section-8.2.3-1">
<pre>
Connection -&gt; ReceiveError&lt;messageContext, reason?&gt;
</pre><a href="#section-8.2.3-1" class="pilcrow">¶</a>
</div>
<p id="section-8.2.3-2">A ReceiveError occurs when data is received by the underlying Protocol Stack
that cannot be fully retrieved or parsed, or when some other indication is
received that reception has failed. In contrast, conditions that irrevocably lead to
the termination of the Connection are signaled using ConnectionError instead
(see <a href="#termination" class="xref">Section 11</a>).<a href="#section-8.2.3-2" class="pilcrow">¶</a></p>
<p id="section-8.2.3-3">The ReceiveError event passes an optional associated MessageContext. This may
indicate that a Message that was being partially received previously, but had not
completed, encountered an error and will not be completed.<a href="#section-8.2.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="recv-meta">
<section id="section-8.3">
        <h3 id="name-receive-message-properties">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-receive-message-properties" class="section-name selfRef">Receive Message Properties</a>
        </h3>
<p id="section-8.3-1">Each Message Context may contain metadata from protocols in the Protocol Stack;
which metadata is available is Protocol Stack dependent. These are exposed though additional read-only Message Properties that can be queried from the MessageContext object (see <a href="#msg-ctx" class="xref">Section 7.4</a>) passed by the receive event.
The following metadata values are supported:<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<div id="receive-ecn">
<section id="section-8.3.1">
          <h4 id="name-udp-lite-specific-property-">
<a href="#section-8.3.1" class="section-number selfRef">8.3.1. </a><a href="#name-udp-lite-specific-property-" class="section-name selfRef">UDP(-Lite)-specific Property: ECN</a>
          </h4>
<p id="section-8.3.1-1">When available, Message metadata carries the value of the Explicit Congestion
Notification (ECN) field. This information can be used for logging and debugging
purposes, and for building applications which need access to information about
the transport internals for their own operation. This property is specific to UDP
and UDP-Lite because these protocols do not implement congestion control,
and hence expose this functionality to the application.<a href="#section-8.3.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="receive-early">
<section id="section-8.3.2">
          <h4 id="name-early-data">
<a href="#section-8.3.2" class="section-number selfRef">8.3.2. </a><a href="#name-early-data" class="section-name selfRef">Early Data</a>
          </h4>
<p id="section-8.3.2-1">In some cases it may be valuable to know whether data was read as part of early
data transfer (before connection establishment has finished). This is useful if
applications need to treat early data separately,
e.g., if early data has different security properties than data sent after
connection establishment. In the case of TLS 1.3, client early data can be replayed
maliciously (see <span>[<a href="#RFC8446" class="xref">RFC8446</a>]</span>). Thus, receivers may wish to perform additional
checks for early data to ensure it is idempotent or not replayed. If TLS 1.3 is available
and the recipient Message was sent as part of early data, the corresponding metadata carries
a flag indicating as such. If early data is enabled, applications should check this metadata
field for Messages received during connection establishment and respond accordingly.<a href="#section-8.3.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="receiving-final-messages">
<section id="section-8.3.3">
          <h4 id="name-receiving-final-messages">
<a href="#section-8.3.3" class="section-number selfRef">8.3.3. </a><a href="#name-receiving-final-messages" class="section-name selfRef">Receiving Final Messages</a>
          </h4>
<p id="section-8.3.3-1">The Message Context can indicate whether or not this Message is
the Final Message on a Connection. For any Message that is marked as Final,
the application can assume that there will be no more Messages received on the
Connection once the Message has been completely delivered. This corresponds
to the Final property that may be marked on a sent Message, see <a href="#msg-final" class="xref">Section 7.5.5</a>.<a href="#section-8.3.3-1" class="pilcrow">¶</a></p>
<p id="section-8.3.3-2">Some transport protocols and peers may not support signaling of the Final property.
Applications therefore should not rely on receiving a Message marked Final to know
that the other endpoint is done sending on a connection.<a href="#section-8.3.3-2" class="pilcrow">¶</a></p>
<p id="section-8.3.3-3">Any calls to Receive once the Final Message has been delivered will result in errors.<a href="#section-8.3.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="framing">
<section id="section-9">
      <h2 id="name-message-framers">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-message-framers" class="section-name selfRef">Message Framers</a>
      </h2>
<p id="section-9-1">Although most applications communicate over a network using well-formed
Messages, the boundaries and metadata of the Messages are often not
directly communicated by the transport protocol itself. For example,
HTTP applications send and receive HTTP messages over a byte-stream
transport, requiring that the boundaries of HTTP messages be parsed out
from the stream of bytes.<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">Message Framers allow extending a Connection's Protocol Stack to define
how to encapsulate or encode outbound Messages, and how to decapsulate
or decode inbound data into Messages. Message Framers allow message
boundaries to be preserved when using a Connection object, even when
using byte-stream transports. This facility is designed based on the fact
that many of the current application protocols evolved over TCP, which
does not provide message boundary preservation, and since many of these
protocols require message boundaries to function, each application layer
protocol has defined its own framing.<a href="#section-9-2" class="pilcrow">¶</a></p>
<p id="section-9-3">Note that while Message Framers add the most value when placed above
a protocol that otherwise does not preserve message boundaries, they can
also be used with datagram- or message-based protocols. In these cases,
they add an additional transformation to further encode or encapsulate,
and can potentially support packing multiple application-layer Messages
into individual transport datagrams.<a href="#section-9-3" class="pilcrow">¶</a></p>
<p id="section-9-4">The API to implement a Message Framer can vary depending on the implementation;
guidance on implementing Message Framers can be found in <span>[<a href="#I-D.ietf-taps-impl" class="xref">I-D.ietf-taps-impl</a>]</span>.<a href="#section-9-4" class="pilcrow">¶</a></p>
<div id="adding-message-framers-to-connections">
<section id="section-9.1">
        <h3 id="name-adding-message-framers-to-c">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-adding-message-framers-to-c" class="section-name selfRef">Adding Message Framers to Connections</a>
        </h3>
<p id="section-9.1-1">The Message Framer object can be added to one or more Preconnections
to run on top of transport protocols. Multiple Framers may be added. If multiple
Framers are added, the last one added runs first when framing outbound messages,
and last when parsing inbound data.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<p id="section-9.1-2">The following example adds a basic HTTP Message Framer to a Preconnection:<a href="#section-9.1-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-9.1-3">
<pre>
framer := NewHTTPMessageFramer()
Preconnection.AddFramer(framer)
</pre><a href="#section-9.1-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="framing-meta">
<section id="section-9.2">
        <h3 id="name-framing-meta-data">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-framing-meta-data" class="section-name selfRef">Framing Meta-Data</a>
        </h3>
<p id="section-9.2-1">When sending Messages, applications can add specific Message
values to a MessageContext (<a href="#msg-ctx" class="xref">Section 7.4</a>) that is intended for a Framer.
This can be used, for example, to set the type of a Message for a TLV format.
The namespace of values is custom for each unique Message Framer.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-9.2-2">
<pre>
messageContext := NewMessageContext()
messageContext.add(framer, key, value)
Connection.Send(messageData, messageContext)
</pre><a href="#section-9.2-2" class="pilcrow">¶</a>
</div>
<p id="section-9.2-3">When an application receives a MessageContext in a Receive event,
it can also look to see if a value was set by a specific Message Framer.<a href="#section-9.2-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-9.2-4">
<pre>
messageContext.get(framer, key) -&gt; value
</pre><a href="#section-9.2-4" class="pilcrow">¶</a>
</div>
<p id="section-9.2-5">For example, if an HTTP Message Framer is used, the values could correspond
to HTTP headers:<a href="#section-9.2-5" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-9.2-6">
<pre>
httpFramer := NewHTTPMessageFramer()
...
messageContext := NewMessageContext()
messageContext.add(httpFramer, "accept", "text/html")
</pre><a href="#section-9.2-6" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="introspection">
<section id="section-10">
      <h2 id="name-managing-connections">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-managing-connections" class="section-name selfRef">Managing Connections</a>
      </h2>
<p id="section-10-1">During pre-establishment and after establishment, connections can be configured and queried using Connection
Properties, and asynchronous information may be available about the state of the
connection via Soft Errors.<a href="#section-10-1" class="pilcrow">¶</a></p>
<p id="section-10-2">Connection Properties represent the configuration and state of the selected
Protocol Stack(s) backing a Connection. These Connection Properties may be
Generic, applying regardless of transport protocol, or Specific, applicable to a
single implementation of a single transport protocol stack. Generic Connection
Properties are defined in <a href="#connection-props" class="xref">Section 10.1</a> below. Specific Protocol
Properties are defined in a transport- and implementation-specific way, and must
not be assumed to apply across different protocols. Attempts to set Specific
Protocol Properties on a protocol stack not containing that specific protocol
are simply ignored, and do not raise an error; however, too much reliance by an
application on Specific Protocol Properties may significantly reduce the
flexibility of a transport services implementation.<a href="#section-10-2" class="pilcrow">¶</a></p>
<p id="section-10-3">The application can set and query Connection Properties on a per-Connection
basis. Connection Properties that are not read-only can be set during
pre-establishment (see <a href="#selection-props" class="xref">Section 5.2</a>), as well as on connections directly using
the SetProperty action:<a href="#section-10-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-10-4">
<pre>
Connection.SetProperty(property, value)
</pre><a href="#section-10-4" class="pilcrow">¶</a>
</div>
<p id="section-10-5">Note that changing one of the Connection Properties on one Connection in a Connection Group
will also change it for all other Connections of that group; see further <a href="#groups" class="xref">Section 6.4</a>.<a href="#section-10-5" class="pilcrow">¶</a></p>
<p id="section-10-6">At any point, the application can query Connection Properties.<a href="#section-10-6" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-10-7">
<pre>
ConnectionProperties := Connection.GetProperties()
</pre><a href="#section-10-7" class="pilcrow">¶</a>
</div>
<p id="section-10-8">Depending on the status of the connection, the queried Connection
Properties will include different information:<a href="#section-10-8" class="pilcrow">¶</a></p>
<ul>
<li id="section-10-9.1">The connection state, which can be one of the following:
Establishing, Established, Closing, or Closed.<a href="#section-10-9.1" class="pilcrow">¶</a>
</li>
<li id="section-10-9.2">Whether the connection can be used to send data. A connection can not be used
for sending if the connection was created with the Selection Property
"Direction of Communication" set to "unidirectional receive" or if a Message
marked as "Final" was sent over this connection, see <a href="#msg-final" class="xref">Section 7.5.5</a>.<a href="#section-10-9.2" class="pilcrow">¶</a>
</li>
<li id="section-10-9.3">Whether the connection can be used to receive data. A connection can not be
used for reading if the connection was created with the Selection Property
"Direction of Communication" set to "unidirectional send" or if a Message
marked as "Final" was received, see <a href="#receiving-final-messages" class="xref">Section 8.3.3</a>. The latter
is only supported by certain transport protocols, e.g., by TCP as half-closed
connection.<a href="#section-10-9.3" class="pilcrow">¶</a>
</li>
<li id="section-10-9.4">For Connections that are Establishing: Transport Properties that the
application specified on the Preconnection, see <a href="#selection-props" class="xref">Section 5.2</a>.<a href="#section-10-9.4" class="pilcrow">¶</a>
</li>
<li id="section-10-9.5">For Connections that are Established, Closing, or Closed: Selection
(<a href="#selection-props" class="xref">Section 5.2</a>) and Connection Properties (<a href="#connection-props" class="xref">Section 10.1</a>) of the
actual protocols that were selected and instantiated. Selection Properties
indicate whether or not the Connection has or offers a certain Selection
Property. Note that the actually instantiated protocol stack may not match all
Protocol Selection Properties that the application specified on the
Preconnection. For example, a certain Protocol Selection Property that an
application specified as Preferred may not actually be present in the chosen
protocol stack because none of the currently available transport protocols had
this feature.<a href="#section-10-9.5" class="pilcrow">¶</a>
</li>
<li id="section-10-9.6">For Connections that are Established, additional properties of the path(s) in
use. These properties can be derived from the local provisioning domain
<span>[<a href="#RFC7556" class="xref">RFC7556</a>]</span>, measurements by the Protocol Stack, or other sources.<a href="#section-10-9.6" class="pilcrow">¶</a>
</li>
</ul>
<div id="connection-props">
<section id="section-10.1">
        <h3 id="name-generic-connection-properti">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-generic-connection-properti" class="section-name selfRef">Generic Connection Properties</a>
        </h3>
<p id="section-10.1-1">Generic Connection Properties are defined independent of the chosen protocol stack
and therefore available on all Connections.<a href="#section-10.1-1" class="pilcrow">¶</a></p>
<p id="section-10.1-2">Note that many Connection Properties have a corresponding Selection Property which
enables applications to express their preference for protocols providing a supporting transport feature.<a href="#section-10.1-2" class="pilcrow">¶</a></p>
<div id="conn-excss-retransmit">
<section id="section-10.1.1">
          <h4 id="name-retransmission-threshold-be">
<a href="#section-10.1.1" class="section-number selfRef">10.1.1. </a><a href="#name-retransmission-threshold-be" class="section-name selfRef">Retransmission Threshold Before Excessive Retransmission Notification</a>
          </h4>
<dl class="dlParallel" id="section-10.1.1-1">
            <dt id="section-10.1.1-1.1">Name:</dt>
<dd id="section-10.1.1-1.2">
  retransmit-notify-threshold<a href="#section-10.1.1-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.1-1.3">Type:</dt>
<dd id="section-10.1.1-1.4">
  Integer<a href="#section-10.1.1-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.1-1.5">Default:</dt>
<dd id="section-10.1.1-1.6">
  -1<a href="#section-10.1.1-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.1.1-2">This property specifies after how many retransmissions to inform the application
about "Excessive Retransmissions". The special value
-1 means that this notification is disabled.<a href="#section-10.1.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-recv-checksum">
<section id="section-10.1.2">
          <h4 id="name-required-minimum-corruption">
<a href="#section-10.1.2" class="section-number selfRef">10.1.2. </a><a href="#name-required-minimum-corruption" class="section-name selfRef">Required Minimum Corruption Protection Coverage for Receiving</a>
          </h4>
<dl class="dlParallel" id="section-10.1.2-1">
            <dt id="section-10.1.2-1.1">Name:</dt>
<dd id="section-10.1.2-1.2">
  recv-checksum-len<a href="#section-10.1.2-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.2-1.3">Type:</dt>
<dd id="section-10.1.2-1.4">
  Integer<a href="#section-10.1.2-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.2-1.5">Default:</dt>
<dd id="section-10.1.2-1.6">
  -1<a href="#section-10.1.2-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.1.2-2">This property specifies the part of the received data that needs
to be covered by a checksum. It is given in Bytes. A value of 0 means
that no checksum is required, and the special value -1 indicates
full checksum coverage.<a href="#section-10.1.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-priority">
<section id="section-10.1.3">
          <h4 id="name-priority-connection">
<a href="#section-10.1.3" class="section-number selfRef">10.1.3. </a><a href="#name-priority-connection" class="section-name selfRef">Priority (Connection)</a>
          </h4>
<dl class="dlParallel" id="section-10.1.3-1">
            <dt id="section-10.1.3-1.1">Name:</dt>
<dd id="section-10.1.3-1.2">
  conn-prio<a href="#section-10.1.3-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.3-1.3">Type:</dt>
<dd id="section-10.1.3-1.4">
  Integer<a href="#section-10.1.3-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.3-1.5">Default:</dt>
<dd id="section-10.1.3-1.6">
  100<a href="#section-10.1.3-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.1.3-2">This Property is a non-negative integer representing the relative inverse
priority (i.e., a lower value reflects a higher priority) of this Connection relative to other Connections in the same
Connection Group. It has no effect on Connections not part of a Connection
Group. As noted in <a href="#groups" class="xref">Section 6.4</a>, this property is not entangled when Connections
are cloned, i.e., changing the Priority on one Connection in a Connection Group does not change it on the other Connections in the same Connection Group.<a href="#section-10.1.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-timeout">
<section id="section-10.1.4">
          <h4 id="name-timeout-for-aborting-connec">
<a href="#section-10.1.4" class="section-number selfRef">10.1.4. </a><a href="#name-timeout-for-aborting-connec" class="section-name selfRef">Timeout for Aborting Connection</a>
          </h4>
<dl class="dlParallel" id="section-10.1.4-1">
            <dt id="section-10.1.4-1.1">Name:</dt>
<dd id="section-10.1.4-1.2">
  conn-timeout<a href="#section-10.1.4-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.4-1.3">Type:</dt>
<dd id="section-10.1.4-1.4">
  Numeric<a href="#section-10.1.4-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.4-1.5">Default:</dt>
<dd id="section-10.1.4-1.6">
  -1<a href="#section-10.1.4-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.1.4-2">This property specifies how long to wait before deciding that a Connection has
failed when trying to reliably deliver data to the destination. Adjusting this Property
will only take effect when the underlying stack supports reliability. The special value
-1 means that this timeout is not scheduled to happen. This can be a valid
choice with unreliable data transfer (e.g., when UDP is the underlying transport protocol).<a href="#section-10.1.4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-scheduler">
<section id="section-10.1.5">
          <h4 id="name-connection-group-transmissi">
<a href="#section-10.1.5" class="section-number selfRef">10.1.5. </a><a href="#name-connection-group-transmissi" class="section-name selfRef">Connection Group Transmission Scheduler</a>
          </h4>
<dl class="dlParallel" id="section-10.1.5-1">
            <dt id="section-10.1.5-1.1">Name:</dt>
<dd id="section-10.1.5-1.2">
  conn-scheduler<a href="#section-10.1.5-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.5-1.3">Type:</dt>
<dd id="section-10.1.5-1.4">
  Enumeration<a href="#section-10.1.5-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.5-1.5">Default:</dt>
<dd id="section-10.1.5-1.6">
  Weighted Fair Queueing (see Section 3.6 in <span>[<a href="#RFC8260" class="xref">RFC8260</a>]</span>)<a href="#section-10.1.5-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.1.5-2">This property specifies which scheduler should be used among Connections within
a Connection Group, see <a href="#groups" class="xref">Section 6.4</a>. The set of schedulers can
be taken from <span>[<a href="#RFC8260" class="xref">RFC8260</a>]</span>.<a href="#section-10.1.5-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-cap-profile">
<section id="section-10.1.6">
          <h4 id="name-capacity-profile">
<a href="#section-10.1.6" class="section-number selfRef">10.1.6. </a><a href="#name-capacity-profile" class="section-name selfRef">Capacity Profile</a>
          </h4>
<dl class="dlParallel" id="section-10.1.6-1">
            <dt id="section-10.1.6-1.1">Name:</dt>
<dd id="section-10.1.6-1.2">
  conn-capacity-profile<a href="#section-10.1.6-1.2" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.1.6-2">This property specifies the desired network treatment for traffic sent by the
application and the tradeoffs the application is prepared to make in path and
protocol selection to receive that desired treatment. When the capacity profile
is set to a value other than Default, the transport system SHOULD select paths
and configure protocols to optimize the tradeoff between delay, delay variation, and
bandwidth efficiency based on the capacity profile specified. How this is realized
is implementation-specific. The Capacity Profile MAY also be used
to set priorities on the wire for Protocol Stacks supporting prioritization. 
Recommendations for use with DSCP are provided below for each profile; note that
when a Connection is multiplexed, the guidelines in Section 6 of <span>[<a href="#RFC7657" class="xref">RFC7657</a>]</span> apply.<a href="#section-10.1.6-2" class="pilcrow">¶</a></p>
<p id="section-10.1.6-3">The following values are valid for the Capacity Profile:<a href="#section-10.1.6-3" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-10.1.6-4">
            <dt id="section-10.1.6-4.1">Default:</dt>
<dd id="section-10.1.6-4.2">
  The application provides no information about its expected capacity
  profile. Transport system implementations that
  map the requested capacity profile onto per-connection DSCP signaling 
  SHOULD assign the DSCP Default Forwarding <span>[<a href="#RFC2474" class="xref">RFC2474</a>]</span> PHB.<a href="#section-10.1.6-4.2" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.6-4.3">Scavenger:</dt>
<dd id="section-10.1.6-4.4">
  The application is not interactive. It expects to send
  and/or receive data without any urgency. This can, for example, be used to
  select protocol stacks with scavenger transmission control and/or to assign
  the traffic to a lower-effort service. Transport system implementations that
  map the requested capacity profile onto per-connection DSCP signaling
  SHOULD assign the DSCP Less than Best Effort
  <span>[<a href="#RFC8622" class="xref">RFC8622</a>]</span> PHB.<a href="#section-10.1.6-4.4" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.6-4.5">Low Latency/Interactive:</dt>
<dd id="section-10.1.6-4.6">
  The application is interactive, and prefers loss to
  latency. Response time should be optimized at the expense of bandwidth
  efficiency and delay variation when sending on this connection. This can be
  used by the system to disable the coalescing of multiple small Messages into
  larger packets (Nagle's algorithm); to prefer immediate acknowledgment from
  the peer endpoint when supported by the underlying transport; and so on.
  Transport system implementations that map the requested capacity profile onto per-connection DSCP signaling without multiplexing SHOULD assign a DSCP Assured Forwarding (AF41,AF42,AF43,AF44) <span>[<a href="#RFC2597" class="xref">RFC2597</a>]</span> PHB. Inelastic traffic that is expected to conform to the configured network service rate could be mapped to the DSCP Expedited Forwarding <span>[<a href="#RFC3246" class="xref">RFC3246</a>]</span> or <span>[<a href="#RFC5865" class="xref">RFC5865</a>]</span> PHBs.<a href="#section-10.1.6-4.6" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.6-4.7">Low Latency/Non-Interactive:</dt>
<dd id="section-10.1.6-4.8">
  The application prefers loss to latency but is
  not interactive. Response time should be optimized at the expense of bandwidth
  efficiency and delay variation when sending on this connection. Transport
  system implementations that map the requested capacity profile onto
  per-connection DSCP signaling without multiplexing SHOULD assign a DSCP
  Assured Forwarding (AF21,AF22,AF23,AF24) <span>[<a href="#RFC2597" class="xref">RFC2597</a>]</span> PHB.<a href="#section-10.1.6-4.8" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.6-4.9">Constant-Rate Streaming:</dt>
<dd id="section-10.1.6-4.10">
  The application expects to send/receive data at a
  constant rate after Connection establishment. Delay and delay variation should
  be minimized at the expense of bandwidth efficiency. This implies that the
  Connection may fail if the desired rate cannot be maintained across the Path.
  A transport may interpret this capacity profile as preferring a circuit
  breaker <span>[<a href="#RFC8084" class="xref">RFC8084</a>]</span> to a rate-adaptive congestion controller. Transport
  system implementations that map the requested capacity profile onto
  per-connection DSCP signaling without multiplexing SHOULD assign a DSCP
  Assured Forwarding (AF31,AF32,AF33,AF34) <span>[<a href="#RFC2597" class="xref">RFC2597</a>]</span> PHB.<a href="#section-10.1.6-4.10" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.6-4.11">High Throughput Data:</dt>
<dd id="section-10.1.6-4.12">
  The application expects to send/receive data at the
  maximum rate allowed by its congestion controller over a relatively long
  period of time. Transport system implementations that map the requested
  capacity profile onto per-connection DSCP signaling without multiplexing
  SHOULD assign a DSCP Assured Forwarding (AF11,AF12,AF13,AF14) <span>[<a href="#RFC2597" class="xref">RFC2597</a>]</span> PHB
  per Section 4.8 of <span>[<a href="#RFC4594" class="xref">RFC4594</a>]</span>.<a href="#section-10.1.6-4.12" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.1.6-5">The Capacity Profile for a selected protocol stack may be modified on a
per-Message basis using the Transmission Profile Message Property; see
<a href="#send-profile" class="xref">Section 7.5.8</a>.<a href="#section-10.1.6-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="bounds-on-send-or-receive-rate">
<section id="section-10.1.7">
          <h4 id="name-bounds-on-send-or-receive-r">
<a href="#section-10.1.7" class="section-number selfRef">10.1.7. </a><a href="#name-bounds-on-send-or-receive-r" class="section-name selfRef">Bounds on Send or Receive Rate</a>
          </h4>
<dl class="dlParallel" id="section-10.1.7-1">
            <dt id="section-10.1.7-1.1">Name:</dt>
<dd id="section-10.1.7-1.2">
  max-send-rate / max-recv-rate<a href="#section-10.1.7-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.7-1.3">Type:</dt>
<dd id="section-10.1.7-1.4">
  Numeric / Numeric<a href="#section-10.1.7-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.7-1.5">Default:</dt>
<dd id="section-10.1.7-1.6">
  -1 / -1 (unlimited, for both values)<a href="#section-10.1.7-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.1.7-2">This property specifies an upper-bound rate that a transfer is not expected to
exceed (even if flow control and congestion control allow higher rates), and/or a
lower-bound rate below which the application does not deem
a data transfer useful. It is given in bits per second. The special value -1 indicates
that no bound is specified.<a href="#section-10.1.7-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="read-only-conn-prop">
<section id="section-10.1.8">
          <h4 id="name-read-only-connection-proper">
<a href="#section-10.1.8" class="section-number selfRef">10.1.8. </a><a href="#name-read-only-connection-proper" class="section-name selfRef">Read-only Connection Properties</a>
          </h4>
<p id="section-10.1.8-1">The following generic Connection Properties are read-only, i.e. they cannot be changed by an application.<a href="#section-10.1.8-1" class="pilcrow">¶</a></p>
<div id="size-idempotent">
<section id="section-10.1.8.1">
            <h5 id="name-maximum-message-size-concur">
<a href="#section-10.1.8.1" class="section-number selfRef">10.1.8.1. </a><a href="#name-maximum-message-size-concur" class="section-name selfRef">Maximum Message Size Concurrent with Connection Establishment</a>
            </h5>
<dl class="dlParallel" id="section-10.1.8.1-1">
              <dt id="section-10.1.8.1-1.1">Name:</dt>
<dd id="section-10.1.8.1-1.2">
  zero-rtt-msg-max-len<a href="#section-10.1.8.1-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.8.1-1.3">Type:</dt>
<dd id="section-10.1.8.1-1.4">
  Integer<a href="#section-10.1.8.1-1.4" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.1.8.1-2">This property represents the maximum Message size that can be sent
before or during Connection establishment, see also <a href="#msg-idempotent" class="xref">Section 7.5.4</a>.
It is given in Bytes.<a href="#section-10.1.8.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-max-msg-notfrag">
<section id="section-10.1.8.2">
            <h5 id="name-maximum-message-size-before">
<a href="#section-10.1.8.2" class="section-number selfRef">10.1.8.2. </a><a href="#name-maximum-message-size-before" class="section-name selfRef">Maximum Message Size Before Fragmentation or Segmentation</a>
            </h5>
<dl class="dlParallel" id="section-10.1.8.2-1">
              <dt id="section-10.1.8.2-1.1">Name:</dt>
<dd id="section-10.1.8.2-1.2">
  singular-transmission-msg-max-len<a href="#section-10.1.8.2-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.8.2-1.3">Type:</dt>
<dd id="section-10.1.8.2-1.4">
  Integer<a href="#section-10.1.8.2-1.4" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.1.8.2-2">This property, if applicable, represents the maximum Message size that can be
sent without incurring network-layer fragmentation or transport layer
segmentation at the sender. This property exposes the Maximum Packet Size (MPS)
as described in Datagram PLPMTUD <span>[<a href="#I-D.ietf-tsvwg-datagram-plpmtud" class="xref">I-D.ietf-tsvwg-datagram-plpmtud</a>]</span>.<a href="#section-10.1.8.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-max-msg-send">
<section id="section-10.1.8.3">
            <h5 id="name-maximum-message-size-on-sen">
<a href="#section-10.1.8.3" class="section-number selfRef">10.1.8.3. </a><a href="#name-maximum-message-size-on-sen" class="section-name selfRef">Maximum Message Size on Send</a>
            </h5>
<dl class="dlParallel" id="section-10.1.8.3-1">
              <dt id="section-10.1.8.3-1.1">Name:</dt>
<dd id="section-10.1.8.3-1.2">
  send-msg-max-len<a href="#section-10.1.8.3-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.8.3-1.3">Type:</dt>
<dd id="section-10.1.8.3-1.4">
  Integer<a href="#section-10.1.8.3-1.4" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.1.8.3-2">This property represents the maximum Message size that can be sent using a send operation.<a href="#section-10.1.8.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-max-msg-recv">
<section id="section-10.1.8.4">
            <h5 id="name-maximum-message-size-on-rec">
<a href="#section-10.1.8.4" class="section-number selfRef">10.1.8.4. </a><a href="#name-maximum-message-size-on-rec" class="section-name selfRef">Maximum Message Size on Receive</a>
            </h5>
<dl class="dlParallel" id="section-10.1.8.4-1">
              <dt id="section-10.1.8.4-1.1">Name:</dt>
<dd id="section-10.1.8.4-1.2">
  recv-msg-max-len<a href="#section-10.1.8.4-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-10.1.8.4-1.3">Type:</dt>
<dd id="section-10.1.8.4-1.4">
  Integer<a href="#section-10.1.8.4-1.4" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.1.8.4-2">This numeric property represents the maximum Message size that can be received.<a href="#section-10.1.8.4-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="tcp-uto">
<section id="section-10.2">
        <h3 id="name-tcp-specific-properties-use">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-tcp-specific-properties-use" class="section-name selfRef">TCP-specific Properties: User Timeout Option (UTO)</a>
        </h3>
<p id="section-10.2-1">These properties specify configurations for the User Timeout Option (UTO), 
in case TCP becomes the chosen transport protocol. 
Implementation is optional and of course only sensible if TCP is implemented in the transport system.<a href="#section-10.2-1" class="pilcrow">¶</a></p>
<p id="section-10.2-2">These TCP-specific properties are included here because the feature "Suggest
timeout to the peer" is part of the minimal set of transport services
<span>[<a href="#I-D.ietf-taps-minset" class="xref">I-D.ietf-taps-minset</a>]</span>, where this feature was categorized as "functional".
This means that when an implementation offers this feature, it has to expose an
interface to it to the application. Otherwise, the implementation might
violate assumptions by the application, which could cause the application to
fail.<a href="#section-10.2-2" class="pilcrow">¶</a></p>
<p id="section-10.2-3">All of the below properties are optional (e.g., it is possible to specify "User Timeout Enabled" as true,
but not specify an Advertised User Timeout value; in this case, the TCP default will be used).<a href="#section-10.2-3" class="pilcrow">¶</a></p>
<div id="advertised-user-timeout">
<section id="section-10.2.1">
          <h4 id="name-advertised-user-timeout">
<a href="#section-10.2.1" class="section-number selfRef">10.2.1. </a><a href="#name-advertised-user-timeout" class="section-name selfRef">Advertised User Timeout</a>
          </h4>
<dl class="dlParallel" id="section-10.2.1-1">
            <dt id="section-10.2.1-1.1">Name:</dt>
<dd id="section-10.2.1-1.2">
  tcp.user-timeout-value<a href="#section-10.2.1-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-10.2.1-1.3">Type:</dt>
<dd id="section-10.2.1-1.4">
  Integer<a href="#section-10.2.1-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-10.2.1-1.5">Default:</dt>
<dd id="section-10.2.1-1.6">
  the TCP default<a href="#section-10.2.1-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.2.1-2">This time value is advertised via the TCP User Timeout Option (UTO) <span>[<a href="#RFC5482" class="xref">RFC5482</a>]</span> at the remote endpoint
to adapt its own "Timeout for aborting Connection" (see <a href="#conn-timeout" class="xref">Section 10.1.4</a>) value accordingly.<a href="#section-10.2.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="user-timeout-enabled">
<section id="section-10.2.2">
          <h4 id="name-user-timeout-enabled">
<a href="#section-10.2.2" class="section-number selfRef">10.2.2. </a><a href="#name-user-timeout-enabled" class="section-name selfRef">User Timeout Enabled</a>
          </h4>
<dl class="dlParallel" id="section-10.2.2-1">
            <dt id="section-10.2.2-1.1">Name:</dt>
<dd id="section-10.2.2-1.2">
  tcp.user-timeout<a href="#section-10.2.2-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-10.2.2-1.3">Type:</dt>
<dd id="section-10.2.2-1.4">
  Boolean<a href="#section-10.2.2-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-10.2.2-1.5">Default:</dt>
<dd id="section-10.2.2-1.6">
  false<a href="#section-10.2.2-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.2.2-2">This property controls whether the UTO option is enabled for a
connection. This applies to both sending and receiving.<a href="#section-10.2.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="timeout-changeable">
<section id="section-10.2.3">
          <h4 id="name-timeout-changeable">
<a href="#section-10.2.3" class="section-number selfRef">10.2.3. </a><a href="#name-timeout-changeable" class="section-name selfRef">Timeout Changeable</a>
          </h4>
<dl class="dlParallel" id="section-10.2.3-1">
            <dt id="section-10.2.3-1.1">Name:</dt>
<dd id="section-10.2.3-1.2">
  tcp.user-timeout-recv<a href="#section-10.2.3-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-10.2.3-1.3">Type:</dt>
<dd id="section-10.2.3-1.4">
  Boolean<a href="#section-10.2.3-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-10.2.3-1.5">Default:</dt>
<dd id="section-10.2.3-1.6">
  true<a href="#section-10.2.3-1.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-10.2.3-2">This property controls whether the "Timeout for aborting Connection" (see <a href="#conn-timeout" class="xref">Section 10.1.4</a>)
may be changed
based on a UTO option received from the remote peer. This boolean becomes false when
"Timeout for aborting Connection" (see <a href="#conn-timeout" class="xref">Section 10.1.4</a>) is used.<a href="#section-10.2.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="connection-lifecycle-events">
<section id="section-10.3">
        <h3 id="name-connection-lifecycle-events">
<a href="#section-10.3" class="section-number selfRef">10.3. </a><a href="#name-connection-lifecycle-events" class="section-name selfRef">Connection Lifecycle Events</a>
        </h3>
<p id="section-10.3-1">During the lifetime of a connection there are events that can occur when configured.<a href="#section-10.3-1" class="pilcrow">¶</a></p>
<div id="soft-errors">
<section id="section-10.3.1">
          <h4 id="name-soft-errors">
<a href="#section-10.3.1" class="section-number selfRef">10.3.1. </a><a href="#name-soft-errors" class="section-name selfRef">Soft Errors</a>
          </h4>
<p id="section-10.3.1-1">Asynchronous introspection is also possible, via the SoftError Event. This event
informs the application about the receipt and contents of an ICMP error message related to the Connection. This will only happen if the underlying protocol stack supports access to soft errors; however, even if the underlying stack supports it, there
is no guarantee that a soft error will be signaled.<a href="#section-10.3.1-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-10.3.1-2">
<pre>
Connection -&gt; SoftError&lt;&gt;
</pre><a href="#section-10.3.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="conn-retrans-notify">
<section id="section-10.3.2">
          <h4 id="name-excessive-retransmissions">
<a href="#section-10.3.2" class="section-number selfRef">10.3.2. </a><a href="#name-excessive-retransmissions" class="section-name selfRef">Excessive retransmissions</a>
          </h4>
<p id="section-10.3.2-1">This event notifies the application of excessive retransmissions, based on a
configured threshold (see <a href="#conn-excss-retransmit" class="xref">Section 10.1.1</a>). This will only happen if
the underlying protocol stack supports reliability and, with it, such notifications.<a href="#section-10.3.2-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-10.3.2-2">
<pre>
Connection -&gt; ExcessiveRetransmission&lt;&gt;
</pre><a href="#section-10.3.2-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="termination">
<section id="section-11">
      <h2 id="name-connection-termination">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-connection-termination" class="section-name selfRef">Connection Termination</a>
      </h2>
<p id="section-11-1">Close terminates a Connection after satisfying all the requirements that were
specified regarding the delivery of Messages that the application has already
given to the transport system. For example, if reliable delivery was requested
for a Message handed over before calling Close, the transport system will ensure
that this Message is indeed delivered. If the Remote Endpoint still has data to
send, it cannot be received after this call.<a href="#section-11-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-11-2">
<pre>
Connection.Close()
</pre><a href="#section-11-2" class="pilcrow">¶</a>
</div>
<p id="section-11-3">The Closed Event can inform the application that the Remote Endpoint has closed the
Connection; however, there is no guarantee that a remote Close will indeed be
signaled.<a href="#section-11-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-11-4">
<pre>
Connection -&gt; Closed&lt;&gt;
</pre><a href="#section-11-4" class="pilcrow">¶</a>
</div>
<p id="section-11-5">Abort terminates a Connection without delivering remaining data:<a href="#section-11-5" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-11-6">
<pre>
Connection.Abort()
</pre><a href="#section-11-6" class="pilcrow">¶</a>
</div>
<p id="section-11-7">A ConnectionError informs the application that data to could not be delivered after a timeout,
or the other side has aborted the Connection; however, there is no guarantee that an Abort will indeed be signaled.<a href="#section-11-7" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-11-8">
<pre>
Connection -&gt; ConnectionError&lt;reason?&gt;
</pre><a href="#section-11-8" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="connection-state-and-ordering-of-operations-and-events">
<section id="section-12">
      <h2 id="name-connection-state-and-orderi">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-connection-state-and-orderi" class="section-name selfRef">Connection State and Ordering of Operations and Events</a>
      </h2>
<p id="section-12-1">As this interface is designed to be independent of an implementation's
concurrency model, the details of how exactly actions are handled, and how
events are dispatched, are implementation dependent.<a href="#section-12-1" class="pilcrow">¶</a></p>
<p id="section-12-2">Each transition of connection state is associated with one of more events:<a href="#section-12-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-12-3.1">Ready&lt;&gt; occurs when a Connection created with Initiate() or
InitiateWithSend() transitions to Established state.<a href="#section-12-3.1" class="pilcrow">¶</a>
</li>
<li id="section-12-3.2">ConnectionReceived&lt;&gt; occurs when a Connection created with Listen()
transitions to Established state.<a href="#section-12-3.2" class="pilcrow">¶</a>
</li>
<li id="section-12-3.3">RendezvousDone&lt;&gt; occurs when a Connection created with Rendezvous()
transitions to Established state.<a href="#section-12-3.3" class="pilcrow">¶</a>
</li>
<li id="section-12-3.4">Closed&lt;&gt; occurs when a Connection transitions to Closed state without error.<a href="#section-12-3.4" class="pilcrow">¶</a>
</li>
<li id="section-12-3.5">InitiateError&lt;&gt; occurs when a Connection created with Initiate() transitions
from Establishing state to Closed state due to an error.<a href="#section-12-3.5" class="pilcrow">¶</a>
</li>
<li id="section-12-3.6">ConnectionError&lt;&gt; occurs when a Connection transitions to Closed state due to
an error in all other circumstances.<a href="#section-12-3.6" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-12-4">The interface provides the following guarantees about the ordering of
 operations:<a href="#section-12-4" class="pilcrow">¶</a></p>
<ul>
<li id="section-12-5.1">Sent&lt;&gt; events will occur on a Connection in the order in which the Messages
were sent (i.e., delivered to the kernel or to the network interface,
depending on implementation).<a href="#section-12-5.1" class="pilcrow">¶</a>
</li>
<li id="section-12-5.2">Received&lt;&gt; will never occur on a Connection before it is Established; i.e.
before a Ready&lt;&gt; event on that Connection, or a ConnectionReceived&lt;&gt; or
RendezvousDone&lt;&gt; containing that Connection.<a href="#section-12-5.2" class="pilcrow">¶</a>
</li>
<li id="section-12-5.3">No events will occur on a Connection after it is Closed; i.e., after a
Closed&lt;&gt; event, an InitiateError&lt;&gt; or ConnectionError&lt;&gt; on that connection. To
ensure this ordering, Closed&lt;&gt; will not occur on a Connection while other
events on the Connection are still locally outstanding (i.e., known to the
interface and waiting to be dealt with by the application). ConnectionError&lt;&gt;
may occur after Closed&lt;&gt;, but the interface must gracefully handle all cases
where application ignores these errors.<a href="#section-12-5.3" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="iana-considerations">
<section id="section-13">
      <h2 id="name-iana-considerations">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-13-1">RFC-EDITOR: Please remove this section before publication.<a href="#section-13-1" class="pilcrow">¶</a></p>
<p id="section-13-2">This document has no Actions for IANA.
Later versions of this document may create IANA registries for generic transport property names and transport property namespaces (see <a href="#property-names" class="xref">Section 4.2.1</a>).<a href="#section-13-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-14">
      <h2 id="name-security-considerations">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-14-1">This document describes a generic API for interacting with a transport services (TAPS) system.
Part of this API includes configuration details for transport security protocols, as discussed
in <a href="#security-parameters" class="xref">Section 5.3</a>. It does not recommend use (or disuse) of specific
algorithms or protocols. Any API-compatible transport security protocol should work in a TAPS system.
Security consideration for these protocols should be discussed in the respective specifications.<a href="#section-14-1" class="pilcrow">¶</a></p>
<p id="section-14-2">The desribed API is used to exchange information between an application and the transport system. While
it is not necessarily expected that both systems are implemented by the same authority, it is expected
that the transport system implementation is either provided as a library that is selected by the application
from a trusted party, or that it is part of the operating system that the application also relies on for
other tasks.<a href="#section-14-2" class="pilcrow">¶</a></p>
<p id="section-14-3">In either case, the TAPS API is an internal interface that is used to change information locally between two systems.
However, as the transport system is responsible for network communication, it is in the position to
potentially share any information provided by the application with the network or another communication peer. 
Most of the information provided over the TAPS API are useful to configure and select protocols and paths
and are not necessarily privacy sensitive. Still, there is some information that could be privacy sensitve because
this might reveal usage characteristics and habits of the user of an application.<a href="#section-14-3" class="pilcrow">¶</a></p>
<p id="section-14-4">Of course any communication over a network reveals usage characteristics, as all
packets as well as their timing and size are part of the network-visible wire image <span>[<a href="#RFC8546" class="xref">RFC8546</a>]</span>. However,
the selection of a protocol and its configuration also impacts which information is visible, potentially in
clear text, and which other enties can access it. In most cases information that is provided for protocol and path selection
should not directly translate to information that is can be observed by network devices on the path. 
But there might be specific configuration
information that are intended for path exposure, such as e.g. a DiffServ codepoint setting, that is either povided
directly by the application or indirectly configured over a traffic profile.<a href="#section-14-4" class="pilcrow">¶</a></p>
<p id="section-14-5">Further, applications should be aware that communication attempts can lead to more than one connection establishment.
This is for example the case when the transport system also excecutes name resolution; or when support mechanisms such as
TURN or ICE are used to establish connectivity; or if protocols or paths are raised; or if a path fails and 
fallback or re-establishment is supported in the transport system.<a href="#section-14-5" class="pilcrow">¶</a></p>
<p id="section-14-6">These communication activities are not different from what is used today, however, 
the goal of a TAPS transport system is to support
such mechanisms as a generic service within the transport layer. This enables applications to more dynamically
benefit from innovations and new protocols in the transport system but at the same time may reduce transparency of the 
underlying communication actions to the application itself. The TAPS API is designed such that protocol and path selection
can be limited to a small and controlled set if required by the application for functional or security purposes. Further,
TAPS implementations should provide an interface to poll information about which protocol and path is currently in use as
well as provide logging about the communication events of each connection.<a href="#section-14-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgements">
<section id="section-15">
      <h2 id="name-acknowledgements">
<a href="#section-15" class="section-number selfRef">15. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-15-1">This work has received funding from the European Union's Horizon 2020 research and
innovation programme under grant agreements No. 644334 (NEAT) and No. 688421 (MAMI).<a href="#section-15-1" class="pilcrow">¶</a></p>
<p id="section-15-2">This work has been supported by Leibniz Prize project funds of DFG - German
Research Foundation: Gottfried Wilhelm Leibniz-Preis 2011 (FKZ FE 570/4-1).<a href="#section-15-2" class="pilcrow">¶</a></p>
<p id="section-15-3">This work has been supported by the UK Engineering and Physical Sciences
Research Council under grant EP/R04144X/1.<a href="#section-15-3" class="pilcrow">¶</a></p>
<p id="section-15-4">This work has been supported by the Research Council of Norway under its "Toppforsk"
programme through the "OCARINA" project.<a href="#section-15-4" class="pilcrow">¶</a></p>
<p id="section-15-5">Thanks to Stuart Cheshire, Josh Graessley, David Schinazi, and Eric Kinnear for
their implementation and design efforts, including Happy Eyeballs, that heavily
influenced this work. Thanks to Laurent Chuat and Jason Lee for initial work on
the Post Sockets interface, from which this work has evolved. Thanks to
Maximilian Franke for asking good questions based on implementation experience
and for contributing text, e.g., on multicast.<a href="#section-15-5" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-16">
      <h2 id="name-references">
<a href="#section-16" class="section-number selfRef">16. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-16.1">
        <h3 id="name-normative-references">
<a href="#section-16.1" class="section-number selfRef">16.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-taps-arch">[I-D.ietf-taps-arch]</dt>
<dd>
<span class="refAuthor">Pauly, T.</span><span class="refAuthor">, Trammell, B.</span><span class="refAuthor">, Brunstrom, A.</span><span class="refAuthor">, Fairhurst, G.</span><span class="refAuthor">, Perkins, C.</span><span class="refAuthor">, Tiesel, P.</span><span class="refAuthor">, and C. Wood</span>, <span class="refTitle">"An Architecture for Transport Services"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-taps-arch-06</span>, <time datetime="2019-12-23">23 December 2019</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-taps-arch-06.txt">http://www.ietf.org/internet-drafts/draft-ietf-taps-arch-06.txt</a>&gt;</span>. </dd>
<dt id="RFC2119">[RFC2119]</dt>
<dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dt id="RFC4941">[RFC4941]</dt>
<dd>
<span class="refAuthor">Narten, T.</span><span class="refAuthor">, Draves, R.</span><span class="refAuthor">, and S. Krishnan</span>, <span class="refTitle">"Privacy Extensions for Stateless Address Autoconfiguration in IPv6"</span>, <span class="seriesInfo">RFC 4941</span>, <span class="seriesInfo">DOI 10.17487/RFC4941</span>, <time datetime="2007-09">September 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4941">https://www.rfc-editor.org/info/rfc4941</a>&gt;</span>. </dd>
<dt id="RFC8174">[RFC8174]</dt>
<dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dt id="RFC8303">[RFC8303]</dt>
<dd>
<span class="refAuthor">Welzl, M.</span><span class="refAuthor">, Tuexen, M.</span><span class="refAuthor">, and N. Khademi</span>, <span class="refTitle">"On the Usage of Transport Features Provided by IETF Transport Protocols"</span>, <span class="seriesInfo">RFC 8303</span>, <span class="seriesInfo">DOI 10.17487/RFC8303</span>, <time datetime="2018-02">February 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8303">https://www.rfc-editor.org/info/rfc8303</a>&gt;</span>. </dd>
<dt id="RFC8446">[RFC8446]</dt>
<dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time datetime="2018-08">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;</span>. </dd>
</dl>
</section>
<section id="section-16.2">
        <h3 id="name-informative-references">
<a href="#section-16.2" class="section-number selfRef">16.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-taps-impl">[I-D.ietf-taps-impl]</dt>
<dd>
<span class="refAuthor">Brunstrom, A.</span><span class="refAuthor">, Pauly, T.</span><span class="refAuthor">, Enghardt, T.</span><span class="refAuthor">, Grinnemo, K.</span><span class="refAuthor">, Jones, T.</span><span class="refAuthor">, Tiesel, P.</span><span class="refAuthor">, Perkins, C.</span><span class="refAuthor">, and M. Welzl</span>, <span class="refTitle">"Implementing Interfaces to Transport Services"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-taps-impl-05</span>, <time datetime="2019-11-04">4 November 2019</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-taps-impl-05.txt">http://www.ietf.org/internet-drafts/draft-ietf-taps-impl-05.txt</a>&gt;</span>. </dd>
<dt id="I-D.ietf-taps-minset">[I-D.ietf-taps-minset]</dt>
<dd>
<span class="refAuthor">Welzl, M.</span><span class="refAuthor"> and S. Gjessing</span>, <span class="refTitle">"A Minimal Set of Transport Services for End Systems"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-taps-minset-11</span>, <time datetime="2018-09-27">27 September 2018</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-taps-minset-11.txt">http://www.ietf.org/internet-drafts/draft-ietf-taps-minset-11.txt</a>&gt;</span>. </dd>
<dt id="I-D.ietf-taps-transport-security">[I-D.ietf-taps-transport-security]</dt>
<dd>
<span class="refAuthor">Enghardt, T.</span><span class="refAuthor">, Pauly, T.</span><span class="refAuthor">, Perkins, C.</span><span class="refAuthor">, Rose, K.</span><span class="refAuthor">, and C. Wood</span>, <span class="refTitle">"A Survey of the Interaction Between Security Protocols and Transport Services"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-taps-transport-security-11</span>, <time datetime="2020-03-05">5 March 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-taps-transport-security-11.txt">http://www.ietf.org/internet-drafts/draft-ietf-taps-transport-security-11.txt</a>&gt;</span>. </dd>
<dt id="I-D.ietf-tsvwg-datagram-plpmtud">[I-D.ietf-tsvwg-datagram-plpmtud]</dt>
<dd>
<span class="refAuthor">Fairhurst, G.</span><span class="refAuthor">, Jones, T.</span><span class="refAuthor">, Tuexen, M.</span><span class="refAuthor">, Ruengeler, I.</span><span class="refAuthor">, and T. Voelker</span>, <span class="refTitle">"Packetization Layer Path MTU Discovery for Datagram Transports"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-tsvwg-datagram-plpmtud-15</span>, <time datetime="2020-02-24">24 February 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-tsvwg-datagram-plpmtud-15.txt">http://www.ietf.org/internet-drafts/draft-ietf-tsvwg-datagram-plpmtud-15.txt</a>&gt;</span>. </dd>
<dt id="RFC2474">[RFC2474]</dt>
<dd>
<span class="refAuthor">Nichols, K.</span><span class="refAuthor">, Blake, S.</span><span class="refAuthor">, Baker, F.</span><span class="refAuthor">, and D. Black</span>, <span class="refTitle">"Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers"</span>, <span class="seriesInfo">RFC 2474</span>, <span class="seriesInfo">DOI 10.17487/RFC2474</span>, <time datetime="1998-12">December 1998</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2474">https://www.rfc-editor.org/info/rfc2474</a>&gt;</span>. </dd>
<dt id="RFC2597">[RFC2597]</dt>
<dd>
<span class="refAuthor">Heinanen, J.</span><span class="refAuthor">, Baker, F.</span><span class="refAuthor">, Weiss, W.</span><span class="refAuthor">, and J. Wroclawski</span>, <span class="refTitle">"Assured Forwarding PHB Group"</span>, <span class="seriesInfo">RFC 2597</span>, <span class="seriesInfo">DOI 10.17487/RFC2597</span>, <time datetime="1999-06">June 1999</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2597">https://www.rfc-editor.org/info/rfc2597</a>&gt;</span>. </dd>
<dt id="RFC2914">[RFC2914]</dt>
<dd>
<span class="refAuthor">Floyd, S.</span>, <span class="refTitle">"Congestion Control Principles"</span>, <span class="seriesInfo">BCP 41</span>, <span class="seriesInfo">RFC 2914</span>, <span class="seriesInfo">DOI 10.17487/RFC2914</span>, <time datetime="2000-09">September 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2914">https://www.rfc-editor.org/info/rfc2914</a>&gt;</span>. </dd>
<dt id="RFC3246">[RFC3246]</dt>
<dd>
<span class="refAuthor">Davie, B.</span><span class="refAuthor">, Charny, A.</span><span class="refAuthor">, Bennet, J.C.R.</span><span class="refAuthor">, Benson, K.</span><span class="refAuthor">, Le Boudec, J.Y.</span><span class="refAuthor">, Courtney, W.</span><span class="refAuthor">, Davari, S.</span><span class="refAuthor">, Firoiu, V.</span><span class="refAuthor">, and D. Stiliadis</span>, <span class="refTitle">"An Expedited Forwarding PHB (Per-Hop Behavior)"</span>, <span class="seriesInfo">RFC 3246</span>, <span class="seriesInfo">DOI 10.17487/RFC3246</span>, <time datetime="2002-03">March 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3246">https://www.rfc-editor.org/info/rfc3246</a>&gt;</span>. </dd>
<dt id="RFC3261">[RFC3261]</dt>
<dd>
<span class="refAuthor">Rosenberg, J.</span><span class="refAuthor">, Schulzrinne, H.</span><span class="refAuthor">, Camarillo, G.</span><span class="refAuthor">, Johnston, A.</span><span class="refAuthor">, Peterson, J.</span><span class="refAuthor">, Sparks, R.</span><span class="refAuthor">, Handley, M.</span><span class="refAuthor">, and E. Schooler</span>, <span class="refTitle">"SIP: Session Initiation Protocol"</span>, <span class="seriesInfo">RFC 3261</span>, <span class="seriesInfo">DOI 10.17487/RFC3261</span>, <time datetime="2002-06">June 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3261">https://www.rfc-editor.org/info/rfc3261</a>&gt;</span>. </dd>
<dt id="RFC4594">[RFC4594]</dt>
<dd>
<span class="refAuthor">Babiarz, J.</span><span class="refAuthor">, Chan, K.</span><span class="refAuthor">, and F. Baker</span>, <span class="refTitle">"Configuration Guidelines for DiffServ Service Classes"</span>, <span class="seriesInfo">RFC 4594</span>, <span class="seriesInfo">DOI 10.17487/RFC4594</span>, <time datetime="2006-08">August 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4594">https://www.rfc-editor.org/info/rfc4594</a>&gt;</span>. </dd>
<dt id="RFC5245">[RFC5245]</dt>
<dd>
<span class="refAuthor">Rosenberg, J.</span>, <span class="refTitle">"Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols"</span>, <span class="seriesInfo">RFC 5245</span>, <span class="seriesInfo">DOI 10.17487/RFC5245</span>, <time datetime="2010-04">April 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5245">https://www.rfc-editor.org/info/rfc5245</a>&gt;</span>. </dd>
<dt id="RFC5482">[RFC5482]</dt>
<dd>
<span class="refAuthor">Eggert, L.</span><span class="refAuthor"> and F. Gont</span>, <span class="refTitle">"TCP User Timeout Option"</span>, <span class="seriesInfo">RFC 5482</span>, <span class="seriesInfo">DOI 10.17487/RFC5482</span>, <time datetime="2009-03">March 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5482">https://www.rfc-editor.org/info/rfc5482</a>&gt;</span>. </dd>
<dt id="RFC5865">[RFC5865]</dt>
<dd>
<span class="refAuthor">Baker, F.</span><span class="refAuthor">, Polk, J.</span><span class="refAuthor">, and M. Dolly</span>, <span class="refTitle">"A Differentiated Services Code Point (DSCP) for Capacity-Admitted Traffic"</span>, <span class="seriesInfo">RFC 5865</span>, <span class="seriesInfo">DOI 10.17487/RFC5865</span>, <time datetime="2010-05">May 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5865">https://www.rfc-editor.org/info/rfc5865</a>&gt;</span>. </dd>
<dt id="RFC7478">[RFC7478]</dt>
<dd>
<span class="refAuthor">Holmberg, C.</span><span class="refAuthor">, Hakansson, S.</span><span class="refAuthor">, and G. Eriksson</span>, <span class="refTitle">"Web Real-Time Communication Use Cases and Requirements"</span>, <span class="seriesInfo">RFC 7478</span>, <span class="seriesInfo">DOI 10.17487/RFC7478</span>, <time datetime="2015-03">March 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7478">https://www.rfc-editor.org/info/rfc7478</a>&gt;</span>. </dd>
<dt id="RFC7556">[RFC7556]</dt>
<dd>
<span class="refAuthor">Anipko, D., Ed.</span>, <span class="refTitle">"Multiple Provisioning Domain Architecture"</span>, <span class="seriesInfo">RFC 7556</span>, <span class="seriesInfo">DOI 10.17487/RFC7556</span>, <time datetime="2015-06">June 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7556">https://www.rfc-editor.org/info/rfc7556</a>&gt;</span>. </dd>
<dt id="RFC7657">[RFC7657]</dt>
<dd>
<span class="refAuthor">Black, D., Ed.</span><span class="refAuthor"> and P. Jones</span>, <span class="refTitle">"Differentiated Services (Diffserv) and Real-Time Communication"</span>, <span class="seriesInfo">RFC 7657</span>, <span class="seriesInfo">DOI 10.17487/RFC7657</span>, <time datetime="2015-11">November 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7657">https://www.rfc-editor.org/info/rfc7657</a>&gt;</span>. </dd>
<dt id="RFC8084">[RFC8084]</dt>
<dd>
<span class="refAuthor">Fairhurst, G.</span>, <span class="refTitle">"Network Transport Circuit Breakers"</span>, <span class="seriesInfo">BCP 208</span>, <span class="seriesInfo">RFC 8084</span>, <span class="seriesInfo">DOI 10.17487/RFC8084</span>, <time datetime="2017-03">March 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8084">https://www.rfc-editor.org/info/rfc8084</a>&gt;</span>. </dd>
<dt id="RFC8095">[RFC8095]</dt>
<dd>
<span class="refAuthor">Fairhurst, G., Ed.</span><span class="refAuthor">, Trammell, B., Ed.</span><span class="refAuthor">, and M. Kuehlewind, Ed.</span>, <span class="refTitle">"Services Provided by IETF Transport Protocols and Congestion Control Mechanisms"</span>, <span class="seriesInfo">RFC 8095</span>, <span class="seriesInfo">DOI 10.17487/RFC8095</span>, <time datetime="2017-03">March 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8095">https://www.rfc-editor.org/info/rfc8095</a>&gt;</span>. </dd>
<dt id="RFC8260">[RFC8260]</dt>
<dd>
<span class="refAuthor">Stewart, R.</span><span class="refAuthor">, Tuexen, M.</span><span class="refAuthor">, Loreto, S.</span><span class="refAuthor">, and R. Seggelmann</span>, <span class="refTitle">"Stream Schedulers and User Message Interleaving for the Stream Control Transmission Protocol"</span>, <span class="seriesInfo">RFC 8260</span>, <span class="seriesInfo">DOI 10.17487/RFC8260</span>, <time datetime="2017-11">November 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8260">https://www.rfc-editor.org/info/rfc8260</a>&gt;</span>. </dd>
<dt id="RFC8546">[RFC8546]</dt>
<dd>
<span class="refAuthor">Trammell, B.</span><span class="refAuthor"> and M. Kuehlewind</span>, <span class="refTitle">"The Wire Image of a Network Protocol"</span>, <span class="seriesInfo">RFC 8546</span>, <span class="seriesInfo">DOI 10.17487/RFC8546</span>, <time datetime="2019-04">April 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8546">https://www.rfc-editor.org/info/rfc8546</a>&gt;</span>. </dd>
<dt id="RFC8622">[RFC8622]</dt>
<dd>
<span class="refAuthor">Bless, R.</span>, <span class="refTitle">"A Lower-Effort Per-Hop Behavior (LE PHB) for Differentiated Services"</span>, <span class="seriesInfo">RFC 8622</span>, <span class="seriesInfo">DOI 10.17487/RFC8622</span>, <time datetime="2019-06">June 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8622">https://www.rfc-editor.org/info/rfc8622</a>&gt;</span>. </dd>
<dt id="RFC8699">[RFC8699]</dt>
<dd>
<span class="refAuthor">Islam, S.</span><span class="refAuthor">, Welzl, M.</span><span class="refAuthor">, and S. Gjessing</span>, <span class="refTitle">"Coupled Congestion Control for RTP Media"</span>, <span class="seriesInfo">RFC 8699</span>, <span class="seriesInfo">DOI 10.17487/RFC8699</span>, <time datetime="2020-01">January 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8699">https://www.rfc-editor.org/info/rfc8699</a>&gt;</span>. </dd>
<dt id="TCP-COUPLING">[TCP-COUPLING]</dt>
<dd>
<span class="refTitle">"ctrlTCP: Reducing Latency through Coupled, Heterogeneous Multi-Flow TCP Congestion Control"</span>, <span class="seriesInfo">IEEE INFOCOM Global Internet Symposium (GI) workshop (GI 2018) </span>, <time datetime="2018-04-15">15 April 2018</time>. </dd>
</dl>
</section>
</section>
<div id="convenience-functions">
<section id="section-appendix.a">
      <h2 id="name-convenience-functions">
<a href="#section-appendix.a" class="section-number selfRef">Appendix A. </a><a href="#name-convenience-functions" class="section-name selfRef">Convenience Functions</a>
      </h2>
<div id="preference-conv">
<section id="section-a.1">
        <h2 id="name-adding-preference-propertie">
<a href="#section-a.1" class="section-number selfRef">A.1. </a><a href="#name-adding-preference-propertie" class="section-name selfRef">Adding Preference Properties</a>
        </h2>
<p id="section-a.1-1">As Selection Properties of type <code>Preference</code> will be added to a TransportProperties object quite frequently, implementations should provide special actions for adding each preference level i.e, <code>TransportProperties.Add(some_property, avoid)</code> is equivalent to <code>TransportProperties.Avoid(some_property)</code>:<a href="#section-a.1-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-a.1-2">
<pre>
TransportProperties.Require(property)
TransportProperties.Prefer(property)
TransportProperties.Ignore(property)
TransportProperties.Avoid(property)
TransportProperties.Prohibit(property)
TransportProperties.Default(property)
</pre><a href="#section-a.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="property-profiles">
<section id="section-a.2">
        <h2 id="name-transport-property-profiles">
<a href="#section-a.2" class="section-number selfRef">A.2. </a><a href="#name-transport-property-profiles" class="section-name selfRef">Transport Property Profiles</a>
        </h2>
<p id="section-a.2-1">To ease the use of the interface specified by this document, implementations
should provide a mechanism to create Transport Property objects (see <a href="#selection-props" class="xref">Section 5.2</a>) that are pre-configured with frequently used sets of properties.
Implementations should at least offer short-hands to specify the following property profiles:<a href="#section-a.2-1" class="pilcrow">¶</a></p>
<div id="reliable-inorder-stream">
<section id="section-a.2.1">
          <h3 id="name-reliable-inorder-stream">
<a href="#section-a.2.1" class="section-number selfRef">A.2.1. </a><a href="#name-reliable-inorder-stream" class="section-name selfRef">reliable-inorder-stream</a>
          </h3>
<p id="section-a.2.1-1">This profile provides reliable, in-order transport service with
congestion control.
An example of a protocol that provides this service is TCP.
It should consist of the following properties:<a href="#section-a.2.1-1" class="pilcrow">¶</a></p>
<table class="center" id="table-2">
            <caption><a href="#table-2" class="selfRef">Table 2</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Property</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">reliability</td>
                <td class="text-left" rowspan="1" colspan="1">require</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">preserve-order</td>
                <td class="text-left" rowspan="1" colspan="1">require</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">congestion-control</td>
                <td class="text-left" rowspan="1" colspan="1">require</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">preserve-msg-boundaries</td>
                <td class="text-left" rowspan="1" colspan="1">ignore</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="reliable-message">
<section id="section-a.2.2">
          <h3 id="name-reliable-message">
<a href="#section-a.2.2" class="section-number selfRef">A.2.2. </a><a href="#name-reliable-message" class="section-name selfRef">reliable-message</a>
          </h3>
<p id="section-a.2.2-1">This profile provides message-preserving, reliable, in-order
transport service with congestion control.
An example of a protocol that provides this service is SCTP.
It should consist of the following properties:<a href="#section-a.2.2-1" class="pilcrow">¶</a></p>
<table class="center" id="table-3">
            <caption><a href="#table-3" class="selfRef">Table 3</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Property</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">reliability</td>
                <td class="text-left" rowspan="1" colspan="1">require</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">preserve-order</td>
                <td class="text-left" rowspan="1" colspan="1">require</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">congestion-control</td>
                <td class="text-left" rowspan="1" colspan="1">require</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">preserve-msg-boundaries</td>
                <td class="text-left" rowspan="1" colspan="1">require</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="unreliable-datagram">
<section id="section-a.2.3">
          <h3 id="name-unreliable-datagram">
<a href="#section-a.2.3" class="section-number selfRef">A.2.3. </a><a href="#name-unreliable-datagram" class="section-name selfRef">unreliable-datagram</a>
          </h3>
<p id="section-a.2.3-1">This profile provides unreliable datagram transport service.
An example of a protocol that provides this service is UDP.
It should consist of the following properties:<a href="#section-a.2.3-1" class="pilcrow">¶</a></p>
<table class="center" id="table-4">
            <caption><a href="#table-4" class="selfRef">Table 4</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Property</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">reliability</td>
                <td class="text-left" rowspan="1" colspan="1">ignore</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">preserve-order</td>
                <td class="text-left" rowspan="1" colspan="1">ignore</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">congestion-control</td>
                <td class="text-left" rowspan="1" colspan="1">ignore</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">preserve-msg-boundaries</td>
                <td class="text-left" rowspan="1" colspan="1">require</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">idempotent</td>
                <td class="text-left" rowspan="1" colspan="1">true</td>
              </tr>
            </tbody>
          </table>
<p id="section-a.2.3-3">Applications that choose this Transport Property Profile for latency reasons
should also consider setting the Capacity Profile Property,
see <a href="#prop-cap-profile" class="xref">Section 10.1.6</a> accordingly and my benefit from controlling checksum
coverage, see <a href="#prop-checksum-control-send" class="xref">Section 5.2.7</a> and <a href="#prop-checksum-control-receive" class="xref">Section 5.2.8</a>.<a href="#section-a.2.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="relationship-to-the-minimal-set-of-transport-services-for-end-systems">
<section id="section-appendix.b">
      <h2 id="name-relationship-to-the-minimal">
<a href="#section-appendix.b" class="section-number selfRef">Appendix B. </a><a href="#name-relationship-to-the-minimal" class="section-name selfRef">Relationship to the Minimal Set of Transport Services for End Systems</a>
      </h2>
<p id="section-appendix.b-1"><span>[<a href="#I-D.ietf-taps-minset" class="xref">I-D.ietf-taps-minset</a>]</span> identifies a minimal set of transport services that end systems should offer. These services make all non-security-related transport features of TCP, MPTCP, UDP, UDP-Lite, SCTP and LEDBAT available that 1) require interaction with the application, and 2) do not get in the way of a possible implementation over TCP (or, with limitations, UDP). The following text explains how this minimal set is reflected in the present API. For brevity, it is based on the list in Section 4.1 of <span>[<a href="#I-D.ietf-taps-minset" class="xref">I-D.ietf-taps-minset</a>]</span>, updated according to the discussion in Section 5 of <span>[<a href="#I-D.ietf-taps-minset" class="xref">I-D.ietf-taps-minset</a>]</span>. This list is a subset of the transport features in Appendix A of <span>[<a href="#I-D.ietf-taps-minset" class="xref">I-D.ietf-taps-minset</a>]</span>, which refers to the primitives in "pass 2" (Section 4) of <span>[<a href="#RFC8303" class="xref">RFC8303</a>]</span> for further details on the implementation with TCP, MPTCP, UDP, UDP-Lite, SCTP and LEDBAT.<a href="#section-appendix.b-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-2.1">Connect:
"Initiate" Action (<a href="#initiate" class="xref">Section 6.1</a>).<a href="#section-appendix.b-2.1" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.2">Listen:
"Listen" Action (<a href="#listen" class="xref">Section 6.2</a>).<a href="#section-appendix.b-2.2" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.3">Specify number of attempts and/or timeout for the first establishment message:
"timeout" parameter of <code>Initiate</code> (<a href="#initiate" class="xref">Section 6.1</a>) or <code>InitiateWithSend</code> Action (<a href="#initiate-and-send" class="xref">Section 7.8</a>).<a href="#section-appendix.b-2.3" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.4">Disable MPTCP:
<code>Parallel Use of Multiple Paths</code> Property (<a href="#parallel-multipath" class="xref">Section 5.2.13</a>).<a href="#section-appendix.b-2.4" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.5">Hand over a message to reliably transfer (possibly multiple times) before connection establishment:
<code>InitiateWithSend</code> Action (<a href="#initiate-and-send" class="xref">Section 7.8</a>).<a href="#section-appendix.b-2.5" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.6">Change timeout for aborting connection (using retransmit limit or time value):
<code>Timeout for Aborting Connection</code> property, using a time value (<a href="#conn-timeout" class="xref">Section 10.1.4</a>).<a href="#section-appendix.b-2.6" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.7">Timeout event when data could not be delivered for too long:
<code>ConnectionError</code> Event (<a href="#termination" class="xref">Section 11</a>).<a href="#section-appendix.b-2.7" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.8">Suggest timeout to the peer:
<code>TCP-specific Property: User Timeout</code> (<a href="#tcp-uto" class="xref">Section 10.2</a>).<a href="#section-appendix.b-2.8" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.9">Notification of Excessive Retransmissions (early warning below abortion threshold):
<code>Notification of excessive retransmissions</code> property (<a href="#prop-establish-retrans-notify" class="xref">Section 5.2.15</a>).<a href="#section-appendix.b-2.9" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.10">Notification of ICMP error message arrival:
<code>Notification of ICMP soft error message arrival</code> property (<a href="#prop-soft-error" class="xref">Section 5.2.16</a>).<a href="#section-appendix.b-2.10" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.11">Choose a scheduler to operate between streams of an association:
<code>Connection Group Transmission Scheduler</code> property (<a href="#conn-scheduler" class="xref">Section 10.1.5</a>).<a href="#section-appendix.b-2.11" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.12">Configure priority or weight for a scheduler:
<code>Priority (Connection)</code> property (<a href="#conn-priority" class="xref">Section 10.1.3</a>).<a href="#section-appendix.b-2.12" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.13">"Specify checksum coverage used by the sender" and "Disable checksum when sending":
<code>Corruption Protection Length</code> property (<a href="#msg-checksum" class="xref">Section 7.5.6</a>) and <code>Full Checksum Coverage on Sending</code> property (<a href="#prop-checksum-control-send" class="xref">Section 5.2.7</a>).<a href="#section-appendix.b-2.13" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.14">"Specify minimum checksum coverage required by receiver" and "Disable checksum requirement when receiving":
<code>Required Minimum Corruption Protection Coverage for Receiving</code> property (<a href="#conn-recv-checksum" class="xref">Section 10.1.2</a>) and <code>Full Checksum Coverage on Receiving</code> property (<a href="#prop-checksum-control-receive" class="xref">Section 5.2.8</a>).<a href="#section-appendix.b-2.14" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.15">"Specify DF" field and "Request not to bundle messages":
the <code>Singular Transmission</code> Message Property combines both of these requests, i.e. if a request not to bundle messages is made, this also turns off fragmentation (i.e., sets DF=1) in case of protocols that allow this (only UDP and UDP-Lite, which cannot bundle messages anyway) (<a href="#send-singular" class="xref">Section 7.5.9</a>).<a href="#section-appendix.b-2.15" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.16">Get max. transport-message size that may be sent using a non-fragmented IP packet from the configured interface:
<code>Maximum Message Size Before Fragmentation or Segmentation</code> property (<a href="#conn-max-msg-notfrag" class="xref">Section 10.1.8.2</a>).<a href="#section-appendix.b-2.16" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.17">Get max. transport-message size that may be received from the configured interface:
<code>Maximum Message Size on Receive</code> property (<a href="#conn-max-msg-recv" class="xref">Section 10.1.8.4</a>).<a href="#section-appendix.b-2.17" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.18">Obtain ECN field:
<code>ECN</code> is a defined UDP(-Lite)-specific read-only Message Property of the MessageContext object (<a href="#receive-ecn" class="xref">Section 8.3.1</a>).<a href="#section-appendix.b-2.18" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.19">"Specify DSCP field", "Disable Nagle algorithm", "Enable and configure a 'Low Extra Delay Background Transfer'":
as suggested in Section 5.5 of <span>[<a href="#I-D.ietf-taps-minset" class="xref">I-D.ietf-taps-minset</a>]</span>, these transport features are collectively offered via the <code>Capacity Profile</code> property (<a href="#prop-cap-profile" class="xref">Section 10.1.6</a>). Per-Message control is offered via the <code>Message Capacity Profile Override</code> property (<a href="#send-profile" class="xref">Section 7.5.8</a>).<a href="#section-appendix.b-2.19" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.20">Close after reliably delivering all remaining data, causing an event informing the application on the other side:
this is offered by the <code>Close</code> Action with slightly changed semantics in line with the discussion in Section 5.2 of <span>[<a href="#I-D.ietf-taps-minset" class="xref">I-D.ietf-taps-minset</a>]</span> (<a href="#termination" class="xref">Section 11</a>).<a href="#section-appendix.b-2.20" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.21">"Abort without delivering remaining data, causing an event informing the application on the other side" and "Abort without delivering remaining data, not causing an event informing the application on the other side":
this is offered by the <code>Abort</code> action without promising that this is signaled to the other side. If it is, a <code>ConnectionError</code> Event will fire at the peer (<a href="#termination" class="xref">Section 11</a>).<a href="#section-appendix.b-2.21" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.22">"Reliably transfer data, with congestion control", "Reliably transfer a message, with congestion control" and "Unreliably transfer a message":
data is transferred via the <code>Send</code> action (<a href="#sending" class="xref">Section 7</a>). Reliability is controlled via the <code>Reliable Data Transfer (Connection)</code> (<a href="#prop-reliable" class="xref">Section 5.2.1</a>) property and the <code>Reliable Data Transfer (Message)</code> Message Property (<a href="#msg-reliable-message" class="xref">Section 7.5.7</a>). Transmitting data as a message or without delimiters is controlled via Message Framers (<a href="#framing" class="xref">Section 9</a>). The choice of congestion control is provided via the <code>Congestion control</code> property (<a href="#prop-cc" class="xref">Section 5.2.9</a>).<a href="#section-appendix.b-2.22" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.23">Configurable Message Reliability:
the <code>Lifetime</code> Message Property implements a time-based way to configure message reliability (<a href="#msg-lifetime" class="xref">Section 7.5.1</a>).<a href="#section-appendix.b-2.23" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.24">"Ordered message delivery (potentially slower than unordered)" and "Unordered message delivery (potentially faster than ordered)":
these two transport features are controlled via the Message Property <code>Ordered</code> (<a href="#msg-ordered" class="xref">Section 7.5.3</a>).<a href="#section-appendix.b-2.24" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.25">Request not to delay the acknowledgement (SACK) of a message:
should the protocol support it, this is one of the transport features the transport system can apply when an application uses the <code>Capacity Profile</code> Property (<a href="#prop-cap-profile" class="xref">Section 10.1.6</a>) or the <code>Message Capacity Profile Override</code> Message Property (<a href="#send-profile" class="xref">Section 7.5.8</a>) with value "Low Latency/Interactive".<a href="#section-appendix.b-2.25" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.26">Receive data (with no message delimiting):
<code>Received</code> Event (<a href="#receive-complete" class="xref">Section 8.2.1</a>). See <a href="#framing" class="xref">Section 9</a> for handling Message framing in situations where the Protocol
Stack only provides a byte-stream transport.<a href="#section-appendix.b-2.26" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.27">Receive a message:
<code>Received</code> Event (<a href="#receive-complete" class="xref">Section 8.2.1</a>), using Message Framers (<a href="#framing" class="xref">Section 9</a>).<a href="#section-appendix.b-2.27" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.28">Information about partial message arrival:
<code>ReceivedPartial</code> Event (<a href="#receive-partial" class="xref">Section 8.2.2</a>).<a href="#section-appendix.b-2.28" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.29">Notification of send failures:
<code>Expired</code> Event (<a href="#expired" class="xref">Section 7.3.2</a>) and <code>SendError</code> Event (<a href="#send-error" class="xref">Section 7.3.3</a>).<a href="#section-appendix.b-2.29" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.30">Notification that the stack has no more user data to send:
applications can obtain this information via the <code>Sent</code> Event (<a href="#sent" class="xref">Section 7.3.1</a>).<a href="#section-appendix.b-2.30" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.31">Notification to a receiver that a partial message delivery has been aborted:
<code>ReceiveError</code> Event (<a href="#receive-error" class="xref">Section 8.2.3</a>).<a href="#section-appendix.b-2.31" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.c">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Brian Trammell (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Google</span></div>
<div dir="auto" class="left"><span class="street-address">Gustav-Gull-Platz 1</span></div>
<div dir="auto" class="left"><span class="locality">8004 Zurich</span></div>
<div dir="auto" class="left"><span class="country-name">Switzerland</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ietf@trammell.ch" class="email">ietf@trammell.ch</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Michael Welzl (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">University of Oslo</span></div>
<div dir="auto" class="left"><span class="street-address">PO Box 1080 Blindern</span></div>
<div dir="auto" class="left"><span class="locality">0316  Oslo</span></div>
<div dir="auto" class="left"><span class="country-name">Norway</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:michawe@ifi.uio.no" class="email">michawe@ifi.uio.no</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Theresa Enghardt</span></div>
<div dir="auto" class="left"><span class="org">TU Berlin</span></div>
<div dir="auto" class="left"><span class="street-address">Marchstrasse 23</span></div>
<div dir="auto" class="left"><span class="locality">10587 Berlin</span></div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:theresa@inet.tu-berlin.de" class="email">theresa@inet.tu-berlin.de</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Godred Fairhurst</span></div>
<div dir="auto" class="left"><span class="org">University of Aberdeen</span></div>
<div dir="auto" class="left"><span class="street-address">Fraser Noble Building</span></div>
<div dir="auto" class="left"><span class="locality">Aberdeen, AB24 3UE</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:gorry@erg.abdn.ac.uk" class="email">gorry@erg.abdn.ac.uk</a>
</div>
<div class="url">
<span>URI:</span>
<a href="http://www.erg.abdn.ac.uk/" class="url">http://www.erg.abdn.ac.uk/</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Mirja Kuehlewind</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div dir="auto" class="left"><span class="street-address">Ericsson-Allee 1</span></div>
<div dir="auto" class="left"><span class="locality">Herzogenrath</span></div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mirja.kuehlewind@ericsson.com" class="email">mirja.kuehlewind@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Colin Perkins</span></div>
<div dir="auto" class="left"><span class="org">University of Glasgow</span></div>
<div dir="auto" class="left"><span class="street-address">School of Computing Science</span></div>
<div dir="auto" class="left"><span class="locality">Glasgow  G12 8QQ</span></div>
<div dir="auto" class="left"><span class="country-name">United Kingdom</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:csp@csperkins.org" class="email">csp@csperkins.org</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Philipp S. Tiesel</span></div>
<div dir="auto" class="left"><span class="org">TU Berlin</span></div>
<div dir="auto" class="left"><span class="street-address">Einsteinufer 25</span></div>
<div dir="auto" class="left"><span class="locality">10587 Berlin</span></div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:philipp@tiesel.net" class="email">philipp@tiesel.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Chris Wood</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">One Apple Park Way</span></div>
<div dir="auto" class="left">
<span class="locality">Cupertino, California 95014</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:cawood@apple.com" class="email">cawood@apple.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Tommy Pauly</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">One Apple Park Way</span></div>
<div dir="auto" class="left">
<span class="locality">Cupertino, California 95014</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:tpauly@apple.com" class="email">tpauly@apple.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
