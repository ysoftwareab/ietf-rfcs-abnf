<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Internet Exchange Route Server Operations </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Notational Conventions">
<link href="#rfc.section.2" rel="Chapter" title="2 Bilateral Interconnection">
<link href="#rfc.section.3" rel="Chapter" title="3 Multilateral Interconnection">
<link href="#rfc.section.4" rel="Chapter" title="4 Operational Considerations for Route Server Installations">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Path Hiding">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Route Server Scaling">
<link href="#rfc.section.4.2.1" rel="Chapter" title="4.2.1 Tackling Scaling Issues">
<link href="#rfc.section.4.2.1.1" rel="Chapter" title="4.2.1.1 View Merging and Decomposition">
<link href="#rfc.section.4.2.1.2" rel="Chapter" title="4.2.1.2 Destination Splitting">
<link href="#rfc.section.4.2.1.3" rel="Chapter" title="4.2.1.3 NEXT_HOP Resolution">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 NLRI Leakage Mitigation">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Route Server Redundancy">
<link href="#rfc.section.4.5" rel="Chapter" title="4.5 AS_PATH Consistency Check">
<link href="#rfc.section.4.6" rel="Chapter" title="4.6 Export Routing Policies">
<link href="#rfc.section.4.6.1" rel="Chapter" title="4.6.1 BGP Communities">
<link href="#rfc.section.4.6.2" rel="Chapter" title="4.6.2 Internet Routing Registry">
<link href="#rfc.section.4.6.3" rel="Chapter" title="4.6.3 Client-accessible Databases">
<link href="#rfc.section.5" rel="Chapter" title="5 Security Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Acknowledgments">
<link href="#rfc.references" rel="Chapter" title="8 References">
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="8.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The growing popularity of Internet exchange points (IXPs) brings a new set of requirements to interconnect participating networks. While bilateral exterior BGP sessions between exchange participants were previously the most common means of exchanging reachability information, the overhead associated with dense interconnection has caused substantial operational scaling problems for Internet exchange point participants.  " />
  <meta name="description" content="The growing popularity of Internet exchange points (IXPs) brings a new set of requirements to interconnect participating networks. While bilateral exterior BGP sessions between exchange participants were previously the most common means of exchanging reachability information, the overhead associated with dense interconnection has caused substantial operational scaling problems for Internet exchange point participants.  " />
  <meta name="keywords" content="I-D, Internet-Draft, GROW" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">GROW Working Group</td>
<td class="right">N. Hilliard</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">INEX</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">E. Jasinska</td>
</tr>
<tr>
<td class="left">Expires: April 27, 2012</td>
<td class="right">Limelight Networks</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">R. Raszuk</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">NTT MCL Inc.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">N. Bakker</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">AMS-IX B.V.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 25, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Internet Exchange Route Server Operations <br />
  <span class="filename">draft-hilliard-ix-bgp-route-server-operations-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The growing popularity of Internet exchange points (IXPs) brings a new set of requirements to interconnect participating networks. While bilateral exterior BGP sessions between exchange participants were previously the most common means of exchanging reachability information, the overhead associated with dense interconnection has caused substantial operational scaling problems for Internet exchange point participants.  </p>
<p>Multilateral interconnection can dramatically reduce the administrative and operational overhead of IXP participation and is now used by many IXP participants as a means of exchanging routing information.  </p>
<p>This document outlines operational considerations for multilateral interconnections at IXPs.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 27, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Notational Conventions</a>
</li>
<li>2.   <a href="#rfc.section.2">Bilateral Interconnection</a>
</li>
<li>3.   <a href="#rfc.section.3">Multilateral Interconnection</a>
</li>
<li>4.   <a href="#rfc.section.4">Operational Considerations for Route Server Installations</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Path Hiding</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Route Server Scaling</a>
</li>
<li>4.2.1.   <a href="#rfc.section.4.2.1">Tackling Scaling Issues</a>
</li>
<li>4.2.1.1.   <a href="#rfc.section.4.2.1.1">View Merging and Decomposition</a>
</li>
<li>4.2.1.2.   <a href="#rfc.section.4.2.1.2">Destination Splitting</a>
</li>
<li>4.2.1.3.   <a href="#rfc.section.4.2.1.3">NEXT_HOP Resolution</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">NLRI Leakage Mitigation</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Route Server Redundancy</a>
</li>
<li>4.5.   <a href="#rfc.section.4.5">AS_PATH Consistency Check</a>
</li>
<li>4.6.   <a href="#rfc.section.4.6">Export Routing Policies</a>
</li>
<li>4.6.1.   <a href="#rfc.section.4.6.1">BGP Communities</a>
</li>
<li>4.6.2.   <a href="#rfc.section.4.6.2">Internet Routing Registry</a>
</li>
<li>4.6.3.   <a href="#rfc.section.4.6.3">Client-accessible Databases</a>
</li>
<li>5.   <a href="#rfc.section.5">Security Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Acknowledgments</a>
</li>
<li>8.   <a href="#rfc.references">References</a>
</li>
<li>8.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>8.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">Internet exchange points (IXPs) provide IP data interconnection facilities for their participants, typically using shared Layer-2 networking media such as Ethernet. The Border Gateway Protocol (BGP) <a href="#RFC4271">[RFC4271]</a>, an inter-Autonomous System routing protocol, is commonly used to facilitate exchange of network reachability information over such media.  </p>
<p id="rfc.section.1.p.2">BGP route servers <a href="#I-D.jasinska-ix-bgp-route-server">[I-D.jasinska-ix-bgp-route-server]</a> are commonly deployed by IXP operators to provide a simple and convenient means of interconnecting IXP participants with each other.  A route server redistributes prefixes received from its BGP clients to other clients according to a pre-specified policy, and it can be viewed as similar to an eBGP equivalent of an iBGP <a href="#RFC4456">[RFC4456]</a> route reflector.  </p>
<p id="rfc.section.1.p.3">Route servers at IXPs require careful management and it is important for route server operators to thoroughly understand both how they work and what their limitations are.  In this document, we discuss several issues of direct operational relevance to route server operators, and provide a number of recommendations to help route server operators provision a reliable multilateral interconnection service.  </p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Notational Conventions</h1>
<p id="rfc.section.1.1.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Bilateral Interconnection</h1>
<p id="rfc.section.2.p.1">Bilateral interconnection is a method of interconnecting routers using individual BGP sessions between each participant router on an IXP, in order to exchange reachability information. While interconnection policies vary from participant to participant, most IXPs have significant numbers of participants who see value in interconnecting with as many other exchange participants as possible.  In order for an IXP participant to implement a dense interconnection policy, it is necessary for the participant to liaise with each of their intended interconnection partners.  If this partner agrees to interconnect, then both participants' routers must be configured with a BGP session to exchange network reachability information. If each exchange participant interconnects with each other participant, a full mesh of BGP sessions is needed, as shown in <a href="#ixp_interconnection">Figure 1</a>.  </p>
<div id="#rfc.figure.1"></div>
<div id="#ixp_interconnection"></div>
<p></p>
<pre>
     ___      ___
    /   \    /   \
 ..| AS1 |..| AS2 |..
:   \___/____\___/   :
:     | \    / |     :
:     |  \  /  |     :
: IXP |   \/   |     :
:     |   /\   |     :
:     |  /  \  |     :
:    _|_/____\_|_    :
:   /   \    /   \   :
 ..| AS3 |..| AS4 |..
    \___/    \___/
        </pre>
<p></p>
<p><a href="#ixp_interconnection">Figure 1</a> depicts an IXP platform with four connected routers, administered by four separate exchange participants, each of them with a locally unique autonomous system number: AS1, AS2, AS3 and AS4. Each of these four participants wishes to exchange traffic with all other participants; this is accomplished by configuring a full mesh of BGP sessions on each router connected to the exchange, resulting in 6 BGP sessions across the IXP fabric.  </p>
<p id="rfc.section.2.p.3">The number of BGP sessions at an exchange has an upper bound of n*(n-1)/2, where n is the number of routers at the exchange. As many exchanges have relatively large numbers of participating networks, the quadratic scaling requirements of dense interconnection tend to cause high operational and administrative overhead. Consequently, new participants to an IXP require significant initial resourcing in order to gain value from their IXP connection, while existing exchange participants need to commit ongoing resources in order to benefit from interconnecting with these new participants.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Multilateral Interconnection</h1>
<p id="rfc.section.3.p.1">Multilateral interconnection is implemented using a route server configured to use BGP to distribute network layer reachability information (NLRI) among all client routers. The route server preserves the BGP NEXT_HOP attribute from all received NLRI UPDATE messages, and passes these messages with unchanged NEXT_HOP to its route server clients, according to its configured routing policy, as described in <a href="#I-D.jasinska-ix-bgp-route-server">[I-D.jasinska-ix-bgp-route-server]</a>.  Using this method of exchanging NLRI messages, an IXP participant router can receive an aggregated list of prefixes from all other route server clients using a single BGP session to the route server instead of depending on BGP sessions with each other router at the exchange.  This reduces the overall number of BGP sessions at an Internet exchange from n*(n-1)/2 to n, where n is the number of routers at the exchange.  </p>
<p id="rfc.section.3.p.2">Although a route server uses BGP to exchange reachability information with each of its clients, it does not forward traffic itself and is therefore not a router.  </p>
<p id="rfc.section.3.p.3">In practical terms, this allows dense interconnection between IXP participants with low administrative overhead and significantly simpler and smaller router configurations. In particular, new IXP participants benefit from immediate and extensive interconnection, while existing route server participants receive reachability information from these new participants without necessarily having to modify their configurations.  </p>
<div id="#rfc.figure.2"></div>
<div id="#rs_interconnection"></div>
<p></p>
<pre>
     ___      ___
    /   \    /   \
 ..| AS1 |..| AS2 |..
:   \___/    \___/   :
:      \      /      :
:       \    /       :
:        \__/        :
: IXP   /    \       :
:      |  RS  |      :
:       \____/       :
:        /  \        :
:       /    \       :
:    __/      \__    :
:   /   \    /   \   :
 ..| AS3 |..| AS4 |..
    \___/    \___/
        </pre>
<p></p>
<p id="rfc.section.3.p.4">As illustrated in <a href="#rs_interconnection">Figure 2</a>, each router on the IXP fabric requires only a single BGP session to the route server, from which it can receive reachability information for all other routers on the IXP which also connect to the route server.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#ops_considerations" id="ops_considerations">Operational Considerations for Route Server Installations</a>
</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#path_hiding" id="path_hiding">Path Hiding</a>
</h1>
<p id="rfc.section.4.1.p.1">"Path hiding" is a term used in <a href="#I-D.jasinska-ix-bgp-route-server">[I-D.jasinska-ix-bgp-route-server]</a> to describe the process whereby a route server may mask individual paths by applying conflicting routing policies to its Loc-RIB.  When this happens, route server clients receive incomplete information from the route server about network reachability.  </p>
<p id="rfc.section.4.1.p.2">There are several approaches which may be used to mitigate against the effect of path hiding; these are described in <a href="#I-D.jasinska-ix-bgp-route-server">[I-D.jasinska-ix-bgp-route-server]</a>.  However, the only method which does not require explicit support from the route server client is for the route server itself to maintain a individual Loc-RIB for each client.  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#ops_scaling" id="ops_scaling">Route Server Scaling</a>
</h1>
<p id="rfc.section.4.2.p.1">While deployment of multiple Loc-RIBs on the route server presents a simple way to avoid the path hiding problem noted in <a href="#path_hiding">Section 4.1</a>, this approach requires significantly more computing resources on the route server than where a single Loc-RIB is deployed for all clients. As the <a href="#RFC4271">[RFC4271]</a> Decision Process must be applied to all Loc-RIBs deployed on the route server, both CPU and memory requirements on the host computer scale approximately according to O(P * N), where P is the total number of unique paths received by the route server and N is the number of route server clients which require a unique Loc-RIB. As this is a super-linear scaling relationship, large route servers may derive benefit from deploying per-client Loc-RIBs only where they are required.  </p>
<p id="rfc.section.4.2.p.2">Regardless of any Loc-RIB optimization implemented, the route server's control plane bandwidth requirements will scale according to O(P * N), where P is the total number of unique paths received by the route server and N is the total number of route server clients. In the case where P_avg (the arithmetic mean number of unique paths received per route server client) remains roughly constant even as the number of connected clients increases, this relationship can be rewritten as O((P_avg * N) * N) or O(N^2).  This quadratic upper bound on the network traffic requirements indicates that the route server model will not scale to arbitrarily large sizes.  </p>
<h1 id="rfc.section.4.2.1">
<a href="#rfc.section.4.2.1">4.2.1.</a> Tackling Scaling Issues</h1>
<p id="rfc.section.4.2.1.p.1">The network traffic scaling issue presents significant difficulties with no clear solution - ultimately, each client must receive a UPDATE for each unique prefix received by the route server. However, there are several potential methods for dealing with the CPU and memory resource requirements of route servers.  </p>
<h1 id="rfc.section.4.2.1.1">
<a href="#rfc.section.4.2.1.1">4.2.1.1.</a> View Merging and Decomposition</h1>
<p id="rfc.section.4.2.1.1.p.1">View merging and decomposition, outlined in <a href="#RS-ARCH">[RS-ARCH]</a>, describes a method of optimising memory and CPU requirements where multiple route server clients are subject to exactly the same routing policies. In this situation, the multiple Loc-RIB views required by each client are merged into a single view.  </p>
<p id="rfc.section.4.2.1.1.p.2">There are several variations of this approach.  If the route server operator has prior knowledge of interconnection relationships between route server clients, then the operator may configure separate Loc-RIBs only for route server clients with unique outbound routing policies.  As this approach requires prior knowledge of interconnection relationships, the route server operator must depend on each client sharing their interconnection policies, either in a internal provisioning database controlled by the operator, or else in an external data store such as an Internet Routing Registry Database.  </p>
<p id="rfc.section.4.2.1.1.p.3">Conversely, the route server implementation itself may implement view decomposition by creating virtual Loc-RIBs based on a single in-memory master Loc-RIB, with delta differences for each prefix subject to different routing policies.  This allows a more granular and flexible approach to the problem of Loc-RIB scaling, at the expense of requiring a more complex in-memory Loc-RIB structure.  </p>
<p id="rfc.section.4.2.1.1.p.4">Whatever method of view merging and decomposition is chosen on a route server, pathological edge cases can be created whereby they will scale no better than fully non-optimised per-client Loc-RIBs.  However, as most route server clients connect to a route server for the purposes of reducing overhead, rather than implementing complex per-client routing policies, edge cases tend not to arise in practice.  </p>
<h1 id="rfc.section.4.2.1.2">
<a href="#rfc.section.4.2.1.2">4.2.1.2.</a> Destination Splitting</h1>
<p id="rfc.section.4.2.1.2.p.1">Destination splitting, also described in <a href="#RS-ARCH">[RS-ARCH]</a>, describes a method for route server clients to connect to multiple route servers and to send non-overlapping sets of prefixes to each route server. As each route server computes the best path for its own set of prefixes, the quadratic scaling requirement operates on multiple smaller sets of prefixes. This reduces the overall computational and memory requirements for managing multiple Loc-RIBs and performing the best-path calculation on each. In order for this method to perform well, destination splitting would require significant co-ordination between the route server operator and each route server client. In practice, such levels of co-ordination are unlikely to work successfully, thereby diminishing the value of this approach.  </p>
<h1 id="rfc.section.4.2.1.3">
<a href="#rfc.section.4.2.1.3">4.2.1.3.</a> NEXT_HOP Resolution</h1>
<p id="rfc.section.4.2.1.3.p.1">As route servers are usually deployed at IXPs which use flat layer 2 networks, recursive resolution of the NEXT_HOP attribute is generally not required, and can be replaced by a simple check to ensure that the NEXT_HOP value for each prefix is a network address on the IXP LAN's IP address range.  </p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#ops_leakage_mitigation" id="ops_leakage_mitigation">NLRI Leakage Mitigation</a>
</h1>
<p id="rfc.section.4.3.p.1">NLRI leakage occurs when a BGP client unintentionally distributes NLRI UPDATE messages to one or more neighboring BGP routers. NLRI leakage of this form to a route server can cause connectivity problems at an IXP if each route server client is configured to accept all prefix UPDATE messages from the route server. It is therefore RECOMMENDED when deploying route servers that, due to the potential for collateral damage caused by NLRI leakage, route server operators deploy NLRI leakage mitigation measures in order to prevent unintentional prefix announcements or else limit the scale of any such leak. Although not foolproof, per-client inbound prefix limits can restrict the damage caused by prefix leakage in many cases. Per-client inbound prefix filtering on the route server is a more deterministic and usually more reliable means of preventing prefix leakage, but requires more administrative resources to maintain properly.  </p>
<p id="rfc.section.4.3.p.2">If a route server operator implements per-client inbound prefix filtering, then it is RECOMMENDED that the operator also builds in mechanisms to automatically compare the Adj-RIB-In received from each client with the inbound prefix lists configured for those clients.  Naturally, it is the responsibility of the route server client to ensure that their stated prefix list is compatible with what they announce to an IXP route server.  However, many network operators do not carefully manage their published routing policies and it is not uncommon to see significant variation between the two sets of prefixes.  Route server operator visibility into this discrepancy can provide significant advantages to both operator and client.  </p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> <a href="#ops_use_two_of_em" id="ops_use_two_of_em">Route Server Redundancy</a>
</h1>
<p id="rfc.section.4.4.p.1">As the purpose of an IXP route server implementation is to provide a reliable reachability brokerage service, it is RECOMMENDED that exchange operators who implement route server systems provision multiple route servers on each shared Layer-2 domain.  There is no requirement to use the same BGP implementation or operating system for each route server on the IXP fabric; however, it is RECOMMENDED that where an operator provisions more than a single server on the same shared Layer-2 domain, each route server implementation be configured equivalently and in such a manner that the path reachability information from each system is identical.  </p>
<h1 id="rfc.section.4.5">
<a href="#rfc.section.4.5">4.5.</a> AS_PATH Consistency Check</h1>
<p><a href="#RFC4271">[RFC4271]</a> requires that every BGP speaker which advertises a route to another external BGP speaker prepends its own AS number as the last element of the AS_PATH sequence.  Therefore the leftmost AS in an AS_PATH attribute should be equal to the autonomous system number of the BGP speaker which sent the UPDATE message.  </p>
<p id="rfc.section.4.5.p.2">As <a href="#I-D.jasinska-ix-bgp-route-server">[I-D.jasinska-ix-bgp-route-server]</a> suggests that route servers should not modify the AS_PATH attribute, a consistency check on the AS_PATH of an UPDATE received by a route server client would normally fail.  It is therefore RECOMMENDED that route server clients disable the AS_PATH consistency check towards the route server.  </p>
<h1 id="rfc.section.4.6">
<a href="#rfc.section.4.6">4.6.</a> Export Routing Policies</h1>
<p id="rfc.section.4.6.p.1">Policy filtering is commonly implemented on route servers to provide prefix distribution control mechanisms for route server clients.  A route server "export" policy is a policy which affects prefixes sent from the route server to a route server client.  Several different strategies are commonly used for implementing route server export policies.  </p>
<h1 id="rfc.section.4.6.1">
<a href="#rfc.section.4.6.1">4.6.1.</a> BGP Communities</h1>
<p id="rfc.section.4.6.1.p.1">Prefixes sent to the route server are tagged with specific <a href="#RFC1997">[RFC1997]</a> or <a href="#RFC4360">[RFC4360]</a> BGP community attributes, based on pre-defined values agreed between the operator and all client.  Based on these community tags, prefixes may be propagated to all other clients, a subset of clients, or none.  This mechanism allows route server clients to instruct the route server to implement per-client export routing policies.  </p>
<p id="rfc.section.4.6.1.p.2">As both standard and extended BGP communities values are restricted to 6 octets, the route server operator should take care to ensure that the predefined BGP community values mechanism used on their route server is compatible with <a href="#RFC4893">[RFC4893]</a> 4-octet autonomous system numbers.  </p>
<h1 id="rfc.section.4.6.2">
<a href="#rfc.section.4.6.2">4.6.2.</a> Internet Routing Registry</h1>
<p id="rfc.section.4.6.2.p.1">Internet Routing Registry databases (IRRDBs) may be used by route server operators to implement construct per-client routing policies.  <a href="#RFC2622">[RFC2622]</a> Routing Policy Specification Language (RPSL) provides an comprehensive grammar for describing interconnection relationships, and several toolsets exist which can be used to translate RPSL policy description into route server configurations.  </p>
<h1 id="rfc.section.4.6.3">
<a href="#rfc.section.4.6.3">4.6.3.</a> Client-accessible Databases</h1>
<p id="rfc.section.4.6.3.p.1">Should the route server operator not wish to use either BGP community tags or the public IRRDBs for implementing client export policies, they may implement their own routing policy database system for managing their clients' requirements.  A database of this form SHOULD allow a route server client operator to update their routing policy and provide a mechanism for allowing the client to specify whether they wish to exchange all their prefixes with any other route server client.  Optionally, the implementation may allow a client to specify unique routing policies for individual prefixes over which they have routing policy control.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Security Considerations</h1>
<p id="rfc.section.5.p.1">On route server installations which do not employ path hiding mitigation techniques, the path hiding problem outlined in section <a href="#path_hiding">Section 4.1</a> can be used in certain circumstances to proactively block third party prefix announcements from other route server clients.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> IANA Considerations</h1>
<p id="rfc.section.6.p.1">There are no IANA considerations.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Acknowledgments</h1>
<p id="rfc.section.7.p.1">The authors would like to thank Chris Hall, Ryan Bickhart and Steven Bakker for their valuable input.  </p>
<p id="rfc.section.7.p.2">In addition, the authors would like to acknowledge the developers of BIRD, OpenBGPD and Quagga, whose open source BGP implementations include route server capabilities which are compliant with this document.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.jasinska-ix-bgp-route-server">[I-D.jasinska-ix-bgp-route-server]</b></td>
<td class="top">
<a>Jasinska, E</a>, <a>Hilliard, N</a>, <a>Raszuk, R</a> and <a>N Bakker</a>, "<a href="http://tools.ietf.org/html/draft-jasinska-ix-bgp-route-server-03">Internet Exchange Route Server</a>", Internet-Draft draft-jasinska-ix-bgp-route-server-03, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">8.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1997">[RFC1997]</b></td>
<td class="top">
<a href="mailto:rchandra@cisco.com" title="cisco Systems, Inc.">Chandrasekeran, R.</a>, <a href="mailto:pst@cisco.com" title="cisco Systems, Inc.">Traina, P.</a> and <a href="mailto:tli@skat.usc.edu">T. Li</a>, "<a href="http://tools.ietf.org/html/rfc1997">BGP Communities Attribute</a>", RFC 1997, August 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2622">[RFC2622]</b></td>
<td class="top">
<a href="mailto:cengiz@isi.edu" title="USC/Information Sciences Institute">Alaettinoglu, C.</a>, <a href="mailto:curtis@avici.com" title="Avici Systems">Villamizar, C.</a>, <a href="mailto:epg@home.net" title="At Home Network">Gerich, E.</a>, <a href="mailto:David.Kessens@qwest.net" title="Qwest Communications">Kessens, D.</a>, <a href="mailto:meyer@antc.uoregon.edu" title="University of Oregon">Meyer, D.</a>, <a href="mailto:tbates@cisco.com" title="Cisco Systems, Inc.">Bates, T.</a>, <a href="mailto:dfk@ripe.net" title="RIPE NCC">Karrenberg, D.</a> and <a href="mailto:marten@BayNetworks.com" title="Bay Networks, Inc.">M. Terpstra</a>, "<a href="http://tools.ietf.org/html/rfc2622">Routing Policy Specification Language (RPSL)</a>", RFC 2622, June 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4271">[RFC4271]</b></td>
<td class="top">
<a>Rekhter, Y.</a>, <a>Li, T.</a> and <a>S. Hares</a>, "<a href="http://tools.ietf.org/html/rfc4271">A Border Gateway Protocol 4 (BGP-4)</a>", RFC 4271, January 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4360">[RFC4360]</b></td>
<td class="top">
<a>Sangli, S.</a>, <a>Tappan, D.</a> and <a>Y. Rekhter</a>, "<a href="http://tools.ietf.org/html/rfc4360">BGP Extended Communities Attribute</a>", RFC 4360, February 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4456">[RFC4456]</b></td>
<td class="top">
<a>Bates, T.</a>, <a>Chen, E.</a> and <a>R. Chandra</a>, "<a href="http://tools.ietf.org/html/rfc4456">BGP Route Reflection: An Alternative to Full Mesh Internal BGP (IBGP)</a>", RFC 4456, April 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4893">[RFC4893]</b></td>
<td class="top">
<a>Vohra, Q.</a> and <a>E. Chen</a>, "<a href="http://tools.ietf.org/html/rfc4893">BGP Support for Four-octet AS Number Space</a>", RFC 4893, May 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5226">[RFC5226]</b></td>
<td class="top">
<a>Narten, T.</a> and <a>H. Alvestrand</a>, "<a href="http://tools.ietf.org/html/rfc5226">Guidelines for Writing an IANA Considerations Section in RFCs</a>", BCP 26, RFC 5226, May 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RS-ARCH">[RS-ARCH]</b></td>
<td class="top">
<a title="The University of Southern California">Govindan, R</a>, <a title="The University of Southern California">Alaettinoglu, C</a>, <a title="The University of Southern California">Varadhan, K</a> and <a title="The University of Southern California">D Estrin</a>, "<a>A Route Server Architecture for Inter-Domain Routing</a>", 1995.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Nick Hilliard</span> 
	  <span class="n hidden">
		<span class="family-name">Hilliard</span>
	  </span>
	</span>
	<span class="org vcardline">INEX</span>
	<span class="adr">
	  <span>4027 Kingswood Road</span>

	  <span class="vcardline">
		<span class="locality">Dublin</span>,  
		<span class="region"></span>
		<span class="code">24</span>
	  </span>
	  <span class="country-name vcardline">IE</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:nick@inex.ie">nick@inex.ie</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Elisa Jasinska</span> 
	  <span class="n hidden">
		<span class="family-name">Jasinska</span>
	  </span>
	</span>
	<span class="org vcardline">Limelight Networks</span>
	<span class="adr">
	  <span>222 South Mill Avenue</span>

	  <span class="vcardline">
		<span class="locality">Tempe</span>,  
		<span class="region">AZ</span> 
		<span class="code">85281</span>
	  </span>
	  <span class="country-name vcardline">US</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:elisa@llnw.com">elisa@llnw.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Robert Raszuk</span> 
	  <span class="n hidden">
		<span class="family-name">Raszuk</span>
	  </span>
	</span>
	<span class="org vcardline">NTT MCL Inc.</span>
	<span class="adr">
	  <span>101 S Ellsworth Avenue Suite 350</span>

	  <span class="vcardline">
		<span class="locality">San Mateo</span>,  
		<span class="region">CA</span> 
		<span class="code">94401</span>
	  </span>
	  <span class="country-name vcardline">US</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:robert@raszuk.net">robert@raszuk.net</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Niels Bakker</span> 
	  <span class="n hidden">
		<span class="family-name">Bakker</span>
	  </span>
	</span>
	<span class="org vcardline">AMS-IX B.V.</span>
	<span class="adr">
	  <span>Westeinde 12</span>

	  <span class="vcardline">
		<span class="locality">Amsterdam</span>,  
		<span class="region">NH</span> 
		<span class="code">1017 ZN</span>
	  </span>
	  <span class="country-name vcardline">NL</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:niels.bakker@ams-ix.net">niels.bakker@ams-ix.net</a></span>

  </address>
</div>

</body>
</html>