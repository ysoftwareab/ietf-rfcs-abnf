TEAS Working Group                                             A.Wang
Internet Draft                                           China Telecom
                                                         Xiaohong Huang
                                                                   BUPT
                                                             Caixia Kou
                                                                   BUPT
                                                               Lu Huang
                                                           China Mobile
                                                             Penghui Mi
                                                        Tencent Company


Intended status: Information Track                         July 18, 2017
Expires: January 17, 2018


                 CCDR Scenario, Simulation and Suggestion
                        draft-wang-teas-ccdr-01.txt


Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79. This document may not be modified,
   and derivative works of it may not be created, and it may not be
   published except as an Internet-Draft.

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79. This document may not be modified,
   and derivative works of it may not be created, except to publish it
   as an RFC and to translate it into languages other than English.

   it for publication as an RFC or to translate it into languages other
   than English.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six
   months and may be updated, replaced, or obsoleted by other documents
   at any time.  It is inappropriate to use Internet-Drafts as
   reference material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt



<A.Wang>              Expires January 17, 2018                [Page 1]

Internet-Draft CCDR Scenario, Simulation and Suggestion   July 18, 2017
   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html

   This Internet-Draft will expire on January 18, 2009.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors. All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document. Please review these documents
   carefully, as they describe your rights and restrictions with
   respect to this document.

Abstract

   This document describes the scenarios, simulation and suggestions
   for the "Centrally Control Dynamic Routing (CCDR)" architecture,
   which integrates the merit of traditional distributed protocols
   (IGP/BGP), and the power of centrally control technologies (PCE/SDN)
   to provide one feasible traffic engineering solution in various
   complex scenarios for the service provider.

   Traditional MPLS-TE solution is mainly used in static network
   planning scenario and is difficult to meet the QoS assurance
   requirements in real-time traffic network. With the emerge of SDN
   concept and related technologies, it is possible to simplify the
   complexity of distributed control protocol, utilize the global view
   of network condition, give more efficient solution for traffic
   engineering in various complex scenarios.

Table of Contents


   1. Introduction ................................................ 3
   2. Conventions used in this document............................ 4
   3. CCDR Scenarios. ............................................. 4
      3.1. Qos Assurance for Hybrid Cloud-based Application.........4
      3.2. Increase link utilization based on tidal phenomena.......5
      3.3. Traffic engineering for IDC/MAN asymmetric link..........6
      3.4. Network temporal congestion elimination. ................6
   4. CCDR Simulation. ............................................ 7
      4.1. Topology Simulation..................................... 7
      4.2. Traffic Matrix Simulation............................... 8
      4.3. End-to-End Path Optimization............................ 8
      4.4. Network temporal congestion elimination .................9


<A.Wang et.>          Expires January 17, 2018                [Page 2]

Internet-Draft CCDR Scenario, Simulation and Suggestion   July 18, 2017

   5. CCDR Deployment Consideration............................... 11
   6. Security Considerations..................................... 11
   7. IANA Considerations ........................................ 11
   8. Conclusions ................................................ 11
   9. References ................................................. 11
      9.1. Normative References................................... 11
      9.2. Informative References................................. 12
   10. Contributors: ............................................. 12
   11. Acknowledgments ........................................... 13

1. Introduction

   Internet network is composed mainly tens of thousands of routers that
   run distributed protocol to exchange the reachability information
   between them. The path for the destination network is mainly
   calculated and controlled by the traditional IGP protocol. These
   distributed protocols are robust enough to support the current
   evolution of Internet but has some difficulties when the application
   requires the end-to-end QoS performance, or the service provider
   wants to maximize the links utilization within their network.

   MPLS-TE technology is one perfect solution for the finely planned
   network but it will put heavy burden on the router when we use it to
   solve the dynamic QoS assurance requirements within real time traffic
   network.

   SR(Segment Routing) is another prominent solution that integrates
   some merits of traditional distributed protocol and the advantages of
   centrally control mode, but it requires the underlying network,
   especially the provider edge router to do label push and pop action
   in-depth, and need some complex solutions for co-exist with the Non-
   SR network. Finally, it can only maneuver the end-to-end path for
   MPLS and IPv6 traffic via different mechanism.

   The advantage of MPLS is mainly for traffic isolation, such as the
   L2/L3 VPN service deployments. With the emerge of cloud-based
   services, especially the hybrid cloud communication services, the
   customers requires mainly the end-to-end QoS assurance services
   between their private infrastructure and the rented public servers.
   Without the help of centrally control architecture, the service
   provider almost can't make such SLA guarantees upon the real time
   traffic situation.

   This draft gives some scenarios that the centrally control dynamic


<A.Wang et.>          Expires January 17, 2018                [Page 3]

Internet-Draft CCDR Scenario, Simulation and Suggestion   July 18, 2017

   routing (CCDR) architecture can easily solve, without adding more
   extra burdening on the router. It also gives the PCE algorithm
   results under the similar topology, traffic pattern and network size
   to illustrate the applicability of CCDR architecture. Finally, it
   gives some suggestions for the implementation and deployment of CCDR.

2. Conventions used in this document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

3. CCDR Scenarios.

   The following sections describe some scenarios that the CCDR
   architecture is suitable for deployment.

3.1. Qos Assurance for Hybrid Cloud-based Application.

   With the emerge of cloud computing technologies, enterprises are
   putting more and more services on the public oriented service
   infrastructure, but keep still some core services within their
   network. The bandwidth requirements between the private cloud and
   the public cloud are occasionally and the background traffic between
   these two sites varied from time to time. Enterprise cloud
   applications just want to have the capabilities to invoke the
   network to make the end-to-end QoS assurance on demand. Otherwise,
   the traffic should be controlled by the default distributed protocol.

   CCDR, which integrates the merits of distributed protocol and the
   power of centrally control, is suitable for this scenario. The
   possible solution architecture is illustrated below:

                           +------------------------+
                           | Cloud Based Application|
                           +------------------------+
                                       |
                                 +-----------+
                                 |    PCE    |
                                 +-----------+
                                       |
                                       |
                              //--------------\\
                         /////                  \\\\\
    Private Cloud Site ||       Distributed          |Public Cloud Site
                        |       Control Network      |
                         \\\\\                  /////
                              \\--------------//


<A.Wang et.>          Expires January 17, 2018                [Page 4]

Internet-Draft CCDR Scenario, Simulation and Suggestion   July 18, 2017

                 Fig.1 Hybrid Cloud Communication Scenario

   By default, the traffic path between the private cloud site and
   public cloud site will be determined by the distributed control
   network. When some applications require the end-to-end QoS assurance,
   it can send these requirements to PCE, let PCE compute one e2e path
   which is based on the underlying network topology and the real
   traffic information, to accommodate the application's bandwidth
   requirements. The proposed solution can refer the draft [draft-wang-
   teas-pce-native-ip]. Section 4 describes the detail simulation
   process and the results.

3.2. Increase link utilization based on tidal phenomena.

   Currently, the network topology within MAN is generally in star
   style as illustrated in Fig.2, with the different devices connect
   different kind customer. The traffic pattern of these customers
   demonstrates some tidal phenomena that the links between the CR/BRAS
   and CR/SR will experience congestion in different periods because
   the subscribers under BRAS often use the network at night and the
   dedicated line users under SR often use the network during the
   daytime. The uplink between BRAS/SR and CR must satisfy the maximum
   traffic pattern between them and this causes the links utilization
   always not efficient enough.

                           +--------+
                           |   CR   |
                           +----|---+
                                |
                    --------|--------|-------|
                    |       |        |       |
                 +--|-+   +-|-    +--|-+   +-|+
                 |BRAS|   |SR|    |BRAS|   |SR|
                 +----+   +--+    +----+   +--+

           Fig.2 STAR-style network topology within MAN

   If we can consider link the BRAS/SR with local loop, and control the
   MAN with the CCDR architecture, we can exploit the tidal phenomena
   between BRAS/CR and SR/CR links, increase the efficiency of them.

                                    +-------+
                                -----  PCE  |
                                |   +-------+
                           +----|---+
                           |   CR   |
                           +----|---+
                                |
                    --------|--------|-------|


<A.Wang et.>          Expires January 17, 2018                [Page 5]

Internet-Draft CCDR Scenario, Simulation and Suggestion   July 18, 2017
                    |       |        |       |
                 +--|-+   +-|-    +--|-+   +-|+
                 |BRAS-----SR|    |BRAS-----SR|
                 +----+   +--+    +----+   +--+

                Fig.3 Increase the link utilization via CCDR



3.3. Traffic engineering for IDC/MAN asymmetric link

   The operator's networks are often comprised by tens of different
   domains, interconnected with each other, form very complex topology
   that illustrated in Fig.4. Due to the traffic pattern to/from MAN
   and IDC, the links between them are often in asymmetric style. It is
   almost impossible to balance the utilization of these links via the
   traditional distributed protocol, but this unbalance phenomenon can
   be overcome via the CCDR architecture.

                 +---+                +---+
                 |MAN|-----------------IDC|
                 +-|-|       |        +-|-+
                   |     ---------|     |
                   ------|BackBone|------
                   |     ----|----|     |
                   |         |          |
                 +-|--       |        ----+
                 |IDC|----------------|MAN|
                 +---|                |---+

            Fig.4 TE within Complex Multi-Domain topology



3.4. Network temporal congestion elimination.

   In more general situation, there are often temporal congestion
   periods within part of the service provider's network. Such
   congestion phenomena will appear repeatedly and if the service
   provider has some methods to mitigate it, it will certainly increase
   the satisfaction degree of their customer. CCDR is also suitable for
   such scenario that the traditional distributed protocol will process
   most of the traffic forwarding and the controller will schedule some
   traffic out of the congestion links to lower the utilization of them.
   Section 4 describes the simulation process and results about such
   scenario.





<A.Wang et.>          Expires January 17, 2018                [Page 6]

Internet-Draft CCDR Scenario, Simulation and Suggestion   July 18, 2017

4. CCDR Simulation.

   The following sections describe the topology, traffic matrix, end-
   to-end path optimization and congestion elimination in CCDR
   simulation.

4.1. Topology Simulation.

   Technically, the topology involved nodes and links state information
   is significantly helpful for traffic schedule.

   The network topology mainly contains nodes and links information.
   Nodes used in simulation have two types:  core nodes and edge nodes.
   The core nodes are fully linked to each other. The edge nodes are
   connected with some of the core nodes. And edge nodes are not
   connected with other edge nodes directly. Fig.5 is a topology
   example of 4 core nodes and 5 edge nodes. In this simulation, 100
   core nodes and 400 edge nodes are generated.

                                  +----+
                                 /|Edge|\
                                | +----+ |
                                |        |
                                |        |
                  +----+    +----+     +----+
                  |Edge|----|Core|-----|Core|---------+
                  +----+    +----+     +----+         |
                          /  |    \   /   |           |
                    +----+   |     \ /    |           |
                    |Edge|   |      X     |           |
                    +----+   |     / \    |           |
                          \  |    /   \   |           |
                  +----+    +----+     +----+         |
                  |Edge|----|Core|-----|Core|         |
                  +----+    +----+     +----+         |
                              |          |            |
                              |          +------\   +----+
                              |                  ---|Edge|
                              +-----------------/   +----+


                     Fig.5 Topology of simulation

   The total number of links is set to be more than 20000. The number
   of links connecting one edge node to the set of core nodes is
   randomly between 2 to 30. The bandwidth of all links is set to be
   100Gbps. The metric of links between core nodes themselves is set to
   be from 60 to 100, while metric of links between core nodes and edge
   nodes is set to be from 1000 to 1060. The metric of links is used


<A.Wang et.>          Expires January 17, 2018                [Page 7]

Internet-Draft CCDR Scenario, Simulation and Suggestion   July 18, 2017

   for selecting the shortest paths of all source-destination pairs.
   Besides, each link has its congestion threshold. For the links
   between core nodes, the threshold is set to be 0.8 which means when
   its utilization is beyond 80% the link is overloaded. Otherwise, the
   link is not congested. Similarly, the threshold of links between an
   edge node and a core node is set to be 0.9.

4.2. Traffic Matrix Simulation.

   The end-to-end traffic of the network is regard as a n*n matrix
   where n stands for the number of forwarding devices in the network.
   Each (i,j) component of traffic matrix denotes the bandwidth of the
   flow from i-th node to j-th node. The traffic matrix is generated
   based on the link capacity of topology. It can result in many kinds
   of situations, such as congestion, mild congestion and non-
   congestion.

   In this simulation, the traffic matrix is 500*500. The components of
   traffic matrix are generated from 10Mbps to 7Gbps randomly. About 20%
   links are overloaded when the Open Shortest Path First (OSPF)
   protocol is used in the network.

   This traffic matrix is used in following sections. In section 4.3,
   it is used as the background traffic which can't be scheduled. In
   section 4.4, it is re-routed based on load-balance.

4.3. End-to-End Path Optimization

   Based on the current state of the network, such as the traffic
   matrix in the network, network topology and network utilization,
   Quality of Service (QoS) and so on, the end-to-end path optimization
   is to find the best end-to-end path which is the lowest in metric
   value and each link of the path is far below link's threshold.  The
   algorithm is a novel idea combining the shortest path algorithm with
   penalty theory of classical optimization and graph theory.

   Given background traffic matrix which is unscheduled, when a set of
   new flows comes into the network the end-to-end path optimization
   finds the optimal paths for them. The selected paths bring the least
   congestion degree to the network.

   The simulation is tested with 1000 flows in 6 periods. The size of
   flows is from 10Mbps to 10Gbps. In each period, 100, 200, 100, 250,
   150 and 200 flows are arrived respectively. The link utilization
   increment(UI) degree relative to the congestion threshold when the
   new flows are added into the network is shown in Fig.6. The first
   graph in Fig.6 is the UI with OSPF and the second graph is the UI
   with end-to-end path optimization. The average UI of graph one is
   more than 30%. After path optimization as shown in graph, the


<A.Wang et.>          Expires January 17, 2018                [Page 8]

Internet-Draft CCDR Scenario, Simulation and Suggestion   July 18, 2017

   average UI is less than 5%. In a conclude, the results show that the
   end-to-end path optimization has an eye-catching decreasing in UI
   degree relative to the path chosen based on OSPF.

         +-----------------------------------------------------------+
        |                *                               *    *    *|
       60|                *                             * * *  *    *|
         |*      *       **     * *         *   *   *  ** * *  * * **|
         |*   * ** *   * **   *** **  *   * **  * * *  ** * *  *** **|
         |* * * ** *  ** **   *** *** **  **** ** ***  **** ** *** **|
       40|* * * ***** ** ***  *** *** **  **** ** *** ***** ****** **|
   UI(%) |* * ******* ** ***  *** ******* **** ** *** ***** *********|
         |*** ******* ** **** *********** *********** ***************|
         |******************* *********** *********** ***************|
       20|******************* ***************************************|
         |******************* ***************************************|
         |***********************************************************|
         |***********************************************************|
        0+-----------------------------------------------------------+
        0    100   200   300   400   500   600   700   800   900  1000
        +-----------------------------------------------------------+
        |                                                           |
       60|                                                           |
         |                                                           |
         |                                                           |
         |                                                           |
       40|                                                           |
   UI(%) |                                                           |
         |                                                           |
         |                                                           |
       20|                                                           |
         |                                                          *|
         |                                     *                    *|
         |        *         *  *    *       *  **                 * *|
        0+-----------------------------------------------------------+
        0    100   200   300   400   500   600   700   800   900  1000
                              Flow Number
           Fig.6 Simulation result with congestion elimination

4.4. Network temporal congestion elimination

   In general situation, there are often temporal congestion periods
   within part of the service provider's network. The network temporal
   congestion elimination is proposed which reroutes traffic from the
   congested paths to un-congested ones. The load-balance is achieved


<A.Wang et.>          Expires January 17, 2018                [Page 9]

Internet-Draft CCDR Scenario, Simulation and Suggestion   July 18, 2017

   after congestion elimination. And the cost of reroute traffic is
   also taken into consideration.

   Different degree of network congestion is simulated. About 20% links
   are congested with slightly or badly degree using the OSPF protocol.
   The congestion degree (CD) is defined as the link utilization beyond
   its threshold. For example, if the utilization of links is 90%, and
   its threshold is 80%, then its CD is 10%.

   The congestion elimination performance is shown in Fig.7. The first
   graph is the congestion degree before the process of congestion
   elimination. The average CD of all congested links is more than 10%.
   The second graph shown in Fig.7 is the congestion degree after
   congestion elimination process. It shows only 12 links among totally
   2000 links exceed the threshold, and all the congestion degree is
   less than 3%. Thus, after schedule of the traffic in congestion
   paths, the degree of network congestion is greatly eliminated and
   the network utilization is indeed in balance.

                       Before congestion elimination
          +-----------------------------------------------------------+
          |                *                            ** *   ** ** *|
        20|                *                     *      **** * ** ** *|
          |*      *       **     * **       **  **** * ***** *********|
          |*   *  * *   * **** ****** *  ** *** **********************|
        15|* * * ** *  ** **** ********* *****************************|
          |* * ******  ******* ********* *****************************|
    CD(%) |* ********* ******* ***************************************|
        10|* ********* ***********************************************|
          |*********** ***********************************************|
          |***********************************************************|
         5|***********************************************************|
          |***********************************************************|
          |***********************************************************|
         0+-----------------------------------------------------------+
             0            0.5            1            1.5            2

                       After congestion elimination
        +-----------------------------------------------------------+
        |                                                           |
       20|                                                           |
         |                                                           |
         |                                                           |
       15|                                                           |
         |                                                           |
   CD(%) |                                                           |
       10|                                                           |
         |                                                           |
         |                                                           |


<A.Wang et.>          Expires January 17, 2018               [Page 10]

Internet-Draft CCDR Scenario, Simulation and Suggestion   July 18, 2017

       5 |                                                           |
         |                                                           |
         |        *        **  * *  *  **   *  **                 *  |
       0 +-----------------------------------------------------------+
          0            0.5            1            1.5            2
                           Link Number(*10000)
           Fig.7 Simulation result with congestion elimination



5. CCDR Deployment Consideration.

   With the above scenarios and simulation results, we can know it is
   necessary to find one general solution to cope with various complex
   situations and it is possible to accomplish the most complex optimal
   path computation function in centrally manner based on the underlay
   network topology and the real time traffic.

   [draft-wang-teas-native-ip] gives one basic solution for above
   scenario, such thought can be extended to cover requirements that
   are more concretes.

6. Security Considerations

   TBD

7. IANA Considerations

   TBD

8. Conclusions

   TBD

9. References

9.1. Normative References

   [RFC4655] Farrel, A., Vasseur, J.-P., and J. Ash, "A Path

             Computation Element (PCE)-Based Architecture", RFC

             4655, August 2006,<http://www.rfc-editor.org/info/rfc4655>.

    [RFC5440]Vasseur, JP., Ed., and JL. Le Roux, Ed., "Path

             Computation Element (PCE) Communication Protocol

             (PCEP)", RFC 5440, March 2009,


<A.Wang et.>          Expires January 17, 2018               [Page 11]

Internet-Draft CCDR Scenario, Simulation and Suggestion   July 18, 2017
                     <http://www.rfc-editor.org/info/rfc5440>.

9.2. Informative References

   [I-D.draft-ietf-teas-pce-control-function]

   A.           Farrel, Q.Zhao et al. "An Architecture for use of PCE and PCEP in
      a Network with Central Control"

   https://datatracker.ietf.org/doc/draft-ietf-teas-pce-central-
   control/  September, 2016



   [I-D. draft-ietf-teas-pcecc-use-cases]

   Quintin Zhao, Robin Li, Boris Khasanov et al. "The Use Cases for
   Using PCE as the Central Controller(PCECC) of LSPs

   https://tools.ietf.org/html/draft-ietf-teas-pcecc-use-cases-00

   March,2017



   [I-D. draft-wang-teas-pce-native-ip]

   A.Wang, Quintin Zhao, Boris Khasanov, Penghui Mi,Raghavendra Mallya,
   Shaofu Peng   "PCE in Native IP Network"

   https://tools.ietf.org/html/draft-wang-teas-pce-native-ip-03 March
   13, 2017





   [I-D. draft-wang-pcep-extension for native IP]

   Aijun Wang, Boris Khasanov et al. "PCEP Extension for Native IP
   Network" https://datatracker.ietf.org/doc/draft-wang-pce-extension-
   native-ip/



10. Contributors:

   Xiaoyan Wei



<A.Wang et.>          Expires January 17, 2018               [Page 12]

Internet-Draft CCDR Scenario, Simulation and Suggestion   July 18, 2017

   China Telecom Shanghai Company
   weixiaoyan@189.cn



   Qiong Sun
   sunqiong.bri@chinatelecom.cn



   Tingting Yuan
   Beijing University of Posts and Telecommunications
   yuantingting@bupt.edu.cn



   Dingyuan Hu
   Beijing University of Posts and Telecommunications
   hdy@bupt.edu.cn



11. Acknowledgments

   TBD



Authors' Addresses

   Aijun Wang
   China Telecom
   Beiqijia Town, Changping District
   Beijing,China

   Email: wangaj.bri@chinatelecom.cn


   Xiaohong Huang
   Beijing University of Posts and Telecommunications
   No.10 Xitucheng Road, Haidian District
   Beijing,China

   EMail: huangxh@bupt.edu.cn







<A.Wang et.>          Expires January 17, 2018               [Page 13]

Internet-Draft CCDR Scenario, Simulation and Suggestion   July 18, 2017

   Caixia Kou
   Beijing University of Posts and Telecommunications
   No.10 Xitucheng Road, Haidian District
   Beijing,China
   koucx@lsec.cc.ac.cn


   Lu Huang
   China Mobile
   32 Xuanwumen West Ave, Xicheng District
   Beijing 100053
   China
   Email: hlisname@yahoo.com


   Penghui Mi
   Tencent
   Tencent Building, Kejizhongyi Avenue,
   Hi-techPark, Nanshan District,Shenzhen 518057, P.R.China

   Email kevinmi@tencent.com





























<A.Wang et.>          Expires January 17, 2018               [Page 14]

