



Network Working Group                                       M. Boucadair
Internet-Draft                                              C. Jacquenet
Intended status: Standards Track                          France Telecom
Expires: January 4, 2016                                        T. Reddy
                                                                   Cisco
                                                            July 3, 2015


        DHCP Options for Network-Assisted Multipath TCP (MPTCP)
                      draft-boucadair-mptcp-dhc-01

Abstract

   One of the promising deployment scenarios for Multipath TCP (MPTCP)
   is to enable a Customer Premises Equipment (CPE) that is connected to
   multiple networks (e.g., DSL, LTE, WLAN) to optimize the usage of its
   network attachments.  Because of the lack of MPTCP support at the
   server side, some service providers now consider a "network-assisted
   mode" that relies upon the activation of a dedicated function called:
   MPTCP Concentrator.  This document focuses on the explicit deployment
   scheme where the identity of the MPTCP Concentrator(s) is explicitly
   configured on connected hosts.

   This document specifies DHCP (IPv4 and IPv6) options to configure
   hosts with Multipath TCP (MPTCP) parameters.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 4, 2016.



Boucadair, et al.        Expires January 4, 2016                [Page 1]

Internet-Draft               DHCP for MPTCP                    July 2015


Copyright Notice

   Copyright (c) 2015 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   3
   3.  DHCPv6 MPTCP Option . . . . . . . . . . . . . . . . . . . . .   4
     3.1.  Format  . . . . . . . . . . . . . . . . . . . . . . . . .   4
     3.2.  DHCPv6 Client Behavior  . . . . . . . . . . . . . . . . .   5
   4.  DHCPv4 MPTCP Option . . . . . . . . . . . . . . . . . . . . .   5
     4.1.  Format  . . . . . . . . . . . . . . . . . . . . . . . . .   5
     4.2.  DHCPv4 Client Behavior  . . . . . . . . . . . . . . . . .   6
   5.  DHCP Server Configuration Guidelines  . . . . . . . . . . . .   6
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   8
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   8
     7.1.  DHCPv6 Option . . . . . . . . . . . . . . . . . . . . . .   8
     7.2.  DHCPv4 Option . . . . . . . . . . . . . . . . . . . . . .   8
   8.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   8
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   8
     9.1.  Normative References  . . . . . . . . . . . . . . . . . .   8
     9.2.  Informative References  . . . . . . . . . . . . . . . . .   9
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   9

1.  Introduction

   One of the promising deployment scenarios for Multipath TCP (MPTCP,
   [RFC6824]) is to enable a Customer Premises Equipment (CPE) that is
   connected to multiple networks (e.g., DSL, LTE, WLAN) to optimize the
   usage of such resources, see for example [I-D.deng-mptcp-proxy] or
   [RFC4908].  This deployment scenario relies on MPTCP Proxy on both
   the CPE and the network sides (Figure 1).  The latter plays the role
   of traffic concentrator.  A concentrator terminates the MPTCP
   sessions, from a CPE, before redirecting traffic into a legacy TCP
   session.




Boucadair, et al.        Expires January 4, 2016                [Page 2]

Internet-Draft               DHCP for MPTCP                    July 2015


                         IP Network #1
    +------------+        _--------_    +------------+
    |            |       (e.g., LTE )   |            |
    |   CPE      +======================+            |
    | (MPTCP     |       (_        _)   |Concentrator|
    |  Proxy)    |         (_______)    | (MPTCP     |
    |            |                      |  Proxy)    |------> Internet
    |            |                      |            |
    |            |        IP Network #2 |            |
    |            |        _--------_    |            |
    |            |       ( e.g., DSL )  |            |
    |            +======================+            |
    |            |       (_        _)   |            |
    +-----+------+        (_______)     +------------+
          |
   ----CPE network----
          |
       end-nodes

                 Figure 1: "Network-Assisted" MPTCP Design

   Both implicit and explicit modes are considered to steer traffic
   towards an MPTCP Concentrator.  This document focuses on the explicit
   mode that consists in configuring explicitly the reachability
   information of the MPTCP concentrator on a host.

   This document defines DHCPv4 [RFC2131] and DHCPv6 [RFC3315] options
   that can be used to configure hosts with MPTCP Concentrator IP
   addresses.

   This specification assumes an MPTCP Concentrator is reachable through
   one or multiple IP addresses.  As such, a list of IP addresses can be
   returned in the DHCP MPTCP option.  Also, it assumes the various
   network attachments provided to an MPTCP-enabled CPE are managed by
   the same administrative entity.

2.  Terminology

   This document makes use of the following terms:

   o  MPTCP Concentrator denotes a functional element that terminates
      MPTCP connections originated by MPTCP clients.  An MPTCP
      Concentrator is responsible for transforming an MPTCP connection
      [RFC6824] into a legacy TCP connection [RFC0793], and vice versa.
   o  DHCP refers to both DHCPv4 [RFC2131] and DHCPv6 [RFC3315].
   o  DHCP client denotes a node that initiates requests to obtain
      configuration parameters from one or more DHCP servers.




Boucadair, et al.        Expires January 4, 2016                [Page 3]

Internet-Draft               DHCP for MPTCP                    July 2015


   o  DHCP server refers to a node that responds to requests from DHCP
      clients.

3.  DHCPv6 MPTCP Option

3.1.  Format

   The DHCPv6 MPTCP option can be used to configure a list of IPv6
   addresses of an MPTCP Concentrator.

   The format of this option is shown in Figure 2.

       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     OPTION_V6_MPTCP           |         Option-length         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      |                         ipv6-address                          |
      |                                                               |
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      |                         ipv6-address                          |
      |                                                               |
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                              ...                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                       Figure 2: DHCPv6 MPTCP option

   The fields of the option shown in Figure 2 are as follows:

   o  Option-code: OPTION_V6_MPTCP (TBA, see Section 7.1)
   o  Option-length: Length of the 'MPTCP Concentrator IP Address(es)'
      field in octets.  MUST be a multiple of 16.
   o  MPTCP Concentrator IPv6 Addresses: Includes one or more IPv6
      addresses [RFC4291] of the MPTCP Concentrator to be used by the
      MPTCP client.  Note, IPv4-mapped IPv6 addresses (Section 2.5.5.2
      of [RFC4291]) are allowed to be included in this option.

   To return more than one MPTCP concentrators to the DHCPv6 client, the
   DHCPv6 server returns multiple instances of OPTION_V6_MPTCP.







Boucadair, et al.        Expires January 4, 2016                [Page 4]

Internet-Draft               DHCP for MPTCP                    July 2015


3.2.  DHCPv6 Client Behavior

   To discover one or more MPTCP Concentrators, the DHCPv6 client
   requests MPTCP Concentrator IP addresses by including OPTION_V6_MPTCP
   in an Option Request Option (ORO), as described in Section 22.7 of
   [RFC3315].

   The DHCPv6 client MUST be prepared to receive multiple instances of
   OPTION_V6_MPTCP; each instance is to be treated separately as it
   corresponds to a given MPTCP Concentrator: there are as many
   concentrators as instances of the OPTION_V6_MPTCP option.

   If an IPv4-mapped IPv6 address is received in OPTION_V6_MPTCP, it
   indicates that the MPTCP Concentrator has the corresponding IPv4
   address.

   The DHCPv6 client MUST silently discard multicast and host loopback
   addresses [RFC6890] conveyed in OPTION_V6_MPTCP.

4.  DHCPv4 MPTCP Option

4.1.  Format

   The DHCPv4 MPTCP option can be used to configure a list of IPv4
   addresses of an MPTCP Concentrator.  The format of this option is
   illustrated in Figure 3.

       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |  Code         |     Length    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | List-Length   |   List of     |
      +-+-+-+-+-+-+-+-+    MPTCP      |
      / Concentrator IPv4 Addresses   /
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+   ---
      | List-Length   |   List of     |    |
      +-+-+-+-+-+-+-+-+    MPTCP      |   |
      / Concentrator IPv4 Addresses   /    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    |
      .             ...               . optional
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    |
      | List-Length   |   List of     |    |
      +-+-+-+-+-+-+-+-+    MPTCP      |    |
      / Concentrator IPv4 Addresses   /    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+   ---


                       Figure 3: DHCPv4 MPTCP option



Boucadair, et al.        Expires January 4, 2016                [Page 5]

Internet-Draft               DHCP for MPTCP                    July 2015


   The description of the fields is as follows:

   o  Code: OPTION_V4_MPTCP (TBA, see Section 7.2);
   o  Length: Length of all included data in octets.  The minimum length
      is 5.
   o  List-Length: Length of the "List of MPTCP Concentrator IPv4
      Addresses" field in octets; MUST be a multiple of 4.
   o  List of MPTCP Concentrator IPv4 Addresses: Contains one or more
      IPv4 addresses of the MPTCP Concentrator to be used by the MPTCP
      client.  The format of this field is shown in Figure 4.
   o  OPTION_V4_MPTCP can include multiple lists of MPTCP Concentrator
      IPv4 addresses; each list is treated separately as it corresponds
      to a given MPTCP Concentrator.  When several lists of MPTCP
      Concentrator IPv4 addresses are to be included, "List-Length" and
      "MPTCP Concentrator IPv4 Addresses" fields are repeated.

      0     8     16    24    32    40    48
      +-----+-----+-----+-----+-----+-----+--
      |  a1 |  a2 |  a3 |  a4 |  a1 |  a2 | ...
      +-----+-----+-----+-----+-----+-----+--
           IPv4 Address 1          IPv4 Address 2 ...

   This format assumes that an IPv4 address is encoded as a1.a2.a3.a4.

     Figure 4: Format of the List of MPTCP Concentrator IPv4 Addresses

   OPTION_V4_MPTCP is a concatenation-requiring option.  As such, the
   mechanism specified in [RFC3396] MUST be used if OPTION_V4_MPTCP
   exceeds the maximum DHCPv4 option size of 255 octets.

4.2.  DHCPv4 Client Behavior

   To discover one or more MPTCP Concentrators, the DHCPv4 client
   requests MPTCP Concentrator's IP addresses by including
   OPTION_V4_MPTCP in a Parameter Request List Option [RFC2132].

   The DHCPv4 client MUST be prepared to receive multiple lists of MPTCP
   Concentrator IPv4 addresses in the same OPTION_V4_MPTCP; each list is
   to be treated as a separate MPTCP Concentrator instance.

   The DHCPv4 client MUST silently discard multicast and host loopback
   addresses [RFC6890] conveyed in OPTION_V4_MPTCP.

5.  DHCP Server Configuration Guidelines

   DHCP servers that support the DHCP MPTCP Concentrator option can be
   configured with a list of IP addresses of the MPTCP Concentrator(s).
   If multiple IP addresses are configured, the DHCP server MUST be



Boucadair, et al.        Expires January 4, 2016                [Page 6]

Internet-Draft               DHCP for MPTCP                    July 2015


   explicitly configured whether all or some of these addresses refer
   to:

   1.  the same MPTCP Concentrator: the DHCP server returns multiple
       addresses in the same instance of the DHCP MPTCP Concentrator
       option.

   2.  distinct MPTCP Concentrators : the DHCP server returns multiple
       lists of MPTCP Concentrator IP addresses to the requesting DHCP
       client (encoded as multiple OPTION_V6_MPTCP or in the same
       OPTION_V4_MPTCP); each list refers to a distinct MPTCP
       Concentrator.

   Precisely how DHCP servers are configured to separate lists of IP
   addresses according to which MPTCP Concentrator they refer to is out
   of scope for this document.  However, DHCP servers MUST NOT combine
   the IP addresses of multiple MPTCP Concentrators and return them to
   the DHCP client as if they were belonging to a single MPTCP
   Concentrator, and DHCP servers MUST NOT separate the addresses of a
   single MPTCP Concentrator and return them as if they were belonging
   to distinct MPTCP Concentrators.  For example, if an administrator
   configures the DHCP server by providing a Fully Qualified Domain Name
   (FQDN) for a MPTCP Concentrator, even if that FQDN resolves to
   multiple addresses, the DHCP server MUST deliver them within a single
   server address block.

   DHCPv6 servers that implement this option and that can populate the
   option by resolving FQDNs will need a mechanism for indicating
   whether to query A records or only AAAA records.  When a query
   returns A records, the IP addresses in those records are returned in
   the DHCPv6 response as IPv4-mapped IPv6 addresses.

      Discussion: The motivation for this design is to accommodate
      deployment cases where an IPv4 connectivity service is provided
      while only DHCPv6 is in use (e.g., DS-Lite context [RFC6333]).

   Since this option requires support for IPv4-mapped IPv6 addresses, a
   DHCPv6 server implementation will not be complete if it does not
   query A records and represent any that are returned as IPv4-mapped
   IPv6 addresses in DHCPv6 responses.  The mechanism whereby DHCPv6
   implementations provide this functionality is beyond the scope of
   this document.

   For guidelines on providing context-specific configuration
   information (e.g., returning a regional-based configuration), and
   information on how a DHCP server might be configured with FQDNs that
   get resolved on demand, see [I-D.ietf-dhc-topo-conf].




Boucadair, et al.        Expires January 4, 2016                [Page 7]

Internet-Draft               DHCP for MPTCP                    July 2015


6.  Security Considerations

   The security considerations in [RFC2131] and [RFC3315] are to be
   considered.  MPTCP-related security considerations are discussed in
   [RFC6824].

7.  IANA Considerations

7.1.  DHCPv6 Option

   IANA is requested to assign the following new DHCPv6 Option Code in
   the registry maintained in http://www.iana.org/assignments/
   dhcpv6-parameters:

                               Option Name Value
                           --------------- -----
                           OPTION_V6_MPTCP TBA

7.2.  DHCPv4 Option

   IANA is requested to assign the following new DHCPv4 Option Code in
   the registry maintained in http://www.iana.org/assignments/bootp-
   dhcp-parameters/:

       Option Name Value Data length Meaning
   --------------- ----- ----------- -----------------------------------
   OPTION_V4_MPTCP TBA   Variable;   Includes one or multiple lists of
                         the minimum MPTCP Concentrator IP addresses;
                         length is   each list is treated as a separate
                         5.          MPTCP Concentrator.

8.  Acknowledgements

   TBC.

9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC2131]  Droms, R., "Dynamic Host Configuration Protocol", RFC
              2131, March 1997.

   [RFC2132]  Alexander, S. and R. Droms, "DHCP Options and BOOTP Vendor
              Extensions", RFC 2132, March 1997.




Boucadair, et al.        Expires January 4, 2016                [Page 8]

Internet-Draft               DHCP for MPTCP                    July 2015


   [RFC3315]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C.,
              and M. Carney, "Dynamic Host Configuration Protocol for
              IPv6 (DHCPv6)", RFC 3315, July 2003.

   [RFC3396]  Lemon, T. and S. Cheshire, "Encoding Long Options in the
              Dynamic Host Configuration Protocol (DHCPv4)", RFC 3396,
              November 2002.

   [RFC4291]  Hinden, R. and S. Deering, "IP Version 6 Addressing
              Architecture", RFC 4291, February 2006.

   [RFC6824]  Ford, A., Raiciu, C., Handley, M., and O. Bonaventure,
              "TCP Extensions for Multipath Operation with Multiple
              Addresses", RFC 6824, January 2013.

   [RFC6890]  Cotton, M., Vegoda, L., Bonica, R., and B. Haberman,
              "Special-Purpose IP Address Registries", BCP 153, RFC
              6890, April 2013.

9.2.  Informative References

   [I-D.deng-mptcp-proxy]
              Lingli, D., Liu, D., Sun, T., Boucadair, M., and G.
              Cauchie, "Use-cases and Requirements for MPTCP Proxy in
              ISP Networks", draft-deng-mptcp-proxy-01 (work in
              progress), October 2014.

   [I-D.ietf-dhc-topo-conf]
              Lemon, T. and T. Mrugalski, "Customizing DHCP
              Configuration on the Basis of Network Topology", draft-
              ietf-dhc-topo-conf-04 (work in progress), January 2015.

   [RFC0793]  Postel, J., "Transmission Control Protocol", STD 7, RFC
              793, September 1981.

   [RFC4908]  Nagami, K., Uda, S., Ogashiwa, N., Esaki, H., Wakikawa,
              R., and H. Ohnishi, "Multi-homing for small scale fixed
              network Using Mobile IP and NEMO", RFC 4908, June 2007.

   [RFC6333]  Durand, A., Droms, R., Woodyatt, J., and Y. Lee, "Dual-
              Stack Lite Broadband Deployments Following IPv4
              Exhaustion", RFC 6333, August 2011.

Authors' Addresses







Boucadair, et al.        Expires January 4, 2016                [Page 9]

Internet-Draft               DHCP for MPTCP                    July 2015


   Mohamed Boucadair
   France Telecom
   Rennes  35000
   France

   Email: mohamed.boucadair@orange.com


   Christian Jacquenet
   France Telecom
   Rennes
   France

   Email: christian.jacquenet@orange.com


   Tirumaleswar Reddy
   Cisco Systems, Inc.
   Cessna Business Park, Varthur Hobli
   Sarjapur Marathalli Outer Ring Road
   Bangalore, Karnataka  560103
   India

   Email: tireddy@cisco.com



























Boucadair, et al.        Expires January 4, 2016               [Page 10]
