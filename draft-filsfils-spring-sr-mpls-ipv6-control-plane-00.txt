



SPRING                                                  C. Filsfils, Ed.
Internet-Draft                                              F. Clad, Ed.
Intended status: Informational                             K. Talaulikar
Expires: May 20, 2020                                      Cisco Systems
                                                       November 17, 2019


               SR-MPLS Data Plane with IPv6 Control Plane
          draft-filsfils-spring-sr-mpls-ipv6-control-plane-00

Abstract

   This document reminds the existence of the "Segment Routing (SR) MPLS
   data-plane with IPv6 control-plane" solution that is mature from a
   standardization, productization and commercial deployment viewpoint.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on May 20, 2020.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.




Filsfils, et al.          Expires May 20, 2020                  [Page 1]

Internet-Draft           SR-MPLS DP with IPv6 CP           November 2019


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Context . . . . . . . . . . . . . . . . . . . . . . . . . . .   2
   3.  Reference diagram . . . . . . . . . . . . . . . . . . . . . .   3
   4.  Packet processing . . . . . . . . . . . . . . . . . . . . . .   4
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   5
   7.  Informative References  . . . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Introduction

   This document reminds the existence of the "Segment Routing (SR) MPLS
   dataplane with IPv6 control-plane".  This solution is mature from a
   standardization, productization and commercial deployment viewpoint.
   Other proposed source routing solutions with MPLS-like label lookup
   or mapping ids should list all their data-plane and control-plane
   differences with respect to this mature solution and should justify
   these differences with genuine benefits not available in the mature
   solution described in this document and others referenced here that
   are published by the SPRING and MPLS WGs.

2.  Context

   This is an existing solution.

   o  Mature IETF standardization

   o  Mature productization

   o  Commercially deployed

   The IETF standardization references are:

   o  Architecture:

      *  Segment Routing [RFC8402]

   o  Data-plane:

      *  Homogenous MPLS deployment:
         [I-D.ietf-spring-segment-routing-mpls]

      *  Hopping over IP-only parts of network:
         [I-D.ietf-mpls-sr-over-ip]

   o  Control-plane:



Filsfils, et al.          Expires May 20, 2020                  [Page 2]

Internet-Draft           SR-MPLS DP with IPv6 CP           November 2019


      *  IS-IS: [I-D.ietf-isis-segment-routing-extensions]

      *  OSPFv3: [I-D.ietf-ospf-ospfv3-segment-routing-extensions]

      *  BGP: [RFC4364]

      *  BGP-LS: [I-D.ietf-idr-bgp-ls-segment-routing-ext]

      *  SR Policy headend: [I-D.ietf-spring-segment-routing-policy]

   o  Service programming: [I-D.ietf-spring-sr-service-programming]

   o  OAM: [RFC8287]

3.  Reference diagram

   +--------------------------------------------------------------+
   | +-------------------+                  +-------------------+ |
   | |                   |                  |                   | |
   | |                 +-+-+              +-+-+                 | |
   | |                 |121|              |231|                 | |
   | |                 +-+-+              +-+-+                 | |
   | | +---+             |                  |             +---+ | |
   | | |PE1|             |                  |             |PE2| | |
   | | +---+           +-+-+              +-+-+           +---+ | |
   | |                 |122|              |232|                 | |
   | |                 +-+-+              +-+-+                 | |
   | |  (MPLS island 1)  |                  |  (MPLS island 2)  | |
   | +-------------------+  (IPv6 network)  +-------------------+ |
   +--------------------------------------------------------------+

                Figure 1: IPv6 network with SR-MPLS islands

   o  Single IGP domain, IPv6 only

      *  PE1 is configured with a loopback IP address 2001:db8::1

      *  PE2 is configured with a loopback IP address 2001:db8::2

      *  Each other node k is configured with a loopback IP address
         2001:db8::k

   o  2 SR-MPLS islands running with an IPv6 control plane

      *  PE1 is configured with a Prefix-SID 16001 associated with
         2001:db8::1





Filsfils, et al.          Expires May 20, 2020                  [Page 3]

Internet-Draft           SR-MPLS DP with IPv6 CP           November 2019


      *  PE2 is configured with a Prefix-SID 16002 associated with
         2001:db8::2

4.  Packet processing

      +------------------------------------------------------------+
      | +-------------------+                +-------------------+ |
      | |                   |                |                   | |
      | |                 +-+-+            +-+-+                 | |
      | |           +---->+121+----->------+231+-----+           | |
      | |           |     +-+-+            +-+-+     |           | |
      | | +---+     |       |                |       |     +---+ | |
  A +-----+PE1+-----+       |                |       +---->+PE2+-----> B
      | | +---+           +-+-+            +-+-+           +---+ | |
      | |                 |122|            |232|                 | |
      | |                 +-+-+            +-+-+                 | |
      | |  (MPLS island 1)  |                |  (MPLS island 2)  | |
      | +-------------------+ (IPv6 network) +-------------------+ |
      +------------------------------------------------------------+

   +----------+ +----------+ +--------------+ +----------+ +----------+
   | IP4(A,B) | |  16002   | |IP6(          | |  16002   | | IP4(A,B) |
   +----------+ +----------+ |2001:db8::121,| +----------+ +----------+
                |  12345   | |2001:db8::231)| |  12345   |
                +----------+ +--------------+ +----------+
                | IP4(A,B) | |     UDP      | | IP4(A,B) |
                +----------+ +--------------+ +----------+
                             |    16002     |
                             +--------------+
                             |    12345     |
                             +--------------+
                             |   IP4(A,B)   |
                             +--------------+

     Figure 2: Packet processing in IPv6 network with SR-MPLS islands

   o  PE1 receives IPv4 traffic from A and headed to B

   o  PE1 PUSHes the VPN label 12345 and the prefix-SID 16002 of PE2

   o  Traffic is steered in MPLS island 1 according to the top label
      16002

   o  Traffic reaches node 121, whose next-hop towards 16002 is not
      MPLS-enabled

      *  Node 121 has determined(*) that traffic to 16002 should be sent
         over an IP/UDP tunnel to node 231



Filsfils, et al.          Expires May 20, 2020                  [Page 4]

Internet-Draft           SR-MPLS DP with IPv6 CP           November 2019


      *  Node 121 encapsulates the traffic with IPv6 and UDP header to
         2001:db8::231

   o  Node 231 removes the IP/UDP encapsulation, exposes the MPLS label
      16002 and forwards the traffic accordingly

   o  Traffic is steered in MPLS island 2 according to the top label
      16002

   o  (PHP: Penultimate node POPs label 16002 and sends the traffic to
      PE2)

   o  PE2 looks up the exposed VPN label 12345 and forwards the traffic
      accordingly.

   (*) Node 121 determines that node 231 is the closest MPLS- and IP/
   UDP-pop-capable node on the shortest path to PE2 using a technique
   outside the scope of the document.

5.  IANA Considerations

   None

6.  Acknowledgements

   TBD

7.  Informative References

   [I-D.ietf-idr-bgp-ls-segment-routing-ext]
              Previdi, S., Talaulikar, K., Filsfils, C., Gredler, H.,
              and M. Chen, "BGP Link-State extensions for Segment
              Routing", draft-ietf-idr-bgp-ls-segment-routing-ext-16
              (work in progress), June 2019.

   [I-D.ietf-isis-segment-routing-extensions]
              Previdi, S., Ginsberg, L., Filsfils, C., Bashandy, A.,
              Gredler, H., and B. Decraene, "IS-IS Extensions for
              Segment Routing", draft-ietf-isis-segment-routing-
              extensions-25 (work in progress), May 2019.

   [I-D.ietf-mpls-sr-over-ip]
              Xu, X., Bryant, S., Farrel, A., Hassan, S., Henderickx,
              W., and Z. Li, "SR-MPLS over IP", draft-ietf-mpls-sr-over-
              ip-07 (work in progress), June 2019.






Filsfils, et al.          Expires May 20, 2020                  [Page 5]

Internet-Draft           SR-MPLS DP with IPv6 CP           November 2019


   [I-D.ietf-ospf-ospfv3-segment-routing-extensions]
              Psenak, P. and S. Previdi, "OSPFv3 Extensions for Segment
              Routing", draft-ietf-ospf-ospfv3-segment-routing-
              extensions-23 (work in progress), January 2019.

   [I-D.ietf-spring-segment-routing-mpls]
              Bashandy, A., Filsfils, C., Previdi, S., Decraene, B.,
              Litkowski, S., and R. Shakir, "Segment Routing with MPLS
              data plane", draft-ietf-spring-segment-routing-mpls-22
              (work in progress), May 2019.

   [I-D.ietf-spring-segment-routing-policy]
              Filsfils, C., Sivabalan, S., Voyer, D., Bogdanov, A., and
              P. Mattes, "Segment Routing Policy Architecture", draft-
              ietf-spring-segment-routing-policy-03 (work in progress),
              May 2019.

   [I-D.ietf-spring-sr-service-programming]
              Clad, F., Xu, X., Filsfils, C., daniel.bernier@bell.ca,
              d., Li, C., Decraene, B., Ma, S., Yadlapalli, C.,
              Henderickx, W., and S. Salsano, "Service Programming with
              Segment Routing", draft-ietf-spring-sr-service-
              programming-00 (work in progress), October 2019.

   [RFC4364]  Rosen, E. and Y. Rekhter, "BGP/MPLS IP Virtual Private
              Networks (VPNs)", RFC 4364, DOI 10.17487/RFC4364, February
              2006, <https://www.rfc-editor.org/info/rfc4364>.

   [RFC8287]  Kumar, N., Ed., Pignataro, C., Ed., Swallow, G., Akiya,
              N., Kini, S., and M. Chen, "Label Switched Path (LSP)
              Ping/Traceroute for Segment Routing (SR) IGP-Prefix and
              IGP-Adjacency Segment Identifiers (SIDs) with MPLS Data
              Planes", RFC 8287, DOI 10.17487/RFC8287, December 2017,
              <https://www.rfc-editor.org/info/rfc8287>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

Authors' Addresses

   Clarence Filsfils (editor)
   Cisco Systems

   Email: cfilsfil@cisco.com





Filsfils, et al.          Expires May 20, 2020                  [Page 6]

Internet-Draft           SR-MPLS DP with IPv6 CP           November 2019


   Francois Clad (editor)
   Cisco Systems

   Email: fclad@cisco.com


   Ketan Talaulikar
   Cisco Systems

   Email: ketant@cisco.com









































Filsfils, et al.          Expires May 20, 2020                  [Page 7]
