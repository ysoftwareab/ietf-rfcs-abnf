<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Session Initiation Protocol Event Package for Voice Quality Reporting</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Session Initiation Protocol Event Package for Voice Quality Reporting">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">SIPPING WG</td><td class="header">A. Pendleton</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">A. Clark</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Telchemy Incorporated</td></tr>
<tr><td class="header">Expires: September 10, 2010</td><td class="header">A. Johnston</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Avaya</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">H. Sinnreich</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Unaffiliated</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">March 09, 2010</td></tr>
</table></td></tr></table>
<h1><br />Session Initiation Protocol Event Package for Voice Quality Reporting<br />draft-ietf-sipping-rtcp-summary-10</h1>

<h3>Abstract</h3>

<p>
This document defines a Session Initiation Protocol (SIP) event package that enables the collection and reporting of metrics that measure the quality for Voice over Internet Protocol (VoIP) sessions.  Voice call quality information derived from RTP Control Protocol Extended Reports (RTCP-XR) and call information from SIP is conveyed from a User Agent (UA) in a session, known as a reporter, to a third party, known as a collector. A registration for the application/vq-rtcp-xr MIME type is also included.

</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 10, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Applicability Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Use of the Mechanism<br />
<a href="#anchor4">2.</a>&nbsp;
Terminology<br />
<a href="#anchor5">3.</a>&nbsp;
SIP Events for VoIP Quality Reporting<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.1.</a>&nbsp;
SUBSCRIBE NOTIFY Method<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.2.</a>&nbsp;
PUBLISH Method<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.3.</a>&nbsp;
Multi-Party and Multi-Segment Calls<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.4.</a>&nbsp;
Overload Avoidance<br />
<a href="#anchor10">4.</a>&nbsp;
Event Package Formal Definition<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">4.1.</a>&nbsp;
Event Package Name<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">4.2.</a>&nbsp;
Event Package Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">4.3.</a>&nbsp;
SUBSCRIBE Bodies<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">4.4.</a>&nbsp;
Subscribe Duration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">4.5.</a>&nbsp;
NOTIFY Bodies<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">4.6.</a>&nbsp;
Voice Quality Event and Semantics<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">4.6.1.</a>&nbsp;
ABNF Syntax Definition<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">4.6.2.</a>&nbsp;
Parameter Definitions and Mappings<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor72">4.7.</a>&nbsp;
Message Flow and Syntax Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor73">4.7.1.</a>&nbsp;
End of Session Report using NOTIFY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor74">4.7.2.</a>&nbsp;
Mid Session Threshold Violation using NOTIFY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor75">4.7.3.</a>&nbsp;
End of Session Report using PUBLISH<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor76">4.7.4.</a>&nbsp;
Alert Report using PUBLISH<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor77">4.8.</a>&nbsp;
Configuration Dataset for vq-rtcpxr Events<br />
<a href="#anchor78">5.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor79">5.1.</a>&nbsp;
SIP Event Package Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor80">5.2.</a>&nbsp;
application/vq-rtcp-xr MIME Registration<br />
<a href="#anchor81">6.</a>&nbsp;
Security Considerations<br />
<a href="#anchor82">7.</a>&nbsp;
Contributors<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>  
Real time communications over IP networks use SIP for signaling with RTP/RTCP for media transport and reporting respectively. These protocols are very flexible and can support an extremely wide spectrum of usage scenarios. For this reason, extensions to these protocols must be specified in the context of a specific usage scenario. In this memo, extensions to SIP are proposed to support the reporting of RTP Control Protocol Extended Reports [4] metrics.

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Applicability Statement</h3>

<p>
RTP is utilized in many different architectures and topologies. RFC 5117 [15] lists and describes the following topologies: point to point, point to multipoint using multicast, point to multipoint using the RFC 3550 translator, point to multipoint using the RFC 3550 mixer model, point to multipoint using video switching MCUs, point to multipoint using RTCP-terminating MCU, and non-symmetric mixer/translators. As the abstract to this document points out, this specification is for reporting quality of Voice over Internet Protocol(VoIP) sessions. As such, only the first topology, point to point, is currently supported by this specification. This reflects both current VoIP deployments which are predominantly point to point using unicast, and also the state of research in the area of quality.

</p>
<p>
How to accurately report the quality of a multipart conference or a session involving multiple hops through translators and mixers is currently an area of research in the industry. However, this mechanism can easily be used for centrally mixed conference calls, in which each leg of the conferences is just a point to point call.  This mechanism could be extended to cover additional RTP topologies in the future once these topics progress out of the realm of research and into actual Internet deployments.


</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Use of the Mechanism</h3>

<p>
RTCP reports are usually sent to other participating endpoints in a    session which can make collection of performance information by administration or management systems too complex. In the usage   scenarios addressed in this memo, the data contained in RTCP XR VoIP    metrics reports (RFC3611 [4]) are forwarded to a central collection    server systems using SIP. 

</p>
<p>
Applications residing in the server or elsewhere can aid in network    management to alleviate bandwidth constraints and also to support    customer service by identifying and acknowledging calls of poor    quality. Specifying such applications are however beyond the scope    of this paper. 

</p>
<p>
There is a large portfolio of quality parameters that can be    associated with VoIP, but only a minimal necessary number of    parameters are included on the RTCP-XR reports: 

</p>
<p>
1. The codec type, as resulting from the SDP offer-answer           negotiation in SIP, 

</p>
<p>
2. The burst gap loss density and max gap duration, since voice           cut-outs are the most annoying quality impairment in VoIP, 

</p>
<p>
3. Round trip delay because it is critical to conversational quality, 


</p>
<p>

4. Conversational quality as a catch-all for other voice quality           impairments, such as random distributed packet loss, jitter,           annoying silent suppression effects, etc.

</p>
<p>

  In specific usage scenarios where other parameters are required,    designers can include other parameters beyond the scope of this    paper.

</p>
<p>

RTCP reports are best effort only, and though very useful have a    number of limitations as discussed in [3]. This must be considered    when using RTCP reports in managed networks.

</p>
<p>

This document defines a new SIP event package, vq-rtcpxr, and a new    MIME type, application/vq-rtcpxr, that enable the collection and    reporting of metrics that measure quality for RTP [3] sessions. The    definitions of the metrics used in the event package are based on    RTCP Extended Reports [4] and RTCP [3]; a mapping between the SIP    event parameters and the parameters within the aforementioned RFC's    is defined within this document in section 4.6.2.

</p>
<p>

Monitoring of voice quality is believed to be the highest priority    for usage of this mechanism and as such, the metrics in the event    package are largely tailored for voice quality measurements. The    event package is designed to be extensible. However the negotiation    of such extensions is not defined in this document.

</p>
<p>

The event package supports reporting both the voice quality metrics    for both inbound and outbound directions.  Voice quality metrics for    the inbound direction can generally be computed locally by the    reporting endpoint however voice quality metrics for the outbound    direction are computed by the remote endpoint and sent to the    reporting endpoint using the RTCP Extended Reports [4].

</p>
<p>

Configuration of usage of the event package is not covered in this    document. It is the recommendation of this document that the SIP    configuration framework [8] be used. This is discussed in Section  4.8.

</p>
<p>
The event package SHOULD be used with the SUBSCRIBE/NOTIFY method   however it MAY be also used with the PUBLISH method for backward    compatibility with some existing implementations. Message flow    examples for both methods are provided in this document.


</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in BCP 14, RFC 2119 <a class='info' href='#RFC2119'>[1]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.

</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
SIP Events for VoIP Quality Reporting</h3>

<p> 
This document defines a SIP events package [5] for Voice over IP    performance reporting. A SIP UA can send these events to an entity    which can make the information available to other applications. For    purposes of illustration, the entities involved in SIP vq-rtcpxr    event reporting will be referred to as follows:

</p>
<p>

o REPORTER is an entity involved in the measurement and reporting of media quality i.e. the SIP UA involved in a media session.

</p>
<p>
o COLLECTOR is an entity that receives SIP vq-rtcpxr events. A COLLECTOR may be a proxy server or another entity that is capable of supporting SIP vq-rtcpxr events.

</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
SUBSCRIBE NOTIFY Method</h3>

<p>
The COLLECTOR SHALL send a SUBSCRIBE to the REPORTER to explicitly establish the relationship. The REPORTER SHOULD send the voice quality metric reports using the NOTIFY method. The REPORTER MUST NOT send any vq-rtcpxr events if a COLLECTOR address has not been configured.
The REPORTER populates the Request-URI according to the rules for an in-dialog request. The COLLECTOR MAY send a SUBSCRIBE to a SIP Proxy acting on behalf of the reporting SIP UA's.


</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
PUBLISH Method</h3>

<p>
A SIP UA that supports this specification MAY also send the service quality metric reports using the PUBLISH method, however this    approach SHOULD NOT be used in unmanaged Internet services. The PUBLISH method MAY be supported for backward compatibility with    existing implementations.

</p>
<p>

The REPORTER MAY therefore populate the Request-URI of the PUBLISH    method with the address of the COLLECTOR. To ensure security of SIP    proxies and the COLLECTOR, the REPORTER MUST be configured with the    address of the COLLECTOR, preferably using the SIP UA configuration    framework [8], as described in section 5.8.

</p>
<p>

It is recommended that the REPORTER send an OPTIONS message to the    COLLECTOR to ensure support of the PUBLISH message.


</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Multi-Party and Multi-Segment Calls</h3>

<p>
A voice quality metric report may be sent for each session    terminating at the REPORTER and may contain multiple report bodies.    For a multi-party call the report MAY contain report bodies for the    session between the reporting endpoint and each remote endpoint for    which there was an RTP session during the call.

</p>
<p>

Multi-party services such as call hold and call transfer can result in the user participating in a series of concatenated sessions, potentially with different choices of codec or sample rate, although these may be perceived by the user as a single call.  A REPORTER MAY send a voice quality metric report at the end of each session or MAY send a single voice quality metric report containing a report body for each segment of the call.


</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Overload Avoidance</h3>

<p>
Users of this extension should ensure they implement general SIP  mechanisms for avoiding overload.  For instance, an overloaded proxy  or COLLECTOR MUST send a 503 Service Unavailable or other 5xx esponse  with an appropriate Retry-After time specified. REPORTERs MUST act on  these responses and respect the retry after time interval. In  addition, future SIP extensions to better handle overload as covered in [17] should be followed as they are standardized.

</p>
<p>

To avoid overload of SIP Proxies or COLLECTORS it is important to do  capacity planning and to minimize the number of reports that are sent.

</p>
<p>

 Approaches to avoiding overload include:

</p>
<p>
 
a. Send only one report at the end of each call  

</p>
<p>
b. Use interval reports only on "problem" calls that are being     closely monitored

</p>
<p>

c. Limit the number of alerts that can be sent to a maximum of one per call.


</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Event Package Formal Definition</h3>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Event Package Name</h3>

<p>
This document defines a SIP Event Package as defined in RFC 3265 [5].

</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Event Package Parameters</h3>

<p>
No event package parameters are defined.

</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
SUBSCRIBE Bodies</h3>

<p>
SUBSCRIBE bodies are described by this specification.

</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Subscribe Duration</h3>

<p>
Subscriptions to this event package MAY range from minutes to weeks.    Subscriptions in hours or days are more typical and are RECOMMENDED.    The default subscription duration for this event package is one hour.


</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
NOTIFY Bodies</h3>

<p>
There are three notify bodies: a Session report, an Interval session    report, and an Alert report.

</p>
<p>
The Session report SHOULD be used for reporting when a voice media   session terminates or when a media change occurs, such as a codec    change or a session forks and MUST NOT be used for reporting at    arbitrary points in time. This report MUST be used for cumulative    metric reporting and the report timestamps MUST be from the start    of a media session to the time at which the report is generated.

</p>
<p>

The Interval report SHOULD be used for periodic or interval    reporting and MUST NOT be used for reporting for the complete    media session. This report is intended to capture short duration    metric reporting and the report intervals SHOULD be non-overlapping time windows.  

</p>
<p>

The Alert report MAY be used when voice quality degrades during a    session.  The time window to which an Alert report relates MAY be a short time interval or from the start of the call to the point the alert is generated; this time window SHOULD be selected to provide the most useful information to support problem diagnosis.

</p>
<p>

Session, Interval and Alert reports MUST populate the metrics with    values that are measured over the interval explicitly defined by    the "start" and "stop" timestamps.

</p>
<p>

Voice quality summary reports reference only one codec (payload type). This payload type SHOULD be the main voice payload, not comfort noise or
telephone events payloads.  For applications that consistently and
rapidly switch codecs, the most used codec should be reported.  All
values in the report, such as IP addresses, SSRC, etc represent those
values as received by the REPORTER.  In some scenarios, these may not be
the same on either end of the session - the COLLECTOR will need logic to
be able to put these sessions together.  The values of parameters such
as sample rate, frame duration, frame octets, packets per second, round
trip delay, etc depend on the type of report they are present in.  If
present in a Session or an Interval report, they represent average
values over the session or interval.  If present in an Alert report,
they represent instantaneous values.

</p>
<p>
The REPORTER always shares local quality reporting information and
should, if possible, share remote quality reporting information.  This
remote quality could be available from received RTCP-XR reports or other
sources.  Reporting this is useful in cases where the other end might
support RTCP-XR but not this voice quality reporting.

</p>
<p>
This specification defines a new MIME type application/vq-rtcpxr which is a text encoding of the RTCP and RTCP-XR statistics with some additional metrics and correlation information.


</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6"></a><h3>4.6.&nbsp;
Voice Quality Event and Semantics</h3>

<p>
This section describes the syntax extensions required for event    publication in SIP. The formal syntax definitions described in this    section are expressed in the Augmented BNF [6] format used in SIP    [2], and contains references to elements defined therein.

</p>
<p>
Additionally, the definition of the timestamp format is provided in    [7]. Note that most of the parameters are optional. In practice, most    implementations will send a subset of the parameters. It is not the    intention of this document to define what parameters may or may not    be useful for monitoring the quality of a voice session, but to    enable reporting of voice quality.  As such, the syntax allows the    implementer to choose which metrics are most appropriate for their    solution.  As there are no "invalid", "unknown", or "not applicable"    values in the syntax, the intention is to exclude any parameters for    which values are not available, not applicable, or unknown.

</p>
<p>
The authors recognize that implementers may need to add new parameter lines to the reports and new metrics to the existing parameter lines. The extension tokens are intended to fulfill this need.


</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.1"></a><h3>4.6.1.&nbsp;
ABNF Syntax Definition</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
VQReportEvent  =  AlertReport /  SessionReport / IntervalReport

SessionReport = "VQSessionReport" [HCOLON "CallTerm"] CRLF
            LocalMetrics [CRLF RemoteMetrics]
            [DialogID]

; CallTerm indicates the final report of a session.

IntervalReport = "VQIntervalReport" [HCOLON "CallTerm"] CRLF
            LocalMetrics [CRLF RemoteMetrics]
            [DialogID]

LocalMetrics  = "LocalMetrics" HCOLON CRLF Metrics

RemoteMetrics = "RemoteMetrics" HCOLON CRLF Metrics

AlertReport   = "VQAlertReport" HCOLON
      MetricType WSP Severity WSP Direction CRLF
      LocalMetrics [CRLF RemoteMetrics]
      [DialogID]

Metrics = TimeStamps CRLF
   [SessionDescription CRLF]
   CallID CRLF
   FromID CRLF
   ToID CRLF
   OrigID CRLF
   LocalAddr CRLF
   RemoteAddr CRLF
   [LocalMACAddr CRLF]
   [RemoteMACAddr CRLF]
   [JitterBuffer CRLF]
   [PacketLoss CRLF]
   [BurstGapLoss CRLF]
   [Delay CRLF]
   [Signal CRLF]
   [QualityEstimates CRLF]
   *(Extension CRLF)

; Timestamps are provided in Coordinated Universal Time (UTC)
; using the ABNF format provided in RFC3339,
;  "Date and Time on the Internet: Timestamps"
; These timestamps SHOULD reflect, as closely as
; possible, the actual time during which the media session
; was running to enable correlation to events occurring
; in the network infrastructure and to accounting records

TimeStamps = "Timestamps" HCOLON StartTime WSP StopTime
StartTime  = "START" EQUAL date-time
StopTime   = "STOP" EQUAL date-time

; SessionDescription provides a shortened version of the
; session SDP but contains only the relevant parameters for
; session quality reporting purposes

SessionDescription  = "SessionDesc" HCOLON
   [PayloadType WSP]
   [PayloadDesc WSP]
   [SampleRate WSP]
   [PacketsPerSecond WSP]
   [FrameDuration WSP]
   [FrameOctets WSP]
   [FramesPerPacket WSP]
   [FmtpOptions WSP]
   [PacketLossConcealment WSP]
   [SilenceSuppressionState]
   *(WSP Extension)

; PayloadType provides the PT parameter used in the RTP packets

PayloadType  = "PT" EQUAL (1*3DIGIT)

; PayloadDesc provides a text description of the codec
; This parameter SHOULD use the IANA registry for
; media-type names defined by RFC 4855 where it unambiguously
; defines the codec.  Refer to:
; http://www.iana.org/assignments/media-types/audio/

PayloadDesc  = "PD" EQUAL (word / DQUOTE word-plus DQUOTE)

; SampleRate reports the rate at which voice was sampled
; in the case of narrowband codecs, this value will typically
; be 8000.
; For codecs that are able to change sample rates the lowest and
; highest sample rates MUST be reported (e.g. 8000;16000).

SampleRate = "SR" EQUAL (1*6DIGIT) *(SEMI (1*66DIGIT))

; FrameDuration can be combined with the FramesPerPacket
; to determine the packetization rate; the units for
; FrameDuration are milliseconds. NOTE: for frame based codecs,
; each frame constitutes a single frame; for sample-based codecs,
; a "frame" refers to the set of samples carried in an RTP packet

FrameDuration = "FD" EQUAL (1*4DIGIT)

; FrameOctets provides the number of octets in each frame
; at the time the report is generated (i.e. last value)
; This MAY be used where FrameDuration is not available
; NOTE: for frame-based codecs, each frame constitutes a single frame;
; for sample-based codecs, a "frame" refers to the set of samples carried
; in an RTP packet.

FrameOctets  = "FO" EQUAL (1*5DIGIT)

; FramesPerPacket provides the number of frames in each RTP
; packet at the time the report is generated
; NOTE: for frame based codecs, each frame constitutes a single frame;
; for sample-based codecs, a "frame" refers to the set of samples carried
; in an RTP packet

FramesPerPacket = "FPP" EQUAL (1*2DIGIT)

; Packets per second provides the average number of packets
; that are transmitted per second, as at the time the report is
; generated.

PacketsPerSecond = "PPS" EQUAL (1*5DIGIT)

; FMTP options from SDP.  Note that the parameter is delineated
; by " " to avoid parsing issues in transitioning between SDP
; and SIP parsing

FmtpOptions = "FMTP" EQUAL DQUOTE word-plus DQUOTE

; PacketLossConcealment indicates whether a PLC algorithm was
; or is being used for the session.  The values follow the same
; numbering convention as RFC 3611[4].
; 0 - unspecified
; 1 - disabled
; 2 - enhanced
; 3 - standard

PacketLossConcealment  = "PLC" EQUAL ("0" / "1" / "2" / "3")

; SilenceSuppressionState indicates whether silence suppression,
; also known as Voice Activity Detection (VAD) is enabled.

SilenceSuppressionState  = "SSUP" EQUAL ("on" / "off")

; CallId provides the call id from the SIP dialog

CallID  =  "CallID" HCOLON Call-ID-Parm

; FromID provides the identification of the reporting endpoint
; of the media session [2].

FromID = "FromID" HCOLON (name-addr/addr-spec)

; ToID provides the identification of the remote endpoint
; of the media session [2].

ToID = "ToID" HCOLON (name-addr/addr-spec)

; Originator specifies provides the identification of the
; endpoint which originated the session

OrigID = "OrigID" HCOLON (name-addr/addr-spec)

; LocalAddr provides the IP address, port and ssrc of the
; endpoint/UA which is the receiving end of the stream being
; measured.

LocalAddr   = "LocalAddr" HCOLON IPAddress WSP Port WSP Ssrc

; RemoteAddr provides the IP address, port and ssrc of the
; the source of the stream being measured.

RemoteAddr  = "RemoteAddr" HCOLON IPAddress WSP Port WSP Ssrc

; LocalMACAddr provides the MAC address
;                                 of the local SIP device

LocalMACAddr   = "LocalMAC" HCOLON hex2 *(":" hex2)

; RemoteMACAddr provides the MAC address
; of the remote SIP device

RemoteMACAddr   = "RemoteMAC" HCOLON hex2 *(":" hex2)

; For clarification, the LocalAddr in the LocalMetrics report
; MUST be the RemoteAddr in the RemoteMetrics report.

IPAddress   = "IP" EQUAL IPv6address / IPv4address
Port        = "PORT" EQUAL 1*DIGIT
Ssrc        = "SSRC" EQUAL ( %x30.78 1*8HEXDIG)

JitterBuffer = "JitterBuffer" HCOLON
   [JitterBufferAdaptive WSP]
   [JitterBufferRate WSP]
   [JitterBufferNominal WSP]
   [JitterBufferMax WSP]
   [JitterBufferAbsMax]
   *(WSP Extension)

; JitterBufferAdaptive indicates whether the jitter buffer in
; the endpoint is adaptive, static, or unknown.
; The values follow the same numbering convention as RFC3611.
; For more details, please refer to that document.
; 0 - unknown
; 1 - reserved
; 2 - non-adaptive
; 3 - adaptive

JitterBufferAdaptive  = "JBA" EQUAL ("0" / "1" / "2" / "3")

; JitterBuffer metric definitions are provided in RFC3611

JitterBufferRate      = "JBR" EQUAL (1*2DIGIT) ;0-15
JitterBufferNominal   = "JBN" EQUAL (1*5DIGIT) ;0-65535
JitterBufferMax       = "JBM" EQUAL (1*5DIGIT) ;0-65535
JitterBufferAbsMax    = "JBX" EQUAL (1*5DIGIT) ;0-65535

; PacketLoss metric definitions are provided in RFC3611

PacketLoss = "PacketLoss" HCOLON
           [NetworkPacketLossRate WSP]
           [JitterBufferDiscardRate]
           *(WSP Extension)

NetworkPacketLossRate =
  "NLR" EQUAL (1*3DIGIT ["." 1*2DIGIT]) ;percentage

JitterBufferDiscardRate =
  "JDR" EQUAL (1*3DIGIT ["." 1*2DIGIT]) ;percentage

; BurstGapLoss metric definitions are provided in RFC3611 [4]

BurstGapLoss = "BurstGapLoss" HCOLON
   [BurstLossDensity WSP]
   [BurstDuration WSP]
   [GapLossDensity WSP]
   [GapDuration WSP]
   [MinimumGapThreshold]
   *(WSP Extension)

BurstLossDensity =
 "BLD" EQUAL (1*3DIGIT ["." 1*2DIGIT]) ;percentage

BurstDuration =
 "BD" EQUAL (1*7DIGIT) ;0-3,600,000 -- milliseconds

GapLossDensity =
 "GLD" EQUAL (1*3DIGIT ["." 1*2DIGIT]) ;percentage

GapDuration =
 "GD" EQUAL (1*7DIGIT) ;0-3,600,000 -- milliseconds

MinimumGapThreshold =
 "GMIN" EQUAL (1*3DIGIT) ;1-255

Delay = "Delay" HCOLON
   [RoundTripDelay WSP]
   [EndSystemDelay WSP]
   [OneWayDelay WSP]
   [SymmOneWayDelay WSP]
   [InterarrivalJitter WSP]
   [MeanAbsoluteJitter]
   *(WSP Extension)

; RoundTripDelay SHALL be measured as defined in RFC3550 [3].

RoundTripDelay = "RTD" EQUAL (1*5DIGIT) ;0-65535

; EndSystemDelay metric is defined in RFC 3611 [4]

EndSystemDelay = "ESD" EQUAL (1*5DIGIT) ;0-65535

; OneWayDelay is defined in RFC 2679 [14]

OneWayDelay = "OWD" EQUAL (1*5DIGIT) ;0-65535

; SymmOneWayDelay is defined as half the sum of RoundTripDelay

; and the EndSystemDelay values for both endpoints.

SymmOneWayDelay = "SOWD" EQUAL (1*5DIGIT); 0-65535

; Interarrival Jitter is calculated as defined RFC 3550
; and converted into milliseconds

InterarrivalJitter = "IAJ" EQUAL (1*5DIGIT) ;0-65535 ms

; Mean Absolute Jitter is measured as defined

; by ITU-T G.1020 [10] where it is known as MAPDV

MeanAbsoluteJitter = "MAJ" EQUAL (1*5DIGIT);0-65535

; Signal metrics definitions are provided in RFC 3611

Signal = "Signal" HCOLON
   [SignalLevel WSP]
   [NoiseLevel WSP]
   [ResidualEchoReturnLoss]
   *(WSP Extension)

; SignalLevel will normally be a negative value
; the absence of the negative sign indicates a positive value
; where the signal level is negative, the sign MUST be
; included.This metric applies to the speech signal decoded
; from the received packet stream.

SignalLevel = "SL" EQUAL (["-"] 1*2DIGIT)

; NoiseLevel will normally be negative and the sign MUST be
; explicitly included.
; The absence of a sign indicates a positive value
; This metric applies to the speech signal decoded from the
; received packet stream.

NoiseLevel  = "NL" EQUAL (["-"] 1*2DIGIT)

; Residual Echo Return Loss (RERL) the ratio between
; the original signal and the echo level as measured after
; echo cancellation or suppression has been applied.
; Expressed in decibels (dB). This is typically a positive
; value.
; This metric relates to the proportion of the speech signal
; decoded from the received packet stream that is reflected
; back in the encoded speech signal output in the transmitted
; packet stream (i.e. will affect the REMOTE user's
; conversational quality). To support the diagnosis of echo
; related problems experienced by the local user of the device
; generating a report according to this document, the value of
; RERL reported via the RTCP XR VoIP Metrics payload SHOULD be
; reported in the RemoteMetrics set of data.

ResidualEchoReturnLoss = "RERL" EQUAL (1*3DIGIT)

; Voice Quality estimation metrics
; Each quality estimate has an optional associated algorithm.
; These fields permit the implementation to use a variety
; of different calculation methods for each type of metric

QualityEstimates  = "QualityEst" HCOLON
   [ListeningQualityR WSP]
   [RLQEstAlg WSP]
   [ConversationalQualityR WSP]
   [RCQEstAlg WSP]
   [ExternalR-In WSP]
   [ExtRInEstAlg WSP]
   [ExternalR-Out WSP]
   [ExtROutEstAlg WSP]
   [MOS-LQ WSP]
   [MOSLQEstAlg WSP]
   [MOS-CQ WSP]
   [MOSCQEstAlg WSP]
   [QoEEstAlg]
   *(WSP Extension)

ListeningQualityR = "RLQ" EQUAL (1*3DIGIT) ; 0 - 120

RLQEstAlg = "RLQEstAlg" EQUAL word ; "P.564", or other

ConversationalQualityR = "RCQ" EQUAL (1*3DIGIT) ; 0 - 120

RCQEstAlg = "RCQEstAlg" EQUAL word ; "P.564", or other

; ExternalR-In is measured by the local endpoint for incoming
; connection on "other" side of this endpoint
;   e.g. Phone A &lt;---&gt; Bridge &lt;----&gt; Phone B
;   ListeningQualityR = quality for Phone A ----&gt; Bridge path
;   ExternalR-In = quality for Bridge &lt;---- Phone B path

ExternalR-In = "EXTRI" EQUAL (1*3DIGIT) ; 0 - 120

ExtRInEstAlg = "ExtRIEstAlg" EQUAL word ; "P.564" or other

; ExternalR-Out is copied from RTCP XR message received from the
; remote endpoint on "other" side of this endpoint
;   e.g. Phone A &lt;---&gt; Bridge &lt;----&gt; Phone B
;   ExternalR-Out = quality for Bridge -----&gt; Phone B path

ExternalR-Out = "EXTRO" EQUAL (1*3DIGIT) ; 0 - 120

ExtROutEstAlg = "ExtROEstAlg" EQUAL word ; "P.564" or other

MOS-LQ = "MOSLQ" EQUAL (DIGIT ["." 1*3DIGIT]) ; 0.0 - 4.9

MOSLQEstAlg = "MOSLQEstAlg" EQUAL word ; "P.564" or other

MOS-CQ = "MOSCQ" EQUAL (DIGIT ["." 1*3DIGIT])  ; 0.0 - 4.9

MOSCQEstAlg = "MOSCQEstAlg" EQUAL word ; "P.564" or other

; QoEEstAlg provides an alternative to the separate
; estimation algorithms for use when the same algorithm
; is used for all measurements

QoEEstAlg = "QoEEstAlg" EQUAL word ; "P.564" or other

; DialogID provides the identification of the dialog with
; which the media session is related.  This value is taken
; from the SIP header.

DialogID  = "DialogID" COLON Call-ID-Parm *(SEMI did-parm)

did-parm  = to-tag / from-tag / word

to-tag    = "to-tag" EQUAL token

from-tag  = "from-tag" EQUAL token

; MetricType provides the metric on which a notification of
; threshold violation was based.  The more commonly used metrics
; for alerting purposes are included here explicitly, using the
; character encoding that represents the parameter in
; this ABNF.   The Extension parameter can be used to provide
; metrics that are not defined by this draft.

MetricType = "Type" EQUAL "RLQ" / "RCQ" / "EXTR" /
   "MOSLQ" / "MOSCQ" /
   "BD" / "NLR" / "JDR" /
   "RTD" / "ESD" / "IAJ" /
   "RERL" / "SL" / "NL" / Extension

Direction = "Dir" EQUAL "local" / "remote"
Severity  = "Severity" EQUAL "Warning" / "Critical" /
   "Clear"

Call-ID-Parm =  word [ "@" word ]

; General ABNF notation from RFC5234

CRLF =  %x0D.0A
DIGIT =  %x30-39
WSP   =  SP / HTAB ; white space
SP    =  " "
HTAB  =  %x09 ; horizontal tab
HEXDIG =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F" /
             "a" / "b" / "c" / "d" / "e" / "f"
DQUOTE  =  %x22 ; " (Double Quote)
ALPHA   =  %x41-5A / %x61-7A   ; A-Z / a-z

; ABNF notation from RFC3261

alphanum  =  ALPHA / DIGIT
LWS  =  [*WSP CRLF] 1*WSP ; linear whitespace
SWS  =  [LWS] ; sep whitespace
SEMI =  SWS ";" SWS ; semicolon
EQUAL   =  SWS "=" SWS ; equal
COLON   =  SWS ":" SWS ; colon
HCOLON  =  *( SP / HTAB ) ":" SWS

token       =  1*(alphanum / "-" / "." / "!" / "%" / "*"
                  / "_" / "+" / "`" / "'" / "~" )

IPv4address   =  1*3DIGIT "." 1*3DIGIT "." 1*3DIGIT "." 1*3DIGIT
IPv6address   =  hexpart [ ":" IPv4address ]
hexpart       =  hexseq / hexseq "::" [ hexseq ] / "::"
                      [ hexseq ]
hexseq        =  hex4 *( ":" hex4)
hex4          =  1*4HEXDIG
hex2          =  2HEXDIG

; ABNF notation from RFC3339

date-fullyear   = 4DIGIT ; e.g. 2006
date-month      = 2DIGIT ; e.g. 01 or 11
date-mday       = 2DIGIT ; e.g. 02 or 22
time-hour       = 2DIGIT ; e.g. 01 or 13
time-minute     = 2DIGIT ; e.g. 03 or 55
time-second     = 2DIGIT ; e.g. 01 or 59
time-secfrac    = "." 1*DIGIT
time-numoffset  = ("+" / "-") time-hour ":" time-minute
time-offset     = "Z" / time-numoffset
partial-time = time-hour ":" time-minute ":" time-second [time-secfrac]
full-date    = date-fullyear "-" date-month "-" date-mday
full-time    = partial-time time-offset
date-time    = full-date "T" full-time

; Miscellaneous definitions
;

Extension = word-plus

word  =  1*(alphanum / "-" / "." / "!" / "%" / "*" /
   "_" / "+" / "`" / "'" / "~" /
   "(" / ")" / "&lt;" / "&gt;" /
   ":" / "\" / DQUOTE /
   "/" / "[" / "]" / "?" )

word-plus =  1*(alphanum /  "-"  /  "."  /  "!"  / "%" / "*" /
   "_"  /  "+"  /  "`"  /  "'"  /  "~"  /
   "("  /  ")"  /  "&lt;"  /  "&gt;"  /  ":"  /
   "\"  /  "/"  /  "["  /  "]"  /  "?"  /
   "{"  /  "}"  /  "="  /  " ")
</pre></div>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2"></a><h3>4.6.2.&nbsp;
Parameter Definitions and Mappings</h3>

<p>
Parameter values, codec types and other aspects of the endpoints may change dynamically during a session.  The reported values of metrics and configuration parameters SHALL be the current value at the time the report is generated.  

</p>
<p>
The Packet Loss Rate and Packet Discard Rate parameters are calculated over the period between the starting and ending timestamps for the report.  These are normally calculated from a count of the number of lost or discarded packets divided by the count of the number of packets, and hence are based on the current values of these counters at the time the report was generated.

</p>
<p>

Packet delay variation, signal level, noise level, echo level are computed as running or interval averages, based on the appropriate standard (e.g. RFC3550 for PDV) and the sampled value of these running averages is reported.
Delay, packet size, jitter buffer size and codec related data may change during a session and the current value of these parameters is reported as sampled at the time the report is generated.


</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.1"></a><h3>4.6.2.1.&nbsp;
General mapping percentages from 8 bit, fixed point numbers</h3>

<p> 
RFC3611 uses an 8 bit, fixed point number with the binary point at    the left edge of the field.  This value is calculated by dividing the total number of packets lost by the total number of packets expected and multiplying the result by 256, and taking the integer part. 

</p>
<p>
For any RTCP XR parameter in this format, to map into the equivalent SIP vq-rtcpxr parameter, simply reverse the equation i.e. divide by 256 and taking the integer part. 

</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.2"></a><h3>4.6.2.2.&nbsp;
Timestamps</h3>

<p>
Following SIP and other IETF convention, timestamps are provided in Coordinated Universal Time (UTC) using the ABNF format provided in RFC 3339 [7]. These timestamps SHOULD reflect, as closely as possible, the actual time during which the media session was running to enable correlation to related events occurring in the network and to accounting or billing records.     


</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.3"></a><h3>4.6.2.3.&nbsp;
SessionDescription</h3>

<p>
The parameters in this field provide a shortened version of the    session SDP(s), containing only the relevant parameters for session quality reporting purposes. Where values may change durina a session, for example a codec may change rate, then the most recent value of the parameter is reported.

</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.3.1"></a><h3>4.6.2.3.1.&nbsp;
Payload Type</h3>

<p>  
This is the "payload type" parameter used in the RTP packets i.e. the codec. This field can also be mapped from the SDP "rtpmap" attribute field "payload type". IANA registered types SHOULD be used. 

</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.3.2"></a><h3>4.6.2.3.2.&nbsp;
Payload Desc</h3>

<p>  
This parameter a text description of the codec.  This parameter SHOULD use the IANA registry for media-type names where it unambiguously defines the codec.  Refer to: http://www.iana.org/assignments/media-types/audio/

</p>
<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.3.3"></a><h3>4.6.2.3.3.&nbsp;
Sample Rate</h3>

<p>  
This parameter is mapped from the SDP "rtpmap" attribute field "clock rate". The field provides the rate at which voice was sampled, measured in Hertz (Hz).    

</p>
<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.3.4"></a><h3>4.6.2.3.4.&nbsp;
Packets Per Second</h3>

<p>  
This parameter is not contained in RTP or SDP but can usually be obtained from the device codec. Packets per second provides the (rounded) number of RTP packets that are transmitted per second. 

</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.3.5"></a><h3>4.6.2.3.5.&nbsp;
Frame Duration</h3>

<p>  
This parameter is not contained in RTP or SDP but can usually be obtained from the device codec. The field reflects the amount of voice content in each frame within the RTP payload, measured in milliseconds. Note this value can be combined with the FramesPerPacket to determine the packetization rate. Also, where a sample-based codec is used, a "frame" refers to the set of samples carried in an RTP packet.  

</p>
<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.3.6"></a><h3>4.6.2.3.6.&nbsp;
Frame Octets</h3>

<p>   
This parameter is not contained in RTP or SDP but is usually provided by the device codec. The field provides the number of octets in each frame within the RTP payload. This field is usually not provided when the FrameDuration is provided. Also, where a sample-based codec is used, a "frame" refers to the set of samples carried in an RTP packet.  

</p>
<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.3.7"></a><h3>4.6.2.3.7.&nbsp;
Frames Per Packet</h3>

<p>  
This parameter is not contained in RTP or SDP but can usually be obtained from the device codec.  This field provides the number of frames in each RTP packet. Note this value can be combined with the FrameDuration to determine the packetization rate.  Also, where a sample-based codec is used, a "frame" refers to the set of samples carried in an RTP packet.  

</p>
<a name="anchor29"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.3.8"></a><h3>4.6.2.3.8.&nbsp;
FMTP Options</h3>

<p>
This parameter is taken directly from the SDP attribute "fmtp".   

</p>
<a name="anchor30"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.3.9"></a><h3>4.6.2.3.9.&nbsp;
Silence Suppression State</h3>

<p>   
This parameter does not correspond to SDP, RTP, or RTCP XR. It    indicates whether silence suppression, also known as Voice Activity    Detection (VAD) is enabled for the identified session. 

</p>
<a name="anchor31"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.3.10"></a><h3>4.6.2.3.10.&nbsp;
Packet Loss Concealment</h3>

<p> 
This value corresponds to "PLC" in RFC3611 in the VoIP Metrics Report    Block. The values defined by RFC3611 are reused by this  recommendation and therefore no mapping is required. 


</p>
<a name="anchor32"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.4"></a><h3>4.6.2.4.&nbsp;
LocalAddr</h3>

<p>
This field provides the IP address, port and synchronization source    (SSRC) for the session from the perspective of the endpoint that is    measuring performance.  The IPAddress can be IPv4 or IPv6 format. The SSRC is taken from SDP, RTCP, or RTCP XR input parameters. 

</p>
<p>
In the presence of NAT and where a NAT-traversal mechanism such as STUN [9] is used, the external IP address can be reported, since the internal IP address is not visible to the network operator.

</p>
<a name="anchor33"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.5"></a><h3>4.6.2.5.&nbsp;
RemoteAddr</h3>

<p> 
This field provides the IP address, port and ssrc of the session peer from the perspective of the remote endpoint measuring performance. In the presence of NAT and where a NAT-traversal mechanism such as STUN [9] is used, the external IP address can be reported, since the internal IP address is not visible to the network operator. 

</p>
<a name="anchor34"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.6"></a><h3>4.6.2.6.&nbsp;
Jitter Buffer Parameters</h3>

<a name="anchor35"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.6.1"></a><h3>4.6.2.6.1.&nbsp;
Jitter Buffer Adaptive</h3>

<p>  
This value corresponds to "JBA" in RFC3611 in the VoIP Metrics Report Block. The values defined by RFC3611 are unchanged and therefore no mapping is required.

</p>
<a name="anchor36"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.6.2"></a><h3>4.6.2.6.2.&nbsp;
Jitter Buffer Rate</h3>

<p> 
This value corresponds to "JB rate" in RFC3611 in the VoIP Metrics    Report Block. The parameter does not require any conversion.

</p>
<a name="anchor37"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.6.3"></a><h3>4.6.2.6.3.&nbsp;
Jitter Buffer Nominal</h3>

<p> 
This value corresponds to "JB nominal" in RFC3611 in the VoIP Metrics       Report Block. The parameter does not require any conversion.

</p>
<a name="anchor38"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.6.4"></a><h3>4.6.2.6.4.&nbsp;
Jitter Buffer Max</h3>

<p> 
This value corresponds to "JB maximum" in RFC3611 in the VoIP Metrics    Report Block. The parameter does not require any conversion.

</p>
<a name="anchor39"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.6.5"></a><h3>4.6.2.6.5.&nbsp;
Jitter Buffer Abs Max</h3>

<p>    
This value corresponds to "JB abs max" in RFC3611 in the VoIP Metrics    Report Block. The parameter does not require any conversion.

</p>
<a name="anchor40"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.7"></a><h3>4.6.2.7.&nbsp;
Packet Loss Parameters</h3>

<p>   
This value corresponds to "loss rate" in RFC3611 in the VoIP Metrics    Report Block. For conversion, see "General mapping percentages from 8    bit, fixed point numbers".

</p>
<a name="anchor41"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.7.1"></a><h3>4.6.2.7.1.&nbsp;
Jitter Buffer Discard Rate</h3>

<p> 
This value corresponds to "discard rate" in RFC3611 in the VoIP    Metrics Report Block.  For conversion, see "General mapping    percentages from 8 bit, fixed point numbers".

</p>
<a name="anchor42"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.8"></a><h3>4.6.2.8.&nbsp;
Burst/Gap Parameters</h3>

<a name="anchor43"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.8.1"></a><h3>4.6.2.8.1.&nbsp;
Burst Loss Density</h3>

<p> 
This value corresponds to "burst density" in RFC3611 in the VoIP    Metrics Report Block. For conversion, see "General mapping    percentages from 8 bit, fixed point numbers".

</p>
<a name="anchor44"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.8.2"></a><h3>4.6.2.8.2.&nbsp;
Burst Duration</h3>

<p>  
This value corresponds to "burst duration" in RFC3611 in the VoIP    Metrics Report Block. This value requires no conversion; the exact    value sent in an RTCP XR VoIP Metrics Report Block can be included in    the SIP vq-rtcpxr parameter.

</p>
<a name="anchor45"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.8.3"></a><h3>4.6.2.8.3.&nbsp;
Gap Loss Density</h3>

<p>  
This value corresponds to "gap density" in RFC3611 in the VoIP    metrics Report Block.

</p>
<a name="anchor46"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.8.4"></a><h3>4.6.2.8.4.&nbsp;
Gap Duration</h3>

<p>  
This value corresponds to "gap duration" in RFC3611 in the VoIP    Metrics Report Block.  This value requires no conversion; the exact    value sent in an RTCP XR VoIP Metrics Report Block can be reported.

</p>
<a name="anchor47"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.8.5"></a><h3>4.6.2.8.5.&nbsp;
Minimum Gap Threshold</h3>

<p> 
This value corresponds to "Gmin" in RFC3611 in the VoIP Metrics  Report Block. This value requires no conversion; the exact value sent in an RTCP XR VoIP Metrics Report Block can be reported.

</p>
<a name="anchor48"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.9"></a><h3>4.6.2.9.&nbsp;
Delay Parameters</h3>

<a name="anchor49"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.9.1"></a><h3>4.6.2.9.1.&nbsp;
Round Trip Delay</h3>

<p>  
This value corresponds to "round trip delay" in RFC3611 in the VoIP Metrics Report Block and may be measured using the method defined in RFC3550. The parameter is expressed in milliseconds.

</p>
<a name="anchor50"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.9.2"></a><h3>4.6.2.9.2.&nbsp;
End System Delay</h3>

<p>  
This value corresponds to "end system delay" in RFC3611 in the VoIP Metrics Report Block. This parameter does not require any conversion. The parameter is expressed in milliseconds.

</p>
<a name="anchor51"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.9.3"></a><h3>4.6.2.9.3.&nbsp;
Symmetric One Way Delay</h3>

<p>
This value is computed by adding Round Trip Delay to the local and remote End System Delay and dividing by two.

</p>
<a name="anchor52"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.9.4"></a><h3>4.6.2.9.4.&nbsp;
One Way Delay</h3>

<p>  
This value SHOULD be measured using the methods defined in IETF    RFC 2679 [14]. The parameter is expressed in milliseconds.

</p>
<a name="anchor53"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.9.5"></a><h3>4.6.2.9.5.&nbsp;
Inter-arrival Jitter</h3>

<p>  
Inter-arrival jitter is calculated as defined in RFC 3550 and converted into milliseconds.

</p>
<a name="anchor54"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.9.6"></a><h3>4.6.2.9.6.&nbsp;
Mean Absolute Jitter</h3>

<p>  
It is recommended that MAJ be measured as defined in ITU-T G.1020 [10]. This parameter is often referred to as MAPDV. The parameter is expressed in milliseconds.

</p>
<a name="anchor55"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.10"></a><h3>4.6.2.10.&nbsp;
Signal-related Parameters</h3>

<a name="anchor56"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.10.1"></a><h3>4.6.2.10.1.&nbsp;
Signal Level</h3>

<p>  
This field corresponds to "signal level" in RFC3611 in the VoIP    Metrics Report Block. This field provides the voice signal    relative level is defined as the ratio of the signal level to a 0    dBm0 reference, expressed in decibels. This value can be used    directly without extra conversion.

</p>
<a name="anchor57"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.10.2"></a><h3>4.6.2.10.2.&nbsp;
Noise Level</h3>

<p>  
This field corresponds to "noise level" in RFC3611 in the VoIP    Metrics Report Block. This field provides the ratio of the silent    period background noise level to a 0 dBm0 reference, expressed in    decibels.  This value can be used directly without extra conversion.

</p>
<a name="anchor58"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.10.3"></a><h3>4.6.2.10.3.&nbsp;
Residual Echo Return Loss (RERL)</h3>

<p>  
This field corresponds to "RERL" in RFC3611 in the VoIP Metrics    Report Block.  This field provides the ratio between the original    signal and the echo level in decibels, as measured after echo    cancellation or suppression has been applied. This value can be used    directly without extra conversion.

</p>
<a name="anchor59"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.11"></a><h3>4.6.2.11.&nbsp;
Quality Scores</h3>

<a name="anchor60"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.11.1"></a><h3>4.6.2.11.1.&nbsp;
ListeningQualityR</h3>

<p>  
This field reports the listening quality expressed as an R factor    (per G.107).  This does not include the effects of echo or delay.    The range of R is 0-95 for narrowband calls and 0-120 for wideband    calls. Algorithms for computing this value SHOULD be compliant with    ITU-T Recommendations P.564 [11] and G.107 [12].

</p>
<a name="anchor61"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.11.2"></a><h3>4.6.2.11.2.&nbsp;
RLQEstAlg</h3>

<p>    
This field provides a text name for the algorithm used to estimate    ListeningQualityR. 

</p>
<a name="anchor62"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.11.3"></a><h3>4.6.2.11.3.&nbsp;
ConversationalQualityR</h3>

<p>    
This field corresponds to "R factor" in RFC3611 in the VoIP Metrics    Report Block. This parameter provides a cumulative measurement of    voice quality from the start of the session to the reporting time.    The range of R is 0-95 for narrowband calls and 0-120 for wideband    calls. Algorithms for computing this value SHOULD be compliant with    ITU-T Recommendation P.564 and G.107. Within RFC3611 a reported R factor of 127 indicates that this parameter is unavailable; in    this case the ConversationalQualityR parameter MUST be omitted    from the vq-rtcpxr event. 

</p>
<a name="anchor63"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.11.4"></a><h3>4.6.2.11.4.&nbsp;
RCQEstAlg</h3>

<p>    
This field provides a text name for the algorithm used to estimate    ConversationalQualityR. 

</p>
<a name="anchor64"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.11.5"></a><h3>4.6.2.11.5.&nbsp;
ExternalR-In</h3>

<p>    
This field corresponds to "ext. R factor" in RFC3611 in the VoIP    Metrics Report Block.  This parameter reflects voice quality as    measured by the local endpoint for incoming connection on "other"    side (refer to RFC3611 for a more detailed explanation). The range of    R is 0-95 for narrowband calls and 0-120 for wideband calls.    Algorithms for computing this value SHOULD be compliant with ITU-T    Recommendation P.564 and G.107. Within RFC3611 a reported R factor    of 127 indicates that this parameter is unavailable; in this case the    ConversationalQualityR parameter MUST be omitted from the vq-rtcpxr    event. 

</p>
<a name="anchor65"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.11.6"></a><h3>4.6.2.11.6.&nbsp;
ExtRInEstAlg</h3>

<p>   
This field provides a text name for the algorithm used to estimate    ExternalR-In. 

</p>
<a name="anchor66"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.11.7"></a><h3>4.6.2.11.7.&nbsp;
ExternalR-Out</h3>

<p>
This field corresponds to "ext. R factor" in RFC3611 in the VoIP    Metrics Report Block.  Here, the value is copied from RTCP XR message    received from the remote endpoint on "other" side of this endpoint    refer to RFC3611 for a more detailed explanation). The range of R is    0-95 for narrowband calls and 0-120 for wideband calls.  Algorithms    for computing this value SHOULD be compliant with ITU-T    Recommendation P.564 and G.107. Within RFC3611 a reported R factor of    127 indicates that this parameter is unavailable; in this case the    ConversationalQualityR parameter SHALL be omitted from the vq-rtcpxr    event. 

</p>
<a name="anchor67"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.11.8"></a><h3>4.6.2.11.8.&nbsp;
ExtROutEstAlg</h3>

<p>   
This field provides a text name for the algorithm used to estimate    ExternalR-Out. Conversion of RFC3611 reported MOS scores for use in reporting MOS-LQ and MOS-CQ MUST be performed by dividing the RFC3611 reported value by 10 if this value is less than or equal to 50 or omitting the MOS-xQ parameter if the RFC3611 reported value is 127 (which indicates unavailable). 

</p>
<a name="anchor68"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.11.9"></a><h3>4.6.2.11.9.&nbsp;
MOS-LQ</h3>

<p>    
This field corresponds to "MOSLQ" in RFC3611 in the VoIP Metrics    Report Block.  This parameter is the estimated mean opinion score for listening voice quality on a scale from 1 to 5, in which 5 represents    "Excellent" and 1 represents "Unacceptable". Algorithms for computing this value SHOULD be compliant with ITU-T Recommendation P.564 [11].  This field provides a text name for the algorithm used to estimate    MOS-LQ. 

</p>
<a name="anchor69"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.11.10"></a><h3>4.6.2.11.10.&nbsp;
MOS-CQ</h3>

<p>    
This field corresponds to "MOSCQ" in RFC3611 in the VoIP Metrics    Report Block.  This parameter is the estimated mean opinion score for    conversation voice quality on a scale from 1 to 5, in which 5    represents excellent and 1 represents unacceptable. Algorithms for    computing this value SHOULD be compliant with ITU-T Recommendation    P.564 with regard to the listening quality element of the computed    MOS score. 

</p>
<a name="anchor70"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.11.11"></a><h3>4.6.2.11.11.&nbsp;
MOSCQEstAlg</h3>

<p>    
This field provides a text name for the algorithm used to estimate    MOS-CQ.

</p>
<a name="anchor71"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2.11.12"></a><h3>4.6.2.11.12.&nbsp;
QoEEstAlg</h3>

<p>  
This field provides a text description of the algorithm used to    estimate all voice quality metrics. This parameter is provided as an    alternative to the separate estimation algorithms for use when the    same algorithm is used for all measurements.

</p>
<a name="anchor72"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7"></a><h3>4.7.&nbsp;
Message Flow and Syntax Examples</h3>

<p>
This section shows a number of message flow examples showing how the event package works. 

</p>
<a name="anchor73"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7.1"></a><h3>4.7.1.&nbsp;
End of Session Report using NOTIFY</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    Alice            Proxy/Registrar        Collector             Bob
    |                    |                    |                    |
    |                    |                    |                    |
    | REGISTER Allow-Event:vq-rtcpxr F1       |                    |
    |-------------------&gt;|                    |                    |
    |      200 OK F2     |                    |                    |
    |&lt;-------------------|                    |                    |
    |                    |  SUBSCRIBE Event:vq-rtcpxr F3           |
    |                    |&lt;-------------------|                    |
    | SUBSCRIBE Event:vq-rtcpxr F4            |                    |
    |&lt;-------------------|                    |                    |
    |     200 OK F5      |                    |                    |
    |-------------------&gt;|                    |                    |
    |                    |   200 OK F6        |                    |
    |                    |-------------------&gt;|                    |
    |      INVITE F7     |                    |                    |
    |-------------------&gt;|                    |                    |
    |                    |      INVITE F8     |                    |
    |                    |----------------------------------------&gt;|
    |                    |      200 OK F9     |                    |
    |                    |&lt;----------------------------------------|
    |     200 OK F10     |                    |                    |
    |&lt;-------------------|                    |                    |
    |        ACK F11     |                    |                    |
    |-------------------&gt;|                    |                    |
    |                    |      ACK F12       |                    |
    |                    |----------------------------------------&gt;|
    |        RTP         |                    |                    |
    |&lt;============================================================&gt;|
    |        RTCP, RTCP XR                    |                    |
    |&lt;============================================================&gt;|
    |                    |                    |                    |
    |    BYE F13         |                    |                    |
    |-------------------&gt;|      BYE F14       |                    |
    |                    |----------------------------------------&gt;|
    |                    |     200 OK F15     |                    |
    |                    |&lt;----------------------------------------|
    |     200 OK F16     |                    |                    |
    |&lt;-------------------|                    |                    |
    |  NOTIFY Event:vq-rtcpxr F17             |                    |
    |-------------------&gt;|                    |                    |
    |                    | NOTIFY Event:vq-rtcpxr F18              |
    |                    |-------------------&gt;|                    |
    |                    |     200 OK F19     |                    |
    |                    |&lt;-------------------|                    |
    |     200 OK F20     |                    |                    |
    |&lt;-------------------|                    |                    |

Figure 1. Summary report with NOTIFY sent after session termination.
In the call flow depicted in Figure 1, the following message format
is sent in F17:

    NOTIFY sip:collector@example.org SIP/2.0
    Via: SIP/2.0/UDP pc22.example.org;branch=z9hG4bK3343d7
    Max-Forwards: 70
    To: &lt;sip:collector@example.org&gt;;tag=43524545
    From: Alice &lt;sip:alice@example.org&gt;;tag=a3343df32
    Call-ID: 1890463548
    CSeq: 4321 NOTIFY
    Contact: &lt;sip:alice@pc22.example.org&gt;
    Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER,
    SUBSCRIBE, NOTIFY
    Event: vq-rtcpxr
    Accept: application/sdp, message/sipfrag
    Subscription-State: active;expires=3600
    Content-Type: application/vq-rtcpxr
    Content-Length: ...

    VQSessionReport: CallTerm
    LocalMetrics:
    Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z
    SessionDesc:PT=0 PD=PCMU SR=8000 FD=20 FO=160 FPP=1 PPS=50
                    PLC=3 SSUP=on
    CallID: 6dg37f1890463
    FromID: Alice &lt;sip:alice@example.org&gt;
    ToID: Bill &lt;sip:bill@elpmaxe.org&gt;
    OrigID: Alice &lt;sip:alice@example.org&gt;
    LocalAddr: IP=10.10.1.100 PORT=5000 SSRC=1a3b5c7d
    LocalMAC: 00:1f:5b:cc:21:0f
    RemoteAddr:IP=11.1.1.150 PORT=5002 SSRC=0x2468abcd
    RemoteMAC: 00:26:08:8e:95:02
    JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120
    PacketLoss:NLR=5.0 JDR=2.0
    BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16
    Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10
    Signal:SL=-18 NL=-50 RERL=55
    QualityEst:RLQ=88 RCQ=85 EXTRI=90 MOSLQ=4.1 MOSCQ=4.0
      QoEEstAlg=P.564
    RemoteMetrics:
    Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z
    SessionDesc:PT=0 PD=PCMU SR=8000 FD=20 FO=160 FPP=1 PPS=50
                    PLC=3 SSUP=on
    CallID:6dg37f1890463
    LocalAddr:IP=11.1.1.150 PORT=5002 SSRC=0x2468abcd
    RemoteAddr:IP=10.10.1.100 PORT=5000 SSRC=0x1a3b5c7d
    JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120
    PacketLoss:NLR=5.0 JDR=2.0
    BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16
    Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10
    Signal:SL=-21 NL=-45 RERL=55
    QualityEst:RLQ=90 RCQ=85 EXTRI=90 MOSLQ=4.3 MOSCQ=4.2
      QoEEstAlg=P.564
    DialogID:1890463548@alice.example.org;to-tag=8472761;
      from-tag=9123dh311

</pre></div>
<a name="anchor74"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7.2"></a><h3>4.7.2.&nbsp;
Mid Session Threshold Violation using NOTIFY</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Alice            Proxy/Registrar        Collector             Bob
 |                    |                    |                    |
 |                    |                    |                    |
 | REGISTER Allow-Event:vq-rtcpxr F1       |                    |
 |-------------------&gt;|                    |                    |
 |      200 OK F2     |                    |                    |
 |&lt;-------------------|                    |                    |
 |                    |  SUBSCRIBE Event:vq-rtcpxr F3           |
 |                    |&lt;-------------------|                    |
 | SUBSCRIBE Event:vq-rtcpxr F4            |                    |
 |&lt;-------------------|                    |                    |
 |     200 OK F5      |                    |                    |
 |-------------------&gt;|                    |                    |
 |                    |   200 OK F6        |                    |
 |                    |-------------------&gt;|                    |
 |      INVITE F7     |                    |                    |
 |-------------------&gt;|                    |                    |
 |                    |      INVITE F8     |                    |
 |                    |----------------------------------------&gt;|
 |                    |      200 OK F9     |                    |
 |                    |&lt;----------------------------------------|
 |     200 OK F10     |                    |                    |
 |&lt;-------------------|                    |                    |
 |        ACK F11     |                    |                    |
 |-------------------&gt;|                    |                    |
 |                    |      ACK F12       |                    |
 |                    |----------------------------------------&gt;|
 |        RTP         |                    |                    |
 |&lt;============================================================&gt;|
 |        RTCP, RTCP XR                    |                    |
 |&lt;============================================================&gt;|
 |  NOTIFY Event:vq-rtcpxr F17             |                    |
 |-------------------&gt;|                    |                    |
 |                    | NOTIFY Event:vq-rtcpxr F18              |
 |                    |-------------------&gt;|                    |
 |                    |     200 OK F19     |                    |
 |                    |&lt;-------------------|                    |
 |     200 OK F20     |                    |                    |
 |&lt;-------------------|                    |                    |
 |                    |                    |                    |
 |    BYE F13         |                    |                    |
 |-------------------&gt;|      BYE F14       |                    |
 |                    |----------------------------------------&gt;|
 |                    |     200 OK F15     |                    |
 |                    |&lt;----------------------------------------|
 |     200 OK F16     |                    |                    |
 |&lt;-------------------|                    |                    |
 |  NOTIFY Event:vq-rtcpxr F17             |                    |
 |-------------------&gt;|                    |                    |
 |                    | NOTIFY Event:vq-rtcpxr F18              |
 |                    |-------------------&gt;|                    |
 |                    |     200 OK F19     |                    |
 |                    |&lt;-------------------|                    |
 |     200 OK F20     |                    |                    |
 |&lt;-------------------|                    |                    |

Figure 2.  An alert report is sent during the session.
In the call flow depicted in Figure 2, the following message
format is sent in F17:

    NOTIFY sip:collector@example.org SIP/2.0
    Via: SIP/2.0/UDP pc22.example.org;branch=z9hG4bK3343d7
    Max-Forwards: 70
    To: &lt;sip:proxy@example.org&gt;
    From: Alice &lt;sip:alice@example.org&gt;;tag=a3343df32
    Call-ID: 1890463548
    CSeq: 4331 PUBLISH
    Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER,
    SUBSCRIBE, NOTIFY
    Event: vq-rtcpxr
    Accept: application/sdp, message/sipfrag
    Content-Type: application/vq-rtcpxr
    Content-Length: ...

    VQAlertReport: Type=NLR Severity=Critical Dir=local
    LocalMetrics:
    Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z
    SessionDesc:PT=18 PD=G729 SR=8000 FD=20 FO=20 FPP=2 PPS=50
                    FMTP="annexb=no" PLC=3 SSUP=on
    CallID: 6dg37f1890463
    FromID: Alice &lt;sip:alice@example.org&gt;
    ToID: Bill &lt;sip:bill@example.org&gt;
    OrigID: Alice &lt;sip:alice@example.org&gt;
    LocalAddr:IP=10.10.1.100 PORT=5000 SSRC=0x2468abcd
    LocalMAC: 00:1f:5b:cc:21:0f
    RemoteAddr:IP=11.1.1.150 PORT=5002 SSRC=1357efff
    RemoteMAC: 00:26:08:8e:95:02
    JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120
    PacketLoss:NLR=10.0 JDR=2.0
    BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16
    Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10
    Signal:SL=-21 NL=-50 RERL=55
    QualityEst:RLQ=80 RCQ=85 EXTRI=90 MOSLQ=3.5 MOSCQ=3.7 QoEEstAlg=P.564

    RemoteMetrics:
    Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z
    SessionDesc:PT=18 PD=G729 SR=8000 FD=20 FO=20 FPP=2 PPS=50
                    FMTP="annexb=no" PLC=3 SSUP=on
    CallID: 6dg37f1890463
    LocalAddr:IP=11.1.1.150 PORT=5002 SSRC=1357efff
    RemoteAddr:IP=10.10.1.100 PORT=5000 SSRC=0x2468abcd
    JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120
    PacketLoss:NLR=5.0 JDR=2.0
    BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16
    Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10
    Signal:SL=-21 NL=-45 RERL=55
    QualityEst:RLQ=90 RCQ=85 MOSLQ=4.3 MOSCQ=4.2 QoEEstAlg=P.564
    DialogID:1890463548@alice.example.org;to-tag=8472761;
       from-tag=9123dh311
</pre></div>
<a name="anchor75"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7.3"></a><h3>4.7.3.&nbsp;
End of Session Report using PUBLISH</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   Alice            Proxy/Registrar        Collector              Bob
    |                    |                    |                    |
    |                    |                    |                    |
    | REGISTER Allow-Event:vq-rtcpxr  F1      |                    |
    |-------------------&gt;|                    |                    |
    |      200 OK F2     |                    |                    |
    |&lt;-------------------|                    |                    |
    |      INVITE F3     |                    |                    |
    |-------------------&gt;|                    |                    |
    |                    |      INVITE F4     |                    |
    |                    |----------------------------------------&gt;|
    |                    |      200 OK F5     |                    |
    |                    |&lt;----------------------------------------|
    |     200 OK F6      |                    |                    |
    |&lt;-------------------|                    |                    |
    |        ACK F7      |                    |                    |
    |-------------------&gt;|                    |                    |
    |                    |      ACK F8        |                    |
    |                    |----------------------------------------&gt;|
    |        RTP         |                    |                    |
    |&lt;============================================================&gt;|
    |        RTCP        |                    |                    |
    |&lt;============================================================&gt;|
    |                    |                    |                    |
    |    BYE F9          |                    |                    |
    |-------------------&gt;|      BYE F10       |                    |
    |                    |----------------------------------------&gt;|
    |                    |     200 OK F11     |                    |
    |                    |&lt;----------------------------------------|
    |     200 OK F12     |                    |                    |
    |&lt;-------------------|                    |                    |
    |  PUBLISH Event:vq-rtcpxr F13            |                    |
    |-------------------&gt;|                    |                    |
    |                    | PUBLISH Event:vq-rtcpxr F14             |
    |                    |-------------------&gt;|                    |
    |                    |     200 OK F15     |                    |
    |                    |&lt;-------------------|                    |
    |     200 OK F16     |                    |                    |
    |&lt;-------------------|                    |                    |

Figure 3. End of session report sent after session termination.
In the message flow depicted in Figure 3, the following message is
sent in F13.

    PUBLISH sip:collector@example.org SIP/2.0
    Via: SIP/2.0/UDP pc22.example.org;branch=z9hG4bK3343d7
    Max-Forwards: 70
    To: &lt;sip:proxy@example.org&gt;
    From: Alice &lt;sip:alice@example.org&gt;;tag=a3343df32
    Call-ID: 1890463548
    CSeq: 4331 PUBLISH
    Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER,
    SUBSCRIBE, NOTIFY
    Event: vq-rtcpxr
    Accept: application/sdp, message/sipfrag
    Content-Type: application/vq-rtcpxr
    Content-Length: ...

    VQSessionReport: CallTerm

    LocalMetrics:
    Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z
    SessionDesc:PT=18 PD=G729 SR=8000 FD=20 FO=20 FPP=2 PPS=50
                    FMTP="annexb=no" PLC=3 SSUP=on
    CallID: 6dg37f1890463
    FromID: Alice &lt;sip:alice@example.org&gt;
    ToID: Bill &lt;sip:bill@elpmaxe.org&gt;
    OrigID: Alice &lt;sip:alice@example.org&gt;
    LocalAddr: IP=10.10.1.100 PORT=5000 SSRC=1a3b5c7d
    LocalMAC: 00:1f:5b:cc:21:0f
    RemoteAddr:IP=11.1.1.150 PORT=5002 SSRC=0x2468abcd
    RemoteMAC: 00:26:08:8e:95:02
    JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120
    PacketLoss:NLR=5.0 JDR=2.0
    BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16
    Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10
    Signal:SL=-21 NL=-50 RERL=55
    QualityEst:RLQ=90 RCQ=85 EXTRI=90 MOSLQ=4.2 MOSCQ=4.3
      QoEEstAlg=P.564

    RemoteMetrics:
    Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z
    SessionDesc:PT=18 PD=G729 SR=8000 FD=20 FO=20 FPP=2 PPS=50
                    FMTP="annexb=no" PLC=3 SSUP=on
    CallID:6dg37f1890463
    LocalAddr:IP=11.1.1.150 PORT=5002 SSRC=1357efff
    RemoteAddr:IP=10.10.1.100 PORT=5000 SSRC=0x2468abcd
    JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120
    PacketLoss:NLR=5.0 JDR=2.0
    BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16
    Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10
    Signal:SL=-21 NL=-45 RERL=55
    QualityEst:RLQ=90 RCQ=85 MOSLQ=4.3 MOSCQ=4.2 QoEEstAlg=P.564
    DialogID:1890463548@alice.example.org;to-tag=8472761;
       from-tag=9123dh311
</pre></div>
<a name="anchor76"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7.4"></a><h3>4.7.4.&nbsp;
Alert Report using PUBLISH</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    Alice            Proxy/Registrar        Collector             Bob
    |                    |                    |                    |
    |      INVITE F1     |                    |                    |
    |-------------------&gt;|                    |                    |
    |                    |      INVITE F2     |                    |
    |                    |----------------------------------------&gt;|
    |                    |      200 OK F3     |                    |
    |                    |&lt;----------------------------------------|
    |     200 OK F4      |                    |                    |
    |&lt;-------------------|                    |                    |
    |        ACK F5      |                    |                    |
    |-------------------&gt;|                    |                    |
    |                    |      ACK F6        |                    |
    |                    |----------------------------------------&gt;|
    |        RTP         |                    |                    |
    |&lt;============================================================&gt;|
    |        RTCP        |                    |                    |
    |&lt;============================================================&gt;|
    |  PUBLISH Event:vq-rtcpxr F7             |                    |
    |-------------------&gt;|                    |                    |
    |                    | PUBLISH Event:vq-rtcpxr F8              |
    |                    |-------------------&gt;|                    |
    |                    |     200 OK F9      |                    |
    |                    |&lt;-------------------|                    |
    |     200 OK F10     |                    |                    |
    |&lt;-------------------|                    |                    |
    |                    |                    |                    |
    |      BYE F12       |                    |                    |
    |-------------------&gt;|      BYE F13       |                    |
    |                    |----------------------------------------&gt;|
    |                    |     200 OK F14     |                    |
    |                    |&lt;----------------------------------------|
    |     200 OK F15     |                    |                    |
    |&lt;-------------------|                    |                    |

Figure 4. Alert report message flow

   In the message flow depicted in Figure 4, the following message is
   sent in F7:

    PUBLISH sip:collector@example.org SIP/2.0
    Via: SIP/2.0/UDP pc22.example.org;branch=z9hG4bK3343d7
    Max-Forwards: 70
    To: &lt;sip:collector@example.org&gt;
    From: Alice &lt;sip:alice@example.org&gt;;tag=a3343df32
    Call-ID: 1890463548
    CSeq: 4321 PUBLISH
    Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER,
    SUBSCRIBE, NOTIFY
    Event: vq-rtcpxr
    Accept: application/sdp, message/sipfrag
    Content-Type: application/vq-rtcpxr
    Content-Length: ...

    VQAlertReport: Type=RLQ Severity=Warning Dir=local
    Metrics:
    Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z
    SessionDesc:PT=0 PD=PCMU SR=8000 FD=20 FO=160 FPP=1 PPS=50
                    PLC=3 SSUP=on
    CallID: 6dg37f1890463
    FromID: Alice &lt;sip:alice@example.org&gt;
    ToID: Bill &lt;sip:bill@example.org&gt;
    OrigID: Alice &lt;sip:alice@example.org&gt;
    LocalAddr: IP=10.10.1.100 PORT=5000 SSRC=1a3b5c7d
    LocalMAC: 00:1f:5b:cc:21:0f
    RemoteAddr:IP=11.1.1.150 PORT=5002 SSRC=0x2468abcd
    RemoteMAC: 00:26:08:8e:95:02
    JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120
    PacketLoss:NLR=5.0 JDR=2.0
    BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16
    Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10
    Signal:SL=-12 NL=-30 RERL=55
    QualityEst:RLQ=60 RCQ=55 EXTR=90 MOSLQ=2.4 MOSCQ=2.3
       QoEEstAlg=P.564

    RemoteMetrics:
    Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z
    SessionDesc:PT=0 PD=PCMU SR=8000 FD=20 FO=160 FPP=1 PPS=50
                    PLC=3 SSUP=on
    CallID: 6dg37f1890463
    LocalAddr:IP=11.1.1.150 PORT=5002 SSRC=9f7e5d3c
    RemoteAddr:IP=10.10.1.100 PORT=5000 SSRC=2a4b6c8d
    JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120
    PacketLoss:NLR=5.0 JDR=2.0
    BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16
    Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10
    Signal:SL=-23 NL=-60 RERL=55
    QualityEst:RLQ=90 RCQ=85 EXTRI=90 MOSLQ=4.2 MOSCQ=4.3
       QoEEstAlg=P.564
    DialogID:1890463548@alice.example.org;to-tag=8472761;
            from-tag=9123dh3111
</pre></div>
<a name="anchor77"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.8"></a><h3>4.8.&nbsp;
Configuration Dataset for vq-rtcpxr Events</h3>

<p> 
It is the suggestion of the authors that the SIP configuration    framework [8] be used to establish the necessary parameters for    usage of vq-rtcpxr events.  A dataset for this purpose should be    designed and documented in a separate draft upon completion of     the framework.

</p>
<a name="anchor78"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>  
This document registers a new SIP Event Package and a new MIME type. 

</p>
<a name="anchor79"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
SIP Event Package Registration</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   Package name: vq-rtcpx
   Type: package
   Contact: Amy Pendleton &lt;aspen@telchemy.com&gt;
   Published Specification: This document
</pre></div>
<a name="anchor80"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
application/vq-rtcp-xr MIME Registration</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
MIME media type name: application
MIME subtype name: vq-rtcpxr
Mandatory parameters: none
Optional parameters: none
Encoding considerations: 7bit
Security considerations: See next section.
Interoperability considerations: none.
Published specification: This document.

Applications which use this media type: This document type is
being used in notifications of VoIP quality reports.

Additional Information:

Magic Number: None
File Extension: None
Macintosh file type code: "TEXT"

   Personal and email address for further information: Amy Pendleton
   &lt;aspen@telchemy.com&gt;

   Intended usage: COMMON

   Author/Change controller: The IETF.
</pre></div>
<a name="anchor81"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>
RTCP reports can contain sensitive information since they can provide    information about the nature and duration of a session established    between two or more endpoints.  As a result, any third party wishing    to obtain this information SHOULD be properly authenticated by the    SIP UA using standard SIP mechanisms and according to the  recommendations in [5]. Additionally the event content MAY be    encrypted to ensure confidentiality; the mechanisms for providing    confidentiality are detailed in [2].

</p>
<a name="anchor82"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Contributors</h3>

<p>
The authors would like to thank Rajesh Kumar, Dave Oran, Tom    Redman, Shane Holthaus and Jack Ford for their comments and input.

</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[1]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[2]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3550">[3]</a></td>
<td class="author-text">Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>,&rdquo; STD&nbsp;64, RFC&nbsp;3550, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3550.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc3550.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc3550.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3611">[4]</a></td>
<td class="author-text">Friedman, T., Caceres, R., and A. Clark, &ldquo;<a href="http://tools.ietf.org/html/rfc3611">RTP Control Protocol Extended Reports (RTCP XR)</a>,&rdquo; RFC&nbsp;3611, November&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3611.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3265">[5]</a></td>
<td class="author-text">Roach, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3265">Session Initiation Protocol (SIP)-Specific Event Notification</a>,&rdquo; RFC&nbsp;3265, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3265.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[6]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5234.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3339">[7]</a></td>
<td class="author-text"><a href="mailto:GK@ACM.ORG">Klyne, G., Ed.</a> and <a href="mailto:chris.newman@sun.com">C. Newman</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3339">Date and Time on the Internet: Timestamps</a>,&rdquo; RFC&nbsp;3339, July&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3339.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3339.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3339.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3903">[8]</a></td>
<td class="author-text">Niemi, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3903">Session Initiation Protocol (SIP) Extension for Event State Publication</a>,&rdquo; RFC&nbsp;3903, October&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3903.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sipping-config-framework">[9]</a></td>
<td class="author-text">Channabasappa, S., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipping-config-framework-17.txt">A Framework for Session Initiation Protocol User Agent Profile Delivery</a>,&rdquo; draft-ietf-sipping-config-framework-17 (work in progress), February&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipping-config-framework-17.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5389">[10]</a></td>
<td class="author-text">Rosenberg, J., Mahy, R., Matthews, P., and D. Wing, &ldquo;<a href="http://tools.ietf.org/html/rfc5389">Session Traversal Utilities for NAT (STUN)</a>,&rdquo; RFC&nbsp;5389, October&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5389.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="G.1020">[11]</a></td>
<td class="author-text">ITU-T G.1020, &ldquo;Performance parameter definitions for quality of speech and other voiceband applications utilizing IP networks..&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="P.564">[12]</a></td>
<td class="author-text">ITU-T P.564, &ldquo;Conformance testing for voice over IP transmission quality assessment models..&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="G.107">[13]</a></td>
<td class="author-text">ITU-T G.107, &ldquo;The E-model, a computational model for use in transmission planning..&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2679">[14]</a></td>
<td class="author-text"><a href="mailto:almes@advanced.org">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org">Kalidindi, S.</a>, and <a href="mailto:matt@advanced.org">M. Zekauskas</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2679">A One-way Delay Metric for IPPM</a>,&rdquo; RFC&nbsp;2679, September&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2679.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC5117">[15]</a></td>
<td class="author-text">Westerlund, M. and S. Wenger, &ldquo;<a href="http://tools.ietf.org/html/rfc5117">RTP Topologies</a>,&rdquo; RFC&nbsp;5117, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5117.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sipping-overload-design">[16]</a></td>
<td class="author-text">Hilt, V., Noel, E., Shen, C., and A. Abdelal, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipping-overload-design-02.txt">Design Considerations for Session Initiation Protocol (SIP) Overload Control</a>,&rdquo; draft-ietf-sipping-overload-design-02 (work in progress), July&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipping-overload-design-02.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Amy Pendleton</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Telchemy Incorporated</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:aspen@telchemy.com">aspen@telchemy.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alan Clark</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Telchemy Incorporated</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alan.d.clark@telchemy.com">alan.d.clark@telchemy.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alan Johnston</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Avaya</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">St. Louis, MO  63124</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alan.b.johnston@gmail.com">alan.b.johnston@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Henry Sinnreich</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Unaffiliated</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:henry.sinnreich@gmail.com">henry.sinnreich@gmail.com</a></td></tr>
</table>
</body></html>
