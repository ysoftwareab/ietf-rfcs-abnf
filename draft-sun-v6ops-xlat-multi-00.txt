


Network Working Group                                             Q. Sun
Internet-Draft                                                  Z. Zhang
Intended status: Standards Track                           China Telecom
Expires: January 5, 2015                                         Q. Zhao
                                                                    BUPT
                                                            July 4, 2014


                   Running Multiple PLATs in 464XLAT
                   draft-sun-v6ops-xlat-multi-00

Abstract

   The IPv6 transition has been an ongoing process throughout the world
   due to the exhaustion of the IPv4 address space.  The
   464XLAT[RFC6877] provides a solution with limited IPv4 connectivity
   across an IPv6-only network, and the android system (version 2.3 and
   above) has already implemented the 464XLAT[RFC6877] and the the
   Prefix discovery solution [RFC7050].  However, the current 464XLAT
   architecture can only deal with the scenario with single PLAT in the
   network.  When operator deploys multiple PLATs with different Pref64
   prefixes, 464XLAT cannot cope with multiple prefixes for different
   destination addresses.

   This document describes the architecture with multiple PLATs and also
   the deployment considerations.

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 5, 2015.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.



Sun, et al.              Expires January 5, 2015                [Page 1]

Internet-Draft      Running Multiple PLATs in 464XLAT          July 2014


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 3
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . . . 3
   3.  Requirement of Multiple PLATs in 464XLAT  . . . . . . . . . . . 3
   4.  Overall Architecture of multiPLATs in 464XLAT . . . . . . . . . 4
     4.1.  Prefix Management Server  . . . . . . . . . . . . . . . . . 4
     4.2.  Enhanced CLAT for multiPLAT . . . . . . . . . . . . . . . . 5
   5.  Deployment Considerations . . . . . . . . . . . . . . . . . . . 6
     5.1.  Prefix Management . . . . . . . . . . . . . . . . . . . . . 6
     5.2.  DNS64 Consistency . . . . . . . . . . . . . . . . . . . . . 6
   6.  Security Considerations . . . . . . . . . . . . . . . . . . . . 6
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . . . 6
   8.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . 6
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . . . 7
     9.1.  Normative References  . . . . . . . . . . . . . . . . . . . 7
     9.2.  Informative References  . . . . . . . . . . . . . . . . . . 7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . . . 7






















Sun, et al.              Expires January 5, 2015                [Page 2]

Internet-Draft      Running Multiple PLATs in 464XLAT          July 2014


1.  Introduction

   The exhaustion of the IPv4 address space has been a practical problem
   that providers are facing today.  Network address migration to IPv6
   is ongoing or upcoming throughout the world.  The 464XLAT
   architecture uses IPv4/IPv6 translation standardized in [RFC6145] and
   [RFC6146].  It encourages the IPv6 transition by making IPv4 service
   reachable across IPv6-only networks and providing IPv6 and IPv4
   connectivity to single-stack IPv4 or IPv6 servers and peers.  The
   android system (version 4.3 and above) has already implemented the
   464XLAT[RFC6877] and the Prefix discovery method in [RFC7050].

   However, as described in section 6.3 [RFC6877], the CLAT will use the
   PLAT-side translation IPv6 prefix as the destination of all
   translation packets that require stageful translation to the IPv4
   Internet.  The Prefix Discovery method [RFC7050] cannot deal with the
   scenario when different PLATs are using with different Pref64
   prefixes.

   This document describes the 464XLAT architecture with multiple PLATs
   by combining with the existing solutions.


2.  Terminology

   This document use the terminologies defined in RFC6877 and RFC7050.


3.  Requirement of Multiple PLATs in 464XLAT

   As defined in RFC6147 [RFC6147], it allows DNS64 implementations to
   be able to map specific IPv4 address ranges to separate Pref64::/n
   prefixes.  That allows handling of special use IPv4 addresses
   [RFC6890].  Therefore, operator may deploy multiple NAT64s (PLATs in
   464XLAT) for different ranges of IPv4 servers.  For example, one PLAT
   "A" is used when accessing IPv4-only servers in the data center, and
   a different PLAT "B" is used for Internet access.  These two PLATs
   may have implmented different ALG types and different QoS treatment.

                      PLAT "A" ----- IPv4-only servers in a data center
                     /
   IPv6-only node---<
                     \
                      PLAT "B" ----- IPv4 Internet

                      Figure 1: Use case of MultiPLAT

   In this use case, one end user would use multiple Pref64 prefixes for



Sun, et al.              Expires January 5, 2015                [Page 3]

Internet-Draft      Running Multiple PLATs in 464XLAT          July 2014


   different destinations.

   Another use case to deploy multiple PLATs is for load balancing.  For
   example, PLAT "A" would serve approximately half of the subscribers
   in one network, while PLAT "B" would serve the other half.

                      PLAT "A" ----- half of the subscribers
                     /
   IPv6-only node---<
                     \
                      PLAT "B" ----- the other half of the subscribers

                      Figure 2: Use case of MultiPLAT

   In this use case, one end user would still get one Pref64 for all
   destinations, but it still needs a management system to allocate
   different Pref64 prefixes for different users.


4.  Overall Architecture of multiPLATs in 464XLAT

   The overall architecture of multiPLATs in 464XLAT is depicted as
   following.  It consists of a Prefix Management Server, enhanced CLAT,
   and multipe PLATs.  The PLAT in this architecture has no difference
   between 464XLAT in RFC[RFC6877].

                      +-----------------+
                 +----|Pref Mangt Server|
                 |    +-----------------+
                 |                   +------+
   +------+      |      +-----+     /        \
   | CLAT |------+------+PLAT1+----| network1 |
   +------+      |      +-----+     \        /
                 |                   +------+
                 |                   +------+
                 |      +-----+     /        \
                 +------+PLAT2+----| network2 |
                        +-----+     \        /
                                     +------+

                      Figure 1: Architecture of IPTM

4.1.  Prefix Management Server

   The Prefix Management Server includes the following modulars as in
   Figure2.





Sun, et al.              Expires January 5, 2015                [Page 4]

Internet-Draft      Running Multiple PLATs in 464XLAT          July 2014


   +---------------------------------------------+
   |   +---------------+    +-----------------+  |
   |   |Pref64 Magt    |    |v4addrRange Magt |  |
   |   +---------------+    +-----------------+  |
   |   +---------------+    +-----------------+  |
   |   |IPv6Pref Magt  |    | Prefix Discovery|  |
   |   +---------------+    +-----------------+  |
   |         +----------------------+            |
   |         |Policy Configuration  |            |
   |         +----------------------+            |
   +---------------------------------------------+

         Figure 2: Prefix Management Server Implementation Modular

   It would be configured with the policy to allocate multiple Pref64s.
   There are be different policies to apply.  For example, it may map
   specific IPv4 destination address ranges to separate Pref64 prefixes,
   or map specific IPv6 source address ranges to separate Pref64
   prefixes, or map both destination IPv4 address and source IPv6
   address to Pref64 prefixes.  The policy in Prefix Management Server
   should be consistent with PLAT deployment policy.

   The prefix discovery method should be able to cope with multiple
   Pref64 prefixes.  It may implement PCP based prefix discovery
   method[RFC7225] to allcate multiple Pref64 prefixes.

4.2.  Enhanced CLAT for multiPLAT

   In addition to existing CLAT, the enhanced CLAT for multiPLAT should
   also implement the following modulars:

   +---------------------------------------------+
   |   +---------------+    +-----------------+  |
   |   |Pref64 Magt    |    |v4addrRange Magt |  |
   |   +---------------+    +-----------------+  |
   |           +-----------------+               |
   |           | Prefix Discovery|               |
   |           +-----------------+               |
   +---------------------------------------------+

                          Figure 3: Enhanced CLAT

   The prefix discovery method should be consistent with the one in the
   Prefix Management Server.  The Prefix Management modular will extract
   the Pref64 from the prefix discovery procedure multiple Pref64
   prefixes and the v4addrRange Management modular will store the
   corresponding IPv4 address ranges.  The prefix discovery method will
   get multiple Pref64 prefixes after the authentication and IPv6



Sun, et al.              Expires January 5, 2015                [Page 5]

Internet-Draft      Running Multiple PLATs in 464XLAT          July 2014


   address allcation process.  Then, the CLAT will use the prefix as the
   destination for specific IPv4 address ranges.

   The translation and DNS modular is the same with the traditional XLAT
   in [RFC6877].


5.  Deployment Considerations

5.1.  Prefix Management

   The prefix management modular is important for multiPLATs 464XLAT.
   However, since it should compare the destination address range with
   each packet in CLAT, it might have effect on the performance
   efficiency in the client.  So, operators should limit the number of
   address ranges, and aggregate the addresses into a larger address
   range.

   Besides, there might also be a maximum configuration limit in CLAT on
   the number of Pref64 prefixes and the number of address ranges.  When
   the number of address ranges exceeds the limit, the CLAT may ignore
   the following Pref64 prefixes and use a default prefix for the rest
   of destinations.  However, this may cause issues for unexpected
   results.

5.2.  DNS64 Consistency

   464XLAT does not require DNS64 [RFC6147] when IPv4 host sends IPv4
   packets to reach IPv4 servers.  But 464XLAT networks may use DNS64 to
   enable single stateful translation [RFC6146].  In this case, the
   configuration policy in DNS64 should be consistent with Prefix
   Management Server.  For example, how to map different IPv4 address
   ranges to Pref64 prefixes and IPv6 prefixes to Pref prefixes.


6.  Security Considerations

   TO BE COMPLETED


7.  IANA Considerations

   This document has no IANA actions.


8.  Acknowledgements

   The authors would like to thank the following individuals who have



Sun, et al.              Expires January 5, 2015                [Page 6]

Internet-Draft      Running Multiple PLATs in 464XLAT          July 2014


   participated in the drafting, review, and discussion of this memo: TO
   BE COMPLETED


9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

9.2.  Informative References

   [RFC5571]  Storer, B., Pignataro, C., Dos Santos, M., Stevant, B.,
              Toutain, L., and J. Tremblay, "Softwire Hub and Spoke
              Deployment Framework with Layer Two Tunneling Protocol
              Version 2 (L2TPv2)", RFC 5571, June 2009.

   [RFC6333]  Durand, A., Droms, R., Woodyatt, J., and Y. Lee, "Dual-
              Stack Lite Broadband Deployments Following IPv4
              Exhaustion", RFC 6333, August 2011.


Authors' Addresses

   Qiong Sun
   China Telecom
   No.118 Xizhimennei street, Xicheng District
   Beijing  100035
   P.R. China

   Email: sunqiong@ctbri.com.cn


   Zhirong Zhang
   China Telecom
   No.118 Xizhimennei street, Xicheng District
   Beijing  100035
   P.R. China

   Email: zhangzhr@ctbri.com.cn










Sun, et al.              Expires January 5, 2015                [Page 7]

Internet-Draft      Running Multiple PLATs in 464XLAT          July 2014


   Qin Zhao
   BUPT
   No.118 Xizhimennei street, Xicheng District
   Beijing  100035
   P.R. China

   Email: zhaoq@bupt.edu.cn












































Sun, et al.              Expires January 5, 2015                [Page 8]

