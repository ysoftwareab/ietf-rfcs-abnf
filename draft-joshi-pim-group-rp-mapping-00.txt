


PIM Working Group                                               B. Joshi
Internet-Draft                                 Infosys Technologies Ltd.
Expires: August 16, 2008                                      A. Kessler
                                                     Cisco Systems, Inc.
                                                             D. McWalter
                                                     Data Connection Ltd
                                                       February 13, 2008


                        PIM Group-to-RP Mapping
                draft-joshi-pim-group-rp-mapping-00.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 16, 2008.

Copyright Notice

   Copyright (C) The IETF Trust (2008).

Abstract

   Each PIM-SM router in a PIM Domain which supports ASM maintains
   Group-to-RP mappings which are used to identify a RP for a specific
   multicast group.  PIM-SM has defined an algorithm to choose a RP from
   the Group-to-RP mappings learned using various mechanisms.  This
   algorithm does not allow administrator to override a specific Group-



Joshi, et al.            Expires August 16, 2008                [Page 1]

Internet-Draft           PIM Group-to-RP Mapping           February 2008


   to-RP mapping with the static Group-to-RP mapping which an
   administrator would want to use.  This algorithm also does not
   consider the PIM mode and the mechanism through which a Group-to-RP
   mapping was learned.

   This document first explains the requirements to extend the
   Group-to-RP mapping algorithm and then proposes the new algorithm.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   3.  Existing algorithm . . . . . . . . . . . . . . . . . . . . . .  5
   4.  Assumptions  . . . . . . . . . . . . . . . . . . . . . . . . .  6
   5.  Proposed algorithm . . . . . . . . . . . . . . . . . . . . . .  7
   6.  Deprecation of MIB Objects . . . . . . . . . . . . . . . . . .  9
   7.  Security Consideration . . . . . . . . . . . . . . . . . . . . 10
   8.  IANA Consideration . . . . . . . . . . . . . . . . . . . . . . 11
   9.  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . 12
   10. Normative References . . . . . . . . . . . . . . . . . . . . . 12
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 13
   Intellectual Property and Copyright Statements . . . . . . . . . . 14




























Joshi, et al.            Expires August 16, 2008                [Page 2]

Internet-Draft           PIM Group-to-RP Mapping           February 2008


1.  Introduction

   Multiple mechanisms exist today to create and distribute Group-to-RP
   mappings.  Each PIM-SM router may learn Group-to-RP mappings through
   various mechanisms.

   It is critical that each router select the same 'RP' for a specific
   multicast group address.  This is even true in the case of Anycast RP
   for redundancy.  Routers should select the same RP address to use for
   a given group address.  This RP address may correspond to a different
   physical router but it is one logical RP address and must be
   consistent across the PIM domain.  This is usually achieved by using
   the same algorithm to select the RP in all the PIM routers in a
   domain.

   PIM-SM[1] has defined an algorithm to select a 'RP' for a given
   multicast group address but it is not flexible enough for an
   administrator to apply various policies.  Please refer to section 3
   for more details.

   PIM-STD-MIB [2] has defined an algorithm that allows administrators
   to override Group-to-RP mappings with static configuration.  But this
   algorithm is not completely deterministic, because it includes an
   implementation-specific 'precedence' value.



























Joshi, et al.            Expires August 16, 2008                [Page 3]

Internet-Draft           PIM Group-to-RP Mapping           February 2008


2.  Terminology

   In this document, the key words "MUST", "MUST NOT", "REQUIRED",
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
   and "OPTIONAL" are to be interpreted as described in RFC 2119 [1] and
   indicate requirement levels for compliant PIM-PING implementations.
   This document also uses following terms:

   o  PIM Mode

   PIM Mode is the mode of operation a particular multicast group is
   used for.  Wherever this term in used in this document, it refers to
   either Sparse Mode or BIDIR Mode.






































Joshi, et al.            Expires August 16, 2008                [Page 4]

Internet-Draft           PIM Group-to-RP Mapping           February 2008


3.  Existing algorithm

   Existing algorithm defined in PIM-SM (Section 4.7.1 in [1]) does not
   consider following constraints:

   o  It does not consider the origin of a Group-to-RP mapping and
      therefore will treat all of them equally.

   o  It does not provide the flexibility that a specific statically
      created Group-to-RP mapping can override any dynamically learned
      mappings.

   o  It does not provide the flexibility to give higher priority to a
      specific PIM mode.  For example, an entry learned for PIM-BIDIR
      mode is treated with same priority as an entry learned for PIM-SM.




































Joshi, et al.            Expires August 16, 2008                [Page 5]

Internet-Draft           PIM Group-to-RP Mapping           February 2008


4.  Assumptions

   We have made following assumptions in defining this algorithm:

   o  A router MAY use hash function on Group-to-RP mappings learned
      through BSR mechanism [3].  This means that only a subset of
      Group-to-RP mappings will be available which are learned through
      BSR mechanism.

   o  A static Group-to-RP mapping entry can be configured with
      override-dynamic flag.  If this flag is set, the static
      Group-to-RP mapping entry will be preferred instead of dynamically
      learned entries.

   o  A Group-to-RP mapping can be learned from various mechanisms.  We
      assume that following list is in the decreasing preferences of
      these mechanism:

      *  Bootstrap Router Mechanism [PIM-BSR]

      *  Auto-RP [Cisco]

      *  Embedded Group-to-RP mappings

      *  Static configuration.

      *  Other mapping method

   o  A Group-to-RP mapping learned for PIM-BIDIR mode is preferred to
      an entry learned for PIM-SM mode.





















Joshi, et al.            Expires August 16, 2008                [Page 6]

Internet-Draft           PIM Group-to-RP Mapping           February 2008


5.  Proposed algorithm

   We propose following algorithm here which addresses the above
   mentioned short comings in the existing mechanism:

   1.  From the set of all Group-to-RP mapping entries, the subset whose
       group prefix contains the multicast group that is being looked
       up, are selected.

   2.  If there are no entries available, then the Group-to-RP mapping
       is undefined.

   3.  If there are multiple entries available, a subset of those Group-
       to-RP mapping is selected that are learned using 'static'
       configuration and are configured with 'override-dynamic' flag.

       *  If there is only one entry available then that is selected as
          Group-to-RP mapping.

       *  If there are multiple entries available, we continue with the
          algorithm with this smaller set of Group-to-RP Mappings

   4.  A longest prefix match is performed on the subset of Group-to-RP
       Mappings.

       *  If there is only one entry available then that is selected as
          Group-to-RP mapping.

       *  If there are multiple entries available, we continue with the
          algorithm with this smaller set of Group-to-RP Mappings

   5.  From the remaining set of Group-to-RP Mappings we select the
       subset of entries based on the preference for the PIM modes which
       they are assigned.  A Group-to-RP mapping entry with PIM Mode
       'BIDIR' will be preferred to an entry with PIM Mode 'PIM-SM'

       *  If there is only one entry available then that is selected as
          Group-to-RP mapping.

       *  If there are multiple entries available, we continue with the
          algorithm with this smaller set of Group-to-RP Mappings

   6.  From the remaining set of Group-to-RP Mappings we select the
       subset of the entries based on the origin.  Origin preference
       will be 'bsr', 'auto-rp', 'embedded', 'static' and 'other'.

       *  If there is only one entry available then that is selected as
          Group-to-RP mapping.



Joshi, et al.            Expires August 16, 2008                [Page 7]

Internet-Draft           PIM Group-to-RP Mapping           February 2008


       *  If there are multiple entries available, we continue with the
          algorithm with this smaller set of Group-to-RP Mappings

   7.  From the remaining set of Group-to-RP Mappings we run PIM hash
       function as suggested by PIM-SM [1].

       *  If there is only one entry available then that is selected as
          Group-to-RP mapping.

       *  If there are multiple entries available, we continue with the
          algorithm with this smaller set of Group-to-RP Mappings

   8.  From the remaining set of Group-to-RP Mappings we will select the
       RP with the highest IP address.  This will serve as a final
       tiebreaker.




































Joshi, et al.            Expires August 16, 2008                [Page 8]

Internet-Draft           PIM Group-to-RP Mapping           February 2008


6.  Deprecation of MIB Objects

   Group-to-RP mapping algorithm defined in PIM-STD-MIB [2] does not
   specify the usage of 'pimGroupMappingPrecedence' and
   'pimStaticRPPrecedence' objects in 'pimGroupMappingTable' table
   clearly.  With the newly proposed algorithm in this document, these
   MIB objects would not be required.  So we propose to deprecate these
   MIB objects from PIM-STD-MIB.











































Joshi, et al.            Expires August 16, 2008                [Page 9]

Internet-Draft           PIM Group-to-RP Mapping           February 2008


7.  Security Consideration

   This document does not suggest any protocol specific functionality so
   there is no security related consideration.















































Joshi, et al.            Expires August 16, 2008               [Page 10]

Internet-Draft           PIM Group-to-RP Mapping           February 2008


8.  IANA Consideration

   This draft does not create any namespace for IANA to manage.
















































Joshi, et al.            Expires August 16, 2008               [Page 11]

Internet-Draft           PIM Group-to-RP Mapping           February 2008


9.  Acknowledgments

   This draft is created based on the discussion occurred during the
   PIM-STD-MIB [2] work.  Many thanks to Stig Vennas for providing
   useful comments during that discussion.

10.  Normative References

   [1]  Fenner, B., Handley, M., Holbrook, H., and I. Kouvelas,
        "Protocol Independent Multicast - Sparse Mode (PIM-SM): Protocol
        Specification (Revised)", RFC 4601, August 2006.

   [2]  Sivaramu, R., Lingard, J., McWalter, D., Joshi, B., and A.
        Kessler, "Protocol Independent Multicast MIB", RFC 5060,
        January 2008.

   [3]  Bhaskar, N., Gall, A., Lingard, J., and S. Venaas, "Bootstrap
        Router (BSR) Mechanism for Protocol Independent Multicast
        (PIM)", RFC 5059, January 2008.
































Joshi, et al.            Expires August 16, 2008               [Page 12]

Internet-Draft           PIM Group-to-RP Mapping           February 2008


Authors' Addresses

   Bharat Joshi
   Infosys Technologies Ltd.
   44 Electronics City, Hosur Road
   Bangalore  560 100
   India

   Email: bharat_joshi@infosys.com
   URI:   http://www.infosys.com/


   Andy Kessler
   Cisco Systems, Inc.
   425 E. Tasman Drive
   San Jose, CA 95134
   USA

   Email: kessler@cisco.com
   URI:   http://www.cisco.com/


   David McWalter
   Data Connection Ltd
   100 Church Street
   Enfield  EN2 6BQ
   UK

   Email: dmcw@dataconnection.com






















Joshi, et al.            Expires August 16, 2008               [Page 13]

Internet-Draft           PIM Group-to-RP Mapping           February 2008


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

   Copyright (C) The IETF Trust (2008).  This document is subject to the
   rights, licenses and restrictions contained in BCP 78, and except as
   set forth therein, the authors retain all their rights.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.




Joshi, et al.            Expires August 16, 2008               [Page 14]

