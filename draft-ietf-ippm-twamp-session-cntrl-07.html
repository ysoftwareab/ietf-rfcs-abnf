<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Individual Session Control Feature
    for TWAMP</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Individual Session Control Feature
    for TWAMP">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">A. Morton</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">AT&amp;T Labs</td></tr>
<tr><td class="header">Updates: <a href='http://tools.ietf.org/html/rfc5357'>5357</a> (if&nbsp;approved)</td><td class="header">M. Chiba</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Cisco Systems</td></tr>
<tr><td class="header">Expires: October 10, 2010</td><td class="header">April 08, 2010</td></tr>
</table></td></tr></table>
<h1><br />Individual Session Control Feature
    for TWAMP<br />draft-ietf-ippm-twamp-session-cntrl-07</h1>

<h3>Abstract</h3>

<p>The IETF has completed its work on the core specification of TWAMP -
      the Two-Way Active Measurement Protocol. This memo describes an OPTIONAL
      feature for TWAMP, that gives the controlling host the ability to start
      and stop one or more individual test sessions using Session Identifiers.
      The base capability of the TWAMP protocol requires all test sessions
      previously requested and accepted to start and stop at the same
      time.
</p>
<h3>Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on October 10, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Purpose and Scope<br />
<a href="#anchor3">3.</a>&nbsp;
TWAMP Control Extensions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
Connection Setup with Individual Session Control<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.2.</a>&nbsp;
Start-N-Sessions Command with Individual Session Control<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.3.</a>&nbsp;
Start-N-Ack Command with Individual Session Control<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.4.</a>&nbsp;
Stop-N-Sessions Command with Individual Session Control<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.5.</a>&nbsp;
Stop-N-Ack Command with Individual Session Control<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.6.</a>&nbsp;
SERVWAIT Timeout Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.7.</a>&nbsp;
Additional considerations<br />
<a href="#anchor11">4.</a>&nbsp;
TWAMP Test with Individual Session Control<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">4.1.</a>&nbsp;
Sender Behavior<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">4.2.</a>&nbsp;
Reflector Behavior<br />
<a href="#Security">5.</a>&nbsp;
Security Considerations<br />
<a href="#IANA">6.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">6.1.</a>&nbsp;
Registry Specification<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">6.2.</a>&nbsp;
Registry Management<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">6.3.</a>&nbsp;
Experimental Numbers<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">6.4.</a>&nbsp;
Registry Contents<br />
<a href="#Acknowledgements">7.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The IETF has completed its work on the core specification of TWAMP -
      the Two-Way Active Measurement Protocol <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a>.
      TWAMP is an extension of the One-way Active Measurement Protocol, OWAMP
      <a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a>. The TWAMP specification gathered wide
      review as it approached completion, and the by-products were several
      recommendations for new features in TWAMP. There are a growing number of
      TWAMP implementations at present, and wide-spread usage is expected.
      There are even devices that are designed to test implementations for
      protocol compliance.
</p>
<p>This memo describes an OPTIONAL feature for TWAMP. <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a> TWAMP (and OWAMP) start all previously
      requested and accepted test sessions at once. This feature allows the
      Control-Client to control individual test sessions on the basis of their
      Session Identifier (SID). This feature permits a short duration TWAMP
      test to start (and/or stop) during a longer test. This feature permits a
      specific diagnostic test to begin if intermediate results indicate that
      the test is warranted, for example.
</p>
<p>This feature requires a Mode bit position assignment and the
      assignment of two new TWAMP command numbers (for the augmented Start and
      Stop commands). This feature also specifies a new Stop-ACK Server
      response, to complete the symmetry of the session stopping process in
      the same way as the Start-ACK response.
</p>
<p>The Individual Session Control feature gives the Control-Client new
      flexibility to manage any number of test sessions once they are
      established. However, <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a> test sessions are
      established in serial order and the total establishment time grows with
      the number of sessions and the round-trip time. Therefore, implementers
      of this feature may also wish to implement the "Reflect Octets" feature,
      described in <a class='info' href='#I-D.ietf-ippm-twamp-reflect-octets'>[I&#8209;D.ietf&#8209;ippm&#8209;twamp&#8209;reflect&#8209;octets]<span> (</span><span class='info'>Morton, A. and L. Ciavattone, &ldquo;TWAMP Reflect Octets and Symmetrical Size Features,&rdquo; April&nbsp;2010.</span><span>)</span></a>,
      once it has been published as an RFC. This feature allows a
      Control-Client to distinguish between parallel Request-TW-Session
      commands, because a participating Server can return octets (e.g., the
      Control-Client's local index) in its reply to the request. Thus, the
      Reflect Octets feature supports the efficient establishment of many
      simultaneous test sessions which the Individual Session Control feature
      can then manage (start/stop).
</p>
<p>This memo is an update to the TWAMP core protocol specified in <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a>. Measurement systems are not required to
      implement the feature described in this memo to claim compliance with
      <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a>.
</p>
<p>Throughout this memo, the bits marked MBZ (Must Be Zero) MUST be set
      to zero by senders and MUST be ignored by receivers. Also, the HMAC
      (Hashed Message Authentication Code) MUST be calculated as defined in
      Section 3.2 of <a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a>.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Purpose and Scope</h3>

<p>The purpose of this memo is to describe an additional OPTIONAL
      function and feature for TWAMP <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a>.
</p>
<p>The scope of the memo is limited to specifications of the following
      features:
</p>
<p></p>
<ol class="text">
<li>Extension of the modes of operation through assignment of a new
          value in the Mode field to communicate feature capability and
          use,
</li>
<li>the definitions of augmented start session and stop session
          commands (with corresponding acknowledgements), and
</li>
<li>the definition of related procedures for TWAMP entities.
</li>
</ol><p>The motivation for this feature is the ability to start and
      stop individual test sessions at will, using a single TWAMP-control
      connection.
</p>
<p>When the Server and Control-Client have agreed to use the Individual
      Session Control mode during control connection setup, then the
      Control-Client, the Server, the Session-Sender, and the
      Session-Reflector MUST all conform to the requirements of that mode, as
      identified below. The original TWAMP-Control Start and Stop commands
      MUST NOT be used.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
TWAMP Control Extensions</h3>

<p>TWAMP-Control protocol is a derivative of the OWAMP-Control protocol,
      and provides two-way measurement capability. TWAMP <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a> uses the Modes Field to identify and select
      specific communication capabilities, and this field is a recognized
      extension mechanism. The following sections describe one such
      extension.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Connection Setup with Individual Session Control</h3>

<p>TWAMP-Control connection establishment follows the procedure
        defined in section 3.1 of <a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a> OWAMP. The
        Individual Session Control mode requires one new bit position (and
        value) to identify the ability of the Server/Session-Reflector to
        start and stop specific sessions (according to their Session
        Identifier, or SID). This new feature requires an additional TWAMP
        mode bit assignment as follows:
</p>
<p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>Value  Description             Reference/Explanation
0      Reserved
1      Unauthenticated         RFC4656, Section 3.1
2      Authenticated           RFC4656, Section 3.1
4      Encrypted               RFC4656, Section 3.1
8      Unauth. TEST protocol,  RFC5618, Section 3.1
       Auth. CONTROL
--------------------------------------------------------
zzz    Individual Session      this memo, bit position (Z)
       Control

</pre></div>
<p>
</p>

<p>In the original OWAMP mode field, setting bit positions 0, 1 or 2
        indicated the security mode of the Control protocol, and the Test
        protocol inherited the same mode (see section 4 of <a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a>). In the <a class='info' href='#RFC5618'>[RFC5618]<span> (</span><span class='info'>Morton, A. and K. Hedayat, &ldquo;Mixed Security Mode for the Two-Way Active Measurement Protocol (TWAMP),&rdquo; August&nbsp;2009.</span><span>)</span></a> memo,
        bit position (3) allows a different security mode in the Test protocol
        and uses the unauthenticated test packet format.
</p>
<p>If the Server sets the new bit position (bit position Z) in the
        Server Greeting message to indicate its capabilities, then the Server
        and Session-Reflector MUST comply with the requirements of this memo
        to control sessions on an individual basis if desired.
</p>
<p>If the Control-Client intends to control sessions on an individual
        basis (according to the requirements in this memo), it MUST set the
        mode bit (Z, corresponding to the new mode) in the Setup Response
        message. This means that:</p>
<ol class="text">
<li>The Control-Client and the Server MUST use the start and stop
            commands intended for individual session control and the
            corresponding acknowledgements, as defined in the sections that
            follow.
</li>
<li>The Control-Client and the Server MUST NOT use the start and
            stop commands (2 and 3) and the acknowledgement defined in <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a>.
</li>
</ol>

<p>The Control-Client MUST also set one mode bit to indicate the
        chosen security mode (currently bits 0, 1, 2, or 3), consistent with
        the modes offered by the Server. The Control-Client MAY also set Modes
        bit Z with other features and bit positions (such as the reflect
        octets feature).
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Start-N-Sessions Command with Individual Session Control</h3>

<p>Having
</p>
<p></p>
<ul class="text">
<li>initiated Individual Session Control mode in the Setup
            Response,
</li>
<li>requested one or more test sessions, and
</li>
<li>received affirmative Accept-Session response(s),
</li>
</ul><p>a TWAMP Client MAY start the execution of one or more test
        sessions by sending a Start-N-Sessions message to the Server (note
        that "N" indicates that this command is applicable to one or more
        sessions, and does not change with the number of sessions identified
        in the command).
</p>
<p>The format of the Start-N-Sessions message is as follows:
</p>
<p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|      7        |                                               |
+-+-+-+-+-+-+-+-+                                               +
|                        MBZ (11 octets)                        |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                     Number of Sessions                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|                                                               |
|                   First  SID (16 octets)                      |
|                                                               |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|                                                               |
.                remaining  SIDs (16 octets each)               .
.                                                               .
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|                                                               |
|                       HMAC (16 octets)                        |
|                                                               |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B</pre></div>
<p>
</p>

<p>The Command Number value of 7 indicates that this is a
        Start-N-Sessions command. The Control-Client MUST compose this
        command, and the Server MUST interpret this command, according to the
        field descriptions below.
</p>
<p>The Number of Sessions field indicates the count of sessions that
        this Start command applies to, and MUST be one or greater. The number
        of SID fields that follow MUST be equal to the value in the Number of
        Sessions field (otherwise, the command MUST NOT be affirmed with a
        zero Accept field in the Start-N-Ack response).
</p>
<p>All SID fields are constructed as defined in the last paragraph of
        OWAMP section 3.5 <a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a> (and referenced in
        TWAMP). Note that the SID is assigned by the Server during the session
        request exchange.
</p>
<p>The message is terminated with a single block HMAC, as illustrated
        above.
</p>
<p>The Server MUST respond with one or more Start-N-Ack messages
        (which SHOULD be sent as quickly as possible). Start-N-Ack messages
        SHALL have the format defined in the next session.
</p>
<p>When using Individual Session Control mode and its Start-N-Ack
        command as described in the next section, multiple Start-N-Sessions
        commands MAY be sent without waiting for acknowledgement, and the
        Start-N-sessions commands MAY arrive in any order.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Start-N-Ack Command with Individual Session Control</h3>

<p>The Server responds to the Start-N-Sessions command (for one or
        more specific sessions referenced by their SIDs) with one or more
        Start-N-Ack commands with Accept fields corresponding to one or more
        of the SIDs. This allows for the possibility that a Server cannot
        immediately start one or more of the sessions referenced in a
        particular Start-N-Sessions command, but can start one or more of the
        sessions.
</p>
<p>The format of the message is as follows.
</p>
<p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|      8        |     Accept    |            MBZ                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        MBZ (8 octets)                         |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      Number of Sessions                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|                                                               |
|                   First  SID (16 octets)                      |
|                                                               |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|                                                               |
.                remaining  SIDs (16 octets each)               .
.                                                               .
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|                                                               |
|                       HMAC (16 octets)                        |
|                                                               |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre></div>
<p>
</p>

<p>The Command Number value of 8 indicates that this is a Start-N-Ack
        message. The Server MUST compose this command, and the Control-Client
        MUST interpret this command, according to the field descriptions
        below.
</p>
<p>The Accept Field values are defined in OWAMP section 3.3 <a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a>.
</p>
<p>The Number of Sessions field indicates the count of sessions that
        this Start-N-Ack command applies to, and MUST be one or greater. The
        number of SID fields that follow MUST be equal to the value in the
        Number of Sessions field.
</p>
<p>All SID fields are constructed as defined in the last paragraph of
        OWAMP section 3.5 <a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a> (and referenced in
        TWAMP). Note that the SID is assigned by the Server during the session
        request exchange.
</p>
<p>The message is terminated with a single block HMAC, as illustrated
        above.
</p>
<p>Note that the SIDs for all Sessions with the same 'Accept' code can
        be acknowledged using the same Start-N-Ack message.
</p>
<p>For example, say that the Server receives a Start-N-Sessions
        command for SIDs 1, 2, 3, and 4. The Server determines that the
        resources for SID=3 are temporarily unavailable. The Server responds
        with two Start-N-Ack commands with fields as follows:
</p>
<p>Accept = 0 Number of Sessions = 3 SIDs 1, 2, 4
</p>
<p>Accept = 5 Number of Sessions = 1 SID 3
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Stop-N-Sessions Command with Individual Session Control</h3>

<p>The Stop-N-Sessions command can only be issued by the
        Control-Client. The command MUST contain at least one SID.
</p>
<p>The TWAMP Stop-N-Sessions command for use in Individual Session
        Control mode is formatted as follows:
</p>
<p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|      9        |                                               |
+-+-+-+-+-+-+-+-+                                               +
|                        MBZ (11 octets)                        |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                     Number of Sessions                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|                                                               |
|                   First  SID (16 octets)                      |
|                                                               |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|                                                               |
.                remaining  SIDs (16 octets each)               .
.                                                               .
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|                                                               |
|                       HMAC (16 octets)                        |
|                                                               |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
</pre></div>
<p>
</p>

<p>The Command Number value of 9 indicates that this is a
        Stop-N-Sessions command. The Control-Client MUST compose this command,
        and the Server MUST interpret this command, according to the field
        descriptions below.
</p>
<p>The Number of sessions field indicates the count of sessions that
        this Stop-N-Sessions command applies to. The SID is as defined in
        OWAMP (and TWAMP) section 3.5 <a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a> and the
        value MUST be one or greater. The number of SID fields that follow
        MUST be equal to the value in the Number of Sessions field.
</p>
<p>The message is terminated with a single block HMAC, as illustrated
        above.
</p>
<p>The Server MUST respond with one or more Stop-N-Ack messages (which
        SHOULD be sent as quickly as possible). Stop-N-Ack messages SHALL have
        the format defined in the next session.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
Stop-N-Ack Command with Individual Session Control</h3>

<p>In response to the Stop-N-Sessions command (for one or more
        specific sessions referenced by their SIDs), the Server MUST reply
        with one or more Stop-N-Ack commands with Accept fields corresponding
        to one or more of the SIDs. This allows for the possibility that a
        Server cannot immediately stop one or more of the sessions referenced
        in a particular Stop-N-Sessions command, but can stop one or more of
        the sessions.
</p>
<p>The format for the Stop-N-Ack command is as follows:
</p>
<p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|      10       |     Accept    |            MBZ                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        MBZ (8 octets)                         |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      Number of Sessions                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|                                                               |
|                   First  SID (16 octets)                      |
|                                                               |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|                                                               |
.                remaining  SIDs (16 octets each)               .
.                                                               .
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+B
|                                                               |
|                       HMAC (16 octets)                        |
|                                                               |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre></div>
<p>
</p>

<p>The Command Number value of 10 indicates that this is a Stop-N-Ack
        message. The Server MUST compose this command, and the Control-Client
        MUST interpret this command, according to the field descriptions
        below.
</p>
<p>The Accept Field values are defined in OWAMP section 3.3 <a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a>.
</p>
<p>The Number of Sessions field indicates the count of sessions that
        this Stop-N-Ack command applies to, and MUST be one or greater. The
        number of SID fields that follow MUST be equal to the value in the
        Number of Sessions field.
</p>
<p>All SID fields are constructed as defined in the last paragraph of
        OWAMP section 3.5 <a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a> (and referenced in
        TWAMP). Note that the SID is assigned by the Server during the session
        request exchange.
</p>
<p>The message is terminated with a single block HMAC, as illustrated
        above.
</p>
<p>Note that the SIDs for all Sessions with the same 'Accept' code can
        be acknowledged using the same Stop-N-Ack message.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.6"></a><h3>3.6.&nbsp;
SERVWAIT Timeout Operation</h3>

<p>Section 3.1 of <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a> describes the
        operation of the optional SERVWAIT timer. In normal TWAMP operation,
        the Server suspends monitoring the SERVWAIT timer while test sessions
        are in progress. When the Individual Session Control feature is
        utilized, this suspension is extended to cover the time when ANY test
        session is in progress.
</p>
<p>Thus, the Server SHALL suspend monitoring control connection
        activity after receiving any Start-N-Sessions command, and after
        receiving a Stop-N-Sessions command for all corresponding SIDs (and no
        test sessions are in-progress), OR when REFWAIT expires on ALL test
        sessions initiated by a TWAMP-Control connection, then the SERVWAIT
        monitoring SHALL resume (as though a Stop-N-Sessions command had been
        received). An implementation which supports the SERVWAIT timeout
        option SHOULD also implement the REFWAIT timeout option.
</p>
<p>The diagram below illustrates the operation of timers SERVWAIT and
        REFWAIT.
</p>
<p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>  SERVWAIT                   REFWAIT                  SERVWAIT
+-+-+-+-+-+-+-+-+                                   +-+-+-+-+-+-+
(no sessions
 in-progress)
                 +-+-+-+-+-+-+-+-+-+-+-+
                         SID="1"

                                +-+-+-+-+
                                 SID="2"

                                  +-+-+-+-+-+-+-+-+
                                        SID="3"

&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Time &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Time &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Time &gt;&gt;&gt;&gt;&gt;
</pre></div>
<p>
</p>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.7"></a><h3>3.7.&nbsp;
Additional considerations</h3>

<p>The value of the Modes field sent by the Server (in the Server
        Greeting message) is the bit-wise OR of the mode values that it is
        willing to support during this session.
</p>
<p>With the publication of this feature, bit positions 0 through (Z=4)
        of the Modes 32-bit field are used. A Control-Client MAY ignore bit
        positions greater than 2 in the Modes Field, or it MAY support
        OPTIONAL features that are communicated in bit positions 3 and higher.
        (The unassigned bits are available for future protocol
        extensions.)
</p>
<p>Other ways in which TWAMP extends OWAMP are described in <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a>.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
TWAMP Test with Individual Session Control</h3>

<p>The TWAMP test protocol is similar to the OWAMP <a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a> test protocol with the exception that the
      Session-Reflector transmits test packets to the Session-Sender in
      response to each test packet it receives. TWAMP <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a> defines two different test packet formats, one
      for packets transmitted by the Session-Sender and one for packets
      transmitted by the Session-Reflector. As with OWAMP-Test protocol there
      are three security modes: unauthenticated, authenticated, and encrypted.
      Unauthenticated mode has one test packet format, while authenticated and
      encrypted modes use another (common) format.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Sender Behavior</h3>

<p>The individual session control feature requires that the sender
        MUST manage test sessions according to their SID. Otherwise, the
        sender behavior is as described in section 4.1 of <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a>.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Reflector Behavior</h3>

<p>The TWAMP Reflector follows the procedures and guidelines in
        section 4.2 of <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a>, with the following
        additional functions required by this feature:
</p>
<p></p>
<ul class="text">
<li>The Session-Reflector MUST manage all test sessions accepted
            according to their SID.
</li>
<li>Upon receipt of a TWAMP-Control Stop-N-Sessions command
            referencing a specific session/SID, the Session-Reflector MUST
            ignore TWAMP-Test packets (in the same session/SID) that arrive at
            the current time plus the Timeout (in the Request-TW-Session
            command and assuming subsequent acknowledgement). The
            Session-Reflector MUST NOT generate a test packet to the
            Session-Sender for packets that are ignored. (Note: The
            Request-TW-Session command includes sender address + port and
            receiver address + port, and this is usually sufficient to
            distinguish sessions.)
</li>
<li>If the REFWAIT timer is implemented, it SHOULD be enforced when
            any test session is in-progress (started and not stopped).
</li>
</ul>

<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>The security considerations that apply to any active measurement of
      live networks are relevant here as well. See the security considerations
      in<a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a> and <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a>.
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>This memo requests assignment of one mode bit position/value to the
      IANA registry for the TWAMP Mode field, and describes behavior when the
      new mode is used. This field is a recognized extension mechanism for
      TWAMP.
</p>
<p>This memo also requests assignment of four command numbers in the
      TWAMP-Control Command Number registry, and describes the use of the new
      commands. The command number field is a recognized extension mechanism
      for TWAMP.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Registry Specification</h3>

<p>IANA has created a TWAMP-Modes registry (as requested in <a class='info' href='#RFC5618'>[RFC5618]<span> (</span><span class='info'>Morton, A. and K. Hedayat, &ldquo;Mixed Security Mode for the Two-Way Active Measurement Protocol (TWAMP),&rdquo; August&nbsp;2009.</span><span>)</span></a>). TWAMP-Modes are specified in TWAMP Server
        Greeting messages and Set-up Response messages, as described in
        section 3.1 of <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a>, consistent with section
        3.1 of <a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a>, and extended by this memo.
        Modes are indicated by setting bits in the 32-bit Modes field that
        correspond to values in the Modes registry. For the TWAMP-Modes
        registry, we expect that new features will be assigned increasing
        registry values that correspond to single bit positions, unless there
        is a good reason to do otherwise (more complex encoding than single
        bit positions may be used in the future, to access the 2^32 value
        space).
</p>
<p>IANA has also created a TWAMP-Control Command Number registry.
        TWAMP-Control commands are specified by the first octet in
        TWAMP-Control messages as specified in section 3.5 of <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a>, and augmented by this memo. This registry
        may contain 256 possible values.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Registry Management</h3>

<p>Because the TWAMP-Control Command Number registry can contain only
        256 values and TWAMP-Modes can only contain thirty-two values, and
        because TWAMP is an IETF protocol, these registries must be updated
        only by "IETF Consensus" as specified in <a class='info' href='#RFC5226'>[RFC5226]<span> (</span><span class='info'>Narten, T. and H. Alvestrand, &ldquo;Guidelines for Writing an IANA Considerations Section in RFCs,&rdquo; May&nbsp;2008.</span><span>)</span></a> (an RFC documenting registry use that is
        approved by the IESG). Management of these registries is described in
        section 8.2 of <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a> and <a class='info' href='#RFC5618'>[RFC5618]<span> (</span><span class='info'>Morton, A. and K. Hedayat, &ldquo;Mixed Security Mode for the Two-Way Active Measurement Protocol (TWAMP),&rdquo; August&nbsp;2009.</span><span>)</span></a>.
</p>
<p>This memo proposes assignment of values 7, 8, 9 and 10 in the
        Command number Registry, and a Mode registry value (indicated by
        "zzz") corresponding to the next available bit position (indicated by
        "Z") in sections 3.1 and 3.7 above. Note that the "zzz" and "Z"
        strings should be replaced by IANA or the RFC Editor when values are
        assigned.
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Experimental Numbers</h3>

<p>One experimental value has been assigned in the TWAMP-Control
        Command Number registry.
</p>
<p>No additional experimental values are assigned in the TWAMP-Modes
        registry.
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
Registry Contents</h3>

<p>TWAMP-Control Command Number Registry
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>Value  Description             Semantics Definition
 0      Reserved
 1      Forbidden
 2      Start-Sessions          RFC4656, Section 3.7
 3      Stop-Sessions           RFC4656, Section 3.8
 4      Reserved
 5      Request-TW-Session      RFC5357, Section 3.5
 6      Experimentation         RFC5357, Section 8.3
------------------------------------------------------------------
 7      Start-N-Sessions        this memo, Section 3.2
 8      Start-N-Ack             this memo, Section 3.3
 9      Stop-N-Sessions         this memo, Section 3.4
10      Stop-N-Ack              this memo, Section 3.5

</pre></div>
<p>
</p>

<p>TWAMP-Modes Registry
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>Value  Description             Reference/Explanation
0      Reserved
1      Unauthenticated         RFC4656, Section 3.1
2      Authenticated           RFC4656, Section 3.1
4      Encrypted               RFC4656, Section 3.1
8      Unauth. TEST protocol,  RFC5618, Section 3.1
       Auth. CONTROL
--------------------------------------------------------
zzz    Individual Session       this memo, Section 3.1
       Control                  bit position (Z)</pre></div>
<p>
</p>The suggested values are:

<p>The next value corresponding to an unused bit is zzz=16, with
        Z=4.
</p>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgements</h3>

<p>The authors thank everyone who provided comments on this feature,
      especially Lars Eggert, Adrian Farrel, and Alexey Melnikov.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4656">[RFC4656]</a></td>
<td class="author-text">Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;<a href="http://tools.ietf.org/html/rfc4656">A One-way Active Measurement Protocol (OWAMP)</a>,&rdquo; RFC&nbsp;4656, September&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4656.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5226">[RFC5226]</a></td>
<td class="author-text">Narten, T. and H. Alvestrand, &ldquo;<a href="http://tools.ietf.org/html/rfc5226">Guidelines for Writing an IANA Considerations Section in RFCs</a>,&rdquo; BCP&nbsp;26, RFC&nbsp;5226, May&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5226.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5357">[RFC5357]</a></td>
<td class="author-text">Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;<a href="http://tools.ietf.org/html/rfc5357">A Two-Way Active Measurement Protocol (TWAMP)</a>,&rdquo; RFC&nbsp;5357, October&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5357.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5618">[RFC5618]</a></td>
<td class="author-text">Morton, A. and K. Hedayat, &ldquo;<a href="http://tools.ietf.org/html/rfc5618">Mixed Security Mode for the Two-Way Active Measurement Protocol (TWAMP)</a>,&rdquo; RFC&nbsp;5618, August&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5618.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-ippm-twamp-reflect-octets">[I-D.ietf-ippm-twamp-reflect-octets]</a></td>
<td class="author-text">Morton, A. and L. Ciavattone, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-ippm-twamp-reflect-octets-05.txt">TWAMP Reflect Octets and Symmetrical Size Features</a>,&rdquo; draft-ietf-ippm-twamp-reflect-octets-05 (work in progress), April&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-ippm-twamp-reflect-octets-05.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Al Morton</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AT&amp;T Labs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">200 Laurel Avenue South</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Middletown,, NJ  07748</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 732 420 1571</td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text">+1 732 368 1192</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:acmorton@att.com">acmorton@att.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://home.comcast.net/~acmacm/">http://home.comcast.net/~acmacm/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Murtaza Chiba</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">170 W. Tasman Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Jose,   95134</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 800 553 NETS</td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text">+1</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mchiba@cisco.com">mchiba@cisco.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href=""></a></td></tr>
</table>
</body></html>
