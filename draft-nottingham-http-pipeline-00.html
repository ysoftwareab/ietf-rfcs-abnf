<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Making HTTP Pipelining Usable on the Open Web</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Making HTTP Pipelining Usable on the Open Web">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">M. Nottingham</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">August 10, 2010</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">&nbsp;</td></tr>
<tr><td class="header">Expires: February 11, 2011</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Making HTTP Pipelining Usable on the Open Web<br />draft-nottingham-http-pipeline-00</h1>

<h3>Abstract</h3>

<p>Pipelining was added to HTTP/1.1 as a means of improving the
         performance of persistent connections in common cases. While it is
         deployed in some limited circumstances, it is not widely used by
         clients on the open Internet. This memo suggests some measures
         designed to make it more possible for clients to reliably and safely
         use HTTP pipelining in these situations.
</p>
<p>This memo should be discussed on the ietf-http-wg@w3.org mailing
         list, although it is not a work item of the HTTPbis WG.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on February 11, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Requirements<br />
<a href="#anchor3">3.</a>&nbsp;
HTTP Pipelining Issues<br />
<a href="#anchor4">4.</a>&nbsp;
Discovering Faulty Proxies<br />
<a href="#anchor5">5.</a>&nbsp;
Identifying Responses<br />
<a href="#anchor6">6.</a>&nbsp;
Signing Content for Integrity<br />
<a href="#anchor7">7.</a>&nbsp;
Hinting Pipelinable Content<br />
<a href="#anchor8">8.</a>&nbsp;
Origin Server Considerations for Pipelining<br />
<a href="#anchor9">9.</a>&nbsp;
User Agent Considerations for Pipelining<br />
<a href="#anchor10">10.</a>&nbsp;
Security Considerations<br />
<a href="#anchor11">11.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">12.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">12.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">12.2.</a>&nbsp;
Informative References<br />
<a href="#anchor14">Appendix&nbsp;A.</a>&nbsp;
Acknowledgements<br />
<a href="#anchor15">Appendix&nbsp;B.</a>&nbsp;
Frequently Asked Questions<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>HTTP/1.1 <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> added pipelining -- that is, the
         ability to have more than one outstanding request on a connection at
         a particular time -- to improve performance when many requests need
         to be made (e.g., when an HTML page references several images).
</p>
<p>Although not usable in all circumstances (e.g., POST, PUT and
         other non-idempotent requests cannot be pipelined), for the common
         case of Web browsing, pipelining seems at first like a broadly useful
         improvement -- especially since the number of TCP connections
         browsers and servers can use for a given interaction is limited, and
         especially where there is noticeable latency present.
</p>
<p>Indeed, in constrained applications of HTTP such as Subversion,
         pipelining has been shown to improve end-user perceived latency
         considerably.
</p>
<p>However, pipelining is not broadly used on the Web today; while
         most (but not all) servers and intermediaries support pipelining (to
         varying degrees), only one major Web browser uses it in its default
         configuration, and that implementation is reported to use a number of
         proprietary heuristics to determine when it is safe to pipeline.
</p>
<p>This memo characterises issues currently encountered in the use of
         HTTP pipelining, and suggests the use of mechanisms that, when
         used in concert, are designed to make its use more reliable and safe
         for browsers. It does not propose large protocol changes (e.g.,
         out-of-order messages), but rather incremental improvements that can
         be deployed within the confines of existing infrastructure.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Requirements</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
         NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in
         this document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
HTTP Pipelining Issues</h3>

<p>Anecdotal evidence suggests there are a number of reasons why
            clients don't use HTTP pipelining by default. Briefly, they are:
            
            </p>
<ol class="text">
<li>Server implementations may stall pipelined requests, or
               close their connection. This is one of the most commonly cited
               problems.
</li>
<li>Server implementations may pipeline responses in the wrong
               order. Some implementations mix up the order of pipelined
               responses; e.g., when they hit an error state but don't "fill"
               the response pipeline with a corresponding representation.
</li>
<li>A few server implementations may corrupt pipelined
               responses. It's been said that a very small number of
               implementations actually interleave pipelined responses so that
               part of response A appears in response B, which is both a
               security and interoperability problem.
</li>
<li>Clients don't have enough information about what is useful
               to pipeline. A given response may take an inordinate amount of
               time to generate, and/or be large enough to block subsequent
               responses. Clients who pipeline may face worse performance if
               they stack requests behind such an expensive request.
</li>
</ol><p>
         
</p>
<p>Note that here, "servers" can also include proxies and other
         intermediaries.
</p>
<p>The remainder of this memo proposes mechanisms that, together, can
         be used to mitigate these issues.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Discovering Faulty Proxies</h3>

<p>Issues specific to proxies are limited to the network
         infrastructure currently used by the client, and it is reasonable to
         assume that testing the infrastructure at the beginning of a session
         will indicate how safe it is to pipeline while that infrastructure is
         in use.
</p>
<p>Such issues can be detected by sending pipelined requests to a
         known server, and examining the responses for errors.
</p>
<p>For example, if the ExampleBrowser implementation wishes to probe
         for faulty proxies, it can send a series of requests to
         "http://browser.example.com/pipeline-test/" and subresources. If the
         bodies of the resulting responses deviate from those it expects in
         any way, it is reasonable to assume that a faulty proxy is present,
         and pipelining SHOULD NOT be used through it.
</p>
<p>Typically, user agents will do this upon startup and changes in
         the network, although they might periodically test to assure that a
         new proxy hasn't been interposed.
</p>
<p>Note that proxies aren't always configured explicitly.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Identifying Responses</h3>

<p>HTTP relies on the context of the connection to associate a given
         request with its intended response. In HTTP/1.0, this was a
         reasonable assumption, since only one request could be outstanding at
         a given time, and each request had exactly one response.
</p>
<p>HTTP/1.1 made associating requests and responses in a given
         connection more complex (and therefore fault-prone). Not only does
         pipelining mean that multiple requests can be outstanding, but also
         the 1xx series of response status codes introduce the possibility of
         multiple response messages (syntactically) being associated with a
         single request.
</p>
<p>To improve the client's ability to correlate responses with their
         requests and identify responses that are out of order (as well as
         serve other potential use cases), this memo introduces the
         "Assoc-Req" response header field.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  Assoc-Req   = "Assoc-Req" ":" OWS Assoc-Req-v
  Assoc-Req-v = Method SP absolute-URI
</pre></div>
<p>The field-value of the Assoc-Req header field is the method and
         effective request URI of the request associated with the response
         that it appears in. The URI used MUST be generated using the
         algorithm for finding the Effective Request URI in <a class='info' href='#I-D.ietf-httpbis-p1-messaging'>[I&#8209;D.ietf&#8209;httpbis&#8209;p1&#8209;messaging]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., Lafon, Y., and J. Reschke, &ldquo;HTTP/1.1, part 1: URIs, Connections, and Message Parsing,&rdquo; August&nbsp;2010.</span><span>)</span></a>. The header field MUST NOT
         be generated by proxies.
</p>
<p>For example, given the following request over port 80:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  GET /foo?it HTTP/1.1
  Host: www.example.com
</pre></div>
<p>the appropriate Assoc-Req header field would be:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  Assoc-Req: GET http://www.example.com/foo?it
</pre></div>
<p>Note that the Assoc-Req header field is not a perfectly reliable
         identifier for the request associated with a response; for example,
         it does not incorporate the selecting headers for content negotiation
         <a class='info' href='#I-D.ietf-httpbis-p6-cache'>[I&#8209;D.ietf&#8209;httpbis&#8209;p6&#8209;cache]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., Lafon, Y., Nottingham, M., and J. Reschke, &ldquo;HTTP/1.1, part 6: Caching,&rdquo; August&nbsp;2010.</span><span>)</span></a>, nor does it
         differentiate request bodies, when present. However, for the purposes
         of making pipelining more reliable, it is sufficient.
</p>
<p>Clients who wish to use the Assoc-Req response header field to aid
         in identifying problems in pipelining can compare its values to those
         of the request that they believe it to be associated with (based upon
         HTTP's message parsing rules, defined in <a class='info' href='#I-D.ietf-httpbis-p1-messaging'>[I&#8209;D.ietf&#8209;httpbis&#8209;p1&#8209;messaging]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., Lafon, Y., and J. Reschke, &ldquo;HTTP/1.1, part 1: URIs, Connections, and Message Parsing,&rdquo; August&nbsp;2010.</span><span>)</span></a>). If either the method or
         the URI differ, it indicates that there may be a pipelining-related
         issue.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Signing Content for Integrity</h3>

<p>Another means of protecting against server issues (whether proxy
         or origin server) is to sign the response content for integrity, so
         that any corruption becomes apparent.
</p>
<p>One existing way to do this is to use the Content-MD5 header
         field <a class='info' href='#I-D.ietf-httpbis-p3-payload'>[I&#8209;D.ietf&#8209;httpbis&#8209;p3&#8209;payload]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., Lafon, Y., and J. Reschke, &ldquo;HTTP/1.1, part 3: Message Payload and Content Negotiation,&rdquo; August&nbsp;2010.</span><span>)</span></a>.
</p>
<p>Clients who wish to use the Content-MD5 response header field to
         aid in identifying corrupted content due to pipelining issues can
         compare the hash to a calculated hash of the content.
</p>
<p>In some circumstances, it may be impractical for the server to
         buffer the response content in order to calculate a hash before
         sending it. In these cases, the Content-MD5 response header can be
         send in an HTTP trailer, provided that the connection is HTTP/1.1
         from end to end, and the client is able to process trailers.
</p>
<p>Additional means of verifying HTTP response integrity may become
         available in time.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Hinting Pipelinable Content</h3>

<p>Finally, to assist clients in determining what requests are
         suitable for pipelining, we define extensions to allow hinting by
         origin servers.
</p>
<p>Each of these hints indicates URLs that, when dereferenced, will
         likely not incur significant latency on the server in generating the
         response, nor significant latency on the network in transferring the
         response.
</p>
<p>What is "significant" is determined by the server. Clients will
         use these hints to determine what request(s) it is safe to pipeline
         something else after.
</p>
<p>For example, if "http://example.com/a" is hinted, a client can be
         more confident pipelining another request (e.g., to
         "http://example.com/b") on the same request afterwards.
</p>
<p>To allow flexibility and ease of administration, different kinds
            of hints are defined:
            </p>
<ul class="text">
<li>The "quick" link relation type [TBD: ref] can appear on
               individual HTML elements such as "img", "script" and
               "link" to indicate that the link they contain has low overhead.
               Additionally, it can be used in the HTTP link header to
               indicate links within the response in a format-neutral way.
</li>
<li>A document can indicate that all links from the indicated
               elements have low overhead by using the HTML META "quick"
               element, with the content indicating the element names that are
               "quick". For example, "&lt;META name='quick' content='img
               script link'/>".
</li>
<li>[DISCUSS: is it worthwhile to define a /.well-known lookup
                  mechanism for quick links?]
</li>
</ul><p>
         
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Origin Server Considerations for Pipelining</h3>

<p>To maximise the potential for request pipelining from clients
            that support this specification, origin servers:
            </p>
<ul class="text">
<li>SHOULD send the Assoc-Req response header field in all
               potentially pipelinable responses (keeping in mind that
               downstream caches might be serving responses in the
               future).
</li>
<li>SHOULD send the Content-MD5 response header (or trailer)
               field in potentially pipelinable responses.
</li>
<li>SHOULD hint potentially pipelinable requests as outlined
               above.
</li>
</ul><p>
         
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
User Agent Considerations for Pipelining</h3>

<p>To take advantage of the server-side mechanisms defined in this
         specification, user agents:
            </p>
<ul class="text">
<li>SHOULD ascertain whether any proxies present (either
               configured or interposed by interception) support pipelining by
               following the protocol described above. If they do not,
               pipelining SHOULD NOT be used.
</li>
<li>SHOULD check the Assoc-Req response header field-value, when
               present, on all pipelined responses.
</li>
<li>SHOULD check the Content-MD5 response header (or trailer)
               field-value, when present, on all pipelined responses.
</li>
<li>MAY use content hints for pipelining to assist in
               determining whether to pipeline a given request.
</li>
</ul><p>
         
</p>
<p>Upon encountering an indication of pipelining problems with a
         particular response (e.g., an incorrect Assoc-Req field-value, an
         incorrect Content-MD5 field-value), user agents SHOULD discard the
         response in question, all subsequent responses on the same
         connection, close the connection. Unsatisfied requests can be
         resubmitted, without pipelining, and the implementation can choose
         not to use pipelining to the same server in the future.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Security Considerations</h3>

<p>TBD
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
IANA Considerations</h3>

<p>TBD
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-httpbis-p1-messaging">[I-D.ietf-httpbis-p1-messaging]</a></td>
<td class="author-text">Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., Lafon, Y., and J. Reschke, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-p1-messaging-11.txt">HTTP/1.1, part 1: URIs, Connections, and Message Parsing</a>,&rdquo; draft-ietf-httpbis-p1-messaging-11 (work in progress), August&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-p1-messaging-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-httpbis-p3-payload">[I-D.ietf-httpbis-p3-payload]</a></td>
<td class="author-text">Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., Lafon, Y., and J. Reschke, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-p3-payload-11.txt">HTTP/1.1, part 3: Message Payload and Content Negotiation</a>,&rdquo; draft-ietf-httpbis-p3-payload-11 (work in progress), August&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-p3-payload-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-httpbis-p6-cache">[I-D.ietf-httpbis-p6-cache]</a></td>
<td class="author-text">Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., Lafon, Y., Nottingham, M., and J. Reschke, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-p6-cache-11.txt">HTTP/1.1, part 6: Caching</a>,&rdquo; draft-ietf-httpbis-p6-cache-11 (work in progress), August&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-p6-cache-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
</table>

<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Acknowledgements</h3>

<p>Thanks to Julian Reschke for help in defining the Assoc-Req
         field-value. The author takes all responsibility for errors and
         omissions.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Frequently Asked Questions</h3>

<p>Isn't full multiplexing better?
</p>
<p>While "full" multiplexing is theoretically better, pipelining --
         once usable -- is adequate for almost all common Web browsing cases.
         Since the browser needs to download HTML first, it has an opportunity
         to receive hints about subsequent requests and pipeline them
         appropriately. Likewise, by far the most common case for multiplexing
         on the Web is when a large number of images and other page assets
         need to be fetched with GET; a perfect use of pipelining, provided
         that the client has enough information to avoid head-of-line
         blocking.
</p>
<p>Why not have the client generate a unique request identifier?
</p>
<p>While in some ways this would be easier than the approach that the
            Assoc-Req header takes, it would be more difficult to deploy,
            because existing caching proxies wouldn't be able to serve
            the correct identifier when using a cached response.
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mark Nottingham</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mnot@mnot.net">mnot@mnot.net</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.mnot.net/">http://www.mnot.net/</a></td></tr>
</table>
</body></html>
