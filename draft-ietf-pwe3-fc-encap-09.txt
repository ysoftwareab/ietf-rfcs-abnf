PWE3                                                Moran Roth (Ed.) 
Internet-Draft                                         Ronen Solomon 
Intended status: Standards Track                   Corrigent Systems 
Expires: July 15, 2009                            Munefumi Tsurusawa 
                                                                KDDI 
                                                                     
                                                    January 15, 2009 
 
 
     Encapsulation Methods for Transport of Fibre Channel frames  
                          Over MPLS Networks 
                   draft-ietf-pwe3-fc-encap-09.txt 
 
 
Status of this Memo 
    
   This Internet-Draft is submitted to IETF in full conformance with the 
   provisions of BCP 78 and BCP 79. 
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that 
   other groups may also distribute working documents as Internet-
   Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 
    
   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt 
    
   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html. 
    
   This Internet-Draft will expire on July 15, 2009. 
    
    
Copyright Notice 
    
   Copyright (c) 2009 IETF Trust and the persons identified as the 
   document authors.  All rights reserved.  
    
   This document is subject to BCP 78 and the IETF Trust's Legal 
   Provisions Relating to IETF Documents 
   (http://trustee.ietf.org/license-info) in effect on the date of 
   publication of this document.  Please review these documents 
   carefully, as they describe your rights and restrictions with respect 
   to this document. 
    
 
 
Roth, et al.           Expires - July 15, 2009                [Page 1] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
    
Abstract 
    
   A Fibre Channel pseudowire (PW) is used to carry Fibre Channel frames 
   over an MPLS network. This enables service providers to offer 
   "emulated" Fibre Channel services over existing MPLS networks. This 
   document specifies the encapsulation of Fibre Channel PDUs within a 
   pseudowire. It also specifies the common procedures for using a PW to 
   provide a Fibre Channel service. The mechanisms controlling the 
   reliable transport of Fibre Channel PW over MPLS networks are 
   specified in a companion document [FC-flow]. 
    
    
Requirements Language 
    
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in RFC 2119 [1]. 
    




























 
 
Roth, et al.           Expires - July 15, 2009                [Page 2] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
    
Table of Contents 
    
   1. Introduction...................................................4 
      1.1. Transparency..............................................5 
      1.2. Bandwidth Efficiency......................................5 
      1.3. Traffic Engineering.......................................5 
   2. Reference Model................................................6 
   3. Encapsulation..................................................8 
      3.1. The Control Word..........................................8 
      3.2. MTU Requirements..........................................9 
      3.3. Mapping of FC traffic to PW PDU...........................9 
      3.4. PW failure mapping.......................................11 
   4. Signaling of FC Pseudowires...................................11 
      4.1. Interface Parameters for FC PW...........................12 
      4.1.1. SR Poll Timeout (T1)...................................12 
      4.1.2. SR Response Timeout (T2)...............................12 
      4.1.3. SR Poll Retries (N2)...................................12 
      4.1.4. SR Window Size (k).....................................12 
      4.1.5. Fragmentation Indicator................................13 
   5. Security Considerations.......................................13 
   6. Applicability Statement.......................................13 
   7. IANA Considerations...........................................14 
   8. Normative References..........................................15 
   9. Informative references........................................15 
   10. Author's Addresses...........................................16 
   11. Contributing Author Information..............................17 
    



















 
 
Roth, et al.           Expires - July 15, 2009                [Page 3] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
1. Introduction 
    
   As metro transport networks migrate towards a packet-oriented network 
   infrastructure, the PSN is being extended in order to allow all 
   services to be transported over a common network infrastructure. This 
   has been accomplished for services such as Ethernet [RFC4448], Frame 
   Relay [RFC4619], ATM [RFC4717] and SONET/SDH [RFC4842] services. 
   Another such service, which has yet to be addressed, is the transport 
   of Fibre Channel (FC) frames over the PSN. This will allow network 
   service providers to transparently carry FC services over the packet-
   oriented network, along with the aforementioned data and TDM 
   services.   
    
   During recent years applications such as Storage Area Networks (SAN) 
   extension and disaster recovery have become a prominent business 
   opportunity for network service providers. In order to meet the 
   intrinsic service requirements that characterize FC-based 
   applications, such as transparency and low latency, various methods 
   for encapsulating and transporting FC frames over backbone networks 
   have been developed [FC-BB]. 
    
   FC/IP, as described in [RFC3821] and [FC-BB], defines the mechanisms 
   that allow the interconnection of islands of FC SANs over IP 
   Networks. It provides a method for encapsulating FC frames employing 
   FC Frame Encapsulation, as defined in [RFC3643], and addresses 
   specific FC concerns related to tunneling FC over a pure IP network. 
    
   Fibre Channel pseusowire (FC PW) is being proposed to provide a 
   method for transporting FC frames over an MPLS network. It defines 
   the encapsulation of FC Protocol Data Units (PDU) into an MPLS 
   pseudowire, as well as procedures for using PW encapsulation to 
   enable FC services such as SAN extension and disaster recovery over 
   an MPLS PSN.  
    
   FC PW complements the currently available standardized methods for 
   transporting FC frames over a PSN. Specifically, FC/IP addresses 
   "only the requirements necessary to properly utilize a pure IP 
   network as a conduit for FC Frames", whereas FC PW addresses the 
   requirements necessary to transport FC over an MPLS PSN. An example 
   of such a network might be a packet-oriented multi-service transport 
   network, where MPLS is used as the universal method for encapsulating 
   and transporting all type of services, including mission critical FC 
   applications as well as other TDM and data services. Hence, a key 
   benefit of FC PW is that it will enable the extension of FC 
   applications to the carrier space.   
    

 
 
Roth, et al.           Expires - July 15, 2009                [Page 4] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
   The following sections describe some of the key carrier requirements 
   for transporting FC frames over an MPLS PSN. 
     
1.1. Transparency  
       
   Transparent emulation of an FC link is a key requirement for 
   transporting FC frames over a carrier's network. Conventionally, the 
   coupling (or pairing) of FC entities with those pertaining to 
   specific encapsulation methods requires the protocol-specific entity 
   to terminate the FC Entity. This, in most cases, would require global 
   address synchronization to be performed by the operator. In 
   addressing this requirement, and providing full transparency, FC PW 
   defines a port-mode FC encapsulation into a PW. This requires the 
   creation of an FC pseudowire emulating an FC Link between two FC 
   ports, appearing architecturally as being wired to those ports, 
   similar to the approach defined for FC over GFPT in [FC-BB]. This 
   results in transparent forwarding of FC frames over the MPLS PSN from 
   both the FC Fabric and the operator's point of view. 
    
1.2. Bandwidth Efficiency  
       
   This is an important requirement for transporting FC over an MPLS 
   PSN, where the protocol overhead has to be minimized in order to 
   guarantee an end-to-end performance consistent with, e.g., SONET 
   networks. FC PW defines a minimal overhead of 16 bytes, required due 
   to the inclusion of the FC Encapsulation Header (4 bytes, refer to 
   section 6.2.1), as well as the Control Word (4 bytes), PW label (4 
   bytes) and MPLS label (4 bytes). This can be contrasted with the 
   overhead required by other methods such as those defined in [FC-BB].   
    
   Moreover, the ability to characterize services by specific bandwidth 
   attributes, such as Committed Information Rate (CIR) and Excess 
   Information Rate (EIR), effectively enables network operators to take 
   full advantage of the statistical multiplexing capabilities of a 
   packet-oriented network. This allows the multiplexing of best effort 
   and premium services over the same media, effectively optimizing 
   bandwidth utilization while still providing bandwidth guarantees and 
   high service availability, as required by premium services such as FC 
   PW.   
    
1.3. Traffic Engineering  
       
   The transport of FC frames over a PSN network requires the operator 
   not only to optimize the use of bandwidth resources, but also to 
   define an explicit path over which availability and performance can 
   be guaranteed. This capability is offered by other interconnect 
   technologies such as ATM or SONET network technologies. 
 
 
Roth, et al.           Expires - July 15, 2009                [Page 5] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
    
   FC PW defines the mapping of FC frames into a PW, implicitly assuming 
   the use of MPLS-TE for the explicit provisioning of an FC PW over the 
   MPLS PSN. This enables the operator to guarantee the performance and 
   availability of the emulated FC link.  
    
   FC requires a reliable transmission mechanism between FC entities.  
   This implicitly assumes a lossless media with high availability. 
   This, however, cannot always be guaranteed in best effort networks 
   where FC frames are at times transported over sub-optimal paths. 
   Bearing this in mind, FC PW relies on MPLS-TE to create an emulated 
   FC link over a packet-oriented network, effectively enabling network 
   operators to establish an explicit path to enhance frame transmission 
   performance.  
    
    
2. Reference Model 
    
   FC PW allows FC Protocol Data Units (PDUs) to be carried over an MPLS 
   network. In addressing the issues associated with carrying a FC PDU 
   over an MPLS network, this document assumes that a pseudowire has 
   been set up by some means outside of the scope of this document. This 
   MAY be achieved via static provisioning, or using the signaling 
   protocol as defined in [RFC4447]. 
    
   FC PW emulates a single FC link between exactly two endpoints. This 
   document specifies the emulated PW encapsulation for FC. 
    
   Figure 1 describes the reference models which are derived from 
   [RFC3985] to support the FC PW emulated services. 
    
   For the purpose of the discussion in this document PE1 will be 
   defined as the ingress router, and PE2 as the egress router. A layer 
   2 PDU will be received at PE1, encapsulated at PE1, transported, 
   decapsulated at PE2, and transmitted out on the attachment circuit of 
   PE2. 
    
    
    
    
    
    
    
    
    
    
    
 
 
Roth, et al.           Expires - July 15, 2009                [Page 6] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
            |<-------------- Emulated Service ----------------->| 
            |                                                   | 
            |          |<------- Pseudowire -------->|          | 
            |          |                             |          | 
            |          |    |<-- MPLS Tunnel -->|    |          | 
            |          V    V                   V    V          | 
            V   AC     +----+                   +----+    AC    V 
      +-----+    |     | PE1|===================| PE2|     |    +-----+ 
      |     |----------|............PW1..............|----------|     | 
      | CE1 |    |     |    |                   |    |     |    | CE2 | 
      |     |----------|............PW2..............|----------|     | 
      +-----+  ^ |     |    |===================|    |     | ^  +-----+ 
            ^  |       +----+                   +----+     | |  ^ 
            |  |   Provider Edge 1          Provider Edge 2  |  | 
            |  |                                             |  | 
      Customer |                                             | Customer 
      Edge 1   |                                             | Edge 2 
               |                                             | 
               |                                             | 
        Native FC service                             Native FC service 
    
         Figure 1: PWE3 FC Interface Reference Configuration 
    
    
   The following reference model describes the termination point of each 
   end of the PW within the PE: 
    
              +-----------------------------------+ 
              |                PE                 | 
      +---+   +-+  +-----+  +------+  +------+  +-+ 
      |   |   |P|  |     |  |PW ter|  | MPLS |  |P| 
      |   |<==|h|<=| NSP |<=|minati|<=|Tunnel|<=|h|<== From PSN 
      |   |   |y|  |     |  |on    |  |      |  |y| 
      | C |   +-+  +-----+  +------+  +------+  +-+ 
      | E |   |                                   | 
      |   |   +-+  +-----+  +------+  +------+  +-+ 
      |   |   |P|  |     |  |PW ter|  | MPLS |  |P| 
      |   |==>|h|=>| NSP |=>|minati|=>|Tunnel|=>|h|==> To PSN 
      |   |   |y|  |     |  |on    |  |      |  |y| 
      +---+   +-+  +-----+  +------+  +------+  +-+ 
              |                                   | 
              +-----------------------------------+ 
    
              Figure 2: PW reference diagram 
    
   The Native Service Processing (NSP) function includes native FC 
   traffic processing that is required either for the proper operation 
 
 
Roth, et al.           Expires - July 15, 2009                [Page 7] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
   of the FC link, or for the FC frames that are forwarded to the PW 
   termination point. The NSP function is outside of the scope of PWE3 
   and is defined by [FC-BB]. 
    
    
3. Encapsulation 
    
   This specification provides port to port transport of FC encapsulated 
   traffic. The following FC connections (as specified in [FC-BB]) are 
   supported over the MPLS network: 
       - N-Port to N-Port 
       - N-Port to F-Port 
       - E-Port to E-Port 
    
   FC Primitive Signals and FC-Port Login handling by the NSP function 
   within the PE is defined in [FC-BB]. 
    
3.1. The Control Word 
    
   The Generic PW Control Word, as defined in "PWE3 Control Word" 
   [RFC4385] MUST be used for FC PW to facilitate the transport of short 
   packets (by setting the Length field as detailed below), and convey 
   the flag bit defined below. The structure of the Control Word is as 
   follows: 
    
                        1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |0 0 0 0| PT  |A|0 0|  Length   |     Sequence Number           | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    
    Figure 3 - Control Word structure for the one-to-one mapping mode 
    
   The first four bits of the PW Control Word MUST be set to 0 by the 
   ingress PE to indicate PW data. 
    
   The Flags bits are in use to convey the value of two flags, as 
   specified below. 
    
   PT - Payload Type indication. This field identifies the payload type  
        carried within the PW PDU. The following types are defined: 
        PT = 0: FC data frame. 
        PT = 1: FC login frame. 
        PT = 2: FC Primitive Sequence. 
        PT = 6: FC Control Frame (refer to [FC-BB]). 
    
   A - The Address bit identifies the frame as either a command or a  
 
 
Roth, et al.           Expires - July 15, 2009                [Page 8] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
       response. This field is used in conjunction with the Poll Bit of  
       the Selective Retransmission protocol. Messages containing 
       commands MUST set this bit to 1. Messages containing responses  
       MUST set this bit to 0. This bit MUST be set to 0 for FC Control  
       frames as indicated by Payload Type value of 6. Further details  
       regarding the use of this flag are provided in section 6. 
    
   The fragmentation bits (bits 8-9) are not used for FC PW. These bits 
   may be used in the future for FC specific indications as defined in 
   [RFC4385]. 
    
   The length field MUST be used for packets shorter than 64 bytes. Its 
   processing must follow the rules defined in [RFC4385]. 
    
   The sequence number is not used for FC PW and MUST be set to 0 by the 
   ingress PE, and MUST be ignored by the egress PE. Refer to section 6 
   for the sequencing mechanism used for FC PW. 
    
3.2. MTU Requirements 
    
   The MPLS PSN MUST be able to transport the largest Fibre Channel 
   encapsulation frame, including the overhead associated with the 
   tunneling protocol. The maximum frame size without PW and MPLS labels 
   (refer to Figure 4) is 2164 bytes. The MPLS PSN SHOULD accommodate 
   frames of up to 2500 bytes to support future expansion of FC frames. 
    
   Fragmentation, described in [RFC4623], SHALL NOT be used for FC PW, 
   therefore the network MUST be configured with a minimum MTU that is 
   sufficient to transport the largest encapsulation frame. 
    
    
3.3. Mapping of FC traffic to PW PDU 
    
   FC frames and Primitive Sequences are transported over the PW. All 
   packet types are carried over a single PW. The FC header MUST contain 
   a FC PW Control Word and a FC Encapsulation Header. The Encapsulation 
   Header is described in section 6. 
    
   Each FC frame is mapped to a PW PDU, including the Start Of Frame 
   (SOF) delimiter, frame header, CRC field and the End Of Frame (EOF) 
   delimiter, as shown in figure 4. SOF and EOF frame delimiters are 
   encoded as specified in [FC-BB]. 
    
   FC Primitive Sequences are encapsulated in a PW PDU containing the 
   encoded K28.5 character [FC-BB], followed by the encoded 3 data 
   characters, as shown in Figure 5. A PW PDU may contain one or more FC 
   encoded ordered sets [FC-BB]. The length field in the FC PW Control 
 
 
Roth, et al.           Expires - July 15, 2009                [Page 9] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
   Word is used to indicate the packet length when the PW PDU contains a 
   small number of Primitive Sequences. 
    
                           1                   2                   3   
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
      +---------------------------------------------------------------+ 
      |                    FC PW Control Word                         | 
      +---------------------------------------------------------------+ 
      |                  FC Encapsulation Header                      | 
      +---------------+-----------------------------------------------+ 
      |   SOF Code    |                   Reserved                    | 
      +---------------+-----------------------------------------------+ 
      |                                                               | 
      +-----                      FC Frame                        ----+ 
      |                                                               | 
      +---------------------------------------------------------------+ 
      |                              CRC                              | 
      +---------------+-----------------------------------------------+ 
      |   EOF Code    |                   Reserved                    | 
      +---------------+-----------------------------------------------+ 
    
          Figure 4 - FC frame encapsulation within PW PDU 
    
   Idle Primitive Signals are carried over the PW in the same manner as 
   Primitive Sequences. Note that in both cases a PE is not required to 
   transport all the ordered sets received. The PE MAY implement 
   repetitive signal suppression functionality as part of the NSP 
   functionality. This is out of the scope of this document (refer to 
   [FC-BB] for further details). 
    
                           1                   2                   3   
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
      +---------------------------------------------------------------+ 
      |                    FC PW Control Word                         | 
      +---------------------------------------------------------------+ 
      |                  FC Encapsulation Header                      | 
      +---------------+---------------+---------------+---------------+ 
      |     K28.5     |     Dxx.y     |     Dxx.y     |     Dxx.y     | 
      +---------------+---------------+---------------+---------------+ 
      |                                                               | 
      +----                                                       ----+ 
      |                                                               | 
      +---------------+---------------+---------------+---------------+ 
      |     K28.5     |     Dxx.y     |     Dxx.y     |     Dxx.y     | 
      +---------------+---------------+---------------+---------------+ 
      
          Figure 5 - FC Ordered Sets encapsulation within PW PDU 
 
 
Roth, et al.           Expires - July 15, 2009               [Page 10] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
    
   The egress PE extracts the Primitive Sequence and Idle Primitive 
   Signals from the received PW PDU. It continues transmitting the same 
   ordered set until a FC frame or another ordered set is received over 
   the PW. 
    
   FC Control frames are transported over the PW, by encapsulating each 
   frame in a PW PDU. The FC header MUST contain a FC PW Control Word, 
   with PT = 6, and an all zeros FC Encapsulation Header (Selective 
   Retransmission does not apply to FC Control frame transmission). FC 
   Control Frame payload is out of scope of this document and is defined 
   in [FC-BB]. 
    
                           1                   2                   3   
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
      +---------------------------------------------------------------+ 
      |                    FC PW Control Word                         | 
      +---------------------------------------------------------------+ 
      |                  FC Encapsulation Header                      | 
      +---------------------------------------------------------------+ 
      |                                                               | 
      +-----                FC Control Frame                      ----+ 
      |                                                               | 
      +---------------------------------------------------------------+ 
    
          Figure 6 - FC Control frame encapsulation within PW PDU 
    
    
3.4. PW failure mapping 
    
   PW failure mapping, which are detected through PW signaling failure, 
   PW status notifications as defined in [RFC4447], or through PW OAM 
   mechanisms MUST be mapped to emulated signal failure indications.  
   The FC link failure indication is performed by the NSP, as defined by 
   [FC-BB], and is out of the scope of this document. 
    
    
4. Signaling of FC Pseudowires 
    
   [PWE3-CONTROL] specifies the use of the MPLS Label Distribution 
   Protocol, LDP, as a protocol for setting up and maintaining 
   pseudowires. This section describes the use of specific fields and 
   error codes used to control FC PW. 
    
   The PW Type field in the PWid FEC element and PW generalized ID FEC 
   elements MUST be set to "FC Port Mode" as requested in section 8 
   below. 
 
 
Roth, et al.           Expires - July 15, 2009               [Page 11] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
    
   The Control Word is REQUIRED for FC pseudowires.  Therefore the 
   C-Bit in the PWid FEC element and PW generalized ID FEC elements MUST 
   be set. If the C-Bit is not set the pseudowire MUST not be 
   established and a Label Release MUST be sent with an "Illegal C-Bit" 
   status code [PWE3-CONTROL]. 
    
4.1. Interface Parameters for FC PW 
    
4.1.1. SR Poll Timeout (T1) 
    
   The Selective Retransmission (SR) Poll Timeout (Parameter ID = TBA by 
   IANA) is defined in section 6.3.5. The parameter length is 4 bytes. 
   The parameter value indicates the poll timeout in units of 1 
   millisecond. 
    
   The two PE on the edges of a FC PW MUST agree on the same value of 
   this parameter for the PW to be set up successfully. 
    
4.1.2. SR Response Timeout (T2) 
    
   The Selective Retransmission Response Timeout (Parameter ID = TBA by 
   IANA) is defined in section 6.3.5. The parameter length is 4 bytes. 
   The parameter value indicates the response timeout in units of 1 
   microsecond. The restrictions specified in section 6.3.5 MUST be 
   enforced for proper operation of the SR mechanism. 
    
   The two PE on the edges of a FC PW MUST agree on the same value of 
   this parameter for the PW to be set up successfully. 
    
4.1.3. SR Poll Retries (N2) 
    
   The Selective Retransmission Poll Retries (Parameter ID = TBA by 
   IANA) is defined in section 6.3.5. The parameter length is 4 bytes. 
   The parameter value is an integer indicating the number of poll 
   retries. 
    
   The two PE on the edges of a FC PW MUST agree on the same value of 
   this parameter for the PW to be set up successfully. 
    
4.1.4. SR Window Size (k) 
    
   The Selective Retransmission Window Size (Parameter ID = TBA by IANA) 
   is defined in section 6.3.5. The parameter length is 4 bytes. The 
   parameter value is an integer indicating the maximum number of 
   outstanding packets. 
    
 
 
 Roth, et al.           Expires - July 15, 2009               [Page 12] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
   The two PE on the edges of a FC PW MUST agree on the same value of 
   this parameter for the PW to be set up successfully. 
    
4.1.5. Fragmentation Indicator 
    
   The Fragmentation Indicator (Parameter ID = 0x09) is specified in 
   [RFC4446] and its usage is defined in [RFC4623]. 
    
   Since fragmentation is not used in FC PW, the fragmentation indicator 
   parameter MUST be omitted from the Interface Parameter Sub-TLV. 
    
    
5. Security Considerations 
    
   FC PW does not enhance or detract from the security properties of the 
   underlying MPLS PSN, rather it relies upon the PSN's mechanisms for 
   encryption, integrity, and authentication whenever required. The 
   level of security provided may be less than that of a native FC 
   service. 
    
   FC PW shares susceptibility to a number of pseudowire-layer attacks 
   and implementations SHOULD use whatever mechanisms for 
   confidentiality, integrity, and authentication are developed for 
   general PWs.  These methods are beyond the scope of this document. 
    
   The protocols used to implement security in a Fibre Channel fabric 
   are defined in [FC-SP]. These protocols work at higher layers of the 
   FC hierarchy and are transparent to the FC PW. 
    
    
6. Applicability Statement 
    
   FC PW allows the transport of point-to-point Fibre Channel links 
   while saving network bandwidth. 
    
   - The pair of CE devices operates as if they were directly connected 
     by an FC link. In particular they react to Primitive Sequences on 
     their local ACs in the standard way. 
   - The FC PW carries only FC data frames and a single copy of a 
     Primitive Sequence. Idle Primitive Signals encountered between FC 
     data frames, and long streams of the same Primitive Sequence are 
     suppressed over the PW thus saving bandwidth. 
    
   FC PW traffic can traverse controlled (i.e., providing committed 
   information rate for the service) networks and uncontrolled (i.e., 
   providing excess information rate for the service) networks. In case 
   of FC PW traversing an uncontrolled network, it MUST provide TCP-
 
 
Roth, et al.           Expires - July 15, 2009               [Page 13] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
   friendly behavior under network congestion in accordance with the 
   specifications in [FC-flow]. 
    
   Faithfulness of a FC PW may be increased if the carrying MPLS PSN is 
   Diffserv-enabled and implements a per-domain behavior (PDB, defined 
   in [RFC3086]) that guarantees low loss, low re-ordering events and 
   low delay. The NSP may include mechanisms to reduce the effect of 
   these events on the FC service. These mechanisms are out of the scope 
   of this document. 
     
   This document does not provide any mechanisms for protecting FC PW 
   against PSN outages. As a consequence, resilience of the emulated 
   service to such outages is defined by the PSN behavior. However, the 
   NSP MAY implement a mechanism to convey the PW status to the CE, to 
   enable faster handling of the PSN outage. Moreover, the NSP MAY 
   implement egress buffer and packet reordering mechanism to increase 
   the emulated service resiliency to fast PSN rerouting events. As a 
   function of the NSP this is out of the scope of this document. 
    
    
7. IANA Considerations 
    
   IANA is requested to assign a new PW type as follows: 
    
   PW type      Description           Reference 
   --------     --------------        ---------- 
   0x001F       FC Port Mode          [FC-encap] 
    
   The above value is suggested as the next available value and the 
   reference [FC-encap] refers to this document. 
    
   IANA is requested to add the following entries to the Pseudowire 
   Interface Parameters Sub-TLV type Registry: 
    
   Parameter  ID Length  Description                  Reference 
   ---------  ---------  ------------------------     ---------- 
   0x12          4       SR Poll Timeout (T1)         [FC-encap] 
   0x13          4       SR Response Timeout (T2)     [FC-encap] 
   0x14          4       SR Poll Retries (N2)         [FC-encap] 
   0x15          4       SR Window Size (k)           [FC-encap] 
    
   The parameters are defined in sections 5.1.1 through 5.1.4. The 
   reference [FC-encap] refers to this document. 
    
    
    

 
 
Roth, et al.           Expires - July 15, 2009               [Page 14] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
8. Normative References 
    
   [FC-flow]   Roth, M., et al, "Reliable Fibre Channel Transport Over  
               MPLS Networks", RFC TBD, to appear. 
               RFC Editor: Please contact authors to obtain the correct 
               RFC number and date for the "to appear" in the above  
               reference prior to publication. 
    
   [RFC3985]   Bryant, S., et al, "Pseudo Wire Emulation Edge-to-Edge 
               (PWE3) Architecture", RFC 3985, March 2005. 
         
   [RFC3916]   Xiao, X., et al, "Requirements for Pseudo Wire Emulation  
               Edge-to-Edge (PWE3)", RFC 3916, September 2004. 
    
   [RFC3086]   Nichols, K., et al, "Definition of Differentiated  
               Services Per Domain Behaviors and Rules for their  
               Specification)", RFC 3086, April 2001. 
    
   [RFC4446]   Martini, L., "IANA Allocations for Pseudowire Edge to  
               Edge Emulation (PWE3)", RFC 4447, April 2006. 
    
   [RFC4447]   Martini, L., et al, "Pseudowire Setup and Maintenance  
               using the Label Distribution Protocol (LDP)", RFC 4447,  
               April 2006. 
    
   [RFC4385]   Bryant, S., et al, "Pseudowire Emulation Edge-to-Edge  
               (PWE3) Control Word for use over an MPLS PSN", RFC 4385,  
               February 2006. 
    
   [RFC4623]   Malis, A., Townsley, M., "PWE3 Fragmentation and  
               Reassembly", RFC 4623, August 2006. 
    
   [FC-BB]     "Fibre Channel Backbone-4" (FC-BB-4), ANSI INCITS  
               419:2008, to appear. 
               RFC Editor: Please contact authors to obtain the correct 
               date for the "to appear" in the above reference prior to 
               publication. 
    
   [BCP14]     Bradner, S., "Key words for use in RFCs to Indicate  
               requirement Levels", BCP 14, RFC 2119, March 1997. 
    
   [FC-SP]     "Fibre Channel - Security Protocols" (FC-SP), ANSI 
               INCITS 426:2007, February 2007. 
    
    
9. Informative references 
    
 
 
Roth, et al.           Expires - July 15, 2009               [Page 15] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
   [RFC3668]   Bradner, S., "Intellectual Property Rights in IETF  
               Technology", RFC 3668, February 2004. 
    
   [RFC3821]   M. Rajogopal, E. Rodriguez, "Fibre Channel over TCP/IP  
               (FCIP)", RFC 3821, July 2004. 
    
   [RFC3643]   R. Weber, et al, "Fibre Channel (FC) Frame  
               Encapsulation", RFC 3643, December 2003. 
    
   [RFC4448]   Martini, L., et al, "Encapsulation Methods for Transport  
               of Ethernet over MPLS Networks", RFC 4448, April 2006. 
     
   [RFC4842]   Malis, A., et al, "SONET/SDH Circuit Emulation Over  
               Packet (CEP)", RFC 4842, April 2007. 
    
   [RFC4619]   Martini, L., et al, "Encapsulation Methods for  
               Transport of Frame Relay over MPLS Networks", RFC 4619, 
               September 2006. 
    
   [RFC4717]   Martini, L., et al, "Encapsulation Methods for Transport  
               of ATM over MPLS Networks", RFC 4717, December 2006. 
    
    
10. Author's Addresses 
    
   Moran Roth 
   Corrigent Systems 
   101, Metro Drive 
   San Jose, CA 95110 
   Phone: +1-408-392-9292 
   Email: moranr@corrigent.com 
    
    
   Ronen Solomon 
   Corrigent Systems 
   126, Yigal Alon st. 
   Tel Aviv, ISRAEL 
   Phone: +972-3-6945316 
   Email: ronens@corrigent.com 
    
    
   Munefumi Tsurusawa 
   KDDI R&D Laboratories Inc. 
   Ohara 2-1-15, Fujimino-shi, 
   Saitama, Japan 
   Phone: +81-49-278-7828 
    
 
 
Roth, et al.           Expires - July 15, 2009               [Page 16] 
  
INTERNET DRAFT             FC Encapsulation                January 2009 
 
 
 
    
11. Contributing Author Information 
    
   David Zelig 
   Corrigent Systems 
   126, Yigal Alon st. 
   Tel Aviv, ISRAEL 
   Phone: +972-3-6945273 
   Email: davidz@corrigent.com 
    
    
   Leon Bruckman 
   Corrigent Systems 
   126, Yigal Alon st. 
   Tel Aviv, ISRAEL 
   Phone: +972-3-6945694 
   Email: leonb@corrigent.com 
    
    
   Luis Aguirre-Torres 
   Corrigent Systems 
   101 Metro Drive 
   San Jose, CA 95110 
   Phone: +1-408-392-9292 
   Email: Luis@corrigent.com  
    
    




















 
 
Roth, et al.           Expires - July 15, 2009               [Page 17] 
