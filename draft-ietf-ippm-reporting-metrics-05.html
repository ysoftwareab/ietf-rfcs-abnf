<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Reporting Metrics: Different Points of View</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Purpose and Scope">
<link href="#rfc.section.3" rel="Chapter" title="3 Reporting Results">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Overview of Metric Statistics">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Long-Term Reporting Considerations">
<link href="#rfc.section.4" rel="Chapter" title="4 Effect of POV on the Loss Metric">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Loss Threshold">
<link href="#rfc.section.4.1.1" rel="Chapter" title="4.1.1 Network Characterization">
<link href="#rfc.section.4.1.2" rel="Chapter" title="4.1.2 Application Performance">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Errored Packet Designation">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Causes of Lost Packets">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Summary for Loss">
<link href="#rfc.section.5" rel="Chapter" title="5 Effect of POV on the Delay Metric">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Treatment of Lost Packets">
<link href="#rfc.section.5.1.1" rel="Chapter" title="5.1.1 Application Performance">
<link href="#rfc.section.5.1.2" rel="Chapter" title="5.1.2 Network Characterization">
<link href="#rfc.section.5.1.3" rel="Chapter" title="5.1.3 Delay Variation">
<link href="#rfc.section.5.1.4" rel="Chapter" title="5.1.4 Reordering">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Preferred Statistics">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Summary for Delay">
<link href="#rfc.section.6" rel="Chapter" title="6 Effect of POV on Raw Capacity Metrics">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Type-P Parameter">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 a priori Factors">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 IP-layer Capacity">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 IP-layer Utilization">
<link href="#rfc.section.6.5" rel="Chapter" title="6.5 IP-layer Available Capacity">
<link href="#rfc.section.6.6" rel="Chapter" title="6.6 Variability in Utilization and Avail. Capacity">
<link href="#rfc.section.6.6.1" rel="Chapter" title="6.6.1 General Summary of Variability">
<link href="#rfc.section.7" rel="Chapter" title="7 Effect of POV on Restricted Capacity Metrics">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 Type-P Parameter and Type-C Parameter">
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 a priori Factors">
<link href="#rfc.section.7.3" rel="Chapter" title="7.3 Measurement Interval">
<link href="#rfc.section.7.4" rel="Chapter" title="7.4 Bulk Transfer Capacity Reporting">
<link href="#rfc.section.7.5" rel="Chapter" title="7.5 Variability in Bulk Transfer Capacity">
<link href="#rfc.section.8" rel="Chapter" title="8 Test Streams and Sample Size">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Test Stream Characteristics">
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 Sample Size">
<link href="#rfc.section.9" rel="Chapter" title="9 IANA Considerations">
<link href="#rfc.section.10" rel="Chapter" title="10 Security Considerations">
<link href="#rfc.section.11" rel="Chapter" title="11 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="12 References">
<link href="#rfc.references.1" rel="Chapter" title="12.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="12.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="Consumers of IP network performance metrics have many different uses in mind. The memo provides "long-term" reporting considerations (e.g, days, weeks or months, as opposed to 10 seconds), based on analysis of the two key audience points-of-view. It describes how the audience categories affect the selection of metric parameters and options when seeking info that serves their needs." />
  <meta name="description" content="Consumers of IP network performance metrics have many different uses in mind. The memo provides "long-term" reporting considerations (e.g, days, weeks or months, as opposed to 10 seconds), based on analysis of the two key audience points-of-view. It describes how the audience categories affect the selection of metric parameters and options when seeking info that serves their needs." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">A. Morton</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">G. Ramachandran</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">G. Maguluri</td>
</tr>
<tr>
<td class="left">Expires: January 09, 2012</td>
<td class="right">AT&amp;T Labs</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">July 08, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Reporting Metrics: Different Points of View<br />
  <span class="filename">draft-ietf-ippm-reporting-metrics-05</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>Consumers of IP network performance metrics have many different uses in mind. The memo provides "long-term" reporting considerations (e.g, days, weeks or months, as opposed to 10 seconds), based on analysis of the two key audience points-of-view. It describes how the audience categories affect the selection of metric parameters and options when seeking info that serves their needs.</p>
<h1><a>Requirements Language</a></h1>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on January 09, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>
<p>This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008.  The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process. Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Purpose and Scope</a>
</li>
<li>3.   <a href="#rfc.section.3">Reporting Results</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Overview of Metric Statistics</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Long-Term Reporting Considerations</a>
</li>
<li>4.   <a href="#rfc.section.4">Effect of POV on the Loss Metric</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Loss Threshold</a>
</li>
<li>4.1.1.   <a href="#rfc.section.4.1.1">Network Characterization</a>
</li>
<li>4.1.2.   <a href="#rfc.section.4.1.2">Application Performance</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Errored Packet Designation</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Causes of Lost Packets</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Summary for Loss</a>
</li>
<li>5.   <a href="#rfc.section.5">Effect of POV on the Delay Metric</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Treatment of Lost Packets</a>
</li>
<li>5.1.1.   <a href="#rfc.section.5.1.1">Application Performance</a>
</li>
<li>5.1.2.   <a href="#rfc.section.5.1.2">Network Characterization</a>
</li>
<li>5.1.3.   <a href="#rfc.section.5.1.3">Delay Variation</a>
</li>
<li>5.1.4.   <a href="#rfc.section.5.1.4">Reordering</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Preferred Statistics</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">Summary for Delay</a>
</li>
<li>6.   <a href="#rfc.section.6">Effect of POV on Raw Capacity Metrics</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Type-P Parameter</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">a priori Factors</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">IP-layer Capacity</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">IP-layer Utilization</a>
</li>
<li>6.5.   <a href="#rfc.section.6.5">IP-layer Available Capacity</a>
</li>
<li>6.6.   <a href="#rfc.section.6.6">Variability in Utilization and Avail. Capacity</a>
</li>
<li>6.6.1.   <a href="#rfc.section.6.6.1">General Summary of Variability</a>
</li>
<li>7.   <a href="#rfc.section.7">Effect of POV on Restricted Capacity Metrics</a>
</li>
<li>7.1.   <a href="#rfc.section.7.1">Type-P Parameter and Type-C Parameter</a>
</li>
<li>7.2.   <a href="#rfc.section.7.2">a priori Factors</a>
</li>
<li>7.3.   <a href="#rfc.section.7.3">Measurement Interval</a>
</li>
<li>7.4.   <a href="#rfc.section.7.4">Bulk Transfer Capacity Reporting</a>
</li>
<li>7.5.   <a href="#rfc.section.7.5">Variability in Bulk Transfer Capacity</a>
</li>
<li>8.   <a href="#rfc.section.8">Test Streams and Sample Size</a>
</li>
<li>8.1.   <a href="#rfc.section.8.1">Test Stream Characteristics</a>
</li>
<li>8.2.   <a href="#rfc.section.8.2">Sample Size</a>
</li>
<li>9.   <a href="#rfc.section.9">IANA Considerations</a>
</li>
<li>10.   <a href="#rfc.section.10">Security Considerations</a>
</li>
<li>11.   <a href="#rfc.section.11">Acknowledgements</a>
</li>
<li>12.   <a href="#rfc.references">References</a>
</li>
<li>12.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>12.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">When designing measurements of IP networks and presenting the results, knowledge of the audience is a key consideration. To present a useful and relevant portrait of network conditions, one must answer the following question:</p>
<p id="rfc.section.1.p.2">"How will the results be used?"</p>
<p id="rfc.section.1.p.3">There are two main audience categories:</p>
<p></p>

<ol>
<li>Network Characterization - describes conditions in an IP network for quality assurance, troubleshooting, modeling, Service Level Agreements (SLA), etc. The point-of-view looks inward, toward the network, and the consumer intends their actions there.</li>
<li>Application Performance Estimation - describes the network conditions in a way that facilitates determining affects on user applications, and ultimately the users themselves. This point-of-view looks outward, toward the user(s), accepting the network as-is. This consumer intends to estimate a network-dependent aspect of performance, or design some aspect of an application's accommodation of the network. (These are *not* application metrics, they are defined at the IP layer.)</li>
</ol>

<p>This memo considers how these different points-of-view affect both the measurement design (parameters and options of the metrics) and statistics reported when serving their needs.</p>
<p id="rfc.section.1.p.5">The IPPM framework <a href="#RFC2330">[RFC2330]</a> and other RFCs describing IPPM metrics provide a background for this memo.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Purpose and Scope</h1>
<p id="rfc.section.2.p.1">The purpose of this memo is to clearly delineate two points-of-view (POV) for using measurements, and describe their effects on the test design, including the selection of metric parameters and reporting the results.</p>
<p id="rfc.section.2.p.2">The scope of this memo primarily covers the design and reporting of the loss and delay metrics <a href="#RFC2680">[RFC2680]</a> <a href="#RFC2679">[RFC2679]</a>. It will also discuss the delay variation <a href="#RFC3393">[RFC3393]</a> and reordering metrics <a href="#RFC4737">[RFC4737]</a> where applicable.</p>
<p id="rfc.section.2.p.3">With capacity metrics growing in relevance to the industry, the memo also covers POV and reporting considerations for metrics resulting from the Bulk Transfer Capacity Framework <a href="#RFC3148">[RFC3148]</a> and Network Capacity Definitions <a href="#RFC5136">[RFC5136]</a>. These memos effectively describe two different categories of metrics,</p>
<p></p>

<ul>
<li>
<a href="#RFC3148">[RFC3148]</a> with congestion flow-control and the notion of unique data bits delivered, and</li>
<li>
<a href="#RFC5136">[RFC5136]</a> using a definition of raw capacity without the restrictions of data uniqueness or congestion-awareness.</li>
</ul>

<p>It might seem at first glance that each of these metrics has an obvious audience (Raw = Network Characterization, Restricted = Application Performance), but reality is more complex and consistent with the overall topic of capacity measurement and reporting. For example, TCP is usually used in Restricted capacity measurement methods, while UDP appears in Raw capacity measurement. The Raw and Restricted capacity metrics will be treated in separate sections, although they share one common reporting issue: representing variability in capacity metric results as part of a long-term report.</p>
<p id="rfc.section.2.p.5">Sampling, or the design of the active packet stream that is the basis for the measurements, is also discussed.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Reporting Results</h1>
<p id="rfc.section.3.p.1">This section gives an overview of recommendations, followed by additional considerations for reporting results in the "long-term", based on the discussion and conclusions of the major sections that follow.</p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Overview of Metric Statistics</h1>
<p id="rfc.section.3.1.p.1">This section gives an overview of reporting recommendations for the loss, delay, and delay variation metrics.</p>
<p id="rfc.section.3.1.p.2">The minimal report on measurements MUST include both Loss and Delay Metrics.</p>
<p id="rfc.section.3.1.p.3">For Packet Loss, the loss ratio defined in <a href="#RFC2680">[RFC2680]</a> is a sufficient starting point, especially the guidance for setting the loss threshold waiting time. We have calculated a waiting time above that should be sufficient to differentiate between packets that are truly lost or have long finite delays under general measurement circumstances, 51 seconds. Knowledge of specific conditions can help to reduce this threshold, but 51 seconds is considered to be manageable in practice.</p>
<p id="rfc.section.3.1.p.4">We note that a loss ratio calculated according to <a href="#Y.1540">[Y.1540]</a> would exclude errored packets from the numerator. In practice, the difference between these two loss metrics is small if any, depending on whether the last link prior to the destination contributes errored packets.</p>
<p id="rfc.section.3.1.p.5">For Packet Delay, we recommend providing both the mean delay and the median delay with lost packets designated undefined (as permitted by <a href="#RFC2679">[RFC2679]</a>). Both statistics are based on a conditional distribution, and the condition is packet arrival prior to a waiting time dT, where dT has been set to take maximum packet lifetimes into account, as discussed below. Using a long dT helps to ensure that delay distributions are not truncated.</p>
<p id="rfc.section.3.1.p.6">For Packet Delay Variation (PDV), the minimum delay of the conditional distribution should be used as the reference delay for computing PDV according to <a href="#Y.1540">[Y.1540]</a> or <a href="#RFC5481">[RFC5481]</a> and <a href="#RFC3393">[RFC3393]</a>. A useful value to report is a pseudo range of delay variation based on calculating the difference between a high percentile of delay and the minimum delay. For example, the 99.9%-ile minus the minimum will give a value that can be compared with objectives in <a href="#Y.1541">[Y.1541]</a>.</p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> Long-Term Reporting Considerations</h1>
<p><a href="#I-D.ietf-ippm-reporting">[I-D.ietf-ippm-reporting]</a> describes methods to conduct measurements and report the results on a near-immediate time scale (10 seconds, which we consider to be "short-term").</p>
<p id="rfc.section.3.2.p.2">Measurement intervals and reporting intervals need not be the same length. Sometimes, the user is only concerned with the performance levels achieved over a relatively long interval of time (e.g, days, weeks, or months, as opposed to 10 seconds). However, there can be risks involved with running a measurement continuously over a long period without recording intermediate results:</p>
<p></p>

<ul>
<li>Temporary power failure may cause loss of all the results to date.</li>
<li>Measurement system timing synchronization signals may experience a temporary outage, causing sub-sets of measurements to be in error or invalid.</li>
<li>Maintenance may be necessary on the measurement system, or its connectivity to the network under test.</li>
</ul>

<p>For these and other reasons, such as </p>

<ul>
<li>the constraint to collect measurements on intervals similar to user session length, or</li>
<li>the dual-use of measurements in monitoring activities where results are needed on a period of a few minutes,</li>
</ul>

<p>there is value in conducting measurements on intervals that are much shorter than the reporting interval.</p>
<p id="rfc.section.3.2.p.4">There are several approaches for aggregating a series of measurement results over time in order to make a statement about the longer reporting interval. One approach requires the storage of all metric singletons collected throughout the reporting interval, even though the measurement interval stops and starts many times.</p>
<p id="rfc.section.3.2.p.5">Another approach is described in <a href="#RFC5835">[RFC5835]</a> as "temporal aggregation". This approach would estimate the results for the reporting interval based on many individual measurement interval statistics (results) alone. The result would ideally appear in the same form as though a continuous measurement was conducted. A memo to address the details of temporal aggregation is yet to be prepared.</p>
<p id="rfc.section.3.2.p.6">Yet another approach requires a numerical objective for the metric, and the results of each measurement interval are compared with the objective. Every measurement interval where the results meet the objective contribute to the fraction of time with performance as specified. When the reporting interval contains many measurement intervals it is possible to present the results as "metric A was less than or equal to objective X during Y% of time.</p>
<p id="rfc.section.3.2.p.7">NOTE that numerical thresholds of acceptability are not set in IETF performance work and are explicitly excluded from the IPPM charter.</p>
<p id="rfc.section.3.2.p.8">In all measurement, it is important to avoid unintended synchronization with network events. This topic is treated in <a href="#RFC2330">[RFC2330]</a> for Poisson-distributed inter-packet time streams, and <a href="#RFC3432">[RFC3432]</a> for Periodic streams. Both avoid synchronization through use of random start times.</p>
<p id="rfc.section.3.2.p.9">There are network conditions where it is simply more useful to report the connectivity status of the Source-Destination path, and to distinguish time intervals where connectivity can be demonstrated from other time intervals (where connectivity does not appear to exist).  <a href="#RFC2678">[RFC2678]</a> specifies a number of one-way and two connectivity metrics of increasing complexity. In this memo, we RECOMMEND that long term reporting of loss, delay, and other metrics be limited to time intervals where connectivity can be demonstrated, and other intervals be summarized as percent of time where connectivity does not appear to exist. We note that this same approach has been adopted in ITU-T Recommendation <a href="#Y.1540">[Y.1540]</a> where performance parameters are only valid during periods of service "availability" (evaluated according to a function based on packet loss, and sustained periods of loss ratio greater than a threshold are declared "unavailable").</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Effect of POV on the Loss Metric</h1>
<p id="rfc.section.4.p.1">This section describes the ways in which the Loss metric can be tuned to reflect the preferences of the two audience categories, or different POV. The waiting time to declare a packet lost, or loss threshold is one area where there would appear to be a difference, but the ability to post-process the results may resolve it.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Loss Threshold</h1>
<p><a href="#RFC2680">RFC 2680</a> <cite title="NONE">[RFC2680]</cite> defines the concept of a waiting time for packets to arrive, beyond which they are declared lost. The text of the RFC declines to recommend a value, instead saying that "good engineering, including an understanding of packet lifetimes, will be needed in practice." Later, in the methodology, they give reasons for waiting "a reasonable period of time", and leaving the definition of "reasonable" intentionally vague.</p>
<h1 id="rfc.section.4.1.1">
<a href="#rfc.section.4.1.1">4.1.1.</a> Network Characterization</h1>
<p id="rfc.section.4.1.1.p.1">Practical measurement experience has shown that unusual network circumstances can cause long delays. One such circumstance is when routing loops form during IGP re-convergence following a failure or drastic link cost change. Packets will loop between two routers until new routes are installed, or until the IPv4 Time-to-Live (TTL) field (or the IPv6 Hop Limit) decrements to zero. Very long delays on the order of several seconds have been measured <a href="#Casner">[Casner]</a> <a href="#Cia03">[Cia03]</a>.</p>
<p id="rfc.section.4.1.1.p.2">Therefore, network characterization activities prefer a long waiting time in order to distinguish these events from other causes of loss (such as packet discard at a full queue, or tail drop). This way, the metric design helps to distinguish more reliably between packets that might yet arrive, and those that are no longer traversing the network.</p>
<div id="#rfc.figure.1"></div>
<div id="#eqD"></div>
<p id="rfc.section.4.1.1.p.3">It is possible to calculate a worst-case waiting time, assuming that a routing loop is the cause. We model the path between Source and Destination as a series of delays in links (t) and queues (q), as these two are the dominant contributors to delay. The normal path delay across n hops without encountering a loop, D, is</p>

<p></p>
<pre>           n
          ---
          \
D = t  +   &gt;   t  + q
     0    /     i    i
          ---
         i = 1</pre>
<p></p>
<p id="rfc.section.4.1.1.p.4">and the time spent in the loop with L hops, is</p>
<div id="#rfc.figure.2"></div>
<div id="#eqR"></div>
<p></p>

<p></p>
<pre>      i + L-1
       ---
       \                         (TTL - n)
R = C   &gt;   t  + q  where C    = ---------
       /     i    i        max       L
       ---
        i  </pre>
<p></p>
<p id="rfc.section.4.1.1.p.6">and where C is the number of times a packet circles the loop.</p>
<p id="rfc.section.4.1.1.p.7">If we take the delays of all links and queues as 100ms each, the TTL=255, the number of hops n=5 and the hops in the loop L=4, then</p>
<p id="rfc.section.4.1.1.p.8">D = 1.1 sec and R ~= 50 sec, and D + R ~= 51.1 seconds</p>
<p id="rfc.section.4.1.1.p.9">We note that the link delays of 100ms would span most continents, and a constant queue length of 100ms is also very generous. When a loop occurs, it is almost certain to be resolved in 10 seconds or less. The value calculated above is an upper limit for almost any realistic circumstance.</p>
<p id="rfc.section.4.1.1.p.10">A waiting time threshold parameter, dT, set consistent with this calculation would not truncate the delay distribution (possibly causing a change in its mathematical properties), because the packets that might arrive have been given sufficient time to traverse the network.</p>
<p id="rfc.section.4.1.1.p.11">It is worth noting that packets that are stored and deliberately forwarded at a much later time constitute a replay attack on the measurement system, and are beyond the scope of normal performance reporting.</p>
<h1 id="rfc.section.4.1.2">
<a href="#rfc.section.4.1.2">4.1.2.</a> Application Performance</h1>
<p id="rfc.section.4.1.2.p.1">Fortunately, application performance estimation activities are not adversely affected by the estimated worst-case transfer time.  Although the designer's tendency might be to set the Loss Threshold at a value equivalent to a particular application's threshold, this specific threshold can be applied when post-processing the measurements. A shorter waiting time can be enforced by locating packets with delays longer than the application's threshold, and re-designating such packets as lost. Thus, the measurement system can use a single loss threshold and support both application and network performance POVs simultaneously.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Errored Packet Designation</h1>
<p id="rfc.section.4.2.p.1">RFC 2680 designates packets that arrive containing errors as lost packets. Many packets that are corrupted by bit errors are discarded within the network and do not reach their intended destination.</p>
<p id="rfc.section.4.2.p.2">This is consistent with applications that would check the payload integrity at higher layers, and discard the packet. However, some applications prefer to deal with errored payloads on their own, and even a corrupted payload is better than no packet at all.</p>
<p id="rfc.section.4.2.p.3">To address this possibility, and to make network characterization more complete, it is recommended to distinguish between packets that do not arrive (lost) and errored packets that arrive (conditionally lost).</p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> Causes of Lost Packets</h1>
<p id="rfc.section.4.3.p.1">Although many measurement systems use a waiting time to determine if a packet is lost or not, most of the waiting is in vain. The packets are no-longer traversing the network, and have not reached their destination.</p>
<p id="rfc.section.4.3.p.2">There are many causes of packet loss, including:</p>
<p></p>

<ol>
<li>Queue drop, or discard</li>
<li>Corruption of the IP header, or other essential header info</li>
<li>TTL expiration (or use of a TTL value that is too small)</li>
<li>Link or router failure</li>
</ol>

<p>After waiting sufficient time, packet loss can probably be attributed to one of these causes.</p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> Summary for Loss</h1>
<p id="rfc.section.4.4.p.1">Given that measurement post-processing is possible (even encouraged in the definitions of IPPM metrics), measurements of loss can easily serve both points of view:</p>
<p></p>

<ul>
<li>Use a long waiting time to serve network characterization and revise results for specific application delay thresholds as needed.</li>
<li>Distinguish between errored packets and lost packets when possible to aid network characterization, and combine the results for application performance if appropriate.</li>
</ul>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Effect of POV on the Delay Metric</h1>
<p id="rfc.section.5.p.1">This section describes the ways in which the Delay metric can be tuned to reflect the preferences of the two consumer categories, or different POV.</p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> Treatment of Lost Packets</h1>
<p id="rfc.section.5.1.p.1">The Delay Metric <a href="#RFC2679">[RFC2679]</a> specifies the treatment of packets that do not successfully traverse the network: their delay is undefined.</p>
<p id="rfc.section.5.1.p.2">" &gt;&gt;The *Type-P-One-way-Delay* from Src to Dst at T is undefined (informally, infinite)&lt;&lt; means that Src sent the first bit of a Type-P packet to Dst at wire-time T and that Dst did not receive that packet."</p>
<p id="rfc.section.5.1.p.3">It is an accepted, but informal practice to assign infinite delay to lost packets. We next look at how these two different treatments align with the needs of measurement consumers who wish to characterize networks or estimate application performance. Also, we look at the way that lost packets have been treated in other metrics: delay variation and reordering.</p>
<h1 id="rfc.section.5.1.1">
<a href="#rfc.section.5.1.1">5.1.1.</a> Application Performance</h1>
<p id="rfc.section.5.1.1.p.1">Applications need to perform different functions, dependent on whether or not each packet arrives within some finite tolerance. In other words, a receivers' packet processing takes one of two directions (or "forks" in the road):</p>
<p></p>

<ul>
<li>Packets that arrive within expected tolerance are handled by processes that remove headers, restore smooth delivery timing (as in a de-jitter buffer), restore sending order, check for errors in payloads, and many other operations.</li>
<li>Packets that do not arrive when expected spawn other processes that attempt recovery from the apparent loss, such as retransmission requests, loss concealment, or forward error correction to replace the missing packet.</li>
</ul>

<p>So, it is important to maintain a distinction between packets that actually arrive, and those that do not. Therefore, it is preferable to leave the delay of lost packets undefined, and to characterize the delay distribution as a conditional distribution (conditioned on arrival).</p>
<h1 id="rfc.section.5.1.2">
<a href="#rfc.section.5.1.2">5.1.2.</a> Network Characterization</h1>
<p id="rfc.section.5.1.2.p.1">In this discussion, we assume that both loss and delay metrics will be reported for network characterization (at least).</p>
<p id="rfc.section.5.1.2.p.2">Assume packets that do not arrive are reported as Lost, usually as a fraction of all sent packets. If these lost packets are assigned undefined delay, then network's inability to deliver them (in a timely way) is captured only in the loss metric when we report statistics on the Delay distribution conditioned on the event of packet arrival (within the Loss waiting time threshold). We can say that the Delay and Loss metrics are Orthogonal, in that they convey non-overlapping information about the network under test.</p>
<p id="rfc.section.5.1.2.p.3">However, if we assign infinite delay to all lost packets, then:</p>
<p></p>

<ul>
<li>The delay metric results are influenced both by packets that arrive and those that do not.</li>
<li>The delay singleton and the loss singleton do not appear to be orthogonal (Delay is finite when Loss=0, Delay is infinite when Loss=1).</li>
<li>The network is penalized in both the loss and delay metrics, effectively double-counting the lost packets.</li>
</ul>
<p id="rfc.section.5.1.2.p.5">As further evidence of overlap, consider the Cumulative Distribution Function (CDF) of Delay when the value positive infinity is assigned to all lost packets. <a href="#CDF">Figure 3</a> shows a CDF where a small fraction of packets are lost.</p>
<div id="#rfc.figure.3"></div>
<div id="#CDF"></div>
<p></p>

<p></p>
<pre> 1 | - - - - - - - - - - - - - - - - - -+
   |                                    |
   |          _..----''''''''''''''''''''
   |      ,-''
   |    ,'
   |   /                         Mass at
   |  /                          +infinity
   | /                           = fraction
   ||                            lost
   |/
 0 |_____________________________________

   0               Delay               +o0</pre>
<p></p>
<p id="rfc.section.5.1.2.p.7">We note that a Delay CDF that is conditioned on packet arrival would not exhibit this apparent overlap with loss.</p>
<p id="rfc.section.5.1.2.p.8">Although infinity is a familiar mathematical concept, it is somewhat disconcerting to see any time-related metric reported as infinity, in the opinion of the authors. Questions are bound to arise, and tend to detract from the goal of informing the consumer with a performance report.</p>
<h1 id="rfc.section.5.1.3">
<a href="#rfc.section.5.1.3">5.1.3.</a> Delay Variation</h1>
<p><a href="#RFC3393">[RFC3393]</a> excludes lost packets from samples, effectively assigning an undefined delay to packets that do not arrive in a reasonable time. Section 4.1 describes this specification and its rationale (ipdv = inter-packet delay variation in the quote below).</p>
<p id="rfc.section.5.1.3.p.2">"The treatment of lost packets as having "infinite" or "undefined" delay complicates the derivation of statistics for ipdv.  Specifically, when packets in the measurement sequence are lost, simple statistics such as sample mean cannot be computed. One possible approach to handling this problem is to reduce the event space by conditioning. That is, we consider conditional statistics; namely we estimate the mean ipdv (or other derivative statistic) conditioned on the event that selected packet pairs arrive at the destination (within the given timeout). While this itself is not without problems (what happens, for example, when every other packet is lost), it offers a way to make some (valid) statements about ipdv, at the same time avoiding events with undefined outcomes."</p>
<p id="rfc.section.5.1.3.p.3">We note that the argument above applies to all forms of packet delay variation that can be constructed using the "selection function" concept of <a href="#RFC3393">[RFC3393]</a>. In recent work the two main forms of delay variation metrics have been compared and the results are summarized in <a href="#RFC5481">[RFC5481]</a>.</p>
<h1 id="rfc.section.5.1.4">
<a href="#rfc.section.5.1.4">5.1.4.</a> Reordering</h1>
<p><a href="#RFC4737">[RFC4737]</a>defines metrics that are based on evaluation of packet arrival order, and include a waiting time to declare a packet lost (to exclude them from further processing).</p>
<p id="rfc.section.5.1.4.p.2">If packets are assigned a delay value, then the reordering metric would declare any packets with infinite delay to be reordered, because their sequence numbers will surely be less than the "Next Expected" threshold when (or if) they arrive. But this practice would fail to maintain orthogonality between the reordering metric and the loss metric. Confusion can be avoided by designating the delay of non-arriving packets as undefined, and reserving delay values only for packets that arrive within a sufficiently long waiting time.</p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> Preferred Statistics</h1>
<p id="rfc.section.5.2.p.1">Today in network characterization, the sample mean is one statistic that is almost ubiquitously reported. It is easily computed and understood by virtually everyone in this audience category. Also, the sample is usually filtered on packet arrival, so that the mean is based a conditional distribution.</p>
<p id="rfc.section.5.2.p.2">The median is another statistic that summarizes a distribution, having somewhat different properties from the sample mean. The median is stable in distributions with a few outliers or without them.  However, the median's stability prevents it from indicating when a large fraction of the distribution changes value. 50% or more values would need to change for the median to capture the change.</p>
<p id="rfc.section.5.2.p.3">Both the median and sample mean have difficulty with bimodal distributions. The median will reside in only one of the modes, and the mean may not lie in either mode range. For this and other reasons, additional statistics such as the minimum, maximum, and 95%-ile have value when summarizing a distribution.</p>
<p id="rfc.section.5.2.p.4">When both the sample mean and median are available, a comparison will sometimes be informative, because these two statistics are equal only when the delay distribution is perfectly symmetrical.</p>
<p id="rfc.section.5.2.p.5">Also, these statistics are generally useful from the Application Performance POV, so there is a common set that should satisfy audiences.</p>
<p id="rfc.section.5.2.p.6">Plots of the delay distribution may also be useful when single-value statistics indicate that new conditions are present. An empirically-derived probability distribution function will usually describe multiple modes more efficiently than any other form of result.</p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> Summary for Delay</h1>
<p id="rfc.section.5.3.p.1">From the perspectives of:</p>
<p></p>

<ol>
<li>application/receiver analysis, where subsequent processing depends on whether the packet arrives or times-out,</li>
<li>straightforward network characterization without double-counting defects, and</li>
<li>consistency with Delay variation and Reordering metric definitions,</li>
</ol>
<p id="rfc.section.5.3.p.3">the most efficient practice is to distinguish between truly lost and delayed packets with a sufficiently long waiting time, and to designate the delay of non-arriving packets as undefined.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Effect of POV on Raw Capacity Metrics</h1>
<p id="rfc.section.6.p.1">This section describes the ways that raw capacity metrics can be tuned to reflect the preferences of the two audiences, or different Points-of-View (POV). Raw capacity refers to the metrics defined in <a href="#RFC5136">[RFC5136]</a> which do not include restrictions such as data uniqueness or flow-control response to congestion.</p>
<p id="rfc.section.6.p.2">In summary, the metrics considered are IP-layer Capacity, Utilization (or used capacity), and Available Capacity, for individual links and complete paths. These three metrics form a triad: knowing one metric constrains the other two (within their allowed range), and knowing two determines the third. The link metrics have another key aspect in common: they are single-measurement-point metrics at the egress of a link. The path Capacity and Available Capacity are derived by examining the set of single-point link measurements and taking the minimum value.</p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> Type-P Parameter</h1>
<p id="rfc.section.6.1.p.1">The concept of "packets of type-P" is defined in <a href="#RFC2330">[RFC2330]</a>. The type-P categorization has critical relevance in all forms of capacity measurement and reporting. The ability to categorize packets based on header fields for assignment to different queues and scheduling mechanisms is now common place. When un-used resources are shared across queues, the conditions in all packet categories will affect capacity and related measurements. This is one source of variability in the results that all audiences would prefer to see reported in a useful and easily understood way.</p>
<p id="rfc.section.6.1.p.2">Type-P in OWAMP and TWAMP is essentially confined to the Diffserv Codepoint <a href="#RFC4656">[RFC4656]</a>. DSCP is the most common qualifier for type-P.</p>
<p id="rfc.section.6.1.p.3">Each audience will have a set of type-P qualifications and value combinations that are of interest. Measurements and reports SHOULD have the flexibility to per-type and aggregate performance.</p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> a priori Factors</h1>
<p id="rfc.section.6.2.p.1">The audience for Network Characterization may have detailed information about each link that comprises a complete path (due to ownership, for example), or some of the links in the path but not others, or none of the links.</p>
<p id="rfc.section.6.2.p.2">There are cases where the measurement audience only has information on one of the links (the local access link), and wishes to measure one or more of the raw capacity metrics. This scenario is quite common, and has spawned a substantial number of experimental measurement methods [ref to CAIDA survey page, etc.]. Many of these methods respect that their users want a result fairly quickly and in a one-trial. Thus, the measurement interval is kept short (a few seconds to a minute). For long-term reporting, a sample of short term results need to be summarized.</p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> IP-layer Capacity</h1>
<p id="rfc.section.6.3.p.1">For links, this metric's theoretical maximum value can be determined from the physical layer bit rate and the bit rate reduction due to the layers between the physical layer and IP. When measured, this metric takes additional factors into account, such as the ability of the sending device to process and forward traffic under various conditions. For example, the arrival of routing updates may spawn high priority processes that reduce the sending rate temporarily. Thus, the measured capacity of a link will be variable, and the maximum capacity observed applies to a specific time, time interval, and other relevant circumstances.</p>
<p id="rfc.section.6.3.p.2">For paths composed of a series of links, it is easy to see how the sources of variability for the results grow with each link in the path. Results variability will be discussed in more detail below.</p>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> IP-layer Utilization</h1>
<p id="rfc.section.6.4.p.1">The ideal metric definition of Link Utilization <a href="#RFC5136">[RFC5136]</a> is based on the actual usage (bits successfully received during a time interval) and the Maximum Capacity for the same interval.</p>
<p id="rfc.section.6.4.p.2">In practice, Link Utilization can be calculated by counting the IP-layer (or other layer) octets received over a time interval and dividing by the theoretical maximum of octets that could have been delivered in the same interval. A commonly used time interval is 5 minutes, and this interval has been sufficient to support network operations and design for some time. 5 minutes is somewhat long compared with the expected download time for web pages, but short with respect to large file transfers and TV program viewing. It is fair to say that considerable variability is concealed by reporting a single (average) Utilization value for each 5 minute interval. Some performance management systems have begun to make 1 minute averages available.</p>
<p id="rfc.section.6.4.p.3">There is also a limit on the smallest useful measurement interval.  Intervals on the order of the serialization time for a single Maximum Transmission Unit (MTU) packet will observe on/off behavior and report 100% or 0%. The smallest interval needs to be some multiple of MTU serialization time for averaging to be effective.</p>
<h1 id="rfc.section.6.5">
<a href="#rfc.section.6.5">6.5.</a> IP-layer Available Capacity</h1>
<p id="rfc.section.6.5.p.1">The Available Capacity of a link can be calculated using the Capacity and Utilization metrics.</p>
<p id="rfc.section.6.5.p.2">When Available capacity of a link or path is estimated through some measurement technique, the following parameters SHOULD be reported:</p>
<p></p>

<ul>
<li>Name and reference to the exact method of measurement</li>
<li>IP packet length, octets (including IP header)</li>
<li>Maximum Capacity that can be assessed in the measurement configuration</li>
<li>The time a duration of the measurement</li>
<li>All other parameters specific to the measurement method</li>
</ul>

<p>Many methods of Available capacity measurement have a maximum capacity that they can measure, and this maximum may be less than the actual Available capacity of the link or path. Therefore, it is important to know the capacity value beyond which there will be no measured improvement.</p>
<p id="rfc.section.6.5.p.4">The Application Design audience may have a target capacity value and simply wish to assess whether there is sufficient Available Capacity. This case simplifies measurement of link and path capacity to some degree, as long as the measurable maximum exceeds the target capacity.</p>
<h1 id="rfc.section.6.6">
<a href="#rfc.section.6.6">6.6.</a> Variability in Utilization and Avail. Capacity</h1>
<p id="rfc.section.6.6.p.1">As with most metrics and measurements, assessing the consistency or variability in the results gives a the user an intuitive feel for the degree (or confidence) that any one value is representative of other results, or the underlying distribution from which these singleton measurements have come.</p>
<p id="rfc.section.6.6.p.2">Two questions are raised here for further discussion:</p>
<p id="rfc.section.6.6.p.3">What ways can Utilization be measured and summarized to describe the potential variability in a useful way?</p>
<p id="rfc.section.6.6.p.4">How can the variability in Available Capacity estimates be reported, so that the confidence in the results is also conveyed?</p>
<p id="rfc.section.6.6.p.5">Proposal for Discussion:</p>
<h1 id="rfc.section.6.6.1">
<a href="#rfc.section.6.6.1">6.6.1.</a> General Summary of Variability</h1>
<p id="rfc.section.6.6.1.p.1">With a set of singleton Utilization or Available Capacity estimates, each representing a minimum time to ascertain the estimate, we propose to describe the variation over the set of singletons as though reporting summary statistics of a distribution.  Four useful summary statistics are:</p>
<p></p>

<ul>
<li>Minimum, Maximum, and the Range they define</li>
<li>Mode</li>
</ul>

<p>For an on-going series of singleton estimates, we propose a moving average of n estimates to provide a single value estimate to more easily distinguish substantial changes in performance over time. For example, in a window of n singletons observed in time interval, t, a percentage change of x% is declared to be a submstantial change and reported as an exception.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Effect of POV on Restricted Capacity Metrics</h1>
<p id="rfc.section.7.p.1">This section describes the ways that restricted capacity metrics can be tuned to reflect the preferences of the two audiences, or different Points-of-View (POV). Raw capacity refers to the metrics defined in <a href="#RFC3148">[RFC3148]</a> which include restrictions such as data uniqueness or flow-control response to congestion.</p>
<p id="rfc.section.7.p.2">In primary metric considered is Bulk Transfer Capacity (BTC) for complete paths. <a href="#RFC3148">[RFC3148]</a> defines</p>
<p id="rfc.section.7.p.3">BTC = data_sent / elapsed_time</p>
<p id="rfc.section.7.p.4">for a connection with congestion-aware flow control, where data_sent is the total of unique payload bits (no headers).</p>
<p id="rfc.section.7.p.5">We note that this definition *differs* from the raw capacity definition in Section 2.3.1 of <a href="#RFC5136">[RFC5136]</a>, where IP-layer Capacity *includes* all bits in the IP header and payload. This means that Restricted Capacity BTC is already operating at a disadvantage when compared to the raw capacity at layers below TCP.  Further, there are cases where "THE IP-layer" is encapsulated in another IP-layer or other form of tunneling protocol, designating more and more of the fundamental transport capacity as header bits that are pure overhead to the BTC measurement.</p>
<p id="rfc.section.7.p.6">When thinking about the triad of raw capacity metrics, BTC is most akin to the "IP-Type-P Available Path Capacity", at least in the eyes of a network user who seeks to know what transmission performance a path might support.</p>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> Type-P Parameter and Type-C Parameter</h1>
<p id="rfc.section.7.1.p.1">The concept of "packets of type-P" is defined in <a href="#RFC2330">[RFC2330]</a>. The considerations for Restricted Capacity are identical to the raw capacity section on this topic, with the addition that the various fields and options in the TCP header MUST be included in the description.</p>
<p id="rfc.section.7.1.p.2">The vast array of TCP flow control options are not well-captured by Type-P, because they do not exist in the TCP header bits. Therefore, we introduce a new notion here: TCP Configuration of "Type-C". The elements of Type-C describe all of the settings for TCP options and congestion control algorithm variables, including the main form of congestion control in use.</p>
<h1 id="rfc.section.7.2">
<a href="#rfc.section.7.2">7.2.</a> a priori Factors</h1>
<p id="rfc.section.7.2.p.1">The audience for Network Characterization may have detailed information about each link that comprises a complete path (due to ownership, for example), or some of the links in the path but not others, or none of the links.</p>
<p id="rfc.section.7.2.p.2">There are cases where the measurement audience only has information on one of the links (the local access link), and wishes to measure one or more BTC metrics. This scenario is quite common, and has spawned a substantial number of experimental measurement methods [ref to CAIDA survey page, etc.]. Many of these methods respect that their users want a result fairly quickly and in a one-trial. Thus, the measurement interval is kept short (a few seconds to a minute). For long-term reporting, a sample of short term results need to be summarized.</p>
<h1 id="rfc.section.7.3">
<a href="#rfc.section.7.3">7.3.</a> Measurement Interval</h1>
<p id="rfc.section.7.3.p.1">There are limits on a useful measurement interval for BTC. Three factors that influence the interval duration are listed below:</p>

<ol>
<li>Measurements may choose to include or exclude the 3-way handshake of TCP connection establishment, which requires at least 1.5 * RTT and contains both the delay of the path and the host processing time for responses. However, user experience includes the 3-way handshake for all new TCP connections.</li>
<li>Measurements may choose to include or exclude Slow-Start, preferring instead to focus on a portion of the transfer that represents "equilibrium" &lt;&lt;&lt;&lt; which needs a definition for this purpose &gt;&gt;&gt;&gt;. However, user experience includes the Slow-Start for all new TCP connections.</li>
<li>Measurements may choose to use a fixed block of data to transfer, where the size of the block has a relationship to the file size of the application of interest. This approach yields variable size measurement intervals, where a path faster BTC is measured for less time than a slower path, an this has implications when path impairments are time-varying, or transient.  Users are likely to turn their immediate attention elsewhere when a very large file must be transferred, thus they do not directly experience such a long transfer -- they see the result (success or fail) and possibly an objective measurement of the transfer time (which will likely include the 3-way handshake, Slow-start, and application file management processing time as well as the BTC).</li>
</ol>
<p id="rfc.section.7.3.p.2">Individual measurement intervals may be short or long, but there is a need to report the results on a long-term basis that captures the BTC variability experienced between each interval. Consistent BTC is a valuable commodity along with the value attained.</p>
<h1 id="rfc.section.7.4">
<a href="#rfc.section.7.4">7.4.</a> Bulk Transfer Capacity Reporting</h1>
<p id="rfc.section.7.4.p.1">When BTC of a link or path is estimated through some measurement technique, the following parameters SHOULD be reported:</p>
<p></p>

<ul>
<li>Name and reference to the exact method of measurement</li>
<li>Maximum Transmission Unit (MTU)</li>
<li>Maximum BTC that can be assessed in the measurement configuration</li>
<li>The time and duration of the measurement</li>
<li>The number of BTC connections used simultaneously</li>
<li>*All* other parameters specific to the measurement method, especially the Congestion Control algorithm in use</li>
</ul>
<p id="rfc.section.7.4.p.3">See also [http://tools.ietf.org/wg/ippm/draft-ietf-ippm-tcp-throughput-tm/]</p>
<p id="rfc.section.7.4.p.4">Many methods of Bulk Transfer Capacity measurement have a maximum capacity that they can measure, and this maximum may be less than the available capacity of the link or path. Therefore, it is important to specify the measured BTC value beyond which there will be no measured improvement.</p>
<p id="rfc.section.7.4.p.5">The Application Design audience may have a target capacity value and simply wish to assess whether there is sufficient BTC. This case simplifies measurement of link and path capacity to some degree, as long as the measurable maximum exceeds the target capacity.</p>
<h1 id="rfc.section.7.5">
<a href="#rfc.section.7.5">7.5.</a> Variability in Bulk Transfer Capacity</h1>
<p id="rfc.section.7.5.p.1">As with most metrics and measurements, assessing the consistency or variability in the results gives a the user an intuitive feel for the degree (or confidence) that any one value is representative of other results, or the underlying distribution from which these singleton measurements have come.</p>
<p id="rfc.section.7.5.p.2">Two questions are raised here for further discussion:</p>
<p id="rfc.section.7.5.p.3">What ways can BTC be measured and summarized to describe the potential variability in a useful way?</p>
<p id="rfc.section.7.5.p.4">How can the variability in BTC estimates be reported, so that the confidence in the results is also conveyed?</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> Test Streams and Sample Size</h1>
<p id="rfc.section.8.p.1">This section discusses two key aspects of measurement that are sometimes omitted from the report: the description of the test stream on which the measurements are based, and the sample size.</p>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> Test Stream Characteristics</h1>
<p id="rfc.section.8.1.p.1">Network Characterization has traditionally used Poisson-distributed inter-packet spacing, as this provides an unbiased sample. The average inter-packet spacing may be selected to allow observation of specific network phenomena. Other test streams are designed to sample some property of the network, such as the presence of congestion, link bandwidth, or packet reordering.</p>
<p id="rfc.section.8.1.p.2">If measuring a network in order to make inferences about applications or receiver performance, then there are usually efficiencies derived from a test stream that has similar characteristics to the sender. In some cases, it is essential to synthesize the sender stream, as with Bulk Transfer Capacity estimates. In other cases, it may be sufficient to sample with a "known bias", e.g., a Periodic stream to estimate real-time application performance.</p>
<h1 id="rfc.section.8.2">
<a href="#rfc.section.8.2">8.2.</a> Sample Size</h1>
<p id="rfc.section.8.2.p.1">Sample size is directly related to the accuracy of the results, and plays a critical role in the report. Even if only the sample size (in terms of number of packets) is given for each value or summary statistic, it imparts a notion of the confidence in the result.</p>
<p id="rfc.section.8.2.p.2">In practice, the sample size will be selected taking both statistical and practical factors into account. Among these factors are:</p>
<p></p>

<ol>
<li>The estimated variability of the quantity being measured</li>
<li>The desired confidence in the result (although this may be dependent on assumption of the underlying distribution of the measured quantity).</li>
<li>The effects of active measurement traffic on user traffic</li>
<li>etc.</li>
</ol>

<p>A sample size may sometimes be referred to as "large". This is a relative, and qualitative term. It is preferable to describe what one is attempting to achieve with their sample. For example, stating an implication may be helpful: this sample is large enough such that a single outlying value at ten times the "typical" sample mean (the mean without the outlying value) would influence the mean by no more than X.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.9.p.1">This document makes no request of IANA.</p>
<p id="rfc.section.9.p.2">Note to RFC Editor: this section may be removed on publication as an RFC.</p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.10.p.1">The security considerations that apply to any active measurement of live networks are relevant here as well. See <a href="#RFC4656">[RFC4656]</a>.</p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.11.p.1">The authors thank: Phil Chimento for his suggestion to employ conditional distributions for Delay, Steve Konish Jr. for his careful review and suggestions, Dave Mcdysan and Don McLachlan for useful comments based on their long experience with measurement and reporting, and Matt Zekauskas for suggestions on organizing the memo for easier consumption.</p>
<h1 id="rfc.references">
<a href="#rfc.references">12.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">12.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2330">[RFC2330]</b></td>
<td class="top">
<a href="mailto:vern@ee.lbl.gov" title="MS 50B/2239">Paxson, V.</a>, <a href="mailto:almes@advanced.org" title="Advanced Network &amp; Services, Inc.">Almes, G.</a>, <a href="mailto:mahdavi@psc.edu" title="Pittsburgh Supercomputing Center">Mahdavi, J.</a> and <a href="mailto:mathis@psc.edu" title="Pittsburgh Supercomputing Center">M. Mathis</a>, "<a href="http://tools.ietf.org/html/rfc2330">Framework for IP Performance Metrics</a>", RFC 2330, May 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2679">[RFC2679]</b></td>
<td class="top">
<a href="mailto:almes@advanced.org" title="Advanced Network &amp; Services, Inc.">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org" title="Advanced Network &amp; Services, Inc.">Kalidindi, S.</a> and <a href="mailto:matt@advanced.org" title="Advanced Network &amp; Services, Inc.">M. Zekauskas</a>, "<a href="http://tools.ietf.org/html/rfc2679">A One-way Delay Metric for IPPM</a>", RFC 2679, September 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2680">[RFC2680]</b></td>
<td class="top">
<a href="mailto:almes@advanced.org" title="Advanced Network &amp; Services, Inc.">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org" title="Advanced Network &amp; Services, Inc.">Kalidindi, S.</a> and <a href="mailto:matt@advanced.org" title="Advanced Network &amp; Services, Inc.">M. Zekauskas</a>, "<a href="http://tools.ietf.org/html/rfc2680">A One-way Packet Loss Metric for IPPM</a>", RFC 2680, September 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2678">[RFC2678]</b></td>
<td class="top">
<a href="mailto:mahdavi@psc.edu" title="Pittsburgh Supercomputing Center">Mahdavi, J.</a> and <a href="mailto:vern@ee.lbl.gov" title="Lawrence Berkeley National Laboratory">V. Paxson</a>, "<a href="http://tools.ietf.org/html/rfc2678">IPPM Metrics for Measuring Connectivity</a>", RFC 2678, September 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3148">[RFC3148]</b></td>
<td class="top">
<a>Mathis, M.</a> and <a>M. Allman</a>, "<a href="http://tools.ietf.org/html/rfc3148">A Framework for Defining Empirical Bulk Transfer Capacity Metrics</a>", RFC 3148, July 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3393">[RFC3393]</b></td>
<td class="top">
<a>Demichelis, C.</a> and <a>P. Chimento</a>, "<a href="http://tools.ietf.org/html/rfc3393">IP Packet Delay Variation Metric for IP Performance Metrics (IPPM)</a>", RFC 3393, November 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4656">[RFC4656]</b></td>
<td class="top">
<a>Shalunov, S.</a>, <a>Teitelbaum, B.</a>, <a>Karp, A.</a>, <a>Boote, J.</a> and <a>M. Zekauskas</a>, "<a href="http://tools.ietf.org/html/rfc4656">A One-way Active Measurement Protocol (OWAMP)</a>", RFC 4656, September 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3432">[RFC3432]</b></td>
<td class="top">
<a>Raisanen, V.</a>, <a>Grotefeld, G.</a> and <a>A. Morton</a>, "<a href="http://tools.ietf.org/html/rfc3432">Network performance measurement with periodic streams</a>", RFC 3432, November 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4737">[RFC4737]</b></td>
<td class="top">
<a>Morton, A.</a>, <a>Ciavattone, L.</a>, <a>Ramachandran, G.</a>, <a>Shalunov, S.</a> and <a>J. Perser</a>, "<a href="http://tools.ietf.org/html/rfc4737">Packet Reordering Metrics</a>", RFC 4737, November 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5136">[RFC5136]</b></td>
<td class="top">
<a>Chimento, P.</a> and <a>J. Ishac</a>, "<a href="http://tools.ietf.org/html/rfc5136">Defining Network Capacity</a>", RFC 5136, February 2008.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">12.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="Casner">[Casner]</b></td>
<td class="top">
<a>, </a>, "<a>A Fine-Grained View of High Performance Networking, NANOG 22 Conf.; http://www.nanog.org/mtg-0105/agenda.html</a>", May 20-22 2001.</td>
</tr>
<tr>
<td class="reference"><b id="Cia03">[Cia03]</b></td>
<td class="top">
<a>Standardized Active Measurements on a Tier 1 IP Backbone, IEEE Communications Mag., pp 90-97.</a>", June 2003.</td>, "</tr>
<tr>
<td class="reference"><b id="Y.1540">[Y.1540]</b></td>
<td class="top">
<a>ITU-T Recommendation Y.1540, </a>, "<a>Internet protocol data communication service - IP packet transfer and availability performance parameters</a>", December  2002.</td>
</tr>
<tr>
<td class="reference"><b id="Y.1541">[Y.1541]</b></td>
<td class="top">
<a>ITU-T Recommendation Y.1540, </a>, "<a>Network Performance Objectives for IP-Based Services</a>", February  2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5835">[RFC5835]</b></td>
<td class="top">
<a>Morton, A.</a> and <a>S. Van den Berghe</a>, "<a href="http://tools.ietf.org/html/rfc5835">Framework for Metric Composition</a>", RFC 5835, April 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-ippm-reporting">[I-D.ietf-ippm-reporting]</b></td>
<td class="top">
<a>Shalunov, S</a> and <a>M Swany</a>, "<a href="http://tools.ietf.org/html/draft-ietf-ippm-reporting-06">Reporting IP Performance Metrics to Users</a>", Internet-Draft draft-ietf-ippm-reporting-06, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5481">[RFC5481]</b></td>
<td class="top">
<a>Morton, A.</a> and <a>B. Claise</a>, "<a href="http://tools.ietf.org/html/rfc5481">Packet Delay Variation Applicability Statement</a>", RFC 5481, March 2009.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Al Morton</span> 
	  <span class="n hidden">
		<span class="family-name">Morton</span>
	  </span>
	</span>
	<span class="org vcardline">AT&T Labs</span>
	<span class="adr">
	  <span>200 Laurel Avenue South</span>

	  <span class="vcardline">
		<span class="locality">Middletown</span>,  
		<span class="region">NJ</span> 
		<span class="code">07748</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1 732 420 1571</span>

<span class="vcardline">EMail: <a href="mailto:acmorton@att.com">acmorton@att.com</a></span>

<span class="vcardline">URI: <a href="http://home.comcast.net/~acmacm/">http://home.comcast.net/~acmacm/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Gomathi Ramachandran</span> 
	  <span class="n hidden">
		<span class="family-name">Ramachandran</span>
	  </span>
	</span>
	<span class="org vcardline">AT&T Labs</span>
	<span class="adr">
	  <span>200 Laurel Avenue South</span>

	  <span class="vcardline">
		<span class="locality">Middletown</span>,  
		<span class="region">New Jersey</span> 
		<span class="code">07748</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1 732 420 2353</span>

<span class="vcardline">EMail: <a href="mailto:gomathi@att.com">gomathi@att.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Ganga Maguluri</span> 
	  <span class="n hidden">
		<span class="family-name">Maguluri</span>
	  </span>
	</span>
	<span class="org vcardline">AT&T Labs</span>
	<span class="adr">
	  <span>200 Laurel Avenue</span>

	  <span class="vcardline">
		<span class="locality">Middletown</span>,  
		<span class="region">New Jersey</span> 
		<span class="code">07748</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: 732-420-2486</span>

<span class="vcardline">EMail: <a href="mailto:gmaguluri@att.com">gmaguluri@att.com</a></span>

  </address>
</div>

</body>
</html>