



	   Network Working Group                             E. Stephan 
	   Internet Draft                                    France Telecom R&D 
	   Document: draft-stephan-ippm-spatial-metrics-00.txt  
	   Category: Informational                           Sept 12, 2002 

			IPPM spatial metrics measurement 


	   Status of this Memo  

	   This document is an Internet-Draft and is in full conformance with 
	   all provisions of Section 10 of RFC2026 [1] except that the right to 
	   produce derivative works is not granted. 


	   Internet-Drafts are working documents of the Internet Engineering 
	   Task Force (IETF), its areas, and its working groups. Note that 
	   other groups may also distribute working documents as Internet-
	   Drafts. Internet-Drafts are draft documents valid for a maximum of 
	   six months and may be updated, replaced, or obsoleted by other 
	   documents at any time. It is inappropriate to use Internet- Drafts 
	   as reference material or to cite them other than as "work in 
	   progress." 

	   The list of current Internet-Drafts can be accessed at 
	   http://www.ietf.org/ietf/1id-abstracts.txt. 

	   The list of Internet-Draft Shadow Directories can be accessed at 
	   http://www.ietf.org/shadow.html. 


	   Abstract 

	  The IETF IP Performance Metrics (IPPM) working group has standardized 
	  metrics for measuring end to end performance. Measurements system 
	  scope is often limited to administrative boundaries. This memo 
	  defines spatial metrics both for measuring end-to-end network 
	  performance using aggregation of sequence of network measures and for 
	  measuring the performance of segment of an IP path trajectory. It 
	  distinguishes clearly the decomposition of one end-to-end measure 
	  result in a sequence of per hop results from the aggregation of a 
	  sequence of per hop measure results in an end-to-end result. 


	   Table of Contents 

	  1.      Introduction................................................2 
	  2.      Terminology.................................................3 
	  2.1.    Spatial metric..............................................3 

   Stephan            Informational - Expires March 2003           [Page 1] 


   Internet Draft              spatial metrics              September 2002 


	  2.2.    Asynchronous spatial metrics................................3 
	  2.3.    Trajectory..................................................3 
	  3.      Motivation..................................................3 
	  3.1.    Instantaneous end to end measure decomposition..............3 
	  3.2.    End-to-end measures aggregation.............................4 
	  4.      Metrics for end-to-end measure decomposition................4 
	  4.1.    Spatial one way delay.......................................4 
	  4.2.    One way delay Trajectory metric.............................5 
	  4.3.    Aggregated One way delay metric.............................6 
	  5.      Metrics for end-to-end measures aggregation.................7 
	  5.1.    Asynchronous One way delay Trajectory metric................7 
	  5.2.    Asynchronous Aggregated One way delay metric................7 
	  6.      Spatial Packet loss metrics.................................8 
	  7.      Spatial ipdv metrics........................................8 
	  8.      Security Considerations.....................................8 
	  8.1.    Privacy.....................................................8 
	  8.2.    Measurement aspects.........................................8 
	  9.      Issues......................................................9 
	  10.     Acknowledgments.............................................9 
	  11.     Author's Addresses..........................................9 


	   1. Introduction 

	   The metrics specified derivate from those standardized by IPPM 
	   Working Group. There are built on notions introduced and discussed 
	   in the IPPM Framework document, RFC 2330 [2]. The reader should be 
	   familiar with these documents.  

	   The IPPM Framework consists in 4 major components: 

	   + A general framework for defining performance metrics, described in 
	   the Framework for IP Performance Metrics, RFC 2330; 

	   + A set of standardized metrics, which conform to this framework. 
	   The IPPM Metrics for Measuring Connectivity, RFC 2678 [3]. The One-
	   way Delay Metric for IPPM, RFC 2679 [4]. The One-way Packet Loss 
	   Metric for IPPM, RFC 2680 [5]. The Round-trip Delay Metric for IPPM, 
	   RFC 2681 [6]; 

	   + Emerging metrics which are being specified in respect of this 
	   framework; 

	   + A Reporting MIB to exchange the results of the measures. It is an 
	   interface between a system of measure and the administrative 
	   entities interested in these results. This proxy controls the access 
	   to the results. These entities use the results to compute statistics 
	   and aggregated metrics. 

	   The structure of the memo is as follows: 


   Stephan            Informational - Expires March 2003           [Page 2] 


   Internet Draft              spatial metrics              September 2002 


		  + A 'singleton' analytic metric, called Type-P-spatial-one-way-
	   delay, will be introduced to measure the one-way delay between 2 
	   consecutive hosts of an IP path. 

		  + Using this singleton metric, a 'sample', called Type-P-one-way-
	   delay-trajectory, will be introduced to measure the sequence of 
	   Type-P-spatial-one-way-delay of the successive pair of hosts of the 
	   path. 

		  + Using this sample the end to end metric, called Type-P-
	   aggregated-one-way-delay, is defined to measure the end to end 
	   delay. 

		  +  Using the Type-P-one-way-delay metric, the Type-P-spatial-one-
	   way-delay metric, the Type-P-aggregated-one-way-delay metric and the 
	   Type-P-asynchronous-aggregated-one-way-delay metric, a 'sample', 
	   called Type-P-asynchronous-one-way-delay-trajectory, will be 
	   introduced to measure the sequence of delays of a sequence of clouds 
	   of an IP path. 

		  + Using this sample the end to end metric, called Type-P-
	   asynchronous-aggregated-one-way-delay, is defined to measure the end 
	   to end delay. 


	   2. Terminology 

	   2.1. Spatial metric 

	  A metric is spatial if one of the hosts involved is neither the 
	  sender nor the destination of the measurement packet. 

	   2.2. Asynchronous spatial metrics 

	   A spatial metric is named asynchronous if its definition involves 
	   different measurement packets. 

	   2.3. Trajectory  

	  A trajectory is a sequence of hosts of an IP path. All the hosts of 
	  the path may not be present in the sequence. 

	   3. Motivation 

	   3.1. Instantaneous end to end measure decomposition 

	   There is a need to standardize spatial metrics to permit the 
	   decomposition of standard end-to-end measures. 

	   + for locating delay consumption in a IP path; 


   Stephan            Informational - Expires March 2003           [Page 3] 


   Internet Draft              spatial metrics              September 2002 


	   + for locating the loss of packets on an IP path; 

	   + for trajectory discovery; 

	   + for troubleshooting the network; 

	   + for designing and engineering the networks; 

	   + for measuring the performance of a multicast network; 

	   + for controlling the performance of the inter domain services. 

	   These metrics have to be standardized to permit their results to be 
	   collected in the IPPM REPORTING MIB. 

	   3.2. End-to-end measures aggregation 


	   The IPPM WG has designed metrics for measuring end-to-end 
	   performance. There is not currently standard IP measurement packets 
	   to perform inter domain end-to-end measures. They may only be 
	   performed using aggregation of sequence of intra domain measure 
	   results. To permit interdomain end-to-end measure results 
	   aggregations there is a need to standardize spatial metrics 

		   + for delay aggregation; 

		   + for packet loss aggregation; 

		   + for jitter aggregation. 

	   These metrics have to be standardized to permit their results to be 
	   collected in the IPPM REPORTING MIB. 


	   4. Metrics for end-to-end measure decomposition 

   4.1. Spatial one way delay 

	   4.1.1. Metric Name 

		  Type-P-spatial-one-way-delay 

	   4.1.2. Metric Parameters 

	   + H0, the address of the sender. 

	   + Hn, the address of the receiver. 

	   + I, An integer which ordered the hosts in the path.  


   Stephan            Informational - Expires March 2003           [Page 4] 


   Internet Draft              spatial metrics              September 2002 


	   + Hi, exchange points of the path digest. 

	   + T0, a time. 

	   + T1,..., Tn a list of time. 

	   + dT1,..., dTn a list of time. 

	   + P, the specification of the packet type. 

	   + <H1, ..., Hn> a path digest. 


	   4.1.3. Metric Units 

	   The unit is the same as the singleton Type-P-One-way-Delay defined 
	   in [4]. The value of a Type-P-spatial-One-way-Delay is either a real 
	   number, or an undefined (informally, infinite) number of seconds. 

	   4.1.4. Definition 

	   Given a Type P packet sent by the source H0 at T0 to Hn in the path 
	   <H1, ..., Hn>, given the sequence of time 
	   <T0+dT1,...,T0+dT1+...+dTn> of arrival of the packets in <H1, ..., 
	   Hn>, a Type-P-spatial-one-way-delay metric is defined for a hop of 
	   the path as following: 

	   For a real number dTi, the Type-P-spatial-one-way-delay from Hi to 
	   Hi+1 at Ti is dTi means that Hi saw the first bit of a Type-P packet 
	   to Hi+1 at wire-time Ti and that Hi+1 saw the last bit of that 
	   packet at wire-time Ti+dTi. 

	   4.2. One way delay Trajectory metric 

	   4.2.1. Metric Name 

		  Type-P-one-way-delay-trajectory  

	   4.2.2. Metric Parameters 

	   + H0, the address of the sender. 

	   + Hn, the address of the receiver. 

	   + I, An integer which ordered the hosts in the path.  

	   + Hi, exchange points of the path digest. 

	   + T0, a time. 

	   + dT1,..., dTn a list of time. 

   Stephan            Informational - Expires March 2003           [Page 5] 


   Internet Draft              spatial metrics              September 2002 



	   + P, the specification of the packet type. 

	   + <H1, ..., Hn> a path digest. 

	   4.2.3. Metric Units 

	   A sequence of time. 

	   4.2.4. Definition 

	   Given a Type-P packet sent by the source H0 at T0 to Hn in the path 
	   <H1, ..., Hn>, given the sequence of time 
	   <T0+dT1,...,T0+dT1+...+dTn> of arrival of the packet in <H1, ..., 
	   Hn>, a Type-P-one-way-delay-trajectory metric is defined as the 
	   sequence of the Type-P-spatial-one-way-delay values <dT1,...,dTn> 


	   4.3. Aggregated One way delay metric 

	   4.3.1. Metric Name 

		  Type-P-aggregated-one-way-delay 

	   4.3.2. Metric Parameters 

	   + H0, the address of the sender. 

	   + Hn, the address of the receiver. 

	   + T0, a time. 

	   + dT1,..., dTn a list of time. 

	   + P, the specification of the packet type. 

	   + <H0, H1, ..., Hn> a trajectory. 


	   4.3.3. Metric Units 

	   A time. 

	   4.3.4. Definition 

	   Given a Type-P-one-way-delay-trajectory metric value <dT1,...,dTn> 
	   of the trajectory <H0, H1, ..., Hn> performed using a single 
	   measurement packet of type P sent at the time T0 by H0, a Type-P-
	   aggregated-one-way-delay metric is defined as the sum of each term 
	   of the Type-P-one-way-delay-trajectory. 


   Stephan            Informational - Expires March 2003           [Page 6] 


   Internet Draft              spatial metrics              September 2002 


	   4.3.5. Discussion 

	  A Type-P-aggregated-one-way-delay measure is performed during a Type-
	  P-one-way-delay measure. As they measure the performance of the same 
	  measurement packet the result of a Type-P-aggregated-one-way-delay 
	  measure should be identical to the result of the Type-P-one-way-delay 
	  measure. 

	  Practically these results will differ. 


   5. Metrics for end-to-end measures aggregation 

	   5.1. Asynchronous One way delay Trajectory metric 

	   5.1.1. Metric Name 

		  Type-P-asynchronous-one-way-delay-trajectory 

	   5.1.2. Metric Parameters 

	   + H0...Hn, the addresses of the hosts 

	   + I, An integer which ordered the hosts in the path.  

	   + Hi, exchange points of the path digest. 

	   + P, the specification of the packet type. 

	   5.1.3. Metric Units 

	   A sequence of time. 

	   5.1.4. Definition 

	   Given the hops <H0,H1>, <H1,H2> ... <Hn-1, Hn>, given the Type-P-
	   one-way-delay Ti from Hi to Hi+1 or the Type-P-spatial-one-way-delay 
	   Ti from Hi to Hi+1 or the Type-P-aggregated-one-way-delay Ti from Hi 
	   to Hi+1 or the Type-P-asynchronous-aggregated-one-way-delay Ti from 
	   Hi to Hi+1, a Type-P-asynchronous-one-way-delay-trajectory metric is 
	   defined as the sequence of the values <T1,...,Tn>. 

	   5.2. Asynchronous Aggregated One way delay metric 

	   5.2.1. Metric Name 

		  Type-P-asynchronous-aggregated-one-way-delay 

	   5.2.2. Metric Parameters 



   Stephan            Informational - Expires March 2003           [Page 7] 


   Internet Draft              spatial metrics              September 2002 


	   + T1,..., Tn a list of time. 


	   5.2.3. Metric Units 

	   A time. 

	   5.2.4. Definition 

	   Given a Type-P-asynchronous-one-way-delay-trajectory metric 
	   <T1,...,Tn> value, a Type-P-asynchronous-aggregated-one-way-delay 
	   metric is defined as the sum of each term of the Type-P-
	   asynchronous-one-way-delay-trajectory. 


   6. Spatial Packet loss metrics 

	  TO BE SPECIFIED 

   7. Spatial ipdv metrics 

	  TO BE SPECIFIED 



	   8. Security Considerations 

	   Since this draft proposes sample metrics based on the One-way Delay 
	   singleton metric defined in RFC2679 and RFC2680 it inherits the 
	   security considerations mentioned in this RFC. 

	   8.1. Privacy 

	   The privacy concerns of network measurement are intrinsically 
	   limited by the active measurements. Unlike passive measurements, 
	   there can be no release of existing user data. 


	   8.2. Measurement aspects 

	   Conducting Internet measurements raises both security and privacy 
	   concerns. This memo does not specify an implementation of the 
	   metrics, so it does not directly affect the security of the Internet 
	   nor of applications which run on the Internet. However, 
	   implementations of these metrics must be mindful of security and 
	   privacy concerns. 

		There are two types of security concerns: potential harm caused by 
	   the measurements, and potential harm to the measurements. The 
	   measurements could cause harm because they are active, and inject 
	   packets into the network. The measurement parameters MUST be 

   Stephan            Informational - Expires March 2003           [Page 8] 


   Internet Draft              spatial metrics              September 2002 


	   carefully selected so that the measurements inject trivial amounts 
	   of additional traffic into the networks they measure. If they inject 
	   "too much" traffic, they can skew the results of the measurement, 
	   and in extreme cases cause congestion and denial of service. 

		The measurements themselves could be harmed by routers giving 
	   measurement traffic a different priority than "normal" traffic, or 
	   by an attacker injecting artificial measurement traffic. If routers 
	   can recognize measurement traffic and treat it separately, the 
	   measurements will not reflect actual user traffic. If an attacker 
	   injects artificial traffic that is accepted as legitimate, the loss 
	   rate will be artificially lowered. Therefore, the measurement 
	   methodologies SHOULD include appropriate techniques to reduce the 
	   probability measurement traffic can be distinguished from "normal" 
	   traffic.  

	   Authentication techniques, such as digital signatures, may be used 
	   where appropriate to guard against injected traffic attacks. 


	   9. Issues 

	   Complete the terminology section. 
	   Define the trajectory packet loss metrics and corresponding 
	   statistics. 
	   Define the trajectory ipdv metrics. 


	   10. Acknowledgments 


	   11. Author's Addresses 

	   Emile STEPHAN 
	   France Telecom R & D 
	   2 avenue Pierre Marzin               
	   F-22307 Lannion cedex  
	   Phone: (+ 33) 2 96 05 11 11 
	   Email: emile.stephan@francetelecom.com 


	   Full Copyright Statement 

	   "Copyright (C) The Internet Society (2001). All Rights Reserved. 

	   This document and translations of it may be copied and furnished to 
	   others, and derivative works that comment on or otherwise explain it 
	   or assist its implementation may be prepared, copied, published and 
	   distributed, in whole or in part, without restriction of any kind, 
	   provided that the above copyright notice and this paragraph are 
	   included on all such copies and derivative works. However, this 

   Stephan            Informational - Expires March 2003           [Page 9] 


   Internet Draft              spatial metrics              September 2002 


	   document itself may not be modified in any way, such as by removing 
	   the copyright notice or references to the Internet Society or other 
	   Internet organizations, except as needed for the purpose of 
	   developing Internet standards in which case the procedures for 
	   copyrights defined in the Internet Standards process must be 
	   followed, or as required to translate it into languages other than 
	   English. 

	   The limited permissions granted above are perpetual and will not be 
	   revoked by the Internet Society or its successors or assigns. 

	   This document and the information contained herein is provided on an 
	   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING 
	   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING 
	   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION 
	   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF 
	   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 



































   Stephan            Informational - Expires March 2003          [Page 10] 

