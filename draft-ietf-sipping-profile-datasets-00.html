<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>A Schema and Guidelines for Defining Session Initiation
      Protocol User Agent Profile Datasets</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="A Schema and Guidelines for Defining Session Initiation
      Protocol User Agent Profile Datasets">
<meta name="keywords" content="SIP, Configuration, Framework, User Agent, profile, XML, schema, ua-profile, uaprof, urn:ietf:params:xml:ns:uaprof">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">SIPPING</td><td class="header">S. Channabasappa</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">CableLabs</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">S. Ganesan</td></tr>
<tr><td class="header">Expires: August 19, 2008</td><td class="header">Motorola</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">V. Hilt</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Bell Labs/Alcatel-Lucent</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">D. Petrie</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">SIPez LLC.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">February 16, 2008</td></tr>
</table></td></tr></table>
<h1><br />A Schema and Guidelines for Defining Session Initiation
      Protocol User Agent Profile Datasets<br />draft-ietf-sipping-profile-datasets-00.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on August 19, 2008.</p>

<h3>Abstract</h3>

<p>
        This document defines the requirements and a format for
        SIP user agent profile data. An overall schema is
        specified for the definition of profile datasets. The
        schema also provides for expressing constraints for how
        multiple sources of profile data are to be combined.
        This document provides a guide to considerations,
        policies and syntax for defining datasets to be included
        in profile data. 
      
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
<a href="#terminology">2.</a>&nbsp;
Terminology<br />
<a href="#overview">3.</a>&nbsp;
Overview<br />
<a href="#requirements">4.</a>&nbsp;
Design Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#requirement-descriptions">4.1.</a>&nbsp;
Requirement Descriptions<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#extensibility-requirement">4.1.1.</a>&nbsp;
Implementer Extensibility<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#flexible-capabilities-requirement">4.1.2.</a>&nbsp;
Flexible Capabilities<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#access-control-requirement">4.1.3.</a>&nbsp;
Access Control<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#constraints-requirement">4.1.4.</a>&nbsp;
Data Constraints and Range Definition<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#multiple-sources-requirement">4.1.5.</a>&nbsp;
Support of User, Application, Device, Local Network Sources<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#policy-requirement">4.1.6.</a>&nbsp;
The Ability to Specify Policy<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#xml-requirement">4.1.7.</a>&nbsp;
XML<br />
<a href="#schema-definition">5.</a>&nbsp;
Overall Dataset Schema<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#schema-data-primitives">5.1.</a>&nbsp;
Data Primitives<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#schema-namespaces">5.2.</a>&nbsp;
Use of Namespaces<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#propertySet">5.3.</a>&nbsp;
The 'propertySet' Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#settingcontainer">5.4.</a>&nbsp;
The Abstract 'setting_container' Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#settingelement">5.5.</a>&nbsp;
The Abstract 'setting' Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#schema-acl">5.5.1.</a>&nbsp;
The 'visibility' Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:policy">5.5.2.</a>&nbsp;
The 'policy' Attributes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:ex-policy">5.5.3.</a>&nbsp;
The 'excludedPolicy' Attributes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:unidir">5.5.4.</a>&nbsp;
The 'direction' Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:pref">5.5.5.</a>&nbsp;
The 'q' Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">5.6.</a>&nbsp;
The 'profileUri' Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">5.7.</a>&nbsp;
The 'profileCredential' Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#realm-element">5.7.1.</a>&nbsp;
realm Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#auth-user-element">5.7.2.</a>&nbsp;
authUser Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a1Digest">5.7.3.</a>&nbsp;
a1Digest Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#password">5.7.4.</a>&nbsp;
password Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">5.8.</a>&nbsp;
The 'profileContactUri' Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">5.9.</a>&nbsp;
The 'profileInfo' Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">5.10.</a>&nbsp;
Example Profile Dataset<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#schema-merging">5.11.</a>&nbsp;
Merging Property Sets<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#numeric-merging_algorithm">5.11.1.</a>&nbsp;
Single Numeric Value Merging Algorithm<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#multivalue-merging_algorithm">5.11.2.</a>&nbsp;
Multiple Enumerated Value Merging Algorithm<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#singlelocal-merging_algorithm">5.11.3.</a>&nbsp;
Closest Value First Merging Algorithm<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#common_types">5.12.</a>&nbsp;
Common Types<br />
<a href="#defining-datasets">6.</a>&nbsp;
Defining Data Sets<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defining-datasets-schema">6.1.</a>&nbsp;
Namespace<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defining-datasets-properties">6.2.</a>&nbsp;
Property Definitions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defining-datasets-merging">6.3.</a>&nbsp;
Merging Data Sets<br />
<a href="#candidiate-datasets">7.</a>&nbsp;
Candidate Data Sets<br />
<a href="#security-considerations">8.</a>&nbsp;
Security Considerations<br />
<a href="#iana-considerations">9.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">9.1.</a>&nbsp;
Content-type registration for 'application/uaprofile+xml'<br />
<a href="#acknowledgments">10.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">11.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">11.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">11.2.</a>&nbsp;
Informative References<br />
<a href="#sip-ua-profile-schema">Appendix&nbsp;A.</a>&nbsp;
Relax NG SIP UA Profile Schema<br />
<a href="#requirement-usecases">Appendix&nbsp;B.</a>&nbsp;
Use Cases<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#outbound-proxy-usecase">B.1.</a>&nbsp;
Outbound Proxy Setting<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#codec-usecase">B.2.</a>&nbsp;
Codec Settings<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#codec-notset-usecase">B.2.1.</a>&nbsp;
Codec Setting Not Set<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#codec-deviceonly-usecase">B.2.2.</a>&nbsp;
Codec Set in Device Profile<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#codec-deviceuser-usecase">B.2.3.</a>&nbsp;
Set in Device and User Profiles<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#codec-devicelocal-usecase">B.2.4.</a>&nbsp;
Set in Device and Local Profiles<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#codec-deviceuserlocal-usecase">B.2.5.</a>&nbsp;
Set in Device, User and Local Profiles<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#codec-usecase-reqs">B.2.6.</a>&nbsp;
Example Derived Requirements<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
        The
        SIP User Agent Profile Delivery Framework
        <a class='info' href='#I-D.ietf-sipping-config-framework'>[I&#8209;D.ietf&#8209;sipping&#8209;config&#8209;framework]<span> (</span><span class='info'>Channabasappa, S., &ldquo;A Framework for Session Initiation Protocol User Agent Profile Delivery,&rdquo; February&nbsp;2010.</span><span>)</span></a>
        and the Framework for SIP Session Policies
        <a class='info' href='#I-D.ietf-sip-session-policy-framework'>[I&#8209;D.ietf&#8209;sip&#8209;session&#8209;policy&#8209;framework]<span> (</span><span class='info'>Hilt, V., Camarillo, G., and J. Rosenberg, &ldquo;A Framework for Session Initiation Protocol (SIP) Session Policies,&rdquo; February&nbsp;2010.</span><span>)</span></a>
        specify how SIP user agents locate and retrieve profile
        data specific to the user, the device, and the local
        network. It is important for SIP User Agents to be able
        to obtain and use these multiple sources of profile data
        in order to support a wide range of applications without
        undue complexity.
      
</p>
<p>
        While these frameworks define the mechanisms for
        transmitting profile data, they do not define a format
        for the actual profile data. This document defines the
        requirements, the default/mandatory to support content
        type for
        <a class='info' href='#I-D.ietf-sipping-config-framework'>[I&#8209;D.ietf&#8209;sipping&#8209;config&#8209;framework]<span> (</span><span class='info'>Channabasappa, S., &ldquo;A Framework for Session Initiation Protocol User Agent Profile Delivery,&rdquo; February&nbsp;2010.</span><span>)</span></a>
        , a high level schema for, and guide to how these
        datasets can be defined. The goal is to enable any SIP
        user agent to obtain profile data and be functional in a
        new environment independent of the implementation or
        model of user agent. The nature of having profile data
        from three potential sources requires the definition of
        policies on how to apply the data in an interoperable
        way across implementations which may have widely varying
        capabilities.
      
</p>
<p>
        The ultimate objective of the framework described here,
        together with the SIP User Agent Profile delivery
        framework, is to a start up
        experience requiring minimal user intervention.
        One should be able to take a new
        SIP user agent out of the box, plug it in or install the
        software and have it get its profiles without human
        intervention other than security measures. This is
        necessary for cost effective deployment of large numbers
        of user agents.
      
</p>
<a name="terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>
     "The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in
      this document are to be interpreted as described in RFC 2119."     
        <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
      
</p>
<p>
        This document reuses the terms "profile" and "device" as defined in
        <a class='info' href='#I-D.ietf-sipping-config-framework'>[I&#8209;D.ietf&#8209;sipping&#8209;config&#8209;framework]<span> (</span><span class='info'>Channabasappa, S., &ldquo;A Framework for Session Initiation Protocol User Agent Profile Delivery,&rdquo; February&nbsp;2010.</span><span>)</span></a>.  In addition, this
        document defines the following terms:
      
</p>
<p>
        </p>
<blockquote class="text"><dl>
<dt>property -</dt>
<dd>
            a named configurable characteristic of a
            user agent. A given property has a
            well-defined range of possible values. A
            given property may be defined to have a
            range of values, allow for simultaneous use
            of many values (as in a list of allowed
            possibilities), or a set of related values
            that collectively form a single profile
            information item.
          
</dd>
<dt>setting -</dt>
<dd>
            the binding of a specific value or set of
            values to a given property.
          
</dd>
<dt>user profile -</dt>
<dd>
            the profile that applies to a specific user.
            The user profile is that set of profile data
            the user wants to associate with a given
            device (e.g. ringtones used when someone
            calls them, the user's shortcuts).
          
</dd>
<dt>device profile -</dt>
<dd>
            data profile that applies to a specific
            device. This is the data that is bound to
            the device itself independent of the user.
            It relates to specific capabilities of the
            device and/or preferences of the owner of
            the device.
          
</dd>
<dt>local network profile -</dt>
<dd>
            data that applies to the user agent in the
            context of the local network. This is best
            illustrated by roaming applications; a new
            device appears in the local network (or a
            device appears in a new network, depending
            on the point of view). The local network
            profile includes settings and perhaps
            policies that allow the user agent to
            function in the local network (e.g. how to
            traverse NAT or firewall, bandwidth
            constraints).
          
</dd>
<dt>dataset -</dt>
<dd>
            a collection of properties.
          
</dd>
<dt>working profile -</dt>
<dd>
            the set of property values actually set in a
            SIP User Agent as a result of merging the
            profiles from all sources; the actual
            effective profile for the user agent .
          
</dd>
<dt>merging -</dt>
<dd>
            the operation of resolving overlapping
            settings from multiple profiles. Overlap
            occurs when the same property occurs in
            multiple profiles (e.g. device, user,
            application, local network).
          
</dd>
</dl></blockquote><p>

      
</p>
<a name="overview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Overview</h3>

<p>
        In this document requirements are specified for
        containing and expressing profile data for use on
        SIP user agents. Though much of this can be
        considered independent of SIP there is one primary
        requirement that is not well satisfied through more
        generic profile data mechanisms. SIP User Agent set
        up requires the agent to merge settings, which may
        overlap, from potentially three different sources
        (see
        <a class='info' href='#I-D.ietf-sipping-config-framework'>[I&#8209;D.ietf&#8209;sipping&#8209;config&#8209;framework]<span> (</span><span class='info'>Channabasappa, S., &ldquo;A Framework for Session Initiation Protocol User Agent Profile Delivery,&rdquo; February&nbsp;2010.</span><span>)</span></a>
        ); each source must not only be able to provide
        profile information, but also express policies
        regarding how the profile settings may be combined
        with that from other sources.
      
</p>
<p>
        A schema and syntax is defined in this document to
        specify properties that may be aggregated to
        construct profiles. The general design philosophy is
        that many small datasets provide flexibility to the
        implementer to support the aggregated set that best
        matches the capability of the user agent. The actual
        properties are not defined in this document and will
        be the subject of derived drafts. However, some
        examples are provided in <a class='info' href='#requirement-usecases'>Appendix&nbsp;B<span> (</span><span class='info'>Use Cases</span><span>)</span></a> to illustrate the
        proposed mechanisms and to validate the
        requirements.
      
</p>
<p>
        This document defines a set of considerations,
        syntax and policies that must be specified when
        defining datasets. These are to help authors of
        dataset specifications to define datasets that will
        work in the overall schema defined in this document.
        The actual specification of these datasets is
        outside the scope of this document.
      
</p>
<a name="requirements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Design Considerations</h3>

<p>
        The following section defines some of the design
        considerations that were taken into account when
        defining the schema, syntax and policies for generating
        and applying profile data.
        
      
</p>
<a name="requirement-descriptions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Requirement Descriptions</h3>

<a name="extensibility-requirement"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
Implementer Extensibility</h3>

<p>
            It does not serve user agent administrators to
            have to require a coordinated and orchestrated
            upgrade of every user agent and corresponding
            profile delivery servers for a new capability to
            be supported. Datasets MUST be extensible
            without breaking the user agents that support
            that dataset. This may require the user agents
            to ignore parts of the extended dataset that it
            does not support. It may also be possible to tag
            the extensions with minimum version numbers to
            facilitate the user agents decision making.

            
          
</p>
<a name="flexible-capabilities-requirement"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.2"></a><h3>4.1.2.&nbsp;
Flexible Capabilities</h3>

<p>
            Since user agents vary greatly in their
            capabilities, it MUST be possible for the
            implementer to tailor the datasets to the
            capabilities of the user agent device. This
            implies that the profile is built up of a series
            of small datasets based upon the capabilities of
            the user agent. The user agents MAY ignore
            datasets for capabilities they do not support.
            This allows the profile delivery server to be
            agnostic of device capabilities. It is however
            the implementer's choice to customize the
            delivered profile to the device capabilities.

            
          
</p>
<a name="access-control-requirement"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.3"></a><h3>4.1.3.&nbsp;
Access Control</h3>

<p>
            There are likely to be properties in various
            profile datasets that the Operators and
            Administrators do not want the users to
            sometimes not be able to modify or even see. It
            MUST be possible to disallow the user from
            modifying a property. It MUST be possible to
            obfuscate the user from seeing a property or its
            setting. This access control information SHOULD
            be optional for a given property.

            
          
</p>
<a name="constraints-requirement"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.4"></a><h3>4.1.4.&nbsp;
Data Constraints and Range Definition</h3>

<p>
            Property values are likely to have an allowed
            set of values under most circumstances rather
            than completely unconstrained in their values.
            It MUST be possible for the schema to specify
            constraints on a property value, viz, as a range
            or as a set of discrete values. These
            constraints SHOULD be optional to the dataset
            and SHOULD be expressible independent of the
            property itself.

            
          
</p>
<a name="multiple-sources-requirement"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.5"></a><h3>4.1.5.&nbsp;
Support of User, Application, Device, Local Network Sources</h3>

<p>
            <a class='info' href='#I-D.ietf-sipping-config-framework'>[I&#8209;D.ietf&#8209;sipping&#8209;config&#8209;framework]<span> (</span><span class='info'>Channabasappa, S., &ldquo;A Framework for Session Initiation Protocol User Agent Profile Delivery,&rdquo; February&nbsp;2010.</span><span>)</span></a>
            specifies a mechanism where the user agent
            retrieves profile data from as many as three
            different sources. The separation of the user
            profile facilitates a hotelling capability and
            the ability to easily re-assign a user to a
            different device. The separation of the local
            network profile facilitates properties specific
            to operating in the local network in a roaming
            scenario (e.g. outbound proxy or NAT traversal
            properties).
            
            The device profile facilitates device capability
            based properties as well as a means for the
            device owner or manager to impose policy.
          
</p>
<p>
            While increasing the complexity of the user
            agent in that it must aggregate and consolidate
            separate profiles into one working profile,
            constraining the properties of the various
            profiles to be mutually exclusive, or
            constraining even the merging rules would
            severely restrict functionality.

            
          
</p>
<p>
            Profile merging rules are associated with
            individual datasets or even associated with
            individual properties inside a dataset. A
            profile MUST have a merging algorithm defined.
            An individual property inside MAY contain a
            merging rule, in which case this merging rule is
            specific to the property. If however, there is
            no merging rule associated with a property, but
            the profile dataset in its entirety has a
            merging rule, this merging rule MUST be applied
            to each of the properties that form part of the
            profile.

            
          
</p>
<p>
            
            A few of the more commonly used merging
            algorithms are defined in this document. Most
            settings are likely to use the common set
            defined in this document. However authors of
            profile datasets may define new algorithms for
            merging dataset properties (see
            <a class='info' href='#schema-merging'>Section&nbsp;5.11<span> (</span><span class='info'>Merging Property Sets</span><span>)</span></a>
            and
            <a class='info' href='#defining-datasets-merging'>Section&nbsp;6.3<span> (</span><span class='info'>Merging Data Sets</span><span>)</span></a>
            ).
          
</p>
<a name="policy-requirement"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.6"></a><h3>4.1.6.&nbsp;
The Ability to Specify Policy</h3>

<p>
            Local Network Operators may wish to impose
            policy on users and devices on their network
            such as contraining codecs, media streams,
            outbound proxy or emergency services. It MUST be
            possible to impose policy in any of the profile
            sources that constrains, overwrites or modifies
            properties provided in datasets from other
            sources.
          
</p>
<a name="xml-requirement"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.7"></a><h3>4.1.7.&nbsp;
XML</h3>

<p>
            XML is perhaps not really a requirement, but a
            solution base upon requirements. However it is
            hard to ignore the desire to utilize readily
            available tools to manage and manipulate profile
            data such as XSLT, XPATH and XCAP. The
            requirement that should be considered when
            defining the schema and syntax is that many user
            agents have limited resources for supporting
            advanced XML operation. The simplest XML
            construct possible should be used, that support
            the required functionality. It is not a
            requirement that user agents validate the
            profile XML document. This relieves the
            requirement that the Relax NG schema defined in
            this and other datasets documents be enforced on
            the user agent. The Relax NG schema should not
            be used to strictly validate profile XML
            documents. Unknown elements and attributes
            should be ignored to allow extensions to be
            supported. Strict enforcement of the Relax NG
            schema would make it very difficult to deploy
            new user agents without lock step upgrades of
            the profile delivery server. Guidelines for the
            Use of Extensible Markup Language (XML) within
            IETF Protocols
            <a class='info' href='#RFC3470'>[RFC3470]<span> (</span><span class='info'>Hollenbeck, S., Rose, M., and L. Masinter, &ldquo;Guidelines for the Use of Extensible Markup Language (XML) within IETF Protocols,&rdquo; January&nbsp;2003.</span><span>)</span></a>
            provides useful information in this regard.
          
</p>
<a name="schema-definition"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Overall Dataset Schema</h3>

<p>
        Notifiers and Subscribers of the event package defined
        in
        <a class='info' href='#I-D.ietf-sipping-config-framework'>[I&#8209;D.ietf&#8209;sipping&#8209;config&#8209;framework]<span> (</span><span class='info'>Channabasappa, S., &ldquo;A Framework for Session Initiation Protocol User Agent Profile Delivery,&rdquo; February&nbsp;2010.</span><span>)</span></a>
        SHOULD support the content-type:
        application/uaprofile+xml. The Notifier SHOULD indicate
        all of the dataset schemas that is supports by listing
        all of the MIME types for the supported datasets in the
        SUBSCRIBE request header: Accept. This document defines
        an Relax NG Schema for that content-type with the
        namespace: urn:ietf:params:xml:ns:uaprof, for SIP
        Profile Datasets that provides:
        </p>
<ul class="text">
<li>
            a base element type "setting" from which all
            settings in other schema definitions inherit
            (this allows other definitions to specify the
            content models for ways of combining settings;
            it is analogous to a C++ virtual base class).
          
</li>
<li>
            Attributes to the "setting" element that define
            constraints and other properties used to impose
            policy that apply to the element value. These
            attributes are inherited by elements that are
            derived from the abstract settings element.
          
</li>
<li>
            A root element for all property sets (the
            outermost container).
          
</li>
</ul><p>
      
</p>
<p>
        The full text of the schema is in
        <a class='info' href='#sip-ua-profile-schema'>Appendix&nbsp;A<span> (</span><span class='info'>Relax NG SIP UA Profile Schema</span><span>)</span></a>
        ; the following describes the usage of the schema in
        defining properties and combining them to construct the
        working profile of a User Agent.
      
</p>
<a name="schema-data-primitives"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Data Primitives</h3>

<p>
          Each property in a profile data set is defined using
          XML Schema Datatypes
          <a class='info' href='#W3C.REC-xmlschema-2'>[W3C.REC&#8209;xmlschema&#8209;2]<span> (</span><span class='info'>Biron, P. and A. Malhotra, &ldquo;XML Schema Part 2: Datatypes,&rdquo; May&nbsp;2001.</span><span>)</span></a>
          and Relax NG Schema. A property is modeled by an XML
          element derived from the &quot;setting&quot; element
          in the SIP Profile Data Set Schema. The element
          content is the setting value.
        
</p>
<p>
          Properties consisting of one single value can be
          expressed using a single XML element. Properties
          that may consist of multiple values require the use
          of container elements. A container element is
          defined for such a property. This container can
          contain multiple XML elements, which each defines a
          possible value for that property (see examples in
          <a class='info' href='#sec:policy'>Section&nbsp;5.5.2<span> (</span><span class='info'>The 'policy' Attributes</span><span>)</span></a>
          ).
        
</p>
<p>
          When constructing a property set, the creator of a
          profile may not be able to know all of the
          capabilities of the User Agent that will receive
          that property set. The creator of profile
          constraints or policies should be aware that a user
          agent may ignore properties that are unsupported or
          do not apply to its capabilities.
        
</p>
<a name="schema-namespaces"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Use of Namespaces</h3>

<p>
          XML namespaces
          <a class='info' href='#W3C.REC-xml-names-19990114'>[W3C.REC&#8209;xml&#8209;names&#8209;19990114]<span> (</span><span class='info'>Hollander, D., Bray, T., and A. Layman, &ldquo;Namespaces in XML,&rdquo; January&nbsp;1999.</span><span>)</span></a>
          provide a means to uniquely identify the elements
          and datatypes defined in a data set. It is therefore
          RECOMMENDED that each data set specifies its own
          namespace. The namespace URIs SHOULD be
          <a class='info' href='#RFC2141'>URNs<span> (</span><span class='info'>Moats, R., &ldquo;URN Syntax,&rdquo; May&nbsp;1997.</span><span>)</span></a> [RFC2141]
          , using the namespace identifier 'ietf' defined by
          <a class='info' href='#RFC2648'>[RFC2648]<span> (</span><span class='info'>Moats, R., &ldquo;A URN Namespace for IETF Documents,&rdquo; August&nbsp;1999.</span><span>)</span></a>
          and extended by
          <a class='info' href='#RFC3688'>[RFC3688]<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a>
          . The core schema defined in this document defines
          the namespace: "urn:ietf:params:xml:ns:uaprof".
          Profile datasets that extend this schema SHOULD
          define a new namespace by appending a ":" and a
          unique name to the "urn:ietf:params:xml:ns:uaprof"
          namespace. These namespaces MUST be registered with
          IANA.
        
</p>
<a name="propertySet"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
The 'propertySet' Element</h3>

<p>
          The root element of a property set is
          &quot;propertySet&quot;; it is the container that is
          provided to the user agent. The elements contained
          within a propertySet contain the specific properties
          which are to be applied to the user agent. The
          properties may be simple types with a single value,
          complex types or container elements with a list of
          properties.
        
</p>
<a name="settingcontainer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
The Abstract 'setting_container' Element</h3>

<p>
          The "setting_container" element is the abstract
          element in which a list of properties which allow
          mutliple values may be contained. Elements derived
          from the "setting_container" element may contain
          zero or more elements derived from the "setting"
          element. The "setting_container" element has an
          "excludedPolicy" attribute.
        
</p>
<a name="settingelement"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
The Abstract 'setting' Element</h3>

<p>
          The setting element is the abstract element from
          which all profile properties or settings shall
          inherit.
        
</p>
<p>
          The setting element has a number of attributes that
          provide functionalities, which are generally useful
          for many properties. These attributes are inherited
          by properties that are derived from the settings
          element. This enables the re-use of common
          functionalities and ensures a common syntax for
          these elements across different data sets. The
          following functionalities are provided by attributes
          of the settings element:
        
</p>
<p>
          </p>
<ul class="text">
<li>
              Property Access Control: 'visibility'
              attribute
            
</li>
<li>Policies: 'policy' attribute
</li>
</ul><p>
        
</p>
<p>
          Additional attributes are defined in the schema that
          may used in elements derived from "setting". By
          default these attributes cannot be set. These
          attribute must be explicitly added to elements
          derived from the "setting" element:
        
</p>
<p>
          </p>
<ul class="text">
<li>
              Unidirectional Properties: 'direction'
              attribute
            
</li>
<li>Preferences: 'q' attribute
</li>
</ul><p>
        
</p>
<a name="schema-acl"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5.1"></a><h3>5.5.1.&nbsp;
The 'visibility' Attribute</h3>

<p>
            The attribute &quot;visibility&quot; is defined
            on the &quot;setting&quot; element to specify
            whether or not the user agent is permitted to
            display the property value to the user. This is
            used to hide setting values that the profile
            administrator may not want the user to see or
            know. The &quot;visibility&quot; attribute has
            two possible values:
          
</p>
<p>
            </p>
<ul class="text">
<li>
                visible: specifies that display of the
                property value is not restricted. This
                is the default value of the attribute if
                it is not specified.
              
</li>
<li>
                hidden: Specifies that the user agent
                SHOULD NOT display the property value.
                Display of the property value may be
                allowed using special administrative
                interfaces, but is not appropriate to
                the ordinary user.
              
</li>
</ul><p>
          
</p>
<a name="sec:policy"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5.2"></a><h3>5.5.2.&nbsp;
The 'policy' Attributes</h3>

<p>
            The setting element has an optional 'policy'
            attribute. The policy attribute is used to
            define the constraining properties of an
            element. It defines how the element value is
            used by an endpoint (e.g. whether it can or can
            not be used in a session). The following values
            are defined for the 'policy' attribute:
          
</p>
<p>
            </p>
<ul class="text">
<li>
                allow: the value contained in the
                element is allowed and SHOULD be used in
                sessions. This is the default value that
                is used if the 'policy' attribute is
                omitted.
              
</li>
<li>
                disallow: the value contained in the
                element is forbidden and SHOULD NOT be
                used in sessions.
              
</li>
</ul><p>
          
</p>
<p>
            The policy attribute can be omitted if the
            default policy 'allow' applies.
          
</p>
<p>
            </p>
<blockquote class="text">
<p>
                OPEN ISSUE: The policy attribute may not
                be needed for elements outside of a
                settings_container. Further
                clarification is needed on this. Using
                the policy attribute only inside
                containers would further simplify the
                specification of profile data.
              
</p>
</blockquote><p>
          
</p>
<a name="sec:ex-policy"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5.3"></a><h3>5.5.3.&nbsp;
The 'excludedPolicy' Attributes</h3>

<p>
            The "setting_container" element has an optional
            'excludedPolicy' attribute. This attribute
            specifies the default policy for all values that
            are not in the container. Elements that are
            present in the container have their own 'policy'
            attribute, which defines the policy for that
            element. The following values are defined for
            the 'excludedPolicy' attribute:
          
</p>
<p>
            </p>
<ul class="text">
<li>
                allow: values not listed in the
                container are allowed and MAY be used in
                sessions. This is the default value that
                is used if the 'excludedPolicy'
                attribute is omitted.
              
</li>
<li>
                disallow: values not listed in the
                container are forbidden and MUST NOT be
                used in sessions.
              
</li>
</ul><p>
          
</p>
<p>
            The excludedPolicy attribute can be omitted if
            the default policy 'allow' applies. The
            following example shows a policy that allows the
            media type audio and disallows all other media
            types in sessions (effectively, this construct
            requires the use of audio):
          
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;media-types excludedPolicy="disallow"&gt;
  &lt;media-type policy="allow"&gt;audio&lt;/media-type&gt;
&lt;/media-types&gt;

</pre></div><p>

          
</p>
<a name="sec:unidir"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5.4"></a><h3>5.5.4.&nbsp;
The 'direction' Attribute</h3>

<p>
            Some properties are unidirectional and only
            apply to messages or data streams transmitted
            into one direction. For example, a property for
            media streams can be restricted to outgoing
            media streams only. Unidirectional properties
            can be expressed by adding a 'direction'
            attribute to the respective element.
          
</p>
<p>
            The 'direction' attribute can have the following
            values:
          
</p>
<p>
            </p>
<ul class="text">
<li>
                recvonly: the property only applies to
                incoming messages/streams.
              
</li>
<li>
                sendonly: the property only applies to
                outgoing messages/streams.
              
</li>
<li>
                sendrecv: the property applies to
                messages/streams in both directions.
                This is the default value that is used
                if the 'direction' attribute is omitted.
              
</li>
</ul><p>
          
</p>
<a name="sec:pref"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5.5"></a><h3>5.5.5.&nbsp;
The 'q' Attribute</h3>

<p>
            It should be possible to express a preference
            for a certain value, if multiple values are
            allowed within a property. For example, it
            should be possible to express that the codecs
            G.711 and G.729 are allowed, but G.711 is
            preferred. Preferences can be expressed by
            adding a 'q' attribute to a property element.
            Elements derived from the "setting" element for
            which multiple occurrences and values are
            allowed SHOULD have a "q" attribute if the order
            is significant. Typically these elements are
            contained in an element derived from the
            "setting_container" element. The 'q' attribute
            is only meaningful if the 'policy' attribute set
            to 'allowed'. It must be ignored in all other
            cases.
          
</p>
<p>
            An element with a higher 'q' value is preferred
            over one with a lower 'q' value. 'q' attribute
            values range from 0 to 1. The default value is
            0.5.
          
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6"></a><h3>5.6.&nbsp;
The 'profileUri' Element</h3>

<p>
          The &lt;profileUri&gt; element contains the URI of
          this profile on the profile server. The value
          contained in the profileUri element may be different
          than the URI subscribe to when retrieving this
          profile. When the user agent retrieves a profile
          where the profileUri is different than the subscribe
          to URI, the user agent SHOULD unsubscribe to the
          current URI and then subscribe to the new URI.
        
</p>
<p>
          The &lt;profileUri&gt; element is optional and MAY
          occur only once inside a &lt;propertySet&gt;
          element. The profileUri element is specific to the
          local-network, device, user or application profile
          in which it occurs. It has no meaning outside of the
          profile in which it occurs and SHOULD NOT be merged.
        
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.7"></a><h3>5.7.&nbsp;
The 'profileCredential' Element</h3>

<p>
          The &lt;profileCredential&gt; element contains the
          digest authentication information that SHOULD be
          used for authentication for the profile subscription
          via SIP or profile retrieval via HTTP, HTTPS, etc.
          The profileCredential element is optional and MAY
          occur only once inside a propertySet element. The
          profileCredential element is specific to the
          local-network, device, user or application profile
          in which it occurs. It has no meaning outside of the
          profile in which it occurs and SHOULD NOT be merged.
          The profileCredential element MUST contain exactly
          one of each of the elements: realm, authUser and one
          of either a1Digest or password.
        
</p>
<a name="realm-element"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.7.1"></a><h3>5.7.1.&nbsp;
realm Element</h3>

<p>
            The realm element contains the string that
            defines the realm to which this credential
            pertains. The value of the realm element is the
            same as the realm parameter in the
            <a class='info' href='#RFC2617'>[RFC2617]<span> (</span><span class='info'>Franks, J., Hallam-Baker, P., Hostetler, J., Lawrence, S., Leach, P., Luotonen, A., and L. Stewart, &ldquo;HTTP Authentication: Basic and Digest Access Authentication,&rdquo; June&nbsp;1999.</span><span>)</span></a>
            headers: WWW-Authenticate, Authorization and the
            <a class='info' href='#RFC3261'>SIP<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261]
            headers: Proxy-Authenticate and
            Proxy-Authorization. If a match of the realm
            value is found, the user agent uses the values
            in the authUser and a1Digest elements contained
            in the profileCredential element. Exactly one
            realm element MUST be contained in a
            profileCredential element. A wildcard of "*" MAY
            be used as the realm value in which case the
            user agent MUST calculate the A1 DIGEST for the
            realm given in the authentication challenge. If
            the wildcard is given for the realm, the clear
            text form of the password contained in the
            password element MUST also be used.
          
</p>
<a name="auth-user-element"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.7.2"></a><h3>5.7.2.&nbsp;
authUser Element</h3>

<p>
            The authUser element contains the string value
            of the "username" parameter which SHOULD be used
            in Authorization and Proxy-Authorization request
            headers when retrying a request that was
            challenged for authentication. Exactly one
            authUser element SHOULD be contained in a
            profileCredential element.
          
</p>
<a name="a1Digest"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.7.3"></a><h3>5.7.3.&nbsp;
a1Digest Element</h3>

<p>
            The a1Digest element contains a string with the
            value of the A1 digest of the username, realm
            and password as defined in
            <a class='info' href='#RFC2617'>[RFC2617]<span> (</span><span class='info'>Franks, J., Hallam-Baker, P., Hostetler, J., Lawrence, S., Leach, P., Luotonen, A., and L. Stewart, &ldquo;HTTP Authentication: Basic and Digest Access Authentication,&rdquo; June&nbsp;1999.</span><span>)</span></a>
            . At most one a1Digest element MUST be contained
            in a profileCredential element. The a1Digest
            element MUST NOT exist in a profileCredential
            element containing a password element. The
            username and realm used to construct the value
            of the a1Digest element MUST match the values of
            the realm and authUser elements contained in the
            profileCredential element with the a1Digest
            element.
          
</p>
<a name="password"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.7.4"></a><h3>5.7.4.&nbsp;
password Element</h3>

<p>
            The password element contains the clear text
            password for use with
            <a class='info' href='#RFC2617'>DIGEST Authentication<span> (</span><span class='info'>Franks, J., Hallam-Baker, P., Hostetler, J., Lawrence, S., Leach, P., Luotonen, A., and L. Stewart, &ldquo;HTTP Authentication: Basic and Digest Access Authentication,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2617]
            . At most one password MUST be contained in a
            profileCredential element. The password element
            MUST NOT exist in a profileCredential element
            containing a a1Digest element. The user agent
            uses this password along with the realm and
            authUser elements to calculate the A1 digest
            used for DIGEST Authentication.
          
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.8"></a><h3>5.8.&nbsp;
The 'profileContactUri' Element</h3>

<p>
          The &lt;profileContactUri&gt; element contains a
          contact URI (e.g. a SIP, HTTP URI or email address)
          under which the issuer of this profile can be
          reached. The contact element may, for example,
          contain the address of a support hotline.
        
</p>
<p>
          The &lt;profileContactUri&gt; element is optional
          and MAY occur multiple times inside a
          &lt;propertySet&gt; element. Multiple instances of
          the profileContactUri element allow multiple URI
          schemes to be provided for contact information. The
          user agent MAY use the URI contained
          profile-contact-info element which has a URI scheme
          that the user agent supports and can make work to
          provide support help for the profile. The user agent
          MAY provide the URIs to the user to contact the
          creator of the profile through other communication
          channels. The profileContactUri element is specific
          to the local-network, device, user or application
          profile in which it occurs. It has no meaning
          outside of the profile in which it occurs and SHOULD
          NOT be merged.
        
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.9"></a><h3>5.9.&nbsp;
The 'profileInfo' Element</h3>

<p>
          The &lt;profileInfo&gt; element provides a short
          textual description of the property that should be
          intelligible to the human user. This element may,
          for example, contain information about the nature of
          this profile, such as "Access Network Profile". The
          text in the &lt;profileInfo&gt; element is in
          particular be helpful when a user needs to decide
          whether or not to use a newly downloaded profile or
          when problems with a profile (e.g. a policy
          conflict) occur. A user agent MAY display this
          information in these cases.
        
</p>
<p>
          The &lt;profileInfo&gt; element is optional and MAY
          occur only once inside a &lt;propertySet&gt;
          element. The profileInfo element is specific to the
          local-network, device, user or application profile
          in which it occurs. It has not meaning outside of
          the profile in which it occurs and SHOULD NOT be
          merged.
        
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.10"></a><h3>5.10.&nbsp;
Example Profile Dataset</h3>

<p>
          The following XML example shows a SIP Profile
          Dataset with example extension setting elements:
          ddd, foo, bar, boo, containerElement and setting
          container elements: myContainer, myContainer1,
          myContainer2 and container3.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;propertySet xmlns="urn:ietf:params:xml:ns:uaprof"&gt;
    &lt;profileUri&gt;sip:a1b2c3d4e5f6@example.com&lt;/profileUri&gt;
    &lt;profileCredential&gt;
         &lt;realm&gt;example.com&lt;/realm&gt;
         &lt;authUser&gt;fred&lt;/authUser&gt;
         &lt;a1Digest&gt;b6b577fd12aa7e1df8d60735ef56fc2e&lt;/a1Digest&gt;
         &lt;!-- &lt;password&gt;123&lt;/password&gt; --&gt;
    &lt;/profileCredential&gt;
    &lt;profileContactUri&gt;tel:+16175551212&lt;/profileContactUri&gt;
    &lt;profileContactUri&gt;sip:411@example.com&lt;/profileContactUri&gt;
    &lt;profileContactUri&gt;
        http:example.com/sipProfile.html
    &lt;/profileContactUri&gt;
    &lt;profileInfo&gt;
        This is an example profile from example.com
    &lt;/profileInfo&gt;
    &lt;ddd xmlns="blatz" policy="allow"&gt;fff&lt;/ddd&gt;
    &lt;foo xmlns="blatz" visibility="visible" policy="allow"
         direction="sendrecv" q="0"&gt;
    &lt;/foo&gt;
    &lt;bar xmlns="blatz" visibility="hidden" policy=""
         direction="sendonly" q="0.1000"&gt;
    &lt;/bar&gt;
    &lt;myContainer xmlns="blatz" excludedPolicy="disallow"&gt;
        &lt;containerElement q="0.1"&gt;aaa&lt;/containerElement&gt;
        &lt;containerElement&gt;bbb&lt;/containerElement&gt;
        &lt;containerElement q="0.8"&gt;ccc&lt;/containerElement&gt;
    &lt;/myContainer&gt;
    &lt;boo xmlns="newns" q="1"&gt;ggg&lt;/boo&gt;
    &lt;myContainer1 xmlns="blatz" excludedPolicy="allow"&gt;
        &lt;myContainer2 xmlns="newns" excludedPolicy="allow"&gt;
        &lt;/myContainer2&gt;
    &lt;/myContainer1&gt;
    &lt;container3 xmlns="ns3"&gt;
        &lt;containerElement q="0.1"&gt;111&lt;/containerElement&gt;
        &lt;containerElement&gt;222&lt;/containerElement&gt;
        &lt;containerElement q="0.8"&gt;333&lt;/containerElement&gt;
    &lt;/container3&gt;
&lt;/propertySet&gt;

</pre></div>
<a name="schema-merging"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.11"></a><h3>5.11.&nbsp;
Merging Property Sets</h3>

<p>
          A UA may receive property sets from multiple
          sources, which need to be merged into a single
          combined document the UA can work with.
        
</p>
<p>
          Properties that have a single value (e.g. the
          maximum bandwidth allowed) require that a common
          value is determined for this property during the
          merging process. The merging rules for determining
          this value need to be defined individually for each
          element in the schema definition. Properties that
          allow multiple values (i.e. property containers)
          need to be merged by combining the values from the
          different data sets. The following sections describe
          common merging algorithms. A data set definition may
          refer to these algorithms.
        
</p>
<a name="numeric-merging_algorithm"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.11.1"></a><h3>5.11.1.&nbsp;
Single Numeric Value Merging Algorithm</h3>

<p>
            A general merging rule for elements with numeric
            values is to select the largest or the smallest
            value. For example, a merging rule for a
            &lt;max-bandwidth&gt; element would be to select
            the smallest value from the values that are in
            the competing data sets.
          
</p>
<a name="multivalue-merging_algorithm"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.11.2"></a><h3>5.11.2.&nbsp;
Multiple Enumerated Value Merging Algorithm</h3>

<p>
            Multiple values in property containers are
            merged by combining the values from each of the
            competing data sets. This is accomplished by
            copying the elements from each property
            container into the merged container. Elements
            with identical values are only copied once. The
            'policy' attribute of two elements with the same
            value is adjusted during the merging process
            according to Table 1. If an element exists only
            in one property container, then the default
            policy of the other container (i.e. the
            excludedPolicy) is used when accessing Table 1.
            For example, if an element is disallowed in one
            data set and the element is not contained in the
            other data set but the default policy is allowed
            for that data set, then the values disallowed
            and allowed are used to access Table 1.
            Consequently, the element will be disallowed in
            the merged data set. Finally, the excludedPolicy
            attributes of the containers are also merged
            using Table 1. In addition to these merging
            rules, each schema may define specific merging
            rules for each property container.
          
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

set 1 \ set 2 |  allow   | disallow
--------------+----------+----------
allow         |  allow   | disallow
disallow      | disallow | disallow

            Table 1: merging policies.

</pre></div><p>

          
</p>
<p>
            The following example illustrates the merging
            process for two data sets. All elements are
            merged into one container and the policy
            attributes are adjusted according to Table 1.
            The merged container has the default policy
            disallow, which is determined using Table 1. The
            entry for PCMA in the merged data set is
            redundant since it has the default policy.
          
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

Data set 1:
&lt;codecs excludedPolicy='allow'&gt;
  &lt;codec policy='disallow'&gt;PCMA&lt;/codec&gt;
&lt;/codecs&gt;

Data set 2:
&lt;codecs excludedPolicy='disallow'&gt;
  &lt;codec policy='allow'&gt;PCMA&lt;/codec&gt;
  &lt;codec policy='allow'&gt;G729&lt;/codec&gt;
&lt;/codecs&gt;

Merged data set:
&lt;codecs excludedPolicy='disallow'&gt;
  &lt;codec policy='disallow'&gt;PCMA&lt;/codec&gt;
  &lt;codec policy='allow'&gt;G729&lt;/codec&gt;
&lt;/codecs&gt;

</pre></div><p>

          
</p>
<p>
            Some constellations of policy attributes result
            in an illegal merged data set. They constitute a
            conflict that can not be resolved automatically.
            For example, two data sets may define two
            non-overlapping sets of allowed audio codecs and
            both disallow all other codes. The resulting
            merged set of codecs would be empty, which is
            illegal according to the schema definition of
            the codecs element. If the use of these
            properties is enforced by both networks, the UA
            may experience difficulties or may not be able
            to set up a session at all.
          
</p>
<p>
            The combined property set MUST again be valid
            and well-formed according to the schema
            definitions. A conflict occurs if the combined
            property set is not a well-formed document after
            the merging process is completed.
          
</p>
<a name="singlelocal-merging_algorithm"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.11.3"></a><h3>5.11.3.&nbsp;
Closest Value First Merging Algorithm</h3>

<p>
            Some properties require that the values from
            different data sets are ordered based on the
            origin of the data set during the merging
            process. Property values that come from a domain
            close to the user agent take precedence over
            values that were in a data set delivered by a
            remote domain. This order can be used, for
            example, to select the property value from the
            closest domain. In many cases, this is the local
            domain of the user agent. For example, the URI
            of an outbound proxy could be merged this way.
            This order can also be used to generate an
            ordered list of property values during the
            merging process. For example, multiple values
            for media intermediaries can be ordered so that
            the closest media intermediary is traversed
            before the second closest intermediary and so
            on.
          
</p>
<p>
            This merging algorithm requires that the source
            of a data set is considered.
          
</p>
<p>
            If property sets are delivered through the
            configuration framework
            <a class='info' href='#I-D.ietf-sipping-config-framework'>[I&#8209;D.ietf&#8209;sipping&#8209;config&#8209;framework]<span> (</span><span class='info'>Channabasappa, S., &ldquo;A Framework for Session Initiation Protocol User Agent Profile Delivery,&rdquo; February&nbsp;2010.</span><span>)</span></a>
            , the value received through a subscription
            using the "local-network" profile-type takes
            precedence over values received through other
            profile-type subscriptions.
          
</p>
<p>
            </p>
<blockquote class="text">
<p>
                OPEN ISSUE: Can we define an order for
                'device', 'user', and 'application'
                profiles?
              
</p>
</blockquote><p>
          
</p>
<p>
            The session-specific policy mechanism
            <a class='info' href='#I-D.ietf-sip-session-policy-framework'>[I&#8209;D.ietf&#8209;sip&#8209;session&#8209;policy&#8209;framework]<span> (</span><span class='info'>Hilt, V., Camarillo, G., and J. Rosenberg, &ldquo;A Framework for Session Initiation Protocol (SIP) Session Policies,&rdquo; February&nbsp;2010.</span><span>)</span></a>
            provides an order among policy servers. This
            order is based on the order, in which a SIP
            message traverses the network, starting with the
            closest domain. This order can directly be used
            to order property values as described above.
          
</p>
<a name="common_types"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.12"></a><h3>5.12.&nbsp;
Common Types</h3>

<p>
          The schema also defines a set of common types that
          are used in defining data sets (e.g. DataIpPort).
          [Need to document common types.]
        
</p>
<a name="defining-datasets"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Defining Data Sets</h3>

<p>
        This section covers several issues that should be take
        into consideration when specifying new data set schemas.
        This is intended to be a guide to authors writing
        specifications defining a new data set schema or
        extensions to existing ones.
      
</p>
<a name="defining-datasets-schema"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Namespace</h3>

<p>
          It is RECOMMENDED that a data set defines a new
          <a class='info' href='#W3C.REC-xml-names-19990114'>XML namespace<span> (</span><span class='info'>Hollander, D., Bray, T., and A. Layman, &ldquo;Namespaces in XML,&rdquo; January&nbsp;1999.</span><span>)</span></a> [W3C.REC&#8209;xml&#8209;names&#8209;19990114]
          to scope all of the properties that are defined in
          the name space.
        
</p>
<a name="defining-datasets-properties"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Property Definitions</h3>

<p>
          The properties defined in a data set schema may be
          simple (i.e. having a single value) or they may be
          complex (i.e. a container with multiple values).
          Each property in the data set SHOULD inherit from
          the "setting" element. Complex properties and all of
          their child elements each should inherit from
          "setting" as well.
        
</p>
<p>
          A data set specification should contain a section
          which defines the meaning of all of the properties
          contained in the data set. The objective is to
          define the property such that implementers have a
          clear definition and semantics to interpret
          properties in a consistent way. User agents not only
          need to use the same profile content, they need to
          apply the properties in a consistent way to achieve
          true interoperability.
        
</p>
<p>
          The following information should be defined for each
          property in a data set:

          </p>
<ul class="text">
<li>
              description: describe the meaning and
              application of the property.
            
</li>
<li>
              cardinality: define how many instances of
              this property element may occur in a data
              set (e.g. zero, one or many) as well as its
              relationship to any other properties in this
              or other data sets.
            
</li>
<li>
              default value: define the default value of
              this property if it is not set. Describe if
              the default is different if the property is
              present and not set vs. completely absent
              from the data set. Define if the default
              varies in relation to another property.
            
</li>
</ul><p>
        
</p>
<a name="defining-datasets-merging"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Merging Data Sets</h3>

<p>
          User agents may receive data sets from multiple
          sources. They need to merge these data sets in order
          to create an overall data set they can work with.
          Collisions on data sets may occur if multiple
          sources provide different values for the same
          properties. These collisions need to be resolved
          during the merging process.
        
</p>
<p>
          A data set schema MUST define rules for merging data
          sets from different sources for each property that
          is defined. Considerations for merging data sets are
          discussed in
          <a class='info' href='#schema-merging'>Section&nbsp;5.11<span> (</span><span class='info'>Merging Property Sets</span><span>)</span></a>
          . A data set schema must define if and how these
          consideration apply and MAY define alternative
          merging rules for specific settings. A data set
          schema must also identify combinations of properties
          that constitute a conflict that can't resolved. It
          may provide additional guidelines for the behavior
          of a user agent in these cases.
        
</p>
<a name="candidiate-datasets"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Candidate Data Sets</h3>

<p>
        The following sections name some of the candidate data
        sets that are or may be defined. These data sets can be
        aggregated to form profiles appropriate to the
        capabilities of a user agent implementation.
      
</p>
<p>
        </p>
<ul class="text">
<li>
            SIP Protocol Data Set: the lowest common
            denominator set of properties common to all SIP
            user agents of any capability. A schema covering
            the elements of this data set can be found in
            <a class='info' href='#I-D.petrie-sipping-sip-dataset'>[I&#8209;D.petrie&#8209;sipping&#8209;sip&#8209;dataset]<span> (</span><span class='info'>Channabasappa, S. and S. Ganesan, &ldquo;The Core Session Initiation Protocol User Agent Protocol Data Set,&rdquo; November&nbsp;2007.</span><span>)</span></a>
            .
          
</li>
<li>
            Media Data Set: this data set contains media
            related policies. A schema covering the elements
            of this data set can be found in
            <a class='info' href='#I-D.ietf-sipping-media-policy-dataset'>[I&#8209;D.ietf&#8209;sipping&#8209;media&#8209;policy&#8209;dataset]<span> (</span><span class='info'>Hilt, V., Worley, D., Camarillo, G., and J. Rosenberg, &ldquo;A User Agent Profile Data Set for Media Policy,&rdquo; March&nbsp;2010.</span><span>)</span></a>
            .
          
</li>
<li>
            Identity Data Set: AORs and lines (see
            <a class='info' href='#I-D.petrie-sipping-identity-dataset'>[I&#8209;D.petrie&#8209;sipping&#8209;identity&#8209;dataset]<span> (</span><span class='info'>Petrie, D., Channabasappa, S., and S. Ganesan, &ldquo;The Session Initiation Protocol User Agent Identity Profile Data Set,&rdquo; November&nbsp;2007.</span><span>)</span></a>
            )
          
</li>
<li>
            HTTP Protocol Data Set: server settings. Proxy
            for clients.
          
</li>
<li>
            NAT Traversal Data Set: settings for STUN, TURN
            etc.
          
</li>
<li>
            SIP Digit Maps Data Set:
            <a class='info' href='#I-D.petrie-sipping-voip-features-dataset'>[I&#8209;D.petrie&#8209;sipping&#8209;voip&#8209;features&#8209;dataset]<span> (</span><span class='info'>Petrie, D., Channabasappa, S., and S. Ganesan, &ldquo;The Session Initiation Protocol User Agent VoIP Features Data Set,&rdquo; November&nbsp;2007.</span><span>)</span></a>
          
</li>
<li>
            VoIP Features:
            <a class='info' href='#I-D.petrie-sipping-voip-features-dataset'>[I&#8209;D.petrie&#8209;sipping&#8209;voip&#8209;features&#8209;dataset]<span> (</span><span class='info'>Petrie, D., Channabasappa, S., and S. Ganesan, &ldquo;The Session Initiation Protocol User Agent VoIP Features Data Set,&rdquo; November&nbsp;2007.</span><span>)</span></a>
          
</li>
</ul><p>
      
</p>
<a name="security-considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>
        Security is mostly a delivery problem. The delivery
        framework SHOULD provide a secure means of delivering
        the profile data as it may contain sensitive data that
        would be undesirable if it were stolen or sniffed.
        Storage of the profile on the profile delivery server
        and user agent is an implementation problem. The profile
        delivery server and the user agent SHOULD provide
        protection that prevents unauthorized access of the
        profile data. The profile delivery server and the user
        agent SHOULD enforce the access control policies defined
        in the profile data sets if present.

        </p>
<blockquote class="text">
<p>
            [The point of the access control construct on
            the data set is to provide some security policy
            on the visibility and ability to change
            sensitive properties. Does the access control
            mechanism also create a security problem where
            the local network can set or hide properties
            from the user?]
          
</p>
</blockquote><p>
      
</p>
<p>
        Some transport mechanisms for delivery of the profile
        data do not provide a secure means of delivery. In
        addition some user agents may not have the resources to
        support the secure mechanism used for delivery (e.g.
        TLS).
      
</p>
<a name="iana-considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
IANA Considerations</h3>

<p>
        XML name space registration:
        urn:ietf:params:xml:ns:uaprof
      
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
Content-type registration for 'application/uaprofile+xml'</h3>

<p>
          </p>
<blockquote class="text"><dl>
<dt>To: ietf-types@iana.org</dt>
<dd>
</dd>
<dt>Subject: Registration of MIME media type application/uaprofile+xml</dt>
<dd>
</dd>
<dt>MIME media type name:  application</dt>
<dd>
</dd>
<dt>MIME subtype name:     uaprofile+xml</dt>
<dd>
</dd>
<dt>Required parameters:   (none)</dt>
<dd>
</dd>
<dt>Optional parameters:   charset</dt>
<dd>
              Indicates the character encoding of enclosed
              XML. Default is UTF-8.
            
</dd>
<dt>Encoding considerations:</dt>
<dd>
              Uses XML, which can employ 8-bit characters,
              depending on the character encoding used.
              See RFC 3023 <a class='info' href='#RFC3023'>[RFC3023]<span> (</span><span class='info'>Murata, M., St. Laurent, S., and D. Kohn, &ldquo;XML Media Types,&rdquo; January&nbsp;2001.</span><span>)</span></a>, section 3.2.
            
</dd>
<dt>Security considerations:</dt>
<dd>
              This content type is designed to carry SIP
              user agent profile data, which may be
              considered private information. Appropriate
              precautions should be adopted to limit
              disclosure of this information.
            
</dd>
<dt>Interoperability considerations:</dt>
<dd>
              This content type provides a common format
              for exchange of SIP user agent profile
              information.
            
</dd>
<dt>Published specification:</dt>
<dd>
              RFC XXXX (Note to RFC Editor: Please fill in
              XXXX with the RFC number of this
              specification)
            
</dd>
<dt>Applications which use this media type:</dt>
<dd>
              SIP user agents and profile delivery
              servers.
            
</dd>
<dt>Additional information:</dt>
<dd>
              Magic number(s): File extension(s):
              Macintosh File Type Code(s):
            
</dd>
<dt>Person &amp; email address to contact for further information:</dt>
<dd>
              Sam Ganesan EMail: sam.ganesan@motorola.com
              com
            
</dd>
<dt>Intended usage:</dt>
<dd>LIMITED USE
</dd>
<dt>Author/Change controller:</dt>
<dd>
              This specification is a proposed work item
              of the IETF SIPPING working group, with
              mailing list address: sipping@ietf.org
            
</dd>
<dt>Other information:</dt>
<dd>
              This media type is a specialization of
              application/xml <a class='info' href='#RFC3023'>[RFC3023]<span> (</span><span class='info'>Murata, M., St. Laurent, S., and D. Kohn, &ldquo;XML Media Types,&rdquo; January&nbsp;2001.</span><span>)</span></a>, and many of the
              considerations described there also apply to
              application/uaprof+xml.
            
</dd>
</dl></blockquote><p>
        
</p>
<a name="acknowledgments"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Acknowledgments</h3>

<p>The WG version of the document is based on an individual draft authored by Dan Petrie, Scott Lawrence, Martin Dolly and Volker Hilt. 
      It has been reviewed by many members of the SIPPING WG.  In particular, we thank Henning Schulzrinne, Henry Sinnreich, Christian Stredicke for feedback on early versions of the document. We also thank Mary Barnes for her reviews and assistance with the current version of the document.
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sip-session-policy-framework">[I-D.ietf-sip-session-policy-framework]</a></td>
<td class="author-text">Hilt, V., Camarillo, G., and J. Rosenberg, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-session-policy-framework-07.txt">A Framework for Session Initiation Protocol (SIP) Session Policies</a>,&rdquo; draft-ietf-sip-session-policy-framework-07 (work in progress), February&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-session-policy-framework-07.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sipping-config-framework">[I-D.ietf-sipping-config-framework]</a></td>
<td class="author-text">Channabasappa, S., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipping-config-framework-17.txt">A Framework for Session Initiation Protocol User Agent Profile Delivery</a>,&rdquo; draft-ietf-sipping-config-framework-17 (work in progress), February&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipping-config-framework-17.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2617">[RFC2617]</a></td>
<td class="author-text"><a href="mailto:john@math.nwu.edu">Franks, J.</a>, <a href="mailto:pbaker@verisign.com">Hallam-Baker, P.</a>, <a href="mailto:jeff@AbiSource.com">Hostetler, J.</a>, <a href="mailto:lawrence@agranat.com">Lawrence, S.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, Luotonen, A., and <a href="mailto:stewart@OpenMarket.com">L. Stewart</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2617">HTTP Authentication: Basic and Digest Access Authentication</a>,&rdquo; RFC&nbsp;2617, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2617.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2617.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2617.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3023">[RFC3023]</a></td>
<td class="author-text">Murata, M., St. Laurent, S., and D. Kohn, &ldquo;<a href="http://tools.ietf.org/html/rfc3023">XML Media Types</a>,&rdquo; RFC&nbsp;3023, January&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3023.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3688">[RFC3688]</a></td>
<td class="author-text">Mealling, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3688">The IETF XML Registry</a>,&rdquo; BCP&nbsp;81, RFC&nbsp;3688, January&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3688.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-xml-names-19990114">[W3C.REC-xml-names-19990114]</a></td>
<td class="author-text">Hollander, D., Bray, T., and A. Layman, &ldquo;<a href="http://www.w3.org/TR/1999/REC-xml-names-19990114">Namespaces in XML</a>,&rdquo; W3C REC&nbsp;REC-xml-names-19990114, January&nbsp;1999.</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-xmlschema-1">[W3C.REC-xmlschema-1]</a></td>
<td class="author-text">Thompson, H., Beech, D., Maloney, M., and N. Mendelsohn, &ldquo;<a href="http://www.w3.org/TR/xmlschema-1/">XML Schema Part 1: Structures</a>,&rdquo; W3C&nbsp;REC-xmlschema-1, May&nbsp;2001.</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-xmlschema-2">[W3C.REC-xmlschema-2]</a></td>
<td class="author-text">Biron, P. and A. Malhotra, &ldquo;<a href="http://www.w3.org/TR/xmlschema-2/">XML Schema Part 2: Datatypes</a>,&rdquo; W3C&nbsp;REC-xmlschema-2, May&nbsp;2001.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sipping-media-policy-dataset">[I-D.ietf-sipping-media-policy-dataset]</a></td>
<td class="author-text">Hilt, V., Worley, D., Camarillo, G., and J. Rosenberg, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipping-media-policy-dataset-09.txt">A User Agent Profile Data Set for Media Policy</a>,&rdquo; draft-ietf-sipping-media-policy-dataset-09 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipping-media-policy-dataset-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.petrie-sipping-identity-dataset">[I-D.petrie-sipping-identity-dataset]</a></td>
<td class="author-text">Petrie, D., Channabasappa, S., and S. Ganesan, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-petrie-sipping-identity-dataset-02.txt">The Session Initiation Protocol User Agent Identity Profile Data Set</a>,&rdquo; draft-petrie-sipping-identity-dataset-02 (work in progress), November&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-petrie-sipping-identity-dataset-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.petrie-sipping-sip-dataset">[I-D.petrie-sipping-sip-dataset]</a></td>
<td class="author-text">Channabasappa, S. and S. Ganesan, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-petrie-sipping-sip-dataset-03.txt">The Core Session Initiation Protocol User Agent Protocol Data Set</a>,&rdquo; draft-petrie-sipping-sip-dataset-03 (work in progress), November&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-petrie-sipping-sip-dataset-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.petrie-sipping-voip-features-dataset">[I-D.petrie-sipping-voip-features-dataset]</a></td>
<td class="author-text">Petrie, D., Channabasappa, S., and S. Ganesan, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-petrie-sipping-voip-features-dataset-02.txt">The Session Initiation Protocol User Agent VoIP Features Data Set</a>,&rdquo; draft-petrie-sipping-voip-features-dataset-02 (work in progress), November&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-petrie-sipping-voip-features-dataset-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2141">[RFC2141]</a></td>
<td class="author-text"><a href="mailto:jayhawk@ds.internic.net">Moats, R.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2141">URN Syntax</a>,&rdquo; RFC&nbsp;2141, May&nbsp;1997 (<a href="ftp://ftp.isi.edu/in-notes/rfc2141.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2141.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2141.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2648">[RFC2648]</a></td>
<td class="author-text"><a href="mailto:jayhawk@att.com">Moats, R.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2648">A URN Namespace for IETF Documents</a>,&rdquo; RFC&nbsp;2648, August&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2648.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3470">[RFC3470]</a></td>
<td class="author-text"><a href="mailto:shollenbeck@verisign.com">Hollenbeck, S.</a>, <a href="mailto:mrose@dbc.mtview.ca.us">Rose, M.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3470">Guidelines for the Use of Extensible Markup Language (XML) within IETF Protocols</a>,&rdquo; BCP&nbsp;70, RFC&nbsp;3470, January&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3470.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3470.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3470.xml">XML</a>).</td></tr>
</table>

<a name="sip-ua-profile-schema"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Relax NG SIP UA Profile Schema</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0"?&gt;
&lt;grammar xmlns="http://relaxng.org/ns/structure/1.0"
 ns="urn:ietf:params:xml:ns:uaprof"
 datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes"&gt;
    &lt;start&gt;
       &lt;element name="propertySet"&gt;
           &lt;optional&gt;
              &lt;ref name="ElementProfileUri"/&gt;
           &lt;/optional&gt;
           &lt;optional&gt;
              &lt;ref name="ElementProfileCredential"/&gt;
           &lt;/optional&gt;
           &lt;zeroOrMore&gt;
              &lt;element name="profileContactUri"&gt;
                  &lt;!-- who to contact for help with this profile --&gt;
                  &lt;data type="anyURI"/&gt;
              &lt;/element&gt;
           &lt;/zeroOrMore&gt;
           &lt;optional&gt;
               &lt;element name="profileInfo"&gt;
                   &lt;text/&gt;
               &lt;/element&gt;
           &lt;/optional&gt;
           &lt;zeroOrMore&gt;
               &lt;choice&gt;
                   &lt;ref name="PropertySetExtension"/&gt;
                   &lt;ref name="ElementGenericSetting"/&gt;
                   &lt;ref name="ElementGenericSettingContainer"/&gt;
               &lt;/choice&gt;
           &lt;/zeroOrMore&gt;
       &lt;/element&gt;
    &lt;/start&gt;
    &lt;!-- example setting with all setting attributes --&gt;
    &lt;!-- &lt;define name="ElementFoo"&gt;
             &lt;element name="foo"&gt;
                 &lt;ref name="SettingAttributes"/&gt;
                 &lt;text/&gt;
              &lt;/element&gt;
         &lt;/define&gt;
     --&gt;
    &lt;define name="ElementProfileUri"&gt;
        &lt;!-- URI to subscribe to for this profile --&gt;
        &lt;element name="profileUri"&gt;
            &lt;ref name="DataSipUri"/&gt;
        &lt;/element&gt;
    &lt;/define&gt;
    &lt;define name="ElementProfileCredential"&gt;
        &lt;!-- credentials for subscribing or getting profile --&gt;
        &lt;element name="profileCredential"&gt;
            &lt;ref name="DataCredential"/&gt;
        &lt;/element&gt;
    &lt;/define&gt;
    &lt;define name="PropertySetExtension"&gt;
        &lt;!-- place to add new settings in other namespaces --&gt;
        &lt;empty/&gt;
    &lt;/define&gt;
    &lt;define name="ElementGenericSettingContainer"&gt;
        &lt;element&gt;
            &lt;anyName&gt;
                &lt;except&gt;
                    &lt;nsName ns="urn:ietf:params:xml:ns:uaprof"/&gt;
                    &lt;nsName ns=""/&gt;
                &lt;/except&gt;
            &lt;/anyName&gt;
            &lt;ref name="SettingContainerAttributes"/&gt;
            &lt;zeroOrMore&gt;
                &lt;ref name="AttributeGeneric"/&gt;
            &lt;/zeroOrMore&gt;
          &lt;!-- container can have containers or settings not both --&gt;
            &lt;choice&gt;
                &lt;zeroOrMore&gt;
                    &lt;ref name="ElementGenericSetting"/&gt;
                &lt;/zeroOrMore&gt;
                &lt;zeroOrMore&gt;
                    &lt;ref name="ElementGenericSettingContainer"/&gt;
                &lt;/zeroOrMore&gt;
            &lt;/choice&gt;
        &lt;/element&gt;
    &lt;/define&gt;
    &lt;define name="ElementGenericSetting"&gt;
        &lt;element&gt;
            &lt;anyName&gt;
                &lt;except&gt;
                    &lt;nsName ns="urn:ietf:params:xml:ns:uaprof"/&gt;
                    &lt;nsName ns=""/&gt;
                &lt;/except&gt;
            &lt;/anyName&gt;
            &lt;ref name="SettingAttributes"/&gt;
            &lt;zeroOrMore&gt;
                &lt;ref name="AttributeGeneric"/&gt;
            &lt;/zeroOrMore&gt;
            &lt;zeroOrMore&gt;
                &lt;choice&gt;
                    &lt;text/&gt;
                    &lt;ref name="ElementGenericSetting"/&gt;
                &lt;/choice&gt;
            &lt;/zeroOrMore&gt;
        &lt;/element&gt;
    &lt;/define&gt;
    &lt;define name="AttributeGeneric"&gt;
        &lt;attribute&gt;
            &lt;anyName&gt;
                &lt;except&gt;
                    &lt;nsName ns="urn:ietf:params:xml:ns:uaprof"/&gt;
                    &lt;nsName ns=""/&gt;
                &lt;/except&gt;
            &lt;/anyName&gt;
        &lt;/attribute&gt;
    &lt;/define&gt;
    &lt;define name="DataCredential"&gt;
        &lt;element name="realm"&gt;
            &lt;text/&gt;
        &lt;/element&gt;
        &lt;element name="authUser"&gt;
            &lt;text/&gt;
        &lt;/element&gt;
        &lt;choice&gt;
            &lt;element name="a1Digest"&gt;
                &lt;data type="string"&gt;
                    &lt;param name="pattern"&gt;[0-9,a-f]{32,32}&lt;/param&gt;
                &lt;/data&gt;
            &lt;/element&gt;
            &lt;element name="password"&gt;
                &lt;text/&gt;
            &lt;/element&gt;
        &lt;/choice&gt;
    &lt;/define&gt;
    &lt;define name="DataSipUri"&gt;
        &lt;choice&gt;
            &lt;data type="anyURI"&gt;
                &lt;param name="pattern"&gt;sip:.*&lt;/param&gt;
            &lt;/data&gt;
            &lt;data type="anyURI"&gt;
                &lt;param name="pattern"&gt;sips:.*&lt;/param&gt;
            &lt;/data&gt;
        &lt;/choice&gt;
    &lt;/define&gt;
    &lt;define name="DataSipNameAddr"&gt;
        &lt;choice&gt;
            &lt;data type="anyURI"&gt;&lt;!-- need to tighten this up --&gt;
                &lt;param name="pattern"&gt;"?.*"?&amp;lt;?sip:.*&lt;/param&gt;
            &lt;/data&gt;
            &lt;data type="anyURI"&gt;
                &lt;param name="pattern"&gt;"?.*"?&amp;lt;?sips:.*&lt;/param&gt;
            &lt;/data&gt;
        &lt;/choice&gt;
    &lt;/define&gt;
    &lt;define name="SettingContainerAttributes"&gt;
        &lt;optional&gt;
            &lt;attribute name="excludedPolicy"&gt;
                &lt;ref name="DataPolicies"/&gt;
            &lt;/attribute&gt;
        &lt;/optional&gt;
    &lt;/define&gt;
    &lt;define name="SettingAttributes"&gt;
        &lt;interleave&gt;
           &lt;optional&gt;
               &lt;ref name="AttributePolicy"/&gt;
           &lt;/optional&gt;
           &lt;optional&gt;
               &lt;ref name="AttributeVisibility"/&gt;
           &lt;/optional&gt;
           &lt;optional&gt;
               &lt;ref name="AttributeDirection"/&gt;
           &lt;/optional&gt;
           &lt;optional&gt;
               &lt;ref name="AttributeQ"/&gt;
           &lt;/optional&gt;
        &lt;/interleave&gt;
    &lt;/define&gt;
    &lt;define name="AttributePolicy"&gt;
       &lt;attribute name="policy"&gt;
           &lt;ref name="DataPolicies"/&gt;
       &lt;/attribute&gt;
    &lt;/define&gt;
    &lt;define name="DataPolicies"&gt;
        &lt;choice&gt;
            &lt;value&gt;&lt;/value&gt;&lt;!-- default of allow --&gt;
            &lt;value&gt;allow&lt;/value&gt;
            &lt;value&gt;disallow&lt;/value&gt;
        &lt;/choice&gt;
    &lt;/define&gt;
    &lt;define name="AttributeVisibility"&gt;
        &lt;attribute name="visibility"&gt;
           &lt;choice&gt;
               &lt;value&gt;&lt;/value&gt;&lt;!-- default of visible --&gt;
               &lt;value&gt;visible&lt;/value&gt;
               &lt;value&gt;hidden&lt;/value&gt;
           &lt;/choice&gt;
        &lt;/attribute&gt;
    &lt;/define&gt;
    &lt;define name="AttributeDirection"&gt;
        &lt;attribute name="direction"&gt;
           &lt;choice&gt;
               &lt;value&gt;&lt;/value&gt;&lt;!-- default of sendrecv --&gt;
               &lt;value&gt;sendrecv&lt;/value&gt;
               &lt;value&gt;sendonly&lt;/value&gt;
               &lt;value&gt;recvonly&lt;/value&gt;
           &lt;/choice&gt;
        &lt;/attribute&gt;
    &lt;/define&gt;
    &lt;define name="AttributeQ"&gt;
        &lt;attribute name="q"&gt;
           &lt;data type="float"&gt;
               &lt;!-- default of 0.5 --&gt;
               &lt;param name="minInclusive"&gt;0&lt;/param&gt;
               &lt;param name="maxInclusive"&gt;1&lt;/param&gt;
           &lt;/data&gt;
        &lt;/attribute&gt;
    &lt;/define&gt;
    &lt;define name="DataIpPort"&gt;
        &lt;data type="integer"&gt;
            &lt;param name="minInclusive"&gt;1&lt;/param&gt;
            &lt;param name="maxInclusive"&gt;65535&lt;/param&gt;
        &lt;/data&gt;
    &lt;/define&gt;
    &lt;define name="DataIpTransport"&gt;
        &lt;choice&gt;
            &lt;value&gt;&lt;/value&gt;&lt;!-- default of UDP --&gt;
            &lt;value&gt;UDP&lt;/value&gt;
            &lt;value&gt;TCP&lt;/value&gt;
            &lt;value&gt;TLS&lt;/value&gt;
            &lt;value&gt;DTLS&lt;/value&gt;
            &lt;value&gt;SCTP&lt;/value&gt;
        &lt;/choice&gt;
    &lt;/define&gt;
&lt;/grammar&gt;

</pre></div>
<a name="requirement-usecases"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Use Cases</h3>

<p>
        In the following use case scenarios the device profile
        is provided by the device owner/manager. The
        owner/manager may be a service provider, an enterprise
        or a user administering the device setup. The user is
        assumed to be the end user operating the user agent. In
        the scenarios that the user profile is provided, the
        user profile contains user specific properties that the
        end user has set directly or indirectly through an
        administration process. The local network profiles
        represent the suggested policy behavior that the local
        network operator would like user agents to adhere to
        <a class='info' href='#I-D.ietf-sip-session-policy-framework'>[I&#8209;D.ietf&#8209;sip&#8209;session&#8209;policy&#8209;framework]<span> (</span><span class='info'>Hilt, V., Camarillo, G., and J. Rosenberg, &ldquo;A Framework for Session Initiation Protocol (SIP) Session Policies,&rdquo; February&nbsp;2010.</span><span>)</span></a>
        . From a security perspective, the local network
        operator cannot trust the user agent to follow the local
        network profile policy. The local network operator must
        use a means external to the user agent to enforce these
        policies. The local network profile is intended to
        express to the user agent, the policies that the user
        agent should follow if the user agent wants to function
        properly in the local network.
      
</p>
<p>
        Two different use cases are developed and discussed
        below. Similar use cases can be developed for individual
        datasets. For exaample, analysis of Transport protocol
        settings for SIP can be carried out in exactly the same
        fashion as the codec use case described below and a set
        of derived requirements to drive the schema for the
        associated datset can be arrived at.
      
</p>
<a name="outbound-proxy-usecase"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.1"></a><h3>B.1.&nbsp;
Outbound Proxy Setting</h3>

<p>
          In the case of the outbound proxy, it is
          unlikely that the user would want to influence
          the outbound proxy for SIP signaling. The device
          owner/manager or the local network operator are
          likely to want to set the outbound proxy
          property. The device profile may define an
          outbound proxy so that the device owner/manager
          can monitor all signaling. The local network
          operator also defines an outbound proxy because
          the proxy allows the SIP signaling to get
          through a NAT or firewall.
        
</p>
<p>
          Two possible solutions to this problem are
          listed.
          </p>
<ul class="text">
<li>
              Define a policy where the local network
              profile overrides the device profile. In
              this approach the local network profile
              wins.
            
</li>
<li>
              Aggregate the outbound proxies. In this
              scenario SIP messages would be sent with
              a pre-populated route set that had two
              hops. First the outbound proxy set in
              the local network profile, then the
              outbound proxy set in the device
              profile.
            
</li>
</ul><p>
        
</p>
<p>
          The aggregation approach is closest to solving
          the requirements to the use case above. By
          aggregating the two outbound proxies, the local
          network provided outbound proxy allows the
          signaling to get out of the local network and
          the device profile provided outbound proxy is
          able to monitor all SIP signaling from the user
          agent.
        
</p>
<a name="codec-usecase"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.2"></a><h3>B.2.&nbsp;
Codec Settings</h3>

<p>
          Use cases for the codec properties are likely
          one of the more complicated sets of properties
          with respect to merging and constraining across
          more than one profile. There are reasonable
          scenarios where requirements can be rationalized
          that the device, user and local network profiles
          may each wish to express preferences and
          constraints on permitted codecs. Without getting
          into details or syntax of the codec properties,
          it is assumed that codec properties will need to
          express a codec definition and a preference
          order. This is the order that these codecs will
          be put in SDP for codec negotiation purposes.
        
</p>
<p>
          The following scenarios illustrate some possible
          combinations of sources of codec properties from
          the device, user and local network profiles.
        
</p>
<a name="codec-notset-usecase"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.2.1"></a><h3>B.2.1.&nbsp;
Codec Setting Not Set</h3>

<p>
            In the scenario where a device has no
            profiles or the profiles contain no codec
            properties, the device will enable a default
            set and preference order of codecs, which
            could be a subset of the codecs the device
            is capable of supporting. The default set
            and preference order of codecs is a
            implemention specific.
          
</p>
<a name="codec-deviceonly-usecase"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.2.2"></a><h3>B.2.2.&nbsp;
Codec Set in Device Profile</h3>

<p>
            This scenario assumes that the device
            profile is the only source of codec
            properties.
            
          
</p>
<p>
            The codecs in the device profile may differ
            from the set of codecs supported by the
            device, due to administrative constraints on
            codec usage.
            
          
</p>
<p>
            
            In this scenario the device profile data
            will dictate the ordered list of codecs to
            be applied. The use agent will ignore codec
            types included in the profile that the user
            agent does not support.
          
</p>
<a name="codec-deviceuser-usecase"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.2.3"></a><h3>B.2.3.&nbsp;
Set in Device and User Profiles</h3>

<p>
            This scenario covers the case where both the
            device profile and the user profile provide
            an ordered list of codecs. The user may
            prefer a higher quality codec to be used, if
            available. Thereby the user profile data may
            provide an ordered list of codecs to be
            applied. The device profile also specifies a
            list of codecs and a default preference
            order.
          
</p>
<p>
            The merging of the data sources is as
            follows:
            </p>
<ul class="text">
<li>
                The ordering of the codecs will be
                determined from the user profile
                data, which overrides the codec
                preference ordering from the device
                profile data.
              
</li>
<li>
                The set of codecs that may be
                applied, are the codecs listed in
                the user data constrained by the
                list of codecs from the device
                profile data.
              
</li>
</ul><p>
          
</p>
<p>
            The case in which none of the codecs in the
            resulting merged profile datasets are
            supported by the device, the profile data
            constitutes a misconfiguration between
            device and user profiles. It may not be
            possible to successfully establish a session
            in this case. It is suggested that the user
            agent provide feedback to the user
            indicating the misconfiguration. The user
            agent may also attempt to function in the
            network by ignoring one or more of the
            profile constraints.
          
</p>
<a name="codec-devicelocal-usecase"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.2.4"></a><h3>B.2.4.&nbsp;
Set in Device and Local Profiles</h3>

<p>
            In this scenario both the local network
            profile and the device profile each provide
            an ordered set of codecs.
            
            Both the local network operator and the
            device provider may feel the need to
            contrain and order the set of codecs used.
            This scenario is very much alike to the
            previous scenario and may be resolved using
            a similar method. However, it likely that
            the local network codec preferences will
            override and constrain the device profile,
            given the caveat that in the circumstances
            where the resulting ordered set of codecs is
            an empty set. In this case there is a
            misconfiguration/incompatibility between the
            device profile and the local network profile
            with regard to the codecs, which may render
            the device non functional.
            
            The user agent may attempt to function in
            the network by ignoring one or more of the
            profile constraints.
          
</p>
<a name="codec-deviceuserlocal-usecase"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.2.5"></a><h3>B.2.5.&nbsp;
Set in Device, User and Local Profiles</h3>

<p>
            In this scenario all profiles namely,
            device, user and local network profiles,
            provide an ordered set of codecs as
            preferences. For example, these may be the
            result of device capabilities, user's
            preference for higher quality media and the
            network providers desire to constrain
            bandwidth usage and or enforce enforce
            uniformity of codec usage.
            
            The data sources could be merged as follows:
            </p>
<ul class="text">
<li>
                The ordering of the codecs will be
                determined from the user profile
                data, which overrides the ordering
                from the device profile data.
              
</li>
<li>

                The set of codecs that may be used
                are the codecs listed in the device
                profile data, constrained by the
                list of codecs from the user profile
                data and further constrained by the
                list of codecs from the local
                network profile data.
              
</li>
</ul><p>
          
</p>
<p>
            
            A resultaing null set of codecs would imply
            a misconfiguration and may prevent the
            device from functioning under these
            circumstances. The user agent may also
            attempt to function in the network by
            ignoring one or more of the profile
            constraints.
          
</p>
<a name="codec-usecase-reqs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.2.6"></a><h3>B.2.6.&nbsp;
Example Derived Requirements</h3>

<p>
            An example set of derived requirements for
            the codec definition is presented here.
            These requirements in turn would drive the
            profile definition for codec usage.
            </p>
<ol class="text">
<li>
                
                The list of codecs in the device
                profile data that get applied is the
                subset of the codecs supported by
                the device. Codecs listed in
                profiles that are not supported by
                the device are ignored.
              
</li>
<li>
                The device profile data will have a
                default ordered list of codecs,
                which implies a preference order to
                be used in the sdp offer.
              
</li>
<li>
                The user profile data may provide an
                ordered list of user preferred
                codecs. The ordering of the codecs
                in the user profile data will
                override the ordering of the codecs
                in the device profile data. The user
                list of codecs may further constrain
                the list of codecs to be used.
              
</li>
<li>
                The local network profile data may
                provide a list of codecs supported.
                This list will further constrain the
                list of codecs that may be offered.
              
</li>
<li>
                The application profile data
                containing codec data will be
                ignored.
              
</li>
<li>
                The profiles need the ability to
                express codecs that may be used and
                codecs that should not be used.
              
</li>
</ol><p>
          
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sumanth Channabasappa</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">CableLabs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">858 Coal Creek Circle</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Louisville, CO  80027</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:sumanth@cablelabs.com">sumanth@cablelabs.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href=""></a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sam Ganesan</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Motorola</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">80 Central Street</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Boxborough, MA  01719</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:sam.ganesan@motorola.com">sam.ganesan@motorola.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href=""></a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Volker Hilt</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bell Labs/Alcatel-Lucent</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">791 Holmdel-Keyport Rd</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Holmdel, NJ  07733</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:volkerh@bell-labs.com">volkerh@bell-labs.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href=""></a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Daniel Petrie</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">SIPez LLC.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">34 Robbins Rd.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Arlington, MA  02476</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 617 273 4000</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:dan.ietf AT SIPez DOT com">dan.ietf AT SIPez DOT com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.SIPez.com/">http://www.SIPez.com/</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
