



IDR Working Group                                            U. Chunduri
Internet-Draft                                                Huawei USA
Intended status: Standards Track                           April 2, 2018
Expires: October 4, 2018


                 BGP Link-State extensions for NSPF ID
                  draft-chunduri-idr-bgp-ls-nspfid-00

Abstract

   Non Shortest Paths (NSPs) used in routing protocols e.g.  by the link
   state routing protocols (IS-IS, OSPFv2 and OSPFv3) within IGP
   topologies.  NSPs help to reduce the data plane path overhead,
   mitigate from MTU issues as well as performance related issues in
   certain data planes and allows granular traffic accounting in the
   network.  NSPs are created locally by operator or can be provisioned
   through PCE or Yang from outside.  This document describes a
   mechanism by which NSP information currently active in the network
   using the BGP routing protocol by defining extensions to BGP Link-
   state address-family.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on October 4, 2018.







Chunduri                 Expires October 4, 2018                [Page 1]

Internet-Draft    BGP Link-State extensions for NSPF ID       April 2018


Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Acronyms  . . . . . . . . . . . . . . . . . . . . . . . .   3
   2.  NSPF ID TLVs Supported by a Node  . . . . . . . . . . . . . .   3
   3.  Elements of Procedure and Encoding  . . . . . . . . . . . . .   4
   4.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   5
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   6
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   6
     7.2.  Informative References  . . . . . . . . . . . . . . . . .   6
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   In a network implementing source routing, packets may be transported
   through the use of segment identifiers (SIDs), where a SID uniquely
   identifies a segment as defined in [I-D.ietf-spring-segment-routing].
   Usage of Non Shortest Paths (NSPs) with SR SIDs by the link state
   routing protocols ( IS-IS, OSPFv2 and OSPFv3) within IGP topologies
   can reduce the data plane path overhead, mitigate from MTU and
   performance related issues and allow granular traffic accounting in
   the network.  IGP NSP extensions are detailed in
   [I-D.ct-isis-nspfid-for-sr-paths] and
   [I-D.ct-ospf-nspfid-for-sr-paths] darfts.

   NSP Forwarding Identifier (NSPF ID) TLV can be associated with allows
   advertisement of multi-hop Traffic Engineered (TE) paths, Fast Re-
   Route (FRR) or certain chained paths.  The flooding scope for the IGP
   extensions for NSPs is IGP area/domain.  Consequently, the contents
   of a Link State Database (LSDB) or a Traffic Engineering Database
   (TED) has the scope of an IGP area/domain and therefore by using the



Chunduri                 Expires October 4, 2018                [Page 2]

Internet-Draft    BGP Link-State extensions for NSPF ID       April 2018


   IGP alone it is not enough to construct NSPs across multiple IGP Area
   or AS boundaries.

   Even though an entity like PCE provisions the NSPs at the ingress
   node, not all NSPs are active and advertised in IGPs as these could
   be subjected to the local policies of ingress node.  Also NSPs can be
   potentially created locally by operators too; it is critical to have
   a complete view of currently active NSPs in the network for creating
   end-to-end paths crossing multiple IGP areas and AS boundaries.

   This document describes extensions to BGP-LS to advertise NSP
   information.  An external component, which is a BGP-LS [RFC7752]
   speaker (e.g., a controller) then can collect NSP information in the
   "north bound" direction across IGP areas or ASes and construct the
   end-to-end path that need to be applied to an incoming packet to
   achieve the desired end-to-end forwarding.

1.1.  Acronyms

   IGP      -  Interior Gateway Protocols

   MTU      -  Maximum Transferrable Unit

   NSP      -  Non Shortest Path

   SID      -  Segment Identifier

   SR       -  Segment Routing

   TE       -  Traffic Engineering

2.  NSPF ID TLVs Supported by a Node

   This section defines a new TLV, NSPF ID TLV in BGP-LS Node Attributes
   of Node NLRI and describes the encoding of the same.  The BGP-LS Node
   attribute, NSPF-ID TLV has the following format:















Chunduri                 Expires October 4, 2018                [Page 3]

Internet-Draft    BGP Link-State extensions for NSPF ID       April 2018


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             Type              |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           MT-ID               |      AF       |  Flags        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Prefix Len    |  FEC Prefix                                   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      //           FEC Prefix (continued, variable)                  //
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      //           NSPF-ID Encoding                                  //
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               Figure 1: Node attribute - NSPF ID TLV Format

      Type - TBD (IANA) from BGP-LS Node attributes registry.

      Length - Total length of the value field in bytes (variable).

      AF - See Section 3.

      MT-ID - is the multi-topology identifier defined in [RFC5120] with
      4 most significant bits reset on transmission and ignored on
      receive.  The remaining 12-bit field contains the MT-ID.  For
      OSPFv2 this is as defined in [RFC4915].  For OSPFv3 it MUST be set
      to zero.

      Prefix Len - contains the length of the prefix in bits.

      FEC Prefix - represents the Forwarding Equivalence Class at the
      tail-end of the advertised NSP.  Value of this field MUST be
      encoded as a 32-bit value for IPv4 "FEC Prefix".  Value of this
      field MUST be 16 octets for IPv6 "FEC Prefix", encoded as an even
      multiple of 32-bit words, padded with zeroed bits as necessary.
      This encoding consumes ((PrefixLength + 31) / 32) 32-bit words.

      Flags: 1 octet field of NSPD ID TLV has flags as defined in
      respective IGP and encoded based on the Protocol-ID field in BGP-
      LS node NLRI.

3.  Elements of Procedure and Encoding

   This TLV can be seen as having 3 logical section viz., encoding of
   FEC Prefix, encoding of NSPF-ID with description of ordered path with
   sub-TLVs and a set of optional non-NSP sub-TLVs which can be used to
   describe one or more parameters of the NSP.  Out of the above only
   the first logical section i.e., encoding FEC Prefix is described here



Chunduri                 Expires October 4, 2018                [Page 4]

Internet-Draft    BGP Link-State extensions for NSPF ID       April 2018


   in IGP agnostic way.  The remaining 2 sections MUST be encoded as
   defined in [I-D.ct-isis-nspfid-for-sr-paths] and
   [I-D.ct-ospf-nspfid-for-sr-paths] darfts.  This MUST be based on the
   Protocol-ID field as defined in section 3.2 of [RFC7752] 'The Node
   NLRI Format'.

   The advertisement of NSPF ID TLV in OSPF has following semantics:

   The OSPFv2/OSPFv3 "NSPF-ID Encoding" as defined in Section 2 is
   encoded in the BGP-LS Node Attribute and the format is as defined in
   [I-D.ct-ospf-nspfid-for-sr-paths] including all possible Non-NSP sub-
   TLVs.  The flags and AF of the NSPF ID TLV are semantically mapped to
   the definition in [I-D.ct-ospf-nspfid-for-sr-paths] section 2 for
   OSPFv2 or section 3 for OSPFv3.

   The advertisement of NSPF ID TLV in IS-IS has following semantics:

   The IS-IS 'NSPF-ID Encoding' as defined in Section 2 is encoded in
   the BGP-LS Node Attribute and the format is as defined in
   [I-D.ct-isis-nspfid-for-sr-paths] including all possible Non-NSP sub-
   TLVs.  The AF field for IS-IS MUST be set to zero.  The flags of the
   NSPF ID TLV are semantically mapped to the definition in
   [I-D.ct-isis-nspfid-for-sr-paths] section 2.

4.  Acknowledgements

   TBD.

5.  IANA Considerations

   This document requests IANA to assign a code point from the "BGP-LS
   Node Descriptor, Link Descriptor, Prefix Descriptor, and Attribute
   TLVs" registry as follows: BGP-LS Node Attribute - NSPF ID TLV as
   described in Section 2.

        TLV #   Name
        -----   ------------------------------
        TBD     NSPF ID TLV in Node attribute


6.  Security Considerations

   This document does not introduce security issues beyond those
   discussed in [RFC7752]







Chunduri                 Expires October 4, 2018                [Page 5]

Internet-Draft    BGP Link-State extensions for NSPF ID       April 2018


7.  References

7.1.  Normative References

   [I-D.ct-isis-nspfid-for-sr-paths]
              Chunduri, U., Tantsura, J., and Y. Qu, "Usage of Non
              Shortest Path Forwarding (NSPF) IDs in IS-IS", draft-ct-
              isis-nspfid-for-sr-paths-01 (work in progress), March
              2018.

   [I-D.ct-ospf-nspfid-for-sr-paths]
              Chunduri, U., Qu, Y., and J. Tantsura, "Usage of Non
              Shortest Path Forwarding (NSPF) IDs in OSPF", draft-ct-
              ospf-nspfid-for-sr-paths-00 (work in progress), March
              2018.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC7752]  Gredler, H., Ed., Medved, J., Previdi, S., Farrel, A., and
              S. Ray, "North-Bound Distribution of Link-State and
              Traffic Engineering (TE) Information Using BGP", RFC 7752,
              DOI 10.17487/RFC7752, March 2016,
              <https://www.rfc-editor.org/info/rfc7752>.

7.2.  Informative References

   [I-D.ietf-spring-segment-routing]
              Filsfils, C., Previdi, S., Ginsberg, L., Decraene, B.,
              Litkowski, S., and R. Shakir, "Segment Routing
              Architecture", draft-ietf-spring-segment-routing-15 (work
              in progress), January 2018.

   [RFC4915]  Psenak, P., Mirtorabi, S., Roy, A., Nguyen, L., and P.
              Pillay-Esnault, "Multi-Topology (MT) Routing in OSPF",
              RFC 4915, DOI 10.17487/RFC4915, June 2007,
              <https://www.rfc-editor.org/info/rfc4915>.

   [RFC5120]  Przygienda, T., Shen, N., and N. Sheth, "M-ISIS: Multi
              Topology (MT) Routing in Intermediate System to
              Intermediate Systems (IS-ISs)", RFC 5120,
              DOI 10.17487/RFC5120, February 2008,
              <https://www.rfc-editor.org/info/rfc5120>.






Chunduri                 Expires October 4, 2018                [Page 6]

Internet-Draft    BGP Link-State extensions for NSPF ID       April 2018


Author's Address

   Uma Chunduri
   Huawei USA
   2330 Central Expressway
   Santa Clara, CA  95050
   USA

   Email: uma.chunduri@huawei.com










































Chunduri                 Expires October 4, 2018                [Page 7]