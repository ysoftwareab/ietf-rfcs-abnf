



PPP Extensions Working Group                                    A. Malis
INTERNET DRAFT                               Ascend Communications, Inc.
Expires: August 1999                                       February 1999
<draft-ietf-pppext-pppoversonet-update-02.txt>
Obsoletes: RFC 1619


                           PPP over SONET/SDH



Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.



Abstract

   The Point-to-Point Protocol (PPP) [1] provides a standard method for
   transporting multi-protocol datagrams over point-to-point links.
   This document describes the use of PPP over Synchronous Optical
   Network (SONET) and Synchronous Digital Heirarchy (SDH) circuits.

   This document is the product of the Point-to-Point Protocol



Malis                         Expires 8/99                      [Page i]

INTERNET-DRAFT             PPP over SONET/SDH              February 1999


   Extensions Working Group of the Internet Engineering Task Force
   (IETF).  Comments should be submitted to the ietf-ppp@merit.edu
   mailing list.
















































Malis                         Expires 8/99                     [Page ii]

INTERNET-DRAFT             PPP over SONET/SDH              February 1999


1.  Introduction

   PPP was designed as a standard method of communicating over point-
   to-point links.  Initial deployment has been over short local lines,
   leased lines, and plain-old-telephone-service (POTS) using modems.
   As new packet services and higher speed lines are introduced, PPP is
   easily deployed in these environments as well.

   This specification is primarily concerned with the use of the PPP
   encapsulation over SONET/SDH links.  Since SONET/SDH is by definition
   a point-to-point circuit, PPP is well suited to use over these links.

   Real differences between SONET and SDH (other than terminology) are
   minor; for the purposes of encapsulation of PPP over SONET/SDH, they
   are inconsequential or irrelevant.

   For the convenience of the reader, we list the equivalent terms below:

       SONET                   SDH
   ---------------------------------------------
   STS-1 frame                 STM-0 frame (rarely used)
   STS-1 SPE                   VC-3
   STS-1 payload               C-3
   STS-3c frame                STM-1 frame, AU-4
   STS-3c SPE                  VC-4
   STS-3c payload              C-4
   STS-12c/48c/192c frame      STM-4/16/64 frame, AU-4-4c/16c/64c
   STS-12c/48c/192c SPE        VC-4-4c/16c/64c
   STS-12c/48c/192c payload    C-4-4c/16c/64c

   The only currently supported frame rates are the following:

   SONET/SDH Name          Bit Rate
   --------------------------------
   STS-1/STM-0            51.84 Mb/s
   STS-3c/STM-1          155.52 Mb/s
   STS-12c/STM-4         622.08 Mb/s
   STS-48c/STM-16       2.48832 Gb/s
   STS-192c/STM-64      9.95328 Gb/s

   This document specifies PPP over SONET/SDH for rates beginning at
   STS-3c/STM-1 and up to and including STS-192c/STM-64.

   The keywords MUST, MUST NOT, MAY, OPTIONAL, REQUIRED, RECOMMENDED,
   SHALL, SHALL NOT, SHOULD, and SHOULD NOT are to be interpreted as
   defined in [6].





Malis                         Expires 8/99                      [Page 1]

INTERNET-DRAFT             PPP over SONET/SDH              February 1999


2.  Physical Layer Requirements

   PPP treats SONET/SDH transport as octet oriented synchronous links.
   SONET/SDH links are full-duplex by definition.

   Interface Format

      PPP in HDLC-like framing presents an octet interface to the
      physical layer.  There is no provision for sub-octets to be
      supplied or accepted.

      The octet stream is mapped into the SONET/SDH Synchronous Payload
      Envelope (SPE), with the octet boundaries aligned with the SPE
      octet boundaries.

      Scrambling is performed during insertion into the SPE to provide
      adequate transparency and protect against potential security
      threats (see Section 6).  For backwards compatibility with RFC
      1619 (STS-3c/STM-1 only), the scrambler MAY have an on/off
      capability where the scrambler is bypassed entirely when it is in
      the off mode.  If this capability is provided, the default MUST be
      set to scrambling enabled.

      For PPP over SONET/SDH, the entire SONET/SDH payload (SPE minus
      the path overhead and any fixed stuff) is scrambled using a self-
      synchronous scrambler of polynomial X**43 + 1.  See Section 4 for
      the description of the scrambler.

      The proper order of operation is:

      When transmitting:

         IP -> PPP -> FCS generation -> Byte stuffing -> Scrambling  ->
         SONET/SDH framing

      When receiving:

         SONET/SDH framing -> Descrambling -> Byte destuffing -> FCS
         detection -> PPP -> IP

      The Path Signal Label (C2) indicates the contents of the SPE.  The
      value of 22 (16 hex) is used to indicate PPP with X^43 + 1
      scrambling.

      For compatibility with RFC 1619 (STS-3c/STM-1 only), if scrambling
      has been configured to be off, then the value 207 (CF hex) is used
      for the Path Signal Label to indicate PPP without scrambling.




Malis                         Expires 8/99                      [Page 2]

INTERNET-DRAFT             PPP over SONET/SDH              February 1999


      The Multiframe Indicator (H4) is unused, and MUST be zero.

   Control Signals

      PPP does not require the use of control signals.  When available,
      using such signals can allow greater functionality and
      performance.  Implications are discussed in [2].



3.  Framing

   The framing for octet-synchronous links is described in "PPP in
   HDLC-like Framing" [2].

   The PPP frames are located by row within the SPE payload.  Because
   frames are variable in length, the frames are allowed to cross SPE
   boundaries.



4.  X**43 + 1 Scrambler Description

   The X**43 + 1 scrambler transmitter and receiver operation are as
   follows:

   Transmitter schematic:

                                              Unscrambled Data
                                                     |
                                                     v
        +-------------------------------------+    +---+
     +->|     --> 43 bit shift register -->   |--->|xor|
     |  +-------------------------------------+    +---+
     |                                               |
     +-----------------------------------------------+
                                                     |
                                                     v
                                               Scrambled Data












Malis                         Expires 8/99                      [Page 3]

INTERNET-DRAFT             PPP over SONET/SDH              February 1999



   Receiver schematic:

                                               Scrambled Data
                                                     |
     +-----------------------------------------------+
     |                                               |
     |                                               v
     |  +-------------------------------------+    +---+
     +->|     --> 43 bit shift register -->   |--->|xor|
        +-------------------------------------+    +---+
                                                     |
                                                     v
                                             Unscrambled Data


   Note: While the HDLC FCS is calculated least significant bit first as
   shown:

              <-  <-  <-  <-
              A   B   C   D

   (that is, the FCS calculator is fed as follows: A[0], A[1], ... A[7],
   B[0], B[1], etc...),  scrambling is done in the opposite manner, most
   significant bit first, as shown:

               ->  ->  ->  ->
               A   B   C   D.

   That is, the scrambler is fed as follows: A[7], A[6], ... A[0], B[7],
   B[6], etc...

   The scrambler operates continuously through the bytes of the SPE,
   bypassing bytes of SONET Path Overhead and any fixed stuff (see
   Figure 20 of ANSI T1.105 [3] or Figure 10-17 of ITU G.707 [5]).  The
   scrambling state at the beginning of a SPE is the state at the end of
   the previous SPE.  Thus, the scrambler runs continuously and is not
   reset per frame. The initial seed is randomly chosen by transmitter
   to improve operational security (see Section 6).  Consequently, the
   first 43 transmitted bits following startup or reframe operation will
   not be descrambled correctly.



5.  Configuration Details

   Other than the FCS length (see below), the standard LCP sync
   configuration defaults apply to SONET/SDH links.



Malis                         Expires 8/99                      [Page 4]

INTERNET-DRAFT             PPP over SONET/SDH              February 1999


   The following Configuration Options are RECOMMENDED for STS-3c/STM-1:

      Magic Number
      No Address and Control Field Compression
      No Protocol Field Compression

   For operation at STS-12c/STM-4 and above, Address and Control Field
   Compression and Protocol Field Compression are NOT RECOMMENDED. The
   Magic Number option remains RECOMMENDED.

   Regarding the FCS length, with one exception, the 32-bit FCS MUST be
   used for all SONET/SDH rates. For STS-3c/STM-1 ONLY, the 16-bit FCS
   MAY be used, with scrambling disabled, for RFC 1619 compatibility.
   The FCS length is set by provisioning and is not negotiated.



6.  Security Considerations

   The major change from RFC 1619 is the addition of payload scrambling
   when inserting the HDLC-like framed PPP packets into the SONET/SDH
   SPE.  RFC 1619 was operationally found to permit malicious users to
   generate packets with bit patterns that could create SONET/SDH-layer
   low-transition-density synchronization problems, emulation of the SDH
   set-reset scrambler pattern, and replication of the STM-N frame
   alignment word.

   The use of the x^43 + 1 self-synchronous scrambler was introduced to
   alleviate these potential security problems.  Predicting the output
   of the scrambler requires knowledge of the 43-bit state of the
   transmitter as the scrambling of a known input is begun.  This
   requires knowledge of both the initial 43-bit state of the scrambler
   when it started and every byte of data scrambled by the device since
   it was started.  The odds of guessing correctly are 1/2**43, with the
   additional probability of 1/127 that a correct guess will leave the
   frame properly aligned in the SONET/SDH payload, which results in a
   probability of 9e-16 against being able to deliberately cause
   SONET/SDH-layer problems.  This seems reasonably secure for this
   application.

   This scrambler is also used when transmitting ATM over SONET/SDH, and
   public network carriers have considerable experience with its use.

   A known security issue is bandwidth reduction by intentional
   transmission of characters or sequences requiring transparency
   processing by including flag and escape characters in user data.
   However, there is general agreement that this is not a credible
   "real-world" risk.



Malis                         Expires 8/99                      [Page 5]

INTERNET-DRAFT             PPP over SONET/SDH              February 1999


7.  Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights.  Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11.  Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard.  Please address the information to the IETF Executive
   Director.



8.  Acknowledgments

   Bill Simpson, Daydreamer, was the author of this document's
   predecessor, RFC 1619, and much of his original text remains.

   The scrambler description was provided by J. Manchester, S. Davida,
   B. Doshi, and J. Anderson of Lucent Technologies, R. Broberg of Cisco
   Systems, and Peter Lothberg of Sprint Corporation.  The security
   analysis was provided by Iain Verigin of PMC-Sierra and Larry McAdams
   of Cisco Systems.



9.  References


   [1]   Simpson, W., Editor, "The Point-to-Point Protocol (PPP)", RFC
         1661, Daydreamer, July 1994.

   [2]   Simpson, W., Editor, "PPP in HDLC-like Framing", RFC 1662,
         Daydreamer, July 1994.

   [3]   American National Standards Institute, "Synchronous Optical
         Network (SONET) - Basic Description including Multiplex



Malis                         Expires 8/99                      [Page 6]

INTERNET-DRAFT             PPP over SONET/SDH              February 1999


         Structure, Rates and Formats," ANSI T1.105-1995.

   [4]   American National Standards Institute, "Synchronous Optical
         Network (SONET)--Payload Mappings," T1.105.02-1998.

   [5]   ITU Recommendation G.707, "Network Node Interface For The
         Synchronous Digital Hierarchy", 1996.

   [6]   Bradner, S., "Key words for use in RFCs to indicate Requirement
         Levels", BCP 14, RFC 2119, Harvard University, March 1997.




10.  Author's Address

   Andrew G. Malis
   Ascend Communications, Inc.
   1 Robbins Road
   Westford, MA 01810 USA

   Phone: +1 978 952 7414
   Email: malis@ascend.com



11.  Full Copyright Statement

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an



Malis                         Expires 8/99                      [Page 7]

INTERNET-DRAFT             PPP over SONET/SDH              February 1999


   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.














































Malis                         Expires 8/99                      [Page 8]

INTERNET-DRAFT             PPP over SONET/SDH              February 1999


                           Table of Contents

     1.     Introduction ..........................................    1
     2.     Physical Layer Requirements ...........................    2
     3.     Framing ...............................................    3
     4.     X**43 + 1 Scrambler Description .......................    3
     5.     Configuration Details .................................    4
     6.     Security Considerations ...............................    5
     7.     Intellectual Property .................................    6
     8.     Acknowledgments .......................................    6
     9.     References ............................................    6
     10.    Author's Address ......................................    7
     11.    Full Copyright Statement ..............................    7






































Malis                         Expires 8/99                    [Page iii]

