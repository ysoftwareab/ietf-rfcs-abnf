Network Working Group                      Vijay Kumar Vasantha(Huawei)           
Internet Draft                             Aug 4, 2008
<draft-kumar-ipv6-pmtu-using-routing-proto-00.txt>
Intended status: Proposed Standard
Expires: Feb 5, 2009

           IPv6 Path MTU computation using routing protocol.

Status of This Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on February 5, 2009.

Abstract                                     

    This document describes a mechanism for dynamically computing IPv6
    PMTU and the modifications needed in IPv6 to support the solution.

Specification of Requirements

    The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
    "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
    document are to be interpreted as described in RFC 2119 [RFC2119].

Table of Contents
Status of This Memo...................................................1
Abstract .............................................................1
Table of Contents.....................................................1
1.  Introduction .....................................................2
2.  PMTU computation in routing domain ...............................2
  2.1 PMTU calculation within a routing protocol area.................3
  2.2 PMTU calculation across a routing protocol area.................3
  2.3 PMTU calculation across an autonomous system ...................4
  2.4 Interoperability with PMTU non-computational routers ...........4
3.  Modification in ICMPv6 error message .............................5
  3.1 Packet Too Big Message .........................................5
4.  Acknowledgments ..................................................5
5.  Normative References .............................................5
6.  Informative References ...........................................5
7.  Authors' Addresses ...............................................5
Full Copyright Statement .............................................6



1.  Introduction

    The current IPv6 PMTU discovery has the following drawbacks,

    1.  The IPv6 PMTU discovery is done by trial and error method, which
        can result in inefficient forwarding such as described below and
        this in turn can result in delay in packet transmission.

        . Packets may be dropped because of packet too big reason by any
          intermediate router.
        . Packets that are very small in size may be forwarded for
          considerable amount of time resulting in inefficient usage of
          available bandwidth.

    2.  The source comes to know about the packet drop only by ICMPv6
        packet too big error. But this error packet will have to travel
        from the problem occurred router to the source of the packet,
        which consumes considerable amount of bandwidth on all the
        intermediate links between the originator and the problem
        occurred node.
    
    This document defines a method in which an optimal PTMU is
    dynamically computed using linked state routing protocols on routers
    and modification needed in IPv6 to convey PMTU information to the
    hosts.

    The method by which PMTU can be calculated for each IPv6 route in an
    IS-IS routing domain can be seen in [ISISPMTU]. The same computation
    can be supported by other linked state routing protocols as well and
    the overhead incurred in doing so is minimal as PMTU computation can
    be closely associated with route computation.

    In the remainder of this document, the key words "MUST", "MUST NOT"
    "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULDNOT",
    "RECOMMENDED","MAY", and "OPTIONAL" are to be interpreted as
    described in [RFC2119].

2.  PMTU computation in routing domain

    Internet is composed of many Autonomous systems and each autonomous
    system is in turn composed of many areas. The below section
    describes the overview of PMTU computation at each of these
    hierarchy in the routing domain.

2.1 PMTU calculation within a routing protocol area

               --------------
           ////              \\\\
         //                      \\
        |                          |
       |          AREA K            |
        |                          |
         \\                      //
           \\\\              ////
               --------------


    In any routing area all the routers will have complete path to reach
    all intra-area routes. The MTU to a particular destination along the
    shortest path tree is considered as the PMTU to that particular
    destination. Thus all the intra-area routes can be associated with
    an optimal PMTU value. [ISISPMTU] describes an algorithm to achieve
    the same and the same algorithm can be used in any other link state
    IGP.

    2.2 PMTU calculation across a routing protocol area

             -----------              -----------
         ////           \\\\      ////           \\\\
       //                   \\  //                   \\
      |                       ||                       |
     |          RTA          |RTB|        RTC           |
      |                       ||                       |
       \\                   //  \\                   //
         \\\\           ////      \\\\           ////
             -----------              -----------
   
               AREA K                   AREA L

    As areas are created for hierarchical routing, the inter-area
    route's path won't be completely visible to intra-area routers.
    Consider a destination X originated by the router RTC, the
    intra-area router RTA will know about the destination X only through
    the area border router RTB and the path information of the
    destination X on RTA will be confined only till the area border
    router RTB.

    As described in sec 2.1 the intra-area router like RTA can compute
    PMTU for the inter-area destination like X considering only the
    intra-area path information. But PMTU so computed won't reflect the
    correct value till destination. Thus for the intra-area router like
    RTA additional information is needed to compute the correct value of
    PMTU for inter-area routes.

    The ABR RTB provides the additional PMTU information from itself to
    the destination when transferring route between areas and the
    intra-area router can use the additional information and calculate
    optimal PMTU.

    [ISISPMTU] describes an algorithm to achieve the same and the same
    algorithm can be used in any other link state IGP.

    2.3 PMTU calculation across an autonomous system

             -----------              -----------
         ////           \\\\      ////           \\\\
       //                   \\  //                   \\
      |                       ||                       |
     |          AS1         |ASBR|        AS2           |
      |                       ||                       |
       \\                   //  \\                   //
         \\\\           ////      \\\\           ////
             -----------              -----------
   

    The problem described in section 2.2 is equally applicable when
    dealing with inter AS routes. If each AS is operated under a
    different protocol then intra-AS router cannot know the full path to
    inter-AS routes, hence the ASBR should support the transformation of
    PMTU across AS.
   
    To support the PMTU computation across the AS all related protocols
    should support the PMTU computation and PMTU information transfer
    across ASBR. The method by which this is done in all the protocols
    is out of scope of this document and the method by which IS-IS
    supports the calculation and transfers the information across
    protocol can be seen in [ISISPMTU].

    Any change in PMTU of a route should be dynamically detected in
    routing domain and PMTU should be recomputed. Thus all the routes in
    a routing domain should be associated with a PMTU value and this
    PMTU information should be downloaded to forwarding information
    base.

    2.4 Interoperability with PMTU non-computational routers

    While interacting with PMTU non-computational routers the complete
    information to compute the PMTU may not be available and the
    interaction with PMTU non-computational router can occur within an
    area, across an area and/or across an autonomous system.

    [ISISPMTU] addresses this problem by carrying out best effort PMTU
    computation at each hierarchy and the same algorithm can be applied
    to other link state protocols as well. If the so computed PMTU is
    not optimal then the originator of the IPv6 packet can know the 
    actual PMTU through the existing ICMPv6 packet too big messages.

3.  Modification in ICMPv6 error message

    3.1 Packet Too Big Message

    The router should generate ICMPv6 packet too big error whenever it
    detects that the size of the packet is greater than the computed
    PMTU to the destination. The ICMPv6 packet too big error message
    should convey the computed PMTU to the destination rather than the
    outgoing interface's MTU value.

    If a router does not have a computed PMTU value for a destination
    then the forwarding behavior is unchanged.


4.  Acknowledgements

    The author would like to thank Saravana Kumar and K.L.Srini
   
5.  Normative References

    [ISISPMTU]   Vijay Kumar Vasantha
                 "draft-kumar-isis-path-mtu-00.txt".

6.  Informative References

    [ISO10589]   ISO.  Intermediate System to Intermediate System
                 Routing Exchange Protocol for Use in Conjunction with 
                 the Protocol for Providing the Connectionless-Mode 
                 Network Service. ISO 10589, 1992.

    [RFC1981]    McCann, Deering & Mogul RFC 1981 Path MTU Discovery for
                 IP version 6, August 1996


7.  Authors' Addresses

    Vijay Kumar Vasantha
    Huawei Technologies India Private Limited
    Bangalore, India - 560008
    vijaykumar@huawei.com

Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed
   to pertain to the implementation or use of the technology
   described in this document or the extent to which any license
   under such rights might or might not be available; nor does it
   represent that it has made any independent effort to identify any
   such rights.  Information on the procedures with respect to rights
   in RFC documents can be found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use
   of such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository
   at http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention
   any copyrights, patents or patent applications, or other
   proprietary rights that may cover technology that may be required
   to implement this standard.  Please address the information to the
   IETF at ietf-ipr@ietf.org.

Acknowledgment

    Funding for the RFC Editor function is currently provided by the
    Internet Society.