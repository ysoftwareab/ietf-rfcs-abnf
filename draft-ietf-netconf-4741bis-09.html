<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Network Configuration Protocol (NETCONF)</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Terminology">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Protocol Overview">
<link href="#rfc.section.1.3" rel="Chapter" title="1.3 Capabilities">
<link href="#rfc.section.1.4" rel="Chapter" title="1.4 Separation of Configuration and State Data">
<link href="#rfc.section.2" rel="Chapter" title="2 Transport Protocol Requirements">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Connection-Oriented Operation">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Authentication, Integrity, and Confidentiality">
<link href="#rfc.section.2.3" rel="Chapter" title="2.3 Mandatory Transport Protocol">
<link href="#rfc.section.3" rel="Chapter" title="3 XML Considerations">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Namespace">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Document Type Declarations">
<link href="#rfc.section.4" rel="Chapter" title="4 RPC Model">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 &lt;rpc&gt; Element">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 &lt;rpc&#8209;reply&gt; Element">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 &lt;rpc&#8209;error&gt; Element">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 &lt;ok&gt; Element">
<link href="#rfc.section.4.5" rel="Chapter" title="4.5 Pipelining">
<link href="#rfc.section.5" rel="Chapter" title="5 Configuration Model">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Configuration Datastores">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Data Modeling">
<link href="#rfc.section.6" rel="Chapter" title="6 Subtree Filtering">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Overview">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Subtree Filter Components">
<link href="#rfc.section.6.2.1" rel="Chapter" title="6.2.1 Namespace Selection">
<link href="#rfc.section.6.2.2" rel="Chapter" title="6.2.2 Attribute Match Expressions">
<link href="#rfc.section.6.2.3" rel="Chapter" title="6.2.3 Containment Nodes">
<link href="#rfc.section.6.2.4" rel="Chapter" title="6.2.4 Selection Nodes">
<link href="#rfc.section.6.2.5" rel="Chapter" title="6.2.5 Content Match Nodes">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 Subtree Filter Processing">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 Subtree Filtering Examples">
<link href="#rfc.section.6.4.1" rel="Chapter" title="6.4.1 No Filter">
<link href="#rfc.section.6.4.2" rel="Chapter" title="6.4.2 Empty Filter">
<link href="#rfc.section.6.4.3" rel="Chapter" title="6.4.3 Select the Entire &lt;users&gt; Subtree">
<link href="#rfc.section.6.4.4" rel="Chapter" title="6.4.4 Select All &lt;name&gt; Elements within the &lt;users&gt; Subtree">
<link href="#rfc.section.6.4.5" rel="Chapter" title="6.4.5 One Specific &lt;user&gt; Entry">
<link href="#rfc.section.6.4.6" rel="Chapter" title="6.4.6 Specific Elements from a Specific &lt;user&gt; Entry">
<link href="#rfc.section.6.4.7" rel="Chapter" title="6.4.7 Multiple Subtrees">
<link href="#rfc.section.6.4.8" rel="Chapter" title="6.4.8 Elements with Attribute Naming">
<link href="#rfc.section.7" rel="Chapter" title="7 Protocol Operations">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 &lt;get&#8209;config&gt;">
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 &lt;edit&#8209;config&gt;">
<link href="#rfc.section.7.3" rel="Chapter" title="7.3 &lt;copy&#8209;config&gt;">
<link href="#rfc.section.7.4" rel="Chapter" title="7.4 &lt;delete&#8209;config&gt;">
<link href="#rfc.section.7.5" rel="Chapter" title="7.5 &lt;lock&gt;">
<link href="#rfc.section.7.6" rel="Chapter" title="7.6 &lt;unlock&gt;">
<link href="#rfc.section.7.7" rel="Chapter" title="7.7 &lt;get&gt;">
<link href="#rfc.section.7.8" rel="Chapter" title="7.8 &lt;close-session&gt;">
<link href="#rfc.section.7.9" rel="Chapter" title="7.9 &lt;kill-session&gt;">
<link href="#rfc.section.8" rel="Chapter" title="8 Capabilities">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Capabilities Exchange">
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 Writable-Running Capability">
<link href="#rfc.section.8.2.1" rel="Chapter" title="8.2.1 Description">
<link href="#rfc.section.8.2.2" rel="Chapter" title="8.2.2 Dependencies">
<link href="#rfc.section.8.2.3" rel="Chapter" title="8.2.3 Capability Identifier">
<link href="#rfc.section.8.2.4" rel="Chapter" title="8.2.4 New Operations">
<link href="#rfc.section.8.2.5" rel="Chapter" title="8.2.5 Modifications to Existing Operations">
<link href="#rfc.section.8.2.5.1" rel="Chapter" title="8.2.5.1 &lt;edit&#8209;config&gt;">
<link href="#rfc.section.8.2.5.2" rel="Chapter" title="8.2.5.2 &lt;copy&#8209;config&gt;">
<link href="#rfc.section.8.3" rel="Chapter" title="8.3 Candidate Configuration Capability">
<link href="#rfc.section.8.3.1" rel="Chapter" title="8.3.1 Description">
<link href="#rfc.section.8.3.2" rel="Chapter" title="8.3.2 Dependencies">
<link href="#rfc.section.8.3.3" rel="Chapter" title="8.3.3 Capability Identifier">
<link href="#rfc.section.8.3.4" rel="Chapter" title="8.3.4 New Operations">
<link href="#rfc.section.8.3.4.1" rel="Chapter" title="8.3.4.1 &lt;commit&gt;">
<link href="#rfc.section.8.3.4.2" rel="Chapter" title="8.3.4.2 &lt;discard-changes&gt;">
<link href="#rfc.section.8.3.5" rel="Chapter" title="8.3.5 Modifications to Existing Operations">
<link href="#rfc.section.8.3.5.1" rel="Chapter" title="8.3.5.1 &lt;get&#8209;config&gt;, &lt;edit&#8209;config&gt;, &lt;copy&#8209;config&gt;, and &lt;validate&gt;">
<link href="#rfc.section.8.3.5.2" rel="Chapter" title="8.3.5.2 &lt;lock&gt; and &lt;unlock&gt;">
<link href="#rfc.section.8.4" rel="Chapter" title="8.4 Confirmed Commit Capability">
<link href="#rfc.section.8.4.1" rel="Chapter" title="8.4.1 Description">
<link href="#rfc.section.8.4.2" rel="Chapter" title="8.4.2 Dependencies">
<link href="#rfc.section.8.4.3" rel="Chapter" title="8.4.3 Capability Identifier">
<link href="#rfc.section.8.4.4" rel="Chapter" title="8.4.4 New Operations">
<link href="#rfc.section.8.4.4.1" rel="Chapter" title="8.4.4.1 &lt;cancel-commit&gt;">
<link href="#rfc.section.8.4.5" rel="Chapter" title="8.4.5 Modifications to Existing Operations">
<link href="#rfc.section.8.4.5.1" rel="Chapter" title="8.4.5.1 &lt;commit&gt;">
<link href="#rfc.section.8.5" rel="Chapter" title="8.5 Rollback on Error Capability">
<link href="#rfc.section.8.5.1" rel="Chapter" title="8.5.1 Description">
<link href="#rfc.section.8.5.2" rel="Chapter" title="8.5.2 Dependencies">
<link href="#rfc.section.8.5.3" rel="Chapter" title="8.5.3 Capability Identifier">
<link href="#rfc.section.8.5.4" rel="Chapter" title="8.5.4 New Operations">
<link href="#rfc.section.8.5.5" rel="Chapter" title="8.5.5 Modifications to Existing Operations">
<link href="#rfc.section.8.5.5.1" rel="Chapter" title="8.5.5.1 &lt;edit&#8209;config&gt;">
<link href="#rfc.section.8.6" rel="Chapter" title="8.6 Validate Capability">
<link href="#rfc.section.8.6.1" rel="Chapter" title="8.6.1 Description">
<link href="#rfc.section.8.6.2" rel="Chapter" title="8.6.2 Dependencies">
<link href="#rfc.section.8.6.3" rel="Chapter" title="8.6.3 Capability Identifier">
<link href="#rfc.section.8.6.4" rel="Chapter" title="8.6.4 New Operations">
<link href="#rfc.section.8.6.4.1" rel="Chapter" title="8.6.4.1 &lt;validate&gt;">
<link href="#rfc.section.8.6.5" rel="Chapter" title="8.6.5 Modifications to Existing Operations">
<link href="#rfc.section.8.6.5.1" rel="Chapter" title="8.6.5.1 &lt;edit&#8209;config&gt;">
<link href="#rfc.section.8.7" rel="Chapter" title="8.7 Distinct Startup Capability">
<link href="#rfc.section.8.7.1" rel="Chapter" title="8.7.1 Description">
<link href="#rfc.section.8.7.2" rel="Chapter" title="8.7.2 Dependencies">
<link href="#rfc.section.8.7.3" rel="Chapter" title="8.7.3 Capability Identifier">
<link href="#rfc.section.8.7.4" rel="Chapter" title="8.7.4 New Operations">
<link href="#rfc.section.8.7.5" rel="Chapter" title="8.7.5 Modifications to Existing Operations">
<link href="#rfc.section.8.7.5.1" rel="Chapter" title="8.7.5.1 General">
<link href="#rfc.section.8.8" rel="Chapter" title="8.8 URL Capability">
<link href="#rfc.section.8.8.1" rel="Chapter" title="8.8.1 Description">
<link href="#rfc.section.8.8.2" rel="Chapter" title="8.8.2 Dependencies">
<link href="#rfc.section.8.8.3" rel="Chapter" title="8.8.3 Capability Identifier">
<link href="#rfc.section.8.8.4" rel="Chapter" title="8.8.4 New Operations">
<link href="#rfc.section.8.8.5" rel="Chapter" title="8.8.5 Modifications to Existing Operations">
<link href="#rfc.section.8.8.5.1" rel="Chapter" title="8.8.5.1 &lt;edit&#8209;config&gt;">
<link href="#rfc.section.8.8.5.2" rel="Chapter" title="8.8.5.2 &lt;copy&#8209;config&gt;">
<link href="#rfc.section.8.8.5.3" rel="Chapter" title="8.8.5.3 &lt;delete&#8209;config&gt;">
<link href="#rfc.section.8.8.5.4" rel="Chapter" title="8.8.5.4 &lt;validate&gt;">
<link href="#rfc.section.8.9" rel="Chapter" title="8.9 XPath Capability">
<link href="#rfc.section.8.9.1" rel="Chapter" title="8.9.1 Description">
<link href="#rfc.section.8.9.2" rel="Chapter" title="8.9.2 Dependencies">
<link href="#rfc.section.8.9.3" rel="Chapter" title="8.9.3 Capability Identifier">
<link href="#rfc.section.8.9.4" rel="Chapter" title="8.9.4 New Operations">
<link href="#rfc.section.8.9.5" rel="Chapter" title="8.9.5 Modifications to Existing Operations">
<link href="#rfc.section.8.9.5.1" rel="Chapter" title="8.9.5.1 &lt;get&#8209;config&gt; and &lt;get&gt;">
<link href="#rfc.section.9" rel="Chapter" title="9 Security Considerations">
<link href="#rfc.section.10" rel="Chapter" title="10 IANA Considerations">
<link href="#rfc.section.10.1" rel="Chapter" title="10.1 NETCONF XML Namespace">
<link href="#rfc.section.10.2" rel="Chapter" title="10.2 NETCONF XML Schema">
<link href="#rfc.section.10.3" rel="Chapter" title="10.3 NETCONF YANG Module">
<link href="#rfc.section.10.4" rel="Chapter" title="10.4 NETCONF Capability URNs">
<link href="#rfc.section.11" rel="Chapter" title="11 Authors and Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="12 References">
<link href="#rfc.references.1" rel="Chapter" title="12.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="12.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A NETCONF Error List">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B XML Schema for NETCONF Messages Layer">
<link href="#rfc.appendix.Appendix%20C" rel="Chapter" title="Appendix C YANG Module for NETCONF Protocol Operations">
<link href="#rfc.appendix.Appendix%20D" rel="Chapter" title="Appendix D Capability Template">
<link href="#rfc.appendix.Appendix%20D.1" rel="Chapter" title="Appendix D.1 capability-name (template)">
<link href="#rfc.appendix.Appendix%20D.1.1" rel="Chapter" title="Appendix D.1.1 Overview">
<link href="#rfc.appendix.Appendix%20D.1.2" rel="Chapter" title="Appendix D.1.2 Dependencies">
<link href="#rfc.appendix.Appendix%20D.1.3" rel="Chapter" title="Appendix D.1.3 Capability Identifier">
<link href="#rfc.appendix.Appendix%20D.1.4" rel="Chapter" title="Appendix D.1.4 New Operations">
<link href="#rfc.appendix.Appendix%20D.1.4.1" rel="Chapter" title="Appendix D.1.4.1 &lt;op-name&gt;">
<link href="#rfc.appendix.Appendix%20D.1.5" rel="Chapter" title="Appendix D.1.5 Modifications to Existing Operations">
<link href="#rfc.appendix.Appendix%20D.1.5.1" rel="Chapter" title="Appendix D.1.5.1 &lt;op-name&gt;">
<link href="#rfc.appendix.Appendix%20D.1.6" rel="Chapter" title="Appendix D.1.6 Interactions with Other Capabilities">
<link href="#rfc.appendix.Appendix%20E" rel="Chapter" title="Appendix E Configuring Multiple Devices with NETCONF">
<link href="#rfc.appendix.Appendix%20E.1" rel="Chapter" title="Appendix E.1 Operations on Individual Devices">
<link href="#rfc.appendix.Appendix%20E.1.1" rel="Chapter" title="Appendix E.1.1 Acquiring the Configuration Lock">
<link href="#rfc.appendix.Appendix%20E.1.2" rel="Chapter" title="Appendix E.1.2 Checkpointing the Running Configuration">
<link href="#rfc.appendix.Appendix%20E.1.3" rel="Chapter" title="Appendix E.1.3 Loading and Validating the Incoming Configuration.">
<link href="#rfc.appendix.Appendix%20E.1.4" rel="Chapter" title="Appendix E.1.4 Changing the Running Configuration">
<link href="#rfc.appendix.Appendix%20E.1.5" rel="Chapter" title="Appendix E.1.5 Testing the New Configuration">
<link href="#rfc.appendix.Appendix%20E.1.6" rel="Chapter" title="Appendix E.1.6 Making the Change Permanent">
<link href="#rfc.appendix.Appendix%20E.1.7" rel="Chapter" title="Appendix E.1.7 Releasing the Configuration Lock">
<link href="#rfc.appendix.Appendix%20E.2" rel="Chapter" title="Appendix E.2 Operations on Multiple Devices">
<link href="#rfc.appendix.Appendix%20F" rel="Chapter" title="Appendix F Changes from RFC 4741">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The Network Configuration Protocol (NETCONF) defined in this document provides mechanisms to install, manipulate, and delete the configuration of network devices. It uses an Extensible Markup Language (XML)-based data encoding for the configuration data as well as the protocol messages. The NETCONF protocol operations are realized as Remote Procedure Calls (RPC).  " />
  <meta name="description" content="The Network Configuration Protocol (NETCONF) defined in this document provides mechanisms to install, manipulate, and delete the configuration of network devices. It uses an Extensible Markup Language (XML)-based data encoding for the configuration data as well as the protocol messages. The NETCONF protocol operations are realized as Remote Procedure Calls (RPC).  " />
  <meta name="keywords" content="XML, Configuration, Network Management, Extensible Markup Language" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">R. Enns, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Juniper Networks</td>
</tr>
<tr>
<td class="left">Obsoletes: 4741 (if approved)</td>
<td class="right">M. Bjorklund, Ed.</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">Tail-f Systems</td>
</tr>
<tr>
<td class="left">Expires: August 16, 2011</td>
<td class="right">J. Schoenwaelder, Ed.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Jacobs University</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">A. Bierman, Ed.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Brocade</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">February 12, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Network Configuration Protocol (NETCONF)<br />
  <span class="filename">draft-ietf-netconf-4741bis-09</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The Network Configuration Protocol (NETCONF) defined in this document provides mechanisms to install, manipulate, and delete the configuration of network devices. It uses an Extensible Markup Language (XML)-based data encoding for the configuration data as well as the protocol messages. The NETCONF protocol operations are realized as Remote Procedure Calls (RPC).  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on August 16, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>
<p>This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008.  The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process. Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Terminology</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Protocol Overview</a>
</li>
<li>1.3.   <a href="#rfc.section.1.3">Capabilities</a>
</li>
<li>1.4.   <a href="#rfc.section.1.4">Separation of Configuration and State Data</a>
</li>
<li>2.   <a href="#rfc.section.2">Transport Protocol Requirements</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Connection-Oriented Operation</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Authentication, Integrity, and Confidentiality</a>
</li>
<li>2.3.   <a href="#rfc.section.2.3">Mandatory Transport Protocol</a>
</li>
<li>3.   <a href="#rfc.section.3">XML Considerations</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Namespace</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Document Type Declarations</a>
</li>
<li>4.   <a href="#rfc.section.4">RPC Model</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">&lt;rpc&gt; Element</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">&lt;rpc&#8209;reply&gt; Element</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">&lt;rpc&#8209;error&gt; Element</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">&lt;ok&gt; Element</a>
</li>
<li>4.5.   <a href="#rfc.section.4.5">Pipelining</a>
</li>
<li>5.   <a href="#rfc.section.5">Configuration Model</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Configuration Datastores</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Data Modeling</a>
</li>
<li>6.   <a href="#rfc.section.6">Subtree Filtering</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Overview</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Subtree Filter Components</a>
</li>
<li>6.2.1.   <a href="#rfc.section.6.2.1">Namespace Selection</a>
</li>
<li>6.2.2.   <a href="#rfc.section.6.2.2">Attribute Match Expressions</a>
</li>
<li>6.2.3.   <a href="#rfc.section.6.2.3">Containment Nodes</a>
</li>
<li>6.2.4.   <a href="#rfc.section.6.2.4">Selection Nodes</a>
</li>
<li>6.2.5.   <a href="#rfc.section.6.2.5">Content Match Nodes</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">Subtree Filter Processing</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">Subtree Filtering Examples</a>
</li>
<li>6.4.1.   <a href="#rfc.section.6.4.1">No Filter</a>
</li>
<li>6.4.2.   <a href="#rfc.section.6.4.2">Empty Filter</a>
</li>
<li>6.4.3.   <a href="#rfc.section.6.4.3">Select the Entire &lt;users&gt; Subtree</a>
</li>
<li>6.4.4.   <a href="#rfc.section.6.4.4">Select All &lt;name&gt; Elements within the &lt;users&gt; Subtree</a>
</li>
<li>6.4.5.   <a href="#rfc.section.6.4.5">One Specific &lt;user&gt; Entry</a>
</li>
<li>6.4.6.   <a href="#rfc.section.6.4.6">Specific Elements from a Specific &lt;user&gt; Entry</a>
</li>
<li>6.4.7.   <a href="#rfc.section.6.4.7">Multiple Subtrees</a>
</li>
<li>6.4.8.   <a href="#rfc.section.6.4.8">Elements with Attribute Naming</a>
</li>
<li>7.   <a href="#rfc.section.7">Protocol Operations</a>
</li>
<li>7.1.   <a href="#rfc.section.7.1">&lt;get&#8209;config&gt;</a>
</li>
<li>7.2.   <a href="#rfc.section.7.2">&lt;edit&#8209;config&gt;</a>
</li>
<li>7.3.   <a href="#rfc.section.7.3">&lt;copy&#8209;config&gt;</a>
</li>
<li>7.4.   <a href="#rfc.section.7.4">&lt;delete&#8209;config&gt;</a>
</li>
<li>7.5.   <a href="#rfc.section.7.5">&lt;lock&gt;</a>
</li>
<li>7.6.   <a href="#rfc.section.7.6">&lt;unlock&gt;</a>
</li>
<li>7.7.   <a href="#rfc.section.7.7">&lt;get&gt;</a>
</li>
<li>7.8.   <a href="#rfc.section.7.8">&lt;close-session&gt;</a>
</li>
<li>7.9.   <a href="#rfc.section.7.9">&lt;kill-session&gt;</a>
</li>
<li>8.   <a href="#rfc.section.8">Capabilities</a>
</li>
<li>8.1.   <a href="#rfc.section.8.1">Capabilities Exchange</a>
</li>
<li>8.2.   <a href="#rfc.section.8.2">Writable-Running Capability</a>
</li>
<li>8.2.1.   <a href="#rfc.section.8.2.1">Description</a>
</li>
<li>8.2.2.   <a href="#rfc.section.8.2.2">Dependencies</a>
</li>
<li>8.2.3.   <a href="#rfc.section.8.2.3">Capability Identifier</a>
</li>
<li>8.2.4.   <a href="#rfc.section.8.2.4">New Operations</a>
</li>
<li>8.2.5.   <a href="#rfc.section.8.2.5">Modifications to Existing Operations</a>
</li>
<li>8.2.5.1.   <a href="#rfc.section.8.2.5.1">&lt;edit&#8209;config&gt;</a>
</li>
<li>8.2.5.2.   <a href="#rfc.section.8.2.5.2">&lt;copy&#8209;config&gt;</a>
</li>
<li>8.3.   <a href="#rfc.section.8.3">Candidate Configuration Capability</a>
</li>
<li>8.3.1.   <a href="#rfc.section.8.3.1">Description</a>
</li>
<li>8.3.2.   <a href="#rfc.section.8.3.2">Dependencies</a>
</li>
<li>8.3.3.   <a href="#rfc.section.8.3.3">Capability Identifier</a>
</li>
<li>8.3.4.   <a href="#rfc.section.8.3.4">New Operations</a>
</li>
<li>8.3.4.1.   <a href="#rfc.section.8.3.4.1">&lt;commit&gt;</a>
</li>
<li>8.3.4.2.   <a href="#rfc.section.8.3.4.2">&lt;discard-changes&gt;</a>
</li>
<li>8.3.5.   <a href="#rfc.section.8.3.5">Modifications to Existing Operations</a>
</li>
<li>8.3.5.1.   <a href="#rfc.section.8.3.5.1">&lt;get&#8209;config&gt;, &lt;edit&#8209;config&gt;, &lt;copy&#8209;config&gt;, and &lt;validate&gt;</a>
</li>
<li>8.3.5.2.   <a href="#rfc.section.8.3.5.2">&lt;lock&gt; and &lt;unlock&gt;</a>
</li>
<li>8.4.   <a href="#rfc.section.8.4">Confirmed Commit Capability</a>
</li>
<li>8.4.1.   <a href="#rfc.section.8.4.1">Description</a>
</li>
<li>8.4.2.   <a href="#rfc.section.8.4.2">Dependencies</a>
</li>
<li>8.4.3.   <a href="#rfc.section.8.4.3">Capability Identifier</a>
</li>
<li>8.4.4.   <a href="#rfc.section.8.4.4">New Operations</a>
</li>
<li>8.4.4.1.   <a href="#rfc.section.8.4.4.1">&lt;cancel-commit&gt;</a>
</li>
<li>8.4.5.   <a href="#rfc.section.8.4.5">Modifications to Existing Operations</a>
</li>
<li>8.4.5.1.   <a href="#rfc.section.8.4.5.1">&lt;commit&gt;</a>
</li>
<li>8.5.   <a href="#rfc.section.8.5">Rollback on Error Capability</a>
</li>
<li>8.5.1.   <a href="#rfc.section.8.5.1">Description</a>
</li>
<li>8.5.2.   <a href="#rfc.section.8.5.2">Dependencies</a>
</li>
<li>8.5.3.   <a href="#rfc.section.8.5.3">Capability Identifier</a>
</li>
<li>8.5.4.   <a href="#rfc.section.8.5.4">New Operations</a>
</li>
<li>8.5.5.   <a href="#rfc.section.8.5.5">Modifications to Existing Operations</a>
</li>
<li>8.5.5.1.   <a href="#rfc.section.8.5.5.1">&lt;edit&#8209;config&gt;</a>
</li>
<li>8.6.   <a href="#rfc.section.8.6">Validate Capability</a>
</li>
<li>8.6.1.   <a href="#rfc.section.8.6.1">Description</a>
</li>
<li>8.6.2.   <a href="#rfc.section.8.6.2">Dependencies</a>
</li>
<li>8.6.3.   <a href="#rfc.section.8.6.3">Capability Identifier</a>
</li>
<li>8.6.4.   <a href="#rfc.section.8.6.4">New Operations</a>
</li>
<li>8.6.4.1.   <a href="#rfc.section.8.6.4.1">&lt;validate&gt;</a>
</li>
<li>8.6.5.   <a href="#rfc.section.8.6.5">Modifications to Existing Operations</a>
</li>
<li>8.6.5.1.   <a href="#rfc.section.8.6.5.1">&lt;edit&#8209;config&gt;</a>
</li>
<li>8.7.   <a href="#rfc.section.8.7">Distinct Startup Capability</a>
</li>
<li>8.7.1.   <a href="#rfc.section.8.7.1">Description</a>
</li>
<li>8.7.2.   <a href="#rfc.section.8.7.2">Dependencies</a>
</li>
<li>8.7.3.   <a href="#rfc.section.8.7.3">Capability Identifier</a>
</li>
<li>8.7.4.   <a href="#rfc.section.8.7.4">New Operations</a>
</li>
<li>8.7.5.   <a href="#rfc.section.8.7.5">Modifications to Existing Operations</a>
</li>
<li>8.7.5.1.   <a href="#rfc.section.8.7.5.1">General</a>
</li>
<li>8.8.   <a href="#rfc.section.8.8">URL Capability</a>
</li>
<li>8.8.1.   <a href="#rfc.section.8.8.1">Description</a>
</li>
<li>8.8.2.   <a href="#rfc.section.8.8.2">Dependencies</a>
</li>
<li>8.8.3.   <a href="#rfc.section.8.8.3">Capability Identifier</a>
</li>
<li>8.8.4.   <a href="#rfc.section.8.8.4">New Operations</a>
</li>
<li>8.8.5.   <a href="#rfc.section.8.8.5">Modifications to Existing Operations</a>
</li>
<li>8.8.5.1.   <a href="#rfc.section.8.8.5.1">&lt;edit&#8209;config&gt;</a>
</li>
<li>8.8.5.2.   <a href="#rfc.section.8.8.5.2">&lt;copy&#8209;config&gt;</a>
</li>
<li>8.8.5.3.   <a href="#rfc.section.8.8.5.3">&lt;delete&#8209;config&gt;</a>
</li>
<li>8.8.5.4.   <a href="#rfc.section.8.8.5.4">&lt;validate&gt;</a>
</li>
<li>8.9.   <a href="#rfc.section.8.9">XPath Capability</a>
</li>
<li>8.9.1.   <a href="#rfc.section.8.9.1">Description</a>
</li>
<li>8.9.2.   <a href="#rfc.section.8.9.2">Dependencies</a>
</li>
<li>8.9.3.   <a href="#rfc.section.8.9.3">Capability Identifier</a>
</li>
<li>8.9.4.   <a href="#rfc.section.8.9.4">New Operations</a>
</li>
<li>8.9.5.   <a href="#rfc.section.8.9.5">Modifications to Existing Operations</a>
</li>
<li>8.9.5.1.   <a href="#rfc.section.8.9.5.1">&lt;get&#8209;config&gt; and &lt;get&gt;</a>
</li>
<li>9.   <a href="#rfc.section.9">Security Considerations</a>
</li>
<li>10.   <a href="#rfc.section.10">IANA Considerations</a>
</li>
<li>10.1.   <a href="#rfc.section.10.1">NETCONF XML Namespace</a>
</li>
<li>10.2.   <a href="#rfc.section.10.2">NETCONF XML Schema</a>
</li>
<li>10.3.   <a href="#rfc.section.10.3">NETCONF YANG Module</a>
</li>
<li>10.4.   <a href="#rfc.section.10.4">NETCONF Capability URNs</a>
</li>
<li>11.   <a href="#rfc.section.11">Authors and Acknowledgements</a>
</li>
<li>12.   <a href="#rfc.references">References</a>
</li>
<li>12.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>12.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">NETCONF Error List</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">XML Schema for NETCONF Messages Layer</a>
</li>
<li>Appendix C.   <a href="#rfc.appendix.Appendix%20C">YANG Module for NETCONF Protocol Operations</a>
</li>
<li>Appendix D.   <a href="#rfc.appendix.Appendix%20D">Capability Template</a>
</li>
<li>Appendix D.1.   <a href="#rfc.appendix.Appendix%20D.1">capability-name (template)</a>
</li>
<li>Appendix D.1.1.   <a href="#rfc.appendix.Appendix%20D.1.1">Overview</a>
</li>
<li>Appendix D.1.2.   <a href="#rfc.appendix.Appendix%20D.1.2">Dependencies</a>
</li>
<li>Appendix D.1.3.   <a href="#rfc.appendix.Appendix%20D.1.3">Capability Identifier</a>
</li>
<li>Appendix D.1.4.   <a href="#rfc.appendix.Appendix%20D.1.4">New Operations</a>
</li>
<li>Appendix D.1.4.1.   <a href="#rfc.appendix.Appendix%20D.1.4.1">&lt;op-name&gt;</a>
</li>
<li>Appendix D.1.5.   <a href="#rfc.appendix.Appendix%20D.1.5">Modifications to Existing Operations</a>
</li>
<li>Appendix D.1.5.1.   <a href="#rfc.appendix.Appendix%20D.1.5.1">&lt;op-name&gt;</a>
</li>
<li>Appendix D.1.6.   <a href="#rfc.appendix.Appendix%20D.1.6">Interactions with Other Capabilities</a>
</li>
<li>Appendix E.   <a href="#rfc.appendix.Appendix%20E">Configuring Multiple Devices with NETCONF</a>
</li>
<li>Appendix E.1.   <a href="#rfc.appendix.Appendix%20E.1">Operations on Individual Devices</a>
</li>
<li>Appendix E.1.1.   <a href="#rfc.appendix.Appendix%20E.1.1">Acquiring the Configuration Lock</a>
</li>
<li>Appendix E.1.2.   <a href="#rfc.appendix.Appendix%20E.1.2">Checkpointing the Running Configuration</a>
</li>
<li>Appendix E.1.3.   <a href="#rfc.appendix.Appendix%20E.1.3">Loading and Validating the Incoming Configuration.</a>
</li>
<li>Appendix E.1.4.   <a href="#rfc.appendix.Appendix%20E.1.4">Changing the Running Configuration</a>
</li>
<li>Appendix E.1.5.   <a href="#rfc.appendix.Appendix%20E.1.5">Testing the New Configuration</a>
</li>
<li>Appendix E.1.6.   <a href="#rfc.appendix.Appendix%20E.1.6">Making the Change Permanent</a>
</li>
<li>Appendix E.1.7.   <a href="#rfc.appendix.Appendix%20E.1.7">Releasing the Configuration Lock</a>
</li>
<li>Appendix E.2.   <a href="#rfc.appendix.Appendix%20E.2">Operations on Multiple Devices</a>
</li>
<li>Appendix F.   <a href="#rfc.appendix.Appendix%20F">Changes from RFC 4741</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">The NETCONF protocol defines a simple mechanism through which a network device can be managed, configuration data information can be retrieved, and new configuration data can be uploaded and manipulated. The protocol allows the device to expose a full, formal application programming interface (API). Applications can use this straightforward API to send and receive full and partial configuration data sets.  </p>
<p id="rfc.section.1.p.2">The NETCONF protocol uses a remote procedure call (RPC) paradigm.  A client encodes an RPC in XML <a href="#W3C.REC-xml-20001006">[W3C.REC-xml-20001006]</a> and sends it to a server using a secure, connection-oriented session. The server responds with a reply encoded in XML. The contents of both the request and the response are fully described in XML DTDs or XML schemas, or both, allowing both parties to recognize the syntax constraints imposed on the exchange.  </p>
<p id="rfc.section.1.p.3">A key aspect of NETCONF is that it allows the functionality of the management protocol to closely mirror the native functionality of the device.  This reduces implementation costs and allows timely access to new features.  In addition, applications can access both the syntactic and semantic content of the device's native user interface.  </p>
<p id="rfc.section.1.p.4">NETCONF allows a client to discover the set of protocol extensions supported by a server. These "capabilities" permit the client to adjust its behavior to take advantage of the features exposed by the device. The capability definitions can be easily extended in a noncentralized manner. Standard and non-standard capabilities can be defined with semantic and syntactic rigor.  Capabilities are discussed in <a href="#capabilities">Section 8</a>.  </p>
<p id="rfc.section.1.p.5">The NETCONF protocol is a building block in a system of automated configuration. XML is the lingua franca of interchange, providing a flexible but fully specified encoding mechanism for hierarchical content. NETCONF can be used in concert with XML-based transformation technologies, such as XSLT <a href="#W3C.REC-xslt-19991116">[W3C.REC-xslt-19991116]</a>, to provide a system for automated generation of full and partial configurations.  The system can query one or more databases for data about networking topologies, links, policies, customers, and services.  This data can be transformed using one or more XSLT scripts from a task-oriented, vendor-independent data schema into a form that is specific to the vendor, product, operating system, and software release. The resulting data can be passed to the device using the NETCONF protocol.  </p>
<p id="rfc.section.1.p.6">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.  </p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Terminology</h1>
<p></p>

<ul>
<li>candidate configuration datastore: A configuration datastore that can be manipulated without impacting the device's current configuration and that can be committed to the running configuration datastore. Not all devices support a candidate configuration datastore.  </li>
<li>capability: A functionality that supplements the base NETCONF specification.  </li>
<li>client: A client invokes protocol operations on a server. In addition, a client can subscribe to receive notifications from a server.  </li>
<li>configuration data: Configuration data is the set of writable data that is required to transform a system from its initial default state into its current state.  </li>
<li>datastore: A conceptual place to store and access information. A datastore might be implemented, for example, using files, a database, flash memory locations or combinations thereof.  </li>
<li>configuration datastore: A configuration datastore is defined as the datastore holding the complete set of configuration data that is required to get a device from its initial default state into a desired operational state.  </li>
<li>message: A protocol element sent over a session.  Messages are well-formed XML documents.  </li>
<li>notification: A server initiated message indicating that a certain event has been recognized by the server.  </li>
<li>protocol operation: A specific remote procedure call, as used within the NETCONF protocol.  </li>
<li>remote procedure call: A remote procedure call (RPC), realized by exchanging &lt;rpc&gt; and &lt;rpc-reply&gt; messages.  </li>
<li>running configuration datastore: A configuration datastore holding the complete configuration currently active on the device. The running configuration datastore always exists.  </li>
<li>server: A server executes protocol operations invoked by a client. In addition, a server can send notifications to a client.  </li>
<li>session: Client and server exchange messages using a secure, connection-oriented session.  </li>
<li>startup configuration datastore: The configuration datastore holding the configuration loaded by the device when it boots. Only present on devices that separate the startup configuration datastore from the running configuration datastore.  </li>
<li>state data: State data is the additional data on a system that is not configuration data such as read-only status information and collected statistics.  </li>
<li>user: The authenticated identity of the client. The authenticated identity of a client is commonly referred to as the NETCONF username.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> Protocol Overview</h1>
<p id="rfc.section.1.2.p.1">NETCONF uses a simple RPC-based mechanism to facilitate communication between a client and a server.  The client can be a script or application typically running as part of a network manager.  The server is typically a network device. The terms "device" and "server" are used interchangeably in this document, as are "client" and "application".  </p>
<p id="rfc.section.1.2.p.2">A NETCONF session is the logical connection between a network administrator or network configuration application and a network device.  A device MUST support at least one NETCONF session and SHOULD support multiple sessions.  Global configuration attributes can be changed during any authorized session, and the effects are visible in all sessions.  Session-specific attributes affect only the session in which they are changed.  </p>
<p id="rfc.section.1.2.p.3">NETCONF can be conceptually partitioned into four layers as shown in <a href="#layers">Figure 1</a>.  </p>
<div id="#rfc.figure.1"></div>
<div id="#layers"></div>
<pre>
         Layer                 Example
    +-------------+      +-----------------+      +----------------+
(4) |   Content   |      |  Configuration  |      |  Notification  |
    |             |      |      data       |      |      data      |
    +-------------+      +-----------------+      +----------------+
           |                       |                      |
    +-------------+      +-----------------+              |
(3) | Operations  |      |  &lt;edit-config&gt;  |              |
    |             |      |                 |              | 
    +-------------+      +-----------------+              |
           |                       |                      |
    +-------------+      +-----------------+      +----------------+
(2) |  Messages   |      |     &lt;rpc&gt;,      |      | &lt;notification&gt; |
    |             |      |   &lt;rpc-reply&gt;   |      |                |
    +-------------+      +-----------------+      +----------------+
           |                       |                      |
    +-------------+      +-----------------------------------------+
(1) |   Secure    |      |  SSH, TLS, BEEP/TLS, SOAP/HTTP/TLS, ... |
    | Transports  |      |                                         |
    +-------------+      +-----------------------------------------+
          </pre>
<p></p>

<ol>
<li>The Secure Transport layer provides a communication path between the client and server.  NETCONF can be layered over any transport protocol that provides a set of basic requirements.  <a href="#transportRequirements">Section 2</a> discusses these requirements.  </li>
<li>The Messages layer provides a simple, transport-independent framing mechanism for encoding RPCs and notifications. <a href="#rpcModel">Section 4</a> documents the RPC messages, and <a href="#RFC5717">[RFC5717]</a> documents notifications.  </li>
<li>The Operations layer defines a set of base protocol operations invoked as RPC methods with XML-encoded parameters. <a href="#protocolOperations">Section 7</a> details the list of base protocol operations.  </li>
<li>The Content layer is outside the scope of this document. It is expected that separate efforts to standardize NETCONF data models will be undertaken.  </li>
</ol>

<p> </p>
<p id="rfc.section.1.2.p.5">The YANG data modeling language <a href="#RFC6020">[RFC6020]</a> has been developed for specifying NETCONF data models and protocol operations, covering the Operations and the Content layers of <a href="#layers">Figure 1</a>.  </p>
<h1 id="rfc.section.1.3">
<a href="#rfc.section.1.3">1.3.</a> Capabilities</h1>
<p id="rfc.section.1.3.p.1">A NETCONF capability is a set of functionality that supplements the base NETCONF specification. The capability is identified by a uniform resource identifier (URI).  </p>
<p id="rfc.section.1.3.p.2">Capabilities augment the base operations of the device, describing both additional operations and the content allowed inside operations.  The client can discover the server's capabilities and use any additional operations, parameters, and content defined by those capabilities.  </p>
<p id="rfc.section.1.3.p.3">The capability definition might name one or more dependent capabilities.  To support a capability, the server MUST support any capabilities upon which it depends.  </p>
<p><a href="#capabilities">Section 8</a> defines the capabilities exchange that allows the client to discover the server's capabilities.  <a href="#capabilities">Section 8</a> also lists the set of capabilities defined in this document.  </p>
<p id="rfc.section.1.3.p.5">Additional capabilities can be defined at any time in external documents, allowing the set of capabilities to expand over time. Standards bodies can define standardized capabilities, and implementations can define proprietary ones. A capability URI MUST sufficiently distinguish the naming authority to avoid naming collisions.  </p>
<h1 id="rfc.section.1.4">
<a href="#rfc.section.1.4">1.4.</a> <a href="#state" id="state">Separation of Configuration and State Data</a>
</h1>
<p id="rfc.section.1.4.p.1">The information that can be retrieved from a running system is separated into two classes, configuration data and state data. Configuration data is the set of writable data that is required to transform a system from its initial default state into its current state. State data is the additional data on a system that is not configuration data such as read-only status information and collected statistics. When a device is performing configuration operations, a number of problems would arise if state data were included: </p>

<ul>
<li>Comparisons of configuration data sets would be dominated by irrelevant entries such as different statistics.</li>
<li>Incoming data could contain nonsensical requests, such as attempts to write read-only data.</li>
<li>The data sets would be large.</li>
<li>Archived data could contain values for read-only data items, complicating the processing required to restore archived data.  </li>
</ul>

<p> </p>
<p id="rfc.section.1.4.p.2">To account for these issues, the NETCONF protocol recognizes the difference between configuration data and state data and provides operations for each. The &lt;get&#8209;config&gt; operation retrieves configuration data only, while the &lt;get&gt; operation retrieves configuration and state data.  </p>
<p id="rfc.section.1.4.p.3">Note that the NETCONF protocol is focused on the information required to get the device into its desired running state.  The inclusion of other important, persistent data is implementation specific.  For example, user files and databases are not treated as configuration data by the NETCONF protocol.  </p>
<p id="rfc.section.1.4.p.4">For example, if a local database of user authentication data is stored on the device, it is an implementation-dependent matter whether it is included in configuration data.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#transportRequirements" id="transportRequirements">Transport Protocol Requirements</a>
</h1>
<p id="rfc.section.2.p.1">NETCONF uses an RPC-based communication paradigm. A client sends a series of one or more RPC request messages, which cause the server to respond with a corresponding series of RPC reply messages.  </p>
<p id="rfc.section.2.p.2">The NETCONF protocol can be layered on any transport protocol that provides the required set of functionality. It is not bound to any particular transport protocol, but allows a mapping to define how it can be implemented over any specific protocol.  </p>
<p id="rfc.section.2.p.3">The transport protocol MUST provide a mechanism to indicate the session type (client or server) to the NETCONF protocol layer.  </p>
<p id="rfc.section.2.p.4">This section details the characteristics that NETCONF requires from the underlying transport protocol.  </p>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> Connection-Oriented Operation</h1>
<p id="rfc.section.2.1.p.1">NETCONF is connection-oriented, requiring a persistent connection between peers. This connection MUST provide reliable, sequenced data delivery.  NETCONF connections are long-lived, persisting between protocol operations.  </p>
<p id="rfc.section.2.1.p.2">In addition, resources requested from the server for a particular connection MUST be automatically released when the connection closes, making failure recovery simpler and more robust. For example, when a lock is acquired by a client, the lock persists until either it is explicitly released or the server determines that the connection has been terminated. If a connection is terminated while the client holds a lock, the server can perform any appropriate recovery.  The lock operation is further discussed in <a href="#lock">Section 7.5</a>.  </p>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> Authentication, Integrity, and Confidentiality</h1>
<p id="rfc.section.2.2.p.1">NETCONF connections MUST provide authentication, data integrity, confidentiality, and replay protection. NETCONF depends on the transport protocol for this capability. A NETCONF peer assumes that appropriate levels of security and confidentiality are provided independently of this document. For example, connections could be encrypted in TLS <a href="#RFC5246">[RFC5246]</a> or SSH <a href="#RFC4251">[RFC4251]</a>, depending on the underlying protocol.  </p>
<p id="rfc.section.2.2.p.2">NETCONF connections MUST be authenticated. The transport protocol is responsible for authentication of the server to the client and authentication of the client to the server. A NETCONF peer assumes that the connection's authentication information has been validated by the underlying transport protocol using sufficiently trustworthy mechanisms and that the peer's identity has been sufficiently proven.  </p>
<p id="rfc.section.2.2.p.3">One goal of NETCONF is to provide a programmatic interface to the device that closely follows the functionality of the device's native interface. Therefore, it is expected that the underlying protocol uses existing authentication mechanisms available on the device. For example, a NETCONF server on a device that supports RADIUS <a href="#RFC2865">[RFC2865]</a> might allow the use of RADIUS to authenticate NETCONF sessions.  </p>
<p id="rfc.section.2.2.p.4">The authentication process MUST result in an authenticated client identity whose permissions are known to the server.  The authenticated identity of a client is commonly referred to as the NETCONF username. The algorithm used to derive the username is transport protocol specific and in addition specific to the authentication mechanism used by the transport protocol. NETCONF transport protocols therefore MUST explain how a NETCONF username is derived from the authentication mechanisms supported by the transport protocol.  </p>
<p id="rfc.section.2.2.p.5">The access permissions of a given client, identified by its NETCONF username, are part of the configuration of the NETCONF server. These permissions MUST be enforced during the remainder of the NETCONF session. The details how access control is configured is outside the scope of this document.  </p>
<h1 id="rfc.section.2.3">
<a href="#rfc.section.2.3">2.3.</a> Mandatory Transport Protocol</h1>
<p id="rfc.section.2.3.p.1">A NETCONF implementation MUST support the SSH transport protocol mapping <a href="#I-D.ietf-netconf-rfc4742bis">[I-D.ietf-netconf-rfc4742bis]</a>.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#xmlConsiderations" id="xmlConsiderations">XML Considerations</a>
</h1>
<p id="rfc.section.3.p.1">XML serves as the encoding format for NETCONF, allowing complex hierarchical data to be expressed in a text format that can be read, saved, and manipulated with both traditional text tools and tools specific to XML.  </p>
<p id="rfc.section.3.p.2">All NETCONF messages MUST be well-formed XML, encoded in UTF-8.  If a peer receives an &lt;rpc&gt; message that is not well-formed XML or not encoded in UTF-8, it SHOULD reply with a "malformed-message" error.  If a reply cannot be sent for any reason, the server MUST close the session.  </p>
<p id="rfc.section.3.p.3">A NETCONF message MAY begin with an XML declaration (see section 2.8 of <a href="#W3C.REC-xml-20001006">[W3C.REC-xml-20001006]</a>).  </p>
<p id="rfc.section.3.p.4">This section discusses a small number of XML-related considerations pertaining to NETCONF.  </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#namespace" id="namespace">Namespace</a>
</h1>
<p id="rfc.section.3.1.p.1">All NETCONF protocol elements are defined in the following namespace: </p>

<ul class="empty"><li>urn:ietf:params:xml:ns:netconf:base:1.0</li></ul>

<p> </p>
<p id="rfc.section.3.1.p.2">NETCONF capability names MUST be URIs <a href="#RFC3986">[RFC3986]</a>.  NETCONF capabilities are discussed in <a href="#capabilities">Section 8</a>.  </p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#nodtd" id="nodtd">Document Type Declarations</a>
</h1>
<p id="rfc.section.3.2.p.1">Document type declarations MUST NOT appear in NETCONF content.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#rpcModel" id="rpcModel">RPC Model</a>
</h1>
<p id="rfc.section.4.p.1">The NETCONF protocol uses an RPC-based communication model. NETCONF peers use &lt;rpc&gt; and &lt;rpc&#8209;reply&gt; elements to provide transport protocol-independent framing of NETCONF requests and responses.  </p>
<p id="rfc.section.4.p.2">The syntax and XML encoding of the Messages layer RPCs are formally defined in the XML schema in <a href="#xsdschema">Appendix Appendix B</a>.  </p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> &lt;rpc&gt; Element</h1>
<p id="rfc.section.4.1.p.1">The &lt;rpc&gt; element is used to enclose a NETCONF request sent from the client to the server.  </p>
<p id="rfc.section.4.1.p.2">The &lt;rpc&gt; element has a mandatory attribute "message-id", which is a string chosen by the sender of the RPC that will commonly encode a monotonically increasing integer. The receiver of the RPC does not decode or interpret this string but simply saves it to be used as a "message-id" attribute in any resulting &lt;rpc&#8209;reply&gt; message. The sender MUST ensure that the "message-id" value is normalized according to the XML attribute value normalization rules defined in <a href="#W3C.REC-xml-20001006">[W3C.REC-xml-20001006]</a> if the sender wants the string to be returned unmodified. For example: </p>
<div id="#rfc.figure.2"></div>
<pre>
    &lt;rpc message-id="101"
         xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
      &lt;some-method&gt;
        &lt;!-- method parameters here... --&gt;
      &lt;/some-method&gt;
    &lt;/rpc&gt;
            </pre>
<p id="rfc.section.4.1.p.3">If additional attributes are present in an &lt;rpc&gt; element, a NETCONF peer MUST return them unmodified in the &lt;rpc&#8209;reply&gt; element.  This includes any "xmlns" attributes.  </p>
<p id="rfc.section.4.1.p.4">The name and parameters of an RPC are encoded as the contents of the &lt;rpc&gt; element. The name of the RPC is an element directly inside the &lt;rpc&gt; element, and any parameters are encoded inside this element.  </p>
<p id="rfc.section.4.1.p.5">The following example invokes a method called &lt;my&#8209;own&#8209;method&gt;, which has two parameters, &lt;my&#8209;first&#8209;parameter&gt;, with a value of "14", and &lt;another&#8209;parameter&gt;, with a value of "fred": </p>
<div id="#rfc.figure.3"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;my-own-method xmlns="http://example.net/me/my-own/1.0"&gt;
      &lt;my-first-parameter&gt;14&lt;/my-first-parameter&gt;
      &lt;another-parameter&gt;fred&lt;/another-parameter&gt;
    &lt;/my-own-method&gt;
  &lt;/rpc&gt;
            </pre>
<p id="rfc.section.4.1.p.6">The following example invokes a &lt;rock&#8209;the&#8209;house&gt; method with a &lt;zip&#8209;code&gt; parameter of "27606&#8209;0100": </p>
<div id="#rfc.figure.4"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;rock-the-house xmlns="http://example.net/rock/1.0"&gt;
      &lt;zip-code&gt;27606-0100&lt;/zip-code&gt;
    &lt;/rock-the-house&gt;
  &lt;/rpc&gt;
            </pre>
<p id="rfc.section.4.1.p.7">The following example invokes the NETCONF &lt;get&gt; method with no parameters: </p>
<div id="#rfc.figure.5"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get/&gt;
  &lt;/rpc&gt;

            </pre>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> &lt;rpc&#8209;reply&gt; Element</h1>
<p id="rfc.section.4.2.p.1">The &lt;rpc&#8209;reply&gt; message is sent in response to an &lt;rpc&gt; message.  </p>
<p id="rfc.section.4.2.p.2">The &lt;rpc&#8209;reply&gt; element has a mandatory attribute "message&#8209;id", which is equal to the "message-id" attribute of the &lt;rpc&gt; for which this is a response.  </p>
<p id="rfc.section.4.2.p.3">A NETCONF server MUST also return any additional attributes included in the &lt;rpc&gt; element unmodified in the &lt;rpc&#8209;reply&gt; element.  </p>
<p id="rfc.section.4.2.p.4">The response data is encoded as one or more child elements to the &lt;rpc&#8209;reply&gt; element.</p>
<p id="rfc.section.4.2.p.5">For example:</p>
<p id="rfc.section.4.2.p.6">The following &lt;rpc&gt; element invokes the NETCONF &lt;get&gt; method and includes an additional attribute called "user-id".  Note that the "user-id" attribute is not in the NETCONF namespace.  The returned &lt;rpc&#8209;reply&gt; element returns the "user&#8209;id" attribute, as well as the requested content.</p>
<div id="#rfc.figure.6"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
       xmlns:ex="http://example.net/content/1.0"
       ex:user-id="fred"&gt;
    &lt;get/&gt;
  &lt;/rpc&gt;


  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
       xmlns:ex="http://example.net/content/1.0"
       ex:user-id="fred"&gt;
    &lt;data&gt;
      &lt;!-- contents here... --&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;

            </pre>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#rpcError" id="rpcError">&lt;rpc&#8209;error&gt; Element</a>
</h1>
<p id="rfc.section.4.3.p.1">The &lt;rpc&#8209;error&gt; element is sent in &lt;rpc&#8209;reply&gt; messages if an error occurs during the processing of an &lt;rpc&gt; request.  </p>
<p id="rfc.section.4.3.p.2">If a server encounters multiple errors during the processing of an &lt;rpc&gt; request, the &lt;rpc&#8209;reply&gt; MAY contain multiple &lt;rpc&#8209;error&gt; elements.  However, a server is not required to detect or report more than one &lt;rpc&#8209;error&gt; element, if a request contains multiple errors.  A server is not required to check for particular error conditions in a specific sequence.  A server MUST return an &lt;rpc&#8209;error&gt; element if any error conditions occur during processing.  </p>
<p id="rfc.section.4.3.p.3">A server MUST NOT return application-level- or data-model-specific error information in an &lt;rpc&#8209;error&gt; element for which the client does not have sufficient access rights.  </p>
<p id="rfc.section.4.3.p.4">The &lt;rpc&#8209;error&gt; element includes the following information: </p>
<p></p>

<dl>
<dt>error-type:</dt>
<dd style="margin-left: 8">Defines the conceptual layer that the error occurred.  Enumeration. One of: <ul>
<li>transport (layer: Secure Transport)</li>
<li>rpc (layer: Messages)</li>
<li>protocol (layer: Operations)</li>
<li>application (layer: Content)</li>
</ul>
<p> </p>
</dd>
<dt>error-tag:</dt>
<dd style="margin-left: 8">Contains a string identifying the error condition.  See <a href="#errorList">Appendix Appendix A</a> for allowed values.  </dd>
<dt>error-severity:</dt>
<dd style="margin-left: 8">Contains a string identifying the error severity, as determined by the device.  One of: <ul>
<li>error</li>
<li>warning</li>
</ul>
<p> Note that there are no &lt;error-tag&gt; values defined in this document which utilize the "warning" enumeration.  This is reserved for future use.  </p>
</dd>
<dt>error-app-tag:</dt>
<dd style="margin-left: 8">Contains a string identifying the data-model-specific or implementation-specific error condition, if one exists.  This element will not be present if no appropriate application error tag can be associated with a particular error condition.  If a data-model specific and a implementation-specific error-app-tag both exist, then the data-model specific value MUST be used by the server.  </dd>
<dt>error-path:</dt>
<dd style="margin-left: 8">Contains the absolute XPath <a href="#W3C.REC-xpath-19991116">[W3C.REC-xpath-19991116]</a> expression identifying the element path to the node that is associated with the error being reported in a particular rpc&#8209;error element.  This element will not be present if no appropriate payload element or datastore node can be associated with a particular error condition.</dd>
<dt></dt>
<dd style="margin-left: 8">The XPath expression is interpreted in the following context: <ul>
<li>The set of namespace declarations are those in scope on the rpc&#8209;error element.</li>
<li>The set of variable bindings is empty.</li>
<li>The function library is the core function library.</li>
</ul>
<p> The context node depends on the node associated with the error being reported: </p>
<ul>
<li>If a payload element can be associated with the error, the context node is the rpc request's document node (i.e., the "rpc" element).</li>
<li>Otherwise, the context node is the root of all data models, i.e., the node which has the top-level nodes from all data models as children.</li>
</ul>
<p> </p>
</dd>
<dt>error-message:</dt>
<dd style="margin-left: 8">Contains a string suitable for human display that describes the error condition.  This element will not be present if no appropriate message is provided for a particular error condition.  This element SHOULD include an xml:lang attribute as defined in <a href="#W3C.REC-xml-20001006">[W3C.REC-xml-20001006]</a> and discussed in <a href="#RFC3470">[RFC3470]</a>.  </dd>
<dt>error-info:</dt>
<dd style="margin-left: 8">Contains protocol- or data-model-specific error content.  This element will not be present if no such error content is provided for a particular error condition.  The list in <a href="#errorList">Appendix Appendix A</a> defines any mandatory error&#8209;info content for each error.  After any protocol-mandated content, a data model definition MAY mandate that certain application-layer error information be included in the error&#8209;info container.  An implementation MAY include additional elements to provide extended and/or implementation-specific debugging information.  </dd>
</dl>

<p> </p>
<p><a href="#errorList">Appendix Appendix A</a> enumerates the standard NETCONF errors.  </p>
<p></p>

<dl>
<dt>Example:</dt>
<dd style="margin-left: 8">
<br><br> An error is returned if an &lt;rpc&gt; element is received without a message-id attribute.  Note that only in this case is it acceptable for the NETCONF peer to omit the message-id attribute in the &lt;rpc&#8209;reply&gt; element.  </dd>
</dl>

<p> </p>
<div id="#rfc.figure.7"></div>
<pre>
  &lt;rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;rpc-error&gt;
      &lt;error-type&gt;rpc&lt;/error-type&gt;
      &lt;error-tag&gt;missing-attribute&lt;/error-tag&gt;
      &lt;error-severity&gt;error&lt;/error-severity&gt;
      &lt;error-info&gt;
        &lt;bad-attribute&gt;message-id&lt;/bad-attribute&gt;
        &lt;bad-element&gt;rpc&lt;/bad-element&gt;
      &lt;/error-info&gt;
    &lt;/rpc-error&gt;
  &lt;/rpc-reply&gt;

            </pre>
<p id="rfc.section.4.3.p.8">The following &lt;rpc&#8209;reply&gt; illustrates the case of returning multiple &lt;rpc&#8209;error&gt; elements.  </p>
<p id="rfc.section.4.3.p.9">Note that the data models used in the examples in this section use the &lt;name&gt; element to distinguish between multiple instances of the &lt;interface&gt; element.  </p>
<div id="#rfc.figure.8"></div>
<pre>
  &lt;rpc-reply message-id="101"
    xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
    xmlns:xc="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;rpc-error&gt;
      &lt;error-type&gt;application&lt;/error-type&gt;
      &lt;error-tag&gt;invalid-value&lt;/error-tag&gt;
      &lt;error-severity&gt;error&lt;/error-severity&gt;
      &lt;error-path&gt;
        /t:top/t:interface[t:name="Ethernet0/0"]/t:mtu
      &lt;/error-path&gt;
      &lt;error-message xml:lang="en"&gt;
        MTU value 25000 is not within range 256..9192
      &lt;/error-message&gt;
    &lt;/rpc-error&gt;
    &lt;rpc-error&gt;
      &lt;error-type&gt;application&lt;/error-type&gt;
      &lt;error-tag&gt;invalid-value&lt;/error-tag&gt;
      &lt;error-severity&gt;error&lt;/error-severity&gt;
      &lt;error-path&gt;
        /t:top/t:interface[t:name="Ethernet1/0"]/t:address/t:name
      &lt;/error-path&gt;
      &lt;error-message xml:lang="en"&gt;
        Invalid IP address for interface Ethernet1/0
      &lt;/error-message&gt;
    &lt;/rpc-error&gt;
  &lt;/rpc-reply&gt;

            </pre>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> <a href="#ok" id="ok">&lt;ok&gt; Element</a>
</h1>
<div id="#rfc.figure.9"></div>
<pre>
  &lt;rpc-reply message-id="101"
             xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;

            </pre>
<p id="rfc.section.4.4.p.1">The &lt;ok&gt; element is sent in &lt;rpc&#8209;reply&gt; messages if no errors or warnings occurred during the processing of an &lt;rpc&gt; request, and no data was returned from the operation.  For example: </p>
<h1 id="rfc.section.4.5">
<a href="#rfc.section.4.5">4.5.</a> Pipelining</h1>
<p id="rfc.section.4.5.p.1">NETCONF &lt;rpc&gt; requests MUST be processed serially by the managed device.  Additional &lt;rpc&gt; requests MAY be sent before previous ones have been completed. The managed device MUST send responses only in the order the requests were received.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Configuration Model</h1>
<p id="rfc.section.5.p.1">NETCONF provides an initial set of operations and a number of capabilities that can be used to extend the base. NETCONF peers exchange device capabilities when the session is initiated as described in <a href="#capabilityExchange">Section 8.1</a>.  </p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> Configuration Datastores</h1>
<p id="rfc.section.5.1.p.1">NETCONF defines the existence of one or more configuration datastores and allows configuration operations on them.  A configuration datastore is defined as the complete set of configuration data that is required to get a device from its initial default state into a desired operational state.  The configuration datastore does not include state data or executive commands.  </p>
<p id="rfc.section.5.1.p.2">The running configuration datastore holds the complete configuration currently active on the network device.  Only one configuration datastore of this type exists on the device, and it is always present. NETCONF protocol operations refer to this datastore using the &lt;running&gt; element.  </p>
<p id="rfc.section.5.1.p.3">Only the &lt;running&gt; configuration datastore is present in the base model. Additional configuration datastores MAY be defined by capabilities. Such configuration datastores are available only on devices that advertise the capabilities.  </p>
<p id="rfc.section.5.1.p.4">The capabilities in Sections <a href="#candidate">8.3</a> and <a href="#startup">8.7</a> define the &lt;candidate&gt; and &lt;startup&gt; configuration datastores, respectively.  </p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> Data Modeling</h1>
<p id="rfc.section.5.2.p.1">Data modeling and content issues are outside the scope of the NETCONF protocol.  An assumption is made that the device's data model is well-known to the application and that both parties are aware of issues such as the layout, containment, keying, lookup, replacement, and management of the data, as well as any other constraints imposed by the data model.  </p>
<p id="rfc.section.5.2.p.2">NETCONF carries configuration data inside the &lt;config&gt; element that is specific to device's data model.  The protocol treats the contents of that element as opaque data.  The device uses capabilities to announce the set of data models that the device implements.  The capability definition details the operation and constraints imposed by data model.  </p>
<p id="rfc.section.5.2.p.3">Devices and managers can support multiple data models, including both standard and proprietary data models.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#subtree" id="subtree">Subtree Filtering</a>
</h1>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> Overview</h1>
<p id="rfc.section.6.1.p.1">XML subtree filtering is a mechanism that allows an application to select particular XML subtrees to include in the &lt;rpc&#8209;reply&gt; for a &lt;get&gt; or &lt;get&#8209;config&gt; operation.  A small set of filters for inclusion, simple content exact-match, and selection is provided, which allows some useful, but also very limited, selection mechanisms.  The server does not need to utilize any data-model-specific semantics during processing, allowing for simple and centralized implementation strategies.  </p>
<p id="rfc.section.6.1.p.2">Conceptually, a subtree filter is comprised of zero or more element subtrees, which represent the filter selection criteria.  At each containment level within a subtree, the set of sibling nodes is logically processed by the server to determine if its subtree and path of elements to the root are included in the filter output.  </p>
<p id="rfc.section.6.1.p.3">Each node specified in a subtree filter represents an inclusive filter.  Only associated nodes in underlying data model(s) within the specified datastore on the server are selected by the filter.  A node is selected if it matches the selection criteria and hierarchy of elements given in the filter data, except that the filter absolute path name is adjusted to start from the layer below &lt;filter&gt;.  </p>
<p id="rfc.section.6.1.p.4">Response messages contain only the subtrees selected by the filter.  Any selection criteria that were present in the request, within a particular selected subtree, are also included in the response.  Note that some elements expressed in the filter as leaf nodes will be expanded (i.e., subtrees included) in the filter output.  Specific data instances are not duplicated in the response in the event that the request contains multiple filter subtree expressions that select the same data.  </p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> Subtree Filter Components</h1>
<p id="rfc.section.6.2.p.1">A subtree filter is comprised of XML elements and their XML attributes.  There are five types of components that can be present in a subtree filter: </p>

<ul>
<li>Namespace Selection</li>
<li>Attribute Match Expressions</li>
<li>Containment Nodes</li>
<li>Selection Nodes</li>
<li>Content Match Nodes</li>
</ul>

<p> </p>
<h1 id="rfc.section.6.2.1">
<a href="#rfc.section.6.2.1">6.2.1.</a> <a href="#NamespaceSelection" id="NamespaceSelection">Namespace Selection</a>
</h1>
<p id="rfc.section.6.2.1.p.1">A namespace is considered to match (for filter purposes) if the XML namespace associated with a particular node within the &lt;filter&gt; element is the same as in the underlying data model.  Note that namespace selection cannot be used by itself.  At least one element MUST be specified in the filter if any elements are to be included in the filter output.  </p>
<p id="rfc.section.6.2.1.p.2">An XML namespace wildcard mechanism is defined for subtree filtering. If an element within the &lt;filter&gt; element is not qualified by a namespace (e.g., xmlns=""), then the server MUST evaluate all the XML namespaces it supports, when processing that subtree filter node.  This wildcard mechanism is not applicable to XML attributes.  </p>
<p id="rfc.section.6.2.1.p.3">Note that prefix values for qualified namespaces are not relevant when comparing filter elements to elements in the underlying data model.  </p>
<div id="#rfc.figure.10"></div>
<pre>
  &lt;filter type="subtree"&gt;
    &lt;top xmlns="http://example.com/schema/1.2/config"/&gt;
  &lt;/filter&gt;
              </pre>
<p id="rfc.section.6.2.1.p.4">Example: </p>
<p id="rfc.section.6.2.1.p.5">In this example, the &lt;top&gt; element is a selection node, and only this node in the "http://example.com/schema/1.2/config" namespace and any child nodes (from the underlying data model) will be included in the filter output.  </p>
<h1 id="rfc.section.6.2.2">
<a href="#rfc.section.6.2.2">6.2.2.</a> <a href="#attribute-match" id="attribute-match">Attribute Match Expressions</a>
</h1>
<p id="rfc.section.6.2.2.p.1">An attribute that appears in a subtree filter is part of an "attribute match expression".  Any number of (unqualified or qualified) XML attributes MAY be present in any type of filter node.  In addition to the selection criteria normally applicable to that node, the selected data MUST have matching values for every attribute specified in the node.  If an element is not defined to include a specified attribute, then it is not selected in the filter output.  </p>
<div id="#rfc.figure.11"></div>
<pre>
  &lt;filter type="subtree"&gt;
    &lt;t:top xmlns:t="http://example.com/schema/1.2/config"&gt;
      &lt;t:interfaces&gt;
        &lt;t:interface t:ifName="eth0"/&gt;
      &lt;/t:interfaces&gt;
    &lt;/t:top&gt;
  &lt;/filter&gt;
              </pre>
<p id="rfc.section.6.2.2.p.2">Example: </p>
<p id="rfc.section.6.2.2.p.3">In this example, the &lt;top&gt;, and &lt;interfaces&gt; elements are containment nodes, the &lt;interface&gt; element is a selection node, and "ifName" is an attribute match expression.  Only "interface" nodes in the "http://example.com/schema/1.2/config" namespace that have an "ifName" attribute with the value "eth0" and occur within "interfaces" nodes within "top" nodes will be included in the filter output.  </p>
<h1 id="rfc.section.6.2.3">
<a href="#rfc.section.6.2.3">6.2.3.</a> <a href="#containment-nodes" id="containment-nodes">Containment Nodes</a>
</h1>
<p id="rfc.section.6.2.3.p.1">Nodes that contain child elements within a subtree filter are called "containment nodes".  Each child element can be any type of node, including another containment node.  For each containment node specified in a subtree filter, all data model instances that exactly match the specified namespaces, element hierarchy, and any attribute match expressions are included in the filter output.  </p>
<div id="#rfc.figure.12"></div>
<pre>
  &lt;filter type="subtree"&gt;
    &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
      &lt;users/&gt;
    &lt;/top&gt;
  &lt;/filter&gt;
              </pre>
<p id="rfc.section.6.2.3.p.2">Example: </p>
<p id="rfc.section.6.2.3.p.3">In this example, the &lt;top&gt; element is a containment node.  </p>
<h1 id="rfc.section.6.2.4">
<a href="#rfc.section.6.2.4">6.2.4.</a> Selection Nodes</h1>
<p id="rfc.section.6.2.4.p.1">An empty leaf node within a filter is called a "selection node", and it represents an "explicit selection" filter on the underlying data model.  Presence of any selection nodes within a set of sibling nodes will cause the filter to select the specified subtree(s) and suppress automatic selection of the entire set of sibling nodes in the underlying data model.  For filtering purposes, an empty leaf node can be declared either with an empty tag (e.g., &lt;foo/&gt;) or with explicit start and end tags (e.g., &lt;foo&gt;  &lt;/foo&gt;).  Any whitespace characters are ignored in this form.  </p>
<div id="#rfc.figure.13"></div>
<pre>
  &lt;filter type="subtree"&gt;
    &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
      &lt;users/&gt;
    &lt;/top&gt;
  &lt;/filter&gt;
              </pre>
<p id="rfc.section.6.2.4.p.2">Example: </p>
<p id="rfc.section.6.2.4.p.3">In this example, the &lt;top&gt; element is a containment node, and the &lt;users&gt; element is a selection node.  Only "users" nodes in the "http://example.com/schema/1.2/config" namespace that occur within a "top" element that is the root of the configuration datastore will be included in the filter output.  </p>
<h1 id="rfc.section.6.2.5">
<a href="#rfc.section.6.2.5">6.2.5.</a> Content Match Nodes</h1>
<p id="rfc.section.6.2.5.p.1">A leaf node that contains simple content is called a "content match node".  It is used to select some or all of its sibling nodes for filter output, and it represents an exact-match filter on the leaf node element content.  The following constraints apply to content match nodes: </p>

<ul>
<li>A content match node MUST NOT contain nested elements.</li>
<li>Multiple content match nodes (i.e., sibling nodes) are logically combined in an "AND" expression.</li>
<li>Filtering of mixed content is not supported.</li>
<li>Filtering of list content is not supported.</li>
<li>Filtering of whitespace-only content is not supported.</li>
<li>A content match node MUST contain non-whitespace characters.  An empty element (e.g., &lt;foo&gt;&lt;/foo&gt;) will be interpreted as a selection node (e.g., &lt;foo/&gt;).</li>
<li>Leading and trailing whitespace characters are ignored, but any whitespace characters within a block of text characters are not ignored or modified.</li>
</ul>

<p> </p>
<p id="rfc.section.6.2.5.p.2">If all specified sibling content match nodes in a subtree filter expression are "true", then the filter output nodes are selected in the following manner: </p>

<ul>
<li>Each content match node in the sibling set is included in the filter output.</li>
<li>If any containment nodes are present in the sibling set, then they are processed further and included if any nested filter criteria are also met.</li>
<li>If any selection nodes are present in the sibling set, then all of them are included in the filter output.</li>
<li>If any sibling nodes of the selection node are instance identifier components for a conceptual data structure (e.g., list key leaf), then they MAY also be included in the filter output.</li>
<li>Otherwise (i.e., there are no selection or containment nodes in the filter sibling set), all the nodes defined at this level in the underlying data model (and their subtrees, if any) are returned in the filter output.</li>
</ul>

<p> </p>
<p id="rfc.section.6.2.5.p.3">If any of the sibling content match node tests are "false", then no further filter processing is performed on that sibling set, and none of the sibling subtrees are selected by the filter, including the content match node(s).  </p>
<div id="#rfc.figure.14"></div>
<pre>
  &lt;filter type="subtree"&gt;
    &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
      &lt;users&gt;
        &lt;user&gt;
          &lt;name&gt;fred&lt;/name&gt;
        &lt;/user&gt;
      &lt;/users&gt;
    &lt;/top&gt;
  &lt;/filter&gt;
              </pre>
<p id="rfc.section.6.2.5.p.4">Example: </p>
<p id="rfc.section.6.2.5.p.5">In this example, the &lt;users&gt; and &lt;user&gt; nodes are both containment nodes, and &lt;name&gt; is a content match node.  Since no sibling nodes of &lt;name&gt; are specified (and therefore no containment or selection nodes), all of the sibling nodes of &lt;name&gt; are returned in the filter output.  Only "user" nodes in the "http://example.com/schema/1.2/config" namespace that match the element hierarchy and for which the &lt;name&gt; element is equal to "fred" will be included in the filter output.  </p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> Subtree Filter Processing</h1>
<p id="rfc.section.6.3.p.1">The filter output (the set of selected nodes) is initially empty.  </p>
<p id="rfc.section.6.3.p.2">Each subtree filter can contain one or more data model fragments, which represent portions of the data model that will be selected (with all child nodes) in the filter output.  </p>
<p id="rfc.section.6.3.p.3">Each subtree data fragment is compared by the server to the internal data models supported by the server.  If the entire subtree data-fragment filter (starting from the root to the innermost element specified in the filter) exactly matches a corresponding portion of the supported data model, then that node and all its children are included in the result data.  </p>
<p id="rfc.section.6.3.p.4">The server processes all nodes with the same parent node (sibling set) together, starting from the root to the leaf nodes.  The root elements in the filter are considered in the same sibling set (assuming they are in the same namespace), even though they do not have a common parent.  </p>
<p id="rfc.section.6.3.p.5">For each sibling set, the server determines which nodes are included (or potentially included) in the filter output, and which sibling subtrees are excluded (pruned) from the filter output.  The server first determines which types of nodes are present in the sibling set and processes the nodes according to the rules for their type.  If any nodes in the sibling set are selected, then the process is recursively applied to the sibling sets of each selected node.  The algorithm continues until all sibling sets in all subtrees specified in the filter have been processed.  </p>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> Subtree Filtering Examples</h1>
<h1 id="rfc.section.6.4.1">
<a href="#rfc.section.6.4.1">6.4.1.</a> No Filter</h1>
<div id="#rfc.figure.15"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get/&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;!-- ... entire set of data returned ... --&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
              </pre>
<p id="rfc.section.6.4.1.p.1">Leaving out the filter on the get operation returns the entire data model.  </p>
<h1 id="rfc.section.6.4.2">
<a href="#rfc.section.6.4.2">6.4.2.</a> Empty Filter</h1>
<div id="#rfc.figure.16"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get&gt;
      &lt;filter type="subtree"&gt;
      &lt;/filter&gt;
    &lt;/get&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
              </pre>
<p id="rfc.section.6.4.2.p.1">An empty filter will select nothing because no content match or selection nodes are present.  This is not an error.  The filter type attribute used in these examples is discussed further in Section 7.1.  </p>
<h1 id="rfc.section.6.4.3">
<a href="#rfc.section.6.4.3">6.4.3.</a> Select the Entire &lt;users&gt; Subtree</h1>
<p id="rfc.section.6.4.3.p.1">The filter in this example contains one selection node (&lt;users&gt;), so just that subtree is selected by the filter.  This example represents the fully-populated &lt;users&gt; data model in most of the filter examples that follow.  In a real data model, the &lt;company&#8209;info&gt; would not likely be returned with the list of users for a particular host or network.  </p>
<div id="#rfc.figure.17"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;users/&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;


  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
        &lt;users&gt;
          &lt;user&gt;
            &lt;name&gt;root&lt;/name&gt;
            &lt;type&gt;superuser&lt;/type&gt;
            &lt;full-name&gt;Charlie Root&lt;/full-name&gt;
            &lt;company-info&gt;
              &lt;dept&gt;1&lt;/dept&gt;
              &lt;id&gt;1&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
          &lt;user&gt;
            &lt;name&gt;fred&lt;/name&gt;
            &lt;type&gt;admin&lt;/type&gt;
            &lt;full-name&gt;Fred Flintstone&lt;/full-name&gt;
            &lt;company-info&gt;
              &lt;dept&gt;2&lt;/dept&gt;
              &lt;id&gt;2&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
          &lt;user&gt;
            &lt;name&gt;barney&lt;/name&gt;
            &lt;type&gt;admin&lt;/type&gt;
            &lt;full-name&gt;Barney Rubble&lt;/full-name&gt;
            &lt;company-info&gt;
              &lt;dept&gt;2&lt;/dept&gt;
              &lt;id&gt;3&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
        &lt;/users&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;

              </pre>
<p id="rfc.section.6.4.3.p.2">NOTE: The filtering and configuration examples used in this document appear in the namespace "http://example.com/schema/1.2/config".  The root element of this namespace is &lt;top&gt;.  The &lt;top&gt; element and its descendents represent an example configuration data model only.  </p>
<div id="#rfc.figure.18"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;users&gt;
            &lt;user/&gt;
          &lt;/users&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;

              </pre>
<p id="rfc.section.6.4.3.p.3">The following filter request would have produced the same result, but only because the container &lt;users&gt; defines one child element (&lt;user&gt;).  </p>
<h1 id="rfc.section.6.4.4">
<a href="#rfc.section.6.4.4">6.4.4.</a> Select All &lt;name&gt; Elements within the &lt;users&gt; Subtree</h1>
<div id="#rfc.figure.19"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;users&gt;
            &lt;user&gt;
              &lt;name/&gt;
            &lt;/user&gt;
          &lt;/users&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
        &lt;users&gt;
          &lt;user&gt;
            &lt;name&gt;root&lt;/name&gt;
          &lt;/user&gt;
          &lt;user&gt;
            &lt;name&gt;fred&lt;/name&gt;
          &lt;/user&gt;
          &lt;user&gt;
            &lt;name&gt;barney&lt;/name&gt;
          &lt;/user&gt;
        &lt;/users&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
              </pre>
<p id="rfc.section.6.4.4.p.1">This filter contains two containment nodes (&lt;users&gt;, &lt;user&gt;) and one selection node (&lt;name&gt;).  All instances of the &lt;name&gt; element in the same sibling set are selected in the filter output.  The client might need to know that &lt;name&gt; is used as an instance identifier in this particular data structure, but the server does not need to know that meta-data in order to process the request.  </p>
<h1 id="rfc.section.6.4.5">
<a href="#rfc.section.6.4.5">6.4.5.</a> One Specific &lt;user&gt; Entry</h1>
<div id="#rfc.figure.20"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;users&gt;
            &lt;user&gt;
              &lt;name&gt;fred&lt;/name&gt;
            &lt;/user&gt;
          &lt;/users&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
        &lt;users&gt;
          &lt;user&gt;
            &lt;name&gt;fred&lt;/name&gt;
            &lt;type&gt;admin&lt;/type&gt;
            &lt;full-name&gt;Fred Flintstone&lt;/full-name&gt;
            &lt;company-info&gt;
              &lt;dept&gt;2&lt;/dept&gt;
              &lt;id&gt;2&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
        &lt;/users&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
              </pre>
<p id="rfc.section.6.4.5.p.1">This filter contains two containment nodes (&lt;users&gt;, &lt;user&gt;) and one content match node (&lt;name&gt;).  All instances of the sibling set containing &lt;name&gt; for which the value of &lt;name&gt; equals "fred" are selected in the filter output.  </p>
<h1 id="rfc.section.6.4.6">
<a href="#rfc.section.6.4.6">6.4.6.</a> Specific Elements from a Specific &lt;user&gt; Entry</h1>
<div id="#rfc.figure.21"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;users&gt;
            &lt;user&gt;
              &lt;name&gt;fred&lt;/name&gt;
              &lt;type/&gt;
              &lt;full-name/&gt;
            &lt;/user&gt;
          &lt;/users&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
        &lt;users&gt;
          &lt;user&gt;
            &lt;name&gt;fred&lt;/name&gt;
            &lt;type&gt;admin&lt;/type&gt;
            &lt;full-name&gt;Fred Flintstone&lt;/full-name&gt;
          &lt;/user&gt;
        &lt;/users&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
              </pre>
<p id="rfc.section.6.4.6.p.1">This filter contains two containment nodes (&lt;users&gt;, &lt;user&gt;), one content match node (&lt;name&gt;), and two selection nodes (&lt;type&gt;, &lt;full&#8209;name&gt;).  All instances of the &lt;type&gt; and &lt;full&#8209;name&gt; elements in the same sibling set containing &lt;name&gt; for which the value of &lt;name&gt; equals "fred" are selected in the filter output.  The &lt;company&#8209;info&gt; element is not included because the sibling set contains selection nodes.  </p>
<h1 id="rfc.section.6.4.7">
<a href="#rfc.section.6.4.7">6.4.7.</a> Multiple Subtrees</h1>
<p id="rfc.section.6.4.7.p.1">This filter contains three subtrees (name=root, fred, barney).  </p>
<p id="rfc.section.6.4.7.p.2">The "root" subtree filter contains two containment nodes (&lt;users&gt;, &lt;user&gt;), one content match node (&lt;name&gt;), and one selection node (&lt;company&#8209;info&gt;).  The subtree selection criteria is met, and just the company-info subtree for "root" is selected in the filter output.  </p>
<p id="rfc.section.6.4.7.p.3">The "fred" subtree filter contains three containment nodes (&lt;users&gt;, &lt;user&gt;, &lt;company&#8209;info&gt;), one content match node (&lt;name&gt;), and one selection node (&lt;id&gt;).  The subtree selection criteria is met, and just the &lt;id&gt; element within the company&#8209;info subtree for "fred" is selected in the filter output.  </p>
<div id="#rfc.figure.22"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;users&gt;
            &lt;user&gt;
              &lt;name&gt;root&lt;/name&gt;
              &lt;company-info/&gt;
            &lt;/user&gt;
            &lt;user&gt;
              &lt;name&gt;fred&lt;/name&gt;
              &lt;company-info&gt;
                &lt;id/&gt;
              &lt;/company-info&gt;
            &lt;/user&gt;
            &lt;user&gt;
              &lt;name&gt;barney&lt;/name&gt;
              &lt;type&gt;superuser&lt;/type&gt;
              &lt;company-info&gt;
                &lt;dept/&gt;
              &lt;/company-info&gt;
            &lt;/user&gt;
          &lt;/users&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
             xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
        &lt;users&gt;
          &lt;user&gt;
            &lt;name&gt;root&lt;/name&gt;
            &lt;company-info&gt;
              &lt;dept&gt;1&lt;/dept&gt;
              &lt;id&gt;1&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
          &lt;user&gt;
            &lt;name&gt;fred&lt;/name&gt;
            &lt;company-info&gt;
              &lt;id&gt;2&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
        &lt;/users&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
              </pre>
<p id="rfc.section.6.4.7.p.4">The "barney" subtree filter contains three containment nodes (&lt;users&gt;, &lt;user&gt;, &lt;company&#8209;info&gt;), two content match nodes (&lt;name&gt;, &lt;type&gt;), and one selection node (&lt;dept&gt;).  The subtree selection criteria is not met because user "barney" is not a "superuser", and the entire subtree for "barney" (including its parent &lt;user&gt; entry) is excluded from the filter output.  </p>
<h1 id="rfc.section.6.4.8">
<a href="#rfc.section.6.4.8">6.4.8.</a> Elements with Attribute Naming</h1>
<div id="#rfc.figure.23"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get&gt;
      &lt;filter type="subtree"&gt;
        &lt;t:top xmlns:t="http://example.com/schema/1.2/stats"&gt;
          &lt;t:interfaces&gt;
            &lt;t:interface t:ifName="eth0"/&gt;
          &lt;/t:interfaces&gt;
        &lt;/t:top&gt;
      &lt;/filter&gt;
    &lt;/get&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;t:top xmlns:t="http://example.com/schema/1.2/stats"&gt;
        &lt;t:interfaces&gt;
          &lt;t:interface t:ifName="eth0"&gt;
            &lt;t:ifInOctets&gt;45621&lt;/t:ifInOctets&gt;
            &lt;t:ifOutOctets&gt;774344&lt;/t:ifOutOctets&gt;
          &lt;/t:interface&gt;
        &lt;/t:interfaces&gt;
      &lt;/t:top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
              </pre>
<p id="rfc.section.6.4.8.p.1">In this example, the filter contains one containment node (&lt;interfaces&gt;), one attribute match expression (ifName), and one selection node (&lt;interface&gt;).  All instances of the &lt;interface&gt; subtree that have an ifName attribute equal to "eth0" are selected in the filter output.  The filter data elements and attributes are qualified because the ifName attribute will not be considered part of the "schema/1.2" namespace if it is unqualified.  </p>
<div id="#rfc.figure.24"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/stats"&gt;
          &lt;interfaces&gt;
            &lt;interface&gt;
              &lt;ifName&gt;eth0&lt;/ifName&gt;
            &lt;/interface&gt;
          &lt;/interfaces&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get&gt;
  &lt;/rpc&gt;
              </pre>
<p id="rfc.section.6.4.8.p.2">If ifName were a child node instead of an attribute, then the following request would produce similar results.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#protocolOperations" id="protocolOperations">Protocol Operations</a>
</h1>
<p id="rfc.section.7.p.1">The NETCONF protocol provides a small set of low-level operations to manage device configurations and retrieve device state information. The base protocol provides operations to retrieve, configure, copy, and delete configuration datastores.  Additional operations are provided, based on the capabilities advertised by the device.  </p>
<p id="rfc.section.7.p.2">The base protocol includes the following protocol operations: </p>

<ul>
<li>get</li>
<li>get-config</li>
<li>edit-config</li>
<li>copy-config</li>
<li>delete-config</li>
<li>lock</li>
<li>unlock</li>
<li>close-session</li>
<li>kill-session</li>
</ul>

<p> </p>
<p id="rfc.section.7.p.3">A protocol operation can fail for various reasons, including "operation not supported".  An initiator SHOULD NOT assume that any operation will always succeed.  The return values in any RPC reply SHOULD be checked for error responses.  </p>
<p id="rfc.section.7.p.4">The syntax and XML encoding of the protocol operations are formally defined in the YANG module in <a href="#yangmodule">Appendix Appendix C</a>.  The following sections describe the semantics of each protocol operation.  </p>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> <a href="#get-config" id="get-config">&lt;get&#8209;config&gt;</a>
</h1>
<div id="#rfc.figure.25"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;users/&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
        &lt;users&gt;
          &lt;user&gt;
            &lt;name&gt;root&lt;/name&gt;
            &lt;type&gt;superuser&lt;/type&gt;
            &lt;full-name&gt;Charlie Root&lt;/full-name&gt;
            &lt;company-info&gt;
              &lt;dept&gt;1&lt;/dept&gt;
              &lt;id&gt;1&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
          &lt;!-- additional &lt;user&gt; elements appear here... --&gt;
        &lt;/users&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
                  </pre>
<p></p>

<dl>
<dt>Description:</dt>
<dd style="margin-left: 8">
<br><br> Retrieve all or part of a specified configuration datastore.  </dd>
<dt>Parameters:</dt>
<dd style="margin-left: 8">
<dl>
<dt>source:</dt>
<dd style="margin-left: 8">
<br><br> Name of the configuration datastore being queried, such as &lt;running/&gt;.  </dd>
<dt>filter:</dt>
<dd style="margin-left: 8">
<br><br> This parameter identifies the portions of the device configuration datastore to retrieve.  If this parameter is not present, the entire configuration is returned.  <br><br> The filter element MAY optionally contain a "type" attribute.  This attribute indicates the type of filtering syntax used within the filter element. The default filtering mechanism in NETCONF is referred to as subtree filtering and is described in <a href="#subtree">Section 6</a>. The value "subtree" explicitly identifies this type of filtering.  <br><br> If the NETCONF peer supports <a href="#xpath">the :xpath capability</a> <cite title="NONE">[xpath]</cite>, the value "xpath" MAY be used to indicate that the select attribute on the filter element contains an XPath expression.  </dd>
</dl>
<p> </p>
</dd>
<dt>Positive Response:</dt>
<dd style="margin-left: 8">
<br><br> If the device can satisfy the request, the server sends an &lt;rpc&#8209;reply&gt; element containing a &lt;data&gt; element with the results of the query.  </dd>
<dt>Negative Response:</dt>
<dd style="margin-left: 8">
<br><br> An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt; if the request cannot be completed for any reason.  </dd>
<dt>Example:</dt>
<dd style="margin-left: 8">To retrieve the entire &lt;users&gt; subtree: </dd>
<dt></dt>
<dd style="margin-left: 8">
<a href="#subtree">Section 6</a> contains additional examples of subtree filtering.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.7.2">
<a href="#rfc.section.7.2">7.2.</a> &lt;edit&#8209;config&gt;</h1>
<p></p>

<dl>
<dt>Description:</dt>
<dd style="margin-left: 8">
<br><br> The &lt;edit&#8209;config&gt; operation loads all or part of a specified configuration to the specified target configuration datastore.  This operation allows the new configuration to be expressed in several ways, such as using a local file, a remote file, or inline.  If the target configuration datastore does not exist, it will be created.  <br><br> If a NETCONF peer supports <a href="#url">the :url capability</a> <cite title="NONE">[url]</cite>, the &lt;url&gt; element can appear instead of the &lt;config&gt; parameter.  <br><br> The device analyzes the source and target configurations and performs the requested changes.  The target configuration is not necessarily replaced, as with the &lt;copy&#8209;config&gt; message.  Instead, the target configuration is changed in accordance with the source's data and requested operations.  <br><br> If the &lt;edit-config&gt; operation contains multiple sub-operations which apply to the same conceptual node in the underlying data model, then the result of the operation is undefined (i.e., outside the scope of the NETCONF protocol).  </dd>
<dt>Attributes:</dt>
<dd style="margin-left: 8">
<dl>
<dt>operation:</dt>
<dd style="margin-left: 8">
<br><br> Elements in the &lt;config&gt; subtree MAY contain an "operation" attribute. The attribute identifies the point in the configuration to perform the operation and MAY appear on multiple elements throughout the &lt;config&gt; subtree.  <br><br> If the operation attribute is not specified, the configuration is merged into the configuration datastore.  <br><br> The operation attribute has one of the following values: <dl>
<dt>merge:</dt>
<dd style="margin-left: 8">The configuration data identified by the element containing this attribute is merged with the configuration at the corresponding level in the configuration datastore identified by the target parameter.  This is the default behavior.  </dd>
<dt>replace:</dt>
<dd style="margin-left: 8">The configuration data identified by the element containing this attribute replaces any related configuration in the configuration datastore identified by the target parameter.  If no such configuration data exists in the configuration datastore, it is created. Unlike a &lt;copy&#8209;config&gt; operation, which replaces the entire target configuration, only the configuration actually present in the config parameter is affected.  </dd>
<dt>create:</dt>
<dd style="margin-left: 8">The configuration data identified by the element containing this attribute is added to the configuration if and only if the configuration data does not already exist in the configuration datastore.  If the configuration data exists, an &lt;rpc&#8209;error&gt; element is returned with an &lt;error&#8209;tag&gt; value of "data&#8209;exists".  </dd>
<dt>delete:</dt>
<dd style="margin-left: 8">The configuration data identified by the element containing this attribute is deleted from the configuration if and only if the configuration data currently exists in the configuration datastore.  If the configuration data does not exist, an &lt;rpc&#8209;error&gt; element is returned with an &lt;error&#8209;tag&gt; value of "data&#8209;missing".  </dd>
<dt>remove:</dt>
<dd style="margin-left: 8">The configuration data identified by the element containing this attribute is deleted from the configuration if the configuration data currently exists in the configuration datastore.  If the configuration data does not exist, the "remove" operation is silently ignored by the server.  </dd>
</dl>
<p> </p>
</dd>
</dl>
<p> </p>
</dd>
<dt>Parameters:</dt>
<dd style="margin-left: 8">
<dl>
<dt>target:</dt>
<dd style="margin-left: 8">
<br><br> Name of the configuration datastore being edited, such as &lt;running/&gt; or &lt;candidate/&gt;.  </dd>
<dt>default-operation:</dt>
<dd style="margin-left: 8">
<br><br> Selects the default operation (as described in the "operation" attribute) for this &lt;edit&#8209;config&gt; request.  The default value for the default-operation parameter is "merge".  <br><br> The default-operation parameter is optional, but if provided, it has one of the following values: <dl>
<dt>merge:</dt>
<dd style="margin-left: 8">The configuration data in the &lt;config&gt; parameter is merged with the configuration at the corresponding level in the target datastore.  This is the default behavior.  </dd>
<dt>replace:</dt>
<dd style="margin-left: 8">The configuration data in the &lt;config&gt; parameter completely replaces the configuration in the target datastore.  This is useful for loading previously saved configuration data.  </dd>
<dt>none:</dt>
<dd style="margin-left: 8">The target datastore is unaffected by the configuration in the &lt;config&gt; parameter, unless and until the incoming configuration data uses the "operation" attribute to request a different operation.  If the configuration in the &lt;config&gt; parameter contains data for which there is not a corresponding level in the target datastore, an &lt;rpc&#8209;error&gt; is returned with an &lt;error&#8209;tag&gt; value of data-missing.  Using "none" allows operations like "delete" to avoid unintentionally creating the parent hierarchy of the element to be deleted.  </dd>
</dl>
<p> </p>
</dd>
<dt>test-option:</dt>
<dd style="margin-left: 8">
<br><br> The test-option element MAY be specified only if the device advertises the <a href="#validate">:validate:1.1 capability</a> <cite title="NONE">[validate]</cite>.  <br><br> The test-option element has one of the following values: <dl>
<dt>test-then-set:</dt>
<dd style="margin-left: 8">Perform a validation test before attempting to set.  If validation errors occur, do not perform the &lt;edit&#8209;config&gt; operation. This is the default test-option.  </dd>
<dt>set:</dt>
<dd style="margin-left: 8">Perform a set without a validation test first.  </dd>
<dt>test-only:</dt>
<dd style="margin-left: 8">Perform only the validation test, without attempting to set.  </dd>
</dl>
<p> </p>
</dd>
<dt>error-option:</dt>
<dd style="margin-left: 8">
<br><br> The error-option element has one of the following values: <dl>
<dt>stop-on-error:</dt>
<dd style="margin-left: 8">Abort the edit-config operation on first error. This is the default error-option.  </dd>
<dt>continue-on-error:</dt>
<dd style="margin-left: 8">Continue to process configuration data on error; error is recorded, and negative response is generated if any errors occur.  </dd>
<dt>rollback-on-error:</dt>
<dd style="margin-left: 8">If an error condition occurs such that an error severity &lt;rpc&#8209;error&gt; element is generated, the server will stop processing the edit-config operation and restore the specified configuration to its complete state at the start of this edit-config operation. This option requires the server to support the :rollback-on-error capability described in <a href="#rollback-on-error">Section 8.5</a>.  </dd>
</dl>
<p> </p>
</dd>
<dt>config:</dt>
<dd style="margin-left: 8">
<br><br> A hierarchy of configuration data as defined by one of the device's data models. The contents MUST be placed in an appropriate namespace, to allow the device to detect the appropriate data model, and the contents MUST follow the constraints of that data model, as defined by its capability definition.  Capabilities are discussed in <a href="#capabilities">Section 8</a>.  </dd>
</dl>
<p> </p>
</dd>
<dt>Positive Response:</dt>
<dd style="margin-left: 8">
<br><br> If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt; is sent containing an &lt;ok&gt; element.  </dd>
<dt>Negative Response:</dt>
<dd style="margin-left: 8">
<br><br> An &lt;rpc&#8209;error&gt; response is sent if the request cannot be completed for any reason.  </dd>
<dt>Example:</dt>
<dd style="margin-left: 8">
<br><br> The &lt;edit&#8209;config&gt; examples in this section utilize a simple data model, in which multiple instances of the "interface" element can be present, and an instance is distinguished by the "name" element within each "interface" element.  <br><br> Set the MTU to 1500 on an interface named "Ethernet0/0" in the running configuration: </dd>
</dl>

<p> </p>
<div id="#rfc.figure.26"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;edit-config&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
      &lt;config&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;interface&gt;
            &lt;name&gt;Ethernet0/0&lt;/name&gt;
            &lt;mtu&gt;1500&lt;/mtu&gt;
          &lt;/interface&gt;
        &lt;/top&gt;
      &lt;/config&gt;
    &lt;/edit-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
                  </pre>
<p id="rfc.section.7.2.p.2">Add an interface named "Ethernet0/0" to the running configuration, replacing any previous interface with that name: </p>
<div id="#rfc.figure.27"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;edit-config&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
      &lt;config xmlns:xc="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;interface xc:operation="replace"&gt;
            &lt;name&gt;Ethernet0/0&lt;/name&gt;
            &lt;mtu&gt;1500&lt;/mtu&gt;
            &lt;address&gt;
              &lt;name&gt;192.0.2.4&lt;/name&gt;
              &lt;prefix-length&gt;24&lt;/prefix-length&gt;
            &lt;/address&gt;
          &lt;/interface&gt;
        &lt;/top&gt;
      &lt;/config&gt;
    &lt;/edit-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
                  </pre>
<p id="rfc.section.7.2.p.3">Delete the configuration for an interface named "Ethernet0/0" from the running configuration: </p>
<div id="#rfc.figure.28"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;edit-config&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
      &lt;default-operation&gt;none&lt;/default-operation&gt;
      &lt;config xmlns:xc="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;interface xc:operation="delete"&gt;
            &lt;name&gt;Ethernet0/0&lt;/name&gt;
          &lt;/interface&gt;
        &lt;/top&gt;
      &lt;/config&gt;
    &lt;/edit-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
                  </pre>
<p id="rfc.section.7.2.p.4">Delete interface 192.0.2.4 from an OSPF area (other interfaces configured in the same area are unaffected): </p>
<div id="#rfc.figure.29"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;edit-config&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
      &lt;default-operation&gt;none&lt;/default-operation&gt;
      &lt;config xmlns:xc="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;protocols&gt;
            &lt;ospf&gt;
              &lt;area&gt;
                &lt;name&gt;0.0.0.0&lt;/name&gt;
                &lt;interfaces&gt;
                  &lt;interface xc:operation="delete"&gt;
                    &lt;name&gt;192.0.2.4&lt;/name&gt;
                  &lt;/interface&gt;
                &lt;/interfaces&gt;
              &lt;/area&gt;
            &lt;/ospf&gt;
          &lt;/protocols&gt;
        &lt;/top&gt;
      &lt;/config&gt;
    &lt;/edit-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
                  </pre>
<h1 id="rfc.section.7.3">
<a href="#rfc.section.7.3">7.3.</a> &lt;copy&#8209;config&gt;</h1>
<div id="#rfc.figure.30"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;copy-config&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
      &lt;source&gt;
        &lt;url&gt;https://user@example.com:passphrase/cfg/new.txt&lt;/url&gt;
      &lt;/source&gt;
    &lt;/copy-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
      xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
                  </pre>
<p></p>

<dl>
<dt>Description:</dt>
<dd style="margin-left: 8">
<br><br> Create or replace an entire configuration datastore with the contents of another complete configuration datastore.  If the target datastore exists, it is overwritten. Otherwise, a new one is created, if allowed.  <br><br> If a NETCONF peer supports <a href="#url">the :url capability</a> <cite title="NONE">[url]</cite>, the &lt;url&gt; element can appear as the &lt;source&gt; or &lt;target&gt; parameter.  <br><br> Even if it advertises the :writable-running capability, a device MAY choose not to support the &lt;running/&gt; configuration datastore as the &lt;target&gt; parameter of a &lt;copy&#8209;config&gt; operation.  A device MAY choose not to support remote-to-remote copy operations, where both the &lt;source&gt; and &lt;target&gt; parameters use the &lt;url&gt; element.  If the source and target parameters identify the same URL or configuration datastore, an error MUST be returned with an error-tag containing "invalid-value".  </dd>
<dt>Parameters:</dt>
<dd style="margin-left: 8">
<dl>
<dt>target:</dt>
<dd style="margin-left: 8">
<br><br> Name of the configuration datastore to use as the destination of the copy operation.  </dd>
<dt>source:</dt>
<dd style="margin-left: 8">
<br><br> Name of the configuration datastore to use as the source of the copy operation, or the &lt;config&gt; element containing the complete configuration to copy.  </dd>
</dl>
<p> </p>
</dd>
<dt>Positive Response:</dt>
<dd style="margin-left: 8">
<br><br> If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt; is sent that includes an &lt;ok&gt; element.  </dd>
<dt>Negative Response:</dt>
<dd style="margin-left: 8">
<br><br> An &lt;rpc&#8209;error&gt; element is included within the &lt;rpc&#8209;reply&gt; if the request cannot be completed for any reason.  </dd>
<dt>Example:</dt>
<dd style="margin-left: 8"></dd>
</dl>

<p> </p>
<h1 id="rfc.section.7.4">
<a href="#rfc.section.7.4">7.4.</a> &lt;delete&#8209;config&gt;</h1>
<div id="#rfc.figure.31"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;delete-config&gt;
      &lt;target&gt;
        &lt;startup/&gt;
      &lt;/target&gt;
    &lt;/delete-config&gt;
  &lt;/rpc&gt;

   &lt;rpc-reply message-id="101"
        xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
                  </pre>
<p></p>

<dl>
<dt>Description:</dt>
<dd style="margin-left: 8">
<br><br> Delete a configuration datastore. The &lt;running&gt; configuration datastore cannot be deleted.  <br><br> If a NETCONF peer supports <a href="#url">the :url capability</a> <cite title="NONE">[url]</cite>, the &lt;url&gt; element can appear as the &lt;target&gt; parameter.  </dd>
<dt>Parameters:</dt>
<dd style="margin-left: 8">
<dl>
<dt>target:</dt>
<dd style="margin-left: 8">
<br><br> Name of the configuration datastore to delete.  </dd>
</dl>
<p> </p>
</dd>
<dt>Positive Response:</dt>
<dd style="margin-left: 8">
<br><br> If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt; is sent that includes an &lt;ok&gt; element.  </dd>
<dt>Negative Response:</dt>
<dd style="margin-left: 8">
<br><br> An &lt;rpc&#8209;error&gt; element is included within the &lt;rpc&#8209;reply&gt; if the request cannot be completed for any reason.  </dd>
<dt>Example:</dt>
<dd style="margin-left: 8"></dd>
</dl>

<p> </p>
<h1 id="rfc.section.7.5">
<a href="#rfc.section.7.5">7.5.</a> <a href="#lock" id="lock">&lt;lock&gt;</a>
</h1>
<div id="#rfc.figure.32"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;lock&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
    &lt;/lock&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt; &lt;!-- lock succeeded --&gt;
  &lt;/rpc-reply&gt;

                        </pre>
<div id="#rfc.figure.33"></div>
<pre>

  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;lock&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
    &lt;/lock&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;rpc-error&gt; &lt;!-- lock failed --&gt;
      &lt;error-type&gt;protocol&lt;/error-type&gt;
      &lt;error-tag&gt;lock-denied&lt;/error-tag&gt;
      &lt;error-severity&gt;error&lt;/error-severity&gt;
      &lt;error-message&gt;
        Lock failed, lock is already held
      &lt;/error-message&gt;
      &lt;error-info&gt;
        &lt;session-id&gt;454&lt;/session-id&gt;
        &lt;!-- lock is held by NETCONF session 454 --&gt;
      &lt;/error-info&gt;
    &lt;/rpc-error&gt;
  &lt;/rpc-reply&gt;
                        </pre>
<p></p>

<dl>
<dt>Description:</dt>
<dd style="margin-left: 8">
<br><br> The lock operation allows the client to lock the entire configuration datastore system of a device. Such locks are intended to be short-lived and allow a client to make a change without fear of interaction with other NETCONF clients, non-NETCONF clients (e.g., SNMP and command line interface (CLI) scripts), and human users.  <br><br> An attempt to lock the configuration datastore MUST fail if an existing session or other entity holds a lock on any portion of the lock target.  <br><br> When the lock is acquired, the server MUST prevent any changes to the locked resource other than those requested by this session.  SNMP and CLI requests to modify the resource MUST fail with an appropriate error.  <br><br> The duration of the lock is defined as beginning when the lock is acquired and lasting until either the lock is released or the NETCONF session closes. The session closure can be explicitly performed by the client, or implicitly performed by the server based on criteria such as failure of the underlying transport, or simple inactivity timeout. This criteria is dependent on the implementation and the underlying transport.  <br><br> The lock operation takes a mandatory parameter, target.  The target parameter names the configuration datastore that will be locked.  When a lock is active, using the &lt;edit&#8209;config&gt; operation on the locked configuration datastore and using the locked configuration as a target of the &lt;copy&#8209;config&gt; operation will be disallowed by any other NETCONF session.  Additionally, the system will ensure that these locked configuration resources will not be modified by other non-NETCONF management operations such as SNMP and CLI. The &lt;kill&#8209;session&gt; operation can be used to force the release of a lock owned by another NETCONF session.  It is beyond the scope of this document to define how to break locks held by other entities.  </dd>
<dt></dt>
<dd style="margin-left: 8">A lock MUST NOT be granted if either of the following conditions is true: <ul>
<li>A lock is already held by any NETCONF session or another entity.  </li>
<li>The target configuration is &lt;candidate&gt;, it has already been modified, and these changes have not been committed or rolled back.  </li>
</ul>
<p> </p>
</dd>
<dt></dt>
<dd style="margin-left: 8">The server MUST respond with either an &lt;ok&gt; element or an &lt;rpc&#8209;error&gt;.  </dd>
<dt></dt>
<dd style="margin-left: 8">A lock will be released by the system if the session holding the lock is terminated for any reason.  </dd>
<dt>Parameters:</dt>
<dd style="margin-left: 8">
<dl>
<dt>target:</dt>
<dd style="margin-left: 8">
<br><br> Name of the configuration datastore to lock.  </dd>
</dl>
<p> </p>
</dd>
<dt>Positive Response:</dt>
<dd style="margin-left: 8">
<br><br> If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt; is sent that contains an &lt;ok&gt; element.  </dd>
<dt>Negative Response:</dt>
<dd style="margin-left: 8">
<br><br> An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt; if the request cannot be completed for any reason.  <br><br> If the lock is already held, the &lt;error&#8209;tag&gt; element will be "lock&#8209;denied" and the &lt;error&#8209;info&gt; element will include the &lt;session&#8209;id&gt; of the lock owner. If the lock is held by a non-NETCONF entity, a &lt;session&#8209;id&gt; of 0 (zero) is included.  Note that any other entity performing a lock on even a partial piece of a target will prevent a NETCONF lock (which is global) from being obtained on that target.  </dd>
<dt>Example:</dt>
<dd style="margin-left: 8">
<br><br> The following example shows a successful acquisition of a lock.  </dd>
<dt>Example:</dt>
<dd style="margin-left: 8">
<br><br> The following example shows a failed attempt to acquire a lock when the lock is already in use.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.7.6">
<a href="#rfc.section.7.6">7.6.</a> &lt;unlock&gt;</h1>
<div id="#rfc.figure.34"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;unlock&gt;
      &lt;target&gt;
       &lt;running/&gt;
      &lt;/target&gt;
    &lt;/unlock&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
                  </pre>
<p></p>

<dl>
<dt>Description:</dt>
<dd style="margin-left: 8">
<br><br> The unlock operation is used to release a configuration lock, previously obtained with the &lt;lock&gt; operation.  <br><br> An unlock operation will not succeed if any of the following conditions are true: <ul>
<li>the specified lock is not currently active</li>
<li>the session issuing the &lt;unlock&gt; operation is not the same session that obtained the lock</li>
</ul>
<p> </p>
<br><br> The server MUST respond with either an &lt;ok&gt; element or an &lt;rpc&#8209;error&gt;.  </dd>
<dt>Parameters:</dt>
<dd style="margin-left: 8">
<dl>
<dt>target:</dt>
<dd style="margin-left: 8">
<br><br> Name of the configuration datastore to unlock.  <br><br> A NETCONF client is not permitted to unlock a configuration datastore that it did not lock.  </dd>
</dl>
<p> </p>
</dd>
<dt>Positive Response:</dt>
<dd style="margin-left: 8">
<br><br> If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt; is sent that contains an &lt;ok&gt; element.  </dd>
<dt>Negative Response:</dt>
<dd style="margin-left: 8">
<br><br> An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt; if the request cannot be completed for any reason.  </dd>
<dt>Example:</dt>
<dd style="margin-left: 8"></dd>
</dl>

<p> </p>
<h1 id="rfc.section.7.7">
<a href="#rfc.section.7.7">7.7.</a> &lt;get&gt;</h1>
<div id="#rfc.figure.35"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/stats"&gt;
          &lt;interfaces&gt;
            &lt;interface&gt;
              &lt;ifName&gt;eth0&lt;/ifName&gt;
            &lt;/interface&gt;
          &lt;/interfaces&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/stats"&gt;
        &lt;interfaces&gt;
          &lt;interface&gt;
            &lt;ifName&gt;eth0&lt;/ifName&gt;
            &lt;ifInOctets&gt;45621&lt;/ifInOctets&gt;
            &lt;ifOutOctets&gt;774344&lt;/ifOutOctets&gt;
          &lt;/interface&gt;
        &lt;/interfaces&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
                  </pre>
<p></p>

<dl>
<dt>Description:</dt>
<dd style="margin-left: 8">
<br><br> Retrieve running configuration and device state information.  </dd>
<dt>Parameters:</dt>
<dd style="margin-left: 8">
<dl>
<dt>filter:</dt>
<dd style="margin-left: 8">
<br><br> This parameter specifies the portion of the system configuration and state data to retrieve. If this parameter is not present, all the device configuration and state information is returned.  <br><br> The filter element MAY optionally contain a "type" attribute.  This attribute indicates the type of filtering syntax used within the filter element. The default filtering mechanism in NETCONF is referred to as subtree filtering and is described in <a href="#subtree">Section 6</a>. The value "subtree" explicitly identifies this type of filtering.  <br><br> If the NETCONF peer supports <a href="#xpath">the :xpath capability</a> <cite title="NONE">[xpath]</cite>, the value "xpath" MAY be used to indicate that the select attribute of the filter element contains an XPath expression.  </dd>
</dl>
<p> </p>
</dd>
<dt>Positive Response:</dt>
<dd style="margin-left: 8">
<br><br> If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt; is sent.  The &lt;data&gt; section contains the appropriate subset.  </dd>
<dt>Negative Response:</dt>
<dd style="margin-left: 8">
<br><br> An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt; if the request cannot be completed for any reason.  </dd>
<dt>Example:</dt>
<dd style="margin-left: 8"></dd>
</dl>

<p> </p>
<h1 id="rfc.section.7.8">
<a href="#rfc.section.7.8">7.8.</a> &lt;close-session&gt;</h1>
<div id="#rfc.figure.36"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;close-session/&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
                  </pre>
<p></p>

<dl>
<dt>Description:</dt>
<dd style="margin-left: 8">
<br><br> Request graceful termination of a NETCONF session.  <br><br> When a NETCONF server receives a &lt;close&#8209;session&gt; request, it will gracefully close the session.  The server will release any locks and resources associated with the session and gracefully close any associated connections.  Any NETCONF requests received after a &lt;close&#8209;session&gt; request will be ignored.  </dd>
<dt>Positive Response:</dt>
<dd style="margin-left: 8">
<br><br> If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt; is sent that includes an &lt;ok&gt; element.  </dd>
<dt>Negative Response:</dt>
<dd style="margin-left: 8">
<br><br> An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt; if the request cannot be completed for any reason.  </dd>
<dt>Example:</dt>
<dd style="margin-left: 8"></dd>
</dl>

<p> </p>
<h1 id="rfc.section.7.9">
<a href="#rfc.section.7.9">7.9.</a> &lt;kill-session&gt;</h1>
<div id="#rfc.figure.37"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;kill-session&gt;
      &lt;session-id&gt;4&lt;/session-id&gt;
    &lt;/kill-session&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
                  </pre>
<p></p>

<dl>
<dt>Description:</dt>
<dd style="margin-left: 8">
<br><br> Force the termination of a NETCONF session.  <br><br> When a NETCONF entity receives a &lt;kill&#8209;session&gt; request for an open session, it will abort any operations currently in process, release any locks and resources associated with the session, and close any associated connections.  <br><br> If a NETCONF server receives a &lt;kill&#8209;session&gt; request while processing a confirmed commit (<a href="#confirmed">Section 8.4</a>), it MUST restore the configuration to its state before the confirmed commit was issued.  <br><br> Otherwise, the &lt;kill&#8209;session&gt; operation does not roll back configuration or other device state modifications made by the entity holding the lock.  </dd>
<dt>Parameters:</dt>
<dd style="margin-left: 8">
<dl>
<dt>session-id:</dt>
<dd style="margin-left: 8">
<br><br> Session identifier of the NETCONF session to be terminated.  If this value is equal to the current session ID, an "invalid&#8209;value" error is returned.  </dd>
</dl>
<p> </p>
</dd>
<dt>Positive Response:</dt>
<dd style="margin-left: 8">
<br><br> If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt; is sent that includes an &lt;ok&gt; element.  </dd>
<dt>Negative Response:</dt>
<dd style="margin-left: 8">
<br><br> An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt; if the request cannot be completed for any reason.  </dd>
<dt>Example:</dt>
<dd style="margin-left: 8"></dd>
</dl>

<p> </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#capabilities" id="capabilities">Capabilities</a>
</h1>
<p id="rfc.section.8.p.1">This section defines a set of capabilities that a client or a server MAY implement.  Each peer advertises its capabilities by sending them during an initial capabilities exchange. Each peer needs to understand only those capabilities that it might use and MUST ignore any capability received from the other peer that it does not require or does not understand.  </p>
<p id="rfc.section.8.p.2">Additional capabilities can be defined using the template in <a href="#capabilityTemplate">Appendix Appendix D</a>.  Future capability definitions can be published as standards by standards bodies or published as proprietary extensions.  </p>
<p id="rfc.section.8.p.3">A NETCONF capability is identified with a URI.  The base capabilities are defined using URNs following the method described in <a href="#RFC3553">RFC 3553</a> <cite title="NONE">[RFC3553]</cite>.  Capabilities defined in this document have the following format: </p>

<ul class="empty"><li>urn:ietf:params:netconf:capability:{name}:1.x</li></ul>

<p> where {name} is the name of the capability. Capabilities are often referenced in discussions and email using the shorthand :{name}, or :{name}:{version} if the capability exists in multiple versions. For example, the foo capability would have the formal name "urn:ietf:params:netconf:capability:foo:1.0" and be called ":foo". The shorthand form MUST NOT be used inside the protocol.  </p>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> <a href="#capabilityExchange" id="capabilityExchange">Capabilities Exchange</a>
</h1>
<p id="rfc.section.8.1.p.1">Capabilities are advertised in messages sent by each peer during session establishment. When the NETCONF session is opened, each peer (both client and server) MUST send a &lt;hello&gt; element containing a list of that peer's capabilities.  Each peer MUST send at least the base NETCONF capability, "urn:ietf:params:netconf:base:1.1".  A peer MAY include capabilities for previous NETCONF versions, to indicate that it supports multiple protocol versions.  </p>
<p id="rfc.section.8.1.p.2">Both NETCONF peers MUST verify that the other peer has advertised a common protocol version.  When comparing protocol version capability URIs, only the base part is used, in the event any parameters are encoded at the end of the URI string.  If no protocol version capability in common is found, the NETCONF peer MUST NOT continue the session.  If more than one protocol version URI in common is present, then the highest numbered (most recent) protocol version MUST be used by both peers.  </p>
<p id="rfc.section.8.1.p.3">A server sending the &lt;hello&gt; element MUST include a &lt;session&#8209;id&gt; element containing the session ID for this NETCONF session.  A client sending the &lt;hello&gt; element MUST NOT include a &lt;session&#8209;id&gt; element.  </p>
<p id="rfc.section.8.1.p.4">A server receiving a &lt;session&#8209;id&gt; element MUST close the NETCONF session.  Similarly, a client that does not receive a &lt;session&#8209;id&gt; element in the server's &lt;hello&gt; message MUST close the NETCONF session.  </p>
<p id="rfc.section.8.1.p.5">In the following example, a server advertises the base NETCONF capability, one NETCONF capability defined in the base NETCONF document, and one implementation-specific capability.  </p>
<div id="#rfc.figure.38"></div>
<pre>
&lt;hello xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
  &lt;capabilities&gt;
    &lt;capability&gt;
      urn:ietf:params:netconf:base:1.1
    &lt;/capability&gt;
    &lt;capability&gt;
      urn:ietf:params:netconf:capability:startup:1.0
    &lt;/capability&gt;
    &lt;capability&gt;
      http://example.net/router/2.3/myfeature
    &lt;/capability&gt;
  &lt;/capabilities&gt;
  &lt;session-id&gt;4&lt;/session-id&gt;
&lt;/hello&gt;
            </pre>
<p id="rfc.section.8.1.p.6">Each peer sends its &lt;hello&gt; element simultaneously as soon as the connection is open. A peer MUST NOT wait to receive the capability set from the other side before sending its own set.  </p>
<h1 id="rfc.section.8.2">
<a href="#rfc.section.8.2">8.2.</a> Writable-Running Capability</h1>
<h1 id="rfc.section.8.2.1">
<a href="#rfc.section.8.2.1">8.2.1.</a> Description</h1>
<p id="rfc.section.8.2.1.p.1">The :writable-running capability indicates that the device supports direct writes to the &lt;running&gt; configuration datastore. In other words, the device supports edit-config and copy-config operations where the &lt;running&gt; configuration is the target.</p>
<h1 id="rfc.section.8.2.2">
<a href="#rfc.section.8.2.2">8.2.2.</a> Dependencies</h1>
<p id="rfc.section.8.2.2.p.1">None.</p>
<h1 id="rfc.section.8.2.3">
<a href="#rfc.section.8.2.3">8.2.3.</a> Capability Identifier</h1>
<p id="rfc.section.8.2.3.p.1">The :writable-running capability is identified by the following capability string: </p>

<ul class="empty"><li>urn:ietf:params:netconf:capability:writable-running:1.0</li></ul>

<p> </p>
<h1 id="rfc.section.8.2.4">
<a href="#rfc.section.8.2.4">8.2.4.</a> New Operations</h1>
<p id="rfc.section.8.2.4.p.1">None.</p>
<h1 id="rfc.section.8.2.5">
<a href="#rfc.section.8.2.5">8.2.5.</a> Modifications to Existing Operations</h1>
<h1 id="rfc.section.8.2.5.1">
<a href="#rfc.section.8.2.5.1">8.2.5.1.</a> &lt;edit&#8209;config&gt;</h1>
<p id="rfc.section.8.2.5.1.p.1">The :writable-running capability modifies the &lt;edit&#8209;config&gt; operation to accept the &lt;running&gt; element as a &lt;target&gt;.  </p>
<h1 id="rfc.section.8.2.5.2">
<a href="#rfc.section.8.2.5.2">8.2.5.2.</a> &lt;copy&#8209;config&gt;</h1>
<p id="rfc.section.8.2.5.2.p.1">The :writable-running capability modifies the &lt;copy&#8209;config&gt; operation to accept the &lt;running&gt; element as a &lt;target&gt;.  </p>
<h1 id="rfc.section.8.3">
<a href="#rfc.section.8.3">8.3.</a> <a href="#candidate" id="candidate">Candidate Configuration Capability</a>
</h1>
<h1 id="rfc.section.8.3.1">
<a href="#rfc.section.8.3.1">8.3.1.</a> Description</h1>
<p id="rfc.section.8.3.1.p.1">The candidate configuration capability, :candidate, indicates that the device supports a candidate configuration datastore, which is used to hold configuration data that can be manipulated without impacting the device's current configuration.  The candidate configuration is a full configuration data set that serves as a work place for creating and manipulating configuration data.  Additions, deletions, and changes can be made to this data to construct the desired configuration data. A &lt;commit&gt; operation MAY be performed at any time that causes the device's running configuration to be set to the value of the candidate configuration.  </p>
<p id="rfc.section.8.3.1.p.2">The &lt;commit&gt; operation effectively sets the running configuration to the current contents of the candidate configuration.  While it could be modeled as a simple copy, it is done as a distinct operation for a number of reasons.  In keeping high-level concepts as first class operations, we allow developers to see more clearly both what the client is requesting and what the server must perform.  This keeps the intentions more obvious, the special cases less complex, and the interactions between operations more straightforward.  For example, the <a href="#confirmed">:confirmed-commit:1.1 capability </a> <cite title="NONE">[confirmed]</cite> would make no sense as a "copy confirmed" operation.  </p>
<p id="rfc.section.8.3.1.p.3">The candidate configuration can be shared among multiple sessions. Unless a client has specific information that the candidate configuration is not shared, it MUST assume that other sessions are able to modify the candidate configuration at the same time. It is therefore prudent for a client to lock the candidate configuration before modifying it.  </p>
<p id="rfc.section.8.3.1.p.4">The client can discard any uncommitted changes to the candidate configuration by executing the &lt;discard&#8209;changes&gt; operation.  This operation reverts the contents of the candidate configuration to the contents of the running configuration.  </p>
<h1 id="rfc.section.8.3.2">
<a href="#rfc.section.8.3.2">8.3.2.</a> Dependencies</h1>
<p id="rfc.section.8.3.2.p.1">None.</p>
<h1 id="rfc.section.8.3.3">
<a href="#rfc.section.8.3.3">8.3.3.</a> Capability Identifier</h1>
<p id="rfc.section.8.3.3.p.1">The :candidate capability is identified by the following capability string: </p>

<ul class="empty"><li>urn:ietf:params:netconf:capability:candidate:1.0</li></ul>

<p> </p>
<h1 id="rfc.section.8.3.4">
<a href="#rfc.section.8.3.4">8.3.4.</a> New Operations</h1>
<h1 id="rfc.section.8.3.4.1">
<a href="#rfc.section.8.3.4.1">8.3.4.1.</a> &lt;commit&gt;</h1>
<div id="#rfc.figure.39"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;commit/&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
                  </pre>
<p></p>

<dl>
<dt>Description:</dt>
<dd style="margin-left: 8">
<ul class="empty">
<li>When a candidate configuration's content is complete, the configuration data can be committed, publishing the data set to the rest of the device and requesting the device to conform to the behavior described in the new configuration.  </li>
<li>To commit the candidate configuration as the device's new current configuration, use the &lt;commit&gt; operation.  </li>
<li>The &lt;commit&gt; operation instructs the device to implement the configuration data contained in the candidate configuration.  If the device is unable to commit all of the changes in the candidate configuration datastore, then the running configuration MUST remain unchanged.  If the device does succeed in committing, the running configuration MUST be updated with the contents of the candidate configuration.  </li>
<li>If the running or candidate configuration is currently locked by a different session, the  &lt;commit&gt; operation MUST fail with an &lt;error&#8209;tag&gt; value of "in&#8209;use".  </li>
<li>If the system does not have the :candidate capability, the &lt;commit&gt; operation is not available.  </li>
</ul>
<p> </p>
</dd>
<dt>Positive Response:</dt>
<dd style="margin-left: 8">
<ul class="empty"><li>If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt; is sent that contains an &lt;ok&gt; element.  </li></ul>
<p> </p>
</dd>
<dt>Negative Response:</dt>
<dd style="margin-left: 8">
<ul class="empty"><li>An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt; if the request cannot be completed for any reason.  </li></ul>
<p> </p>
</dd>
<dt>Example:</dt>
<dd style="margin-left: 8"></dd>
</dl>

<p> </p>
<h1 id="rfc.section.8.3.4.2">
<a href="#rfc.section.8.3.4.2">8.3.4.2.</a> <a href="#discard-changes" id="discard-changes">&lt;discard-changes&gt;</a>
</h1>
<div id="#rfc.figure.40"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;discard-changes/&gt;
  &lt;/rpc&gt;
                  </pre>
<p id="rfc.section.8.3.4.2.p.1">If the client decides that the candidate configuration is not to be committed, the &lt;discard&#8209;changes&gt; operation can be used to revert the candidate configuration to the current running configuration.  </p>
<h1 id="rfc.section.8.3.5">
<a href="#rfc.section.8.3.5">8.3.5.</a> Modifications to Existing Operations</h1>
<h1 id="rfc.section.8.3.5.1">
<a href="#rfc.section.8.3.5.1">8.3.5.1.</a> &lt;get&#8209;config&gt;, &lt;edit&#8209;config&gt;, &lt;copy&#8209;config&gt;, and &lt;validate&gt;</h1>
<div id="#rfc.figure.41"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt; &lt;!-- any NETCONF operation --&gt;
      &lt;source&gt;
        &lt;candidate/&gt;
      &lt;/source&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;
                </pre>
<p id="rfc.section.8.3.5.1.p.1">The candidate configuration can be used as a source or target of any &lt;get&#8209;config&gt;, &lt;edit&#8209;config&gt;, &lt;copy&#8209;config&gt;, or &lt;validate&gt; operation as a &lt;source&gt; or &lt;target&gt; parameter.  The &lt;candidate&gt; element is used to indicate the candidate configuration: </p>
<h1 id="rfc.section.8.3.5.2">
<a href="#rfc.section.8.3.5.2">8.3.5.2.</a> &lt;lock&gt; and &lt;unlock&gt;</h1>
<div id="#rfc.figure.42"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;lock&gt;
      &lt;target&gt;
        &lt;candidate/&gt;
      &lt;/target&gt;
    &lt;/lock&gt;
  &lt;/rpc&gt;
                  </pre>
<div id="#rfc.figure.43"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;unlock&gt;
      &lt;target&gt;
        &lt;candidate/&gt;
      &lt;/target&gt;
    &lt;/unlock&gt;
  &lt;/rpc&gt;
                  </pre>
<p id="rfc.section.8.3.5.2.p.1">The candidate configuration can be locked using the &lt;lock&gt; operation with the &lt;candidate&gt; element as the &lt;target&gt; parameter: </p>
<p id="rfc.section.8.3.5.2.p.2">When a client fails with outstanding changes to the candidate configuration, recovery can be difficult. To facilitate easy recovery, any outstanding changes are discarded when the lock is released, whether explicitly with the &lt;unlock&gt; operation or implicitly from session failure.  </p>
<h1 id="rfc.section.8.4">
<a href="#rfc.section.8.4">8.4.</a> <a href="#confirmed" id="confirmed">Confirmed Commit Capability</a>
</h1>
<h1 id="rfc.section.8.4.1">
<a href="#rfc.section.8.4.1">8.4.1.</a> Description</h1>
<p id="rfc.section.8.4.1.p.1">The :confirmed-commit:1.1 capability indicates that the server will support the &lt;cancel&#8209;commit&gt; operation and the &lt;confirmed&gt;, &lt;confirm&#8209;timeout&gt;, &lt;persist&gt;, and &lt;persist&#8209;id&gt; parameters for the &lt;commit&gt; operation. See <a href="#candidate">Section 8.3</a> for further details on the &lt;commit&gt; operation.  </p>
<p id="rfc.section.8.4.1.p.2">A confirmed commit operation MUST be reverted if a confirming commit is not issued within 600 seconds (10 minutes).  The confirming commit is a commit operation without the &lt;confirmed&gt; parameter.  The timeout period can be adjusted with the &lt;confirm&#8209;timeout&gt; parameter.  If a follow-up confirmed commit operation is issued before the timer expires, the timer is reset to the new value (600 seconds by default).  Both the confirming commit and a follow-up confirmed commit operation MAY introduce additional changes to the configuration.  </p>
<p id="rfc.section.8.4.1.p.3">If the &lt;persist&gt; element is not given in the confirmed commit operation, any follow-up commit and the confirming commit MUST be issued on the same session that issued the confirmed commit.  If the &lt;persist&gt; element is given in the confirmed commit operation, a follow-up commit and the confirming commit can be given on any session, and they MUST include a &lt;persist&#8209;id&gt; element with a value equal to the given value of the &lt;persist&gt; element.  </p>
<p id="rfc.section.8.4.1.p.4">If the server also advertises the :startup capability, a &lt;copy&#8209;config&gt; from running to startup is also necessary to save the changes to startup.  </p>
<p id="rfc.section.8.4.1.p.5">If the session issuing the confirmed commit is terminated for any reason before the confirm timeout expires, the server MUST restore the configuration to its state before the confirmed commit was issued, unless the confirmed commit also included a &lt;persist&gt; element.  </p>
<p id="rfc.section.8.4.1.p.6">If the device reboots for any reason before the confirm timeout expires, the server MUST restore the configuration to its state before the confirmed commit was issued.  </p>
<p id="rfc.section.8.4.1.p.7">If a confirming commit is not issued, the device will revert its configuration to the state prior to the issuance of the confirmed commit.  To cancel a confirmed commit and revert changes without waiting for the confirm timeout to expire, the client can explicitly restore the configuration to its state before the confirmed commit was issued, by using the &lt;cancel&#8209;commit&gt; operation.  </p>
<p id="rfc.section.8.4.1.p.8">For shared configurations, this feature can cause other configuration changes (for example, via other NETCONF sessions) to be inadvertently altered or removed, unless the configuration locking feature is used (in other words, the lock is obtained before the edit-config operation is started). Therefore, it is strongly suggested that in order to use this feature with shared configuration datastores, configuration locking SHOULD also be used.  </p>
<p id="rfc.section.8.4.1.p.9">Version 1.0 of this capability was defined in <a href="#RFC4741">[RFC4741]</a>.  Version 1.1 is defined in this document, and extends version 1.0 by adding a new operation, &lt;cancel&#8209;commit&gt;, and two new optional parameters, &lt;persist&gt; and &lt;persist&#8209;id&gt;. For backwards compatibility with old clients, servers confirming to this specification MAY advertise version 1.0 in addition to version 1.1.  </p>
<h1 id="rfc.section.8.4.2">
<a href="#rfc.section.8.4.2">8.4.2.</a> Dependencies</h1>
<p id="rfc.section.8.4.2.p.1">The :confirmed-commit:1.1 capability is only relevant if the :candidate capability is also supported.</p>
<h1 id="rfc.section.8.4.3">
<a href="#rfc.section.8.4.3">8.4.3.</a> Capability Identifier</h1>
<p id="rfc.section.8.4.3.p.1">The :confirmed-commit:1.1 capability is identified by the following capability string: </p>

<ul class="empty"><li>urn:ietf:params:netconf:capability:confirmed-commit:1.1</li></ul>

<p> </p>
<h1 id="rfc.section.8.4.4">
<a href="#rfc.section.8.4.4">8.4.4.</a> New Operations</h1>
<h1 id="rfc.section.8.4.4.1">
<a href="#rfc.section.8.4.4.1">8.4.4.1.</a> &lt;cancel-commit&gt;</h1>
<div id="#rfc.figure.44"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;commit&gt;
      &lt;confirmed/&gt;
    &lt;/commit&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;

  &lt;rpc message-id="102"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;cancel-commit/&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="102"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
                  </pre>
<p></p>

<dl>
<dt>Description:</dt>
<dd style="margin-left: 8">
<ul class="empty"><li>Cancels an ongoing confirmed commit.  If the &lt;persist&#8209;id&gt; parameter is not given, the &lt;cancel&#8209;commit&gt; operation MUST be issued on the same session that issued the confirmed commit.  </li></ul>
<p> </p>
</dd>
<dt>Parameters:</dt>
<dd style="margin-left: 8">
<dl>
<dt>persist-id:</dt>
<dd style="margin-left: 8">
<ul class="empty"><li>Cancels a persistent confirmed commit.  The value MUST be equal to the value given in the &lt;persist&gt; parameter to the commit operation.  If the value does not match, the operation fails with an "invalid-value" error.  </li></ul>
<p> </p>
</dd>
</dl>
<p> </p>
</dd>
<dt>Positive Response:</dt>
<dd style="margin-left: 8">
<ul class="empty"><li>If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt; is sent that contains an &lt;ok&gt; element.  </li></ul>
<p> </p>
</dd>
<dt>Negative Response:</dt>
<dd style="margin-left: 8">
<ul class="empty"><li>An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt; if the request cannot be completed for any reason.  </li></ul>
<p> </p>
</dd>
<dt>Example:</dt>
<dd style="margin-left: 8"></dd>
</dl>

<p> </p>
<h1 id="rfc.section.8.4.5">
<a href="#rfc.section.8.4.5">8.4.5.</a> Modifications to Existing Operations</h1>
<h1 id="rfc.section.8.4.5.1">
<a href="#rfc.section.8.4.5.1">8.4.5.1.</a> &lt;commit&gt;</h1>
<p id="rfc.section.8.4.5.1.p.1">The :confirmed-commit:1.1 capability allows 4 additional parameters to the &lt;commit&gt; operation.</p>
<div id="#rfc.figure.45"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;commit&gt;
      &lt;confirmed/&gt;
      &lt;confirm-timeout&gt;120&lt;/confirm-timeout&gt;
    &lt;/commit&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
                   </pre>
<div id="#rfc.figure.46"></div>
<pre>
  &lt;!-- start a persistent confirmed-commit --&gt;
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;commit&gt;
      &lt;confirmed/&gt;
      &lt;persist&gt;IQ,d4668&lt;/persist&gt;
    &lt;/commit&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;

  &lt;!-- confirm the persistent confirmed-commit,
       possibly from another session --&gt;
  &lt;rpc message-id="102"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;commit&gt;
      &lt;persist-id&gt;IQ,d4668&lt;/persist-id&gt;
    &lt;/commit&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="102"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;


                   </pre>
<p></p>

<dl>
<dt>Parameters:</dt>
<dd style="margin-left: 8">
<dl>
<dt>confirmed:</dt>
<dd style="margin-left: 8">
<ul class="empty"><li>Perform a confirmed commit operation.  </li></ul>
<p> </p>
</dd>
<dt>confirm-timeout:</dt>
<dd style="margin-left: 8">
<ul class="empty"><li>Timeout period for confirmed commit, in seconds.  If unspecified, the confirm timeout defaults to 600 seconds.  </li></ul>
<p> </p>
</dd>
<dt>persist:</dt>
<dd style="margin-left: 8">
<ul class="empty"><li>Make the confirmed commit survive a session termination, and set a token on the ongoing confirmed commit.  </li></ul>
<p> </p>
</dd>
<dt>persist-id:</dt>
<dd style="margin-left: 8">
<ul class="empty"><li>Used to issue a follow-up confirmed commit or a confirming commit from any session, with the token from the previous commit operation.  </li></ul>
<p> </p>
</dd>
</dl>
<p> </p>
</dd>
<dt>Example:</dt>
<dd style="margin-left: 8"></dd>
<dt>Example:</dt>
<dd style="margin-left: 8"></dd>
</dl>

<p> </p>
<h1 id="rfc.section.8.5">
<a href="#rfc.section.8.5">8.5.</a> <a href="#rollback-on-error" id="rollback-on-error">Rollback on Error Capability</a>
</h1>
<h1 id="rfc.section.8.5.1">
<a href="#rfc.section.8.5.1">8.5.1.</a> Description</h1>
<p id="rfc.section.8.5.1.p.1">This capability indicates that the server will support the "rollback&#8209;on&#8209;error" value in the &lt;error&#8209;option&gt; parameter to the &lt;edit&#8209;config&gt; operation.  </p>
<p id="rfc.section.8.5.1.p.2">For shared configurations, this feature can cause other configuration changes (for example, via other NETCONF sessions) to be inadvertently altered or removed, unless the configuration locking feature is used (in other words, the lock is obtained before the edit-config operation is started). Therefore, it is strongly suggested that in order to use this feature with shared configuration datastores, configuration locking also be used.  </p>
<h1 id="rfc.section.8.5.2">
<a href="#rfc.section.8.5.2">8.5.2.</a> Dependencies</h1>
<p id="rfc.section.8.5.2.p.1">None</p>
<h1 id="rfc.section.8.5.3">
<a href="#rfc.section.8.5.3">8.5.3.</a> Capability Identifier</h1>
<p id="rfc.section.8.5.3.p.1">The :rollback-on-error capability is identified by the following capability string: </p>

<ul class="empty"><li>urn:ietf:params:netconf:capability:rollback-on-error:1.0</li></ul>

<p> </p>
<h1 id="rfc.section.8.5.4">
<a href="#rfc.section.8.5.4">8.5.4.</a> New Operations</h1>
<p id="rfc.section.8.5.4.p.1">None.</p>
<h1 id="rfc.section.8.5.5">
<a href="#rfc.section.8.5.5">8.5.5.</a> Modifications to Existing Operations</h1>
<h1 id="rfc.section.8.5.5.1">
<a href="#rfc.section.8.5.5.1">8.5.5.1.</a> &lt;edit&#8209;config&gt;</h1>
<p id="rfc.section.8.5.5.1.p.1">The :rollback-on-error capability allows the "rollback&#8209;on&#8209;error" value to the &lt;error&#8209;option&gt; parameter on the &lt;edit&#8209;config&gt; operation.</p>
<div id="#rfc.figure.47"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;edit-config&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
      &lt;error-option&gt;rollback-on-error&lt;/error-option&gt;
      &lt;config&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;interface&gt;
            &lt;name&gt;Ethernet0/0&lt;/name&gt;
            &lt;mtu&gt;100000&lt;/mtu&gt;
          &lt;/interface&gt;
        &lt;/top&gt;
      &lt;/config&gt;
    &lt;/edit-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
                   </pre>
<p></p>
<h1 id="rfc.section.8.6">
<a href="#rfc.section.8.6">8.6.</a> <a href="#validate" id="validate">Validate Capability</a>
</h1>
<h1 id="rfc.section.8.6.1">
<a href="#rfc.section.8.6.1">8.6.1.</a> Description</h1>
<p id="rfc.section.8.6.1.p.1">Validation consists of checking a complete configuration for syntactical and semantic errors before applying the configuration to the device.  </p>
<p id="rfc.section.8.6.1.p.2">If this capability is advertised, the device supports the &lt;validate&gt; protocol operation and checks at least for syntax errors. In addition, this capability supports the test-option parameter to the &lt;edit&#8209;config&gt; operation and, when it is provided, checks at least for syntax errors.  </p>
<p id="rfc.section.8.6.1.p.3">Version 1.0 of this capability was defined in <a href="#RFC4741">[RFC4741]</a>.  Version 1.1 is defined in this document, and extends version 1.0 by adding a new value, "test-only", to the test-option parameter of the edit-config operation.  For backwards compatibility with old clients, servers confirming to this specification MAY advertise version 1.0 in addition to version 1.1.  </p>
<h1 id="rfc.section.8.6.2">
<a href="#rfc.section.8.6.2">8.6.2.</a> Dependencies</h1>
<p id="rfc.section.8.6.2.p.1">None.</p>
<h1 id="rfc.section.8.6.3">
<a href="#rfc.section.8.6.3">8.6.3.</a> Capability Identifier</h1>
<p id="rfc.section.8.6.3.p.1">The :validate:1.1 capability is identified by the following capability string: </p>

<ul class="empty"><li>urn:ietf:params:netconf:capability:validate:1.1</li></ul>

<p> </p>
<h1 id="rfc.section.8.6.4">
<a href="#rfc.section.8.6.4">8.6.4.</a> New Operations</h1>
<h1 id="rfc.section.8.6.4.1">
<a href="#rfc.section.8.6.4.1">8.6.4.1.</a> &lt;validate&gt;</h1>
<div id="#rfc.figure.48"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;validate&gt;
      &lt;source&gt;
        &lt;candidate/&gt;
      &lt;/source&gt;
    &lt;/validate&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
                   </pre>
<p></p>

<dl>
<dt>Description:</dt>
<dd style="margin-left: 8">
<ul class="empty"><li>This protocol operation validates the contents of the specified configuration.  </li></ul>
<p> </p>
</dd>
<dt>Parameters:</dt>
<dd style="margin-left: 8">
<dl>
<dt>source:</dt>
<dd style="margin-left: 8">
<ul class="empty"><li>Name of the configuration datastore to validate, such as &lt;candidate&gt;, or the &lt;config&gt; element containing the complete configuration to validate.  </li></ul>
<p> </p>
</dd>
</dl>
<p> </p>
</dd>
<dt>Positive Response:</dt>
<dd style="margin-left: 8">
<ul class="empty"><li>If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt; is sent that contains an &lt;ok&gt; element.  </li></ul>
<p> </p>
</dd>
<dt>Negative Response:</dt>
<dd style="margin-left: 8">
<ul class="empty">
<li>An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt; if the request cannot be completed for any reason.  </li>
<li>A validate operation can fail for any of the following reasons: <ul>
<li>Syntax errors</li>
<li>Missing parameters</li>
<li>References to undefined configuration data</li>
</ul>
<p> </p>
</li>
</ul>
<p> </p>
</dd>
<dt>Example:</dt>
<dd style="margin-left: 8"></dd>
</dl>

<p> </p>
<h1 id="rfc.section.8.6.5">
<a href="#rfc.section.8.6.5">8.6.5.</a> Modifications to Existing Operations</h1>
<h1 id="rfc.section.8.6.5.1">
<a href="#rfc.section.8.6.5.1">8.6.5.1.</a> &lt;edit&#8209;config&gt;</h1>
<p id="rfc.section.8.6.5.1.p.1">The :validate:1.1 capability modifies the &lt;edit&#8209;config&gt; operation to accept the &lt;test&#8209;option&gt; parameter.</p>
<h1 id="rfc.section.8.7">
<a href="#rfc.section.8.7">8.7.</a> <a href="#startup" id="startup">Distinct Startup Capability</a>
</h1>
<h1 id="rfc.section.8.7.1">
<a href="#rfc.section.8.7.1">8.7.1.</a> Description</h1>
<p id="rfc.section.8.7.1.p.1">The device supports separate running and startup configuration datastores.  The startup configuration is loaded by the device when it boots.  Operations that affect the running configuration will not be automatically copied to the startup configuration.  An explicit &lt;copy&#8209;config&gt; operation from the &lt;running&gt; to the &lt;startup&gt; is used to update the startup configuration to the current contents of the running configuration.  NETCONF protocol operations refer to the startup datastore using the &lt;startup&gt; element.  </p>
<h1 id="rfc.section.8.7.2">
<a href="#rfc.section.8.7.2">8.7.2.</a> Dependencies</h1>
<p id="rfc.section.8.7.2.p.1">None.</p>
<h1 id="rfc.section.8.7.3">
<a href="#rfc.section.8.7.3">8.7.3.</a> Capability Identifier</h1>
<p id="rfc.section.8.7.3.p.1">The :startup capability is identified by the following capability string: </p>

<ul class="empty"><li>urn:ietf:params:netconf:capability:startup:1.0</li></ul>

<p> </p>
<h1 id="rfc.section.8.7.4">
<a href="#rfc.section.8.7.4">8.7.4.</a> New Operations</h1>
<p id="rfc.section.8.7.4.p.1">None.</p>
<h1 id="rfc.section.8.7.5">
<a href="#rfc.section.8.7.5">8.7.5.</a> Modifications to Existing Operations</h1>
<h1 id="rfc.section.8.7.5.1">
<a href="#rfc.section.8.7.5.1">8.7.5.1.</a> General</h1>
<p id="rfc.section.8.7.5.1.p.1">The :startup capability adds the &lt;startup/&gt; configuration datastore to arguments of several NETCONF operations.  The server MUST support the following additional values: </p>
<div id="#rfc.table.1"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Operation</th>
<th class="left">Parameters</th>
<th class="left">Notes</th>
</tr></thead>
<tbody>
<tr>
<td class="left">&lt;get&#8209;config&gt;</td>
<td class="left">&lt;source&gt;</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">&lt;copy&#8209;config&gt;</td>
<td class="left">&lt;source&gt; &lt;target&gt;</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">&lt;lock&gt;</td>
<td class="left">&lt;target&gt;</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">&lt;unlock&gt;</td>
<td class="left">&lt;target&gt;</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">&lt;validate&gt;</td>
<td class="left">&lt;source&gt;</td>
<td class="left">If :validate:1.1 is advertised</td>
</tr>
<tr>
<td class="left">&lt;delete-config&gt;</td>
<td class="left">&lt;target&gt;</td>
<td class="left">Resets the device to its factory defaults</td>
</tr>
</tbody>
</table>
<div id="#rfc.figure.49"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;copy-config&gt;
      &lt;target&gt;
        &lt;startup/&gt;
      &lt;/target&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
    &lt;/copy-config&gt;
  &lt;/rpc&gt;
                   </pre>
<p id="rfc.section.8.7.5.1.p.2">To save the startup configuration, use the copy-config operation to copy the &lt;running&gt; configuration datastore to the &lt;startup&gt; configuration datastore.  </p>
<h1 id="rfc.section.8.8">
<a href="#rfc.section.8.8">8.8.</a> <a href="#url" id="url">URL Capability</a>
</h1>
<h1 id="rfc.section.8.8.1">
<a href="#rfc.section.8.8.1">8.8.1.</a> Description</h1>
<p id="rfc.section.8.8.1.p.1">The NETCONF peer has the ability to accept the &lt;url&gt; element in &lt;source&gt; and &lt;target&gt; parameters. The capability is further identified by URL arguments indicating the URL schemes supported.  </p>
<h1 id="rfc.section.8.8.2">
<a href="#rfc.section.8.8.2">8.8.2.</a> Dependencies</h1>
<p id="rfc.section.8.8.2.p.1">None.</p>
<h1 id="rfc.section.8.8.3">
<a href="#rfc.section.8.8.3">8.8.3.</a> Capability Identifier</h1>
<p id="rfc.section.8.8.3.p.1">The :url capability is identified by the following capability string: </p>
<p id="rfc.section.8.8.3.p.2">urn:ietf:params:netconf:capability:url:1.0?scheme={name,...}</p>
<p id="rfc.section.8.8.3.p.3">The :url capability URI MUST contain a "scheme" argument assigned a comma-separated list of scheme names indicating which schemes the NETCONF peer supports. For example: </p>

<ul class="empty"><li>urn:ietf:params:netconf:capability:url:1.0?scheme=http,ftp,file</li></ul>

<p> </p>
<h1 id="rfc.section.8.8.4">
<a href="#rfc.section.8.8.4">8.8.4.</a> New Operations</h1>
<p id="rfc.section.8.8.4.p.1">None.</p>
<h1 id="rfc.section.8.8.5">
<a href="#rfc.section.8.8.5">8.8.5.</a> Modifications to Existing Operations</h1>
<h1 id="rfc.section.8.8.5.1">
<a href="#rfc.section.8.8.5.1">8.8.5.1.</a> &lt;edit&#8209;config&gt;</h1>
<p id="rfc.section.8.8.5.1.p.1">The :url capability modifies the &lt;edit&#8209;config&gt; operation to accept the &lt;url&gt; element as an alternative to the &lt;config&gt; parameter.  </p>
<h1 id="rfc.section.8.8.5.2">
<a href="#rfc.section.8.8.5.2">8.8.5.2.</a> &lt;copy&#8209;config&gt;</h1>
<p id="rfc.section.8.8.5.2.p.1">The :url capability modifies the &lt;copy&#8209;config&gt; operation to accept the &lt;url&gt; element as the value of the &lt;source&gt; and the &lt;target&gt; parameters.</p>
<p id="rfc.section.8.8.5.2.p.2">The file that the url refers to contains the complete datastore, encoded in XML under the element "config" in the "urn:ietf:params:xml:ns:netconf:base:1.0" namespace.  </p>
<h1 id="rfc.section.8.8.5.3">
<a href="#rfc.section.8.8.5.3">8.8.5.3.</a> &lt;delete&#8209;config&gt;</h1>
<p id="rfc.section.8.8.5.3.p.1">The :url capability modifies the &lt;delete&#8209;config&gt; operation to accept the &lt;url&gt; element as the value of the &lt;target&gt; parameters.  </p>
<h1 id="rfc.section.8.8.5.4">
<a href="#rfc.section.8.8.5.4">8.8.5.4.</a> &lt;validate&gt;</h1>
<p id="rfc.section.8.8.5.4.p.1">The :url capability modifies the &lt;validate&gt; operation to accept the &lt;url&gt; element as the value of the &lt;source&gt; parameter.</p>
<h1 id="rfc.section.8.9">
<a href="#rfc.section.8.9">8.9.</a> <a href="#xpath" id="xpath">XPath Capability</a>
</h1>
<h1 id="rfc.section.8.9.1">
<a href="#rfc.section.8.9.1">8.9.1.</a> Description</h1>
<p id="rfc.section.8.9.1.p.1">The XPath capability indicates that the NETCONF peer supports the use of XPath expressions in the &lt;filter&gt; element.  XPath is described in <a href="#W3C.REC-xpath-19991116">[W3C.REC-xpath-19991116]</a>.  </p>
<p id="rfc.section.8.9.1.p.2">The data model used in the XPath expression is the same as that used in XPath 1.0 <a href="#W3C.REC-xpath-19991116">[W3C.REC-xpath-19991116]</a>, with the same extension for root node children as used by XSLT 1.0 <a href="#W3C.REC-xslt-19991116">[W3C.REC-xslt-19991116]</a> (section 3.1).  Specifically, it means that the root node MAY have any number of element nodes as its children.  </p>
<p id="rfc.section.8.9.1.p.3">The XPath expression is evaluated in the following context: </p>

<ul>
<li>The set of namespace declarations are those in scope on the filter element.</li>
<li>The set of variable bindings is defined by the data model.  If no such variable bindings are defined, the set is empty.</li>
<li>The function library is the core function library, plus any functions defined by the data model.</li>
<li>The context node is the root node.</li>
</ul>

<p> </p>
<p id="rfc.section.8.9.1.p.4">The XPath expression MUST return a node set.  If it does not return a node set, the operation fails with an "invalid-value" error.  </p>
<p id="rfc.section.8.9.1.p.5">The response message contains the subtrees selected by the filter expression.  For each such subtree, the path from the data model root node down to the subtree, including any elements or attributes necessary to uniquely identify the subtree, are included in the response message. Specific data instances are not duplicated in the respone.  </p>
<h1 id="rfc.section.8.9.2">
<a href="#rfc.section.8.9.2">8.9.2.</a> Dependencies</h1>
<p id="rfc.section.8.9.2.p.1">None.</p>
<h1 id="rfc.section.8.9.3">
<a href="#rfc.section.8.9.3">8.9.3.</a> Capability Identifier</h1>
<p id="rfc.section.8.9.3.p.1">The :xpath capability is identified by the following capability string: </p>

<ul class="empty"><li>urn:ietf:params:netconf:capability:xpath:1.0</li></ul>

<p> </p>
<h1 id="rfc.section.8.9.4">
<a href="#rfc.section.8.9.4">8.9.4.</a> New Operations</h1>
<p id="rfc.section.8.9.4.p.1">None.</p>
<h1 id="rfc.section.8.9.5">
<a href="#rfc.section.8.9.5">8.9.5.</a> Modifications to Existing Operations</h1>
<h1 id="rfc.section.8.9.5.1">
<a href="#rfc.section.8.9.5.1">8.9.5.1.</a> &lt;get&#8209;config&gt; and &lt;get&gt;</h1>
<p id="rfc.section.8.9.5.1.p.1">The :xpath capability modifies the &lt;get&gt; and &lt;get&#8209;config&gt; operations to accept the value "xpath" in the type attribute of the filter element.  When the type attribute is set to "xpath", a select attribute MUST be present on the filter element.  The select attribute will be treated as an XPath expression and used to filter the returned data.  The filter element itself MUST be empty in this case.  </p>
<p id="rfc.section.8.9.5.1.p.2">The XPath result for the select expression MUST be a node-set.  Each node in the node-set MUST correspond to a node in underlying data model.  In order to properly identify each node, the following encoding rules are defined: </p>

<ul>
<li>All ancestor nodes of the result node MUST be encoded first, so the &lt;data&gt; element returned in the reply contains only fully-specified sub-trees, according to the underlying data model.</li>
<li>If any sibling or ancestor nodes of the result node are needed to identify a particular instance within a conceptual data structure, then these nodes MUST also be encoded in the response.  </li>
</ul>

<p> </p>
<div id="#rfc.figure.50"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;!-- get the user named fred --&gt;
      &lt;filter xmlns:t="http://example.com/schema/1.2/config"
              type="xpath"
              select="/t:top/t:users/t:user[t:name='fred']"/&gt;
     &lt;/get-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
             xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
        &lt;users&gt;
          &lt;user&gt;
            &lt;name&gt;fred&lt;/name&gt;
            &lt;company-info&gt;
              &lt;id&gt;2&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
        &lt;/users&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
                   </pre>
<p id="rfc.section.8.9.5.1.p.3">For example: </p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<p id="rfc.section.9.p.1">This section provides security considerations for the base NETCONF message layer and the base operations of the NETCONF protocol.  Security considerations for the NETCONF transports are provided in the transport documents and security considerations for the content manipulated by NETCONF can be found in the documents defining data models.</p>
<p id="rfc.section.9.p.2">This document does not specify an authorization scheme, as such a scheme will likely be tied to a meta-data model or a data model.  Implementors SHOULD provide a comprehensive authorization scheme with NETCONF.  </p>
<p id="rfc.section.9.p.3">Authorization of individual users via the NETCONF server may or may not map 1:1 to other interfaces.  First, the data models might be incompatible.  Second, it could be desirable to authorize based on mechanisms available in the secure transport layer (SSH, BEEP, etc).  </p>
<p id="rfc.section.9.p.4">In addition, operations on configurations could have unintended consequences if those operations are also not guarded by the global lock on the files or objects being operated upon.  For instance, a partially complete access list could be committed from a candidate configuration unbeknownst to the owner of the lock of the candidate configuration, leading to either an insecure or inaccessible device if the lock on the candidate configuration does not also apply to the &lt;copy&#8209;config&gt; operation when applied to it.  </p>
<p id="rfc.section.9.p.5">Configuration information is by its very nature sensitive.  Its transmission in the clear and without integrity checking leaves devices open to classic eavesdropping attacks.  Configuration information often contains passwords, user names, service descriptions, and topological information, all of which are sensitive.  Because of this, this protocol SHOULD be implemented carefully with adequate attention to all manner of attack one might expect to experience with other management interfaces.  </p>
<p id="rfc.section.9.p.6">The protocol, therefore, MUST minimally support options for both confidentiality and authentication.  It is anticipated that the underlying protocol (SSH, BEEP, etc) will provide for both confidentiality and authentication, as is required.  It is further expected that the identity of each end of a NETCONF session will be available to the other in order to determine authorization for any given request.  One could also easily envision additional information, such as transport and encryption methods, being made available for purposes of authorization.  NETCONF itself provide no means to re-authenticate, much less authenticate.  All such actions occur at lower layers.  </p>
<p id="rfc.section.9.p.7">Different environments may well allow different rights prior to and then after authentication.  Thus, an authorization model is not specified in this document.  When an operation is not properly authorized, a simple "access denied" is sufficient.  Note that authorization information can be exchanged in the form of configuration information, which is all the more reason to ensure the security of the connection.  </p>
<p id="rfc.section.9.p.8">That having been said, it is important to recognize that some operations are clearly more sensitive by nature than others.  For instance, &lt;copy&#8209;config&gt; to the startup or running configurations is clearly not a normal provisioning operation, whereas &lt;edit&#8209;config&gt; is.  Such global operations MUST disallow the changing of information that an individual does not have authorization to perform.  For example, if a user A is not allowed to configure an IP address on an interface but user B has configured an IP address on an interface in the &lt;candidate&gt; configuration, user A MUST NOT be allowed to commit the &lt;candidate&gt; configuration.  </p>
<p id="rfc.section.9.p.9">Similarly, just because someone says "go write a configuration through the URL capability at a particular place", this does not mean that an element will do it without proper authorization.  </p>
<p id="rfc.section.9.p.10">The &lt;lock&gt; operation will demonstrate that NETCONF is intended for use by systems that have at least some trust of the administrator.  As specified in this document, it is possible to lock portions of a configuration that a principal might not otherwise have access to.  After all, the entire configuration is locked.  To mitigate this problem, there are two approaches.  It is possible to kill another NETCONF session programmatically from within NETCONF if one knows the session identifier of the offending session.  The other possible way to break a lock is to provide an function within the device's native user interface.  These two mechanisms suffer from a race condition that could be ameliorated by removing the offending user from an AAA server.  However, such a solution is not useful in all deployment scenarios, such as those where SSH public/private key pairs are used.  </p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> IANA Considerations</h1>
<h1 id="rfc.section.10.1">
<a href="#rfc.section.10.1">10.1.</a> NETCONF XML Namespace</h1>
<p id="rfc.section.10.1.p.1">This document registers a URI for the NETCONF XML namespace in the <a href="#RFC3688">IETF XML registry</a> <cite title="NONE">[RFC3688]</cite>.  </p>
<p id="rfc.section.10.1.p.2">IANA is requested to update the allocation of the following URI to reference this document when it is published as an RFC.  </p>
<p id="rfc.section.10.1.p.3">URI: urn:ietf:params:xml:ns:netconf:base:1.0 </p>
<p id="rfc.section.10.1.p.4">Registrant Contact: The IESG.  </p>
<p id="rfc.section.10.1.p.5">XML: N/A, the requested URI is an XML namespace.  </p>
<h1 id="rfc.section.10.2">
<a href="#rfc.section.10.2">10.2.</a> NETCONF XML Schema</h1>
<p id="rfc.section.10.2.p.1">This document registers a URI for the NETCONF XML schema in the <a href="#RFC3688">IETF XML registry</a> <cite title="NONE">[RFC3688]</cite>.  </p>
<p id="rfc.section.10.2.p.2">IANA is requested to update the allocation of the following URI to reference this document when it is published as an RFC.  </p>
<p id="rfc.section.10.2.p.3">URI: urn:ietf:params:xml:schema:netconf </p>
<p id="rfc.section.10.2.p.4">Registrant Contact: The IESG.  </p>
<p id="rfc.section.10.2.p.5">XML: <a href="#xsdschema">Appendix Appendix B</a> of this document.  </p>
<h1 id="rfc.section.10.3">
<a href="#rfc.section.10.3">10.3.</a> NETCONF YANG Module</h1>
<div id="#rfc.figure.51"></div>
<pre>
  name:        ietf-netconf
  namespace:   urn:ietf:params:xml:ns:netconf:base:1.0
  prefix:      nc
  reference:   RFCXXXX
  </pre>
<p id="rfc.section.10.3.p.1">This document registers a YANG module in the YANG Module Names registry <a href="#RFC6020">[RFC6020]</a>.  </p>
<h1 id="rfc.section.10.4">
<a href="#rfc.section.10.4">10.4.</a> NETCONF Capability URNs</h1>
<p id="rfc.section.10.4.p.1">IANA has created and will maintain a registry "Network Configuration Protocol (NETCONF) Capability URNs" that allocates NETCONF capability identifiers.  Additions to the registry require IETF Standards Action.  </p>
<p id="rfc.section.10.4.p.2">IANA is requested to update the allocations of the following capabilities to reference this document when it is published as an RFC.  </p>
<div id="#rfc.table.2"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Index</th>
<th class="left">Capability Identifier</th>
</tr></thead>
<tbody>
<tr>
<td class="left">:writable-running</td>
<td class="left">urn:ietf:params:netconf:capability:writable-running:1.0</td>
</tr>
<tr>
<td class="left">:candidate</td>
<td class="left">urn:ietf:params:netconf:capability:candidate:1.0</td>
</tr>
<tr>
<td class="left">:rollback-on-error</td>
<td class="left">urn:ietf:params:netconf:capability:rollback-on-error:1.0</td>
</tr>
<tr>
<td class="left">:startup</td>
<td class="left">urn:ietf:params:netconf:capability:startup:1.0</td>
</tr>
<tr>
<td class="left">:url</td>
<td class="left">urn:ietf:params:netconf:capability:url:1.0</td>
</tr>
<tr>
<td class="left">:xpath</td>
<td class="left">urn:ietf:params:netconf:capability:xpath:1.0</td>
</tr>
</tbody>
</table>
<p id="rfc.section.10.4.p.3">IANA is requested to add the following capabilities to the registry: </p>
<div id="#rfc.table.3"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Index</th>
<th class="left">Capability Identifier</th>
</tr></thead>
<tbody>
<tr>
<td class="left">:base:1.1</td>
<td class="left">urn:ietf:params:netconf:base:1.1</td>
</tr>
<tr>
<td class="left">:confirmed-commit:1.1</td>
<td class="left">urn:ietf:params:netconf:capability:confirmed-commit:1.1</td>
</tr>
<tr>
<td class="left">:validate:1.1</td>
<td class="left">urn:ietf:params:netconf:capability:validate:1.1</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> Authors and Acknowledgements</h1>
<p id="rfc.section.11.p.1">This document was written by: </p>

<ul class="empty">
<li>Andy Bierman</li>
<li>Ken Crozier, Cisco Systems</li>
<li>Rob Enns, Juniper Networks</li>
<li>Ted Goddard, IceSoft</li>
<li>Eliot Lear, Cisco Systems</li>
<li>Phil Shafer, Juniper Networks</li>
<li>Steve Waldbusser</li>
<li>Margaret Wasserman, ThingMagic</li>
</ul>

<p> </p>
<p id="rfc.section.11.p.2">The authors would like to acknowledge the members of the NETCONF working group.  In particular, we would like to thank Wes Hardaker for his persistence and patience in assisting us with security considerations.  We would also like to thank Randy Presuhn, Sharon Chisholm, Glenn Waters, David Perkins, Weijing Chen, Simon Leinen, Keith Allen, Dave Harrington, Ladislav Lhotka, Tom Petch, and Kent Watsen for all of their valuable advice.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">12.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">12.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="1">[1]</b></td>
<td class="top">
<a>Maler, E.</a>, <a>Paoli, J.</a>, <a>Bray, T.</a> and <a>C. Sperberg-McQueen</a>, "<a>Extensible Markup Language (XML) 1.0 (Second Edition)</a>", World Wide Web Consortium FirstEdition REC-xml-20001006, October 2000.</td>
</tr>
<tr>
<td class="reference"><b id="2">[2]</b></td>
<td class="top">
<a>Clark, J.</a> and <a>S. DeRose</a>, "<a>XML Path Language (XPath) Version 1.0</a>", World Wide Web Consortium Recommendation REC-xpath-19991116, November 1999.</td>
</tr>
<tr>
<td class="reference"><b id="3">[3]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="4">[4]</b></td>
<td class="top">
<a>Wasserman, M</a> and <a>T Goddard</a>, "<a href="http://tools.ietf.org/html/draft-ietf-netconf-rfc4742bis-08">Using the NETCONF Configuration Protocol over Secure Shell (SSH)</a>", Internet-Draft draft-ietf-netconf-rfc4742bis-08, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="5">[5]</b></td>
<td class="top">
<a href="mailto:timbl@w3.org" title="World Wide Web Consortium">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com" title="Day Software">Fielding, R.</a> and <a href="mailto:LMM@acm.org" title="Adobe Systems Incorporated">L. Masinter</a>, "<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>", STD 66, RFC 3986, January 2005.</td>
</tr>
<tr>
<td class="reference"><b id="6">[6]</b></td>
<td class="top">
<a>Mealling, M.</a>, <a>Masinter, L.</a>, <a>Hardie, T.</a> and <a>G. Klyne</a>, "<a href="http://tools.ietf.org/html/rfc3553">An IETF URN Sub-namespace for Registered Protocol Parameters</a>", BCP 73, RFC 3553, June 2003.</td>
</tr>
<tr>
<td class="reference"><b id="7">[7]</b></td>
<td class="top">
<a>Mealling, M.</a>, "<a href="http://tools.ietf.org/html/rfc3688">The IETF XML Registry</a>", BCP 81, RFC 3688, January 2004.</td>
</tr>
<tr>
<td class="reference"><b id="8">[8]</b></td>
<td class="top">
<a>Lengyel, B.</a> and <a>M. Bjorklund</a>, "<a href="http://tools.ietf.org/html/rfc5717">Partial Lock Remote Procedure Call (RPC) for NETCONF</a>", RFC 5717, December 2009.</td>
</tr>
<tr>
<td class="reference"><b id="9">[9]</b></td>
<td class="top">
<a>Bjorklund, M.</a>, "<a href="http://tools.ietf.org/html/rfc6020">YANG - A Data Modeling Language for the Network Configuration Protocol (NETCONF)</a>", RFC 6020, October 2010.</td>
</tr>
<tr>
<td class="reference"><b id="10">[10]</b></td>
<td class="top">
<a>Schoenwaelder, J.</a>, "<a href="http://tools.ietf.org/html/rfc6021">Common YANG Data Types</a>", RFC 6021, October 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">12.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="1">[1]</b></td>
<td class="top">
<a>Clark, J.</a>, "<a>XSL Transformations (XSLT) Version 1.0</a>", World Wide Web Consortium Recommendation REC-xslt-19991116, November 1999.</td>
</tr>
<tr>
<td class="reference"><b id="2">[2]</b></td>
<td class="top">
<a>Rigney, C.</a>, <a>Willens, S.</a>, <a>Rubens, A.</a> and <a>W. Simpson</a>, "<a href="http://tools.ietf.org/html/rfc2865">Remote Authentication Dial In User Service (RADIUS)</a>", RFC 2865, June 2000.</td>
</tr>
<tr>
<td class="reference"><b id="3">[3]</b></td>
<td class="top">
<a href="mailto:shollenbeck@verisign.com" title="VeriSign, Inc.">Hollenbeck, S.</a>, <a href="mailto:mrose@dbc.mtview.ca.us" title="Dover Beach Consulting, Inc.">Rose, M.</a> and <a href="mailto:LMM@acm.org" title="Adobe Systems Incorporated">L. Masinter</a>, "<a href="http://tools.ietf.org/html/rfc3470">Guidelines for the Use of Extensible Markup Language (XML) within&#160;IETF&#160;Protocols</a>", BCP 70, RFC 3470, January 2003.</td>
</tr>
<tr>
<td class="reference"><b id="4">[4]</b></td>
<td class="top">
<a>Ylonen, T.</a> and <a>C. Lonvick</a>, "<a href="http://tools.ietf.org/html/rfc4251">The Secure Shell (SSH) Protocol Architecture</a>", RFC 4251, January 2006.</td>
</tr>
<tr>
<td class="reference"><b id="5">[5]</b></td>
<td class="top">
<a>Enns, R.</a>, "<a href="http://tools.ietf.org/html/rfc4741">NETCONF Configuration Protocol</a>", RFC 4741, December 2006.</td>
</tr>
<tr>
<td class="reference"><b id="6">[6]</b></td>
<td class="top">
<a>Dierks, T.</a> and <a>E. Rescorla</a>, "<a href="http://tools.ietf.org/html/rfc5246">The Transport Layer Security (TLS) Protocol Version 1.2</a>", RFC 5246, August 2008.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#errorList" id="errorList">NETCONF Error List</a>
</h1>
<p id="rfc.section.Appendix A.p.1">This section is normative.  </p>
<p id="rfc.section.Appendix A.p.2">For each error&#8209;tag, the valid error&#8209;type and error&#8209;severity values are listed, together with any mandatory error&#8209;info, if any.  </p>
<div id="#rfc.figure.52"></div>
<pre>
error-tag:      in-use
error-type:     protocol, application
error-severity: error
error-info:     none
Description:    The request requires a resource that already is in
                use.

error-tag:      invalid-value
error-type:     protocol, application
error-severity: error
error-info:     none
Description:    The request specifies an unacceptable value for one
                or more parameters.

error-tag:      too-big
error-type:     transport, rpc, protocol, application
error-severity: error
error-info:     none
Description:    The request or response (that would be generated) is
                too large for the implementation to handle.

error-tag:      missing-attribute
error-type:     rpc, protocol, application
error-severity: error
error-info:     &lt;bad-attribute&gt; : name of the missing attribute
                &lt;bad-element&gt; : name of the element that is supposed to
                  contain the missing attribute
Description:    An expected attribute is missing.

error-tag:      bad-attribute
error-type:     rpc, protocol, application
error-severity: error
error-info:     &lt;bad-attribute&gt; : name of the attribute w/ bad value
                &lt;bad-element&gt; : name of the element that contains
                  the attribute with the bad value
Description:    An attribute value is not correct; e.g., wrong type,
                out of range, pattern mismatch.

error-tag:      unknown-attribute
error-type:     rpc, protocol, application
error-severity: error
error-info:     &lt;bad-attribute&gt; : name of the unexpected attribute
                &lt;bad-element&gt; : name of the element that contains
                  the unexpected attribute
Description:    An unexpected attribute is present.

error-tag:      missing-element
error-type:     protocol, application
error-severity: error
error-info:     &lt;bad-element&gt; : name of the missing element
Description:    An expected element is missing.

error-tag:      bad-element
error-type:     protocol, application
error-severity: error
error-info:     &lt;bad-element&gt; : name of the element w/ bad value
Description:    An element value is not correct; e.g., wrong type,
                out of range, pattern mismatch.

error-tag:      unknown-element
error-type:     protocol, application
error-severity: error
error-info:     &lt;bad-element&gt; : name of the unexpected element
Description:    An unexpected element is present.

error-tag:      unknown-namespace
error-type:     protocol, application
error-severity: error
error-info:     &lt;bad-element&gt; : name of the element that contains
                  the unexpected namespace
                &lt;bad-namespace&gt; : name of the unexpected namespace
Description:    An unexpected namespace is present.

error-tag:      access-denied
error-type:     protocol, application
error-severity: error
error-info:     none
Description:    Access to the requested protocol operation, or
                data model is denied because authorization failed.

error-tag:      lock-denied
error-type:     protocol
error-severity: error
error-info:     &lt;session-id&gt; : session ID of session holding the
                  requested lock, or zero to indicate a non-NETCONF
                  entity holds the lock
Description: Access to the requested lock is denied because the
             lock is currently held by another entity.

error-tag:      resource-denied
error-type:     transport, rpc, protocol, application
error-severity: error
error-info:     none
Description:    Request could not be completed because of
                insufficient resources.

error-tag:      rollback-failed
error-type:     protocol, application
error-severity: error
error-info:     none
Description:    Request to rollback some configuration change (via 
                rollback-on-error or discard-changes operations) was
                not completed for some reason. 

error-tag:      data-exists
error-type:     application
error-severity: error
error-info:     none
Description:    Request could not be completed because the relevant
                data model content already exists. For example, 
                a "create" operation was attempted on data that
                already exists.

error-tag:      data-missing
error-type:     application
error-severity: error
error-info:     none
Description:    Request could not be completed because the relevant
                data model content does not exist.  For example,
                a "delete" operation was attempted on 
                data that does not exist.
             
error-tag:      operation-not-supported
error-type:     protocol, application
error-severity: error
error-info:     none
Description:    Request could not be completed because the requested
                operation is not supported by this implementation.

error-tag:      operation-failed
error-type:     rpc, protocol, application
error-severity: error
error-info:     none
Description:    Request could not be completed because the requested
                operation failed for some reason not covered by 
                any other error condition.

error-tag:      partial-operation
error-type:     application
error-severity: error
error-info:     &lt;ok-element&gt; : identifies an element in the data
                  model for which the requested operation has been
                  completed for that node and all its child nodes.
                  This element can appear zero or more times in the
                  &lt;error-info&gt; container.

                &lt;err-element&gt; : identifies an element in the data
                  model for which the requested operation has failed
                  for that node and all its child nodes.
                  This element can appear zero or more times in the
                  &lt;error-info&gt; container.

                &lt;noop-element&gt; : identifies an element in the data
                  model for which the requested operation was not
                  attempted for that node and all its child nodes.
                  This element can appear zero or more times in the
                  &lt;error-info&gt; container.

Description:    This error-tag is obsolete, and SHOULD NOT be sent
                by servers conforming to this document.

                Some part of the requested operation failed or was
                not attempted for some reason.  Full cleanup has 
                not been performed (e.g., rollback not supported)
                by the server.  The error-info container is used
                to identify which portions of the application
                data model content for which the requested operation
                has succeeded (&lt;ok-element&gt;), failed (&lt;bad-element&gt;),
                or not been attempted (&lt;noop-element&gt;).

error-tag:      malformed-message
error-type:     rpc
error-severity: error
error-info:     none
Description:    A message could not be handled because it failed to
                be parsed correctly. For example, the message is not
                well-formed XML or it uses an invalid character set.
               </pre>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> <a href="#xsdschema" id="xsdschema">XML Schema for NETCONF Messages Layer</a>
</h1>
<div id="#rfc.figure.53"></div>
<pre>
&lt;CODE BEGINS&gt; file "netconf.xsd"

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           targetNamespace="urn:ietf:params:xml:ns:netconf:base:1.0"
           elementFormDefault="qualified"
           attributeFormDefault="unqualified"
           xml:lang="en"
           version="1.1"&gt;

  &lt;xs:annotation&gt;
    &lt;xs:documentation&gt;
      This schema defines the syntax for the NETCONF Messages layer
      messages 'hello', 'rpc', and 'rpc-reply'.
    &lt;/xs:documentation&gt;
  &lt;/xs:annotation&gt;
  
  &lt;!--
     import standard XML definitions
    --&gt;
  &lt;xs:import namespace="http://www.w3.org/XML/1998/namespace"
             schemaLocation="http://www.w3.org/2001/xml.xsd"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        This import accesses the xml: attribute groups for the
        xml:lang as declared on the error-message element.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
  &lt;/xs:import&gt;
  &lt;!--
     message-id attribute
    --&gt;
  &lt;xs:simpleType name="messageIdType"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:maxLength value="4095"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  &lt;!--
     Types used for session-id
    --&gt;
  &lt;xs:simpleType name="SessionId"&gt;
    &lt;xs:restriction base="xs:unsignedInt"&gt;
      &lt;xs:minInclusive value="1"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  &lt;xs:simpleType name="SessionIdOrZero"&gt;
    &lt;xs:restriction base="xs:unsignedInt"/&gt;
  &lt;/xs:simpleType&gt;
  &lt;!--
     &lt;rpc&gt; element
    --&gt;
  &lt;xs:complexType name="rpcType"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element ref="rpcOperation"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="message-id" type="messageIdType"
                  use="required"/&gt;
    &lt;!--
       Arbitrary attributes can be supplied with &lt;rpc&gt; element.
      --&gt;
    &lt;xs:anyAttribute processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:element name="rpc" type="rpcType"/&gt;
  &lt;!--
     data types and elements used to construct rpc-errors
    --&gt;
  &lt;xs:simpleType name="ErrorType"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:enumeration value="transport"/&gt;
      &lt;xs:enumeration value="rpc"/&gt;
      &lt;xs:enumeration value="protocol"/&gt;
      &lt;xs:enumeration value="application"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  &lt;xs:simpleType name="ErrorTag"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:enumeration value="in-use"/&gt;
      &lt;xs:enumeration value="invalid-value"/&gt;
      &lt;xs:enumeration value="too-big"/&gt;
      &lt;xs:enumeration value="missing-attribute"/&gt;
      &lt;xs:enumeration value="bad-attribute"/&gt;
      &lt;xs:enumeration value="unknown-attribute"/&gt;
      &lt;xs:enumeration value="missing-element"/&gt;
      &lt;xs:enumeration value="bad-element"/&gt;
      &lt;xs:enumeration value="unknown-element"/&gt;
      &lt;xs:enumeration value="unknown-namespace"/&gt;
      &lt;xs:enumeration value="access-denied"/&gt;
      &lt;xs:enumeration value="lock-denied"/&gt;
      &lt;xs:enumeration value="resource-denied"/&gt;
      &lt;xs:enumeration value="rollback-failed"/&gt;
      &lt;xs:enumeration value="data-exists"/&gt;
      &lt;xs:enumeration value="data-missing"/&gt;
      &lt;xs:enumeration value="operation-not-supported"/&gt;
      &lt;xs:enumeration value="operation-failed"/&gt;
      &lt;xs:enumeration value="partial-operation"/&gt;
      &lt;xs:enumeration value="malformed-message"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  &lt;xs:simpleType name="ErrorSeverity"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:enumeration value="error"/&gt;
      &lt;xs:enumeration value="warning"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  &lt;xs:complexType name="errorInfoType"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:choice&gt;
        &lt;xs:element name="session-id" type="SessionIdOrZero"/&gt;
        &lt;xs:sequence minOccurs="0" maxOccurs="unbounded"&gt;
          &lt;xs:sequence&gt;
            &lt;xs:element name="bad-attribute" type="xs:QName"
                        minOccurs="0" maxOccurs="1"/&gt;
            &lt;xs:element name="bad-element" type="xs:QName"
                        minOccurs="0" maxOccurs="1"/&gt;
            &lt;xs:element name="ok-element" type="xs:QName"
                        minOccurs="0" maxOccurs="1"/&gt;
            &lt;xs:element name="err-element" type="xs:QName"
                        minOccurs="0" maxOccurs="1"/&gt;
            &lt;xs:element name="noop-element" type="xs:QName"
                        minOccurs="0" maxOccurs="1"/&gt;
            &lt;xs:element name="bad-namespace" type="xs:string"
                        minOccurs="0" maxOccurs="1"/&gt;
          &lt;/xs:sequence&gt;
        &lt;/xs:sequence&gt;
      &lt;/xs:choice&gt;
      &lt;!-- elements from any other namespace are also allowed
           to follow the NETCONF elements --&gt;
      &lt;xs:any namespace="##other" processContents="lax"
              minOccurs="0" maxOccurs="unbounded"/&gt; 
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="rpcErrorType"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="error-type" type="ErrorType"/&gt;
      &lt;xs:element name="error-tag" type="ErrorTag"/&gt;
      &lt;xs:element name="error-severity" type="ErrorSeverity"/&gt;
      &lt;xs:element name="error-app-tag" type="xs:string"
                  minOccurs="0"/&gt;
      &lt;xs:element name="error-path" type="xs:string" minOccurs="0"/&gt;
      &lt;xs:element name="error-message" minOccurs="0"&gt;
        &lt;xs:complexType&gt;
          &lt;xs:simpleContent&gt;
            &lt;xs:extension base="xs:string"&gt;
              &lt;xs:attribute ref="xml:lang" use="optional"/&gt;
            &lt;/xs:extension&gt;
          &lt;/xs:simpleContent&gt;
        &lt;/xs:complexType&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name="error-info" type="errorInfoType"
                  minOccurs="0"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
     operation attribute used in &lt;edit-config&gt;
    --&gt;
  &lt;xs:simpleType name="editOperationType"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:enumeration value="merge"/&gt;
      &lt;xs:enumeration value="replace"/&gt;
      &lt;xs:enumeration value="create"/&gt;
      &lt;xs:enumeration value="delete"/&gt;
      &lt;xs:enumeration value="remove"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  &lt;xs:attribute name="operation" type="editOperationType"/&gt;
  &lt;!--
     &lt;rpc-reply&gt; element
    --&gt;
  &lt;xs:complexType name="rpcReplyType"&gt;
    &lt;xs:choice&gt;
      &lt;xs:element name="ok"/&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element ref="rpc-error"
                    minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;xs:element ref="rpcResponse"
                    minOccurs="0" maxOccurs="unbounded"/&gt;
      &lt;/xs:sequence&gt;
    &lt;/xs:choice&gt;
    &lt;xs:attribute name="message-id" type="messageIdType"
                  use="optional"/&gt;
    &lt;!--
       Any attributes supplied with &lt;rpc&gt; element must be returned
       on &lt;rpc-reply&gt;.
      --&gt;
    &lt;xs:anyAttribute processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:element name="rpc-reply" type="rpcReplyType"/&gt;
  &lt;!--
     &lt;rpc-error&gt; element
       --&gt;
  &lt;xs:element name="rpc-error" type="rpcErrorType"/&gt;
  &lt;!--
     rpcOperationType: used as a base type for all
     NETCONF operations
    --&gt;
  &lt;xs:complexType name="rpcOperationType"/&gt;
  &lt;xs:element name="rpcOperation" type="rpcOperationType"
              abstract="true"/&gt;
  &lt;!--
     rpcResponseType: used as a base type for all
     NETCONF responses
    --&gt;
  &lt;xs:complexType name="rpcResponseType"/&gt;
  &lt;xs:element name="rpcResponse" type="rpcResponseType"
              abstract="true"/&gt;
  &lt;!--
     &lt;hello&gt; element
    --&gt;
  &lt;xs:element name="hello"&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name="capabilities"&gt;
          &lt;xs:complexType&gt;
            &lt;xs:sequence&gt;
              &lt;xs:element name="capability" type="xs:anyURI"
                          maxOccurs="unbounded"/&gt;
            &lt;/xs:sequence&gt;
          &lt;/xs:complexType&gt;
        &lt;/xs:element&gt;
        &lt;xs:element name="session-id" type="SessionId"
                    minOccurs="0"/&gt;
      &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;
&lt;/xs:schema&gt;


&lt;CODE ENDS&gt;
             </pre>
<p id="rfc.section.Appendix B.p.1">This section is normative.  </p>
<h1 id="rfc.appendix.Appendix C">
<a href="#rfc.appendix.Appendix%20C">Appendix C.</a> <a href="#yangmodule" id="yangmodule">YANG Module for NETCONF Protocol Operations</a>
</h1>
<p id="rfc.section.Appendix C.p.1">This section is normative.  </p>
<div id="#rfc.figure.54"></div>
<pre>
// RFC Ed.: please update the date to the date of publication
&lt;CODE BEGINS&gt; file "ietf-netconf@2011-01-16.yang"

module ietf-netconf {

  // the namespace for NETCONF XML definitions has not changed
  // this value is pre-determined by RFC 4741
  namespace "urn:ietf:params:xml:ns:netconf:base:1.0";

  prefix nc;
   
  import ietf-inet-types {
    prefix inet;
  }

  organization
    "IETF NETCONF (Network Configuration) Working Group";

  contact
    "WG Web:   &lt;http://tools.ietf.org/wg/netconf/&gt;
     WG List:  &lt;mailto:netconf@ietf.org&gt;

     WG Chair: Bert Wijnen
               &lt;mailto:bertietf@bwijnen.net&gt;

     WG Chair: Mehmet Ersue
               &lt;mailto:mehmet.ersue@nsn.com&gt;

     Editor:   Martin Bjorklund
               &lt;mailto:mbj@tail-f.com&gt;

     Editor:   Juergen Schoenwaelder
               &lt;mailto:j.schoenwaelder@jacobs-university.de&gt;

     Editor:   Andy Bierman
               &lt;mailto:andy.bierman@brocade.com&gt;";

  description 
    "NETCONF Protocol Data Types and Protocol Operations.

     Copyright (c) 2010 IETF Trust and the persons identified as
     the document authors.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject
     to the license terms contained in, the Simplified BSD License
     set forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (http://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX; see
     the RFC itself for full legal notices.";
   // RFC Ed.: replace XXXX with actual RFC number and remove this note
  
  // RFC Ed.: please update the date to the date of publication
  revision 2011-01-16 {
    description 
      "Initial revision";
    reference 
      "RFC XXXX: Network Configuration Protocol";
  }

  extension get-filter-element-attributes {
    description
      "If this extension is present within the
       an 'anyxml' statement named 'filter', which must be
       conceptually defined within the RPC input section
       for the 'get' and 'get-config' protocol operations,
       then the following unqualified XML attribute is
       supported within the 'filter' element, within
       a 'get' or 'get-config' protocol operation:

         type : optional attribute with allowed
                value strings 'subtree' and 'xpath'.
                If missing, the default value is 'subtree'.

       If the 'xpath' feature is supported, then the
       following unqualified XML attribute is
       also supported:

         select: optional attribute containing a
                 string representing an XPath expression.
                 The 'type' attribute must be equal to 'xpath'
                 if this attribute is present.";
  }

  // NETCONF capabilities defined as features
  feature writable-running {
    description 
      "NETCONF :writable-running capability;
       If the server advertises the :writable-running
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";
    reference "RFC XXXX, #X#Writable-Running Capability#";
  }

  feature candidate {
    description 
      "NETCONF :candidate capability;
       If the server advertises the :candidate
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";
    reference "RFC XXXX, #X#Candidate Configuration Capability#";
  }

  feature confirmed-commit {
    if-feature candidate;
    description 
      "NETCONF :confirmed-commit:1.1 capability;
       If the server advertises the :confirmed-commit:1.1
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";

    reference "RFC XXXX, #X#Confirmed Commit Capability#";
  }
  
  feature rollback-on-error {
    description 
      "NETCONF :rollback-on-error capability;
       If the server advertises the :rollback-on-error
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";
    reference "RFC XXXX, #X#Rollback on Error Capability#";
  }

  feature validate {
    description 
      "NETCONF :validate:1.1 capability;
       If the server advertises the :validate:1.1
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";
    reference "RFC XXXX, #X#Validate Capability#";
  }
  
  feature startup {
    description 
      "NETCONF :startup capability;
       If the server advertises the :startup
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";
    reference "RFC XXXX, #X#Distinct Startup Capability#";
  }

  feature url {
    description 
      "NETCONF :url capability;
       If the server advertises the :url
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";
    reference "RFC XXXX, #X#URL Capability#";
  }

  feature xpath {
    description 
      "NETCONF :xpath capability;
       If the server advertises the :xpath
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";
    reference "RFC XXXX, #X#XPath Capability#";
  }

  // NETCONF Simple Types

  typedef session-id-type {
    type uint32 {
      range "1..max"; 
    }
    description
      "NETCONF Session Id";
  }
  
  typedef session-id-or-zero-type {
    type uint32; 
    description 
      "NETCONF Session Id or Zero to indicate none";
  }

  typedef error-tag-type {
    type enumeration {
       enum in-use {
         description 
           "The request requires a resource that 
            already is in use.";
       }
       enum invalid-value {
         description
           "The request specifies an unacceptable value for one
            or more parameters.";
       }
       enum too-big {
         description
           "The request or response (that would be generated) is
            too large for the implementation to handle.";
       }
       enum missing-attribute {
         description
           "An expected attribute is missing.";
       }
       enum bad-attribute {
         description
           "An attribute value is not correct; e.g., wrong type,
            out of range, pattern mismatch.";
       }
       enum unknown-attribute {
         description
           "An unexpected attribute is present.";
       }
       enum missing-element {
         description
           "An expected element is missing.";
       }
       enum bad-element {
         description
           "An element value is not correct; e.g., wrong type,
            out of range, pattern mismatch.";
       }
       enum unknown-element {
         description
           "An unexpected element is present.";
       }
       enum unknown-namespace {
         description
           "An unexpected namespace is present.";
       }
       enum access-denied {
         description
           "Access to the requested protocol operation, or
            data model is denied because authorization failed.";
       }
       enum lock-denied {
         description
           "Access to the requested lock is denied because the
            lock is currently held by another entity.";
       }
       enum resource-denied {
         description
           "Request could not be completed because of
            insufficient resources.";
       }
       enum rollback-failed {
         description
           "Request to rollback some configuration change (via 
            rollback-on-error or discard-changes operations) was
            not completed for some reason.";

       }
       enum data-exists {
         description
           "Request could not be completed because the relevant
            data model content already exists. For example, 
            a 'create' operation was attempted on data that
            already exists.";
       }
       enum data-missing {
         description
           "Request could not be completed because the relevant
            data model content does not exist.  For example,
            a 'delete' operation was attempted on 
            data that does not exist.";
       }
       enum operation-not-supported {
         description
           "Request could not be completed because the requested
            operation is not supported by this implementation.";
       }
       enum operation-failed {
         description
           "Request could not be completed because the requested
            operation failed for some reason not covered by 
            any other error condition.";
       }
       enum partial-operation {
         description
           "This error-tag is obsolete, and SHOULD NOT be sent
            by servers conforming to this document.";
       }
       enum malformed-message {
         description
           "A message could not be handled because it failed to
	    be parsed correctly. For example, the message is not
            well-formed XML or it uses an invalid character set.";
       }
     }
     description "NETCONF Error Tag";
     reference "RFC XXXX, section YYY";
  }

  typedef error-severity-type {
    type enumeration {
      enum error {
        description "Error severity";
      }
      enum warning {
        description "Warning severity";
      }
    }
    description "NETCONF Error Severity";
    reference "RFC XXXX, section YYY";
  }

  typedef edit-operation-type {
    type enumeration {
      enum merge {
        description
          "The configuration data identified by the
           element containing this attribute is merged 
           with the configuration at the corresponding
           level in the configuration datastore identified
           by the target parameter.";
      }
      enum replace {
        description
          "The configuration data identified by the element
           containing this attribute replaces any related
           configuration in the configuration datastore
           identified by the target parameter.  If no such
           configuration data exists in the configuration
           datastore, it is created. Unlike a
           &lt;copy-config&gt; operation, which replaces the 
           entire target configuration, only the configuration
           actually present in the config parameter is affected.";
      }
      enum create { 
        description
          "The configuration data identified by the element
           containing this attribute is added to the
           configuration if and only if the configuration
           data does not already exist in the configuration
           datastore.  If the configuration data exists, an
           &lt;rpc-error&gt; element is returned with an 
           &lt;error-tag&gt; value of 'data-exists'.";
      }
      enum delete {
        description
          "The configuration data identified by the element
           containing this attribute is deleted from the
           configuration if and only if the configuration
           data currently exists in the configuration
           datastore.  If the configuration data does not
           exist, an &lt;rpc-error&gt; element is returned with
           an &lt;error-tag&gt; value of 'data-missing'.";
      }
      enum remove {
        description
          "The configuration data identified by the element
           containing this attribute is deleted from the
           configuration if the configuration
           data currently exists in the configuration
           datastore.  If the configuration data does not
           exist, the 'remove' operation is silently ignored
           by the server.";
      }
    }
    default "merge";
    description "NETCONF 'operation' attribute values";
    reference "RFC XXXX, #X#&lt;edit-config&gt;#";
  }

  // NETCONF Standard Protocol Operations
  
  rpc get-config {
    description
      "Retrieve all or part of a specified configuration.";

    reference "RFC XXXX, #X#&lt;get-config&gt;#";
    
    input {
      container source {
        description
          "Particular configuration to retrieve.";

        choice config-source {
          mandatory true;
          description
            "The configuration to retrieve.";
          leaf candidate {
            if-feature candidate;
            type empty;
            description
              "The candidate configuration is the config source.";
          }
          leaf running {
            type empty;
            description
              "The running configuration is the config source.";
          }
          leaf startup {
            if-feature startup;
            type empty;
            description
              "The startup configuration is the config source.
               This is optional-to-implement on the server because
               not all servers will support filtering for this
               datastore.";
          }
        }
      }
      
      anyxml filter {
        description
          "Subtree or XPath filter to use.";
        nc:get-filter-element-attributes;
      }
    }

    output {
      anyxml data {
        description 
          "Copy of the source datastore subset which matched
           the filter criteria (if any).  An empty data container
           indicates that the request did not produce any results.";
      }
    }
  }

  rpc edit-config {
    description
      "The 'edit-config' operation loads all or part of a specified
       configuration to the specified target configuration.";

    reference "RFC XXXX, #X#&lt;edit-config&gt;#";

    input {
      container target {
        description
          "Particular configuration to edit.";

        choice config-target {
          mandatory true;
          description
            "The configuration target.";
          
          leaf candidate {
            if-feature candidate;
            type empty;
            description
              "The candidate configuration is the config target.";
          }
          leaf running {
            if-feature writable-running;
            type empty;
            description
              "The running configuration is the config source.";
          }
        }
      }
      
      leaf default-operation {
        type enumeration { 
          enum merge {
            description
              "The default operation is merge.";
          }
          enum replace {
            description
              "The default operation is replace.";
          }
          enum none {
            description
              "There is no default operation.";
          }
        }
        default "merge";
        description
          "The default operation to use.";
      }
      
      leaf test-option {
        if-feature validate;
        type enumeration {
          enum test-then-set {
            description
              "The server will test and then set if no errors.";
          }
          enum set {
            description
              "The server will set without a test first.";
          }
        
          enum test-only {
            description
              "The server will only test and not set, even 
               if there are no errors.";
          }
        }
        default "test-then-set";
        description
          "The test option to use.";
      }
      
      leaf error-option {
        type enumeration { 
          enum stop-on-error {
            description
              "The server will stop on errors.";
          }
          enum continue-on-error {
            description
              "The server may continue on errors.";
          }
          enum rollback-on-error {
            description
              "The server will rollback on errors.
               This value can only be used if the 'rollback-on-error'
               feature is supported.";
          }
        }
        default "stop-on-error";
        description
          "The error option to use.";
      }

      choice edit-content {
        mandatory true;
        description
          "The content for the edit operation";

        anyxml config {
          description 
            "Inline Config content.";
        }
        leaf url {
          if-feature url;
          type inet:uri;
          description
            "URL based config content.";
        }
      }
    }
  }

  rpc copy-config {
    description
      "Create or replace an entire configuration datastore with the
       contents of another complete configuration datastore.";

    reference "RFC XXXX, #X#&lt;copy-config&gt;#";

    input {
      container target {
        description
          "Particular configuration to copy to.";

        choice config-target {
          mandatory true;
          description
            "The configuration target of the copy operation.";
          
          leaf candidate {
            if-feature candidate;
            type empty;
            description
              "The candidate configuration is the config target.";
          }
          leaf running {
            if-feature writable-running;
            type empty;
            description
              "The running configuration is the config target.
               This is optional-to-implement on the server.";
          }
          leaf startup {
            if-feature startup;
            type empty;
            description
              "The startup configuration is the config target.";
          }
          leaf url {
            if-feature url;
            type inet:uri;
            description
              "The URL-based configuration is the config target.";
          }
        }
      }
      
      container source {
        description
          "Particular configuration to copy from.";

        choice config-source {
          mandatory true;
          description
            "The configuration source for the copy operation.";
          
          leaf candidate {
            if-feature candidate;
            type empty;
            description
              "The candidate configuration is the config source.";
          }
          leaf running {
            type empty;
            description
              "The running configuration is the config source.";
          }
          leaf startup {
            if-feature startup;
            type empty;
            description
              "The startup configuration is the config source.";
          }
          leaf url {
            if-feature url;
            type inet:uri;
            description
              "The URL-based configuration is the config source.";
          }
          anyxml config {
            description 
              "Inline Config content: 'config' element.  Represents
               an entire configuration datastore, not
               a subset of the running datastore.";
          }
        }
      }
    }
  }
  
  rpc delete-config {
    description
      "Delete a configuration datastore.";

    reference "RFC XXXX, #X#&lt;delete-config&gt;#";
    
    input {
      container target {
        description
          "Particular configuration to delete.";
        
        choice config-target {
          mandatory true;
          description
            "The configuration target to delete.";
          
          leaf startup {
            if-feature startup;
            type empty;
            description
              "The startup configuration is the config target.";
          }
          leaf url {
            if-feature url;
            type inet:uri;
            description
              "The URL-based configuration is the config target.";
          }
        }
      }
    }
  }
  
  rpc lock {
    description
      "The lock operation allows the client to lock the configuration
       system of a device.";

    reference "RFC XXXX, #X#&lt;lock&gt;#";

    input {
      container target {
        description
          "Particular configuration to lock";

        choice config-target {
          mandatory true;
          description
            "The configuration target to lock.";
          
          leaf candidate {
            if-feature candidate;
            type empty;
            description
              "The candidate configuration is the config target.";
          }
          leaf running {
            type empty;
            description
              "The running configuration is the config target.";
          }
          leaf startup {
            if-feature startup;
            type empty;
            description
              "The startup configuration is the config target.";
          }
        }
      }
    }
  }
  
  rpc unlock {
    description
      "The unlock operation is used to release a configuration lock,
       previously obtained with the 'lock' operation.";

    reference "RFC XXXX, #X#&lt;unlock&gt;#";
    
    input {
      container target {
        description
          "Particular configuration to unlock.";

        choice config-target {
          mandatory true;
          description
            "The configuration target to unlock.";
          
          leaf candidate {
            if-feature candidate;
            type empty;
            description
              "The candidate configuration is the config target.";
          }
          leaf running {
            type empty;
            description
              "The running configuration is the config target.";
          }
          leaf startup {
            if-feature startup;
            type empty;
            description
              "The startup configuration is the config target.";
          }
        }
      }
    }
  }
  
  rpc get {
    description
      "Retrieve running configuration and device state information.";

    reference "RFC XXXX, #X#&lt;get&gt;#";

    input {
      anyxml filter {
        description
          "This parameter specifies the portion of the system
           configuration and state data to retrieve.";
        nc:get-filter-element-attributes;
      }
    }

    output {
      anyxml data {
        description 
          "Copy of the running datastore subset and/or state 
           data which matched the filter criteria (if any).
           An empty data container indicates that the request did not
           produce any results.";
      }
    }
  }
  
  rpc close-session {
    description
      "Request graceful termination of a NETCONF session.";
    
    reference "RFC XXXX, #X#&lt;close-session&gt;#";
  }

  rpc kill-session {
    description
      "Force the termination of a NETCONF session.";
    
    reference "RFC XXXX, #X#&lt;kill-session&gt;#";
    
    input {
      leaf session-id {
        type session-id-type;
        mandatory true;
        description
          "Particular session to kill.";
      }
    }
  }

  rpc commit {
    if-feature candidate;

    description
      "Commit the candidate configuration as the device's new
       current configuration";
    
    reference "RFC XXXX, #X#&lt;commit&gt;#";

    input {
      leaf confirmed {
        if-feature confirmed-commit;
        type empty;
        description
          "Requests a confirmed commit.";
        reference "RFC XXXX, #X#&lt;commit&gt;#";
      }

      leaf confirm-timeout {
        if-feature confirmed-commit;
        type uint32 { 
          range "1..max";
        }
        units "seconds";
        default "600";   // 10 minutes
        description
          "The timeout interval for a confirmed commit.";
        reference "RFC XXXX, #X#&lt;commit&gt;#";
      }

      leaf persist {
        if-feature confirmed-commit;
        type string;
        description
          "This parameter is used to make a confirmed commit
           persistent.  A persistent confirmed commit is not aborted
           if the NETCONF session terminates.  The only way to abort a
           persistent confirmed commit it to let the timer expire, or
           to use the cancel-commit operation.

           The value of this parameter is a token that must be given
           in the 'persist-id' parameter of commit or cancel-commit in
           order to confirm or cancel the persistent confirmed commit.

           The token should be a random string.";
        reference "RFC XXXX, #X#&lt;commit&gt;#";
      }

      leaf persist-id {
        if-feature confirmed-commit;
        type string;
        description
          "This parameter is given in order to commit a persistent
           confirmed commit.  The value must be equal to the value
           given in the 'persist' parameter to the commit operation.
           If it does not match, the operation fails with an
          'invalid-value' error.";
        reference "RFC XXXX, #X#&lt;commit&gt;#";
      }

    }
  }

  rpc discard-changes {
    if-feature candidate;

    description
      "Revert the candidate configuration to the current 
       running configuration.";

    reference "RFC XXXX, #X#&lt;discard-changes&gt;#";
  }

  rpc cancel-commit {
    if-feature confirmed-commit;
    description
      "This operation is used to cancel an ongoing confirmed commit.
       If the confirmed commit is persistent, the parameter
       'persist-id' must be given, and it must match the value of the
       'persist' parameter.";
    reference "RFC XXXX, #X#&lt;cancel-commit&gt;#";

    input {
      leaf persist-id {
        type string;
        description
          "This parameter is given in order to cancel a persistent
           confirmed commit.  The value must be equal to the value
           given in the 'persist' parameter to the commit operation.
           If it does not match, the operation fails with an
          'invalid-value' error.";
      }
    }
  }

  rpc validate {
    if-feature validate;

    description
      "Validates the contents of the specified configuration.";

    reference "RFC XXXX, #X#&lt;validate&gt;#";

    input {
      container source {
        description
          "Particular configuration to validate.";

        choice config-source {
          mandatory true;
          description
            "The configuration source to validate.";
          
          leaf candidate {
            if-feature candidate;
            type empty;
            description
              "The candidate configuration is the config source.";
          }
          leaf running {
            type empty;
            description
              "The running configuration is the config source.";
          }
          leaf startup {
            if-feature startup;
            type empty;
            description
              "The startup configuration is the config source.";
          }
          leaf url {
            if-feature url;
            type inet:uri;
            description
              "The URL-based configuration is the config source.";
          }
          anyxml config {
            description 
              "Inline Config content: 'config' element.  Represents
               an entire configuration datastore, not
               a subset of the running datastore.";
          }
        }
      }
    }
  }
  
}


&lt;CODE ENDS&gt;
             </pre>
<p id="rfc.section.Appendix C.p.2">The ietf-netconf YANG module imports typedefs from <a href="#RFC6021">[RFC6021]</a>.  </p>
<h1 id="rfc.appendix.Appendix D">
<a href="#rfc.appendix.Appendix%20D">Appendix D.</a> <a href="#capabilityTemplate" id="capabilityTemplate">Capability Template</a>
</h1>
<p id="rfc.section.Appendix D.p.1">This non-normative section defines a template that can be used to define protocol capabilities. Data models written in YANG usually do not need to define protocol capabilities since the usage of YANG automatically leads to a capability announcing the data model and any optional portions of the data model, so called features in YANG terminology. The capabilities template is intended to be used in cases where the YANG mechanisms are not powerful enough (e.g., for handling parametrized features) or a different data modeling language is used.  </p>
<h1 id="rfc.appendix.Appendix D.1">
<a href="#rfc.appendix.Appendix%20D.1">Appendix D.1.</a> capability-name (template)</h1>
<h1 id="rfc.appendix.Appendix D.1.1">
<a href="#rfc.appendix.Appendix%20D.1.1">Appendix D.1.1.</a> Overview</h1>
<h1 id="rfc.appendix.Appendix D.1.2">
<a href="#rfc.appendix.Appendix%20D.1.2">Appendix D.1.2.</a> Dependencies</h1>
<h1 id="rfc.appendix.Appendix D.1.3">
<a href="#rfc.appendix.Appendix%20D.1.3">Appendix D.1.3.</a> Capability Identifier</h1>
<p id="rfc.section.Appendix D.1.3.p.1">The {name} capability is identified by the following capability string: </p>

<ul class="empty"><li>{capability uri}</li></ul>

<p> </p>
<h1 id="rfc.appendix.Appendix D.1.4">
<a href="#rfc.appendix.Appendix%20D.1.4">Appendix D.1.4.</a> New Operations</h1>
<h1 id="rfc.appendix.Appendix D.1.4.1">
<a href="#rfc.appendix.Appendix%20D.1.4.1">Appendix D.1.4.1.</a> &lt;op-name&gt;</h1>
<h1 id="rfc.appendix.Appendix D.1.5">
<a href="#rfc.appendix.Appendix%20D.1.5">Appendix D.1.5.</a> Modifications to Existing Operations</h1>
<h1 id="rfc.appendix.Appendix D.1.5.1">
<a href="#rfc.appendix.Appendix%20D.1.5.1">Appendix D.1.5.1.</a> &lt;op-name&gt;</h1>
<p id="rfc.section.Appendix D.1.5.1.p.1">If existing operations are not modified by this capability, this section may be omitted.</p>
<h1 id="rfc.appendix.Appendix D.1.6">
<a href="#rfc.appendix.Appendix%20D.1.6">Appendix D.1.6.</a> Interactions with Other Capabilities</h1>
<p id="rfc.section.Appendix D.1.6.p.1">If this capability does not interact with other capabilities, this section may be omitted.</p>
<h1 id="rfc.appendix.Appendix E">
<a href="#rfc.appendix.Appendix%20E">Appendix E.</a> <a href="#multidev" id="multidev">Configuring Multiple Devices with NETCONF</a>
</h1>
<p id="rfc.section.Appendix E.p.1">This section is non-normative.  </p>
<h1 id="rfc.appendix.Appendix E.1">
<a href="#rfc.appendix.Appendix%20E.1">Appendix E.1.</a> Operations on Individual Devices</h1>
<p id="rfc.section.Appendix E.1.p.1">Consider the work involved in performing a configuration update against a single individual device.  In making a change to the configuration, the application needs to build trust that its change has been made correctly and that it has not impacted the operation of the device. The application (and the application user) should feel confident that their change has not damaged the network.  </p>
<p id="rfc.section.Appendix E.1.p.2">Protecting each individual device consists of a number of steps: </p>

<ul>
<li>Acquiring the configuration lock.</li>
<li>Checkpointing the running configuration.</li>
<li>Loading and validating the incoming configuration.</li>
<li>Changing the running configuration.</li>
<li>Testing the new configuration.</li>
<li>Making the change permanent (if desired).</li>
<li>Releasing the configuration lock.</li>
</ul>

<p> </p>
<p id="rfc.section.Appendix E.1.p.3">Let's look at the details of each step.  </p>
<h1 id="rfc.appendix.Appendix E.1.1">
<a href="#rfc.appendix.Appendix%20E.1.1">Appendix E.1.1.</a> Acquiring the Configuration Lock</h1>
<p id="rfc.section.Appendix E.1.1.p.1">A lock should be acquired to prevent simultaneous updates from multiple sources.  If multiple sources are affecting the device, the application is hampered in both testing of its change to the configuration and in recovery if the update fails. Acquiring a short-lived lock is a simple defense to prevent other parties from introducing unrelated changes.  </p>
<div id="#rfc.figure.55"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;lock&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
    &lt;/lock&gt;
  &lt;/rpc&gt;
                 </pre>
<p id="rfc.section.Appendix E.1.1.p.2">The lock can be acquired using the &lt;lock&gt; operation.  </p>
<div id="#rfc.figure.56"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;lock&gt;
      &lt;target&gt;
        &lt;candidate/&gt;
      &lt;/target&gt;
    &lt;/lock&gt;
  &lt;/rpc&gt;
                 </pre>
<p id="rfc.section.Appendix E.1.1.p.3">If the :candidate capability is supported, the candidate configuration should be locked.  </p>
<h1 id="rfc.appendix.Appendix E.1.2">
<a href="#rfc.appendix.Appendix%20E.1.2">Appendix E.1.2.</a> Checkpointing the Running Configuration</h1>
<p id="rfc.section.Appendix E.1.2.p.1">The running configuration can be saved into a local file as a checkpoint before loading the new configuration. If the update fails, the configuration can be restored by reloading the checkpoint file.  </p>
<div id="#rfc.figure.57"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;copy-config&gt;
      &lt;target&gt;
        &lt;url&gt;file://checkpoint.conf&lt;/url&gt;
      &lt;/target&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
    &lt;/copy-config&gt;
  &lt;/rpc&gt;
                 </pre>
<p id="rfc.section.Appendix E.1.2.p.2">The checkpoint file can be created using the &lt;copy&#8209;config&gt; operation.  </p>
<p id="rfc.section.Appendix E.1.2.p.3">To restore the checkpoint file, reverse the source and target parameters.  </p>
<h1 id="rfc.appendix.Appendix E.1.3">
<a href="#rfc.appendix.Appendix%20E.1.3">Appendix E.1.3.</a> Loading and Validating the Incoming Configuration.</h1>
<div id="#rfc.figure.58"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;edit-config&gt;
      &lt;target&gt;
        &lt;candidate/&gt;
      &lt;/target&gt;
      &lt;config&gt;
        &lt;!-- place incoming configuration changes here --&gt;
      &lt;/config&gt;
    &lt;/edit-config&gt;
  &lt;/rpc&gt;
                 </pre>
<p id="rfc.section.Appendix E.1.3.p.1">If the :candidate capability is supported, the configuration can be loaded onto the device without impacting the running system.  </p>
<div id="#rfc.figure.59"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;validate&gt;
      &lt;source&gt;
        &lt;candidate/&gt;
      &lt;/source&gt;
    &lt;/validate&gt;
  &lt;/rpc&gt;
                 </pre>
<p id="rfc.section.Appendix E.1.3.p.2">If the device supports the :validate:1.1 capability, it will by default validate the incoming configuration when it is loaded into the candidate.  To avoid this validation, pass the &lt;test&#8209;option&gt; parameter with the value "set".  Full validation can be requested with the &lt;validate&gt; operation.  </p>
<h1 id="rfc.appendix.Appendix E.1.4">
<a href="#rfc.appendix.Appendix%20E.1.4">Appendix E.1.4.</a> Changing the Running Configuration</h1>
<p id="rfc.section.Appendix E.1.4.p.1">When the incoming configuration has been safely loaded onto the device and validated, it is ready to impact the running system.  </p>
<div id="#rfc.figure.60"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;commit&gt;
      &lt;confirmed/&gt;
      &lt;confirm-timeout&gt;120&lt;/confirm-timeout&gt;
    &lt;/commit&gt;
  &lt;/rpc&gt;
                 </pre>
<p id="rfc.section.Appendix E.1.4.p.2">If the device supports the :candidate capability, use the &lt;commit&gt; operation to set the running configuration to the candidate configuration. Use the &lt;confirmed&gt; parameter to allow automatic reversion to the original configuration if connectivity to the device fails.  </p>
<div id="#rfc.figure.61"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;edit-config&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
      &lt;config&gt;
        &lt;!-- place incoming configuration changes here --&gt;
      &lt;/config&gt;
    &lt;/edit-config&gt;
  &lt;/rpc&gt;
                 </pre>
<p id="rfc.section.Appendix E.1.4.p.3">If the candidate is not supported by the device, the incoming configuration change is loaded directly into running.  </p>
<h1 id="rfc.appendix.Appendix E.1.5">
<a href="#rfc.appendix.Appendix%20E.1.5">Appendix E.1.5.</a> Testing the New Configuration</h1>
<p id="rfc.section.Appendix E.1.5.p.1">Now that the incoming configuration has been integrated into the running configuration, the application needs to gain trust that the change has affected the device in the way intended without affecting it negatively.  </p>
<p id="rfc.section.Appendix E.1.5.p.2">To gain this confidence, the application can run tests of the operational state of the device. The nature of the test is dependent on the nature of the change and is outside the scope of this document. Such tests may include reachability from the system running the application (using ping), changes in reachability to the rest of the network (by comparing the device's routing table), or inspection of the particular change (looking for operational evidence of the BGP peer that was just added).  </p>
<h1 id="rfc.appendix.Appendix E.1.6">
<a href="#rfc.appendix.Appendix%20E.1.6">Appendix E.1.6.</a> Making the Change Permanent</h1>
<p id="rfc.section.Appendix E.1.6.p.1">When the configuration change is in place and the application has sufficient faith in the proper function of this change, the application is expected to make the change permanent.  </p>
<div id="#rfc.figure.62"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;copy-config&gt;
      &lt;target&gt;
        &lt;startup/&gt;
      &lt;/target&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
    &lt;/copy-config&gt;
  &lt;/rpc&gt;
                 </pre>
<p id="rfc.section.Appendix E.1.6.p.2">If the device supports the :startup capability, the current configuration can be saved to the startup configuration by using the startup configuration as the target of the &lt;copy&#8209;config&gt; operation.  </p>
<div id="#rfc.figure.63"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;commit/&gt;
  &lt;/rpc&gt;
                 </pre>
<p id="rfc.section.Appendix E.1.6.p.3">If the device supports the :candidate capability and a confirmed commit was requested, the confirming commit must be sent before the timeout expires.  </p>
<h1 id="rfc.appendix.Appendix E.1.7">
<a href="#rfc.appendix.Appendix%20E.1.7">Appendix E.1.7.</a> Releasing the Configuration Lock</h1>
<p id="rfc.section.Appendix E.1.7.p.1">When the configuration update is complete, the lock must be released, allowing other applications access to the configuration.  </p>
<div id="#rfc.figure.64"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;unlock&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
    &lt;/unlock&gt;
  &lt;/rpc&gt;
                 </pre>
<p id="rfc.section.Appendix E.1.7.p.2">Use the &lt;unlock&gt; operation to release the configuration lock.  </p>
<div id="#rfc.figure.65"></div>
<pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;unlock&gt;
      &lt;target&gt;
        &lt;candidate/&gt;
      &lt;/target&gt;
    &lt;/unlock&gt;
  &lt;/rpc&gt;
                 </pre>
<p id="rfc.section.Appendix E.1.7.p.3">If the :candidate capability is supported, the candidate configuration should be unlocked.  </p>
<h1 id="rfc.appendix.Appendix E.2">
<a href="#rfc.appendix.Appendix%20E.2">Appendix E.2.</a> Operations on Multiple Devices</h1>
<p id="rfc.section.Appendix E.2.p.1">When a configuration change requires updates across a number of devices, care needs to be taken to provide the required transaction semantics. The NETCONF protocol contains sufficient primitives upon which transaction-oriented operations can be built.  Providing complete transactional semantics across multiple devices is prohibitively expensive, but the size and number of windows for failure scenarios can be reduced.  </p>
<p id="rfc.section.Appendix E.2.p.2">There are two classes of multi-device operations.  The first class allows the operation to fail on individual devices without requiring all devices to revert to their original state. The operation can be retried at a later time, or its failure simply reported to the user. An example of this class might be adding an NTP server. For this class of operations, failure avoidance and recovery are focused on the individual device. This means recovery of the device, reporting the failure, and perhaps scheduling another attempt.  </p>
<p id="rfc.section.Appendix E.2.p.3">The second class is more interesting, requiring that the operation should complete on all devices or be fully reversed. The network should either be transformed into a new state or be reset to its original state. For example, a change to a VPN may require updates to a number of devices.  Another example of this might be adding a class-of-service definition. Leaving the network in a state where only a portion of the devices have been updated with the new definition will lead to future failures when the definition is referenced.  </p>
<p id="rfc.section.Appendix E.2.p.4">To give transactional semantics, the same steps used in single device operations listed above are used, but are performed in parallel across all devices. Configuration locks should be acquired on all target devices and kept until all devices are updated and the changes made permanent.  Configuration changes should be uploaded and validation performed across all devices.  Checkpoints should be made on each device.  Then the running configuration can be changed, tested, and made permanent. If any of these steps fail, the previous configurations can be restored on any devices upon which they were changed. After the changes have been completely implemented or completely discarded, the locks on each device can be released.  </p>
<h1 id="rfc.appendix.Appendix F">
<a href="#rfc.appendix.Appendix%20F">Appendix F.</a> Changes from RFC 4741</h1>
<p id="rfc.section.Appendix F.p.1">This section lists major changes between this document and RFC 4741.  </p>

<ul>
<li>Added the "malformed-message" error-tag.  </li>
<li>Added "remove" enumeration value to the operation attribute.  </li>
<li>Obsoleted the "partial-operation" error-tag enumeration value.  </li>
<li>Added &lt;persist&gt; and &lt;persist-id&gt; parameters to the &lt;commit&gt; operation.  </li>
<li>Updated the base protocol URI and clarified the &lt;hello&gt; message exchange to select and identify the base protocol version in use for a particular session.  </li>
<li>Added a YANG module to model the operations and removed the operation layer from the XSD.  </li>
<li>Clarified lock behavior for the candidate datastore.  </li>
<li>Clarified the error response server requirements for the "delete" operation attribute enumeration value.  </li>
<li>Added a namespace wildcarding mechanism for subtree filtering.  </li>
<li>Added a "test-only" value for the &lt;test&#8209;option&gt; parameter to the &lt;edit&#8209;config&gt; operation.  </li>
<li>Added a &lt;cancel&#8209;commit&gt; operation.  </li>
<li>Introduced a NETCONF username and a requirement for transport protocols to explain how a username is derived.  </li>
</ul>

<p> </p>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Rob Enns</span> editor
	  <span class="n hidden">
		<span class="family-name">Enns</span>
	  </span>
	</span>
	<span class="org vcardline">Juniper Networks</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:rob.enns@gmail.com">rob.enns@gmail.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Martin Bjorklund</span> editor
	  <span class="n hidden">
		<span class="family-name">Bjorklund</span>
	  </span>
	</span>
	<span class="org vcardline">Tail-f Systems</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:mbj@tail-f.com">mbj@tail-f.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Juergen Schoenwaelder</span> editor
	  <span class="n hidden">
		<span class="family-name">Schoenwaelder</span>
	  </span>
	</span>
	<span class="org vcardline">Jacobs University</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:j.schoenwaelder@jacobs-university.de">j.schoenwaelder@jacobs-university.de</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Andy Bierman</span> editor
	  <span class="n hidden">
		<span class="family-name">Bierman</span>
	  </span>
	</span>
	<span class="org vcardline">Brocade</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:andy.bierman@brocade.com">andy.bierman@brocade.com</a></span>

  </address>
</div>

</body>
</html>