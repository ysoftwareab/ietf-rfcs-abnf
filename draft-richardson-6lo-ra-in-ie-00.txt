



6lo Working Group                                          M. Richardson
Internet-Draft                                  Sandelman Software Works
Intended status: Informational                          October 18, 2016
Expires: April 21, 2017


     802.15.4 Informational Element encapsulation of ICMPv6 Router
                             Advertisements
                    draft-richardson-6lo-ra-in-ie-00

Abstract

   In TSCH mode of 802.15.4, as described by [I-D.ietf-6tisch-minimal],
   opportunities for broadcasts are limited to specific times and
   specific channels.  An enhanced beacon must be broadcast periodically
   by every router to keep all nodes in sync.  This document provides a
   mechanism by which other small ICMPv6 packets, such as Router
   Advertisements may be carried within the Enhanced Beacon, providing
   standard IPv6 router/host protocol.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on April 21, 2017.

Copyright Notice

   Copyright (c) 2016 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must



Richardson               Expires April 21, 2017                 [Page 1]

Internet-Draft                IE for ICMPv6                 October 2016


   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   2
     1.2.  Layer-2 Synchronization . . . . . . . . . . . . . . . . .   2
     1.3.  Layer-3 synchronization IPv6 Router solicitations and
           advertisements  . . . . . . . . . . . . . . . . . . . . .   3
   2.  Protocol Definition . . . . . . . . . . . . . . . . . . . . .   3
     2.1.  Protocol Example  . . . . . . . . . . . . . . . . . . . .   4
   3.  Security Considerations . . . . . . . . . . . . . . . . . . .   6
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   5.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   6
     5.1.  Normative References  . . . . . . . . . . . . . . . . . .   7
     5.2.  Informative References  . . . . . . . . . . . . . . . . .   8
   Appendix A.  appendix . . . . . . . . . . . . . . . . . . . . . .   8
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   9

1.  Introduction

   [I-D.ietf-6tisch-architecture] describes the use of the time-slotted
   channel hopping (TSCH) mode of [ieee802154].  As further details in
   [I-D.ietf-6tisch-minimal], an Extended Beacon is transmitted during a
   slot designated a broadcast slot.

   EDNOTE: Explain why broadcasts are rare, and why we need them.  What
   the Enhanced Beacon is, and what Information Elements are, and how
   the IETF has a subtype for that area.  Explain what kind of things
   could be placed in Information Elements, how big they could be, and
   how they could be compressed.

1.1.  Terminology

   In this document, the key words "MUST", "MUST NOT", "REQUIRED",
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
   and "OPTIONAL" are to be interpreted as described in BCP 14, RFC 2119
   [RFC2119] and indicate requirement levels for compliant STuPiD
   implementations.

1.2.  Layer-2 Synchronization

   As explained in section 6 of [I-D.ietf-6tisch-minimal], the Extended
   Beacon has a number of purposes: synchronization of ASN and Join
   Metric, timeslot template identifier, the channel hopping sequence
   identifier, TSCH SlotFrame and Link IE.



Richardson               Expires April 21, 2017                 [Page 2]

Internet-Draft                IE for ICMPv6                 October 2016


   The Extended Beacon is used by operating nodes to correct drift to
   their clock, by nodes on medium length sleeps to resynchronize their
   ASN, by nodes that have slept through a network rekey to rediscover
   the network, and by new Joining Nodes (pledges) to learn about the
   existance of the network.

   There are a limited number of timeslots designated as a broadcast
   slot by each router.  These slots are rare, and with 10ms slots, with
   a slot-frame length of 100, there may be only 1 slot/s for the
   beacon.

1.3.  Layer-3 synchronization IPv6 Router solicitations and
      advertisements

   At layer 3, [RFC2461] defines a mechanism by which nodes learn about
   routers by listening for multicasted Router Advertisements (RA).  If
   no RA is heard within a set time, then a Router Solicitation (RS) may
   be multicast, to which an RA will be received, usually unicast.

   Although [RFC6775] reduces the amount of multicast necessary to do
   address resolution via Neighbor Solicitation messages, it still
   requires multicast of either RAs or RS.  This is an expensive
   operation for two reasons: there are few multicast timeslots for
   unsolicited RAs; if a pledge node does not hear an RA, and decides to
   send a RS (consuming a broadcast aloha slot with unencrypted
   traffic), many unicast RS may be sent in response.

   This is a particularly acute issue for the join process for the
   following reasons:

   1.  use of a multicast slot by even a non-malicious unauthenticated
       node for a Router Solicitation may overwhelm that time slot.

   2.  it may require many seconds of on-time before a new pledge hears
       a Router Soliciation that it can use.

   3.  a new pledge may listen to many Enhanced Beacons before it can
       pick an appropriate network and/or closest Join Assistant to
       attach to.  If it must listen for a RS as well as find the
       Enhanced Beacon, then the process may take a very long time.

2.  Protocol Definition

   [I-D.kivinen-802-15-ie] creates a registry for new IETF IE subtypes.
   This document allocates a new subtype TBD-XXX.






Richardson               Expires April 21, 2017                 [Page 3]

Internet-Draft                IE for ICMPv6                 October 2016


   The base IE subtype structure is as follows.  As explained in
   [I-D.kivinen-802-15-ie] the length of the Sub-Type Content can be
   calculated.

                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   TBD-XXX     |       6LoRH encoded structure                 |
   +-+-+-+-+-+-+-+-+                                               |
   ~                       Sub-Type Content                        ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Inside the Sub-Type content should be placed compressed packets
   according to [RFC6282] (as updated by
   [I-D.ietf-6lo-dispatch-iana-registry].

2.1.  Protocol Example

   Typically a Router Advertisement will be placed inside the Sub-Type.
   The entire structure typically looks like:






























Richardson               Expires April 21, 2017                 [Page 4]

Internet-Draft                IE for ICMPv6                 October 2016


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |Ver  6 | TC = 0        |           Flow Label = 0              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Payload Length        |  NH = 58      | Hop Lmt = 1   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +                                                               +
   |                                                               |
   +                         Source Address                        +
   |                           fe80::LL                            |
   +                                                               +
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +                                                               +
   |                                                               |
   +                      Destination Address                      +
   |                           fe02::1                             |
   +                                                               +
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Type = 134   |  Code = 0     |          Checksum             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | HL = 0        |0|0|  Reserved |  Router lifetime = 9000       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                         Reachable Time   = 0  XXX             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          Retrans Timer   = 0  XXX             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Type = 1      | Len = 10      |    EUI-64 of router           |
   +-+-+-+-+-+-+-+-+-+-+-+---------+                               +
   |                    EUI-64 of router                           |
   +                               +---------------+---------------+
   | EUI-64 of router              | Type = TBD-YYY|  Len = 18     |
   +-------------------------------+-------------------------------+
   |                             DODAGID                           |
   +                                                               |
   |                                                               |
   +                                                               |
   |                                                               |
   +                                                               |
   |                                                               |
   +---------------------------------------------------------------+

   When compressed by [RFC6282], this becomes:




Richardson               Expires April 21, 2017                 [Page 5]

Internet-Draft                IE for ICMPv6                 October 2016


   +---------------------------------------------------------------+
   | 0 | 1 | 1 |TF= 11 |NH |HLIM=01|CID|SAC|  SAM  | M |DAC|  DAM  | 0
   +   |   |   |       | 0 |       | 0 | 0 | 0   1 + 1 + 0 + 1   1 +
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
   | NH = 0x58                     |   dstXX = 0x01                | 4
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Type = 134   |  Code = 0     |          Checksum             | 8
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | HL = 0        |0|0|  Reserved |  Router lifetime = 9000       | 12
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                         Reachable Time   = 0  XXX             | 16
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          Retrans Timer   = 0  XXX             | 20
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Type = 1      | Len = 10      |    EUI-64 of router           | 24
   +-+-+-+-+-+-+-+-+-+-+-+---------+                               +
   |                    EUI-64 of router                           | 28
   +                               +---------------+---------------+
   | EUI-64 of router              | Type = TBD-YYY|  Len = 18     | 32
   +-------------------------------+-------------------------------+
   |                             DODAGID                           | 36
   +                                                               |
   |                                                               | 40
   +                                                               |
   |                                                               | 44
   +                                                               |
   |                                                               | 48
   +---------------------------------------------------------------+

   The total number of bytes needed is 56 bytes.

3.  Security Considerations

   TBD.

4.  IANA Considerations

   Allocate a new number TBD-XXX from Registry IETF IE Sub-type ID.
   This entry should be called 6LoRH-in-IE.

   Allocate a new number TBD-YYY from Neighbor Discovery Option Types
   (RFC2461) with the name "Constrained Network Identification".

5.  References







Richardson               Expires April 21, 2017                 [Page 6]

Internet-Draft                IE for ICMPv6                 October 2016


5.1.  Normative References

   [I-D.ietf-6lo-dispatch-iana-registry]
              Chakrabarti, S., Montenegro, G., Droms, R., and j.
              woodyatt, "6lowpan ESC Dispatch Code Points and
              Guidelines", draft-ietf-6lo-dispatch-iana-registry-05
              (work in progress), September 2016.

   [I-D.ietf-6tisch-architecture]
              Thubert, P., "An Architecture for IPv6 over the TSCH mode
              of IEEE 802.15.4", draft-ietf-6tisch-architecture-10 (work
              in progress), June 2016.

   [I-D.ietf-6tisch-minimal]
              Vilajosana, X. and K. Pister, "Minimal 6TiSCH
              Configuration", draft-ietf-6tisch-minimal-16 (work in
              progress), June 2016.

   [I-D.kivinen-802-15-ie]
              Kivinen, T. and P. Kinney, "IEEE 802.15.4 Information
              Element for IETF", draft-kivinen-802-15-ie-03 (work in
              progress), October 2016.

   [ieee802154]
              IEEE Standard, ., "802.15.4-2015 - IEEE Standard for Low-
              Rate Wireless Personal Area Networks (WPANs)", 2015,
              <http://standards.ieee.org/findstds/
              standard/802.15.4-2015.html>.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <http://www.rfc-editor.org/info/rfc2119>.

   [RFC2461]  Narten, T., Nordmark, E., and W. Simpson, "Neighbor
              Discovery for IP Version 6 (IPv6)", RFC 2461,
              DOI 10.17487/RFC2461, December 1998,
              <http://www.rfc-editor.org/info/rfc2461>.

   [RFC6282]  Hui, J., Ed. and P. Thubert, "Compression Format for IPv6
              Datagrams over IEEE 802.15.4-Based Networks", RFC 6282,
              DOI 10.17487/RFC6282, September 2011,
              <http://www.rfc-editor.org/info/rfc6282>.








Richardson               Expires April 21, 2017                 [Page 7]

Internet-Draft                IE for ICMPv6                 October 2016


   [RFC6775]  Shelby, Z., Ed., Chakrabarti, S., Nordmark, E., and C.
              Bormann, "Neighbor Discovery Optimization for IPv6 over
              Low-Power Wireless Personal Area Networks (6LoWPANs)",
              RFC 6775, DOI 10.17487/RFC6775, November 2012,
              <http://www.rfc-editor.org/info/rfc6775>.

   [RFC7228]  Bormann, C., Ersue, M., and A. Keranen, "Terminology for
              Constrained-Node Networks", RFC 7228,
              DOI 10.17487/RFC7228, May 2014,
              <http://www.rfc-editor.org/info/rfc7228>.

5.2.  Informative References

   [RFC2460]  Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", RFC 2460, DOI 10.17487/RFC2460,
              December 1998, <http://www.rfc-editor.org/info/rfc2460>.

   [RFC4191]  Draves, R. and D. Thaler, "Default Router Preferences and
              More-Specific Routes", RFC 4191, DOI 10.17487/RFC4191,
              November 2005, <http://www.rfc-editor.org/info/rfc4191>.

   [RFC4443]  Conta, A., Deering, S., and M. Gupta, Ed., "Internet
              Control Message Protocol (ICMPv6) for the Internet
              Protocol Version 6 (IPv6) Specification", RFC 4443,
              DOI 10.17487/RFC4443, March 2006,
              <http://www.rfc-editor.org/info/rfc4443>.

   [RFC4655]  Farrel, A., Vasseur, J., and J. Ash, "A Path Computation
              Element (PCE)-Based Architecture", RFC 4655,
              DOI 10.17487/RFC4655, August 2006,
              <http://www.rfc-editor.org/info/rfc4655>.

   [RFC4861]  Narten, T., Nordmark, E., Simpson, W., and H. Soliman,
              "Neighbor Discovery for IP version 6 (IPv6)", RFC 4861,
              DOI 10.17487/RFC4861, September 2007,
              <http://www.rfc-editor.org/info/rfc4861>.

   [RFC7554]  Watteyne, T., Ed., Palattella, M., and L. Grieco, "Using
              IEEE 802.15.4e Time-Slotted Channel Hopping (TSCH) in the
              Internet of Things (IoT): Problem Statement", RFC 7554,
              DOI 10.17487/RFC7554, May 2015,
              <http://www.rfc-editor.org/info/rfc7554>.

Appendix A.  appendix

   insert appendix here





Richardson               Expires April 21, 2017                 [Page 8]

Internet-Draft                IE for ICMPv6                 October 2016


Author's Address

   Michael Richardson
   Sandelman Software Works

   Email: mcr+ietf@sandelman.ca













































Richardson               Expires April 21, 2017                 [Page 9]
