<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Specifying Holes in LoST Service Boundaries</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Specifying Holes in LoST Service Boundaries">
<meta name="keywords" content="Internet-Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">ECRIT</td><td class="header">J. Winterbottom</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">M. Thomson</td></tr>
<tr><td class="header">Intended status: BCP</td><td class="header">Andrew Corporation</td></tr>
<tr><td class="header">Expires: December 19, 2008</td><td class="header">June 17, 2008</td></tr>
</table></td></tr></table>
<h1><br />Specifying Holes in LoST Service Boundaries<br />draft-ietf-ecrit-specifying-holes-00.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on December 19, 2008.</p>

<h3>Abstract</h3>

<p>This document describes how holes can be specified in service boundaries. One means of implementing a solution is described.
      
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#terminology">2.</a>&nbsp;
Terminology<br />
<a href="#anchor1">3.</a>&nbsp;
Specifying Holes<br />
<a href="#anchor2">4.</a>&nbsp;
GML Polygons<br />
<a href="#anchor3">5.</a>&nbsp;
Holes in GML Polygons<br />
<a href="#anchor4">6.</a>&nbsp;
Service Boundary Specification and Selection Algorithm<br />
<a href="#security-considerations">7.</a>&nbsp;
Security Considerations<br />
<a href="#iana">8.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor5">9.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">10.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">10.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The LoST protocol <a class='info' href='#I-D.ietf-ecrit-lost'>[I&#8209;D.ietf&#8209;ecrit&#8209;lost]<span> (</span><span class='info'>Hardie, T., Newton, A., Schulzrinne, H., and H. Tschofenig, &ldquo;LoST: A Location-to-Service Translation Protocol,&rdquo; May&nbsp;2008.</span><span>)</span></a> describes a protocol that's primary purpose is to map service and locations to destination addresses.
         LoST does this by provisioning boundary maps or areas against service URNs. The boundary is a polygon made up of sets of geodetic
         coordinates specifying an enclosed area. In some circumstances an area enclosed by a polygon, also known as an exterior polygon, may contain exception areas, or holes, 
         that for the same service must yield a different destination to that described by the larger area. This document describes how holes SHOULD be specified
         in service boundaries defined using a GML encoding for the polygons and their internal elements (holes). GML polygons are based on elements defined in <a class='info' href='#ISO-19107'>[ISO&#8209;19107]<span> (</span><span class='info'>ISO, &ldquo;Geographic information - Spatial Schema,&rdquo; 5&nbsp;2003.</span><span>)</span></a>. 
      
</p>
<p>
                  </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     o-------------o
   /                \
  /    /\            \
 /    + +-----+       \
o     |  Hole  \       o
|     |    1   /       |
|     +-------+        |&lt;--- Primary Polygon
|        +-------+     |
|       /  Hole  |     |
o       \   2    |     o
 \       +-----+ +    /
  \             \/   /
   \                /
    o--------------o

</pre></div><p>

               
</p>
<a name="terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
         document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
      
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Specifying Holes</h3>

<p>Holes related to an exterior boundary polygon MUST adhere to the following rules:
         </p>
<blockquote class="text"><dl>
<dt>Rule 1: </dt>
<dd>Two holes MUST NOT have more than one point of intersection. If two or more holes share a common set of boundaries then to the primary polygon
               these represent a single hole in the service. The internal elements (holes) should have common boundaries removed and a single hole created irrespective 
               of whether the excluded area is itself made up of multiple service boundaries.
</dd>
</dl></blockquote><p>
      
</p>
<p>
                  <br /><hr class="insert" />
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     o-------------o                       o-------------o
   /                \                    /                \
  /    /\            \                  /    /\            \
 /    + +-----+       \                /    + +-----+       \
o     |  Hole  \       o              o     |        \       o
|     |    1    \      |              |     |  One    \      |
|     +-+-------+      |  =========&gt;  |     +-+  Hole +      |
|       /  Hole  |     |              |       /        |     |
o       \   2    |     o              o       \        |     o
 \       +-----+ +    /                \       +-----+ +    /
  \             \/   /                  \             \/   /
   \                /                    \                /
    o--------------o                      o--------------o

       Incorrect                              Correct

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Incorrect Hole Specification with Boundary Sharing&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

               
</p>
<p>     
          </p>
<blockquote class="text"><dl>
<dt>Rule 2: </dt>
<dd>A hole MUST NOT have more than one point of intersection with the outer-boundary of the primary (exterior) polygon. If more than one point of intersection occurs the primary polygon
              is either doesn't have a hole, it has an inlet as in <a class='info' href='#inletspec'>Figure&nbsp;1<span> (</span><span class='info'>Correct Specification of an Inlet</span><span>)</span></a>, or the primary polygon SHOULD be expressed as two polygons as in <a class='info' href='#multi-intersect'>Figure&nbsp;2<span> (</span><span class='info'>Correct Specification of Hole with Multiple Outer-Boundary Intersections</span><span>)</span></a>.
             
</dd>
</dl></blockquote><p>
          
</p>
<p>
                  <br /><hr class="insert" />
<a name="inletspec"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

           +------- Inlet
           |
           v
     o--+-----+----o                      o--o     o----o
   /    |%%%%%|     \                   /    |     |     \
  /    /%%%%%%|      \                 /    /      |      \
 /    +%%%%%%%|       \               /    o       o       \
o     |%%%%%%%%\       o             o     |        \       o
|     |%%%%%%%%%\      |             |     |         \      |
|     +-+%%%%%%%%+     |  ========&gt;  |     o-o        o     |
|       /%%%%%%%%|     |             |       /        |     |
o       \%%%%%%%%|     o             o       \        |     o
 \       +-----+ +    /               \       o-----o o    /
  \             \/   /                 \             \/   /
   \                /                   \                /
    o--------------o                     o--------------o

       Incorrect                             Correct

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Correct Specification of an Inlet&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

               
</p>
<p>
                  <br /><hr class="insert" />
<a name="multi-intersect"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


    A--q-----------B                     A-q   q----------B
   /  | |           \                   /  |   |           \
  /   | |            \                 /   |   |            \
 /    z r-----s       \               / P  z   r-----s   P   \
H     |        \       C             H  o  |          \   o   C
|     |  One    \      |             |  l  |           \   l  |
|     y-x  Hole  t     |  ========&gt;  |  y  y-x          t  y  |
|       /        |     |             |  g    /          |  g  |
G       \        |     D             G  o    \          |  o  D
 \      /    v---u    /               \ n    /      v---u  n /
  \     \   /        /                 \  1  \     /      2 /
   \     \ /        /                   \     \   /        /
    F-----w--------E                     F-----w w--------E

      1 Polgon with a                     2 Polygons that map
       Dividing Hole                      to the same service

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Correct Specification of Hole with Multiple Outer-Boundary Intersections&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

               
</p>
<p>Similarly, a polygon containing a hole with an island must be represented as two polygons mapping to the same service.
            
</p>
<p> 
          </p>
<blockquote class="text"><dl>
<dt>Rule 3: </dt>
<dd>A hole MUST be a legal polygon in accordance with the geoshape specification <a class='info' href='#geoshape'>[geoshape]<span> (</span><span class='info'>Thomson, M. and C. Reed, &ldquo;GML 3.1.1 PIDF-LO Shape Application Schema for use by the                   Internet Engineering Task Force (IETF),&rdquo; April&nbsp;2007.</span><span>)</span></a>. There is no restriction on the number of points
               that may be used to express the perimeter of the hole.
</dd>
</dl></blockquote><p>
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
GML Polygons</h3>

<p>The GML encoding of a polygon defines a enclosed exterior boundary, with the first and last points of boundary being the same.
     Consider the example in <a class='info' href='#exhex'>Figure&nbsp;3<span> (</span><span class='info'>Hexagon and Associated GML</span><span>)</span></a>.  
  
</p>
<p>
    <br /><hr class="insert" />
<a name="exhex"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     B-------------C
   /                \
  /                  \
 /                    \
A                      D
 \                    /
  \                  /
   \                /
    F--------------E

&lt;gml:Polygon srsName="urn:ogc:def:crs:EPSG::4326"&gt;
  &lt;gml:exterior&gt;
    &lt;gml:LinearRing&gt;
      &lt;gml:pos&gt;43.311 -73.422&lt;/gml:pos&gt; &lt;!--A--&gt;
      &lt;gml:pos&gt;43.111 -73.322&lt;/gml:pos&gt; &lt;!--F--&gt;
      &lt;gml:pos&gt;43.111 -73.222&lt;/gml:pos&gt; &lt;!--E--&gt;
      &lt;gml:pos&gt;43.311 -73.122&lt;/gml:pos&gt; &lt;!--D--&gt;
      &lt;gml:pos&gt;43.411 -73.222&lt;/gml:pos&gt; &lt;!--C--&gt;
      &lt;gml:pos&gt;43.411 -73.322&lt;/gml:pos&gt; &lt;!--B--&gt;
      &lt;gml:pos&gt;43.311 -73.422&lt;/gml:pos&gt; &lt;!--A--&gt;
    &lt;/gml:LinearRing&gt;
  &lt;/gml:exterior&gt;
&lt;/gml:Polygon&gt;

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Hexagon and Associated GML&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

  
</p>
<p>NOTE that polygon vertices in <a class='info' href='#exhex'>Figure&nbsp;3<span> (</span><span class='info'>Hexagon and Associated GML</span><span>)</span></a> are expressed using &lt;pos&gt; elements for clarity. The vertices can also be expressed
     using a &lt;posList&gt; element.
  
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Holes in GML Polygons</h3>

<p>A hole is specified in the polygon by defining an interior boundary. The points defining the internal boundary define the
     area represented by the hole in the primary (exterior) polygon. The shaded area in <a class='info' href='#holehex'>Figure&nbsp;4<span> (</span><span class='info'>Hexagon with Hole</span><span>)</span></a> is represented by the
     4 points of the interior boundary specified in <a class='info' href='#holetext'>Figure&nbsp;5<span> (</span><span class='info'>GML for Hexagon with Hole</span><span>)</span></a>.
  
</p>
<p>
    <br /><hr class="insert" />
<a name="holehex"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    B-------------C
   /               \
  / w-------------x \
 /  |/////////////|  \
A   |/////////////|   D
 \  |/////////////|  /
  \ z-------------y /
   \               /
    F-------------E

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Hexagon with Hole&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

  
</p>
<p>
    <br /><hr class="insert" />
<a name="holetext"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;gml:Polygon srsName="urn:ogc:def:crs:EPSG::4326"&gt;
  &lt;gml:exterior&gt;
    &lt;gml:LinearRing&gt;
      &lt;gml:pos&gt;43.311 -73.422&lt;/gml:pos&gt; &lt;!--A--&gt;
      &lt;gml:pos&gt;43.111 -73.322&lt;/gml:pos&gt; &lt;!--F--&gt;
      &lt;gml:pos&gt;43.111 -73.222&lt;/gml:pos&gt; &lt;!--E--&gt;
      &lt;gml:pos&gt;43.311 -73.122&lt;/gml:pos&gt; &lt;!--D--&gt;
      &lt;gml:pos&gt;43.511 -73.222&lt;/gml:pos&gt; &lt;!--C--&gt;
      &lt;gml:pos&gt;43.511 -73.322&lt;/gml:pos&gt; &lt;!--B--&gt;
      &lt;gml:pos&gt;43.311 -73.422&lt;/gml:pos&gt; &lt;!--A--&gt;
    &lt;/gml:LinearRing&gt;
  &lt;/gml:exterior&gt;
  &lt;gml:interior&gt;
    &lt;gml:LinearRing&gt;
      &lt;gml:pos&gt;43.411 -73.322&lt;/gml:pos&gt; &lt;!--w--&gt;
      &lt;gml:pos&gt;43.211 -73.322&lt;/gml:pos&gt; &lt;!--z--&gt;
      &lt;gml:pos&gt;43.211 -73.222&lt;/gml:pos&gt; &lt;!--y--&gt;
      &lt;gml:pos&gt;43.411 -73.222&lt;/gml:pos&gt; &lt;!--x--&gt;
      &lt;gml:pos&gt;43.411 -73.322&lt;/gml:pos&gt; &lt;!--w--&gt;
    &lt;/gml:LinearRing&gt;
  &lt;/gml:interior&gt;
&lt;/gml:Polygon&gt;

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: GML for Hexagon with Hole&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

  
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Service Boundary Specification and Selection Algorithm</h3>

<p>A service boundary is represented by a polygon that may have many vertices. The enclosed area of the polygon represents the area in which
   a service, expressed as a service URN, maps to a single URI. <a class='info' href='#I-D.schulzrinne-ecrit-lost-sync'>[I&#8209;D.schulzrinne&#8209;ecrit&#8209;lost&#8209;sync]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;Synchronizing Location-to-Service Translation (LoST) Servers,&rdquo; February&nbsp;2008.</span><span>)</span></a> describes how LoST servers
   may synchronize with one another and provides examples of possible boundary exchanges and data formats. At the time of writing there is no
   standard format for service provisioning data into a LoST server, the format described in <a class='info' href='#I-D.schulzrinne-ecrit-lost-sync'>[I&#8209;D.schulzrinne&#8209;ecrit&#8209;lost&#8209;sync]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;Synchronizing Location-to-Service Translation (LoST) Servers,&rdquo; February&nbsp;2008.</span><span>)</span></a>
   is used for the example in this section.

</p>
<p><a class='info' href='#holehex'>Figure&nbsp;4<span> (</span><span class='info'>Hexagon with Hole</span><span>)</span></a> shall be used to illustrate two service boundaries. The first service boundary A-&gt;F shall be referred to
   as area-A, and the second service boundary w-&gt;z shall be referred to as area-w. Further more area-A is directly represented by the
   GML encoding provided in <a class='info' href='#holetext'>Figure&nbsp;5<span> (</span><span class='info'>GML for Hexagon with Hole</span><span>)</span></a>. Area-w is represented as a hole in area-A by the interior boundary. Since area-w is 
   also a service boundary, a separate polygon describing this area is also required and is shown in <a class='info' href='#area-w'>Figure&nbsp;6<span> (</span><span class='info'>GML for Area-w</span><span>)</span></a>.

</p>
<p>
    <br /><hr class="insert" />
<a name="area-w"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;gml:Polygon srsName="urn:ogc:def:crs:EPSG::4326"&gt;
  &lt;gml:exterior&gt;
    &lt;gml:LinearRing&gt;
      &lt;gml:pos&gt;43.411 -73.322&lt;/gml:pos&gt; &lt;!--w--&gt;
      &lt;gml:pos&gt;43.211 -73.322&lt;/gml:pos&gt; &lt;!--z--&gt;
      &lt;gml:pos&gt;43.211 -73.222&lt;/gml:pos&gt; &lt;!--y--&gt;
      &lt;gml:pos&gt;43.411 -73.222&lt;/gml:pos&gt; &lt;!--x--&gt;
      &lt;gml:pos&gt;43.411 -73.322&lt;/gml:pos&gt; &lt;!--w--&gt;
    &lt;/gml:LinearRing&gt;
  &lt;/gml:exterior&gt;
&lt;/gml:Polygon&gt;

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: GML for Area-w&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

  
</p>
<p>If this data were in a LoST server and was required in a neighbouring LoST server, the data transfer using the format
     in <a class='info' href='#I-D.schulzrinne-ecrit-lost-sync'>[I&#8209;D.schulzrinne&#8209;ecrit&#8209;lost&#8209;sync]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;Synchronizing Location-to-Service Translation (LoST) Servers,&rdquo; February&nbsp;2008.</span><span>)</span></a> would look similar to <a class='info' href='#lost-services'>Figure&nbsp;7<span> (</span><span class='info'>Service Boundary Specifications</span><span>)</span></a>.
  
</p>
<p>
    <br /><hr class="insert" />
<a name="lost-services"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;pushMappingsRequest xmlns="urn:ietf:params:xml:ns:lost1:sync"&gt;
   &lt;mappings&gt;
     &lt;mapping sourceId="lost:area-A.nsw.au.example"
       version="1" lastUpdated="2007-11-26T01:00:00Z"
       timeToLive="2007-12-26T01:00:00Z"&gt;
       &lt;displayName xml:lang="en"&gt;
         Outer Area Police Department
       &lt;/displayName&gt;
       &lt;service&gt;urn:service:sos.police&lt;/service&gt;
       &lt;serviceBoundary profile="geodetic-2d"&gt;
          &lt;gml:Polygon srsName="urn:ogc:def:crs:EPSG::4326"&gt;
            &lt;gml:exterior&gt;
              &lt;gml:LinearRing&gt;
                &lt;gml:pos&gt;43.311 -73.422&lt;/gml:pos&gt;
                &lt;gml:pos&gt;43.111 -73.322&lt;/gml:pos&gt;
                &lt;gml:pos&gt;43.111 -73.222&lt;/gml:pos&gt;
                &lt;gml:pos&gt;43.311 -73.122&lt;/gml:pos&gt;
                &lt;gml:pos&gt;43.511 -73.222&lt;/gml:pos&gt;
                &lt;gml:pos&gt;43.511 -73.322&lt;/gml:pos&gt;
                &lt;gml:pos&gt;43.311 -73.422&lt;/gml:pos&gt;
              &lt;/gml:LinearRing&gt;
            &lt;/gml:exterior&gt;
            &lt;gml:interior&gt;
              &lt;gml:LinearRing&gt;
                &lt;gml:pos&gt;43.411 -73.322&lt;/gml:pos&gt;
                &lt;gml:pos&gt;43.211 -73.322&lt;/gml:pos&gt;
                &lt;gml:pos&gt;43.211 -73.222&lt;/gml:pos&gt;
                &lt;gml:pos&gt;43.411 -73.222&lt;/gml:pos&gt;
                &lt;gml:pos&gt;43.411 -73.322&lt;/gml:pos&gt;
              &lt;/gml:LinearRing&gt;
            &lt;/gml:interior&gt;
          &lt;/gml:Polygon&gt;
      &lt;/serviceBoundary&gt;
       &lt;uri&gt;sip:area-A-pd@example.com&lt;/uri&gt;
       &lt;uri&gt;xmpp:area-A-pd@example.com&lt;/uri&gt;
       &lt;serviceNumber&gt;000&lt;/serviceNumber&gt;
     &lt;/mapping&gt;
     &lt;mapping sourceId="lost:area-w.nsw.au.example"
       version="1" lastUpdated="2007-11-26T01:00:00Z"
       timeToLive="2007-12-26T01:00:00Z"&gt;
       &lt;displayName xml:lang="en"&gt;
         Inner Area Police Department
       &lt;/displayName&gt;
       &lt;service&gt;urn:service:sos.police&lt;/service&gt;
       &lt;serviceBoundary profile="geodetic-2d"&gt;
          &lt;gml:Polygon srsName="urn:ogc:def:crs:EPSG::4326"&gt;
            &lt;gml:exterior&gt;
              &lt;gml:LinearRing&gt;
                &lt;gml:pos&gt;43.411 -73.322&lt;/gml:pos&gt;
                &lt;gml:pos&gt;43.211 -73.322&lt;/gml:pos&gt;
                &lt;gml:pos&gt;43.211 -73.222&lt;/gml:pos&gt;
                &lt;gml:pos&gt;43.411 -73.222&lt;/gml:pos&gt;
                &lt;gml:pos&gt;43.411 -73.322&lt;/gml:pos&gt;
              &lt;/gml:LinearRing&gt;
            &lt;/gml:exterior&gt;
          &lt;/gml:Polygon&gt;
      &lt;/serviceBoundary&gt;
       &lt;uri&gt;sip:area-w-pd@example.com&lt;/uri&gt;
       &lt;uri&gt;xmpp:area-w-pd@example.com&lt;/uri&gt;
       &lt;serviceNumber&gt;000&lt;/serviceNumber&gt;
     &lt;/mapping&gt;
    &lt;/mappings&gt;
   &lt;/pushMappingsRequest&gt;

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Service Boundary Specifications&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

  
</p>
<p>It is considered likely that LoST servers will need to provide responses sufficiently quickly to allow 
     real-time queries to be performed as part of an emergency call routing flow. It is for this reason that
     databases supporting native geospatial query techniques are desirable and that service boundary specifications
     that are easily mapped to internal data structures are preferred. The format described in this memo makes support for
     this operation easy, while allowing an arbitrary number of holes in a service boundary to be specified.     
  
</p>
<p>Each primary polygon is stored in the geospatial database and mapped to a service URN and destination URI.
     Holes may be stored as polygons in a separate table and mapped to the primary polygon. When a location is
     found to map to a polygon, the exceptions table can be checked to see if the primary polygon contains any coverage holes.
     In general no holes will exist for a service boundary, so this check results in almost no overhead and the service mapping can be returned.
     Where one or more holes are found to exist, the provided location is checked against each hole. If the location is found to exist in
     one of the specified holes then the primary polygon can be discarded, and searching of the service boundary database can continue.
  
</p>
<a name="security-considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>This document does not introduce any security issues
  
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>There are no specific IANA considerations for this document.
 
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Acknowledgements</h3>

<p>Thanks to Carl Reed for input provided to the list some months back and for reviewing this document.
   Thanks also to Michael Haberler for suggesting that such a specification is required.

</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-ecrit-lost">[I-D.ietf-ecrit-lost]</a></td>
<td class="author-text">Hardie, T., Newton, A., Schulzrinne, H., and H. Tschofenig, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-ecrit-lost-10.txt">LoST: A Location-to-Service Translation Protocol</a>,&rdquo; draft-ietf-ecrit-lost-10 (work in progress), May&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-ecrit-lost-10.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.schulzrinne-ecrit-lost-sync">[I-D.schulzrinne-ecrit-lost-sync]</a></td>
<td class="author-text">Schulzrinne, H., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-schulzrinne-ecrit-lost-sync-01.txt">Synchronizing Location-to-Service Translation (LoST) Servers</a>,&rdquo; draft-schulzrinne-ecrit-lost-sync-01 (work in progress), February&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-schulzrinne-ecrit-lost-sync-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="geoshape">[geoshape]</a></td>
<td class="author-text">Thomson, M. and C. Reed, &ldquo;GML 3.1.1 PIDF-LO Shape Application Schema for use by the
                  Internet Engineering Task Force (IETF),&rdquo; Candidate OpenGIS Implementation Specification&nbsp;06-142r1, Version: 1.0, April&nbsp;2007.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="ISO-19107">[ISO-19107]</a></td>
<td class="author-text">ISO, &ldquo;Geographic information - Spatial Schema,&rdquo; ISO Standard&nbsp;19107, First Edition, 5&nbsp;2003.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">James Winterbottom</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PO Box U40</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Wollongong, NSW  2500</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AU</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:james.winterbottom@andrew.com">james.winterbottom@andrew.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martin Thomson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PO Box U40</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Wollongong, NSW  2500</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AU</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:martin.thomson@andrew.com">martin.thomson@andrew.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
