


Internet Engineering Task Force                 Shimin Ban, Hao Liu, Ed.
Internet-Draft                                        H3C Tech. Co., Ltd
Intended status: Standards Track                Shimin Ban, Hao Liu, Ed. 
Expires: September 21, 2009                           H3C Tech. Co., Ltd
                                                          March 20, 2009


                       SNMP ERROR STATUS MIB
               draft-shimin-opsawg-snmp-errorstatusmib-00

Status of This Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.  This document may contain material
   from IETF Documents or IETF Contributions published or made publicly
   available before November 10, 2008.  The person(s) controlling the
   copyright in some of this material may not have granted the IETF
   Trust the right to allow modifications of such material outside the
   IETF Standards Process.  Without obtaining an adequate license from
   the person(s) controlling the copyright in such materials, this
   document may not be modified outside the IETF Standards Process, and
   derivative works of it may not be created outside the IETF Standards
   Process, except to format it for publication as an RFC or to
   translate it into languages other than English.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on September 21, 2009.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.




Ban  &  Liu              Expires September 21, 2009             [Page 1]

Internet-Draft            SNMP Error Status MIB               March 2009


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.

Abstract

   This memo defines a portion of the Management Information Base (MIB),
   the SNMP Error Status MIB, for use with network management protocols.
   In particular, the SNMP Error Status MIB will be used to get the 
   detailed error information of the SNMP request.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  The Internet-Standard Management Framework . . . . . . . . . .  3
   3.  Conventions  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   4.  Overview . . . . . . . . . . . . . . . . . . . . . . . . . . .  4
   5.  Definitions  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   6.  Security Considerations  . . . . . . . . . . . . . . . . . . .  8
   7.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  8
   8.  References . . . . . . . . . . . . . . . . . . . . . . . . . .  8
     8.1.  Normative References . . . . . . . . . . . . . . . . . . .  8
     8.2.  Informative References . . . . . . . . . . . . . . . . . .  9
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . .  9
























Ban  &  Liu              Expires September 21, 2009             [Page 2]

Internet-Draft            SNMP Error Status MIB               March 2009


1.  Introduction

   SNMP is a widely used protocol to manage devices in IP network. 
   RFC3416 [RFC3416] defindes the following 18 error status:
   
                   tooBig(1),
                   noSuchName(2),
                   badValue(3),
                   readOnly(4),
                   genErr(5),
                   noAccess(6),
                   wrongType(7),
                   wrongLength(8),
                   wrongEncoding(9),
                   wrongValue(10),
                   noCreation(11),
                   inconsistentValue(12),
                   resourceUnavailable(13),
                   commitFailed(14),
                   undoFailed(15),
                   authorizationError(16),
                   notWritable(17),
                   inconsistentName(18)
                     
   But in many applications these error status can not reflect the 
   detailed error information of the specific services. For example, if 
   there is an 'badValue' error status returned when the user creates a 
   new VLAN, the possible causes may be that the VLAN already exists or 
   VLAN ID exceeds the range or some port cannot be added to VLAN etc. 
   However, currently the user can't figure out what's the real cause of 
   the error.

   This document defines a MIB module which provides a way to get the
   detailed error information from agent, through which the SNMP
   applications can feed back the real cause of the error to the user.
   So he can easily identify and solve the problem.
   
2.  The Internet-Standard Management Framework

   For a detailed overview of the documents that describe the current
   Internet-Standard Management Framework, please refer to section 7 of
   RFC 3410 [RFC3410].

   Managed objects are accessed via a virtual information store, termed
   the Management Information Base or MIB.  MIB objects are generally
   accessed through the Simple Network Management Protocol (SNMP).
   Objects in the MIB are defined using the mechanisms defined in the
   Structure of Management Information (SMI).  This memo specifies a MIB
   
   
   
Ban  &  Liu              Expires September 21, 2009             [Page 3]

Internet-Draft            SNMP Error Status MIB               March 2009


   module that is compliant to the SMIv2, which is described in STD 58,
   RFC 2578 [RFC2578], STD 58, RFC 2579 [RFC2579] and STD 58, RFC 2580
   [RFC2580].

3.  Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

4.  Overview

   A new table is defined to store the detailed error information in 
   this MIB module. For example, the table is named snmpESTable.
   
   When the manager sends request to the agent, if there is an error 
   occurred, the error messange handling process SHOULD consist of the 
   following steps:
   
(1)  The agent SHOULD create an entry in the snmpESTable and store the
     detailed error information to the entry.
     The index of snmpESTable is an unique random value created by the 
     agent.
     
(2)  The agent returns a response with the index of the entry being 
     filled in the error-status field. 
     
(3)  The manager receives the response. It extracts the error status 
     index from the response.
     
(4)  The manager sends the request to the agent to query the detailed 
     error information by the error status index.

   In order to be backward-compatible with the former error status, the 
   table SHOULD contain the 18 error status as SNMP defined with the 
   index from 1 to 18.
   
   Because the error information needn't to be kept for long time and 
   in order to save the cache space, the agent SHOULD remove the invalid 
   data periodically.

5.  Definitions

   SNMP-ERROR-STATUS-MIB DEFINITIONS ::= BEGIN

   IMPORTS
       MODULE-IDENTITY, OBJECT-TYPE, snmpModules, 




Ban  &  Liu              Expires September 21, 2009             [Page 4]

Internet-Draft            SNMP Error Status MIB               March 2009


       TimeTicks
           FROM SNMPv2-SMI

       DisplayString
           FROM SNMPv2-TC

       MODULE-COMPLIANCE, OBJECT-GROUP
           FROM SNMPv2-CONF;

   snmpESMIB MODULE-IDENTITY
       LAST-UPDATED "0903200000Z"
       ORGANIZATION "IETF Operations and Management Area Working Group
                  http://www.ietf.org/html.charters/opsawg-charter.html"
       CONTACT-INFO
           "General Discussion: opsawg@ietf.org
            To Subscribe: https://www1.ietf.org/mailman/listinfo/opsawg
            
            Shimin Ban
            Oriental Electronic Bld., No.2, Chuangye Road, 
            Shang-Di Information Industry Base, Hai-Dian District, 
            Beijing, P.R.China
            Email:  banshimin@h3c.com
        		
            Hao Liu
            Oriental Electronic Bld., No.2, Chuangye Road, 
            Shang-Di Information Industry Base, Hai-Dian District, 
            Beijing, P.R.China
            Email:  lhao@h3c.com

       DESCRIPTION
           "Copyright (C) 2009 The Internet Society.  This version of 
            the MIB module is part of RFC xxx; see the RFC itself 
            for full legal notices.
            
            This MIB module defines MIB objects which provide a way to 
            get the detailed error information of the SNMP request."
       REVISION    "0903200000Z"
       DESCRIPTION "The initial revision, published as RFC xxx"
       ::= { snmpModules 30 }

   snmpESObjects       OBJECT IDENTIFIER ::=
                                             { snmpESMIB 1 }
   snmpESConformance   OBJECT IDENTIFIER ::=
                                             { snmpESMIB 2 }
   --
   --
   -- The snmpESObjects group
   --



Ban  &  Liu              Expires September 21, 2009             [Page 5]

Internet-Draft            SNMP Error Status MIB               March 2009


   --

   snmpESTable OBJECT-TYPE
       SYNTAX      SEQUENCE OF snmpESEntry
       MAX-ACCESS  not-accessible
       STATUS      current
       DESCRIPTION
           "A table of SNMP error status information.
           
            In order to be backward-compatible with the former error 
            status, the table should contain the 18 error status as SNMP 
            defined with the index from 1 to 18."
       ::= { snmpESObjects 1 }

   snmpESEntry OBJECT-TYPE
       SYNTAX      snmpESEntry
       MAX-ACCESS  not-accessible
       STATUS      current
       DESCRIPTION
           "An entry of SNMP error status.
           
            If there is an error occurred while processing a request,
            the agent should create an entry in the table."
       INDEX { snmpErrorStatus }
       ::= { snmpESTable 1 }

   SnmpNotifyEntry ::= SEQUENCE {
       snmpErrorStatus        INTEGER,
       snmpErrorDescr         DisplayString,
       snmpErrorCreateTime    TimeTicks
   }

   snmpErrorStatus OBJECT-TYPE
       SYNTAX      INTEGER
       MAX-ACCESS  not-accessible
       STATUS      current
       DESCRIPTION
           "An unique value for each error. The value should be filled
            in the error-status field of the response, through which the 
            user can get the detailed error information."
       ::= { snmpESEntry 1 }

   snmpErrorDescr OBJECT-TYPE
       SYNTAX      DisplayString (SIZE (0..255))
       MAX-ACCESS  read-only
       STATUS      current
       DESCRIPTION
           "The detailed description of the error, which can be used



Ban  &  Liu              Expires September 21, 2009             [Page 6]

Internet-Draft            SNMP Error Status MIB               March 2009


            directly to display by the SNMP applications."
       ::= { snmpESEntry 2 }

   snmpErrorCreateTime OBJECT-TYPE
       SYNTAX      TimeTicks
       MAX-ACCESS  read-only
       STATUS      current
       DESCRIPTION
           "The value of sysUpTime at the time the error occurred."
       ::= { snmpESEntry 3 }

   --
   --
   -- Conformance information
   --
   --
   snmpESCompliances OBJECT IDENTIFIER ::=
                                           { snmpESConformance 1 }
   snmpESGroups      OBJECT IDENTIFIER ::=
                                           { snmpESConformance 2 }

   --
   --
   -- Compliance statements
   --
   --

   snmpESCompliance MODULE-COMPLIANCE
       STATUS      current
       DESCRIPTION
           "The compliance statement for SNMP entities which implement
            the SNMP error status MIB."
       MODULE -- This Module
           MANDATORY-GROUPS { snmpESGroup }
       ::= { snmpESCompliances 1 }

   snmpESGroup OBJECT-GROUP
       OBJECTS {
           snmpErrorDescr,
           snmpErrorCreateTime
       }
       STATUS      current
       DESCRIPTION
           "A collection of objects providing an agent detailed error
            information."
       ::= { snmpESGroups 1 }

   END



Ban  &  Liu              Expires September 21, 2009             [Page 7]

Internet-Draft            SNMP Error Status MIB               March 2009


6.  Security Considerations

   The objects contained in this MIB are all 'read-only' ones. 
   Unauthorized access to these objects is relatively innocuous. 

7.  IANA Considerations

   The MIB module in this document uses the following IANA-assigned
   OBJECT IDENTIFIER values recorded in the SMI Numbers registry:

        Descriptor        OBJECT IDENTIFIER value
        ----------        -----------------------

        snmpESMIB  { snmpModules XXX }

8.  References

8.1.  Normative References

   [RFC2119]                                     Bradner, S., "Key words
                                                 for use in RFCs to
                                                 Indicate Requirement
                                                 Levels", BCP 14,
                                                 RFC 2119, March 1997.

   [RFC2578]                                     McCloghrie, K., Ed.,
                                                 Perkins, D., Ed., and
                                                 J. Schoenwaelder, Ed.,
                                                 "Structure of
                                                 Management Information
                                                 Version 2 (SMIv2)",
                                                 STD 58, RFC 2578,
                                                 April 1999.

   [RFC2579]                                     McCloghrie, K., Ed.,
                                                 Perkins, D., Ed., and
                                                 J. Schoenwaelder, Ed.,
                                                 "Textual Conventions
                                                 for SMIv2", STD 58,
                                                 RFC 2579, April 1999.

   [RFC2580]                                     McCloghrie, K.,
                                                 Perkins, D., and J.
                                                 Schoenwaelder,
                                                 "Conformance Statements
                                                 for SMIv2", STD 58,
                                                 RFC 2580, April 1999.




Ban  &  Liu              Expires September 21, 2009             [Page 8]

Internet-Draft            SNMP Error Status MIB               March 2009


   [RFC3416]                                     Presuhn, R., "Version 2 
                                                 of the Protocol 
                                                 Operations for the 
                                                 Simple Network 
                                                 Management Protocol 
                                                 (SNMP)", RFC 3416, 
                                                 December 2002.

8.2.  Informative References

   [RFC3410]                                     Case, J., Mundy, R.,
                                                 Partain, D., and B.
                                                 Stewart, "Introduction
                                                 and Applicability
                                                 Statements for
                                                 Internet-Standard
                                                 Management Framework",
                                                 RFC 3410,
                                                 December 2002.

Authors' Addresses

   Shimin Ban (editor)
   H3C Tech. Co., Ltd
   Oriental Electronic Bld., No.2, Chuangye Road, 
   Shang-Di Information Industry Base, Hai-Dian District, 
   Beijing
   P.R.China(100085)

   Phone: +86 010 82774468
   EMail: banshimin@h3c.com


   Hao Liu
   H3C Tech. Co., Ltd
   Oriental Electronic Bld., No.2, Chuangye Road, 
   Shang-Di Information Industry Base, Hai-Dian District, 
   Beijing
   P.R.China(100085)

   Phone: +86 010 82774469
   EMail: lhao@h3c.com









Ban  &  Liu              Expires September 21, 2009             [Page 9]

