



NETCONF Working Group                                              Q. Wu
Internet-Draft                                                 R. Ranade
Intended status: Standards Track                                  Huawei
Expires: December 21, 2018                                 June 19, 2018


                      Base Notifications for NMDA
               draft-wu-netconf-base-notification-nmda-01

Abstract

   The Network Configuration Protocol (NETCONF) provides mechanisms to
   manipulate configuration datastores.  NMDA introduces additional
   datastores for systems that support more advanced processing chains
   converting configuration to operational state.  However, client
   applications are not able to be aware of common events pertaining to
   additional datstores, such as a data validation state change in
   NETCONF server, that may impact management applications.  This
   document updates [RFC6470] to allow a NETCONF client to receive
   additional notifications for some common system events pertaining to
   the Network Management Datastore Architecture (NMDA) defined in
   [RFC8342].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on December 21, 2018.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of



Wu & Ranade             Expires December 21, 2018               [Page 1]

Internet-Draft           Base notifications NMDA               June 2018


   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   3
   2.  Summary of Updates to RFC 6470  . . . . . . . . . . . . . . .   3
   3.  NETCONF Base Notifications YANG Model extension for NMDA  . .   3
     3.1.  Overview  . . . . . . . . . . . . . . . . . . . . . . . .   3
     3.2.  Definitions . . . . . . . . . . . . . . . . . . . . . . .   5
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .   8
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   8
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   9
   7.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .   9
   8.  Normative References  . . . . . . . . . . . . . . . . . . . .   9
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  10

1.  Introduction

   The Network Configuration Protocol (NETCONF) [RFC6470] provides
   mechanisms to manipulate configuration datastores.  NMDA introduces
   additional datastores (e.g., <intended>, <operational>) for systems
   that support more advanced processing chains converting configuration
   to operational state.  However, client applications are not able to
   be aware of common events pertaining to additional datastores, e.g.,
   there are many background activities that happen during the time that
   configuration is committed to <running> to the time that the
   configuration is actually applied to <operational>.  It is possible
   that some configuration could not be applied to <operational> due to
   either validation issues, or missing resource etc.  There is a need
   for user to know the validation result of <intended> data-store and
   the reason why the configuration were not applied.

   This document updates [RFC6470] to allows a NETCONF client to receive
   additional notifications for some common system events pertaining to
   the Network Management Datastore Architecture (NMDA) defined in
   [RFC8342].  These notification are not specific to any network
   management protocols such as NETCONF and RESTCONF.

   The solution presented in this document is backwards compatible with
   [RFC6470].





Wu & Ranade             Expires December 21, 2018               [Page 2]

Internet-Draft           Base notifications NMDA               June 2018


1.1.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

   The following terms are defined in [RFC8342] and are not redefined
   here:

   o  operational state datastore

   o  running configuration datastore

   o  intended configuration datastore

2.  Summary of Updates to RFC 6470

   This document is intended to provide an extension of notifications
   initially defined within [RFC6470], with the development of NMDA
   architcture and data model.  Key relationships between these two
   documents include:

   o  The existing notifications defined in [RFC6470] are remain
      unchanged, no additional information is added.

   o  A new event notification is defined in this document to overcome
      the shortcoming of [RFC6470] for supporting NMDA.

3.  NETCONF Base Notifications YANG Model extension for NMDA

3.1.  Overview

   The YANG module in NETCONF Base Notifications [RFC6470] specifies the
   following 5 event notifications for the 'NETCONF' stream to notify a
   client application that the NETCONF server state has changed:

   o  netconf-config-change

   o  netconf-capability-change

   o  netconf-session-start

   o  netconf-session-end

   o  netconf-confirmed-commit




Wu & Ranade             Expires December 21, 2018               [Page 3]

Internet-Draft           Base notifications NMDA               June 2018


   These event notifications used within the 'NETCONF' stream are
   accessible to clients via the subscription mechanism described in
   [RFC5277].

   This document extends the YANG module defined in [RFC6470] to include
   NMDA specific extension which allows a NETCONF client to receive
   notifications for additional common system event as follows:

   nmda-data-validate:  Generated when a server with network management
      protocol support detects that a data validation event has occurred
      from the time that configuration is committed to <running> to the
      time that the configuration is actually applied to <operational>
      during management session.  Indicates the event and the current
      state of the data validation.  A server MAY report events for non-
      NETCONF management sessions (such as RESTCONF,gPRC), using the
      'session-id' value of zero.

   These notification messages are accessible to clients via either the
   subscription mechanism described in [RFC5277] or dynamic subscription
   mechanism and configured subscription mechanism described in [I-
   D.ietf-netconf-netconf-event-notifications].

   The following are examples of a nmda-data-validation notification
   message:

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">
 <eventTime>2017-06-16T16:30:59.137045+09:00</eventTime>
 <nmda-data-validate xmlns="urn:ietf:params:xml:ns:yang:ietf-nmda-notifications">
     <username>admin</username>
     <session-id>0</session-id>
     <source-host>10.251.93.83</source-host>
     <validate-event>start<validate-event>
     <validate-result>partial-fail</validate-result>
     <validate-fail-taget>
      <datastore>intended</datastore>
      <target> /ietf-interfaces:interfaces-state </target>
     </validate-fail-target>
     <validate-fail-taget>
      <datastore>intended</datastore>
      <target> /ietf-system:system </target>
     </validate-fail-target>
 </nmda-data-validate>
</notification>








Wu & Ranade             Expires December 21, 2018               [Page 4]

Internet-Draft           Base notifications NMDA               June 2018


3.2.  Definitions

   This section presents the YANG module defined in this document.  This
   module imports data types from the 'ietf-netconf' module defined in
   [RFC6241] and 'ietf-inet-types' module defined in [RFC6021].

   <CODE BEGINS> file "ietf-nmda-notifications@2018-04-01.yang"
  module ietf-nmda-notifications {
    namespace "urn:ietf:params:xml:ns:yang:ietf-nmda-notifications";
    prefix nmdan;

    import ietf-datastores {
      prefix ds;
    }
    import ietf-inet-types { prefix inet; }
    organization
      "IETF NETCONF (Network Configuration Protocol) Working Group";
    contact
      "WG Web:   <http://tools.ietf.org/wg/netconf/>
       WG List:  <mailto:netconf@ietf.org>
       WG Chair: Kent Watsen
                 <mailto:kwatsen@juniper.net>
       WG Chair: Mahesh Jethanandani
                 <mailto:mjethanandani@gmail.com>
       Editor:   Qin Wu
                 <mailto:bill.wu@huawei.com>
       Editor:   Rohit R Ranade
                 <mailto:rohitrranade@huawei.com>";
    description
      "This module defines a YANG data model for use with the
       NETCONF protocol that allows the NETCONF client to
       receive additional common NETCONF base event notifications
        related to NMDA.
       Copyright (c) 2012 IETF Trust and the persons identified as
       the document authors.  All rights reserved.
       Redistribution and use in source and binary forms, with or
       without modification, is permitted pursuant to, and subject
       to the license terms contained in, the Simplified BSD License
       set forth in Section 4.c of the IETF Trust's Legal Provisions
       Relating to IETF Documents
       (http://trustee.ietf.org/license-info).
       This version of this YANG module is part of RFC xxxx; see
       the RFC itself for full legal notices.";

    revision 2018-04-01 {
      description
        "Initial version.";
      reference "RFC xxx: NETCONF Base Notifications for NMDA";



Wu & Ranade             Expires December 21, 2018               [Page 5]

Internet-Draft           Base notifications NMDA               June 2018


    }
    typedef session-id-or-zero-type {
       type uint32;
       description
         "NETCONF Session Id or Zero to indicate none";
     }

    grouping common-session-parms {
      description
        "Common session parameters to identify a
         management session.";

      leaf username {
        type string;
        mandatory true;
        description
          "Name of the user for the session.";
      }

      leaf session-id {
        type session-id-or-zero-type;
        mandatory true;
        description
          "Identifier of the session.
           A NETCONF session MUST be identified by a non-zero value.
           A non-NETCONF session MAY be identified by the value zero.";
      }

      leaf source-host {
        type inet:ip-address;
        description
          "Address of the remote host for the session.";
      }
    }
    notification nmda-data-validate {
      description
        "Generated when a NETCONF server detects that a
         Data validation event has occurred.  Indicates the event
         and the current state of the data validation procedure
         in progress.";
      reference "RFC 8342, Section 5";
      uses common-session-parms;
      leaf validate-event {
        type enumeration {
          enum "start" {
            description
              "The data validate procedure has started.";
          }



Wu & Ranade             Expires December 21, 2018               [Page 6]

Internet-Draft           Base notifications NMDA               June 2018


          enum "complete" {
            description
              "The data validation procedure has been completed.";
          }
        }
        mandatory true;
        description
          "Indicates the event that caused the notification.";
      }
      leaf validate-result {
        when "../validate-event = 'complete'";
        type enumeration {
          enum "fail" {
            description
              "The <intended> configuration fails to be validated
               before being applied to <operational>, e.g., resources
               are not available or otherwise not physically present
               leads to the whole set of <intended>are not applied.";
          }
          enum "partial-fail" {
            description
              "The <intended> configuration partially fails to be
               validated before being applied to <operational>,e.g.,
               resources are not available or otherwise not physically
               present leads to parts of <intended>are not applied";
          }
          enum "success" {
            description
              "The <intended> configuration is successfully validated
               before being applied to <operational>.";
          }
        }
        description
          "Result of validate";
      }
      list fail-validate-target {
        leaf datastore {
          type identityref {
            base ds:datastore;
          }
          default "ds:operational";
          description
            "Indicates which datastore has changed or which datastore is
             target of edit-data operation.";
        }
        leaf target {
          type instance-identifier;
          description



Wu & Ranade             Expires December 21, 2018               [Page 7]

Internet-Draft           Base notifications NMDA               June 2018


            "Topmost node associated with the configuration change.
             A server SHOULD set this object to the node within
             the datastore that is being altered.  A server MAY
             set this object to one of the ancestors of the actual
             node that was changed, or omit this object, if the
             exact node is not known.";
        }
        description
          "List for fail validate targets";
      }
    }
  }
  <CODE ENDS>

4.  Security Considerations

   The YANG module defined in this memo is designed to be accessed via
   the NETCONF protocol [RFC6241].  The lowest NETCONF layer is the
   secure transport layer and the mandatory-to-implement secure
   transport is SSH, defined in [RFC6242].

   Some of the readable data nodes in this YANG module may be considered
   sensitive or vulnerable in some network environments.  It is thus
   important to control read access (e.g., via get, get-config, or
   notification) to these data nodes.  These are the subtrees and data
   nodes and their sensitivity/vulnerability:

   /nmda-data-validate/validate-event:

      Indicates the specific validate-event state change that occurred.
      A value of 'complete' probably indicates that data validation
      procedure has completed.

5.  IANA Considerations

   This document registers one XML namespace URN in the 'IETF XML
   registry', following the format defined in [RFC3688]:

      URI: urn:ietf:params:xml:ns:yang:ietf-nmda-notifications

      Registrant Contact: The IESG.

      XML: N/A, the requested URI is an XML namespace.

   This document registers one module name in the 'YANG Module Names'
   registry, defined in [RFC7950]:

      name: ietf-nmda-notifications



Wu & Ranade             Expires December 21, 2018               [Page 8]

Internet-Draft           Base notifications NMDA               June 2018


      prefix: ncdn

      namespace: urn:ietf:params:xml:ns:yang:ietf-nmda-notifications

      RFC: xxxx

6.  Acknowledgements

   Thanks to Juergen Schoenwaelder, Alex Clemm,Carey Timothy and Andy
   Berman to review this draft and provide important input to this
   document.

7.  Contributors

      Xiaojian Ding
      Huawei
      101 Software Avenue, Yuhua District
      Nanjing, Jiangsu  210012
      China

      Email: dingxiaojian1@huawei.com

8.  Normative References

   [I-D.ietf-netconf-netconf-event-notifications]
              Voit, E., Clemm, A., Prieto, A., Nilsen-Nygaard, E., and
              A. Tripathy, "NETCONF Support for Event Notifications",
              draft-ietf-netconf-netconf-event-notifications-09 (work in
              progress), May 2018.

   [I-D.ietf-netconf-yang-push]
              Clemm, A., Voit, E., Prieto, A., Tripathy, A., Nilsen-
              Nygaard, E., Bierman, A., and B. Lengyel, "YANG Datastore
              Subscription", draft-ietf-netconf-yang-push-16 (work in
              progress), May 2018.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC3688]  Mealling, M., "The IETF XML Registry", BCP 81, RFC 3688,
              DOI 10.17487/RFC3688, January 2004,
              <https://www.rfc-editor.org/info/rfc3688>.

   [RFC5277]  Chisholm, S. and H. Trevino, "NETCONF Event
              Notifications", RFC 5277, DOI 10.17487/RFC5277, July 2008,
              <https://www.rfc-editor.org/info/rfc5277>.



Wu & Ranade             Expires December 21, 2018               [Page 9]

Internet-Draft           Base notifications NMDA               June 2018


   [RFC6020]  Bjorklund, M., Ed., "YANG - A Data Modeling Language for
              the Network Configuration Protocol (NETCONF)", RFC 6020,
              DOI 10.17487/RFC6020, October 2010,
              <https://www.rfc-editor.org/info/rfc6020>.

   [RFC6021]  Schoenwaelder, J., Ed., "Common YANG Data Types",
              RFC 6021, DOI 10.17487/RFC6021, October 2010,
              <https://www.rfc-editor.org/info/rfc6021>.

   [RFC6241]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", RFC 6241, DOI 10.17487/RFC6241, June 2011,
              <https://www.rfc-editor.org/info/rfc6241>.

   [RFC6242]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", RFC 6242, DOI 10.17487/RFC6242, June 2011,
              <https://www.rfc-editor.org/info/rfc6242>.

   [RFC6470]  Bierman, A., "Network Configuration Protocol (NETCONF)
              Base Notifications", RFC 6470, DOI 10.17487/RFC6470,
              February 2012, <https://www.rfc-editor.org/info/rfc6470>.

   [RFC8342]  Bjorklund, M., Schoenwaelder, J., Shafer, P., Watsen, K.,
              and R. Wilton, "Network Management Datastore Architecture
              (NMDA)", RFC 8342, DOI 10.17487/RFC8342, March 2018,
              <https://www.rfc-editor.org/info/rfc8342>.

Authors' Addresses

   Qin Wu
   Huawei
   101 Software Avenue, Yuhua District
   Nanjing, Jiangsu  210012
   China

   Email: bill.wu@huawei.com


   Rohit R Ranade
   Huawei

   Email: rohitrranade@huawei.com









Wu & Ranade             Expires December 21, 2018              [Page 10]
