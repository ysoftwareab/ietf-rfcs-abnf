<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Session Initiation Protocol (SIP) emergency call back identification </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 Applicability and Limitation">
<link href="#rfc.section.4" rel="Chapter" title="4 Overview of operation">
<link href="#rfc.section.5" rel="Chapter" title="5 RFC 5627 Support">
<link href="#rfc.section.6" rel="Chapter" title="6 User Agent Behavior">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 General">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Generating a REGISTER Request">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 Learning eGRUUs from REGISTER Responses">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 Constructing a Self-Made eGRUU">
<link href="#rfc.section.6.5" rel="Chapter" title="6.5 Using One's Own eGRUU">
<link href="#rfc.section.6.5.1" rel="Chapter" title="6.5.1 Considerations for Multiple AORs">
<link href="#rfc.section.6.6" rel="Chapter" title="6.6 Dereferencing an eGRUU">
<link href="#rfc.section.6.7" rel="Chapter" title="6.7 Rendering eGRUUs on a User Interface">
<link href="#rfc.section.7" rel="Chapter" title="7 Registrar Behavior">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 General">
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 Processing a REGISTER Request">
<link href="#rfc.section.7.3" rel="Chapter" title="7.3 Generating a REGISTER Response">
<link href="#rfc.section.7.4" rel="Chapter" title="7.4 Timing Out a Registration">
<link href="#rfc.section.7.5" rel="Chapter" title="7.5 Creation of an eGRUU">
<link href="#rfc.section.7.6" rel="Chapter" title="7.6 Registration Event Support">
<link href="#rfc.section.7.7" rel="Chapter" title="7.7 PSAP callback call">
<link href="#rfc.section.8" rel="Chapter" title="8 Proxy Behavior">
<link href="#rfc.section.9" rel="Chapter" title="9 Grammar">
<link href="#rfc.section.9.1" rel="Chapter" title="9.1 ABNF">
<link href="#rfc.section.10" rel="Chapter" title="10 Message Flow Examples">
<link href="#rfc.section.10.1" rel="Chapter" title="10.1 Example">
<link href="#rfc.section.11" rel="Chapter" title="11 Security Considerations">
<link href="#rfc.section.12" rel="Chapter" title="12 IANA Considerations">
<link href="#rfc.section.12.1" rel="Chapter" title="12.1 General">
<link href="#rfc.section.12.2" rel="Chapter" title="12.2 Header Field Parameter">
<link href="#rfc.section.12.3" rel="Chapter" title="12.3 URI Parameter">
<link href="#rfc.section.12.4" rel="Chapter" title="12.4 SIP option-tag">
<link href="#rfc.section.13" rel="Chapter" title="13 Acknowledgements">
<link href="#rfc.section.14" rel="Chapter" title="14 Change Log">
<link href="#rfc.references" rel="Chapter" title="15 References">
<link href="#rfc.references.1" rel="Chapter" title="15.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="15.2 Informational References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This specification define a new type of Globally Routable User Agent URI (GRUU) " />
  <meta name="description" content="This specification define a new type of Globally Routable User Agent URI (GRUU) " />
  <meta name="keywords" content="PSAP, Callback, Emergency, GRUU, eGRUU" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">ECRIT Working Group</td>
<td class="right">C.H. Holmberg</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Ericsson</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">October 24, 2011</td>
</tr>
<tr>
<td class="left">Expires: April 26, 2012</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Session Initiation Protocol (SIP) emergency call back identification <br />
  <span class="filename">draft-holmberg-ecrit-emergency-callback-id-00.txt</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This specification define a new type of Globally Routable User Agent URI (GRUU) <a href="#RFC5627">[RFC5627]</a>, called emergency GRUU (eGRUU). When a User Agent (UA) provides makes an emergency call, it can provide the eGRUU to a PSAP, which can then use it to make a PSAP callback call. The specification also defines a new URI parameter, "psapcb", which can be used to indicate that a URI can be used for PSAP callback calls. A registrar will provide the URI parameter as part of the generated eGRUU value. Later, when a PSAP makes a PSAP callback call the URI, including the "psapcb" URI parameter, can be used by SIP entities to identity callback calls.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 26, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">Applicability and Limitation</a>
</li>
<li>4.   <a href="#rfc.section.4">Overview of operation</a>
</li>
<li>5.   <a href="#rfc.section.5">RFC 5627 Support</a>
</li>
<li>6.   <a href="#rfc.section.6">User Agent Behavior</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">General</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Generating a REGISTER Request</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">Learning eGRUUs from REGISTER Responses</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">Constructing a Self-Made eGRUU</a>
</li>
<li>6.5.   <a href="#rfc.section.6.5">Using One's Own eGRUU</a>
</li>
<li>6.5.1.   <a href="#rfc.section.6.5.1">Considerations for Multiple AORs</a>
</li>
<li>6.6.   <a href="#rfc.section.6.6">Dereferencing an eGRUU</a>
</li>
<li>6.7.   <a href="#rfc.section.6.7">Rendering eGRUUs on a User Interface</a>
</li>
<li>7.   <a href="#rfc.section.7">Registrar Behavior</a>
</li>
<li>7.1.   <a href="#rfc.section.7.1">General</a>
</li>
<li>7.2.   <a href="#rfc.section.7.2">Processing a REGISTER Request</a>
</li>
<li>7.3.   <a href="#rfc.section.7.3">Generating a REGISTER Response</a>
</li>
<li>7.4.   <a href="#rfc.section.7.4">Timing Out a Registration</a>
</li>
<li>7.5.   <a href="#rfc.section.7.5">Creation of an eGRUU</a>
</li>
<li>7.6.   <a href="#rfc.section.7.6">Registration Event Support</a>
</li>
<li>7.7.   <a href="#rfc.section.7.7">PSAP callback call</a>
</li>
<li>8.   <a href="#rfc.section.8">Proxy Behavior</a>
</li>
<li>9.   <a href="#rfc.section.9">Grammar</a>
</li>
<li>9.1.   <a href="#rfc.section.9.1">ABNF</a>
</li>
<li>10.   <a href="#rfc.section.10">Message Flow Examples</a>
</li>
<li>10.1.   <a href="#rfc.section.10.1">Example</a>
</li>
<li>11.   <a href="#rfc.section.11">Security Considerations</a>
</li>
<li>12.   <a href="#rfc.section.12">IANA Considerations</a>
</li>
<li>12.1.   <a href="#rfc.section.12.1">General</a>
</li>
<li>12.2.   <a href="#rfc.section.12.2">Header Field Parameter</a>
</li>
<li>12.3.   <a href="#rfc.section.12.3">URI Parameter</a>
</li>
<li>12.4.   <a href="#rfc.section.12.4">SIP option-tag</a>
</li>
<li>13.   <a href="#rfc.section.13">Acknowledgements</a>
</li>
<li>14.   <a href="#rfc.section.14">Change Log</a>
</li>
<li>15.   <a href="#rfc.references">References</a>
</li>
<li>15.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>15.2.   <a href="#rfc.references.2">Informational References</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">EDITOR'S NOTE: We can probably add text from an existing draft here, once we decide how to move forward documentation wise.  </p>
<p id="rfc.section.1.p.2">This specification define a new type of Globally Routable User Agent URI (GRUU) <a href="#RFC5627">[RFC5627]</a>, called emergency GRUU (eGRUU). When a User Agent (UA) provides makes an emergnecy call, it can provide the eGRUU to a PSAP, which can then use it to make a PSAP callback call. The specification also defines a new URI parameter, "psapcb", which can be used to indicate that a URI can be used for PSAP callback calls. A registrar will provide the URI parameter as part of the generated eGRUU value. Later, when a PSAP makes a PSAP callback call the URI, including the "psapcb" URI parameter, can be used by SIP entities to identity callback calls.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Terminology</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 <a href="#RFC2119">[RFC2119]</a>.  </p>
<p id="rfc.section.2.p.2">The terms defined in RFC 5627 apply, with the following additional terms defined in this specification: </p>
<p id="rfc.section.2.p.3">Public Safety Answering Point (PSAP): A call center responsible for answering calls to an emergency telephone number (referred to as emergency call), and dispatching them to the appropriate emergency services (e.g. police, firefighting or ambulance).  </p>
<p id="rfc.section.2.p.4">PSAP callback: A call made back from a PSAP to a user who previously made an emergency call, in case the emergency call dropped, or the PSAP needs additional information associated with the emergency call.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#sec-app" id="sec-app">Applicability and Limitation</a>
</h1>
<p id="rfc.section.3.p.1">If a PSAP callback call comes from a Public Switched Telephony Network (PSTN), or from another interworking network, the UAC representing the PSAP will normally be located in a network interworking gateway controller, such as a in a Media Gateway Controller (MGC). The interworking gateway will normally not have knowledge of the eGRUU, neither will it be able to determine that the call is a PSAP callback call.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#sec-egruu" id="sec-egruu">Overview of operation</a>
</h1>
<p id="rfc.section.4.p.1">The procedures defined in section 3 of RFC 5627 apply also to an eGRUU, with the following limitations: </p>
<p id="rfc.section.4.p.2">- An eGRUU MUST be constructed following the same principles and rules that apply for constructing a public GRUU.  </p>
<p id="rfc.section.4.p.3">OPEN ISSUE: It still needs to be decided whether an eGRUU should be constructed as a public GRUU, or whether a temporary GRUU is more appropriate.  </p>
<p id="rfc.section.4.p.4">- A UA MUST obtain an eGRUU either as part of a REGISTER transaction, or via some locally specified administrative mechanism. A UA MUST NOT construct an eGRUU locally.  </p>
<p id="rfc.section.4.p.5">- A UA that wants to obtain an eGRUU via its REGISTER request MUST, in addition to providingan instance ID in the "+sip.instance" Contact header field parameter of the request, also include an "egruu" option-tag in the Supported header field.  </p>
<p id="rfc.section.4.p.6">NOTE: The "egruu" option-tag will only request for an eGRUU. If a UA also wants to obtain a gruu type defined in RFC 5627, it needs to include an "gruu" option-tag in addition to the "egruu" option-tag.  </p>
<p id="rfc.section.4.p.7">- A UA, when not acting a PSAP, MUST NOT use an eGRUU in any other requests than in an initial INVITE requests for a call that the UA determines to be an emergency call.  </p>
<p id="rfc.section.4.p.8">- A UA, when acting a PSAP, MUST NOT use an eGRUU in any other requests than in an initial INVITE requests for a PSAP callback call.  </p>
<p id="rfc.section.4.p.9">- A UA MUST NOT use the "psapcb" URI parameter in any other requests than in an initial INVITE requests for a call that the UA determines to be an emergency call.  </p>
<p id="rfc.section.4.p.10">- Unless a UA is acting as a PSAP, initiating a PSAP callback call, it MUST NOT dereference an eGRUU.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#sec-rfc" id="sec-rfc">RFC 5627 Support</a>
</h1>
<p id="rfc.section.5.p.1">An entity that requests, or generates, an eGRUU MUST support the procedures defined in RFC 5627.  However, the "egruu" option-tag only requests an eGRUU. If a UA, in addtion to the eGRUU, also wants to request a gruu type defined in 5627, it also needs to use the "gruu" option-tag, as defined in RFC 5627.  </p>
<p id="rfc.section.5.p.2">The UA, registrar and proxy procedures in this specification are based on the procedures defined in sections 4, 5 and 6 of RFC 5627, with the deviations explicitly described.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#sec-ua" id="sec-ua">User Agent Behavior</a>
</h1>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> <a href="#sec-ua-gen" id="sec-ua-gen">General</a>
</h1>
<p id="rfc.section.6.1.p.1">This section defines the normative behavior for user agents.  </p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> <a href="#sec-ua-req" id="sec-ua-req">Generating a REGISTER Request</a>
</h1>
<p id="rfc.section.6.2.p.1">The general procedures, not associated with a specific type of GRUU, in section 4.1 of RFC 5627 also apply to an eGRUU.  </p>
<p id="rfc.section.6.2.p.2">When a UA compliant to this specification generates a REGISTER request (initial or refresh), it MUST include an "egruu" option-tag in the Supported header field in the request. This informs the registrar for the domain that the UA supports the eGRUU mechanism.  </p>
<p id="rfc.section.6.2.p.3">A UA MUST NOT insert an "emg-gruu" header field in the Contact header field of a REGISTER request.  </p>
<p id="rfc.section.6.2.p.4">If the Call-ID changes in a register refresh, the server will invalidate all eGRUUs associated with that UA instance; the only valid one will be the new one returned in that REGISTER response. When the mechanism defined in RFC 5626 <a href="#RFC5626">[RFC5626]</a> is used, this rule applies to the reg-ids: If the Call-ID changes for the registration refresh for a particular reg-id, the server will invalidate all eGRUUs associated with that UA instance as a whole. Consequently, if a UA wishes its previously obtained eGRUUs to remain valid, it MUST utilize the same Call-ID in REGISTER refreshes.  </p>
<p id="rfc.section.6.2.p.5">A UA SHOULD NOT request a new eGRUU during the lifetime of a registration, as the eGRUU might be used by an PSAP making a PSAP callback call using the previous eGRUU value. However, it MAY change the Call-ID in a refresh if invalidation is the desired objective.  </p>
<p id="rfc.section.6.2.p.6">If a UA wishes to guarantee that the REGISTER request is not processed unless the domain supports and uses this extension, it MAY include a Require header field in the request with a value that contains the "egruu" option-tag.  This is in addition to the presence of the Supported header field, also containing the "egruu" option-tag. The use of the Proxy-Require header field is not necessary and is NOT RECOMMENDED.  </p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> <a href="#sec-ua-res" id="sec-ua-res">Learning eGRUUs from REGISTER Responses</a>
</h1>
<p id="rfc.section.6.3.p.1">The general procedures, not associated with a specific type of GRUU, in section 4.2 of RFC 5627 also apply to an eGRUU.  </p>
<p id="rfc.section.6.3.p.2">If the REGISTER response is a 2xx, each Contact header field that contains the "+sip.instance" Contact header field parameter can also contain an "emg-gruu" Contact header field parameter.  This header field parameter conveys the eGRUU for the UA instance.  The eGRUU will be valid for the duration of the registration (that is, through refreshes). The UA can receive a new eGRUU in each successful REGISTER response. If a UA changed its Call-ID in this REGISTER request, or did not include an "egruu" option-tag in the Supported header field, compared to a previous REGISTER request for the same contact or reg-id, the UA MUST discard all eGRUUs learned through prior REGISTER responses.  A UA MAY retain zero, one, some, or all of the eGRUUs that it is provided during the time over which at least one contact or reg-id remains continuously registered. If a UA stores any eGRUUs for use during its registration, it needs to be certain that the registration does not accidentally lapse due to clock skew between the UA and registrar. Consequently, the UA MUST refresh its registration such that the REGISTER refresh transaction will either complete or timeout prior to the expiration of the registration.  For default transaction timers, this would be at least 32 seconds prior to expiration, assuming the registration expiration is larger than 64 seconds. If the registration expiration is less than 64 seconds, the UA SHOULD refresh its registration halfway prior to expiration.  </p>
<p id="rfc.section.6.3.p.3">Note that, when the mechanism defined in RFC 5626 is in use, and the UA is utilizing multiple flows for purposes of redundancy, the eGRUUs remain valid as long as at least one flow is registered. Thus, even if the registration of one flow expires, the eGRUUs learned previously remain valid.  </p>
<p id="rfc.section.6.3.p.4">The mechanism defined in RFC 3680 <a href="#RFC3680">[RFC3680]</a> and RFC 5628 <a href="#RFC5628">[RFC5628]</a>can not be used for eGRUUs, as RFC 5628 does not define a mechanism for conveying eGRUU information.  </p>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> <a href="#sec-ua-self" id="sec-ua-self">Constructing a Self-Made eGRUU</a>
</h1>
<p id="rfc.section.6.4.p.1">A UA MUST NOT construct a self-made eGRUU.  </p>
<h1 id="rfc.section.6.5">
<a href="#rfc.section.6.5">6.5.</a> <a href="#sec-ua-use" id="sec-ua-use">Using One's Own eGRUU</a>
</h1>
<p id="rfc.section.6.5.p.1">The procedures defined in section 4.4 of RFC 5627 apply also to an eGRUU, with the limitations defined in this section.  </p>
<p id="rfc.section.6.5.p.2">When a UAC sends an initial SIP INVITE request <a href="#RFC3261">[RFC3261]</a> for an emergency call, it MUST insert the eGRUU in the Contact header field of the request. The UAC MUST use the same eGRUU value that it has obtained for the registration associated with the emergency call.  </p>
<p id="rfc.section.6.5.p.3">OPEN ISSUE: It still needs to be decided whether a UA can use the "psapcb" parameter if it does not support, or is able to retrieve, eGRUU.  </p>
<p id="rfc.section.6.5.p.4">A UA MUST NOT insert an eGRUU in the Contact header field of a SIP response, or in any other SIP request than an initial INVITE request for calls that it determines as emergency calls.  </p>
<p id="rfc.section.6.5.p.5">NOTE: There might be cases where the UAC does not know that the call it is establishing is an emergency call, and will therefor not include an eGRUU in the initial SIP INVITE request for the call. In some networks suchs calls will be determined as an emergency call by the network.  </p>
<h1 id="rfc.section.6.5.1">
<a href="#rfc.section.6.5.1">6.5.1.</a> <a href="#sec-ua-aor" id="sec-ua-aor">Considerations for Multiple AORs</a>
</h1>
<p id="rfc.section.6.5.1.p.1">The procedures in section 4.4.1 of RFC 5627 also apply to an eGRUU.  </p>
<h1 id="rfc.section.6.6">
<a href="#rfc.section.6.6">6.6.</a> <a href="#sec-ua-aor-deref" id="sec-ua-aor-deref">Dereferencing an eGRUU</a>
</h1>
<p id="rfc.section.6.6.p.1">The procedures in section 4.5 of RFC 5627 also apply to an eGRUU.  </p>
<p id="rfc.section.6.6.p.2">When a UA, representing a PSAP, sends an initial SIP INVITE request for an PSAP callback call, it MUST insert the eGRUU that it received in the associated emergency call in the Request-URI <a href="#RFC3261">[RFC3261]</a> of the request.  </p>
<p id="rfc.section.6.6.p.3">NOTE: If the Contact header field of an initial SIP INVITE request for an emergency call did not contain a "psabcb" parameter, a UA, representing a PSAP, can insert the "psapcb" parameter in the Request-URI of the initial SIP INVITE request for an PSAP callback call.  </p>
<p id="rfc.section.6.6.p.4">If a UA does not represent a PSAP, making a PSAP callback call, it MUST NOT insert an eGRUU and a "psapcb" parameter in the Request-URI of the intial SIP INVITE request for the call.  </p>
<h1 id="rfc.section.6.7">
<a href="#rfc.section.6.7">6.7.</a> Rendering eGRUUs on a User Interface</h1>
<p id="rfc.section.6.7.p.1">An eGRUU MUST NOT be rendered to a user. The reasons is to prevent a user from e.g. using the eGRUU for non-emergency calls.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#sec-reg" id="sec-reg">Registrar Behavior</a>
</h1>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> <a href="#sec-reg-gen" id="sec-reg-gen">General</a>
</h1>
<p id="rfc.section.7.1.p.1">This section defines the normative behavior for registrars.  </p>
<h1 id="rfc.section.7.2">
<a href="#rfc.section.7.2">7.2.</a> Processing a REGISTER Request</h1>
<p id="rfc.section.7.2.p.1">A REGISTER request might contain a Require header field with an "egruu" option-tag; this indicates that the registrar has to understand the eGRUU extension in order to process the request. It does not require the registrar to create an eGRUU, however.  </p>
<p id="rfc.section.7.2.p.2">Next, the registrar MUST check the Contact header fields, and compare the contact URIs with the AOR, as defined in section 5.1 of RFC 5627.  </p>
<p id="rfc.section.7.2.p.3">Next, the registrar MUST create a new eGRUU for the AOR and instance, according to the procedures in section 7.5 of this specification.  </p>
<p id="rfc.section.7.2.p.4">If the contact contained a "emg-gruu" Contact header field parameter, the header field parameter MUST be ignored by the registrar. A UA cannot suggest or otherwise provide an eGRUU to the registrar.  </p>
<h1 id="rfc.section.7.3">
<a href="#rfc.section.7.3">7.3.</a> Generating a REGISTER Response</h1>
<p id="rfc.section.7.3.p.1">When generating the 200 (OK) response to the REGISTER request, the procedures of step 8 of Section 10.3 of RFC 3261 are followed.  Furthermore, the registrar includes the instance ID in the Contact header field, as defined in section 5.2 of RFC 5627.  </p>
<p id="rfc.section.7.3.p.2">If the REGISTER request contained a Supported header field that with an "egruu" option-tag, and the registrar has an eGRUU assigned to the instance ID and AOR, the registrar MUST add an "emg-gruu" Contact header field parameter to that Contact header field. The value of the "emg-gruu" header field parameter MUST contain and MUST contain the most recently created eGRUU for that AOR and instance ID.  </p>
<p id="rfc.section.7.3.p.3">The registrar MUST NOT include an "egruu" option-tag in the Require or Supported header field of the response.  </p>
<h1 id="rfc.section.7.4">
<a href="#rfc.section.7.4">7.4.</a> Timing Out a Registration</h1>
<p id="rfc.section.7.4.p.1">The procedures in section 5.3 of RFC 5627 that apply to public gruus also apply to an eGRUU.  </p>
<h1 id="rfc.section.7.5">
<a href="#rfc.section.7.5">7.5.</a> Creation of an eGRUU</h1>
<p id="rfc.section.7.5.p.1">The procedures in section 5.4 of RFC 5627 that apply to public gruus also apply to an eGRUU, with the following addition: </p>
<p id="rfc.section.7.5.p.2">The eGRUU value MUST contain a SIP-URI <a href="#RFC3261">[RFC3261]</a>, which includes a "psapcb" SIP-URI parameter.  </p>
<h1 id="rfc.section.7.6">
<a href="#rfc.section.7.6">7.6.</a> Registration Event Support</h1>
<p id="rfc.section.7.6.p.1">The procedures defined in section 5.5 of RFC 5627 also apply to an eGRUU.  </p>
<h1 id="rfc.section.7.7">
<a href="#rfc.section.7.7">7.7.</a> <a href="#sec-reg-callback" id="sec-reg-callback">PSAP callback call</a>
</h1>
<p id="rfc.section.7.7.p.1">When a registrar receives an initial SIP INVITE request for a call, and the Request-URI of the request contains an eGRUU (including a "psapcb" parameter) that the registrar has previously assigned to the called user, the registrar can decide that the call is a PSAP callback call.  </p>
<p id="rfc.section.7.7.p.2">NOTE: A registrar might give special treatment to a call identified as a PSAP callback call. Such treatment is outside the scope of this specification.  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#sec-proxy" id="sec-proxy">Proxy Behavior</a>
</h1>
<p id="rfc.section.8.p.1">The procedures defined in section 6 of RFC 5627 also apply to an eGRUU.  </p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#sec-gram" id="sec-gram">Grammar</a>
</h1>
<h1 id="rfc.section.9.1">
<a href="#rfc.section.9.1">9.1.</a> <a href="#sec-gram-abnf" id="sec-gram-abnf">ABNF</a>
</h1>
<p id="rfc.section.9.1.p.1">This specification defines a new Contact header field parameter, "emg-gruu", by extending the grammar for "contact-params" as defined in RFC 3261. It also defines a new URI parameter, "psapcb", by extending the grammar for "uri-parameter" as defined in RFC 3261. The ABNF <a href="#RFC5234">[RFC5234]</a> is as follows: </p>
<p id="rfc.section.9.1.p.2">contact-params  =/ emg-gruu </p>
<p id="rfc.section.9.1.p.3">emg-gruu = "emg-gruu" EQUAL quoted-string </p>
<p id="rfc.section.9.1.p.4">uri-parameter  =/ psap-callback-parameter </p>
<p id="rfc.section.9.1.p.5">psap-callback-parameter = "psapcb" </p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> Message Flow Examples</h1>
<h1 id="rfc.section.10.1">
<a href="#rfc.section.10.1">10.1.</a> Example</h1>
<p id="rfc.section.10.1.p.1">TBD </p>
<div id="#rfc.figure.1"></div>
<div id="#fig-ex1"></div>
<pre> 
 Add example flow
</pre>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> <a href="#sec-security" id="sec-security">Security Considerations</a>
</h1>
<p id="rfc.section.11.p.1">The security considerations defined in RFC 5627 also apply to eGRUUs.  </p>
<h1 id="rfc.section.12">
<a href="#rfc.section.12">12.</a> IANA Considerations</h1>
<h1 id="rfc.section.12.1">
<a href="#rfc.section.12.1">12.1.</a> General</h1>
<p id="rfc.section.12.1.p.1">This specification defines a new Contact header field parameter, a new and URI parameter, and a new SIP option-tag.  </p>
<h1 id="rfc.section.12.2">
<a href="#rfc.section.12.2">12.2.</a> Header Field Parameter</h1>
<p id="rfc.section.12.2.p.1">This specification defines a new header field parameter, as per the registry created by RFC 3968 <a href="#RFC3968">[RFC3968]</a>. The required information is as follows: </p>
<h1 id="rfc.section.12.3">
<a href="#rfc.section.12.3">12.3.</a> URI Parameter</h1>
<p id="rfc.section.12.3.p.1">This specification defines a new SIP URI parameter, as per the registry created by RFC 3968 <a href="#RFC3968">[RFC3968]</a>. The required information is as follows: </p>
<h1 id="rfc.section.12.4">
<a href="#rfc.section.12.4">12.4.</a> SIP option-tag</h1>
<p id="rfc.section.12.4.p.1">This specification registers a new SIP option tag, as per the guidelines in Section 27.1 of RFC 3261 <a href="#RFC3261">[RFC3261]</a>. The required information is as follows: </p>
<h1 id="rfc.section.13">
<a href="#rfc.section.13">13.</a> <a href="#sec-acks" id="sec-acks">Acknowledgements</a>
</h1>
<p id="rfc.section.13.p.1">The original idea of using a token based mechanism to associate PSAP callback calls with emergency calls was presented by Cullen Jennings.  </p>
<p id="rfc.section.13.p.2">Thanks to Fredrik Lindholm, Jan Holm and Ivo Sedlacek for their comments and feedbacks on the initial draft.  </p>
<p id="rfc.section.13.p.3">Thanks to everyone who took part, and provided input and feedback, in the discussions at the IETF#81 meeting.  </p>
<h1 id="rfc.section.14">
<a href="#rfc.section.14">14.</a> Change Log</h1>
<p id="rfc.section.14.p.1">[RFC EDITOR NOTE: Please remove this section when publishing]</p>
<p id="rfc.section.14.p.2">Changes from draft-holmberg-ecrit-callback-00 </p>

<ul>
<li>Draft file name changed to draft-holmberg-ecrit-emergency-callback-id.</li>
<li>New type of GRUU, instead of a feature tag, is used as callback identifier.</li>
</ul>

<p> </p>
<h1 id="rfc.references">
<a href="#rfc.references">15.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">15.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3261">[RFC3261]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, <a>Schulzrinne, H.</a>, <a>Camarillo, G.</a>, <a>Johnston, A.</a>, <a>Peterson, J.</a>, <a>Sparks, R.</a>, <a>Handley, M.</a> and <a>E. Schooler</a>, "<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>", RFC 3261, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3968">[RFC3968]</b></td>
<td class="top">
<a>Camarillo, G.</a>, "<a href="http://tools.ietf.org/html/rfc3968">The Internet Assigned Number Authority (IANA) Header Field Parameter Registry for the Session Initiation Protocol (SIP)</a>", BCP 98, RFC 3968, December 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5234">[RFC5234]</b></td>
<td class="top">
<a>Crocker, D.</a> and <a>P. Overell</a>, "<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>", STD 68, RFC 5234, January 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5627">[RFC5627]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, "<a href="http://tools.ietf.org/html/rfc5627">Obtaining and Using Globally Routable User Agent URIs (GRUUs) in the Session Initiation Protocol (SIP)</a>", RFC 5627, October 2009.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">15.2.</a> Informational References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC3680">[RFC3680]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, "<a href="http://tools.ietf.org/html/rfc3680">A Session Initiation Protocol (SIP) Event Package for Registrations</a>", RFC 3680, March 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5626">[RFC5626]</b></td>
<td class="top">
<a>Jennings, C.</a>, <a>Mahy, R.</a> and <a>F. Audet</a>, "<a href="http://tools.ietf.org/html/rfc5626">Managing Client-Initiated Connections in the Session Initiation Protocol (SIP)</a>", RFC 5626, October 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5628">[RFC5628]</b></td>
<td class="top">
<a>Kyzivat, P.</a>, "<a href="http://tools.ietf.org/html/rfc5628">Registration Event Package Extension for Session Initiation Protocol (SIP) Globally Routable User Agent URIs (GRUUs)</a>", RFC 5628, October 2009.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Christer Holmberg</span> 
	  <span class="n hidden">
		<span class="family-name">Holmberg</span>
	  </span>
	</span>
	<span class="org vcardline">Ericsson</span>
	<span class="adr">
	  <span>Hirsalantie 11</span>

	  <span class="vcardline">
		<span class="locality">Jorvas</span>,  
		<span class="region"></span>
		<span class="code">02420</span>
	  </span>
	  <span class="country-name vcardline">Finland</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:christer.holmberg@ericsson.com">christer.holmberg@ericsson.com</a></span>

  </address>
</div>

</body>
</html>