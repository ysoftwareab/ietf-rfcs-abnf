<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Lab Test Results for Advancing Metrics
    on the Standards Track</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Lab Test Results for Advancing Metrics
    on the Standards Track">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">A. Morton</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">AT&amp;T Labs</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">October 25, 2010</td></tr>
<tr><td class="header">Expires: April 28, 2011</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Lab Test Results for Advancing Metrics
    on the Standards Track<br />draft-morton-ippm-advance-metrics-02</h1>

<h3>Abstract</h3>

<p>This memo supports the process of progressing performance metric RFCs
      along the standards track. Observing that the metric definitions
      themselves should be the primary focus rather than the implementations
      of metrics, this memo describes results of example lab test procedures
      to evaluate specific metric RFC requirement clauses to determine if the
      requirement has been implemented as intended. A single implementation
      has been tested against the key specifications of RFC 2679 on One-way
      Delay.
</p>
<h3>Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on April 28, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
A Definition-centric metric advancement process<br />
<a href="#anchor3">3.</a>&nbsp;
Lab test results to check metric definitions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
One-way Delay, Loss threshold, RFC 2679<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.1.1.</a>&nbsp;
NetProbe Lab results for Loss Threshold<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.1.2.</a>&nbsp;
XXX Lab Results for Loss Threshold<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.1.3.</a>&nbsp;
Conclusions on Lab Results for Loss Threshold<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.2.</a>&nbsp;
One-way Delay, First-bit to Last bit, RFC 2679<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.2.1.</a>&nbsp;
NetProbe Lab results for Serialization<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.3.</a>&nbsp;
One-way Delay, Difference Sample Metric (Lab)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.3.1.</a>&nbsp;
NetProbe Lab results for Differential Delay<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">3.4.</a>&nbsp;
One-way Delay, ADK Sample Metric (Lab)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.4.1.</a>&nbsp;
NetProbe Lab results for ADK<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">3.5.</a>&nbsp;
Error Calibration, RFC 2679<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">3.5.1.</a>&nbsp;
Net Probe Error and Type-P<br />
<a href="#anchor16">4.</a>&nbsp;
Notes on Network Emulator Loss Generation <br />
<a href="#Security">5.</a>&nbsp;
Security Considerations<br />
<a href="#IANA">6.</a>&nbsp;
IANA Considerations<br />
<a href="#Acknowledgements">7.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">8.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The IETF (IP Performance Metrics working group) has been considering
      how to advance their metrics along the standards track since 2001, with
      the initial publication of Bradner/Paxson/Mankin's memo [ref to work in
      progress, draft-bradner-metricstest-]. The original proposal was to
      compare the results of implementations of the metrics, because the usual
      procedures for advancing protocols did not appear to apply. It was found
      to be difficult to achieve consensus on exactly how to compare
      implementations, since there were many legitimate sources of variation
      that would emerge in the results despite the best attempts to keep the
      network path equal for both, and because considerable variation was
      allowed in the parameters of each metric.
</p>
<p>A renewed work effort sought to investigate ways in which the
      measurement variability could be reduced and thereby simplify the
      problem of comparison for equivalence. An earlier version of this draft,
      titled "Problems and Possible Solutions for Advancing Metrics on the
      Standards Track", brought many issues to light and offered some
      solutions. Sections from the earlier draft has now been combined with
      [draft-geib-ippm-metrictest] resulted in an IPPM working group draft,
      [draft-ippm-metrictest-00.txt]. The plan now emphasizes evaluating the
      metric specifications themselves, as a result of this interaction.
</p>
<p>There is now consensus that the metric definitions should be the
      primary focus rather than the implementations of metrics, and equivalent
      results are deemed to be evidence that the metric specifications are
      clear and unambiguous. This is the metric specification equivalent of
      protocol interoperability. The advancement process either produces
      confidence that the metric definitions and supporting material are
      clearly worded and unambiguous, OR, identifies ways in which the metric
      definitions should be revised to achieve clarity.
</p>
<p>The process should also permit identification of options that were
      not implemented, so that they can be removed from the advancing
      specification (this is an aspect more typical of protocol advancement
      along the standards track).
</p>
<p>This memo's purpose is to add more support for the current approach
      as the author perceives it to be. It was prepared to help progress
      discussions on the topic of metric advancement, both through e-mail and
      at the upcoming IPPM meeting at IETF-79 in Beijing.
</p>
<p>Another aspect of the metric RFC advancement process which has
      received limited attention is the requirement to document the work and
      results. The procedures of <a class='info' href='#RFC2026'>[RFC2026]<span> (</span><span class='info'>Bradner, S., &ldquo;The Internet Standards Process -- Revision 3,&rdquo; October&nbsp;1996.</span><span>)</span></a> are expanded
      in<a class='info' href='#RFC5657'>[RFC5657]<span> (</span><span class='info'>Dusseault, L. and R. Sparks, &ldquo;Guidance on Interoperation and Implementation Reports for Advancement to Draft Standard,&rdquo; September&nbsp;2009.</span><span>)</span></a>, including sample implementation and
      interoperability reports. Section 3 of this memo can serve as a template
      for the report that accompanies the protocol action request submitted to
      the Area Director, including description of the test set-up, procedures,
      results for each implementation and conclusions.
</p>
<p>We have also agreed that test plan and procedures should include the
      threshold for determining equivalence, and this information should be
      available in advance of cross-implementation comparisons. This memo
      investigates that topic by outlining a procedure that includes
      same-implementation comparisons to help set the equivalence
      threshold.
</p>
<p>This memo also discusses an issue with some network emulators, namely
      correlated loss or burst loss generation.
</p>
<p>Finally, this memo is also an open invitation to developers or
      testers who would be willing to use their equipment to help advance the
      IPPM metrics through lab tests, like the tests described below.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
A Definition-centric metric advancement process</h3>

<p>The process described in Section 3.5 of
      [draft-ippm-metrictest-00.txt] takes as a first principle that the
      metric definitions, embodied in the text of the RFCs, are the objects
      that require evaluation and possible revision in order to advance to the
      next step on the standards track.
</p>
<p>IF two implementations do not measure an equivalent singleton, or
      sample, or produce the an equivalent statistic,
</p>
<p>AND sources of measurement error do not adequately explain the lack
      of agreement,
</p>
<p>THEN the details of each implementation should be audited along with
      the exact definition text, to determine if there is a lack of clarity
      that has caused the implementations to vary in a way that affects the
      correspondence of the results.
</p>
<p>IF there was a lack of clarity or multiple legitimate interpretations
      of the definition text,
</p>
<p>THEN the text should be modified and the resulting memo proposed for
      consensus and advancement along the standards track.
</p>
<p>Finally, all the findings MUST be documented in a report that can
      support advancement on the standards track, similar to those described
      in <a class='info' href='#RFC5657'>[RFC5657]<span> (</span><span class='info'>Dusseault, L. and R. Sparks, &ldquo;Guidance on Interoperation and Implementation Reports for Advancement to Draft Standard,&rdquo; September&nbsp;2009.</span><span>)</span></a>. The list of measurement devices used
      in testing satisfies the implementation requirement, while the test
      results provide information on the quality of each specification in the
      metric RFC (the surrogate for feature interoperability).
</p>
<p>The figure below illustrates this process:
</p>
<p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>     ,---.
    /     \
   ( Start )
    \     /    Implementations
     `-+-'        +-------+
       |         /|   1   `.
   +---+----+   / +-------+ `.-----------+      ,-------.
   |  RFC   |  /             |Check for  |    ,' was RFC `.  YES
   |        | /              |Equivalence.....  clause x   -------+
   |        |/    +-------+  |under      |    `. clear?  ,'       |
   | Metric \.....|   2   ....relevant   |      `---+---'    +----+---+
   | Metric |\    +-------+  |identical  |       No |        |Report  |
   | Metric | \              |network    |      +---+---.    |results+|
   |  ...   |  \             |conditions |      |Modify |    |Advance |
   |        |   \ +-------+  |           |      |Spec   +----+  RFC   |
   +--------+    \|   n   |.'+-----------+      +-------+    |request?|
                  +-------+                                  +--------+
</pre></div>
<p>
</p>

<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Lab test results to check metric definitions</h3>

<p>This section describes some results from lab tests with test devices
      and a network emulator to create relevant conditions and determine
      whether the metric definitions were interpreted consistently by
      implementors. The procedures are slightly modified from the original
      procedures contained in Appendix A.1 of [draft-ippm-metrictest-00.txt].
      The principle modification the use of the mean statistic for
      comparisons.
</p>
<p>The metric implementation used was NetProbe version 5.8.5, (an
      earlier version is used in the WIPM system and deployed world-wide).
      Accuracy of NetProbe measurements is usually limited by NTP
      synchronization performance (~1ms error or greater), although this lab
      environment often exhibits errors much less than typical for NTP.
</p>
<p>The network emulator is a host running Fedora Core Linux
      [http://fedoraproject.org/] with IP forwarding enabled and the NIST Net
      emulator 2.0.12b [http://snad.ncsl.nist.gov/nistnet/] loaded and
      operating.
</p>
<p>The links between NetProbe hosts and the NIST Net emulator host were
      100baseTx-FD (100Mbps full duplex) as reported by "mii-tool", except as
      noted below.
</p>
<p>For these tests, a stream of at least 30 packets were sent from
      Source to Destination in each implementation. Periodic streams (as per
      <a class='info' href='#RFC3432'>[RFC3432]<span> (</span><span class='info'>Raisanen, V., Grotefeld, G., and A. Morton, &ldquo;Network performance measurement with periodic streams,&rdquo; November&nbsp;2002.</span><span>)</span></a>) with 1 second spacing were used, except
      as noted.
</p>
<p>These examples do not entirely avoid the problem of declaring
      equivalence with a statistical test, but the lab conditions should
      simplify the problem by removing as much variability as possible.
</p>
<p>Note that there are only five instances of the requirement term
      "MUST" in <a class='info' href='#RFC2679'>[RFC2679]<span> (</span><span class='info'>Almes, G., Kalidindi, S., and M. Zekauskas, &ldquo;A One-way Delay Metric for IPPM,&rdquo; September&nbsp;1999.</span><span>)</span></a> outside of the boilerplate and
      <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> reference.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
One-way Delay, Loss threshold, RFC 2679</h3>

<p>This test determines if implementations use the same configured
        maximum waiting time delay from one measurement to another under
        different delay conditions, and correctly declare packets arriving in
        excess of the waiting time threshold as lost.
</p>
<p>See Section 3.5 of <a class='info' href='#RFC2679'>[RFC2679]<span> (</span><span class='info'>Almes, G., Kalidindi, S., and M. Zekauskas, &ldquo;A One-way Delay Metric for IPPM,&rdquo; September&nbsp;1999.</span><span>)</span></a>, 3rd bullet point
        and also Section 3.8.2 of <a class='info' href='#RFC2679'>[RFC2679]<span> (</span><span class='info'>Almes, G., Kalidindi, S., and M. Zekauskas, &ldquo;A One-way Delay Metric for IPPM,&rdquo; September&nbsp;1999.</span><span>)</span></a>.
</p>
<p></p>
<ol class="text">
<li>configure a path with 1 sec one-way constant delay
</li>
<li>measure (average) one-way delay with 2 or more implementations,
            using identical waiting time thresholds for loss set at 2
            seconds
</li>
<li>configure the path with 3 sec one-way delay (or change the path
            delay while test is in progress, when there are sufficient packets
            at the first delay setting)
</li>
<li>repeat/continue measurements
</li>
<li>observe that the increase measured in step 4 caused all packets
            with 3 sec delay to be declared lost, and that all packets that
            arrive successfully in step 2 are assigned a valid one-way
            delay.
</li>
</ol>

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.1"></a><h3>3.1.1.&nbsp;
NetProbe Lab results for Loss Threshold</h3>

<p>In NetProbe, the Loss Threshold is implemented uniformly over all
          packets as a post-processing routine. With the Loss Threshold set at
          2 seconds, all packets with one-way delay &gt;2 seconds are marked
          "Lost" and included in the Lost Packet list with their transmission
          time (as required in Section 3.3 of <a class='info' href='#RFC2680'>[RFC2680]<span> (</span><span class='info'>Almes, G., Kalidindi, S., and M. Zekauskas, &ldquo;A One-way Packet Loss Metric for IPPM,&rdquo; September&nbsp;1999.</span><span>)</span></a>).
          22 of 38 packets were declared lost.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.2"></a><h3>3.1.2.&nbsp;
XXX Lab Results for Loss Threshold</h3>

<p>&gt;&gt;&gt; Comment: this section is a placeholder
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.3"></a><h3>3.1.3.&nbsp;
Conclusions on Lab Results for Loss Threshold</h3>

<p>&gt;&gt;&gt; Comment: this section is a placeholder
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
One-way Delay, First-bit to Last bit, RFC 2679</h3>

<p>This test determines if implementations register the same relative
        increase in delay from one measurement to another under different
        delay conditions. This test tends to cancel the sources of error which
        may be present in an implementation.
</p>
<p>See Section 3.7.2 of <a class='info' href='#RFC2679'>[RFC2679]<span> (</span><span class='info'>Almes, G., Kalidindi, S., and M. Zekauskas, &ldquo;A One-way Delay Metric for IPPM,&rdquo; September&nbsp;1999.</span><span>)</span></a>, and Section
        10.2 of <a class='info' href='#RFC2330'>[RFC2330]<span> (</span><span class='info'>Paxson, V., Almes, G., Mahdavi, J., and M. Mathis, &ldquo;Framework for IP Performance Metrics,&rdquo; May&nbsp;1998.</span><span>)</span></a>.
</p>
<p></p>
<ol class="text">
<li>configure a path with X ms one-way constant delay, and ideally
            including a low-speed link
</li>
<li>measure (average) one-way delay with 2 or more implementations,
            using identical options and equal size small packets (e.g., 100
            octet IP payload)
</li>
<li>maintain the same path with X ms one-way delay
</li>
<li>measure (average) one-way delay with 2 or more implementations,
            using identical options and equal size large packets (e.g., 1500
            octet IP payload)
</li>
<li>observe that the increase measured in steps 2 and 4 is
            equivalent to the increase in ms expected due to the larger
            serialization time for each implementation. Most of the
            measurement errors in each system should cancel, if they are
            stationary.
</li>
</ol>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
NetProbe Lab results for Serialization</h3>

<p>For this test only, the link between the NetProbe Source host and
          the NIST Net emulator host was changed to 10baseT-FD (10Mbps full
          duplex) as configured by "mii-tool".
</p>
<p>The value of X = 1000 ms was used in the NIST Net emulator.
</p>
<p>When the UDP payload size was increased from 32 octets to 1400
          octets, the NIST Net emulator exhibited a bi-modal delay
          distribution. Investigation confirmed that the NetProbe
          implementations tested did not exhibit bi-modal delay on an
          alternate (network management) path.
</p>
<p>
</p>
<p><br /><hr class="insert" />

<p>
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>1400 byte payload   32 byte payload
Delay for each mode   (one mode)     Delay Diff    Expected Diff
  microseconds        microseconds   microseconds  microseconds
    1001621             1000356         1265         1094.4
    1002735             1000356         2379         1094.4</pre></div>
<p>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Average Delay over 60 packets for different payload sizes with Delay computations and comparison with expected delay difference for serialization.&nbsp;</b></font><br /></td></tr></table><hr class="insert" />


<p>For the lower-delay mode, the Delay Difference between payload
          sizes is about 170 microseconds higher than expected. However, it is
          clear that delay increased with a larger payload as expected when
          the measurement is conducted First-bit to Last-bit and includes
          serialization time.
</p>
<p>The higher mode appears on almost every other packet in the
          stream, and comments are sought on possible configuration changes
          that would remove this bi-modal behavior without significant
          sacrifices in other dimensions of performance.
</p>
<p>UPDATE: Additional investigation appears to conclude that the
          modal behavior is related to interrupt-to-frame arrival settings of
          the specific interface board. Various options appear to be
          configurable, but only when the interface driver is compiled as a
          module. Also, the board/driver does not support the "coalesce"
          options of ethtool. Until we can rebuild the Linux machine with this
          and other planned modifications, confirmation will have to wait.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
One-way Delay, Difference Sample Metric (Lab)</h3>

<p>This test determines if implementations register the same relative
        increase in delay from one measurement to another under different
        delay conditions. This test tends to cancel the sources of error which
        may be present in an implementation.
</p>
<p>This test is intended to evaluate measurements in sections 3 and 4
        of <a class='info' href='#RFC2679'>[RFC2679]<span> (</span><span class='info'>Almes, G., Kalidindi, S., and M. Zekauskas, &ldquo;A One-way Delay Metric for IPPM,&rdquo; September&nbsp;1999.</span><span>)</span></a>.
</p>
<p></p>
<ol class="text">
<li>configure a path with X ms one-way constant delay
</li>
<li>measure (average) one-way delay with 2 or more implementations,
            using identical options
</li>
<li>configure the path with X+Y ms one-way delay
</li>
<li>repeat measurements
</li>
<li>observe that the (average) increase measured in steps 2 and 4
            is ~Y ms for each implementation. Most of the measurement errors
            in each system should cancel, if they are stationary.
</li>
</ol>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.1"></a><h3>3.3.1.&nbsp;
NetProbe Lab results for Differential Delay</h3>

<p>In this test, X=1000ms and Y=2000ms.
</p>
<p><br /><hr class="insert" />

<p>
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>Average pre-increase delay, microseconds        1000276.6
Average post 2s additional, microseconds        3000282.6
Difference (should be ~= Y = 2s)                2000006</pre></div>
<p>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Average delays before/after 2 second increase&nbsp;</b></font><br /></td></tr></table><hr class="insert" />


<p>The NetProbe implementation exhibited a 2 second increase with a
          6 microsecond error (assuming that the NIST Net emulated delay
          difference is exact).
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
One-way Delay, ADK Sample Metric (Lab)</h3>

<p>This test determines if implementations produce results that appear
        to come from the same delay distribution. In addition,
        same-implementation results help to set the threshold of equivalence
        that will be applied to cross-implementation comparisons. 
</p>
<p>This test is intended to evaluate measurements in sections 3 and 4
        of <a class='info' href='#RFC2679'>[RFC2679]<span> (</span><span class='info'>Almes, G., Kalidindi, S., and M. Zekauskas, &ldquo;A One-way Delay Metric for IPPM,&rdquo; September&nbsp;1999.</span><span>)</span></a>.
</p>
<p></p>
<ol class="text">
<li>Configure a path with X ms one-way constant delay.
</li>
<li>Measure a sample of one-way delay singletons with 2 or more
            implementations, using identical options.
</li>
<li>Measure a sample of one-way delay singletons with additional
            instances of the *same* implementations, using identical options,
            noting that connectivity differences MUST be the same as for the
            cross implementation testing.
</li>
<li>Apply the ADK comparison procedures (see Appendix C of
            [metricstest]) and determine the resolution and confidence factor
            for distribution equivalence of each same-implementation
            comparison and each cross-implementation comparison.
</li>
<li>Take the largest resolution and confidence factor for
            distribution equivalence from the same-implementation pairs as the
            equivalence threshold for these experimental conditions.
            &gt;&gt;&gt; Question: do we need to account for additional
            cross-implementation error? How much?
</li>
<li>Compare the cross-implementation ADK performance with the
            equivalence threshold determined in step 4 to determine if
            equivalence can be declared.
</li>
</ol>

<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.1"></a><h3>3.4.1.&nbsp;
NetProbe Lab results for ADK</h3>

<p>To be provided, the same-implementation lab tests have been
          completed, but the analysis was not ready in time for
          publication.
</p>
<p><br /><hr class="insert" />

<p>
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre></pre></div>
<p>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;ADK Results for same-implementation&nbsp;</b></font><br /></td></tr></table><hr class="insert" />


<p>
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
Error Calibration, RFC 2679</h3>

<p>This is a simple check to determine if an implementation reports
        the error calibration as required in Section 4.8 of <a class='info' href='#RFC2679'>[RFC2679]<span> (</span><span class='info'>Almes, G., Kalidindi, S., and M. Zekauskas, &ldquo;A One-way Delay Metric for IPPM,&rdquo; September&nbsp;1999.</span><span>)</span></a>. Note that the context (Type-P) must also be
        reported.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5.1"></a><h3>3.5.1.&nbsp;
Net Probe Error and Type-P</h3>

<p>NetProbe error is dependent on the specific version and
          installation details, and was discussed briefly above.
</p>
<p>Type-P for this test was IP-UDP with Best Effort DCSP.
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Notes on Network Emulator Loss Generation </h3>

<p>While network emulators can be expect to generate independent random
      loss, it is well-understood that real loss tends to be correlated to
      some extent.
</p>
<p>NistNet and many earlier and current network emulators use the same
      effective function to generate correlated values for delay and
      correlated values for comparison with a loss threshold. The correlation
      relationship in many emulator descriptions takes the following form:
</p>
<p>Corr_value = Last_value * corr_coeff + New_value * (1-corr_coeff)
</p>
<p>where:
</p>
<p></p>
<ul class="text">
<li>New_value is the random value from some distribution
</li>
<li>Last_value is the result of this equation for the previous
          packet
</li>
<li>corr_coeff is the correlation coefficient, [+1, -1]
</li>
<li>Corr_value is the revised random value with correlation
</li>
</ul><p>This seems to work adequately for delay, as seen in [NistNet].
      However, it does not appear to be possible to produce long loss bursts
      with low probability using this equation. We note that a somewhat more
      complicated relationship is implemented in the NistNet code, and avoids
      range violations that may be possible with correlations at the end of
      range.
</p>
<p>Investigation of similar, but alternative relationship to generate
      loss bursts has begun as part of this effort, and a candidate equation
      has been developed. Integration with an existing emulator is
      in-progress.
</p>
<p>It bears note that some network emulators can produce deterministic
      loss durations in time and/or in lost packets, but the frequent
      appearance of the relationship above is disturbing, given its poor
      ability to produce burst loss, as far as existing tests show.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>There are no security issues raised by discussing the topic of metric
      RFC advancement along the standards track.
</p>
<p>The security considerations that apply to any active measurement of
      live networks are relevant here as well. See <a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a> and <a class='info' href='#RFC5357'>[RFC5357]<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a>.
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>This memo makes no requests of IANA, and hopes that IANA will leave
      it alone, as well.
</p>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgements</h3>

<p>The author would like to thank Len Ciavattone for continued
      consultations on the laboratory aspects of this work, and Yaakov Stein
      for a useful discussion on the bi-modal delay behavior observed in the
      Linux-based router and network emulator used here.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2026">[RFC2026]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2026">The Internet Standards Process -- Revision 3</a>,&rdquo; BCP&nbsp;9, RFC&nbsp;2026, October&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2026.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2330">[RFC2330]</a></td>
<td class="author-text"><a href="mailto:vern@ee.lbl.gov">Paxson, V.</a>, <a href="mailto:almes@advanced.org">Almes, G.</a>, <a href="mailto:mahdavi@psc.edu">Mahdavi, J.</a>, and <a href="mailto:mathis@psc.edu">M. Mathis</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2330">Framework for IP Performance Metrics</a>,&rdquo; RFC&nbsp;2330, May&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2330.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2330.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2330.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2679">[RFC2679]</a></td>
<td class="author-text"><a href="mailto:almes@advanced.org">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org">Kalidindi, S.</a>, and <a href="mailto:matt@advanced.org">M. Zekauskas</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2679">A One-way Delay Metric for IPPM</a>,&rdquo; RFC&nbsp;2679, September&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2679.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2680">[RFC2680]</a></td>
<td class="author-text"><a href="mailto:almes@advanced.org">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org">Kalidindi, S.</a>, and <a href="mailto:matt@advanced.org">M. Zekauskas</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2680">A One-way Packet Loss Metric for IPPM</a>,&rdquo; RFC&nbsp;2680, September&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2680.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3432">[RFC3432]</a></td>
<td class="author-text">Raisanen, V., Grotefeld, G., and A. Morton, &ldquo;<a href="http://tools.ietf.org/html/rfc3432">Network performance measurement with periodic streams</a>,&rdquo; RFC&nbsp;3432, November&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3432.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4656">[RFC4656]</a></td>
<td class="author-text">Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;<a href="http://tools.ietf.org/html/rfc4656">A One-way Active Measurement Protocol (OWAMP)</a>,&rdquo; RFC&nbsp;4656, September&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4656.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4814">[RFC4814]</a></td>
<td class="author-text">Newman, D. and T. Player, &ldquo;<a href="http://tools.ietf.org/html/rfc4814">Hash and Stuffing: Overlooked Factors in Network Device Benchmarking</a>,&rdquo; RFC&nbsp;4814, March&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4814.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5226">[RFC5226]</a></td>
<td class="author-text">Narten, T. and H. Alvestrand, &ldquo;<a href="http://tools.ietf.org/html/rfc5226">Guidelines for Writing an IANA Considerations Section in RFCs</a>,&rdquo; BCP&nbsp;26, RFC&nbsp;5226, May&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5226.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5357">[RFC5357]</a></td>
<td class="author-text">Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;<a href="http://tools.ietf.org/html/rfc5357">A Two-Way Active Measurement Protocol (TWAMP)</a>,&rdquo; RFC&nbsp;5357, October&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5357.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5657">[RFC5657]</a></td>
<td class="author-text">Dusseault, L. and R. Sparks, &ldquo;<a href="http://tools.ietf.org/html/rfc5657">Guidance on Interoperation and Implementation Reports for Advancement to Draft Standard</a>,&rdquo; BCP&nbsp;9, RFC&nbsp;5657, September&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5657.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Al Morton</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AT&amp;T Labs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">200 Laurel Avenue South</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Middletown,, NJ  07748</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 732 420 1571</td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text">+1 732 368 1192</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:acmorton@att.com">acmorton@att.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://home.comcast.net/~acmacm/">http://home.comcast.net/~acmacm/</a></td></tr>
</table>
</body></html>
