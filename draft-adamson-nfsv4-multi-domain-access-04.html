<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>NFSv4 Multi-Domain Access</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Requirements notation">
<link href="#rfc.section.2" rel="Chapter" title="2 Introduction">
<link href="#rfc.section.3" rel="Chapter" title="3 Background">
<link href="#rfc.section.4" rel="Chapter" title="4 Terminology">
<link href="#rfc.section.5" rel="Chapter" title="5 Local Representations of Global Identity">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Storing Name@Domainname">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Storing Remote-ID@Domainname">
<link href="#rfc.section.5.2.1" rel="Chapter" title="5.2.1 Storing Remote-ID@Domain-ID">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 ID Mapping">
<link href="#rfc.section.5.4" rel="Chapter" title="5.4 Use of Name Services">
<link href="#rfc.section.5.4.1" rel="Chapter" title="5.4.1 Using LDAP with RFC2307 Schema">
<link href="#rfc.section.5.4.2" rel="Chapter" title="5.4.2 Using Active Directory LDAP">
<link href="#rfc.section.5.4.3" rel="Chapter" title="5.4.3 Mapping Domain Names to Domain IDs">
<link href="#rfc.section.6" rel="Chapter" title="6 Resolving Cross-Domain Authorization Information">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Credential Authorization Data">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Using Credential Authorization Data">
<link href="#rfc.section.6.2.1" rel="Chapter" title="6.2.1 Using a PAC">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 Using Directory Services">
<link href="#rfc.section.6.3.1" rel="Chapter" title="6.3.1 Mapping Principal Names to Username">
<link href="#rfc.section.6.3.2" rel="Chapter" title="6.3.2 Using a Name Service to Map Principal Names to User Accounts">
<link href="#rfc.section.7" rel="Chapter" title="7 Multi Domain User Group Membership Determination">
<link href="#rfc.section.8" rel="Chapter" title="8 LDAP and Multi-Domain NFSv4">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 LDAP Service Discovery">
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 LDAP Attribute for Principal Name to Local ID Translation">
<link href="#rfc.section.8.3" rel="Chapter" title="8.3 Name Resolution and LDAP Caching">
<link href="#rfc.section.9" rel="Chapter" title="9 Security Considerations">
<link href="#rfc.references" rel="Chapter" title="10 References">
<link href="#rfc.references.1" rel="Chapter" title="10.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="10.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The Network File System, version 4 (NFSv4) uses a representation of identity that allows the use of users and groups from multiple, distinct administrative domains, and NFSv4 allows the use of security mechanisms that authenticate principals from multiple, distinct administrative domains.  This document describes methods by which NFSv4 clients and servers can handle principals, users, groups from multiple administrative domains." />
  <meta name="description" content="The Network File System, version 4 (NFSv4) uses a representation of identity that allows the use of users and groups from multiple, distinct administrative domains, and NFSv4 allows the use of security mechanisms that authenticate principals from multiple, distinct administrative domains.  This document describes methods by which NFSv4 clients and servers can handle principals, users, groups from multiple administrative domains." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">NFSv4 Working Group</td>
<td class="right">W.A. Adamson</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">NetApp</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">K.W. Coffman</td>
</tr>
<tr>
<td class="left">Expires: September 14, 2011</td>
<td class="right">CITI, University of Michigan</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">N. Williams</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Oracle</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">March 13, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">NFSv4 Multi-Domain Access<br />
  <span class="filename">draft-adamson-nfsv4-multi-domain-access-04</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The Network File System, version 4 (NFSv4) uses a representation of identity that allows the use of users and groups from multiple, distinct administrative domains, and NFSv4 allows the use of security mechanisms that authenticate principals from multiple, distinct administrative domains.  This document describes methods by which NFSv4 clients and servers can handle principals, users, groups from multiple administrative domains.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on September 14, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Requirements notation</a>
</li>
<li>2.   <a href="#rfc.section.2">Introduction</a>
</li>
<li>3.   <a href="#rfc.section.3">Background</a>
</li>
<li>4.   <a href="#rfc.section.4">Terminology</a>
</li>
<li>5.   <a href="#rfc.section.5">Local Representations of Global Identity</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Storing Name@Domainname</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Storing Remote-ID@Domainname</a>
</li>
<li>5.2.1.   <a href="#rfc.section.5.2.1">Storing Remote-ID@Domain-ID</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">ID Mapping</a>
</li>
<li>5.4.   <a href="#rfc.section.5.4">Use of Name Services</a>
</li>
<li>5.4.1.   <a href="#rfc.section.5.4.1">Using LDAP with RFC2307 Schema</a>
</li>
<li>5.4.2.   <a href="#rfc.section.5.4.2">Using Active Directory LDAP</a>
</li>
<li>5.4.3.   <a href="#rfc.section.5.4.3">Mapping Domain Names to Domain IDs</a>
</li>
<li>6.   <a href="#rfc.section.6">Resolving Cross-Domain Authorization Information</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Credential Authorization Data</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Using Credential Authorization Data</a>
</li>
<li>6.2.1.   <a href="#rfc.section.6.2.1">Using a PAC</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">Using Directory Services</a>
</li>
<li>6.3.1.   <a href="#rfc.section.6.3.1">Mapping Principal Names to Username</a>
</li>
<li>6.3.2.   <a href="#rfc.section.6.3.2">Using a Name Service to Map Principal Names to User Accounts</a>
</li>
<li>7.   <a href="#rfc.section.7">Multi Domain User Group Membership Determination</a>
</li>
<li>8.   <a href="#rfc.section.8">LDAP and Multi-Domain NFSv4</a>
</li>
<li>8.1.   <a href="#rfc.section.8.1">LDAP Service Discovery</a>
</li>
<li>8.2.   <a href="#rfc.section.8.2">LDAP Attribute for Principal Name to Local ID Translation</a>
</li>
<li>8.3.   <a href="#rfc.section.8.3">Name Resolution and LDAP Caching</a>
</li>
<li>9.   <a href="#rfc.section.9">Security Considerations</a>
</li>
<li>10.   <a href="#rfc.references">References</a>
</li>
<li>10.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>10.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Requirements notation</h1>
<p id="rfc.section.1.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Introduction</h1>
<p id="rfc.section.2.p.1">The <a href="#RFC3530">NFS Version 4</a> <cite title="NONE">[RFC3530]</cite> protocol enables the construction of a distributed file system which can join NFSv4.0 or <a href="#I-D.ietf-nfsv4-minorversion1">NFSv4.1</a> <cite title="NONE">[I-D.ietf-nfsv4-minorversion1]</cite> servers from multiple administrative domains, each potentially using separate name resolution services and separate security services, into a common multi-domain name space.</p>
<p id="rfc.section.2.p.2">NFSv4 deals with two kinds of identities: authentication identities (referred to here as "principals") and authorization identities ("users" and "groups" of users).  NFSv4 supports multiple authentication methods, each authenticating an "initiator principal" (typically representing a user) to an "acceptor principals" (always corresponding to the server).  NFSv4 does not prescribe how to represent authorization identities on file systems.  All file access decisions constitute "authorization" and are made by servers using information about client principals (such as username, group memberships, and so on) and file metadata related to authorization, such as a file's access control list (ACL).</p>
<p id="rfc.section.2.p.3">Authentication in NFSv4 occurs at the the <a href="#RFC2203">RPCSEC_GSS</a> <cite title="NONE">[RFC2203]</cite> layer where GSS-API mechanisms <a href="#RFC2743">[RFC2743]</a> are used to authenticate users on NFSv4 clients to NFSv4 servers, and to provide security services such as confidentiality and integrity protection for the protocol's messages.  The NFSv4 protocol specifies no particular representation for authentication identities as these are entirely GSS-API mechanism-specific.</p>
<p id="rfc.section.2.p.4">Authorization for file object access is done at the NFSv4 protocol layer (i.e., above the RPCSEC_GSS layer), on the server side, based on an authenticated client principal's authorization context and the authorization meta-data of the file system objects that the client wishes to access.  File authorization meta-data is set and retrieved in the NFSv4 <a href="#RFC1831">RPC</a> <cite title="NONE">[RFC1831]</cite> layer, specifically via the object's owner, owner_group and acl, dacl and sacl attributes (the last three being ACLs).  ACLs are lists of ACL entries (ACEs).  Each ACE has a "who" field identifying a subject to whom some permission is granted or denied.  The owner and owner_group attributes and the who ACE field, all reference users and groups.  On the wire, the protocol represents users and groups as strings of characters with this form: name@domain, where &lt;name&gt; is a user or group name, and &lt;domain&gt; is a the name of an administrative domain, more specifically a <a href="#RFC1034">DNS</a> <cite title="NONE">[RFC1034]</cite> domainname.</p>
<p id="rfc.section.2.p.5">NFSv4 server implementations usually do not, and really ought not, store authorization identities on disk in the same form as is used on the wire.  The reason is that users' and groups' names change all too often, while searching for and updating file authorization meta-data after a user/group name change is not trivial, particularly in a global namespace spanning multiple administrative domains.</p>
<p id="rfc.section.2.p.6">NFSv4 servers therefore must perform two kinds of mappings: </p>
<p></p>

<ol>
<li>Between the authentication identity and the authorization context (a principal's user ID, group memberships, etcetera)</li>
<li>Between the on-the-wire authorization identity representation and the on-disk authorization identity representation.</li>
</ol>

<p> </p>
<p id="rfc.section.2.p.8">Many aspects of these mappings are entirely implementation-specific, but some require name resolution services, and in order to interoperate servers must use such services in compatible ways.  Many implementations are limited to being able to represent users and groups from a single domain.</p>
<p id="rfc.section.2.p.9">In this document we address both of those kind of mappings, describing possible implementation strategies, and specifying a name service for interoperation in a global namespace <a href="#I-D.ietf-nfsv4-federated-fs-reqts">[I-D.ietf-nfsv4-federated-fs-reqts]</a>.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Background</h1>
<p id="rfc.section.3.p.1">NFSv4 uses a syntax of the form "name@domain" to represent, on the wire, the NFSv4 ACL name for users and groups.  This design provides a level of indirection that allows a client and server with different internal representations of authorization identity to interoperate even when referring to authorization identities from different administrative domains.</p>
<p id="rfc.section.3.p.2">Multi-domain capable sites need to meet certain requirements in order to ensure that clients and servers can map name@domain to internal representations reliably:</p>
<p></p>

<ul>
<li>The name portion of name@domain MUST be unique within the specified DNS domain.</li>
<li>Every local representation of a user and of a group MUST have a canonical name@domain, and it must be possible to return the canonical name@domain for any identity stored on disk, at least when required infrastructure servers (such as name services) are online.</li>
</ul>

<p> </p>
<div id="#rfc.figure.1"></div>
<p>As described in <a href="#I-D.ietf-nfsv4-minorversion1">[I-D.ietf-nfsv4-minorversion1]</a> section 2.2.1.1 "RPC Security Flavors": </p>
<pre>
        NFSv4.1 clients and servers MUST implement RPCSEC_GSS.  (This
        requirement to implement is not a requirement to use.)  Other
        flavors, such as AUTH_NONE, and AUTH_SYS, MAY be implemented
        as well.
		</pre>
<p id="rfc.section.3.p.4">The AUTH_NONE security flavor can be useful to the multi-domain NFSv4 or federated name space to grant universal access to public data without any credentials.</p>
<p id="rfc.section.3.p.5">The AUTH_SYS security flavor uses a host-based authentication model where the [weakly-authenticated] client asserts the user's authorization identities using small integers as user and group identity representations.  Because of the small integer authorization ID representation, AUTH_SYS can only be used in a name space where all clients and servers share a uidNumber and gidNumber translation service.  A shared translation service is required because uidNumbers and gidNumbers are passed in the RPC credential; there is no negotiation of namespace in AUTH_SYS.  Collisions can occur if multiple translation services are used.  These and other issues are addressed in <a href="#I-D.williams-rpcsecgssv3">[I-D.williams-rpcsecgssv3]</a> which describes a new version of RPCSEC_GSS that includes a modernized replacement for AUTH_SYS.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Terminology</h1>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">Identity: a way to refer to a user or group.</dd>
<dt></dt>
<dd style="margin-left: 8">Principal: an entity that is authenticated by RPCSEC_GSS (usually, but not always, a user; rarely, if ever, a group; sometimes a host).</dd>
<dt></dt>
<dd style="margin-left: 8">Authorization context: the set of user and group IDs, privileges, labels, and other items relevant to authorization, corresponding to a subject (user or principal).</dd>
<dt></dt>
<dd style="margin-left: 8">Domain-local ID: Most installations assign numeric, local identifiers to users and groups, using a namespace local to their domain.  We call this a domain-local ID.</dd>
<dt></dt>
<dd style="margin-left: 8">Local representation of identity: an item such as a POSIX user IDentifier (UID) or group ID (GID), or a Windows Security IDentifier (SID), or other such representation of a user or a group of users. These can be local to a single host.</dd>
<dt></dt>
<dd style="margin-left: 8">Global representation of identity: a tuple consisting of a domain identifier (possibly the domain's name itself) and a domain-local user/group ID.  We do not propose a standard global representation of identity, but the concept is useful. [NEEDSWORK: we refer to the global representation form in the RPCSEC_GSS PAC]</dd>
<dt></dt>
<dd style="margin-left: 8">Group: a security entity representing zero, one or more users and, possibly, other groups.  Can appear as the subject of an ACE.</dd>
<dt></dt>
<dd style="margin-left: 8">Domain: a set of users, groups and computers administered by a single entity, and identified by a DNS domain name.</dd>
<dt></dt>
<dd style="margin-left: 8">POSIX IDs: small non-negative integer (typically 0..2^31 or 0..2^32) identifiers.  The namespace of user IDs (UIDs) is distinct from the namespace of group IDs (GIDs).</dd>
<dt></dt>
<dd style="margin-left: 8">Windows SIDs: an identifier of security entities, including users and groups.  The form of a SID is: S-1-&lt;authority&gt;-&lt;RID_0&gt;-&lt;RID_1&gt; -&lt;RID_n&gt; By convention some authority numbers denote security entities, identified by RID_n, local to a domain identified by RIDs 0..n-1.  Domain RIDs are usually generated randomly within a "forest" of domains.</dd>
<dt></dt>
<dd style="margin-left: 8">Name resolution: mapping from {domain, name} to {domain, ID}, and vice-versa via lookups. Can be applied to local or remote domains.</dd>
<dt></dt>
<dd style="margin-left: 8">ID mapping: {remote domain, remote domain-local ID} to {local representation of ID} mappings.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#ONDISK" id="ONDISK">Local Representations of Global Identity</a>
</h1>
<p id="rfc.section.5.p.1">Multi-domain support starts at the fileserver where local ID forms need to be able to represent global identities from both local and remote domains.  Local representation of global identity also applies to clients, particularly clients with local filesystems.  There's a range of local solutions to this multi-domain ID representation problem. In this section we describe several approaches to representing a &lt;name&gt;@&lt;local or remote domain&gt; on disk.  None of these approaches are REQUIRED; all are INFORMATIVE.  However, conventions relating to the use of name services are NORMATIVE.</p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> Storing Name@Domainname</h1>
<p id="rfc.section.5.1.p.1">One simple approach to the multiple domain problem is to store the name@domain on disk.</p>
<p id="rfc.section.5.1.p.2">This approach imposes a severe constraint on the administrators of these domains: user and group names must never be reused, as there is also no realistic way to keep the name@domain on disk representation up to date with user, group or domain renames and removals.  Consider a remote domain's NFSv4 servers where real-time employee join/leave data may be (typically is!) considered privileged, and remote servers may not be sufficiently privileged to access it [NEEDSWORK].</p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#ID@DOMAIN" id="ID@DOMAIN">Storing Remote-ID@Domainname</a>
</h1>
<p id="rfc.section.5.2.p.1">Most installations assign numeric, local identifiers to users and groups, using a namespace local to their domain.  We call this a domain-local ID.  We can then construct a global identity form consisting of a domain name and a domain-local user/group ID.</p>
<p id="rfc.section.5.2.p.2">The user or group renaming issue can be addressed by using a global identity form where domain-local IDs are required.  I.e., use name resolution to lookup name@domain to find the ID local to the specified domain, and join the ID with the specified domain name.  This function still has a renaming problem with respect to DNS domain renames, but that is a more realistically manageable problem than the user/group renaming problem.</p>
<h1 id="rfc.section.5.2.1">
<a href="#rfc.section.5.2.1">5.2.1.</a> <a href="#STORE" id="STORE">Storing Remote-ID@Domain-ID</a>
</h1>
<p id="rfc.section.5.2.1.p.1">The DNS domain renaming issue in the previous section can be addressed by assigning and publishing a unique ID to each DNS domain.  I.e., use name resolution to lookup name@domain to find some ID local to the domain, lookup the domain ID and store &lt;remote-ID,domain-ID&gt;.  The Windows Security Identifier (SID) is an example of this form.</p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> <a href="#ID-MAPPING" id="ID-MAPPING">ID Mapping</a>
</h1>
<p id="rfc.section.5.3.p.1">Many file systems exported by NFS only store 32-bit user and group IDs which limit their ability to utilize the on disk representation described in <a href="#ID@DOMAIN">Section 5.2</a>.  Such systems may need to use an additional service to map between &lt;remote user ID, local user IDs&gt; and &lt;remote group IDs, local group IDs&gt;.  We call this an "ID mapping service".</p>
<p id="rfc.section.5.3.p.2">The use of an ID mapping service is not strictly necessary if the system operates on IDs large enough and in a known format such that &lt;user/group ID, domain ID&gt; can be parsed and encoded into a native ID.  However, a large class of operating systems, those which are Unix or Unix-like operating systems, such as Solaris and Linux, use 32-bit UIDs and GIDs in many interfaces and therefore need mapping for backwards compatibility reasons.</p>
<p id="rfc.section.5.3.p.3">One example of such a service is to keep a local or distributed database for dynamically assigning a local 32 bit ID to every &lt;ID&gt;@&lt;domain-ID&gt;, or one could do that only for remote domains, reserving only a small part of the local 32-bit ID namespace for remote domains' users/groups.</p>
<p id="rfc.section.5.3.p.4">The remote ID and remote domain are then used as inputs to a name resolution service which contacts the remote domain name service to resolve the remote name.</p>
<h1 id="rfc.section.5.4">
<a href="#rfc.section.5.4">5.4.</a> Use of Name Services</h1>
<p id="rfc.section.5.4.p.1">File systems often use a distributed directory service for resolving domain local 32 bit IDs to users and groups.  The <a href="#NIS">Network Information Service</a> <cite title="NONE">[NIS]</cite> and the <a href="#RFC4511">Lightweight Directory Access Protocol</a> <cite title="NONE">[RFC4511]</cite> are the two broadly deployed distributed directory service protocols used for this purpose.  LDAP is used instead of NIS in environments where scalabilty, security and/or extensibility are desired.  <a href="#GSSAUTH">Section 8.2</a> expands the LDAP protocol to include mappings between principals and local user and group IDs.</p>
<p id="rfc.section.5.4.p.2">Support for LDAP <a href="#RFC4511">[RFC4511]</a> with the RFC2307 schema <a href="#RFC2307">[RFC2307]</a> is REQUIRED.</p>
<h1 id="rfc.section.5.4.1">
<a href="#rfc.section.5.4.1">5.4.1.</a> <a href="#USING-LDAP" id="USING-LDAP">Using LDAP with RFC2307 Schema</a>
</h1>
<p id="rfc.section.5.4.1.p.1">Name resolution consists of searches with scope 'sub', a base DN corresponding to a domain (more on this below) and a filter of either of these forms, with matching on objectClass being optional:</p>
<p></p>

<ul>
<li>(objectClass=posixAccount)(uid="&lt;username&gt;)</li>
<li>(objectClass=posixGroup)(cn="&lt;groupname&gt;)</li>
<li>(objectClass=posixAccount)(uidNumber="&lt;UID&gt;)</li>
<li>(objectClass=posixGroup)(gidNumber="&lt;GID&gt;)</li>
</ul>

<p> </p>
<p id="rfc.section.5.4.1.p.3">The base DN SHOULD be formatted from a domain's DNS domainname as follows.  First format the domainname as a string, then strip the trailing dot ('.'), if any, then replace all dots ('.') with ",DC=", then prepend "DC=" to the resulting string.  For example, foo.bar.example becomes "DC=foo,DC=bar,DC=example".  This convention is REQUIRED to be implemented.  Domains with base DNs that do not match this convention MAY be used, but their domainname-to-base-DN mappings must be published where NFSv4 clients and servers may find them; we provide no conventions for publishing such mappings.  We RECOMMEND that LDAP referrals be used to publish such mappings (e.g., the client does an LDAP search using "DC=foo,DC=example" as the base DN and gets a referral that includes the correct non-standard base DN for "foo.example").</p>
<p id="rfc.section.5.4.1.p.4">Client and server implementations MUST support the use of LDAP referrals to find LDAP servers authoritative for any given base DN.</p>
<p id="rfc.section.5.4.1.p.5">For example, to resolve a user named joe@foo.bar.example to a remote ID a system would do an LDAP search with DC=foo,DC=bar,DC=example as the base DN, scope='sub' and with a filter of (objectClass=posixAccount)(uid="&lt;username&gt;) looking for the uidNumber attribute.</p>
<h1 id="rfc.section.5.4.2">
<a href="#rfc.section.5.4.2">5.4.2.</a> Using Active Directory LDAP</h1>
<p id="rfc.section.5.4.2.p.1">[NEEDSWORK: Add text describing searches by which to resolve name@domain to SIDs and vice versa.]</p>
<h1 id="rfc.section.5.4.3">
<a href="#rfc.section.5.4.3">5.4.3.</a> Mapping Domain Names to Domain IDs</h1>
<p id="rfc.section.5.4.3.p.1">[NEEDSWORK: Add text on mapping domainnames to domain IDs. Note that Windows SID does this.]</p>
<p id="rfc.section.5.4.3.p.2">We need to have a common way to map Domain Names to Domain IDs to enable mult-domain numeric IDs as described in <a href="#STORE">Section 5.2.1</a>.  Currently we have two suggestions: </p>

<ol>
<li>Just use SIDs, first asking MSFT to allocate a suitable authority for non-Windows domain SIDs.</li>
<li>- Store 96-bit numeric IDs which means we: <ul>
<li>cast those to domain SIDs later </li>
<li>define a non-SID large ID format. This is a fine fallback should MSFT be unwilling to assign authority numbers for this purpose</li>
</ul>
</li>
</ol>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#CROSSAUTH" id="CROSSAUTH">Resolving Cross-Domain Authorization Information</a>
</h1>
<p id="rfc.section.6.p.1">In order to authorize client principal access to files, the NFS server must map the RPCSEC_GSS client principal name or the underlying GSS-API security context to authorization information including a local ID, a set of local group IDs and other local user privileges meaningful to the file system being exported.</p>
<p id="rfc.section.6.p.2">In the cross-domain case where a client principal is seeking access to files on a server in a different NFSv4 domain, the NFS server needs to obtain, in a secure manner, the authorization information from an authoritative source: e.g. a directory service in the client principals NFS domain.  </p>
<p id="rfc.section.6.p.3">There are several methods the cross-domain authoritative authorization information can be obtained: </p>

<ol>
<li>A mechanism specific GSS-API authorization payload containing credential authorization data such as a "privilege attribute certificate" or PAC.</li>
<li>An NFS server local domain directory query when there is a security agreement between the two cross-domain directory services plus regular update data feeds so that the NFS server local domain directory service is authoritative for the client prinicpal domain.</li>
<li>A direct query from the NFS server to the client principal authoritative directory service. </li>
</ol>
<p id="rfc.section.6.p.4">The authorization data information SHOULD be obtained via the GSS-API name attribute interface <a href="#I-D.ietf-kitten-gssapi-naming-exts">[I-D.ietf-kitten-gssapi-naming-exts]</a> either via a single attribute for the credential authorization data or via discrete GSS-API name attributes corresponding to the authorization data elements described in <a href="#V4ACCESS">Section 6.1</a>.  Details for those attributes are TBD.</p>
<p id="rfc.section.6.p.5">Note that the retrieval of attribute values used by the GSS-API name attribute interface implementation could utilize any of the above mentioned methods of obtaining the authorization information.</p>
<p id="rfc.section.6.p.6">If the named attribute interface is not available, or the attributes are not available, other means of determining a principal's authorization data SHOULD be used, such as those described in <a href="#AUTHCRED">Section 6.2</a> and <a href="#DirServ">Section 6.3</a>.</p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> <a href="#V4ACCESS" id="V4ACCESS">Credential Authorization Data</a>
</h1>
<p id="rfc.section.6.1.p.1">Here we list in more detail the authorization information that an NFSv4 server needs in order to make a file access decision.  The credential authorization data contains the user and group IDs corresponding to the client principal, in global representation of identity form.  Note that the server may need to map the global IDs to local IDs as described in <a href="#ID-MAPPING">Section 5.3</a>.</p>
<p id="rfc.section.6.1.p.2">The ability to map IDs to the name@domain form is required for the NFSv4 server to be able to respond to file authorization meta-data (ACL) set and retrieve requests.</p>
<p id="rfc.section.6.1.p.3">Credential authorization data consists of:</p>
<p></p>

<ul>
<li>UserID: This field contains the principal's global ID and/or local ID mapping thereof, and the name@domain form thereof.</li>
<li>PrimaryGroupID: This field contains the global ID and/or local ID mapping thereof for the principal's primary group, and the name@domain form thereof.</li>
<li>Groups: This field contains an array of group IDs for the groups that the user is a member of, in global ID form and/or local ID mappings thereof, as well as in name@domain forms.</li>
<li>Optional field(s) for privileges and authorizations granted to the principal, if any.</li>
<li>Optional field(s) for other privilege information such as the multi-level security label range/set of the principal.</li>
<li>Optional implementation-specific items relevant to authorization.</li>
</ul>

<p> </p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> <a href="#AUTHCRED" id="AUTHCRED">Using Credential Authorization Data</a>
</h1>
<p id="rfc.section.6.2.p.1">Authorization context information can sometimes be obtained from the credentials authenticating a principal; the GSS-API represents such information as attributes of the initiator prinicpal name.  For example: Kerberos 5 <a href="#RFC4120">[RFC4120]</a> has a method for conveying "authorization data", both client-asserted as well as KDC-authenticated authorization data, and one KDC implementation uses this feature to convey a "privilege attribute certificate" (PAC) listing the principal's user and group "security identifiers" (SIDs).  Another example is the Kerberos General PAC <a href="#I-D.sorce-krbwg-general-pac">[I-D.sorce-krbwg-general-pac]</a> which lists the principal's user and group "universal user identifiers" (UUIDs) as well as their string representations and DNS domains.  PKIX <a href="#RFC5280">[RFC5280]</a> certificates allow for extensions that could be used similarly.</p>
<h1 id="rfc.section.6.2.1">
<a href="#rfc.section.6.2.1">6.2.1.</a> Using a PAC</h1>
<p id="rfc.section.6.2.1.p.1">The Windows operating system uses an authorization context called a <a href="#PAC">"PAC"</a> <cite title="NONE">[PAC]</cite>, which contains a user Security IDentifier (SID) and a list of group SIDs.  Some Kerberos Key Distribution Centers (KDCs), notably Windows KDCs, issue Kerberos Tickets with PACs as Kerberos authorization data.</p>
<p id="rfc.section.6.2.1.p.2">Some KDCs (will) issue Kerberos Tickets with the <a href="#I-D.sorce-krbwg-general-pac">General PAC </a> <cite title="NONE">[I-D.sorce-krbwg-general-pac]</cite> as authorization data.  The General PAC authorization data MUST be authenticated in the sense that its contents must come from an authenticated, trusted source, such as a directory server or the issuer of the client principal's credential.</p>
<p id="rfc.section.6.2.1.p.3">When a client principal is authenticated using such a ticket, the server SHOULD extract the PAC from the client's ticket and map, if need be, the SIDs or UUIDs in the PAC to local ID representations.  </p>
<p id="rfc.section.6.2.1.p.4">The authorization context information in a PAC can be considered a single, authenticated, discrete GSS-API name attribute, in which case the server must parse it into its individual elements.</p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> <a href="#DirServ" id="DirServ">Using Directory Services</a>
</h1>
<p id="rfc.section.6.3.p.1">If suitable and sufficient authenticated GSS-API name attributes for the client principal are not available, then the server may try to map the client principal name to a local notion of user account, and then lookup that user account's authorization context information through authenticated name service lookups.</p>
<h1 id="rfc.section.6.3.1">
<a href="#rfc.section.6.3.1">6.3.1.</a> <a href="#PRINC_TO_USER" id="PRINC_TO_USER">Mapping Principal Names to Username</a>
</h1>
<p id="rfc.section.6.3.1.p.1">One simple method for Kerberos principal-to-username mapping is to first apply an algorithmic or table-based Kerberos client principal realm name to domain name mapping, then a client principal name to username mapping.  Finally, the server can look up the user's authorization context using the user's domain's name services.</p>
<p id="rfc.section.6.3.1.p.2">A trivial Kerberos realm-name-to-domainname mapping consists of using the realm name as the domainname.  [NEEDSWORK: Add notes about internationalization.] Servers SHOULD implement this mapping as an option, possibly as a default option.</p>
<p id="rfc.section.6.3.1.p.3">A trivial Kerberos principal name to username mapping for 1-component principal names is to use the principal name, unmodified, as the username.  Servers SHOULD implement this mapping as an option, possibly as a default option.</p>
<h1 id="rfc.section.6.3.2">
<a href="#rfc.section.6.3.2">6.3.2.</a> Using a Name Service to Map Principal Names to User Accounts</h1>
<p id="rfc.section.6.3.2.p.1">Name services such as the Solaris gsscred database where the local identity is looked up in a database keyed by the GSS exported name token, or LDAP with the extension described in <a href="#GSSAUTH">Section 8.2</a>, can be used to map principal names to user accounts.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Multi Domain User Group Membership Determination</h1>
<p id="rfc.section.7.p.1">User group membership is easy to determine for users in a system's local domain: the operating system will already know how to do that. For users in remote domains, the authentication service may provide group membership information. If not, we need methods for group memebership determination.  </p>
<p id="rfc.section.7.p.2">[ NEEDSWORK: </p>

<ol>
<li>provide a[n obviously limited] mode of operation that depends only on RFC2307 and therefore does not support group nesting; </li>
<li>provide a more full-fledged mode of operation that depends RFC2307bis; </li>
<li>provide a more full-fledged mode of operation that depends AD's schema.] </li>
</ol>
<p id="rfc.section.7.p.3">User group membership in remote domain's groups, and/or for remote users, may be determined using LDAP with the RFC2307 schema.  The RFC2307 schema does not define the values of the 'memberUid' attribute, but in practice it seems that those are expected to be the names of users as found in the 'uid' attribute of 'posixAccount' entries.  There is work in progress to update RFC2307 <a href="#I-D.howard-rfc2307bis">[I-D.howard-rfc2307bis]</a> to allow the use of DNs in the member attribute. Group nesting is also enabled.  </p>
<p id="rfc.section.7.p.4">Assuming the ability to store DNs in the member attribute, then, group membership determination can be done as follows.  Given a user ID whose DN has been determined: </p>

<ol>
<li>Search the user's domain for groups that the user is a member of in the user's home domain.  Since we cannot assume a domain is authoritative for another domains group membership, filter out groups that are not local to the user's home domain.  </li>
<li>Search the server's domain for groups that the user is a member of in the server's home domain.  </li>
<li>Search the server's domain for groups that the user's group memberships determined in steps 1 and 2 are members of.  </li>
<li>Continue searching for nested group memberships given the list of groups from steps 2 and 3 while being careful to detect or prevent loops.  </li>
</ol>

<p> </p>
<p id="rfc.section.7.p.5">However, the above procedure has the same user/group name renaming issue.  By skipping step 2 we can get down to just a group renaming issue.  To fully address the rename issue we need either a new attribute or value type for memberUid, storing user/group IDs in some global ID representation.  </p>
<p id="rfc.section.7.p.6">[NEEDSWORK: Add text defining such a new attribute/value type.]</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#LDAP" id="LDAP">LDAP and Multi-Domain NFSv4</a>
</h1>
<p id="rfc.section.8.p.1">Each of the three methods of retrieving cross-domain authorization information described in section <a href="#CROSSAUTH">Section 6</a> can require a directory service query. Cross-domain querys are not only inefficient, but also implies knowledge of multiple systems where two different domains rely on completely different infrastructures for user information.  </p>
<p id="rfc.section.8.p.2">[NEEDSWORK: Describe why LDAP is REQUIRED] </p>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> LDAP Service Discovery</h1>
<p id="rfc.section.8.1.p.1">[NEEDSWORK: this is just an idea place holder.] </p>
<p id="rfc.section.8.1.p.2">Two potential methods: </p>

<ol>
<li>Use local methods (configuration, DNS SRV RR lookups, ...) to discover local domain's servers, then depend on LDAP referrals for discovering all other domains servers.</li>
<li>Use DNS SRV RRs much the way AD does </li>
</ol>

<p> </p>
<p id="rfc.section.8.1.p.3">NICO: I would prefer that we have one REQUIRED to implement service discovery mechanism as follows: </p>

<ul>
<li>specify local DS discovery using DNS SRV RR lookups much like AD does (i.e., have a label to indicate the purpose of the LDAP service, not just _ldap).  Make this general enough that clients could discover DSes of remote domains on their own. </li>
<li>use LDAP referrals (and DNS resolution of the host parts of the referrals) to discover DSes of other domains. </li>
</ul>
<p id="rfc.section.8.1.p.4">The main benefit of this mechanism is that we can leave the work of finding topologically-close caches and/or authoritative servers to the clients' local DSes, thus avoiding the need to deal directly with topology in our spec.  </p>
<h1 id="rfc.section.8.2">
<a href="#rfc.section.8.2">8.2.</a> <a href="#GSSAUTH" id="GSSAUTH">LDAP Attribute for Principal Name to Local ID Translation</a>
</h1>
<p id="rfc.section.8.2.p.1">The gSSPrincipal objectclass allows for the use of the gSSAuthName attribute described in the following section.  </p>
<div id="#rfc.figure.2"></div>
<pre>
                     objectclass ( 1.3.6.1.4.1.250.10.7
                     NAME 'gSSPrincipal'
                     DESC 'GSS Principal Name'
                     SUP  posixAccount
                     MAY ( gSSAuthName ) )
		    </pre>
<p id="rfc.section.8.2.p.2">The gSSAuthName attribute provides a method for the translations between a posixAccount and (multiple) GSS-API security principals, used as described in <a href="#PRINC_TO_USER">Section 6.3.1</a>.</p>
<div id="#rfc.figure.3"></div>
<p>The gSSAuthName attribute stores a user's GSS-API principal name in exported name token form (see <a href="#RFC2743">[RFC2743]</a>).  </p>
<pre>
                     attributetype ( 1.3.6.1.4.1.250.10.6
                     NAME ( 'gSSAuthName')
                     DESC 'GSS-API exported principal name
                     exported token'
                     EQUALITY bitStringMatch
                     SYNTAX 1.3.6.1.4.1.1466.115.121.1.6)
		    </pre>
<h1 id="rfc.section.8.3">
<a href="#rfc.section.8.3">8.3.</a> Name Resolution and LDAP Caching</h1>
<p id="rfc.section.8.3.p.1">As noted in <a href="#ID@DOMAIN">Section 5.2</a>, most local representations require a name service to perform ID to name translations.  Implementations are REQUIRED to support the use of LDAP as a name service, relying on LDAP referrals for federated namespace construction.</p>
<p id="rfc.section.8.3.p.2">Note that in a topographically widely separated set of domains the need to do name service lookups in various domains' name services may prove brittle, resulting in non-deterministic server behavior (e.g., sometimes a user can access share, sometimes they cannot; sometimes they appear to be members of some group, sometimes they do not).  To avoid this, site administrators may wish to maintain local caches of remote domains' name services such that LDAP searches for users/groups in remote domains can be satisfied locally for some set of key attributes (such as naming and ID attributes), with referrals used in all other cases.</p>
<p id="rfc.section.8.3.p.3">Domains in a federated namespace may provide each other with LDAP LDIF delta feeds by which to maintain cached LDAP contents up to date.The LDAP DN hierarchy described in <a href="#USING-LDAP">Section 5.4.1</a> has the advantage of aiding delta feeds from remote domains where each domain's information is in its own DN subtree.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> Security Considerations</h1>
<p id="rfc.section.9.p.1">Caching of remote domains' LDAP search results persents some security considerations.  For example, some attributes' values may not be visible unless a user's credentials are used.  Some attributes' values may not be intended to be visible to users, but to hosts.  Caching servers MUST be capable of issuing referrals as needed for attributes whose values they may not read.  Some domain federations will want to have their domains trust each others' caching servers.</p>
<p id="rfc.section.9.p.2">More considerations to come</p>
<h1 id="rfc.references">
<a href="#rfc.references">10.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">10.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1034">[RFC1034]</b></td>
<td class="top">
<a title="Information Sciences Institute (ISI)">Mockapetris, P.</a>, "<a href="http://tools.ietf.org/html/rfc1034">Domain names - concepts and facilities</a>", STD 13, RFC 1034, November 1987.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3530">[RFC3530]</b></td>
<td class="top">
<a>Shepler, S.</a>, <a>Callaghan, B.</a>, <a>Robinson, D.</a>, <a>Thurlow, R.</a>, <a>Beame, C.</a>, <a>Eisler, M.</a> and <a>D. Noveck</a>, "<a href="http://tools.ietf.org/html/rfc3530">Network File System (NFS) version 4 Protocol</a>", RFC 3530, April 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1831">[RFC1831]</b></td>
<td class="top">
<a href="mailto:raj@eng.sun.com" title="Sun Microsystems, Inc., ONC Technologies">Srinivasan, R.</a>, "<a href="http://tools.ietf.org/html/rfc1831">RPC: Remote Procedure Call Protocol Specification Version 2</a>", RFC 1831, August 1995.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2203">[RFC2203]</b></td>
<td class="top">
<a href="mailto:mre@eng.sun.com" title="Sun Microsystems, Inc.">Eisler, M.</a>, <a href="mailto:hacker@eng.sun.com" title="Sun Microsystems, Inc.">Chiu, A.</a> and <a href="mailto:lling@eng.sun.com" title="Sun Microsystems, Inc.">L. Ling</a>, "<a href="http://tools.ietf.org/html/rfc2203">RPCSEC_GSS Protocol Specification</a>", RFC 2203, September 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2743">[RFC2743]</b></td>
<td class="top">
<a href="mailto:jlinn@rsasecurity.com" title="RSA Laboratories">Linn, J.</a>, "<a href="http://tools.ietf.org/html/rfc2743">Generic Security Service Application Program Interface Version 2, Update 1</a>", RFC 2743, January 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4120">[RFC4120]</b></td>
<td class="top">
<a>Neuman, C.</a>, <a>Yu, T.</a>, <a>Hartman, S.</a> and <a>K. Raeburn</a>, "<a href="http://tools.ietf.org/html/rfc4120">The Kerberos Network Authentication Service (V5)</a>", RFC 4120, July 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4511">[RFC4511]</b></td>
<td class="top">
<a>Sermersheim, J.</a>, "<a href="http://tools.ietf.org/html/rfc4511">Lightweight Directory Access Protocol (LDAP): The Protocol</a>", RFC 4511, June 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2307">[RFC2307]</b></td>
<td class="top">
<a href="mailto:lukeh@xedoc.com" title="PO Box 59">Howard, L.</a>, "<a href="http://tools.ietf.org/html/rfc2307">An Approach for Using LDAP as a Network Information Service</a>", RFC 2307, March 1998.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.howard-rfc2307bis">[I-D.howard-rfc2307bis]</b></td>
<td class="top">
<a>Howard, L</a> and <a>H Chu</a>, "<a href="http://tools.ietf.org/html/draft-howard-rfc2307bis-02">An Approach for Using LDAP as a Network Information Service</a>", Internet-Draft draft-howard-rfc2307bis-02, August 2009.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.sorce-krbwg-general-pac">[I-D.sorce-krbwg-general-pac]</b></td>
<td class="top">
<a>Sorce, S</a>, <a>Yu, T</a> and <a>T Hardjono</a>, "<a href="http://tools.ietf.org/html/draft-sorce-krbwg-general-pac-01">A Generalized PAC for Kerberos V5</a>", Internet-Draft draft-sorce-krbwg-general-pac-01, December 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-nfsv4-federated-fs-reqts">[I-D.ietf-nfsv4-federated-fs-reqts]</b></td>
<td class="top">
<a>Lentini, J</a>, <a>Everhart, C</a>, <a>Ellard, D</a>, <a>Tewari, R</a> and <a>M Naik</a>, "<a href="http://tools.ietf.org/html/draft-ietf-nfsv4-federated-fs-reqts-06">Requirements for Federated File Systems</a>", Internet-Draft draft-ietf-nfsv4-federated-fs-reqts-06, October 2009.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-kitten-gssapi-naming-exts">[I-D.ietf-kitten-gssapi-naming-exts]</b></td>
<td class="top">
<a>Williams, N</a>, <a>Johansson, L</a>, <a>Hartman, S</a> and <a>S Josefsson</a>, "<a href="http://tools.ietf.org/html/draft-ietf-kitten-gssapi-naming-exts-11">GSS-API Naming Extensions</a>", Internet-Draft draft-ietf-kitten-gssapi-naming-exts-11, May 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-nfsv4-minorversion1">[I-D.ietf-nfsv4-minorversion1]</b></td>
<td class="top">
<a>Shepler, S</a>, <a>Eisler, M</a> and <a>D Noveck</a>, "<a href="http://tools.ietf.org/html/draft-ietf-nfsv4-minorversion1-29">NFS Version 4 Minor Version 1</a>", Internet-Draft draft-ietf-nfsv4-minorversion1-29, December 2008.</td>
</tr>
<tr>
<td class="reference"><b id="PAC">[PAC]</b></td>
<td class="top">
<a title="Microsoft Corporation">Brezak, J. </a>, "<a>Utilizing the Windows 2000 Authorization Data in Kerberos Tickets for Access Control to Resources </a>", October 2002.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">10.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.williams-rpcsecgssv3">[I-D.williams-rpcsecgssv3]</b></td>
<td class="top">
<a>Haynes, T</a> and <a>N Williams</a>, "<a href="http://tools.ietf.org/html/draft-williams-rpcsecgssv3-02">Remote Procedure Call (RPC) Security Version 3</a>", Internet-Draft draft-williams-rpcsecgssv3-02, May 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5280">[RFC5280]</b></td>
<td class="top">
<a>Cooper, D.</a>, <a>Santesson, S.</a>, <a>Farrell, S.</a>, <a>Boeyen, S.</a>, <a>Housley, R.</a> and <a>W. Polk</a>, "<a href="http://tools.ietf.org/html/rfc5280">Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile</a>", RFC 5280, May 2008.</td>
</tr>
<tr>
<td class="reference"><b id="NIS">[NIS]</b></td>
<td class="top">
<a>Sun Microsystems</a>, "<a>System and Network Administration</a>", March 1990.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">William A. (Andy) Adamson</span> 
	  <span class="n hidden">
		<span class="family-name">Adamson</span>
	  </span>
	</span>
	<span class="org vcardline">NetApp</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:andros@netapp.com%20">andros@netapp.com </a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Kevin Coffman</span> 
	  <span class="n hidden">
		<span class="family-name">Coffman</span>
	  </span>
	</span>
	<span class="org vcardline">CITI, University of Michigan</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:kwc@umich.edu%20">kwc@umich.edu </a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Nicolas Williams</span> 
	  <span class="n hidden">
		<span class="family-name">Williams</span>
	  </span>
	</span>
	<span class="org vcardline">Oracle</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:nicolas.williams@oracle.com">nicolas.williams@oracle.com</a></span>

  </address>
</div>

</body>
</html>