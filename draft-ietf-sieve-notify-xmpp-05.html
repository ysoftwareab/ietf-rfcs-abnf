<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Sieve Notification Mechanism: xmpp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Sieve Notification Mechanism: xmpp">
<meta name="keywords" content="Sieve, notification, Extensible Messaging and Presence Protocol, XMPP">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Sieve Working Group</td><td class="header">P. Saint-Andre</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">XMPP Standards Foundation</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">A. Melnikov</td></tr>
<tr><td class="header">Expires: April 3, 2008</td><td class="header">Isode Limited</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 01, 2007</td></tr>
</table></td></tr></table>
<h1><br />Sieve Notification Mechanism: xmpp<br />draft-ietf-sieve-notify-xmpp-05</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on April 3, 2008.</p>

<h3>Abstract</h3>

<p>This document describes a profile of the Sieve extension for notifications, to allow notifications to be sent over the Extensible Messaging and Presence Protocol (XMPP), also known as Jabber.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#intro-overview">1.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#intro-terms">1.2.</a>&nbsp;
Terminology<br />
<a href="#def">2.</a>&nbsp;
Definition<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#def-method">2.1.</a>&nbsp;
Notify parameter "method"<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#def-from">2.2.</a>&nbsp;
Notify tag ":from"<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#def-options">2.3.</a>&nbsp;
Notify tag ":options"<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#def-importance">2.4.</a>&nbsp;
Notify tag ":importance"<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#def-message">2.5.</a>&nbsp;
Notify tag ":message"<br />
<a href="#examples">3.</a>&nbsp;
Examples<br />
<a href="#conformance">4.</a>&nbsp;
Requirements Conformance<br />
<a href="#i18n">5.</a>&nbsp;
Internationalization Considerations<br />
<a href="#sec">6.</a>&nbsp;
Security Considerations<br />
<a href="#iana">7.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<a name="intro-overview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Overview</h3>

<p>The <a class='info' href='#NOTIFY'>[NOTIFY]<span> (</span><span class='info'>Melnikov, A., Leiba, B., Segmuller, W., and T. Martin, &ldquo;Sieve Extension: Notifications,&rdquo; July&nbsp;2007.</span><span>)</span></a> extension to the <a class='info' href='#SIEVE'>[SIEVE]<span> (</span><span class='info'>Showalter, T. and P. Guenther, &ldquo;Sieve: An Email Filtering Language,&rdquo; February&nbsp;2007.</span><span>)</span></a> mail filtering language is a framework for providing notifications by employing URIs to specify the notification mechanism.  This document defines how xmpp URIs (see <a class='info' href='#XMPP-URI'>[XMPP&#8209;URI]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Internationalized Resource Identifiers (IRIs) and Uniform Resource Identifiers (URIs) for the Extensible Messaging and Presence Protocol (XMPP),&rdquo; June&nbsp;2007.</span><span>)</span></a>) are used to generate notifications via the Extensible Messaging and Presence Protocol (see <a class='info' href='#XMPP'>[XMPP]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Core,&rdquo; October&nbsp;2004.</span><span>)</span></a>), which is widely implemented in Jabber instant messaging technologies.
</p>
<a name="intro-terms"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Terminology</h3>

<p>This document inherits terminology from <a class='info' href='#NOTIFY'>[NOTIFY]<span> (</span><span class='info'>Melnikov, A., Leiba, B., Segmuller, W., and T. Martin, &ldquo;Sieve Extension: Notifications,&rdquo; July&nbsp;2007.</span><span>)</span></a>, <a class='info' href='#SIEVE'>[SIEVE]<span> (</span><span class='info'>Showalter, T. and P. Guenther, &ldquo;Sieve: An Email Filtering Language,&rdquo; February&nbsp;2007.</span><span>)</span></a>, and <a class='info' href='#XMPP'>[XMPP]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Core,&rdquo; October&nbsp;2004.</span><span>)</span></a>.
</p>
<p>The capitalized key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a class='info' href='#TERMS'>[TERMS]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="def"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Definition</h3>

<p>The xmpp mechanism results in the sending of an XMPP message to notify a recipient about an email message.  The general XMPP syntax is as follows:
</p>
<p></p>
<ul class="text">
<li>The notification MUST be an XMPP &lt;message/&gt; stanza.
</li>
<li>The value of the XMPP 'type' attribute MUST be 'headline' or 'normal'.
</li>
<li>The value of the XMPP 'from' attribute MUST be the XMPP address of the notification service.
</li>
<li>The XMPP &lt;message/&gt; stanza MAY include a &lt;subject/&gt; child element whose value is some configurable text indicating that the message is a Sieve notification.
</li>
<li>The notification SHOULD include a URL for the recipient to use as a hint in locating the message, encapsulated as the XML character data of a &lt;url/&gt; child element of an &lt;x/&gt; element qualified by the 'jabber:x:oob' namespace as specified in <a class='info' href='#OOB'>[OOB]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Out of Band Data,&rdquo; August&nbsp;2006.</span><span>)</span></a>.
</li>
</ul>

<p>The recommended mapping of the Sieve notify action into XMPP syntax is described in the following sections.
</p>
<a name="def-method"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Notify parameter "method"</h3>

<p>The "method" parameter MUST be a URI that conforms to the xmpp URI scheme (as specified in <a class='info' href='#XMPP-URI'>[XMPP&#8209;URI]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Internationalized Resource Identifiers (IRIs) and Uniform Resource Identifiers (URIs) for the Extensible Messaging and Presence Protocol (XMPP),&rdquo; June&nbsp;2007.</span><span>)</span></a>) and that identifies an XMPP account associated with the email inbox.  The URI MAY include the resource identifier portion of an XMPP address but SHOULD NOT include an authority component, query component, or fragment identifier component.  The processing application MUST extract an XMPP address from the URI in accordance with the processing rules specified in <a class='info' href='#XMPP-URI'>[XMPP&#8209;URI]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Internationalized Resource Identifiers (IRIs) and Uniform Resource Identifiers (URIs) for the Extensible Messaging and Presence Protocol (XMPP),&rdquo; June&nbsp;2007.</span><span>)</span></a>.  The resulting XMPP address MUST be encapsulated in XMPP syntax as the value of the XMPP 'to' attribute.
</p>
<a name="def-from"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Notify tag ":from"</h3>

<p>The ":from" tag has no special meaning for this notification mechanism, and this specification puts no restriction on its use.  As noted, the value of the XMPP 'from' attribute specified in the XMPP notification message MUST be the XMPP address of the notification service itself.  The value of the ":from" tag MAY be transformed into XMPP syntax; if so, it SHOULD be encapsulated as the value of an XMPP <a class='info' href='#SHIM'>[SHIM]<span> (</span><span class='info'>Saint-Andre, P. and J. Hildebrand, &ldquo;Stanza Headers and Internet Metadata,&rdquo; August&nbsp;2005.</span><span>)</span></a> header named "Reply-To".
</p>
<a name="def-options"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Notify tag ":options"</h3>

<p>The ":options" tag has no special meaning for this notification mechanism.  Any handling of this tag is the responsibility of an implementation.
</p>
<a name="def-importance"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Notify tag ":importance"</h3>

<p>The ":importance" tag has no special meaning for this notification mechanism, and this specification puts no restriction on its use.  The value of the ":importance" tag MAY be transformed into XMPP syntax (in addition to or instead of including in the default message); if so, it MUST be encapsulated as the value of an XMPP <a class='info' href='#SHIM'>[SHIM]<span> (</span><span class='info'>Saint-Andre, P. and J. Hildebrand, &ldquo;Stanza Headers and Internet Metadata,&rdquo; August&nbsp;2005.</span><span>)</span></a> header named "Urgency", and the XML character of that header MUST be "high" if the value of the ":importance" tag is "1", "medium" if the value of the ":importance" tag is "2", or "low" if the value of the ":importance" tag is "3".
</p>
<a name="def-message"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.5"></a><h3>2.5.&nbsp;
Notify tag ":message"</h3>

<p>If included, the ":message" tag MUST be transformed into the XML character data of an XMPP &lt;body/&gt; element.  If not included, the rule specified in <a class='info' href='#NOTIFY'>[NOTIFY]<span> (</span><span class='info'>Melnikov, A., Leiba, B., Segmuller, W., and T. Martin, &ldquo;Sieve Extension: Notifications,&rdquo; July&nbsp;2007.</span><span>)</span></a> SHOULD be followed, as shown in the examples below.
</p>
<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Examples</h3>

<p>In the following examples, the sender of the email has an address of &lt;mailto:juliet@example.org&gt;, the entity to be notified has an XMPP address of romeo@example.com (resulting in an XMPP URI of &lt;xmpp:romeo@example.com&gt;), and the notification service has an XMPP address of notify.example.com (resulting in an XMPP URI of &lt;xmpp:notify.example.com&gt;).
</p>
<p>The following is a basic Sieve notify action with only a method:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  notify "xmpp:romeo@example.com"
</pre></div>
<p>The resulting XMPP &lt;message/&gt; stanza might be as follows:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;message from='notify.example.com'
           to='romeo@example.com'
           xml:lang='en'&gt;
    &lt;subject&gt;A Sieve instant notification!&lt;/subject&gt;
    &lt;body&gt;&amp;lt;juliet@example.org&amp;gt; Wherefore art thou?&lt;/body&gt;
  &lt;/message&gt;
</pre></div>
<p>The following is a more advanced Sieve notify action with a method, importance, subject, and message, as well as a URL pointing to the message:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  notify :importance "1"
         :message "Contact Juliet immediately!"
         "xmpp:romeo@example.com?message;subject=SIEVE"
</pre></div>
<p>The resulting XMPP &lt;message/&gt; stanza might be as follows:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;message from='notify.example.com'
           to='romeo@example.com'
           xml:lang='en'&gt;
    &lt;subject&gt;SIEVE&lt;/subject&gt;
    &lt;body&gt;Contact Juliet immediately!&lt;/body&gt;
    &lt;headers xmlns='http://jabber.org/protocol/shim'&gt;
      &lt;header name='Urgency'&gt;high&lt;/header&gt;
    &lt;/headers&gt;
    &lt;x xmlns='jabber:x:oob'&gt;
      &lt;url&gt;
        imap://romeo@example.com/INBOX;UIDVALIDITY=385759045/;UID=20
      &lt;/url&gt;
    &lt;/x&gt;
  &lt;/message&gt;
</pre></div>
<a name="conformance"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Requirements Conformance</h3>

<p>Section 3.8 of <a class='info' href='#NOTIFY'>[NOTIFY]<span> (</span><span class='info'>Melnikov, A., Leiba, B., Segmuller, W., and T. Martin, &ldquo;Sieve Extension: Notifications,&rdquo; July&nbsp;2007.</span><span>)</span></a> specifies a set of requirements for Sieve notification methods.  The conformance of the xmpp notification mechanism is provided here.
</p>
<p>
        </p>
<ol class="text">
<li>An implementation of the xmpp notification method SHOULD NOT modify the final notification text (e.g., to limit the length); however, a given deployment MAY do so (e.g., if recipients pay per character or byte for XMPP messages).  Modification of characters themselves should not be necessary, since XMPP character data is encoded in <a class='info' href='#UTF-8'>[UTF&#8209;8]<span> (</span><span class='info'>Yergeau, F., &ldquo;UTF-8, a transformation format of ISO 10646,&rdquo; November&nbsp;2003.</span><span>)</span></a>.
</li>
<li>An implementation MAY ignore parameters specified in the ":from", ":importance", and ":options" tags.
</li>
<li>There is no recommended default message for an implementation to include if the ":message" argument is not specified.
</li>
<li>A notification sent via the xmpp notification method MAY include a timestamp in the textual message.
</li>
<li>The value of the XMPP 'from' attribute MUST be the XMPP address of the xmpp notification service.  The value of the Sieve ":from" tag MAY be transformed into the value of an XMPP <a class='info' href='#SHIM'>[SHIM]<span> (</span><span class='info'>Saint-Andre, P. and J. Hildebrand, &ldquo;Stanza Headers and Internet Metadata,&rdquo; August&nbsp;2005.</span><span>)</span></a> header named "Reply-To".
</li>
<li>An implementation MUST NOT include any other extraneous information not specified in parameters to the notify action.
</li>
<li>In accordance with <a class='info' href='#XMPP-URI'>[XMPP&#8209;URI]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Internationalized Resource Identifiers (IRIs) and Uniform Resource Identifiers (URIs) for the Extensible Messaging and Presence Protocol (XMPP),&rdquo; June&nbsp;2007.</span><span>)</span></a>, an implementation MUST ignore any URI action or parameter it does not understand (i.e., the URI MUST be processed as if the action or parameter were not present).  It is RECOMMENDED to support the XMPP "message" query type (see <a class='info' href='#QUERIES'>[QUERIES]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;XMPP URI Scheme Query Components,&rdquo; September&nbsp;2006.</span><span>)</span></a>) and the associated "body" and "subject" parameters, which parameters SHOULD be mapped to the XMPP &lt;body/&gt; and &lt;subject/&gt; child elements of the XMPP &lt;message/&gt; stanza type, respectively.  However, if included then the Sieve notify ":message" parameter MUST be mapped to the XMPP &lt;body/&gt; element, overriding the "body" parameter (if any) included in the XMPP URI.
</li>
<li>In response to a notify_method_capability test for the "online" notification-capability, an implementation SHOULD return a value of "yes" if it has knowledge of an active presence session for the specified notification-uri and a value of "no" if it does not have such knowledge.
</li>
<li>An implementation SHOULD NOT attempt to retry delivery of a notification if it receives an XMPP error of type "auth" or "cancel", MAY attempt to retry delivery if it receives an XMPP error of type "wait", and MAY attempt to retry delivery if it receives an XMPP error of "modify" but only if it makes appropriate modifications to the notification (see <a class='info' href='#XMPP'>[XMPP]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Core,&rdquo; October&nbsp;2004.</span><span>)</span></a>); in any case the number of retries SHOULD be limited to a configurable number no less than 3 and no more than 10.  An implementation MAY throttle notifications if the number of notifications within a given time period becomes excessive according to local service policy.  Duplicate suppression (if any) is a matter of implementation and is not specified herein.
</li>
</ol><p>
      
</p>
<a name="i18n"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Internationalization Considerations</h3>

<p>Although an XMPP address may contain nearly any <a class='info' href='#UNICODE'>[UNICODE]<span> (</span><span class='info'>The Unicode Consortium, &ldquo;The Unicode Standard, Version 3.2.0,&rdquo; 2000.</span><span>)</span></a> character, the value of the "method" parameter MUST be a Uniform Resource Identifier (see <a class='info' href='#URI'>[URI]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>) rather than an Internationalized Resource Identifier (see <a class='info' href='#IRI'>[IRI]<span> (</span><span class='info'>Duerst, M. and M. Suignard, &ldquo;Internationalized Resource Identifiers (IRIs),&rdquo; January&nbsp;2005.</span><span>)</span></a>).  The rules specified in <a class='info' href='#XMPP-URI'>[XMPP&#8209;URI]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Internationalized Resource Identifiers (IRIs) and Uniform Resource Identifiers (URIs) for the Extensible Messaging and Presence Protocol (XMPP),&rdquo; June&nbsp;2007.</span><span>)</span></a> MUST be followed when generating XMPP URIs.
</p>
<p>In accordance with Section 13 of RFC 3920, all data sent over XMPP MUST be encoded in <a class='info' href='#UTF-8'>[UTF&#8209;8]<span> (</span><span class='info'>Yergeau, F., &ldquo;UTF-8, a transformation format of ISO 10646,&rdquo; November&nbsp;2003.</span><span>)</span></a>.
</p>
<a name="sec"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>Depending on the information included, sending a notification can be comparable to forwarding mail to the notification recipient.  Care must be taken when forwarding mail automatically, to ensure that confidential information is not sent into an insecure environment.  In particular, implementations MUST conform to the security considerations given in <a class='info' href='#NOTIFY'>[NOTIFY]<span> (</span><span class='info'>Melnikov, A., Leiba, B., Segmuller, W., and T. Martin, &ldquo;Sieve Extension: Notifications,&rdquo; July&nbsp;2007.</span><span>)</span></a>, <a class='info' href='#SIEVE'>[SIEVE]<span> (</span><span class='info'>Showalter, T. and P. Guenther, &ldquo;Sieve: An Email Filtering Language,&rdquo; February&nbsp;2007.</span><span>)</span></a>, and <a class='info' href='#XMPP'>[XMPP]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Core,&rdquo; October&nbsp;2004.</span><span>)</span></a>.
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>The following template provides the IANA registration of the Sieve notification mechanism specified in this document:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  To: iana@iana.org
  Subject: Registration of new Sieve notification mechanism
  Mechanism name: xmpp
  Mechanism URI: RFC4622
  Mechanism-specific tags: none
  Standards Track/IESG-approved experimental RFC number: this RFC
  Person and email address to contact for further information:
       Peter Saint-Andre &lt;stpeter@jabber.org&gt;
</pre></div>
<p>This information should be added to the list of Sieve notification mechanisms maintained at &lt;http://www.iana.org/assignments/sieve-notification&gt;.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="NOTIFY">[NOTIFY]</a></td>
<td class="author-text">Melnikov, A., Leiba, B., Segmuller, W., and T. Martin, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sieve-notify-08.txt">Sieve Extension: Notifications</a>,&rdquo; draft-ietf-sieve-notify-08 (work in progress), July&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sieve-notify-08.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="OOB">[OOB]</a></td>
<td class="author-text"><a href="mailto:stpeter@jabber.org">Saint-Andre, P.</a>, &ldquo;<a href="http://www.xmpp.org/extensions/xep-0066.html">Out of Band Data</a>,&rdquo; XSF XEP&nbsp;0066, August&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="QUERIES">[QUERIES]</a></td>
<td class="author-text"><a href="mailto:stpeter@jabber.org">Saint-Andre, P.</a>, &ldquo;<a href="http://www.xmpp.org/extensions/xep-0147.html">XMPP URI Scheme Query Components</a>,&rdquo; XSF XEP&nbsp;0147, September&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="SHIM">[SHIM]</a></td>
<td class="author-text"><a href="mailto:stpeter@jabber.org">Saint-Andre, P.</a> and <a href="mailto:jhildebrand@jabber.com">J. Hildebrand</a>, &ldquo;<a href="http://www.xmpp.org/extensions/xep-0131.html">Stanza Headers and Internet Metadata</a>,&rdquo; XSF XEP&nbsp;0131, August&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="SIEVE">[SIEVE]</a></td>
<td class="author-text">Showalter, T. and P. Guenther, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sieve-3028bis-12.txt">Sieve: An Email Filtering Language</a>,&rdquo; draft-ietf-sieve-3028bis-12 (work in progress), February&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sieve-3028bis-12.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="TERMS">[TERMS]</a></td>
<td class="author-text"><a href="mailto:-">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997.</td></tr>
<tr><td class="author-text" valign="top"><a name="XMPP-URI">[XMPP-URI]</a></td>
<td class="author-text">Saint-Andre, P., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-saintandre-rfc4622bis-01.txt">Internationalized Resource Identifiers (IRIs) and Uniform Resource Identifiers (URIs) for the Extensible Messaging and Presence Protocol (XMPP)</a>,&rdquo; draft-saintandre-rfc4622bis-01 (work in progress), June&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-saintandre-rfc4622bis-01.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="IRI">[IRI]</a></td>
<td class="author-text">Duerst, M. and M. Suignard, &ldquo;<a href="http://tools.ietf.org/html/rfc3987">Internationalized Resource Identifiers (IRIs)</a>,&rdquo; RFC&nbsp;3987, January&nbsp;2005 (<a href="ftp://ftp.isi.edu/in-notes/rfc3987.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="UNICODE">[UNICODE]</a></td>
<td class="author-text">The Unicode Consortium, &ldquo;The Unicode Standard, Version 3.2.0,&rdquo; 2000.<p>
The Unicode Standard, Version 3.2.0 is defined by The Unicode Standard, Version 3.0 (Reading, MA, Addison-Wesley, 2000. ISBN 0-201-61633-5), as amended by the Unicode Standard Annex #27: Unicode 3.1 (http://www.unicode.org/reports/tr27/) and by the Unicode Standard Annex #28: Unicode 3.2 (http://www.unicode.org/reports/tr28/).
</p>
</td></tr>
<tr><td class="author-text" valign="top"><a name="URI">[URI]</a></td>
<td class="author-text">Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="ftp://ftp.isi.edu/in-notes/rfc3986.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="UTF-8">[UTF-8]</a></td>
<td class="author-text">Yergeau, F., &ldquo;<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>,&rdquo; STD&nbsp;63, RFC&nbsp;3629, November&nbsp;2003 (<a href="ftp://ftp.isi.edu/in-notes/rfc3629.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="XMPP">[XMPP]</a></td>
<td class="author-text">Saint-Andre, P., &ldquo;<a href="http://tools.ietf.org/html/rfc3920">Extensible Messaging and Presence Protocol (XMPP): Core</a>,&rdquo; RFC&nbsp;3920, October&nbsp;2004 (<a href="ftp://ftp.isi.edu/in-notes/rfc3920.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Peter Saint-Andre</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">XMPP Standards Foundation</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:stpeter@jabber.org">stpeter@jabber.org</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="https://stpeter.im/">https://stpeter.im/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alexey Melnikov</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Isode Limited</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Alexey.Melnikov@isode.com">Alexey.Melnikov@isode.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2007).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
