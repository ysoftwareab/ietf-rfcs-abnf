P2PSIP Working Group                                       Lifeng. Le
Internet Draft
Intended status: Informational                            China Mobile
Expires: January 2010                                     July 6, 2009



                        Hierarchical P2PSIP Overlay
             draft-le-p2psip-hierachical-p2psip-overlay-00.txt


Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html

   This Internet-Draft will expire on January 6, .

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.








Le                    Expires January 6, 2010                [Page 1]

Internet-Draft       Hierarchical P2PSIP Overlay             July 2009


Abstract

   This draft discusses the hierarchical overlay architecture in Peer-
   to-Peer (P2P) SIP system. The P2P SIP is defined as a distributed
   network and each peer is equal in it. But actually peers are
   different from each other on many aspects, e.g., physical performance,
   network performance or system performance (e.g., uptime). So node
   heterogeneity should been considered enough in P2P SIP system, which
   affects the scalability and service availability of P2P SIP overlays.
   This draft introduces the performance concerns of P2P SIP overlay
   without consideration of node heterogeneity at first. After that, an
   alternative architecture of hierarchical P2P SIP overlay is brought
   up.



































                                                             [Page 2]

Internet-Draft       Hierarchical P2PSIP Overlay             July 2009


Table of Contents


   1. Introduction................................................4
   2. Problem statement...........................................5
   3. Hierarchical P2P SIP Architecture............................6
   4. Architecture example of hierarchical overlay.................7
   5. Benefits of Hierarchical P2PSIP system.......................8
      5.1. Virtual storage.........................................8
      5.2. Collaborative Processing................................8
   6. Use case of Hierarchical P2P SIP.............................9
   7. Concerns for Hierarchical P2P SIP system....................10
   8. IANA Considerations........................................11
   9. Conclusions................................................12
   10. References................................................13
      10.1. Normative References..................................13
      10.2. Informative References................................13































                                                             [Page 3]

Internet-Draft       Hierarchical P2PSIP Overlay             July 2009


1. Introduction

   This draft discusses the significance of considering node
   heterogeneity in P2P SIP system. Peer capabilities should be
   exploited sufficiently in order to improve the performance of P2P SIP
   overlay network. Peers with high performance should contribute more
   to overlay than peers with low performance. This draft proposes an
   hierarchical P2P SIP architecture which may be a possible way to make
   good use of overlay resources.







































                                                             [Page 4]

Internet-Draft       Hierarchical P2PSIP Overlay             July 2009


2. Problem statement

   In current P2P SIP system, node heterogeneity has not been considered
   enough, which would affect the scalability and service availability
   of P2P SIP overlay.  Node heterogeneity can be defined from several
   aspects.  From the aspect of physical resources, node heterogeneity
   can be measured by physical capabilities, such as CPU power, storage
   capacity (memory or disk); from the aspect of network resources, node
   heterogeneity can be measured by network capabilities, such as
   bandwidth or public IP address; from the aspect of system
   availability, node heterogeneity can be measured by system
   capabilities, such as online availability or fault tolerance in P2P
   SIP overlay.  Physical and network capabilities may affect the
   scalability of P2P overlays.  In real Internet world, the difference
   between nodes may have more than three orders of magnitude.  So in
   one overlay, nodes with poor performance may become the bottleneck of
   system performance.  Besides, system capabilities affect service
   availability of P2P SIP overlay.  Stable nodes have long uptime and
   good fault tolerance in system, so its services can be used by other
   nodes frequently.  In general, the performance of P2P SIP overlay is
   generally limited by the number of nodes with poor physical, network
   capabilities and system capabilities (enlightened by the famous
   Barrel Theory).  However, current P2P SIP systems have considered
   one-level super-node overlay at most which can not still explore the
   available resources of nodes adequately.  So the design goal of P2P
   SIP system should classify heterogeneous nodes into more than two
   levels according to their physical capabilities, network capabilities
   and system capabilities.




















                                                             [Page 5]

Internet-Draft       Hierarchical P2PSIP Overlay             July 2009


3. Hierarchical P2P SIP Architecture

   According to physical capabilities network capabilities and system
   capabilities, we can divide an overlay into k suboverlays by
   different classification algorithms (open issue).  In Figure 1, the
   first suboverlay is the top one that holds the most powerful and
   stable nodes; the kth suboverlay is the foot one that holds the
   weakest and most dynamic nodes.

   If a new node starts up in the hierarchical P2P SIP system, it will
   obtain a node key by the consistent hash function (e.g., SHA-1) and
   insert itself into the kth suboverlay originally (new node with zero
   online time).  If it detects enough free capabilities (e.g., enough
   physical resources, enough bandwidth and enough uptime) to be a
   member of the (k-)th suboverlay, it will transfer to the upper
   suboverlay.  But if a node has little additional free capabilities
   even if it has a large capabilities, it can only join the suboverlay
   in lower level.  If an old node starts up, it will directly join the
   last suboverlay according to history record.

   Besides, some Incentive mechanisms should be given in hierarchical
   P2P overlay to encourage nodes to contribute own resources to overlay.

   +------------------------------------------------+
   |               |---------------|                |
   |               | suboverlay-1  |--Users         |
   |               |---|------|----|                |
   |                   |      |                     |
   |             |-----|------|------|              |
   |             |   suboverlay-2    |--Users       |
   |             |--|------------|---|              |
   |                |            |                  |
   |          |-----|------------|------|           |
   |          |      suboverlay-3       |--Users    |
   |          |--|-------------------|--|           |
   |             |        :          |              |
   |                      :                         |
   |             |        :          |              |
   |       |-----|-------------------|------|       |
   |       |        suboverlay-k            |--Users|
   |       |--------------------------------|       |
   +------------------------------------------------+

   Figure 1 Hierarchical P2PSIP system





                                                             [Page 6]

Internet-Draft       Hierarchical P2PSIP Overlay             July 2009


4. Architecture example of hierarchical overlay

   In hierarchical overlay, the neighbored suboverlays should have
   certain relationship (open issue) in order to form a whole overlay.
   Here take an example of Chord to illustrate the relationship.  In
   hierarchical overlay, a node in the ith suboverlay can keep
   connections with nodes in the (i+1)th suboverlay whose keys fall into
   the key interval governed by nodes in the ith suboverlay.  For
   example showed in Figure 2, N1-48 keeps the connections with N2-32
   and N2-47; similarly, N2-32 keeps the connections with N3-24 and N3-
   30. N1-48 and N2-47 are called One-hop Father Node and Son Nodes;
   similarly, N1-48 and N3-46 are called two-hop Father Node and Son
   Nodes.

   +----------------------------|--------------|------------------+
   |(suboverlay-1)          N1-1|         N1-21|             N1-48|
   |                            |             |                   |
   |                      :    |             |                    |
   |(suboverlay-2)        N2-52|      N2-11 |    N2-32|      N2-47|
   |                           |           |          |           |
   |                           |          |           |           |
   |(suboverlay-3)  N3-48 N3-51|N3-7 N3-10|N3-24 N3-30|N3-40 N3-46|
   +---------------------------|----------|-----------|-----------+


   Figure 2 The relationship between suboverlays in Hierarchical P2PSIP
   system





















                                                             [Page 7]

Internet-Draft       Hierarchical P2PSIP Overlay             July 2009


5. Benefits of Hierarchical P2PSIP system

5.1. Virtual storage

   Virtual storage implies that a node can share the storage capacity of
   its Father nodes.  For example showed in Figure 3, a node, e.g.,N3-46,
   can store or backup information, e.g., user records or offline
   messages, in its Father Nodes, e.g.,N1-48 or N2-47, for load
   balancing or backup. But for the outside nodes, they only know the
   false fact that the information is stored in N3-46.

   +------------------------------------------------------------------+
   |   |--------------|                                               |
   |   |    N1-48  <--|--Information is here!                         |
   |   |              |                                               |
   |   |    N2-47     |                                               |
   |   |              |                                               |
   |   |    N3-46     |                                               |
   |   |--------------|<--Information is pushed to N3-46 for storage  |
   +------------------------------------------------------------------+

   Figure 3 Virtual storage in Hierarchical P2PSIP system

5.2. Collaborative Processing

   Collaborative processing implies that a node can process tasks with
   the help of its Father nodes.  Take an example of node location in
   Figure 4, the source node can send lookup request to its Father nodes
   to parallel locate the destination node in all suboverlays.
   Benefiting from collaborative processing between suboverlays, the
   delay for node location can be reduced largely less than O(logN).

   +--------------------------------------------------------------+
   |     |--------------|                                         |
   |     |    N1-48   -----> Lookup in suboverlay-1               |
   |     |              |                                         |
   |     |    N2-47   -----> Lookup in suboverlay-2               |
   |     |              |                                         |
   |     |    N3-46   -----> Lookup in suboverlay-3               |
   |     |--------|-----|                                         |
   |              |                                               |
   |              +---Node location is initiated in N3-46         |
   +--------------------------------------------------------------+

   Figure 4 Collaborative Processing in Hierarchical P2PSIP system




                                                             [Page 8]

Internet-Draft       Hierarchical P2PSIP Overlay             July 2009


6. Use case of Hierarchical P2P SIP

   The hierarchical P2P SIP can be used to P2P content delivery system
   as shown in Figure 5.  Content server divides a content file into
   content segments and push different segments to different nodes in
   suboverlay-1 for local cache first; nodes in suboverlay-1 push
   different segments to its different Son nodes in suboverlay-2;
   similarly, nodes in suboverlay-(k-1) push different segments to its
   different Son nodes in suboverlay-k.  As a result, content segments
   can be shared in each suboverlay; the content file can be restored
   from segments distributed in each suboverlay; nodes in higher-level
   suboverlays cache and distribute more segments, and vice versa.

   In Figure 5, UE is more related to the equipment with rare resources,
   such as mobile UE. UE can select a fixed node in suboverlay as its
   proxy according to location Proximity.

   |                |--------------|                |
   |                |Content Server|                |
   |                |-----|--------|                |
   +----------------------|-------------------------+
   |               |------|--------|                |
   |           UE--| suboverlay-1  |--UE            |
   |               |---|------|----|                |
   |                   |      |                     |
   |             |-----|------|------|              |
   |         UE--|   suboverlay-2    |--UE          |
   |             |--|------------|---|              |
   |                |            |                  |
   |             |        :          |              |
   |             |        :          |              |
   |       |-----|-------------------|------|       |
   |   UE--|        suboverlay-k            |--UE   |
   |       |--------------------------------|       |
   +------------------------------------------------+
   Figure 5 P2P Content system based on Hierarchical architecture












                                                             [Page 9]

Internet-Draft       Hierarchical P2PSIP Overlay             July 2009


7. Concerns for Hierarchical P2P SIP system

   The number of suboverlays k should be chosen properly. k can not be
   increased unboundedly because its increase may incur the increase of
   the maintenance overhead between suboverlays.











































                                                            [Page 10]

Internet-Draft       Hierarchical P2PSIP Overlay             July 2009


8. IANA Considerations

   There are no IANA considerations associated to this memo.













































                                                            [Page 11]

Internet-Draft       Hierarchical P2PSIP Overlay             July 2009


9. Conclusions

   This memo introduces the consideration of node heterogeneity. After
   that, an alternative architecture of hierarchical P2P SIP overlay is
   brought up.











































                                                            [Page 12]

Internet-Draft       Hierarchical P2PSIP Overlay             July 2009


10. References

10.1. Normative References

10.2. Informative References



Author's Addresses

   Lifeng Le
   China Mobile
   Unit 2, 28 Xuanwumenxi Ave,
   Xuanwu District,
   Beijing 100053, China

   Email: Lelifeng@chinamobile.com































                                                            [Page 13]

