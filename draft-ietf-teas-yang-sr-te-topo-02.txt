



Network Working Group                                             X. Liu
Internet-Draft                                            Volta Networks
Intended status: Standards Track                              I. Bryskin
Expires: January 2, 2019                             Huawei Technologies
                                                               V. Beeram
                                                        Juniper Networks
                                                                 T. Saad
                                                       Cisco Systems Inc
                                                                 H. Shah
                                                                   Ciena
                                                            S. Litkowski
                                                 Orange Business Service
                                                            July 1, 2018


              YANG Data Model for SR and SR TE Topologies
                   draft-ietf-teas-yang-sr-te-topo-02

Abstract

   This document defines a YANG data model for Segment Routing (SR)
   topology and Segment Routing (SR) traffic engineering (TE) topology.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 2, 2019.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of



Liu, et al.              Expires January 2, 2019                [Page 1]

Internet-Draft             YANG SR TE Topology                 July 2018


   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   2
     1.2.  Tree Diagrams . . . . . . . . . . . . . . . . . . . . . .   3
   2.  Modeling Considerations . . . . . . . . . . . . . . . . . . .   3
     2.1.  Segment Routing (SR) Topology . . . . . . . . . . . . . .   3
     2.2.  Segment Routing (SR) TE Topology  . . . . . . . . . . . .   3
     2.3.  Relations to ietf-segment-routing . . . . . . . . . . . .   4
     2.4.  Topology Type Modeling  . . . . . . . . . . . . . . . . .   5
     2.5.  Topology Attributes . . . . . . . . . . . . . . . . . . .   5
     2.6.  Node Attributes . . . . . . . . . . . . . . . . . . . . .   5
     2.7.  Link Termination Point Attributes . . . . . . . . . . . .   6
     2.8.  Link in the Topology Model  . . . . . . . . . . . . . . .   7
   3.  Model Structure . . . . . . . . . . . . . . . . . . . . . . .   7
   4.  YANG Module . . . . . . . . . . . . . . . . . . . . . . . . .   9
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  15
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .  15
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  16
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .  16
     7.2.  Informative References  . . . . . . . . . . . . . . . . .  16
   Appendix A.  Companion YANG Model for Non-NMDA Compliant
                Implementations  . . . . . . . . . . . . . . . . . .  18
     A.1.  SR Topology State Module  . . . . . . . . . . . . . . . .  18
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  21

1.  Introduction

   This document defines a YANG [RFC7950]  data model for describing the
   presentations of Segment Routing (SR) topology and Segment Routing
   (SR) traffic engineering (TE) topology.  The version of the model
   limits the transport type to an MPLS dataplane.

1.1.  Terminology

   The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14, [RFC2119].





Liu, et al.              Expires January 2, 2019                [Page 2]

Internet-Draft             YANG SR TE Topology                 July 2018


   The following terms are defined in [RFC7950] and are not redefined
   here:

   o  augment

   o  data model

   o  data node

1.2.  Tree Diagrams

   Tree diagrams used in this document follow the notation defined in
   [RFC8340].

2.  Modeling Considerations

2.1.  Segment Routing (SR) Topology

   The Layer 3 network topology model is discussed in [RFC8346].  The
   Segment Routing (SR) topology model proposed in this document
   augments and uses the ietf-l3-unicast-igp-topology module defined in
   [RFC8346].  SR related attributes are covered in the ietf-sr-topology
   model.

               +------------------------------+
               |   Layer 3 Network Topology   |
               |   ietf-l3-unicast-topology   |
               +------------------------------+
                               |
                               |
                               |
                               V
                  +------------------------+
                  |       SR Topology      |
                  |     ietf-sr-topology   |
                  +------------------------+

2.2.  Segment Routing (SR) TE Topology

   When traffic engineering is enabled on an SR topology, there will be
   associations between objects in SR topologies and objects in TE
   topologies.  An SR TE topology is both an SR topology and a layer 3
   TE topology.  Multiple inheritance is used to achieve such relations.








Liu, et al.              Expires January 2, 2019                [Page 3]

Internet-Draft             YANG SR TE Topology                 July 2018


          +------------------+  +---------------------+
          | SR Topology      |  | L3 TE Topology      |
          | ietf-sr-topology |  | ietf-l3-te-topology |
          +------------------+  +---------------------+
                   \                      /
                    \                    /
                     \                  /
                      v                v
                  +------------------------+
                  |      SR TE Topology    |
                  |                        |
                  +------------------------+

   Each type of topologies is indicated by "network-types" defined in
   [RFC8345].  For the three types of topologies above, the data
   representations are:

   L3 Topology:

   /nd:networks/nd:network/nd:network-types/l3-unicast-topology

   L3 TE Topology:

   /nd:networks/nd:network/nd:network-types/l3-unicast-topology/l3-te

   SR Topology:

   /nd:networks/nd:network/nd:network-types/l3-unicast-topology/sr

   SR TE Topology: (multiple inheritance)

   /nd:networks/nd:network/nd:network-types/l3-unicast-topology/l3-te
   /nd:networks/nd:network/nd:network-types/l3-unicast-topology/sr

2.3.  Relations to ietf-segment-routing

   [I-D.ietf-spring-sr-yang] defines ietf-segment-routing that is a
   model intended to be used on network elements to configure or operate
   segment routing; ietf-sr-topology defined in this document is
   intended to be used on a controller for the network-wide operations
   such as path computation.

   SR topology model shares many modeling constructs defined in ietf-
   segment-routing.  The module ietf-sr-topology uses the types and
   groupings defined in ietf-segment-routing.






Liu, et al.              Expires January 2, 2019                [Page 4]

Internet-Draft             YANG SR TE Topology                 July 2018


2.4.  Topology Type Modeling

   A new topology type is defined in this document, to indicate a
   topology that is a Segment Routing (SR) topology.

   augment /nw:networks/nw:network/nw:network-types
             /l3t:l3-unicast-topology:
     +--rw sr!

2.5.  Topology Attributes

   The Segment Routing attributes with topology-wide impacts are modeled
   by augmenting the container "l3-topology-attributes" in the L3
   topology model.  SRGB (Segment Routing Global Block) is covered in
   this augmentation.  A SR domain is mapped to a topology in this
   model.

   augment /nw:networks/nw:network/l3t:l3-topology-attributes:
     +--rw sr
        +--rw srgb* [lower-bound upper-bound]
           +--rw lower-bound    uint32
           +--rw upper-bound    uint32

2.6.  Node Attributes

   The Segment Routing attributes within the node scope are modeled by
   augmenting the sub tree /nw:networks/nw:network/nw:node/ in the L3
   topology model.

   The SR attributes that have node-scope impact are modeled by
   augmenting the container "l3-node-attributes" in the L3 topology
   model, including the SR capabilities, SRGB (Segment Routing Global
   Block), and SRLB (Segment Routing Local Block) specified on this
   mode.  This model also provides the information about how these SR
   attributes are learned:
















Liu, et al.              Expires January 2, 2019                [Page 5]

Internet-Draft             YANG SR TE Topology                 July 2018


   augment /nw:networks/nw:network/nw:node/l3t:l3-node-attributes:
     +--rw sr
        +--rw srgb* [lower-bound upper-bound]
        |  +--rw lower-bound    uint32
        |  +--rw upper-bound    uint32
        +--rw srlb* [lower-bound upper-bound]
        |  +--rw lower-bound    uint32
        |  +--rw upper-bound    uint32
        +--rw node-capabilities
        |  +--rw transport-planes* [transport-plane]
        |  |  +--rw transport-plane    identityref
        |  +--rw readable-label-stack-depth?   uint8
        +--ro information-source?         enumeration
        +--ro information-source-state
           +--ro credibility-preference?   uint16

   The SR attributes that are related to a IGP-Prefix segment are
   modeled by augmenting the list entry "prefix" in the L3 topology
   model:

   augment /nw:networks/nw:network/nw:node/l3t:l3-node-attributes
             /l3t:prefix:
     +--rw sr!
        +--rw value-type?          enumeration
        +--rw start-sid            uint32
        +--rw range?               uint32
        +--rw algorithm?           identityref
        +--rw last-hop-behavior?   enumeration
        |       {sid-last-hop-behavior}?
        +--rw is-local?            boolean

2.7.  Link Termination Point Attributes

   A link termination point in the topology model is mapped to an
   interface from the Segment Routing perspective.  The Adjacency
   Segment attributes on an interface are modeled within a link
   termination point.  The modeling structure is as follows:














Liu, et al.              Expires January 2, 2019                [Page 6]

Internet-Draft             YANG SR TE Topology                 July 2018


   augment /nw:networks/nw:network/nw:node/nt:termination-point
             /l3t:l3-termination-point-attributes:
     +--rw sr!
        +--rw value-type?                 enumeration
        +--rw sid                         uint32
        +--rw advertise-protection?       enumeration
        +--rw is-local?                   boolean
        +--ro is-backup?                  boolean
        +--ro is-part-of-set?             boolean
        +--ro is-on-lan?                  boolean
        +--ro information-source?         enumeration
        +--ro information-source-state
           +--ro credibility-preference?   uint16

   The usage of the leaf "advertise-protection" is described in
   [I-D.ietf-spring-sr-yang].

   Since YANG models are usually implemented with persistent
   configuration datastores, this model supports only persistent
   Adjacency Segments.

   Both IGP and BGP can be supported by the model, the leaf
   "information-source" is used to indicate where the information is
   from.

   The bundling capability of the Adjacency Segemnt is achieved by re-
   using the existing modeling construct (i.e. "bundle-stack-level")
   under /nw:networks/nw:network/nt:link/tet:te
   [I-D.ietf-teas-yang-te-topo]

2.8.  Link in the Topology Model

   A link in the topology model connects the termination point on the
   source node to the termination point on the destination node.  When
   such a link is instantiated, the bindings between the nodes and the
   corresponding Adj-SIDs are formed, and the resulting FIB entries are
   installed.

3.  Model Structure

   The model tree structure of the Segment Routing (SR) topology module
   is as shown below:









Liu, et al.              Expires January 2, 2019                [Page 7]

Internet-Draft             YANG SR TE Topology                 July 2018


   module: ietf-sr-topology
     augment /nw:networks/nw:network/nw:network-types
               /l3t:l3-unicast-topology:
       +--rw sr!
     augment /nw:networks/nw:network/l3t:l3-topology-attributes:
       +--rw sr
          +--rw srgb* [lower-bound upper-bound]
             +--rw lower-bound    uint32
             +--rw upper-bound    uint32
     augment /nw:networks/nw:network/nw:node/l3t:l3-node-attributes:
       +--rw sr
          +--rw srgb* [lower-bound upper-bound]
          |  +--rw lower-bound    uint32
          |  +--rw upper-bound    uint32
          +--rw srlb* [lower-bound upper-bound]
          |  +--rw lower-bound    uint32
          |  +--rw upper-bound    uint32
          +--rw node-capabilities
          |  +--rw transport-planes* [transport-plane]
          |  |  +--rw transport-plane    identityref
          |  +--rw readable-label-stack-depth?   uint8
          +--ro information-source?         enumeration
          +--ro information-source-state
             +--ro credibility-preference?   uint16
     augment /nw:networks/nw:network/nw:node/l3t:l3-node-attributes
               /l3t:prefix:
       +--rw sr!
          +--rw value-type?          enumeration
          +--rw start-sid            uint32
          +--rw range?               uint32
          +--rw algorithm?           identityref
          +--rw last-hop-behavior?   enumeration
          |       {sid-last-hop-behavior}?
          +--rw is-local?            boolean
     augment /nw:networks/nw:network/nw:node/nt:termination-point
               /l3t:l3-termination-point-attributes:
       +--rw sr!
          +--rw value-type?                 enumeration
          +--rw sid                         uint32
          +--rw advertise-protection?       enumeration
          +--rw is-local?                   boolean
          +--ro is-backup?                  boolean
          +--ro is-part-of-set?             boolean
          +--ro is-on-lan?                  boolean
          +--ro information-source?         enumeration
          +--ro information-source-state
             +--ro credibility-preference?   uint16




Liu, et al.              Expires January 2, 2019                [Page 8]

Internet-Draft             YANG SR TE Topology                 July 2018


4.  YANG Module


   <CODE BEGINS> file "ietf-sr-topology@2018-06-22.yang"
   module ietf-sr-topology {
     yang-version 1.1;
     namespace "urn:ietf:params:xml:ns:yang:ietf-sr-topology";
     prefix "srt";

     import ietf-network {
       prefix "nw";
       reference "RFC 8345: A YANG Data Model for Network Topologies";
     }
     import ietf-network-topology {
       prefix "nt";
       reference "RFC 8345: A YANG Data Model for Network Topologies";
     }
     import ietf-l3-unicast-topology {
       prefix "l3t";
       reference "RFC 8346: A YANG Data Model for Layer 3 Topologies";
     }
     import ietf-segment-routing-common {
       prefix "sr-cmn";
       reference
         "I-D.ietf-spring-sr-yang: YANG Data Model for Segment Routing";
     }

     organization
       "IETF Traffic Engineering Architecture and Signaling (TEAS)
        Working Group";

     contact
       "WG Web:   <http://tools.ietf.org/wg/teas/>
        WG List:  <mailto:teas@ietf.org>

        Editor:   Xufeng Liu
                  <mailto:xufeng.liu.ietf@gmail.com>

        Editor:   Igor Bryskin
                  <mailto:Igor.Bryskin@huawei.com>

        Editor:   Vishnu Pavan Beeram
                  <mailto:vbeeram@juniper.net>

        Editor:   Tarek Saad
                  <mailto:tsaad@cisco.com>

        Editor:   Himanshu Shah



Liu, et al.              Expires January 2, 2019                [Page 9]

Internet-Draft             YANG SR TE Topology                 July 2018


                  <mailto:hshah@ciena.com>

        Editor:   Stephane Litkowski
                  <mailto:stephane.litkowski@orange.com>";

     description
       "YANG data model for representing and manipulating Segment
        Routing Topologies.

        Copyright (c) 2018 IETF Trust and the persons identified as
        authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject to
        the license terms contained in, the Simplified BSD License set
        forth in Section 4.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (http://trustee.ietf.org/license-info).

        This version of this YANG module is part of RFC XXXX; see the
        RFC itself for full legal notices.";

     revision 2018-06-22 {
       description "Initial revision";
       reference
         "RFC XXXX: YANG Data Model for SR and SR TE Topologies";
     }

     grouping sr-topology-type {
       description
         "Identifies the SR topology type.";
       container sr {
         presence "Indiates SR Topology";
         description
           "Its presence identifies the SR topology type.";
       }
     }

     augment "/nw:networks/nw:network/nw:network-types/"
       + "l3t:l3-unicast-topology" {
       description
         "Defines the SR topology type.";
       uses sr-topology-type;
     }

     augment "/nw:networks/nw:network/l3t:l3-topology-attributes" {
       when "../nw:network-types/l3t:l3-unicast-topology/srt:sr" {
         description "Augment only for SR topology.";



Liu, et al.              Expires January 2, 2019               [Page 10]

Internet-Draft             YANG SR TE Topology                 July 2018


       }
       description "Augment topology configuration";
       uses sr-topology-attributes;
     }

     augment "/nw:networks/nw:network/nw:node/l3t:l3-node-attributes" {
       when "../../nw:network-types/l3t:l3-unicast-topology/srt:sr" {
         description "Augment only for SR topology.";
       }
       description "Augment node configuration.";
       uses sr-node-attributes;
     }

     augment "/nw:networks/nw:network/nw:node/l3t:l3-node-attributes"
       + "/l3t:prefix" {
       when "../../../nw:network-types/l3t:l3-unicast-topology/srt:sr" {
         description "Augment only for SR topology.";
       }
       description "Augment node prefix.";
       uses sr-node-prefix-attributes;
     }

     augment "/nw:networks/nw:network/nw:node/nt:termination-point/"
       + "l3t:l3-termination-point-attributes" {
       when "../../../nw:network-types/l3t:l3-unicast-topology/"
         + "srt:sr" {
         description "Augment only for SR topology.";
       }
       description "Augment termination point configuration";
       uses sr-tp-attributes;
     }

     grouping sr-topology-attributes {
       description "SR topology scope attributes.";
       container sr {
         description
           "Containing SR attributes.";
         uses sr-cmn:srgb-cfg;
       } // sr
     } // sr-topology-attributes

     grouping information-source-attributes {
       description
         "The attributes identifying source that has provided the
          related information, and the source credibility.";
       leaf information-source {
         type enumeration {
           enum "unknown" {



Liu, et al.              Expires January 2, 2019               [Page 11]

Internet-Draft             YANG SR TE Topology                 July 2018


             description "The source is unknown.";
           }
           enum "locally-configured" {
             description "Configured entity.";
           }
           enum "ospfv2" {
             description "OSPFv2.";
           }
           enum "ospfv3" {
             description "OSPFv3.";
           }
           enum "isis" {
             description "ISIS.";
           }
           enum "system-processed" {
             description "System processed entity.";
           }
           enum "other" {
             description "Other source.";
           }
         }
         config false;
         description
           "Indicates the source of the information.";
       }
       container information-source-state {
         config false;
         description
           "The container contains state attributes related to
            the information source.";
         leaf credibility-preference {
           type uint16;
           description
             "The preference value to calculate the traffic
              engineering database credibility value used for
              tie-break selection between different
              information-source values.
              Higher value is more preferable.";
         }
       }
     } // information-source-attributes

     grouping sr-node-attributes {
       description "SR node scope attributes.";
       container sr {
         description
           "Containing SR attributes.";
         uses sr-cmn:srgb-cfg;



Liu, et al.              Expires January 2, 2019               [Page 12]

Internet-Draft             YANG SR TE Topology                 July 2018


         uses sr-cmn:srlb-cfg;
         uses sr-cmn:node-capabilities;
         // Operational state data
         uses information-source-attributes;
       } // sr
     } // sr-node-attributes

     grouping sr-node-prefix-attributes {
       description "Containing SR attributes for a prefix.";
       container sr {
         presence "Presence indicates SR is enabled.";
         description
           "Containing SR attributes for a prefix.";
         uses sr-cmn:prefix-sid-attributes;
         uses sr-cmn:last-hop-behavior;
         leaf is-local {
           type boolean;
           description
             "'true' if the SID is local.";
         }
       } // sr
     } // sr-node-prefix-attributes

     grouping sr-tp-attributes {
       description "SR termination point scope attributes";
       container sr {
         presence "Presence indicates SR is enabled.";
         description
           "Containing SR attributes.";
         uses sr-cmn:sid-value-type;
         leaf sid {
           type uint32;
           mandatory true;
           description
             "Adjacency SID, which can be either IGP-Adjacency SID
              or BGP PeerAdj SID, depending on the context.";
         }
         leaf advertise-protection {
           type enumeration {
             enum "single" {
               description
                 "A single Adj-SID is associated
                  with the adjacency and reflects
                  the protection configuration.";
             }
             enum "dual" {
               description
                 "Two Adj-SIDs will be associated



Liu, et al.              Expires January 2, 2019               [Page 13]

Internet-Draft             YANG SR TE Topology                 July 2018


                  with the adjacency if interface
                  is protected. In this case
                  one will be enforced with
                  backup flag set, the other
                  will be enforced to backup flag unset.
                  In case, protection is not configured,
                  a single Adj-SID will be advertised
                  with backup flag unset.";
             }
           }
           description
             "If set, the Adj-SID refers to an
              adjacency being protected.";
         }
         leaf is-local {
           type boolean;
           description
             "'true' if the SID is local.";
         }
         leaf is-backup {
           type boolean;
           config false;
           description
             "'true' if the SID is a backup.";
         }
         leaf is-part-of-set {
           type boolean;
           config false;
           description
             "'true' if the SID is part of a set.";
         }
         leaf is-on-lan {
           type boolean;
           config false;
           description
             "'true' if on a lan.";
         }
         uses information-source-attributes;
       } // sr
     } // sr-tp-attributes
   }
   <CODE ENDS>









Liu, et al.              Expires January 2, 2019               [Page 14]

Internet-Draft             YANG SR TE Topology                 July 2018


5.  IANA Considerations

   RFC Ed.: In this section, replace all occurrences of 'XXXX' with the
   actual RFC number (and remove this note).

   This document registers the following namespace URIs in the IETF XML
   registry [RFC3688]:

   --------------------------------------------------------------------
   URI: urn:ietf:params:xml:ns:yang:ietf-sr-topology
   Registrant Contact: The IESG.
   XML: N/A, the requested URI is an XML namespace.
   --------------------------------------------------------------------

   --------------------------------------------------------------------
   URI: urn:ietf:params:xml:ns:yang:ietf-sr-topology-state
   Registrant Contact: The IESG.
   XML: N/A, the requested URI is an XML namespace.
   --------------------------------------------------------------------

   This document registers the following YANG modules in the YANG Module
   Names registry [RFC6020]:

   --------------------------------------------------------------------
   name:         ietf-sr-topology
   namespace:    urn:ietf:params:xml:ns:yang:ietf-sr-topology
   prefix:       srt
   reference:    RFC XXXX
   --------------------------------------------------------------------

   --------------------------------------------------------------------
   name:         ietf-sr-topology-state
   namespace:    urn:ietf:params:xml:ns:yang:ietf-sr-topology-state
   prefix:       srt-s
   reference:    RFC XXXX
   --------------------------------------------------------------------

6.  Security Considerations

   The configuration, state, action and notification data defined in
   this document are designed to be accessed via the NETCONF protocol
   [RFC6241].  The data-model by itself does not create any security
   implications.  The security considerations for the NETCONF protocol
   are applicable.  The NETCONF protocol used for sending the data
   supports authentication and encryption.






Liu, et al.              Expires January 2, 2019               [Page 15]

Internet-Draft             YANG SR TE Topology                 July 2018


7.  References

7.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC6241]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", RFC 6241, DOI 10.17487/RFC6241, June 2011,
              <https://www.rfc-editor.org/info/rfc6241>.

   [RFC7950]  Bjorklund, M., Ed., "The YANG 1.1 Data Modeling Language",
              RFC 7950, DOI 10.17487/RFC7950, August 2016,
              <https://www.rfc-editor.org/info/rfc7950>.

   [RFC8342]  Bjorklund, M., Schoenwaelder, J., Shafer, P., Watsen, K.,
              and R. Wilton, "Network Management Datastore Architecture
              (NMDA)", RFC 8342, DOI 10.17487/RFC8342, March 2018,
              <https://www.rfc-editor.org/info/rfc8342>.

7.2.  Informative References

   [RFC8340]  Bjorklund, M. and L. Berger, Ed., "YANG Tree Diagrams",
              BCP 215, RFC 8340, DOI 10.17487/RFC8340, March 2018,
              <https://www.rfc-editor.org/info/rfc8340>.

   [RFC8345]  Clemm, A., Medved, J., Varga, R., Bahadur, N.,
              Ananthakrishnan, H., and X. Liu, "A YANG Data Model for
              Network Topologies", RFC 8345, DOI 10.17487/RFC8345, March
              2018, <https://www.rfc-editor.org/info/rfc8345>.

   [RFC8346]  Clemm, A., Medved, J., Varga, R., Liu, X.,
              Ananthakrishnan, H., and N. Bahadur, "A YANG Data Model
              for Layer 3 Topologies", RFC 8346, DOI 10.17487/RFC8346,
              March 2018, <https://www.rfc-editor.org/info/rfc8346>.

   [I-D.ietf-teas-yang-te-topo]
              Liu, X., Bryskin, I., Beeram, V., Saad, T., Shah, H., and
              O. Dios, "YANG Data Model for Traffic Engineering (TE)
              Topologies", draft-ietf-teas-yang-te-topo-18 (work in
              progress), June 2018.







Liu, et al.              Expires January 2, 2019               [Page 16]

Internet-Draft             YANG SR TE Topology                 July 2018


   [I-D.ietf-spring-sr-yang]
              Litkowski, S., Qu, Y., Sarkar, P., and J. Tantsura, "YANG
              Data Model for Segment Routing", draft-ietf-spring-sr-
              yang-08 (work in progress), December 2017.















































Liu, et al.              Expires January 2, 2019               [Page 17]

Internet-Draft             YANG SR TE Topology                 July 2018


Appendix A.  Companion YANG Model for Non-NMDA Compliant Implementations

   The YANG module ietf-sr-topology defined in this document is designed
   to be used in conjunction with implementations that support the
   Network Management Datastore Architecture (NMDA) defined in
   [RFC8342].  In order to allow implementations to use the model even
   in cases when NMDA is not supported, the following companion module,
   ietf-sr-topology-state, is defined as state model, which mirrors the
   module ietf-sr-topology defined earlier in this document.  However,
   all data nodes in the companion module are non-configurable, to
   represent the applied configuration or the derived operational
   states.

   The companion module, ietf-sr-topology-state, is redundant and SHOULD
   NOT be supported by implementations that support NMDA.

   As the structure of the companion module mirrors that of the
   coorespinding NMDA model, the YANG tree of the companion module is
   not depicted separately.

A.1.  SR Topology State Module


   <CODE BEGINS> file "ietf-sr-topology-state@2018-06-22.yang"
   module ietf-sr-topology-state {
     yang-version 1.1;
     namespace "urn:ietf:params:xml:ns:yang:ietf-sr-topology-state";
     prefix "srt-s";

     import ietf-sr-topology {
       prefix "srt";
     }
     import ietf-network-state {
       prefix "nw-s";
       reference "RFC 8345: A YANG Data Model for Network Topologies";
     }
     import ietf-network-topology-state {
       prefix "nt-s";
       reference "RFC 8345: A YANG Data Model for Network Topologies";
     }
     import ietf-l3-unicast-topology-state {
       prefix "l3t-s";
       reference "RFC 8346: A YANG Data Model for Layer 3 Topologies";
     }
     import ietf-segment-routing-common {
       prefix "sr-cmn";
       reference
         "I-D.ietf-spring-sr-yang: YANG Data Model for Segment Routing";



Liu, et al.              Expires January 2, 2019               [Page 18]

Internet-Draft             YANG SR TE Topology                 July 2018


     }

     organization
       "IETF Traffic Engineering Architecture and Signaling (TEAS)
        Working Group";

     contact
       "WG Web:   <http://tools.ietf.org/wg/teas/>
        WG List:  <mailto:teas@ietf.org>

        Editor:   Xufeng Liu
                  <mailto:xufeng.liu.ietf@gmail.com>

        Editor:   Igor Bryskin
                  <mailto:Igor.Bryskin@huawei.com>

        Editor:   Vishnu Pavan Beeram
                  <mailto:vbeeram@juniper.net>

        Editor:   Tarek Saad
                  <mailto:tsaad@cisco.com>

        Editor:   Himanshu Shah
                  <mailto:hshah@ciena.com>

        Editor:   Stephane Litkowski
                  <mailto:stephane.litkowski@orange.com>";

     description
       "YANG data model for representing operational state information
        of Segment Routing Topologies, when NMDA is not supported.

        Copyright (c) 2018 IETF Trust and the persons identified as
        authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject to
        the license terms contained in, the Simplified BSD License set
        forth in Section 4.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (http://trustee.ietf.org/license-info).

        This version of this YANG module is part of RFC XXXX; see the
        RFC itself for full legal notices.";

     revision 2018-06-22 {
       description "Initial revision";
       reference



Liu, et al.              Expires January 2, 2019               [Page 19]

Internet-Draft             YANG SR TE Topology                 July 2018


         "RFC XXXX: YANG Data Model for SR and SR TE Topologies";
     }

     augment "/nw-s:networks/nw-s:network/nw-s:network-types/"
       + "l3t-s:l3-unicast-topology" {
       description
         "Defines the SR topology type.";
       uses srt:sr-topology-type;
     }

     augment "/nw-s:networks/nw-s:network/"
       + "l3t-s:l3-topology-attributes" {
       when "../nw-s:network-types/l3t-s:l3-unicast-topology/srt-s:sr" {
         description "Augment only for SR topology.";
       }
       description "Augment topology configuration";
       uses srt:sr-topology-attributes;
     }

     augment "/nw-s:networks/nw-s:network/nw-s:node/"
       + "l3t-s:l3-node-attributes" {
       when "../../nw-s:network-types/l3t-s:l3-unicast-topology/"
         + "srt-s:sr" {
         description "Augment only for SR topology.";
       }
       description "Augment node configuration.";
       uses srt:sr-node-attributes;
     }

     augment "/nw-s:networks/nw-s:network/nw-s:node/"
       + "l3t-s:l3-node-attributes/l3t-s:prefix" {
       when "../../../nw-s:network-types/l3t-s:l3-unicast-topology/"
         + "srt-s:sr" {
         description "Augment only for SR topology.";
       }
       description "Augment node prefix.";
       uses srt:sr-node-prefix-attributes;
     }

     augment "/nw-s:networks/nw-s:network/nw-s:node/"
       + "nt-s:termination-point/"
       + "l3t-s:l3-termination-point-attributes" {
       when "../../../nw-s:network-types/l3t-s:l3-unicast-topology/"
         + "srt-s:sr" {
         description "Augment only for SR topology.";
       }
       description "Augment termination point configuration";
       uses srt:sr-tp-attributes;



Liu, et al.              Expires January 2, 2019               [Page 20]

Internet-Draft             YANG SR TE Topology                 July 2018


     }

     grouping sr-topology-attributes {
       description "SR topology scope attributes.";
       container sr {
         description
           "Containing SR attributes.";
         uses sr-cmn:srgb-cfg;
       } // sr
     } // sr-topology-attributes
   }
   <CODE ENDS>



Authors' Addresses

   Xufeng Liu
   Volta Networks

   EMail: xufeng.liu.ietf@gmail.com


   Igor Bryskin
   Huawei Technologies

   EMail: Igor.Bryskin@huawei.com


   Vishnu Pavan Beeram
   Juniper Networks

   EMail: vbeeram@juniper.net


   Tarek Saad
   Cisco Systems Inc

   EMail: tsaad@cisco.com


   Himanshu Shah
   Ciena

   EMail: hshah@ciena.com






Liu, et al.              Expires January 2, 2019               [Page 21]

Internet-Draft             YANG SR TE Topology                 July 2018


   Stephane Litkowski
   Orange Business Service

   EMail: stephane.litkowski@orange.com















































Liu, et al.              Expires January 2, 2019               [Page 22]
