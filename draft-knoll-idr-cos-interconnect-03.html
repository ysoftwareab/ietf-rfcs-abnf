<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>BGP Class of Service
    Interconnection</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="BGP Class of Service
    Interconnection">
<meta name="keywords" content="Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Inter-Domain Routing Working Group</td><td class="header">Th. Knoll</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Chemnitz University of Technology</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">November 09, 2009</td></tr>
<tr><td class="header">Expires: May 13, 2010</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />BGP Class of Service
    Interconnection<br />draft-knoll-idr-cos-interconnect-03</h1>

<h3>Abstract</h3>

<p>This document focuses on Class of Service Interconnection at
      inter-domain interconnection points. It specifies two new transitive
      attributes, which enable adjacent peers to signal Class of Service
      Capabilities and certain Class of Service admission control Parameters.
      The new "CoS Capability" is deliberately kept simple and denotes the
      general EF, AF Group BE and LE forwarding support across the advertising
      AS. The second "CoS Parameter Attribute" is of variable length and
      contains a more detailed description of available forwarding behaviours
      using the PHB id Code encoding. Each PHB id Code is associated with rate
      and size based traffic parameters, which will be applied in the ingress
      AS Border Router for admission control purposes to a given forwarding
      behaviour.
</p>
<h3>Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on May 13, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#CoS_Capability_Attribute">2.</a>&nbsp;
Definition and Usage of the CoS Capability<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">2.1.</a>&nbsp;
Extended Community Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.2.</a>&nbsp;
Structure of the CoS Capability Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.3.</a>&nbsp;
Usage of the CoS Capability Attribute<br />
<a href="#CoS_Parameter_Attribute">3.</a>&nbsp;
Definition and Usage of the CoS Parameter Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.1.</a>&nbsp;
Definition of the CoS Parameter Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.2.</a>&nbsp;
Usage of the CoS Parameter Attribute<br />
<a href="#Confidentiality">4.</a>&nbsp;
Confidentiality Considerations<br />
<a href="#IANA">5.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">6.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">7.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">7.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>AS interconnection is currently based on best effort interconnection
      only. BGP-4 <a class='info' href='#RFC4271'>[RFC4271]<span> (</span><span class='info'>Rekhter, Y., Li, T., and S. Hares, &ldquo;A Border Gateway Protocol 4 (BGP-4),&rdquo; January&nbsp;2006.</span><span>)</span></a> is the de-facto
      interconnection protocol used to exchange reachability information.
      There is no standardized set of supported traffic classes, no
      standardized packet marking and no standardized forwarding behaviour,
      which cross-domain traffic could rely on. QoS policy decisions are taken
      by AS providers independently and in an uncoordinated fashion. However,
      many AS providers make use of the Differentiated Services Architecture
      <a class='info' href='#RFC2475'>[RFC2475]<span> (</span><span class='info'>Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z., and W. Weiss, &ldquo;An Architecture for Differentiated Services,&rdquo; December&nbsp;1998.</span><span>)</span></a> as AS internal QoS mechanism. Within this
      architecture, there are 64 codepoints and an unlimited number of Per Hop
      Behaviours (PHBs) available. Some PHBs have been defined in separate
      RFCs, which will be focused on in this document.
</p>
<p>A Basic Set of supported Classes, called "Basic CoS" is defined
      inhere, which consists of the primitive "Best Effort (BE)" PHB, the
      "Expedited Forwarding (EF)" PHB <a class='info' href='#RFC3246'>[RFC3246]<span> (</span><span class='info'>Davie, B., Charny, A., Bennet, J., Benson, K., Le Boudec, J., Courtney, W., Davari, S., Firoiu, V., and D. Stiliadis, &ldquo;An Expedited Forwarding PHB (Per-Hop Behavior),&rdquo; March&nbsp;2002.</span><span>)</span></a>, the
      "Assured Forwarding (AF)" PHB Group <a class='info' href='#RFC2597'>[RFC2597]<span> (</span><span class='info'>Heinanen, J., Baker, F., Weiss, W., and J. Wroclawski, &ldquo;Assured Forwarding PHB Group,&rdquo; June&nbsp;1999.</span><span>)</span></a> and
      the "Lower Effort" Per-Domain Behavior (PDB) <a class='info' href='#RFC3662'>[RFC3662]<span> (</span><span class='info'>Bless, R., Nichols, K., and K. Wehrle, &ldquo;A Lower Effort Per-Domain Behavior (PDB) for Differentiated Services,&rdquo; December&nbsp;2003.</span><span>)</span></a>. AS providers, which can support this Basic CoS
      are asked to signal this capability to their interconnection partners by
      means of the new CoS Capability Extended Community defined in <a class='info' href='#CoS_Capability_Attribute'>Section&nbsp;2<span> (</span><span class='info'>Definition and Usage of the CoS Capability</span><span>)</span></a> of this draft.
</p>
<p>4 AF PHB classes have been defined so far, which will be grouped into
      the generally signalled "AF Group". That is, as long as the AS provider
      can support at least one out of the 4 AF classes in his externally
      supported CoS Set, this AS is regarded as AF capable.
</p>
<p>A second transitive attribute is defined in <a class='info' href='#CoS_Parameter_Attribute'>Section&nbsp;3<span> (</span><span class='info'>Definition and Usage of the CoS Parameter Attribute</span><span>)</span></a>, which is used for parameter
      signalling about the applied access control within the ingress AS border
      router. The reason for this traffic limitation is the fact, that certain
      high quality forwarding behaviours can only be achieved, if the
      percentage of high priority traffic within the traffic mix lies below a
      certain threshold. This attribute informs the interconnection partner
      about the applied limitation, which can in turn be used to perform
      traffic shaping at the neighbouring AS' egress. The attribute allows
      this limitation signalling either associated to the NLRI within the same
      UPDATE message or with "global" scope to describe the generally applied
      ingress limitation.
</p>
<p>Both attributes are likely to be used together, if ingress class
      limitation is used for the respective AS.
</p>
<p>More detailed signalling of forwarding behaviour distinction and
      associated cross-layer marking can be achieved using the QoS Marking
      Attribute approach <a class='info' href='#I-D.knoll-idr-qos-attribute'>[I&#8209;D.knoll&#8209;idr&#8209;qos&#8209;attribute]<span> (</span><span class='info'>Knoll, T., &ldquo;BGP Extended Community for QoS Marking,&rdquo; January&nbsp;2010.</span><span>)</span></a>.
</p>
<a name="CoS_Capability_Attribute"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Definition and Usage of the CoS Capability</h3>

<p>
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Extended Community Type</h3>

<p>The new CoS Capability is encoded as a BGP Extended Community <a class='info' href='#RFC4360'>[RFC4360]<span> (</span><span class='info'>Sangli, S., Tappan, D., and Y. Rekhter, &ldquo;BGP Extended Communities Attribute,&rdquo; February&nbsp;2006.</span><span>)</span></a>. Extended Community Attributes are transitive
        optional BGP attributes with Type Code 16. An adoption to the simple
        BGP Community Attribute encoding <a class='info' href='#RFC1997'>[RFC1997]<span> (</span><span class='info'>Chandrasekeran, R., Traina, P., and T. Li, &ldquo;BGP Communities Attribute,&rdquo; August&nbsp;1996.</span><span>)</span></a> is not
        defined in this document. The actual encoding within the BGP Extended
        Community Attribute is as follows.
</p>
<p>The CoS Capability is transitive and of regular type which results
        in a 1 octet Type field followed by 7 octets for the CoS Capability
        structure. The Type is IANA-assignable (FCFS procedure) and marks the
        community as transitive across ASes. The type number has been assigned
        by IANA to 0xYY (0x00-0x3f).
</p><br /><hr class="insert" />
<a name="Figure_1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 x x x x x x|                                               |
+-+-+-+-+-+-+-+-+   7 octet CoS Capability structure            |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Structure of the CoS Capability Attribute</h3>

<p>The CoS Capability structure is deliberately kept very simple and
        is defined as follows.
</p><br /><hr class="insert" />
<a name="Figure_2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|B E A L| Currently Unused - default to '0'                     |
|E F F E|                                                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Currently Unused - default to '0'     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The Currently Unused bits default to '0' and MUST be ignored on
        reception.
</p>
<p>
</p>
<p>Leading "BE, EF, AF and LE" encoding.
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>This encoding signals the BE, EF, AF Group and LE support of
            the respective AS.
</dd><br /><hr class="insert" />
<a name="Table_1"></a>
<table class="full" align="left" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Bit</th><th align="left">Encoding</th></tr>
<tr>
<td align="left">BE</td>
<td align="left">Default to &lsquo;1&rsquo; to signal general &ldquo;Best
              Effort&rdquo; PHB support</td>
</tr>
<tr>
<td align="left">EF</td>
<td align="left">&lsquo;1&rsquo; &hellip; &ldquo;Expedited Forwarding&rdquo;
              PHB support <a class='info' href='#RFC3246'>[RFC3246]<span> (</span><span class='info'>Davie, B., Charny, A., Bennet, J., Benson, K., Le Boudec, J., Courtney, W., Davari, S., Firoiu, V., and D. Stiliadis, &ldquo;An Expedited Forwarding PHB (Per-Hop Behavior),&rdquo; March&nbsp;2002.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">AF</td>
<td align="left">&lsquo;1&rsquo; &hellip; &ldquo;Assured Forwarding&rdquo; PHB
              group support <a class='info' href='#RFC2597'>[RFC2597]<span> (</span><span class='info'>Heinanen, J., Baker, F., Weiss, W., and J. Wroclawski, &ldquo;Assured Forwarding PHB Group,&rdquo; June&nbsp;1999.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">LE</td>
<td align="left">&lsquo;1&rsquo; &hellip; &ldquo;Lower Effort&rdquo; PDB
              support <a class='info' href='#RFC3662'>[RFC3662]<span> (</span><span class='info'>Bless, R., Nichols, K., and K. Wehrle, &ldquo;A Lower Effort Per-Domain Behavior (PDB) for Differentiated Services,&rdquo; December&nbsp;2003.</span><span>)</span></a></td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: CoS support encoding&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<dt></dt>
<dd>The implied Per-Hop-Behaviour Identification Codes follow the
            definition as standardized in <a class='info' href='#RFC3140'>[RFC3140]<span> (</span><span class='info'>Black, D., Brim, S., Carpenter, B., and F. Le Faucheur, &ldquo;Per Hop Behavior Identification Codes,&rdquo; June&nbsp;2001.</span><span>)</span></a>. The AF
            Group needs to consist of at least one of the currently available
            AF1x, AF2x, AF3x and AF4x.
</dd>
</dl></blockquote>
<br /><hr class="insert" />
<a name="Figure_3"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>BE:
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0   0   0   0   0   0 | 0   0   0   0   0   0   0   0   0   0 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

EF:
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 1   0   1   1   1   0 | 0   0   0   0   0   0   0   0   0   0 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

AF1x:
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0   0   1   0   1   0 | 0   0   0   0   0   0   0   0   1   0 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

AF2x:
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0   1   0   0   1   0 | 0   0   0   0   0   0   0   0   1   0 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

AF3x:
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0   1   1   0   1   0 | 0   0   0   0   0   0   0   0   1   0 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

AF4x:
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 1   0   0   0   1   0 | 0   0   0   0   0   0   0   0   1   0 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

LE:
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0   0   1   0   0   0 | 0   0   0   0   0   0   0   0   0   0 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Usage of the CoS Capability Attribute</h3>

<p>The CoS Capability is used as primitive means to signal the general
        availability of the set of "Basic CoS" PHBs in the advertising AS.
        This Extended Community is included within the attribute section of an
        BGP UPDATE message and is therefore associated to the NLRI information
        of the same message. Whether the Basic CoS is available and is
        therefore advertised can easily being judged on for all prefixes,
        which originate from the advertising AS.
</p>
<p>All other reachability information MUST be signalled together with
        this CoS Capability if they were received together with such an
        Extended Community by neighbouring peers.
</p>
<p>NLRI MUST NOT be marked as supporting "Basic CoS" by means of the
        CoS Capability, if it were not received together with such an
        attribute.
</p>
<a name="CoS_Parameter_Attribute"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Definition and Usage of the CoS Parameter Attribute</h3>

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Definition of the CoS Parameter Attribute</h3>

<p>The CoS Parameter Attribute is an optional transitive BGP
        attribute.
</p>
<p>The attribute contains one or more of the following:
</p><br /><hr class="insert" />
<a name="Figure_4"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   PHB id Code                 |     Flags     | Reserved = '0'|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      ASN of sending AS                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Token Bucket Rate [r] (32-bit IEEE floating point number)   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Token Bucket Size [b] (32-bit IEEE floating point number)   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Peak Data Rate [p] (32-bit IEEE floating point number)      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Minimum Policed Unit [m] (32-bit integer)                   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Maximum Packet Size [M] (32-bit integer)                    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
</p>
<p>PHB ID:
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>This field specifies the targeted Per Hop Behaviour limitations
            and follows the defined encoding of <a class='info' href='#RFC3140'>[RFC3140]<span> (</span><span class='info'>Black, D., Brim, S., Carpenter, B., and F. Le Faucheur, &ldquo;Per Hop Behavior Identification Codes,&rdquo; June&nbsp;2001.</span><span>)</span></a>
            as listed in <a class='info' href='#Figure_3'>Figure&nbsp;3</a>.
</dd>
</dl></blockquote>

<p>Flags:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre> 0  1  2  3  4  5  6  7
+--+--+--+--+--+--+--+--+
|G |DR|0 |0 |0 |0 |0 |0 |
+--+--+--+--+--+--+--+--+</pre></div>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>Only two flags are defined. The remaining bits default to '0'
            and MUST be ignored on reception.
</dd>
<dt></dt>
<dd>The 'G' flag signals, whether the limitations have global scope
            on all incoming traffic ('1') or are associated to traffic that is
            destined to destinations within the NLRI of the UPDATE message
            ('0'). NLRI specific limitation will supersede globally signalled
            ones for traffic destined to those NLRI destinations.
</dd>
<dt></dt>
<dd>The 'DR' flag signals the applied handling of non-confirming
            traffic. DR='0' signals strict dropping of excess traffic. DR='1'
            signals the performed remarking of excess traffic packets to Best
            Effort traffic marking.
</dd>
</dl></blockquote>

<p>ASN of sending AS:
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>Depending on the 2-octet or 4-octet AS peering type, the
            sending AS of the attribute MUST encode its AS number as
            right-aligned 32bit number.
</dd>
</dl></blockquote>

<p>Peak Data Rate, Token Bucket Rate, Token Bucket Size, Minimum
        Policed Unit and Maximum Packet Size:
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>The rates and sizes are given in 4 octet IEEE floating point
            format <a class='info' href='#IEEE'>[IEEE]<span> (</span><span class='info'>IEEE, &ldquo;IEEE Standard for Binary Floating-Point Arithmetic,&rdquo; 1985.</span><span>)</span></a> or 4 octet integer format,
            respectively. They are parameters to a token bucket ingress
            filter, which is applied to the packets belonging to the stated
            PHB id. The parameters follow the definition given in <a class='info' href='#RFC2210'>[RFC2210]<span> (</span><span class='info'>Wroclawski, J., &ldquo;The Use of RSVP with IETF Integrated Services,&rdquo; September&nbsp;1997.</span><span>)</span></a> and <a class='info' href='#RFC2215'>[RFC2215]<span> (</span><span class='info'>Shenker, S. and J. Wroclawski, &ldquo;General Characterization Parameters for Integrated Service Network Elements,&rdquo; September&nbsp;1997.</span><span>)</span></a>.
</dd>
</dl></blockquote>

<p>
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Usage of the CoS Parameter Attribute</h3>

<p>The signalled parameters are used for PHB id Code based ingress
        limitation. Depending on which PHB id Codes a BGP peer signals in this
        attribute to its neighbour, it is said, that the respective PHB id
        Code is supported and will experience the defined limitations.
</p>
<p>Those limitations can be applied to all incoming traffic of a
        specific PHB id Code (marked as 'G') or only for incoming traffic,
        that is destined for the NLRI of the given UPDATE message.
</p>
<p>The resulting treatment for non-confirming traffic is signalled
        through the 'DR' flag.
</p>
<p>To withdraw a previously signalled limitation, a CoS Parameter
        Attribute for the respective PHB id Code MUST be sent with a rate
        value [r] of zero. Using the 'G' flag, this can be withdrawn globally
        for all traffic of the given PHB id Code or withdrawn only for traffic
        destined to the prefixes given in the NLRI of the UPDATE. Previously
        signalled non-global (i.e. NLRI specific) limitations are also waived,
        if the same prefix is advertised without a CoS Parameter Attribute
        later on. In this case, the missing attribute is considered as the
        above described 'rate zero update' for those prefixes. Waived prefix
        specific limitations do not supersede global limitations for the
        respective PHB id Code. In turn, a withdrawal of a global limitation
        does also withdraw any possibly existing prefix specific ones for the
        respective PHB id Code.
</p>
<p>All limitations have AS local scope for the advertising AS and the
        neighbouring AS might or might not adopt its sending behaviour to
        those advertised limitations.
</p>
<p>Despite the transitive nature of the new attribute, its usage for
        ingress limitation is confined to neighbouring ASes. Processing of the
        conveyed parameters is only valid for peers, who are peering with the
        AS specified in the ASN field of the attribute.
</p>
<p>The attribute SHOULD NOT be transitively relayed to non-adjacent
        interconnection partners.
</p>
<a name="Confidentiality"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Confidentiality Considerations</h3>

<p>The disclosure of confidential AS intrinsic information by means of
      the signalled Basic CoS support is of low key security concern. The
      disclosure of information through CoS Parameter signalling is more
      detailed. However, all included parameters are exchanged with direct
      interconnection partners and are the free choice of each AS
      provider.
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>This document defines a new BGP Extended Community, which needs to be
      assigned a number by IANA within the Extended Community list. The new
      CoS Capability is a BGP Extended Community of regular type. It is
      IANA-assignable (FCFS procedure) and is transitive across ASes. A number
      assignment application within the numbering range of 0x00-0x3f is made
      to IANA.
</p>
<p>Note to RFC Editor: this section may be removed on publication as an
      RFC.
</p>
<p>This document defines a new BGP attribute. This attribute is optional
      and transitive.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>This extension to BGP does not change the underlying security issues
      inherent in the existing BGP version.
</p>
<p>The signalled attributes are transitive with limited relay operation
      in the CoS Parameter Attribute case. AS peers, which use egress traffic
      shaper on the signalled limitations SHOULD exhaust all available BGP
      security features to make sure, that the signalled limitation is
      actually sent by the adjacent peer.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="IEEE">[IEEE]</a></td>
<td class="author-text">IEEE, &ldquo;IEEE Standard for Binary Floating-Point Arithmetic,&rdquo; ISBN&nbsp;1-5593-7653-8, 1985.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1997">[RFC1997]</a></td>
<td class="author-text"><a href="mailto:rchandra@cisco.com">Chandrasekeran, R.</a>, <a href="mailto:pst@cisco.com">Traina, P.</a>, and <a href="mailto:tli@skat.usc.edu">T. Li</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1997">BGP Communities Attribute</a>,&rdquo; RFC&nbsp;1997, August&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc1997.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2210">[RFC2210]</a></td>
<td class="author-text"><a href="mailto:jtw@lcs.mit.edu">Wroclawski, J.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2210">The Use of RSVP with IETF Integrated Services</a>,&rdquo; RFC&nbsp;2210, September&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2210.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2210.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2210.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2215">[RFC2215]</a></td>
<td class="author-text"><a href="mailto:shenker@parc.xerox.com">Shenker, S.</a> and <a href="mailto:jtw@lcs.mit.edu">J. Wroclawski</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2215">General Characterization Parameters for Integrated Service Network Elements</a>,&rdquo; RFC&nbsp;2215, September&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2215.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2215.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2215.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2597">[RFC2597]</a></td>
<td class="author-text"><a href="mailto:jh@telia.fi">Heinanen, J.</a>, <a href="mailto:fred@cisco.com">Baker, F.</a>, <a href="mailto:wweiss@lucent.com">Weiss, W.</a>, and <a href="mailto:jtw@lcs.mit.edu">J. Wroclawski</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2597">Assured Forwarding PHB Group</a>,&rdquo; RFC&nbsp;2597, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2597.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3140">[RFC3140]</a></td>
<td class="author-text">Black, D., Brim, S., Carpenter, B., and F. Le Faucheur, &ldquo;<a href="http://tools.ietf.org/html/rfc3140">Per Hop Behavior Identification Codes</a>,&rdquo; RFC&nbsp;3140, June&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3140.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3246">[RFC3246]</a></td>
<td class="author-text">Davie, B., Charny, A., Bennet, J., Benson, K., Le Boudec, J., Courtney, W., Davari, S., Firoiu, V., and D. Stiliadis, &ldquo;<a href="http://tools.ietf.org/html/rfc3246">An Expedited Forwarding PHB (Per-Hop Behavior)</a>,&rdquo; RFC&nbsp;3246, March&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3246.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4271">[RFC4271]</a></td>
<td class="author-text">Rekhter, Y., Li, T., and S. Hares, &ldquo;<a href="http://tools.ietf.org/html/rfc4271">A Border Gateway Protocol 4 (BGP-4)</a>,&rdquo; RFC&nbsp;4271, January&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4271.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4360">[RFC4360]</a></td>
<td class="author-text">Sangli, S., Tappan, D., and Y. Rekhter, &ldquo;<a href="http://tools.ietf.org/html/rfc4360">BGP Extended Communities Attribute</a>,&rdquo; RFC&nbsp;4360, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4360.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.knoll-idr-qos-attribute">[I-D.knoll-idr-qos-attribute]</a></td>
<td class="author-text">Knoll, T., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-knoll-idr-qos-attribute-05.txt">BGP Extended Community for QoS Marking</a>,&rdquo; draft-knoll-idr-qos-attribute-05 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-knoll-idr-qos-attribute-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2475">[RFC2475]</a></td>
<td class="author-text"><a href="mailto:slblake@torrentnet.com">Blake, S.</a>, <a href="mailto:black_david@emc.com">Black, D.</a>, <a href="mailto:mark.carlson@sun.com">Carlson, M.</a>, <a href="mailto:elwynd@nortel.co.uk">Davies, E.</a>, <a href="mailto:zhwang@bell-labs.com">Wang, Z.</a>, and <a href="mailto:wweiss@lucent.com">W. Weiss</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2475">An Architecture for Differentiated Services</a>,&rdquo; RFC&nbsp;2475, December&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2475.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2475.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2475.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3662">[RFC3662]</a></td>
<td class="author-text">Bless, R., Nichols, K., and K. Wehrle, &ldquo;<a href="http://tools.ietf.org/html/rfc3662">A Lower Effort Per-Domain Behavior (PDB) for Differentiated Services</a>,&rdquo; RFC&nbsp;3662, December&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3662.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Thomas Martin Knoll</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Chemnitz University of Technology</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:knoll@etit.tu-chemnitz.de">knoll@etit.tu-chemnitz.de</a></td></tr>
</table>
</body></html>
