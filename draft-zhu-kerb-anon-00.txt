


NETWORK WORKING GROUP                                             L. Zhu
Internet-Draft                                                  P. Leach
Updates: 4120 (if approved)                                K. Jaganathan
Expires: April 18, 2006                            Microsoft Corporation
                                                        October 15, 2005


                     Anonymity Support for Kerberos
                         draft-zhu-kerb-anon-00

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on April 18, 2006.

Copyright Notice

   Copyright (C) The Internet Society (2005).

Abstract

   This document defines the use of anonymous Kerberos tickets for the
   purpose of authenticating the servers and enabling secure
   communication between a client and a server, without identifying the
   client to the server.






Zhu, et al.              Expires April 18, 2006                 [Page 1]

Internet-Draft         Kerberos Anonymity Support           October 2005


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 3
   2.  Conventions Used in This Document . . . . . . . . . . . . . . . 3
   3.  Definitions . . . . . . . . . . . . . . . . . . . . . . . . . . 3
   4.  Protocol Description  . . . . . . . . . . . . . . . . . . . . . 4
   5.  Security Considerations . . . . . . . . . . . . . . . . . . . . 5
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . 6
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . . . 6
   8.  Normative References  . . . . . . . . . . . . . . . . . . . . . 6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . . . 7
   Intellectual Property and Copyright Statements  . . . . . . . . . . 8







































Zhu, et al.              Expires April 18, 2006                 [Page 2]

Internet-Draft         Kerberos Anonymity Support           October 2005


1.  Introduction

   In certain situations or environments, the Kerberos [RFC4120] client
   may wish to authenticate a server and/or protect communications
   without revealing its own identity.  For example, consider an
   application which provides read access to a research database, and
   which permits queries by arbitrary requestors.  A client of such a
   service might wish to authenticate the service, to establish trust in
   the information received from it, but might not wish to disclose its
   identity to the service for privacy reasons.

   To accomplish this, a Kerberos mechanism is specified in this
   document by which a client requests an anonymous ticket and use that
   to authenticate the server and secure subsequent client-server
   communications.  This provides Kerberos with functional equivalence
   to TLS [RFC2246] in environments where Kerberos is a more attractive
   authentication mechanism.

   Using this mechanism, the client has to reveal its identity in its
   initial request to its own Key Distribution Center (KDC) [RFC4120],
   and then it can remain anonymous thereafter to KDCs on the cross-
   realm authentication path, if any, and to the server with which it
   communicates.


2.  Conventions Used in This Document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].


3.  Definitions

   An anonymous ticket is a ticket that has all of the following
   properties:

   o  The name-type of the client principal name is NT-UNKNOWN
      [RFC4120], and the name-string is an empty SEQUENCE (this client
      principal name is referred hereafter as the anonymous client
      principal name in this document).

   o  The client realm name is an empty KerberosString [RFC4120].

   o  The tr-type field of the transited field [RFC4120] is NO-
      TRANSITED-INFO (as defined later in this section) and the contents
      field is an empty OCTET STRING.  No transited policy is defined
      for anonymous tickets.



Zhu, et al.              Expires April 18, 2006                 [Page 3]

Internet-Draft         Kerberos Anonymity Support           October 2005


   o  It contains no information that can reveal the client's identity.

   o  The anonymous ticket flag (as defined later in this section) is
      set.

   The anonymous ticket flag is defined as bit 14 (with the first bit
   being bit 0) in the TicketFlags:

           TicketFlags     ::= KerberosFlags
             -- anonymous(14)
             -- TicketFlags and KerberosFlags are defined in [RFC4120]

   The anonymous ticket flag MUST NOT be set by implementations of this
   specification if the ticket is not an anonymous ticket as defined.

   The request-anonymous KDC option is defined as bit 14 (with the first
   bit being bit 0) in the KDCOptions:

           KDCOptions      ::= KerberosFlags
             -- request-anonymous(14)
             -- KDCOptions and KerberosFlags are defined in [RFC4120]

   The anonymous transited encoding type is defined as follows:

           NO-TRANSITED-INFO    0

   This transited encoding type indicates there is no information
   available about the authentication path.


4.  Protocol Description

   In order to request an anonymous ticket, the client sets the request-
   anonymous KDC option in an AS or TGS request [RFC4120].  Note that if
   the service ticket in the PA-TGS-REQ [RFC4120] is anonymous, the
   request-anonymous KDC option MUST be set in the request.

   When policy allows, the KDC issues an anonymous ticket.  The KDC that
   implements this specification MUST NOT carry information that can
   reveal the client's identity, from the TGS request into the returned
   anonymous ticket.

   It should be noted that unless otherwise specified by this document
   the client principal name and the client realm in the Kerberos
   messages [RFC4120] should be the client name and client realm that
   can uniquely identify the client principal to the KDC, not the
   anonymous client principal name and the empty realm name.  For
   example, the client name and realm in the request body and the



Zhu, et al.              Expires April 18, 2006                 [Page 4]

Internet-Draft         Kerberos Anonymity Support           October 2005


   EncKDCRepPart of the reply [RFC4120] are identifiers of the client
   principal.  In other words, the client name and client realm in the
   EncKDCRepPart does not match with that of the returned anonymous
   ticket.

   If either local policy prohibits issuing of anonymous tickets or it
   is inappropriate to remove information (such as restrictions) from
   the TGS request in order to produce an anonymous ticket, the KDC MUST
   return an error message with the code KDC_ERR_POLICY [RFC4120].

   If a client requires anonymous communication then the client should
   check to make sure that the resulting ticket is actually anonymous by
   checking the presence of the anonymous ticket flag.  Because KDCs
   ignore unknown KDC options, a KDC that does not understand the
   request-anonymous KDC option will not return an error, but will
   instead return a normal ticket.

   The subsequent client and server communications then proceed as
   described in [RFC4120].  The client principal name in the
   Authenticator of the KRB_AP_REQ MUST be the anonymous client
   principal name and the client realm of the Authenticator MUST be an
   empty KerberosString [RFC4120].

   A server accepting such an anonymous service ticket may assume that
   subsequent requests using the same ticket originate from the same
   client.  Requests with different tickets are likely to originate from
   different clients.

   Interoperability and backward-compatibility notes: the KDC is given
   the task of rejecting a request for an anonymous ticket when the
   anonymous ticket is not acceptable by the server.


5.  Security Considerations

   Since KDCs ignore unknown options, a client requiring anonymous
   communication needs to make sure that the ticket is actually
   anonymous.  A KDC that that does not understand the anonymous option
   would not return an anonymous ticket.

   By using the mechanism defined in this specification, the client does
   not reveal its identity to the server but its identity may be
   revealed to the KDC of the server principal (when the server
   principal is in a different realm than that of the client), and any
   KDC on the cross-realm authentication path.  The Kerberos client MUST
   verify the ticket being used are indeed anonymous before
   communicating with the cross-realm KDC or the server, otherwise the
   client's identity may be revealed to the server unintentionally.



Zhu, et al.              Expires April 18, 2006                 [Page 5]

Internet-Draft         Kerberos Anonymity Support           October 2005


6.  Acknowledgements

   Most of this document is based on earlier versions of [RFC4120].

   The authors would like to thank Sam Hartman for his comments and
   suggestions.


7.  IANA Considerations

   No IANA actions are required for this document.

8.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC2246]  Dierks, T. and C. Allen, "The TLS Protocol Version 1.0",
              RFC 2246, January 1999.

   [RFC4120]  Neuman, C., Yu, T., Hartman, S., and K. Raeburn, "The
              Kerberos Network Authentication Service (V5)", RFC 4120,
              July 2005.




























Zhu, et al.              Expires April 18, 2006                 [Page 6]

Internet-Draft         Kerberos Anonymity Support           October 2005


Authors' Addresses

   Larry Zhu
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA  98052
   US

   Email: lzhu@microsoft.com


   Paul Leach
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA  98052
   US

   Email: paulle@microsoft.com


   Karthik Jaganathan
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA  98052
   US

   Email: karthikj@microsoft.com
























Zhu, et al.              Expires April 18, 2006                 [Page 7]

Internet-Draft         Kerberos Anonymity Support           October 2005


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

   Copyright (C) The Internet Society (2005).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.




Zhu, et al.              Expires April 18, 2006                 [Page 8]


