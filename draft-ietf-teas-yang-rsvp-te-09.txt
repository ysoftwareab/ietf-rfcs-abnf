



TEAS Working Group                                             V. Beeram
Internet-Draft                                                   T. Saad
Intended status: Standards Track                        Juniper Networks
Expires: August 26, 2021                                       R. Gandhi
                                                     Cisco Systems, Inc.
                                                                  X. Liu
                                                          Volta Networks
                                                              I. Bryskin
                                                     Huawei Technologies
                                                                 H. Shah
                                                                   Ciena
                                                       February 22, 2021


                 A YANG Data Model for RSVP-TE Protocol
                    draft-ietf-teas-yang-rsvp-te-09

Abstract

   This document defines a YANG data model for the configuration and
   management of RSVP (Resource Reservation Protocol) to establish
   Traffic-Engineered (TE) Label-Switched Paths (LSPs) for MPLS (Multi-
   Protocol Label Switching) and other technologies.

   The model defines a generic RSVP-TE module for signaling LSPs that
   are technology agnostic.  The generic RSVP-TE module is to be
   augmented by technology specific RSVP-TE modules that define
   technology specific data.  This document also defines the
   augmentation for RSVP-TE MPLS LSPs model.

   This model covers data for the configuration, operational state,
   remote procedural calls, and event notifications.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."




Beeram, et al.           Expires August 26, 2021                [Page 1]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


   This Internet-Draft will expire on August 26, 2021.

Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   3
     1.2.  Prefixes in Data Node Names . . . . . . . . . . . . . . .   3
   2.  Model Overview  . . . . . . . . . . . . . . . . . . . . . . .   4
     2.1.  Module Relationship . . . . . . . . . . . . . . . . . . .   4
     2.2.  Model Tree Diagrams . . . . . . . . . . . . . . . . . . .   5
       2.2.1.  RSVP-TE Model Tree Diagram  . . . . . . . . . . . . .   5
       2.2.2.  RSVP-TE MPLS Model Tree Diagram . . . . . . . . . . .   9
     2.3.  YANG Modules  . . . . . . . . . . . . . . . . . . . . . .  11
       2.3.1.  RSVP-TE YANG Module . . . . . . . . . . . . . . . . .  11
       2.3.2.  RSVP-TE MPLS YANG Module  . . . . . . . . . . . . . .  24
   3.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  36
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .  37
   5.  Acknowledgement . . . . . . . . . . . . . . . . . . . . . . .  38
   6.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .  38
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  38
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .  38
     7.2.  Informative References  . . . . . . . . . . . . . . . . .  40
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  41

1.  Introduction

   YANG [RFC7950] is a data modeling language that was introduced to
   define the contents of a conceptual data store that allows networked
   devices to be managed using NETCONF [RFC6241].  YANG has proved
   relevant beyond its initial confines, as bindings to other interfaces
   (e.g.  RESTCONF [RFC8040]) and encoding other than XML (e.g.  JSON)
   are being defined.  Furthermore, YANG data models can be used as the




Beeram, et al.           Expires August 26, 2021                [Page 2]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


   basis of implementation for other interfaces, such as CLI and
   programmatic APIs.

   This document defines a generic YANG data model for configuring and
   managing RSVP-TE LSP(s) [RFC3209].  The RSVP-TE generic model
   augments the RSVP base and extended models defined in
   [I-D.ietf-teas-yang-rsvp], and adds TE extensions to the RSVP
   protocol [RFC2205] model configuration and state data.  The
   technology specific RSVP-TE models augment the generic RSVP-TE model
   with additional technology specific parameters.  For example, this
   document also defines the MPLS RSVP-TE model for configuring and
   managing MPLS RSVP TE LSP(s).

   In addition to augmenting the RSVP YANG module, the modules defined
   in this document augment the TE Interfaces, Tunnels and LSP(s) YANG
   module defined in [I-D.ietf-teas-yang-te] to define additional
   parameters to enable signaling for RSVP-TE.

1.1.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

   The terminology for describing YANG data models is found in
   [RFC7950].

1.2.  Prefixes in Data Node Names

   In this document, names of data nodes and other data model objects
   are prefixed using the standard prefix associated with the
   corresponding YANG imported modules, as shown in Table 1.

















Beeram, et al.           Expires August 26, 2021                [Page 3]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


  +---------------+--------------------+-------------------------------+
  | Prefix        | YANG module        | Reference                     |
  +---------------+--------------------+-------------------------------+
  | yang          | ietf-yang-types    | [RFC6991]                     |
  | inet          | ietf-inet-types    | [RFC6991]                     |
  | te            | ietf-te            | [I-D.ietf-teas-yang-te]       |
  | rsvp          | ietf-rsvp          | [I-D.ietf-teas-yang-rsvp]     |
  | te-dev        | ietf-te-device     | [I-D.ietf-teas-yang-te]       |
  | te-types      | ietf-te-types      | [I-D.ietf-teas-yang-te-types] |
  | te-mpls-types | ietf-te-mpls-types | [I-D.ietf-teas-yang-te-types] |
  | rsvp-te       | ietf-rsvp-te       | this document                 |
  | rsvp-te-mpls  | ietf-rsvp-te-mpls  | this document                 |
  +---------------+--------------------+-------------------------------+

             Table 1: Prefixes and corresponding YANG modules

2.  Model Overview

   The RSVP-TE generic model augments the RSVP base and extended YANG
   models defined in [I-D.ietf-teas-yang-rsvp].  It also augments the TE
   tunnels and interfaces module defined in [I-D.ietf-teas-yang-te] to
   cover parameters specific to the configuration and management of
   RSVP-TE interfaces, tunnels and LSP(s).

   The RSVP-TE MPLS YANG model augments the RSVP-TE generic model with
   parameters to configure and manage signaling of MPLS RSVP-TE LSPs.
   RSVP-TE model augmentation for other dataplane technologies (e.g.
   OTN or WDM) are outside the scope of this document.

   There are three types of configuration and state data nodes in
   module(s) defined in this document:

   o  those augmenting or extending the base RSVP module that is defined
      in [I-D.ietf-teas-yang-rsvp]

   o  those augmenting or extending the base TE module defined in
      [I-D.ietf-teas-yang-te]

   o  those that are specific to the RSVP-TE and RSVP-TE MPLS modules
      defined in this document.

2.1.  Module Relationship

   The data pertaining to RSVP-TE in this document is divided into two
   modules: a technology agnostic RSVP-TE module that holds generic
   parameters for RSVP-TE applicable to all technologies, and a MPLS
   technology specific RSVP-TE module that holds parameters specific to
   MPLS technology.



Beeram, et al.           Expires August 26, 2021                [Page 4]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


   The relationship between the different modules is shown in Figure 1.

     TE basic       +---------+
     module         | ietf-te |        o: augment
                    +---------+
                         o
                         |
                         |
                    +--------------+
     RSVP-TE module | ietf-rsvp-te |o . . .
                    +--------------+         \
                         |                    \
                         o                 +--------------------+
                    +-----------+          | ietf-rsvp-te-mpls  |
     RSVP module    | ietf-rsvp |          +--------------------+
                    +-----------+             RSVP-TE with MPLS
                         o
                         |
     RSVP extended       |
       module       +--------------------+
                    | ietf-rsvp-extended |
                    +--------------------+

       Figure 1: Relationship of RSVP and RSVP-TE modules with other
                             protocol modules

2.2.  Model Tree Diagrams

   A full tree diagram of the module(s) defined in this document as per
   the syntax defined in [RFC8340] are given in subsequent sections.

2.2.1.  RSVP-TE Model Tree Diagram

   Figure 2 shows the YANG tree diagram of the RSVP-TE generic YANG
   model defined in module ietf-rsvp-te.yang.

   module: ietf-rsvp-te
     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/rsvp:rsvp:
       +--rw global-soft-preemption!
          +--rw soft-preemption-timeout?   uint16
     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/rsvp:rsvp/rsvp:interfaces:
       +--rw rsvp-te-interface-attributes
     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/rsvp:rsvp/rsvp:interfaces
               /rsvp:interface:
       +--rw rsvp-te-interface-attributes



Beeram, et al.           Expires August 26, 2021                [Page 5]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/rsvp:rsvp/rsvp:sessions:
       +--ro session-te* [tunnel-endpoint tunnel-id extended-tunnel-id]
          +--ro tunnel-endpoint       inet:ip-address
          +--ro tunnel-id             uint16
          +--ro extended-tunnel-id    inet:ip-address
          +--ro destination-port?     inet:port-number
          +--ro protocol-id?          uint8
          +--ro source?               inet:ip-address
          +--ro destination?          inet:ip-address
          +--ro session-name?         string
          +--ro session-status?       enumeration
          +--ro session-type          identityref
          +--ro psbs
          |  +--ro psb* []
          |     +--ro source-port?          inet:port-number
          |     +--ro expires-in?           uint32
          |     +--ro tspec-average-rate?
          |     |       rt-types:bandwidth-ieee-float32
          |     +--ro tspec-size?
          |     |       rt-types:bandwidth-ieee-float32
          |     +--ro tspec-peak-rate?
          |     |       rt-types:bandwidth-ieee-float32
          |     +--ro min-policed-unit?     uint32
          |     +--ro max-packet-size?      uint32
          +--ro rsbs
             +--ro rsb* []
                +--ro source-port?          inet:port-number
                +--ro reservation-style     identityref
                +--ro expires-in?           uint32
                +--ro fspec-average-rate?
                |       rt-types:bandwidth-ieee-float32
                +--ro fspec-size?
                |       rt-types:bandwidth-ieee-float32
                +--ro fspec-peak-rate?
                |       rt-types:bandwidth-ieee-float32
                +--ro min-policed-unit?     uint32
                +--ro max-packet-size?      uint32
     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/rsvp:rsvp/rsvp:neighbors:
     augment /te:te/te:tunnels/te:tunnel:
       +--rw lsp-signaled-name?   string
       +--rw session-attribute*   identityref
       +--rw lsp-attribute*       identityref
       +--rw retry-timer?         uint16
     augment /te:te/te:lsps/te:lsp:
       +--ro associated-rsvp-session?            leafref
       +--ro lsp-signaled-name?                  string



Beeram, et al.           Expires August 26, 2021                [Page 6]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


       +--ro session-attribute*                  identityref
       +--ro lsp-attribute*                      identityref
       +--ro rsvp-message-type?                  identityref
       +--ro rsvp-error-code?                    uint8
       +--ro rsvp-error-subcode?                 uint16
       +--ro explicit-route-objects
       |  +--ro incoming-explicit-route-hop* [index]
       |  |  +--ro index                        uint32
       |  |  +--ro (type)?
       |  |     +--:(numbered-node-hop)
       |  |     |  +--ro numbered-node-hop
       |  |     |     +--ro node-id     te-node-id
       |  |     |     +--ro hop-type?   te-hop-type
       |  |     +--:(numbered-link-hop)
       |  |     |  +--ro numbered-link-hop
       |  |     |     +--ro link-tp-id    te-tp-id
       |  |     |     +--ro hop-type?     te-hop-type
       |  |     |     +--ro direction?    te-link-direction
       |  |     +--:(unnumbered-link-hop)
       |  |     |  +--ro unnumbered-link-hop
       |  |     |     +--ro link-tp-id    te-tp-id
       |  |     |     +--ro node-id       te-node-id
       |  |     |     +--ro hop-type?     te-hop-type
       |  |     |     +--ro direction?    te-link-direction
       |  |     +--:(as-number)
       |  |     |  +--ro as-number-hop
       |  |     |     +--ro as-number    inet:as-number
       |  |     |     +--ro hop-type?    te-hop-type
       |  |     +--:(label)
       |  |        +--ro label-hop
       |  |           +--ro te-label
       |  |              +--ro (technology)?
       |  |              |  +--:(generic)
       |  |              |     +--ro generic?
       |  |              |             rt-types:generalized-label
       |  |              +--ro direction?       te-label-direction
       |  +--ro outgoing-explicit-route-hop* [index]
       |     +--ro index                        uint32
       |     +--ro (type)?
       |        +--:(numbered-node-hop)
       |        |  +--ro numbered-node-hop
       |        |     +--ro node-id     te-node-id
       |        |     +--ro hop-type?   te-hop-type
       |        +--:(numbered-link-hop)
       |        |  +--ro numbered-link-hop
       |        |     +--ro link-tp-id    te-tp-id
       |        |     +--ro hop-type?     te-hop-type
       |        |     +--ro direction?    te-link-direction



Beeram, et al.           Expires August 26, 2021                [Page 7]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


       |        +--:(unnumbered-link-hop)
       |        |  +--ro unnumbered-link-hop
       |        |     +--ro link-tp-id    te-tp-id
       |        |     +--ro node-id       te-node-id
       |        |     +--ro hop-type?     te-hop-type
       |        |     +--ro direction?    te-link-direction
       |        +--:(as-number)
       |        |  +--ro as-number-hop
       |        |     +--ro as-number    inet:as-number
       |        |     +--ro hop-type?    te-hop-type
       |        +--:(label)
       |           +--ro label-hop
       |              +--ro te-label
       |                 +--ro (technology)?
       |                 |  +--:(generic)
       |                 |     +--ro generic?
       |                 |             rt-types:generalized-label
       |                 +--ro direction?       te-label-direction
       +--ro incoming-record-route-subobjects
       |  +--ro incoming-record-route-subobject* [index]
       |     +--ro index                        uint32
       |     +--ro (type)?
       |        +--:(numbered-node-hop)
       |        |  +--ro numbered-node-hop
       |        |     +--ro node-id    te-node-id
       |        |     +--ro flags*     path-attribute-flags
       |        +--:(numbered-link-hop)
       |        |  +--ro numbered-link-hop
       |        |     +--ro link-tp-id    te-tp-id
       |        |     +--ro flags*        path-attribute-flags
       |        +--:(unnumbered-link-hop)
       |        |  +--ro unnumbered-link-hop
       |        |     +--ro link-tp-id    te-tp-id
       |        |     +--ro node-id?      te-node-id
       |        |     +--ro flags*        path-attribute-flags
       |        +--:(label)
       |           +--ro label-hop
       |              +--ro te-label
       |              |  +--ro (technology)?
       |              |  |  +--:(generic)
       |              |  |     +--ro generic?
       |              |  |             rt-types:generalized-label
       |              |  +--ro direction?       te-label-direction
       |              +--ro flags*      path-attribute-flags
       +--ro outgoing-record-route-subobjects
          +--ro outgoing-record-route-subobject* [index]
             +--ro index                        uint32
             +--ro (type)?



Beeram, et al.           Expires August 26, 2021                [Page 8]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


                +--:(numbered-node-hop)
                |  +--ro numbered-node-hop
                |     +--ro node-id    te-node-id
                |     +--ro flags*     path-attribute-flags
                +--:(numbered-link-hop)
                |  +--ro numbered-link-hop
                |     +--ro link-tp-id    te-tp-id
                |     +--ro flags*        path-attribute-flags
                +--:(unnumbered-link-hop)
                |  +--ro unnumbered-link-hop
                |     +--ro link-tp-id    te-tp-id
                |     +--ro node-id?      te-node-id
                |     +--ro flags*        path-attribute-flags
                +--:(label)
                   +--ro label-hop
                      +--ro te-label
                      |  +--ro (technology)?
                      |  |  +--:(generic)
                      |  |     +--ro generic?
                      |  |             rt-types:generalized-label
                      |  +--ro direction?       te-label-direction
                      +--ro flags*      path-attribute-flags
     augment /te:te/te-dev:interfaces/te-dev:interface:

                   Figure 2: RSVP-TE model Tree diagram

2.2.2.  RSVP-TE MPLS Model Tree Diagram

   Figure 5 shows the YANG tree diagram of the RSVP-TE MPLS YANG model
   defined in module ietf-rsvp-te-mpls.yang and that augments RSVP-TE
   module as well as RSVP and TE YANG modules.

   module: ietf-rsvp-te-mpls
     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/rsvp:rsvp:
       +--rw rsvp-frr-local-revert-delay?   uint32
     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/rsvp:rsvp/rsvp:interfaces:
     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/rsvp:rsvp/rsvp:interfaces
               /rsvp:interface:
     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/rsvp:rsvp/rsvp:sessions:
     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/rsvp:rsvp/rsvp:neighbors:
     augment /te:te/te:tunnels/te:tunnel:
       +--rw session-attribute*   identityref
     augment /te:te/te:lsps/te:lsp:



Beeram, et al.           Expires August 26, 2021                [Page 9]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


       +--ro session-attribute*   identityref
       +--ro backup-info
          +--ro backup-tunnel-name?         string
          +--ro backup-frr-on?              uint8
          +--ro backup-protected-lsp-num?   uint32
     augment /te:te/te:tunnels/te:tunnel/te:primary-paths
               /te:primary-path/te:lsps/te:lsp:
       +--ro session-attribute*   identityref
       +--ro backup-info
          +--ro backup-tunnel-name?         string
          +--ro backup-frr-on?              uint8
          +--ro backup-protected-lsp-num?   uint32
     augment /te:te/te:tunnels/te:tunnel/te:secondary-paths
               /te:secondary-path/te:lsps/te:lsp:
       +--ro session-attribute*   identityref
       +--ro backup-info
          +--ro backup-tunnel-name?         string
          +--ro backup-frr-on?              uint8
          +--ro backup-protected-lsp-num?   uint32
     augment /te:te/te-dev:interfaces/te-dev:interface:
       +--rw bandwidth-mpls-reservable
          +--rw (bandwidth-value)?
          |  +--:(absolute)
          |  |  +--rw absolute-value?   te-packet-types:bandwidth-kbps
          |  +--:(percentage)
          |     +--rw percent-value?    uint32
          +--rw (bc-model-type)?
             +--:(bc-model-rdm)
             |  +--rw bc-model-rdm
             |     +--rw bandwidth-mpls-constraints
             |        +--rw maximum-reservable?
             |        |       te-packet-types:bandwidth-kbps
             |        +--rw bc-value*             uint32
             +--:(bc-model-mam)
             |  +--rw bc-model-mam
             |     +--rw bandwidth-mpls-constraints
             |        +--rw maximum-reservable?
             |        |       te-packet-types:bandwidth-kbps
             |        +--rw bc-value*             uint32
             +--:(bc-model-mar)
                +--rw bc-model-mar
                   +--rw bandwidth-mpls-constraints
                      +--rw maximum-reservable?
                      |       te-packet-types:bandwidth-kbps
                      +--rw bc-value*             uint32
     augment /te:te/te-dev:interfaces/te-dev:interface:
       +--rw rsvp-te-frr-backups
          +--rw (type)?



Beeram, et al.           Expires August 26, 2021               [Page 10]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


             +--:(static-tunnel)
             |  +--rw static-backups
             |     +--rw static-backup* [backup-tunnel-name]
             |        +--rw backup-tunnel-name
             |                -> /te:te/tunnels/tunnel/name
             +--:(auto-tunnel)
                +--rw auto-tunnel-backups
                   +--rw auto-backup-protection?         identityref
                   +--rw auto-backup-path-computation?   identityref

                    Figure 3: RSVP-TE MPLS Tree diagram

2.3.  YANG Modules

2.3.1.  RSVP-TE YANG Module

   The RSVP-TE generic YANG module "ietf-rsvp-te" imports the following
   modules:

   o  ietf-rsvp defined in [I-D.ietf-teas-yang-rsvp]

   o  ietf-routing-types defined in [RFC8294]

   o  ietf-te-types defined in [I-D.ietf-teas-yang-te-types]

   o  ietf-te and ietf-te-dev defined in [I-D.ietf-teas-yang-te]

   This module references the following documents:
   [I-D.ietf-teas-yang-rsvp], [RFC8349], [I-D.ietf-teas-yang-te],
   [I-D.ietf-teas-yang-te-types], [RFC2210], [RFC4920], [RFC5420],
   [RFC7570], [RFC4859].

   <CODE BEGINS> file "ietf-rsvp-te@2021-02-21.yang"
   module ietf-rsvp-te {
     yang-version 1.1;
     namespace "urn:ietf:params:xml:ns:yang:ietf-rsvp-te";
     prefix rsvp-te;

     import ietf-rsvp {
       prefix rsvp;
       reference
         "draft-ietf-teas-yang-rsvp: A YANG Data Model for
          Resource Reservation Protocol (RSVP)";
     }
     import ietf-routing {
       prefix rt;
       reference
         "RFC8349: A YANG Data Model for Routing Management";



Beeram, et al.           Expires August 26, 2021               [Page 11]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


     }
     import ietf-routing-types {
       prefix rt-types;
       reference
         "RFC8294: Common YANG Data Types for the Routing Area";
     }
     import ietf-te {
       prefix te;
       reference
         "draft-ietf-teas-yang-te: A YANG Data Model for Traffic
          Engineering Tunnels and Interfaces";
     }
     import ietf-te-device {
       prefix te-dev;
       reference
         "draft-ietf-teas-yang-te: A YANG Data Model for Traffic
          Engineering Tunnels and Interfaces";
     }

     /* Import TE generic types */

     import ietf-te-types {
       prefix te-types;
       reference
         "RFC8776: Common YANG Data Types for Traffic Engineering.";
     }
     import ietf-inet-types {
       prefix inet;
       reference
         "RFC6991: Common YANG Data Types";
     }

     organization
       "IETF Traffic Engineering Architecture and Signaling (TEAS)
        Working Group";
     contact
       "WG Web:   <http://tools.ietf.org/wg/teas/>
        WG List:  <mailto:teas@ietf.org>

        Editor:   Vishnu Pavan Beeram
                  <mailto:vbeeram@juniper.net>

        Editor:   Tarek Saad
                  <mailto:tsaad.net@gmail.com>

        Editor:   Rakesh Gandhi
                  <mailto:rgandhi@cisco.com>




Beeram, et al.           Expires August 26, 2021               [Page 12]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


        Editor:   Xufeng Liu
                  <mailto: xufeng.liu.ietf@gmail.com>

        Editor:   Igor Bryskin
                  <mailto:Igor.Bryskin@huawei.com>

        Editor:   Himanshu Shah
                  <mailto:hshah@ciena.com>";
     description
       "This module contains the RSVP-TE YANG generic data model.
        The model fully conforms to the Network Management Datastore
        Architecture (NMDA).

        Copyright (c) 2018 IETF Trust and the persons
        identified as authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject
        to the license terms contained in, the Simplified BSD License
        set forth in Section 4.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (https://trustee.ietf.org/license-info).
        This version of this YANG module is part of RFC XXXX; see
        the RFC itself for full legal notices.";

     // RFC Ed.: replace XXXX with actual RFC number and remove this
     // note.
     // RFC Ed.: update the date below with the date of RFC publication
     // and remove this note.

     revision 2021-02-21 {
       description
         "A YANG Data Model for RSVP-TE";
       reference
         "RFCXXXX: A YANG Data Model for RSVP-TE Protocol";
     }

     identity rsvp-message-type {
       description
         "RSVP message types";
     }

     identity rsvp-message-path {
       base rsvp-message-type;
       description
         "RSVP Path message";
       reference
         "RFC2205";



Beeram, et al.           Expires August 26, 2021               [Page 13]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


     }

     identity rsvp-message-resv {
       base rsvp-message-type;
       description
         "RSVP Resv message";
       reference
         "RFC2205";
     }

     identity rsvp-message-path-err {
       base rsvp-message-type;
       description
         "RSVP Path-Err message";
       reference
         "RFC2205";
     }

     identity rsvp-message-resv-err {
       base rsvp-message-type;
       description
         "RSVP Resv-Err message";
       reference
         "RFC2205";
     }

     identity rsvp-message-path-tear {
       base rsvp-message-type;
       description
         "RSVP Path Tear message";
       reference
         "RFC2205";
     }

     identity rsvp-message-resv-conf {
       base rsvp-message-type;
       description
         "RSVP Resv Confirm message";
       reference
         "RFC2205";
     }

     identity rsvp-message-srefresh {
       base rsvp-message-type;
       description
         "RSVP SRefresh message";
       reference
         "RFC2961";



Beeram, et al.           Expires August 26, 2021               [Page 14]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


     }

     identity rsvp-message-hello {
       base rsvp-message-type;
       description
         "RSVP Hello message";
       reference
         "RFC3209";
     }

     identity rsvp-message-bundle {
       base rsvp-message-type;
       description
         "RSVP Bundle message";
       reference
         "RFC2961";
     }

     identity rsvp-message-notify {
       base rsvp-message-type;
       description
         "RSVP Notify message";
       reference
         "RFC3473";
     }

     /**
      * RSVP-TE LSPs groupings.
      */

     grouping lsp-record-route-information-state {
       description
         "recorded route information grouping";
       container incoming-record-route-subobjects {
         description
           "RSVP recorded route object incoming information";
         list incoming-record-route-subobject {
           when "../../te:origin-type != 'ingress'" {
             description
               "Applicable on non-ingress LSPs only";
           }
           key "index";
           ordered-by user;
           description
             "List of RSVP Path record-route objects";
           uses te-types:record-route-state;
         }
       }



Beeram, et al.           Expires August 26, 2021               [Page 15]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


       container outgoing-record-route-subobjects {
         description
           "RSVP recorded route object outgoing information";
         list outgoing-record-route-subobject {
           when "../../te:origin-type != 'egress'" {
             description
               "Applicable on non-egress LSPs only";
           }
           key "index";
           ordered-by user;
           description
             "List of RSVP Resv record-route objects";
           uses te-types:record-route-state;
         }
       }
     }

     grouping lsp-explicit-route-information-state {
       description
         "RSVP-TE LSP explicit-route information";
       container explicit-route-objects {
         description
           "Explicit route object information";
         list incoming-explicit-route-hop {
           when "../../te:origin-type != 'ingress'" {
             description
               "Applicable on non-ingress LSPs only";
           }
           key "index";
           ordered-by user;
           description
             "List of incoming RSVP Path explicit-route objects";
           leaf index {
             type uint32;
             description
               "Explicit route hop index. The index is used to
                identify an entry in the list. The order of entries
                is defined by the user without relying on key values";
           }
           uses te-types:explicit-route-hop;
         }
         list outgoing-explicit-route-hop {
           when "../../te:origin-type != 'egress'" {
             description
               "Applicable on non-egress LSPs only";
           }
           key "index";
           ordered-by user;



Beeram, et al.           Expires August 26, 2021               [Page 16]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


           description
             "List of outgoing RSVP Path explicit-route objects";
           leaf index {
             type uint32;
             description
               "Explicit route hop index. The index is used to
                identify an entry in the list. The order of entries
                is defined by the user without relying on key values";
           }
           uses te-types:explicit-route-hop;
         }
       }
     }

     grouping lsp-attributes-flags {
       description
         "Configuration parameters relating to RSVP-TE LSP
          attribute flags";
       leaf-list lsp-attribute {
         type identityref {
           base te-types:lsp-attributes-flags;
         }
         description
           "RSVP per LSP attributes flags";
         reference
           "RFC4920, RFC5420, RFC7570";
       }
     }

     grouping lsp-session-attributes-obj-flags {
       description
         "Configuration parameters relating to RSVP-TE LSP
          session attribute flags";
       reference
         "RFC4859: Registry for RSVP-TE Session Flags";
       leaf-list session-attribute {
         when "../session-attribute !=
               'te-types:bandwidth-protection-desired' or
               ../session-attribute !=
               'te-types:soft-preemption-desired'" {
           description
             "Session attributes applicable to generic technologies
              only.";
         }
         type identityref {
           base te-types:session-attributes-flags;
         }
         description



Beeram, et al.           Expires August 26, 2021               [Page 17]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


           "RSVP session attributes flags";
         reference
           "RFC4859: Registry for RSVP-TE Session Flags";
       }
     }

     grouping lsp-properties {
       description
         "Configuration parameters relating to RSVP-TE LSP
          session attribute flags";
       leaf lsp-signaled-name {
         type string;
         description
           "Sets the session name to use in the session
            attribute object.";
       }
       uses lsp-session-attributes-obj-flags;
       uses lsp-attributes-flags;
     }

     grouping tunnel-properties {
       description
         "RSVP-TE Tunnel properties grouping";
       leaf retry-timer {
         type uint16 {
           range "1..600";
         }
         units "seconds";
         description
           "sets the time between attempts to establish the
            LSP";
       }
     }

     /*** End of RSVP-TE LSP groupings ***/
     /**
      * RSVP-TE generic global properties.
      */

     grouping global-soft-preemption {
       description
         "Configuration for global RSVP-TE soft preemption";
       container global-soft-preemption {
         presence "Enables soft preemption on a node.";
         description
           "Top level container for RSVP-TE soft-preemption";
         leaf soft-preemption-timeout {
           type uint16 {



Beeram, et al.           Expires August 26, 2021               [Page 18]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


             range "0..300";
           }
           units "seconds";
           default "0";
           description
             "Timeout value for soft preemption to revert
              to hard preemption";
         }
       }
     }

     /*** End of RSVP-TE generic global properties. ***/
     /**
      * RSVP-TE interface generic groupings.
      */

     grouping rsvp-te-interface-attributes {
       description
         "Top level grouping for RSVP-TE interface properties.";
       container rsvp-te-interface-attributes {
         description
           "Top level container for RSVP-TE interface
            properties";
       }
     }

     /*** End of RSVP-TE generic groupings ***/
     /* RSVP-TE global properties */

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol/rsvp:rsvp" {
       description
         "RSVP-TE augmentation to RSVP globals";
       uses global-soft-preemption;
     }

     /* Linkage to the base RSVP all links */

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol/rsvp:rsvp/rsvp:interfaces" {
       description
         "RSVP-TE generic data augmentation pertaining to interfaces";
       uses rsvp-te-interface-attributes;
     }

     /* Linkage to per RSVP interface */

     augment "/rt:routing/rt:control-plane-protocols/"



Beeram, et al.           Expires August 26, 2021               [Page 19]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


           + "rt:control-plane-protocol/rsvp:rsvp/rsvp:interfaces/"
           + "rsvp:interface" {
       description
         "RSVP-TE generic data augmentation pertaining to specific
          interface";
       uses rsvp-te-interface-attributes;
     }

     /* add augmentation for sessions and neighbors */

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol/rsvp:rsvp/"
           + "rsvp:sessions" {
       description
         "RSVP-TE generic data augmentation pertaining to session";
       list session-te {
         key "tunnel-endpoint tunnel-id extended-tunnel-id";
         config false;
         description
           "List of RSVP sessions";
         leaf tunnel-endpoint {
           type inet:ip-address;
           description
             "XX";
         }
         leaf tunnel-id {
           type uint16;
           description
             "XX";
         }
         leaf extended-tunnel-id {
           type inet:ip-address;
           description
             "XX";
         }
         uses rsvp:session-attributes;
       }
     }

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol/rsvp:rsvp/"
           + "rsvp:sessions/session-te/psbs/psb" {
       description
         "RSVP-TE generic data augmentation pertaining to session";
       /* To be added */
       leaf tspec-average-rate {
         type rt-types:bandwidth-ieee-float32;
         units "Bytes per second";



Beeram, et al.           Expires August 26, 2021               [Page 20]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


         description
           "Tspec Token Bucket Average Rate";
         reference
           "RFC2210: RSVP with INTSERV";
       }
       leaf tspec-size {
         type rt-types:bandwidth-ieee-float32;
         units "Bytes per second";
         description
           "Tspec Token Bucket Burst Rate";
         reference
           "RFC2210";
       }
       leaf tspec-peak-rate {
         type rt-types:bandwidth-ieee-float32;
         units "Bytes per second";
         description
           "Tspec Token Bucket Peak Data Rate";
         reference
           "RFC2210";
       }
       leaf min-policed-unit {
         type uint32;
         description
           "Tspec Minimum Policed Unit";
         reference
           "RFC2210";
       }
       leaf max-packet-size {
         type uint32;
         description
           "Tspec Maximum Packet Size";
         reference
           "RFC2210";
       }
     }

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol/rsvp:rsvp/"
           + "rsvp:sessions/session-te/rsbs/rsb" {
       description
         "RSVP-TE generic data augmentation pertaining to session";
       leaf fspec-average-rate {
         type rt-types:bandwidth-ieee-float32;
         units "Bytes per second";
         description
           "Fspec Token Bucket Average Rate";
         reference



Beeram, et al.           Expires August 26, 2021               [Page 21]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


           "RFC2210";
       }
       leaf fspec-size {
         type rt-types:bandwidth-ieee-float32;
         units "Bytes per second";
         description
           "Fspec Token Bucket Burst Rate";
         reference
           "RFC2210";
       }
       leaf fspec-peak-rate {
         type rt-types:bandwidth-ieee-float32;
         units "Bytes per second";
         description
           "Fspec Token Bucket Peak Data Rate";
         reference
           "RFC2210";
       }
       leaf min-policed-unit {
         type uint32;
         description
           "Fspec Minimum Policed Unit";
         reference
           "RFC2210";
       }
       leaf max-packet-size {
         type uint32;
         description
           "Fspec Maximum Packet Size";
         reference
           "RFC2210";
       }
     }

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol/rsvp:rsvp/rsvp:neighbors" {
       description
         "RSVP-TE generic data augmentation pertaining to neighbors";
       /* To be added */
     }

     /**
      * RSVP-TE generic augmentations of generic TE model.
      */
     /* TE tunnel augmentation */

     augment "/te:te/te:tunnels/te:tunnel" {
       when "/te:te/te:tunnels/te:tunnel"



Beeram, et al.           Expires August 26, 2021               [Page 22]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


          + "/te:primary-paths/te:primary-path"
          + "/te:signaling-type = 'te-types:path-setup-rsvp'" {
         description
           "When the path signaling protocol is RSVP-TE ";
       }
       description
         "RSVP-TE generic data augmentation pertaining to TE tunnels";
       uses lsp-properties;
       uses tunnel-properties;
     }

     /* TE LSP augmentation */

     grouping rsvp-te-lsp-error-info {
       description
         "Grouping for RSVP-TE error reporting information";
       leaf rsvp-message-type {
         type identityref {
           base rsvp-message-type;
         }
         description
           "The RSVP message type that delivered the error";
       }
       leaf rsvp-error-code {
         type uint8;
         description
           "RSVP error code";
         reference
           "RFC2205";
       }
       leaf rsvp-error-subcode {
         type uint16;
         description
           "RSVP Error sub-codes";
         reference
           "RFC2205";
       }
     }

     augment "/te:te/te:lsps/te:lsp" {
       when "/te:te/te:lsps/te:lsp"
          + "/te:signaling-type = 'te-types:path-setup-rsvp'" {
         description
           "When the signaling protocol is RSVP-TE ";
       }
       description
         "RSVP-TE generic data augmentation pertaining to specific TE
          LSP";



Beeram, et al.           Expires August 26, 2021               [Page 23]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


       leaf associated-rsvp-session {
         type leafref {
           path "/rt:routing/rt:control-plane-protocols/"
              + "rt:control-plane-protocol/rsvp:rsvp/"
              + "rsvp:sessions/session-te/tunnel-id";
         }
         config false;
         description
           "If the signalling protocol specified for this path is
            RSVP-TE, this leaf provides a reference to the associated
            session within the RSVP-TE protocol sessions list, such
            that details of the signaling can be retrieved.";
       }
       uses lsp-properties;
       uses rsvp-te-lsp-error-info;
       uses lsp-explicit-route-information-state;
       uses lsp-record-route-information-state;
     }

     /* TE interface augmentation */

     augment "/te:te/te-dev:interfaces/te-dev:interface" {
       description
         "RSVP-TE generic data augmentation pertaining to specific TE
          interface";
     }
   }
   <CODE ENDS>

                   Figure 4: RSVP TE generic YANG module

2.3.2.  RSVP-TE MPLS YANG Module

   The RSVP-TE MPLS YANG module "ietf-rsvp-te-mpls" imports the
   following module(s):

   o  ietf-rsvp defined in [I-D.ietf-teas-yang-rsvp]

   o  ietf-routing-types defined in [RFC8294]

   o  ietf-te-mpls-types defined in [I-D.ietf-teas-yang-te-types]

   o  ietf-te and ietf-te-dev defined in [I-D.ietf-teas-yang-te]

   This module references the following documents:
   [I-D.ietf-teas-yang-rsvp], [RFC8349], [I-D.ietf-teas-yang-te-types],
   [I-D.ietf-teas-yang-te], [RFC3209].




Beeram, et al.           Expires August 26, 2021               [Page 24]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


   <CODE BEGINS> file "ietf-rsvp-te-mpls@2021-02-21.yang"
   module ietf-rsvp-te-mpls {
     yang-version 1.1;
     namespace "urn:ietf:params:xml:ns:yang:ietf-rsvp-te-mpls";
     prefix rsvp-te-mpls;

     import ietf-rsvp {
       prefix rsvp;
       reference
         "draft-ietf-teas-yang-rsvp: A YANG Data Model for
          Resource Reservation Protocol (RSVP)";
     }
     import ietf-routing {
       prefix rt;
       reference
         "RFC8349: A YANG Data Model for Routing Management";
     }
     import ietf-te-packet-types {
       prefix te-packet-types;
       reference
         "RFC8776: Common YANG Data Types for Traffic Engineering.";
     }
     import ietf-te-types {
       prefix te-types;
       reference
         "RFC8776: Common YANG Data Types for Traffic Engineering.";
     }
     import ietf-te {
       prefix te;
       reference
         "draft-ietf-teas-yang-te: A YANG Data Model for Traffic
          Engineering Tunnels and Interfaces";
     }
     import ietf-te-device {
       prefix te-dev;
       reference
         "draft-ietf-teas-yang-te: A YANG Data Model for Traffic
          Engineering Tunnels and Interfaces";
     }

     organization
       "IETF Traffic Engineering Architecture and Signaling (TEAS)
        Working Group";
     contact
       "WG Web:   <http://tools.ietf.org/wg/teas/>
        WG List:  <mailto:teas@ietf.org>

        Editor:   Vishnu Pavan Beeram



Beeram, et al.           Expires August 26, 2021               [Page 25]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


                  <mailto:vbeeram@juniper.net>

        Editor:   Tarek Saad
                  <mailto:tsaad.net@gmail.com>

        Editor:   Rakesh Gandhi
                  <mailto:rgandhi@cisco.com>

        Editor:   Xufeng Liu
                  <mailto: xufeng.liu.ietf@gmail.com>

        Editor:   Igor Bryskin
                  <mailto:Igor.Bryskin@huawei.com>

        Editor:   Himanshu Shah
                  <mailto:hshah@ciena.com>";
     description
       "Latest update to MPLS RSVP-TE YANG data model.
        The model fully conforms to the Network Management Datastore
        Architecture (NMDA).

        Copyright (c) 2018 IETF Trust and the persons
        identified as authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject
        to the license terms contained in, the Simplified BSD License
        set forth in Section 4.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (https://trustee.ietf.org/license-info).
        This version of this YANG module is part of RFC XXXX; see
        the RFC itself for full legal notices.";

     // RFC Ed.: replace XXXX with actual RFC number and remove this
     // note.
     // RFC Ed.: update the date below with the date of RFC publication
     // and remove this note.

     revision 2021-02-21 {
       description
         "Update to MPLS RSVP-TE YANG initial revision.";
       reference
         "RFCXXXX: A YANG Data Model for RSVP-TE Protocol";
     }

     /* RSVP-TE MPLS LSPs groupings */

     grouping lsp-attributes-flags-mpls {



Beeram, et al.           Expires August 26, 2021               [Page 26]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


       description
         "Configuration parameters relating to RSVP-TE MPLS LSP
          attribute flags";
     }

     grouping lsp-session-attributes-obj-flags-mpls {
       description
         "Configuration parameters relating to RSVP-TE MPLS LSP
          session attribute flags";
       reference
         "RFC4859: Registry for RSVP-TE Session Flags";
       leaf-list session-attribute {
         when "../session-attribute =
               'te-types:bandwidth-protection-desired' or
               ../session-attribute =
               'te-types:soft-preemption-desired'" {
           description
             "Session attributes applicable to mpls technology";
         }
         type identityref {
           base te-types:session-attributes-flags;
         }
         description
           "RSVP session attributes flags";
         reference
           "RFC4859: Registry for RSVP-TE Session Flags";
       }
     }

     grouping tunnel-properties-mpls {
       description
         "Top level grouping for LSP properties.";
       uses lsp-session-attributes-obj-flags-mpls;
       uses lsp-attributes-flags-mpls;
     }

     grouping lsp-properties-mpls {
       description
         "Top level grouping for LSP properties.";
       uses lsp-session-attributes-obj-flags-mpls;
       uses lsp-attributes-flags-mpls;
     }

     /* End of RSVP-TE MPLS LSPs groupings */
     /* MPLS RSVP-TE interface groupings */

     grouping rsvp-te-interface-state {
       description



Beeram, et al.           Expires August 26, 2021               [Page 27]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


         "The RSVP-TE interface state grouping";
       leaf over-subscribed-bandwidth {
         type te-packet-types:bandwidth-kbps;
         description
           "The amount of over-subscribed bandwidth on
            the interface";
       }
     }

     grouping rsvp-te-interface-softpreemption-state {
       description
         "The RSVP-TE interface preeemptions state grouping";
       container interface-softpreemption-state {
         description
           "The RSVP-TE interface preeemptions state grouping";
         leaf soft-preempted-bandwidth {
           type te-packet-types:bandwidth-kbps;
           description
             "The amount of soft-preempted bandwidth on
              this interface";
         }
         list lsps {
           key "source destination tunnel-id lsp-id "
             + "extended-tunnel-id";
           description
             "List of LSPs that are soft-preempted";
           leaf source {
             type leafref {
               path "/te:te/te:lsps/te:lsp/"
                  + "te:source";
             }
             description
               "Tunnel sender address extracted from
                SENDER_TEMPLATE  object";
             reference
               "RFC3209";
           }
           leaf destination {
             type leafref {
               path "/te:te/te:lsps/te:lsp/"
                  + "te:destination";
             }
             description
               "Tunnel endpoint address extracted from
                SESSION object";
             reference
               "RFC3209";
           }



Beeram, et al.           Expires August 26, 2021               [Page 28]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


           leaf tunnel-id {
             type leafref {
               path "/te:te/te:lsps/te:lsp/"
                  + "te:tunnel-id";
             }
             description
               "Tunnel identifier used in the SESSION
                that remains constant over the life
                of the tunnel.";
             reference
               "RFC3209";
           }
           leaf lsp-id {
             type leafref {
               path "/te:te/te:lsps/te:lsp/"
                  + "te:lsp-id";
             }
             description
               "Identifier used in the SENDER_TEMPLATE
                and the FILTER_SPEC that can be changed
                to allow a sender to share resources with
                itself.";
             reference
               "RFC3209";
           }
           leaf extended-tunnel-id {
             type leafref {
               path "/te:te/te:lsps/te:lsp/"
                  + "te:extended-tunnel-id";
             }
             description
               "Extended Tunnel ID of the LSP.";
             reference
               "RFC3209";
           }
           leaf type {
             type leafref {
               path "/te:te/te:lsps/te:lsp/"
                  + "te:type";
             }
             description
               "LSP type P2P or P2MP";
           }
         }
       }
     }

     grouping bandwidth-mpls-constraints {



Beeram, et al.           Expires August 26, 2021               [Page 29]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


       description
         "Bandwidth constraints.";
       container bandwidth-mpls-constraints {
         description
           "Holds the bandwidth constraints properties";
         leaf maximum-reservable {
           type te-packet-types:bandwidth-kbps;
           description
             "The maximum reservable bandwidth on the
              interface in kbps";
         }
         leaf-list bc-value {
           type uint32 {
             range "0..4294967295";
           }
           max-elements 8;
           description
             "The bandwidth constraint type";
         }
       }
     }

     grouping bandwidth-constraint-values {
       description
         "Packet bandwidth contraints values";
       choice value-type {
         description
           "Value representation";
         case percentages {
           container perc-values {
             uses bandwidth-mpls-constraints;
             description
               "Percentage values";
           }
         }
         case absolutes {
           container abs-values {
             uses bandwidth-mpls-constraints;
             description
               "Absolute values";
           }
         }
       }
     }

     grouping bandwidth-mpls-reservable {
       description
         "Interface bandwidth reservable configuration grouping";



Beeram, et al.           Expires August 26, 2021               [Page 30]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


       container bandwidth-mpls-reservable {
         description
           "Interface bandwidth reservable container";
         choice bandwidth-value {
           description
             "Reservable bandwidth configuration choice";
           case absolute {
             leaf absolute-value {
               type te-packet-types:bandwidth-kbps;
               description
                 "Absolute value of the bandwidth";
             }
           }
           case percentage {
             leaf percent-value {
               type uint32 {
                 range "0..4294967295";
               }
               description
                 "Percentage reservable bandwidth";
             }
             description
               "The maximum reservable bandwidth on the
                interface";
           }
         }
         choice bc-model-type {
           description
             "Reservable bandwidth percentage capacity
              values.";
           case bc-model-rdm {
             container bc-model-rdm {
               description
                 "Russian Doll Model Bandwidth Constraints.";
               uses bandwidth-mpls-constraints;
             }
           }
           case bc-model-mam {
             container bc-model-mam {
               uses bandwidth-mpls-constraints;
               description
                 "Maximum Allocation Model Bandwidth
                  Constraints.";
             }
           }
           case bc-model-mar {
             container bc-model-mar {
               uses bandwidth-mpls-constraints;



Beeram, et al.           Expires August 26, 2021               [Page 31]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


               description
                 "Maximum Allocation with Reservation Model
                  Bandwidth Constraints.";
             }
           }
         }
       }
     }

     /* End of RSVP-TE interface groupings */
     /* RSVP-TE FRR groupings */

     grouping rsvp-te-frr-auto-tunnel-backup {
       description
         "Auto-tunnel backup configuration grouping";
       leaf auto-backup-protection {
         type identityref {
           base te-packet-types:backup-protection-type;
         }
         default "te-packet-types:backup-protection-node-link";
         description
           "Describes whether the backup should offer
            protection against link, node, or either";
       }
       leaf auto-backup-path-computation {
         type identityref {
           base te-types:path-computation-srlg-type;
         }
         description
           "FRR backup computation type";
       }
     }

     grouping rsvp-te-frr-backups {
       description
         "Top level container for RSVP-TE FRR backup parameters";
       container rsvp-te-frr-backups {
         description
           "RSVP-TE facility backup properties";
           choice type {
             description
               "FRR backup tunnel type";
             case static-tunnel {
               container static-backups {
                 description
                   "List of static backups";
                 list static-backup {
                   key "backup-tunnel-name";



Beeram, et al.           Expires August 26, 2021               [Page 32]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


                   description
                     "List of static backup tunnels that
                      protect the RSVP-TE interface.";
                   leaf backup-tunnel-name {
                     type leafref {
                       path "/te:te/te:tunnels/te:tunnel/te:name";
                     }
                     description
                       "FRR Backup tunnel name";
                   }
                 }
               }
             }
             case auto-tunnel {
               container auto-tunnel-backups {
                 description
                   "Auto-tunnel choice";
                 uses rsvp-te-frr-auto-tunnel-backup;
               }
             }
           }
       }
     }

     grouping lsp-backup-info-state {
       description
         "LSP backup information grouping";
       leaf backup-tunnel-name {
         type string;
         description
           "If an LSP has an FRR backup LSP that can protect it,
            this field identifies the tunnel name of the backup LSP.
            Otherwise, this field is empty.";
       }
       leaf backup-frr-on {
         type uint8;
         description
           "Whether currently this backup is carrying traffic";
       }
       leaf backup-protected-lsp-num {
         type uint32;
         description
           "Number of LSPs protected by this backup";
       }
     }

     grouping lsp-backup-info {
       description



Beeram, et al.           Expires August 26, 2021               [Page 33]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


         "Backup/bypass LSP related information";
       container backup-info {
         description
           "backup information";
         uses lsp-backup-info-state;
       }
     }

     /*** End of RSVP-TE FRR backup information ***/

     /* RSVP-TE global properties */

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol/rsvp:rsvp" {
       description
         "RSVP-TE augmentation to RSVP globals";
       leaf rsvp-frr-local-revert-delay {
         type uint32;
         description
           "Time to wait after primary link is restored
            before node attempts local revertive
            procedures.";
       }
     }

     /* Linkage to the base RSVP all interfaces */

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol/rsvp:rsvp/rsvp:interfaces" {
       description
         "Augmentations for RSVP-TE MPLS all interfaces properties";
       /* To be added */
     }

     /* Linkage to per RSVP interface */

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol/rsvp:rsvp/rsvp:interfaces/"
           + "rsvp:interface" {
       description
         "Augmentations for RSVP-TE MPLS per interface properties";
       /* To be added */
     }

     /* add augmentation for sessions neighbors */

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol/rsvp:rsvp/"



Beeram, et al.           Expires August 26, 2021               [Page 34]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


           + "rsvp:sessions" {
       description
         "Augmentation for RSVP-TE MPLS sessions";
       /* To be added */
     }

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol/rsvp:rsvp/rsvp:neighbors" {
       description
         "Augmentations for RSVP-TE MPLS neighbors properties";
       /* To be added */
     }

     /**
      * Augmentation to TE generic module
      */

     augment "/te:te/te:tunnels/te:tunnel" {
       description
         "Augmentations for RSVP-TE MPLS TE tunnel properties";
       uses tunnel-properties-mpls;
     }

     augment "/te:te/te:lsps/te:lsp" {
       when "/te:te/te:lsps/te:lsp"
          + "/te:signaling-type = 'te-types:path-setup-rsvp'" {
         description
           "When the signaling protocol is RSVP-TE ";
       }
       description
         "RSP-TE MPLS LSP state properties";
       uses lsp-properties-mpls;
       uses lsp-backup-info;
     }

     augment "/te:te/te:tunnels/te:tunnel/te:primary-paths"
           + "/te:primary-path/te:lsps/te:lsp" {
       when "/te:te/te:tunnels/te:tunnel"
          + "/te:secondary-paths/te:secondary-path/"
          + "te:signaling-type = 'te-types:path-setup-rsvp'" {
         description
           "When the signaling protocol is RSVP-TE ";
       }
       description
         "RSVP-TE MPLS LSP state properties";
       uses lsp-properties-mpls;
       uses lsp-backup-info;
     }



Beeram, et al.           Expires August 26, 2021               [Page 35]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


     augment "/te:te/te:tunnels/te:tunnel/te:secondary-paths"
           + "/te:secondary-path/te:lsps/te:lsp" {
       when "/te:te/te:tunnels/te:tunnel"
          + "/te:secondary-paths/te:secondary-path/"
          + "te:signaling-type = 'te-types:path-setup-rsvp'" {
         description
           "When the signaling protocol is RSVP-TE ";
       }
       description
         "RSVP-TE MPLS LSP state properties";
       uses lsp-properties-mpls;
       uses lsp-backup-info;
     }

     augment "/te:te/te-dev:interfaces/te-dev:interface" {
       description
         "RSVP reservable bandwidth configuration properties";
       uses bandwidth-mpls-reservable;
     }

     augment "/te:te/te-dev:interfaces/te-dev:interface" {
       description
         "RSVP reservable bandwidth configuration properties";
       uses rsvp-te-frr-backups;
     }
   }
   <CODE ENDS>

                    Figure 5: RSVP TE MPLS YANG module

3.  IANA Considerations

   This document registers the following URIs in the IETF XML registry
   [RFC3688].  Following the format in [RFC3688], the following
   registration is requested to be made.

      URI: urn:ietf:params:xml:ns:yang:ietf-rsvp-te
      Registrant Contact:  The IESG.
      XML: N/A, the requested URI is an XML namespace.

      URI: urn:ietf:params:xml:ns:yang:ietf-rsvp-te-mpls
      Registrant Contact:  The IESG.
      XML: N/A, the requested URI is an XML namespace.

   This document registers two YANG modules in the YANG Module Names
   registry [RFC6020].





Beeram, et al.           Expires August 26, 2021               [Page 36]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


      name:       ietf-rsvp-te
      namespace:  urn:ietf:params:xml:ns:yang:ietf-rsvp-te
      prefix:     rsvp-te
      reference:  RFCXXXX

      name:       ietf-rsvp-te-mpls
      namespace:  urn:ietf:params:xml:ns:yang:ietf-rsvp-te-mpls
      prefix:     rsvp-te-mpls
      reference:  RFCXXXX

4.  Security Considerations

   The YANG module defined in this memo is designed to be accessed via
   the NETCONF protocol [RFC6241].  The lowest NETCONF layer is the
   secure transport layer and the mandatory-to-implement secure
   transport is SSH [RFC6242].  The NETCONF access control model
   [RFC8341] provides means to restrict access for particular NETCONF
   users to a pre-configured subset of all available NETCONF protocol
   operations and content.

   There are a number of data nodes defined in the YANG module(s)
   defined in this document which are writable/creatable/deletable
   (i.e., config true, which is the default).  These data nodes may be
   considered sensitive or vulnerable in some network environments.
   Write operations (e.g., <edit-config>) to these data nodes without
   proper protection can have a negative effect on network operations.

   /rt:routing/rt:control-plane-protocols/rt:control-plane-
   protocol/rsvp:rsvp/globals: The data nodes defined defined in this
   document and under this branch are applicable device-wide and can
   affect all RSVP established sessions.  Unauthorized access to this
   container can potentially cause disruptive event(s) on all
   established sessions.

   /rt:routing/rt:control-plane-protocols/rt:control-plane-protocol/
   rsvp:rsvp/rsvp:globals/rsvp:sessions: The data nodes defined in this
   document and under this branch are applicable to one or all RSVP-TE
   session(s).  Unauthorized access to this container can potentially
   affect the impacted RSVP session(s).

   /rt:routing/rt:control-plane-protocols/rt:control-plane-
   protocol/rsvp:rsvp/rsvp:interfaces: The data nodes defined defined in
   this document and under this branch are applicable to one or all RSVP
   interfaces.  Unauthorized access to this container can potentially
   affect established session(s) over impacted interface(s).






Beeram, et al.           Expires August 26, 2021               [Page 37]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


5.  Acknowledgement

   The authors would like to thank Lou Berger for reviewing and
   providing valuable feedback on this document.

6.  Contributors

      Xia Chen
      Huawei Technologies

      Email: jescia.chenxia@huawei.com


      Raqib Jones
      Brocade

      Email: raqib@Brocade.com


      Bin Wen
      Comcast

      Email: Bin_Wen@cable.comcast.com


7.  References

7.1.  Normative References

   [I-D.ietf-teas-yang-rsvp]
              Beeram, V., Saad, T., Gandhi, R., Liu, X., and I. Bryskin,
              "A YANG Data Model for Resource Reservation Protocol
              (RSVP)", draft-ietf-teas-yang-rsvp-15 (work in progress),
              September 2020.

   [I-D.ietf-teas-yang-te]
              Saad, T., Gandhi, R., Liu, X., Beeram, V., and I. Bryskin,
              "A YANG Data Model for Traffic Engineering Tunnels, Label
              Switched Paths and Interfaces", draft-ietf-teas-yang-te-25
              (work in progress), July 2020.

   [I-D.ietf-teas-yang-te-types]
              Saad, T., Gandhi, R., Liu, X., Beeram, V., and I. Bryskin,
              "Traffic Engineering Common YANG Types", draft-ietf-teas-
              yang-te-types-13 (work in progress), November 2019.






Beeram, et al.           Expires August 26, 2021               [Page 38]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC2205]  Braden, R., Ed., Zhang, L., Berson, S., Herzog, S., and S.
              Jamin, "Resource ReSerVation Protocol (RSVP) -- Version 1
              Functional Specification", RFC 2205, DOI 10.17487/RFC2205,
              September 1997, <https://www.rfc-editor.org/info/rfc2205>.

   [RFC3688]  Mealling, M., "The IETF XML Registry", BCP 81, RFC 3688,
              DOI 10.17487/RFC3688, January 2004,
              <https://www.rfc-editor.org/info/rfc3688>.

   [RFC6020]  Bjorklund, M., Ed., "YANG - A Data Modeling Language for
              the Network Configuration Protocol (NETCONF)", RFC 6020,
              DOI 10.17487/RFC6020, October 2010,
              <https://www.rfc-editor.org/info/rfc6020>.

   [RFC6241]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", RFC 6241, DOI 10.17487/RFC6241, June 2011,
              <https://www.rfc-editor.org/info/rfc6241>.

   [RFC6242]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", RFC 6242, DOI 10.17487/RFC6242, June 2011,
              <https://www.rfc-editor.org/info/rfc6242>.

   [RFC6991]  Schoenwaelder, J., Ed., "Common YANG Data Types",
              RFC 6991, DOI 10.17487/RFC6991, July 2013,
              <https://www.rfc-editor.org/info/rfc6991>.

   [RFC7950]  Bjorklund, M., Ed., "The YANG 1.1 Data Modeling Language",
              RFC 7950, DOI 10.17487/RFC7950, August 2016,
              <https://www.rfc-editor.org/info/rfc7950>.

   [RFC8040]  Bierman, A., Bjorklund, M., and K. Watsen, "RESTCONF
              Protocol", RFC 8040, DOI 10.17487/RFC8040, January 2017,
              <https://www.rfc-editor.org/info/rfc8040>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8294]  Liu, X., Qu, Y., Lindem, A., Hopps, C., and L. Berger,
              "Common YANG Data Types for the Routing Area", RFC 8294,
              DOI 10.17487/RFC8294, December 2017,
              <https://www.rfc-editor.org/info/rfc8294>.



Beeram, et al.           Expires August 26, 2021               [Page 39]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


   [RFC8340]  Bjorklund, M. and L. Berger, Ed., "YANG Tree Diagrams",
              BCP 215, RFC 8340, DOI 10.17487/RFC8340, March 2018,
              <https://www.rfc-editor.org/info/rfc8340>.

   [RFC8341]  Bierman, A. and M. Bjorklund, "Network Configuration
              Access Control Model", STD 91, RFC 8341,
              DOI 10.17487/RFC8341, March 2018,
              <https://www.rfc-editor.org/info/rfc8341>.

   [RFC8349]  Lhotka, L., Lindem, A., and Y. Qu, "A YANG Data Model for
              Routing Management (NMDA Version)", RFC 8349,
              DOI 10.17487/RFC8349, March 2018,
              <https://www.rfc-editor.org/info/rfc8349>.

7.2.  Informative References

   [RFC2210]  Wroclawski, J., "The Use of RSVP with IETF Integrated
              Services", RFC 2210, DOI 10.17487/RFC2210, September 1997,
              <https://www.rfc-editor.org/info/rfc2210>.

   [RFC3209]  Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan, V.,
              and G. Swallow, "RSVP-TE: Extensions to RSVP for LSP
              Tunnels", RFC 3209, DOI 10.17487/RFC3209, December 2001,
              <https://www.rfc-editor.org/info/rfc3209>.

   [RFC4859]  Farrel, A., "Codepoint Registry for the Flags Field in the
              Resource Reservation Protocol-Traffic Engineering (RSVP-
              TE) Session Attribute Object", RFC 4859,
              DOI 10.17487/RFC4859, April 2007,
              <https://www.rfc-editor.org/info/rfc4859>.

   [RFC4920]  Farrel, A., Ed., Satyanarayana, A., Iwata, A., Fujita, N.,
              and G. Ash, "Crankback Signaling Extensions for MPLS and
              GMPLS RSVP-TE", RFC 4920, DOI 10.17487/RFC4920, July 2007,
              <https://www.rfc-editor.org/info/rfc4920>.

   [RFC5420]  Farrel, A., Ed., Papadimitriou, D., Vasseur, JP., and A.
              Ayyangar, "Encoding of Attributes for MPLS LSP
              Establishment Using Resource Reservation Protocol Traffic
              Engineering (RSVP-TE)", RFC 5420, DOI 10.17487/RFC5420,
              February 2009, <https://www.rfc-editor.org/info/rfc5420>.

   [RFC7570]  Margaria, C., Ed., Martinelli, G., Balls, S., and B.
              Wright, "Label Switched Path (LSP) Attribute in the
              Explicit Route Object (ERO)", RFC 7570,
              DOI 10.17487/RFC7570, July 2015,
              <https://www.rfc-editor.org/info/rfc7570>.




Beeram, et al.           Expires August 26, 2021               [Page 40]

Internet-Draft      RSVP-TE Protocol YANG Data Model       February 2021


Authors' Addresses

   Vishnu Pavan Beeram
   Juniper Networks

   Email: vbeeram@juniper.net


   Tarek Saad
   Juniper Networks

   Email: tsaad@juniper.net


   Rakesh Gandhi
   Cisco Systems, Inc.

   Email: rgandhi@cisco.com


   Xufeng Liu
   Volta Networks

   Email: xufeng.liu.ietf@gmail.com


   Igor Bryskin
   Huawei Technologies

   Email: Igor.Bryskin@huawei.com


   Himanshu Shah
   Ciena

   Email: hshah@ciena.com















Beeram, et al.           Expires August 26, 2021               [Page 41]
