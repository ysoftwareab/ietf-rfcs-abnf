
Network Working Group                                           J. Snell
Internet-Draft                                         December 14, 2004
Expires: June 14, 2005

                     The Atom Notification Protocol
                  draft-snell-atompub-notification-00

Status of this Memo

   By submitting this Internet-Draft, I certify that any applicable
   patent or other IPR claims of which I am aware have been disclosed,
   and any of which I become aware will be disclosed, in accordance with
   RFC 3668.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on June 14, 2005.

Copyright Notice

   Copyright (C) The Internet Society (2004).  All Rights Reserved.

Abstract

   This memo presents a protocol for posting notifications of new or
   updated content using a combination of the Atom Syndication Format
   and HTTP POSTs.





Snell                    Expires June 14, 2005                  [Page 1]
Internet-Draft       The Atom Notification Protocol        December 2004

Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
     1.1   Notational Conventions . . . . . . . . . . . . . . . . . .  3
     1.2   Terminology  . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  The Atom Notification Protocol Model . . . . . . . . . . . . .  3
   3.  Functional Specification . . . . . . . . . . . . . . . . . . .  3
     3.1   NotificationURI  . . . . . . . . . . . . . . . . . . . . .  3
       3.1.1   Locating the NotificationURI . . . . . . . . . . . . .  4
       3.1.2   Request  . . . . . . . . . . . . . . . . . . . . . . .  4
       3.1.3   Response . . . . . . . . . . . . . . . . . . . . . . .  5
   4.  Atom Syntax Extensions . . . . . . . . . . . . . . . . . . . .  5
     4.1   "atom:notification" Element  . . . . . . . . . . . . . . .  5
   5.  Security Considerations  . . . . . . . . . . . . . . . . . . .  6
   6.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  6
   7.  References . . . . . . . . . . . . . . . . . . . . . . . . . .  6
       Author's Address . . . . . . . . . . . . . . . . . . . . . . .  7
       Intellectual Property and Copyright Statements . . . . . . . .  8

















Snell                    Expires June 14, 2005                  [Page 2]
Internet-Draft       The Atom Notification Protocol        December 2004

1.  Introduction

   The Atom Notification Protocol is an application-level protocol for
   posting notification of new or updated content using HTTP and the
   Atom Syndication Format.

1.1  Notational Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [1].

1.2  Terminology

   Atom Entry: An Atom Entry is a fragment of a full Atom feed.  In this
   case, the fragment is a single 'entry' element and all its child
   elements.  Each Atom Entry describes a single Web resource, providing
   metadata and optionally a textual representation of that resource.

   Atom Feed: In the context of an Atom Notification, an Atom Feed is a
   minimal "atom:feed" element containing an "atom:head" element and no
   "atom:entry" elements.

   NotificationURI: A URI that is used to receive notifications about
   new or updated Atom entries.

2.  The Atom Notification Protocol Model

   The Atom Notification Protocol has been designed to complement the
   Atom Publishing Protocol by providing the means of sending
   notifications when Atom-based content is created or updated.

   The Atom Notification Protocol works by POSTing Atom Entries or Atom
   Feeds to a NotificationURI using HTTP POST.

   As is the case with the Atom Publishing Protocol, this document does
   not seek to specify the form of the URIs that are used.  This
   document does, however, specify the formats of the entities posted to
   those URIs.

3.  Functional Specification

3.1  NotificationURI

   The NotificationURI is used to POST notifications.  A notification
   consists of a single Atom Entry or Atom Feed.  The notification is
   essentially a one-way operation that implies no semantics or action
   on the part of the receiver.


Snell                    Expires June 14, 2005                  [Page 3]
Internet-Draft       The Atom Notification Protocol        December 2004

3.1.1  Locating the NotificationURI

   The NotificationURI can be discovered in one of two ways.

   First, with an link element with a @rel of 'service.notification' in
   the "head" element of an HTML document.

     <link rel="service.notification"
        type="application/atom+xml"
        href="NotificationURI Goes Here"
        title="The Title of the Site" />

   Second, using a "atom:notification" element as described in section
   4.1.

3.1.2  Request

   The request contains a filled-in Atom Entry or Atom Feed.

   A notification request containing an Atom Entry is intended to notify
   the receiving endpoint that a specific entry has been created or
   updated.

   A notification request containing an Atom Feed is intended to notify
   the receiving endpoint that a specific feed has been created or
   updated.

   Atom Entries POSTed to a NotificationURI MAY contain a "atom:head"
   element that identifies the feed to which the entry belongs.

   Atom Feeds POSTed to a NotificationURI MUST NOT contain any
   "atom:entry" elements and SHOULD consist of only a minimal
   "atom:head" element using as few optional elements as possible.

     <?xml version="1.0" encoding="utf-8"?>
     <feed version="draft-ietf-atompub-format-03: do not deploy"
     xmlns="http://purl.org/atom/ns#draft-ietf-atompub-format-03">
       <head>
         <title>Example Feed</title>
         <link href="http://example.org/"/>
         <updated>2003-12-13T18:30:02Z</updated>
         <author>
           <name>John Doe</name>
         </author>
       </head>
     </feed>



Snell                    Expires June 14, 2005                  [Page 4]
Internet-Draft       The Atom Notification Protocol        December 2004

3.1.3  Response

   The possible HTTP status codes from a POST are 202, 400 or 500.

3.1.3.1  Response Code 202

   A response code of 202 indicates that the notification was
   successfully received and accepted.  The body of the message SHOULD
   be empty.

3.1.3.2  Response Code 400

   A response code of 400 indicates that the server believes the data
   sent constitutes an invalid request.  For example, the data received
   may not be a well-formed Atom entry or feed.  The server SHOULD
   include an entity containing an explanation of the error situation
   and whether it is a temporary or permanent condition.

3.1.3.3  Response Code 500

   A response code of 500 indicates that the server detected an internal
   error while processing the notification request.  The server SHOULD
   include an entity containing an explanation of the error situation,
   and whether it is a temporary or permanent condition.

4.  Atom Syntax Extensions

4.1  "atom:notification" Element

   The "atom:notification" element is a Service construct that conveys
   the URI used to receive notifications related to an entry or feed.
   No more than one "atom:notification" element may be added to the
   "atom:head" or "atom:entry" elements.  The "atom:notification"
   element uses the same namespace URI as the Atom core elements.









Snell                    Expires June 14, 2005                  [Page 5]
Internet-Draft       The Atom Notification Protocol        December 2004

     <?xml version="1.0" encoding="utf-8"?>
     <feed version="draft-ietf-atompub-format-03: do not deploy"
     xmlns="http://purl.org/atom/ns#draft-ietf-atompub-format-03">
       <head>
         <title>Example Feed</title>
         <link href="http://example.org/"/>
         <updated>2003-12-13T18:30:02Z</updated>
         <author>
           <name>John Doe</name>
         </author>
         <notification href="http://example.org/notificationURI" />
      </head>
      <entry>
        <title>Atom-Powered Robots Run Amok</title>
        <link href="http://example.org/2003/12/13/atom03"/>
        <id>vemmi://example.org/2003/32397</id>
        <updated>2003-12-13T18:30:02Z</updated>
        <notification href="http://example.org/2003/32397/notificationURI" />
      </entry>
     </feed>

5.  Security Considerations

   The decision of whether or not to secure the Atom Notification
   Protocol will be made on a case-by-case decision.  Some notification
   endpoints may be restricted to known authenticated users while others
   will be open for anyone who wishes to post notifications.  If a given
   NotificationURI is restricted, the same authentication mechanisms
   used by the Atom Publishing Protocol SHOULD be used.  Because of
   this, the Notification Protocol is open to the same threats as the
   Publication Protocol.

   One particular challenge that implementors of NotificationURI
   endpoints will need to be aware of is the potential for denial of
   service attacks and notification spamming.  This document shall not
   deal with potential solutions to such attacks.

6.  IANA Considerations

   This document has no actions for IANA.

7  References

   [1]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", BCP 14, RFC 2119, March 1997.

   [2]  Gregorio, J., Ed. and R. Sayre, Ed., "The Atom Publishing


Snell                    Expires June 14, 2005                  [Page 6]
Internet-Draft       The Atom Notification Protocol        December 2004

        Protocol", draft-ietf-atompub-protocol-02 (work in progress),
        September 2004.

   [3]  Nottingham, M., Ed. and R. Sayre, Ed., "The Atom Syndication
        Format", draft-ietf-atompub-format-03 (work in progress),
        October 2004.

Author's Address

   James M Snell

   EMail: james@snellspace.com
   URI:   http://www.snellspace.com



















Snell                    Expires June 14, 2005                  [Page 7]
Internet-Draft       The Atom Notification Protocol        December 2004

Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.

Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Copyright Statement

   Copyright (C) The Internet Society (2004).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.

Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.


Snell                    Expires June 14, 2005                  [Page 8]
