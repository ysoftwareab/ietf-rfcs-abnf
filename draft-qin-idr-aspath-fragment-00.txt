


Internet Engineering Task Force                            Z. Zhang, Ed.
Internet-Draft                                             Cisco Systems
Intended status: Standards Track                             J. Qin, Ed.
Expires: September 23, 2009                                          ZTE
                                                          March 22, 2009


            Border Gateway Protocol(BGP) AS_PATH Fragmenting
                    draft-qin-idr-aspath-fragment-00

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on September 23, 2009.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.

Abstract

   This document discusses the issues of processing the AS_PATH
   attribute which provides sufficient information for constructing a



Zhang & Qin            Expires September 23, 2009               [Page 1]

Internet-Draft             AS_PATH Fragmenting                March 2009


   graph of AS connectivity, and defines the detailed procedure of
   fragmenting or merging a sequence of AS PATH segments.  This is
   necessary for the robust implementation of Border Gateway Protocol
   (BGP) and the interoperation of vendors.


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 3
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . . . 3
   2.  Attribute Processing  . . . . . . . . . . . . . . . . . . . . . 3
   3.  Error Handing . . . . . . . . . . . . . . . . . . . . . . . . . 4
   4.  Implementation Recommendations  . . . . . . . . . . . . . . . . 4
   5.  AS Confederations Considerations  . . . . . . . . . . . . . . . 4
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . . . 4
   7.  Security Considerations . . . . . . . . . . . . . . . . . . . . 4
   8.  References  . . . . . . . . . . . . . . . . . . . . . . . . . . 5
     8.1.  Normative References  . . . . . . . . . . . . . . . . . . . 5
     8.2.  Informative References  . . . . . . . . . . . . . . . . . . 5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . . . 5































Zhang & Qin            Expires September 23, 2009               [Page 2]

Internet-Draft             AS_PATH Fragmenting                March 2009


1.  Introduction

   The Border Gateway Protocol (BGP) is an inter-Autonomous System
   routing protocol.  And the AS_PATH attribute identifies the list of
   Autonomous Systems (ASes) through which routing information carried
   in UPDATE messages has passed.  If the list of ASes exceeds length
   limit, the fragmentation of AS PATH segments has to be dealt with,
   and the reasonable operation is needed.  This document defines the
   detailed procedure of fragmenting or merging a sequence of AS PATH
   segments.  This is necessary for the robust implementation of Border
   Gateway Protocol (BGP) and the interoperation of vendors.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].


2.  Attribute Processing

   When BGP speaker modifies the route's AS_PATH attribute received or
   adds the AS_PATH attribute to the newly originated route, the basic
   procedure should be followed according to RFC4271.  The local system
   MAY include/prepend more than one instance of its own AS number in
   the AS_PATH attribute.  This operation is controlled via local
   configuration.  Whenas the overflow happens due to the act of
   prepending AS numbers to the path segment, then:

   o  If the available positions in the path segment of type AS_SEQUENCE
      are not enough for the AS numbers to be included, it SHOULD first
      fullfill the segment (255 totally), then prepend a new segment of
      type AS_SEQUENCE, and include the remaining AS numbers in the new
      segment.  This operation MAY be repeated and more than one new
      segment MAY be created if the the AS numbers to be included are
      too many.  The newer segment SHALL always be set as the first one
      of the AS_PATH.

   o  When the local system creates a path segment of type AS_SET, and
      if the AS numbers to be included exceed 255, it SHOULD first
      fullfill the segment (255 totally), then prepend a new segment of
      type AS_SET, and include the remaining AS numbers in the new
      segment.  This operation MAY be repeated and more than one new
      segment MAY be created if the the AS numbers to be included are
      too many.

   If multiple path segments are received, the local system SHOULD get
   them merged and refragmented (if needed) according to the procedure



Zhang & Qin            Expires September 23, 2009               [Page 3]

Internet-Draft             AS_PATH Fragmenting                March 2009


   discussed above unless all of the segments have been fullfilled.

   Whenever the local system performs fragmenting or merging, the
   correct order of the AS_PATH elements MUST be assured.


3.  Error Handing

   The AS_PATH is checked for syntactic correctness.

   The path segment value contains one or more As numbers matching
   exactly the length field in the segment.  If the check determines
   this is not the case, the Error Subcode MUST be set to Malformed
   AS_PATH.

   The AS_PATH contains one or more path segments of type AS_SEQUENCE
   and/or AS_SET but only one or one piece of continuous path segments
   of type AS_SET is allowed and MUST be placed at the end.  If the
   check determines this is not the case, the Error Subcode MUST be set
   to Malformed AS_PATH.

   For the robust implementation of BGP, it SHOULD have the capability
   of fragmenting the path segment of the AS_PATH when overflow happens,
   besides correctly checking the multiple segments orderly to structure
   the graph of the AS_PATH.


4.  Implementation Recommendations

   when the UPDATE message is built, and if the total length of the
   attribute exceeds size limit due to prepending too many fragmented
   path segments, an overload error notice MAY be sent up to the local
   system with the relevant prefix listed in the notice.


5.  AS Confederations Considerations

   TBD.


6.  IANA Considerations

   This memo includes no request to IANA.


7.  Security Considerations

   It SHOULD rely on the authentication mechanisms oringinally defined



Zhang & Qin            Expires September 23, 2009               [Page 4]

Internet-Draft             AS_PATH Fragmenting                March 2009


   to solve the security problems.


8.  References

8.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC4271]  Rekhter, Y., Li, T., and S. Hares, "A Border Gateway
              Protocol 4 (BGP-4)", RFC 4271, January 2006.

   [RFC4893]  Vohra, Q. and E. Chen, "BGP Support for Four-octet AS
              Number Space", RFC 4893, May 2007.

   [RFC5065]  Traina, P., McPherson, D., and J. Scudder, "Autonomous
              System Confederations for BGP", RFC 5065, August 2007.

   [RFC5396]  Huston, G. and G. Michaelson, "Textual Representation of
              Autonomous System (AS) Numbers", RFC 5396, December 2008.

8.2.  Informative References

   [RFC2270]  Stewart, J., Bates, T., Chandra, R., and E. Chen, "Using a
              Dedicated AS for Sites  Homed to a Single Provider",
              RFC 2270, January 1998.

   [RFC4276]  Hares, S. and A. Retana, "BGP-4 Implementation Report",
              RFC 4276, January 2006.


Authors' Addresses

   Zhifeng Zhang (editor)
   Cisco Systems
   Beijing,
   P.R.C

   Phone: +86 10 8515 5569
   Email: zhifzhan@cisco.com










Zhang & Qin            Expires September 23, 2009               [Page 5]

Internet-Draft             AS_PATH Fragmenting                March 2009


   Jacni Qin (editor)
   ZTE
   Shanghai,
   P.R.C

   Phone: +86 21 6889 6825
   Email: jacniq@gmail.com












































Zhang & Qin            Expires September 23, 2009               [Page 6]


