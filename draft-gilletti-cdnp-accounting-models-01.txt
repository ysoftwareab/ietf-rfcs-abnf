

Network Working Group                                        D. Gilletti
Internet-Draft                                                    Entera
Expires: March 30, 2001                                          R. Nair
                                                                   Cisco
                                                             J. Scharber
                                                                  Entera
                                                      September 29, 2000


                   Accounting Models for CDN Peering
              draft-gilletti-cdnp-accounting-models-01.txt

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six
   months and may be updated, replaced, or obsoleted by other documents
   at any time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on March 30, 2001.

Copyright Notice

   Copyright (C) The Internet Society (2000). All Rights Reserved.

Abstract

   This document presents several conceptual and logical models for
   accounting activities between peered CDNs. This is a new piece of
   work intended to enumerate the issues and provide additional detail
   for use when deriving the ACCOUNTING PEERING SYSTEM for a CDN
   peering model. 






Gilletti, et. al.        Expires March 30, 2001                 [Page 1]

Internet-Draft                   CDNPBE                   September 2000


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   3.  Accounting . . . . . . . . . . . . . . . . . . . . . . . . . .  5
   4.  Key Assumptions  . . . . . . . . . . . . . . . . . . . . . . .  6
   4.1 Content Has Value  . . . . . . . . . . . . . . . . . . . . . .  6
   4.2 Distribution Has Value . . . . . . . . . . . . . . . . . . . .  6
   4.3 Users Have Value . . . . . . . . . . . . . . . . . . . . . . .  6
   5.  Conceptual Accounting Models . . . . . . . . . . . . . . . . .  7
   5.1 The Cable Model  . . . . . . . . . . . . . . . . . . . . . . .  7
   5.2 The Telco Model  . . . . . . . . . . . . . . . . . . . . . . .  7
   5.3 The Ticket Model . . . . . . . . . . . . . . . . . . . . . . .  8
   5.4 The Calling Card Model . . . . . . . . . . . . . . . . . . . .  8
   6.  Logical Accounting Models  . . . . . . . . . . . . . . . . . .  9
   6.1 The Accounting Transaction Model . . . . . . . . . . . . . . .  9
   6.2 Other Logical Accounting Models  . . . . . . . . . . . . . . . 10
   7.  Accounting Issues  . . . . . . . . . . . . . . . . . . . . . . 11
   7.1 Collection Methods for Transactional Accounting  . . . . . . . 11
   7.2 Other Issues . . . . . . . . . . . . . . . . . . . . . . . . . 11
   8.  Recommendations  . . . . . . . . . . . . . . . . . . . . . . . 12
   9.  Security Considerations  . . . . . . . . . . . . . . . . . . . 14
   10. Conclusion . . . . . . . . . . . . . . . . . . . . . . . . . . 15
   11. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 16
       References . . . . . . . . . . . . . . . . . . . . . . . . . . 17
       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 17
       Full Copyright Statement . . . . . . . . . . . . . . . . . . . 19
























Gilletti, et. al.        Expires March 30, 2001                 [Page 2]

Internet-Draft                   CDNPBE                   September 2000


1. Introduction

   In an effort to derive a solution for the interconnection or peering
   of Content Delivery Networks (CDNs) an abstract system model was
   created to provide an adequate frame of reference. This model, as
   described in [3], identifies three basic elements:

   1.  REDIRECTION PEERING SYSTEM

   2.  DISTRIBUTION PEERING SYSTEM

   3.  ACCOUNTING PEERING SYSTEM

   This document presents several conceptual and logical accounting
   models which SHOULD be considered when deriving the ACCOUNTING
   PEERING SYSTEM for a peered CDN model. It also provides a list of
   additional considerations as well as some recommendations for
   potential solutions. [Editor's Note: To begin with, this document
   primarily focusses on the billing aspects of accounting. Over time
   it is expected to cover other aspects of accounting such as
   statistics gathering, etc.]

   The models set forth in this document assume that the BILLING CDN
   (as defined in [1]) can either be a party actively involved in the
   distribution exchange, or a third party who may provide various
   levels of billing and transaction related functions (i.e. a
   settlement entity).

   These models are intended to indicate some of the high-level
   relationships between various elements of the DISTRIBUTING CDN. And,
   whenever possible, they also attempt to indicate the flows and the
   nature of the requirements for access or statistical information by
   the BILLING CDN as well as other parties involved in the
   transaction. These models also recognize that there may be multiple
   interested BILLING CDNS who require this information.

   Since the concentration of this effort is to determine the
   requirements for peering CDNs data produced and consumed within an
   individual CDN is ignored within this document.












Gilletti, et. al.        Expires March 30, 2001                 [Page 3]

Internet-Draft                   CDNPBE                   September 2000


2. Terminology

   This section introduces new terminology not already defined in [1]:

   CDN SERVICE: an action that is directly or indirectly related to the
      act of moving CONTENT from PUBLISHER to CONSUMER;

   PROVIDER: an entity that offers a CDN SERVICE in exchange for
      COMPENSATION;

   COMPENSATION: remuneration that flows from CUSTOMER to PROVIDER in
      exchange for a CDN SERVICE;

   CUSTOMER: a billable entity that agrees to exchange COMPENSATION for
      a CDN SERVICE;

   ENTITLEMENT: a right to access a given CDN SERVICE or CONTENT object
      which is given to the CUSTOMER by the PROVIDER

   USAGE: a counter that measures the access or use of a CDN SERVICE by
      the CUSTOMER;

   PERIOD: the duration for which the USAGE counter is active;

   USAGE RATE: a per-unit cost associated with the USEAGE of a CDN
      SERVICE;

   UNIT OF MEASURE (UOM): indicates how USAGE should be tracked (i.e.
      minutes, seconds, bytes, etc);

   FLAT RATE: indicates there is no limit on the amount of CDN SERVICE
      that a CUSTOMER can consume during a PERIOD;

   TIERED: indicates the existence of a schedule against which USAGE of
      a given CDN SERVICE is tracked and billed;

   PERCENTILE: indicates that a CDN SERVICE will be billed cost that is
      based on a multiplier (USAGE RATE) times the USAGE during the
      PERIOD;












Gilletti, et. al.        Expires March 30, 2001                 [Page 4]

Internet-Draft                   CDNPBE                   September 2000


3. Accounting

   There are several concepts that are helpful to consider when
   attempting to model the various accounting scenarios that can be
   realized when peering CDNs. The most fundamental of these is the
   assignment of value within the distribution exchange.

   In any distribution system revenue will generally flow in the
   direction of value. In order to insure that this revenue flows
   accurately, it is necessary to provide accurate statistical and
   access related information to one or more BILLING CDNS. In general
   it can be assumed that accounting information originates at the
   DISTRIBUTION SYSTEMS and flows towards the BILLING CDNS. However it
   is entirely appropriate to consider that this data may flow through
   one or more aggregation points. In fact the ability to aggregate
   statistical and access related information is essential to allow for
   scalability within the proposed solution. 

   It should be noted that value exists at many points in a peered
   DISTRIBUTION SYSTEM. To fully consider this problem one should
   assume that, in general, any element of the DISTRIBUTION SYSTEM can
   have an assigned value associated with its use. This raises some
   obvious questions about settlement which are outside the scope of
   this document. For the purposes of this effort it is sufficient to
   insure that the appropriate accounting data is capable of being
   transferred from the measurement point to the ACCOUNTING SYSTEM.

   The authors of this document also recognize the fact that it is
   impossible, at present, to fully capture all of the current and
   future requirements for accounting and statistical information.
   Instead, this document contains some fundamental known concepts and
   requirements and proposes an extensible framework for the carriage
   of accounting information through a peered DISTRIBUTION SYSTEM.


















Gilletti, et. al.        Expires March 30, 2001                 [Page 5]

Internet-Draft                   CDNPBE                   September 2000


4. Key Assumptions

   The distribution of accounting information, like the distribution of
   content, is greatly affected by the following concepts.

4.1 Content Has Value

   This concept assumes that the content has intrinsic value and that
   the revenue (and accounting information) flows from the CONSUMER to
   the CONTENT PROVIDER. A CONSUMER, as defined in this relationship,
   is the entity which consumes data. Therefore the CONSUMER may be a
   CLIENT or a SURROGATE.

   An example of this concept would include services such as Video On
   Demand (VOD).

4.2 Distribution Has Value

   This concept describes the situation where the value is located
   within the SERVICE PROVIDER. In this case the revenue as well as the
   statistical and access information flow toward the SERVICE PROVIDER.

   When considering this case, it is a reasonable assumption to
   consider that the majority of the necessary statistical and access
   information would be produced and consumed within the SERVICE
   PROVIDER's domain and is therefore not important to consider.
   However, it is not reasonable to assume that all such information is
   obtained in this manner. The latter is especially true when a
   third-party BILLING CDN or complex peering arrangements are in place.

   An example of this case is where a SERVICE PROVIDER has an
   aggregated CLIENT population which is of sufficient interest to one
   or more CONTENT PROVIDERS. In this case the CONTENT PROVIDERs are
   willing to pay to access the CLIENTs of the SERVICE PROVIDER and
   revenue flows from the CONTENT PROVIDER to the SERVICE PROVIDER.

4.3 Users Have Value

   This concept describes the fact that an aggregation of users or
   CLIENTS may also represent significant value in the DISTRIBUTION
   chain.

   The same example as above applies to this case.








Gilletti, et. al.        Expires March 30, 2001                 [Page 6]

Internet-Draft                   CDNPBE                   September 2000


5. Conceptual Accounting Models

   There are four basic conceptual accounting models that SHOULD be
   considered when describing the requirements for the peering of
   accounting events between peered distribution entities:[Editor's
   Note: Other models suitable for realtime provisioning may be added
   to this proposal over time.]

   o  Flat Rate Accounting Model - (aka "The Cable Model)

   o  Metered Accounting Model - (aka "The Telco Model")

   o  Prepay Event Accounting Model - (aka "The Ticket Model")

   o  Prepay Metered Accounting Model - (aka "The Calling Card Model")

   These models are described in the following sections.

5.1 The Cable Model

   In this model there is a "subscription" fee associated with the
   reception of CONTENT. In its primary mode it consists of a CLIENT
   entering into a transaction, either directly with the CONTENT
   PROVIDER or through some third party, for the purposes of obtaining
   access to one or more CONTENT OBJECTs. Once the transaction has been
   approved the CLIENT receives an entitlement to access the requested
   CONTENT for the duration of the subscription interval.

   An extension to this model is the case where a given DISTRIBUTION
   CDN enters into a redistribution agreement with a CONTENT PROVIDER.
   In this scenario, the scope of the transaction is between the
   CONTENT PROVIDER and the specific DISTRIBUTION CDN. Once the
   transaction is successful, the DISTRIBUTION CDN obtains the right to
   redistribute that content in some mutually agreed upon manner. The
   manner of redistribution can range from unlimited to highly
   restricted.

   The resultant accounting information for this model consists of a
   single transaction which is associated with a specific CONSUMER.

5.2 The Telco Model

   This model associates a finite value with the access or consumption
   of one or more CONTENT OBJECTs and attempts to fully control and/or
   account for access to these OBJECTs.

   The resultant accounting information for this model is a set of
   detailed or summary accounting records associated with a specific
   CLIENT.


Gilletti, et. al.        Expires March 30, 2001                 [Page 7]

Internet-Draft                   CDNPBE                   September 2000


5.3 The Ticket Model

   In this model the CLIENT obtains a ticket (or entitlement) in
   advance of accessing the CONTENT. This is accomplished by a
   transaction between the CLIENT and the CONTENT PROVIDER or their
   agent(s). The ticket is a one-time ENTITLEMENT which expires upon
   use.

5.4 The Calling Card Model

   In this model a consumer prepays and receives an ENTITLEMENT to
   access a set of CONTENT OBJECTS up to some pre-specified value
   level. The total value of the ENTITLEMENT is determined at the time
   of purchase and its value is decremented each time the CUSTOMER
   accesses the CDN SERVICE. The amount of the decrement will be
   specific to the CDN SERVICE being accessed. The CUSTOMER is able to
   continue to access the CDN SERVICE until the ENTITLEMENT is fully
   depleted.

































Gilletti, et. al.        Expires March 30, 2001                 [Page 8]

Internet-Draft                   CDNPBE                   September 2000


6. Logical Accounting Models

   This section describes the logical accounting models that SHOULD be
   considered when deriving ACCOUNTING ELEMENTS for a peered CDN model.

6.1 The Accounting Transaction Model

   There are four separate components required to create a flexible
   accounting transaction model for a Content Distribution Network
   (CDN);

      METHOD

      ESTABLISHMENT

      MEASUREMENT

      PAYMENT.

   A METHOD is used to define the UNIT OF MEASURE (UOM), ALGORITHM and
   PERIOD used to calculate USAGE FEE for a BILLABLE EVENT. The
   ALGORITHM indicates how the UOM should be applied.  Primitive
   ALGORITHM types include; FLAT RATE, TIERED, PERCENTILE although more
   complex applications may be constructed. The PERIOD specifies the
   duration for which the METHOD is valid.  A METHOD may be applied on
   a per unit basis or a METHOD may also be applied over a time periods
   such as a day or a month.

   A TRANSACTION is CUSTOMER initiated action requesting access to a
   specific CDN SERVICE being offered by the PROVIDER.

   A CDN SERVICE has a specified METHOD for accounting purposes.

   The ESTABLISHMENT SYSTEM ensures that the requestor is AUTHORIZED
   and includes the appropriate STATE and METHOD to allow accurate
   measurement for the current request.  The ESTABLISHMENT system will
   communicate with the ACCOUNTING system to determine the state
   information that is required and could include such information as
   ENTITLEMENTs. The ESTABLISHMENT system also ensures that DIGITAL
   RIGHTS of a requestor are consistent with its ENTITLEMENTS.

   The MEASUREMENT SYSTEM provides a means of tracking and reporting
   utilization or ACCOUNTING EVENTS back to a ACCOUNTING SYSTEM.  The
   MEASUREMENT SYSTEM may also aggregate responses to the accounting
   system based on the METHOD applied to a given request and the STATE
   information returned from the ESTABLISHMENT system.

   The ACCOUNTING SYSTEM provides for REAL TIME or OFFLINE PROCESSING
   of ACCOUNTING EVENTs and tracks USER, STATE and METHOD information


Gilletti, et. al.        Expires March 30, 2001                 [Page 9]

Internet-Draft                   CDNPBE                   September 2000


   that are applied to a specified TRANSACTION type.  The payment
   system allows for the definition of USER, CDN SERVICE records.

6.2 Other Logical Accounting Models

   Other logical accounting models will be included here.













































Gilletti, et. al.        Expires March 30, 2001                [Page 10]

Internet-Draft                   CDNPBE                   September 2000


7. Accounting Issues

   This section lists some additional issues that SHOULD be considered
   in order to have a complete solution for accounting across peered
   CDNs.

7.1 Collection Methods for Transactional Accounting

   In a Layer 3 network, the most granular entity is a flow whereas in
   a layer 5 network, the most granular entity is a CONTENT request.
   Observations have shown that many web sites will use a single TCP
   connection for upwards of 20 content requests.

   This would imply that a simple log at the CONTENT level would result
   in at least 20 times the log volume of a layer 3 log. Moreover, at
   the CDN level the problem becomes worse because we could be required
   to transmit logs from all the CDN nodes back to the BILLING CDN. The
   issue here is not simply one of available bandwidth for
   transmission. Rather, it is the problem of processing large volumes
   of logs.

   Thus, it becomes important to aggregate at the granularity of
   billable events whose definition is perhaps left open.

   One way to reduce this information is to be able to aggregate the
   logs by Domain Names or URL-sets (i.e., wildcards or ranges) and
   transport these aggregates across the CDNs.

   It would be extremely advantageous to implement the ability for
   involved parties to define, via an open interface, the billable
   events that the CDN would like to use, (i.e., Domain Name, URL-set,
   etc). This interface SHOULD have an XML vocabulary that is used to
   describe these events.

   Solutions SHOULD allow the aggregation to be performed at the
   Content Delivery Nodes, so that the DISTRIBUTION SYSTEM need only
   deal with the transport of this aggregated information among the
   peering CDNs.

   It is worth noting that there are many events which aren't easy to
   represent in standard log formats.  These include things such as QoS
   delivery to consumer, content mixing, target ad insertion and other
   value added services.

7.2 Other Issues

   Other noteworthy issues will be included here.




Gilletti, et. al.        Expires March 30, 2001                [Page 11]

Internet-Draft                   CDNPBE                   September 2000


8. Recommendations

   [Editor's Note: This section is here only to record some ideas that
   need to be discussed while this specification is being progressed.]

   One means of accommodating these types of services is to build off
   of the ongoing work of the IETF AAA WG [4]. At present this work is
   centered on the DIAMETER framework and protocol suite for both
   provisioning and accounting.  Early observations indicate that
   DIAMETER has several characteristics that are desirable for
   consideration in fulfilling these accounting requirements.  The high
   point characteristics are that it:

      Has a model that supports either direct aggregation to home
      provider 3rd party brokering.

      Has well developed security and trust relationships.

      Supports standardized, extensible accounting record format.

      Is generally extensible via object oriented techniques.

   The general model of extending DIAMETER is to define required
   extensions to the protocol much like one would do to an abstract
   base class in C++ via base class and subclassing.

   Although its a bit premature to fully assess the suitability of
   DIAMETER to meet these requirements, early observations indicate
   that it sets forth a reasonable framework from which to develop a
   base model for this effort.

   Early observations have also identified the following issues with
   the model that will likely create a need for the following
   extensions to the base framework:

   1.  DIAMETER works on a request-by-request basis like pay-per-view.
       While this model is okay for some applications, it will have to
       be extended to support cases where a CDN pays at a larger
       granularity (e.g., by a million content hits) and then resells
       to its users or another CDN. This would apply to cases where a
       CDN subscribes to a peered BILLING CDN or pays for distribution
       in a peering CDN. Existing DIAMETER mechanisms could be used for
       pay-per-view content inside a CDN but may need a higher level
       protocol across CDNs for aggregate content programming. This
       protocol SHOULD co-exist with DIAMETER message proxying. It can
       borrow message routing models from DIAMETER (e.g. realm-based
       routing).

   2.  DIAMETER uses end-to-end security. This may not work well across


Gilletti, et. al.        Expires March 30, 2001                [Page 12]

Internet-Draft                   CDNPBE                   September 2000


       CDN boundaries. As previously discussed, it may be necessary to
       be flexible about the definition of the "end" to be the CDN
       boundary. This will be consistent with the need for CDNs to
       serve as a content provisioning entity and makes it possible to
       aggregate request traffic.

   3.  DIAMETER needs to be extended with AVPs specific to web-based
       billable events.

   More detailed analysis needs to be undertaken before these
   conclusions can be validated.








































Gilletti, et. al.        Expires March 30, 2001                [Page 13]

Internet-Draft                   CDNPBE                   September 2000


9. Security Considerations

   This document assumes that the solutions suggested within this
   document will be compliant with the trust model given in [4].















































Gilletti, et. al.        Expires March 30, 2001                [Page 14]

Internet-Draft                   CDNPBE                   September 2000


10. Conclusion

   This document presents four conceptual models as a starting point
   for discussion on accounting for CDN peering. Some fundamental
   issues are raised and potential solutions proposed. It is recognized
   that this work will be progressed further within the IETF.













































Gilletti, et. al.        Expires March 30, 2001                [Page 15]

Internet-Draft                   CDNPBE                   September 2000


11. Acknowledgements

   The authors acknowledge the contributions and comments of Brad Cain
   (Mirror Image), Mark Day (Cisco), Fred Douglis (AT&T), John Martin
   (Network Appliance), Doug Potter (Cisco), Oliver Spatscheck (AT&T),
   and Gary Tomlinson (Entera).













































Gilletti, et. al.        Expires March 30, 2001                [Page 16]

Internet-Draft                   CDNPBE                   September 2000


References

   [1]  Day, M. and G. Tomlinson, "A Model for Content Distribution
        Network Peering", draft-day-cdnp-model-00.txt, (work in
        progress), September 2000, 
        <URL:http://www.ietf.org/internet-drafts/draft-day-cdnp-model-01
        .txt>.

   [2]  Day, M. and D. Gilletti, "Content Distribution Network Peering
        Scenarios", draft-day-cdnp-scenarios-00.txt, (work in
        progress), September 2000, 
        <URL:http://www.ietf.org/internet-drafts/draft-day-cdnp-scenario
        s-00.txt>.

   [3]  Green, M., Cain, B. and G. Tomlinson, "Content Distribution
        Network Peering Framework", draft-green-cdnp-framework-00.txt,
        (work in progress), September 2000, 
        <URL:http://www.ietf.org/internet-drafts/draft-green-cdnp-gen-ar
        chitecture-00.txt>.

   [4]  Aboba, B., Arkko, J. and D. Harrington, "Introduction to
        Accounting Management", draft-ietf-aaa-acct-06.txt (work in
        progress), June 2000, 
        <URL:http://www.ietf.org/internet-drafts/draft-ietf-aaa-acct-06.
        txt>.


Authors' Addresses

   Don Gilletti
   Entera, Inc.
   40971 Encyclopedia Circle
   Fremont, CA  94538
   US

   Phone: +1 510 770 5281
   EMail: don@entera.com


   Raj Nair
   Cisco Systems
   50 Nagog Park
   Acton, MA  01720
   US

   Phone: +1 978 206 3029
   EMail: rnair@cisco.com




Gilletti, et. al.        Expires March 30, 2001                [Page 17]

Internet-Draft                   CDNPBE                   September 2000


   John Scharber
   Entera, Inc.
   40971 Encyclopedia Circle
   Fremont, CA  94538
   US

   Phone: +1 510 770 5201
   EMail: john@entera.com











































Gilletti, et. al.        Expires March 30, 2001                [Page 18]

Internet-Draft                   CDNPBE                   September 2000


Full Copyright Statement

   Copyright (C) The Internet Society (2000). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph
   are included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC editor function is currently provided by the
   Internet Society.



















Gilletti, et. al.        Expires March 30, 2001                [Page 19]

