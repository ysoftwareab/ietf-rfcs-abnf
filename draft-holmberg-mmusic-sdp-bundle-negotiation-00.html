<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Multiplexing Negotiation Using Session Description Protocol (SDP) Port Numbers </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 Conventions">
<link href="#rfc.section.4" rel="Chapter" title="4 Applicability Statement">
<link href="#rfc.section.5" rel="Chapter" title="5 SDP Grouping Framework BUNDLE Extension Semantics">
<link href="#rfc.section.6" rel="Chapter" title="6 SDP Offer/Answer Procedures">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 General">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 SDP Offerer Procedures">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 SDP Answerer Procedures">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 Bundled SDP Information">
<link href="#rfc.section.6.4.1" rel="Chapter" title="6.4.1 General">
<link href="#rfc.section.6.4.2" rel="Chapter" title="6.4.2 Bandwidth (b=)">
<link href="#rfc.section.7" rel="Chapter" title="7 Single vs Multiple RTP Sessions">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 General">
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 Single RTP Session">
<link href="#rfc.section.8" rel="Chapter" title="8 Usage With ICE">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 General">
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 Candidates">
<link href="#rfc.section.9" rel="Chapter" title="9 Security Considerations">
<link href="#rfc.section.10" rel="Chapter" title="10 Example">
<link href="#rfc.section.11" rel="Chapter" title="11 IANA Considerations">
<link href="#rfc.section.12" rel="Chapter" title="12 Acknowledgements">
<link href="#rfc.section.13" rel="Chapter" title="13 Change Log">
<link href="#rfc.references" rel="Chapter" title="14 References">
<link href="#rfc.references.1" rel="Chapter" title="14.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="14.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This specification defines a new SDP Grouping Framework SDP grouping framework extension, "BUNDLE", that can be used with the Session Description Protocol (SDP) Offer/Answer mechanism to negotiate the usage of bundled media, which refers to the usage of a single 5-tuple for media associated with multiple SDP media descriptions ("m=" lines).  " />
  <meta name="description" content="This specification defines a new SDP Grouping Framework SDP grouping framework extension, "BUNDLE", that can be used with the Session Description Protocol (SDP) Offer/Answer mechanism to negotiate the usage of bundled media, which refers to the usage of a single 5-tuple for media associated with multiple SDP media descriptions ("m=" lines).  " />
  <meta name="keywords" content="RTP, SDP, Bundle, Multiplexing, RTCWEB, CLUE, RTCWEB, MMUSIC, AVT, WEB, Browser" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">MMUSIC Working Group</td>
<td class="right">C.H. Holmberg</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Ericsson</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">H. T. Alvestrand</td>
</tr>
<tr>
<td class="left">Expires: April 21, 2012</td>
<td class="right">Google</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 19, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Multiplexing Negotiation Using Session Description Protocol (SDP) Port Numbers <br />
  <span class="filename">draft-holmberg-mmusic-sdp-bundle-negotiation-00.txt</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This specification defines a new SDP Grouping Framework SDP grouping framework extension, "BUNDLE", that can be used with the Session Description Protocol (SDP) Offer/Answer mechanism to negotiate the usage of bundled media, which refers to the usage of a single 5-tuple for media associated with multiple SDP media descriptions ("m=" lines).  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted to IETF in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 21, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">Conventions</a>
</li>
<li>4.   <a href="#rfc.section.4">Applicability Statement</a>
</li>
<li>5.   <a href="#rfc.section.5">SDP Grouping Framework BUNDLE Extension Semantics</a>
</li>
<li>6.   <a href="#rfc.section.6">SDP Offer/Answer Procedures</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">General</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">SDP Offerer Procedures</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">SDP Answerer Procedures</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">Bundled SDP Information</a>
</li>
<li>6.4.1.   <a href="#rfc.section.6.4.1">General</a>
</li>
<li>6.4.2.   <a href="#rfc.section.6.4.2">Bandwidth (b=)</a>
</li>
<li>7.   <a href="#rfc.section.7">Single vs Multiple RTP Sessions</a>
</li>
<li>7.1.   <a href="#rfc.section.7.1">General</a>
</li>
<li>7.2.   <a href="#rfc.section.7.2">Single RTP Session</a>
</li>
<li>8.   <a href="#rfc.section.8">Usage With ICE</a>
</li>
<li>8.1.   <a href="#rfc.section.8.1">General</a>
</li>
<li>8.2.   <a href="#rfc.section.8.2">Candidates</a>
</li>
<li>9.   <a href="#rfc.section.9">Security Considerations</a>
</li>
<li>10.   <a href="#rfc.section.10">Example</a>
</li>
<li>11.   <a href="#rfc.section.11">IANA Considerations</a>
</li>
<li>12.   <a href="#rfc.section.12">Acknowledgements</a>
</li>
<li>13.   <a href="#rfc.section.13">Change Log</a>
</li>
<li>14.   <a href="#rfc.references">References</a>
</li>
<li>14.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>14.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">In the IETF RTCWEB WG, a need to use a single 5-tuple for sending and receiving media associated with multiple SDP media descriptions ("m=" lines) has been identified. This would e.g. allow the usage of a single set of Interactive Connectivity Establishment (ICE) <a href="#RFC5245">[RFC5245]</a> candidates for multiple media descriptions. Normally different media types (audio, video etc) will be described using different media descriptions.  </p>
<p id="rfc.section.1.p.2">This specification defines a new SDP Grouping Framework SDP grouping framework <a href="#RFC5888">[RFC5888]</a> extension, "BUNDLE", that can be used with the Session Description Protocol (SDP) Offer/Answer mechanism <a href="#RFC3264">[RFC3264]</a> to negotiate the usage of bundled media, which refers to the usage of a single 5-tuple for media associated with multiple SDP media descriptions ("m=" lines).  </p>
<p id="rfc.section.1.p.3">When an endpoint generates an SDP Offer or SDP Answer <a href="#RFC3264">[RFC3264]</a>, which includes a "BUNDLE" group, each "m=" line associated with the group will share a single port number value.  </p>
<p id="rfc.section.1.p.4">As defined in RFC 4566 <a href="#RFC4566">[RFC4566]</a>, the semantics of multiple "m=" lines using the same port number value are undefined, and there is no grouping defined by such means. Instead, an explicit grouping mechanism needs to be used to express the intended semantics. This specification provides such extension.  </p>
<p id="rfc.section.1.p.5">When media is transported using the Real-Time Protocol (RTP) <a href="#RFC3550">[RFC3550]</a>, the default assumption of the mechanism is that all media associated with a "BUNDLE" group will form a single RTP Session <a href="#RFC3550">[RFC3550]</a>. However, future specifications can extend the mechanism, in order to negotiate RTP Session multiplexing, i.e. "BUNDLE" groups where media associated with a group form multiple RTP Sessions.  </p>
<p id="rfc.section.1.p.6">The mechanism is backward compatible. Entities that do not support the "BUNDLE" grouping extension, or do not want to enable the mechanism for a given session, are expected to generate a "normal" SDP Answer, using different port number values for each "m=" line, to the SDP Offer. The SDP Offerer <a href="#RFC3264">[RFC3264]</a> will still use a single port number value for each media, but as the SDP Answerer <a href="#RFC3264">[RFC3264]</a> will use separate ports a single 5-tuple will not be used for media associated with multiple "m=" lines between the endpoints.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Terminology</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119  <a href="#RFC2119">[RFC2119]</a>.  </p>
<p id="rfc.section.2.p.2">5-tuple: A collection of the following values: source address, source port, destination address, destination port and protocol.  </p>
<p id="rfc.section.2.p.3">Bundled media: Two or more RTP streams using a single 5-tuple. The RTCP streams associated with the RTP streams also use a single 5-tuple, which might be the same, but can also be different, as the one used by the RTP streams.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Conventions</h1>
<p id="rfc.section.3.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14, RFC 2119 <a href="#RFC2119">[RFC2119]</a>.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Applicability Statement</h1>
<p id="rfc.section.4.p.1">The mechanism in this specification only applies to the Session Description Protocol (SDP) <a href="#RFC4566">[RFC4566]</a>, when used together with the SDP Offer/Answer mechanism <a href="#RFC3264">[RFC3264]</a>.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> SDP Grouping Framework BUNDLE Extension Semantics</h1>
<p id="rfc.section.5.p.1">This section defines a new SDP Grouping Framework extension, "BUNDLE".  </p>
<p id="rfc.section.5.p.2">The "BUNDLE" extension can be indicated using an SDP session-level 'group' attribute. Each SDP media description ("m=" line) that is grouped together, using an SDP media-level 'mid' attribute, is part of a specific "BUNDLE" group.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> SDP Offer/Answer Procedures</h1>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> <a href="#sec-oa-gen" id="sec-oa-gen">General</a>
</h1>
<p id="rfc.section.6.1.p.1">When an SDP Offerer or SDP Answerer generates an SDP Offer or SDP Answer, that describes bundled media, it MUST insert an SDP session-level 'group' attribute, with a "BUNDLE" value, and assign SDP media-level 'mid' attribute values to each "m=" line associated with the "BUNDLE" group.  </p>
<p id="rfc.section.6.1.p.2">In addition, the entity that generates the SDP Offer or SDP Answer MUST, for each "m=" line that is part of the "BUNDLE" group: </p>
<p></p>

<ul>
<li>1. Use the same port number value.</li>
<li>2. Use the same connection data ("c=" line) value.</li>
<li>3. Use the same SDP 'rtcp' attribute value, when used.</li>
<li>4. Use the same ICE candidate values, when used.</li>
<li>5. Insert an SDP 'rtpc-mux' attribute.</li>
</ul>

<p> </p>
<p id="rfc.section.6.1.p.4">NOTE: If an entity wants to disable specific media ("m=" line) associated with a "BUNDLE" group, it will use a zero port number value for the "m=" line associated with the media.  </p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> SDP Offerer Procedures</h1>
<p id="rfc.section.6.2.p.1">When an SDP Offerer creates an SDP Offer, that offers bundled media, it MUST create the SDP Offer according to the procedures in <a href="#sec-oa-gen">Section 6.1</a>.  </p>
<p id="rfc.section.6.2.p.2">If the associated SDP Answer contains an SDP session-level 'group' attribute, with a "BUNDLE" value, and the SDP Answer is created according to the proceudres in <a href="#sec-oa-gen">Section 6.1</a> (the same port number value is used for each "m=" line associated with the "BUNDLE" group, etc), the SDP Offerer can start using the same 5-tuple for sending and receiving media, associated with the group, between the entities.  </p>
<p id="rfc.section.6.2.p.3">If the SDP Answer does not include a session-level SDP 'group' attribute, with a "BUNDLE" value, the SDP Offerer cannot use the same 5-tuple for media associated with multiple "m=" lines.  </p>
<p id="rfc.section.6.2.p.4">If the SDP Answererer indicates that it will not use bundled media, the SDP Offerer will still use the single port number value for each "m= line" associated with the offered "BUNDLE" group, and it will normally be able to separate each individual media.  The default mechanism for separating media received on a single IP address and port doing this is by using a 5-tuple based mapping for each individual media. If the SDP Offerer is aware of the Synchronization Source (SSRC) <a href="#RFC3550">[RFC3550]</a> values that the SDP Answerer will use in the media it sends, and the SSRC values will be unique for each media, the SDP Offerer can separate media based on the SSRC values.  </p>
<p id="rfc.section.6.2.p.5">NOTE: Assuming symmetric media is used, the SDP Offerer can use the port information from the SDP Answer in order to create the 5-tuple mapping for each media.  </p>
<p id="rfc.section.6.2.p.6">If the SDP Offerer is not able to separate multiple media received on a single port, it MUST send a new SDP Offer, without offering bundled media, where a separate port number value is provide for each "m=" line of the SDP Offer.  </p>
<p id="rfc.section.6.2.p.7">If an SDP Offer, offering a "BUNDLE" group, and the SDP Offerer has reasons to believe that the rejection is due to the usage of a single port number value for multiple "m=" lines, the SDP Offerer SHOULD send a new SDP Offer, without a "BUNDLE" group, where a separate port number value is provide for each "m=" line of the SDP offer.  </p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> SDP Answerer Procedures</h1>
<p id="rfc.section.6.3.p.1">When an SDP Answerer receives an SDP Offer, which offers bundled media, and the SDP Answerer accepts the offered bundle group, the SDP Answerer MUST create an SDP Answer according to the procedures in <a href="#sec-oa-gen">Section 6.1</a>.  </p>
<p id="rfc.section.6.3.p.2">If the SDP Answerer does not accept the "BUNDLE" group in the SDP Offer, it MUST NOT include a session-evel 'group' attribute, with a "BUNDLE" value, in the associated SDP Answer. In addition, the SDP Answerer MUST provide separate port number values for each "m=" line of the SDP Answer.  </p>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> Bundled SDP Information</h1>
<h1 id="rfc.section.6.4.1">
<a href="#rfc.section.6.4.1">6.4.1.</a> General</h1>
<p id="rfc.section.6.4.1.p.1">This section describes how SDP information, given for each media description, is calculated into a single value for a "BUNDLE" group.  </p>
<h1 id="rfc.section.6.4.2">
<a href="#rfc.section.6.4.2">6.4.2.</a> Bandwidth (b=)</h1>
<p id="rfc.section.6.4.2.p.1">The total proposed bandwidth is the sum of the proposed bandwidth for each "m=" line associated with a negotiated BUNDLE group.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#sec-rtp" id="sec-rtp">Single vs Multiple RTP Sessions</a>
</h1>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> General</h1>
<p id="rfc.section.7.1.p.1">When entities negotiate the usage of bundled media, the default assumption is that all media associated with the bundled media will form a single RTP session.  </p>
<p id="rfc.section.7.1.p.2">The usage of multiple RTP Sessions within a "BUNDLE" group is outside the scope of this specification. Other specification needs to extend the mechanism in order to allow negotiation of such bundle groups.  </p>
<h1 id="rfc.section.7.2">
<a href="#rfc.section.7.2">7.2.</a> Single RTP Session</h1>
<p id="rfc.section.7.2.p.1">When a single RTP Session is used, media associated with all "m=" lines part of a bundle group share a single SSRC <a href="#RFC3550">[RFC3550]</a> numbering space.  </p>
<p id="rfc.section.7.2.p.2">In addition, the following rules and restrictions apply for a single RTP Session: </p>
<p></p>

<ul>
<li>- The dynamic payload type values used in the "m=" lines MUST NOT overlap.</li>
<li>- The "proto" value in each "m=" line MUST be identical (e.g. RTP/AVPF).</li>
<li>- A given SSRC SHOULD NOT transmit RTP packets using payload types that originates from different "m=" lines.</li>
</ul>

<p> </p>
<p id="rfc.section.7.2.p.4">NOTE: The last bullet above is to avoid sending multiple media types from the same SSRC.  If transmission of multiple media types are done with time overlap RTP and RTCP fails to function. Even if done in proper sequence this causes RTP Timestamp rate switching issues [ref to draft-ietf-avtext-multiple-clock-rates].  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#sec-ice" id="sec-ice">Usage With ICE</a>
</h1>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> <a href="#sec-ice-gen" id="sec-ice-gen">General</a>
</h1>
<p id="rfc.section.8.1.p.1">This section describes how to use the "BUNDLE" grouping mechanism together with the Interactive Connectivity Establishment (ICE) mechanism <a href="#RFC5245">[RFC5245]</a>.  </p>
<h1 id="rfc.section.8.2">
<a href="#rfc.section.8.2">8.2.</a> <a href="#sec-ice-can" id="sec-ice-can">Candidates</a>
</h1>
<p id="rfc.section.8.2.p.1">When an ICE-enabled SDP Offerer sends an SDP offer, it MUST include ICE candidates for each "m=" line associated with a "BUNDLE" group. The candidate values MUST be identical for each "m=" line associated with the group. This rule applies also to subsequent SDP Offers, when the usage of bundled media has already been negotiated.  </p>
<p id="rfc.section.8.2.p.2">When an ICE-enabled SDP Answerer receives an SDP Offer, offering a "BUNDLE" group and ICE, if the SDP Answerer enables ICE, MUST include ICE candidates for each "m=" line of the SDP Answer. This also applies for "m=" lines that are part of a "BUNDLE" group, in which case the candidate values MUST be identical for each "m=" line associated with the group. This rule applies also to subsequent SDP Answers, when the usage of bundled media has already been negotiated.  </p>
<p id="rfc.section.8.2.p.3">Once the usage of bundled media has been negotiated, ICE connectivity checks and keep-alives only needs to be performed for the whole "BUNDLE" group, instead of for each individual m= line associated with the group.  </p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#sec-security" id="sec-security">Security Considerations</a>
</h1>
<p id="rfc.section.9.p.1">TBA </p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> <a href="#sec-example" id="sec-example">Example</a>
</h1>
<p id="rfc.section.10.p.1">The example below shows an SDP Offer, where bundled media is offered. The example also shows two SDP Answer alternatives: one where bundled media is accepted, and one where bundled media is rejected (or, not even supported) by the SDP Answerer.  </p>
<div id="#rfc.figure.1"></div>
<pre>
SDP Offer (Bundled media offered)

    v=0
    o=alice 2890844526 2890844526 IN IP4 host.atlanta.com
    s=
    c=IN IP4 host.atlanta.com
    t=0 0
    a=group:BUNDLE foo bar
    m=audio 10000 RTP/AVP 0 8 97
    a=mid:foo
    b=AS:200
    a=rtpmap:0 PCMU/8000
    a=rtpmap:8 PCMA/8000
    a=rtpmap:97 iLBC/8000
    m=video 10000 RTP/AVP 31 32
    a=mid:bar
    b=AS:1000
    a=rtpmap:31 H261/90000
    a=rtpmap:32 MPV/90000

		 
SDP Answer (Bundled media accepted)

    v=0
    o=bob 2808844564 2808844564 IN IP4 host.biloxi.com
    s=
    c=IN IP4 host.biloxi.com
    t=0 0
    a=group:BUNDLE foo bar
    m=audio 20000 RTP/AVP 0
    a=mid:foo
    b=AS:200
    a=rtpmap:0 PCMU/8000
    m=video 20000 RTP/AVP 32
    a=mid:bar
    b=AS:1000
    a=rtpmap:32 MPV/90000

		 
SDP Answer (Bundled media not accepted)

    v=0
    o=bob 2808844564 2808844564 IN IP4 host.biloxi.com
    s=
    c=IN IP4 host.biloxi.com
    t=0 0         
    m=audio 20000 RTP/AVP 0         
    b=AS:200
    a=rtpmap:0 PCMU/8000
    m=video 30000 RTP/AVP 32         
    b=AS:1000
    a=rtpmap:32 MPV/90000
		 

SDP Offer with ICE (Bundled media offered)

    v=0
    o=alice 2890844526 2890844526 IN IP4 host.atlanta.com
    s=
    c=IN IP4 host.atlanta.com
    t=0 0
    a=group:BUNDLE foo bar
    m=audio 10000 RTP/AVP 0 8 97
    a=mid:foo
    b=AS:200
    a=rtpmap:0 PCMU/8000
    a=rtpmap:8 PCMA/8000
    a=rtpmap:97 iLBC/8000
    a=candidate:1 1 UDP 1694498815 host.atlanta.com 10000 typ host
    m=video 10000 RTP/AVP 31 32
    a=mid:bar
    b=AS:1000
    a=rtpmap:31 H261/90000
    a=rtpmap:32 MPV/90000		 
    a=candidate:1 1 UDP 1694498815 host.atlanta.com 10000 typ host



		 
</pre>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> IANA Considerations</h1>
<p id="rfc.section.11.p.1">This document requests IANA to register the new SDP Grouping semantic extension called BUNDLE.  </p>
<h1 id="rfc.section.12">
<a href="#rfc.section.12">12.</a> <a href="#sec-acks" id="sec-acks">Acknowledgements</a>
</h1>
<p id="rfc.section.12.p.1">The usage of the SDP grouping mechanism is based on a similar alternative proposed by Harald Alvestrand. The SDP examples are also modified versions from the ones in the Alvestrand proposal.  </p>
<p id="rfc.section.12.p.2">Thanks to the nice flight crew on AY 021 for providing good sparkling wine, and a nice working athmosphere, for working on this draft.  </p>
<h1 id="rfc.section.13">
<a href="#rfc.section.13">13.</a> Change Log</h1>
<p id="rfc.section.13.p.1">[RFC EDITOR NOTE: Please remove this section when publishing]</p>
<p id="rfc.section.13.p.2">Changes from draft-holmberg-mmusic-sdp-multiplex-negotiation-00 </p>

<ul>
<li>Draft name changed.</li>
<li>Harald Alvestrand added as co-author.</li>
<li>"Multiplex" terminology changed to "bundle".</li>
<li>Added text about single versus multiple RTP Sessions.</li>
<li>Added reference to RFC 3550.</li>
</ul>

<p> </p>
<h1 id="rfc.references">
<a href="#rfc.references">14.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">14.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3264">[RFC3264]</b></td>
<td class="top">
<a>Rosenberg, J.</a> and <a>H. Schulzrinne</a>, "<a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with Session Description Protocol (SDP)</a>", RFC 3264, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4566">[RFC4566]</b></td>
<td class="top">
<a>Handley, M.</a>, <a>Jacobson, V.</a> and <a>C. Perkins</a>, "<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>", RFC 4566, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5888">[RFC5888]</b></td>
<td class="top">
<a>Camarillo, G.</a> and <a>H. Schulzrinne</a>, "<a href="http://tools.ietf.org/html/rfc5888">The Session Description Protocol (SDP) Grouping Framework</a>", RFC 5888, June 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">14.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC3550">[RFC3550]</b></td>
<td class="top">
<a>Schulzrinne, H.</a>, <a>Casner, S.</a>, <a>Frederick, R.</a> and <a>V. Jacobson</a>, "<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>", STD 64, RFC 3550, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5245">[RFC5245]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, "<a href="http://tools.ietf.org/html/rfc5245">Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols</a>", RFC 5245, April 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Christer Holmberg</span> 
	  <span class="n hidden">
		<span class="family-name">Holmberg</span>
	  </span>
	</span>
	<span class="org vcardline">Ericsson</span>
	<span class="adr">
	  <span>Hirsalantie 11</span>

	  <span class="vcardline">
		<span class="locality">Jorvas</span>,  
		<span class="region"></span>
		<span class="code">02420</span>
	  </span>
	  <span class="country-name vcardline">Finland</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:christer.holmberg@ericsson.com">christer.holmberg@ericsson.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Harald Tveit Alvestrand</span> 
	  <span class="n hidden">
		<span class="family-name">Alvestrand</span>
	  </span>
	</span>
	<span class="org vcardline">Google</span>
	<span class="adr">
	  <span>Kungsbron 2</span>

	  <span class="vcardline">
		<span class="locality">Stockholm</span>,  
		<span class="region"></span>
		<span class="code">11122</span>
	  </span>
	  <span class="country-name vcardline">Sweden</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:harald@alvestrand.no">harald@alvestrand.no</a></span>

  </address>
</div>

</body>
</html>