<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>CoAP Feature Analysis</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="CoAP Feature Analysis">
<meta name="keywords" content="Requirements">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">6lowapp</td><td class="header">Z. Shelby</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Sensinode</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">M. Garrison Stuber</td></tr>
<tr><td class="header">Expires: June 26, 2010</td><td class="header">Itron</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">D. Sturek</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Pacific Gas & Electric</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">B. Frank</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Tridium, Inc</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">R. Kelsey</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Ember</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">December 23, 2009</td></tr>
</table></td></tr></table>
<h1><br />CoAP Feature Analysis<br />draft-shelby-6lowapp-coap-00</h1>

<h3>Abstract</h3>

<p>
	  This document considers the requirements and resulting features needed for the design of the Constrained Application Protocol (CoAP). Starting from requirements for energy and building automation applications, the basic features are identified along with an analysis of possible realizations. The goal of the document is to provide a basis for protocol design and related discussion. 
	  
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on June 26, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#requirements">1.1.</a>&nbsp;
CoAP Requirements<br />
<a href="#coap">2.</a>&nbsp;
CoAP Feature Analysis<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#header">2.1.</a>&nbsp;
Compact Header<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#messages">2.2.</a>&nbsp;
Basic Messages<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rest">2.3.</a>&nbsp;
REST Methods<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#content-type">2.4.</a>&nbsp;
Content-type encoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#url">2.5.</a>&nbsp;
URLs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#caching">2.6.</a>&nbsp;
Caching<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sub-notify">2.7.</a>&nbsp;
Subscribe/Notify<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#transport">2.8.</a>&nbsp;
Transport Binding<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#udp">2.8.1.</a>&nbsp;
UDP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#tcp">2.8.2.</a>&nbsp;
TCP<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#discovery">2.9.</a>&nbsp;
Resource Discovery<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#http">2.10.</a>&nbsp;
HTTP Mapping<br />
<a href="#applicability">3.</a>&nbsp;
Applicability<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#energy">3.1.</a>&nbsp;
Energy Applications<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ba">3.2.</a>&nbsp;
Building Automation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#m2m">3.3.</a>&nbsp;
General M2M Applications<br />
<a href="#anchor1">4.</a>&nbsp;
Conclusions<br />
<a href="#anchor2">5.</a>&nbsp;
Security Considerations<br />
<a href="#anchor3">6.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor4">7.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
	The use of web services on the Internet has become ubiquitous in most applications, and depends on the basic REST architecture of the web. The proposed Constrained RESTful Environments (CoRE) working group aims at extending the REST architecture to a suitable form for the most constrained nodes (e.g. 8-bit microcontrollers with limited RAM and ROM) and networks (e.g. 6LoWPAN). One of the main goals of CoRE is to design a generic RESTful protocol for the special requirements of this constrained environment, especially considering energy and building automation applications. The result of this work should be a Constrained Application Protocol (CoAP) which easily traslates to HTTP for integration with the web while meeting specialized requirements such as multicast support, very low overhead and simplicity. 
	
</p>
<p>
	This document first analyzes the requirements for CoAP from the proposed charter and related application requirement drafts in <a class='info' href='#requirements'>Section&nbsp;1.1<span> (</span><span class='info'>CoAP Requirements</span><span>)</span></a>. The key features needed for the CoAP protocol are then identified in <a class='info' href='#coap'>Section&nbsp;2<span> (</span><span class='info'>CoAP Feature Analysis</span><span>)</span></a>. Possible ways of realizing each feature are considered and recommendations made where possible. Finally, the applicability of these features to energy, building automation and general M2M applications is considered in <a class='info' href='#applicability'>Section&nbsp;3<span> (</span><span class='info'>Applicability</span><span>)</span></a>.
	
</p>
<a name="requirements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
CoAP Requirements</h3>

<p>
	<a class='info' href='#req-node'>Paragraph&nbsp;1</a>. The following requirements for CoAP have been identified in the proposed charter of the working group, in the 6lowapp problem statement <a class='info' href='#I-D.bormann-6lowpan-6lowapp-problem'>[I&#8209;D.bormann&#8209;6lowpan&#8209;6lowapp&#8209;problem]<span> (</span><span class='info'>Bormann, C., Sturek, D., and Z. Shelby, &ldquo;6LowApp: Problem Statement for 6LoWPAN and LLN Application Protocols,&rdquo; July&nbsp;2009.</span><span>)</span></a>, or in the application specific requirement documents. The requirements relevant to CoAP are summarizes as follows:
	</p>
<blockquote class="text"><dl>
<dt>REQ1:</dt>
<dd>Nodes have limited code size and limited RAM (typically on the order of 128K flash and 4K of RAM). [charter], <a class='info' href='#I-D.sturek-6lowapp-smartenergy'>[I&#8209;D.sturek&#8209;6lowapp&#8209;smartenergy]<span> (</span><span class='info'>Sturek, D., Shelby, Z., Lohman, D., Stuber, M., and S. Ashton, &ldquo;Smart Energy Requiements for 6LowApp,&rdquo; October&nbsp;2009.</span><span>)</span></a>
</dd>
<dt>REQ2:</dt>
<dd>A header size on the order of 10 bytes, and assumes an underlying network bandwidth of several dozen kbit/s. [charter]
</dd>
<dt>REQ3:</dt>
<dd>Ability to deal with sleeping nodes. Devices may be powered off at any point in time but periodically "wake up" for brief periods of time. [charter], <a class='info' href='#I-D.sturek-6lowapp-smartenergy'>[I&#8209;D.sturek&#8209;6lowapp&#8209;smartenergy]<span> (</span><span class='info'>Sturek, D., Shelby, Z., Lohman, D., Stuber, M., and S. Ashton, &ldquo;Smart Energy Requiements for 6LowApp,&rdquo; October&nbsp;2009.</span><span>)</span></a>, <a class='info' href='#I-D.gold-6lowapp-sensei'>[I&#8209;D.gold&#8209;6lowapp&#8209;sensei]<span> (</span><span class='info'>Gold, R., Krco, S., Gluhak, A., and Z. Shelby, &ldquo;SENSEI 6lowapp Requirements,&rdquo; October&nbsp;2009.</span><span>)</span></a>
</dd>
<dt>REQ4:</dt>
<dd>Protocol must support the caching of recent resource requests, along with caching subscriptions to sleeping nodes. [charter] 
</dd>
<dt>REQ5:</dt>
<dd>Must support the manipulation of simple resources on constrained nodes and networks. The architecture requires push, pull and a notify approach to manipulating resources. CoAP will be able to set and query a resource on a  Device. It will allow a Device to publish a value or event to another Device. [charter], <a class='info' href='#I-D.sturek-6lowapp-smartenergy'>[I&#8209;D.sturek&#8209;6lowapp&#8209;smartenergy]<span> (</span><span class='info'>Sturek, D., Shelby, Z., Lohman, D., Stuber, M., and S. Ashton, &ldquo;Smart Energy Requiements for 6LowApp,&rdquo; October&nbsp;2009.</span><span>)</span></a>, <a class='info' href='#I-D.martocci-6lowapp-building-applications'>[I&#8209;D.martocci&#8209;6lowapp&#8209;building&#8209;applications]<span> (</span><span class='info'>Martocci, J. and A. Schoofs, &ldquo;Commercial Building Applications Requirements,&rdquo; October&nbsp;2009.</span><span>)</span></a>, <a class='info' href='#I-D.gold-6lowapp-sensei'>[I&#8209;D.gold&#8209;6lowapp&#8209;sensei]<span> (</span><span class='info'>Gold, R., Krco, S., Gluhak, A., and Z. Shelby, &ldquo;SENSEI 6lowapp Requirements,&rdquo; October&nbsp;2009.</span><span>)</span></a>
</dd>
<dt>REQ6:</dt>
<dd>Must define a mapping from CoAP to a HTTP REST API; this mapping will not depend on a specific application and must be as transparent as possible using standard protocol response and error codes where possible. [charter], <a class='info' href='#I-D.sturek-6lowapp-smartenergy'>[I&#8209;D.sturek&#8209;6lowapp&#8209;smartenergy]<span> (</span><span class='info'>Sturek, D., Shelby, Z., Lohman, D., Stuber, M., and S. Ashton, &ldquo;Smart Energy Requiements for 6LowApp,&rdquo; October&nbsp;2009.</span><span>)</span></a>, <a class='info' href='#I-D.gold-6lowapp-sensei'>[I&#8209;D.gold&#8209;6lowapp&#8209;sensei]<span> (</span><span class='info'>Gold, R., Krco, S., Gluhak, A., and Z. Shelby, &ldquo;SENSEI 6lowapp Requirements,&rdquo; October&nbsp;2009.</span><span>)</span></a>
</dd>
<dt>REQ7:</dt>
<dd>Each interface profile will define the Resources on the Device that applications can manipulate and what manipulations are possible. CoAP must be able to discover Devices on the CNN and to interrogate them to find out which interface profiles they support. [charter]
</dd>
<dt>REQ8:</dt>
<dd>CoAP will support a non-reliable multicast message to  be sent to a group of Devices to manipulate a resource on all the Devices simultaneously (roughly within 50 ms of each other) [charter]. The use of multicast for discovery and advertisement must be supported, along with the support of unicast responses <a class='info' href='#I-D.sturek-6lowapp-smartenergy'>[I&#8209;D.sturek&#8209;6lowapp&#8209;smartenergy]<span> (</span><span class='info'>Sturek, D., Shelby, Z., Lohman, D., Stuber, M., and S. Ashton, &ldquo;Smart Energy Requiements for 6LowApp,&rdquo; October&nbsp;2009.</span><span>)</span></a>.
</dd>
<dt>REQ9:</dt>
<dd>The protocol will operate by default over UDP, it may optionally be bound to TCP or other reliable transports. [charter], <a class='info' href='#I-D.sturek-6lowapp-smartenergy'>[I&#8209;D.sturek&#8209;6lowapp&#8209;smartenergy]<span> (</span><span class='info'>Sturek, D., Shelby, Z., Lohman, D., Stuber, M., and S. Ashton, &ldquo;Smart Energy Requiements for 6LowApp,&rdquo; October&nbsp;2009.</span><span>)</span></a>, <a class='info' href='#I-D.martocci-6lowapp-building-applications'>[I&#8209;D.martocci&#8209;6lowapp&#8209;building&#8209;applications]<span> (</span><span class='info'>Martocci, J. and A. Schoofs, &ldquo;Commercial Building Applications Requirements,&rdquo; October&nbsp;2009.</span><span>)</span></a>
</dd>
<dt>REQ10:</dt>
<dd>Reliability must be provided for application layer messages <a class='info' href='#I-D.sturek-6lowapp-smartenergy'>[I&#8209;D.sturek&#8209;6lowapp&#8209;smartenergy]<span> (</span><span class='info'>Sturek, D., Shelby, Z., Lohman, D., Stuber, M., and S. Ashton, &ldquo;Smart Energy Requiements for 6LowApp,&rdquo; October&nbsp;2009.</span><span>)</span></a>. Must achieve < 0.01% Application layer errors on all messages assuming a .1% Network layer error rate.
</dd>
<dt>REQ11:</dt>
<dd>Latency times should be mimimized of the Home Area Network (HAN), and ideally a typical exchange should consist of just a single request and a single response message. <a class='info' href='#I-D.sturek-6lowapp-smartenergy'>[I&#8209;D.sturek&#8209;6lowapp&#8209;smartenergy]<span> (</span><span class='info'>Sturek, D., Shelby, Z., Lohman, D., Stuber, M., and S. Ashton, &ldquo;Smart Energy Requiements for 6LowApp,&rdquo; October&nbsp;2009.</span><span>)</span></a>
</dd>
<dt>REQ12:</dt>
<dd>Internet media type and transfer encoding type support. <a class='info' href='#I-D.sturek-6lowapp-smartenergy'>[I&#8209;D.sturek&#8209;6lowapp&#8209;smartenergy]<span> (</span><span class='info'>Sturek, D., Shelby, Z., Lohman, D., Stuber, M., and S. Ashton, &ldquo;Smart Energy Requiements for 6LowApp,&rdquo; October&nbsp;2009.</span><span>)</span></a>, <a class='info' href='#I-D.gold-6lowapp-sensei'>[I&#8209;D.gold&#8209;6lowapp&#8209;sensei]<span> (</span><span class='info'>Gold, R., Krco, S., Gluhak, A., and Z. Shelby, &ldquo;SENSEI 6lowapp Requirements,&rdquo; October&nbsp;2009.</span><span>)</span></a>
</dd>
</dl></blockquote><p>
	
</p>
<a name="coap"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
CoAP Feature Analysis</h3>

<p>
	This section introduces the minimum set of features needed to realize CoAP, and looks at the possible options for realizing them. These features are considered in light on the requirements listed in <a class='info' href='#requirements'>Section&nbsp;1.1<span> (</span><span class='info'>CoAP Requirements</span><span>)</span></a>. The goal is to consider the cross-dependencies, benefits and drawbacks of alternatives for realizing CoAP and to narrow down the options where obvious. 
	
</p>
<a name="header"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Compact Header</h3>

<p>
		There is a requirement for a header overhead on the order of 10 bytes with limited complexity due to node limitations. It should be noted that in wireless networks bits transmitted are much more expensive than processing cycles. The following header design options are considered:
		
		</p>
<blockquote class="text"><dl>
<dt>Fixed approach:</dt>
<dd> The simplest approach is to assume as fixed set of byte-aligned fields. The use of variable length fields should be avoided if possible, one obvious exception being a string URL (see <a class='info' href='#url'>Section&nbsp;2.5<span> (</span><span class='info'>URLs</span><span>)</span></a>). This results in a simple header that can be represented as a struct and easily parsed/created. The disadvantages are difficult evolvability and the tendency to design missing tranport features on-top of CoAP. 
			
</dd>
<dt>Extensible approach:</dt>
<dd> The approach of <a class='info' href='#I-D.frank-6lowapp-chopan'>[I&#8209;D.frank&#8209;6lowapp&#8209;chopan]<span> (</span><span class='info'>Frank, B., &ldquo;Chopan - Compressed HTTP Over PANs,&rdquo; September&nbsp;2009.</span><span>)</span></a> is to encode HTTP headers as binary tuples, assuming that a large number of optional headers will be needed. A similar approach could be takenin CoAP, giving total header flexibility. The disadvantage is header parsing complexity.
			
</dd>
<dt>Hybrid approach:</dt>
<dd> It is unclear how much extensibility is really required from the headers of CoAP. Some of the fields in the protocol will obviously require a sufficient value space for future extensions, such as for indicating content type. Other headers are clearly optional, such as those related to cache control (see <a class='info' href='#caching'>Section&nbsp;2.6<span> (</span><span class='info'>Caching</span><span>)</span></a>) or even the URL (see <a class='info' href='#url'>Section&nbsp;2.5<span> (</span><span class='info'>URLs</span><span>)</span></a>). A hybrid approach would be to design a small fixed header, with the ability to include extension headers, such as in ICMP <a class='info' href='#RFC0792'>[RFC0792]<span> (</span><span class='info'>Postel, J., &ldquo;Internet Control Message Protocol,&rdquo; September&nbsp;1981.</span><span>)</span></a>.
			
</dd>
</dl></blockquote><p>
		
</p>
<p>
		Considering the features foreseen by this document, some kind of extensible hybrid approach is recommended. Most features are fixed for messages, whereas only a some are expected to be optional. 
		
</p>
<a name="messages"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Basic Messages</h3>

<p>
		It is assumed that basic Request and Response messages will be required by the CoAP protocol. This also provides a natural mapping to HTTP (See <a class='info' href='#http'>Section&nbsp;2.10<span> (</span><span class='info'>HTTP Mapping</span><span>)</span></a>) and the response may be useful as an acknowledgement in UDP reliability (See <a class='info' href='#udp'>Section&nbsp;2.8.1<span> (</span><span class='info'>UDP</span><span>)</span></a>). It can be considered that CoAP methods are different kinds of Request messages. 
		
</p>
<a name="rest"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
REST Methods</h3>

<p>
		The core methods of REST must be supported within CoAP. To minimize confusion with HTTP methods, having their own protocol semantics, in CoAP we call the basic REST methods READ, WRITE, CREATE, DESTROY.  
		
</p>
<p>
		Additionally, CoAP must support a light-weight
		Subscribe/Notify mechanism (see <a class='info' href='#sub-notify'>Section&nbsp;2.7<span> (</span><span class='info'>Subscribe/Notify</span><span>)</span></a>). This may require a new NOTIFY method. The discovery mechanism of CoAP may also require a new method called DISCOVER which has different semantics than a READ (see <a class='info' href='#discovery'>Section&nbsp;2.9<span> (</span><span class='info'>Resource Discovery</span><span>)</span></a>). In order to maintain compatibility with HTTP,
		these new messages must be mapped to a standard HTTP method. See <a class='info' href='#http'>Section&nbsp;2.10<span> (</span><span class='info'>HTTP Mapping</span><span>)</span></a> for more about HTTP mapping.
		
</p>
<a name="content-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Content-type encoding</h3>

<p>
		In order to support hetergenous uses, it is important that CoAP is transparent to the use of different application payloads. In order for the application process receiving a packet to properly parse a payload, its content-type and encoding should be explicitly known from the header (as e.g. with HTTP). The use of typical binary encodings for XML is discussed in <a class='info' href='#I-D.shelby-6lowapp-encoding'>[I&#8209;D.shelby&#8209;6lowapp&#8209;encoding]<span> (</span><span class='info'>Shelby, Z., Luimula, M., and D. Peintner, &ldquo;Efficient XML Encoding and 6LowApp,&rdquo; October&nbsp;2009.</span><span>)</span></a>, which includes recommendations for header indication. The draft recommends the indication of at least 10 Internet media types (MIME) <a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a> and 2 content transfer encodings. 
		
</p>
<p>
		It is obvious that string names of Internet media types <a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a> are not appropriate for use in the CoAP header. But then how to make this small yet extensible? One possible solution is to simply assign codes to a small subset of common MIME and content transfer encoding types and have IANA maintain that. A field of 16-bits should be sufficient for encoding both media and content transfer encoding types.
		
</p>
<a name="url"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.5"></a><h3>2.5.&nbsp;
URLs</h3>

<p>
		The Universal Resource Locator (URL) <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a> is an important feature of the REST architecture, the relative part of the URL indicates which resource on the server is being manipulated. It is surely useful for CoAP to support string URLs, which requires a variable length-value field. Although URLs can be designed for compactness, this still often results in 10s of bytes of overhead. The encoding of of a URL string needs to be considered, as this is becoming increasingly complex. It is recommended that only US-ASCII is supported in URL strings for CoAP as defined in <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>, or even a stricter subset as URL parsing is complex and may result in security problems.    
		
</p>
<p>
		Constrained devices are not general purpose web servers, and thus often won't host but a small set of resources with fixed URLs. Thus in addition to string URLs a feature for compressing fixed URLs would be useful.  
		
</p>
<p>One way of achieving this would be to assign an integer identifier (7-8 bits should be sufficient) to each fixed URL in an off-line interface description (e.g. Web Application Description Langauge (WADL)) or in its profile. This identifier could be encoded in the URL length field instead of the string length.
</p>
<a name="caching"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.6"></a><h3>2.6.&nbsp;
Caching</h3>

<p>
		The cachability of CoAP messages will be important, especially with the sleeping node configurations and power limitations typically found in constrained networks and nodes. What features of cachability are really required and how much energy are we willing to spend on it? Roughly 50% of the HTTP specifications are dedicated to sohpisticated caching. With CoAP we should look at the bare minimum caching feature possible.
		
</p>
<p>
		Before talking about caching solutiongs, we should consider in what scenarios caching will actually be required. The following two scenarios have been identified:
		</p>
<ul class="text">
<li>An intermediate CoAP proxy may cache resources and answer READ requests using a cached version. The resource may be cached from previous responses or notifications. This requires at least Max-Age cache control information about each resource. 
</li>
<li>An intermediate CoAP proxy may cache subscriptions to a sleeping node. This requires at least Max-Age information about the subscription.
</li>
</ul><p>
		
</p>
<p>
		Three possible approaches have been identified for caching support.
		</p>
<blockquote class="text"><dl>
<dt>In-band approach:</dt>
<dd> One approach is suggested in <a class='info' href='#I-D.frank-6lowapp-chopan'>[I&#8209;D.frank&#8209;6lowapp&#8209;chopan]<span> (</span><span class='info'>Frank, B., &ldquo;Chopan - Compressed HTTP Over PANs,&rdquo; September&nbsp;2009.</span><span>)</span></a>, which analyses the subset of features from HTTP that could be used for simple sensor data purposes. The proposal is that simply using the using the HTTP Age header (for resource age) and Cache-Control header (for max-age). Max-age may also be applied in requests. Both headers make use of a 2-byte value in seconds. The advantage of this approach is that cache control information is easily available from the header. The disadvantage is the header overhead.
			
</dd>
<dt>Out-of-band approach:</dt>
<dd> Here the CoAP protocol would be agnostic to the cachability of the resources it is carrying, instead leaving the definition of cache control parameters to the body of the resources in an application specific way. The disadvantage is that this makes proxies dependent on the application.
			
</dd>
<dt>Discovery approach:</dt>
<dd> In this approach the cache control information for resources is defined off-line in the list of a server's resources. This approach is used e.g. in the SENSEI system <a class='info' href='#I-D.gold-6lowapp-sensei'>[I&#8209;D.gold&#8209;6lowapp&#8209;sensei]<span> (</span><span class='info'>Gold, R., Krco, S., Gluhak, A., and Z. Shelby, &ldquo;SENSEI 6lowapp Requirements,&rdquo; October&nbsp;2009.</span><span>)</span></a>. The disadvantage id that the caching is dependent on the profile, which may not be a problem if the cache information is in a universal format (see <a class='info' href='#discovery'>Section&nbsp;2.9<span> (</span><span class='info'>Resource Discovery</span><span>)</span></a>).
			
</dd>
</dl></blockquote><p>
		
</p>
<p>
		Based on the current analysis either the In-band or Profile approach would be reasonable for CoAP considering the requirements. 
		
</p>
<a name="sub-notify"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.7"></a><h3>2.7.&nbsp;
Subscribe/Notify</h3>

<p>
		CoAP is required to integrate a push model for interaction in addition to traditional request/response. Meaning that interested clients could subscribe to a resource (a URL), and receive notifications to a call-back URL of their choice. In its most basic form a notification would be sent each time the resource changes. There are many issues to consider including managing subscription leasing and timeouts, how to batch multiple changes and how to tune notify times. Before considering the details, there are a few general general models possible for realizing the Subscribe/Notify mechanism:

		</p>
<blockquote class="text"><dl>
<dt>Resource:</dt>
<dd>Subscribe is realized using CREATE on a well known resource (e.g. /subsribe) with the URL of the resource of interest and a URL call-back in the body). Notifications would be made using a NOTIFY message to the call-back URL. Likewise, de-subscribe is realized using DESTROY on the same well known resource with the URL in the body. Notifications would cease after the DESTROY.
</dd>
<dt>Watch:</dt>
<dd>This method would require a CREATE to a new URI to "create" a new watch resource. WRITE is then used to add/remove a set of URIs being "watched" along with call-backs.
</dd>
</dl></blockquote><p>
		
</p>
<a name="transport"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.8"></a><h3>2.8.&nbsp;
Transport Binding</h3>

<p>
		The CoAP protocol will operate by default over UDP and it may optionally be bound to TCP or other reliable transports. In this section we look at the issues regarding these bindings.
		
</p>
<a name="udp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.8.1"></a><h3>2.8.1.&nbsp;
UDP</h3>

<p>
			The goal of binding CoAP to UDP is to provide the bare minimum features for the protocol to operate over UDP, going nowhere near trying to re-create the full feature set of TCP. The bare minimum features required would be:
			</p>
<ul class="text">
<li>Stop-and-wait would be sufficient for reliability. A simple response message itself would suffice as an acknowledgement with retransmission support. Not all requests require reliability, thus this should be optional. Performance is not the key here and for more sophisticated reliability and flow control TCP can be used.
</li>
<li>A sequence number (transaction ID) is needed to match responses to open requests and would be generated by the client. A 12-16 bit unsigned interger would be sufficient. <a class='info' href='#I-D.frank-6lowapp-chopan'>[I&#8209;D.frank&#8209;6lowapp&#8209;chopan]<span> (</span><span class='info'>Frank, B., &ldquo;Chopan - Compressed HTTP Over PANs,&rdquo; September&nbsp;2009.</span><span>)</span></a> also considered this solution.
</li>
<li>Multicast support. Providing reliability with a multicast destination address would be very complex. Therefore the goal is to provide non-reliable multicast service. In many cases there may not be a response to a multi-cast message. A multicast command might result in an action being taken at a device, but no response being sent. Therefore a multicast request may be answered with a unicast response, however without reliability (retransmission e.g.).
</li>
</ul><p>
			
</p>
<a name="tcp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.8.2"></a><h3>2.8.2.&nbsp;
TCP</h3>

<p>
			The CoAP protocol also has the goal of defining a TCP binding. As TCP provides a reliable stream this binding does not require anything special from the CoAP protcol design. The same basic messages could be applied over TCP without stop-and-wait. A transaction ID should still be used over TCP. 
			
</p>
<a name="discovery"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.9"></a><h3>2.9.&nbsp;
Resource Discovery</h3>

<p>
		CoAP is required to support the discovery of resources offered by CoAP servers. In order to achieve this, the protocol would need to suport multicast with optional responses for discovery (over UDP), along with unicast requests and posting of profiles (over UDP or TCP). A well-known resource (/profile) could be used to enable profile discovery through a new DISCOVER method along with profile sending on an optional broker with a CREATE or modification with a WRITE to /profile. The response to a DISCOVER message would include a list of resource URLs available, or those matched if the DISCOVER has a body with one or more URLs. Such a resource list could include optional information such as the URL to a description of the interface.
		
</p>
<p>
		<a class='info' href='#caching'>Section&nbsp;2.6<span> (</span><span class='info'>Caching</span><span>)</span></a> discusses different caching models. If caching would be realized using the Profile model, then the resource list would need to indicate at least the Max-Age of each resource.
		
</p>
<a name="http"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.10"></a><h3>2.10.&nbsp;
HTTP Mapping</h3>

<p>
		It shall be possible to map from CoAP directly to HTTP, CoAP however
		only offers a subset of the HTTP protocol features.  As a result, programs
		implementing translation between HTTP and CoAP must either implement
		other HTTP 1.1 commands on behalf of the CoAP nodes (e.g. LINK, TRACE,
		OPTIONS), or must reject such request. The primary responsibility of a
		program translating between HTTP and CoAP is to rewrite the headers,
		translating between the highly optimized CoAP headers and plain text
		HTTP headers. It must also manage/maintain TCP sessions necessary for HTTP. Depending on how some of the features of CoAP are realized, the mapping may also need to make further translations for subscription or caching. 
		
</p>
<a name="applicability"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Applicability</h3>

<p>
	This sections looks at the applicability of the CoAP features for energy, building automation and other macine-to-machine (M2M) applications. 
	
</p>
<a name="energy"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Energy Applications</h3>

<p>
		Rising energy prices, concerns about global warming and energy resource
		depletion, and societal interest in more ecologically friendly living
		have resulted in government mandates for Smart Energy solutions. In a
		Smart Energy environment consumers of energy have direct, immediate
		access to information about their consumption, and are able to take
		action based on that information.  Smart Energy systems also allow
		device to device communication to optimize the transport, reliability,
		and safety of energy delivery systems.  While often Smart Energy
		solutions are electricity-centric, i.e. Smart Grid, gas and water are
		also subject to the same pressures, and can benefit from the same
		technology.
		
</p>
<p>
		Smart Energy Transactions typically include the exchange of current
		consumption information, text messages from providers to consumers, and control
		signals requesting a reduction in consumption.  Advanced features such
		as billing information, energy prepayment transactions, management of
		distributed energy resources (e.g. generators and photo-voltaics), and
		management of electric vehicles are also being developed.
		
</p>
<p>
		Smart Energy benefits from Metcalfe's Law. The more devices that are
		part of a smart energy network within the home or on the grid, the more
		valuable it becomes. Showing a consumer how much energy they are using
		is useful. Combining that with specific information about their major
		appliances, and enabling them to adjust their consumption based on
		current pricing and system demand is much much more powerful. To do this
		however requires a system that is resillient, low cost, and easy to
		install. In many areas this is being done with systems built around IEEE
		802.15.4 radios. In the United States, there are over 30 million
		electric meters that will be deployed with these radios. These radios
		will be combined to form a mesh network, enabling Smart Energy
		communication within the home. The maximum packet size for IEEE 802.15.4
		is only 127 bytes. Additionally, there is the well known issue of how
		TCP manages congestion working sub-optimally over wireless networks.
		IEEE 802.15.4 is ideal for these applications because of its low cost
		and its support for battery powered devices; however, it is not as well
		suited for heavier protocols like HTTP. These technical issues with IEEE
		802.15.4 networks combined with a desire to facilitate broader
		compatibility, makes a protocol like CoAP desireable.  Its REST
		architecture will allow seamless compatibility with the rest of the
		Internet, allowing it to be easily integrated with web browsers and
		web-based service providers, while at the same time being appropriately
		sized for the low-cost networks necessary for its success.
		
</p>
<a name="ba"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Building Automation</h3>

<p>
		Building automation applications were analyzed in detail including use cases in 
		<a class='info' href='#I-D.martocci-6lowapp-building-applications'>[I&#8209;D.martocci&#8209;6lowapp&#8209;building&#8209;applications]<span> (</span><span class='info'>Martocci, J. and A. Schoofs, &ldquo;Commercial Building Applications Requirements,&rdquo; October&nbsp;2009.</span><span>)</span></a>. Although many of the embedded control solutions for building automation make use of industry-specific application protocols like BACnet over IP, there is a growing use of web services in building monitoring, remote control and IT integration. The OASIS oBIX standard [ref] is one example of the use of web services for the monitoring and interconnection of heterogeneous building systems. Several of the CoAP requirements have been taken from <a class='info' href='#I-D.martocci-6lowapp-building-applications'>[I&#8209;D.martocci&#8209;6lowapp&#8209;building&#8209;applications]<span> (</span><span class='info'>Martocci, J. and A. Schoofs, &ldquo;Commercial Building Applications Requirements,&rdquo; October&nbsp;2009.</span><span>)</span></a>. The resulting features should allow for peer-to-peer interactions as well as node-server request/response and push interfactions for monitoring and some control purposes. For building automation control with very strict timing requirements using e.g. multicast, further features may be required on top of CoAP.
		
</p>
<a name="m2m"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
General M2M Applications</h3>

<p>
		CoAP provides a natural extension of the REST architecture into the domain of constrained nodes and networks, aiming at requirements from automation applications in energy and building automation. A very wide range of machine-to-machine (M2M) applications have similar requirements to those considered in this document, and thus it is foreseen that CoAP may be widely applied in the industry. One standardization group considering a general M2M architecture and API is the ETSI M2M TC [ref], which considers a wide range of applications including energy. Another group developing solutions for general embedded device control is the OASIS Device Proile Web Services (DPWS) group. The consideration of DPWS over 6LoWPAN is available in <a class='info' href='#I-D.moritz-6lowapp-dpws-enhancements'>[I&#8209;D.moritz&#8209;6lowapp&#8209;dpws&#8209;enhancements]<span> (</span><span class='info'>Moritz, G., &ldquo;DPWS for 6LoWPAN,&rdquo; December&nbsp;2009.</span><span>)</span></a>.	
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Conclusions</h3>

<p>  
	   This document analyzed the requirements associated with the design of the foreseen Constrained Application Protocol (CoAP). Based on these requirements a list of minumum features was analyzed along with different options for realizing them. If possible a recommendation was also made where obvious. Finally, the identified features of CoAP are considered for energy, building automation and M2M applications. This document is meant to serve as a basis for the design of the CoAP protocol and relevant discussion.
	   
</p>
<p>
	      CoAP is proposed as a transport agnostic extension of REST for 
   deployment in confined computing environments.  The intent is to
   align CoAP with HTTP wherever possible to leverage the web services
   computing environment already in place.
</p>
<p>
   Whereas REST envisions just 4 primitives (READ, SET, CREATE and DESTROY),
   CoAP proposes to extend this paradigm with a NOTIFY primitive to
   enable publish/subscribe along with a DISCOVER primitive to support
   multicast discovery of services denoted by URL.  The main 
   architectural difference between READ and the new discovery primitive
   is the requirement to not respond if the URL is not present on a
   local device.
</p>
<p>
   Finally, CoAP seeks to preserve the caching facilities of HTTP and
   extend that capability for power saving devices that are not always
   active on the network.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>
         Some of the features considered in this document will need further security considerations during a protocol design. For example the use of string URLs may have entail security risks due to complex processing on limited microcontroller implementations. 
         
</p>
<p>
	   The CoAP protocol will be designed for use with (D)TLS or object security. A protocol design should consider how integration with these security methods will be done, how to secure the CoAP header and other implications.		
	   
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>
         This draft requires no IANA consideration.
	   
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgments</h3>

<p>Thanks to Cullen Jennings for helpful comments and discussions.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.frank-6lowapp-chopan">[I-D.frank-6lowapp-chopan]</a></td>
<td class="author-text">Frank, B., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-frank-6lowapp-chopan-00.txt">Chopan - Compressed HTTP Over PANs</a>,&rdquo; draft-frank-6lowapp-chopan-00 (work in progress), September&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-frank-6lowapp-chopan-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.gold-6lowapp-sensei">[I-D.gold-6lowapp-sensei]</a></td>
<td class="author-text">Gold, R., Krco, S., Gluhak, A., and Z. Shelby, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-gold-6lowapp-sensei-00.txt">SENSEI 6lowapp Requirements</a>,&rdquo; draft-gold-6lowapp-sensei-00 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-gold-6lowapp-sensei-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.martocci-6lowapp-building-applications">[I-D.martocci-6lowapp-building-applications]</a></td>
<td class="author-text">Martocci, J. and A. Schoofs, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-martocci-6lowapp-building-applications-00.txt">Commercial Building Applications Requirements</a>,&rdquo; draft-martocci-6lowapp-building-applications-00 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-martocci-6lowapp-building-applications-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.shelby-6lowapp-encoding">[I-D.shelby-6lowapp-encoding]</a></td>
<td class="author-text">Shelby, Z., Luimula, M., and D. Peintner, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-shelby-6lowapp-encoding-00.txt">Efficient XML Encoding and 6LowApp</a>,&rdquo; draft-shelby-6lowapp-encoding-00 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-shelby-6lowapp-encoding-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.sturek-6lowapp-smartenergy">[I-D.sturek-6lowapp-smartenergy]</a></td>
<td class="author-text">Sturek, D., Shelby, Z., Lohman, D., Stuber, M., and S. Ashton, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-sturek-6lowapp-smartenergy-00.txt">Smart Energy Requiements for 6LowApp</a>,&rdquo; draft-sturek-6lowapp-smartenergy-00 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-sturek-6lowapp-smartenergy-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2046">[RFC2046]</a></td>
<td class="author-text"><a href="mailto:ned@innosoft.com">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com">N. Borenstein</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2046">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>,&rdquo; RFC&nbsp;2046, November&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2046.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.bormann-6lowpan-6lowapp-problem">[I-D.bormann-6lowpan-6lowapp-problem]</a></td>
<td class="author-text">Bormann, C., Sturek, D., and Z. Shelby, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-bormann-6lowpan-6lowapp-problem-01.txt">6LowApp: Problem Statement for 6LoWPAN and LLN Application Protocols</a>,&rdquo; draft-bormann-6lowpan-6lowapp-problem-01 (work in progress), July&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-bormann-6lowpan-6lowapp-problem-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.moritz-6lowapp-dpws-enhancements">[I-D.moritz-6lowapp-dpws-enhancements]</a></td>
<td class="author-text">Moritz, G., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-moritz-6lowapp-dpws-enhancements-00.txt">DPWS for 6LoWPAN</a>,&rdquo; draft-moritz-6lowapp-dpws-enhancements-00 (work in progress), December&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-moritz-6lowapp-dpws-enhancements-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC0792">[RFC0792]</a></td>
<td class="author-text">Postel, J., &ldquo;<a href="http://tools.ietf.org/html/rfc792">Internet Control Message Protocol</a>,&rdquo; STD&nbsp;5, RFC&nbsp;792, September&nbsp;1981 (<a href="http://www.rfc-editor.org/rfc/rfc792.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Zach Shelby</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sensinode</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Kidekuja 2</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vuokatti  88600</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">FINLAND</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358407796297</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:zach@sensinode.com">zach@sensinode.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Michael Garrison Stuber</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Itron</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">2111 N. Molter Road</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Liberty Lake, WA  99025</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">U.S.A.</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1.509.891.3441</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Michael.Stuber@itron.com">Michael.Stuber@itron.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Don Sturek</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Pacific Gas & Electric</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">77 Beale Street</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Francisco, CA  </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1-619-504-3615</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:d.sturek@att.net">d.sturek@att.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Brian Frank</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tridium, Inc</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Richmond, VA  </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:brian.tridium@gmail.com">brian.tridium@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Richard Kelsey</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ember</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">47 Farnsworth Street</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Boston, MA  02210</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">U.S.A.</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1.617.951.1201</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:richard.kelsey@ember.com">richard.kelsey@ember.com</a></td></tr>
</table>
</body></html>
