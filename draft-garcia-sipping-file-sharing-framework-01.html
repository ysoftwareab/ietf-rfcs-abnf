<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Sharing Files with the
    Session Initiation Protocol (SIP)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Sharing Files with the
    Session Initiation Protocol (SIP)">
<meta name="keywords" content="file, sharing, SIP, peer-to-peer">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">SIPPING Working Group</td><td class="header">M. Garcia-Martin</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">M. Matuszewski</td></tr>
<tr><td class="header">Expires: May 19, 2008</td><td class="header">Nokia</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">N. Beijar</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Helsinki University of Technology</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">J. Lehtinen</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Tellabs</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">November 16, 2007</td></tr>
</table></td></tr></table>
<h1><br />Sharing Files with the
    Session Initiation Protocol (SIP)<br />draft-garcia-sipping-file-sharing-framework-01</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on May 19, 2008.</p>

<h3>Abstract</h3>

<p>
	This memo proposes a SIP framework used for advertising and
	searching for shared files within a given community. The memo
	defines the signaling that users to announce the availability
	of files stored in their User Agents (UA). It also
	provides the signaling for users to perform searches of
	available files and monitor changes in those
	files. Additionally, this memo describes the signaling used to
	access a file. These methods can be used in (but are not
	limited to) SIP peer-to-peer systems based on centralized,
	semi-centralized or fully distributed architectures.
      
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Definitions and Document Conventions<br />
<a href="#anchor3">3.</a>&nbsp;
Use Cases<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
File Publication<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.2.</a>&nbsp;
File Search<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.3.</a>&nbsp;
File Directory Through Presence Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.4.</a>&nbsp;
File Download<br />
<a href="#anchor8">4.</a>&nbsp;
Publication of File Metadata<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">4.1.</a>&nbsp;
File Metadata Publication in Support of Search
		  Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#publication">4.1.1.</a>&nbsp;
Initial File Metadata Publication<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#publication-modified">4.1.2.</a>&nbsp;
Publication of Modified File Metadata<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">4.1.3.</a>&nbsp;
Actions Performed by the ESC<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">4.2.</a>&nbsp;
File Metadata Publication in Support of Directory
		 Operations<br />
<a href="#search-operation">5.</a>&nbsp;
Search Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">5.1.</a>&nbsp;
Sending a Search Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">5.2.</a>&nbsp;
Reporting Search Results<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">5.3.</a>&nbsp;
Propagating Searches<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">5.3.1.</a>&nbsp;
Searching Based on Flooding<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">5.3.2.</a>&nbsp;
Searching Based on Distributed Hash Tables (DHT)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">5.4.</a>&nbsp;
Terminating a Search Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">5.5.</a>&nbsp;
Example of a Search Filter<br />
<a href="#directory-through-presence">6.</a>&nbsp;
Directory Operations Through Presence Information<br />
<a href="#downloading">7.</a>&nbsp;
Downloading a file<br />
<a href="#anchor19">8.</a>&nbsp;
Security Considerations<br />
<a href="#anchor20">9.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">10.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">10.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
   The <a class='info' href='#RFC3261'>Session Initiation Protocol (SIP)<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261]
   is a text-based protocol for initiating and managing communication
   sessions. The protocol is extended by the <a class='info' href='#RFC3265'>SIP-events framework<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] to provide a mechanism
   whereby a user can subscribe to state changes of resources and get
   notifications when the state of the resource changes. SIP also
   provides a <a class='info' href='#RFC3903'>publication mechanism<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903] that
   allows a user to supply resource metadata related to the state and
   changes in the state of such resource. A <a class='info' href='#I-D.garcia-sipping-file-event-package'>'file' event
   package<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;A Session 		Initiation Protocol (SIP) Event Package and Data 		Format for File Metadata Description,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;sipping&#8209;file&#8209;event&#8209;package] is used to allow SIP User Agents to publish,
   subscribe, and get notifications of the availability of files, such
   as images, video files, audio files, etc. The 'file' event package
   reuses the <a class='info' href='#I-D.garcia-app-area-file-data-format'>XML
   Data Format for descibing files<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;An Extensible Data Format (XML) for Describing Files,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;app&#8209;area&#8209;file&#8209;data&#8209;format]. All these building blocks
   can be easily combined to provide a mechanism whereby users can
   supply the availability of files stored in their user agents. The
   mechanism can also provide a directory search within a publishing
   community, so that members of the community can search for the
   availability of files that have been made available by other
   members of the same community, and then further download selected
   files.
  
</p>
<p>
   Think for example of a user, Alice, who wants to make a set of
   image files available to members of her family. She sets up a SIP
   peer-to-peer network with her family, and publishes the file
   metadata describing her available files. The file metadata is
   stored in the peer nodes, for example, in each Alice's family user
   agents. Then, Bob, a member of the same SIP peer-to-peer network,
   wants to acquire those pictures, tagged with a keyword
   'vacation'. He defines the search criteria; his SIP UA creates an
   appropriate filter and sets up a short subscription by sending it
   to the SIP peer-to-peer network. Then he receives notifications
   from the different peer nodes, containing a metadata describing the
   searched files.
  
</p>
<p>
   In another scenario, a centralized server can be used to aggregate
   all the state file metadata. This might be useful in cases
   where several instances of the same file are available at
   different SIP user agents. The server will act as a state agent
   (defined in <a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265]) and Event State
   Compositor (ESC) (defined in <a class='info' href='#RFC3903'>RFC
   3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903]). The aggregation the server performs relieves the
   endpoints from doing the aggregation itself, so this is an
   interesting scenario in deployments that involve endpoints with
   limited processing capability and network bandwidth.
  
</p>
<p>
   A hybrid scenario is also possible, where, for example, User Agents
   act as secondary nodes (ordinary peers) in a SIP peer-to-peer
   network. ESCs are primary nodes (super peers). In this scenario,
   publication of file metadata and search operations takes place
   between the secondary and the primary nodes. The primary nodes keep
   the state consistent among themselves proactively according to a
   well-defined Distributed Hash Table (DHT) algorithm (e.g. Chord),
   or alternatively, distribute the search request among themselves
   reactively when a file is needed.
  
</p>
<p>
   This memo describes a framework where SIP is used for advertising
   and searching for shared files. The
   framework defines the signaling used for users to signal the
   availability of files stored in their User Agents (UA). It also
   describes the signaling used for users to perform searches of
   available files and monitor changes in existing
   files. Additionally, signaling used to download a file from a
   remote UA is provided. These methods can be used in (but are not
   limited to) SIP peer-to-peer systems based on centralized,
   semi-centralized or fully distributed architectures. While other
   protocols and mechanisms can be used to achieve similar purposes,
   it is a beneficial to provide the means to use SIP in order to
   minimize the protocol implementation support, especially in
   endpoints with limited resources.
  
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Definitions and Document Conventions</h3>

<p>
   In addition to the definitions of <a class='info' href='#RFC3265'>RFC
   3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265], and <a class='info' href='#RFC3903'>RFC 3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903], this
   document introduces the following new terms:
  
</p>
<p></p>
<blockquote class="text"><dl>
<dt>Community:</dt>
<dd>
     A collection of loosely coupled SIP user agents that agree to
     share files among members of the community. A community can
     be composed of, e.g., an enterprise, a group of friends, family
     members, or members of a club. The community concept implies that
     there are only duly authenticated and authorized users who can access
     files. 
   
</dd>
<dt>File metadata:</dt>
<dd>
     A set of properties describing a file. The file
     metadata can include the hash of the file, its name,
     creation date, Uniform Resource Name (URN), Uniform Resource
     Identifier (URI), and other relevant information.
   
</dd>
<dt>File descriptor:</dt>
<dd>
     A subset of the file metadata that uniquely identifies the file.
   
</dd>
<dt>File directory:</dt>
<dd>
     A device storing the file descriptors of a set of files;
     also called ESC in this document.
   
</dd>
<dt>Search operation:</dt>
<dd>
     Signalling issued by a user to get information of the available
     files and its associated metadata. Typically search
     operations are delimited with search filters.
   
</dd>
<dt>Search filter:</dt>
<dd>
     A set of properties used in search operations to set the limits
     of the search, based on user's input. A search filter can consist
     of, e.g., a file name, file type, a files description,
     etc. 
   
</dd>
<dt>File transfer operation:</dt>
<dd>
     An operation whereby a UA downloads a file from a remote UA.
   
</dd>
</dl></blockquote>

<p>
   In this document, the key words "MUST", "MUST NOT", "REQUIRED",
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
   and "OPTIONAL" in this document are to be interpreted as described
   in BCP 14, <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to 		  Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119] and indicate
   requirement levels for compliant implementations.
  
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Use Cases</h3>

<p>
   This section describes a number of use cases that are addressed
   later in this document. The use cases are just examples, and do not
   intend to limit the applicability of the file sharing
   framework.
  
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
File Publication</h3>

<p>
   Alice is on holiday in Monaco. While visiting the Casino, she sees
   a famous painting which she takes a picture of with her camera
   phone. After taking the photo, she tags it with the following tags:
   Alice, Holiday, Monaco, Painting, Casino. These tags are there to
   help her and her friends to locate the picture later.
  
</p>
<p>
   Alice knows that her friends are also interested in art, so she
   wants to make this picture available for anyone to download. Alice
   selects the picture of the painting, along with some other pictures
   she took later that day, in the picture browser application and
   selects the publish option to make the picture available for others
   to see. Once the selection of shared files is done, the SIP UA
   publishes the availability of those pictures towards an Event
   State Compositor (ESC). The actual files are not transmitted until
   someone requests them. 
  
</p>
<p>
   File publication is further discussed in <a class='info' href='#publication'>Section&nbsp;4.1.1<span> (</span><span class='info'>Initial File Metadata Publication</span><span>)</span></a>.
  
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
File Search</h3>

<p>
   While talking with Charlie on the phone, Bob learns that Alice is
   currently on vacation in Monaco. Bob knows that Alice likes to take
   photos and share them with her friends, so he opens up his search
   application and types in a few keywords: 'Alice' and 'Monaco'. Once
   Bob hits the search button, his SIP UA sends the search message to
   the ESC.  After a while, the ESC sends the search results back to
   Bob's SIP UA in a series of notifications. Now Bob can see the
   names of all pictures Alice has taken when she was in Monaco. Bob's
   application may also download and display thumbnails of the
   pictures. Bob also finds a couple of pictures taken by Alice's
   friend, Eve, which have been tagged with the tags: 'Alice' and
   'Monaco'.
  
</p>
<p>
   Dave is a student of art. On the bus he meets his friend Eve. While
   chatting, Eve tells about the painting she has seen on her recent
   visit in Monaco. Dave wonders if there are some pictures of it, and
   enters the keywords 'Monaco' and 'Painting' into the application on
   his mobile phone. Dave hits the search button, and his SIP UA sends
   the search message to the ESC. After a while, the ESC sends the
   search results back to his SIP UA in a series of notifications. The
   application displays a list of files matching the keywords,
   including the pictures Alice and other visitors have taken. To his
   surprise, Dave also finds a video stream presenting the art museums
   of Monaco.
  
</p>
<p>
   Search operations are further discussed in <a class='info' href='#search-operation'>Section&nbsp;5<span> (</span><span class='info'>Search Operation</span><span>)</span></a>.
  
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
File Directory Through Presence Information</h3>

<p>
   Charlie is a good friend of Alice. Therefore he is interested to
   know about new pictures that Alice publishes. In this case he can
   just subscribe to Alice's presence information. Attached with
   conventional the presence information, he receives the information
   about the files Alice is hosting in her UAs.
  
</p>
<p>
   Instead of periodical searching for files tagged with Alice's name,
   Charlie can just subscribe to Alice's presence information, and get
   notification every time Alice adds new pictures to her shared
   files. 
  
</p>
<p>
   The same file browsing functionality can be used also in multi-user
   chat between Alice, Charlie, Eve, and Bob. In the chat application,
   Bob sees names of every participant in the user list displayed on
   his screen. When clicking anyone's name, he gets list of files that
   the selected participant is hosting attached with the conventional
   presence information of this person.
  
</p>
<p>
   This document does not specify implementation of the file browsing
   via presence information. A solution is described in the
   Internet-Draft <a class='info' href='#I-D.garcia-sipping-file-desc-pidf'>'File
   Descriptions Extension to the PIDF'<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;File 		Descriptions Extension to the Presence Information 		Data Format (PIDF),&rdquo; June&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;sipping&#8209;file&#8209;desc&#8209;pidf].
  
</p>
<p>
    File directory through presence information is further
    discussed in <a class='info' href='#directory-through-presence'>Section&nbsp;6<span> (</span><span class='info'>Directory Operations Through Presence Information</span><span>)</span></a>.
  
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
File Download</h3>

<p>
   Once a Bob has found an interesting file called 'Alice and Eve at
   the Casino', e.g., by using the search functionality or by browsing
   Alice's presence information for files, he wants to display that
   picture on his device. To initiate the download, Bob selects the
   picture and hits the download button. Bob's SIP UA sends a download
   request to Alice's SIP UA. Alice's terminal will automatically
   approve the request and their UAs will establish a file transfer
   session. After the file transfer, Bob is presented with a dialog of
   file transfer completion, and asked if he wants to open the file
   immediately in the picture viewer.
  
</p>
<p>
   <a class='info' href='#downloading'>Section&nbsp;7<span> (</span><span class='info'>Downloading a file</span><span>)</span></a> provides further discussion on
   downloading files.
  
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Publication of File Metadata</h3>

<p>
    Publication of File Metadata is based on the PUBLISH method
    specified in <a class='info' href='#RFC3903'>RFC 3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903]. We proposed
    two variants of publication, depending on whether the publication
    supports search operations or directory operations. To support the
    former, publication is done with the <a class='info' href='#I-D.garcia-sipping-file-event-package'>'file' event
    package<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;A Session 		Initiation Protocol (SIP) Event Package and Data 		Format for File Metadata Description,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;sipping&#8209;file&#8209;event&#8209;package] and the <a class='info' href='#I-D.garcia-app-area-file-data-format'>'file-metadata' XML
    format<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;An Extensible Data Format (XML) for Describing Files,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;app&#8209;area&#8209;file&#8209;data&#8209;format]. To support the later, the <a class='info' href='#RFC3863'>Presence Information Data Format (PIDF)<span> (</span><span class='info'>Sugano, H., Fujimoto, S., Klyne, G., Bateman, A., Carr, W., and J. Peterson, &ldquo;Presence Information Data Format (PIDF),&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3863]
    is extended to provide a description of available files together
    with the presence information of the presentity.
  
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
File Metadata Publication in Support of Search
		  Operations</h3>

<a name="publication"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
Initial File Metadata Publication</h3>

<p>
    Initial file metadata publication is perfomed to publish
    metadata about the availability of one or more files to the
    ESC. <a class='info' href='#publication-signaling'>Figure&nbsp;1<span> (</span><span class='info'>Signaling flow for publication of file metadata</span><span>)</span></a> presents the
    signaling flow required for an Event Publishing Agent (EPA) to
    publish the availability of one or more files towards the
    Event State Compositor (ESC).
   
</p><br /><hr class="insert" />
<a name="publication-signaling"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
EPA                                     ESC
 |                                       |
 |  SIP/2.0 PUBLISH                      |
 |  Event: file                          |
 |  (file-metadata document)             |
 | ------------------------------------&gt; |
 |                                       |
 |  200 OK SIP/2.0                       |
 |  SIP-ETag: x                          |
 | &lt;------------------------------------ |
 |                                       |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Signaling flow for publication of file metadata&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
    The EPA performs the initial file metadata publication by sending
    a <a class='info' href='#RFC3903'>PUBLISH<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903] request to the ESC. The
    PUBLISH request contains a full 'file-metadata' document that
    contains metadata about one or more files available at the
    EPA. The 'file-metadata' document is defined in the <a class='info' href='#I-D.garcia-app-area-file-data-format'>XML data format for
    describing files<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;An Extensible Data Format (XML) for Describing Files,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;app&#8209;area&#8209;file&#8209;data&#8209;format]. Each file is described using a set of
    invariant file metadata and a set of file metadata specific to
    each instance of the file, given in the &lt;identity&gt; and
    &lt;instance&gt; child elements of the &lt;file&gt; element.
   
</p>
<p>
    The invariant file metadata contains the following attributes: the
    Uniform Resource Name (URN), the MIME type (e.g., image/jpeg), the
    size and the SHA-1 hash of the file. For each identical copy of
    the file, the instance-specific metadata contains any of: the SIP
    URI of the file, the file name, a short description, a set of
    keywords describing the file, the file creation date, the file
    modification date, the file read date, a link to an icon, and
    other file metadata that is associated to the file. Additionally
    the instance-specific metadata contains the SIP AOR (e.g. URI) and
    GRUU of the user's endpoint hosting the file.
   
</p>
<p>
    The PUBLISH request is routed to the ESC. The ESC sends a 200 OK
    response that, according to <a class='info' href='#RFC3903'>RFC
    3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903], includes a SIP-ETag header field that contains the
    entity-tag allocated to the resource. The EPA stores this
    entity-tag for future references to the publication. 
   
</p>
<p></p>
<blockquote class="text">
<p>
      Note that the actual file is not transmitted at any point to the
      ESC: only the metadata associated with the file is transmitted. 
     
</p>
</blockquote>

<a name="publication-modified"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.2"></a><h3>4.1.2.&nbsp;
Publication of Modified File Metadata</h3>

<p>
    Whenever a file is modified or new files are added or
    deleted from the endpoint, the EPA refreshes the previous
    publication by sending a new PUBLISH request, as shown in <a class='info' href='#modified-publication-signaling'>Figure&nbsp;2<span> (</span><span class='info'>Signaling flow for publication of modified file 		  metadata</span><span>)</span></a>. This publication
    carries a partial 'file-metadata' document that contains a number of
    XML patch operations that add, remove, or replace XML elements
    towards the last published 'file-metadata' document.
   
</p>
<p></p>
<blockquote class="text">
<p>
      A file modification occurs, e.g., when an image file is
      edited to suppress red eyes, an audio file is edited to suppress
      silence or apply some noise filter, or when some audio/music
      stream provided by the UE changes its bitrate. Any kind of
      modification to the file owned by the UE implies a change in
      the metadata.
</p>
</blockquote>

<p>
    <a class='info' href='#RFC3903'>RFC 3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903] contains provisions to
    allow the ESC to distinguish an initial publication from a
    refreshment-based one with the aid of the entity tags and the
    SIP-ETag and SIP-If-Match header fields. The SIP-Etags in
    conjunction with the 'version' attribute of the root element of
    the 'file' document provide the means to synchronize
    versions.
   
</p><br /><hr class="insert" />
<a name="modified-publication-signaling"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
EPA                                     ESC
 |                                       |
 |  SIP/2.0 PUBLISH                      |
 |  SIP-If-Match: x                      |
 |  Event: file                          |
 |  (file-metadata document)             |
 | ------------------------------------&gt; |
 |                                       |
 |  200 OK SIP/2.0                       |
 |  SIP-ETag: y                          |
 | &lt;------------------------------------ |
 |                                       |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Signaling flow for publication of modified file
		  metadata&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
    If a resouce becomes unavailable at the EPA, e.g., as a result of
    a file deletion, the file metadata publication contains a partial
    'file-metadata' document that describes the file to be removed. 
   
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.3"></a><h3>4.1.3.&nbsp;
Actions Performed by the ESC</h3>

<p>
   When the ESC receives initial or updated publications, the ESC
   typically locally stores the published metadata, but in some
   cases, depending on the usage scenario, storage of metadata will
   take place in other nodes, for example, in other primary nodes
   which are members of a DHT.
  
</p>
<p>
   The ESC may act as a primary node in an overlay SIP P2P
   network. Thus, upon reception of a publication from one of its
   secondary nodes, the primary node may need to publish or update the
   metadata in the overlay P2PSIP network. This step heavily depends
   on the chosen peer-to-peer algorithm. For example, if the P2PSIP
   distribution algorithm is based on flooding, the primary node may
   not need to contact any other primary node, but just wait for
   search queries from them. However, if the overlay is based on a
   Distributed Hash Table (DHT) based algorithm, then the primary node
   may need to update file metadata and store it in the
   appropriate node. The actual mechanism to update file metadata
   is dependent on the specific algorithm and out of scope of this
   memo.
  
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
File Metadata Publication in Support of Directory
		 Operations</h3>

<p>
  Publication of file metadata in support of directory operations is
  done by extending the presence information data format (PIDF). PIDF
  is commonly used in publications and notifications of presence
  information. The publisher composes a <a class='info' href='#RFC3863'>PIDF<span> (</span><span class='info'>Sugano, H., Fujimoto, S., Klyne, G., Bateman, A., Carr, W., and J. Peterson, &ldquo;Presence Information Data Format (PIDF),&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3863] document according to the <a class='info' href='#RFC4479'>Presence
  Data Model<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Data Model for Presence,&rdquo; July&nbsp;2006.</span><span>)</span></a> [RFC4479]. The &lt;device&gt; element of the data model
  contains the file metadata. This is further described in a the
  Internet-Draft <a class='info' href='#I-D.garcia-sipping-file-desc-pidf'>'File Descriptions
  Extension to the PIDF'<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;File 		Descriptions Extension to the Presence Information 		Data Format (PIDF),&rdquo; June&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;sipping&#8209;file&#8209;desc&#8209;pidf].
 
</p>
<p>
  Publication of presence information contains a number of mechanisms
  that complement publication operations, for example, partial
  publication, presence authorization rules, etc., are always at the
  presentity's disposal.
 
</p><br /><hr class="insert" />
<a name="publication-presence"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
EPA                                     ESC
 |                                       |
 |  SIP/2.0 PUBLISH                      |
 |  Event: presence                      |
 |  (PIDF + data model +                 |
 |   file-metadata in body)              |
 | ------------------------------------&gt; |
 |                                       |
 |  200 OK SIP/2.0                       |
 |  SIP-ETag: x                          |
 | &lt;------------------------------------ |
 |                                       |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Signaling flow for publication of presence
		  information that includes file metadata&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
     Publication of modified file metadata in the PIDF is done
     similarly to the publication of modified file metadata (see <a class='info' href='#publication-modified'>Section&nbsp;4.1.2<span> (</span><span class='info'>Publication of Modified File Metadata</span><span>)</span></a>), but the event package is set to
     presence. 
   
</p>
<a name="search-operation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Search Operation</h3>

<p>
   The search of shared files is implemented with the SIP event
   framework defined in <a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] in
   conjunction with the <a class='info' href='#I-D.garcia-sipping-file-event-package'>'file'
   event package<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;A Session 		Initiation Protocol (SIP) Event Package and Data 		Format for File Metadata Description,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;sipping&#8209;file&#8209;event&#8209;package] and a <a class='info' href='#RFC4661'>filter document<span> (</span><span class='info'>Khartabil, H., Leppanen, E., Lonnfors, M., and J. Costa-Requena, &ldquo;An Extensible Markup Language (XML)-Based Format for Event Notification Filtering,&rdquo; September&nbsp;2006.</span><span>)</span></a> [RFC4661].
  
</p>
<p>
   The signaling flow for a search operation is shown in <a class='info' href='#search-signaling'>Figure&nbsp;4<span> (</span><span class='info'>Signaling flow of a search operation</span><span>)</span></a>.
  
</p><br /><hr class="insert" />
<a name="search-signaling"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
Subscriber                           Notifier
 |                                       |
 |  SIP/2.0 SUBSCRIBE                    |
 |  Event: file                          |
 |  (search filter in body)              |
 | ------------------------------------&gt; |
 |                                       |
 |  200 OK SIP/2.0                       |
 | &lt;------------------------------------ |
 |                                       |
 |  SIP/2.0 NOTIFY                       |
 |  Event: file                          |
 | &lt;------------------------------------ |
 |                                       |
 |  200 OK SIP/2.0                       |
 | ------------------------------------&gt; |
 |                                       |
 |  SIP/2.0 NOTIFY                       |
 |  Event: file                          |
 |  (file-metadata document in body)     |
 | &lt;------------------------------------ |
 |                                       |
 |  200 OK SIP/2.0                       |
 | ------------------------------------&gt; |
 |                                       |
 |  SIP/2.0 NOTIFY                       |
 |  Event: file                          |
 |  Subscription-State: terminated       |
 |  (file-metadata document in body)     |
 | &lt;------------------------------------ |
 |                                       |
 |  200 OK SIP/2.0                       |
 | ------------------------------------&gt; |
 |                                       |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Signaling flow of a search operation&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Sending a Search Request</h3>

<p>
     To search for a particular file, the subscriber first builds a filter
     containing the data of the searched file. The filter can
     contain, for example, keywords, file names, types of files,
     etc. The filter conforms to the <a class='info' href='#RFC4661'>XML format for
     filters<span> (</span><span class='info'>Khartabil, H., Leppanen, E., Lonnfors, M., and J. Costa-Requena, &ldquo;An Extensible Markup Language (XML)-Based Format for Event Notification Filtering,&rdquo; September&nbsp;2006.</span><span>)</span></a> [RFC4661]. Then the subscriber attaches the filter to a SUBSCRIBE
     request for the 'file' event package. The subscription duration
     will be short, typically on the order of a few minutes. This
     subscription time provides enough time for a primary node in a
     SIP peer-to-peer network to propagate the search within the
     overlay network and get responses before the subscription
     expires. Eventually, the SUBSCRIBE request is sent to a notifier
     (either a peer or an ESC) that will provide one or more NOTIFY
     requests including a 'file-metadata' document according to the
     filtered content. 
    
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Reporting Search Results</h3>

<p>
     After receiving the SUBSCRIBE request and acknowledging it with a
     200 (OK) response, the notifier sends a NOTIFY request to the
     subscriber. This request may contain a first collection of file
     metadata about the searched file, if such information is already
     available in the ESC, in a full 'file-metadata'
     document. Information may be available immediately in case there
     is matching metadata stored in the ESC, due to push operations
     according to the peer-to-peer algorithm, or due to cached
     information from previous searches. In many cases, however, this
     NOTIFY request does not contain a 'file-metadata' document about
     the searched file, and it is sent just because the protocol
     (<a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265]) requires an immediate
     NOTIFY after each successful SUBSCRIBE request. The NOTIFY
     request is acknowledged with a 200 (OK) response.
    
</p>
<p>
     The ESC may, depending on algorithm, invoke a search for
     additional files, whose metadata is stored in other ESCs (see
     section 4.3). Due to this propagated search, additional matching
     file descriptors may become known. New matching file
     descriptors may also become known as a result of PUBLISH requests
     received by the ESC within the duration of the subscription. 
    
</p>
<p>
     To report matching files, the ESC sends NOTIFY requests to the
     subscriber. The body of the initial NOTIFY contains follows the
     procedures of the <a class='info' href='#I-D.garcia-sipping-file-event-package'>'file' event
     package<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;A Session 		Initiation Protocol (SIP) Event Package and Data 		Format for File Metadata Description,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;sipping&#8209;file&#8209;event&#8209;package] and contains a full 'file-metadata' document that
     is formatted according to the <a class='info' href='#I-D.garcia-app-area-file-data-format'>XML Data Format for
     describing files<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;An Extensible Data Format (XML) for Describing Files,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;app&#8209;area&#8209;file&#8209;data&#8209;format]. The 'file-metadata' document contains
     metadata about several files that matched the search criteria,
     including the file name, size, type, icon, hash, SIP URI and UE
     (GRUU) of the users (and UAs) where the file is available,
     etc. In some cases, the file metadata that describes a given file
     will provide more than one location of the file. This will
     typically be the case when a popular file is available in several
     endpoints. Then the 'file-metadata' document supplied with the
     NOTIFY request contains more than one &lt;instance&gt; child
     element in a given &lt;file&gt;element. It may also be necessary
     to divide a NOTIFY request into several smaller due to the user's
     preferences (rate of notifications, bandwidth consumption, and
     event throttling). NOTIFY requests are acknowledged with 200 (OK)
     responses.
    
</p>
<p>
     The initial NOTIFY request contains a full 'file-metadata'
     document. Once the notifier acquires more metadata, it sends
     partial 'file-metadata' documents with additions, replacements,
     or removals. Upon reception of a new partial 'file-metadata'
     document, the subscriber composes a full 'file-metadata'
     document, based on the existing previous version plus the partial
     notification. Then, the subscriber UA has the new full
     'file-metadata' document at his disposal, so it can, e.g.,
     display the metadata sequentially to the user, as soon as new
     results are received.
    
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Propagating Searches</h3>

<p>
     In many cases, such as in P2P systems, the metadata is
     distributed in several ESCs. We consider two special cases: 
    
</p>
<p></p>
<ol class="text">
<li>
       In a flooding based architecture, several or all ESCs need to
       be queried in order to find the matching file. A given ESC
       is only aware of file that have been published into its
       local database.
      
</li>
<li>
       In a DHT based architecture, such as Chord, a specific ESC is
       responsible for a specific set of metadata. 
      
</li>
</ol>

<p>
     In both cases, the ESC/ESCs containing the required file metadata may
     be another ESC than the one receiving the SUBSCRIBE request. 
    
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.1"></a><h3>5.3.1.&nbsp;
Searching Based on Flooding</h3>

<p>
     In a flooding based search, the SUBSCRIBE request is first
     processed by the local ESC itself, and then distributed to all
     ESCs in the system. The distribution is, however, limited by the
     value of the Max-Forwards header field. An ESC receiving the
     SUBSCRIBE request consults its local database to find matching
     file descriptors and it replies with a NOTIFY request that may contain a
     'file-metadata' document if matching file descriptors are found
     locally. The ESC also acts as an <a class='info' href='#RFC4662'>URI-list
     server<span> (</span><span class='info'>Roach, A., Campbell, B., and J. Rosenberg, &ldquo;A Session Initiation Protocol (SIP) Event Notification Extension for Resource Lists,&rdquo; August&nbsp;2006.</span><span>)</span></a> [RFC4662] where the URI-list is locally stored. It then
     forwards a SUBSCRIBE request with the same filter document to
     each of the ESCs stored in its neighbor table, providing that the
     Max-Forwards header field is still positive and provided that the ESC
     has not yet processed the same request. The generation and
     maintenance of the neighbor table is out of scope of this memo.
    
</p>
<p>
     The ESC will receive NOTIFY requests from other neighbor nodes,
     each of the requests containing a different 'file-metadata'
     document. The ESC will aggregates and composes a single
     'file-metadata' document, and sends partial notifications to the
     subscriber, according to the rate of notifications.
    
</p>
<p>
     The subscriber is getting periodic partial notifications, each
     one adding new files or new instances of existing
     files to the list of file descriptors.
    
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.2"></a><h3>5.3.2.&nbsp;
Searching Based on Distributed Hash Tables (DHT)</h3>

<p>
     In a DHT based system, a single node (a notifier) is responsible
     for the metadata related to a given search key (the
     file). When searching a file, the hash of the file is the key
     in the DHT. An ESC receiving a SUBSCRIBE request consults its
     routing table (finger table in Chord) to locate the notifier
     whose key is the closest one to the search key, and forwards the
     SUBSCRIBE request to that ESC. Eventually the SUBSCRIBE request
     reaches the node responsible for the given search key. The
     definition of 'closest' is depending on the actual DHT used.
    
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Terminating a Search Request</h3>

<p>
     When the last results are made available, or when the search
     operation expires, the server sends a last NOTIFY request to the
     user, containing the latest available results in a
     'file-metadata' document (if any), and setting the
     Subscription-State header field to "terminated" to indicate the
     end of the search operation, as per procedures of <a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265].
    
</p>
<p>
     The user can also cancel the search operation by sending a
     re-SUBSCRIBE request that contains a Expires header field set to
     zero, according also to the procedures of <a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265].
    
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
Example of a Search Filter</h3>

<p>
     <a class='info' href='#search-signaling'>Figure&nbsp;4<span> (</span><span class='info'>Signaling flow of a search operation</span><span>)</span></a> provides the signaling
     flow for a search operation. The SUBSCRIBE request contains a
     filter body, formatted according to the <a class='info' href='#RFC4661'>filter data
     format<span> (</span><span class='info'>Khartabil, H., Leppanen, E., Lonnfors, M., and J. Costa-Requena, &ldquo;An Extensible Markup Language (XML)-Based Format for Event Notification Filtering,&rdquo; September&nbsp;2006.</span><span>)</span></a> [RFC4661]. <a class='info' href='#search-filter-example'>Figure&nbsp;5<span> (</span><span class='info'>Example of a search filter</span><span>)</span></a> shows
     an example of the SUBSCRIBE request carrying a filter. The filter
     selects a few XML elements of a file that contains the string
     "vacation" in a &lt;keyword&gt; element.
    
</p><br /><hr class="insert" />
<a name="search-filter-example"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
SUBSCRIBE sip:bob@example.com SIP/2.0
Via: SIP/2.0/UDP alice.example.net;branch=z9hG4bKnashds7
Max-Forwards: 70
From: &lt;sip:alice@example.net&gt;;tag=31415
To: &lt;sip:bob@example.com&gt;
Call-ID: b89rjhnedlrfjflslj40a222
CSeq: 61 SUBSCRIBE
Event: file
Expires: 180
Accept: application/file+xml;q=0.3
Contact: &lt;sip:alice.example.com&gt;
Content-Type: application/simple-filter+xml
Content-Length: [length]

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;filter-set xmlns="urn:ietf:params:xml:ns:simple-filter"&gt;
 &lt;ns-bindings&gt;
   &lt;ns-binding prefix="rs" urn="urn:ietf:params:xml:ns:file"/&gt;
 &lt;/ns-bindings&gt;

 &lt;filter id="ad982" uri="sip:bob@example.com"&gt;
  &lt;what&gt;
   &lt;include type="xpath"&gt;
     /rs:file-set/rs:file
   &lt;/include&gt;
   &lt;include type="xpath"&gt;
     /rs:file-set/rs:file/rs:identity/rs:urn
   &lt;/include&gt;
   &lt;include type="xpath"&gt;
     /rs:file-set/rs:file/rs:identity/rs:mime-type
   &lt;/include&gt;
   &lt;include type="xpath"&gt;
     /rs:file-set/rs:file/rs:identity/rs:size
   &lt;/include&gt;
   &lt;include type="xpath"&gt;
     /rs:file-set/rs:file/rs:identity/rs:sha-1
   &lt;/include&gt;
   &lt;include type="xpath"&gt;
     /rs:file-set/rs:file/rs:instance/rs:uri
   &lt;/include&gt;
   &lt;include type="xpath"&gt;
     /rs:file-set/rs:file/rs:instance/rs:user-uri
   &lt;/include&gt;
   &lt;include type="xpath"&gt;
      /rs:file-set/rs:file/rs:instance/rs:user-gruu
   &lt;/include&gt;
   &lt;include type="xpath"&gt;
      /rs:file-set/rs:file/rs:instance/rs:description
   &lt;/include&gt;
   &lt;include type="xpath"&gt;
      /rs:file-set/rs:file/rs:instance[rs:keyword="vacation"]
   &lt;/include&gt;
  &lt;/what&gt;
 &lt;/filter&gt;
&lt;/filter-set&gt;
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Example of a search filter&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="directory-through-presence"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Directory Operations Through Presence Information</h3>

<p>
  Directory operations through presence information allows an
  authorized watcher of presence information to be updated on the
  list available files stored at a presentity's device. In <a class='info' href='#directory-presence'>Figure&nbsp;6<span> (</span><span class='info'>Signaling flow of a directory operation through presence</span><span>)</span></a>, the watcher does a
  regular subscription to the presentity's presence information,
  either directly between the two endpoints, or with the support of a
  Presence Agent (PA). Once the subscription is duly authorized, the
  subscriber receives updated presence information in NOTIFY
  requests. The request contains a PIDF document structured according
  to the presence data model. The 'device' part of the data model
  contains a list of available files that the presentity provides
  at the subscriber's disposal. 
 
</p>
<p>
  All the presence mechanisms are available also in directory
  operations. For example, partial notifications, presence
  authorization rules, filters, etc., are applicable.
 
</p><br /><hr class="insert" />
<a name="directory-presence"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
Subscriber                              PA
 |                                       |
 |  SIP/2.0 SUBSCRIBE                    |
 |  Event: presence                      |
 |  (search filter in body)              |
 | ------------------------------------&gt; |
 |                                       |
 |  200 OK SIP/2.0                       |
 | &lt;------------------------------------ |
 |                                       |
 |  SIP/2.0 NOTIFY                       |
 |  Event: presence                      |
 | &lt;------------------------------------ |
 |                                       |
 |  200 OK SIP/2.0                       |
 | ------------------------------------&gt; |
 |                                       |
 |  SIP/2.0 NOTIFY                       |
 |  Event: presence                      |
 |  (PIDF + data model +                 |
 |   file descriptor in body)            |
 | &lt;------------------------------------ |
 |                                       |
 |  200 OK SIP/2.0                       |
 | ------------------------------------&gt; |
 |                                       |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Signaling flow of a directory operation through presence&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="downloading"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Downloading a file</h3>

<p>
   Once the search operation is complete, the user can select whether
   to do any further operation on a given file, and if so, on which
   instance to operate. A file can be downloaded, for example, by
   setting up an MSRP session towards the user's SIP URI, and
   providing a file description in the SDP offer. This mechanism is
   described in <a class='info' href='#I-D.ietf-mmusic-file-transfer-mech'>[I&#8209;D.ietf&#8209;mmusic&#8209;file&#8209;transfer&#8209;mech]<span> (</span><span class='info'>Garcia, M., Isomaki, M., Camarillo, G., Loreto, S., and P. Kyzivat, &ldquo;A Session Description Protocol (SDP) Offer/Answer Mechanism to Enable File  Transfer,&rdquo; February&nbsp;2009.</span><span>)</span></a>. In this case,
   the SIP INVITE request is addressed (Request-URI) to the URI
   contained in a &lt;user-gruu&gt; (preferred option) or
   &lt;user-uri&gt; elements of the chosen &lt;identity&gt; for that
   &lt;file&gt;. The file requester creates an SDP description of
   an MSRP session that contains the SDP file description extensions
   to describe the file. If the hash of the file is available, it is
   RECOMMENDED to include it, as it uniquely identifies the file.
  
</p>
<p>
   In other cases, there can be a URN or URI that describes the
   file in the &lt;urn&gt; or &lt;uri&gt; elements of that
   &lt;file&gt;. The mechanism to retrieve or receive service from
   the file is dependent on the type of URI scheme. For example, an
   HTTP URI requires an HTTP GET request to retrieve the
   file. Similarly FTP URIs require the establishment of an FTP
   session.
  
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>
   TBD
  
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
IANA Considerations</h3>

<p>
   This document contains no actions to IANA.
  
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to
		  Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="ftp://ftp.isi.edu/in-notes/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3265">[RFC3265]</a></td>
<td class="author-text">Roach, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3265">Session Initiation Protocol (SIP)-Specific Event Notification</a>,&rdquo; RFC&nbsp;3265, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3265.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3863">[RFC3863]</a></td>
<td class="author-text">Sugano, H., Fujimoto, S., Klyne, G., Bateman, A., Carr, W., and J. Peterson, &ldquo;<a href="http://tools.ietf.org/html/rfc3863">Presence Information Data Format (PIDF)</a>,&rdquo; RFC&nbsp;3863, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3863.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3903">[RFC3903]</a></td>
<td class="author-text">Niemi, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3903">Session Initiation Protocol (SIP) Extension for Event State Publication</a>,&rdquo; RFC&nbsp;3903, October&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3903.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4479">[RFC4479]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc4479">A Data Model for Presence</a>,&rdquo; RFC&nbsp;4479, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4479.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.garcia-sipping-file-event-package">[I-D.garcia-sipping-file-event-package]</a></td>
<td class="author-text">Garcia-Martin, M. and M. Matuszewski, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-garcia-sipping-file-event-package-01.txt">A Session
		Initiation Protocol (SIP) Event Package and Data
		Format for File Metadata Description</a>,&rdquo; draft-garcia-sipping-file-event-package-01 (work in progress), November&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-garcia-sipping-file-event-package-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.garcia-sipping-file-desc-pidf">[I-D.garcia-sipping-file-desc-pidf]</a></td>
<td class="author-text">Garcia-Martin, M. and M. Matuszewski, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-garcia-sipping-file-desc-pidf-00.txt">File
		Descriptions Extension to the Presence Information
		Data Format (PIDF)</a>,&rdquo; draft-garcia-sipping-file-desc-pidf-00 (work in progress), June&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-garcia-sipping-file-desc-pidf-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.garcia-app-area-file-data-format">[I-D.garcia-app-area-file-data-format]</a></td>
<td class="author-text">Garcia-Martin, M. and M. Matuszewski, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-garcia-app-area-file-data-format-00.txt">An Extensible Data Format (XML) for Describing Files</a>,&rdquo; draft-garcia-app-area-file-data-format-00 (work in progress), November&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-garcia-app-area-file-data-format-00.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC4661">[RFC4661]</a></td>
<td class="author-text">Khartabil, H., Leppanen, E., Lonnfors, M., and J. Costa-Requena, &ldquo;<a href="http://tools.ietf.org/html/rfc4661">An Extensible Markup Language (XML)-Based Format for Event Notification Filtering</a>,&rdquo; RFC&nbsp;4661, September&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4661.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4662">[RFC4662]</a></td>
<td class="author-text">Roach, A., Campbell, B., and J. Rosenberg, &ldquo;<a href="http://tools.ietf.org/html/rfc4662">A Session Initiation Protocol (SIP) Event Notification Extension for Resource Lists</a>,&rdquo; RFC&nbsp;4662, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4662.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mmusic-file-transfer-mech">[I-D.ietf-mmusic-file-transfer-mech]</a></td>
<td class="author-text">Garcia, M., Isomaki, M., Camarillo, G., Loreto, S., and P. Kyzivat, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mmusic-file-transfer-mech-11.txt">A Session Description Protocol (SDP) Offer/Answer Mechanism to Enable File  Transfer</a>,&rdquo; draft-ietf-mmusic-file-transfer-mech-11 (work in progress), February&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mmusic-file-transfer-mech-11.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Miguel A. Garcia-Martin</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O.Box 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks, FIN  02022</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:miguel.garcia@nsn.com">miguel.garcia@nsn.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Marcin Matuszewski</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O.Box 407</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">NOKIA GROUP, FIN  00045</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:marcin.matuszewski@nokia.com">marcin.matuszewski@nokia.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nicklas Beijar</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Helsinki University of Technology</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O.Box 3000</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">TKK, FIN  02015</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 9 451 5303</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:nbeijar@netlab.tkk.fi">nbeijar@netlab.tkk.fi</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.netlab.tkk.fi/">http://www.netlab.tkk.fi/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Juuso Lehtinen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tellabs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sinimaentie 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Espoo, FI  02630</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 40 820 5223</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:juuso.lehtinen@tellabs.com">juuso.lehtinen@tellabs.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2007).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
