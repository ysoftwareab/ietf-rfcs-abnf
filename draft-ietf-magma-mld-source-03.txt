





MAGMA Working Group                                          B. Haberman
draft-ietf-magma-mld-source-03.txt                      Caspian Networks
Expires April 2003                                          October 2002


                 Source Address Selection for Multicast
                 Listener Discovery Protocol (RFC 2710)


Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet- Drafts.
   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

Abstract

   It has come to light that there is an issue with the selection of a
   suitable IPv6 source address for Multicast Listener Discovery
   messages when a node is performing stateless address
   autoconfiguration.  This memo is intended to clarify the rules on
   selecting an IPv6 address to use for MLD messages.

Introduction

   The original specification of the Multicast Listener Discovery
   Protocol[RFC 2710] mandated the use of a link-local IPv6 source
   address for the transmission of MLD messages.  In addition, MLD also
   requires nodes to send MLD Report messages when joining any IPv6
   multicast group (except the All-Nodes address and addresses of scope
   less than 2).

   These MLD requirements conflict with the use of IPv6 multicast within
   the Neighbor Discovery Protocol[RFC 2461].  For stateless
   autoconfiguration, as defined in [RFC 2462], a node is required to



Haberman                                                        [Page 1]

INTERNET DRAFT                                              October 2002


   join several IPv6 multicast groups in order to perform Duplicate
   Address Detection prior to its use.  Since the only address the node
   has is tentative, and cannot be used for communication, it does not
   have a suitable address to utilize as a source address.

   This document will clarify the IPv6 source address selection rules
   for use with MLD.

Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC 2119].

MLD Source Address Selection Guidelines

   An MLD speaking node is required to choose a suitable IPv6 source
   address for all MLD messages (Report, Done, and Query).

   MLD Query messages MUST be sent with a valid link-local address as
   the IPv6 source address.  If a router receives a query message with
   an IPv6 source address set to the unspecified address (::), it MUST
   silently discard the message and SHOULD log a warning.

   MLD Report and Done messages MUST be sent with a valid link-local
   address as the IPv6 source address.  If a valid link-local address is
   not available, the message MUST be sent with the unspecified address
   (::) as the IPv6 source address.

Source Address Selection Implications

   In RFC 2710, MLD Report and Done messages are required to have an
   IPv6 source address that is link-local.  This memo augments that rule
   by allowing these messages to contain the unspecified address (::) as
   the source address.

   The behavior of RFC 2710 implementations, when receiving a message
   with a source address of ::, is dependent upon how the implementation
   treats the unspecified address.  That is, these messages will be
   dropped if the implementation does not consider the unspecified
   address to be link-local in scope.

   As the unspecified address is only used when there is no link-local
   address, RFC 2710 implementations discarding these packets will have
   no affect on the packet's sender as the use should only be for
   joining the link-local solicited-node multicast group [RFC 2462].

   There is an implication to senders with respect to joining other



Haberman                                                        [Page 2]

INTERNET DRAFT                                              October 2002


   multicast groups prior to the activation of a link-local address.
   The dropping of Reports using the unspecified address as a source
   address could cause a lack of multicast traffic that is expected by
   the node.  This black hole will be termporary until the node can send
   a Report with a valid link-local address.

Security Considerations

   General security issues related to MLD are discussed in [RFC 2710].

   The ability to send MLD messages with the unspecified address can
   lead to on-link abuse that is harder to trace.  However, due to the
   expected behavior of RFC 2710 implementations to drop these messages
   and the additional rule that Query messages with the unspecified
   address be dropped, the impact of such messages will not affect
   multicast capabilities on the link.

References

   Normative References

      [RFC 2710] Deering, S., Fenner, W., Haberman, B., "Multicast
                 Listener Discovery (MLD) for IPv6", RFC 2710, October
                 1999.

   Informative References

      [RFC 2461] Narten, T., Nordmark, E., Simpson, W., "Neighbor
                 Discovery for IP Version 6 (IPv6)", RFC 2461, December
                 1998.

      [RFC 2462] Thomson, S., Narten, T., "IPv6 Stateless Address
                 Autoconfiguration", RFC 2462, December 1998.

      [RFC 2119] Bradner, S., "Key words for use in RFCs to Indicate
                 Requirement Levels", BCP 14, RFC 2119, March 1997.

Author's Address

   Brian Haberman
   Caspian Networks
   One Park Drive
   Suite 400
   Research Triangle Park, NC  27709
   Phone: +1-919-949-4828
   EMail: bkhabs@nc.rr.com

Full Copyright Statement



Haberman                                                        [Page 3]

INTERNET DRAFT                                              October 2002


   Copyright (C) The Internet Society (2002).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice ore references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


























Haberman                                                        [Page 4]
