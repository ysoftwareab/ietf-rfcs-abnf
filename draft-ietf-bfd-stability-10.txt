



Network Working Group                                          A. Mishra
Internet-Draft                                                       SES
Intended status: Standards Track                         M. Jethanandani
Expires: October 14, 2021                                 Kloud Services
                                                               A. Saxena
                                                       Ciena Corporation
                                                           S. Pallagatti
                                                                  VMware
                                                                 M. Chen
                                                                  Huawei
                                                                  P. Fan
                                                            China Mobile
                                                          April 12, 2021


                             BFD Stability
                      draft-ietf-bfd-stability-10

Abstract

   This document describes extensions to the Bidirectional Forwarding
   Detection (BFD) protocol to measure BFD stability.  Specifically, it
   describes a mechanism for detection of BFD packet loss.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on October 14, 2021.

Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents



Mishra, et al.          Expires October 14, 2021                [Page 1]

Internet-Draft                BFD Stability                   April 2021


   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   3
   3.  Use Cases . . . . . . . . . . . . . . . . . . . . . . . . . .   3
   4.  BFD NULL-Authentication Type  . . . . . . . . . . . . . . . .   3
   5.  Theory of Operation . . . . . . . . . . . . . . . . . . . . .   3
     5.1.  Loss Measurement  . . . . . . . . . . . . . . . . . . . .   4
   6.  ietf-bfd-stability YANG Module  . . . . . . . . . . . . . . .   4
     6.1.  Data Model Overview . . . . . . . . . . . . . . . . . . .   4
     6.2.  YANG Module . . . . . . . . . . . . . . . . . . . . . . .   5
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   9
     7.1.  The "IETF XML" Registry . . . . . . . . . . . . . . . . .   9
     7.2.  The "YANG Module Names" Registry  . . . . . . . . . . . .   9
   8.  Security Consideration  . . . . . . . . . . . . . . . . . . .   9
   9.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .  10
   10. Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  10
   11. References  . . . . . . . . . . . . . . . . . . . . . . . . .  10
     11.1.  Normative References . . . . . . . . . . . . . . . . . .  10
     11.2.  Informative References . . . . . . . . . . . . . . . . .  12
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  12

1.  Introduction

   The Bidirectional Forwarding Detection ( BFD) [RFC5880] protocol
   operates by transmitting and receiving BFD control packets, generally
   at high frequency, over the datapath being monitored.  In order to
   prevent significant data loss due to a datapath failure, BFD session
   detection time as defined in BFD [RFC5880] is set to the smallest
   feasible value.

   This document proposes a mechanism to detect lost packets in a BFD
   session in addition to the datapath fault detection mechanisms of
   BFD.  Such a mechanism presents significant value to measure the
   stability of BFD sessions and provides data to the operators for the
   cause of a BFD failure.

   This document does not propose any BFD extension to measure data
   traffic loss or delay on a link or tunnel and the scope is limited to
   BFD packets.



Mishra, et al.          Expires October 14, 2021                [Page 2]

Internet-Draft                BFD Stability                   April 2021


2.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in RFC
   2119 [RFC2119] and RFC 8174 [RFC8174].

   The reader is expected to be familiar with the BFD [RFC5880],
   Optimizing BFD Authentication
   [I-D.ietf-bfd-optimizing-authentication] and BFD Secure Sequence
   Numbers [I-D.ietf-bfd-secure-sequence-numbers].

3.  Use Cases

   Bidirectional Forwarding Detection as defined in BFD [RFC5880] cannot
   detect any BFD packet loss if the loss does not last for detection
   time.  This document proposes a method to detect a dropped packet on
   the receiver.  For example, if the receiver receives BFD control
   packet k at time t but receives packet k+3 at time t+10ms, and never
   receives packet k+1 and/or k+2, then it has experienced a drop.

   This proposal enables BFD implementations to generate diagnostic
   information on the health of each BFD session that could be used to
   preempt a failure on a datapath that BFD was monitoring by allowing
   time for a corrective action to be taken.

   In a faulty datapath scenario, an operator can use BFD health
   information to trigger delay and loss measurement OAM protocol,
   Connectivity Fault Management (CFM) [IEEE802.1ag] or Loss Measurement
   (LM)-Delay Measurement (DM)) as defined by A One-way Active
   Measurement Protocol (OWAMP) [RFC4656] to further isolate the issue.

4.  BFD NULL-Authentication Type

   The functionality proposed for BFD stability measurement is achieved
   by appending an authentication section with the NULL Authentication
   type (as defined in Optimizing BFD Authentication
   [I-D.ietf-bfd-optimizing-authentication] ) to the BFD control packets
   that do not have authentication enabled.

5.  Theory of Operation

   This mechanism allows operators to measure the loss of BFD control
   packets.

   When using MD5 or SHA authentication, BFD uses an authentication
   section that carries the Sequence Number.  However, if non-meticulous
   authentication is being used, or no authentication is in use, then



Mishra, et al.          Expires October 14, 2021                [Page 3]

Internet-Draft                BFD Stability                   April 2021


   the non-authenticated BFD control packets MUST include an
   authentication section with the NULL Authentication type.

5.1.  Loss Measurement

   Loss measurement counts the number of BFD control packets missed at
   the receiver during any Detection Time period.  The loss is detected
   by comparing the Sequence Number field in the Auth TLV (NULL or
   otherwise) in successive BFD control packets.  The Sequence Number in
   each successive control packet generated on a BFD session by the
   transmitter is incremented by one.  This loss count can then be
   exposed using the YANG module defined in the subsequent section.

   The first BFD authentication section with a non-zero sequence number,
   in a valid BFD control packet, processed by the receiver is used for
   bootstrapping the logic.  When using secure sequence numbers, if the
   expected values are pre-calculated, the value must be matched to
   detect lost packets as defined in BFD secure sequence numbers
   [I-D.ietf-bfd-secure-sequence-numbers].

6.  ietf-bfd-stability YANG Module

6.1.  Data Model Overview

   This YANG module augments the "ietf-bfd" module to add to the per-
   session set of counters a 'loss-packet-count' for BFD packets that
   are lost but do not necessarily result in the BFD session going down.
























Mishra, et al.          Expires October 14, 2021                [Page 4]

Internet-Draft                BFD Stability                   April 2021


   module: ietf-bfd-stability
     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/bfd:bfd/bfd-ip-sh:ip-sh
               /bfd-ip-sh:sessions/bfd-ip-sh:session
               /bfd-ip-sh:session-statistics:
       +--ro lost-packet-count?   yang:counter32
     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/bfd:bfd/bfd-ip-mh:ip-mh
               /bfd-ip-mh:session-groups/bfd-ip-mh:session-group
               /bfd-ip-mh:sessions/bfd-ip-mh:session-statistics:
       +--ro lost-packet-count?   yang:counter32
     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/bfd:bfd/bfd-lag:lag
               /bfd-lag:sessions/bfd-lag:session/bfd-lag:member-links
               /bfd-lag:micro-bfd-ipv4/bfd-lag:session-statistics:
       +--ro lost-packet-count?   yang:counter32
     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/bfd:bfd/bfd-lag:lag
               /bfd-lag:sessions/bfd-lag:session/bfd-lag:member-links
               /bfd-lag:micro-bfd-ipv6/bfd-lag:session-statistics:
       +--ro lost-packet-count?   yang:counter32
     augment /rt:routing/rt:control-plane-protocols
               /rt:control-plane-protocol/bfd:bfd/bfd-mpls:mpls
               /bfd-mpls:session-groups/bfd-mpls:session-group
               /bfd-mpls:sessions/bfd-mpls:session-statistics:
       +--ro lost-packet-count?   yang:counter32

6.2.  YANG Module

   This YANG module imports Common YANG Types [RFC6991], A YANG Data
   Model for Routing [RFC8349], and YANG Data Model for Bidirectional
   Forwading Detection (BFD) [I-D.ietf-bfd-yang].

   <CODE BEGINS> file "ietf-bfd-stability@2021-04-11.yang"
   module ietf-bfd-stability {
     yang-version 1.1;
     namespace "urn:ietf:params:xml:ns:yang:ietf-bfd-stability";
     prefix "bfds";

     import ietf-yang-types {
       prefix "yang";
       reference
         "RFC 6991: Common YANG Data Types";
     }

     import ietf-routing {
       prefix "rt";
       reference



Mishra, et al.          Expires October 14, 2021                [Page 5]

Internet-Draft                BFD Stability                   April 2021


         "RFC 8349: A YANG Data Model for Routing Management
          (NMDA version)";
     }

     import ietf-bfd {
       prefix bfd;
       reference
         "I-D.ietf-bfd-yang: YANG Data Model for Bidirectional
          Forwarding Detection.";
     }

     import ietf-bfd-ip-sh {
       prefix bfd-ip-sh;
       reference
         "I-D.ietf-bfd-yang: YANG Data Model for Bidirectional
          Forwarding Detection.";
     }

     import ietf-bfd-ip-mh {
       prefix bfd-ip-mh;
       reference
         "I-D.ietf-bfd-yang: YANG Data Model for Bidirectional
          Forwarding Detection.";
     }

     import ietf-bfd-lag {
       prefix bfd-lag;
       reference
         "I-D.ietf-bfd-yang: YANG Data Model for Bidirectional
          Forwarding Detection.";
     }

     import ietf-bfd-mpls {
       prefix bfd-mpls;
       reference
         "I-D.ietf-bfd-yang: YANG Data Model for Bidirectional
          Forwarding Detection.";
     }

     organization
       "IETF BFD Working Group";

     contact
       "WG Web:   <http://tools.ietf.org/wg/bfd>
        WG List:  <bfd@ietf.org>

        Authors: Mahesh Jethanandani (mjethanandani@gmail.com)
                 Ashesh Mishra (mishra.ashesh@gmail.com)



Mishra, et al.          Expires October 14, 2021                [Page 6]

Internet-Draft                BFD Stability                   April 2021


                 Ankur Saxena (ankurpsaxena@gmail.com)
                 Santosh Pallagatti (santosh.pallagati@gmail.com)
                 Mach Chen (mach.chen@huawei.com)
                 Peng Fan (fanp08@gmail.com).";


     description
       "This YANG module augments the base BFD YANG model to add
        attributes related to BFD Stability. In particular it adds a
        a per session count for BFD packets that are lost.

        Copyright (c) 2021 IETF Trust and the persons identified as
        authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject to
        the license terms contained in, the Simplified BSD License set
        forth in Section 4.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (https://trustee.ietf.org/license-info).

        This version of this YANG module is part of RFC XXXX
        (https://www.rfc-editor.org/info/rfcXXXX); see the RFC itself
        for full legal notices.

        The key words 'MUST', 'MUST NOT', 'REQUIRED', 'SHALL', 'SHALL
        NOT', 'SHOULD', 'SHOULD NOT', 'RECOMMENDED', 'NOT RECOMMENDED',
        'MAY', and 'OPTIONAL' in this document are to be interpreted as
        described in BCP 14 (RFC 2119) (RFC 8174) when, and only when,
        they appear in all capitals, as shown here.";

     revision "2021-04-11" {
       description
         "Initial Version.";
       reference
         "RFC XXXX, BFD Stability.";
     }

     augment "/rt:routing/rt:control-plane-protocols/" +
             "rt:control-plane-protocol/bfd:bfd/bfd-ip-sh:ip-sh/" +
             "bfd-ip-sh:sessions/bfd-ip-sh:session/" +
             "bfd-ip-sh:session-statistics" {
       leaf lost-packet-count {
         type yang:counter32;
         description
           "Number of BFD packets that were lost without bringing the
            session down.";
       }



Mishra, et al.          Expires October 14, 2021                [Page 7]

Internet-Draft                BFD Stability                   April 2021


       description
         "Augment the 'bfd' container to add attributes related to BFD
          stability.";
     }

     augment "/rt:routing/rt:control-plane-protocols/" +
             "rt:control-plane-protocol/bfd:bfd/bfd-ip-mh:ip-mh/" +
             "bfd-ip-mh:session-groups/bfd-ip-mh:session-group/" +
             "bfd-ip-mh:sessions/bfd-ip-mh:session-statistics" {
       leaf lost-packet-count {
         type yang:counter32;
         description
           "Number of BFD packets that were lost without bringing the
            session down.";
       }
       description
         "Augment the 'bfd' container to add attributes related to BFD
          stability.";
     }

     augment "/rt:routing/rt:control-plane-protocols/" +
             "rt:control-plane-protocol/bfd:bfd/bfd-lag:lag/" +
             "bfd-lag:sessions/bfd-lag:session/bfd-lag:member-links/" +
             "bfd-lag:micro-bfd-ipv4/bfd-lag:session-statistics" {
       leaf lost-packet-count {
         type yang:counter32;
         description
           "Number of BFD packets that were lost without bringing the
            session down.";
       }
       description
         "Augment the 'bfd' container to add attributes related to BFD
          stability.";
     }

     augment "/rt:routing/rt:control-plane-protocols/" +
             "rt:control-plane-protocol/bfd:bfd/bfd-lag:lag/" +
             "bfd-lag:sessions/bfd-lag:session/bfd-lag:member-links/" +
             "bfd-lag:micro-bfd-ipv6/bfd-lag:session-statistics" {
       leaf lost-packet-count {
         type yang:counter32;
         description
           "Number of BFD packets that were lost without bringing the
            session down.";
       }
       description
         "Augment the 'bfd' container to add attributes related to BFD
          stability.";



Mishra, et al.          Expires October 14, 2021                [Page 8]

Internet-Draft                BFD Stability                   April 2021


     }

     augment "/rt:routing/rt:control-plane-protocols/" +
             "rt:control-plane-protocol/bfd:bfd/bfd-mpls:mpls/" +
             "bfd-mpls:session-groups/bfd-mpls:session-group/" +
             "bfd-mpls:sessions/bfd-mpls:session-statistics" {
       leaf lost-packet-count {
         type yang:counter32;
         description
           "Number of BFD packets that were lost without bringing the
            session down.";
       }
       description
         "Augment the 'bfd' container to add attributes related to BFD
          stability.";
     }
   }
   <CODE ENDS>

7.  IANA Considerations

7.1.  The "IETF XML" Registry

   This document registers one URIs in the "ns" subregistry of the "IETF
   XML" registry [RFC3688].  Following the format in [RFC3688], the
   following registration is requested:

   URI: urn:ietf:params:xml:ns:yang:ietf-bfd-stability
   Registrant Contact: The IESG
   XML: N/A, the requested URI is an XML namespace.

7.2.  The "YANG Module Names" Registry

   This document registers one YANG module in the "YANG Module Names"
   registry YANG [RFC6020].  Following the format in YANG [RFC6020], the
   following registrations are requested:

   name:         ietf-bfd-stability
   namespace:    urn:ietf:params:xml:ns:yang:ietf-bfd-stability
   prefix:       bfds
   reference:    RFC XXXX

8.  Security Consideration

   The YANG module specified in this document defines a schema for data
   that is designed to be accessed via network management protocols such
   as NETCONF [RFC6241] or RESTCONF [RFC8040].  The lowest NETCONF layer
   is the secure transport layer, and the mandatory-to-implement secure



Mishra, et al.          Expires October 14, 2021                [Page 9]

Internet-Draft                BFD Stability                   April 2021


   transport is Secure Shell (SSH) [RFC6242].  The lowest RESTCONF layer
   is HTTPS, and the mandatory-to-implement secure transport is TLS
   [RFC8446].  The NETCONF Access Control Model (NACM) [RFC8341]
   provides the means to restrict access for particular NETCONF or
   RESTCONF users to a preconfigured subset of all available NETCONF or
   RESTCONF protocol operations and content.

   The YANG module does not define any writeable/creatable/deletable
   data nodes.

   The only readable data nodes in YANG module may be considered
   sensitive or vulnerable in some network environments.  It is thus
   important to control read access (e.g., via get, get-config, or
   notification) to these data nodes.  The model does not define any
   readable subtrees and data nodes.

   The YANG module does not define any RPC operations.

9.  Contributors

   Manav Bhatia

10.  Acknowledgements

   Authors would like to thank Nobo Akiya, Jeffery Haas, Dileep Singh,
   Basil Saji, Sagar Soni, Albert Fu and Mallik Mudigonda who also
   contributed to this document.

11.  References

11.1.  Normative References

   [I-D.ietf-bfd-optimizing-authentication]
              Jethanandani, M., Mishra, A., Saxena, A., and M. Bhatia,
              "Optimizing BFD Authentication", draft-ietf-bfd-
              optimizing-authentication-11 (work in progress), July
              2020.

   [I-D.ietf-bfd-secure-sequence-numbers]
              Jethanandani, M., Agarwal, S., Mishra, A., Saxena, A., and
              A. DeKok, "Secure BFD Sequence Numbers", draft-ietf-bfd-
              secure-sequence-numbers-07 (work in progress), December
              2020.








Mishra, et al.          Expires October 14, 2021               [Page 10]

Internet-Draft                BFD Stability                   April 2021


   [I-D.ietf-bfd-yang]
              Rahman, R., Zheng, L., Jethanandani, M., Pallagatti, S.,
              and G. Mirsky, "YANG Data Model for Bidirectional
              Forwarding Detection (BFD)", draft-ietf-bfd-yang-17 (work
              in progress), August 2018.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC3688]  Mealling, M., "The IETF XML Registry", BCP 81, RFC 3688,
              DOI 10.17487/RFC3688, January 2004,
              <https://www.rfc-editor.org/info/rfc3688>.

   [RFC5880]  Katz, D. and D. Ward, "Bidirectional Forwarding Detection
              (BFD)", RFC 5880, DOI 10.17487/RFC5880, June 2010,
              <https://www.rfc-editor.org/info/rfc5880>.

   [RFC6020]  Bjorklund, M., Ed., "YANG - A Data Modeling Language for
              the Network Configuration Protocol (NETCONF)", RFC 6020,
              DOI 10.17487/RFC6020, October 2010,
              <https://www.rfc-editor.org/info/rfc6020>.

   [RFC6241]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", RFC 6241, DOI 10.17487/RFC6241, June 2011,
              <https://www.rfc-editor.org/info/rfc6241>.

   [RFC6242]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", RFC 6242, DOI 10.17487/RFC6242, June 2011,
              <https://www.rfc-editor.org/info/rfc6242>.

   [RFC6991]  Schoenwaelder, J., Ed., "Common YANG Data Types",
              RFC 6991, DOI 10.17487/RFC6991, July 2013,
              <https://www.rfc-editor.org/info/rfc6991>.

   [RFC8040]  Bierman, A., Bjorklund, M., and K. Watsen, "RESTCONF
              Protocol", RFC 8040, DOI 10.17487/RFC8040, January 2017,
              <https://www.rfc-editor.org/info/rfc8040>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.







Mishra, et al.          Expires October 14, 2021               [Page 11]

Internet-Draft                BFD Stability                   April 2021


   [RFC8341]  Bierman, A. and M. Bjorklund, "Network Configuration
              Access Control Model", STD 91, RFC 8341,
              DOI 10.17487/RFC8341, March 2018,
              <https://www.rfc-editor.org/info/rfc8341>.

   [RFC8349]  Lhotka, L., Lindem, A., and Y. Qu, "A YANG Data Model for
              Routing Management (NMDA Version)", RFC 8349,
              DOI 10.17487/RFC8349, March 2018,
              <https://www.rfc-editor.org/info/rfc8349>.

   [RFC8446]  Rescorla, E., "The Transport Layer Security (TLS) Protocol
              Version 1.3", RFC 8446, DOI 10.17487/RFC8446, August 2018,
              <https://www.rfc-editor.org/info/rfc8446>.

11.2.  Informative References

   [IEEE802.1ag]
              Institute of Electrical and Electronics Engineers, Inc.,
              "802.1ag - Connectivity Fault Management", September 2007,
              <https://www.ieee802.org/1/pages/802.1ag.html>.

   [RFC4656]  Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M.
              Zekauskas, "A One-way Active Measurement Protocol
              (OWAMP)", RFC 4656, DOI 10.17487/RFC4656, September 2006,
              <https://www.rfc-editor.org/info/rfc4656>.

Authors' Addresses

   Ashesh Mishra
   SES

   Email: mishra.ashesh@gmail.com


   Mahesh Jethanandani
   Kloud Services
   CA
   USA

   Email: mjethanandani@gmail.com











Mishra, et al.          Expires October 14, 2021               [Page 12]

Internet-Draft                BFD Stability                   April 2021


   Ankur Saxena
   Ciena Corporation
   3939 North 1st Street
   San Jose, CA  95134
   USA

   Email: ankurpsaxena@gmail.com
   URI:   www.ciena.com


   Santosh Pallagatti
   VMware
   Bangalore, Karnataka  560103
   India

   Email: santosh.pallagatti@gmail.com


   Mach Chen
   Huawei

   Email: mach.chen@huawei.com


   Peng Fan
   China Mobile
   32 Xuanwumen West Street
   Beijing, Beijing
   China

   Email: fanp08@gmail.com




















Mishra, et al.          Expires October 14, 2021               [Page 13]
