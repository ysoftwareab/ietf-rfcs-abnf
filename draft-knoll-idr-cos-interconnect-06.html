<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>BGP Class of Service Interconnection</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Definition and Usage of the CoS Capability">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Extended Community Type">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Structure of the CoS Capability Attribute">
<link href="#rfc.section.2.3" rel="Chapter" title="2.3 Usage of the CoS Capability Attribute">
<link href="#rfc.section.3" rel="Chapter" title="3 Definition and Usage of the CoS Parameter Attribute">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Definition of the CoS Parameter Attribute">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Usage of the CoS Parameter Attribute">
<link href="#rfc.section.4" rel="Chapter" title="4 Confidentiality Considerations">
<link href="#rfc.section.5" rel="Chapter" title="5 IANA Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 Security Considerations">
<link href="#rfc.references" rel="Chapter" title="7 References">
<link href="#rfc.references.1" rel="Chapter" title="7.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="7.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document focuses on Class of Service Interconnection at inter-domain interconnection points. It specifies two new transitive attributes, which enable adjacent peers to signal Class of Service Capabilities and certain Class of Service admission control Parameters.  The new "CoS Capability" is deliberately kept simple and denotes the general EF, AF Group BE and LE forwarding support across the advertising AS. The second "CoS Parameter Attribute" is of variable length and contains a more detailed description of available forwarding behaviours using the PHB id Code encoding. Each PHB id Code is associated with rate and size based traffic parameters, which will be applied in the ingress AS Border Router for admission control purposes to a given forwarding behaviour." />
  <meta name="description" content="This document focuses on Class of Service Interconnection at inter-domain interconnection points. It specifies two new transitive attributes, which enable adjacent peers to signal Class of Service Capabilities and certain Class of Service admission control Parameters.  The new "CoS Capability" is deliberately kept simple and denotes the general EF, AF Group BE and LE forwarding support across the advertising AS. The second "CoS Parameter Attribute" is of variable length and contains a more detailed description of available forwarding behaviours using the PHB id Code encoding. Each PHB id Code is associated with rate and size based traffic parameters, which will be applied in the ingress AS Border Router for admission control purposes to a given forwarding behaviour." />
  <meta name="keywords" content="Draft" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Inter-Domain Routing Working Group</td>
<td class="right">Th. M. Knoll</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Chemnitz University of Technology</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">May 11, 2011</td>
</tr>
<tr>
<td class="left">Expires: November 12, 2011</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">BGP Class of Service Interconnection<br />
  <span class="filename">draft-knoll-idr-cos-interconnect-06</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document focuses on Class of Service Interconnection at inter-domain interconnection points. It specifies two new transitive attributes, which enable adjacent peers to signal Class of Service Capabilities and certain Class of Service admission control Parameters.  The new "CoS Capability" is deliberately kept simple and denotes the general EF, AF Group BE and LE forwarding support across the advertising AS. The second "CoS Parameter Attribute" is of variable length and contains a more detailed description of available forwarding behaviours using the PHB id Code encoding. Each PHB id Code is associated with rate and size based traffic parameters, which will be applied in the ingress AS Border Router for admission control purposes to a given forwarding behaviour.</p>
<h1><a>Requirements Language</a></h1>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on November 12, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Definition and Usage of the CoS Capability</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Extended Community Type</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Structure of the CoS Capability Attribute</a>
</li>
<li>2.3.   <a href="#rfc.section.2.3">Usage of the CoS Capability Attribute</a>
</li>
<li>3.   <a href="#rfc.section.3">Definition and Usage of the CoS Parameter Attribute</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Definition of the CoS Parameter Attribute</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Usage of the CoS Parameter Attribute</a>
</li>
<li>4.   <a href="#rfc.section.4">Confidentiality Considerations</a>
</li>
<li>5.   <a href="#rfc.section.5">IANA Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">Security Considerations</a>
</li>
<li>7.   <a href="#rfc.references">References</a>
</li>
<li>7.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>7.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">AS interconnection is currently based on best effort interconnection only. BGP-4 <a href="#RFC4271">[RFC4271]</a> is the de-facto interconnection protocol used to exchange reachability information.  There is no standardized set of supported traffic classes, no standardized packet marking and no standardized forwarding behaviour, which cross-domain traffic could rely on. QoS policy decisions are taken by AS providers independently and in an uncoordinated fashion. However, many AS providers make use of the Differentiated Services Architecture <a href="#RFC2475">[RFC2475]</a> as AS internal QoS mechanism. Within this architecture, there are 64 codepoints and an unlimited number of Per Hop Behaviours (PHBs) available. Some PHBs have been defined in separate RFCs, which will be focused on in this document.</p>
<p id="rfc.section.1.p.2">A Basic Set of supported Classes, called "Basic CoS" is defined inhere, which consists of the primitive "Best Effort (BE)" PHB, the "Expedited Forwarding (EF)" PHB <a href="#RFC3246">[RFC3246]</a>, the "Assured Forwarding (AF)" PHB Group <a href="#RFC2597">[RFC2597]</a> and the "Lower Effort" Per-Domain Behavior (PDB) <a href="#RFC3662">[RFC3662]</a>. AS providers, which can support this Basic CoS are asked to signal this capability to their interconnection partners by means of the new CoS Capability Extended Community defined in <a href="#CoS_Capability_Attribute">Section 2</a> of this draft.</p>
<p id="rfc.section.1.p.3">4 AF PHB classes have been defined so far, which will be grouped into the generally signalled "AF Group". That is, as long as the AS provider can support at least one out of the 4 AF classes in his externally supported CoS Set, this AS is regarded as AF capable.</p>
<p id="rfc.section.1.p.4">A second transitive attribute is defined in <a href="#CoS_Parameter_Attribute">Section 3</a>, which is used for parameter signalling about the applied access control within the ingress AS border router. The reason for this traffic limitation is the fact, that certain high quality forwarding behaviours can only be achieved, if the percentage of high priority traffic within the traffic mix lies below a certain threshold. This attribute informs the interconnection partner about the applied limitation, which can in turn be used to perform traffic shaping at the neighbouring AS' egress. The attribute allows this limitation signalling either associated to the NLRI within the same UPDATE message or with "global" scope to describe the generally applied ingress limitation.</p>
<p id="rfc.section.1.p.5">Both attributes are likely to be used together, if ingress class limitation is used for the respective AS.</p>
<p id="rfc.section.1.p.6">More detailed signalling of forwarding behaviour distinction and associated cross-layer marking can be achieved using the QoS Marking Attribute approach <a href="#I-D.knoll-idr-qos-attribute">[I-D.knoll-idr-qos-attribute]</a>.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#CoS_Capability_Attribute" id="CoS_Capability_Attribute">Definition and Usage of the CoS Capability</a>
</h1>
<p></p>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> Extended Community Type</h1>
<p id="rfc.section.2.1.p.1">The new CoS Capability is encoded as a BGP Extended Community <a href="#RFC4360">[RFC4360]</a>. Extended Community Attributes are transitive optional BGP attributes with Type Code 16. An adoption to the simple BGP Community Attribute encoding <a href="#RFC1997">[RFC1997]</a> is not defined in this document. The actual encoding within the BGP Extended Community Attribute is as follows.</p>
<p id="rfc.section.2.1.p.2">The CoS Capability is transitive and of regular type which results in a 1 octet Type field followed by 7 octets for the CoS Capability structure. The Type is IANA-assignable (FCFS procedure) and marks the community as transitive across ASes. The type number has been assigned by IANA to 0xYY (0x00-0x3f).</p>
<div id="#rfc.figure.1"></div>
<div id="#Figure_1"></div>
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 x x x x x x|                                               |
+-+-+-+-+-+-+-+-+   7 octet CoS Capability structure            |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre>
<p></p>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> Structure of the CoS Capability Attribute</h1>
<p id="rfc.section.2.2.p.1">The CoS Capability structure is deliberately kept very simple and is defined as follows.</p>
<div id="#rfc.figure.2"></div>
<div id="#Figure_2"></div>
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|B E A L| Currently Unused - default to '0'                     |
|E F F E|                                                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Currently Unused - default to '0'     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p id="rfc.section.2.2.p.2">The Currently Unused bits default to '0' and MUST be ignored on reception.</p>
<p></p>
<p id="rfc.section.2.2.p.4">Leading "BE, EF, AF and LE" encoding.</p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">This encoding signals the BE, EF, AF Group and LE support of the respective AS.</dd>
<dt></dt>
<dd style="margin-left: 8">The implied Per-Hop-Behaviour Identification Codes follow the definition as standardized in <a href="#RFC3140">[RFC3140]</a>. The AF Group needs to consist of at least one of the currently available AF1x, AF2x, AF3x and AF4x.</dd>
</dl>
<div id="#rfc.figure.3"></div>
<div id="#Figure_3"></div>
<pre>BE:
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0   0   0   0   0   0 | 0   0   0   0   0   0   0   0   0   0 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

EF:
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 1   0   1   1   1   0 | 0   0   0   0   0   0   0   0   0   0 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

AF1x:
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0   0   1   0   1   0 | 0   0   0   0   0   0   0   0   1   0 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

AF2x:
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0   1   0   0   1   0 | 0   0   0   0   0   0   0   0   1   0 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

AF3x:
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0   1   1   0   1   0 | 0   0   0   0   0   0   0   0   1   0 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

AF4x:
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 1   0   0   0   1   0 | 0   0   0   0   0   0   0   0   1   0 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

LE:
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0   0   1   0   0   0 | 0   0   0   0   0   0   0   0   0   0 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

</pre>
<p></p>
<h1 id="rfc.section.2.3">
<a href="#rfc.section.2.3">2.3.</a> Usage of the CoS Capability Attribute</h1>
<p id="rfc.section.2.3.p.1">The CoS Capability is used as primitive means to signal the general availability of the set of "Basic CoS" PHBs in the advertising AS.  This Extended Community is included within the attribute section of an BGP UPDATE message and is therefore associated to the NLRI information of the same message. Whether the Basic CoS is available and is therefore advertised can easily being judged on for all prefixes, which originate from the advertising AS.</p>
<p id="rfc.section.2.3.p.2">All other reachability information MUST be signalled together with this CoS Capability if they were received together with such an Extended Community by neighbouring peers.</p>
<p id="rfc.section.2.3.p.3">NLRI MUST NOT be marked as supporting "Basic CoS" by means of the CoS Capability, if it were not received together with such an attribute.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#CoS_Parameter_Attribute" id="CoS_Parameter_Attribute">Definition and Usage of the CoS Parameter Attribute</a>
</h1>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Definition of the CoS Parameter Attribute</h1>
<p id="rfc.section.3.1.p.1">The CoS Parameter Attribute is an optional transitive BGP attribute.</p>
<p id="rfc.section.3.1.p.2">The attribute contains one or more of the following:</p>
<div id="#rfc.figure.4"></div>
<div id="#Figure_4"></div>
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   PHB id Code                 |     Flags     | Reserved = '0'|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      ASN of sending AS                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Token Bucket Rate [r] (32-bit IEEE floating point number)   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Token Bucket Size [b] (32-bit IEEE floating point number)   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Peak Data Rate [p] (32-bit IEEE floating point number)      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Minimum Policed Unit [m] (32-bit integer)                   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Maximum Packet Size [M] (32-bit integer)                    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p></p>
<p id="rfc.section.3.1.p.4">PHB ID:</p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">This field specifies the targeted Per Hop Behaviour limitations and follows the defined encoding of <a href="#RFC3140">[RFC3140]</a> as listed in <a href="#Figure_3">Figure 3</a>.</dd>
</dl>
<p id="rfc.section.3.1.p.6">Flags:</p>
<div id="#rfc.figure.5"></div>
<pre> 0  1  2  3  4  5  6  7
+--+--+--+--+--+--+--+--+
|G |DR|0 |0 |0 |0 |0 |0 |
+--+--+--+--+--+--+--+--+</pre>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">Only two flags are defined. The remaining bits default to '0' and MUST be ignored on reception.</dd>
<dt></dt>
<dd style="margin-left: 8">The 'G' flag signals, whether the limitations have global scope on all incoming traffic ('1') or are associated to traffic that is destined to destinations within the NLRI of the UPDATE message ('0'). NLRI specific limitation will supersede globally signalled ones for traffic destined to those NLRI destinations.</dd>
<dt></dt>
<dd style="margin-left: 8">The 'DR' flag signals the applied handling of non-confirming traffic. DR='0' signals strict dropping of excess traffic. DR='1' signals the performed remarking of excess traffic packets to Best Effort traffic marking.</dd>
</dl>
<p id="rfc.section.3.1.p.8">ASN of sending AS:</p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">Depending on the 2-octet or 4-octet AS peering type, the sending AS of the attribute MUST encode its AS number as right-aligned 32bit number.</dd>
</dl>
<p id="rfc.section.3.1.p.10">Peak Data Rate, Token Bucket Rate, Token Bucket Size, Minimum Policed Unit and Maximum Packet Size:</p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">The rates and sizes are given in 4 octet IEEE floating point format <a href="#IEEE">[IEEE]</a> or 4 octet integer format, respectively. They are parameters to a token bucket ingress filter, which is applied to the packets belonging to the stated PHB id. The parameters follow the definition given in <a href="#RFC2210">[RFC2210]</a> and <a href="#RFC2215">[RFC2215]</a>.</dd>
</dl>
<p></p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> Usage of the CoS Parameter Attribute</h1>
<p id="rfc.section.3.2.p.1">The signalled parameters are used for PHB id Code based ingress limitation. Depending on which PHB id Codes a BGP peer signals in this attribute to its neighbour, it is said, that the respective PHB id Code is supported and will experience the defined limitations.</p>
<p id="rfc.section.3.2.p.2">Those limitations can be applied to all incoming traffic of a specific PHB id Code (marked as 'G') or only for incoming traffic, that is destined for the NLRI of the given UPDATE message.</p>
<p id="rfc.section.3.2.p.3">The resulting treatment for non-confirming traffic is signalled through the 'DR' flag.</p>
<p id="rfc.section.3.2.p.4">To withdraw a previously signalled limitation, a CoS Parameter Attribute for the respective PHB id Code MUST be sent with a rate value [r] of zero. Using the 'G' flag, this can be withdrawn globally for all traffic of the given PHB id Code or withdrawn only for traffic destined to the prefixes given in the NLRI of the UPDATE. Previously signalled non-global (i.e. NLRI specific) limitations are also waived, if the same prefix is advertised without a CoS Parameter Attribute later on. In this case, the missing attribute is considered as the above described 'rate zero update' for those prefixes. Waived prefix specific limitations do not supersede global limitations for the respective PHB id Code. In turn, a withdrawal of a global limitation does also withdraw any possibly existing prefix specific ones for the respective PHB id Code.</p>
<p id="rfc.section.3.2.p.5">All limitations have AS local scope for the advertising AS and the neighbouring AS might or might not adopt its sending behaviour to those advertised limitations.</p>
<p id="rfc.section.3.2.p.6">Despite the transitive nature of the new attribute, its usage for ingress limitation is confined to neighbouring ASes. Processing of the conveyed parameters is only valid for peers, who are peering with the AS specified in the ASN field of the attribute.</p>
<p id="rfc.section.3.2.p.7">The attribute SHOULD NOT be transitively relayed to non-adjacent interconnection partners.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#Confidentiality" id="Confidentiality">Confidentiality Considerations</a>
</h1>
<p id="rfc.section.4.p.1">The disclosure of confidential AS intrinsic information by means of the signalled Basic CoS support is of low key security concern. The disclosure of information through CoS Parameter signalling is more detailed. However, all included parameters are exchanged with direct interconnection partners and are the free choice of each AS provider.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.5.p.1">This document defines a new BGP Extended Community, which needs to be assigned a number by IANA within the Extended Community list. The new CoS Capability is a BGP Extended Community of regular type. It is IANA-assignable (FCFS procedure) and is transitive across ASes. A number assignment application within the numbering range of 0x00-0x3f is made to IANA.</p>
<p id="rfc.section.5.p.2">Note to RFC Editor: this section may be removed on publication as an RFC.</p>
<p id="rfc.section.5.p.3">This document defines a new BGP attribute. This attribute is optional and transitive.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.6.p.1">This extension to BGP does not change the underlying security issues inherent in the existing BGP version.</p>
<p id="rfc.section.6.p.2">The signalled attributes are transitive with limited relay operation in the CoS Parameter Attribute case. AS peers, which use egress traffic shaper on the signalled limitations SHOULD exhaust all available BGP security features to make sure, that the signalled limitation is actually sent by the adjacent peer.</p>
<h1 id="rfc.references">
<a href="#rfc.references">7.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">7.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1997">[RFC1997]</b></td>
<td class="top">
<a href="mailto:rchandra@cisco.com" title="cisco Systems, Inc.">Chandrasekeran, R.</a>, <a href="mailto:pst@cisco.com" title="cisco Systems, Inc.">Traina, P.</a> and <a href="mailto:tli@skat.usc.edu">T. Li</a>, "<a href="http://tools.ietf.org/html/rfc1997">BGP Communities Attribute</a>", RFC 1997, August 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2210">[RFC2210]</b></td>
<td class="top">
<a href="mailto:jtw@lcs.mit.edu" title="MIT Laboratory for Computer Science">Wroclawski, J.</a>, "<a href="http://tools.ietf.org/html/rfc2210">The Use of RSVP with IETF Integrated Services</a>", RFC 2210, September 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2215">[RFC2215]</b></td>
<td class="top">
<a href="mailto:shenker@parc.xerox.com" title="Xerox PARC">Shenker, S.</a> and <a href="mailto:jtw@lcs.mit.edu" title="MIT Laboratory for Computer Science">J. Wroclawski</a>, "<a href="http://tools.ietf.org/html/rfc2215">General Characterization Parameters for Integrated Service Network Elements</a>", RFC 2215, September 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2597">[RFC2597]</b></td>
<td class="top">
<a href="mailto:jh@telia.fi" title="Telia Finland">Heinanen, J.</a>, <a href="mailto:fred@cisco.com" title="Cisco Systems">Baker, F.</a>, <a href="mailto:wweiss@lucent.com" title="Lucent Technologies">Weiss, W.</a> and <a href="mailto:jtw@lcs.mit.edu" title="MIT Laboratory for Computer Science">J. Wroclawski</a>, "<a href="http://tools.ietf.org/html/rfc2597">Assured Forwarding PHB Group</a>", RFC 2597, June 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3140">[RFC3140]</b></td>
<td class="top">
<a>Black, D.</a>, <a>Brim, S.</a>, <a>Carpenter, B.</a> and <a>F. Le Faucheur</a>, "<a href="http://tools.ietf.org/html/rfc3140">Per Hop Behavior Identification Codes</a>", RFC 3140, June 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3246">[RFC3246]</b></td>
<td class="top">
<a>Davie, B.</a>, <a>Charny, A.</a>, <a>Bennet, J.C.R.</a>, <a>Benson, K.</a>, <a>Le Boudec, J.Y.</a>, <a>Courtney, W.</a>, <a>Davari, S.</a>, <a>Firoiu, V.</a> and <a>D. Stiliadis</a>, "<a href="http://tools.ietf.org/html/rfc3246">An Expedited Forwarding PHB (Per-Hop Behavior)</a>", RFC 3246, March 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4271">[RFC4271]</b></td>
<td class="top">
<a>Rekhter, Y.</a>, <a>Li, T.</a> and <a>S. Hares</a>, "<a href="http://tools.ietf.org/html/rfc4271">A Border Gateway Protocol 4 (BGP-4)</a>", RFC 4271, January 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4360">[RFC4360]</b></td>
<td class="top">
<a>Sangli, S.</a>, <a>Tappan, D.</a> and <a>Y. Rekhter</a>, "<a href="http://tools.ietf.org/html/rfc4360">BGP Extended Communities Attribute</a>", RFC 4360, February 2006.</td>
</tr>
<tr>
<td class="reference"><b id="IEEE">[IEEE]</b></td>
<td class="top">
<a title="IEEE">, </a>, "<a>IEEE Standard for Binary Floating-Point Arithmetic</a>", ISBN 1-5593-7653-8, 1985.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">7.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC3662">[RFC3662]</b></td>
<td class="top">
<a>Bless, R.</a>, <a>Nichols, K.</a> and <a>K. Wehrle</a>, "<a href="http://tools.ietf.org/html/rfc3662">A Lower Effort Per-Domain Behavior (PDB) for Differentiated Services</a>", RFC 3662, December 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2475">[RFC2475]</b></td>
<td class="top">
<a href="mailto:slblake@torrentnet.com" title="Torrent Networking Technologies">Blake, S.</a>, <a href="mailto:black_david@emc.com" title="EMC Corporation">Black, D.L.</a>, <a href="mailto:mark.carlson@sun.com" title="Sun Microsystems, Inc.">Carlson, M.A.</a>, <a href="mailto:elwynd@nortel.co.uk" title="Nortel UK">Davies, E.</a>, <a href="mailto:zhwang@bell-labs.com" title="Bell Labs Lucent Technologies">Wang, Z.</a> and <a href="mailto:wweiss@lucent.com" title="Lucent Technologies">W. Weiss</a>, "<a href="http://tools.ietf.org/html/rfc2475">An Architecture for Differentiated Services</a>", RFC 2475, December 1998.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.knoll-idr-qos-attribute">[I-D.knoll-idr-qos-attribute]</b></td>
<td class="top">
<a>Knoll, T</a>, "<a href="http://tools.ietf.org/html/draft-knoll-idr-qos-attribute-08">BGP Extended Community for QoS Marking</a>", Internet-Draft draft-knoll-idr-qos-attribute-08, July 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Thomas Martin Knoll</span> 
	  <span class="n hidden">
		<span class="family-name">Knoll</span>
	  </span>
	</span>
	<span class="org vcardline">Chemnitz University of Technology</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:knoll@etit.tu-chemnitz.de">knoll@etit.tu-chemnitz.de</a></span>

  </address>
</div>

</body>
</html>