Network work group                                          Mach Chen 
                                                          Renhai Zhang 
Internet Draft                             Huawei Technologies Co.,Ltd 
Expires: August 2007                                  February 1, 2007 
                                    
                                      
             OSPF Extensions in Support of Inter-AS (G)MPLS TE 
             draft-chen-ccamp-ospf-interas-te-extension-01.txt 


Status of this Memo 

   By submitting this Internet-Draft, each author represents that       
   any applicable patent or other IPR claims of which he or she is       
   aware have been or will be disclosed, and any of which he or she       
   becomes aware will be disclosed, in accordance with Section 6 of       
   BCP 79. 

   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that 
   other groups may also distribute working documents as Internet-Drafts. 

   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 

   The list of current Internet-Drafts can be accessed at 
        http://www.ietf.org/ietf/1id-abstracts.txt 

   The list of Internet-Draft Shadow Directories can be accessed at 
        http://www.ietf.org/shadow.html 

   This Internet-Draft will expire on August 1, 2007. 

Abstract 

   This document describes extensions to the OSPF protocol to support 
   Multiprotocol Label Switching (MPLS) and Generalized MPLS (GMPLS) 
   Traffic Engineering (TE) for multiple Autonomous Systems (ASes). It 
   defines OSPF extensions for the flooding of inter-AS links which can 
   be used to perform inter-AS path computation. 

Conventions used in this document 

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in RFC-2119. 
 
 
 
Mach & Renhai          Expires August 1, 2007                 [Page 1] 

Internet-Draft  Inter-AS Links connection information     February 2007 
    

Table of Contents 

    
   1. Introduction.................................................2 
   2. Problem statement............................................3 
      2.1. Per-Domain Path Determination...........................3 
      2.2. Backward Recursive Path Computation.....................4 
   3. Extensions to OSPF...........................................5 
      3.1. Remote AS Number Sub-TLV................................5 
      3.2. Inter-AS Link Type......................................6 
      3.3. Link ID.................................................6 
   4. Inter-AS links procedure.....................................6 
   5. Security Considerations......................................7 
   6. IANA Considerations..........................................7 
      6.1. OSPF LSA Sub-TLVs type..................................7 
      6.2. OSPF TE Link Type.......................................7 
   7. References...................................................9 
      7.1. Normative References....................................9 
      7.2. Informative References..................................9 
   Author's Addresses.............................................10 
   Intellectual Property Statement................................10 
   Disclaimer of Validity.........................................11 
   Copyright Statement............................................11 
   Acknowledgment.................................................11 
    
1. Introduction 

   [OSPF-TE] defines extensions to the OSPF protocol [OSPF] to support 
   intra-area Traffic Engineering (TE). The extensions provide a way of 
   encoding the TE information for TE-enabled links within the network 
   (TE links) and flooding this information within an area. Type 10 
   opaque LSAs [RFC2370] are used to carry such TE information. Two top-
   level TLVs are defined in [OSPF-TE]: Router Address TLV and Link TLV. 
   The Link TLV has several nested sub-TLVs which describe the TE 
   attributes for a TE link.  

   Requirements for establishing Multiprotocol Label Switching (MPLS) TE 
   Label Switched Paths (LSPs) that cross multiple Autonomous Systems 
   (ASes) are described in [INTERAS-TE-REQ]. As described in [INTERAS-
   TE-REQ], a method SHOULD provide the ability to compute a path 
   spanning multiple ASes. So a path computation entity that may be the 
   Head-end Label Switching Router (LSR), an AS Border Router (ASBR), or 
   a Path Computation Element (PCE [PCE]) needs to know not only the TE 
   information of the links within an AS, but also of the links that 
   connect to other ASes. 


 
 
Mach & Renhai          Expires August 1, 2007                 [Page 2] 

Internet-Draft  Inter-AS Links connection information     February 2007 
    

   In this document, some extensions to [OSPF-TE] are defined in support 
   of carrying inter-AS TE link information for inter-AS Traffic 
   Engineering. A new sub-TLV is added to the Link TLV and a new link 
   type is introduced. The detailed definitions and procedures are 
   discussed in the following sections. 

2. Problem statement 

   As described in [INTERAS-TE-REQ], in the case of establishing an 
   inter-AS TE LSP traversing multiple ASes, the Path message [RFC3209] 
   may include the following elements in the Explicit Route Object(ERO) 
   in order to describe the path of the LSP: 

     - a set of AS numbers as loose hops; and/or 

     - a set of LSRs including ASBRs as loose hops. 

   Two methods for determining inter-AS paths are currently discussed. 
   The per-domain method [PD-PATH] determines the path one domain at a 
   time. The backward recursive method [BRPC] uses cooperation between 
   PCEs to determine an optimum inter-domain path. The sections that 
   follow examine how inter-AS TE link information could be useful in 
   both cases. 

2.1. Per-Domain Path Determination 

   In the per-domain method of determining an inter-AS path for an MPLS-
   TE LSP, when an LSR that is an entry-point to an AS receives a PATH 
   message from an upstream AS with an ERO containing a next hop that is 
   an AS number, it needs to find which LSRs within the local AS are 
   connected to the downstream AS so that it can compute a TE LSP 
   segment across the AS to that LSR and forward the PATH message to the 
   LSR and hence into the next AS. See the below figure for example: 

                R1------R3----R5-----R7------R9-----R11 
                        |     | \    |      / | 
                        |     |  \   |  ----  | 
                        |     |   \  | /      | 
                R2------R4----R6   --R8------R10----R12 
                           :              : 
                <-- AS1 -->:<---- AS2 --->:<--- AS3 ---> 
    
                  Figure 1: Inter-AS Reference Model 

   The figure shows three ASes (AS1, AS2, and AS3) and twelve LSRs (R1 
   through R12). R3 and R4 are ASBRs in AS1. R5, R6, R7, and R8 are 
   ASBRs in AS2. R9 and R10 are ASBRs in AS3. 
 
 
Mach & Renhai          Expires August 1, 2007                 [Page 3] 

Internet-Draft  Inter-AS Links connection information     February 2007 
    

   If an inter-AS TE LSP is planned to be established from R1 to R12, 
   the AS sequence is limited as: AS1, AS2, AS3. 

   Suppose that the Path message enters AS2 from R3. The next hop in the 
   ERO shows AS3, and R5 must determine a path segment across AS2 to 
   reach AS3. It has a choice of three exit points from AS2 (R6, R7, and 
   R8) and it needs to know which of these provide TE connectivity to 
   AS3, and whether the TE connectivity (for example, available 
   bandwidth) is adequate for the requested LSP. 

   Alternatively, if the next hop in the ERO is the entry ASBR for AS3 
   (say R9), R5 needs to know which of its exit ASBRs has a TE link that 
   connects to R9. Since there may be multiple exist ASBRs that are 
   connected to R9(both R7 and R8 in this example), R5 also needs to 
   know the TE properties of the inter-AS TE links so that it can select 
   the correct exit ASBR. 

   Once the path message reaches the exit ASBR, any choice of inter-AS TE 
   link can be made by the ASBR if not already made by entry ASBR that 
   computed the segment. 

   To enable R5 to make the correct choice of exit ASBR the following 
   information is needed: 

   - List of all inter-AS TE links for the local AS. 

   - TE properties of each inter-AS TE link. 

   - AS number of the neighboring AS connected to by each inter-AS TE 
   link. 

   - Identity (TE Router ID) of the neighboring ASBR connected to by 
   each inter-AS TE link. 

   This information is needed throughout the local AS if path 
   computation function is fully distributed among LSRs in the local AS.  

2.2. Backward Recursive Path Computation 

   Another scenario using PCE techniques has the same problem. [BRPC] 
   defines a PCE-based TE LSP computation method (called Backward 
   Recursive Path Computation) to compute optimal inter-domain 
   constrained MPLS-TE or GMPLS LSPs. In this path computation method, a 
   specific set of traversed domains are assumed to be selected before 
   computation starts. Each downstream PCE in domain(i) returns a 
   multipoint-to-point tree of potential paths to its upstream neighbor 
   PCE in domain(i-1). Each tree consists of the set of paths from all 
 
 
Mach & Renhai          Expires August 1, 2007                 [Page 4] 

Internet-Draft  Inter-AS Links connection information     February 2007 
    

   Boundary Nodes located in domain(i) to the destination where each 
   path satisfies the set of required constraints for the TE LSP 
   (bandwidth, affinities, etc.).  

   So a PCE needs to select Boundary Nodes (that is, ASBRs) that provide 
   connectivity from the upstream AS. In order that the tree of paths 
   provided by one PCE to its neighbor can be correlated, the identities 
   of the ASBRs for each path need to be referenced, so the PCE must 
   know the identities of the ASBRs in the remote AS reached by any 
   inter-AS TE link, and, in order that it provides only suitable paths 
   in the tree, the PCE must know the TE properties of the inter-AS TE 
   links.  

   Thus, to support Backward Recursive Path Computation the same 
   information as listed in Section 2.1 is required. 

3. Extensions to OSPF 

   The extensions defined in this document allow a TE link advertisement 
   to be easily identified as such by the use of a new link type. A new 
   sub-TLV to the Link TLV is defined to carry the information about the 
   neighboring AS. 

3.1. Remote AS Number Sub-TLV 

   As described in [OSPF-TE], the Link TLV describes a single link and 
   consists of a set of sub-TLVs. A new sub-TLV, the Remote AS Number 
   sub-TLV is added to the Link TLV when advertising inter-AS links. The 
   Remote AS Number sub-TLV specifies the AS number of the neighboring 
   AS to which the advertised link connects. 

   The Remote AS number sub-TLV is TLV type 21 (which needs to be 
   confirmed by IANA), and is four octets in length. The format is as 
   follows: 

    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |              Type             |             Length            | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  
   |                       Remote AS Number                        |   
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    
   The Remote AS number field has 4 octets. When two octets are used for 
   the AS number, as in current deployments, the left two octets MUST be 
   set to zero. 

 
 
Mach & Renhai          Expires August 1, 2007                 [Page 5] 

Internet-Draft  Inter-AS Links connection information     February 2007 
    

3.2. Inter-AS Link Type 

   To identify a link to be an inter-AS link and allow easy 
   identification of these new advertisements, a new Link Type value is 
   defined for use in the Link Type sub-TLV. The value of the Link Type 
   for an inter-AS point-to-point link is 3 (which needs to be confirmed 
   by IANA). 

3.3. Link ID 

   For an inter-AS link, the Link ID carried in the Link ID sub-TLV is 
   the TE Router ID of the remote ASBR reached through this inter-AS 
   link. 

4. Inter-AS links procedure 

   When TE is enabled on an inter-AS link and the link is up, the ASBR 
   SHOULD advertise this link using the normal procedures for OSPF-TE 
   [OSPF-TE]. When either the link is down or TE is disabled on the link, 
   the ASBR SHOULD withdraw the advertisement. When there are changes to 
   the TE parameters for the link (for example, when the available 
   bandwidth changes) the ASBR SHOULD re-advertise the link, but the 
   ASBR MUST take precautions against excessive re-advertisements as 
   described in [OSPF-TE]. 

   The information advertised comes from the ASBR's knowledge of the TE 
   capabilities of the link, the ASBR's knowledge of the current status 
   and usage of the link, and configuration at the ASBR of the remote AS 
   number and remote ASBR TE Router ID. 

   The TE link advertisement SHOULD be carried in a Type 10 Opaque LSA 
   if the flooding scope is to be limited to within the single IGP area 
   to which the ASBR belongs, or MAY be carried in a Type 11 Opaque LSA 
   if the information should reach all routers (including area border 
   routers, ASBRs, and PCEs) in the AS. 

   Legacy routers receiving an advertisement for an inter-AS TE link are 
   able to ignore it because the Link Type carries an unknown value. 
   They will continue to flood the LSA, but will not attempt to use the 
   information received as if the link were an intra-AS TE link. 

   Routers or PCEs that are capable of processing advertisements of 
   inter-AS TE links SHOULD NOT use such links to compute paths that 
   exit an AS to a remote ASBR and then immediately re-enter the AS. 
   Such paths would constitute extremely rare occurrences and MUST only 
   be allowed as the result of specific policy configuration at the 
   router or PCE computing the path. 
 
 
Mach & Renhai          Expires August 1, 2007                 [Page 6] 

Internet-Draft  Inter-AS Links connection information     February 2007 
    

5. Security Considerations 

   The protocol extensions defined in this document are relatively minor 
   and can be secured within the AS in which they are used by the 
   existing OSPF security mechanisms. 

   It should be noted, however, that some of the information included in 
   these new advertisements (the remote AS number and the remote ASBR ID) 
   are obtained from a neighboring administration and cannot be verified 
   in anyway. Since the means of delivery of this information is likely 
   to be part of a commercial relationship, the source of the 
   information should be carefully checked before it is entered as 
   configuration information at the ASBR 

6. IANA Considerations 

   IANA is requested to make the following allocations from registries 
   under its control. 

6.1. OSPF LSA Sub-TLVs type 

   IANA maintains the "Open Shortest Path First (OSPF) Traffic 
   Engineering TLVs" registry with sub-registry "Types for sub-TLVs in a 
   TE Link TLV". IANA is requested to assign a new sub-TLV as follows. 
   The number 21 is suggested. 

   Value     Meaning 

   21        Remote AS Number sub-TLV. 

6.2. OSPF TE Link Type 

   IANA is requested to create a new sub-registry "TE Link Types" of the 
   registry "Open Shortest Path First (OSPF) Traffic Engineering TLVs" 
   to track TE Link Types. 

   The sub-registry should read as follows: 

   [RFC3630] defines the Link Type sub-TLV of the Link TLV. The 
   following values are defined. 

   Value     Meaning                 Reference 

   1         Point-to-point link     [RFC3630] 

   2         Multi-access link       [RFC3630] 

 
 
Mach & Renhai          Expires August 1, 2007                 [Page 7] 

Internet-Draft  Inter-AS Links connection information     February 2007 
    

   3         Inter-AS link           [this document] 

    New allocations from this registry are by IETF Standards Action. 











































 
 
Mach & Renhai          Expires August 1, 2007                 [Page 8] 

Internet-Draft  Inter-AS Links connection information     February 2007 
    

7. References 

7.1. Normative References 

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate 
             Requirement Levels", BCP 14, RFC 2119, March 1997. 

   [RFC3209]  Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan, V., 
             and G. Swallow, "RSVP-TE: Extensions to RSVP for LSP 
             Tunnels", RFC 3209, December 2001. 

   [RFC2370]  R. Coltun, "The OSPF Opaque LSA Option", RFC2370, July 
             1998. 

   [OSPF]  Moy, J., "OSPF Version 2", STD 54, RFC 2328, April 1998. 

   [OSPF-TE] Katz, D., Kompella, K., and Yeung, D., "Traffic Engineering 
             (TE) Extensions to OSPF Version 2", RFC    3630, September 
             2003. 

7.2. Informative References 

   [INTERAS-TE-REQ] Zhang and Vasseur, "MPLS Inter-AS Traffic 
             Engineering Requirements", RFC4216, November 2005. 

   [PER-DOMAIN] Ayyangar, A., Vasseur, JP., and Zhang, R., "A Per-domain 
             path computation method for establishing Inter-domain", 
             draft-ietf-ccamp-inter-domain-pd-path-comp, (work in 
             progress). 

   [BRPC] JP. Vasseur, Ed., R. Zhang, N. Bitar, JL. Le Roux, "A Backward 
             Recursive PCE-based Computation (BRPC) procedure to compute 
             shortest inter-domain Traffic Engineering Label Switched 
             Paths ", draft-ietf-pce-brpc, (work in progress) 

   [PCE] Farrel, A., Vasseur, JP., and Ash, J., "A Path Computation 
             Element (PCE)-Based Architecture", RFC4655, August 2006. 









 
 
Mach & Renhai          Expires August 1, 2007                 [Page 9] 

Internet-Draft  Inter-AS Links connection information     February 2007 
    

Author's Addresses 

   Mach Chen 
   Huawei Technologies Co.,Ltd 
   KuiKe Building, No.9 Xinxi Rd., 
   Hai-Dian District  
   Beijing, 100085 
   P.R. China 
      
   Email: mach@huawei.com 
 

   Renhai Zhang 
   Huawei Technologies Co.,Ltd 
   KuiKe Building, No.9 Xinxi Rd., 
   Hai-Dian District  
   Beijing, 100085 
   P.R. China 
      
   Email: zhangrenhai@huawei.com 
 

Intellectual Property Statement 

   The IETF takes no position regarding the validity or scope of any 
   Intellectual Property Rights or other rights that might be claimed to 
   pertain to the implementation or use of the technology described in 
   this document or the extent to which any license under such rights 
   might or might not be available; nor does it represent that it has 
   made any independent effort to identify any such rights.  Information 
   on the procedures with respect to rights in RFC documents can be 
   found in BCP 78 and BCP 79. 

   Copies of IPR disclosures made to the IETF Secretariat and any 
   assurances of licenses to be made available, or the result of an 
   attempt made to obtain a general license or permission for the use of 
   such proprietary rights by implementers or users of this 
   specification can be obtained from the IETF on-line IPR repository at 
   http://www.ietf.org/ipr. 

   The IETF invites any interested party to bring to its attention any 
   copyrights, patents or patent applications, or other proprietary 
   rights that may cover technology that may be required to implement 
   this standard.  Please address the information to the IETF at 
   ietf-ipr@ietf.org. 


 
 
Mach & Renhai          Expires August 1, 2007                [Page 10] 

Internet-Draft  Inter-AS Links connection information     February 2007 
    

Disclaimer of Validity 

   This document and the information contained herein are provided on an 
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS 
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND 
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS 
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF 
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED 
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 

Copyright Statement 

   Copyright (C) The IETF Trust (2007). 

   This document is subject to the rights, licenses and restrictions 
   contained in BCP 78, and except as set forth therein, the authors 
   retain all their rights. 

Acknowledgment 

    

 























 
 
Mach & Renhai          Expires August 1, 2007                [Page 11] 

