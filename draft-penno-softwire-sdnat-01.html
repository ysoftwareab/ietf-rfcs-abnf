<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Stateless Deterministic NAT</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 SD-CPE operation">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 SD-CPE NAT function">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 SD-CPE maxport configuration">
<link href="#rfc.section.2.3" rel="Chapter" title="2.3 SD-CPE with incremental port allocation">
<link href="#rfc.section.2.4" rel="Chapter" title="2.4 SD-CPE with dynamic maxport determination">
<link href="#rfc.section.3" rel="Chapter" title="3 Host based SD-NAT, Wireless application">
<link href="#rfc.section.4" rel="Chapter" title="4 SD-CGN and SD-AFTR operation">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Anycast IPv6 address for SD-AFTR">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Multiple default IPv4 routes leading to SD-CGN">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 SD-CGN and SD-AFTR operation">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Mapping function">
<link href="#rfc.section.4.5" rel="Chapter" title="4.5 Example mapping function">
<link href="#rfc.section.4.6" rel="Chapter" title="4.6 Port exceeded message">
<link href="#rfc.section.4.7" rel="Chapter" title="4.7 Address compression ratio">
<link href="#rfc.section.4.8" rel="Chapter" title="4.8 Anycast global IPv4 pool">
<link href="#rfc.section.4.9" rel="Chapter" title="4.9 Stateless operation">
<link href="#rfc.section.4.10" rel="Chapter" title="4.10 SD-AFTR stateless domain">
<link href="#rfc.section.4.11" rel="Chapter" title="4.11 SD-CGN/SD-AFTR post mapping source port scrambling">
<link href="#rfc.section.5" rel="Chapter" title="5 SD-NAT 444 example">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 SD-NAT44 architecture">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 SD-CPE3 NAT bindings in NAT44 mode">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 SD-CPE7 NAT bindings in NAT44 mode">
<link href="#rfc.section.5.4" rel="Chapter" title="5.4 SD-CGN NAT bindings in NAT44 mode">
<link href="#rfc.section.6" rel="Chapter" title="6 SD-DS-Lite example">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 SD-DS-Lite architecture">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 SD-CPE3 NAT bindings in DS-Lite mode">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 SD-CPE7 NAT bindings in DS-Lite mode">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 SD-AFTR NAT bindings in DS-Lite mode">
<link href="#rfc.section.7" rel="Chapter" title="7 Comparison with other techniques">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 Comparison with DS-Lite and NAT44 CGN">
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 Comparison with 4rd/4via6/A+P/DIVI">
<link href="#rfc.section.8" rel="Chapter" title="8 IANA Considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 Security Considerations">
<link href="#rfc.references" rel="Chapter" title="10 References">
<link href="#rfc.references.1" rel="Chapter" title="10.1 Normative references">
<link href="#rfc.references.2" rel="Chapter" title="10.2 Informative references">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This memo define a simple stateless and deterministic mode of operating a carrier-grade NAT in both a NAT44 and DS-Lite environment.  " />
  <meta name="description" content="This memo define a simple stateless and deterministic mode of operating a carrier-grade NAT in both a NAT44 and DS-Lite environment.  " />
  <meta name="keywords" content="stateless deterministic NAT" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Internet Engineering Task Force</td>
<td class="right">R.P. Penno</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">A.D. Durand</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">Juniper Networks</td>
</tr>
<tr>
<td class="left">Expires: May 04, 2012</td>
<td class="right">L.H. Hoffmann</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Bouygues Telecom</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">November 01, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Stateless Deterministic NAT<br />
  <span class="filename">draft-penno-softwire-sdnat-01</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This memo define a simple stateless and deterministic mode of operating a carrier-grade NAT in both a NAT44 and DS-Lite environment.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on May 04, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">SD-CPE operation</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">SD-CPE NAT function</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">SD-CPE maxport configuration</a>
</li>
<li>2.3.   <a href="#rfc.section.2.3">SD-CPE with incremental port allocation</a>
</li>
<li>2.4.   <a href="#rfc.section.2.4">SD-CPE with dynamic maxport determination</a>
</li>
<li>3.   <a href="#rfc.section.3">Host based SD-NAT, Wireless application</a>
</li>
<li>4.   <a href="#rfc.section.4">SD-CGN and SD-AFTR operation</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Anycast IPv6 address for SD-AFTR</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Multiple default IPv4 routes leading to SD-CGN</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">SD-CGN and SD-AFTR operation</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Mapping function</a>
</li>
<li>4.5.   <a href="#rfc.section.4.5">Example mapping function</a>
</li>
<li>4.6.   <a href="#rfc.section.4.6">Port exceeded message</a>
</li>
<li>4.7.   <a href="#rfc.section.4.7">Address compression ratio</a>
</li>
<li>4.8.   <a href="#rfc.section.4.8">Anycast global IPv4 pool</a>
</li>
<li>4.9.   <a href="#rfc.section.4.9">Stateless operation</a>
</li>
<li>4.10.   <a href="#rfc.section.4.10">SD-AFTR stateless domain</a>
</li>
<li>4.11.   <a href="#rfc.section.4.11">SD-CGN/SD-AFTR post mapping source port scrambling</a>
</li>
<li>5.   <a href="#rfc.section.5">SD-NAT 444 example</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">SD-NAT44 architecture</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">SD-CPE3 NAT bindings in NAT44 mode</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">SD-CPE7 NAT bindings in NAT44 mode</a>
</li>
<li>5.4.   <a href="#rfc.section.5.4">SD-CGN NAT bindings in NAT44 mode</a>
</li>
<li>6.   <a href="#rfc.section.6">SD-DS-Lite example</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">SD-DS-Lite architecture</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">SD-CPE3 NAT bindings in DS-Lite mode</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">SD-CPE7 NAT bindings in DS-Lite mode</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">SD-AFTR NAT bindings in DS-Lite mode</a>
</li>
<li>7.   <a href="#rfc.section.7">Comparison with other techniques</a>
</li>
<li>7.1.   <a href="#rfc.section.7.1">Comparison with DS-Lite and NAT44 CGN</a>
</li>
<li>7.2.   <a href="#rfc.section.7.2">Comparison with 4rd/4via6/A+P/DIVI</a>
</li>
<li>8.   <a href="#rfc.section.8">IANA Considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">Security Considerations</a>
</li>
<li>10.   <a href="#rfc.references">References</a>
</li>
<li>10.1.   <a href="#rfc.references.1">Normative references</a>
</li>
<li>10.2.   <a href="#rfc.references.2">Informative references</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">NAT44 and DS-Lite <a href="#RFC6333">[RFC6333]</a>,are two solutions to deal with the IPv4 exhaustion problem.  NAT44 solves it by introducing a second layer of NAT in the ISP network. DS-Lite solves it by decoupling the deployment of IPv6 in the access network from the deployment of IPv6 in the applications. DS-Lite is based on a combination of IPv4 over IPv6 encapsulation and a carrier grade NAT (CGN).  </p>
<p id="rfc.section.1.p.2">There have been a number of efforts at IETF to evolve the DS-Lite model by moving the NAT function from a centralized, stateful carrier grade NAT to the CPEs by allocating a fixed number of ports to each customer. The provider equipment would then only do the decapsulation of the IPv4 traffic, providing a stateless operation model, where a number of those relay devices could be operated independently in the ISP network. One drawback of such design, is that the service provider looses some flexibility on how ports are allocated. In particular, The IPv6 and global IPv4 address spaces are mapped to each over, making it difficult for an ISP to add or remove addresses from the NAT pool. Another drawback is that the number of IPv4 port allocated per subscriber is encoded in the IPv6 address. This results in a renumbering event when the ISP want to change the IPv4 oversubscription ratio.  </p>
<p id="rfc.section.1.p.3">Another direction has been to define a deterministic operation model for NAT44 CGNs, where ports are statically distributed to users on that CGN. A deterministic mapping function is defined to convert an internal address to an external address and port range.  This mapping function is reversible, eliminating the need to keep logs for abuse/LEA purpose. However, such a deterministic NAT still need to maintain per connection state and as such is not stateless.  </p>
<p id="rfc.section.1.p.4">This proposal enhances the deterministic NAT model. By offering a fully programmatic mapping of the complete NAT binding, it enables a carrier-grade NAT/ AFTR to become completely stateless and deterministic. This model of operation applies similarly to DS-Lite and NAT44 environments.  </p>
<p id="rfc.section.1.p.5">The SD-NAT architecture has the following characteristics: </p>

<ul>
<li>Zero log: Because the SD-CGN/SD-AFTR NAT bindings are deterministic and reversible, the ISP does not need to keep any NAT binding logs.  </li>
<li>Zero state on SD-CGN/SD-AFTR: There is no operational per-session state on the SD-CGNs/SD-AFTRs. By leveraging this stateless and deterministic mode of operation, an ISP can deploy any number of SD-CGNs/SD-AFTRs to provide redundancy and scalability at low cost. Because the NAT mappings on the CGNs or AFTRs are fully stateless and deterministic, routers can implement the functionality in hardware and perform  it at very high speed with very low overhead in terms of packet delay.  </li>
<li>Low barrier of adoption: SD-CPEs can remain IPv4-only devices. Only minor code change or configuration is required to modify the port mapping algorithms, the rest of the CPE implementation remains the same. The ISP access network can also remain IPv4-only, enabling the ISP to deploy IPv6 independently to this IPv4-exhaustion solution.  </li>
<li>Flexibility of operation: The ISP can add or remove addresses from the NAT pool without having to renumber the access network.  </li>
<li>Compatible with IPv6: This SD-NAT mechanism can be deployed similarly by IPv4-only ISPs, Dual-Stack ISPs or IPv6-only ISPs. In the IPv4 case, the SD-CPE WAN Ipv4 address is used as customer index, in the IPv6 case, IPv4 packets are tunneled over IPv6 just like in the DS-Lite case and the SD-CPE WAN IPv6 address is used as customer index.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> SD-CPE operation</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.  </p>
<p id="rfc.section.2.p.2">An SD-CPE operates like a regular CPE with some modification on the way the NAT function is performed.  </p>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> SD-CPE NAT function</h1>
<p id="rfc.section.2.1.p.1">The SD-CPE performs IPv4 NAPT from the internal RFC1918 addresses to the IPv4 address configured on the WAN interface. In a DS-Lite environment, the B4 address 192.0.0.2 is used in lieu of the IPv4 WAN interface.  </p>
<p id="rfc.section.2.1.p.2">Internal IPv4 source ports are translated into the range [1024..maxport]. Different SD-CPEs can implement different methods to determine the value of maxport, some of which are defined below.  </p>
<p id="rfc.section.2.1.p.3">A key design element here is that the SD-CGN or SD-AFTR can make the assumption that all datagrams coming from the SD-CPE will have source ports formatted in a well-known range. This will make the stateless deterministic NAT function on the SD-CGN or SD-AFTR easy to implement.  </p>
<p id="rfc.section.2.1.p.4">Another key design element is that the SD-CPE does not need to know which external IPv4 address it will be mapped to. That design element allows for a great flexibility on the ISP side, the pool of global IPv4 addresses on the SD-CGNs or SD-AFTRs can be changed at any time with little impact on the subscriber. The subscriber configuration will not have to change, the SD-CPE will not have to renumber or reboot, however the current connections may or may not survive depending on the pool update mechanism implemented on the SD-CGNs / SD-AFTRs. Note: the SD-CPE can learn the external address it is mapped to using the PCP protocol defined in <a href="#I-D.ietf-pcp-base">[I-D.ietf-pcp-base]</a>.  </p>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> SD-CPE maxport configuration</h1>
<p id="rfc.section.2.2.p.1">The simplest way to build an SD-CPE is to configure it with a maxport value. This could be done, for example, using either manual configuration, a TR69 parameter to be defined or a DHCP option, to be defined.  </p>
<p id="rfc.section.2.2.p.2">A quick look at the open source OpenWRT project show that the functionality to restrict the source port space is already present, so no new code is necessary.  </p>
<h1 id="rfc.section.2.3">
<a href="#rfc.section.2.3">2.3.</a> SD-CPE with incremental port allocation</h1>
<p id="rfc.section.2.3.p.1">In this model, an SD-CPE would dynamically learn the value of maxport instead of being configured with it. This removes a configuration step of the CPE. The trade-off is that some new code implementing the following algorithm must be implemented on the SD-CPE.  </p>
<p id="rfc.section.2.3.p.2">When the incremental SD-CPE needs to allocate a new external port, it MUST start from 1024 and increment until it finds an un-allocated port. If the SD-CPE allocates a port number that is too high and does not fit into the range allocated on the SD-CGN or SD-AFTR, the outgoing packet will be dropped by the SD-CGN or SD-AFTR and an ICMP <a href="#RFC0792">[RFC0792]</a> message type 13 (Communication administratively prohibited) will be returned to the SD-CPE.  </p>
<p id="rfc.section.2.3.p.3">The trade-off to the simplicity of this algorithm are a) the restart at 1024 may use extra cycles and b) port randomization is impacted. See alternative scramble techniques on SD-CGN/SD-AFTR to mitigate this issue.  </p>
<h1 id="rfc.section.2.4">
<a href="#rfc.section.2.4">2.4.</a> SD-CPE with dynamic maxport determination</h1>
<p id="rfc.section.2.4.p.1">In this model the SD-CPE will try to determine the value of maxport. The easiest way of doing this is to send dummy packets at boot time starting with source port 1024 and incrementing the source port number until the ICMP message type 13 is received. This is, however, quite inefficient. A better way is to use a dichotomy algorithm. Start with a high port of 65535 and a low port of 1024 and then divide the space in two depending on the reception (or non-reception of the ICMP message type 13. The advantage over incremental port allocation is that source port randomization is preserved.  </p>
<p id="rfc.section.2.4.p.2">Note 1: this dichotomy algorithm can be apply to real traffic, there is no need to send dummy packets. If the ICMP message type 13 is received, then the packet is retransmitted with a lower source port number.  </p>
<p id="rfc.section.2.4.p.3">Note 2: if an ICMP message type 13 does not come back within (TBD) seconds, the packets is considered successfully delivered through the SD-CGN/SD-NAT.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Host based SD-NAT, Wireless application</h1>
<p id="rfc.section.3.p.1">If the SD-CPE is running it's own applications sourcing datagrams on its WAN interface (or B4 element 192.0.0.2), or if a host is directly connected to the ISP access network, it must select a source port using the same algorithm as the NAPT function.  </p>
<p id="rfc.section.3.p.2">In particular, this makes SD-NAT well suited for wireless environments where the UE can be easily programmed to restrict its outgoing source port space.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> SD-CGN and SD-AFTR operation</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Anycast IPv6 address for SD-AFTR</h1>
<p id="rfc.section.4.1.p.1">All SD-AFTRs associated to a domain (or group of users) will be configured with the same IPv6 address on the interface facing IPv6 customers. A route for that IPv6 address will be anycasted within the access network.  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Multiple default IPv4 routes leading to SD-CGN</h1>
<p id="rfc.section.4.2.p.1">Similarly, in the NAT44 environment, the IPv4 traffic will be send to a number of SD-CGNs using a number of default routes or equivalent techniques.  </p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> SD-CGN and SD-AFTR operation</h1>
<p id="rfc.section.4.3.p.1">All SD-CGNs or SD-AFTRs associated to a domain (or group of users) will be configured with the same pool of global IPv4 addresses. They will be configured also with the same deterministic address and port mapping function. This function will map the customer ID, derived from either its private IPv4 address in the NAT44 case or its IPv6 address in the DS-Lite case and the source port used by the incoming connection into a global IPv4 address and port.  </p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> Mapping function</h1>
<p id="rfc.section.4.4.p.1">Various mapping functions can be defined. This is an implementation issue on the SD-CGNs or SD-AFTRs, however that function MUST be the same on all the SD-CGNs or SD-AFTRs within a domain.  </p>
<p id="rfc.section.4.4.p.2">The input parameters of that mapping function are the number of addresses in the IPv4 global pool, the number of customers and the maximum number of ports per customers.  </p>
<p id="rfc.section.4.4.p.3">Note: external ports in the range of [0..1023] MAY be excluded in the mapping function , however this is not a requirement.  </p>
<h1 id="rfc.section.4.5">
<a href="#rfc.section.4.5">4.5.</a> Example mapping function</h1>
<p id="rfc.section.4.5.p.1">Lets say that all external ports above 1023 are used and a 1024 ports are allocated per subscriber, and only one IPv4 address is configured in the NAT pool.  Customer #1 will have external ports 1024 to 2047, customer #2 will have external ports 2048 to 3071, etc...  </p>
<p id="rfc.section.4.5.p.2">Here is an algorithm that produces this result: </p>
<p id="rfc.section.4.5.p.3">Input variables: </p>
<p></p>

<ul>
<li>i: subscriber index </li>
<li>maxPort: maximum number of ports per subscriber </li>
<li>baseCPE:CPE address base, determined by Service Provider, e.g. 172.16.0.1 </li>
<li>baseCGN:CGN address base, determined by Service Provider e.g. 1.2.3.1.  </li>
</ul>

<p> </p>
<p id="rfc.section.4.5.p.5">Each SD-CPE implements a stateful NAT44 function with the following mappings: </p>
<p></p>

<ul>
<li>host_src_ip is mapped to: CPE WAN IPv4.  </li>
<li>host_src_port is mapped to: port, Where port is the first available port starting at 1024.  </li>
</ul>

<p> </p>
<p id="rfc.section.4.5.p.7">Each SD-CGN/SD-AFTR implements a deterministic stateless NAT44 function with following mappings: </p>
<p></p>

<ul class="empty">
<li>cpe_src_ip is mapped to: baseCGN + floor ( i / P) </li>
<li>cpe_src_port is mapped to: cpe_src_port + maxPort x (i mod P) ) </li>
<li>Where i = cpe_src_ip - baseCPE and P = floor ( (65536-1024) / maxPort ) </li>
<li>Note that in this simple algorithm, (65536-1024) must be multiple of maxPort. However, with minor modification to the algorithm, you can avoid this limitation.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.4.6">
<a href="#rfc.section.4.6">4.6.</a> Port exceeded message</h1>
<p id="rfc.section.4.6.p.1">If the SD-CGN or SD-AFTR receives an incoming datagram with a source port number higher than1023 + the maximum number of allocated ports per customer, the datagram MUST be dropped and an ICMP <a href="#RFC0792">[RFC0792]</a> error message type 13 (Communication administratively prohibited) MUST be returned to the originating SD-CPE.  </p>
<h1 id="rfc.section.4.7">
<a href="#rfc.section.4.7">4.7.</a> Address compression ratio</h1>
<p id="rfc.section.4.7.p.1">The maximum number of subscriber per IPv4 address is equal to (65536 minus 1024) divided by the number of ports per user, as configured on the SD-CGN or SD-AFTR.  </p>
<h1 id="rfc.section.4.8">
<a href="#rfc.section.4.8">4.8.</a> Anycast global IPv4 pool</h1>
<p id="rfc.section.4.8.p.1">Routes to the pool of global IPv4 addresses configured on the SD-CGN or SD-AFTR will be anycasted by all relevant SD-CGN or SD-AFTRs within the ISP routing domain.  </p>
<h1 id="rfc.section.4.9">
<a href="#rfc.section.4.9">4.9.</a> Stateless operation</h1>
<p id="rfc.section.4.9.p.1">By using anycast IPv4 pool, return IPv4 traffic can go back to any SD-CGN or SD-AFTR associated with that pool of address. Because the mapping function is deterministic (shared on all AFTRs) and because there is no dynamic state associated with any particular NAT mappings on any SD-CGN or SD-AFTR, the returning IPv4 traffic can be translated back, re-encapsulated in IPv6 in the case of DS-Lite, and send back to the customer by any SD-CGN or SD-AFTRs within the domain </p>
<p id="rfc.section.4.9.p.2">No need to do port mapping garbage collection on SD-CGN/SD-AFTR: </p>
<p id="rfc.section.4.9.p.3">Because those bindings are completely stateless and deterministic, an SD-CGN or SD-AFTR does not need to maintain state in its port-mapping table, and as such, does not  need to perform any garbage collection on idle connections.  From a subscriber application perspective, that mean that the application only need to negotiate ports with the local SD-CPE, for example using the PCP protocol.  </p>
<h1 id="rfc.section.4.10">
<a href="#rfc.section.4.10">4.10.</a> SD-AFTR stateless domain</h1>
<p id="rfc.section.4.10.p.1">Using the DHCPv6 DS-Lite tunnel-end-point option, groups of subscribers and can be associated to  a different SD-AFTR domain. That can allow for differentiated level of services, e.g. number of ports per customer device, QoS, bandwidth, value added services,...  </p>
<h1 id="rfc.section.4.11">
<a href="#rfc.section.4.11">4.11.</a> SD-CGN/SD-AFTR post mapping source port scrambling</h1>
<p id="rfc.section.4.11.p.1">In order to improve source port randomization, an SD-CGN or SD-AFTR can do post-mapping source port scrambling. The details of this optional feature are out of scope of this document. The scrambling function MUST be the same on all SD-CGN/SD-AFTR responsible for the same global IPv4 pool, and configured with the same parameters on all those devices. That scrambling function MUST be reversible.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> SD-NAT 444 example</h1>
<p id="rfc.section.5.p.1">This examples assume two SD-CGNs or two SD-AFTRs configured with the same IPv4 global address in their NAT pool. The operator has configured a limit of 1024 ports per subscriber. Subscriber #3 has 2 hosts, each running one connection and subscriber #7 has one host running one connection. Subscriber #3 SD-CPE WAN IPv4 address is 172.16.0.3 in case of NAT44 or WAN IPv6 address 2001:db8::3 in case of DS-LITE. Subscriber #7 WAN IPv4 address is 172.16.0.7 in case of NAT44 or WANT IPv6 address 2001:db8::7 in case of DS-LITE. Host 1 and 2 in subscriber #3 network are using IPv4 address 192.168.1.2 and 192.168.1.3, and host 1 in subscriber #7 network is using IPv4 address 192.168.1.2.  </p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> SD-NAT44 architecture</h1>
<div id="#rfc.figure.1"></div>
<div id="#sdcgn-arch"></div>
<pre>
       +------+     +------+       +------+
       |Host 1|     |Host 2|       |Host 1|
       +------+     +------+       +------+
   192.168.1.2\       /192.168.1.3    |192.168.1.2
               \     /                |
                \   /                 |
               +---------+        +---------+
               |SD-CPE #3|        |SD-CPE #7|
               +---------+        +---------+
          172.16.0.3|               /172.16.0.7
                    |              /
                    |             /
                ----------------------
               /                      \
              |    ISP core network    |
               \         IPv4         /
                ----------------------
                    | Anycast        \   Anycast
                    | default         \  default
                    | IPv4 route       \ IPv4 route
                +------------+    +------------+
                |   SD-CGN1  |    |   SD-CGN2  |
                +------------+    +------------+
                     1.2.3.4\      /1.2.3.4
           Anycast IPv4 route\    / Anycast IPv4 route
                  for 1.2.3.4 \  /  for 1.2.3.4
                      --------R-R------- 
                    /                   \
                   |       Internet      |
                    \        IPv4       /
                      -----------------


</pre>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> SD-CPE3 NAT bindings in NAT44 mode</h1>
<div id="#rfc.figure.2"></div>
<div id="#SD-CPE3-NAT44"></div>
<pre>
+--------------------------------------------------+
|Connection subscriber3-1:                         |
|SRC IPv4 192.168.1.2 mapped to SRC IPv4 172.16.0.3|
|SRC port 3786        mapped to SRC port 1024      |
+--------------------------------------------------+
|Connection subscriber3-2:
|SRC IPv4 192.168.1.3 mapped to SRC IPv4 172.16.0.3|
|SRC port 60345       mapped to SRC port 1025      |
+--------------------------------------------------+
</pre>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> SD-CPE7 NAT bindings in NAT44 mode</h1>
<div id="#rfc.figure.3"></div>
<div id="#SD-CPE7-NAT44"></div>
<pre>
+--------------------------------------------------+
|Connection subscriber7-1:                         |
|SRC IPv4 192.168.1.2 mapped to SRC IPv4 172.16.0.7|
|SRC port 3786        mapped to SRC port 1024      |
+--------------------------------------------------+
</pre>
<h1 id="rfc.section.5.4">
<a href="#rfc.section.5.4">5.4.</a> SD-CGN NAT bindings in NAT44 mode</h1>
<div id="#rfc.figure.4"></div>
<div id="#SD-CGN-NAT44"></div>
<pre>
+--------------------------------------------------+
|Connection subscriber3-1:                         |
|SRC IPv4 172.16.0.3 mapped to SRC IPv4 1.2.3.4    |
|SRC port 1024        mapped to SRC port 3072      |
+--------------------------------------------------+
|Connection subscriber3-2                          |
|SRC IPv4 172.16.0.3 mapped to SRC IPv4 1.2.3.4    |
|SRC port 1025       mapped to SRC port 3073       |
+--------------------------------------------------+
|Connection subscriber7-1:                         |
|SRC IPv4 172.16.0.7 mapped to SRC IPv4 1.2.3.4    |
|SRC port 1024        mapped to SRC port 7168      |
+--------------------------------------------------+
</pre>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> SD-DS-Lite example</h1>
<p id="rfc.section.6.p.1">This example assumes two SD-AFTRs configured with the same IPv4 global address in their NAT pool. The operator has configured a limit of 1024 ports per subscriber. Subscriber #3 has 2 hosts, each running one connection and subscriber #7 has one host running one connection. Subscriber #3 SD-CPE WAN IPv6 address is 2001:db8::3. Subscriber #7 WAN IPv6 address is 2001:db8::7. Both SD-CPE use the same B4 address 192.0.0.2, as specified in DS-Lite. Host 1 and 2 in subscriber #3 network are using IPv4 address 192.168.1.2 and 192.168.1.3, and host 1 in subscriber #7 network is using IPv4 address 192.168.1.2.  </p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> SD-DS-Lite architecture</h1>
<div id="#rfc.figure.5"></div>
<div id="#sdaftr-arch"></div>
<pre>
       +------+     +------+       +------+
       |Host 1|     |Host 2|       |Host 1|
       +------+     +------+       +------+
   192.168.1.2\       /192.168.1.3    |192.168.1.2
               \     /                |
                \   /                 |
               +---------+        +---------+
               |SD-CPE #3|        |SD-CPE #7|
               +---------+        +---------+
         2001:db8::3||             //2001:db8::7
           192.0.0.2||            //192.0.0.2
                    ||           //
                 ----------------------
                /                      \
               |    ISP core network    |
                \         IPv6         /
                 ----------------------
                     || Anycast      \\    Anycast
                     || AFTR          \\   AFTR
                     || IPv6 route     \\  IPv6 route
                 +------------+    +------------+
                 |  SD-AFTR1  |    |  SD-AFTR2  |
                 +------------+    +------------+
                      1.2.3.4\      /1.2.3.4
            Anycast IPv4 route\    / Anycast IPv4 route
                   for 1.2.3.4 \  /  for 1.2.3.4
                       --------R-R------- 
                      /                   \
                     |       Internet      |
                      \        IPv4       /
                       ------------------

</pre>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> SD-CPE3 NAT bindings in DS-Lite mode</h1>
<div id="#rfc.figure.6"></div>
<div id="#SD-CPE3-DS-Lite"></div>
<pre>
+--------------------------------------------------+
|Connection subscriber3-1:                         |
|SRC IPv4 192.168.1.2 mapped to SRC IPv4 192.0.0.2 |
|SRC port 3786        mapped to SRC port 1024      |
+--------------------------------------------------+
|Connection subscriber3-2:
|SRC IPv4 192.168.1.3 mapped to SRC IPv4 192.0.0.2 |
|SRC port 60345       mapped to SRC port 1025      |
+--------------------------------------------------+
</pre>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> SD-CPE7 NAT bindings in DS-Lite mode</h1>
<div id="#rfc.figure.7"></div>
<div id="#SD-CPE7-DS-Lite"></div>
<pre>
+--------------------------------------------------+
|Connection subscriber7-1:                         |
|SRC IPv4 192.168.1.2 mapped to SRC IPv4 192.0.0.2 |
|SRC port 3786        mapped to SRC port 1024      |
+--------------------------------------------------+
</pre>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> SD-AFTR NAT bindings in DS-Lite mode</h1>
<div id="#rfc.figure.8"></div>
<div id="#SD-AFTR-DS-Lite"></div>
<pre>
+--------------------------------------------------+
|Connection subscriber3-1 (2001:db8::3):           |
|SRC IPv4 192.0.0.2 mapped to SRC IPv4 1.2.3.4     |
|SRC port 1024      mapped to SRC port 3072        |
+--------------------------------------------------+
|Connection subscriber3-2 (2001:db8::3):           |
|SRC IPv4 192.0.0.2 mapped to SRC IPv4 1.2.3.4     |
|SRC port 1025      mapped to SRC port 3073        |
+--------------------------------------------------+
|Connection subscriber7-1 (2001:db8::7):           | 
|SRC IPv4 192.0.0.2 mapped to SRC IPv4 1.2.3.4     |
|SRC port 1024      mapped to SRC port 7168        |
+--------------------------------------------------+
</pre>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Comparison with other techniques</h1>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> Comparison with DS-Lite and NAT44 CGN</h1>
<p id="rfc.section.7.1.p.1">The trade-off of this stateless deterministic model of operation is efficiency in IPv4 address sharing. A typical DS-Lite or NAT44 environment can share an IPv4 address among over 1000 customers, if the ratio of maximum number of port used by any given subscriber to the maximum average number of ports used by all subscribers is high. A typical SD-DS-Lite or SD-NAT44 environment will share the same address among only about 100 subscribers, using a maximum number of ports per subscribers of 600.  </p>
<h1 id="rfc.section.7.2">
<a href="#rfc.section.7.2">7.2.</a> Comparison with 4rd/4via6/A+P/DIVI</h1>
<p id="rfc.section.7.2.p.1">The main difference with 4rd/A+P/4via6/DIVI techniques is that the CPE is unaware of the exact port distribution algorithm. That way, the ISP maintains the flexibility to change the numbers of ports allocated per subscriber, or add/delete/modify the pool of available global IPv4 addresses at any time without creating a customer outage.  </p>
<p id="rfc.section.7.2.p.2">SD-DS-Lite is based on encapsulation, 4via6 and DIVI are based on double translation IPv4 to IPv6 and back to IPv4. Service providers have deployed encapsulation techniques for many years, double translation is new and there is less operational experience with it.  </p>
<p id="rfc.section.7.2.p.3">An SD-CPE sends packets through a set of identified devices, the SD-CGNs or SD-AFTRs. This enables simple enforcement points to do IPv4 subscriber management (e.g. counting IPv4 traffic).  A consequence of that architecture in the SD-DS-Lite model is that is does not allow for 4rd style shortcuts, where traffic between customers within the same domain does not go through the relay.  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.8.p.1">None.  </p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.9.p.1">As described in <a href="#RFC6269">[RFC6269]</a>, with any fixed size address sharing techniques, port randomization is achieve with a smaller entropy.  Post mapping source port scrambling (see section XXX) can mitigate this issue.  </p>
<p id="rfc.section.9.p.2">Recommendations listed in <a href="#RFC6302">[RFC6302]</a> applies.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">10.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">10.1.</a> Normative references</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC0792">[RFC0792]</b></td>
<td class="top">
<a title="University of Southern California (USC)/Information Sciences Institute">Postel, J.</a>, "<a href="http://tools.ietf.org/html/rfc792">Internet Control Message Protocol</a>", STD 5, RFC 792, September 1981.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6333">[RFC6333]</b></td>
<td class="top">
<a>Durand, A.</a>, <a>Droms, R.</a>, <a>Woodyatt, J.</a> and <a>Y. Lee</a>, "<a href="http://tools.ietf.org/html/rfc6333">Dual-Stack Lite Broadband Deployments Following IPv4 Exhaustion</a>", RFC 6333, August 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">10.2.</a> Informative references</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC6269">[RFC6269]</b></td>
<td class="top">
<a>Ford, M.</a>, <a>Boucadair, M.</a>, <a>Durand, A.</a>, <a>Levis, P.</a> and <a>P. Roberts</a>, "<a href="http://tools.ietf.org/html/rfc6269">Issues with IP Address Sharing</a>", RFC 6269, June 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6302">[RFC6302]</b></td>
<td class="top">
<a>Durand, A.</a>, <a>Gashinsky, I.</a>, <a>Lee, D.</a> and <a>S. Sheppard</a>, "<a href="http://tools.ietf.org/html/rfc6302">Logging Recommendations for Internet-Facing Servers</a>", BCP 162, RFC 6302, June 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-pcp-base">[I-D.ietf-pcp-base]</b></td>
<td class="top">
<a>Wing, D</a>, <a>Cheshire, S</a>, <a>Boucadair, M</a>, <a>Penno, R</a> and <a>P Selkirk</a>, "<a href="http://tools.ietf.org/html/draft-ietf-pcp-base-17">Port Control Protocol (PCP)</a>", Internet-Draft draft-ietf-pcp-base-17, October 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Reinaldo Penno</span> 
	  <span class="n hidden">
		<span class="family-name">Penno</span>
	  </span>
	</span>
	<span class="org vcardline">Juniper Networks</span>
	<span class="adr">
	  <span>1194 North Mathilda Avenue</span>

	  <span class="vcardline">
		<span class="locality">Sunnyvale</span>,  
		<span class="region">CA</span> 
		<span class="code">94089-1206</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:rpenno@juniper.net">rpenno@juniper.net</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Alain Durand</span> 
	  <span class="n hidden">
		<span class="family-name">Durand</span>
	  </span>
	</span>
	<span class="org vcardline">Juniper Networks</span>
	<span class="adr">
	  <span>1194 North Mathilda Avenue</span>

	  <span class="vcardline">
		<span class="locality">Sunnyvale</span>,  
		<span class="region">CA</span> 
		<span class="code">94089-1206</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:adurand@juniper.net">adurand@juniper.net</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Lionel Hoffmann</span> 
	  <span class="n hidden">
		<span class="family-name">Hoffmann</span>
	  </span>
	</span>
	<span class="org vcardline">Bouygues Telecom</span>
	<span class="adr">
	  <span>TECHNOPOLE</span>
<span>13/15 Avenue du Marechal Juin</span>

	  <span class="vcardline">
		<span class="locality">Meudon</span>,  
		<span class="region"></span>
		<span class="code">92360</span>
	  </span>
	  <span class="country-name vcardline">France</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:lhoffman@bouyguestelecom.fr">lhoffman@bouyguestelecom.fr</a></span>

  </address>
</div>

</body>
</html>