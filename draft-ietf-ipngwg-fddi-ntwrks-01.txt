
Internet Engineering Task Force                            Matt Crawford
INTERNET-DRAFT                                                  Fermilab
<draft-ietf-ipngwg-fddi-ntwrks-01.txt>                  November 7, 1995


    A Method for the Transmission of IPv6 Packets over FDDI Networks



Status of this Memo

   This document is an Internet Draft.  Internet Drafts are working
   documents of the Internet Engineering Task Force (IETF), its Areas,
   and its Working Groups.  Note that other groups may also distribute
   working documents as Internet Drafts.

   Internet Drafts are draft documents valid for a maximum of six
   months.  Internet Drafts may be updated, replaced, or obsoleted by
   other documents at any time.  It is not appropriate to use Internet
   Drafts as reference material or to cite them other than as a "working
   draft" or "work in progress."

   To learn the current status of any Internet-Draft, please check the
   ``1id-abstracts.txt'' listing contained in the Internet Drafts Shadow
   Directories on ds.internic.net (US East Coast), nic.nordu.net
   (Europe), ftp.isi.edu (US  West  Coast), or munnari.oz.au (Pacific
   Rim).

   Distribution of this memo is unlimited.


Introduction

   This memo specifies the MTU frame format for transmission of IPv6
   [IPV6] packets on FDDI networks, including a method for MTU
   determination in the presence of 802.1d bridges to other media.  It
   also specifies the method of forming IPv6 link-local addresses on
   FDDI networks and the content of the Source/Target Link-layer Address
   option used the the Router Solicitation, Router Advertisement,
   Neighbor Solicitation, and Neighbor Advertisement messages described
   in [DISC], when those messages are transmitted on an FDDI network.


Maximum Transmission Unit

   FDDI permits a frame length of 4500 octets (9000 symbols), including
   at least 22 octets (44 symbols) of Data Link encapsulation when
   long-format addresses are used.  Subtracting 8 octets of LLC/SNAP



Crawford                    Expires May 1996                    [Page 1]

INTERNET-DRAFT   Transmission of IPv6 Packets Over FDDI  7 November 1995


   header, this would, in principle, allow the IPv6 packet in the
   Information field to be up to 4470 octets.  However, it is desirable
   to allow for the variable sizes and possible future extensions to the
   MAC header and frame status fields.  The default MTU size for IPv6
   packets on an FDDI network is therefore 4352 octets.  This size may
   be reduced by a Router Advertisement [DISC] containing an MTU option
   which specifies a smaller MTU, or by manual configuration of a
   smaller value on each node.  If a Router Advertisement is received
   with an MTU option specifying an MTU larger than the default or the
   manually configured value, that MTU option may be logged to system or
   network management but must be otherwise ignored.


Frame Format

   FDDI provides both synchronous and asynchronous transmission, with
   the latter class further subdivided by the use of restricted and
   unrestricted tokens.  Only asynchronous transmission with
   unrestricted tokens is required for FDDI interoperability.
   Accordingly, IPv6 packets shall be sent in asynchronous frames using
   unrestricted tokens.  The robustness principle dictates that nodes
   should be able to receive synchronous frames and asynchronous frames
   sent using restricted tokens.

   IPv6 packets are transmitted in LLC/SNAP frames, using long-format
   (48 bit) addresses.  The data field contains the IPv6 header and
   payload and is followed by the FDDI Frame Check Sequence, Ending
   Delimiter, and Frame Status symbols.


       +-------+                                               ^
       |  FC   |                                               |
       +-------+-------+-------+-------+-------+-------+       |
       |            Destination FDDI address           |       |
       +-------+-------+-------+-------+-------+-------+      FDDI
       |              Source FDDI address              |     header
       +-------+-------+-------+-------+-------+-------+       |
       | DSAP  | SSAP  |  CTL  |          OUI          |       |
       +-------+-------+-------+-------+-------+-------+       |
       |   Ethertype   |                                       v
       +-------+-------+-------+-------+-------+------+------+
       |            IPv6 header and payload ...              /
       +-------+-------+-------+-------+-------+------+------+








Crawford                    Expires May 1996                    [Page 2]

INTERNET-DRAFT   Transmission of IPv6 Packets Over FDDI  7 November 1995


FDDI Header Fields:

FC          The Frame Code shall be in the range 50 to 57 hexadecimal,
            inclusive, with the three low order bits indicating the
            frame priority.  Transmission by hosts and routers of frames
            with priority zero (FC =3D 50 hex) is discouraged in order to=

            aid implementors who wish to distinguish on-ring nodes from
            nodes which lie behind bridges.

DSAP, SSAP  Both the DSAP and SSAP fields shall contain the value AA
            hexadecimal, indictating SNAP encapsulation.

CTL         The Control field shall be set to 03 hexadecimal, indicating
            Unnumbered Information.

OUI         The Organizationally Unique Identifier shall be set to
            000000 hexadecimal.

Ethertype   The ethernet protocol type ("ethertype") shall be set to the
            value 86DD hexadecimal.


Interaction with Bridges

   For correct operation when mixed media are bridged together, nodes
   transmitting IPv6 on FDDI must implement the following simple
   mechanism for bridge detection.  If a node receives a valid Router
   Advertisement or Neighbor Advertisement on an FDDI interface in a
   frame with priority zero (FC =3D 50 hexadecimal), the link MTU used by=

   that node on that interface shall not exceed 1500 octets.  The event
   of detecting a mixed-media bridged network should be logged to system
   management the first time it occurs after interface initialization,
   and such logging should include the source IPv6 address of the packet
   which triggered bridge detection.

   Nodes transmitting IPv6 on FDDI must provide a configuration option
   to disable the bridge detection mechanism.  This option may be used
   when the presence of a non-conforming implementation is known.  By
   default, bridge detection must be enabled.

   It is possible that a medium other than Ethernet may be bridged to
   FDDI, and that the correct MTU will be neither 1500 nor 4352 octets.
   In such a case, bridge detection should be disabled and routers
   should be configured to advertise the correct MTU.

   The only contemplated use of the LLC priority field of the FC octet
   is to aid in link MTU determination.  It would be sufficient for that
   purpose to require only that Router Advertisements and Neighbor



Crawford                    Expires May 1996                    [Page 3]

INTERNET-DRAFT   Transmission of IPv6 Packets Over FDDI  7 November 1995


   Advertisements sent on FDDI always have non-zero priority.  However,
   it may be simpler or more useful to transmit all IPv6 packets on FDDI
   with non-zero priority.


Stateless Autoconfiguration and Link-Local Addresses

   The address token [CONF] for an FDDI interface is the interface's
   built-in 48-bit IEEE 802 address, in canonical bit order and with the
   octet in the same order in which they would appear in the header of
   an ethernet frame.  (The individual/group bit is in the first octet
   and the OUI is in the first three octets.) A different MAC address
   set manually or by software should not be used as the address token.

   An IPv6 address prefix used for stateless autoconfiguration of an
   FDDI interface must be 80 bits in length.

   The IPv6 Link-local address [AARCH] for an FDDI interface is formed
   by appending the interface's IEEE 802 address to the 80-bit prefix
   FE80::.


      +-------+-------+-------+-------+-------+-------+------+------+
      |  FE      80      00      00      00      00      00     00  |
      +-------+-------+-------+-------+-------+-------+------+------+
      |  00      00   |                  FDDI Address               |
      +-------+-------+-------+-------+-------+-------+------+------+



Address Mapping -- Unicast

   The procedure for mapping IPv6 addresses into FDDI link-layer
   addresses is described in [DISC].  The Source/Target Link-layer
   Address option has the following form when the link layer is FDDI.


      +-------+-------+-------+-------+-------+-------+------+------+
      | Type  |Length |                 FDDI Address                |
      +-------+-------+-------+-------+-------+-------+------+------+



Option fields:


Type        1 for Source Link-layer address.
            2 for Target Link-layer address.



Crawford                    Expires May 1996                    [Page 4]

INTERNET-DRAFT   Transmission of IPv6 Packets Over FDDI  7 November 1995


Length      1 (in units of 8 octets).


FDDI Address
            The 48 bit FDDI IEEE 802 address, in canonical bit order.


Address Mapping -- Multicast

   An IPv6 packet with a multicast destination address DST is
   transmitted to the FDDI multicast address whose first two octets are
   the value 3333 hexadecimal and whose last four octets are the last
   four octets of DST, ordered from more to least significant.


             +-------+-------+-------+-------+-------+-------+
             |  33   |  33   | DST13 | DST14 | DST15 | DST16 |
             +-------+-------+-------+-------+-------+-------+



Security Considerations

   Security considerations are not addressed in this memo.


References


[AARCH] R. Hinden, S. Deering, IP Version 6 Addressing Architecture.
        Currently draft-ietf-ipngwg-addr-arch-03.txt.


[CONF]  S. Thomson, IPv6 Stateless Address Autoconfiguration.  Currently
        draft-ietf-addrconf-ipv6-auto-05.txt.


[DISC]  T. Narten, E. Nordmark, W. A. Simpson, Neighbor Discovery for IP
        Version 6 (IPv6).  Currently draft-ietf-ipngwg-discovery-02.txt.


[IPV6]  S. Deering, R. Hinden, Internet Protocol, Version 6 (IPv6)
        Specification.  Currently draft-ietf-ipngwg-ipv6-spec-02.txt.








Crawford                    Expires May 1996                    [Page 5]

INTERNET-DRAFT   Transmission of IPv6 Packets Over FDDI  7 November 1995


Author's Address

   Matt Crawford
   Fermilab MS 368
   PO Box 500
   Batavia, IL 60510
   USA

   Phone: +1 708 840-3461

   EMail: crawdad@fnal.gov








































Crawford                    Expires May 1996                    [Page 6]


