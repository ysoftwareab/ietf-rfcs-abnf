                Route Optimization for Mobile Network       June 2003 
 
 
   Individual Submission                                                
   Internet Draft                                          Hyunsik Kang 
   Document: draft-hkang-nemo-ro-tlmr-00.txt               Keecheon Kim 
                                                           Sunyoung Han 
                                                      Konkuk University 
                                                         Kyeong-Jin Lee 
                                                          Jung-Soo Park 
                                                                   ETRI 
   Expires: December 20023                                    June 2003 
    
    
       Route Optimization for Mobile Network by Using Bi-directional 
               Between Home Agent and Top Level Mobile Router 
    
Status of this Memo 
    
   This document is an Internet-Draft and is in full conformance with  
   all provisions of Section 10 of RFC2026 except that the right to  
   produce derivative works is not granted [1].  
    
   Internet-Drafts are working documents of the Internet Engineering      
   Task Force (IETF), its areas, and its working groups.  Note that      
   other groups may also distribute working documents as Internet-      
   Drafts.  
     
   Internet-Drafts are draft documents valid for a maximum of six months  
   and may be updated, replaced, or obsoleted by other documents at any  
   time.  It is inappropriate to use Internet-Drafts as reference  
   material or to cite them other than as "work in progress".  
     
   The list of current Internet-Drafts can be accessed at  
   http://www.ietf.org/ietf/1id-abstracts.txt  
     
   The list of Internet-Draft Shadow Directories can be accessed at  
   http://www.ietf.org/shadow.html.  
    
Abstract 
    
   This document shows how to route optimization by using bi-directional 
   tunnel between home agent and top level mobile router. A packet will 
   be transmitted directly from the home link of the mobile node to top 
   level mobile router of the correspondent node through this tunnel. 
    
Conventions used in this document 
    
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in RFC-2119. 
    
 
 
Kang, Kim, Han, Lee, Park   Expires - December 2003           [Page 1] 
                Route Optimization for Mobile Network       June 2003 
 
 
Table of Contents 
    
   1. Introduction...................................................2 
   2. Overview.......................................................2 
   3. Mobile Router extension : mobile router of mobile subnetwork...3 
   4. Mobile Router extension : Top level mobile router..............4 
   5. Home agent extension for Mobile Router.........................4 
   6. New RA message and mobility option.............................4 
      6.1 RA message with TLMR option................................4 
      6.2 New mobility option........................................5 
   7. Procedure of Route Optimization................................6 
      7.1 Receiving RA message from TLMR.............................6 
      7.2 Registration to TLMR and binding update to home agent with 
      TLMR address...................................................7 
      7.3 Delivery of Data Packets...................................7 
        7.3.1 CN transmit to MN (or Fixed Node in MR)7 
        7.3.2 MN (or Fixed Node in MR) transmits to CN  7 
   Security Considerations...........................................8 
   References........................................................8 
   Author's Addresses................................................8 
    
    
1. Introduction 
    
   The basic support of mobile network (NEMO) enables mobile network  
   nodes and correspondent nodes to communicate through bi-directional  
   tunnels.  However, using MIPv6 for mobile network will introduce a 
   problem of dog-leg routing. In order to communicate from foreign 
   networks with mobile nodes, packets are usually transmitted via the 
   home link of the mobile node. Dog-leg routing may cause a 
   transmission latency, this subsequently causes the difficulty for a 
   real time service and the delay in binding update. This document 
   specifies how we can optimize the routing in NEMO [2]-[4].  
    
2. Overview 
    
   A possible solution to routing optimization is to make tunnels 
   between top level mobile router of NEMO and home agent of each mobile 
   router. When a mobile node detects an access to a foreign network, a 
   mobile router does binding update to home agent. At this time, mobile 
   router detects IP address of the top level mobile router(TLMR) by 
   router advertisement extension message(see figure 1.). And then, the 
   mobile router registers to TLMR and notifies address of TLMR to its 
   own home agent. When TLMR receives a registration message from the 
   mobile router, it detects a relationship between mobile router and 
   its access router. From this information, TLMR forms a mobile 
   sub-network topology table. Using this table, TLMR creats a tunnel to 
   each mobile router, if necessary, to communicate with mobile router. 
   This tunnel is used by the encapsulated packets to be transmitted 
 
 
Kang, Kim, Han, Lee, Park   Expires - December 2003           [Page 2] 
                Route Optimization for Mobile Network       June 2003 
 
 
   between TLMR and mobile router. (see Section 7.4) 
    
                                  +-----+ 
                                  |TLMR | 
                        RA(TMLR) |+--+--+ 
                                 V   | 
           ----------+---------------+-------------+----------- Link1 
                     |                             | 
                   +-+-+                         +-+-+ 
                   |MR1|                         |MR2| 
    RA(MR1+TLMR) | +-+-+           RA(MR2+TLMR)| +-+-+ 
                 V   |                         V   | 
            ---+-----+-----+--- Link2    ---+------+-----+--- Link3 
               |           |                |            | 
             +-+-+       +-+-+            +-+-+        +-+-+ 
            |MN1|       |FN1|            |MN2|        |MR3|RA(MR3+TLMR) 
             +---+       +---+            +---+        +---+ |  
                                                         |   V 
                                          Link4 ---+-----+-----+--- 
                                                   |           | 
                                                 +-+-+       +-+-+ 
                                                 |MN3|       |FN2| 
                                                 +-+-+       +-+-+ 
    
   Figure 1. Routing advertisement message extension for route optimize 
    
     
                                        *********** 
                          +///////////+ |#########|###########+    FN2 
       CN ----------------|===========+=+=========+===========+-------- 
                          +///////////+ |#########|###########+ 
                                        ***********          MR3 
                       MR3_HA         TLMR       MR2 
    
      ------- : original packet 
      +=====+ : tunneling between HA of MR3 and MR3 
      +/////+ : tunneling between HA of MR3 and TLMR 
      +#####+ : tunneling between TLMR and MR3 
      +*****+ : tunneling between TLMR and MR2 
    
       Figure 2. all tunneling model of RO solution 
    
3. Mobile Router extension : mobile router of mobile subnetwork  
    
   Mobile router MUST relay extended router advertisement message of 
   TLMR that has been transmitted from its parent mobile router to its 
   child mobile router. If a mobile router receives an extended router 
   advertisement message of TLMR, it MUST notify the TLMR's address to 
   its own home agent to set up a direct tunnel between the home agent 
 
 
Kang, Kim, Han, Lee, Park   Expires - December 2003           [Page 3] 
                Route Optimization for Mobile Network       June 2003 
 
 
   and TLMR. The mobile router registers its address and the address of 
   its parent router to TLMR to set up a tunnel between TLMR and mobile 
   router. 
    
   When a mobile router receives a packet from its children nodes, if 
   the packet's destination address is TLMR, then the mobile router does 
   encapsulation to make the destination address to be TLMR, not its 
   home agent. This makes a direct communication between mobile router 
   and TLMR. Therefore, this packet doesn't have to pass the home agent 
   of the parent mobile router. 
    
4. Mobile Router extension : Top level mobile router 
    
   If the mobile router doesn't receive an extended router advertisement 
   with TLMR option, it becomes a TLMR. The TLMR MUST advertise that it  
   is TLMR by an extentded router advertisement message with TLMR option 
   (see Section 6.1). When a mobile router receives this message, it 
   requests a registration to TLMR by sending registration request 
   message. This message includes its address and the address of the 
   access router(parent router). When the TLMR recieves a registration 
   request message, if it accepts the registration, it determines the 
   path to mobile router from the addresses in this message. 
    
   Based on this routing information, TLMR decides how to encapsulate 
   the packet to the mobile router or a home agent of a mobile router. 
    
5. Home agent extension for Mobile Router 
    
   The home agent of mobile router SHOULD bind the CoA of the mobile 
   router and address of TLMR of the mobile router from new binding 
   update message which has the TLMR address option. The home agent 
   SHULD adds TLMR field to its own binding table. This field is used 
   for encapsulating a pakcet to TLMR. When a home agent receives a 
   packet to the mobile router, it SHOULD encapsulate the packet to send 
   to the CoA of the mobile router. But, for a route optimization, the 
   home agent SHOULD perform one more encapsulation to have its 
   destination address is TLMR. Similarly, when a home agent receives a 
   packet from TLMR, it can find an original packet encapsulated by a 
   mobile router through decapsulating the packet encapsulated by TLMR 
    
6. New RA message and mobility option 
    
   This approach needs some new message formats or options such as 
   router advertisement message, registration request message to TLMR, 
   and binding request message to home agent with TLMR address for route 
   optimization [5]-[8]. 
    
6.1 RA message with TLMR option 
    
 
 
Kang, Kim, Han, Lee, Park   Expires - December 2003           [Page 4] 
                Route Optimization for Mobile Network       June 2003 
 
 
   The router advertisement messages with TLMR option is needed by a 
   mobile router to create a bi-directional tunnel between TLMR and the 
   home agent of mobile router. 
    
    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |     Type      |    Length     | Prefix Length |L|A|R|T|P|Res 1| 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |                         Valid Lifetime                        | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |                       Preferred Lifetime                      | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |                           Reserved2                           | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |                                                               | 
   +                                                               + 
   |                                                               | 
   +                            Address                            + 
   |                                                               | 
   +                                                               + 
   |                                                               | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    
   Field: 
   T           1-bit TLMR flag. When set, it  indicates that the 
             message contains the address of the TLMR 
              
   P           1-bit parent mobile router flag. When set, it 
             indicates that this message contains the CoA of 
             the parent mobile router. The CoA of the parent mobile 
             router is used for tunneling between TLMR and the 
             parent mobile router. 
             T flag and P flag SHOULD not be set at the same time. 
              
   Address     This address is an address of the TLMR or parent 
             mobile router. 
    
   Figure 3. Modified Prefix Information Option Format for RO 
    
    
   When T flag is set, it indicates that this message includes the 
   address of the TLMR. This option is used by a mobile router to send 
   binding update to home agent and registration message to TLMR. 
 
6.2 New mobility option 
    
   A modified binding update message is used when a mobile router 
   registers to TLMR and  updates its binding to home agent. The TLMR 
 
 
Kang, Kim, Han, Lee, Park   Expires - December 2003           [Page 5] 
                Route Optimization for Mobile Network       June 2003 
 
 
   determines the path to the mobile router from the address in this 
   message. 
    
    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
                                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                                   |  Type = 6     | Option Length | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |                                                               | 
   +                                                               + 
   |                                                               | 
   +                               Address                         + 
   |                                                               | 
   +                                                               + 
   |                                                               | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    
   Field: 
   Address     The address is an address of the parent mobile router 
             of the mobile router or CoA of TLMR. When this message 
             is used for registering to TLMR, this field contains 
             the CoA of parent mobile router. When TLMR needs to 
             send a packet, TLMR creats a tunnel to this address. 
             On the other hand, when this message is used for 
             sending binding update to home agent, this field 
             contains an address of TLMR. The home agent SHOULD 
             create a bi-directional tunnel to TLMR. 
    
   Figure 4. Modified binding update message 
   <Text for this section> 
    
 
7. Procedure of Route Optimization 
    
7.1 Receiving RA message from TLMR 
    
   A mobile router waits for an extended router advertisement message. 
   If the mobile router receives an extended router advertisement 
   message, it does binding update to TLMR and home agent with modified 
   binding update message. The mobile router MUST relay this message to 
   its child mobile router. 
    
   If the mobile router doesn't receive an extended router advertisement 
   message, it means the router is TLMR. The mobile router becomes TLMR, 
   and it sends an extended router advertisement message with the 
   address of TLMR which is the address of mobile router itself. 
    


 
 
Kang, Kim, Han, Lee, Park   Expires - December 2003           [Page 6] 
                Route Optimization for Mobile Network       June 2003 
 
 
7.2 Registration to TLMR and binding update to home agent with TLMR 
    address 
    
   When the mobile router receives an extended router advertisement 
   message, it SHOULD register to TLMR and send binding update to its 
   home agent. 
    
   When TLMR receives a registration request message from a mobile 
   router, it makes a tunneling table to mobile router from this 
   message. The tunneling table is composed of mobile router and its 
   access router. When the home agent receives this binding update 
   message, it creates a bi-directional tunnel between the home agent 
   and TLMR, which will be used for direct communication without dog-leg 
   routing. 
    
7.3 Delivery of Data Packets 

7.3.1 CN transmit to MN (or Fixed Node in MR) 
    
   A correspondent node sends a packet to a node in mobile router, and 
   this packet goes to the home network of mobile router. The home agent 
   intercepts this packet, and encapsulates it to send to a mobile 
   router. In order to communicate with a mobile router directly, the 
   home agent encapsulates again to send the packet to TLMR. When TLMR 
   receives this packet, it decapsulates the packet. TLMR finds the 
   destination address to determine the path to the mobile router by 
   using the tunneling table. In order to send to a mobile router, TLMR 
   does encapsulation for ecah mobile routers that are between TLMR and 
   destination mobile router. In this way, TLMR sends a pakcet to a 
   mobile router. When a mobile router receives a packet, it first 
   decapsulates the packet encapsulated by TLMR, and it does one more 
   decapsulation encapsulated by its home agent. This packet will be 
   sent to the destination node. 
    

7.3.2 MN (or Fixed Node in MR) transmits to CN 
    
   When a node in mobile network sends a packet to CN, this packet is 
   encapsulated by a mobile router to be sent to the  home agent of 
   mobile router. The mobile router encapsulates the packet again to 
   directly communicate with TLMR. This packet goes to the parent mobile 
   router, the parent mobile router does encapsulation again for direct 
   communication with TLMR. Likewise, this packet is encapsulated by 
   each mobile router located between TLMR and mobile router. When this 
   packet arrives on TLMR, TLMR decapsulates all the encapsulation 
   headers made by intermediate mobile routers except for the 
   encapsulation made by the end-point mobile router. And then, TLMR 
   encapsulates the packet to send to the home agent of mobile router. 
 
 
Kang, Kim, Han, Lee, Park   Expires - December 2003           [Page 7] 
                Route Optimization for Mobile Network       June 2003 
 
 
   When the mobile router receives this packet, it decapsulates the 
   packet ecapsulated by the TLMR and end-point mobile router. The 
   packet decapsulated by home agent is the original packet that has 
   been sent to the correspondent node. 
    
Security Considerations 
    
   The route optimization in this document does not add any other  
   security problems to the NEMO or Mobile IPv6.  
    
References 
    
    
   [1] Bradner, S., "The Internet Standards Process -- Revision 3", BCP  
   9, RFC 2026, October 1996.  
    
   [2] T. Narten, E. Nordmark and W. Simpson, "Neighbour Discovery for  
   IP version 6", RFC 2461.  
    
   [3] Dave Thaler and Chistian Huitema, "Multi-link Subnet Support in  
   IPv6", draft-ietf-ipv6-multilink-subnets-00.txt, June 2002.  
    
   [4] Thierry Ernst, "Network Mobility Support Terminology", draft-                  
   ietf-nemo-terminology-00.txt, May 2003.  
    
   [5] D. Johnson, C. Perkins and J. Arkko, "Mobility Support in IPv6",  
   draft-ietf-mobileip-ipv6-22.txt, May 2003. 
    
   [6] Ryuji Wakikawa, Keisuke Uehara, Koshiro Mitsuya, Thierry Ernst, 
   "Basic Network Mobility Support", draft-wakikawa-nemo-basic- 
   00.txt, Feb 2003. 
    
   [7] Thierry Ernst, "Network Mobility Support Goals and Requirements", 
   draft-ietf-nemo-requirements-01.txt, May 2003 
    
   [8] Thierry Ernst, Hong-Yon Lach, "Network Mobility Support 
   Terminology", draft-ietf-nemo-terminology-00.txt, May 2003 
    
Author's Addresses 
    
   Hyunsik Kang 
   Department of Computer Science & Engineering, Konkuk University 
   Whayangdong 1, Kwangjin-ku 
   Seoul 143-701 
   Korea 
    
   Phone: +82 2 450 3518 
   EMail: bigbomb@konkuk.ac.kr 
    
 
 
Kang, Kim, Han, Lee, Park   Expires - December 2003           [Page 8] 
                Route Optimization for Mobile Network       June 2003 
 
 
   Keecheon Kim 
   Department of Computer Science & Engineering, Konkuk University 
   Whayangdong 1, Kwangjin-ku 
   Seoul 143-701 
   Korea 
    
   Phone: +82 2 450 3518 
   EMail: kckim@konkuk.ac.kr 
    
   Sunyoung Han 
   Department of Computer Science & Engineering, Konkuk University 
   Whayangdong 1, Kwangjin-ku 
   Seoul 143-701 
   Korea 
    
   Phone: +82 2 450 3537 
   EMail: syhan@cclab.konkuk.ac.kr 
    
   Kyeong-Jin Lee  
   ETRI / PEC  
   161 Gajong-Dong, Yusong-Gu  
   Daejon 305-350  
   Korea  
    
   Phone: +82 42 860 6484  
   EMail: leekj@etri.re.kr  
    
   Jung-Soo Park  
   ETRI / PEC  
   161 Gajong-Dong, Yusong-Gu  
   Daejon 305-350  
   Korea  
    
   Phone: +82 42 860 6514  
   EMail: pjs@etri.re.kr 














 
 
Kang, Kim, Han, Lee, Park   Expires - December 2003           [Page 9] 
