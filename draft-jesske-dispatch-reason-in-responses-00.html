<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Use of the Reason header filed in Session
    Initiation Protocol (SIP) responses</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Use of the Reason header filed in Session
    Initiation Protocol (SIP) responses">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">dispatch</td><td class="header">R. Jesske</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">L. Liess</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">Deutsche Telekom</td></tr>
<tr><td class="header">Expires: February 20, 2010</td><td class="header">August 19, 2009</td></tr>
</table></td></tr></table>
<h1><br />Use of the Reason header filed in Session
    Initiation Protocol (SIP) responses<br />draft-jesske-dispatch-reason-in-responses-00</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008. The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on February 20, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>Although the use of the Reason header in responses is considered in
      RFC3326, doing so is not specified for any existing response code. This
      document specifies the use of the Reason header field in SIP responses
      to carry Q.850 reason codes for the failure of an INVITE. Although the
      use of the Reason header field in responses is considered in RFC3326,
      doing so is not specified for any existing response code. Nonetheless,
      the Reason header field has been widely used in responses to carry Q.850
      reason codes for failure responses to INVITEs that have been gatewayed
      to PSTN systems. This document specifies and formally permits the use of
      the Reason header field in SIP responses to carry Q.850 reason codes for
      this and other purposes.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Terminology<br />
<a href="#anchor2">2.</a>&nbsp;
Overview <br />
<a href="#anchor3">3.</a>&nbsp;
Requirements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
Used Cases for the requirements<br />
<a href="#anchor5">4.</a>&nbsp;
Overall Applicability<br />
<a href="#anchor6">5.</a>&nbsp;
Procedures<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">5.1.</a>&nbsp;
Procedures at the UA<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">5.2.</a>&nbsp;
Procedures at a SIP proxy<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">5.3.</a>&nbsp;
Procedures at an application server<br />
<a href="#anchor10">6.</a>&nbsp;
Procedures at an interworking point with ISUP<br />
<a href="#anchor11">7.</a>&nbsp;
Example<br />
<a href="#anchor12">8.</a>&nbsp;
Security Considerations<br />
<a href="#anchor13">9.</a>&nbsp;
IANA Considerations  <br />
<a href="#anchor14">10.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">11.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<p>This document uses terms from <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Overview </h3>

<p>With introducing the Session Initiation Protocol <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>into the IP Multimedia Subsystem (IMS) which is
      defined by the 3rd Generation Partnership Project the it was required to
      interoperate with the PSTN/ISDN. The European Telecommunication
      Standards Institute (ETSI) has defined a Next Generation Network (NGN)
      where a substantial part of it is based on the IMS.
</p>
<p>ETSI has developed a number of requirements to support the usage of
      SIP in Next Generation Networks that interoperate, at the service level,
      with the Public Switched Telephone Network (PSTN), the Integrated
      Services Digital Network (ISDN), the 3GPP IP Multimedia Subsystem (IMS),
      and SIP networks and terminals that implement the service logic.
</p>
<p>Also ITU-T has specified an interworking between SIP and PSTN/ISDN
      networks <a class='info' href='#ITU.Q1912.5.2004'>[ITU.Q1912.5.2004]<span> (</span><span class='info'>International Telecommunications             Union, &ldquo;Interworking between Session Initiation Protocol (SIP) and           Bearer Independent Call Control protocol or ISDN User Part [ITU-T           Recommendation Q.1912.5 (2005)],&rdquo; April&nbsp;2004.</span><span>)</span></a> where reason within
      responses are allready supported.
</p>
<p>In order to provide full support in SIP of existing services,
      extensions to SIP are needed.
</p>
<p>This document proposes the use of the Reason header field in
      responses. This is needed for creating services that must be
      interoperable with the PSTN/ISDN network and the interoperability of
      traversing communications through SIP not using SIP-I.
</p>
<p>The main used case for reason header within responses are
      interworking situations with PSTN/ISDN networks where the ISUP cause In
      many cases the mapping of specific cause values will result in a generic
      SIP Response like it is shown below.
</p>
<p><a class='info' href='#RFC3398'>[RFC3398]<span> (</span><span class='info'>Camarillo, G., Roach, A., Peterson, J., and L. Ong, &ldquo;Integrated Services Digital Network (ISDN) User Part (ISUP) to Session Initiation Protocol (SIP) Mapping,&rdquo; December&nbsp;2002.</span><span>)</span></a> and other Interworking specifications
      like <a class='info' href='#3GPP.29.163'>[3GPP.29.163]<span> (</span><span class='info'>3GPP, &ldquo;Interworking between the IP Multimedia (IM) Core Network (CN) subsystem and Circuit Switched (CS) networks,&rdquo; June&nbsp;2009.</span><span>)</span></a> are describing the mapping of
      ISUP Cause Values to SIP and vice versa. Looking on the specific mapping
      shows that information will be lost when the call traverses ISUP without
      using SIP-T.
</p>
<p>Example:
</p>
<p><a class='info' href='#RFC3398'>[RFC3398]<span> (</span><span class='info'>Camarillo, G., Roach, A., Peterson, J., and L. Ong, &ldquo;Integrated Services Digital Network (ISDN) User Part (ISUP) to Session Initiation Protocol (SIP) Mapping,&rdquo; December&nbsp;2002.</span><span>)</span></a> describes the mapping of following
      ISUP Causes to 503 and 408 like follows.
</p>
<p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   ISUP Cause value                        SIP response
   ----------------                        ------------
   34 no circuit available                 503 Service unavailable
   38 network out of order                 503 Service unavailable
   41 temporary failure                    503 Service unavailable
   42 switching equipment congestion       503 Service unavailable
   47 resource unavailable                 503 Service unavailable
   58 bearer capability not presently      503 Service unavailable
      Available
   88 incompatible destination             503 Service unavailable

   18 no user responding                   408 Request Timeout

The mapping back is shown as follows:

   Response received                        Cause value in the REL
   -----------------                        ----------------------
   503 Service unavailable                  41 Temporary failure

   408 Request timeout                      102 Recovery on timer
                                                expiry

</pre></div>
<p>
</p>

<p>The Example with 503 shows that a couple of different ISUP Cause
      values are interworked to only one SIP response. With 408 the meaning of
      the release cause is changed when interworked back to ISUP. Also
      Services built on Cause 18 (e.G. a 2nd call attempt on an other number,
      this service is like a sequential forking) will not work.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Requirements</h3>

<p>REQ-1:
</p>
<p>It should be possible to support PSTN-SIP-PSTN scenarios where the
      reason of a call release can be transferred though the SIP domain
      without any loss of information and no change of reason.
</p>
<p>REQ-2:
</p>
<p>It should be possible to provide correct announcements to a SIP user
      based on the reason for call clearing within the PSTN network or the
      PSTN user. The PSTN does normally not provide announcements to
      originating user when clearing the call.
</p>
<p>REQ-3:
</p>
<p>A UA may have the ability to display ISUP specific release causes or
      show a equivalent text. A inclusion of <a class='info' href='#Q.850'>[Q.850]<span> (</span><span class='info'>, &ldquo;Usage of cause and location in the Digital Subscriber           Signalling System No. 1 and the Signalling System No. 7 ISDN User           Part [ITU-T Recommendation Q.850],&rdquo; April&nbsp;1998.</span><span>)</span></a>
      causes is out of scope.
</p>
<p>REQ-4:
</p>
<p>A application server providing specific PSTN like services may have
      the possibility to include ISUP specific release causes
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Used Cases for the requirements</h3>

<p>REQ-1 shows the scenario between two ISUP Gateways where SIP-I is
        not a solution to be used. A IMS network defined by 3GPP where SIP-I
        is not part of the framework is such an example. A used case is shown
        in Figure 2.
</p>
<p>REQ-2 identifies the scenario the gateway passes on the cause and
        some announcement server translates the cause into the appropriate
        announcement.
</p>
<p>REQ-3 excludes that a SIP UA includes <a class='info' href='#Q.850'>[Q.850]<span> (</span><span class='info'>, &ldquo;Usage of cause and location in the Digital Subscriber           Signalling System No. 1 and the Signalling System No. 7 ISDN User           Part [ITU-T Recommendation Q.850],&rdquo; April&nbsp;1998.</span><span>)</span></a>
        cause values because that is not needed due to the different context
        of a SIP UA and of course the existing SIP response codes. Also the
        possibility of displaying Q.850 causes should be used very restrictive
        and is not recommended. A used case could be a used case could be a
        Integrated Access Device where a POTS Phone is connected to. It is
        recommended to ignore the cause value if received be a UA.
</p>
<p>REQ-4: allows an Apllication Server that is providing specific
        Services simulating PSTN services to include Q.850 Causes. This is
        needed specific for IMS operartors which are substituting their PSTN
        to IMS. These operators may run Services in the SIP domain that are
        provided to PSTN endusers.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Overall Applicability</h3>

<p>The SIP procedures specified in this document are foreseen for
      networks providing simulation services and/or interworking to the
      PSTN/ISDN.
</p>
<p>The document is describing the use of the Reason header in SIP
      responses. These procedures are only valuable if the reason contained in
      the element "protocol" is "Q.850". A inclusion of a SIP reason
      (protocol="SIP") is not helpful due to the fact that the response
      already provides the SIP reason. The Release Causes are described within
      <a class='info' href='#Q.850'>[Q.850]<span> (</span><span class='info'>, &ldquo;Usage of cause and location in the Digital Subscriber           Signalling System No. 1 and the Signalling System No. 7 ISDN User           Part [ITU-T Recommendation Q.850],&rdquo; April&nbsp;1998.</span><span>)</span></a>. (Note: The ETSI specifications can be
      downloaded under http://pda.etsi.org/pda/queryform.asp free of
      charge.)
</p>
<p>The appearance of the Reason header is applicable to final responses
      4xx, 5xx and 6xx and in addition for 199 Responses as defined within
      <a class='info' href='#I-D.ietf-sipcore-199'>[I&#8209;D.ietf&#8209;sipcore&#8209;199]<span> (</span><span class='info'>Holmberg, C., &ldquo;Response Code for Indication of Terminated Dialog,&rdquo; April&nbsp;2009.</span><span>)</span></a>.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Procedures</h3>

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Procedures at the UA</h3>

<p>A UA that supports the Reason header field can process the <a class='info' href='#Q.850'>[Q.850]<span> (</span><span class='info'>, &ldquo;Usage of cause and location in the Digital Subscriber           Signalling System No. 1 and the Signalling System No. 7 ISDN User           Part [ITU-T Recommendation Q.850],&rdquo; April&nbsp;1998.</span><span>)</span></a> Cause Value and display it or an equivalent
        text. The inclusion of a Reason header field by UA is only for B2B UA
        interworking with the PSTN/ISDN or providing services foreseen.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Procedures at a SIP proxy</h3>

<p>SIP proxies that receive a response containing a Reason header
        field is forwarding the response without changing the reason.
</p>
<p>A SIP proxy receiving a request that includes a Reason header field
        can route the request to an application server for further analysis
        and base services on it.
</p>
<p>Based on network policy a Proxy can remove a Reason header field
        send from a UAC.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Procedures at an application server</h3>

<p>An application server that receives a SIP request that contains a
        response including a Reason header MAY analyze the SIP Reason and base
        further procedures on this analyses.
</p>
<p>For Example the application server could use the reason for sending
        a announcement towards the originating entity of the session.
</p>
<p>As an example the Anonymous Communication Rejection (ACR) service
        defined by ETSI Telecommunications and Internet converged Services and
        Protocols for Advanced Networking (TISPAN)
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Procedures at an interworking point with ISUP</h3>

<p>For interoperability reasons the Q.850 Cause Value of a Release shall
      be mapped to the Reason Header.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Example</h3>

<p>Figure 1 shows the example of SIP interworking with the PSTN/ISDN.
      Cause #87 is sent when the connecting user is not member of a Closed
      User Group.
</p><br /><hr class="insert" />
<a name="figur1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

         A                Gateway             Proxy               AS
         |        IAM        |                  |                  |
         |------------------&gt;|     INVITE       |                  |
         |                   |-----------------&gt;|      INVITE      |
         |                   |     100 Trying   |-----------------&gt;|
         |                   |&lt;-----------------|    100 Trying    |
         |                   |                  |&lt;-----------------|
         |   ACK  SDP held   |                  |                  |
         |&lt;------------------|                  |  603 Decline     |
         |                   |  603 Decline     | Reason Q850 #87  |
         |                   |  Reason Q850 #87 |                  |
         |   REL Cause #87   |                  |&lt;-----------------|
         |                   |&lt;-----------------|                  |
         |&lt;----------------- |                  |                  |
         |                   |                  |                  |
         |                   |                  |                  |
         |                   |                  |                  |


</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: ISUP-SIP Call &nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Figure 2 shows the example where the SIP network is used as transit
      between PSTN/ISDN networks. This avoids that the Mapping back to the
      Q.850 cause within ISUP change the meaning of the reason for release of
      the call.
</p><br /><hr class="insert" />
<a name="figur2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

         A                Gateway             Gateway              B
         |        IAM        |                  |                  |
         |------------------&gt;|     INVITE       |                  |
         |                   |-----------------&gt;|      IAM         |
         |                   |     100 Trying   |-----------------&gt;|
         |                   |&lt;-----------------|    100 Trying    |
         |                   |   603 Decline    |                  |
         |                   |  Reason Q850 #87 |  REL Cause #87   |
         |   REL Cause #87   |                  |&lt;-----------------|
         |                   |&lt;-----------------|                  |
         |&lt;----------------- |                  |                  |
         |                   |                  |                  |
         |                   |                  |                  |
         |                   |                  |                  |



</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Transit case &nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Figure 3 shows the example where the SIP network puts an announcement
      towards the UAB. The AS sends an announcement with a specific text back.
      After some Time the Response will be sent back to the UA A and closes
      all open transactions. With this possibility the SIP user can informed
      with more specific information than only the Response code.
</p><br /><hr class="insert" />
<a name="figur3"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

         A                   AS              Gateway               B
         |        INVITE     |                  |                  |
         |------------------&gt;|     INVITE       |                  |
         |                   |-----------------&gt;|      IAM         |
         |                   |     100 Trying   |-----------------&gt;|
         |                   |&lt;-----------------|                  |
         |                   |   503 Decline    |                  |
         |                   |  Reason Q850 #41 |  REL Cause #41   |
         |                   |                  |&lt;-----------------|
         |  Announcement     |&lt;-----------------|                  |
         |&lt; ================ |                  |                  |
         |                   |                  |                  |
         |  503 after Timeout|                  |                  |
         |&lt;----------------- |                  |                  |



</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Transit case &nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Figure 3: Call Release within the PSTN with an announce played within
      the SIP network.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>The presence of the Reason header in a response does not affect the
      treatment of the response.
</p>
<p>Including such a header by an untrusted entity could adulterate the
      reactions of the originating entities. E.G. sending back a cause value
      "87" can cause an announcement within the PSTN/ISDN saying that the call
      was rejected due to the Closed User Group service.
</p>
<p>Therefore it is RECOMMENDED to include the Reason header information
      in Responses only by trusted entities as it is described within <a class='info' href='#RFC3325'>[RFC3325]<span> (</span><span class='info'>Jennings, C., Peterson, J., and M. Watson, &ldquo;Private Extensions to the Session Initiation Protocol (SIP) for Asserted Identity within Trusted Networks,&rdquo; November&nbsp;2002.</span><span>)</span></a>.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
IANA Considerations  </h3>

<p>This document describes the use of the Reason header field described
      within <a class='info' href='#RFC3326'>[RFC3326]<span> (</span><span class='info'>Schulzrinne, H., Oran, D., and G. Camarillo, &ldquo;The Reason Header Field for the Session Initiation Protocol (SIP),&rdquo; December&nbsp;2002.</span><span>)</span></a> . No additional SIP elements are
      defined within this document. Therefore, this document does not provide
      any action to IANA.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Acknowledgments</h3>

<p>The author would like to thank the members of the ETSI TISPAN WG3 for
      their comments to this memo.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="3GPP.29.163">[3GPP.29.163]</a></td>
<td class="author-text">3GPP, &ldquo;<a href="http://www.3gpp.org/ftp/Specs/html-info/29163.htm">Interworking between the IP Multimedia (IM) Core Network (CN) subsystem and Circuit Switched (CS) networks</a>,&rdquo; 3GPP TS&nbsp;29.163 6.12.0, June&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sipcore-199">[I-D.ietf-sipcore-199]</a></td>
<td class="author-text">Holmberg, C., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipcore-199-00.txt">Response Code for Indication of Terminated Dialog</a>,&rdquo; draft-ietf-sipcore-199-00 (work in progress), April&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipcore-199-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="ITU.Q1912.5.2004">[ITU.Q1912.5.2004]</a></td>
<td class="author-text">International Telecommunications
            Union, &ldquo;Interworking between Session Initiation Protocol (SIP) and
          Bearer Independent Call Control protocol or ISDN User Part [ITU-T
          Recommendation Q.1912.5 (2005)],&rdquo; ITU&nbsp;Recommendation Q.1912.5, April&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="Q.850">[Q.850]</a></td>
<td class="author-text">&ldquo;Usage of cause and location in the Digital Subscriber
          Signalling System No. 1 and the Signalling System No. 7 ISDN User
          Part [ITU-T Recommendation Q.850],&rdquo; ITU&nbsp;Recommendation Q.850, April&nbsp;1998.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3325">[RFC3325]</a></td>
<td class="author-text">Jennings, C., Peterson, J., and M. Watson, &ldquo;<a href="http://tools.ietf.org/html/rfc3325">Private Extensions to the Session Initiation Protocol (SIP) for Asserted Identity within Trusted Networks</a>,&rdquo; RFC&nbsp;3325, November&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3325.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3326">[RFC3326]</a></td>
<td class="author-text">Schulzrinne, H., Oran, D., and G. Camarillo, &ldquo;<a href="http://tools.ietf.org/html/rfc3326">The Reason Header Field for the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;3326, December&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3326.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3398">[RFC3398]</a></td>
<td class="author-text">Camarillo, G., Roach, A., Peterson, J., and L. Ong, &ldquo;<a href="http://tools.ietf.org/html/rfc3398">Integrated Services Digital Network (ISDN) User Part (ISUP) to Session Initiation Protocol (SIP) Mapping</a>,&rdquo; RFC&nbsp;3398, December&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3398.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Roland Jesske</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Deutsche Telekom</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Heinrich-Hertz-Strasse 3-7</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Darmstadt,   64307</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+4961516282766</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:r.jesske@telekom.de">r.jesske@telekom.de</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Laura Liess</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Deutsche Telekom</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Heinrich-Hertz-Strasse 3-7</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Darmstadt,   64307</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+4961516282761</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Laura.Liess@telekom.de">Laura.Liess@telekom.de</a></td></tr>
</table>
</body></html>
