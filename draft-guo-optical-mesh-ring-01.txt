
Network Working Group                  Dan Guo, James Fu, Nasir Ghani
Internet Draft                         Sorrento Networks, Inc.
Expiration Date: August 2001             

				       Leah Zhang
				       Photuris, Inc. 

        Hybrid Mesh-Ring Optical Networks and Their Routing 
	     Information Distribution Using Opaque LSA

		 <draft-guo-optical-mesh-ring-01.txt>

1. Status of this Memo 

   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC 2026 [1]. 
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups. Note that 
   other groups may also distribute working documents as Internet-Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six 
   months and may be updated, replaced, or made obsolete by other 
   documents at any time. It is inappropriate to use Internet- Drafts 
   as reference material or to cite them other than as "work in progress." 
    
   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt 
   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html. 
    

2. Abstract 

   Optical rings provide an efficient and robust mechanism for failure
   protection. The significance of ring architecture in the evolution 
   of optical networks is also due to the proliferation of multi-level 
   SONET (SDH) rings, especially in metropolitan and regional areas. 
   However, the IP-based MPL(ambda)S framework for optical networks is 
   largely based upon (optical) mesh, due to the latter's connection 
   flexibility. In this draft, we propose a hybrid mesh-ring optical 
   network architecture of mixing rings together with meshes, either by 
   embedding rings into meshes or by connecting rings with meshes. A 
   hybrid mesh-ring network provides both connection flexibility and 
   robust failure protection. After briefly discussing the unique 
   architecture of hybrid mesh-ring networks, this draft focuses on 
   defining new attributes and methods for mesh-ring's topology 
   discovery and routing information distribution. We utilize the IS-IS/
   OSPF opaque LSA mechanism, defined in RFC 2370. Finally, we discuss 
   our work in the context of MPLS traffic engineering and network 
   service protection and restoration.



Guo et al.  	      draft-guo-optical-mesh-ring-01.txt        [Page 1]

   
3. Introduction

   As operators move to deploy more advanced optical networks, various 
   important issues arise with respect to network migration.  One of 
   these concerns is with regards to network topologies, and specifically 
   migration strategies from existing infrastructures to expanded 
   offerings. It is well-understood that many networks today are based 
   upon fiber ring infrastructures, as seen by the proliferation of multi-
   level SONET/SDH ring technologies, especially in the access and metro/
   regional space. Furthermore, optical ring networks allow for inherently 
   efficient and robust protection switching (i.e., "self-healing") 
   mechanisms. Given the entrenched base of ring fiber-plants and the 
   scale of such infrastructure investments, it is clear that ring 
   topologies will remain an integral part of many networks for some 
   time to come. Operators also start to adopt dynamic optical ring 
   architectures, i.e., extending SONET/SDH uni-direction path switching 
   (UPSR) and bi-directional line (BLSR) switching concepts (see [GHANI] 
   for complete details) to optical ring networks. Ring networks will 
   allow network operators to immediately leverage their current fiber 
   layouts and thereby provide a cost-effective initial migration step 
   from SONET/SDH (TDM-based) ring networks.

   We foresee that the networks consisting of hybrid rings and meshes are 
   of particular importance for operators to migrate to next generation
   optical networks. The reasons are as follows. Although optical rings 
   allows fast and robust protection mechanisms, it suffers from reduced 
   inter-node connectivity (degree two). Consequently, some carriers have 
   proposed the deployment of mesh network topologies to counter the 
   deficiency of ring topologies due to the fact that mesh networks can 
   offer richer connectivity. However, mesh networks still lack well-
   defined protection and restoration capabilities. This raises a 
   significant concern to network operators who have paid tremendous 
   attentions to service reliability. All these motivate us to investigate 
   the architecture of hybrid ring and mesh networks, termed mesh-rings. 
   A hybrid mesh-ring network provides both connection flexibility and 
   fast/robust failure protection and restoration. Some carriers who have 
   end-to-end networks covering metro/regional and long haul space have 
   expressed the similar views [STRANDYUE] [YUELAZER]. The architecture 
   of hybrid mesh-ring networks fits well for them to build end-to-end 
   metro(Ring)-long haul(mesh)-metro(ring) networks. 

   With regards to hybrid mesh-ring networks, there are two key scenarios, 
   namely "virtual" ring embedding or mesh-ring interconnection:

     - Ring emulation basically entails operating (multiple) "virtual" 
       rings on top of mesh (network) topologies. The capability of 
       embedding multiple "virtual" rings on top of a mesh topology 
       is attractive to operators, since this permits the re-use of 
       well-defined ring protection mechanisms (UPSR, BLSR, etc). For 
       operators accustomed to operating ring networks, this capability 
       will allow them to gradually migrate to mesh services provisioning.



Guo et al.  	      draft-guo-optical-mesh-ring-01.txt          [Page 2]



     - Traditional SONET ring network operators may start with the same 
       ring topology. As new services emerge, the ring operators may 
       choose to gradually phase in expansions to existing ring topologies 
       (e.g., by adding fibers between non-adjacent ring nodes to "break" 
       the ring to offer new services). This "pay-as-you-grow" approach 
       is more cost-effective than undertaking the deployment of altogether 
       new (i.e., "greenfield-type") mesh fiber-plants. The network ends up 
       with a hybrid ring and mesh topology.

    Clearly, hybrid ring-mesh networks will present various unique concerns 
    regarding network control, provisioning, resource discovery, and 
    protection.  This draft first briefly discusses the unique architecture 
    of hybrid mesh-ring networks. We then focus on defining new attributes 
    and methods for mesh-ring's topology discovery and routing information 
    distribution.  Of particular importance is an identifier field for ring 
    networks (ring ID) and the ability to indicate different types of 
    protection. We utilize the IS-IS/OSPF Opaque LSA mechanism as defined in
    RFC 2370. The new attributes will be used by lightpath routing algorithms 
    for provisioning purposes in mesh-ring networks.  We also briefly discuss 
    our work in the context of MPLS traffic engineering and network service 
    restoration (failure protection).


4. Hybrid Mesh-Ring Networks Architecture

4.1 Network Architecture Description

   A hybrid mesh-ring network is loosely defined as a network mixing 
   rings with meshes. There are many ways to form a hybrid mesh-ring 
   network:

      a. Mesh links are added to an optical ring. For example, in Fig. 
         1.a, a network operator decides to add a mesh link between 
	 node W and node Y. The flexibility for adding mesh links is
         attractive to operators who have a ring network but want to 
	 expand their networks for offering other types of services.

      b. Multiple optical rings are connected by a mesh (see Fig. 1.b). 
         For example, two mesh links are added to connect ring R1 and 
	 ring R2. 

      c. In a network with a mesh topology, we embed one or more logical
         rings. For example, in  Fig 1.c, we define two logical rings 
	 (A-B-C-D-I-H-A) and (I-D-E-F-I). This approach is called ring
         emulation. These embedded logical rings are also called "virtual 
	 rings." The links on virtual rings are also part of the mesh 
	 network. For network operators accustomed to operating ring 
         networks, ring emulations are particularly attractive. On a 
         mesh network, they can provision a virtual private optical ring
	 for those large clients who demand premium services.
                        


Guo et al.  	      draft-guo-optical-mesh-ring-01.txt         [Page 3]
         

      __ +-+__            __+-+_______________+-+__         +-+  +-+  +-+ 
     /   |X|  \          /  |X|___         ___|B|  \        |A|--|B|--|C| 
    /    +-+   \        /   +-+    \      /   +-+   \       +-+  +-+  +-+ 
   +-+         +-+    +-+         +-+   +-+         +-+      |         |  
   |W|-------- |Y|    |W|   R1    |Y|   |A|   R2    |C|     +-+  +-+  +-+ 
   +-+         +-+    +-+         +-+   +-+         +-+     |H|--|I|--|D| 
    \           /      \           /     \           /      +-+  +-+  +-+ 
     \   +-+   /        \   +-+___/       \___+-+   /        |    |    |  
      -- |Z|--/          -- |Z|---------------|D|--/        +-+  +-+  +-+ 
         +-+                +-+               +-+           |G|--|F|--|E| 
  					                    +-+  +-+  +-+ 


      Fig 1.a.                   Fig. 1. b.                    Fig. 1.c
   
    Each of the optical rings in a mesh-ring network is considered as a 
    routing entity. We propose to introduce a unique ring identifier (Ring
    ID) for each ring in a hybrid mesh-ring network. A ring ID is 32-bit 
    integer field. In the case where multiple rings form a hierarchical 
    structure, a ring ID field can be sub-divided into 2 or more sub-fields,
    which represents the ring hierarchy. 

    We also propose to associate each link in a hybrid mesh-ring network
    with a link protection type. Various types of optical protected rings 
    have been defined in ITU-T and ANSI T1X1.5 (see [ITU],[GR2979]). 
    These include Optical Channel Dedicated Protection Rings (OCh-DPRing), 
    Optical Channel Shared Protection Rings (OCh-SPRing), Optical Multiplex-
    Section Dedicated Rings (OMS-DPRing), and Optical Multiplex-Section 
    Shared Rings (OMS-SPRing). One important reason for identifying link 
    protection types in a hybrid mesh-ring networks is to take advantage
    of rings' protection and self-healing properties. For an architectural 
    framework on this topic, refer to [GHANI] for details.
  
    There are other important traffic engineering attributes which can be
    introduced in a hybrid mesh-ring networks. One exmaple is the Class of 
    Services (CoS). When provisining lightpath across a hybrid mesh-ring 
    network, operators may want to offer various level of services, 
    based on the protection features and other quality agreements.

    For example, the operator of a hybrid mesh-ring network may offer
    a client a lightpath which traverses the ring links only. This type of
    ring-only lightpaths may be protected either by a dedicated protection 
    path by a shared protection path.

4.2 Routing Considerations in the Hybrid Mesh-Ring Networks

    In a hybrid mesh-ring optical networks, there are unique requirements
    for resource discovery and maintenance as well as for lightpath routing.

    - We need differentiate links in a ring from links in a mesh. Certain 
      traffic such as voice traffic need to be routed along the ring links
      due to their fast (sub 50-ms) and robust protection capability;
      
    - We also need identify the direction of a ring-link for a given node
      on a ring. The direction can be either clock-wise orcounter clock-wise. 


Guo et al.  	      draft-guo-optical-mesh-ring-01.txt         [Page 4]


    - For a hierarchical hybrid mesh-ring network, multiple rings may be 
      interconnected by a mesh or a ring in a hierarchical structure. Ring
      identifiers (Ring IDs) may contain a hierarchical structure for 
      facilitating the inter-ring routing.

5. Opaque LSA for Mesh-Ring Optical Networks

   In this section, we describe the enhancements to IS-IS/OSPF in 
   support of hybrid mesh-ring networks. These are in addition to 
   the previous extensions:

   - for supporting the MPLS traffic engineering ([OSPF-TE], [ISIS-TE]);
   - for supporting MPL(ambda)S & optical routing ([KOMPELLA], [WANG]).

   In particular, our LSA format follows closely the description in 
   [OSPF-TE], a de-facto standard. 

5.1 LSA Type

    This draft makes use of the Opaque LSA [OSPF-Opaque] (RFC2370). 
    Opaque LSAs are introduced as a means of distributing additional 
    OSPF routing information. Three types of Opaque LSA exist:
       Type 9: link-local scope
       Type 10: area-local scope
       Type 11: Autonomous System (AS) scope

    We use only Type 10 LSAs for area flooding scope. 

5.2 LSA Header

    In Opaque LSAs, the payload of the LSA could contain information that
    has meaning only within a certain application and will be ignored 
    otherwise. The type of the application is identified by the Opaque 
    Type, contained in the LSA ID. 

    The LSA ID of an Opaque LSA is defined as having eight bits of opaque
    type and 24 bits of type-specific data. The new Opaque type number for
    mesh-rings is TDB. The remaining 24 bits are broken up into eight bits 
    of reserved space (which must be zero) and sixteen bits of instance. A 
    maximum of 65536 LSAs may be sourced by a single node. 

    The new LSA for mesh-ring optical networks starts with the LSA header:
      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |            LS age             |    Options    |      10       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |      TBD      |    Reserved   |           Instance            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                     Advertising Node ID                       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                     LS sequence number                        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |         LS checksum           |             length            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


Guo et al.  	      draft-guo-optical-mesh-ring-01.txt         [Page 5]


5.3 New Opaque LSA Payload

    The LSA payload consists of one or more nested Type/Length/Value
    (TLV) triplets for extensibility.  They are used in path computation 
    algorithm to compute optical paths in the mesh-ring optical networks. 
    The format of each TLV is:

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              Type             |             Length            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                            Value...                           |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    The new opaque LSA describe the nodes and links in a mesh-ring 
    networks. We define two top-level TLVs: Optical Node TLV and Link TLV.

5.4 Link TLV

    Link TLV describes a single unidirectional link. The link TLV is type 2,
    the length is variable. It is constructed as a set of sub-TLVs. There 
    are no ordering requirements for the sub-TLVs. 

    The following sub-TLVs are defined:
 	1 - Link type (1 octet)
	2 - Link ID (4 octets)
	3 - Local interface IP address (4 octets) 
	4 - Remote interface IP address (4 octets)
	5 - Available link resource information 
        6 - Ring ID (4 octets) 
	7 - Link protection type (4 octets) 
        8 - Shared Link Risk Group ID (4 octets)

    In [OSPF-TE] and [WANG], many sub-TLVs are described. Here, we put our
    emphasis on new sub-TLVs unique to the hybrid mesh-ring optical networks.

5.4.1 Link Type

    Link type sub-TLV defines the type of the link (as describe in [WANG]):

	3 - Service transparent (a point to point physical optical link)
	4 - Service aware (a point to point logical optical link)

    By using this link type, we can represent both physical and logical 
    link  and their connection type in optical domain.

5.4.2 Link ID

    The Link ID sub-TLV identifies the optical link exactly as the 
    point to point case in [OSPF-TE].


Guo et al.  	      draft-guo-optical-mesh-ring-01.txt          [Page 6]


5.4.3 Local and Remote Interface IP Addresses

    The local interface IP address sub-TLV specifies the IP address of 
    the interface corresponding to this link. The remote interface IP 
    address sub-TLV specifies the IP address of the neighbor's interface 
    corresponding to this link. This and the local address are used to 
    discern multiple parallel links between two nodes.

5.4.4 Available Link Resource Information

    Refer to [WANG] for descriptions. 

5.4.5 Ring ID

    When a link belongs to a ring, 2 sub-TLVs are added. Ring ID
    sub-TLV is TLV type 6, and has four octets in length. Ring ID is 
    unique within an IGP domain.

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              Type(6)          |             4                 |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                             Ring ID                           |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    For a link not belonging to a ring, this sub-TLVs is omitted. 
    A link may belong to multiple rings, in which cases multiple sub-TLVs 
    are included.

5.4.6 Link Protection Type

    The link protection type sub-TLV is TLV type 7 and also have 4 
    octets in length.

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              Type(7)          |             4                 |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                   Link protection code                        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    The link protection code is 32-bit flagged field. It represents 
    various protection types defined in ITU-T [GR-2979], including 
    OCh-DPRing, OCh-SPRing, OMS-DPRing and OMS-DPRing. Furthermore,
    other protection and restoration properties can also be encoded
    in this field.

    When a link belongs to multiple rings, multiple sub-TLVs are included.
    



Guo et al.  	      draft-guo-optical-mesh-ring-01.txt       [Page 7]



5.4.7 Shared Link Risk Group

    The shared link risk group sub-TLV specifies group membership for
    "shared risk link group" (SRLG). A set of links may constitute a "shared 
    risk link group" if they share a resource whose failure may affect all 
    links in the set. An example would be two fibers in the same conduit. 
    Also, a link may be part of more than one SRLG. Refer to [KOMPELLA] for 
    more descriptions.

6. Routing and Signaling Requirement for Mesh-Ring Networks

   New opaque LSAs are subsequently used by the constrainted shortest path 
   first (CSPF) algorithm. It may be desireable for network operators to
   specify the type of light path from a source to a destination:

     - Path P passes a BWPSR ring, or
     - Path P passes a BLSR ring, or
     - Path P passes a UPSR ring;
    
   Exactly how the CSPF algorithm incorporates the information contained in 
   new opaque LSAs is proprietary in nature and beyond the scope of this 
   document. 

   After obtaining an explicit lightpath from a source to a destination, we
   use GMPLS [GMPLS] to provision this lightpath. When setting up a light 
   path in RSVP-TE or CR-LDP, we may treat a ring as an abstract node. More 
   treatments will follow in this area. 

7. Failure Protection and Restoration for Mesh-Ring Networks
   
   There are clearly advantages in supporting failure protection and 
   restoration by identifying the rings in a hybrid mesh-ring network. 
   We propose to develop a light-weighted dedicated protection-switching 
   protocol, namely optical APS (O-APS) protocol, for hybrid mesh-ring
   networks. This new protocol is prefered to use the similiar operation
   model of SONET APS [SONET-APS]. This topic deserves more detailed 
   treatment, due to its primary importance. More discussions can be 
   found in [GHANI]. 

8. Security Considerations

   There is no known security problem caused by this draft.

9. Acknowledgements

   We would like to thank Yangguang Xu of Lucent Technology for the 
   insightful discussion and John Moy of Sycamore Networks for his 
   comments and encouragement. We are also grateful to Frank Barnes 
   for the careful review.


10. References


Guo et al.  	      draft-guo-optical-mesh-ring-01.txt         [Page 8]


   [STRANDYUE] J. Strand and Y. Xue, "Routing for Optical Networks With 
        Multiple Routing Domains", OIF 2001.046, Optical Internetworking 
	Forum, 2001.

   [XUELAZER] Y. Xue and M. Lazer, "Carrier Optical Services Framework 
        and Associated Requirements for UNI", oif2000.155, 2000.

   [ITU] "Network Node Interface for the Synchronous Digital Hierarchy
        (SDH)," International Telecommunication Union, G.707, March 1996.

   [GR1230] GR-1230-CORE, SONET Bi-directional Line-Switched Ring 
        Equipment Generic Criteria, Issue 4, December 1998.

   [GR3009] GR-3009-CORE, Optical Cross-Connect Generic Requirements, 
        Issue 1, January 1999.

   [GR2979] GR-2979-CORE, Common Generic Requirements for OADMs and OTM.
        Issue 1, Dec 1998.

   [OSPF] J. Moy, OSPF Version 2. (RFC 2328) 

   [OSPF-Opaque] R. Coltun, The OSPF Opaque LSA Option. (RFC 2370)

   [GMPLS] Ashwood-Smith, P. et al, "Generalized MPLS -
        Signaling Functional Description", Internet Draft,
        draft-ietf-mpls-generalized-signaling-01.txt,
        November 2000.

   [GHANI] N. Ghani, J. Fu, D. Guo, X. Liu, Z. Zhang, "Architectural 
       Framework for Automatic Protection Provisioning In Dynamic Optical 
       Rings", draft-ghani-optical-rings-00.txt, December 2000.

   [TE-REQ] Awduche, D., Malcolm, J., Agogbua, J., O'Dell, M., and J.
       McManus, "Requirements for Traffic Engineering Over MPLS", RFC
       2702, September 1999.

   [ISIS-TE] Smit, H., Li, T., "IS-IS extensions for Traffic
       Engineering", draft-ietf-isis-traffic-01.txt (work in progress)

   [OSPF-TE] Katz, D., Yeung, D., "Traffic Engineering Extensions to
       OSPF", draft-katz-yeung-ospf-traffic-01.txt (work in progress)

   [SONET-APS] Gorshe, S., Revised Draft T105.01 SONET Automatic 
       Protection Switching Standard, April 1999. 

   [KOMPELLA] Kompella, K., et al, Extensions to IS-IS/OSPF and RSVP in 
       support of MPL(ambda)S, draft-kompella-mpls-optical-00.txt, August 
       2000.
   [MCADAMS] McAdams, L. and Yates, J., Lightpath attributes and related 
       service definitionsdraft-mcadams-lightpath-attributes-00.txt,
       September, 2000.

   [WANG] Wang, G., et al., "Extensions to OSPF/IS-IS for Optical Routing", 
       Internet Draft, draft-wang-ospf-isis-lambda-te-routing-00.txt, 
       Work in Progress, March 2000.


Guo et al.  	      draft-guo-optical-mesh-ring-01.txt     [Page 9]


11. Authors' Addresses

   Dan Guo                            James Fu                         
   Sorrento Networks, Inc.            Sorrento Networks, Inc.          
   9990 Mesa Rim	              9990 Mesa Rim                     
   San Diego, CA 92121	              San Diego, CA 92121               
   Email: dguo@sorrentonet.com        Email: jfu@sorrentonet.com        
			       
   Nasir Ghani			      Leah Zhang                         
   Sorrento Networks, Inc.	      Photuris, Inc.		      
   9990 Mesa Rim		      20 Corporate Place South           
   San Diego, CA 92121		      Piscataway, NJ 08854	              
   Email: nghani@sorrentonet.com      Email: lzhang@photuris.com       






















Guo et al.  	      draft-guo-optical-mesh-ring-01.txt     [Page 10]

