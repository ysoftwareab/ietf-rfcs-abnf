

   Individual Submission                                                
   Internet Draft                                        Jae-Hoon Jeong 
                                                         Kyeong-Jin Lee 
                                                          Jung-Soo Park 
                                                         Hyoung-Jun Kim 
   <draft-jeong-nemo-ro-ndproxy-00.txt>                            ETRI 
   Expires: December 2003                                   7 June 2003 
    
    
   ND-Proxy based Route Optimization for Mobile Nodes in Mobile Network 
    
    
Status of this Memo 
    
   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC2026 except that the right to 
   produce derivative works is not granted [1]. 
    
   Internet-Drafts are working documents of the Internet Engineering     
   Task Force (IETF), its areas, and its working groups.  Note that     
   other groups may also distribute working documents as Internet-     
   Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress". 
    
   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt 
    
   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html. 
    
Abstract 
    
   This document specifies a mechanism for enabling mobile nodes in IPv6 
   mobile network to perform route optimization.  The route optimization 
   is possible because mobile router provides the prefix of its care-of-
   address for its mobile nodes by playing the role of ND-proxy.   
   Through binding updates associated with the network prefix of an 
   access network, the mobile nodes can perform route optimization. 
    
Conventions used in this document 
    
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in RFC 2119 [2]. 
    

 
 
Jeong, Lee, Park, Kim    Expires - December 2003              [Page 1] 
 
Internet-Draft   ND-Proxy based Route Optimization for MN    June 2003 
 
 
Table of Contents 
    
   1. Terminology...................................................2 
   2. Introduction..................................................2 
   3. Overview......................................................2 
   4. Mobile Router extension : Process of Prefix Information option 
      for Route Optimization (RO)...................................3 
   5. Neighbor Discovery extension..................................4 
      5.1 RO Prefix Information option format.......................4 
      5.2 Neighbor Solicitation (NS) message format.................5 
   6. Procedure of Route Optimization...............................6 
      6.1 Generation of a new CoA...................................6 
      6.2 DAD for the new CoA.......................................6 
      6.3 Return Routability and Binding Update.....................6 
      6.4 Delivery of Data Packets..................................6 
   7. Security Considerations.......................................7 
   8. References....................................................7 
   9. Acknowledgements..............................................7 
   10. Authors' Addresses...........................................8 
    
1. Terminology 
    
   This document uses the terminology described in [3]-[6].  Especially 
   three important terms are as follows [5]: 
 
     Multilink Subnet (MS) 
        A collection of independent links, connected by routers, but 
        sharing a common subnet prefix. 
 
     ND-Proxy 
        A router proxying and relaying for all nodes on its router-mode 
        interfaces except proxy-mode interfaces among its network 
        interfaces. 
 
     Multilink-Subnet Router (MSR) 
        A router which has interfaces attached to different links in a 
        MS, and which plays the role of ND-Proxy. 
      
2. Introduction 
    
   The basic support of mobile network (NEMO) enables mobile network 
   nodes and correspondent nodes to communicate through bi-directional 
   tunnels.  Deeper multi-level network this NEMO gets, longer the delay 
   becomes by dog-legged routing.  This document specifies how to 
   optimize the routes between mobile nodes and correspondent nodes. 
    
3. Overview 
    
 
 
Jeong, Lee, Park, Kim    Expires - December 2003              [Page 2] 
 
Internet-Draft   ND-Proxy based Route Optimization for MN    June 2003 
 
 
   This route optimization is possible by a mobile router performing ND-
   Proxy, which makes a care-of-address (CoA) with the prefix advertised 
   by access router and delivers the prefix of access network into the 
   NEMO.  Each mobile node can make its new CoA with router 
   advertisement message including access network prefix and perform the 
   return routability and binding update procedure.  As ND-Proxy, the 
   mobile router performs neighbor discovery instead of the mobile nodes 
   within its NEMO. 
    
   Like this, access network and NEMO are configured into a multilink 
   subnet through mobile router that performs ND-Proxy.  Figure 1 shows 
   an example of a multilink subnet comprised of four links from Link1 
   to Link4.  Three mobile routers from MR1 to MR3 relay the prefix 
   information of access network (AR1_P) that was sent by an access 
   router, AR1.  The mobile nodes, MN1 and MN2, within the NEMO 
   controlled by MR1 can perform route optimization with the prefix 
   information relayed by its mobile router, MR1.  Also, MN3 can 
   optimize the route through MR2.  MN4 and MN5 can perform route 
   optimization through MR2 and MR3, too. 
    
                                +---+ 
                                |AR1| 
                     RA(AR1_P)| +-+-+ 
                              V   | 
        ----------+---------------+---------------+----------- Link1 
                  |Proxy-mode                     |Proxy-mode 
                +-+-+                           +-+-+ 
                |MR1|                           |MR2| 
     RA(AR1_P)| +-+-+                RA(AR1_P)| +-+-+ 
              V   |Router-mode                V   |Router-mode 
         ---+-----+-----+--- Link2      ---+------+-----+--- Link3   
            |           |                  |  Proxy-mode| 
          +-+-+       +-+-+              +-+-+        +-+-+ 
          |MN1|       |MN2|              |MN3|        |MR3| 
          +---+       +---+              +---+        +---+ | RA(AR1_P) 
                                             Router-mode|   V 
                                               ---+-----+-----+--- Link4 
                                                  |           | 
                                                +-+-+       +-+-+ 
                                                |MN4|       |MN5| 
                                                +-+-+       +-+-+ 
    
    Figure 1. Multilink Subnet for Route Optimization 
    
4. Mobile Router extension : Process of Prefix Information option for 
  Route Optimization (RO)  
    

 
 
Jeong, Lee, Park, Kim    Expires - December 2003              [Page 3] 
 
Internet-Draft   ND-Proxy based Route Optimization for MN    June 2003 
 
 
   Mobile router MUST perform the role of ND-Proxy and relay the prefix 
   information that is received from an access router.  Before mobile 
   router advertises the prefix information through Router Advertisement 
   (RA) message, it MUST set route-optimization flag indicating that 
   this prefix can be used for route optimization of mobile nodes, which 
   are either local mobile nodes or visiting mobile nodes within the 
   mobile network. 
    
   If a mobile node within a mobile network receives the new prefix 
   information option through RA message and can recognize this option, 
   it MAY prefer this new prefix information option to the normal prefix 
   information option that contains the mobile network prefix assigned 
   by the mobile router's home network.  By performing binding update 
   with the prefix of the access network, the mobile node can optimize 
   the routes between its correspondent nodes and itself. 
    
5. Neighbor Discovery extension 
    
5.1 RO Prefix Information option format 
    
   The mechanism of this document needs the addition of a new flag 
   within prefix information option for route optimization [3].  When 
   this flag is set, it indicates that the prefix included in the option 
   can be used by mobile nodes within a NEMO for the route optimization.   
   Figure 2 shows the format of the modified prefix information option, 
   RO Prefix Information option. 
    
    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    |     Type      |    Length     | Prefix Length |L|A|O|Reserved1| 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    |                         Valid Lifetime                        | 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    |                       Preferred Lifetime                      | 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    |                           Reserved2                           | 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    |                                                               | 
    +                                                               + 
    |                                                               | 
    +                            Prefix                             + 
    |                                                               | 
    +                                                               + 
    |                                                               | 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    
    Figure 2. Prefix Information Option Format for Route Optimization 
 
 
Jeong, Lee, Park, Kim    Expires - December 2003              [Page 4] 
 
Internet-Draft   ND-Proxy based Route Optimization for MN    June 2003 
 
 
    
    Field: 
    
      O            1-bit route-optimization flag.  When set indicates 
                   that this prefix can be used for the route 
                   optimization of mobile nodes within NEMO. 
    
   The RO Prefix Information option provides a mobile node with the 
   network prefix of access network and allows it to autoconfigure its 
   new CoA through stateless address autoconfiguration and to perform 
   binding update.  The Prefix Information option appears in RA message 
   and MUST be silently ignored for other messages.  L (On-link) flag 
   MAY be either 0 or 1.  Namely, this route optimization can be either 
   on-link or off-link model [5].  A (Autonomous address-configuration) 
   flag MUST be 1, indicating IPv6 stateless address autoconfiguration. 
    
5.2 Neighbor Solicitation (NS) message format 
    
   NS message MUST be extended for Duplicate Address Detection (DAD) for 
   the address based on RO prefix of access network.  Therefore, there 
   is a need to discriminate between the normal NS message and extended 
   NS message for route optimization [3].  Figure 3 shows the format of 
   the modified NS message. 
    
    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    |     Type      |     Code      |          Checksum             | 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    |M|                         Reserved                            | 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    |                                                               | 
    +                                                               + 
    |                                                               | 
    +                      Target IPv6 Address                      + 
    |                                                               | 
    +                                                               + 
    |                                                               | 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    |   Options ... 
    +-+-+-+-+-+-+-+-+-+-+-+- 
    
    Figure 3. Extended Neighbor Solicitation Message Format 
    
    Fields:  
    
      M            1-bit multi-hop flag.  When set indicates 
                   that this NS message SHOULD be relayed to the other 
 
 
Jeong, Lee, Park, Kim    Expires - December 2003              [Page 5] 
 
Internet-Draft   ND-Proxy based Route Optimization for MN    June 2003 
 
 
                   links of multilink subnet. 
                    
    
      Target IPv6 Address 
                   The IPv6 address of the target of the solicitation 
                   that will be used as CoA.  It MUST NOT be a 
                   multicast address. 
    
6. Procedure of Route Optimization 
    
6.1 Generation of a new CoA 
    
   Whenever a mobile node first receives RA message containing RO prefix 
   information option that includes a new network prefix of access 
   network, it makes a new CoA. 
    
6.2 DAD for the new CoA 
    
   The mobile node performs DAD for the new CoA through the extended NS 
   message.  The NS message of DAD for the new address is relayed by a 
   mobile router, acting as ND-Proxy, on the link where the mobile node 
   is placed [5].  The mobile router memorizes the DAD for returning NA 
   message to the sender of the extended NS message. 
    
   If there is no NA returned and the DAD is successful, the mobile node 
   configures the address as its new CoA in its network interface. 
    
   Notice that the DAD for the link-local addresses and global addresses 
   based on mobile network prefix assigned by home network is performed 
   through normal NS message only within a link and the DAD for the 
   global addresses based on access network prefix is performed through 
   extended NS message within a multilink subnet, which is relayed by 
   ND-Proxies. 
    
6.3 Return Routability and Binding Update 
    
   After configuring the new CoA, the mobile node performs the return 
   routability and binding update procedure of Mobile IPv6 [7]. 
    
6.4 Delivery of Data Packets 
    
   After binding update, the data packets of correspondent nodes toward  
   the mobile node are delivered to the access network to which the NEMO 
   containing the mobile node is attached via optimal paths. 
    
   When the access router of the access network receives the data 
   packets, it multicasts normal Neighbor Solicitation (NS) message to 
   the solicited-node multicast address of the destination IPv6 address 
 
 
Jeong, Lee, Park, Kim    Expires - December 2003              [Page 6] 
 
Internet-Draft   ND-Proxy based Route Optimization for MN    June 2003 
 
 
   in order to find out the link-layer address of the destination node.   
   The mobile router, knowing the link-layer address of the target, 
   responds to the NS message by returning its own link-layer address in 
   a unicast Neighbor Advertisement (NA) message as ND-Proxy, which 
   knows the IPv6 addresses and link-layer addresses of mobile nodes 
   within its mobile network during the DAD of each CoA of each mobile 
   node. 
    
   When the access router knows the link-layer address to the 
   destination, it forwards the IPv6 data packets to the mobile router 
   corresponding to the link-layer address.  The mobile router relays 
   the packets to the destination mobile node.  In case that the NEMO 
   where the destination node is placed is multi-level, the packets may 
   be relayed to the destination node by more than one mobile router. 
    
7. Security Considerations 
    
   The route optimization in this document does not add any other 
   security problems to the NEMO or Mobile IPv6. 
    
8. References 
    
   [1] Bradner, S., "The Internet Standards Process -- Revision 3", BCP 
       9, RFC 2026, October 1996. 
    
   [2] Bradner, S., "Key words for use in RFCs to Indicate Requirement 
       Levels", BCP 14, RFC 2119, March 1997. 
    
   [3] T. Narten, E. Nordmark and W. Simpson, "Neighbour Discovery for 
       IP version 6", RFC 2461. 
    
   [4] S. Thomson and T. Narten, "IPv6 Stateless Address 
       Autoconfiguration", RFC 2462. 
    
   [5] Dave Thaler and Chistian Huitema, "Multi-link Subnet Support in 
       IPv6", draft-ietf-ipv6-multilink-subnets-00.txt, June 2002. 
    
   [6] Thierry Ernst, "Network Mobility Support Terminology", draft-                  
       ietf-nemo-terminology-00.txt, May 2003. 
    
   [7] D. Johnson, C. Perkins and J. Arkko, "Mobility Support in IPv6", 
       draft-ietf-mobileip-ipv6-22.txt, May 2003. 
    
9. Acknowledgements 
    
   The authors would like to acknowledge the previous contribution of 
   Dave Thaler and Christian Huitema. 
    
 
 
Jeong, Lee, Park, Kim    Expires - December 2003              [Page 7] 
 
Internet-Draft   ND-Proxy based Route Optimization for MN    June 2003 
 
 
10.  Authors' Addresses 
    
   Jae-Hoon Jeong 
   ETRI / PEC 
   161 Gajong-Dong, Yusong-Gu 
   Daejon 305-350 
   Korea 
    
   Phone: +82 42 860 1664 
   EMail: paul@etri.re.kr 
    
   Kyeong-Jin Lee 
   ETRI / PEC 
   161 Gajong-Dong, Yusong-Gu 
   Daejon 305-350 
   Korea 
    
   Phone: +82 42 860 6484 
   EMail: leekj@etri.re.kr 
    
   Jung-Soo Park 
   ETRI / PEC 
   161 Gajong-Dong, Yusong-Gu 
   Daejon 305-350 
   Korea 
    
   Phone: +82 42 860 6514 
   EMail: pjs@etri.re.kr 
    
   Hyoung-Jun Kim 
   ETRI / PEC 
   161 Gajong-Dong, Yusong-Gu 
   Daejon 305-350 
   Korea 
    
   Phone: +82 42 860 6576 
   EMail: khj@etri.re.kr 
 










 
 
Jeong, Lee, Park, Kim    Expires - December 2003              [Page 8] 
