<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>An Extension to Session Initiation Protocol (SIP) Events for Pausing and Resuming Notifications</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="An Extension to Session Initiation Protocol (SIP) Events for Pausing and Resuming Notifications">
<meta name="keywords" content="I-D, Internet-
    Draft, SIPPING, pausing notifications">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">SIPPING WG</td><td class="header">M. Vakil</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">S. Parameswar</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Microsoft Corporation</td></tr>
<tr><td class="header">Expires: September 13, 2008</td><td class="header">March 12, 2008</td></tr>
</table></td></tr></table>
<h1><br />An Extension to Session Initiation Protocol (SIP) Events for Pausing and Resuming Notifications<br />draft-vakil-sipping-notify-pause-02.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 13, 2008.</p>

<h3>Abstract</h3>

<p>The Session Initiation Protocol (SIP) events framework enables a subscriber to receive asynchronous notification of various events from other SIP user agents. It defines mechanisms to create, refresh, terminate subscriptions. This framework also defines mechanism to fetch (poll) an event state of a resource without creating persistent subscriptions. There is no mechanism to temporarily pause the notifications, while still maintaining a subscription on the server. This lack of functionality sometime results in a lot of superfluous notification traffic, and put unnecessary load on the server. This draft defines an extension to SIP events that allows the subscriber to pause, un-pause notifications, and be able to perform fetch (poll) subscriptions within an established (created) subscription dialog.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Requirements notation<br />
<a href="#anchor2">2.</a>&nbsp;
Introduction<br />
<a href="#anchor3">3.</a>&nbsp;
Motivation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.1.1.</a>&nbsp;
Why Not Terminate and Re-create Subscription?<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.1.2.</a>&nbsp;
Fetch During Paused Stream<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.2.</a>&nbsp;
Problem Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.3.</a>&nbsp;
Requirements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.4.</a>&nbsp;
Overview of Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.5.</a>&nbsp;
Subscriber And Notifier Behaviors<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.5.1.</a>&nbsp;
Subscriber Behavior<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.5.2.</a>&nbsp;
Notifier Behavior<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">3.5.3.</a>&nbsp;
Subscriber Behavior when &quot;notify&quot; Not Supported<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">3.6.</a>&nbsp;
Syntax<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">3.6.1.</a>&nbsp;
The &quot;notify&quot; event parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">3.6.2.</a>&nbsp;
New Option Tag for Notify Pause and Resume functionality<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">3.7.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">3.7.1.</a>&nbsp;
New Header Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">3.7.2.</a>&nbsp;
New Option Tag<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">3.8.</a>&nbsp;
Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">3.9.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">4.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">4.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">4.2.</a>&nbsp;
Informational References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Requirements notation</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
    "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
    document are to be interpreted as described in <a class='info' href='#RFC2119'>[1]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Introduction</h3>

<p>The Session Initiation Protocol (SIP) events framework enables a subscriber to receive asynchronous notification of various events from other SIP user agents. It defines mechanisms to create, refresh, terminate subscriptions. This framework also defines mechanism to fetch (poll) an event state of a resource without creating persistent subscriptions. There is no mechanism to temporarily pause the notifications, while still maintaining a subscription on the server. 
</p>
<p>There are many event packages defined, e.g. presence <a class='info' href='#RFC3856'>RFC3856<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Presence Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a> [5] , reg event <a class='info' href='#RFC3680'>RFC3680<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Session Initiation Protocol (SIP) Event Package for Registrations,&rdquo; March&nbsp;2004.</span><span>)</span></a> [6], resource list <a class='info' href='#RFC4662'>RFC4662<span> (</span><span class='info'>Roach, A., Campbell, B., and J. Rosenberg, &ldquo;A Session Initiation Protocol (SIP) Event Notification Extension for Resource Lists,&rdquo; August&nbsp;2006.</span><span>)</span></a> [4], on top of SIP event framework <a class='info' href='#RFC3265'>RFC3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [3]. There is no mechanism to temporarily pause the notifications, while still maintaining a subscription on the server. According to RFC 3265 <a class='info' href='#RFC3265'>RFC3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [3], once a subscription dialog is established, notifications are sent whenever there's any change in resource state. There're instances, as described below, where user agents are not required to receive notifications. But at the same time they cannot simply terminate the subscription, because there are huge costs associated with installing the new subscriptions at the notifier.
</p>
<p>This lack of functionality sometime results in a lot of superfluous notification traffic, and put unnecessary load on the server. This draft defines an extension to SIP events that allows the subscriber to pause, un-pause notifications, and be able to perform fetch (poll) subscriptions within an established (created) subscription dialog.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Motivation</h3>

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Overview</h3>

<p>A SUBSCRIBE request (with Expires !=0 ) for a given event package creates a subscrption with a finite lifetime. In that duration, whenever an event state change occurs for a given resource, notification is sent to the subscriber. This duration depends upon event packages and could range upto hours.
</p>
<p>There is a processing cost on the notifier side to generate notifies, incur network traffic, and have user agent (subscriber) receive the NOTIFY, parse the event state, and perform all the update functions with no benefit.
</p>
<p>In the following scenarios, it is not necessary to keep on  receiving on going notifications, when that event state is not beneficial.
</p>
<p></p>
<ul class="text">
<li>An endpoint, used by the subscriber for presence event may not be active at that endpoint (e.g. PC is locked), but still logged into the system. This idle endpoint keeps on receiving unnecessary notifications
</li>
<li>A wireless handset receiving notifications for events, not paid attention to, while wasting over the air bandwidth. The same wireless endpoint may also consume processing and battery power, which might be needed for other voice applications, to process these unwanted notifications. A wireless handset, may trigger a fetch subscription within an established dialog whenever end user wants to receive an updated event state (mostly in presence buddy list applications)
</li>
</ul>

<p>In the above scenarios, it would be prudent to simply pause the notifications traffic, while still maintaining subscriptions, and when user becomes active, or when the event state is required to be known instantaneously, at that point, it MUST be able to un-pause notification stream or perform a one off fetch subscription to retrieve an updated state within an established dialog.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.1"></a><h3>3.1.1.&nbsp;
Why Not Terminate and Re-create Subscription?</h3>

<p>In big deployments, it's not prudent to simply terminate the subscriptions tempoararily, because creation of subscription take a huge toll on the system. The cost of creating a new subscription on the server is far more than simply pausing the notification traffic temporarily. Typically, the following steps are required to install a new subscription:
</p>
<p></p>
<ul class="text">
<li>New dialog state creation
</li>
<li>Execution of authorization policies
</li>
<li>Installing composition policies
</li>
<li>Creating watcher/presentity based filters
</li>
<li>Creation of back end subscriptions to intra and inter domains for distributed resources. That in turn creates extra processing on the back-end servers to install the subscriptions
</li>
<li>Each new subscription requires processing of watcher info notifcations, if applicable
</li>
<li>To meet high availability requirements, subscription state replication occurs on other nodes
</li>
</ul>

<p>Therefore, it is much less costly to simply turn off notification stream if receipt of the notifications are not required by the subscriber.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.2"></a><h3>3.1.2.&nbsp;
Fetch During Paused Stream</h3>

<p>It would be a significant performance improvement to be able to perform a fetch subscription within a paused dialog. Because, fetch subscription creates an equal amount of processing on the server as described in the section above. This improvement will be useful for wireless handset to be able to do a quick fetch when event state needs to be shown to end user. 

</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Problem Statement</h3>

<p>The SIP events framework (RFC 3265) does not include protocol methods to pause and un-pause notifications, once a subscription is established with a non-zero expiration value. Every, state change triggers a notification towards subscriber, which may not be needed. These notifications cause processing power on the notifier and subscriber side, and the bandwidth in the network. It's not always prudent to terminate the subscription in those cases, as subsequent creation of new subscription requires much more processing on the notifier. There's also no mechanism to do a light weight fetch subscription as and when event state is needed, within a paused subscription.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Requirements</h3>

<p>REQ1:   It MUST be possible to pause the notification stream for established SIP dialog of a subscription for any event package. 
</p>
<p>REQ2:   It MUST be possible to resume the notification stream for an earlier paused notification stream on an established subscription and MUST be able to receive a full state notification to sync up with event state.
</p>
<p>REQ3:   It MUST be possible to perform a one off retrieval of updated event state within a paused notification stream.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Overview of Operation</h3>

<p>The SIP events framework specifies creation, refresh, and deletion of subscriptions. Once a subscription is created on the server, it keeps on sending notifies on event state changes. In order to pause the subscription on a temporary basis, subscriber issues a SUBSCRIBE request, similar to a refresh subscription, with an event header parameter of "notify=off". At this point, notifier stops sending the notifications, while still keeping the subscription alive. The subscription remains inactive until it expires or subscriber sends a request to resume notifications. In this state, subscriber may perform a light weight fetch subscription to trigger only one notify with an updated state, whenever needed. This can be performed by "notify=once". The resumption of notification is performed by the subscriber sending another refresh subscription, with an event header parameter "notify=on".
</p>
<p>In all three cases, expires value is non-zero. Since, these are similar to refresh subscription, they may generate notifies. In the first case of pausing the notifications (notify=off), notifier SHOULD not send a notify. In the resumption case (notify=on) and (notify=once), notifier MUST send a full state subscription. 
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


Subscriber			Notifier		  Event State
							   Generator
   |				   |				  |
   |SUBSCRIBE (expires!=0 , no notify param)	 		  |
   |------------------------------&gt;|				  |
   |	200 OK			   |---Subscription created	  |
   |&lt;------------------------------|				  |
   |	NOTIFY (first full state notify)			  |
   |&lt;------------------------------|				  |
   |    200 OK			   |				  |
   |------------------------------&gt;|				  |
   |				   |	Event state update	  |
   |				   |&lt;-----------------------------|
   |	NOTIFY (partial or full)   |---Notify sent		  |
   |&lt;------------------------------|				  |
   |    200 OK			   |				  |
   |------------------------------&gt;|				  |
   |				   |				  |
   |				   |				  |
   |				   |				  |
   |SUBSCRIBE (expires!=0 , notify=off)		 		  |
   |------------------------------&gt;|				  |
   |	200 OK			   |---Subscription paused	  |
   |&lt;------------------------------|				  |
   |				   |				  |
   |				   |	Event state update	  |
   |				   |&lt;-----------------------------|
   |				   |---No notify sent (paused)	  |
   |				   |				  |
   |SUBSCRIBE (expires!=0 , notify=once)	 		  |
   |------------------------------&gt;|				  |
   |	200 OK			   |---Subscription paused but one|
   |&lt;------------------------------|	full state notify (fetch  |
   |				   |	requested		  |
   |	NOTIFY (full state notify) |				  |
   |&lt;------------------------------|				  |
   |    200 OK			   |				  |
   |------------------------------&gt;|				  |
   |				   |				  |
   |				   |	Event state update	  |
   |				   |&lt;-----------------------------|
   |				   |---No notify sent (paused)	  |
   |				   |				  |
   |				   |				  |
   |				   |				  |
   |				   |				  |
   |SUBSCRIBE (expires!=0 , notify=on)	 			  |
   |------------------------------&gt;|				  |
   |	200 OK			   |---Subscription unpaused 	  |
   |&lt;------------------------------|				  |
   |				   |				  |
   |	NOTIFY (full state notify) |				  |
   |&lt;------------------------------|				  |
   |    200 OK			   |				  |
   |------------------------------&gt;|				  |
   |				   |				  |
   |				   |	Event state update	  |
   |				   |&lt;-----------------------------|
   |	NOTIFY (partial or full)   |---Notify sent		  |
   |&lt;------------------------------|				  |
   |    200 OK			   |				  |
   |------------------------------&gt;|				  |
   |				   |				  |

</pre></div>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
Subscriber And Notifier Behaviors</h3>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5.1"></a><h3>3.5.1.&nbsp;
Subscriber Behavior</h3>

<p>Whenever a subscriber is not interested in receiving on-going notifications for event state changes, it creates a refresh subscription with a non-zero expires value, and adds a new event header parameter "notify=off" to pause notifies on an existing established subscription dialog. This pause notification request in the form of a refresh subscription is sent to the notifier.
</p>
<p>At this point, subscriber MUST NOT drop or reject the incoming notifies, if sent from the notifier. A subscriber is just recommending to halt notifies on a temporary basis.
</p>
<p>In this halted state, subscriber may send another subscribe request with a non-zero expires value, but with a "notify=once" event header parameter to retrieve an updated event state with only one notification. This would allow subscriber to achieve fetch function within an established dialog. 
</p>
<p>When a subscriber discovers the need to receive on-going notifications again, it sends another refresh subscription. This time it uses a different value of "notify" event header parameter, with "notify=on". At this point, subscriber expects to receive a full state notification, similar to very first notification, when a subscription is created, continued updates in the event state on an on-going basis until subscription is terminated or another subscription with "notify=off" is sent. 
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5.1.1"></a><h3>3.5.1.1.&nbsp;
Initial Subscriptons and option tags</h3>

<p>The subscriber SHOULD NOT use the "notify=off" parameter in the initial subscription. In case the subscriber invokes this functionality with the initial subscription,it MUST be prepared to receive the immediate notification as specified in <a class='info' href='#RFC3265'>RFC3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [3].
</p>
<p>It is expected that the subscriber that is sending the initial subscription will place the "notifyoff" option tag in the Supported header. The subscriber SHOULD invoke this feature only if it receives confirmation of support from the notifier. The subscriber MAY invoke this functionality even if it does not receive confirmation, but must then be prepared to receive notifies.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5.2"></a><h3>3.5.2.&nbsp;
Notifier Behavior</h3>

<p>When a notifier receives a request to pause the subscription, it treats that request very similar to a refresh subscription request. It does update the expiration of the subscription. But it pays attention to "notify" parameter, and if it's found to be "off". It SHOULD NOT send any notification, not even the immediate notifcation, until either subscription expires or a request to resume notification arrives. 
	It is a feature of this specification that the notifier SHOULD suppresses the notification for the subscription refresh with "notify=off", though this is notification is required by section 3.1.6.2 of <a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [3]. The notifier MUST send notifications in the event that the subscription is terminated for any reason.
</p>
<p>Upon receiving a request to receive a one off updated notification (refresh subscription with notify="once"), notifier MUST treat that as a refresh subscription request. It MUST update the expiration time of the subscription and pays attention to "notify" parameter. If it's found to be "once", notifier MUST send a full state notification, and MUST NOT turn on the notification stream, upon every event state changes.
</p>
<p>Upon receiving a request to resume notifications (refresh subscription with notify="on"), notifier MUST treat that as a refresh subscription request. It MUST update the expiration time of the subscription and pays attention to "notify" parameter. If it's found to be "on", notifier MUST send a full state notification, and then turns on the notification stream, where by sending notifies for every event state changes.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5.3"></a><h3>3.5.3.&nbsp;
Subscriber Behavior when &quot;notify&quot; Not Supported</h3>

<p>In the case of a notifier not supporting the mechanism identified in this proposed extension, notifier will ignore "notify=" parameter, and would continue to send notifications. That's why, subscriber must be prepared to receive notifications and must keep on acknowleding it with 200 OK.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.6"></a><h3>3.6.&nbsp;
Syntax</h3>

<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.6.1"></a><h3>3.6.1.&nbsp;
The &quot;notify&quot; event parameter</h3>

<p>This section describes the Augmented BNF [RFC 2234] definitions for the new syntax elements. It's based on ruleset present in both SIP Events <a class='info' href='#RFC3265'>RFC3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [3] and SIP <a class='info' href='#RFC3261'>RFC3261<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [2], adding additional alternatives to the alternative sets of "event-param" defined therein.
</p>
<p>event-param =/ notify-param 
</p>
<p>notify-param = "notify" "=" ("on"|"off"|"once")
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.6.2"></a><h3>3.6.2.&nbsp;
New Option Tag for Notify Pause and Resume functionality</h3>

<p>This specification defines a new option tag "notifyoff" that is be used to signal the state of support for the feature documented here.
</p>
<p>UAs that support this feature MUST include the "notifyoff" option tag in a Supported header field. 
The "notifyoff" option tag SHOULD NOT be used in conjuction with the Required header, as the functionality described within this specification is an optimization, and UAs
can continue to work in its absence, albeit with some deleterious effects. 
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.7"></a><h3>3.7.&nbsp;
IANA Considerations</h3>

<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.7.1"></a><h3>3.7.1.&nbsp;
New Header Parameter</h3>

<p>This mechanism registers a new SIP header field parameter for the event header defined in SIP events <a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [3], defined by the following information which is to be added to the Header Field Parameters and Parameter Values sub-registry under.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

Header Field 	Parameter Name	Predefined	References
				 Values
------------	--------------	----------	-----------
Event		  notify	"on", "off",	 RFC[xxxx]
				  "once"

</pre></div>
<p>(Note to the RFC Editor: Replace "xxxx" with the RFC number of this specification, when assigned.)
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.7.2"></a><h3>3.7.2.&nbsp;
New Option Tag</h3>

<p>This section defines a new option tag as per the guidelines of section 27.1 of <a class='info' href='#RFC3261'>RFC3261<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [2]
</p>
<p>Name: notifyoff
</p>
<p>Description: This option tag identifies the Notify Pause and Resume functionality. When present in the Supported header it indicates the user agents support for
this functionality.
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.8"></a><h3>3.8.&nbsp;
Security Considerations</h3>

<p>The security considerations listed in SIP events <a class='info' href='#RFC3265'>RFC3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [3], which the specified mechanism extends, apply in entirety.
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.9"></a><h3>3.9.&nbsp;
Acknowledgments</h3>

<p>I would like to thank everyone who provided feedback on the sipping mailing list for their ideas and input, especially to Paul Kyzivat, Sean Olson, Sriram Parameswar, and Srivatsa Srinivasan.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>4.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[1]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[2]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3265">[3]</a></td>
<td class="author-text">Roach, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3265">Session Initiation Protocol (SIP)-Specific Event Notification</a>,&rdquo; RFC&nbsp;3265, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3265.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>4.2.&nbsp;Informational References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC4662">[4]</a></td>
<td class="author-text">Roach, A., Campbell, B., and J. Rosenberg, &ldquo;<a href="http://tools.ietf.org/html/rfc4662">A Session Initiation Protocol (SIP) Event Notification Extension for Resource Lists</a>,&rdquo; RFC&nbsp;4662, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4662.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3856">[5]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3856">A Presence Event Package for the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;3856, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3856.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3680">[6]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3680">A Session Initiation Protocol (SIP) Event Package for Registrations</a>,&rdquo; RFC&nbsp;3680, March&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3680.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mohammad Vakil</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Microsoft Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">One Microsoft Way</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Redmond, WA  98052</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mvakil@microsoft.com">mvakil@microsoft.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sriram Parameswar</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Microsoft Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">One Microsoft Way</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Redmond, WA  98052</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:srirampa@microsoft.com">srirampa@microsoft.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
