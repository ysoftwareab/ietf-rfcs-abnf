
Network Working Group                               Tom Worster (Editor)
INTERNET DRAFT                                                      GDC
Expires Aug 1999                                               Feb 1999


                       General Switch Management Protocol
                          <draft-worster-gsmp-00.txt>


Status of this Memo

     This document is an Internet-Draft and is in full conformance
     with all provisions of Section 10 of RFC2026.

     Internet-Drafts are working documents of the Internet Engineering
     Task Force (IETF), its areas, and its working groups.  Note that
     other groups may also distribute working documents as
     Internet-Drafts.

     Internet-Drafts are draft documents valid for a maximum of six
     months and may be updated, replaced, or obsoleted by other
     documents at any time.  It is inappropriate to use Internet-
     Drafts as reference material or to cite them other than as
     "work in progress."

     The list of current Internet-Drafts can be accessed at
     http://www.ietf.org/ietf/1id-abstracts.txt

     The list of Internet-Draft Shadow Directories can be accessed at
     http://www.ietf.org/shadow.html.


Acknowledgement

  GSMP was created by P. Newman, W. Edwards, R. Hinden, E. Hoffman,
  F. Ching Liaw, T. Lyon, and G. Minshall (see [6] and [7]). This
  version of GSMP is based on their work.


Abstract

  This memo provides the first draft of the specification of a
  proposed GSMP standard. It is based on GSMP V2 [7].




Worster, et. al.                                              Page 1]

Internet Draft     General Switch Management Protocol        Feb 1999

Changes from the pervious draft

  Relative to GSMP V2 [7], the changes are as follows:

      - The protocol specification has been generalised from ATM
         switches to label switches. The VPI/VCI fields in GSMP
         messages have been generalised to Label fields. Currently
         label formats and semantics and label specific procedures
         are defined only for ATM ports.

      - Label stacking is supported by the inclusion of up to two
         Input Labels or two Output Labels in the connection
         management messages.

      - A placeholder has been crated for an IP encapsulation of
         GSMP messages.

      - The security considerations text has been deleted. Security
         considerations will be updated in the future based on the
         IP encapsulation work.

      - Three QoS Models have been introduced: the Service Model,
         the Simple Abstract Model and the QoS Profile Model.

      - The Service Model has not be introduced to this draft yet.
         Placeholders for Service Model definitions have been
         created.

      - A QoS Model Selector field has been added to the connection
         management messages that distinguishes the three QoS
         Models. A Service Selector Field repaces the Class of
         Service field.

      - The delay priorities of GSMP V1.1 [6] and V2 have been
         retained in Simple Abstract Model.

      - The QoS profiles of V2 have been retained in the QoS
         Profile Model.

      - Chapter 9, "QoS Messages" and its abstract model have been
         deleted and replaced with a placeholder for Service Model
         definitions.

      - Space has been allocated at the end of Add Branch and Move
         Branch Messages to accomodate traffic parameters in the
         Service Model.

      - The congestion indication flag has been removed.



Worster, et. al.                                              Page 2]

Internet Draft     General Switch Management Protocol        Feb 1999

      - Changed "Port Type" in V2 Port Config Messages to "Line
         Type" and reused the name "PortType" to mean "ATM", "FR"
         etc.

      - Port and All Ports Configuration messages have been
         generalised to allow port type specific port configuration
         data. Space has been created in these messages for the
         Service Model Data.






































Worster, et. al.                                              Page 3]

Internet Draft     General Switch Management Protocol        Feb 1999

Table of Contents

1. Introduction ..................................................... 5

2. GSMP Packet Encapsulation ........................................ 7
   2.1 ATM Encapsulation ............................................ 7
   2.2 Ethernet Encapsulation ....................................... 8
   2.3 IP Encapsulation ............................................ 10

3. Common Definitions and Procedures ............................... 10
   3.1 GSMP Packet Format .......................................... 11
   3.2 Failure Response Messages ................................... 13

4. Connection Management Messages .................................. 18
   4.1 General Message Definitions ................................. 18
   4.2 Add Branch Message .......................................... 24
   4.3 Delete Tree Message ......................................... 27
   4.4 Verify Tree Message ......................................... 27
   4.5 Delete All Message .......................................... 27
   4.6 Delete Branches Message ..................................... 28
   4.7 Move Branch Message ......................................... 30

5. Port Management Messages ........................................ 33
   5.1 Port Management Message ..................................... 33
   5.2 Label Range Message ......................................... 38

6. State and Statistics Messages ................................... 42
   6.1 Connection Activity Message ................................. 42
   6.2 Statistics Messages ......................................... 45
       6.2.1 Port Statistics Message ............................... 48
       6.2.2 Connection Statistics Message ......................... 48
       6.2.3 QoS Class Statistics Message .......................... 48
   6.3 Report Connection State Message ............................. 48

7. Configuration Messages .......................................... 54
   7.1 Switch Configuration Message ................................ 54
   7.2 Port Configuration Message .................................. 56
       7.2.1 PortType Specific Data ................................ 57
   7.3 All Ports Configuration Message ............................. 63

8. Event Messages .................................................. 64
   8.1 Port Up Message ............................................. 66
   8.2 Port Down Message ........................................... 66
   8.3 Invalid Label Message ....................................... 66
   8.4 New Port Message ............................................ 66
   8.5 Dead Port Message ........................................... 67

9. Service Model Definition ........................................ 67



Worster, et. al.                                              Page 4]

Internet Draft     General Switch Management Protocol        Feb 1999

10. Adjacency Protocol ............................................. 67
   10.1 Packet Format .............................................. 67
   10.2 Procedure .................................................. 70
   10.3 Loss of Synchronization .................................... 73

11. Summary of Failure Response Codes .............................. 74

12. Summary of Message Set ......................................... 76

13. Security Considerations ........................................ 77


1.  Introduction

   The General Switch Management Protocol (GSMP), is a general
   purpose protocol to control a label switch. GSMP allows a
   controller to establish and release connections across the switch;
   add and delete leaves on a multicast connection; manage switch
   ports; request configuration information; and request statistics.
   It also allows the switch to inform the controller of asynchronous
   events such as a link going down. The GSMP protocol is asymmetric,
   the controller being the master and the switch being the slave.
   Multiple switches may be controlled by a single controller using
   multiple instantiations of the protocol over separate control
   connections.

   GSMP may be transported in three ways:

       - GSMP may run across an ATM link connecting the controller
          to the switch, on a control connection (virtual channel)
          established at initialization.

       - GSMP operation across an Ethernet link is specified.

       - GSMP operation across an IP network is specified.

   A label switch is a frame or cell switch that supports connection
   oriented switching using the exact match forwarding algorithm
   based on labels attached to incomming cells or frames. A switch is
   assumed to contain multiple "ports". Each port is a combination of
   one "input port" and one "output port". Some GSMP requests refer
   to the port as a whole whereas other requests are specific to the
   input port or the output port. Cells or labeled frames arrive at
   the switch from an external communication link on incoming labeled
   channels at an input port. Cells or or labeled frames depart from
   the switch to an external communication link on labeled channels
   from an output port.




Worster, et. al.                                              Page 5]

Internet Draft     General Switch Management Protocol        Feb 1999

  A switch may support multiple label types, however, each switch
  port can support only one label type. The label type supported by
  a given port is indicated by the switch to the controller in a
  port configuration message. Connections may be established between
  ports supporting different label types. Label types include ATM,
  Frame Relay and MPLS.

  A connection across a switch is formed by connecting an incoming
  labeled channel to one or more outgoing labeled channels.
  Connections are referenced by the input port on which they arrive
  and the Labels values of their incoming labeled channel.

  GSMP supports point-to-point and point-to-multipoint connections.
  A multipoint-to-point connection is specified by establishing
  multiple point-to-point connections each of them specifying the
  same output branch. A multipoint-to-multipoint connection is
  specified by establishing multiple point-to-multipoint trees each
  of them specifying the same output branches.

  In general a connection is established with a certain quality of
  service (QoS). This version of GSMP supports three QoS Models: a
  Service Model, a Simple Abstract Model and a QoS Profile Model.

  The Service Model is based on service definitions found external
  to GSMP such as in Integrated Services or ATM Service Categories.
  Each connection is assigned a specific service which defines the
  handling of the connection by the switch. Additionally, traffic
  parameters and traffic controls may be assigned to the connection
  depending on the assigned service.

  In the Simple Abstract Model a connection is assigned a priority
  when it is established. It may be assumed that for connections
  that share the same output port, an cell or frame on a connection
  with a higher priority is much more likely to exit the switch
  before a cell or frame on a connection with a lower priority if
  they are both in the switch at the same time. The number of
  priorities that each port of the switch supports may be obtained
  from the port configuration message.

  The QoS Profile Model provides a simple mechanism that allows
  connection to be assigned QoS semantics defined external to GSMP.

  GSMP contains an adjacency protocol. The adjacency protocol is
  used to synchronize state across the link, to negotiate which
  version of the GSMP protocol to use, to discover the identity of
  the entity at the other end of a link, and to detect when it
  changes.




Worster, et. al.                                              Page 6]

Internet Draft     General Switch Management Protocol        Feb 1999

2.  GSMP Packet Encapsulation

2.1  ATM Encapsulation

   GSMP packets are variable length and for an ATM data link layer
   they are encapsulated directly in an AAL-5 CPCS-PDU [3] with an
   LLC/SNAP header as illustrated:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |               LLC (0xAA-AA-03)                |               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               +
   |                   SNAP (0x00-00-00-88-0C)                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                         GSMP Message                          ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Pad (0 - 47 octets)                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +               AAL-5 CPCS-PDU Trailer (8 octets)               +
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   (The convention in the documentation of Internet Protocols [5] is
   to express numbers in decimal. Numbers in hexadecimal format are
   specified by prefacing them with the characters "0x". Data is
   pictured in "big-endian" order. That is, fields are described left
   to right, with the most significant octet on the left and the
   least significant octet on the right. Whenever a diagram shows a
   group of octets, the order of transmission of those octets is the
   normal order in which they are read in English. Whenever an octet
   represents a numeric quantity the left most bit in the diagram is
   the high order or most significant bit. That is, the bit labeled 0
   is the most significant bit. Similarly, whenever a multi-octet
   field represents a numeric quantity the left most bit of the whole
   field is the most significant bit. When a multi-octet quantity is
   transmitted, the most significant octet is transmitted first. This
   is the same coding convention as is used in the ATM layer [2] and
   AAL-5 [3].)

   The LLC/SNAP header contains the octets: 0xAA 0xAA 0x03 0x00 0x00
   0x00 0x88 0x0C. (0x880C is the assigned Ethertype for GSMP.)

   The maximum transmission unit (MTU) of the GSMP Message field is
   1492 octets.



Worster, et. al.                                              Page 7]

Internet Draft     General Switch Management Protocol        Feb 1999

   The virtual channel over which a GSMP session is established
   between a controller and the switch it is controlling is called
   the GSMP control channel. The default VPI and VCI of the GSMP
   control channel for LLC/SNAP encapsulated GSMP messages on an ATM
   data link layer is:

      VPI = 0
      VCI = 15.

2.2  Ethernet Encapsulation

   GSMP packets may be encapsulated on an Ethernet data link as
   illustrated:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Destination Address                      |
   |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                               |                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               |
   |                         Source Address                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Ethertype (0x88-0C)       |                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               |
   |                                                               |
   ~                         GSMP Message                          ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        Sender Instance                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Receiver Instance                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                              Pad                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Frame Check Sequence                    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Destination Address
               For the SYN message of the adjacency protocol the
               Destination Address is the broadcast address
               0xFFFFFFFFFFFF. (Alternatively, it is also valid to
               configure the node with the unicast 48-bit IEEE MAC
               address of the destination. In this case the configured
               unicast Destination Address is used in the SYN message.)
               For all other messages the Destination Address is the
               unicast 48- bit IEEE MAC address of the destination.
               This address may be discovered from the Source Address



Worster, et. al.                                              Page 8]

Internet Draft     General Switch Management Protocol        Feb 1999

             field of messages received during synchronization of the
             adjacency protocol.

  Source Address
             For all messages the Source Address is the 48-bit IEEE
             MAC address of the sender.

  Ethertype The assigned Ethertype for GSMP is 0x880C.
  GSMP Message
             The maximum transmission unit (MTU) of the GSMP Message
             field is 1492 octets.

  Sender Instance
             The Sender Instance number for the link obtained from
             the adjacency protocol. This field is already present in
             the adjacency protocol message. It is appended to all
             non- adjacency GSMP messages in the Ethernet
             encapsulation to offer additional protection against the
             introduction of corrupt state.

  Receiver Instance
             The Receiver Instance number is what the sender believes
             is the current instance number for the link, allocated
             by the entity at the far end of the link. This field is
             already present in the adjacency protocol message. It is
             appended to all non-adjacency GSMP messages in the
             Ethernet encapsulation to offer additional protection
             against the introduction of corrupt state.

  Pad
             The minimum length of the data field of an Ethernet
             packet is 46 octets. If necessary, padding should be
             added such that it meets the minimum Ethernet frame
             size. This padding should be octets of zero and it is
             not considered to be part of the GSMP message.

  After the adjacency protocol has achieved synchronization, for
  every GSMP message received with an Ethernet encapsulation, the
  receiver must check the Source Address from the Ethernet MAC
  header, the Sender Instance, and the Receiver Instance. The
  incoming GSMP message must be discarded if the Sender Instance and
  the Source Address do not match the values of Sender Instance and
  Sender Name stored by the "Update Peer Verifier" operation of the
  GSMP adjacency protocol. The incoming GSMP message must also be
  discarded if it arrives over any port other than the port over
  which the adjacency protocol has achieved synchronization. In
  addition, the incoming message must also be discarded if the


Worster, et. al.                                              Page 9]

Internet Draft     General Switch Management Protocol        Feb 1999

   Receiver Instance field does not match the current value for the
   Sender Instance of the GSMP adjacency protocol.

2.3  IP Encapsulation


3.  Common Definitions and Procedures

   GSMP is a master-slave protocol. The controller issues request
   messages to the switch. Each request message indicates whether a
   response is required from the switch and contains a transaction
   identifier to enable the response to be associated with the
   request. The switch replies with a response message indicating
   either a successful result or a failure. There are five classes of
   GSMP request-response message: Connection Management, Port
   Management, State and Statistics, Configuration, and Quality of
   Service. The switch may also generate asynchronous Event messages
   to inform the controller of asynchronous events. Event messages
   are not acknowledged by the controller. There is also an adjacency
   protocol message used to establish synchronization across the link
   and maintain a handshake.

   For the request-response messages, each message type has a format
   for the request message and a format for the success response.
   Unless otherwise specified a failure response message is identical
   to the request message that caused the failure, with the Code
   field indicating the nature of the failure. Event messages have
   only a single format defined as they are not acknowledged by the
   controller.

   Switch ports are described by a 32-bit port number. The switch
   assigns port numbers and it may typically choose to structure the
   32 bits into subfields that have meaning to the physical structure
   of the switch (e.g. slot, port). In general, a port in the same
   physical location on the switch will always have the same port
   number, even across power cycles. The internal structure of the
   port number is opaque to the GSMP protocol. However, for the
   purposes of network management such as logging, port naming, and
   graphical representation, a switch may declare the physical
   location (physical slot and port) of each port. Alternatively,
   this information may be obtained by looking up the product
   identity in a database.

   Each switch port also maintains a port session number assigned by
   the switch. A message, with an incorrect port session number must
   be rejected. This allows the controller to detect a link failure
   and to keep state synchronized.




Worster, et. al.                                              Page 10]

Internet Draft     General Switch Management Protocol        Feb 1999

   Except for the adjacency protocol message, no GSMP messages may be
   sent across the link until the adjacency protocol has achieved
   synchronization, and all GSMP messages received on a link that
   does not currently have state synchronization must be discarded.

3.1  GSMP Packet Format

   All GSMP messages, except the adjacency protocol message, have the
   following format:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Version    | Message Type  |    Result     |     Code      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Transaction Identifier                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                          Message Body                         ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Version
              The version number of the GSMP protocol being used in
              this session. It should be set by the sender of the
              message to the GSMP protocol version negotiated by the
              adjacency protocol.

   Message Type
              The GSMP message type. GSMP messages fall into six
              classes: Connection Management, Port Management, State
              and Statistics, Configuration, Quality of Service, and
              Events. Each class has a number of different message
              types. In addition, one Message Type is allocated to the
              adjacency protocol.

   Result
              Field in a Connection Management request message, a Port
              Management request message, or a Quality of Service
              request message is used to indicate whether a response
              is required to the request message if the outcome is
              successful. A value of "NoSuccessAck" indicates that the
              request message does not expect a response if the
              outcome is successful, and a value of "AckAll" indicates
              that a response is expected if the outcome is
              successful. In both cases a failure response must be
              generated if the request fails. For Sate and Statistics,
              and Configuration request messages, a value of
              "NoSuccessAck" in the request message is ignored and the


Worster, et. al.                                              Page 11]

Internet Draft     General Switch Management Protocol        Feb 1999

             request message is handled as if the field were set to
             "AckAll". (This facility was added to reduce the control
             traffic in the case where the controller periodically
             checks that the state in the switch is correct. If the
             controller does not use this capability, all request
             messages should be sent with a value of "AckAll.")

            In a response message the result field can have three
            values: "Success," "More," and "Failure". The "Success"
            and "More" results both indicate a success response. The
            "More" result indicates that the success response
            exceeds the maximum transmission unit of the data link
            and that one or more further messages will be sent to
            complete the success response. All messages that belong
            to the same success response will have the same
            Transaction Identifier. The "Success" result indicates a
            success response that may be contained in a single
            message or the final message of a success response
            spanning multiple messages.

            The encoding of the result field is:

                 NoSuccessAck:  Result = 1
                 AckAll:        Result = 2
                 Success:       Result = 3
                 Failure:       Result = 4
                 More:          Result = 5.

            The Result field is not used in an adjacency protocol
            message.

  Code
             Field gives further information concerning the result in
             a response message. It is mostly used to pass an error
             code in a failure response but can also be used to give
             further information in a success response message or an
             event message. In a request message the code field is
             not used and is set to zero. In an adjacency protocol
             message the Code field is used to determine the function
             of the message.

  Transaction Identifier
             Used to associate a request message with its response
             message. For request messages the controller may select
             any transaction identifier. For response messages the
             transaction identifier is set to the value of the
             transaction identifier from the message to which it is a
             response. For event messages the transaction identifier
             should be set to zero. The Transaction Identifier is not


Worster, et. al.                                              Page 12]

Internet Draft     General Switch Management Protocol        Feb 1999

                used, and the field is not present, in the adjacency
                protocol.

   The following fields are frequently found in GSMP messages. They
   are defined here to avoid repetition.

   Port
                Gives the port number of the switch port to which the
                message applies.

   Port Session Number
              Each switch port maintains a Port Session Number
              assigned by the switch. The port session number of a
              port remains unchanged while the port is continuously in
              the Available state and the link status is continuously
              Up. When a port returns to the Available state after it
              has been Unavailable or in any of the Loopback states,
              or when the line status returns to the Up state after it
              has been Down or in Test, or after a power cycle, a new
              Port Session Number must be generated. Port session
              numbers should be assigned using some form of random
              number.

              If the Port Session Number in a request message does not
              match the current Port Session Number for the specified
              port, a failure response message must be returned with
              the Code field indicating, "Invalid port session
              number."  The current port session number for a port may
              be obtained using a Port Configuration or an All Ports
              Configuration message.

   Any field in a GSMP message that is unused or defined as
   "reserved" must be set to zero by the sender and ignored by the
   receiver.

   It is not an error for a GSMP message to contain additional data
   after the end of the Message Body. This is to support development
   and experimental purposes. However, the maximum transmission unit
   of the GSMP message, as defined by the data link layer
   encapsulation, must not be exceeded.

   A success response message must not be sent until the requested
   operation has been successfully completed.

3.2  Failure Response Messages

   [Editor's note: this section has not been updated in this
   revision. this section will be updated once more work on new
   functions has been added.]


Worster, et. al.                                              Page 13]

Internet Draft     General Switch Management Protocol        Feb 1999

  A failure response message is formed by returning the request
  message that caused the failure with the Result field in the
  header indicating failure (Result = 4) and the Code field giving
  the failure code. The failure code specifies the reason for the
  switch being unable to satisfy the request message.

  If the switch issues a failure response in reply to a request
  message, no change should be made to the state of the switch as a
  result of the message causing the failure. (For request messages
  that contain multiple requests, such as the Delete Branches
  message, the

  failure response message will specify which requests were
  successful and which failed. The successful requests may result in
  changed state.)

  If the switch issues a failure response it must choose the most
  specific failure code according to the following precedence:

      Invalid Message

      Failure specific to the particular message type (failure code
         16). (The meaning of this failure is dependent upon the
         particular message type and is specified in the text
         defining the message.)

      A failure response specified in the text defining the message
         type.

      Connection Failures

      Virtual Path Connection Failures

      Multicast Failures

      QoS Failures (QoS failures are specified in Section 9.7.)

      General Failures

  If multiple failures match in any of the following categories, the
  one that is listed first should be returned. The following failure
  response messages and failure codes are defined:

  Invalid Message

      3:  The specified request is not implemented on this switch.
              The Message Type field specifies a message that is not
              implemented on the switch or contains a value that is



Worster, et. al.                                              Page 14]

Internet Draft     General Switch Management Protocol        Feb 1999

              not defined in the version of the protocol running in
              this session of GSMP.

      5:  One or more of the specified ports does not exist.
              At least one of the ports specified in the message is
              invalid. A port is invalid if it does not exist or if
              it has been removed from the switch.

      4:  Invalid Port Session Number.
              The value given in the Port Session Number field does
              not match the current Port Session Number for the
              specified port.

   Connection Failures

      8:  The specified connection does not exist.
              An operation that expects a connection to be specified
              cannot locate the specified connection. A connection
              is specified by the input port and input label on
              which it arrives. An ATM virtual path connection is
              specified by the input port and input VPI on which it
              arrives.

      9:  The specified branch does not exist.
              An operation that expects a branch of an existing
              connection to be specified cannot locate the specified
              branch. A branch of a connection is specified by the
              connection it belongs to and the output port and
              output label on which it departs. A branch of an ATM
              virtual path connection is specified by the virtual
              path connection it belongs to and the output port and
              output VPI on which it departs.

      18: One or more of the specified input VPIs is invalid.

      19: One or more of the specified Input Labels is invalid.

      20: One or more of the specified output VPIs is invalid.

      21: One or more of the specified Output Labelss is invalid.

      22: Invalid Service Selector field in a Connection Management
              message.
              The value of the Service Selector field is invalid.

      23: Insufficient resources for QoS Profile.
              The resources requested by the QoS Profile in the
              Service Selector field are not available.



Worster, et. al.                                              Page 15]

Internet Draft     General Switch Management Protocol        Feb 1999

  ATM Virtual Path Connections

      24: ATM virtual path switching is not supported on this input
              port.

      25: Point-to-multipoint ATM virtual path connections are not
              supported on either the requested input port or the
              requested output port.
              One or both of the requested input and output ports is
              unable to support point-to-multipoint ATM virtual path
              connections.

      26: Attempt to add a ATM virtual path connection branch to an
              existing virtual channel connection.
              It is invalid to mix branches switched as virtual
              channel connections with branches switched as ATM
              virtual path connections on the same point-to-
              multipoint connection.

      27: Attempt to add a virtual channel connection branch to an
              existing ATM virtual path connection.
              It is invalid to mix branches switched as virtual
              channel connections with branches switched as ATM
              virtual path connections on the same point-to-
              multipoint connection.

      XX: ATM Virtual path switching is not supported on non-ATM
              ports.
              One or both of the requested input and output ports is
              not an ATM port. ATM virtual path switching is only
              supported on ATM ports.

  Multicast Failures

      10: A branch belonging to the specified point-to-multipoint
              connection is already established on the specified
              output port and the switch cannot support more than a
              single branch of any point-to-multipoint connection on
              the same output port.

      11: The limit on the maximum number of point-to-multipoint
              connections that the switch can support has been
              reached.

      12: The limit on the maximum number of branches that the
              specified point-to-multipoint connection can support
              has been reached.




Worster, et. al.                                              Page 16]

Internet Draft     General Switch Management Protocol        Feb 1999

      17: Cannot label each output branch of a point-to-multipoint
              tree with a different label.
              Some early designs, and some low-cost switch designs,
              require all output branches of a multicast connection
              to use the same value of Label.

      28: Only point-to-point bidirectional connections may be
              established.
              It is an error to attempt to add an additional output
              branch to an existing connection with the
              bidirectional flag set.

      13: Unable to assign the requested Label value to the
              requested branch on the specified point-to-multipoint
              connection.
              Although the requested Labels are valid, the switch is
              unable to support the request using the specified
              Label values for some reason not covered by the above
              failure responses. This message implies that a valid
              value of Lable exists that the switch could support.
              For example, some switch designs restrict the number
              of distinct Label values available to a point-to-
              multipoint connection. (Most switch designs will not
              require this message.)

      14: General problem related to the manner in which point-to-
              multipoint is supported by the switch.
              Use this message if none of the more specific
              multicast failure messages apply. (Most switch designs
              will not require this message.)

   General Failures

      2:  Invalid request message.
              There is an error in one of the fields of the message
              not covered by a more specific failure message.

      6:  One or more of the specified ports is down.
              A port is down if its Port Status is Unavailable.
              Connection Management, Connection State, Port
              Management, and Configuration operations are permitted
              on a port that is Unavailable. Connection Activity and
              Statistics operations are not permitted on a port that
              is Unavailable and will generate this failure
              response. A Port Management message specifying a Take
              Down function on a port already in the Unavailable
              state will also generate this failure response.




Worster, et. al.                                              Page 17]

Internet Draft     General Switch Management Protocol        Feb 1999

       15: Out of resources.
               The switch has exhausted a resource not covered by a
               more specific failure message, for example, running
               out of memory.

       1:  Unspecified reason not covered by other failure codes.
               The failure message of last resort.

   The following failure response messages are only used by the Label
             Range message. [Must come back and revise this --ed]

       29: Cannot support requested VPI range.

       30: Cannot support requested VCI range on all requested VPIs.

   The following failure response messages are only used by the Set
             Transmit Cell Rate function of the Port Management
             message.

       31: The transmit cell rate of this output port cannot be
               changed.

       32: Requested transmit cell rate out of range for this output
               port.


4.  Connection Management Messages

4.1  General Message Definitions

   Connection management messages are used by the controller to
   establish, delete, modify and verify connections across the
   switch. The Add Branch, Delete Tree, and Delete All connection
   management messages have the following format for both request and
   response messages:















Worster, et. al.                                              Page 18]

Internet Draft     General Switch Management Protocol        Feb 1999


   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Version    | Message Type  |    Result     |     Code      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                    Transaction Identifier                     |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                      Port Session Number                      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                          Input Port                           |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |M|B|E|x|                                                       |
  +-+-+-+-+                  Input Label                          ~
  ~                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                          Output Port                          |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |QMS|E|x|                                                       |
  +-+-+-+-+                  Output Label                         ~
  ~                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |      Number of Branches       |       Service Selector        |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

  Input PortIdentifies a switch input port.
  Flags

      M: Multicast
              Multicast flag is used as a hint for point-to-
              multipoint connections in the Add Branch message. It
              is not used in any other connection management
              messages and in these messages it should be set to
              zero. If set, it indicates that the virtual channel
              connection or the virtual path connection is very
              likely to be a point-to-multipoint connection. If
              zero, it indicates that this connection is very likely
              to be a point-to-point connection or is unknown.

              The Multicast flag is only used in the Add Branch
              message when establishing the first branch of a new
              connection. It is not required to be set when
              establishing subsequent branches of a point-to-
              multipoint connection and on such connections it
              should be ignored by the receiver. (On receipt of the
              second and subsequent Add Branch messages the receiver
              knows that this is a point-to-multipoint connection.)


Worster, et. al.                                              Page 19]

Internet Draft     General Switch Management Protocol        Feb 1999

              If it is known that this is the first branch of a
              point-to-multipoint connection this flag should be
              set. If it is unknown, or if it is known that the
              connection is point-to-point this flag should be zero.
              The use of this flag is not mandatory. It may be
              ignored by the switch. If unused the flag should be
              set to zero. Some switches use a different data
              structure for point-to-multipoint connections than for
              point-to-point connections. This flag avoids the
              switch setting up a point-to-point structure for the
              first branch of a point-to-multipoint connection which
              must immediately be deleted and reconfigured as point-
              to-multipoint when the second branch is established.

       QMS: QoS Model Selector
            The QoS Model Selector is used to specify a QoS Model
            for connection. The value of QMS indicates the value in
            the Service Selector should be interprested as a
            priority, a QoS profile or a service specification as
            shown:

              QMS     QoS Model                Service Selector
              ---     ---------                ----------------
              00      Simple Abstract Model    Priority
              01      QoS Profile Model        QoS Profile
              10      Service Model            Service Specification
              11      Reserved                 N/A

       B: Bidirectional
            The Bidirectional flag applies only to the Add Branch
            message. In all other Connection Management messages it
            is not used. It may only be used when establishing a
            point- to-point connection. The Bidirectional flag in an
            Add Branch message, if set, requests that two
            unidirectional virtual channels or virtual paths be
            established, one in the forward direction, and one in
            the reverse direction. It is equivalent to two Add
            Branch messages, one specifying the forward direction,
            and one specifying the reverse direction. The forward
            direction uses the values of Input Port, Input Label,
            Output Port and Output Label as specified in the Add
            Branch message. The reverse direction is derived by
            exchanging the values specified in the Input Port and
            Input Label fields, with those of the Output Port and
            Output Label fields respectively. Thus, a connection in
            the reverse direction arrives at the input port
            specified by the Output Port field, on the label
            specified by the Output Label field. It departs from the



Worster, et. al.                                              Page 20]

Internet Draft     General Switch Management Protocol        Feb 1999

               output port specified by the Input Port field, on the
               label specified by the Input Label field.

               The Bidirectional flag is simply a convenience to
               establish two unidirectional connections in opposite
               directions between the same two ports, with identical
               Labels, using a single Add Branch message. In all future
               messages the two unidirectional connections must be
               handled separately. There is no bidirectional delete
               message. However, a single Delete Branches message with
               two Delete Branch Elements, one for the forward
               connection and one for the reverse, may be used.

       E: Extension Label
               The Extension Label flag if zero indicates that the
               adjacent Label field is a 28 bit field. If the Extension
               Label flag is set then the adjacent Label field is a 60
               bit field structured as a 28 bit first level label field
               followed by a 32 bit second level label field.

  x: Unused

  Input Label
              Identifies an incomming labeled channel arriving at the
              switch input port indicated by the Input Port field. The
              value in the Input Label field must be interpreted
              according to the Lable Type attribute of the switch
              input port indicated by the Input Port field.

  Output Port
              Identifies a switch output port.

  Output Label
               Identifies an outgoing labeled channel departing at the
               switch output port indicated by the Output Port field.
               The value in the Output Label field must be interpreted
               according to the Lable Type attribute of the switch
               input port indicated by the Output Port field.

  Number of Branches
               In a success response message and a failure response
               message, gives the number of output branches on a
               connection after completion of the requested operation.
               (A point-to-point connection will have one branch, a
               point-to-multipoint connection will have two or more
               branches.) If the switch is unable to keep track of the
               number of branches on a virtual path connection or a
               virtual channel connection it must respond with the



Worster, et. al.                                              Page 21]

Internet Draft     General Switch Management Protocol        Feb 1999

             value 0xFFFF meaning: "number of branches unknown". This
             field is not used in the request message.

  Service Selector
             This field can contain either a QoS Profile Identifier,
             a Priority, or a Service Specification. If the QoS Model
             Selector is set to 0b00, the Service Selector field
             contains a Priority. If the QoS Model Selector is set to
             0b01, the Service Selector field contains a QoS Profile.
             If the QoS Model Selector is set to 0b10, the Service
             Selector field contains a Service Specification.  The
             Service Selector field is only used in the Add Branch
             and Move Branch messages.

            A Priority specifies the priority of the connection for
            Add Branch and Move Branch messages that choose not to
            use a QoS profile, or the QoS capabilities defined in
            Section 9, "Quality of Service Messages." The highest
            priority is numbered zero and the lowest priority is
            numbered "Q-1" where "Q" is the number of priorities
            that the output port can support. The ability to offer
            different qualities of service to different connections
            based upon their priority is assumed to be a property of
            the output port of the switch. It is assumed that for
            virtual path connections or virtual channel connections
            that share the same output port, a cell or frame on a
            connection with a higher priority is much more likely to
            exit the switch before a cell or frame on a connection
            with a lower priority, if they are both in the switch at
            the same time. The number of priorities that each output
            port can support is given in the Port Configuration
            message.

            A QoS Profile Identifier is an opaque 16-bit value. It
            is used to identify a QoS profile in the switch which
            specifies the Quality of Service required by the
            connection. QoS profiles are established by a mechanism
            external to GSMP.

            A Service Specification is an alternative method of
            communicating the QoS requirements of a connection. The
            Service Specification is defined in Section 9 "Service
            Model Definition".

  For all connection management messages, except the Delete Branches
  message, the success response message is a copy of the request
  message returned with the Result field indicating success and the
  Number of Branches field indicating the number of branches on the



Worster, et. al.                                              Page 22]

Internet Draft     General Switch Management Protocol        Feb 1999

  connection after completion of the operation. The Code field is
  not used in a connection management success response message.

  The failure response message is a copy of the request message
  returned with a Result field indicating failure and the Number of
  Branches field indicating the number of branches on the
  connection.

  Fundamentally, no distinction is made between point-to-point and
  point-to-multipoint connections. By default, the first Add Branch
  message for a particular Input Port and Input Label will establish
  a point-to-point connection. The second Add Branch message with
  the same Input Port and Input Label fields will convert the
  connection to a point-to-multipoint connection with two branches.
  However, to avoid possible inefficiency with some switch designs,
  the Multicast Flag is provided. If the controller knows that a new
  connection is point-to-multipoint when establishing the first
  branch, it may indicate this in the Multicast Flag. Subsequent Add
  Branch messages with the same Input Port and Input Label fields
  will add further branches to the point-to-multipoint connection.
  Use of the Delete Branch message on a point-to-multipoint
  connection with two branches will result in a point-to-point
  connection. However, the switch may structure this connection as a
  point-to-multipoint connection with a single output branch if it
  chooses. (For some switch designs this structure may be more
  convenient.) Use of the Delete Branch message on a point-to-point
  connection will delete the point-to-point connection. There is no
  concept of a connection with zero output branches. All connections
  are unidirectional, one input labeled channel to one or more
  output labeled channels.

  GSMP supports point-to-point and point-to-multipoint connections.
  A multipoint-to-point connection is specified by establishing
  multiple point-to-point connections each of them specifying the
  same output branch. (An output branch is specified by an output
  port and output label.)

  Label stacking is a technique used in MPLS that allows
  hierarchical labeling. MPLS label staching is similar to but
  subtley different from the VPI/VCI hierarchy of labels in ATM. ...
  [Must add blah --Ed]

  The connection management messages may be issued regardless of the
  Port Status of the switch port. Connections may be established or
  deleted when a switch port is in the Available, Unavailable, or
  any of the Loopback states. However, all connection state on an
  input port will be deleted when the port returns to the Available
  state from any other state, i.e. when a Port Management message is



Worster, et. al.                                              Page 23]

Internet Draft     General Switch Management Protocol        Feb 1999

   received for that port with the Function field indicating either
   Bring Up, or Reset Input Port.

       ATM Labels

          If a port's attribute PortType=ATM then that port's labels
          must be interpreted as ATM Labels as shown:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    + - - -+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |      |           VPI         |              VCI              |
    + - - -+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

          ATM ports do not support Extension Lables so the VPI and
          VCI values always occupy the 28 bits following the flags in
          a connection management message.

          ATM distinguishes between virtual path connections and
          virtual channel connections. The connection management
          messages apply both to virtual channel connections and
          virtual path connections. The Add Branch and Move Branch
          connection management messages have two Message Types. One
          Message Type indicates that a virtual channel connection is
          required, and the other Message Type indicates that a
          virtual path connection is required. The Delete Branches,
          Delete Tree, and Delete All connection management messages
          have only a single Message Type because they do not need to
          distinguish between virtual channel connections and virtual
          path connections. For virtual path connections, neither
          Input VCI fields nor Output VCI fields are required. They
          should be set to zero by the sender and ignored by the
          receiver. Virtual channel branches may not be added to an
          existing virtual path connection. Conversely, virtual path
          branches may not be added to an existing virtual channel
          connection. In the Port Configuration message each switch
          input port may declare whether it is capable of supporting
          virtual path switching (i.e. accepting connection
          management messages requesting virtual path connections).

       Other Labels

          [Editor's Note: No other label types are currently
          defined.]

4.2  Add Branch Message

   The Add Branch message is a connection management message used to
   establish a connection or to add an additional branch to an


Worster, et. al.                                              Page 24]

Internet Draft     General Switch Management Protocol        Feb 1999

  existing connection. It may also be used to check the connection
  state stored in the switch. The connection is specified by the
  Input Port and Input Label fields. The output branch is specified
  by the Output Port and Output Label fields. The quality of service
  requirements of the connection are specified by the QoS Model
  Selector and Service Selector fields. To request a connection the
  Add Branch message is:

     Message Type = 16

  If the connection specified by the Input Port and Input Label
  fields does not already exist, it must be established with the
  single output branch specified in the request message. If the
  Bidirectional Flag in the Flags field is set, the reverse
  connection must also be established. The output branch should have
  the QoS attributes specified by the Class of Service field.

  If the connection specified by the Input Port and Input Label
  fields already exists, but the specified output branch does not,
  the new output branch must be added. The new output branch should
  have the QoS attributes specified by the Class of Service field.

  If the connection specified by the Input Port and Input Label
  fields already exists and the specified output branch also already
  exists, the QoS attributes of the connection, specified by the
  Class of Service field, if different from the request message,
  should be changed to that in the request message. A success
  response message must be sent if the Result field of the request
  message is "AckAll". This allows the controller to periodically
  reassert the state of a connection or to change its priority. If
  the result field of the request message is "NoSuccessAck" a
  success response message should not be returned. This may be used
  to reduce the traffic on the control link for messages that are
  reasserting previously established state. For messages that are
  reasserting previously established state, the switch must always
  check that this state is correctly established in the switch
  hardware (i.e. the actual connection tables used to forward
  cells).

  If the output branch specified by the Output Port and Output Label
  fields is already in use by any connection other than that
  specified by the Input Port and Input Label fields, then the
  resulting output branch will have multiple input branches. If
  multiple point-to-point connections share the same output branch
  the result will be a multipoint-to-point connection.

  If the connection specified by the Input Port and Input Label
  fields already exists, and the Bidirectional Flag in the Flags
  field is set, a failure response must be returned indicating:


Worster, et. al.                                              Page 25]

Internet Draft     General Switch Management Protocol        Feb 1999

  "Only point-to-point bidirectional connections may be
  established."

  It should be noted that different switches support multicast in
  different ways. There will be a limit to the total number of
  point- to-multipoint connections any switch can support, and
  possibly a limit on the maximum number of branches that a point-
  to-multipoint connection may specify. Some switches also impose a
  limit on the number of different Label values that may be assigned
  to the output branches of a point-to-multipoint connection. Many
  switches are incapable of supporting more than a single branch of
  any particular point-to-multipoint connection on the same output
  port. Specific failure codes are defined for some of these
  conditions.

      ATM specific procedures:

         To request an ATM virtual path connection the ATM Virtual
         Path Connection (VPC) Add Branch message is:

            Message Type = 26

         An ATM virtual path connection can only be established
         between ATM ports, i.e. ports with the "ATM" Label Type
         attribute. If an ATM VPC Add Branch message is received and
         either the switch input port specified by the Input Port
         field or the switch output port specified by the Output
         Port field is not an ATM port, a failure response message
         must be returned indicating, "Virtual path switching is not
         supported on non-ATM ports."

         If an ATM VPC Add Branch message is received and the switch
         input port specified by the Input Port field does not
         support virtual path switching, a failure response message
         must be returned indicating, "Virtual path switching is not
         supported on this input port."

         If an ATM virtual path connection already exists on the
         virtual path specified by the Input Port and Input VPI
         fields, a failure response message must be returned
         indicating, "Attempt to add a virtual channel connection
         branch to an existing virtual path connection." For the VPC
         Add Branch message, if a virtual channel connection already
         exists on any of the virtual channels within the virtual
         path specified by the Input Port and Input VPI fields, a
         failure response message must be returned indicating,
         "Attempt to add a virtual path connection branch to an
         existing virtual channel connection."



Worster, et. al.                                              Page 26]

Internet Draft     General Switch Management Protocol        Feb 1999

4.3  Delete Tree Message

   The Delete Tree message is a connection management message used to
   delete an entire connection. All remaining branches of the
   connection are deleted. A connection is specified by the Input
   Port and Input Label fields. The Output Port and Output Label
   fields are not used in this message. The Delete Tree message is:

      Message Type = 18

   If the Result field of the request message is "AckAll" a success
   response message must be sent upon successful deletion of the
   specified connection. The success message must not be sent until
   the delete operation has been completed and if possible, not until
   all data on the connection, queued for transmission, has been
   transmitted. The Number of Branches field is not used in either
   the request or response messages of the Delete Tree message.

4.4  Verify Tree Message

   The Verify Tree message has been removed from this version of
   GSMP. Its function has been replaced by the Number of Branches
   field in the success response to the Add Branch message which
   contains the number of branches on a connection after successful
   completion of an add branch operation.

      Message Type = 19 is reserved.

   If a request message is received with Message Type = 19 a failure
   response must be returned with the Code field indicating: "The
   specified request is not implemented in this version of the
   protocol."

4.5  Delete All Message

   The Delete All message is a connection management message used to
   delete all connections on a switch input port. All connections
   that arrive at the specified input port must be deleted. On
   completion of the operation all dynamically assigned Label values
   for the specified port must be unassigned, i.e. there must be no
   connections established in the Label space that GSMP controls on
   this port. The Input Label and Output Label fields are not used in
   this message. The Delete All message is:

      Message Type = 20

   If the Result field of the request message is "AckAll" a success
   response message must be sent upon completion of the operation.
   The Number of Branches field is not used in either the request or


Worster, et. al.                                              Page 27]

Internet Draft     General Switch Management Protocol        Feb 1999

   response messages of the Delete All message. The success response
   message must not be sent until the operation has been completed.

   The following failure response messages may be returned to a
   Delete All request.

          The specified request is not implemented on this switch.

          One or more of the specified ports does not exist.

          Invalid Port Session Number.

   If any field in a Delete All message not covered by the above
   failure codes is invalid, a failure response must be returned
   indicating: "Invalid request message." Else, the delete all
   operation must be completed successfully and a success message
   returned. No other failure messages are permitted.

4.6  Delete Branches Message

   The Delete Branches message is a connection management message
   used to request one or more delete branch operations. Each delete
   branch operation deletes a branch of a channel, or in the case of
   the last branch of a connection, it deletes the connection. The
   Delete Branches message is:

      Message Type = 17

   The request message has the following format:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Version    | Message Type  |    Result     |     Code      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Transaction Identifier                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Reserved            |      Number of Elements       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                    Delete Branch Elements                     ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Number of Elements
             Specifies the number of Delete Branch Elements to follow
             in the message. The number of Delete Branch Elements in
             a Delete Branches message must not cause the packet



Worster, et. al.                                              Page 28]

Internet Draft     General Switch Management Protocol        Feb 1999

             length to exceed the maximum transmission unit defined
             by the encapsulation.

  Each Delete Branch Element specifies an output branch to be
  deleted and has the following structure:

  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                      Port Session Number                      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                          Input Port                           |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |x x|I|O|                                                       |
  +-+-+-+-+                  Input Label                          ~
  ~                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                          Output Port                          |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  | Error |                                                       |
  +-+-+-+-+                  Output Label                         ~
  ~                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

  I: Input Extension Label
             The Input Extension Label flag if zero indicates that
             the Input Label field is a 28 bit field. If the Input
             Extension Label flag is set then the Input Label field
             is a 60 bit field structured as a 28 bit first level
             label field followed by a 32 bit second level label
             field.

  O: Output Extension Label
             The Output Extension Label flag if zero indicates that
             the Output Label field is a 28 bit field. If the Output
             Extension Label flag is set then the Output Label field
             is a 60 bit field structured as a 28 bit first level
             label field followed by a 32 bit second level label
             field.

  Error
             Is used to return a failure code indicating the reason
             for the failure of a specific Delete Branch Element in a
             Delete Branches failure response message. The Error
             field is not used in the request message and must be set
             to zero. A value of zero is used to indicate that the
             delete operation specified by this Delete Branch Element
             was successful. Values for the other failure codes are
             specified in Section 3.2, "Failure Response Messages."




Worster, et. al.                                              Page 29]

Internet Draft     General Switch Management Protocol        Feb 1999

                All other fields of the Delete Branch Element have the
                same definition as specified for the other connection
                management messages.

   In each Delete Branch Element, a connection is specified by the
   Input Port and Input Label fields. The specific branch to be
   deleted is indicated by the Output Port and Output Label fields.

   If the Result field of the Delete Branches request message is
   "AckAll" a success response message must be sent upon successful
   deletion of the branches specified by all of the Delete Branch
   Elements. The success response message must not be sent until all
   of the delete branch operations have been completed. The success
   response message is only sent if all of the requested delete
   branch operations were successful. No Delete Branch Elements are
   returned in a Delete Branches success response message and the
   Number of Elements field must be set to zero.

   If there is a failure in any of the Delete Branch Elements a
   Delete Branches failure response message must be returned. The
   Delete Branches failure response message is a copy of the request
   message with the Code field of the entire message set to, "Failure
   specific to the particular message type," and the Error field of
   each Delete Branch Element indicating the result of each requested
   delete operation. A failure in any of the Delete Branch Elements
   must not interfere with the processing of any other Delete Branch
   Elements.

4.7  Move Branch Message

   The Move Branch message is used to move a branch of an existing
   connection from its current output port label to a new output port
   label in a single atomic transaction. The Move Branch connection
   management message has the following format for both request and
   response messages:














Worster, et. al.                                              Page 30]

Internet Draft     General Switch Management Protocol        Feb 1999


   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Version    | Message Type  |    Result     |     Code      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                    Transaction Identifier                     |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                      Port Session Number                      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                           Input Port                          |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |x x|E|x|                                                       |
  +-+-+-+-+                  Input Label                          ~
  ~                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                        Old Output Port                        |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |x x|E|x|                                                       |
  +-+-+-+-+                Old Output Label                       ~
  ~                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                        New Output Port                        |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |QMS|E|x|                                                       |
  +-+-+-+-+                New Output Label                       ~
  ~                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |      Number of Branches       |       Service Selector        |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


  The E, QMS and Service Selector fields are as defined in the Add
  Branch message.

  The Move Branch message is a connection management message used to
  move a single output branch of connection from its current output
  port and Output Label, to a new output port and Output Label on
  the same connection. None of the connection's other output
  branches are modified. When the operation is complete the original
  Output Label on the original output port will be deleted from the
  connection.

  The Move Branch message is:

     Message Type = 22

  For the Move Branch message, if the connection specified by the
  Input Port and Input Label fields already exists, and the output


Worster, et. al.                                              Page 31]

Internet Draft     General Switch Management Protocol        Feb 1999

  branch specified by the Old Output Port and Old Output Label
  fields exists as a branch on that connection, the output branch
  specified by the New Output Port and New Output Label fields is
  added to the connection and the branch specified by the Old Output
  Port and Old Output Label fields is deleted. If the Result field
  of the request message is "AckAll" a success response message must
  be sent upon successful completion of the operation. The success
  response message must not be sent until the Move Branch operation
  has been completed.

  For the Move Branch message, if the connection specified by the
  Input Port and Input Label fields already exists, but the output
  branch specified by the Old Output Port and Old Output Label
  fields does not exist as a branch on that connection, a failure
  response must be returned with the Code field indicating, "The
  specified branch does not exist."

  For the Move Branch message, if the connection specified by the
  Input Port and Input Label fields already exists, and the output
  branch specified by the Old Output Port and Old Output Label
  fields exists as a branch on that connection, the output branch
  specified by the New Output Port and New Output Label fields is
  added to the connection and the branch specified by the Old Output
  Port and Old Output Label fields is deleted. If the Result field
  of the request message is "AckAll" a success response message must
  be sent upon successful completion of the operation. The success
  response message must not be sent until the Move Branch operation
  has been completed.

      ATM Specific Procedures:

         The ATM VPC Move Branch message is a connection management
         message used to move a single output branch of a virtual
         path connection from its current output port and output
         VPI, to a new output port and output VPI on the same
         virtual channel connection. None of the other output
         branches are modified. When the operation is complete the
         original output VPI on the original output port will be
         deleted from the connection.

         The VPC Move Branch message is:

            Message Type = 27

         For the VPC Move Branch message, if the virtual path
         connection specified by the Input Port and Input VPI fields
         already exists, and the output branch specified by the Old
         Output Port and Old Output VPI fields exists as a branch on
         that connection, the output branch specified by the New


Worster, et. al.                                              Page 32]

Internet Draft     General Switch Management Protocol        Feb 1999

          Output Port and New Output VPI fields is added to the
          connection and the branch specified by the Old Output Port
          and Old Output VPI fields is deleted. If the Result field
          of the request message is "AckAll" a success response
          message must be sent upon successful completion of the
          operation. The success response message must not be sent
          until the Move Branch operation has been completed.

          For the VPC Move Branch message, if the virtual path
          connection specified by the Input Port and Input VPI fields
          already exists, but the output branch specified by the Old
          Output Port and Old Output VPI fields does not exist as a
          branch on that connection, a failure response must be
          returned with the Code field indicating, "The specified
          branch does not exist."

          If the virtual channel connection specified by the Input
          Port and Input Label fields; or the virtual path connection
          specified by the Input Port and  Input VPI fields; does not
          exist, a failure response must be returned with the Code
          field indicating, "The specified connection does not
          exist."

          If the output branch specified by the New Output Port, New
          Output VPI, and New Output VCI fields for a virtual channel
          connection; or the output branch specified by the New
          Output Port and New Output VPI fields for a virtual path
          connection; is already in use by any connection other than
          that specified by the Input Port and Input Label fields
          then the resulting output branch will have multiple input
          branches. If multiple point-to-point connections share the
          same output branch the result will be a multipoint-to-point
          connection. If multiple point-to-multipoint trees share the
          same output branches the result will be a multipoint-to-
          multipoint connection.


5.  Port Management Messages

5.1  Port Management Message

   The Port Management message allows a port to be brought into
   service, taken out of service, looped back, reset, or the transmit
   cell rate changed. Only the Bring Up and the Reset Input Port
   functions change the connection state (established connections) on
   the input port. Only the Bring Up function changes the value of
   the Port Session Number. If the Result field of the request
   message is "AckAll" a success response message must be sent upon
   successful completion of the operation. The success response


Worster, et. al.                                              Page 33]

Internet Draft     General Switch Management Protocol        Feb 1999

  message must not be sent until the operation has been completed.
  The Port Management Message is:

     Message Type = 32

  The Port Management message has the following format for the
  request and success response messages:

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Version    | Message Type  |    Result     |     Code      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                    Transaction Identifier                     |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                             Port                              |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                      Port Session Number                      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                     Event Sequence Number                     |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |  Event Flags  |   Duration    |          Function             |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                      Transmit Cell Rate                       |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

  Event Sequence Number
             In the success response message gives the current value
             of the Event Sequence Number of the switch port
             indicated by the Port field. The Event Sequence Number
             is set to zero when the port is initialized. It is
             incremented by one each time the port detects an
             asynchronous event that the switch would normally report
             via an Event message. If the Event Sequence Number in
             the success response differs from the Event Sequence
             Number of the most recent Event message received for
             that port, events have occurred that were not reported
             via an Event message. This is most likely to be due to
             the flow control that restricts the rate at which a
             switch can send Event messages for each port. In the
             request message this field is not used.

  Event FlagsField in the request message is used to reset the Event
             Flags in the switch port indicated by the Port field.
             Each Event Flag in a switch port corresponds to a type
             of Event message. When a switch port sends an Event
             message it sets the corresponding Event Flag on that
             port. The port is not permitted to send another Event


Worster, et. al.                                              Page 34]

Internet Draft     General Switch Management Protocol        Feb 1999

             message of the same type until the Event Flag has been
             reset. If the Function field in the request message is
             set to "Reset Event Flags," for each bit that is set in
             the Event Flags field, the corresponding Event Flag in
             the switch port is reset.

            The Event Flags field is only used in a request message
            with the Function field set to "Reset Event Flags." For
            all other values of the Function field, the Event Flags
            field is not used. In the success response message the
            Event Flags field must be set to the current value of
            the Event Flags for the port, after the completion of
            the operation specified by the request message, for all
            values of the Function field. Setting the Event Flags
            field to all zeros in a "Reset Event Flags" request
            message allows the controller to obtain the current
            state of the Event Flags and the current Event Sequence
            Number of the port without changing the state of the
            Event Flags.

            The correspondence between the types of Event message
            and the bits of the Event Flags field is as follows:

                0 1 2 3 4 5 6 7
               +-+-+-+-+-+-+-+-+
               |U|D|I|N|Z|x x x|
               +-+-+-+-+-+-+-+-+

               U: Port Up          Bit 0, (most significant bit)
               D: Port Down        Bit 1,
               I: Invalid Label  Bit 2,
               N: New Port         Bit 3,
               Z: Dead Port        Bit 4,
               x: Unused           Bits 5--7.

  Duration Is the length of time, in seconds, that any of the
             loopback states remain in operation. When the duration
             has expired the port will automatically be returned to
             service. If another Port Management message is received
             for the same port before the duration has expired, the
             loopback will continue to remain in operation for the
             length of time specified by the Duration field in the
             new message. The Duration field is only used in request
             messages with the Function field set to Internal
             Loopback, External Loopback, or Bothway Loopback.

  Function Specifies the action to be taken. The specified action

Worster, et. al.                                              Page 35]

Internet Draft     General Switch Management Protocol        Feb 1999

             will be taken regardless of the current status of the
             port (Available, Unavailable, or any Loopback state). If
             the specified function requires a new Port Session
             Number to be generated, the new Port Session Number must
             be returned in the success response message. The defined
             values of the Function field are:

            Bring Up:
                 Function = 1. Bring the port into service. All
                 connections that arrive at the specified input port
                 must be deleted and a new Port Session Number must
                 be selected using some form of random number. On
                 completion of the operation all dynamically
                 assigned Label values for the specified input port
                 must be unassigned, i.e. no connections will be
                 established in the Label space that GSMP controls
                 on this input port. The Port Status of the port
                 afterwards will be Available.

            Take Down:
                 Function = 2. Take the port out of service. Any
                 cells received at this port will be discarded. No
                 cells will be transmitted from this port. The Port
                 Status of the port afterwards will be Unavailable.

                 The behavior is undefined if the port is taken down
                 over which the GSMP session that controls the
                 switch is running. (In this case the most probable
                 behavior would be for the switch either to ignore
                 the message or to terminate the current GSMP
                 session and to initiate another session, possibly
                 with the backup controller, if any.) The correct
                 method to reset the link over which GSMP is running
                 is to issue an RSTACK message in the adjacency
                 protocol.

            Internal Loopback:
                 Function = 3. Cells arriving at the output port
                 from the switch fabric are looped through to the
                 input port to return to the switch fabric. All of
                 the ATM functions of the input port above the
                 physical layer, e.g. header translation, are
                 performed upon the looped back cells. The Port
                 Status of the port afterwards will be Internal
                 Loopback.

            External Loopback:
                 Function = 4. Cells arriving at the input port from
                 the external communications link are immediately


Worster, et. al.                                              Page 36]

Internet Draft     General Switch Management Protocol        Feb 1999

                 looped back to the communications link at the
                 physical layer without entering the input port.
                 None of the ATM functions of the input port above
                 the physical layer are performed upon the looped
                 back cells. The Port Status of the port afterwards
                 will be External Loopback.

            Bothway Loopback:
                 Function = 5. Both internal and external loopback
                 are performed. The Port Status of the port
                 afterwards will be Bothway Loopback.

            Reset Input Port:
                 Function = 6. All connections that arrive at the
                 specified input port must be deleted and the input
                 and output port hardware re-initialized. On
                 completion of the operation all dynamically
                 assigned Label values for the specified input port
                 must be unassigned, i.e. no connections will be
                 established in the Label space that GSMP controls
                 on this input port. The range of VPIs and VCIs that
                 may be controlled by GSMP on this port will be set
                 to the default values specified in the Port
                 Configuration message. The transmit cell rate of
                 the output port must be set to its default value.
                 The Port Session Number is not changed by the Reset
                 Input Port function. The Port Status of the port
                 afterwards will be Unavailable.

            Reset Event Flags:
                 Function = 7. For each bit that is set in the Event
                 Flags field, the corresponding Event Flag in the
                 switch port must be reset. The Port Status of the
                 port is not changed by this function.

            Set Transmit Cell Rate:
                 Function = 8. Sets the transmit cell rate of the
                 output port as close as possible to the rate
                 specified in the Transmit Cell Rate field. In the
                 success response message the Transmit Cell Rate
                 must indicate the actual transmit cell rate of the
                 output port. If the transmit cell rate of the
                 requested output port cannot be changed, a failure
                 response must be returned with the Code field
                 indicating: "The transmit cell rate of this output
                 port cannot be changed." If the transmit cell rate
                 of the requested output port can be changed, but
                 the value of the Transmit Cell Rate field is beyond
                 the range of acceptable values, a failure response


Worster, et. al.                                              Page 37]

Internet Draft     General Switch Management Protocol        Feb 1999

                  must be returned with the Code field indicating:
                  "Requested transmit cell rate out of range for this
                  output port." In the failure response message the
                  Transmit Cell Rate must contain the same value as
                  contained in the request message that caused the
                  failure. The transmit cell rate of the output port
                  is not changed by the Bring Up, Take Down, or any
                  of the Loopback functions. It is returned to the
                  default value by the Reset Input Port function.

        Transmit Cell Rate
             This field is only used in request and success response
             messages with the Function field set to "Set Transmit
             Cell Rate." It is used to set the output cell rate of
             the output port. It is specified in cells/s. If the
             Transmit Cell Rate field contains the value 0xFFFFFFFF
             the transmit cell rate of the output port should be set
             to the highest valid value.

5.2  Label Range Message

   [Editor's note: this message is ATM specific. It needs to be
   decided if we need such flexibility for non ATM ports. If so, we
   could either generalise this message or add similar messages for
   non ATM ports.]

   The default label range, Min VPI to Max VPI and Min VCI to Max
   VCI, is specified for each port by the Port Configuration or the
   All Ports Configuration messages. When the protocol is
   initialized, before the transmission of any Label Range messages,
   the label range of each port will be set to the default label
   range. (The default label range is dependent upon the switch
   design and configuration and is not specified by the GSMP
   protocol.) The Label Range message allows the range of VPIs
   supported by a specified port, or the range of VCIs supported by a
   specified VPI on a specified port, to be changed. Each switch port
   must declare whether it supports the Label Range message in the
   Port Configuration or the All Ports Configuration messages. The
   Label Range message is:

      Message Type = 33

   The Label Range message has the following format for the request
   and success response messages:







Worster, et. al.                                              Page 38]

Internet Draft     General Switch Management Protocol        Feb 1999


   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Version    | Message Type  |    Result     |     Code      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                    Transaction Identifier                     |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                             Port                              |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                      Port Session Number                      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |Q|V|x x|      Min VPI          |x x x x|       Max VPI         |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |            Min VCI            |           Max VCI             |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |        Remaining VPIs         |        Remaining VCIs         |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

  Flags

       Q: Query
              If the Query flag is set in a request message, the
              switch must respond with the current range of valid
              VPIs, or the current range of valid VCIs on a specified
              VPI, according to the Label flag. The current label
              range is not changed by a request message with the Query
              flag set. If the Query flag is zero, the message is
              requesting a label change operation.

       V: Label
              If the Label flag is set, the message refers to a range
              of VPIs only. The Min VCI and Max VCI fields are unused.
              If the Label flag is zero the message refers to a range
              of VCIs on either one VPI or on a range of VPIs.

       x: Unused

  Min VPI
   Max VPI
              Specify a range of VPI values, Min VPI to Max VPI
              inclusive. A single VPI may be specified with a Min VPI
              and a Max VPI having the same value. In a request
              message, if the value of the Max VPI field is less than
              or equal to the value of the Min VPI field, the
              requested range is a single VPI with a value equal to
              the Min VPI field. Zero is a valid value. In a request
              message, if the Query flag is set, and the Label flag is
              zero, the Max VPI field specifies a single VPI and the


Worster, et. al.                                              Page 39]

Internet Draft     General Switch Management Protocol        Feb 1999

              Min VPI field is not used. The maximum valid value of
              these fields for both request and response messages is
              0xFFF.

  Min VCI
   Max VCI
              Specify a range of VCI values, Min VCI to Max VCI
              inclusive. A single VCI may be specified with a Min VCI
              and a Max VCI having the same value. In a request
              message, if the value of the Max VCI field is less than
              or equal to the value of the Min VCI field, the
              requested range is a single VCI with a value equal to
              the Min VCI field. Zero is a valid value. (However,
              VPI=0, VCI=0 is not available as a virtual channel
              connection as it is used as a special value in ATM to
              indicate an unassigned cell.)

  Remaining VPIs
   Remaining VCIs
              These fields are unused in the request message. In the
              success response message and in the failure response
              message these fields give the maximum number of
              remaining VPIs and VCIs that could be requested for
              allocation on the specified port (after completion of
              the requested operation in the case of the success
              response). It gives the switch controller an idea of how
              many VPIs and VCIs it could request. The number given is
              the maximum possible given the constraints of the switch
              hardware. There is no implication that this number of
              VPIs and VCIs is available to every switch port.

  If the Query flag and the Label flag are set in the request
  message, the switch must reply with a success response message
  containing the current range of valid VPIs that are supported by
  the port. The Min VPI and Max VPI fields are not used in the
  request message.

  If the Query flag is set and the Label flag is zero in the request
  message, the switch must reply with a success response message
  containing the current range of valid VCIs that are supported by
  the VPI specified by the Max VPI field. If the requested VPI is
  invalid, a failure response must be returned indicating: "One or
  more of the specified input VPIs is invalid." The Min VPI field is
  not used in either the request or success response messages.

  If the Query flag is zero and the Label flag is set in the request
  message, the Min VPI and Max VPI fields specify the new range of
  VPIs to be allocated to the input port specified by the Port



Worster, et. al.                                              Page 40]

Internet Draft     General Switch Management Protocol        Feb 1999

  field. Whatever the range of VPIs previously allocated to this
  port it should be increased or decreased to the specified value.

  If the Query flag and the Label flag are zero in the request
  message, the Min VCI and Max VCI fields specify the range of VCIs
  to be allocated to each of the VPIs specified by the VPI range.
  Whatever the range of VCIs previously allocated to each of the
  VPIs within the specified VPI range on this port, it should be
  increased or decreased to the specified value. The allocated VCI
  range must be the same on each of the VPIs within the specified
  VPI range.

  The success response to a Label Range message requesting a change
  of label range is a copy of the request message with the Remaining
  VPIs and Remaining VCIs fields updated to the new values after the
  Label Range operation.

  If the switch is unable to satisfy a request to change the VPI
  range, it must return a failure response message with the Code
  field set to "Cannot support requested VPI range." In this failure
  response message the switch must use the Min VPI and Max VPI
  fields to suggest a VPI range that it would be able to satisfy.

  If the switch is unable to satisfy a request to change the VCI
  range on all VPIs within the requested VPI range, it must return a
  failure response message with the Code field set to "Cannot
  support requested VCI range on all requested VPIs." In this
  failure response message the switch must use the Min VPI, Max VPI,
  Min VCI, and Max VCI fields to suggest a VPI and VCI range that it
  would be able to satisfy.

  In all other failure response messages for the label range
  operation the switch must return the values of Min VPI, Max VPI,
  Min VCI, and Max VCI from the request message.

  While switches can typically support all 256 or 4096 VPIs the VCI
  range that can be supported is often more constrained. Often the
  Min VCI must be 0 or 32. Typically all VCIs within a particular
  VPI must be contiguous. The hint in the failure response message
  allows the switch to suggest a label range that it could satisfy
  in view of its particular architecture.

  While the Label Range message is defined to specify both a range
  of VPIs and a range of VCIs within each VPI, the most likely use
  is to change either the VPI range or the range of VCIs within a
  single VPI. It is possible for a VPI to be valid but to be
  allocated no valid VCIs. Such a VPI could be used for a virtual
  path connection but to support virtual channel connections it
  would need to be allocated a range of VCIs.


Worster, et. al.                                              Page 41]

Internet Draft     General Switch Management Protocol        Feb 1999

   A Label Range request message may be issued regardless of the Port
   Status or the Line Status of the target switch port. If the Port
   field of the request message contains an invalid port (a port that
   does not exist or a port that has been removed from the switch) a
   failure response message must be returned with the Code field set
   to, "One or more of the specified ports does not exist."


6.  State and Statistics Messages

   The state and statistics messages permit the controller to request
   the values of various hardware counters associated with the switch
   input and output ports and connections. They also permit the
   controller to request the connection state of a switch input port.
   The Connection Activity message is used to determine whether one
   or more specific connections have recently been carrying traffic.
   The Statistics message is used to query the various port and
   connection traffic and error counters.

   The Report Connection State message is used to request an input
   port to report the connection state for a single connection, a
   single ATM virtual path connection, or for the entire input port.

6.1  Connection Activity Message

   The Connection Activity message is used to determine whether one
   or more specific connections have recently been carrying traffic.
   The Connection Activity message contains one or more Activity
   Records. Each Activity Record is used to request and return
   activity information concerning a single connection. Each
   connection is specified by its input port and Input Label which
   are specified in the Input Port and Input Label fields of each
   Activity Record.

   Two forms of activity detection are supported. If the switch
   supports per connection traffic accounting, the current value of
   the traffic counter for each specified connection must be
   returned. The units of traffic counted are not specified but will
   typically be either cells or frames. The controller must compare
   the traffic counts returned in the message with previous values
   for each of the specified connections to determine whether each
   connection has been active in the intervening period. If the
   switch does not support per connection traffic accounting, but is
   capable of detecting per connection activity by some other
   unspecified means, the result may be indicated for each connection
   using the Flags field. The Connection Activity message is:

      Message Type = 48



Worster, et. al.                                              Page 42]

Internet Draft     General Switch Management Protocol        Feb 1999

  The Connection Activity request and success response messages have
  the following format:

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Version    | Message Type  |    Result     |     Code      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                    Transaction Identifier                     |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |       Number of Records       |           Reserved            |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  ~                       Activity Records                        ~
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

  Number of Records
             Field specifies the number of Activity Records to
             follow. The number of Activity records in a single
             Connection Activity message must not cause the packet
             length to exceed the maximum transmission unit defined
             by the encapsulation.

  Each Activity Record has the following format:

  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                          Input Port                           |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |V|C|A|E|                                                       |
  +-+-+-+-+                  Input Label                          ~
  ~                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  +                         Traffic Count                         +
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

  Input Port
             Identifies the port number of the input port on which
             the connection of interest arrives in order to identify
             the connection (regardless of whether the traffic count
             for the connection is maintained on the input port or
             the output port).
   Input Label
             Fields identify the specific connection for which
             statistics are being requested.

  Flags


Worster, et. al.                                              Page 43]

Internet Draft     General Switch Management Protocol        Feb 1999

       V: Valid Record
            In the success response message the Valid Record flag is
            used to indicate an invalid Activity Record. The flag
            must be zero if any of the fields in this Activity
            Record are invalid, if the input port specified by the
            Input Port field does not exist, or if the specified
            connection does not exist. If the Valid Record flag is
            zero in a success response message, the Counter flag,
            the Activity flag, and the Traffic Count field are
            undefined. If the Valid Record flag is set, the Activity
            Record is valid, and the Counter and Activity flags are
            valid. The Valid Record flag is not used in the request
            message.

       C: Counter
            In a success response message, if the Valid Record flag
            is set, the Counter flag, if zero, indicates that the
            value in the Traffic Count field is valid. If set, it
            indicates that the value in the Activity flag is valid.
            The Counter flag is not used in the request message.

       A: Activity
            In a success response message, if the Valid Record and
            Counter flags are set, the Activity flag, if set,
            indicates that there has been some activity on this
            connection since the last Connection Activity message
            for this connection. If zero, it indicates that there
            has been no activity on this connection since the last
            Connection Activity message for this connection. The
            Activity flag is not used in the request message.

       E: Extension Label
            The Extension Label flag if zero indicates that the
            Input Label field is a 28 bit field. If the Extension
            Label flag is set then the Input Label field is a 60 bit
            field structured as a 28 bit first level label field
            followed by a 32 bit second level label field.

  Traffic Count
             Field is not used in the request message. In the success
             response message, if the switch supports per connection
             traffic counting, the Traffic Count field must be set to
             the value of a free running, connection specific, 64-bit
             traffic counter counting traffic flowing across the
             specified connection. The value of the traffic counter
             is not modified by reading it. If per connection traffic
             counting is supported, the switch must report the
             Connection Activity result using the traffic count
             rather than using the Activity flag.


Worster, et. al.                                              Page 44]

Internet Draft     General Switch Management Protocol        Feb 1999

   The format of the failure response is the same as the request
   message with the Number of Records field set to zero and no
   Connection Activity records returned in the message. If the switch
   is incapable of detecting per connection activity, a failure
   response must be returned indicating, "The specified request is
   not implemented on this switch."

6.2  Statistics Messages

   The Statistics messages are used to query the various port and
   connection and error counters.

   The Statistics request messages have the following format:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Version    | Message Type  |    Result     |     Code      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Transaction Identifier                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                             Port                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |x x x|E|                                                       |
   +-+-+-+-+                    Label                              ~
   ~                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   E: Extension Label
              The Extension Label flag if zero indicates that the
              Label field is a 28 bit field. If the Extension Label
              flag is set then the Label field is a 60 bit field
              structured as a 28 bit first level label field followed
              by a 32 bit second level label field.

   Label
              The Label Field identifies the specific connection for
              which statistics are being requested.

   The success response for the Statistics message has the following
   format:









Worster, et. al.                                              Page 45]

Internet Draft     General Switch Management Protocol        Feb 1999


   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Version    | Message Type  |    Result     |     Code      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                    Transaction Identifier                     |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                             Port                              |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |x x x|E|                                                       |
  +-+-+-+-+                    Label                              ~
  ~                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  +                       Input Cell Count                        +
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  +                       Input Frame Count                       +
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  +                    Input Cell Discard Count                   +
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  +                   Input Frame Discard Count                   +
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  +                      ATM HEC Error Count                      +
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  +                  Input Invalid Label Count                    +
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  +                       Output Cell Count                       +
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  +                      Output Frame Count                       +
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  +                   Output Cell Discard Count                   +
  |                                                               |


Worster, et. al.                                              Page 46]

Internet Draft     General Switch Management Protocol        Feb 1999

  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  +                  Output Frame Discard Count                   +
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


  EPort
   Label
             Fields are the same as those of the request message.

  Input Cell Count
   Output Cell Count
             Give the value of a free running 64-bit counter counting
             cells arriving at the input or departing from the output
             respectively.

  Input Frame Count
   Output Frame Count
             Give the value of a free running 64-bit counter counting
             frames (packets) arriving at the input or departing from
             the output respectively.

  Input Cell Discard Count
   Output Cell Discard Count
             Give the value of a free running 64-bit counter counting
             cells discarded due to queue overflow on an input port
             or on an output port respectively.

  Input Frame Discard Count
   Output Frame Discard Count
             Give the value of a free running 64-bit counter counting
             frames discarded due to congestion on an input port or
             on an output port respectively.

  ATM HEC Error Count
             Gives the value of a free running 64-bit counter
             counting ATM cells discarded due to header checksum
             errors on arrival at an input port.

  Invalid Label Count
             Gives the value of a free running 64-bit counter
             counting cells or frames discarded because their Label
             is invalid on arrival at an input port.






Worster, et. al.                                              Page 47]

Internet Draft     General Switch Management Protocol        Feb 1999

6.2.1  Port Statistics Message

   The Port Statistics message requests the statistics for the switch
   port specified in the Port field. The contents of the Label field
   in the Port Statistics request message is ignored. All of the
   count fields in the success response message refer to per-port
   counts regardless of the connection to which the cells or frames
   belong. Any of the count fields in the success response message
   not supported by the port must be set to zero. The Port Statistics
   message is:

      Message Type = 49

6.2.2  Connection Statistics Message

   The Connection Statistics message requests the statistics for the
   connection specified in the Label field that arrives on the switch
   input port specified in the Port field. All of the count fields in
   the success response message refer only to the specified
   connection. The ATM HEC Error Count and Invalid Label Count fields
   are not connection specific and must be set to zero. Any of the
   other count fields not supported on a per connection basis must be
   set to zero in the success response message. The Connection
   Statistics message is:

      Message Type = 50

6.2.3  QoS Class Statistics Message

   The QoS Class Statistics message is not supported in this version
   of GSMP.

      Message Type = 51 is reserved.

6.3  Report Connection State Message

   The Report Connection State message is used to request an input
   port to report the connection state for a single connection, a
   single ATM virtual path connection, or for the entire input port.
   The Report Connection State message is:

      Message Type = 52

   The Report Connection State request message has the following
   format:






Worster, et. al.                                              Page 48]

Internet Draft     General Switch Management Protocol        Feb 1999


   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Version    | Message Type  |    Result     |     Code      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                    Transaction Identifier                     |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                          Input Port                           |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |A|V|x|E|                                                       |
  +-+-+-+-+                  Input Label                          ~
  ~                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

  Input PortIdentifies the port number of the input port for which
             the connection state is being requested.

  Flags

       A: All Connections
            If the All Connections flag is set, the message requests
            the connection state for all connections that arrive at
            the input port specified by the Input Port field. In
            this case the Input Label field and the Label flag are
            unused.

       V: ATM VPI
            The ATM VPI flag may only be set for ports with
            PortType=ATM. If the switch recieves a Report Connection
            State message in which the ATM VPI flag set and in which
            the input port specified by the Input Port field does
            not have PortType=ATM, the switch must return an Error
            Message "xxxxxx".

            If the All Connections flag is zero and the ATM VPI flag
            is also zero, the message requests the connection state
            for the connection that arrives at the input port
            specified by the Port and Input Label fields.

            ATM specific procedures:

               If the All Connections flag is zero and the ATM VPI
               flag is set and the input port specified by the Input
               Port field has LabelType=ATM, the message requests
               the connection state for the virtual path connection
               that arrives at the input port specified by the Input
               Port and Input VPI fields. If the specified Input VPI


Worster, et. al.                                              Page 49]

Internet Draft     General Switch Management Protocol        Feb 1999

               identifies an ATM virtual path connection (i.e. a
               single switched virtual path) the state for that
               connection is requested. If the specified Input VPI
               identifies a virtual path containing virtual channel
               connections, the message requests the connection
               state for all virtual channel connections that belong
               to the specified virtual path.

       x: Unused.

       E: Extension Label
            The Extension Label flag if zero indicates that the
            Input Label field is a 28 bit field. If the Extension
            Label flag is set then the Input Label field is a 60 bit
            field structured as a 28 bit first level label field
            followed by a 32 bit second level label field.

  Input Label
             Field identifies the specific connection for which
             connection state is being requested. For a virtual path
             connection (switched as a single virtual path
             connection) or a virtual path (switched as one or more
             virtual channel connections within the virtual path) the
             Input VCI field is not used. For requests that do not
             require a virtual path connection or virtual channel
             connection to be specified, the Input VPI and Input VCI
             fields are not used.

  The Report Connection State success response message has the
  following format:

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Version    | Message Type  |    Result     |     Code      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                    Transaction Identifier                     |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                          Input Port                           |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                       Sequence Number                         |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  ~                       Connection Records                      ~
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

  Input PortIs the same as the Input Port field in the request

Worster, et. al.                                              Page 50]

Internet Draft     General Switch Management Protocol        Feb 1999

             message. It identifies the port number of the input port
             for which the connection state is being reported.

  Sequence Number
             In the case that the requested connection state cannot
             be reported in a single success response message, each
             successive success response message in reply to the same
             request message must increment the Sequence Number. The
             Sequence Number of the first success response message,
             in response to a new request message, must be zero.

  Connection Records
             Each success response message must contain one or more
             Connection Records. Each Connection Record specifies a
             single point-to-point or point-to-multipoint connection.
             The number of Connection Records in a single Report
             Connection State success response must not cause the
             packet length to exceed the maximum transmission unit
             defined by the encapsulation. If the requested
             connection state cannot be reported in a single success
             response message, multiple success response messages
             must be sent. All success response messages that are
             sent in response to the same request message must have
             the same Input Port and Transaction Identifier fields as
             the request message. A single Connection Record must not
             be split across multiple success response messages. The
             More flag of the last Connection Record in a success
             response message indicates whether the response to the
             request has been completed or whether one or more
             further success response messages should be expected in
             response to the same request message.

  Each Connection Record has the following format:

  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |A|V|P|M|       Input VPI       |          Input VCI            |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  ~                      Output Branch Records                    ~
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

  [Editor's note: help, where do i put the extension label flag?]

  Flags

       A: All Connections
       V: ATM VPI
            For the first Connection Record in each success response


Worster, et. al.                                              Page 51]

Internet Draft     General Switch Management Protocol        Feb 1999

            message the All Connections and the ATM VPI flags must
            be the same as those of the request message. For
            successive Connection Records in the same success
            response message these flags are not used.

       P: ATM VPC
            The ATM VPC flag, if set and only if set, indicates that
            the Connection Record refers to an ATM virtual path
            connection.

       M: More
            If the More flag is set, it indicates that another
            Connection Record, in response to the same request
            message, will follow either in the same success response
            message or in a successive success response message. If
            the More flag is zero it indicates that this is the last
            Connection record in this success response message and
            that no further success response messages will be sent
            in response to the current request message. It indicates
            that the response to the request message is now
            complete.

  Input Label
             The input label of the connection specified in this
             Connection Record. If this Connection Record specifies a
             virtual path connection (the VPC flag is set) the Input
             VCI field is unused.

  Output Branch Records
             Each Connection Record must contain one or more Output
             Branch Records. Each Output Branch Record specifies a
             single output branch belonging to the connection
             identified by the Input Label field of the Connection
             Record and the Input Port field of the Report Connection
             State message. A point-to-point connection will require
             only a single Output Branch Record. A point-to-
             multipoint connection will require multiple Output
             Branch Records. The last Output Branch Record of each
             Connection Record is indicated by the Last Branch flag
             of the Output Branch Record. If a point-to-multipoint
             connection has more output branches than can fit in a
             single Connection Record contained within a single
             success response message, that connection may be
             reported using multiple Connection Records in multiple
             success response messages.

  Each Output Branch Record has the following format:




Worster, et. al.                                              Page 52]

Internet Draft     General Switch Management Protocol        Feb 1999


  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                          Output Port                          |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |L|x x|E|                                                       |
  +-+-+-+-+                  Output Label                         ~
  ~                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

  Output PortThe output port of the switch to which this output
             branch is routed.

  Flags

       L: Last Branch
            The Last Branch flag, if set, indicates that this is the
            last Output Branch Record of this Connection Record. If
            zero, it indicates that one or more further Output
            Branch Records are to follow. If this is the last Output
            Branch Record in the message and the Last Branch flag is
            zero, further output branches belonging to the same
            connection will be given in another Connection Record.
            This Connection Record will be the first Connection
            Record in the next success response message. This
            Connection Record must have the same Input VPI and Input
            VCI values as the current Connection Record.

       E: Extension Label
            The Extension Label flag if zero indicates that the
            Output Label field is a 28 bit field. If the Extension
            Label flag is set then the Input Label field is a 60 bit
            field structured as a 28 bit first level label field
            followed by a 32 bit second level label field.

       x: Unused.

  Output Label
             The output label of the output branch specified in this
             Output Branch Record.

            ATM specific procedures:

                   If this Output Branch Record is part of a
                   Connection Record that specifies a virtual path
                   connection (the ATM VPC flag is set) the Output VCI
                   field is unused.




Worster, et. al.                                              Page 53]

Internet Draft     General Switch Management Protocol        Feb 1999

   A Report Connection State request message may be issued regardless
   of the Port Status or the Line Status of the target switch port.

   If the Input Port of the request message is valid, and the All
   Connections flag is set, but there are no connections established
   on that port, a failure response message must be returned with the
   code field set to, "Failure specific to the particular message
   type." For the Report Connection State message, this failure code
   indicates that no connections matching the request message were
   found. This failure message should also be returned if the Input
   Port of the request message is valid, the All Connections flag is
   zero, and no connections are found on that port matching the
   specified virtual path connection, virtual path, or virtual
   channel connection.


7.  Configuration Messages

   The configuration messages permit the controller to discover the
   capabilities of the switch. Three configuration request messages
   have been defined: Switch, Port, and All Ports.

   All configuration request messages have the following format:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Version    | Message Type  |    Result     |     Code      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Transaction Identifier                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                             Port                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

7.1  Switch Configuration Message

   The Switch Configuration message requests the global (non port-
   specific) configuration for the switch. The Switch Configuration
   message is:

      Message Type = 64

   The Port field is not used in the request message.

   The Switch Configuration success response message has the
   following format:





Worster, et. al.                                              Page 54]

Internet Draft     General Switch Management Protocol        Feb 1999


   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Version    | Message Type  |    Result     |     Code      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                    Transaction Identifier                     |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Firmware Version Number    |          Window Size          |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |          Switch Type          |                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
  |                          Switch Name                          |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

  Firmware Version Number
             The version number of the switch control firmware
             installed.

  Window Size
             The maximum number of unacknowledged request messages
             that may be transmitted by the controller without the
             possibility of loss. This field is used to prevent
             request messages being lost in the switch because of
             overflow in the receive buffer. The field is a hint to
             the controller. If desired, the controller may
             experiment with higher and lower window sizes to
             determine heuristically the best window size.

             [editor's note: some text may be added here with regard
             to the tcp/ip encapsulation since if tcp is used then
             the switch may adjust the reciever window size.]

  Switch Type
             A 16-bit field allocated by the manufacturer of the
             switch. (For these purposes the manufacturer of the
             switch is assumed to be the organization identified by
             the OUI in the Switch Name field.) The Switch Type
             identifies the product. When the Switch Type is combined
             with the OUI from the Switch Name the product is
             uniquely identified. Network Management may use this
             identification to obtain product related information
             from a database.

  Switch Name
             A 48-bit quantity that is unique within the operational
             context of the device. A 48-bit IEEE 802 MAC address, if
             available, may be used as the Switch Name. The most
             significant 24 bits of the Switch Name must be an


Worster, et. al.                                              Page 55]

Internet Draft     General Switch Management Protocol        Feb 1999

              Organizationally Unique Identifier (OUI) that identifies
              the manufacturer of the switch.

7.2  Port Configuration Message

   The Port Configuration message requests the switch for the
   configuration information of a single switch port. The Port field
   in the request message specifies the port for which the
   configuration is requested. The Port Configuration message is:

      Message Type = 65.

   The Port Configuration success response message has the following
   format:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Version    | Message Type  |    Result     |     Code      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Transaction Identifier                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                             Port                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Port Session Number                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   PortType    |S|x x x x x x x|     Data Fields Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                     PortType Specific Data                    ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                       Service Model Data                      ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   Port
              The switch port to which the configuration information
              refers. Configuration information relating to both the
              input and the output sides of the switch port is given.
              Port numbers are 32 bits wide and allocated by the
              switch. The switch may choose to structure the 32 bits
              into subfields that have meaning to the physical
              structure of the switch hardware (e.g. physical slot and
              port). This structure may be indicated in the Physical
              Slot Number and Physical Port Number fields.



Worster, et. al.                                              Page 56]

Internet Draft     General Switch Management Protocol        Feb 1999

   PortType 
             [Editor's note: words to be written. also, somewhere in
             chapter 1 or so we will need text that explains that
             certain protocol elements depend on the PortType value.]

             PortType = 0d01 = ATM

   S: Service Model
             If set, indicates that service model data follows the
             PortSpecific port configuration data.

   Data Fields Length
             The total length in bytes of the combined PortType
             Specific Data and Service Model Data fields. The length
             of each of these fields may be derived from the other
             data so the value of Data Fields Length serves primarily
             as a check and to assist parsing of the All Ports
             Configuration message success response.

   PortType Specific Data
             This field contains the configuration data specific to
             the particular port type as specified by the PortType
             field. The field format and length depends also on the
             value of PortType. PortType Specific Data is defined
             below.

   Service Model Data
             This field contains data that describes the services
             within the Service Model that can be supported by the
             port. The length of this field is variable.

             [Editor's note: beyond the above sentences no definition
             of the service model has been provided in this revision
             of the draft. this will be extended in future
             revisions.]

7.2.1  PortType Specific Data

   The length, format and semantics of the PortType Specific Data
   field in the Port Configuration message suffess response and in
   the Port Records of the All Port Configuration message success
   response all depend on the PortType value of the same message or
   record respectively. The specification of the PortType Specific
   Data field for each defined PortType value are given in the
   subsequent subsections.






Worster, et. al.                                              Page 57]

Internet Draft     General Switch Management Protocol        Feb 1999

7.2.1.1  PortType Specific Data for PortType=ATM


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |V|M|L|R|      Min VPI          |Q|x x x|       Max VPI         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |            Min VCI            |           Max VCI             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Receive Cell Rate                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Transmit Cell Rate                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Port Status  |   Line Type   |  Line Status  |  Priorities   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Physical Slot Number      |     Physical Port Number      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Flags

        V: VP Switching
             The VP Switching flag, if set, indicates that this input
             port is capable of supporting virtual path switching.
             Else, if zero, it indicates that this input port is only
             capable of virtual channel switching.

        M: Multicast Labels
             The Multicast Labels flag, if set, indicates that this
             output port is capable of labelling each output branch
             of a point-to-multipoint tree with a different label. If
             zero, it indicates that this output port is not able to
             label each output branch of a point-to-multipoint tree
             with a different label.

        L: Logical Multicast
             The Logical Multicast flag, if set, indicates that this
             output port is capable of supporting more than a single
             branch from any point-to-multipoint connection. This
             capability is often referred to as logical multicast. If
             zero, it indicates that this output port can only
             support a single output branch from each point-to-
             multipoint connection.

        R: Label Range
             The Label Range flag, if set, indicates that this switch
             port is capable of reallocating its VPI label range or
             its VCI label range and therefore accepts the Label



Worster, et. al.                                              Page 58]

Internet Draft     General Switch Management Protocol        Feb 1999

             Range message. Else, if zero, it indicates that this
             port does not accept Label Range messages.

       Q: QoS
             The QoS flag, if set, indicates that this switch port is
             capable of handling the Quality of Service messages
             defined in section 9 of this specification. Else, if
             zero, it indicates that this port does not accept the
             Quality of Service messages.

       x: Unused

  Min VPI
             The default minimum value of dynamically assigned
             incoming VPI that the connection table on the input port
             supports and that may be controlled by GSMP. This value
             is not changed as a result of the Label Range message.

  Max VPI
             The default maximum value of dynamically assigned
             incoming VPI that the connection table on the input port
             supports and that may be controlled by GSMP. This value
             is not changed as a result of the Label Range message.

             At power-on, after a hardware reset, and after the Reset
             Input Port function of the Port Management message, the
             input port must handle all values of VPI within the
             range Min VPI to Max VPI inclusive and GSMP must be able
             to control all values within this range. It should be
             noted that the range Min VPI to Max VPI refers only to
             the incoming VPI range that can be supported by the
             associated port. No restriction is placed on the values
             of outgoing

             VPIs that may be written into the cell header. If the
             switch does not support virtual paths it is acceptable
             for both Min VPI and Max VPI to specify the same value,
             most likely zero.

             Use of the Label Range message allows the range of VPIs
             supported by the port to be changed. However, the Min
             VPI and Max VPI fields in the Port Configuration and All
             Ports Configuration messages always report the same
             default values regardless of the operation of the Label
             Range message.

  Min VCI
             The default minimum value of dynamically assigned
             incoming VCI that the connection table on the input port


Worster, et. al.                                              Page 59]

Internet Draft     General Switch Management Protocol        Feb 1999

             can support and may be controlled by GSMP. This value is
             not changed as a result of the Label Range message.

  Max VCI
             The default maximum value of dynamically assigned
             incoming VCI that the connection table on the input port
             can support and may be controlled by GSMP. This value is
             not changed as a result of the Label Range message.

             At power-on, after a hardware reset, and after the Reset
             Input Port function of the Port Management message, the
             input port must handle all values of VCI within the
             range Min VCI to Max VCI inclusive, for each of the
             virtual paths in the range Min VPI to Max VPI inclusive,
             and GSMP must be able to control all values within this
             range. It should be noted that the range Min VCI to Max
             VCI refers only to the incoming VCI range that can be
             supported by the associated port on each of the virtual
             paths in the range Min VPI to Max VPI. No restriction is
             placed on the values of outgoing VCIs that may be
             written into the cell header.

             Use of the Label Range message allows the range of VCIs
             to be changed on each VPI supported by the port.
             However, the Min VCI and Max VCI fields in the Port
             Configuration and All Ports Configuration messages
             always report the same default values regardless of the
             operation of the Label Range message.

             For a port over which the GSMP protocol is operating,
             the VCI of the GSMP control channel may or may not be
             reported as lying within the range Min VCI to Max VCI. A
             switch should honor a connection request message that
             specifies the VCI value of the GSMP control channel even
             if it lies outside the range Min VCI to Max VCI.

  Receive Cell Rate
             The maximum rate of cells that may arrive at the input
             port in cells/s.

  Transmit Cell Rate
             The maximum rate of cells that may depart from the
             output port in cells/s. (The transmit cell rate of the
             output port may be changed by the Set Transmit Cell Rate
             function of the Port Management message.)

  Port Status
             Gives the administrative state of the port. The defined
             values of the Port Status field are:


Worster, et. al.                                              Page 60]

Internet Draft     General Switch Management Protocol        Feb 1999

            Available:
                 Port Status = 1. The port is available to both send
                 and receive cells. When a port changes to the
                 Available state from any other administrative
                 state, all dynamically assigned connections must be
                 cleared and a new Port Session Number must be
                 generated.

            Unavailable:
                 Port Status = 2. The port has intentionally been
                 taken out of service. No cells will be transmitted
                 from this port. No cells will be received by this
                 port.

            Internal Loopback:
                 Port Status = 3. The port has intentionally been
                 taken out of service and is in internal loopback:
                 cells arriving at the output port from the switch
                 fabric are looped through to the input port to
                 return to the switch fabric. All of the ATM
                 functions of the input port above the physical
                 layer, e.g. header translation, are performed upon
                 the looped back cells.

            External Loopback:
                 Port Status = 4. The port has intentionally been
                 taken out of service and is in external loopback:
                 cells arriving at the input port from the external
                 communications link are immediately looped back to
                 the communications link at the physical layer
                 without entering the input port. None of the ATM
                 functions of the input port above the physical
                 layer are performed upon the looped back cells.

            Bothway Loopback:
                 Port Status = 5. The port has intentionally been
                 taken out of service and is in both internal and
                 external loopback.

            The Port Status of the port over which the GSMP session
            controlling the switch is running, must be declared
            Available. The controller will ignore any other Port
            status for this port. The Port Status of switch ports
            after power-on initialization is not defined by GSMP.

  Line Type 
             The type of physical transmission interface for this
             port. The values for this field are defined by the



Worster, et. al.                                              Page 61]

Internet Draft     General Switch Management Protocol        Feb 1999

             atmIfType object specified in the Ipsilon IP Switch MIB
             [4].

  Line Status
             The status of the physical transmission medium connected
             to the port. The defined values of the Line Status field
             are:

            Up: Line Status = 1. The line is able to both send and
                     receive cells. When the Line Status changes to Up
                     from either the Down or Test states, a new Port
                     Session Number must be generated.

            Down:Line Status = 2. The line is unable either to send
                     or receive cells or both.

            Test:Line Status = 3. The port or line is in a test
                     mode, for example, power-on test.

  PrioritiesThe number of different priority levels that this output
             port can assign to connections. Zero is invalid in this
             field. If an output port is able to support "Q"
             priorities, the highest priority is numbered zero and
             the lowest priority is numbered "Q-1". The ability to
             offer different qualities of service to different
             connections based upon their priority is assumed to be a
             property of the output port of the switch. It may be
             assumed that for connections that share the same output
             port, an ATM cell on a connection with a higher priority
             is much more likely to exit the switch before an ATM
             cell on a connection with a lower priority if they are
             both in the switch at the same time.

  Physical Slot Number
             The physical location of the slot in which the port is
             located. It is an unsigned 16-bit integer that can take
             any value except 0xFFFF. The value 0xFFFF is used to
             indicate "unknown." The Physical Slot Number is not used
             by the GSMP protocol. It is provided to assist network
             management in functions such as logging, port naming,
             and graphical representation.

  Physical Port Number
             The physical location of the port within the slot in
             which the port is located. It is an unsigned 16-bit


Worster, et. al.                                              Page 62]

Internet Draft     General Switch Management Protocol        Feb 1999

             integer that can take any value except 0xFFFF. The value
             0xFFFF is used to indicate "unknown." The Physical Port
             Number is not used by the GSMP protocol. It is provided
             to assist network management in functions such as
             logging, port naming, and graphical representation.

             There must be a one to one mapping between Port Number
             and the Physical Slot Number and Physical Port Number
             combination. Two different Port Numbers must not yield
             the same Physical Slot Number and Physical Port Number
             combination. The same Port Number must yield the same
             Physical Slot Number and Physical Port Number within a
             single GSMP session. If both Physical Slot Number and
             Physical Port Number indicate "unknown" the physical
             location of switch ports may be discovered by looking up
             the product identity in a database to reveal the
             physical interpretation of the 32-bit Port Number.

7.3  All Ports Configuration Message

   The All Ports Configuration message requests the switch for the
   configuration information of all of its ports. The All Ports
   Configuration message is:

      Message Type = 66

   The Port field is not used in the request message.

   The All Ports Configuration success response message has the
   following format:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Version    | Message Type  |    Result     |     Code      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Transaction Identifier                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Number of Records       |           Reserved            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                          Port Records                         ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Number of Records
             Field gives the total number of Port Records to be
             returned in response to the All Ports Configuration
             request message. The number of port records in a single


Worster, et. al.                                              Page 63]

Internet Draft     General Switch Management Protocol        Feb 1999

             All Ports Configuration success response must not cause
             the packet length to exceed the maximum transmission
             unit defined by the encapsulation. If a switch has more
             ports than can be sent in a single success response
             message it must send multiple success response messages.
             All success response messages that are sent in response
             to the same request message must have the same
             Transaction Identifier as the request message and the
             same value in the Number of Records field. All success
             response messages that are sent in response to the same
             request message, except for the last message, must have
             the result field set to "More." The last message, or a
             single success response message, must have the result
             field set to "Success." All Port records within a
             success response message must be complete, i.e. a single
             Port record must not be split across multiple success
             response messages.

   Port Records
             Follow in the remainder of the message. Each port record
             has the following format:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                             Port                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Port Session Number                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   PortType    |S|x x x x x x x|      Data Fields Length       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                     PortType Specific Data                    ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                       Service Model Data                      ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The definition of the fields in the Port Record is exactly the
   same as that of the Port Configuration message.


8.  Event Messages

   Event messages allow the switch to inform the controller of
   certain asynchronous events. Event messages are not acknowledged.
   The Result field and the Code field in the message header are not


Worster, et. al.                                              Page 64]

Internet Draft     General Switch Management Protocol        Feb 1999

  used and should be set to zero. Event messages are not sent during
  initialization. Event messages have the following format:

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Version    | Message Type  |    Result     |     Code      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                    Transaction Identifier                     |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                             Port                              |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                      Port Session Number                      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                     Event Sequence Number                     |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |x x x|E|                                                       |
  +-+-+-+-+                     Label                             ~
  ~                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

  Event Sequence Number
             The current value of the Event Sequence Number for the
             specified port. The Event Sequence Number is set to zero
             when the port is initialized. It is incremented by one
             each time the port detects an asynchronous event that
             the switch would normally report via an Event message.
             The Event Sequence Number must be incremented each time
             an event occurs even if the switch is prevented from
             sending an Event message due to the action of the flow
             control.

  E: Extension Label
             The Extension Label flag if zero indicates that the
             Label field is a 28 bit field. If the Extension Label
             flag is set then the Label field is a 60 bit field
             structured as a 28 bit first level label field followed
             by a 32 bit second level label field.

  Label
             Field gives the Label to which the event message refers.
             If this field is not required by the event message it is
             set to zero.

  Each switch port must maintain an Event Sequence Number and a set
  of Event Flags, one Event Flag for each type of Event message.
  When a switch port sends an Event message it must set the Event
  Flag on that port corresponding to the type of the event. The port
  is not permitted to send another Event message of the same type


Worster, et. al.                                              Page 65]

Internet Draft     General Switch Management Protocol        Feb 1999

   until the Event Flag has been reset. Event Flags are reset by the
   "Reset Event Flags" function of the Port Management message. This
   is a simple flow control preventing the switch from flooding the
   controller with event messages. The Event Sequence Number of the
   port must be incremented every time an event is detected on that
   port even if the port is prevented from reporting the event due to
   the action of the flow control. This allows the controller to
   detect that it has not been informed of some events that have
   occurred on the port due to the action of the flow control.

8.1  Port Up Message

   The Port Up message informs the controller that the Line Status of
   a port has changed from either the Down or Test state to the Up
   state. When the Line Status of a switch port changes to the Up
   state from either the Down or Test state a new Port Session Number
   must be generated, preferably using some form of random number.
   The new Port Session Number is given in the Port Session Number
   field. The Label field is not used and is set to zero. The Port Up
   message is:

      Message Type = 80

8.2  Port Down Message

   The Port Down message informs the controller that the Line Status
   of a port has changed from the Up state to the Down state. This
   message will be sent to report link failure if the switch is
   capable of detecting link failure. The port session number that
   was valid before the port went down is reported in the Port
   Session Number field. The Label field is not used and is set to
   zero. The Port Down message is:

      Message Type = 81

8.3  Invalid Label Message

   The Invalid Label message is sent to inform the controller that
   one or more cells or frames have arrived at an input port with a
   Label that is currently not allocated to an assigned connection.
   The input port is indicated in the Port field, and the Label in
   the Label field. The Invalid Label message is:

      Message Type = 82

8.4  New Port Message

   The New Port message informs the controller that a new port has
   been added to the switch. The port number of the new port is given


Worster, et. al.                                              Page 66]

Internet Draft     General Switch Management Protocol        Feb 1999

   in the Port field. A new Port Session Number must be assigned,
   preferably using some form of random number. The new Port Session
   Number is given in the Port Session Number field. The state of the
   new port is undefined so the Label field is not used and is set to
   zero. The New Port message is:

      Message Type = 83

8.5  Dead Port Message

   The Dead Port message informs the controller that a port has been
   removed from the switch. The port number of the port is given in
   the Port field. The Port Session Number that was valid before the
   port was removed is reported in the Port Session Number field. The
   Label fields are not used and are set to zero. The Dead Port
   message is:

      Message Type = 84


9.  Service Model Definition


10.  Adjacency Protocol

   The adjacency protocol is used to synchronize state across the
   link, to agree on which version of the protocol to use, to
   discover the identity of the entity at the other end of a link,
   and to detect when it changes. GSMP is a hard state protocol. It
   is therefore important to detect loss of contact between switch
   and controller, and to detect any change of identity of switch or
   controller. No GSMP messages other than those of the adjacency
   protocol may be sent across the link until the adjacency protocol
   has achieved synchronization.

10.1  Packet Format

   All GSMP messages belonging to the adjacency protocol have the
   following structure:











Worster, et. al.                                              Page 67]

Internet Draft     General Switch Management Protocol        Feb 1999


   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Version    | Message Type  |     Timer     |M|     Code    |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                          Sender Name                          |
  +                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                               |                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
  |                         Receiver Name                         |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                          Sender Port                          |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                         Receiver Port                         |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                        Sender Instance                        |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                       Receiver Instance                       |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

  Version

             In the adjacency protocol the Version field is used for
              version negotiation. In a SYN message the Version field
             always contains the highest version understood by the
             sender. A receiver receiving a SYN message with a
             version higher than understood will ignore that message.
             A receiver receiving a SYN message with a version lower
             than its own highest version, but a version that it
             understands, will reply with a SYNACK with the version
             from the received SYN in its GSMP Version field. This
             defines the version of the GSMP protocol to be used
             while the adjacency protocol remains synchronized. All
             other messages will use the agreed version in the
             Version field.

             The version number for the version of the GSMP protocol
             defined by this specification is Version = 2.

  Message Type
             The adjacency protocol is:

                  Message Type = 10

  Timer
             The Timer field is used to inform the receiver of the
             timer value used in the adjacency protocol of the
             sender. The timer specifies the nominal time between


Worster, et. al.                                              Page 68]

Internet Draft     General Switch Management Protocol        Feb 1999

             periodic adjacency protocol messages. It is a constant
             for the duration of a GSMP session. The timer field is
             specified in units of 100ms.

  M-Flag
             The M-Flag is used in the SYN message to indicate
             whether the sender is a master or a slave. If the M-Flag
             is set in the SYN message, the sender is a master. If
             zero, the sender is a slave. The GSMP protocol is
             asymmetric, the controller being the master and the
             switch being the slave. The M-Flag prevents a master
             from synchronizing with another master, or a slave with
             another slave. If a slave receives a SYN message with a
             zero M-Flag, it must ignore that SYN message. If a
             master receives a SYN message with the M-Flag set, it
             must ignore that SYN message. In all other messages the
             M-Flag is not used.

  Code
             Field specifies the function of the message. Four Codes
             are defined for the adjacency protocol:

               SYN:     Code = 1
               SYNACK:  Code = 2
               ACK:     Code = 3
               RSTACK:  Code = 4.

  Sender Name
             For the SYN, SYNACK, and ACK messages, is the name of
             the entity sending the message. The Sender Name is a 48-
             bit quantity that is unique within the operational
             context of the device. A 48-bit IEEE 802 MAC address, if
             available, may be used for the Sender Name. If the
             Ethernet encapsulation is used the Sender Name must be
             the Source Address from the MAC header. For the RSTACK
             message, the Sender Name field is set to the value of
             the Receiver Name field from the incoming message that
             caused the RSTACK message to be generated.

  Receiver Name
             For the SYN, SYNACK, and ACK messages, is the name of
             the entity that the sender of the message believes is at
             the far end of the link. If the sender of the message
             does not know the name of the entity at the far end of
             the link, this field should be set to zero. For the
             RSTACK message, he Receiver Name field is set to the
             value of the Sender Name field from the incoming message
             that caused the RSTACK message to be generated.



Worster, et. al.                                              Page 69]

Internet Draft     General Switch Management Protocol        Feb 1999

   Sender Port
             For the SYN, SYNACK, and ACK messages, is the local port
             number of the link across which the message is being
             sent. For the RSTACK message, the Sender Port field is
             set to the value of the Receiver Port field from the
             incoming message that caused the RSTACK message to be
             generated.

   Receiver Port
             For the SYN, SYNACK, and ACK messages, is what the
             sender believes is the local port number for the link,
             allocated by the entity at the far end of the link. If
             the sender of the message does not know the port number
             at the far end of the link, this field should be set to
             zero. For the RSTACK message, the Receiver Port field is
             set to the value of the Sender Port field from the
             incoming message that caused the RSTACK message to be
             generated.

   Sender Instance
             For the SYN, SYNACK, and ACK messages, is the sender's
             instance number for the link. It is used to detect when
             the link comes back up after going down or when the
             identity of the entity at the other end of the link
             changes. The instance number is a 32-bit number that is
             guaranteed to be unique within the recent past and to
             change when the link or node comes back up after going
             down. Zero is not a valid instance number. For the
             RSTACK message, the Sender Instance field is set to the
             value of the Receiver Instance field from the incoming
             message that caused the RSTACK message to be generated.

   Receiver Instance
             For the SYN, SYNACK, and ACK messages, is what the
             sender believes is the current instance number for the
             link, allocated by the entity at the far end of the
             link. If the sender of the message does not know the
             current instance number at the far end of the link, this
             field should be set to zero. For the RSTACK message, the
             Receiver Instance field is set to the value of the
             Sender Instance field from the incoming message that
             caused the RSTACK message to be generated.

10.2  Procedure

   The adjacency protocol is described by the following rules and
   state tables.

   The rules and state tables use the following operations:


Worster, et. al.                                              Page 70]

Internet Draft     General Switch Management Protocol        Feb 1999

    o The "Update Peer Verifier" operation is defined as storing the
      values of the Sender Instance, Sender Port, and Sender Name
      fields from a SYN or SYNACK message received from the entity at
      the far end of the link.

    o The procedure "Reset the link" is defined as:

         1. Generate a new instance number for the link
          2. Delete the peer verifier (set to zero the values of
             Sender Instance, Sender Port, and Sender Name previously
             stored by the Update Peer Verifier operation)
          3. Send a SYN message
          4. Enter the SYNSENT state.

   o The state tables use the following Boolean terms and operators:

       A    The Sender Instance in the incoming message matches the
            value stored from a previous message by the "Update Peer
            Verifier" operation.

       B    The Sender Instance, Sender Port, and Sender Name fields
            in the incoming message match the values stored from a
            previous message by the "Update Peer Verifier"
            operation.

       C    The Receiver Instance, Receiver Port, and Receiver Name
            fields in the incoming message match the values of the
            Sender Instance, Sender Port, and Sender Name currently
            sent in outgoing SYN, SYNACK, and ACK messages.

       "&&" Represents the logical AND operation

       "||" Represents the logical OR operation

       "!" Represents the logical negation (NOT) operation.

    o A timer is required for the periodic generation of SYN, SYNACK,
      and ACK messages. The value of the timer is announced in the
      Timer field. The period of the timer is unspecified but a value
      of one second is suggested.

     There are two independent events: the timer expires, and a
     packet arrives. The processing rules for these events are:








Worster, et. al.                                              Page 71]

Internet Draft     General Switch Management Protocol        Feb 1999


         Timer Expires:   Reset Timer
                          If state = SYNSENT Send SYN
                          If state = SYNRCVD Send SYNACK
                          If state = ESTAB   Send ACK

          Packet Arrives:
              If incoming message is an RSTACK:
                  If (A && C && !SYNSENT) Reset the link
                  Else Discard the message.
              If incoming message is a SYN, SYNACK, or ACK:
                  Response defined by the following State Tables.
              If incoming message is any other GSMP message and
                  state != ESTAB:
                  Discard incoming message.
                  If state = SYNSENT Send SYN (Note 1)
                  If state = SYNRCVD Send SYNACK (Note 1)

              Note 1: No more than two SYN or SYNACK messages should
              be sent within any time period of length defined by
              the timer.

    o State synchronization across a link is considered to be
      achieved when the protocol reaches the ESTAB state. All GSMP
      messages, other than adjacency protocol messages, that are
      received before synchronization is achieved will be discarded.

State Tables

State: SYNSENT

+======================================================================+
|     Condition      |                Action               | New State |
+====================+=====================================+===========+
|    SYNACK && C     |  Update Peer Verifier; Send ACK     |   ESTAB   |
+--------------------+-------------------------------------+-----------+
|    SYNACK && !C    |            Send RSTACK              |  SYNSENT  |
+--------------------+-------------------------------------+-----------+
|        SYN         |  Update Peer Verifier; Send SYNACK  |  SYNRCVD  |
+--------------------+-------------------------------------+-----------+
|        ACK         |            Send RSTACK              |  SYNSENT  |
+======================================================================+

State: SYNRCVD







Worster, et. al.                                              Page 72]

Internet Draft     General Switch Management Protocol        Feb 1999


+======================================================================+
|     Condition      |                Action               | New State |
+====================+=====================================+===========+
|    SYNACK && C     |  Update Peer Verifier; Send ACK     |   ESTAB   |
+--------------------+-------------------------------------+-----------+
|    SYNACK && !C    |            Send RSTACK              |  SYNRCVD  |
+--------------------+-------------------------------------+-----------+
|        SYN         |  Update Peer Verifier; Send SYNACK  |  SYNRCVD  |
+--------------------+-------------------------------------+-----------+
|   ACK && B && C    |              Send ACK               |   ESTAB   |
+--------------------+-------------------------------------+-----------+
|  ACK && !(B && C)  |            Send RSTACK              |  SYNRCVD  |
+======================================================================+

State: ESTAB

+======================================================================+
|     Condition      |                Action               | New State |
+====================+=====================================+===========+
|   SYN || SYNACK    |           Send ACK (note 2)         |   ESTAB   |
+--------------------+-------------------------------------+-----------+
|   ACK && B && C    |           Send ACK (note 3)         |   ESTAB   |
+--------------------+-------------------------------------+-----------+
|  ACK && !(B && C)  |              Send RSTACK            |   ESTAB   |
+======================================================================+

   Note 2: No more than two ACKs should be sent within any time
   period of length defined by the timer. Thus, one ACK must be sent
   every time the timer expires. In addition, one further ACK may be
   sent between timer expirations if the incoming message is a SYN or
   SYNACK. This additional ACK allows the adjacency protocol to reach
   synchronization more quickly.

   Note 3: No more than one ACK should be sent within any time period
   of length defined by the timer.

10.3  Loss of Synchronization

   If after synchronization is achieved, no valid GSMP messages are
   received in any period of time in excess of three times the value
   of the Timer field announced in the incoming adjacency protocol
   messages, loss of synchronization may be declared.

   The preferred procedure for a switch to use when it looses
   synchronization with its active controller is to attempt to
   establish synchronization with (one of) its backup controller(s).
   However, in this preferred approach, it must not reset its state
   until it achieves synchronization with a backup controller. This


Worster, et. al.                                              Page 73]

Internet Draft     General Switch Management Protocol        Feb 1999

   means that if, before achieving synchronization with a backup
   controller, it regains synchronization with its original
   controller, it may continue the original session (and cease
   attempting to establish synchronization with a backup controller).
   If synchronization with the original session is regained it is the
   responsibility of the controller to ensure consistent state
   between the switch and controller.

   While the above is the preferred procedure, it is also the case
   that the simplest procedure when declaring loss of synchronization
   with the active controller is to reset the switch state, and start
   searching for a controller. This simple procedure is legitimate.


11.  Summary of Failure Response Codes

   [Editor's note: this section is currently out of whack w.r.t. the
   rest of the spec and will be updated in a future revision of the
   draft.]

   The following list gives a summary of the failure codes defined
   for failure response messages:

        1: Unspecified reason not covered by other failure codes.
        2: Invalid request message.
        3: The specified request is not implemented on this switch.
        4: Invalid Port Session Number.
        5: One or more of the specified ports does not exist.
        6: One or more of the specified ports is down.
        7: Unused. (This failure code has been replaced by failure
              codes 18--21.)
        8: The specified connection does not exist.
        9: The specified branch does not exist.
       10: A branch belonging to the specified point-to-multipoint
              connection is already established on the specified
              output port and the switch cannot support more than a
              single branch of any point-to-multipoint connection on
              the same output port.
       11: The limit on the maximum number of point-to-multipoint
              connections that the switch can support has been
              reached.
       12: The limit on the maximum number of branches that the
              specified point-to-multipoint connection can support has
              been reached.
       13: Unable to assign the requested Label value to the
              requested branch on the specified point-to-multipoint
              connection.
       14: General problem related to the manner in which point-to-
              multipoint is supported by the switch.


Worster, et. al.                                              Page 74]

Internet Draft     General Switch Management Protocol        Feb 1999

      15: Out of resources (e.g. memory exhausted, etc.).
      16: Failure specific to the particular message type. (The
            meaning of this failure code depends upon the Message
            Type. It is defined within the description of any
            message that uses it.)
      17: Cannot label each output branch of a point-to-multipoint
            tree with a different label.
      18: One or more of the specified input VPIs is invalid.
      19: One or more of the specified input VCIs is invalid.
      20: One or more of the specified output VPIs is invalid.
      21: One or more of the specified output VCIs is invalid.
      22: Invalid Class of Service field in a Connection Management
            message.
      23: Insufficient resources for QoS Profile.
      24: Virtual path switching is not supported on this input
            port.
      25: Point-to-multipoint virtual path connections are not
            supported on either the requested input port or the
            requested output port.
      26: Attempt to add a virtual path connection branch to an
            existing virtual channel connection.
      27: Attempt to add a virtual channel connection branch to an
            existing virtual path connection.
      28: Only point-to-point bidirectional connections may be
            established.
      29: Cannot support requested VPI range.
      30: Cannot support requested VCI range on all requested VPIs.
      31: The transmit cell rate of this output port cannot be
            changed.
      32: Requested transmit cell rate out of range for this output
            port.
      128: Weighted scheduling within this waiting room is
            unavailable.
      129: This waiting room is unable to offer weighted sharing for
            a QoS class.
      130: This waiting room is unable to offer weighted sharing for
            a connection.
      131: Scheduler Identifier still in use.
      132: QoS Class Identifier still in use.
      133: Invalid QoS parameter.
      134: Insufficient QoS resources.
      135: Any point-to-multipoint connection arriving on this input
            port must use the same QoS parameters for all output
            branches.






Worster, et. al.                                              Page 75]

Internet Draft     General Switch Management Protocol        Feb 1999

12.  Summary of Message Set

   [Editor's note: this section is currently out of whack w.r.t. the
   rest of the spec and will be updated in a future revision of the
   draft.]

   The following table gives a summary of the messages defined in
   this version of the specification. It also indicates which
   messages must be supported in a minimal implementation of the
   protocol. Those messages marked as "Required" must be supported by
   the switch for an implementation to be considered to conform to
   this specification. (While the controller should also implement
   those messages marked "Required," conformance cannot be tested for
   the controller due to the Master-Slave nature of the protocol.)

       Message Name                Message Type    Status

   Connection Management Messages
       Add Branch VCC....................16        Required
                  VPC....................26
       Delete Tree.......................18
       Delete All........................20
       Delete Branches...................17        Required
       Move Branch VCC...................22
                   VPC...................27

      Port Management Messages
       Port Management...................32        Required
       Label Range.......................33

      State and Statistics Messages
       Connection Activity...............48
       Port Statistics...................49        Required
       Connection Statistics.............50
       QoS Class Statistics..............51
       Report Connection State...........52

      Configuration Messages
       Switch Configuration..............64        Required
       Port Configuration................65        Required
       All Ports Configuration...........66        Required

      Event Messages








Worster, et. al.                                              Page 76]

Internet Draft     General Switch Management Protocol        Feb 1999

       Port Up...........................80
       Port Down.........................81
       Invalid Label...................82
       New Port..........................83
       Dead Port.........................84

      Quality of Service Messages
       QoS Configuration.................96
       Scheduler Establishment...........97
       QoS Class Establishment...........98
       QoS Release.......................99
       QoS Connection Management VCC....100
                                 VPC....101

   Adjacency Protocol....................10        Required


13.  Security Considerations

   Security considrations are not addressed in the current revision
   of the draft.


References

     [1]  ATM Forum Traffic Management Specification 4.0, af-tm-
              0056.000, April 1996.

     [2]  "B-ISDN ATM Layer Specification," International
             Telecommunication Union, ITU-T Recommendation I.361, Mar.
             1993.

     [3]  "B-ISDN ATM Adaptation Layer (AAL) Specification,"
              International Telecommunication Union, ITU-T
              Recommendation I.363, Mar. 1993.

     [4]  Ipsilon IP Switch MIB,
              http://www.ipsilon.com/products/ips.mib.

              [Editor's note: this reference is obsolete. The reference
              must be removed if a suitable updated publication cannot
              be found as a replacement.]

     [5]  Reynolds, J., and J. Postel, "Assigned Numbers," STD 2,
              RFC 1700, October 1994.

     [6]  Newman, P, Edwards, W., Hinden, R., Hoffman, E. Ching
              Liaw, F., Lyon, T. and Minshall, G., "Ipsilon's General



Worster, et. al.                                              Page 77]

Internet Draft     General Switch Management Protocol        Feb 1999

          Switch Management Protocol Specification," Version 1.1,
          RFC 1987, August 1996.

     [7]  Newman, P, Edwards, W., Hinden, R., Hoffman, E., Ching
          Liaw, F., Lyon, T. and Minshall, G., "Ipsilon's General
          Switch Management Protocol Specification," Version 2.0,
          RFC 2397, March 1998.


Authors' Addresses

   Tom Worster
   GDC
   199 W Newton St
   Boston MA 02116 USA
   617 247 2624
   tom.worster@gdc.com






























Worster, et. al.                                              Page 78]


