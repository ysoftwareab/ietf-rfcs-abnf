



Networking Working Group                                       Ran. Chen
Internet-Draft                                              Shaofu. Peng
Intended status: Standards Track                         ZTE Corporation
Expires: November 10, 2017                                  May 09, 2017


             LDP Extensions for FEC elements sharing label
                     draft-chenpeng-mpls-ldp-ext-01

Abstract

   Label Distribution Protocol (LDP) is defined in [RFC5036] for
   distribution of labels inside one MPLS domain.  It defined how to
   associate a Forwarding Equivalence Class (FEC) with each label it
   distributes.  A FEC is a list of one or more FEC elements, but it
   does not describe operations how to achieve one or more FEC element
   share the same label.

   Currently Label resources are getting more and more nervous, and it
   is necessary to save the label resources.  This document defines
   extensions to the LDP protocol to achieve one or more FEC element
   share the same label.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on November 10, 2017.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of



Chen & Peng             Expires November 10, 2017               [Page 1]

Internet-DraftLDP Extensions for FEC elements sharing label     May 2017


   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Conventions used in this document . . . . . . . . . . . . . .   2
   3.  LDP Extension . . . . . . . . . . . . . . . . . . . . . . . .   2
     3.1.  Host-parasitism FEC Relationship TLV  . . . . . . . . . .   3
     3.2.  Label Borrowing Message . . . . . . . . . . . . . . . . .   4
   4.  Operations  . . . . . . . . . . . . . . . . . . . . . . . . .   4
     4.1.  Egress Operation  . . . . . . . . . . . . . . . . . . . .   4
     4.2.  Ingress/Transit Operation . . . . . . . . . . . . . . . .   5
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   6
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   6
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   8.  Normative references  . . . . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   Label Distribution Protocol (LDP) is defined in [RFC5036] for
   distribution of labels inside one MPLS domain.  It defined how to
   associate a Forwarding Equivalence Class (FEC) with each label it
   distributes.  A FEC is a list of one or more FEC elements, but it
   does not describe operations how to achieve one or more FEC element
   share the same label.

   Currently Label resources are getting more and more nervous, and it
   is necessary to save the label resources.  This document defines
   extensions to the LDP protocol to achieve one or more FEC element
   share the same label.

2.  Conventions used in this document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119.

3.  LDP Extension







Chen & Peng             Expires November 10, 2017               [Page 2]

Internet-DraftLDP Extensions for FEC elements sharing label     May 2017


3.1.  Host-parasitism FEC Relationship TLV

   The following section describes the protocol extensions required to
   support one or more FEC element share the same label.

   Labels are bound to Forwarding Equivalence Classes (FECs).  A Host-
   parasitism FEC Relationship is a list of one or more FEC elements.
   The FEC Relationship TLV encodes FEC items.


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |1|1|  H-P Relationship(TBD)    |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                         Sequence Number                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   Prefix(2)   |     Host Address Family       |      PreLen   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                         Host Prefix                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   Prefix(2)   |   Parasitic Address Family       |   PreLen   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                         Parasitic Prefix 1                    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      |                           ...  ...                            |
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   Prefix(2)   |   Parasitic Address Family       |   PreLen   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                         Parasitic Prefix n                    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                 Figure 1

   The FEC Relationship TLV contains a Host-FEC element, and 0 or many
   Parasitic-FEC elements.  Both Host-FEC element and the Parasitic-FEC
   element are use the same format as defined in [RFC5036].

   The type of the FEC Elements is 0x02(prefix).The Host-FEC indicates
   Label Lender, and the Parasitic-FEC indicates Label borrowing.

   Sequence Number Specifies a 4 octet unsigned sequence number that
   identifies the sequence number of the Host-parasitism FEC
   Relationship.  The greater the Sequence Number, the more new the
   Host-parasitism FEC Relationship. if the difference between the
   larger one and the smaller one is more than half of the value of a 4



Chen & Peng             Expires November 10, 2017               [Page 3]

Internet-DraftLDP Extensions for FEC elements sharing label     May 2017


   octet unsigned integer, it indicates that there is a turnover, and
   the smaller value of the Sequence Number , the more new the Host-
   parasitism FEC Relationship.

3.2.  Label Borrowing Message

   The document defines a new LDP message: Label Borrowing Message.  An
   LSR sends a Label Borrowing message to an LDP peer to advertise label
   borrowing relationship to the peer.  The Label Borrowing message Must
   include a Host-parasitism FEC Relationship TLV.

   The encoding for the Label Borrowing message is:


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |1|    Label Borrowing (TBD)    |     Message Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                              Message ID                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Action    |                     Reserved                  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           Host-parasitism FEC Relationship TLV                |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                                 Figure 2

   U-bit: The value is set to 1, it indicates the unknown TLV MUST be
   silently ignored and the rest of the message processed as if the
   unknown TLV did not exist.

   Message ID: 32-bit value used to identify this message.

   Action: Set to 1, it indicates Label borrowing.  Set to 0, it
   indicates Label does not borrow.

4.  Operations

4.1.  Egress Operation

   The Egress may involve one or more of the following actions:

   o  A Egress node advertises Label Mapping messages for the Host-FEC
      label to one or more LDP peers, The LDP label distribution
      procedures is the same as described in [RFC5036].




Chen & Peng             Expires November 10, 2017               [Page 4]

Internet-DraftLDP Extensions for FEC elements sharing label     May 2017


   o  According to local policy that is configed on Egress node, all or
      part of the Parasitic-FECs can share the same label with the Host-
      FEC.  The Egress node MUST advertises a Label Borrowing Message
      included the Host-parasitism FEC Relationship TLV with action set
      to 1.  If the local policy is coarsness-grained that enforced all
      Parasitic-FECs to share the Host-FEC's label, the Host-parasitism
      FEC Relationship TLV can only contain the single Host-FEC element,
      and Parasitic-FECs elements are empty.  Otherwise, the Host-
      parasitism FEC Relationship TLV need contain not only the Host-FEC
      element, but also specific Parasitic-FECs elements who need to
      share Host-FEC's label due to a local fine-grained policy.

   o  When the Host-FEC label is available, and if due to a local
      coarsness or fine-grained policy that all Parasitic-FECs which
      borrowed label from the Host-FEC didnt borrow again, the Egress
      node MUST advertises a Label Borrowing Message included the Host-
      parasitism FEC Relationship TLV with action set to 0, only contain
      that single Host-FEC element, and Parasitic-FECs elements are
      empty.  Otherwise, if due to a local fine-grained policy, some
      Parasitic-FECs didnot want to borrow the Host-FEC's label, but
      there are always any other Parasitic-FECs left to share label, an
      updated Label Borrowing Message included the Host-parasitism FEC
      Relationship TLV with action set to 1 need to be advertised,
      contain the Host-FEC element and the specific Parasitic-FECs
      elements.

4.2.  Ingress/Transit Operation

   An LSR which received a Label Borrowing Message from an LDP peer may
   involve one or more of the following actions:

   o  Maintain the up-to-date Host-parasitism FEC Relationship.  It will
      compare the sequence number in the received Label Borrow Message
      and the existed locally maintained Host-parasitism FEC
      Relationship data.  If the Label Borrow Message is newer than the
      locally maintained data, it will overwrite the later, otherwise it
      will be ignored.  If the Host-parasitism FEC Relationship only
      contained a single Host-FEC, the Parasitic-FECs could be
      determined by checking IGP/BGP prefixes whose original advertised
      router-id are same as the Host-FEC, and also by local FEC-
      policy(i.e. which IGP/BGP prefix could be installed as an LDP FEC
      due to local FEC-policy).

   o  Based on the borrowed label get from the up-to-date Host-
      parasitism FEC Relationship data, Install ILM entries at the
      transit node and FTN entries at the ingress node for Parasitic-
      FECs.  The outgoing label of the Parasitic-FEC's FTN entry will be
      same as the one of the Host-FEC's FTN entry.  Both the incoming



Chen & Peng             Expires November 10, 2017               [Page 5]

Internet-DraftLDP Extensions for FEC elements sharing label     May 2017


      label and outgoing label of the parasitic-FEC's ILM entry will be
      same as the ones of the Host-FEC's ILM entry.

   o  Transmission of the up-to-date Label Borrowing message to one or
      more other LDP peers;

   Note that the traditional process of received Label Mapping/Withdraw
   Message for an FEC MUST NOT be affected by the process of the Label
   Borrow Message if the FEC is also a Parasitic-FEC according to the
   up-to-date Host-parasitism FEC Relationship data.  That is, the
   priority of the traditional process is higher.

5.  Security Considerations

   TBD.

6.  Acknowledgements

   TBD.

7.  IANA Considerations

   TBD.

8.  Normative references

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <http://www.rfc-editor.org/info/rfc2119>.

   [RFC3031]  Rosen, E., Viswanathan, A., and R. Callon, "Multiprotocol
              Label Switching Architecture", RFC 3031,
              DOI 10.17487/RFC3031, January 2001,
              <http://www.rfc-editor.org/info/rfc3031>.

   [RFC5036]  Andersson, L., Ed., Minei, I., Ed., and B. Thomas, Ed.,
              "LDP Specification", RFC 5036, DOI 10.17487/RFC5036,
              October 2007, <http://www.rfc-editor.org/info/rfc5036>.

   [RFC7794]  Ginsberg, L., Ed., Decraene, B., Previdi, S., Xu, X., and
              U. Chunduri, "IS-IS Prefix Attributes for Extended IPv4
              and IPv6 Reachability", RFC 7794, DOI 10.17487/RFC7794,
              March 2016, <http://www.rfc-editor.org/info/rfc7794>.







Chen & Peng             Expires November 10, 2017               [Page 6]

Internet-DraftLDP Extensions for FEC elements sharing label     May 2017


Authors' Addresses

   Ran Chen
   ZTE Corporation
   No.50 Software Avenue,Yuhuatai District
   Nanjing, Jiangsu Province  210012
   China

   Phone: +86 025 88014636
   Email: chen.ran@zte.com.cn


    Shaofu Peng
   ZTE Corporation
   No.68 Zijinghua Road,Yuhuatai District
   Nanjing, Jiangsu Province  210012
   China

   Email: peng.shaofu@zte.com.cn
































Chen & Peng             Expires November 10, 2017               [Page 7]
